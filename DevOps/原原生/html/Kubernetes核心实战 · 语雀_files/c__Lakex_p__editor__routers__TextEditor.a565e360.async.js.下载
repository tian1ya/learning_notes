(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{121:function(e,t,n){"use strict";n(420);var r=n(210),a=n(0),i=n.n(a),o=n(1),c=n.n(o),l=n(63),s=n.n(l),u=n(8),d=n.n(u);n(195);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=i.a.forwardRef((function(e,t){var n=e.className,o=e.overlayClassName,c=e.type,l=e.noArrow,s=e.hideWhenInactive,u=e.content,f=g(Object(a.useState)(e.visible||e.defaultVisible),2),h=f[0],p=f[1];Object(a.useEffect)((function(){"visible"in e&&p(e.visible)}),[e.visible]);var y=function(t){"visible"in e||p(t),e.onVisibleChange&&e.onVisibleChange(t)};return i.a.createElement(r.a,m({},e,{className:d()(n,"larkui-popover-trigger"),overlayClassName:d()(o,{"larkui-popover":!0,"larkui-popover-menu":"menu"===c,"larkui-popover-no-arrow":l}),content:s?i.a.createElement("div",{onClick:function(){y(!1)}},u):u,ref:t,visible:h,onVisibleChange:y}))}));v.propTypes=h(h({},r.a.PopoverProps),{},{type:c.a.oneOf(["menu"]),content:c.a.node,children:c.a.node,className:c.a.string,overlayClassName:c.a.string,noArrow:c.a.bool,hideWhenInactive:c.a.bool}),s()(v,r.a),t.a=v},151:function(e,t,n){},1553:function(e,t,n){"use strict";var r=n(11),a=n(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},o=n(22),c=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};c.displayName="UpOutlined";t.a=a.forwardRef(c)},1565:function(e,t,n){var r=function(e){return"[object Array]"==Object.prototype.toString.call(e)},a=function(e){return JSON.parse(JSON.stringify(e))},i={name:"json0",uri:"http://sharejs.org/types/JSONv0"},o={};function c(e){e.t="text0";var t={p:e.p.pop()};null!=e.si&&(t.i=e.si),null!=e.sd&&(t.d=e.sd),e.o=[t]}function l(e){e.p.push(e.o[0].p),null!=e.o[0].i&&(e.si=e.o[0].i),null!=e.o[0].d&&(e.sd=e.o[0].d),delete e.t,delete e.o}i.registerSubtype=function(e){o[e.name]=e},i.create=function(e){return void 0===e?null:a(e)},i.invertComponent=function(e){var t={p:e.p};return e.t&&o[e.t]&&(t.t=e.t,t.o=o[e.t].invert(e.o)),void 0!==e.si&&(t.sd=e.si),void 0!==e.sd&&(t.si=e.sd),void 0!==e.oi&&(t.od=e.oi),void 0!==e.od&&(t.oi=e.od),void 0!==e.li&&(t.ld=e.li),void 0!==e.ld&&(t.li=e.ld),void 0!==e.na&&(t.na=-e.na),void 0!==e.lm&&(t.lm=e.p[e.p.length-1],t.p=e.p.slice(0,e.p.length-1).concat([e.lm])),t},i.invert=function(e){for(var t=e.slice().reverse(),n=[],r=0;r<t.length;r++)n.push(i.invertComponent(t[r]));return n},i.checkValidOp=function(e){for(var t=0;t<e.length;t++)if(!r(e[t].p))throw new Error("Missing path")},i.checkList=function(e){if(!r(e))throw new Error("Referenced element not a list")},i.checkObj=function(e){if(!(t=e)||t.constructor!==Object)throw new Error("Referenced element not an object (it was "+JSON.stringify(e)+")");var t},i.apply=function(e,t){i.checkValidOp(t),t=a(t);for(var n={data:e},r=0;r<t.length;r++){var l=t[r];null==l.si&&null==l.sd||c(l);for(var s=null,u=n,d="data",f=0;f<l.p.length;f++){var h=l.p[f];if(s=u,d,u=u[d],d=h,null==s)throw new Error("Path invalid")}if(l.t&&void 0!==l.o&&o[l.t])u[d]=o[l.t].apply(u[d],l.o);else if(void 0!==l.na){if("number"!=typeof u[d])throw new Error("Referenced element not a number");u[d]+=l.na}else if(void 0!==l.li&&void 0!==l.ld)i.checkList(u),u[d]=l.li;else if(void 0!==l.li)i.checkList(u),u.splice(d,0,l.li);else if(void 0!==l.ld)i.checkList(u),u.splice(d,1);else if(void 0!==l.lm){if(i.checkList(u),l.lm!=d){var p=u[d];u.splice(d,1),u.splice(l.lm,0,p)}}else if(void 0!==l.oi)i.checkObj(u),u[d]=l.oi;else{if(void 0===l.od)throw new Error("invalid / missing instruction in op");i.checkObj(u),delete u[d]}}return n.data},i.shatter=function(e){for(var t=[],n=0;n<e.length;n++)t.push([e[n]]);return t},i.incrementalApply=function(e,t,n){for(var r=0;r<t.length;r++){var a=[t[r]];n(a,e=i.apply(e,a))}return e};var s=i.pathMatches=function(e,t,n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r]&&(!n||r!==e.length-1))return!1;return!0};i.append=function(e,t){if(t=a(t),0!==e.length){var n=e[e.length-1];if(null==t.si&&null==t.sd||null==n.si&&null==n.sd||(c(t),c(n)),s(t.p,n.p))if(t.t&&n.t&&t.t===n.t&&o[t.t]){if(n.o=o[t.t].compose(n.o,t.o),null!=t.si||null!=t.sd){for(var r=t.p,i=0;i<n.o.length-1;i++)t.o=[n.o.pop()],t.p=r.slice(),l(t),e.push(t);l(n)}}else null!=n.na&&null!=t.na?e[e.length-1]={p:n.p,na:n.na+t.na}:void 0!==n.li&&void 0===t.li&&t.ld===n.li?void 0!==n.ld?delete n.li:e.pop():void 0!==n.od&&void 0===n.oi&&void 0!==t.oi&&void 0===t.od?n.oi=t.oi:void 0!==n.oi&&void 0!==t.od?void 0!==t.oi?n.oi=t.oi:void 0!==n.od?delete n.oi:e.pop():void 0!==t.lm&&t.p[t.p.length-1]===t.lm||e.push(t);else null==t.si&&null==t.sd||null==n.si&&null==n.sd||(l(t),l(n)),e.push(t)}else e.push(t)},i.compose=function(e,t){i.checkValidOp(e),i.checkValidOp(t);for(var n=a(e),r=0;r<t.length;r++)i.append(n,t[r]);return n},i.normalize=function(e){var t=[];e=r(e)?e:[e];for(var n=0;n<e.length;n++){var a=e[n];null==a.p&&(a.p=[]),i.append(t,a)}return t},i.commonLengthForOps=function(e,t){var n=e.p.length,r=t.p.length;if((null!=e.na||e.t)&&n++,(null!=t.na||t.t)&&r++,0===n)return-1;if(0===r)return null;n--,r--;for(var a=0;a<n;a++){var i=e.p[a];if(a>=r||i!==t.p[a])return null}return n},i.canOpAffectPath=function(e,t){return null!=i.commonLengthForOps({p:t},e)},i.transformComponent=function(e,t,n,s){t=a(t);var u=i.commonLengthForOps(n,t),d=i.commonLengthForOps(t,n),f=t.p.length,h=n.p.length;if((null!=t.na||t.t)&&f++,(null!=n.na||n.t)&&h++,null!=d&&h>f&&t.p[d]==n.p[d])if(void 0!==t.ld)(m=a(n)).p=m.p.slice(f),t.ld=i.apply(a(t.ld),[m]);else if(void 0!==t.od){(m=a(n)).p=m.p.slice(f),t.od=i.apply(a(t.od),[m])}if(null!=u){var p=f==h,m=n;if(null==t.si&&null==t.sd||null==n.si&&null==n.sd||(c(t),c(m=a(n))),m.t&&o[m.t]){if(t.t&&t.t===m.t){var g=o[t.t].transform(t.o,m.o,s);if(null!=t.si||null!=t.sd)for(var y=t.p,v=0;v<g.length;v++)t.o=[g[v]],t.p=y.slice(),l(t),i.append(e,t);else(!r(g)||g.length>0)&&(t.o=g,i.append(e,t));return e}}else if(void 0!==n.na);else if(void 0!==n.li&&void 0!==n.ld){if(n.p[u]===t.p[u]){if(!p)return e;if(void 0!==t.ld){if(void 0===t.li||"left"!==s)return e;t.ld=a(n.li)}}}else if(void 0!==n.li)void 0!==t.li&&void 0===t.ld&&p&&t.p[u]===n.p[u]?"right"===s&&t.p[u]++:n.p[u]<=t.p[u]&&t.p[u]++,void 0!==t.lm&&p&&n.p[u]<=t.lm&&t.lm++;else if(void 0!==n.ld){if(void 0!==t.lm&&p){if(n.p[u]===t.p[u])return e;y=n.p[u];var b=t.p[u];(y<(x=t.lm)||y===x&&b<x)&&t.lm--}if(n.p[u]<t.p[u])t.p[u]--;else if(n.p[u]===t.p[u]){if(h<f)return e;if(void 0!==t.ld){if(void 0===t.li)return e;delete t.ld}}}else if(void 0!==n.lm)if(void 0!==t.lm&&f===h){b=t.p[u];var x=t.lm,k=n.p[u],w=n.lm;if(k!==w)if(b===k){if("left"!==s)return e;t.p[u]=w,b===x&&(t.lm=w)}else b>k&&t.p[u]--,b>w?t.p[u]++:b===w&&k>w&&(t.p[u]++,b===x&&t.lm++),(x>k||x===k&&x>b)&&t.lm--,x>w?t.lm++:x===w&&(w>k&&x>b||w<k&&x<b?"right"===s&&t.lm++:x>b?t.lm++:x===k&&t.lm--)}else if(void 0!==t.li&&void 0===t.ld&&p){b=n.p[u],x=n.lm;(y=t.p[u])>b&&t.p[u]--,y>x&&t.p[u]++}else{b=n.p[u],x=n.lm;(y=t.p[u])===b?t.p[u]=x:(y>b&&t.p[u]--,(y>x||y===x&&b>x)&&t.p[u]++)}else if(void 0!==n.oi&&void 0!==n.od){if(t.p[u]===n.p[u]){if(void 0===t.oi||!p)return e;if("right"===s)return e;t.od=n.oi}}else if(void 0!==n.oi){if(void 0!==t.oi&&t.p[u]===n.p[u]){if("left"!==s)return e;i.append(e,{p:t.p,od:n.oi})}}else if(void 0!==n.od&&t.p[u]==n.p[u]){if(!p)return e;if(void 0===t.oi)return e;delete t.od}}return i.append(e,t),e},n(625)(i,i.transformComponent,i.checkValidOp,i.append);var u=n(1566);i.registerSubtype(u),e.exports=i},1566:function(e,t,n){var r=e.exports={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(e){if(null!=e&&"string"!=typeof e)throw new Error("Initial data must be a string");return e||""}},a=function(e,t,n){return e.slice(0,t)+n+e.slice(t)},i=function(e){if("number"!=typeof e.p)throw new Error("component missing position field");if("string"==typeof e.i==("string"==typeof e.d))throw new Error("component needs an i or d field");if(e.p<0)throw new Error("position cannot be negative")},o=function(e){for(var t=0;t<e.length;t++)i(e[t])};r.apply=function(e,t){var n;o(t);for(var r=0;r<t.length;r++){var i=t[r];if(null!=i.i)e=a(e,i.p,i.i);else{if(n=e.slice(i.p,i.p+i.d.length),i.d!==n)throw new Error("Delete component '"+i.d+"' does not match deleted text '"+n+"'");e=e.slice(0,i.p)+e.slice(i.p+i.d.length)}}return e};var c=r._append=function(e,t){if(""!==t.i&&""!==t.d)if(0===e.length)e.push(t);else{var n=e[e.length-1];null!=n.i&&null!=t.i&&n.p<=t.p&&t.p<=n.p+n.i.length?e[e.length-1]={i:a(n.i,t.p-n.p,t.i),p:n.p}:null!=n.d&&null!=t.d&&t.p<=n.p&&n.p<=t.p+t.d.length?e[e.length-1]={d:a(t.d,n.p-t.p,n.d),p:t.p}:e.push(t)}};r.compose=function(e,t){o(e),o(t);for(var n=e.slice(),r=0;r<t.length;r++)c(n,t[r]);return n},r.normalize=function(e){var t=[];null==e.i&&null==e.p||(e=[e]);for(var n=0;n<e.length;n++){var r=e[n];null==r.p&&(r.p=0),c(t,r)}return t};var l=function(e,t,n){return null!=t.i?t.p<e||t.p===e&&n?e+t.i.length:e:e<=t.p?e:e<=t.p+t.d.length?t.p:e-t.d.length};r.transformCursor=function(e,t,n){for(var r="right"===n,a=0;a<t.length;a++)e=l(e,t[a],r);return e};var s=r._tc=function(e,t,n,r){if(i(t),i(n),null!=t.i)c(e,{i:t.i,p:l(t.p,n,"right"===r)});else if(null!=n.i){var a=t.d;t.p<n.p&&(c(e,{d:a.slice(0,n.p-t.p),p:t.p}),a=a.slice(n.p-t.p)),""!==a&&c(e,{d:a,p:t.p+n.i.length})}else if(t.p>=n.p+n.d.length)c(e,{d:t.d,p:t.p-n.d.length});else if(t.p+t.d.length<=n.p)c(e,t);else{var o={d:"",p:t.p};t.p<n.p&&(o.d=t.d.slice(0,n.p-t.p)),t.p+t.d.length>n.p+n.d.length&&(o.d+=t.d.slice(n.p+n.d.length-t.p));var s=Math.max(t.p,n.p),u=Math.min(t.p+t.d.length,n.p+n.d.length);if(t.d.slice(s-t.p,u-t.p)!==n.d.slice(s-n.p,u-n.p))throw new Error("Delete ops delete different text in the same region of the document");""!==o.d&&(o.p=l(o.p,n),c(e,o))}return e};r.invert=function(e){e=e.slice().reverse();for(var t=0;t<e.length;t++)e[t]=null!=(n=e[t]).i?{d:n.i,p:n.p}:{i:n.d,p:n.p};var n;return e},n(625)(r,s,o,c)},1567:function(e,t,n){var r=n(627),a=n(1568);n(628);function i(e){return null==e}function o(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).whiteList=e.whiteList||r.whiteList,e.onAttr=e.onAttr||r.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||r.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||r.safeAttrValue,this.options=e}o.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onAttr,o=t.onIgnoreAttr,c=t.safeAttrValue;return a(e,(function(e,t,a,l,s){var u=n[a],d=!1;if(!0===u?d=u:"function"==typeof u?d=u(l):u instanceof RegExp&&(d=u.test(l)),!0!==d&&(d=!1),l=c(a,l)){var f,h={position:t,sourcePosition:e,source:s,isWhite:d};return d?i(f=r(a,l,h))?a+":"+l:f:i(f=o(a,l,h))?void 0:f}}))},e.exports=o},1568:function(e,t,n){var r=n(628);e.exports=function(e,t){";"!==(e=r.trimRight(e))[e.length-1]&&(e+=";");var n=e.length,a=!1,i=0,o=0,c="";function l(){if(!a){var n=r.trim(e.slice(i,o)),l=n.indexOf(":");if(-1!==l){var s=r.trim(n.slice(0,l)),u=r.trim(n.slice(l+1));if(s){var d=t(i,c.length,s,u,n);d&&(c+=d+"; ")}}}i=o+1}for(;o<n;o++){var s=e[o];if("/"===s&&"*"===e[o+1]){var u=e.indexOf("*/",o+2);if(-1===u)break;i=(o=u+1)+1,a=!1}else"("===s?a=!0:")"===s?a=!1:";"===s?a||l():"\n"===s&&l()}return r.trim(c)}},1569:function(e,t,n){var r=n(507).FilterCSS,a=n(626),i=n(629),o=i.parseTag,c=i.parseAttr,l=n(508);function s(e){return null==e}function u(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=a.onIgnoreTagStripAll),e.whiteList=e.whiteList||a.whiteList,e.onTag=e.onTag||a.onTag,e.onTagAttr=e.onTagAttr||a.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||a.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||a.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||a.safeAttrValue,e.escapeHtml=e.escapeHtml||a.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new r(e.css))}u.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onTag,i=t.onIgnoreTag,u=t.onTagAttr,d=t.onIgnoreTagAttr,f=t.safeAttrValue,h=t.escapeHtml,p=this.cssFilter;t.stripBlankChar&&(e=a.stripBlankChar(e)),t.allowCommentTag||(e=a.stripCommentTag(e));var m=!1;if(t.stripIgnoreTagBody){m=a.StripTagBody(t.stripIgnoreTagBody,i);i=m.onIgnoreTag}var g=o(e,(function(e,t,a,o,m){var g,y={sourcePosition:e,position:t,isClosing:m,isWhite:n.hasOwnProperty(a)};if(!s(g=r(a,o,y)))return g;if(y.isWhite){if(y.isClosing)return"</"+a+">";var v=function(e){var t=l.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var n="/"===(e=l.trim(e.slice(t+1,-1)))[e.length-1];return n&&(e=l.trim(e.slice(0,-1))),{html:e,closing:n}}(o),b=n[a],x=c(v.html,(function(e,t){var n,r=-1!==l.indexOf(b,e);return s(n=u(a,e,t,r))?r?(t=f(a,e,t,p))?e+'="'+t+'"':e:s(n=d(a,e,t,r))?void 0:n:n}));o="<"+a;return x&&(o+=" "+x),v.closing&&(o+=" /"),o+=">"}return s(g=i(a,o,y))?h(o):g}),h);return m&&(g=m.remove(g)),g},e.exports=u},1576:function(e,t,n){var r=n(4);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},1577:function(e,t,n){"use strict";var r=n(1578),a=n(244),i=n(632),o=n(509),c=n(633),l=Object.prototype.toString;function s(e){if(!(this instanceof s))return new s(e);this.options=a.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(o[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var u;if(u="string"==typeof t.dictionary?i.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=r.deflateSetDictionary(this.strm,u)))throw new Error(o[n]);this._dict_set=!0}}function u(e,t){var n=new s(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}s.prototype.push=function(e,t){var n,o,c=this.strm,s=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,"string"==typeof e?c.input=i.string2buf(e):"[object ArrayBuffer]"===l.call(e)?c.input=new Uint8Array(e):c.input=e,c.next_in=0,c.avail_in=c.input.length;do{if(0===c.avail_out&&(c.output=new a.Buf8(s),c.next_out=0,c.avail_out=s),1!==(n=r.deflate(c,o))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==c.avail_out&&(0!==c.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(i.buf2binstring(a.shrinkBuf(c.output,c.next_out))):this.onData(a.shrinkBuf(c.output,c.next_out)))}while((c.avail_in>0||0===c.avail_out)&&1!==n);return 4===o?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==o||(this.onEnd(0),c.avail_out=0,!0)},s.prototype.onData=function(e){this.chunks.push(e)},s.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=s,t.deflate=u,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,u(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,u(e,t)}},1578:function(e,t,n){"use strict";var r,a=n(244),i=n(1579),o=n(630),c=n(631),l=n(509),s=-2,u=258,d=262,f=103,h=113,p=666;function m(e,t){return e.msg=l[t],t}function g(e){return(e<<1)-(e>4?9:0)}function y(e){for(var t=e.length;--t>=0;)e[t]=0}function v(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(a.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function b(e,t){i._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,v(e.strm)}function x(e,t){e.pending_buf[e.pending++]=t}function k(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function w(e,t){var n,r,a=e.max_chain_length,i=e.strstart,o=e.prev_length,c=e.nice_match,l=e.strstart>e.w_size-d?e.strstart-(e.w_size-d):0,s=e.window,f=e.w_mask,h=e.prev,p=e.strstart+u,m=s[i+o-1],g=s[i+o];e.prev_length>=e.good_match&&(a>>=2),c>e.lookahead&&(c=e.lookahead);do{if(s[(n=t)+o]===g&&s[n+o-1]===m&&s[n]===s[i]&&s[++n]===s[i+1]){i+=2,n++;do{}while(s[++i]===s[++n]&&s[++i]===s[++n]&&s[++i]===s[++n]&&s[++i]===s[++n]&&s[++i]===s[++n]&&s[++i]===s[++n]&&s[++i]===s[++n]&&s[++i]===s[++n]&&i<p);if(r=u-(p-i),i=p-u,r>o){if(e.match_start=t,o=r,r>=c)break;m=s[i+o-1],g=s[i+o]}}}while((t=h[t&f])>l&&0!=--a);return o<=e.lookahead?o:e.lookahead}function O(e){var t,n,r,i,l,s,u,f,h,p,m=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-d)){a.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=m?r-m:0}while(--n);t=n=m;do{r=e.prev[--t],e.prev[t]=r>=m?r-m:0}while(--n);i+=m}if(0===e.strm.avail_in)break;if(s=e.strm,u=e.window,f=e.strstart+e.lookahead,h=i,p=void 0,(p=s.avail_in)>h&&(p=h),n=0===p?0:(s.avail_in-=p,a.arraySet(u,s.input,s.next_in,p,f),1===s.state.wrap?s.adler=o(s.adler,u,p,f):2===s.state.wrap&&(s.adler=c(s.adler,u,p,f)),s.next_in+=p,s.total_in+=p,p),e.lookahead+=n,e.lookahead+e.insert>=3)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+3-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<d&&0!==e.strm.avail_in)}function C(e,t){for(var n,r;;){if(e.lookahead<d){if(O(e),e.lookahead<d&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-d&&(e.match_length=w(e,n)),e.match_length>=3)if(r=i._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function E(e,t){for(var n,r,a;;){if(e.lookahead<d){if(O(e),e.lookahead<d&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-d&&(e.match_length=w(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,r=i._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(b(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=i._tr_tally(e,0,e.window[e.strstart-1]))&&b(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=i._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function P(e,t,n,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=a}function _(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(1146),this.dyn_dtree=new a.Buf16(122),this.bl_tree=new a.Buf16(78),y(this.dyn_ltree),y(this.dyn_dtree),y(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(16),this.heap=new a.Buf16(573),y(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(573),y(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function j(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:h,e.adler=2===t.wrap?0:1,t.last_flush=0,i._tr_init(t),0):m(e,s)}function S(e){var t,n=j(e);return 0===n&&((t=e.state).window_size=2*t.w_size,y(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n}function R(e,t,n,r,i,o){if(!e)return s;var c=1;if(-1===t&&(t=6),r<0?(c=0,r=-r):r>15&&(c=2,r-=16),i<1||i>9||8!==n||r<8||r>15||t<0||t>9||o<0||o>4)return m(e,s);8===r&&(r=9);var l=new _;return e.state=l,l.strm=e,l.wrap=c,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new a.Buf8(2*l.w_size),l.head=new a.Buf16(l.hash_size),l.prev=new a.Buf16(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new a.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=n,S(e)}r=[new P(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(O(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,b(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-d&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(b(e,!1),e.strm.avail_out),1)})),new P(4,4,8,4,C),new P(4,5,16,8,C),new P(4,6,32,32,C),new P(4,4,16,16,E),new P(8,16,32,32,E),new P(8,16,128,128,E),new P(8,32,128,256,E),new P(32,128,258,1024,E),new P(32,258,258,4096,E)],t.deflateInit=function(e,t){return R(e,t,8,15,8,0)},t.deflateInit2=R,t.deflateReset=S,t.deflateResetKeep=j,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?s:(e.state.gzhead=t,0):s},t.deflate=function(e,t){var n,a,o,l;if(!e||!e.state||t>5||t<0)return e?m(e,s):s;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||a.status===p&&4!==t)return m(e,0===e.avail_out?-5:s);if(a.strm=e,n=a.last_flush,a.last_flush=t,42===a.status)if(2===a.wrap)e.adler=0,x(a,31),x(a,139),x(a,8),a.gzhead?(x(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),x(a,255&a.gzhead.time),x(a,a.gzhead.time>>8&255),x(a,a.gzhead.time>>16&255),x(a,a.gzhead.time>>24&255),x(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),x(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(x(a,255&a.gzhead.extra.length),x(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=c(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(x(a,0),x(a,0),x(a,0),x(a,0),x(a,0),x(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),x(a,3),a.status=h);else{var d=8+(a.w_bits-8<<4)<<8;d|=(a.strategy>=2||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(d|=32),d+=31-d%31,a.status=h,k(a,d),0!==a.strstart&&(k(a,e.adler>>>16),k(a,65535&e.adler)),e.adler=1}if(69===a.status)if(a.gzhead.extra){for(o=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>o&&(e.adler=c(e.adler,a.pending_buf,a.pending-o,o)),v(e),o=a.pending,a.pending!==a.pending_buf_size));)x(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>o&&(e.adler=c(e.adler,a.pending_buf,a.pending-o,o)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){o=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>o&&(e.adler=c(e.adler,a.pending_buf,a.pending-o,o)),v(e),o=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,x(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>o&&(e.adler=c(e.adler,a.pending_buf,a.pending-o,o)),0===l&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){o=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>o&&(e.adler=c(e.adler,a.pending_buf,a.pending-o,o)),v(e),o=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,x(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>o&&(e.adler=c(e.adler,a.pending_buf,a.pending-o,o)),0===l&&(a.status=f)}else a.status=f;if(a.status===f&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&v(e),a.pending+2<=a.pending_buf_size&&(x(a,255&e.adler),x(a,e.adler>>8&255),e.adler=0,a.status=h)):a.status=h),0!==a.pending){if(v(e),0===e.avail_out)return a.last_flush=-1,0}else if(0===e.avail_in&&g(t)<=g(n)&&4!==t)return m(e,-5);if(a.status===p&&0!==e.avail_in)return m(e,-5);if(0!==e.avail_in||0!==a.lookahead||0!==t&&a.status!==p){var w=2===a.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(O(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(a,t):3===a.strategy?function(e,t){for(var n,r,a,o,c=e.window;;){if(e.lookahead<=u){if(O(e),e.lookahead<=u&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=c[a=e.strstart-1])===c[++a]&&r===c[++a]&&r===c[++a]){o=e.strstart+u;do{}while(r===c[++a]&&r===c[++a]&&r===c[++a]&&r===c[++a]&&r===c[++a]&&r===c[++a]&&r===c[++a]&&r===c[++a]&&a<o);e.match_length=u-(o-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=i._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(a,t):r[a.level].func(a,t);if(3!==w&&4!==w||(a.status=p),1===w||3===w)return 0===e.avail_out&&(a.last_flush=-1),0;if(2===w&&(1===t?i._tr_align(a):5!==t&&(i._tr_stored_block(a,0,0,!1),3===t&&(y(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),v(e),0===e.avail_out))return a.last_flush=-1,0}return 4!==t?0:a.wrap<=0?1:(2===a.wrap?(x(a,255&e.adler),x(a,e.adler>>8&255),x(a,e.adler>>16&255),x(a,e.adler>>24&255),x(a,255&e.total_in),x(a,e.total_in>>8&255),x(a,e.total_in>>16&255),x(a,e.total_in>>24&255)):(k(a,e.adler>>>16),k(a,65535&e.adler)),v(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&t!==f&&t!==h&&t!==p?m(e,s):(e.state=null,t===h?m(e,-3):0):s},t.deflateSetDictionary=function(e,t){var n,r,i,c,l,u,d,f,h=t.length;if(!e||!e.state)return s;if(2===(c=(n=e.state).wrap)||1===c&&42!==n.status||n.lookahead)return s;for(1===c&&(e.adler=o(e.adler,t,h,0)),n.wrap=0,h>=n.w_size&&(0===c&&(y(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new a.Buf8(n.w_size),a.arraySet(f,t,h-n.w_size,n.w_size,0),t=f,h=n.w_size),l=e.avail_in,u=e.next_in,d=e.input,e.avail_in=h,e.next_in=0,e.input=t,O(n);n.lookahead>=3;){r=n.strstart,i=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=2,O(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=u,e.input=d,e.avail_in=l,n.wrap=c,0},t.deflateInfo="pako deflate (from Nodeca project)"},1579:function(e,t,n){"use strict";var r=n(244);function a(e){for(var t=e.length;--t>=0;)e[t]=0}var i=256,o=286,c=30,l=15,s=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],u=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],f=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],h=new Array(576);a(h);var p=new Array(60);a(p);var m=new Array(512);a(m);var g=new Array(256);a(g);var y=new Array(29);a(y);var v,b,x,k=new Array(c);function w(e,t,n,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}function O(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function C(e){return e<256?m[e]:m[256+(e>>>7)]}function E(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function P(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,E(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function _(e,t,n){P(e,n[2*t],n[2*t+1])}function j(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function S(e,t,n){var r,a,i=new Array(16),o=0;for(r=1;r<=l;r++)i[r]=o=o+n[r-1]<<1;for(a=0;a<=t;a++){var c=e[2*a+1];0!==c&&(e[2*a]=j(i[c]++,c))}}function R(e){var t;for(t=0;t<o;t++)e.dyn_ltree[2*t]=0;for(t=0;t<c;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function M(e){e.bi_valid>8?E(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function B(e,t,n,r){var a=2*t,i=2*n;return e[a]<e[i]||e[a]===e[i]&&r[t]<=r[n]}function A(e,t,n){for(var r=e.heap[n],a=n<<1;a<=e.heap_len&&(a<e.heap_len&&B(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!B(t,r,e.heap[a],e.depth));)e.heap[n]=e.heap[a],n=a,a<<=1;e.heap[n]=r}function D(e,t,n){var r,a,o,c,l=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],a=e.pending_buf[e.l_buf+l],l++,0===r?_(e,a,t):(_(e,(o=g[a])+i+1,t),0!==(c=s[o])&&P(e,a-=y[o],c),_(e,o=C(--r),n),0!==(c=u[o])&&P(e,r-=k[o],c))}while(l<e.last_lit);_(e,256,t)}function N(e,t){var n,r,a,i=t.dyn_tree,o=t.stat_desc.static_tree,c=t.stat_desc.has_stree,s=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<s;n++)0!==i[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(a=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[a]=0,e.opt_len--,c&&(e.static_len-=o[2*a+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)A(e,i,n);a=s;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],A(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,i[2*a]=i[2*n]+i[2*r],e.depth[a]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,i[2*n+1]=i[2*r+1]=a,e.heap[1]=a++,A(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,a,i,o,c,s=t.dyn_tree,u=t.max_code,d=t.stat_desc.static_tree,f=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,m=t.stat_desc.max_length,g=0;for(i=0;i<=l;i++)e.bl_count[i]=0;for(s[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(i=s[2*s[2*(r=e.heap[n])+1]+1]+1)>m&&(i=m,g++),s[2*r+1]=i,r>u||(e.bl_count[i]++,o=0,r>=p&&(o=h[r-p]),c=s[2*r],e.opt_len+=c*(i+o),f&&(e.static_len+=c*(d[2*r+1]+o)));if(0!==g){do{for(i=m-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[m]--,g-=2}while(g>0);for(i=m;0!==i;i--)for(r=e.bl_count[i];0!==r;)(a=e.heap[--n])>u||(s[2*a+1]!==i&&(e.opt_len+=(i-s[2*a+1])*s[2*a],s[2*a+1]=i),r--)}}(e,t),S(i,u,e.bl_count)}function L(e,t,n){var r,a,i=-1,o=t[1],c=0,l=7,s=4;for(0===o&&(l=138,s=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)a=o,o=t[2*(r+1)+1],++c<l&&a===o||(c<s?e.bl_tree[2*a]+=c:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[32]++):c<=10?e.bl_tree[34]++:e.bl_tree[36]++,c=0,i=a,0===o?(l=138,s=3):a===o?(l=6,s=3):(l=7,s=4))}function I(e,t,n){var r,a,i=-1,o=t[1],c=0,l=7,s=4;for(0===o&&(l=138,s=3),r=0;r<=n;r++)if(a=o,o=t[2*(r+1)+1],!(++c<l&&a===o)){if(c<s)do{_(e,a,e.bl_tree)}while(0!=--c);else 0!==a?(a!==i&&(_(e,a,e.bl_tree),c--),_(e,16,e.bl_tree),P(e,c-3,2)):c<=10?(_(e,17,e.bl_tree),P(e,c-3,3)):(_(e,18,e.bl_tree),P(e,c-11,7));c=0,i=a,0===o?(l=138,s=3):a===o?(l=6,s=3):(l=7,s=4)}}a(k);var T=!1;function z(e,t,n,a){P(e,0+(a?1:0),3),function(e,t,n,a){M(e),a&&(E(e,n),E(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}t._tr_init=function(e){T||(!function(){var e,t,n,r,a,i=new Array(16);for(n=0,r=0;r<28;r++)for(y[r]=n,e=0;e<1<<s[r];e++)g[n++]=r;for(g[n-1]=r,a=0,r=0;r<16;r++)for(k[r]=a,e=0;e<1<<u[r];e++)m[a++]=r;for(a>>=7;r<c;r++)for(k[r]=a<<7,e=0;e<1<<u[r]-7;e++)m[256+a++]=r;for(t=0;t<=l;t++)i[t]=0;for(e=0;e<=143;)h[2*e+1]=8,e++,i[8]++;for(;e<=255;)h[2*e+1]=9,e++,i[9]++;for(;e<=279;)h[2*e+1]=7,e++,i[7]++;for(;e<=287;)h[2*e+1]=8,e++,i[8]++;for(S(h,287,i),e=0;e<c;e++)p[2*e+1]=5,p[2*e]=j(e,5);v=new w(h,s,257,o,l),b=new w(p,u,0,c,l),x=new w(new Array(0),d,0,19,7)}(),T=!0),e.l_desc=new O(e.dyn_ltree,v),e.d_desc=new O(e.dyn_dtree,b),e.bl_desc=new O(e.bl_tree,x),e.bi_buf=0,e.bi_valid=0,R(e)},t._tr_stored_block=z,t._tr_flush_block=function(e,t,n,r){var a,o,c=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<i;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),N(e,e.l_desc),N(e,e.d_desc),c=function(e){var t;for(L(e,e.dyn_ltree,e.l_desc.max_code),L(e,e.dyn_dtree,e.d_desc.max_code),N(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*f[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=a&&(a=o)):a=o=n+5,n+4<=a&&-1!==t?z(e,t,n,r):4===e.strategy||o===a?(P(e,2+(r?1:0),3),D(e,h,p)):(P(e,4+(r?1:0),3),function(e,t,n,r){var a;for(P(e,t-257,5),P(e,n-1,5),P(e,r-4,4),a=0;a<r;a++)P(e,e.bl_tree[2*f[a]+1],3);I(e,e.dyn_ltree,t-1),I(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,c+1),D(e,e.dyn_ltree,e.dyn_dtree)),R(e),r&&M(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(g[n]+i+1)]++,e.dyn_dtree[2*C(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){P(e,2,3),_(e,256,h),function(e){16===e.bi_valid?(E(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},1580:function(e,t,n){"use strict";var r=n(1581),a=n(244),i=n(632),o=n(634),c=n(509),l=n(633),s=n(1584),u=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==o.Z_OK)throw new Error(c[n]);if(this.header=new s,r.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=i.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=r.inflateSetDictionary(this.strm,t.dictionary))!==o.Z_OK))throw new Error(c[n])}function f(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||c[n.err];return n.result}d.prototype.push=function(e,t){var n,c,l,s,d,f=this.strm,h=this.options.chunkSize,p=this.options.dictionary,m=!1;if(this.ended)return!1;c=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?f.input=i.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new a.Buf8(h),f.next_out=0,f.avail_out=h),(n=r.inflate(f,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&p&&(n=r.inflateSetDictionary(this.strm,p)),n===o.Z_BUF_ERROR&&!0===m&&(n=o.Z_OK,m=!1),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&n!==o.Z_STREAM_END&&(0!==f.avail_in||c!==o.Z_FINISH&&c!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(l=i.utf8border(f.output,f.next_out),s=f.next_out-l,d=i.buf2string(f.output,l),f.next_out=s,f.avail_out=h-s,s&&a.arraySet(f.output,f.output,l,s,0),this.onData(d)):this.onData(a.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(m=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(c=o.Z_FINISH),c===o.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):c!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),f.avail_out=0,!0)},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=d,t.inflate=f,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},t.ungzip=f},1581:function(e,t,n){"use strict";var r=n(244),a=n(630),i=n(631),o=n(1582),c=n(1583),l=-2,s=12,u=30;function d(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function f(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function h(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):l}function p(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,h(e)):l}function m(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?l:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,p(e))):l}function g(e,t){var n,r;return e?(r=new f,e.state=r,r.window=null,0!==(n=m(e,t))&&(e.state=null),n):l}var y,v,b=!0;function x(e){if(b){var t;for(y=new r.Buf32(512),v=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(c(1,e.lens,0,288,y,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;c(2,e.lens,0,32,v,0,e.work,{bits:5}),b=!1}e.lencode=y,e.lenbits=9,e.distcode=v,e.distbits=5}function k(e,t,n,a){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),a>=o.wsize?(r.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>a&&(i=a),r.arraySet(o.window,t,n-a,i,o.wnext),(a-=i)?(r.arraySet(o.window,t,n-a,a,0),o.wnext=a,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}t.inflateReset=p,t.inflateReset2=m,t.inflateResetKeep=h,t.inflateInit=function(e){return g(e,15)},t.inflateInit2=g,t.inflate=function(e,t){var n,f,h,p,m,g,y,v,b,w,O,C,E,P,_,j,S,R,M,B,A,D,N,L,I=0,T=new r.Buf8(4),z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return l;(n=e.state).mode===s&&(n.mode=13),m=e.next_out,h=e.output,y=e.avail_out,p=e.next_in,f=e.input,g=e.avail_in,v=n.hold,b=n.bits,w=g,O=y,D=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;b<16;){if(0===g)break e;g--,v+=f[p++]<<b,b+=8}if(2&n.wrap&&35615===v){n.check=0,T[0]=255&v,T[1]=v>>>8&255,n.check=i(n.check,T,2,0),v=0,b=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&v)<<8)+(v>>8))%31){e.msg="incorrect header check",n.mode=u;break}if(8!=(15&v)){e.msg="unknown compression method",n.mode=u;break}if(b-=4,A=8+(15&(v>>>=4)),0===n.wbits)n.wbits=A;else if(A>n.wbits){e.msg="invalid window size",n.mode=u;break}n.dmax=1<<A,e.adler=n.check=1,n.mode=512&v?10:s,v=0,b=0;break;case 2:for(;b<16;){if(0===g)break e;g--,v+=f[p++]<<b,b+=8}if(n.flags=v,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=u;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=u;break}n.head&&(n.head.text=v>>8&1),512&n.flags&&(T[0]=255&v,T[1]=v>>>8&255,n.check=i(n.check,T,2,0)),v=0,b=0,n.mode=3;case 3:for(;b<32;){if(0===g)break e;g--,v+=f[p++]<<b,b+=8}n.head&&(n.head.time=v),512&n.flags&&(T[0]=255&v,T[1]=v>>>8&255,T[2]=v>>>16&255,T[3]=v>>>24&255,n.check=i(n.check,T,4,0)),v=0,b=0,n.mode=4;case 4:for(;b<16;){if(0===g)break e;g--,v+=f[p++]<<b,b+=8}n.head&&(n.head.xflags=255&v,n.head.os=v>>8),512&n.flags&&(T[0]=255&v,T[1]=v>>>8&255,n.check=i(n.check,T,2,0)),v=0,b=0,n.mode=5;case 5:if(1024&n.flags){for(;b<16;){if(0===g)break e;g--,v+=f[p++]<<b,b+=8}n.length=v,n.head&&(n.head.extra_len=v),512&n.flags&&(T[0]=255&v,T[1]=v>>>8&255,n.check=i(n.check,T,2,0)),v=0,b=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((C=n.length)>g&&(C=g),C&&(n.head&&(A=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,f,p,C,A)),512&n.flags&&(n.check=i(n.check,f,C,p)),g-=C,p+=C,n.length-=C),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===g)break e;C=0;do{A=f[p+C++],n.head&&A&&n.length<65536&&(n.head.name+=String.fromCharCode(A))}while(A&&C<g);if(512&n.flags&&(n.check=i(n.check,f,C,p)),g-=C,p+=C,A)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===g)break e;C=0;do{A=f[p+C++],n.head&&A&&n.length<65536&&(n.head.comment+=String.fromCharCode(A))}while(A&&C<g);if(512&n.flags&&(n.check=i(n.check,f,C,p)),g-=C,p+=C,A)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;b<16;){if(0===g)break e;g--,v+=f[p++]<<b,b+=8}if(v!==(65535&n.check)){e.msg="header crc mismatch",n.mode=u;break}v=0,b=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=s;break;case 10:for(;b<32;){if(0===g)break e;g--,v+=f[p++]<<b,b+=8}e.adler=n.check=d(v),v=0,b=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=m,e.avail_out=y,e.next_in=p,e.avail_in=g,n.hold=v,n.bits=b,2;e.adler=n.check=1,n.mode=s;case s:if(5===t||6===t)break e;case 13:if(n.last){v>>>=7&b,b-=7&b,n.mode=27;break}for(;b<3;){if(0===g)break e;g--,v+=f[p++]<<b,b+=8}switch(n.last=1&v,b-=1,3&(v>>>=1)){case 0:n.mode=14;break;case 1:if(x(n),n.mode=20,6===t){v>>>=2,b-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=u}v>>>=2,b-=2;break;case 14:for(v>>>=7&b,b-=7&b;b<32;){if(0===g)break e;g--,v+=f[p++]<<b,b+=8}if((65535&v)!=(v>>>16^65535)){e.msg="invalid stored block lengths",n.mode=u;break}if(n.length=65535&v,v=0,b=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(C=n.length){if(C>g&&(C=g),C>y&&(C=y),0===C)break e;r.arraySet(h,f,p,C,m),g-=C,p+=C,y-=C,m+=C,n.length-=C;break}n.mode=s;break;case 17:for(;b<14;){if(0===g)break e;g--,v+=f[p++]<<b,b+=8}if(n.nlen=257+(31&v),v>>>=5,b-=5,n.ndist=1+(31&v),v>>>=5,b-=5,n.ncode=4+(15&v),v>>>=4,b-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=u;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;b<3;){if(0===g)break e;g--,v+=f[p++]<<b,b+=8}n.lens[z[n.have++]]=7&v,v>>>=3,b-=3}for(;n.have<19;)n.lens[z[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,N={bits:n.lenbits},D=c(0,n.lens,0,19,n.lencode,0,n.work,N),n.lenbits=N.bits,D){e.msg="invalid code lengths set",n.mode=u;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;j=(I=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,S=65535&I,!((_=I>>>24)<=b);){if(0===g)break e;g--,v+=f[p++]<<b,b+=8}if(S<16)v>>>=_,b-=_,n.lens[n.have++]=S;else{if(16===S){for(L=_+2;b<L;){if(0===g)break e;g--,v+=f[p++]<<b,b+=8}if(v>>>=_,b-=_,0===n.have){e.msg="invalid bit length repeat",n.mode=u;break}A=n.lens[n.have-1],C=3+(3&v),v>>>=2,b-=2}else if(17===S){for(L=_+3;b<L;){if(0===g)break e;g--,v+=f[p++]<<b,b+=8}b-=_,A=0,C=3+(7&(v>>>=_)),v>>>=3,b-=3}else{for(L=_+7;b<L;){if(0===g)break e;g--,v+=f[p++]<<b,b+=8}b-=_,A=0,C=11+(127&(v>>>=_)),v>>>=7,b-=7}if(n.have+C>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=u;break}for(;C--;)n.lens[n.have++]=A}}if(n.mode===u)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=u;break}if(n.lenbits=9,N={bits:n.lenbits},D=c(1,n.lens,0,n.nlen,n.lencode,0,n.work,N),n.lenbits=N.bits,D){e.msg="invalid literal/lengths set",n.mode=u;break}if(n.distbits=6,n.distcode=n.distdyn,N={bits:n.distbits},D=c(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,N),n.distbits=N.bits,D){e.msg="invalid distances set",n.mode=u;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(g>=6&&y>=258){e.next_out=m,e.avail_out=y,e.next_in=p,e.avail_in=g,n.hold=v,n.bits=b,o(e,O),m=e.next_out,h=e.output,y=e.avail_out,p=e.next_in,f=e.input,g=e.avail_in,v=n.hold,b=n.bits,n.mode===s&&(n.back=-1);break}for(n.back=0;j=(I=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,S=65535&I,!((_=I>>>24)<=b);){if(0===g)break e;g--,v+=f[p++]<<b,b+=8}if(j&&0==(240&j)){for(R=_,M=j,B=S;j=(I=n.lencode[B+((v&(1<<R+M)-1)>>R)])>>>16&255,S=65535&I,!(R+(_=I>>>24)<=b);){if(0===g)break e;g--,v+=f[p++]<<b,b+=8}v>>>=R,b-=R,n.back+=R}if(v>>>=_,b-=_,n.back+=_,n.length=S,0===j){n.mode=26;break}if(32&j){n.back=-1,n.mode=s;break}if(64&j){e.msg="invalid literal/length code",n.mode=u;break}n.extra=15&j,n.mode=22;case 22:if(n.extra){for(L=n.extra;b<L;){if(0===g)break e;g--,v+=f[p++]<<b,b+=8}n.length+=v&(1<<n.extra)-1,v>>>=n.extra,b-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;j=(I=n.distcode[v&(1<<n.distbits)-1])>>>16&255,S=65535&I,!((_=I>>>24)<=b);){if(0===g)break e;g--,v+=f[p++]<<b,b+=8}if(0==(240&j)){for(R=_,M=j,B=S;j=(I=n.distcode[B+((v&(1<<R+M)-1)>>R)])>>>16&255,S=65535&I,!(R+(_=I>>>24)<=b);){if(0===g)break e;g--,v+=f[p++]<<b,b+=8}v>>>=R,b-=R,n.back+=R}if(v>>>=_,b-=_,n.back+=_,64&j){e.msg="invalid distance code",n.mode=u;break}n.offset=S,n.extra=15&j,n.mode=24;case 24:if(n.extra){for(L=n.extra;b<L;){if(0===g)break e;g--,v+=f[p++]<<b,b+=8}n.offset+=v&(1<<n.extra)-1,v>>>=n.extra,b-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=u;break}n.mode=25;case 25:if(0===y)break e;if(C=O-y,n.offset>C){if((C=n.offset-C)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=u;break}C>n.wnext?(C-=n.wnext,E=n.wsize-C):E=n.wnext-C,C>n.length&&(C=n.length),P=n.window}else P=h,E=m-n.offset,C=n.length;C>y&&(C=y),y-=C,n.length-=C;do{h[m++]=P[E++]}while(--C);0===n.length&&(n.mode=21);break;case 26:if(0===y)break e;h[m++]=n.length,y--,n.mode=21;break;case 27:if(n.wrap){for(;b<32;){if(0===g)break e;g--,v|=f[p++]<<b,b+=8}if(O-=y,e.total_out+=O,n.total+=O,O&&(e.adler=n.check=n.flags?i(n.check,h,O,m-O):a(n.check,h,O,m-O)),O=y,(n.flags?v:d(v))!==n.check){e.msg="incorrect data check",n.mode=u;break}v=0,b=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;b<32;){if(0===g)break e;g--,v+=f[p++]<<b,b+=8}if(v!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=u;break}v=0,b=0}n.mode=29;case 29:D=1;break e;case u:D=-3;break e;case 31:return-4;default:return l}return e.next_out=m,e.avail_out=y,e.next_in=p,e.avail_in=g,n.hold=v,n.bits=b,(n.wsize||O!==e.avail_out&&n.mode<u&&(n.mode<27||4!==t))&&k(e,e.output,e.next_out,O-e.avail_out)?(n.mode=31,-4):(w-=e.avail_in,O-=e.avail_out,e.total_in+=w,e.total_out+=O,n.total+=O,n.wrap&&O&&(e.adler=n.check=n.flags?i(n.check,h,O,e.next_out-O):a(n.check,h,O,e.next_out-O)),e.data_type=n.bits+(n.last?64:0)+(n.mode===s?128:0)+(20===n.mode||15===n.mode?256:0),(0===w&&0===O||4===t)&&0===D&&(D=-5),D)},t.inflateEnd=function(e){if(!e||!e.state)return l;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?l:(n.head=t,t.done=!1,0):l},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?l:11===n.mode&&a(1,t,r,0)!==n.check?-3:k(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):l},t.inflateInfo="pako inflate (from Nodeca project)"},1582:function(e,t,n){"use strict";e.exports=function(e,t){var n,r,a,i,o,c,l,s,u,d,f,h,p,m,g,y,v,b,x,k,w,O,C,E,P;n=e.state,r=e.next_in,E=e.input,a=r+(e.avail_in-5),i=e.next_out,P=e.output,o=i-(t-e.avail_out),c=i+(e.avail_out-257),l=n.dmax,s=n.wsize,u=n.whave,d=n.wnext,f=n.window,h=n.hold,p=n.bits,m=n.lencode,g=n.distcode,y=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;e:do{p<15&&(h+=E[r++]<<p,p+=8,h+=E[r++]<<p,p+=8),b=m[h&y];t:for(;;){if(h>>>=x=b>>>24,p-=x,0===(x=b>>>16&255))P[i++]=65535&b;else{if(!(16&x)){if(0==(64&x)){b=m[(65535&b)+(h&(1<<x)-1)];continue t}if(32&x){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}k=65535&b,(x&=15)&&(p<x&&(h+=E[r++]<<p,p+=8),k+=h&(1<<x)-1,h>>>=x,p-=x),p<15&&(h+=E[r++]<<p,p+=8,h+=E[r++]<<p,p+=8),b=g[h&v];n:for(;;){if(h>>>=x=b>>>24,p-=x,!(16&(x=b>>>16&255))){if(0==(64&x)){b=g[(65535&b)+(h&(1<<x)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(w=65535&b,p<(x&=15)&&(h+=E[r++]<<p,(p+=8)<x&&(h+=E[r++]<<p,p+=8)),(w+=h&(1<<x)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(h>>>=x,p-=x,w>(x=i-o)){if((x=w-x)>u&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(O=0,C=f,0===d){if(O+=s-x,x<k){k-=x;do{P[i++]=f[O++]}while(--x);O=i-w,C=P}}else if(d<x){if(O+=s+d-x,(x-=d)<k){k-=x;do{P[i++]=f[O++]}while(--x);if(O=0,d<k){k-=x=d;do{P[i++]=f[O++]}while(--x);O=i-w,C=P}}}else if(O+=d-x,x<k){k-=x;do{P[i++]=f[O++]}while(--x);O=i-w,C=P}for(;k>2;)P[i++]=C[O++],P[i++]=C[O++],P[i++]=C[O++],k-=3;k&&(P[i++]=C[O++],k>1&&(P[i++]=C[O++]))}else{O=i-w;do{P[i++]=P[O++],P[i++]=P[O++],P[i++]=P[O++],k-=3}while(k>2);k&&(P[i++]=P[O++],k>1&&(P[i++]=P[O++]))}break}}break}}while(r<a&&i<c);r-=k=p>>3,h&=(1<<(p-=k<<3))-1,e.next_in=r,e.next_out=i,e.avail_in=r<a?a-r+5:5-(r-a),e.avail_out=i<c?c-i+257:257-(i-c),n.hold=h,n.bits=p}},1583:function(e,t,n){"use strict";var r=n(244),a=15,i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,s,u,d,f,h){var p,m,g,y,v,b,x,k,w,O=h.bits,C=0,E=0,P=0,_=0,j=0,S=0,R=0,M=0,B=0,A=0,D=null,N=0,L=new r.Buf16(16),I=new r.Buf16(16),T=null,z=0;for(C=0;C<=a;C++)L[C]=0;for(E=0;E<s;E++)L[t[n+E]]++;for(j=O,_=a;_>=1&&0===L[_];_--);if(j>_&&(j=_),0===_)return u[d++]=20971520,u[d++]=20971520,h.bits=1,0;for(P=1;P<_&&0===L[P];P++);for(j<P&&(j=P),M=1,C=1;C<=a;C++)if(M<<=1,(M-=L[C])<0)return-1;if(M>0&&(0===e||1!==_))return-1;for(I[1]=0,C=1;C<a;C++)I[C+1]=I[C]+L[C];for(E=0;E<s;E++)0!==t[n+E]&&(f[I[t[n+E]]++]=E);if(0===e?(D=T=f,b=19):1===e?(D=i,N-=257,T=o,z-=257,b=256):(D=c,T=l,b=-1),A=0,E=0,C=P,v=d,S=j,R=0,g=-1,y=(B=1<<j)-1,1===e&&B>852||2===e&&B>592)return 1;for(;;){x=C-R,f[E]<b?(k=0,w=f[E]):f[E]>b?(k=T[z+f[E]],w=D[N+f[E]]):(k=96,w=0),p=1<<C-R,P=m=1<<S;do{u[v+(A>>R)+(m-=p)]=x<<24|k<<16|w|0}while(0!==m);for(p=1<<C-1;A&p;)p>>=1;if(0!==p?(A&=p-1,A+=p):A=0,E++,0==--L[C]){if(C===_)break;C=t[n+f[E]]}if(C>j&&(A&y)!==g){for(0===R&&(R=j),v+=P,M=1<<(S=C-R);S+R<_&&!((M-=L[S+R])<=0);)S++,M<<=1;if(B+=1<<S,1===e&&B>852||2===e&&B>592)return 1;u[g=A&y]=j<<24|S<<16|v-d|0}}return 0!==A&&(u[v+A]=C-R<<24|64<<16|0),h.bits=j,0}},1584:function(e,t,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},1585:function(e,t,n){"use strict";var r=n(1586),a=n(1587),i=n(635),o=n(1588),c=n(1589);function l(e){if(!(this instanceof l))return new l(e);var t=r(e);this.segments=t.segments,this.err=t.err,this.__stack=[]}l.from=function(e){if("string"==typeof e)return new l(e);if(e instanceof l){var t=new l("");return t.err=e.err,t.segments=e.segments.map((function(e){return e.slice()})),t.__stack=e.__stack.map((function(e){return i().matrix(e.toArray())})),t}throw new Error("SvgPath.from: invalid param type "+e)},l.prototype.__matrix=function(e){var t,n=this;e.queue.length&&this.iterate((function(r,a,i,o){var l,s,u,d;switch(r[0]){case"v":s=0===(l=e.calc(0,r[1],!0))[0]?["v",l[1]]:["l",l[0],l[1]];break;case"V":s=(l=e.calc(i,r[1],!1))[0]===e.calc(i,o,!1)[0]?["V",l[1]]:["L",l[0],l[1]];break;case"h":s=0===(l=e.calc(r[1],0,!0))[1]?["h",l[0]]:["l",l[0],l[1]];break;case"H":s=(l=e.calc(r[1],o,!1))[1]===e.calc(i,o,!1)[1]?["H",l[0]]:["L",l[0],l[1]];break;case"a":case"A":var f=e.toArray(),h=c(r[1],r[2],r[3]).transform(f);if(f[0]*f[3]-f[1]*f[2]<0&&(r[5]=r[5]?"0":"1"),l=e.calc(r[6],r[7],"a"===r[0]),"A"===r[0]&&r[6]===i&&r[7]===o||"a"===r[0]&&0===r[6]&&0===r[7]){s=["a"===r[0]?"l":"L",l[0],l[1]];break}s=h.isDegenerate()?["a"===r[0]?"l":"L",l[0],l[1]]:[r[0],h.rx,h.ry,h.ax,r[4],r[5],l[0],l[1]];break;case"m":d=a>0,s=["m",(l=e.calc(r[1],r[2],d))[0],l[1]];break;default:for(s=[u=r[0]],d=u.toLowerCase()===u,t=1;t<r.length;t+=2)l=e.calc(r[t],r[t+1],d),s.push(l[0],l[1])}n.segments[a]=s}),!0)},l.prototype.__evaluateStack=function(){var e,t;if(this.__stack.length){if(1===this.__stack.length)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(e=i(),t=this.__stack.length;--t>=0;)e.matrix(this.__stack[t].toArray());this.__matrix(e),this.__stack=[]}},l.prototype.toString=function(){var e,t,n=[];this.__evaluateStack();for(var r=0;r<this.segments.length;r++)t=this.segments[r][0],e=r>0&&"m"!==t&&"M"!==t&&t===this.segments[r-1][0],n=n.concat(e?this.segments[r].slice(1):this.segments[r]);return n.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")},l.prototype.translate=function(e,t){return this.__stack.push(i().translate(e,t||0)),this},l.prototype.scale=function(e,t){return this.__stack.push(i().scale(e,t||0===t?t:e)),this},l.prototype.rotate=function(e,t,n){return this.__stack.push(i().rotate(e,t||0,n||0)),this},l.prototype.skewX=function(e){return this.__stack.push(i().skewX(e)),this},l.prototype.skewY=function(e){return this.__stack.push(i().skewY(e)),this},l.prototype.matrix=function(e){return this.__stack.push(i().matrix(e)),this},l.prototype.transform=function(e){return e.trim()?(this.__stack.push(a(e)),this):this},l.prototype.round=function(e){var t,n=0,r=0,a=0,i=0;return e=e||0,this.__evaluateStack(),this.segments.forEach((function(o){var c=o[0].toLowerCase()===o[0];switch(o[0]){case"H":case"h":return c&&(o[1]+=a),a=o[1]-o[1].toFixed(e),void(o[1]=+o[1].toFixed(e));case"V":case"v":return c&&(o[1]+=i),i=o[1]-o[1].toFixed(e),void(o[1]=+o[1].toFixed(e));case"Z":case"z":return a=n,void(i=r);case"M":case"m":return c&&(o[1]+=a,o[2]+=i),a=o[1]-o[1].toFixed(e),i=o[2]-o[2].toFixed(e),n=a,r=i,o[1]=+o[1].toFixed(e),void(o[2]=+o[2].toFixed(e));case"A":case"a":return c&&(o[6]+=a,o[7]+=i),a=o[6]-o[6].toFixed(e),i=o[7]-o[7].toFixed(e),o[1]=+o[1].toFixed(e),o[2]=+o[2].toFixed(e),o[3]=+o[3].toFixed(e+2),o[6]=+o[6].toFixed(e),void(o[7]=+o[7].toFixed(e));default:return t=o.length,c&&(o[t-2]+=a,o[t-1]+=i),a=o[t-2]-o[t-2].toFixed(e),i=o[t-1]-o[t-1].toFixed(e),void o.forEach((function(t,n){n&&(o[n]=+o[n].toFixed(e))}))}})),this},l.prototype.iterate=function(e,t){var n,r,a,i=this.segments,o={},c=!1,l=0,s=0,u=0,d=0;if(t||this.__evaluateStack(),i.forEach((function(t,n){var r=e(t,n,l,s);Array.isArray(r)&&(o[n]=r,c=!0);var a=t[0]===t[0].toLowerCase();switch(t[0]){case"m":case"M":return l=t[1]+(a?l:0),s=t[2]+(a?s:0),u=l,void(d=s);case"h":case"H":return void(l=t[1]+(a?l:0));case"v":case"V":return void(s=t[1]+(a?s:0));case"z":case"Z":return l=u,void(s=d);default:l=t[t.length-2]+(a?l:0),s=t[t.length-1]+(a?s:0)}})),!c)return this;for(a=[],n=0;n<i.length;n++)if(void 0!==o[n])for(r=0;r<o[n].length;r++)a.push(o[n][r]);else a.push(i[n]);return this.segments=a,this},l.prototype.abs=function(){return this.iterate((function(e,t,n,r){var a,i=e[0],o=i.toUpperCase();if(i!==o)switch(e[0]=o,i){case"v":return void(e[1]+=r);case"a":return e[6]+=n,void(e[7]+=r);default:for(a=1;a<e.length;a++)e[a]+=a%2?n:r}}),!0),this},l.prototype.rel=function(){return this.iterate((function(e,t,n,r){var a,i=e[0],o=i.toLowerCase();if(i!==o&&(0!==t||"M"!==i))switch(e[0]=o,i){case"V":return void(e[1]-=r);case"A":return e[6]-=n,void(e[7]-=r);default:for(a=1;a<e.length;a++)e[a]-=a%2?n:r}}),!0),this},l.prototype.unarc=function(){return this.iterate((function(e,t,n,r){var a,i,c,l=[],s=e[0];return"A"!==s&&"a"!==s?null:("a"===s?(i=n+e[6],c=r+e[7]):(i=e[6],c=e[7]),0===(a=o(n,r,i,c,e[4],e[5],e[1],e[2],e[3])).length?[["a"===e[0]?"l":"L",e[6],e[7]]]:(a.forEach((function(e){l.push(["C",e[2],e[3],e[4],e[5],e[6],e[7]])})),l))})),this},l.prototype.unshort=function(){var e,t,n,r,a,i=this.segments;return this.iterate((function(o,c,l,s){var u,d=o[0],f=d.toUpperCase();c&&("T"===f?(u="t"===d,"Q"===(n=i[c-1])[0]?(e=n[1]-l,t=n[2]-s):"q"===n[0]?(e=n[1]-n[3],t=n[2]-n[4]):(e=0,t=0),r=-e,a=-t,u||(r+=l,a+=s),i[c]=[u?"q":"Q",r,a,o[1],o[2]]):"S"===f&&(u="s"===d,"C"===(n=i[c-1])[0]?(e=n[3]-l,t=n[4]-s):"c"===n[0]?(e=n[3]-n[5],t=n[4]-n[6]):(e=0,t=0),r=-e,a=-t,u||(r+=l,a+=s),i[c]=[u?"c":"C",r,a,o[1],o[2],o[3],o[4]]))})),this},e.exports=l},1586:function(e,t,n){"use strict";var r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},a=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function i(e){return e>=48&&e<=57}function o(e){return e>=48&&e<=57||43===e||45===e||46===e}function c(e){this.index=0,this.path=e,this.max=e.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function l(e){for(;e.index<e.max&&(10===(t=e.path.charCodeAt(e.index))||13===t||8232===t||8233===t||32===t||9===t||11===t||12===t||160===t||t>=5760&&a.indexOf(t)>=0);)e.index++;var t}function s(e){var t=e.path.charCodeAt(e.index);return 48===t?(e.param=0,void e.index++):49===t?(e.param=1,void e.index++):void(e.err="SvgPath: arc flag can be 0 or 1 only (at pos "+e.index+")")}function u(e){var t,n=e.index,r=n,a=e.max,o=!1,c=!1,l=!1,s=!1;if(r>=a)e.err="SvgPath: missed param (at pos "+r+")";else if(43!==(t=e.path.charCodeAt(r))&&45!==t||(t=++r<a?e.path.charCodeAt(r):0),i(t)||46===t){if(46!==t){if(o=48===t,t=++r<a?e.path.charCodeAt(r):0,o&&r<a&&t&&i(t))return void(e.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+n+")");for(;r<a&&i(e.path.charCodeAt(r));)r++,c=!0;t=r<a?e.path.charCodeAt(r):0}if(46===t){for(s=!0,r++;i(e.path.charCodeAt(r));)r++,l=!0;t=r<a?e.path.charCodeAt(r):0}if(101===t||69===t){if(s&&!c&&!l)return void(e.err="SvgPath: invalid float exponent (at pos "+r+")");if(43!==(t=++r<a?e.path.charCodeAt(r):0)&&45!==t||r++,!(r<a&&i(e.path.charCodeAt(r))))return void(e.err="SvgPath: invalid float exponent (at pos "+r+")");for(;r<a&&i(e.path.charCodeAt(r));)r++}e.index=r,e.param=parseFloat(e.path.slice(n,r))+0}else e.err="SvgPath: param should start with 0..9 or `.` (at pos "+r+")"}function d(e){var t,n;n=(t=e.path[e.segmentStart]).toLowerCase();var a=e.data;if("m"===n&&a.length>2&&(e.result.push([t,a[0],a[1]]),a=a.slice(2),n="l",t="m"===t?"l":"L"),"r"===n)e.result.push([t].concat(a));else for(;a.length>=r[n]&&(e.result.push([t].concat(a.splice(0,r[n]))),r[n]););}function f(e){var t,n,a,i,c,f=e.max;if(e.segmentStart=e.index,t=e.path.charCodeAt(e.index),n=97==(32|t),function(e){switch(32|e){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}(t))if(i=r[e.path[e.index].toLowerCase()],e.index++,l(e),e.data=[],i){for(a=!1;;){for(c=i;c>0;c--){if(!n||3!==c&&4!==c?u(e):s(e),e.err.length)return;e.data.push(e.param),l(e),a=!1,e.index<f&&44===e.path.charCodeAt(e.index)&&(e.index++,l(e),a=!0)}if(!a){if(e.index>=e.max)break;if(!o(e.path.charCodeAt(e.index)))break}}d(e)}else d(e);else e.err="SvgPath: bad command "+e.path[e.index]+" (at pos "+e.index+")"}e.exports=function(e){var t=new c(e),n=t.max;for(l(t);t.index<n&&!t.err.length;)f(t);return t.err.length?t.result=[]:t.result.length&&("mM".indexOf(t.result[0][0])<0?(t.err="SvgPath: string should start with `M` or `m`",t.result=[]):t.result[0][0]="M"),{err:t.err,segments:t.result}}},1587:function(e,t,n){"use strict";var r=n(635),a={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},i=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,o=/[\s,]+/;e.exports=function(e){var t,n,c=new r;return e.split(i).forEach((function(e){if(e.length)if(void 0===a[e])switch(n=e.split(o).map((function(e){return+e||0})),t){case"matrix":return void(6===n.length&&c.matrix(n));case"scale":return void(1===n.length?c.scale(n[0],n[0]):2===n.length&&c.scale(n[0],n[1]));case"rotate":return void(1===n.length?c.rotate(n[0],0,0):3===n.length&&c.rotate(n[0],n[1],n[2]));case"translate":return void(1===n.length?c.translate(n[0],0):2===n.length&&c.translate(n[0],n[1]));case"skewX":return void(1===n.length&&c.skewX(n[0]));case"skewY":return void(1===n.length&&c.skewY(n[0]))}else t=e})),c}},1588:function(e,t,n){"use strict";var r=2*Math.PI;function a(e,t,n,r){var a=e*n+t*r;return a>1&&(a=1),a<-1&&(a=-1),(e*r-t*n<0?-1:1)*Math.acos(a)}function i(e,t){var n=4/3*Math.tan(t/4),r=Math.cos(e),a=Math.sin(e),i=Math.cos(e+t),o=Math.sin(e+t);return[r,a,r-a*n,a+r*n,i+o*n,o-i*n,i,o]}e.exports=function(e,t,n,o,c,l,s,u,d){var f=Math.sin(d*r/360),h=Math.cos(d*r/360),p=h*(e-n)/2+f*(t-o)/2,m=-f*(e-n)/2+h*(t-o)/2;if(0===p&&0===m)return[];if(0===s||0===u)return[];s=Math.abs(s),u=Math.abs(u);var g=p*p/(s*s)+m*m/(u*u);g>1&&(s*=Math.sqrt(g),u*=Math.sqrt(g));var y=function(e,t,n,i,o,c,l,s,u,d){var f=d*(e-n)/2+u*(t-i)/2,h=-u*(e-n)/2+d*(t-i)/2,p=l*l,m=s*s,g=f*f,y=h*h,v=p*m-p*y-m*g;v<0&&(v=0),v/=p*y+m*g;var b=(v=Math.sqrt(v)*(o===c?-1:1))*l/s*h,x=v*-s/l*f,k=d*b-u*x+(e+n)/2,w=u*b+d*x+(t+i)/2,O=(f-b)/l,C=(h-x)/s,E=(-f-b)/l,P=(-h-x)/s,_=a(1,0,O,C),j=a(O,C,E,P);return 0===c&&j>0&&(j-=r),1===c&&j<0&&(j+=r),[k,w,_,j]}(e,t,n,o,c,l,s,u,f,h),v=[],b=y[2],x=y[3],k=Math.max(Math.ceil(Math.abs(x)/(r/4)),1);x/=k;for(var w=0;w<k;w++)v.push(i(b,x)),b+=x;return v.map((function(e){for(var t=0;t<e.length;t+=2){var n=e[t+0],r=e[t+1],a=h*(n*=s)-f*(r*=u),i=f*n+h*r;e[t+0]=a+y[0],e[t+1]=i+y[1]}return e}))}},1589:function(e,t,n){"use strict";var r=1e-10,a=Math.PI/180;function i(e,t,n){if(!(this instanceof i))return new i(e,t,n);this.rx=e,this.ry=t,this.ax=n}i.prototype.transform=function(e){var t=Math.cos(this.ax*a),n=Math.sin(this.ax*a),i=[this.rx*(e[0]*t+e[2]*n),this.rx*(e[1]*t+e[3]*n),this.ry*(-e[0]*n+e[2]*t),this.ry*(-e[1]*n+e[3]*t)],o=i[0]*i[0]+i[2]*i[2],c=i[1]*i[1]+i[3]*i[3],l=((i[0]-i[3])*(i[0]-i[3])+(i[2]+i[1])*(i[2]+i[1]))*((i[0]+i[3])*(i[0]+i[3])+(i[2]-i[1])*(i[2]-i[1])),s=(o+c)/2;if(l<r*s)return this.rx=this.ry=Math.sqrt(s),this.ax=0,this;var u=i[0]*i[1]+i[2]*i[3],d=s+(l=Math.sqrt(l))/2,f=s-l/2;return this.ax=Math.abs(u)<r&&Math.abs(d-c)<r?90:180*Math.atan(Math.abs(u)>Math.abs(d-c)?(d-o)/u:u/(d-c))/Math.PI,this.ax>=0?(this.rx=Math.sqrt(d),this.ry=Math.sqrt(f)):(this.ax+=90,this.rx=Math.sqrt(f),this.ry=Math.sqrt(d)),this},i.prototype.isDegenerate=function(){return this.rx<r*this.ry||this.ry<r*this.rx},e.exports=i},176:function(e,t,n){"use strict";n(501);var r=n(174),a=n(0),i=n.n(a),o=n(1),c=n.n(o),l=n(8),s=n.n(l),u=n(63),d=n.n(u),f=["className","overlayClassName"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}function y(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var v=i.a.forwardRef((function(e,t){var n=e.className,a=e.overlayClassName,o=y(e,f);return i.a.createElement(r.a,g({className:s()(n,"larkui-dropdown-trigger"),overlayClassName:s()(a,"larkui-dropdown"),ref:t},o))}));v.propTypes=p(p({},r.a.DropDownProps),{},{className:c.a.string,overlayClassName:c.a.string}),d()(v,r.a);var b=v,x=["className","overlayClassName","overlay","children"];function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(){return C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}function E(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var P=i.a.forwardRef((function(e,t){var n=e.className,a=e.overlayClassName,o=e.overlay,c=e.children,l=E(e,x),u=o?o.props:{};return i.a.createElement(r.a.Button,C({className:s()(n,"larkui-dropdown-trigger"),overlay:i.a.cloneElement(o,{className:s()(u.className,a,"larkui-dropdown-menu")}),ref:t},l),c)}));P.propTypes=w(w({},r.a.DropdownButtonProps),{},{className:c.a.string,overlayClassName:c.a.string,overlay:c.a.node,children:c.a.any}),d()(P,r.a.Button);var _=P,j=n(500),S=n.n(j),R=n(499),M=n.n(R),B=n(209),A=n(35),D=n(26);function N(){return N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N.apply(this,arguments)}var L=function(e){var t=e.className,n=e.overlayClassName,r=e.currentValue,a=e.menus,o=e.disableMenus,c=void 0===o?[]:o,l=e.disableTip,u=e.handleChange,d=e.triggerPrefix,f=a.find((function(e){return e.value===r}));return i.a.createElement(b,N({},e,{trigger:["click"],className:s()("larkui-dropdown-selector",t),overlayClassName:s()("larkui-dropdown-selector-menu",n),overlay:i.a.createElement(A.a,{selectedKeys:[r]},a.map((function(e){var t=c.some((function(t){return t.value===e.value})),n=i.a.createElement("span",{className:"larkui-dropdown-selector-option"},i.a.createElement("span",{className:"larkui-dropdown-selector-option-name"},e.name),e.value===r&&i.a.createElement("span",{className:"larkui-dropdown-selector-option-checked"},i.a.createElement(M.a,null)));return i.a.createElement(A.a.Item,{key:e.value,disabled:t,onClick:function(){u(e.value)}},t&&l?i.a.createElement(D.a,{title:l,placement:"right"},n):n)})),e.externalActions&&i.a.createElement(A.a.Divider,null),e.externalActions&&e.externalActions())}),i.a.createElement("span",{className:"larkui-dropdown-selector-trigger"},i.a.createElement("span",null,d),i.a.createElement("span",null,f?f.name:Object(B.a)("请选择")),i.a.createElement("span",{className:"larkui-dropdown-selector-trigger-icon"},i.a.createElement(S.a,null))))};L.propTypes={className:c.a.string,overlayClassName:c.a.string,currentValue:c.a.string.isRequired,menus:c.a.arrayOf(c.a.shape({name:c.a.string.isRequired,value:c.a.string.isRequired})).isRequired,disableMenus:c.a.array,disableTip:c.a.node,handleChange:c.a.func.isRequired,externalActions:c.a.func,triggerPrefix:c.a.node};var I=L;b.Selector=I,b.Button=_;t.a=b},1938:function(e,t,n){"use strict";var r=n(11),a=n(0),i={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},o=n(22),c=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};c.displayName="CaretRightOutlined";t.a=a.forwardRef(c)},195:function(e,t,n){},2095:function(e,t,n){"use strict";var r,a=new Uint8Array(16);function i(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(a)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var c=function(e){return"string"==typeof e&&o.test(e)},l=[],s=0;s<256;++s)l.push((s+256).toString(16).substr(1));var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!c(n))throw TypeError("Stringified UUID is invalid");return n};t.a=function(e,t,n){var r=(e=e||{}).random||(e.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return u(r)}},24:function(e,t,n){var r=n(1576);function a(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=a=Reflect.get,e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,n){var a=r(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(this,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},243:function(e,t,n){"use strict";var r=n(834),a={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,i,o,c,l,s,u=!1;t||(t={}),n=t.debug||!1;try{if(o=r(),c=document.createRange(),l=document.getSelection(),(s=document.createElement("span")).textContent=e,s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",s.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),void 0===r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=a[t.format]||a.default;window.clipboardData.setData(i,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(s),c.selectNodeContents(s),l.addRange(c),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(r){n&&console.error("unable to copy using execCommand: ",r),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(r){n&&console.error("unable to copy using clipboardData: ",r),n&&console.error("falling back to prompt"),i=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(i,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(c):l.removeAllRanges()),s&&document.body.removeChild(s),o()}return u}},244:function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)a(n,r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,a){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),a);else for(var i=0;i<r;i++)e[a+i]=t[n+i]},flattenChunks:function(e){var t,n,r,a,i,o;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),a=0,t=0,n=e.length;t<n;t++)i=e[t],o.set(i,a),a+=i.length;return o}},o={arraySet:function(e,t,n,r,a){for(var i=0;i<r;i++)e[a+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(r)},257:function(e,t,n){"use strict";n(1555);var r=n(506);n(394);t.a=r.a},277:function(e,t,n){"use strict";n(1723);var r=n(622);n(393);t.a=r.a},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return Zt})),n.d(t,"b",(function(){return Xr})),n.d(t,"c",(function(){return ki})),n.d(t,"d",(function(){return Xm})),n.d(t,"e",(function(){return io})),n.d(t,"f",(function(){return ia})),n.d(t,"g",(function(){return Fr})),n.d(t,"h",(function(){return dt})),n.d(t,"i",(function(){return Em})),n.d(t,"j",(function(){return en})),n.d(t,"k",(function(){return Yt})),n.d(t,"l",(function(){return vo})),n.d(t,"m",(function(){return Ki})),n.d(t,"n",(function(){return Ir})),n.d(t,"o",(function(){return Io})),n.d(t,"p",(function(){return si})),n.d(t,"q",(function(){return Ei})),n.d(t,"r",(function(){return Da})),n.d(t,"s",(function(){return Hn})),n.d(t,"t",(function(){return Cf})),n.d(t,"u",(function(){return bo})),n.d(t,"v",(function(){return co}));var r=n(42),a=n(51),i=n.n(a),o=n(3),c=n.n(o),l=n(103),s=n.n(l),u=n(41),d=n.n(u),f=n(594),h=n.n(f),p=n(6),m=n.n(p),g=n(7),y=n.n(g),v=n(9),b=n.n(v),x=n(10),k=n.n(x),w=n(4),O=n.n(w),C=n(68),E=n.n(C),P=n(645),_=n.n(P),j=n(17),S=n(5),R=n.n(S),M=n(24),B=n.n(M),A=n(19),D=n.n(A),N=n(514),L=n.n(N),I=n(2095),T=n(29),z=n.n(T),F=n(23),Y=n(35),X=n(176),q=n(18),V=n(26),H=n(25),G=n(257),Z=n(937),W=n(121),K=n(47),U=n(277),Q=n(74),J=n(320),$=n(54),ee=n.n($),te=n(20),ne=n.n(te),re=n(515),ae=n.n(re),ie=n(71),oe=n.n(ie),ce=n(66),le=n(69),se=n.n(le),ue=n(595),de=n.n(ue),fe=n(180),he=n.n(fe),pe=n(483),me=n.n(pe),ge=n(120),ye=n.n(ge),ve=n(81),be=n.n(ve);function xe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var a,i,o,c,l,s,u,d,f,h=e._root,p={data:r},m=e._x0,g=e._y0,y=e._x1,v=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((s=t>=(i=(m+y)/2))?m=i:y=i,(u=n>=(o=(g+v)/2))?g=o:v=o,a=h,!(h=h[d=u<<1|s]))return a[d]=p,e;if(c=+e._x.call(null,h.data),l=+e._y.call(null,h.data),t===c&&n===l)return p.next=h,a?a[d]=p:e._root=p,e;do{a=a?a[d]=new Array(4):e._root=new Array(4),(s=t>=(i=(m+y)/2))?m=i:y=i,(u=n>=(o=(g+v)/2))?g=o:v=o}while((d=u<<1|s)==(f=(l>=o)<<1|c>=i));return a[f]=h,a[d]=p,e}var ke=function(e,t,n,r,a){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=a};function we(e){return e[0]}function Oe(e){return e[1]}function Ce(e,t,n){var r=new Ee(null==t?we:t,null==n?Oe:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function Ee(e,t,n,r,a,i){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=a,this._y1=i,this._root=void 0}function Pe(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var _e=Ce.prototype=Ee.prototype;_e.copy=function(){var e,t,n=new Ee(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Pe(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var a=0;a<4;++a)(t=r.source[a])&&(t.length?e.push({source:t,target:r.target[a]=new Array(4)}):r.target[a]=Pe(t));return n},_e.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return xe(this.cover(t,n),t,n,e)},_e.addAll=function(e){var t,n,r,a,i=e.length,o=new Array(i),c=new Array(i),l=1/0,s=1/0,u=-1/0,d=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(o[n]=r,c[n]=a,r<l&&(l=r),r>u&&(u=r),a<s&&(s=a),a>d&&(d=a));if(l>u||s>d)return this;for(this.cover(l,s).cover(u,d),n=0;n<i;++n)xe(this,o[n],c[n],e[n]);return this},_e.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,a=this._x1,i=this._y1;if(isNaN(n))a=(n=Math.floor(e))+1,i=(r=Math.floor(t))+1;else{for(var o,c,l=a-n,s=this._root;n>e||e>=a||r>t||t>=i;)switch(c=(t<r)<<1|e<n,(o=new Array(4))[c]=s,s=o,l*=2,c){case 0:a=n+l,i=r+l;break;case 1:n=a-l,i=r+l;break;case 2:a=n+l,r=i-l;break;case 3:n=a-l,r=i-l}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=a,this._y1=i,this},_e.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},_e.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},_e.find=function(e,t,n){var r,a,i,o,c,l,s,u=this._x0,d=this._y0,f=this._x1,h=this._y1,p=[],m=this._root;for(m&&p.push(new ke(m,u,d,f,h)),null==n?n=1/0:(u=e-n,d=t-n,f=e+n,h=t+n,n*=n);l=p.pop();)if(!(!(m=l.node)||(a=l.x0)>f||(i=l.y0)>h||(o=l.x1)<u||(c=l.y1)<d))if(m.length){var g=(a+o)/2,y=(i+c)/2;p.push(new ke(m[3],g,y,o,c),new ke(m[2],a,y,g,c),new ke(m[1],g,i,o,y),new ke(m[0],a,i,g,y)),(s=(t>=y)<<1|e>=g)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-s],p[p.length-1-s]=l)}else{var v=e-+this._x.call(null,m.data),b=t-+this._y.call(null,m.data),x=v*v+b*b;if(x<n){var k=Math.sqrt(n=x);u=e-k,d=t-k,f=e+k,h=t+k,r=m.data}}return r},_e.remove=function(e){if(isNaN(i=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,a,i,o,c,l,s,u,d,f,h=this._root,p=this._x0,m=this._y0,g=this._x1,y=this._y1;if(!h)return this;if(h.length)for(;;){if((s=i>=(c=(p+g)/2))?p=c:g=c,(u=o>=(l=(m+y)/2))?m=l:y=l,t=h,!(h=h[d=u<<1|s]))return this;if(!h.length)break;(t[d+1&3]||t[d+2&3]||t[d+3&3])&&(n=t,f=d)}for(;h.data!==e;)if(r=h,!(h=h.next))return this;return(a=h.next)&&delete h.next,r?(a?r.next=a:delete r.next,this):t?(a?t[d]=a:delete t[d],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[f]=h:this._root=h),this):(this._root=a,this)},_e.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},_e.root=function(){return this._root},_e.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},_e.visit=function(e){var t,n,r,a,i,o,c=[],l=this._root;for(l&&c.push(new ke(l,this._x0,this._y0,this._x1,this._y1));t=c.pop();)if(!e(l=t.node,r=t.x0,a=t.y0,i=t.x1,o=t.y1)&&l.length){var s=(r+i)/2,u=(a+o)/2;(n=l[3])&&c.push(new ke(n,s,u,i,o)),(n=l[2])&&c.push(new ke(n,r,u,s,o)),(n=l[1])&&c.push(new ke(n,s,a,i,u)),(n=l[0])&&c.push(new ke(n,r,a,s,u))}return this},_e.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new ke(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var a=t.node;if(a.length){var i,o=t.x0,c=t.y0,l=t.x1,s=t.y1,u=(o+l)/2,d=(c+s)/2;(i=a[0])&&n.push(new ke(i,o,c,u,d)),(i=a[1])&&n.push(new ke(i,u,c,l,d)),(i=a[2])&&n.push(new ke(i,o,d,u,s)),(i=a[3])&&n.push(new ke(i,u,d,l,s))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},_e.x=function(e){return arguments.length?(this._x=e,this):this._x},_e.y=function(e){return arguments.length?(this._y=e,this):this._y};var je=n(30),Se=n.n(je),Re=n(0),Me=n.n(Re),Be=n(1),Ae=n.n(Be),De=n(8),Ne=n.n(De),Le=n(106),Ie=n.n(Le),Te=n(850),ze=n(1938);function Fe(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}function Ye(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e.children},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!1!==t(e,r,a)){var i=n(e);if(i)for(var o=0;o<i.length;o++)Ye(i[o],t,n,e,o)}}function Xe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e.children},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=n(e);if(a)for(var i=0;i<a.length;i++)!1!==t(a[i],e,r)&&Xe(a[i],t,n,i)}function qe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ve(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ze(e,t,n){return e<t?t:e>n?n:e}function We(e,t){for(var n,r=-1/0,a=0;a<e.length;a++){var i=e[a],o=t?i[t]:i;o>r&&(r=o,n=i)}return n}function Ke(e,t){var n=t(e);return e.children&&(n.children=[],e.children.forEach((function(e){n.children.push(Ke(e,t))}))),n}function Ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return e<t?t:e>n?n:e}function Qe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Ge(Ge({},e),t);return e.default&&t.default&&(n.default=Object.assign(e.default,t.default)),e.textAreaContentStyleSheets&&t.textAreaContentStyleSheets&&(n.textAreaContentStyleSheets=e.textAreaContentStyleSheets.concat(t.textAreaContentStyleSheets)),e.Subcells&&t.Subcells&&(n.Subcells=e.Subcells.concat(t.Subcells)),n}function Je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-5;return e>=t[0]-n&&e<=t[1]+n}function $e(e,t){return Object.values(e.reduce((function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e}),{}))}function et(e){return e.filter((function(e,t,n){return n.indexOf(e,0)===t}))}function tt(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function nt(e,t,n){if(n>=e.length)for(var r=n-e.length+1;r--;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),e}function rt(e,t){e.children?e.children.push(t):e.children=[t]}function at(e,t){var n,r=-1/0;if(void 0===t){var a,i=qe(e);try{for(i.s();!(a=i.n()).done;)null!=(n=a.value)&&r<n&&(r=n)}catch(e){i.e(e)}finally{i.f()}}else{var o,c=-1,l=qe(e);try{for(l.s();!(o=l.n()).done;)null!=(n=t(n=o.value,++c,e))&&r<n&&(r=n)}catch(e){l.e(e)}finally{l.f()}}return r}function it(e,t,n){for(var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e.parent},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return void 0===e};e&&e!==n&&i(r);)r=t(e),e=a(e);return r}function ot(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.forEach((function(t){var n=t.query,r=t.css;"self"!==n?e.querySelectorAll(n).forEach((function(e){Object.keys(r).forEach((function(t){e.style[t]=r[t]}))})):Object.keys(r).forEach((function(t){e.style[t]=r[t]}))}))}function ct(e,t){var n={};return Object.keys(t).forEach((function(r){!0===t[r]?n[r]=d()(e[r]):s()(t[r])&&s()(e[r])&&(n[r]=ct(e[r],t[r]))})),n}function lt(e,t,n){var r={};return e&&n?t?(n.forEach((function(n){e[n]!==t[n]&&(r[n]=e[n])})),r):Ge({},e):r}function st(e,t){return h()(e,t,(function(e,t){return void 0!==e||s()(t)?e:null}))}function ut(e,t){var n="object"===i()(e)?e:c()({},e,t),r={},a=function(e){e.split(".").reduce((function(t,r,a,i){return t[r]=a+1===i.length?n[e]:{}}),r)};for(var o in n)a(o);return r}Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-viewport-container *::selection {\n  background-color: rgba(52, 155, 249, 0.15) !important;\n  color: inherit !important;\n}\n.lake-user-select-none {\n  user-select: none;\n}\n.lake-diagram-mindmap-root::selection {\n  background-color: #ddefff !important;\n}\n.selection-transparent::selection {\n  background-color: transparent !important;\n  color: inherit !important;\n}\n.selection-transparent *::selection {\n  background-color: transparent !important;\n  color: inherit !important;\n}\n");var dt=Object.freeze({__proto__:null,limitValue:Ze,findMaxObjBy:We,buildTree:Ke,getValue:Ue,mergeCellOptions:Qe,between:Je,groupBy:$e,arrayUnique:et,arrayEqual:tt,arrayMove:nt,removeArray:function(e){for(var t,n,r=arguments,a=r.length;a>1&&e.length;)for(t=r[--a];-1!==(n=e.indexOf(t));)e.splice(n,1);return t},append:rt,max:at,min:function(e,t){var n,r=1/0;if(void 0===t){var a,i=qe(e);try{for(i.s();!(a=i.n()).done;)null!=(n=a.value)&&r>n&&(r=n)}catch(e){i.e(e)}finally{i.f()}}else{var o,c=-1,l=qe(e);try{for(l.s();!(o=l.n()).done;)null!=(n=t(n=o.value,++c,e))&&r>n&&(r=n)}catch(e){l.e(e)}finally{l.f()}}return r},closest:it,setStyleSheets:ot,pick:ct,diff:lt,mergeUndefinedToNull:st,makeChangeModel:ut});function ft(e){return Math.PI/180*e}function ht(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-4;return Math.abs(e-t)<n}function pt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-4;return e.length===t.length&&e.every((function(e,r){return ht(e,t[r],n)}))}function mt(e,t){return e.minX<t.minX&&e.minY<t.minY&&e.maxX>t.maxX&&e.maxY>t.maxY}function gt(e,t){return!(t.maxX<e.minX||t.minX>e.maxX||t.maxY<e.minY||t.minY>e.maxY)}function yt(e,t,n,r){var a;return a=(r-t)/(n-e),isNaN(a)?1/0:a=Number(a.toFixed(2))}function vt(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}function bt(e,t,n,r,a){if(vt(e,t,n,r)<a)return{x:e,y:t};var i=xt(e,t,n,r,a);return{x:n-i.offsetX,y:r-i.offsetY}}function xt(e,t,n,r,a){var i=yt(e,t,n,r),o=Math.atan(i),c=n<e,l=a*Math.cos(o),s=a*Math.sin(o);return c&&(l*=-1,s*=-1),{offsetX:l,offsetY:s}}function kt(e,t,n,r){var a=yt(e,t,n,r),i=Math.atan(a);return n<e?i+Math.PI:r<t?i+2*Math.PI:i}function wt(e,t,n,r){var a;return a=ht(e,n)?1/0:ht(t,r)?0:(a=(r-t)/(n-e)).toFixed(2),Number(a)}function Ot(e,t,n,r,a,i,o,c){if(wt(e,t,n,r)===wt(a,i,o,c))return!1;var l=((e*r-n*t)*(a-o)-(e-n)*(a*c-i*o))/((e-n)*(i-c)-(t-r)*(a-o)),s=((e*r-n*t)*(i-c)-(t-r)*(a*c-i*o))/((e-n)*(i-c)-(t-r)*(a-o));return{x:-0===l?0:l,y:-0===s?0:s}}function Ct(e,t,n,r){return Math.abs(e-n)+Math.abs(t-r)}function Et(e,t,n){return e>=t&&e<=n}function Pt(e,t,n,r){return ht(e,n)&&ht(t,r)}function _t(e,t,n,r,a,i,o,c){var l=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],s={x:a-e,y:i-t},u={x:n-e,y:r-t},d={x:o-a,y:c-i},f=u.x*d.y-u.y*d.x,h=f*f,p=u.x*u.x+u.y*u.y,m=d.x*d.x+d.y*d.y,g=null;if(h>1e-4*p*m){var y=(s.x*d.y-s.y*d.x)/f,v=(s.x*u.y-s.y*u.x)/f;Et(y,0,1)&&Et(v,0,1)&&(g={x:e+y*u.x,y:t+y*u.y})}return g&&!l&&(Pt(e,t,g.x,g.y)||Pt(n,r,g.x,g.y)||Pt(a,i,g.x,g.y)||Pt(o,c,g.x,g.y))?null:g}function jt(e,t,n,r){if(e===n)return{f:function(){return null},string:"x=".concat(e.toFixed(3))};if(t===r)return{f:function(){return t},string:"y=".concat(t.toFixed(3))};var a=(r-t)/(n-e),i=-e/(n-e)*(r-t)+t;return{f:function(e){return a*e+i},string:"y=".concat(a.toFixed(3),"x+").concat(i.toFixed(3))}}function St(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!!(_t(e.x1,e.y1,e.x2,e.y2,t.minX,t.minY,t.minX,t.maxY,n)||_t(e.x1,e.y1,e.x2,e.y2,t.minX,t.minY,t.maxX,t.minY,n)||_t(e.x1,e.y1,e.x2,e.y2,t.maxX,t.minY,t.maxX,t.maxY,n)||_t(e.x1,e.y1,e.x2,e.y2,t.minX,t.maxY,t.maxX,t.maxY,n))}function Rt(e,t){return wt(e.x,e.y,t.x1,t.y1)===wt(e.x,e.y,t.x2,t.y2)}function Mt(e,t,n,r){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-r,2))}function Bt(e,t){if(e.k===1/0){if(e.y1<e.y2&&t.y<e.y1)return!1;if(e.y1>e.y2&&t.y>e.y1)return!1}else{if(e.x1<e.x2&&t.x<e.x1)return!1;if(e.x1>e.x2&&t.x>e.x1)return!1}return!0}function At(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e[0]*t[0]+e[1]*t[1],a=e[0]*t[1]-e[1]*t[0],i=Math.atan2(a,r);return i<0&&(i=2*Math.PI-Math.abs(i)),n?2*Math.PI-i:i}function Dt(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,0],r=[],a=2*Math.PI/e,i=0;i<e;i++)r.push([a*i,a*(i+1)]);var o=[n[0]-t[0],n[1]-t[1]];return function(e,n){var a=[e[0]-t[0],e[1]-t[1]],i=r[n];return Je(At(a,o,!1),i)}}var Nt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];m()(this,e),this.vertices={},this.edges={},this.isDirected=t}return y()(e,[{key:"snap",value:function(e){for(var t={vertex:void 0,distance:1/0},n=this.getAllVertices(),r=0;r<n.length;r++){var a=n[r];if(a.x===e.x&&a.y===e.y)return a;var i=Math.abs(a.x-e.x)+Math.abs(a.y-e.y);i<t.distance&&(t.vertex=a,t.distance=i)}return t.vertex}},{key:"addVertex",value:function(e){return this.vertices[e.getKey()]=e,this}},{key:"getVertexByKey",value:function(e){return this.vertices[e]}},{key:"getNeighbors",value:function(e){return e.getNeighbors()}},{key:"getAllVertices",value:function(){return Object.values(this.vertices)}},{key:"getAllEdges",value:function(){return Object.values(this.edges)}},{key:"addEdge",value:function(e){var t=this.getVertexByKey(e.startVertex.getKey()),n=this.getVertexByKey(e.endVertex.getKey());if(t||(this.addVertex(e.startVertex),t=this.getVertexByKey(e.startVertex.getKey())),n||(this.addVertex(e.endVertex),n=this.getVertexByKey(e.endVertex.getKey())),this.edges[e.getKey()])throw new Error("Edge has already been added before");return this.edges[e.getKey()]=e,this.isDirected?t.addEdge(e):(t.addEdge(e),n.addEdge(e)),this}},{key:"deleteEdge",value:function(e){if(!this.edges[e.getKey()])throw new Error("Edge not found in graph");delete this.edges[e.getKey()];var t=this.getVertexByKey(e.startVertex.getKey()),n=this.getVertexByKey(e.endVertex.getKey());t.deleteEdge(e),n.deleteEdge(e)}},{key:"findEdge",value:function(e,t){return this.getVertexByKey(e.getKey()).findEdge(t)}},{key:"findVertexByKey",value:function(e){return this.vertices[e]?this.vertices[e]:null}},{key:"getWeight",value:function(){return this.getAllEdges().reduce((function(e,t){return e+t.weight}),0)}},{key:"reverse",value:function(){var e=this;return this.getAllEdges().forEach((function(t){e.deleteEdge(t),t.reverse(),e.addEdge(t)})),this}},{key:"getVerticesIndices",value:function(){var e={};return this.getAllVertices().forEach((function(t,n){e[t.getKey()]=n})),e}},{key:"getAdjacencyMatrix",value:function(){var e=this,t=this.getAllVertices(),n=this.getVerticesIndices(),r=Array(t.length).fill(null).map((function(){return Array(t.length).fill(1/0)}));return t.forEach((function(t,a){t.getNeighbors().forEach((function(i){var o=n[i.getKey()];r[a][o]=e.findEdge(t,i).weight}))})),r}},{key:"toString",value:function(){return Object.keys(this.vertices).toString()}}]),e}(),Lt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;m()(this,e),this.value=t,this.next=n}return y()(e,[{key:"toString",value:function(e){return e?e(this.value):"".concat(this.value)}}]),e}(),It=function(){function e(t){m()(this,e),this.compare=t||e.defaultCompareFunction}return y()(e,[{key:"equal",value:function(e,t){return 0===this.compare(e,t)}},{key:"lessThan",value:function(e,t){return this.compare(e,t)<0}},{key:"greaterThan",value:function(e,t){return this.compare(e,t)>0}},{key:"lessThanOrEqual",value:function(e,t){return this.lessThan(e,t)||this.equal(e,t)}},{key:"greaterThanOrEqual",value:function(e,t){return this.greaterThan(e,t)||this.equal(e,t)}},{key:"reverse",value:function(){var e=this.compare;this.compare=function(t,n){return e(n,t)}}}],[{key:"defaultCompareFunction",value:function(e,t){return e===t?0:e<t?-1:1}}]),e}(),Tt=function(){function e(t){m()(this,e),this.head=null,this.tail=null,this.compare=new It(t)}return y()(e,[{key:"prepend",value:function(e){return this.head=new Lt(e,this.head),this}},{key:"append",value:function(e){var t=new Lt(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)}},{key:"delete",value:function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare.equal(this.head.value,e);)t=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare.equal(n.next.value,e)?(t=n.next,n.next=n.next.next):n=n.next;return this.compare.equal(this.tail.value,e)&&(this.tail=n),t}},{key:"find",value:function(e){var t=e.value,n=void 0===t?void 0:t,r=e.callback,a=void 0===r?void 0:r;if(!this.head)return null;for(var i=this.head;i;){if(a&&a(i.value))return i;if(void 0!==n&&this.compare.equal(i.value,n))return i;i=i.next}return null}},{key:"deleteTail",value:function(){if(this.head===this.tail){var e=this.tail;return this.head=null,this.tail=null,e}for(var t=this.tail,n=this.head;n.next;)n.next.next?n=n.next:n.next=null;return this.tail=n,t}},{key:"deleteHead",value:function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e}},{key:"toArray",value:function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e}},{key:"toString",value:function(e){return this.toArray().map((function(t){return t.toString(e)})).toString()}}]),e}(),zt=function(){function e(t){if(m()(this,e),void 0===t)throw new Error("Graph vertex must have a value");this.value=t,this.edges=new Tt((function(e,t){return e.getKey()===t.getKey()?0:e.getKey()<t.getKey()?-1:1}))}return y()(e,[{key:"addEdge",value:function(e){return this.edges.append(e),this}},{key:"deleteEdge",value:function(e){this.edges.delete(e)}},{key:"getNeighbors",value:function(){var e=this;return this.edges.toArray().map((function(t){return t.value.startVertex===e?t.value.endVertex:t.value.startVertex}))}},{key:"getEdges",value:function(){return this.edges.toArray().map((function(e){return e.value}))}},{key:"getDegree",value:function(){return this.edges.toArray().length}},{key:"hasEdge",value:function(e){return!!this.edges.find({callback:function(t){return t===e}})}},{key:"hasNeighbor",value:function(e){return!!this.edges.find({callback:function(t){return t.startVertex===e||t.endVertex===e}})}},{key:"findEdge",value:function(e){var t=this.edges.find({callback:function(t){return t.startVertex===e||t.endVertex===e}});return t?t.value:null}},{key:"getKey",value:function(){return this.value}},{key:"deleteAllEdges",value:function(){var e=this;return this.getEdges().forEach((function(t){return e.deleteEdge(t)})),this}},{key:"toString",value:function(e){return e?e(this.value):"".concat(this.value)}}]),e}(),Ft=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;m()(this,e),this.startVertex=t,this.endVertex=n,this.weight=r}return y()(e,[{key:"getKey",value:function(){var e=this.startVertex.getKey(),t=this.endVertex.getKey();return"".concat(e,"_").concat(t)}},{key:"reverse",value:function(){var e=this.startVertex;return this.startVertex=this.endVertex,this.endVertex=e,this}},{key:"toString",value:function(){return this.getKey()}}]),e}(),Yt=Object.freeze({__proto__:null,Graph:Nt,Vertex:zt,Edge:Ft,LinkedList:Tt});function Xt(e){return e.getNeighbors().filter((function(e){return!0!==e.visited}))}function qt(e){var t,n={};for(t=0;t<e.length;t++){var r=e[t],a=jt(r.x1,r.y1,r.x2,r.y2).string;if(n[a])"ray"===r.type&&(n[a].type="straight"),e[t]=null;else{n[a]=r;var i,o=wt(r.x1,r.y1,r.x2,r.y2);i=r.x1===r.x2?r.x1:r.y1===r.y2?r.y1:r.y1-(r.y2-r.y1)/(r.x2-r.x1)*r.x1,r.k=o,r.b=i,r.intersections=[]}}return(e=e.filter((function(e){return e}))).sort((function(e,t){return e.b-t.b})),e}function Vt(e){var t,n,r=$e(e=qt(e),"k"),a=[];for(t=0;t<r.length;t++){var i=r[t],o=function(){var e=r[n];i.forEach((function(t){e.forEach((function(e){var n=Ot(t.x1,t.y1,t.x2,t.y2,e.x1,e.y1,e.x2,e.y2);("ray"!==t.type||Bt(t,n))&&("ray"!==e.type||Bt(e,n))&&(t.intersections.push(n),e.intersections.push(n),n.index=a.length,a.push(n))}))}))};for(n=t+1;n<r.length;n++)o()}var c=new Nt,l=a.map((function(e,t){var n=new zt(t);return Object.assign(n,e),n})),s=[];for(t=0;t<e.length;t++){var u=e[t];for(n=0;n<u.intersections.length;n++){var d=u.intersections[n],f=u.intersections[n+1];f&&s.push(new Ft(l[d.index],l[f.index]))}}return l.forEach((function(e){c.addVertex(e)})),s.forEach((function(e){c.addEdge(e)})),c}function Ht(e,t,n,r){t=e.snap(t),n=e.snap(n);var a,i,o=t,c=Xt(o),l=[o];for(o.visited=!0,o.distance=0;c.length>0;){a=-1/0,i=void 0;for(var s=0;s<c.length;s++){var u=c[s];if(u.from=o,!u.visited){u.distance=Mt(o.x,o.y,u.x,u.y)+o.distance;var d=r(u,t,n);d>a&&(i=u,a=d)}}if(i&&(c=Xt(o=i),l.push(o),o.visited=!0,o===n))break}return l}function Gt(e,t){var n=e.getTotalLength();if(0===n)return{x:0,y:0};var r,a,i,o,c,l=8,s=1/0;for(o=0;o<=n;o+=l)(c=t((i=e.getPointAtLength(o)).x,i.y))<s&&(s=c,a=o,r=i);for(l/=2;l>.25;){var u=a-l,d=e.getPointAtLength(u),f=t(d.x,d.y);if(u>=0&&f<s)r=d,a=u,s=f;else{var h=a+l,p=e.getPointAtLength(h),m=t(p.x,p.y);m>=0&&m<s?(r=p,a=h,s=m):l/=2}}return r}var Zt=Object.freeze({__proto__:null,deepTreeTraversal:Ye,deepTreeTraversalWithoutSelf:Xe,breadthTreeTraversal:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e.children},r=[];for(r.unshift(e);0!==r.length;){var a=r.shift();t(a);var i=n(a);if(i)for(var o=0;o<i.length;o++)r.push(i[o])}},toRadian:ft,roughlyEqual:ht,roughlyArrayEqual:pt,rectContainRect:mt,pointInRect:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minX,r=t.minY,a=t.maxX,i=t.maxY;return!(e[0]<=n||e[0]>=a||e[1]<=r||e[1]>=i)},rectIntersectRect:gt,lineSlope:yt,lineDistance:vt,findThridPoint:bt,computeXYOffset:xt,lineRadian:kt,lineIntercept:wt,lineIntersection:Ot,manhattanDistance:Ct,isBetween:Et,isEqlPoint:Pt,lineSegmentIntersect:_t,getLineEquation:jt,lineSegmentIntersectRect:St,pointInLine:Rt,pointToPointDistance:Mt,isInRay:Bt,clockwiseAngle:At,radialQuadrantSegmentationGenerator:Dt,normalize2D:function(e){var t=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2));return[1/t*e[0],1/t*e[1]]},getOffset:function(e,t){return Math.max(Math.max(Math.abs(Math.abs(e[0])-Math.abs(t[0])),Math.abs(Math.abs(e[1])-Math.abs(t[1])))/3,4)},calculateLine:qt,linesToGraph:Vt,snapPoint:function(e,t){for(var n={vertex:void 0,distance:1/0},r=e.getAllVertices(),a=0;a<r.length;a++){var i=r[a];if(i.x===t.x&&i.y===t.y)return i;var o=Ct(i.x,i.y,t.x,t.y);o<n.distance&&(n.vertex=i,n.distance=o)}return n.vertex},pathFinding:Ht,binaryFindPoint:Gt}),Wt=["http:","https:","data:","dingtalk:","ftp:","mailto:","blob:"];function Kt(e){return function(e){return"string"==typeof e&&!(e=e.toLowerCase()).startsWith("data:text/html")&&!/\s/.test(e)&&(!!Wt.some((function(t){return e.startsWith(t)}))||!(!e.startsWith("./")&&!e.startsWith("/"))||e.indexOf(":")<0)}(e)?e:""}var Ut={locale:r.LocaleUtil.getLocale(),translations:{"en-us":{"成组":"Group","取消分组":"UnGroup"," 粘贴":" paste","三角形":"Triangle","上下居中":"Vertical Align Center","上移":"Forward","上移一层":"Bring Forward","下移":"Backward","下移一层":"Bring Backward","不透明度":"Opacity","五边形":"Polygon","位置":"Position","保存":"Save","保持宽高比":"Constrain proportions","内部存储":"Internal Storage","决策":"Decision","准备":"Preparation","分支":"Branch Line","分支类型":"Branch type","分支粗细":"Branch thickness","分支线条宽度逐渐变细":"Tapered line","分支颜色":"Line Color","删除":"Delete","删除单个节点":"Delete a single node","前进":"Forward","剪切":"Cut","剪切失败！":"Cut failed!","剪切成功！":"Cut successfully!","副标题":"Subtitle","加粗":"Bold","原始大小":"Original size","双击画布快速添加":"Double click to directly add","双向箭头":"Arrow 3","可设置颜色、布局、文字等样式":"Can set color, layout, text and other styles","右对齐":"Right","右箭头":"Arrow 2","合并":"Merge","后退":"Backward","回到中心":"Fit Page","图形":"Shape","图片":"Picture","图片上传中，请稍候":"Picture uploading, please wait","圆形":"Circle","圆角矩形":"Rounded Rectangle","垂直分布":"Vertically","基础图形":"Basic Graphics","基础格式":"Basic Format","填充":"Fill","填充颜色":"Fill","备注":"Note","复制":"Copy","复制为其它格式":"Copy to other formats","复制失败！":"Copy failed!","复制成功！":"Copy successfully!","多文档":"Multi Document","大小":"Size","大标题":"Title","子级":"Child","字号":"Font size","字色":"Font Color","存储数据":"Stored Data","实际尺寸":"Actual size","宽":"Widht","宽度":"Width","对齐":"Alignment","对齐方式":"Alignment","小标题":"Title small","层级":"Level","展开":"Expand","展开节点":"Expand topic","左右居中":"Justify","左对齐":"Left","左箭头":"Arrow 1","已粘贴当前页面复制的内容，如需粘贴页面外内容请使用 ":"The copied content of the current page has been pasted. If you need to paste the content outside the page, please use","布局":"Layout","平行四边形":"Parallelogram","幻灯片布局":"Slide layout","底对齐":"Bottom","延迟":"Delay","形状":"Shape","彩虹分支":"Multi-colored lines","循环起止符":"Loop Limit","思维导图":"Mindmap","或者":"Or","手动循环":"Manual loop","手动设置节点宽度":"Fixed size","手动设置节点尺寸":"Custom size","手动输入":"Manual Input","折叠":"Collapse","折叠节点":"Collapse topic","拖拽":"Drag","排列":"Arrange","排序":"Sort","描边":"Stroke","插入":"Insert","插入主节点":"Insert root topic","插入同级":"Insert sibling","插入同级节点":"Insert topic","插入图片":"Insert image","插入子级":"Insert child","插入子节点":"Insert subtopic","插入父级":"Insert parent","插入连线":"Inset line","插入链接":"Insert link","撤销":"Undo","数据":"Data","数据库":"Storage","整理":"Collate","文字样式":"Text Style","文本":"Text","文本颜色":"Font color","文档":"Document","新建节点":"New Node","旋转":"Rotate","旋转角度":"Rotate angle","无颜色":"No color","星形":"Star","显示":"Display","标注":"Comment","标注 2":"Annotation 2","样式":"Styles","格式":"Format","格式面板":"Format panel","正文":"Text","水平分布":"Horizontally","汇总连接":"Summing Junction","流程图":"Flowchart","流程图图形":"Flowchart Graphics","添加图形":"Insert Geometry","添加思维导图":"Insert Mindmap","添加文字":"Insert Text","添加连线":"Insert Line","添加链接":"Insert Link","点击选中元素":"Click on the selected element","父级":"Parent","矩形":"Rectangle","端点":"End Point","类型":"Type","粗细":"Line Width","粘贴":"Paste","粘贴失败！":"Paste failed!","线条":"Line","线条/边框":"Line/Border","线条样式":"Line style","线条端点":"Line Endpoint","线条类型":"Line Shape","线条粗细":"Line Width","线条颜色":"Line Color","终点":"End","结构":"Structure","编辑文本":"Edit text","置底":"Back","置顶":"Front","背景":"Background","背景颜色":"Background color","节点":"Node","节点填充":"Fill","节点形状":"Topic shape","节点描边":"Stroke","菱形":"Diamond","角度":"Angle","设置":"Setting","设置面板":"Properties","语雀文档":"Yuque document","语雀表格":"Yuque table","起止符":"Terminator","起点":"Start","边框":"Border","边框粗细":"Border thickness","边框颜色":"Border color","过程":"Process","连接器":"Connector","连接线":"Line","连线":"Insert Line","适应画布":"Reset View","重做":"Redo","链接":"Link","页外连接符":"Off-page Connector","顶对齐":"Top","预定义流程":"Predefined Process","颜色":"Color","高":"Height","高度":"Height","隐藏工具栏":"Hide Toolbar","展开工具栏":"Expand Toolbar"}}};function Qt(e,t){if(!e)return e;var n=Ut.locale,r=Ut.translations[n]||{};return"zh-cn"!==n&&(e=r[e]||e),e.replace(/\{([^\}]+)\}/g,(function(e,n){return t[n]||n}))}var Jt={html:"".concat(Qt("思维导图")),type:"mindmap",defaultContentStyle:{color:"rgb(38, 38, 38)"},border:{fill:"rgb(245, 245, 245)"}},$t={"line-height":!0,"font-size":!0,"text-decoration-line":!0,"font-weight":!0,"font-style":!0,"text-align":!0,"text-decoration":!0,color:!0},en=Object.freeze({__proto__:null,MINDMAP_ROOT_TEMPLATE:Jt,INLINE_STYLE:$t,EMPTY_TEXT:"&#8203;",SELECTED_STROKE_COLOR:"#096DD9",LOCKED_STROKE_COLOR:"#979797",DEFAULT_FONT_COLOR:"#262626",MULTI_SELECTED_FRAME_FILL:"rgba(9, 109, 217, .05)",LOCAL_STORAGE_CLIPBOARD_DATA_KEY:"lake_diagram_clipboard_data"}),tn=new _.a.FilterXSS({onIgnoreTag:function(){return""},css:{whiteList:$t},whiteList:{p:["style","id"],a:["href","title","target","style"],b:["style"],i:["style"],span:["style"],br:[],div:["style"]},onTagAttr:function(e,t,n){if("a"===e&&"href"===t){var r=Kt(n);return r?"".concat(t,'="').concat(r,'"'):""}}});function nn(e){if(e&&e.body){var t=[];e.body.forEach((function(e){Ye(e,(function(e,n){e.isPlaceholder?t.push({model:e,parent:n}):(function(e){if(e&&e.layout){var t=e.layout.type,n=e.layout,r=n.quadrants,a=n.direction;"standrad"===t?(1===(r=Array.isArray(r)?r.length:Number(r))&&(tt(a,[-1,0])||tt(a,[0,-1])?e.layout.quadrantConstraint=[2]:e.layout.quadrantConstraint=[1]),tt(a,[-1,0])?e.layout.direction=[1,0]:tt(a,[0,-1])&&(e.layout.direction=[0,1])):"indent"===t&&(tt(a,[1,0])?e.layout.quadrantConstraint=[1]:tt(a,[-1,0])&&(e.layout.quadrantConstraint=[2]),e.layout.direction=[1,1])}}(e),function(e){if("line"===e.type&&e.children&&delete e.children,e.image&&e.image.src){var t=Kt(e.image.src);e.image.src=tn.process(t)}}(e))}))})),t.forEach((function(t){var n=t.model,r=t.parent,a=r?r.children:e.body,i=a.indexOf(n);i>-1&&a.splice(i,1)}))}}var rn="http://www.w3.org/2000/svg",an="http://www.w3.org/1999/xlink";function on(e){e=e||document.body;var t=document.createElementNS(rn,"svg");return t.setAttribute("version","1.1"),t.setAttribute("xmlns",rn),t.setAttribute("xmlns:xlink",an),t.style.opacity=0,t.style.width="0px",t.style.height="0px",t.style.position="absolute",t.style["z-index"]=-1,e.appendChild(t),t}function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sn=on(),un=function(e){b()(n,E.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(m()(this,n),r=ln({matrix:[1,0,0,0,1,0,0,0,1]},r),e=t.call(this,r),!r.name)throw new Error("Should set name for Graphics Element!");return e.options=r,e.matrix=r.matrix,e.attrs={},e.styles={},e.rendererElement=e.create(r.name),e.update(r),e}return y()(n,[{key:"hide",value:function(){this.update({visibility:"hidden"})}},{key:"show",value:function(){this.update({visibility:"visible"})}},{key:"on",value:function(e,t){-1!==this.passthroughEventKeys().indexOf(e)&&this.rendererElement.addEventListener(e,t),B()(O()(n.prototype),"on",this).call(this,e,t)}},{key:"off",value:function(e,t){-1!==this.passthroughEventKeys().indexOf(e)&&this.rendererElement.removeEventListener(e,t),B()(O()(n.prototype),"off",this).call(this,e,t)}},{key:"passthroughEventKeys",value:function(){return["mousedown","mouseenter","mouseleave","mousemove","mouseover","click"]}},{key:"passthroughAttributeKeys",value:function(){return["id","fill","stroke","stroke-width","stroke-linecap","stroke-linejoin","stroke-miterlimit","clip-path","visibility","pointer-events","opacity","stroke-dasharray","class"]}},{key:"dataset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.rendererElement;t.dataset?Object.assign(t.dataset,e):Object.keys(e).forEach((function(n){t.setAttribute("data-".concat(n),e[n])}))}},{key:"_getPassthroughData",value:function(e,t){var n={},r=Object.keys(t),a=this["passthrough".concat(e,"Keys")]();return r.filter((function(e){return a.includes(e)})).forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n}},{key:"update",value:function(e){var t=this._getPassthroughData("Attribute",e),n=e.matrix;n&&(t.transform="matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(n[6],", ").concat(n[7],")"),this.matrix=n),this.attr(t)}},{key:"_setAttrs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rendererElement;Object.keys(e).forEach((function(n){var r=e[n];null==r?t.removeAttribute(n):t.setAttribute(n,r)}))}},{key:"_setStyles",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rendererElement;Object.keys(e).forEach((function(n){t.style[n]=e[n]}))}},{key:"create",value:function(e){return document.createElementNS(rn,e)}},{key:"css",value:function(e){if("object"===i()(e))this.styles=ln(ln({},this.styles),e),this._setStyles(e);else if("string"==typeof e)return this.styles[e]}},{key:"attr",value:function(e){if("object"===i()(e))this.attrs=ln(ln({},this.attrs),e),this._setAttrs(e);else if("string"==typeof e)return this.attrs[e]}},{key:"getBBox",value:function(){var e,t=this.rendererElement,n=this.canvas,r=n&&n.calculateCanvas||sn;if(document.contains(t))e=t.getBBox();else{var a=t.cloneNode(!0);r.appendChild(a),e=a.getBBox(),r.removeChild(a)}return{x:e.x,y:e.y,width:e.width,height:e.height}}},{key:"getBoundingClientRect",value:function(){return this.rendererElement.getBoundingClientRect()}},{key:"getZIndex",value:function(){return this.parent?this.parent.children.indexOf(this):null}},{key:"getSiblingRendererElement",value:function(){return this.rendererElement.nextSibling?["before",this.rendererElement.nextSibling]:this.rendererElement.previousSibling?["after",this.rendererElement.previousSibling]:null}},{key:"remove",value:function(){this.parent&&this.parent.removeChild(this)}},{key:"previousSibling",get:function(){var e=this.parent.children,t=e.indexOf(this);return t>=1?e[t-1]:null}},{key:"nextSibling",get:function(){var e=this.parent.children,t=e.indexOf(this);return t>=0?e[t+1]:null}},{key:"before",value:function(e){this.parent.insertBefore(e,this)}},{key:"after",value:function(e){this.parent.insertAfter(e,this)}},{key:"toBack",value:function(){if(!this.destroyed){var e=this.parent;e&&e.insertBefore(this,e.children[0])}}},{key:"toFront",value:function(){if(!this.destroyed){var e=this.parent;e&&e.insertBefore(this,null)}}},{key:"forward",value:function(){if(!this.destroyed){var e=this.parent,t=this.nextSibling;e&&t&&e.insertBefore(t,this)}}},{key:"backward",value:function(){if(!this.destroyed){var e=this.parent,t=this.previousSibling;e&&t&&e.insertBefore(this,t)}}},{key:"destroy",value:function(){this.destroyed=!0,this.options=null,this.remove()}}]),n}();function dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hn=function(e){b()(n,un);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),r=fn({name:"g"},r),(e=t.call(this,r)).children=[],e}return y()(n,[{key:"passthroughAttributeKeys",value:function(){return B()(O()(n.prototype),"passthroughAttributeKeys",this).call(this)}},{key:"deepEach",value:function(e){Ye(this,e)}},{key:"add",value:function(e){this.children.includes(e)||(e.parent=this,this.children.push(e),this.rendererElement.appendChild(e.rendererElement))}},{key:"append",value:function(e){this.rendererElement.appendChild(e.rendererElement)}},{key:"prepend",value:function(e){this.insertBefore(e,this.children[0])}},{key:"insertBefore",value:function(e,t){var n=this.children,r=this.rendererElement,a=n.indexOf(e);a>=0&&n.splice(a,1),e.parent=this;var i=n.indexOf(t);i>=0?(n.splice(i,0,e),r.insertBefore(e.rendererElement,t.rendererElement)):(n.push(e),r.insertBefore(e.rendererElement,null))}},{key:"insertAfter",value:function(e,t){t?this.insertBefore(e,t.nextSibling):this.insertBefore(e,null)}},{key:"removeChild",value:function(e){if(e.parent===this){var t=this.children,n=t.indexOf(e);n>-1&&t.splice(n,1),e.parent=void 0,this.rendererElement.removeChild(e.rendererElement)}}},{key:"clear",value:function(){[].concat(this.children).forEach((function(e){e.remove()}))}}]),n}();function pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gn=function(e){b()(n,hn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(m()(this,n),!(r=mn({container:null,calculatedContainer:null,name:"svg"},r)).container)throw new Error("Please set container for canvas!");(e=t.call(this,r)).options=r;var a=r,i=a.container,o=R()(e),c=o.rendererElement;return c.setAttribute("version","1.1"),c.setAttribute("xmlns",rn),c.setAttribute("xmlns:xlink",an),i.appendChild(c),e.createCalculateCanvas(),e.container=i,e.canvas=R()(e),e}return y()(n,[{key:"createCalculateCanvas",value:function(){var e=this.options;this.calculateCanvas=on(e.calculatedContainer)}},{key:"remove",value:function(){this.container&&this.container.removeChild(this.rendererElement),this.calculateCanvas&&this.calculateCanvas.parentElement.removeChild(this.calculateCanvas)}}]),n}();function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bn=function(e){b()(n,hn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),t.call(this,vn({x:0,y:0,scale:1,rotate:0},e))}return y()(n,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.options,e);var t=this.options,r=t.x,a=t.y,i=t.scale,o=t.rotate,c=i,l=Math.cos(o),s=Math.sin(o);e.matrix=[l*c,s*c,0,-s*c,l*c,0,r,a,1],B()(O()(n.prototype),"update",this).call(this,e)}}]),n}();var xn=function(e){b()(n,un);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),(e=t.call(this,r)).isShape=!0,e}return y()(n)}(),kn="\t\n\v\f\r   ᠎             　\u2028\u2029",wn=new RegExp("([a-z])["+kn+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+kn+"]*,?["+kn+"]*)+)","ig"),On=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+kn+"]*,?["+kn+"]*","ig");function Cn(e){if(!e)return null;if(Array.isArray(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return(e=String(e)).replace(wn,(function(e,r,a){var i=[],o=r.toLowerCase();if(a.replace(On,(function(e,t){t&&i.push(+t)})),"m"===o&&i.length>2&&(n.push([r].concat(i.splice(0,2))),o="l",r="m"===r?"l":"L"),"o"===o&&1===i.length&&n.push([r,i[0]]),"r"===o)n.push([r].concat(i));else for(;i.length>=t[o]&&(n.push([r].concat(i.splice(0,t[o]))),t[o]););return""})),n}function En(e){if(Array.isArray(e)){var t=L()(e);return[t[0],t.slice(1).join()].join("")}var n=e.name,r=e.x,a=e.y;switch(n.toLowerCase()){case"m":case"l":return n+[r,a].join();case"h":case"v":return n+r;case"z":return n;case"a":var i=e.xAxisRotation,o=e.largeArcFlag,c=e.sweepFlag;return n+[e.rx,e.ry,i,o,c,r,a].join();case"c":return n+[e.x1,e.y1,e.x2,e.y2,e.x,e.y].join();case"q":return n+[e.x1,e.y1,e.x,e.y].join();default:throw new Error("unknown path command: ".concat(n))}}function Pn(e){return e.map(En).join("")}function _n(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:a;return Pn(a?[["M",+e+ +a,t],["l",n-2*a,0],["a",a,i,0,0,1,a,i],["l",0,r-2*i],["a",a,i,0,0,1,-a,i],["l",2*a-n,0],["a",a,i,0,0,1,-a,-i],["l",0,2*i-r],["a",a,i,0,0,1,a,-i],["z"]]:[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]])}function jn(e){return Pn(e.map((function(e,t){return[0===t?"M":"L",e.x,e.y]})))}function Sn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return Pn([["M",e-n,t],["a",n,r,0,1,0,2*n,0],["a",n,r,0,1,0,-2*n,0],["Z"]])}function Rn(e,t,n){return Sn(e,t,n)}function Mn(e){for(var t=[],n=[0,.25,.5,.75],r=0;r<e.length-1;r++){var a=e[r-1],i=e[r],o=e[r+1],c=e[r+2];void 0===a&&(a={x:2*i.x-o.x,y:2*i.y-o.y}),void 0===c&&(c={x:2*o.x-i.x,y:2*o.y-i.y}),n[1]=Math.pow(vt(a.x,a.y,i.x,i.y),1)+n[0],n[2]=Math.pow(vt(i.x,i.y,o.x,o.y),1)+n[1],n[3]=Math.pow(vt(o.x,o.y,c.x,c.y),1)+n[2];var l=[(n[2]-n[1])/(n[2]-n[0]),(n[1]-n[0])/(n[2]-n[0]),(n[3]-n[2])/(n[3]-n[1]),(n[2]-n[1])/(n[3]-n[1])],s=[(n[2]-n[1])*(l[0]*(i.x-a.x)/(n[1]-n[0])+l[1]*(o.x-i.x)/(n[2]-n[1])),(n[2]-n[1])*(l[0]*(i.y-a.y)/(n[1]-n[0])+l[1]*(o.y-i.y)/(n[2]-n[1]))],u=[(n[2]-n[1])*(l[2]*(o.x-i.x)/(n[2]-n[1])+l[3]*(c.x-o.x)/(n[3]-n[2])),(n[2]-n[1])*(l[2]*(o.y-i.y)/(n[2]-n[1])+l[3]*(c.y-o.y)/(n[3]-n[2]))];t.push(["C",i.x+s[0]/3,i.y+s[1]/3,o.x-u[0]/3,o.y-u[1]/3,o.x,o.y])}return t}function Bn(e,t,n){var r=[],a=t[0],i=t[t.length-1],o=e[0],c=e[e.length-1];if(!o&&!o)return[];"V"===o[o.length-1]?r.push(["L",a.x,o[1]]):r.push(["L",o[0],a.y]);for(var l=1;l<e.length;l++){var s=e[l-1],u=e[l];"V"===u[u.length-1]?r.push(["L",s[0],u[1]]):r.push(["L",u[0],s[1]])}"V"===c[c.length-1]?r.push(["L",i.x,c[1]]):r.push(["L",c[0],i.y]);var d=r;n&&(d=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],a=e[n+1];r&&a&&pt(r.slice(1),a.slice(1),2)?n+=1:t.push(r)}return t}(r)),d.unshift(["M",a.x,a.y]);var f=d[d.length-1];if(ht(f[1],t[t.length-1].x,.65)&&ht(f[f.length-1],t[t.length-1].y,.65)?d[d.length-1]=["L",t[t.length-1].x,t[t.length-1].y]:ht(f[1],t[t.length-1].x)&&ht(f[f.length-1],t[t.length-1].y)||d.push(["L",t[t.length-1].x,t[t.length-1].y]),d.length>1){var h=d[0],p=d[1];ht(h[1],p[1],.65)&&ht(h[h.length-1],p[p.length-1],.65)&&d.splice(1,1)}return d}function An(e){var t=e.source,n=e.target,r=e.diagram,a=[],i=r.find(t.id),o=r.find(n.id),c=e.getPoints(),l=c[0],s=c[1];if(!i&&!o){var u=In(c[0],c[1]);return a.push(u),a}if(i&&o){var d=Dn(i,t),f=Dn(o,n),h=i.getRelativePoint({x:.5,y:.5}),p=o.getRelativePoint({x:.5,y:.5}),m=Nn(d,h,l,s),g=Nn(f,p,s,l),y=[l.x+m.direction[0]*m.offset,l.y+m.direction[1]*m.offset],v=[s.x+g.direction[0]*g.offset,s.y+g.direction[1]*g.offset];return[["C",y[0],y[1],v[0],v[1],s.x,s.y]]}if(!i&&o){var b=Nn(Dn(o,n),o.getRelativePoint({x:.5,y:.5}),s,l),x=In(c[0],c[1]);return x[3]=s.x+b.direction[0]*b.offset,x[4]=s.y+b.direction[1]*b.offset,a.push(x),a}var k=Nn(Dn(i,t),i.getRelativePoint({x:.5,y:.5}),l,s),w=In(c[0],c[1]);return w[1]=l.x+k.direction[0]*k.offset,w[2]=l.y+k.direction[1]*k.offset,a.push(w),a}function Dn(e,t){var n={x:-1,y:-1},r=t.connection;return r&&("string"===i()(r)?n=e.anchors.filter((function(e){return e.name===r}))[0]:Array.isArray(r)&&(n={x:r[0],y:r[1]})),{width:e.width,height:e.height,theta:e.rotate,port:n}}function Nn(e,t,n,r){var a,i,o=e.width,c=e.height,l=e.port,s=e.theta,u=l.x,d=l.y;if(0===u&&0===d||1===u&&1===d||0===u&&1===d||1===u&&0===d)return a=[n.x-t.x,n.y-t.y],i=Math.sqrt(Math.pow(o,2)+Math.pow(c,2))/3,{direction:Ln(a),offset:Math.max(i,36)};var f=Ln([n.x-t.x,n.y-t.y]);return 0===u&&d>0&&d<1?(a=0===s?[-1,0]:f,i=Math.abs(Math.abs(n.x)-Math.abs(r.x))):1===u&&d>0&&d<1?(a=0===s?[1,0]:f,i=Math.abs(Math.abs(n.x)-Math.abs(r.x))):0===d&&u>0&&u<1?(a=0===s?[0,-1]:f,i=Math.abs(Math.abs(n.y)-Math.abs(r.y))):1===d&&u>0&&u<1?(a=0===s?[0,1]:f,i=Math.abs(Math.abs(n.y)-Math.abs(r.y))):(a=f,i=Math.abs(n.y-r.y)),i/=2,{direction:a,offset:Math.max(i,32)}}function Ln(e){var t=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2));return 0!==t?[1/t*e[0],1/t*e[1]]:t}function In(e,t){var n=Tn(e,t),r=Tn(t,e);return["C",n.x,n.y,r.x,r.y,t.x,t.y]}function Tn(e,t){var n=0,r=0;return function(e,t){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)}(e,t)?n=zn(e.x,t.x):r=zn(e.y,t.y),{x:e.x+n,y:e.y+r}}function zn(e,t){return(t-e)/3}function Fn(e,t,n,r,a,i,o,c){return Pn([["M",e,t],["L",n,t],["L",n,r],["L",e,r],["Z"],["M",a,i],["L",a,c],["L",o,c],["L",o,i],["Z"]])}function Yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qn(e){for(var t,n=/([mlhvcsqtaz])/gi,r=e.replace(n," $1 ").trim().split(/[ ,]+/),a=[],i=0;i<r.length;i++){var o=r[i];n.test(o)?(t&&a.push(t),t=[o]):t.push(parseFloat(o))}return a}function Vn(e,t,n){return"string"==typeof e&&(e=qn(e)),e.map((function(e){return function(e,t,n){switch(Array.isArray(e)&&(e=function(e){var t=L()(e),n=t[0],r=t.slice(1);switch(n.toLowerCase()){case"m":case"l":var a=D()(r,2);return{name:n,x:a[0],y:a[1]};case"a":var i=D()(r,7);return{name:n,rx:i[0],ry:i[1],xAxisRotation:i[2],largeArcFlag:i[3],sweepFlag:i[4],x:i[5],y:i[6]};case"c":var o=D()(r,6);return{name:n,x1:o[0],y1:o[1],x2:o[2],y2:o[3],x:o[4],y:o[5]};case"q":var c=D()(r,4);return{name:n,x1:c[0],y1:c[1],x:c[2],y:c[3]};default:return{name:n}}}(e)),e.name.toLowerCase()){case"m":case"l":var r=e,a=r.x,i=r.y;return Xn(Xn({},e),{},{x:a*t,y:i*n});case"a":var o=e,c=o.x,l=o.y,s=o.rx,u=o.ry;return Xn(Xn({},e),{},{x:c*t,y:l*n,rx:s*t,ry:u*n});case"c":var d=e,f=d.x1,h=d.y1,p=d.x2,m=d.y2,g=d.x,y=d.y;return Xn(Xn({},e),{},{x1:f*t,y1:h*n,x2:p*t,y2:m*n,x:g*t,y:y*n});case"q":var v=e,b=v.x1,x=v.y1,k=v.x,w=v.y;return Xn(Xn({},e),{},{x1:b*t,y1:x*n,x:k*t,y:w*n});default:return e}}(e,t,n)}))}var Hn=Object.freeze({__proto__:null,parsePathString:Cn,formatPath:Pn,rectPath:_n,polylinePath:jn,ellipsePath:Sn,circlePath:Rn,catmullRomPath:Mn,elbowPath:Bn,bezierPath:An,huiPath:Fn,inflatePath:qn,scalePath:Vn});function Gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wn=function(e){b()(n,xn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),r=Zn(Zn({},r),{},{name:"path"}),(e=t.call(this,r)).isPath=!0,e}return y()(n,[{key:"passthroughAttributeKeys",value:function(){return B()(O()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["d","marker-start","marker-end","fill-rule"])}},{key:"update",value:function(e){var t=e.d;Array.isArray(t)?B()(O()(n.prototype),"update",this).call(this,Zn(Zn({},e),{},{d:Pn(t)})):B()(O()(n.prototype),"update",this).call(this,e)}},{key:"getPath",value:function(e,t){return Vn(this.options.d,e,t)}},{key:"getClosestPoint",value:function(e,t){var n=Gt(this.rendererElement,(function(n,r){var a=n-e,i=r-t;return a*a+i*i}));return[n.x,n.y]}},{key:"getIntersectionPoint",value:function(e,t,n,r){return Gt(this.rendererElement,(function(a,i){var o=a-e,c=i-t,l=a-n,s=i-r;return Math.sqrt(o*o+c*c)+Math.sqrt(l*l+s*s)}))}}]),n}();function Kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}["getPointAtLength","getTotalLength","isPointInFill","isPointInStroke"].forEach((function(e){Object.defineProperty(Wn.prototype,e,{value:function(){var t=this.rendererElement;return t[e].apply(t,arguments)}})}));var Qn=function(e){b()(n,xn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),e=Un({name:"html",html:"",x:0,y:0,width:0,height:0,styleSheets:[]},e),t.call(this,e)}return y()(n,[{key:"addClass",value:function(e){this.htmlContainer.classList.add(e)}},{key:"removeClass",value:function(e){this.htmlContainer.classList.remove(e)}},{key:"passthroughAttributeKeys",value:function(){return B()(O()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["x","y","width","height"])}},{key:"create",value:function(){var e=document.createElement("div"),t=B()(O()(n.prototype),"create",this).call(this,"foreignObject");return e.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),t.appendChild(e),this.htmlContainer=e,ot(this.htmlContainer,this.options.styleSheets),t}},{key:"update",value:function(e){e.html&&this.htmlContainer.innerHTML!==e.html&&(this.html=e.html,this.htmlContainer.innerHTML=e.html,ot(this.htmlContainer,this.options.styleSheets)),B()(O()(n.prototype),"update",this).call(this,e)}}]),n}();var Jn=function(e){b()(n,xn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),e={name:"avatar",matrix:e.element.matrix,element:e.element},t.call(this,e)}return y()(n,[{key:"create",value:function(){return this.options.element.rendererElement.cloneNode(!0)}}]),n}();function $n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$n(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tr=function(e){b()(n,xn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),t.call(this,er({name:"image",crossorigin:"anonymous",preserveAspectRatio:"none"},e))}return y()(n,[{key:"passthroughAttributeKeys",value:function(){return B()(O()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["href","x","y","width","height","crossorigin","preserveAspectRatio"])}}]),n}();function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ar=function(e){b()(n,Wn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){m()(this,n);var r=e.x,a=e.y,i=e.width,o=e.height,c=e.rx,l=e.ry;return t.call(this,rr(rr({},e),{},{d:_n(r,a,i,o,c,l)}))}return y()(n,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.options,r=n.x,a=n.y,i=n.width,o=n.height,c=n.rx,l=n.ry;return _n(r*e,a*t,i*e,o*t,Math.min(c*e,c),Math.min(l*e,l))}}]),n}();function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cr=function(e){b()(n,Wn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){m()(this,n);var r=e.cx,a=e.cy,i=e.rx,o=e.ry;return t.call(this,or(or({},e),{},{d:Sn(r,a,i,o)}))}return y()(n,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.options,r=n.cx,a=n.cy,i=n.rx,o=n.ry;return Sn(r*e,a*t,i*e,o*t)}}]),n}();function lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ur=function(e){b()(n,un);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),e=sr({name:"use"},e),t.call(this,e)}return y()(n,[{key:"passthroughAttributeKeys",value:function(){return B()(O()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["x","y","width","height","href"])}}]),n}();function dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hr=function(e){b()(n,un);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){return m()(this,n),t.call(this,fr(fr({},e),{},{name:"title"}))}return y()(n,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title;null!=t&&(this.rendererElement.innerHTML=t)}}]),n}();function pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gr=function(e){b()(n,un);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){return m()(this,n),t.call(this,mr(mr({},e),{},{name:"text"}))}return y()(n,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B()(O()(n.prototype),"update",this).call(this,e);var t=e||{},r=t.text;null!=r&&(this.rendererElement.innerHTML=r)}},{key:"passthroughAttributeKeys",value:function(){return B()(O()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["dominant-baseline","x","y","textLength"])}}]),n}();function yr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var br=function(e){b()(n,Wn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){m()(this,n);var r=e.points;return t.call(this,vr(vr({},e),{},{d:jn(r).concat("z")}))}return y()(n,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.options.points,r=n.map((function(n){return{x:n.x*e,y:n.y*t}}));return jn(r).concat("z")}}]),n}();function xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wr=function(e){b()(n,hn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),r=kr({name:"defs",matrix:null},r),(e=t.call(this,r)).isDefs=!0,e}return y()(n)}();var Or=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Cr=function(e){b()(n,un);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e;return m()(this,n),(e=t.call(this,{name:"linearGradient",matrix:null})).id=Object(I.a)(),e.rendererElement.setAttribute("id",e.id),e}return y()(n,[{key:"update",value:function(e){if("string"==typeof e){var t,n,r,a,i=this.rendererElement,o=Or.exec(e),c=(n=parseFloat(o[1]),(Math.PI/180*n%(t=2*Math.PI)+t)%t),l=o[2];c>=0&&c<.5*Math.PI?(r={x:0,y:0},a={x:1,y:1}):.5*Math.PI<=c&&c<Math.PI?(r={x:1,y:0},a={x:0,y:1}):Math.PI<=c&&c<1.5*Math.PI?(r={x:1,y:1},a={x:0,y:0}):(r={x:0,y:1},a={x:1,y:0});var s=Math.tan(c),u=s*s,d=(a.x-r.x+s*(a.y-r.y))/(u+1)+r.x,f=s*(a.x-r.x+s*(a.y-r.y))/(u+1)+r.y;i.setAttribute("x1",r.x),i.setAttribute("y1",r.y),i.setAttribute("x2",d),i.setAttribute("y2",f),i.innerHTML=function(e){var t=e.match(/[\d.]+:(#[^\s]+|[^\)]+\))/gi);if(!t)return"";var n="";return t.sort((function(e,t){return e=e.split(":"),t=t.split(":"),Number(e[0])-Number(t[0])})),t.forEach((function(e){e=e.split(":"),n+='<stop offset="'.concat(e[0],'" stop-color="').concat(e[1],'"></stop>')})),n}(l)}}}]),n}();function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _r=function(e){b()(n,hn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){return m()(this,n),t.call(this,Pr(Pr({},e),{},{name:"marker"}))}return y()(n,[{key:"passthroughAttributeKeys",value:function(){return B()(O()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["id","markerWidth","markerHeight","viewBox","orient","refX","refY"])}}]),n}();function jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rr=function(e){b()(n,hn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),(e=t.call(this,Sr(Sr({},r),{},{name:"filter"}))).children=[],e}return y()(n,[{key:"add",value:function(e){e.parent=this,this.children.push(e),this.rendererElement.appendChild(e.rendererElement)}},{key:"destroy",value:function(){this.children.forEach((function(e){return e.destroy()})),B()(O()(n.prototype),"destroy",this).call(this)}}]),n}();function Mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Br(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ar=function(e){b()(n,un);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){return m()(this,n),t.call(this,Br(Br({},e),{},{name:"feDropShadow"}))}return y()(n,[{key:"passthroughAttributeKeys",value:function(){return B()(O()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["dx","dy","stdDeviation","flood-color"])}}]),n}();function Dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lr=function(e){b()(n,hn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){return m()(this,n),t.call(this,Nr(Nr({},e),{},{matrix:null,name:"clipPath"}))}return y()(n,[{key:"passthroughAttributeKeys",value:function(){return B()(O()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["id","clipPathUnits"])}}]),n}(),Ir=Object.freeze({__proto__:null,Canvas:gn,Group:hn,FixedGroup:bn,Shape:xn,Path:Wn,Html:Qn,Avatar:Jn,Image:tr,Defs:wr,LinearGradient:Cr,Rect:ar,Ellipse:cr,Marker:_r,Use:ur,Filter:Rr,FeDropShadow:Ar,ClipPath:Lr,Title:hr,Text:gr,Polygon:br});function Tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,e),Object.assign(this,zr({autoSelect:!0},t))}return y()(e,[{key:"execute",value:function(){}},{key:"forward",value:function(){}},{key:"backward",value:function(){}},{key:"select",value:function(e){var t=this.diagram;this.autoSelect&&(e&&e.length>0?t.selector.select(e):(t.selector.clear(),t.tryFocus()))}}]),e}();function Yr(){var e=[],t=arguments[0];Array.isArray(t)?e.push(t):e.push([t]);for(var n=1;n<arguments.length;n++)if(t=arguments[n],Array.isArray(t))e.push(t);else{for(var r=[],a=0;a<e[0].length;a++)r.push(t);e.push(r)}return e}c()(Fr,"className","Command"),c()(Fr,"isModelChange",!0),c()(Fr,"enable",(function(){return!0}));var Xr=Object.freeze({__proto__:null,convertBatch:Yr});var qr=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.model,n=void 0===t?{}:t,r=this.cellOptions,a=Yr(n,void 0===r?{}:r);a[0].forEach((function(e){e.id||(e.id=Object(I.a)())}));var i=e.add.apply(e,z()(a));i.forEach((function(t,n){Object.assign(a[1][n],e.getCellOptions(t))})),this.changeArguments=a,this.select(i)}},{key:"forward",value:function(){var e=this.diagram,t=this.changeArguments,n=e.add.apply(e,z()(t));this.select(n)}},{key:"backward",value:function(){var e=this.diagram,t=this.changeArguments,n=e.find(t[0][0].id).parent;e.remove(t[0].map((function(e){return e.id}))),this.select(n&&n.model.id)}}]),n}();c()(qr,"className","Add");var Vr=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"getCells",value:function(){var e=this.changeArguments,t=this.diagram,n=e[0].map((function(e){return t.find(e)}));if(n.some((function(e){return!e})))throw new Error("can not find the cell");return n}},{key:"execute",value:function(){var e=this.diagram,t=this.model,n=this.cellOptions,r=void 0===n?{}:n,a=this.originModels,o=this.id;Array.isArray(o)&&"object"===i()(o[0])&&(o=o.map((function(e){return e.model.id})));var c=Yr(o,t,r);this.changeArguments=c;var l=this.getCells(),u=c[1];this.originModels=a||l.map((function(e,t){var n=u[t];return Object.keys(n).reduce((function(e,r){if("children"===r)return e;var a=n[r],i=l[t].model[r];return s()(a)?e[r]=Object.keys(a).reduce((function(e,t){var n=i&&i[t];return e[t]=null==n?null:n,e}),{}):e[r]=null==i?null:i,e}),{})})),this.originCellOptions=l.map((function(t){return e.getCellOptions(t)}));for(var d=0;d<u.length;d++)st(this.originModels[d],u[d]);e.update(l,u,c[2]),this.select(l)}},{key:"forward",value:function(){var e=this.diagram,t=this.changeArguments,n=this.getCells(),r=t[1];e.update(n,r,t[2]),this.select(n)}},{key:"backward",value:function(){var e=this.diagram,t=this.originModels,n=this.originCellOptions,r=this.getCells();e.update(r,t,n),this.select(r)}}]),n}();c()(Vr,"className","Update");var Hr=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.commands,t=e.length;e.forEach((function(e,n){e.autoSelect=n===t-1,e.execute()}))}},{key:"forward",value:function(){var e=this.commands,t=e.length;e.forEach((function(e,n){e.autoSelect=n===t-1,e.forward()}))}},{key:"backward",value:function(){for(var e=this.commands,t=e.length-1;t>=0;t--){var n=e[t];n.autoSelect=0===t,n.backward()}}}]),n}();c()(Hr,"className","Compound");var Gr=function(e){b()(n,Hr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){}}]),n}();c()(Gr,"className","NoneExecuteCompound");var Zr=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections,n=e.deduplicate(t).filter((function(e){return e.canCollapse()}));e.update(n,{collapsed:!0}),e.selector.select(n),this.cells=n.map((function(e){return e.model.id}))}},{key:"backward",value:function(){var e=this.diagram,t=this.cells;e.update(t,{collapsed:null}),e.selector.select(t)}},{key:"forward",value:function(){var e=this.diagram,t=this.cells;e.update(t,{collapsed:!0}),e.selector.select(t)}}]),n}();c()(Zr,"className","Collapse"),c()(Zr,"enable",(function(e){var t=e.selector.selections;return e.deduplicate(t).some((function(e){return e.canCollapse()}))}));var Wr=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections,n=e.deduplicate(t).filter((function(e){return e.canExpand()}));e.update(n,{collapsed:null}),e.selector.select(n),this.cells=n.map((function(e){return e.model.id}))}},{key:"backward",value:function(){var e=this.diagram,t=this.cells;e.update(t,{collapsed:!0}),e.selector.select(t)}},{key:"forward",value:function(){var e=this.diagram,t=this.cells;e.update(t,{collapsed:null}),e.selector.select(t)}}]),n}();c()(Wr,"className","Expand"),c()(Wr,"enable",(function(e){var t=e.selector.selections,n=e.deduplicate(t);return n.every((function(e){return!e.canCollapse()}))&&n.some((function(e){return e.canExpand()}))}));var Kr=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,[{key:"execute",value:function(){this.diagram.command.undo()}}]),n}();c()(Kr,"className","Undo"),c()(Kr,"enable",(function(e){return e.command.index>=0}));var Ur=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,[{key:"execute",value:function(){this.diagram.command.redo()}}]),n}();c()(Ur,"className","Redo"),c()(Ur,"enable",(function(e){var t=e.command;return t.index<t.commands.length-1}));var Qr=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,[{key:"execute",value:function(){var e=this.diagram.viewport;e.setViewport(e.zoom+.2)}}]),n}();c()(Qr,"className","ZoomIn"),c()(Qr,"isModelChange",!1),c()(Qr,"enable",(function(e){var t=e.viewport;return t.zoom+.2<=t.maxZoom}));var Jr=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,[{key:"execute",value:function(){var e=this.diagram.viewport;e.setViewport(e.zoom-.2)}}]),n}();c()(Jr,"className","ZoomOut"),c()(Jr,"isModelChange",!1),c()(Jr,"enable",(function(e){var t=e.viewport;return t.zoom-.2>=t.minZoom}));var $r=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;m()(this,n),r=t.call(this,e);var a=R()(r).diagram.viewport;return r.queue=!1,r.zoom=e.zoom<a.minZoom&&a.minZoom||e.zoom>a.maxZoom&&a.maxZoom||e.zoom,r}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.zoom;e.viewport.setViewport(t)}}]),n}();function ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ta(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ea(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ea(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function na(e,t){t.importer.caches={};var n=t.selector.selections;if(0!==n.length){e.preventDefault();var a=t.exporter.clipboard(n);e.clipboardData.setData("text/html",a.html),e.clipboardData.setData("text/plain",a.text),r.LocalStorageUtil.setItem("lake_diagram_clipboard_data",JSON.stringify(ta(ta({},a),{},{recordTime:Date.now()})))}}c()($r,"className","ZoomTo"),c()($r,"isModelChange",!1);var ra={preventDefault:function(){},clipboardData:{setData:function(e,t){this[e]=t},getData:function(e){return this[e]},files:[]}};function aa(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!document.execCommand(e))if("paste"!==e)t.command.execute(e.charAt(0).toUpperCase()+e.slice(1),{e:ra});else{var i=r.LocalStorageUtil.getItem("lake_diagram_clipboard_data");if(i){i=JSON.parse(i);var o=j.ua.macos?"⌘+V":"Ctrl+V";a&&F.a.info(Qt("已粘贴当前页面复制的内容，如需粘贴页面外内容请使用 ")+o+Qt(" 粘贴")),ra.clipboardData.setData("text/html",i.html),ra.clipboardData.setData("text/plain",i.text),t.command.execute("Paste",{e:ra,focusPoint:n})}}}window.__lake_diagram_board_custom_clipboard_event=ra;var ia=Object.freeze({__proto__:null,handleCopy:na,customClipboardEvent:ra,executeClipboardCommand:aa});function oa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oa(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var la=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),t.call(this,ca({queue:!1},e))}return y()(n,[{key:"execute",value:function(){na(this.e,this.diagram)}}]),n}();c()(la,"className","Copy"),c()(la,"isModelChange",!1);var sa=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.e,n=this.focusPoint,r=t.clipboardData.getData("text/html"),a=t.clipboardData.getData("text/plain"),i=Array.from(t.clipboardData.files),o={text:a,html:r};i.length>0&&(""===r&&/^.+\.\w+$/.test(a)||""===a&&/^(<meta.+?>)?<img.+?>$/.test(r)||!a||!r)&&(o.files=i);var c=e.importer.clipboard(o,n);c?(this.handler=c,s()(c)&&(this.selectedCellId=e.selector.selections.map((function(e){return e.model.id})),e.destroyed||(e.signal.beforePasteSelect=!0,e.selector.select(this.handler.body.map((function(e){return e.id}))),e.signal.beforePasteSelect=!1))):this.queue=!1}},{key:"forward",value:function(){var e=this.handler,t=this.diagram;e&&(e.execute(),t.selector.select(this.handler.body.map((function(e){return e.id}))))}},{key:"backward",value:function(){var e=this.handler,t=this.diagram,n=this.selectedCellId;e&&(e.body.forEach((function(e){t.remove(e.id)})),n&&t.selector.select(n))}}]),n}();c()(sa,"className","Paste");var ua=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.call(this,{queue:!1})}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections[0];e.command.execute("ZoomTo",{zoom:1}),e.viewport.focus([t.x,t.y])}}]),n}();c()(ua,"className","FocusSelection"),c()(ua,"enable",(function(e){return 1===e.selector.selections.length}));var da=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.id,n=this.endHTML,r={html:n};Array.isArray(n)&&(r=n.map((function(e){return{html:e}}))),e.update(t,r)}},{key:"forward",value:function(){var e=this.diagram,t=this.endHTML,n=this.id,r={html:t};Array.isArray(t)&&(r=t.map((function(e){return{html:e}}))),e.update(n,r),this.select(n)}},{key:"backward",value:function(){var e=this.diagram,t=this.id,n=this.startHTML,r={html:n};Array.isArray(n)&&(r=n.map((function(e){return{html:e}}))),e.update(t,r),this.select(t)}}]),n}();c()(da,"className","UpdateCellContent");var fa=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=Qt("链接"),n=window.getSelection().getRangeAt(0).commonAncestorContainer;if(e.contentEditor.dom&&n===e.contentEditor.dom){var r=n.querySelectorAll("a");if(1===r.length){var a=r[0].getAttribute("href");a&&(t=a)}}e.contentEditor.execCommand("createLink",t)}}]),n}();c()(fa,"className","CreateLink"),c()(fa,"enable",(function(e){var t=e.getCell(e.contentEditor.dom);return e.contentEditor.getRange()&&t}));var ha=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r.onBeginInsertLine=function(e){if(r.sourceCell){var t=R()(r),n=t.diagram,a=t.beginInsertEvent,i=n.viewport.invertClient([e.clientX,e.clientY]);n.emit("begininsertline",{source:{id:r.sourceCell.model.id,connection:null},target:{id:null,connection:[i[0],i[1]]}}),n.off(a,r.onBeginInsertLine)}},r}return y()(n,[{key:"bindBegineInsertEvent",value:function(){var e=this.diagram,t=this.sourceCell,n=this.beginInsertEvent;e.off(n,this.onBeginInsertLine),t&&e.on(n,this.onBeginInsertLine)}},{key:"execute",value:function(){var e=this.diagram,t=this.shape,n=this.beginInsertEvent,r=e.selector.selections;1!==r.length||r[0].isLine||r[0].isGroup||(this.sourceCell=r[0],n="mousemove"),e.selector.clear(),e.tryFocus(),e.interaction.changeMode("beginInsertLine"),e.settings.line.shape=t,this.beginInsertEvent=n,this.beginInsertEvent&&this.bindBegineInsertEvent()}}],[{key:"enable",value:function(){return!0}}]),n}();c()(ha,"className","BeginInsertLine"),c()(ha,"isModelChange",!1),Fr.Add=qr,Fr.Collapse=Zr,Fr.Compound=Hr,Fr.Expand=Wr,Fr.NoneExecuteCompound=Gr,Fr.Redo=Ur,Fr.Undo=Kr,Fr.UpdateCellContent=da,Fr.Update=Vr,Fr.ZoomIn=Qr,Fr.ZoomOut=Jr,Fr.ZoomTo=$r,Fr.CreateLink=fa,Fr.BeginInsertLine=ha;var pa=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.name,n=this.value,r=e.selector,a=e.contentEditor,i=r.selections.filter((function(e){return e.textAreaElement})),o=i.map((function(e){return e.textAreaElement.htmlContainer})),c=o.map((function(e){return e.innerHTML}));e.contentEditor.batchEdit(o,t,n);var l=o.map((function(e){return e.innerHTML})),s={html:l};Array.isArray(l)&&(s=l.map((function(e){return{html:e}}))),this.endHTML=l,this.startHTML=c,this.id=i,e.update(i,s),1!==i.length||a.isBegin||a.prepareEdit()}},{key:"forward",value:function(){var e=this.diagram,t=this.endHTML,n=this.id,r={html:t};Array.isArray(t)&&(r=t.map((function(e){return{html:e}}))),e.update(n,r),this.select(n)}},{key:"backward",value:function(){var e=this.diagram,t=this.id,n=this.startHTML,r={html:n};Array.isArray(n)&&(r=n.map((function(e){return{html:e}}))),e.update(t,r),this.select(t)}}],[{key:"enable",value:function(e){return e.selector.selections.filter((function(e){return e.textAreaElement})).length>0}}]),n}();c()(pa,"className","ContentCommand");var ma=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(e){var t=this.diagram,n=this.cells,r=n.map((function(e){return e.model.id})),a=n.map((function(e){return t.getCellOptions(e)}));n.forEach((function(t){t[e]()}));var i=n.map((function(e){return t.getCellOptions(e)}));this.beforeCellOptions=a,this.afterCellOptions=i,this.id=r,this.select(r)}},{key:"backward",value:function(){var e=this.diagram,t=this.id,n=this.beforeCellOptions;e.update(t,{},n),this.select(t)}},{key:"forward",value:function(){var e=this.diagram,t=this.id,n=this.afterCellOptions;e.update(t,{},n),this.select(t)}}]),n}();c()(ma,"className","ZIndex");var ga=function(e){b()(n,ma);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){B()(O()(n.prototype),"execute",this).call(this,"toBack")}}]),n}();c()(ga,"className","ToBack");var ya=function(e){b()(n,ma);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){B()(O()(n.prototype),"execute",this).call(this,"toFront")}}]),n}();c()(ya,"className","ToFront");var va=function(e){b()(n,ma);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){B()(O()(n.prototype),"execute",this).call(this,"forward")}}]),n}();c()(va,"className","Forward");var ba=function(e){b()(n,ma);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){B()(O()(n.prototype),"execute",this).call(this,"backward")}}]),n}();c()(ba,"className","Backward");var xa=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){this.diagram.viewport.autoFit()}}]),n}();c()(xa,"className","FitViewport"),c()(xa,"isModelChange",!1);var ka=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,[{key:"execute",value:function(){var e=this.diagram;e.selector.select(e.getCells().filter((function(e){return e.state.visible})))}}]),n}();c()(ka,"className","SelectAll"),c()(ka,"isModelChange",!1);var wa=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,[{key:"execute",value:function(){this.diagram.viewport.setViewport(1)}}]),n}();c()(wa,"className","ActualSize"),c()(wa,"isModelChange",!1);var Oa=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections[0];e.contentEditor.prepareEdit(),e.contentEditor.beginEdit(),e.update(t,{})}}],[{key:"enable",value:function(e){var t=e.selector.selections;return 1===t.length&&t.every((function(e){return e.textAreaElement}))}}]),n}();c()(Oa,"className","BeginEditContent"),c()(Oa,"isModelChange",!1);var Ca=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,[{key:"execute",value:function(){var e=this.diagram;if("dragCanvas"===e.interaction.currentMode)e.interaction.changeMode("edit");else e.highlight.clear(),e.interaction.changeMode("dragCanvas")}}]),n}();function Ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ea(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ea(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c()(Ca,"className","ButtonDragCanvas"),c()(Ca,"isModelChange",!1);var _a=function(){function e(t){m()(this,e),this.index=-1,this.commands=[],this.diagram=t,this.commandConstructors={ToBack:ga,ToFront:ya,Forward:va,Backward:ba,Add:qr,Update:Vr,Compound:Hr,NoneExecuteCompound:Gr,Collapse:Zr,Expand:Wr,Undo:Kr,Redo:Ur,ZoomIn:Qr,ZoomOut:Jr,ZoomTo:$r,ActualSize:wa,FitViewport:xa,UpdateCellContent:da,ContentCommand:pa,FocusSelection:ua,Copy:la,Paste:sa,CreateLink:fa,BeginInsertLine:ha,SelectAll:ka,ButtonDragCanvas:Ca,BeginEditContent:Oa}}return y()(e,[{key:"find",value:function(e){var t=this.diagram;return!e||t&&t.destroyed?null:"string"==typeof e?this.commandConstructors[e]:e.constructor}},{key:"enable",value:function(e){var t=this.find(e);return t&&(!t.enable||t.enable(this.diagram))||!1}},{key:"register",value:function(e){this.commandConstructors[e.className]=e}},{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new this.commandConstructors[e](Pa({diagram:this.diagram},t))}},{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.diagram;if(!n||!n.destroyed){"string"==typeof e&&(e=this.create(e,t));var r=e.constructor.className,a={commandName:r,command:e};if(n&&n.emit("beforecommandexecute",a),this.enable(e)&&!0!==a.prevent){var i=+new Date;e.execute(),!1!==e.queue&&(this.index>-1?this.commands=this.commands.slice(0,this.index+1):this.commands=[],this.commands.push(e),this.index=this.commands.indexOf(e)),a.useTime=+new Date-i,a.isModelChange=e.constructor.isModelChange,n&&n.emit("aftercommandexecute",a)}return e}}},{key:"redo",value:function(){var e=this.index,t=this.commands;e>=t.length-1||(t[++e].forward(),this.index=e)}},{key:"undo",value:function(){var e=this.index,t=this.commands;e<0||(t[e].backward(),this.index=--e)}},{key:"destroy",value:function(){this.commands=void 0}}]),e}();c()(_a,"className","Command");var ja=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,e),this.onKey="on",this.offKey="off",Object.assign(this,t),this.events=[]}return y()(e,[{key:"bind",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e===window||e instanceof HTMLElement||e instanceof SVGElement?"addEventListener":r.onKey)||this.onKey;e[a](t,n);var i={object:e,eventName:t,callback:n,options:r};return this.events.push(i),i}},{key:"_unbind",value:function(e){var t=e.object,n=e.eventName,r=e.callback,a=e.options;if(t[(t===window||t instanceof HTMLElement||t instanceof SVGElement?"removeEventListener":a.offKey)||this.offKey](n,r),this.events){var i=this.events.indexOf(e);-1!==i&&this.events.splice(i,1)}}},{key:"unbind",value:function(e){var t=this;e?this._unbind(e):this.events.concat([]).forEach((function(e){t._unbind(e)}))}},{key:"destroy",value:function(){this.events&&this.unbind(),this.events=void 0,this.destroyed=!0}}]),e}();function Sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ra(e){var t=(new DOMParser).parseFromString(e,"text/html").querySelector("[data-lake_diagram_body]");return!!t&&{body:JSON.parse(t.dataset.lake_diagram_body),extraInformations:JSON.parse(t.dataset.lake_extra_informations||t.dataset.lake_computed_props_map)||{},optionsMap:{}}}function Ma(e){return e.replace(/[\u00A0-\u9999<>\&]/gim,(function(e){return"&#"+e.charCodeAt(0)+";"}))}function Ba(e){return e&&(e=tn.process(e)),"&#8203;"!==Ma(e)&&(e=e.replace(/[\u200B-\u200D\uFEFF]/g,"")),e||""}function Aa(e){try{var t,n,r,a,i,o,c=e.trim().split("\n"),l=[],s=0,u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Sa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sa(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}(c);try{for(u.s();!(o=u.n()).done;)if(0!==(a=o.value).trim().length){var d=(a=a.replace(decodeURI("%0D"),"")).match(/^(\s*)([\S].*)$/),f=D()(d,3),h=f[1],p=f[2];!i&&h&&t&&(i=h.length);var m=h.length/i;if(m)if(m>s)n=r,r={html:p},n.children=[r],s+=1;else if(m===s)r={html:p},n.children.push(r);else{var g=0;for(n=t;g<m-1;)n=n.children[n.children.length-1],g++;r={html:p},s=m,n.children.push(r)}else t=n=r={html:p},l.push(t)}}catch(e){u.e(e)}finally{u.f()}return l}catch(e){return null}}var Da=Object.freeze({__proto__:null,getLakeDataByHtml:Ra,toHTMLCharacters:Ma,parseHTML:Ba,structuredPlainText:Aa});function Na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function La(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Na(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ia(e,t){var n=e.endContainer,r=e.endOffset;return!!e.collapsed&&function e(t,n,r){if(t.nodeType===Node.TEXT_NODE){if(n!==t.data.length)return!1}else if(n!==t.childNodes.length)return!1;if(t===r)return!0;var a=t.parentNode;return!!a&&e(a,Array.from(a.childNodes).indexOf(t)+1,r)}(n,r,t)}function Ta(e,t){var n=e.startContainer,r=e.startOffset;return!!e.collapsed&&function e(t,n,r){if(n>0)return!1;if(t===r)return!0;var a=t.parentNode;return!!a&&e(a,Array.from(a.childNodes).indexOf(t),r)}(n,r,t)}function za(e,t){return e.nodeType===Node.ELEMENT_NODE&&(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector).call(e,t)}function Fa(e,t,n){for(;e&&n.contains(e);){if("string"==typeof t&&za(e,t)||"function"==typeof t&&t(e))return e;e=e.parentNode}return null}function Ya(e,t){var n=e.getAttribute("style");return n&&n.includes(t)}function Xa(e){for(var t=e.firstChild;t;){var n=t.nextSibling;e.parentNode.insertBefore(t,e),t=n}e.parentNode.removeChild(e)}function qa(e){return!(e.altKey||e.ctrlKey||e.metaKey||["Enter","Tab","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Capslock","Esc","Home","Pause","Shift","Option","Alt","Help","Esc","Backspace","Delete","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"].includes(e.key))}function Va(e,t){if(t&&t.childNodes[0]&&1===t.childNodes[0].nodeType){for(var n=t.childNodes[0];n&&1===n.nodeType&&n.tagName!==e&&n.tagName!==e;)n=n.childNodes[0];if(n&&n.tagName===e)return n}return e===t.tagName&&t||null}function Ha(e,t,n,r){var a=function(e,t){if(!e)return{};var n=window.getComputedStyle(e),r=n["text-align"],a=parseInt(n["font-size"]),i=n.color;return{textAlign:r,fontSize:t.fontSize?t.fontSize.value:a,color:t.foreColor?t.foreColor.value:i}}(e,n),i=function(e,t,n){if(!e)return{};var r=window.getComputedStyle(e),a=parseInt(r["font-size"]),i=r.color;return{bold:t.bold?!t.bold.cancel:!!Fa(e,(function(e){return Ya(e,"bold")}),n),italic:t.italic?!t.italic.cancel:!!Fa(e,(function(e){return Ya(e,"italic")}),n),strikethrough:t.strikethrough?!t.strikethrough.cancel:!!Fa(e,(function(e){return Ya(e,"line-through")}),n),underline:t.underline?!t.underline.cancel:!!Fa(e,(function(e){return Ya(e,"underline")}),n),fontSize:t.fontSize?t.fontSize.value:a,color:t.foreColor?t.foreColor.value:i}}(t,n,r);return La(La({bold:!1,italic:!1,strikethrough:!1,underline:!1},a),i)}function Ga(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return{};if(t){var i=t.startContainer;if(i===e)n=Va("SPAN",e),r=Va("DIV",e);else{var o=Fa(i,(function(e){return 1===e.nodeType}),e);n=o,r=o}}else n=Va("SPAN",e),r=Va("DIV",e);return Ha(r,n,a,e)}function Za(e){if(e.preventDefault(),this.isBegin){e.stopPropagation();var t=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("text/html");if(n){var r=(new DOMParser).parseFromString(n,"text/html");if(r&&1===r.body.childNodes.length&&"A"===r.body.childNodes[0].tagName)return this.execCommand("insertHTML",r.body.childNodes[0].outerHTML);if(n.includes("lake_diagram_content_editor_data"))return this.execCommand("insertHTML",r.querySelector("[data-lake_diagram_content_editor_data]").innerHTML)}return t&&/^https?:\/\/\S+$/.test(t)?this.execCommand("insertHTML",'<a href="'.concat(t,'" target="_blank">').concat(t,"</a>")):this.execCommand("insertText",t)}}function Wa(e){return!e||e&&!e.match(/^[\x00-\x7F]/)||e.startsWith("javascript:")}function Ka(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"copy";if(this.isBegin){e.stopPropagation(),"copy"===t&&e.preventDefault();var n=this.getRange(),r=document.createElement("div"),a=n.cloneContents();r.dataset.lake_diagram_content_editor_data=!0,r.appendChild(a),e.clipboardData.setData("text/html",r.outerHTML),e.clipboardData.setData("text",r.innerText)}}function Ua(e,t,n){Ye(t,(function(t){if(1===t.nodeType){var n=t.getAttribute("style");n&&n.includes("font-size: x-small;")&&(t.style["font-size"]="".concat(e,"px"))}}),(function(e){return e.childNodes}));var r=[];Ye(t,(function(e){1===e.nodeType&&"FONT"===e.tagName&&r.push(e)}),(function(e){return e.childNodes})),r.length>0&&(n&&!n.collapsed&&Ye(n.commonAncestorContainer,(function(e){1===e.nodeType&&n.isPointInRange(e,0)&&(e.style["font-size"]="")}),(function(e){return e.childNodes})),r.forEach((function(t){var n=t.parentNode,r=document.createElement("span");r.style["font-size"]="".concat(e,"px"),n.insertBefore(r,t),r.appendChild(t),Xa(t);var a=r.childNodes[0];a&&"SPAN"===a.tagName&&1===r.childNodes.length&&(Object.keys($t).forEach((function(e){a.style[e]&&"font-size"!==e&&(r.style[e]=a.style[e])})),Xa(a)),"SPAN"===n.tagName&&1===n.childNodes.length&&(Object.keys($t).forEach((function(e){r.style[e]&&"font-size"!==e&&(n.style[e]=r.style[e])})),Xa(r))})))}function Qa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ja(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qa(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $a=j.HotKeyUtils.isHotkey,ei=function(e){b()(n,E.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e;return m()(this,n),(e=t.call(this)).eventHelper=new ja,e.isBegin=!1,e.readyCommands={},e.compositing=!1,e.eventObj={},e}return y()(n,[{key:"batchEdit",value:function(e,t,n){var r,a=this,i=window.getSelection();try{r=i.getRangeAt(0)}catch(e){}e.forEach((function(e){var r=document.createRange();r.selectNodeContents(e),i.removeAllRanges(),i.addRange(r);var o=e.getAttribute("contenteditable");e.setAttribute("contenteditable",!0),"fontSize"===t?(a._execCommand(t,1),Ua(n,e,r)):a._execCommand(t,n),o||e.removeAttribute("contenteditable")})),i.removeAllRanges(),r&&i.addRange(r)}},{key:"prepareEdit",value:function(){var e=this.dom;if(e){this.updateStartContent();var t=window.getSelection(),n=document.createRange();e.focus(),n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),this.emit("prepareedit")}}},{key:"closest",value:function(e,t){return Fa(e,t,this.dom)}},{key:"getRange",value:function(){if(!this.dom)return null;var e=window.getSelection();try{var t=e.getRangeAt(0);return this.dom.contains(t.commonAncestorContainer)?t:null}catch(e){return null}}},{key:"_execCommand",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];document.execCommand("styleWithCss",!1,!0);var r=document.execCommand(e,n,t),a={name:e,showUI:n,value:t,result:r};return{result:r,eventObj:a}}},{key:"convertFontSize",value:function(e){var t=this.getRange();Ua(e,this.dom,t)}},{key:"execReadyCommand",value:function(){this.readyCommands.fontSize&&this.convertFontSize(this.readyCommands.fontSize.value),this.readyCommands={}}},{key:"execCommand",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.getRange();if(r&&e){if("fontSize"===e){var a=this._execCommand(e,1,n),i=a.result,o=a.eventObj;return this.convertFontSize(t),this.afterExecCommand({name:e,value:t,result:i,eventObj:o}),i}if("createLink"===e){var c=this._execCommand(e,t,n),l=c.result,s=c.eventObj;if(l){var u=this.dom.querySelectorAll("a");r=this.getRange(),s.target=Fa(r.commonAncestorContainer,"a",this.dom)||1===r.commonAncestorContainer.nodeType&&r.commonAncestorContainer.querySelector("a");for(var d=0;d<u.length;d++){var f=u[d];f.setAttribute("target","_blank"),f.style.cursor="default",Wa(f.getAttribute("href"))&&f.setAttribute("href","")}}return this.afterExecCommand({name:e,value:t,result:l,eventObj:s}),l}var h=this._execCommand(e,t,n),p=h.result,m=h.eventObj;return this.afterExecCommand({name:e,value:t,result:p,eventObj:m}),p}}},{key:"getFirstTag",value:function(e){return Va(e,this.dom)}},{key:"afterExecCommand",value:function(e){var t=e.name,n=e.value,r=e.result,a=e.eventObj;if(this.getRange().collapsed)if(this.readyCommands[t])Object.assign(this.readyCommands[t],{value:n,result:r,cancel:!this.readyCommands[t].cancel});else{var i=this.getRange().startContainer,o=i===this.dom?this.getFirstTag("SPAN"):this.closest(i,(function(e){return 1===e.nodeType}));this.readyCommands[t]={value:n,result:r,cancel:!!this.closest(o,(function(e){return Ya(e,"strikethrough"===t?"line-through":t)}))}}this.emit("execcommand",a),this.emitChangeEvent()}},{key:"emitChangeEvent",value:function(){this.emit("change",{dom:this.dom})}},{key:"beginEdit",value:function(){if(this.dom){this.isBegin=!0,this.emit("beginedit",this.eventObj),document.execCommand("styleWithCss",!1,!0),this.dom.classList.remove("selection-transparent");var e=escape(this.dom.innerText);this.dom.style.cursor="text",("%u200B"===e||"%u200D"===e)&&this.getRange().collapse(),this.emit("selectionchange")}}},{key:"forceEndEdit",value:function(){this.isBegin&&(this.endEdit(),this.prepareEdit())}},{key:"updateStartContent",value:function(){this.eventObj&&(this.eventObj.startHTML=Ba(this.dom.innerHTML))}},{key:"bind",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.eventHelper,a=Ja({insertParagraphKey:function(e){return(e.metaKey||e.ctrlKey||e.altKey)&&13===e.which},cancelKey:function(e){return 9===e.which||13===e.which||27===e.which}},n),i=a.insertParagraphKey,o=a.cancelKey;this.originCursor=e.style.cursor,this.dom=e,e.setAttribute("contenteditable",!0),e.setAttribute("spellcheck",!1),e.focus({preventScroll:!0}),this.eventObj={dom:e},this.updateStartContent(),r.bind(e,"contextmenu",(function(e){t.isBegin&&e.stopPropagation()})),r.bind(document,"selectionchange",(function(){t.compositing||(t.execReadyCommand(),t.emit("selectionchange"))}),{onKey:"addEventListener",offKey:"removeEventListener"}),r.bind(e,"keydown",(function(e){var n=t.dom,r=t.getRange();if(t.isBegin){if($a("mod+k",e))return e.preventDefault(),e.stopPropagation(),void t.execCommand("createLink",Qt("链接"));if(i(e))return t.execCommand("insertParagraph"),e.stopPropagation(),void e.preventDefault();if(o(e))return e.preventDefault(),e.stopPropagation(),void t.forceEndEdit();if($a("mod+s",e))return;if($a("left",e)&&Ta(r,n))return e.preventDefault(),void e.stopPropagation();if($a("right",e)&&Ia(r,n))return e.preventDefault(),void e.stopPropagation();e.stopPropagation()}else{if($a("mod+c",e)||$a("mod+v",e)||$a("mod+x",e)||$a("shift+enter",e)||$a("space",e))return;if($a("mod+enter",e))return e.preventDefault(),e.stopPropagation(),void t.beginEdit();if(qa(e))return e.stopPropagation(),void t.beginEdit();e.preventDefault()}})),r.bind(e,"compositionstart",(function(){t.compositing=!0})),r.bind(e,"compositionend",(function(){t.compositing=!1})),r.bind(e,"input",(function(e){e.stopPropagation(),t.isBegin?t.emitChangeEvent():e.preventDefault()})),r.bind(e,"paste",Za.bind(this)),r.bind(e,"copy",Ka.bind(this)),r.bind(e,"cut",(function(e){Ka.call(t,e,"cut")}))}},{key:"endEdit",value:function(){this.isBegin=!1,this.eventObj.endHTML=Ba(this.dom.innerHTML),this.dom.style.cursor=this.originCursor,this.dom.classList.add("selection-transparent"),this.emit("endedit",this.eventObj)}},{key:"unbind",value:function(){var e=this.dom,t=this.eventHelper;e&&(e.removeAttribute("contenteditable"),e.removeAttribute("spellcheck"),t.unbind(),this.endEdit(),this.dom=void 0)}},{key:"query",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dom,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getRange(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.readyCommands;return Ga(e,t,n)}},{key:"destroy",value:function(){this.unbind(),this.eventHelper=void 0}}]),n}();c()(ei,"className","ContentEditor");var ti=function(){function e(t){m()(this,e),this.graphicGroup=t,this.dx=0,this.dy=0}return y()(e,[{key:"translate",value:function(e,t){this.graphicGroup.update({matrix:[1,0,0,0,1,0,e,t,1]}),this.dx=e,this.dy=t}},{key:"getBBox",value:function(){return this.graphicGroup.getBBox()}},{key:"destroy",value:function(){this.graphicGroup.destroy()}}]),e}(),ni=function(){function e(t){m()(this,e),this.diagram=t,this.delegations=[]}return y()(e,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.diagram,n=new hn;"function"==typeof e?e(n):((e=e.map((function(e){return"string"==typeof e&&(e=t.find(e)),e}))).sort((function(e,t){return e.getZIndex()-t.getZIndex()})),e.forEach((function(e){var t=new Jn({element:e.graphicGroup});n.add(t)}))),t.frontRootGroup.prepend(n);var r=new ti(n);return this.delegations.push(r),r}},{key:"clear",value:function(){var e=this;this.delegations.forEach((function(t){e.remove(t)}))}},{key:"remove",value:function(e){var t=this.delegations;t.splice(t.indexOf(e),1),e.destroy()}},{key:"destroy",value:function(){this.diagram=void 0,this.delegations=void 0}}]),e}();function ri(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ai(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ri(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ri(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ii(e){var t=new Image;return new Promise((function(n,r){t.onload=function(){n(t)},t.onerror=function(){r(new Error("unable to load url ".concat(e)))},t.crossOrigin="anonymous",t.src=e}))}function oi(e,t,n,r,a,i,o,c,l,s,u){var d=document.createElement("canvas"),f=d.getContext("2d");d.width=s,d.height=u,f.drawImage(t,r,a,i,o,c,l,s,u),e.push({canvas:d,fy:a*n,fHeight:u})}function ci(e){return li.apply(this,arguments)}function li(){return(li=ee()(ne.a.mark((function e(t){var n,r,a,i,o,c,l,s,u,d,f,h,p,m,g,y,v,b,x,k,w,O,C=arguments;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C.length>1&&void 0!==C[1]?C[1]:{},e.next=3,ii(t);case 3:if(r=e.sent,a=document.createElement("canvas"),i=ai({width:r.naturalWidth,height:r.naturalHeight,fLimit:1e4,ratio:1},n),o=i.width,c=i.height,l=i.fLimit,s=i.backgroundColor,u=i.ratio,d=o*u,f=c*u,a.width=d,a.height=f,h=a.getContext("2d"),s&&(h.fillStyle=s,h.fillRect(0,0,d,f)),f>l){for(p=parseInt(f/l),m=f%l,g=0,y=0,v=o,b=d,x=[],k=0,w=0,O=0;O<p;O++)oi(x,r,u,g,k,v,l/u,y,w,b,l),k+=l/u;oi(x,r,u,g,k,v,m/u,y,w,b,m),x.forEach((function(e){var t=e.canvas,n=e.fy,r=e.fHeight;h.drawImage(t,0,n,d,r)}))}else h.drawImage(r,0,0,d,f);return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c()(ni,"className","Delegator");var si=Object.freeze({__proto__:null,loadImage:ii,loadCanvas:ci});function ui(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function di(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ui(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ui(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fi(e){return"jpg"===e||"jpeg"===e}function hi(e){var t=(new XMLSerializer).serializeToString(e);return t=t.replace(/[\u200B-\u200D\uFEFF]/g,"").replace(/[\x00-\x1F\x7F-\x9F]/g,""),"data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent('<?xml version="1.0" encoding="utf-8"?>'+t)))}function pi(e,t){var n=t.left,r=t.top,a=t.width,i=t.height,o=t.padding;e.setAttribute("viewBox",[n-o,r-o,a+2*o,i+2*o].join(",")),e.setAttribute("width",a),e.setAttribute("height",i),e.style.width="".concat(a,"px"),e.style.height="".concat(i,"px")}function mi(e,t){if(t.image&&t.image.src){var n=document.createElement("img");n.setAttribute("src",t.image.src),e.appendChild(n)}}function gi(e,t){if(t.noteContent){var n=document.createElement("p");n.textContent=t.noteContent,e.appendChild(n)}}function yi(e){var t=document.createElement("td");return e.textContent&&(t.textContent=e.textContent),mi(t,e),gi(t,e),t}var vi=function(){function e(t){m()(this,e),this.diagram=t}var t,n,r;return y()(e,[{key:"_getSVG",value:function(){var e=this.diagram.getStaticSVG();return function(e){e.style.position="fixed",e.style.visibility="hidden",document.body.appendChild(e),pi(e,Object.assign(function(e){var t=1/0,n=1/0,r=-1/0,a=-1/0;return Array.from(e.childNodes).filter((function(e){return"root_group"===e.dataset.element})).forEach((function(e){if("defs"!==e.tagName.toLowerCase()){var i=e.getBBox(),o=i.x,c=i.y,l=i.width,s=i.height;o<t&&(t=o),o+l>r&&(r=o+l),c<n&&(n=c),c+s>a&&(a=c+s)}})),{left:t,top:n,width:r-t,height:a-n}}(e),{padding:2})),e.style.position="relative",e.style.visibility="visible",document.body.removeChild(e)}(e),e}},{key:"canvas",value:(r=ee()(ne.a.mark((function e(){var t,n,r,a,i,o,c,l,s,u=arguments;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},n=t.backgroundColor,r=t.paperClip,a=this.svg(),r&&(i=this.diagram.paper,o=i.size,pi(a,{left:0,top:0,width:o[0],height:o[1],padding:2})),e.next=6,Promise.all(Array.from(a.querySelectorAll("image"),function(){var e=ee()(ne.a.mark((function e(t){var n,r;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.getAttribute("href"))){e.next=6;break}return e.next=4,ci(n);case 4:r=e.sent,t.setAttribute("href",r.toDataURL("image/png"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return c=t.width||parseFloat(a.getAttribute("width")),l=t.height||parseFloat(a.getAttribute("height")),s=window.devicePixelRatio>2?window.devicePixelRatio:2,e.next=11,ci(hi(a),{backgroundColor:n,width:c,height:l,ratio:s});case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"json",value:function(e){var t=this.diagram,n={head:di({},t.head),body:[]};return t.rootGroup.rendererElement.childNodes.forEach((function(e,r){var a=t.getCell(e);if(a.model.zIndex=r,a.isRoot&&!a.model.isPlaceholder){var i=d()(a.model);i.children&&0===i.children.length&&delete i.children,Ye(i,(function(){void 0!==i.html&&(i.html=Ba(i.html))})),n.body.push(i)}})),"string"===e?JSON.stringify(n):n}},{key:"svg",value:function(e){var t=this._getSVG();return"string"===e||"dom-string"===e?'<?xml version="1.0" encoding="utf-8"?>'+(new XMLSerializer).serializeToString(t):t}},{key:"image",value:function(){var e=this.svg(),t=new Image;return t.src=hi(e),t}},{key:"blob",value:(n=ee()(ne.a.mark((function e(){var t,n,r,a=arguments;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"jpeg",n=a.length>1&&void 0!==a[1]?a[1]:{},fi(t)&&(n.backgroundColor="#fff"),e.next=5,this.canvas(n);case 5:return r=e.sent,e.abrupt("return",new Promise((function(e){r.toBlob(e,"image/".concat(t),"jpeg"===t?.8:1)})));case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"download",value:(t=ee()(ne.a.mark((function e(){var t,n,r,a,i,o=arguments;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"jpeg",n=o.length>1&&void 0!==o[1]?o[1]:{},fi(t)&&(n.backgroundColor="#fff"),e.next=5,this.canvas(n);case 5:r=e.sent,a=document.createElement("a"),i=n.filename||"yuque_diagram",a.download="".concat(i,".").concat(t),a.href=r.toDataURL("image/".concat(t)),a.click();case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_textContent",value:function(e){return e?function(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent}(e):""}},{key:"doc",value:function(e){var t=this,n=document.createElement("div");return e.forEach((function(e){Ye(e,(function(e){if(Je(e.depth,[0,3])){if(e.textContent){var r=document.createElement("h".concat(e.depth+1));r.textContent=e.textContent,n.appendChild(r)}return mi(n,e),void gi(n,e)}return t.list([e]).childNodes.forEach((function(e){n.appendChild(e)})),!1}))})),n}},{key:"table",value:function(e){var t=document.createElement("table");e.forEach((function(e){Ye(e,(function(e,n){if(e.parent=n,!e.children||0===e.children.length){var r=document.createElement("tr"),a=yi(e);for(r.prepend(a);n;){var i=yi(n);r.prepend(i),n=n.parent}t.appendChild(r)}}))}));var n=0;return t.childNodes.forEach((function(e){var t=e.childNodes.length;t>n&&(n=t)})),t.childNodes.forEach((function(e){for(var t=e.childNodes.length,r=0;r<n-t;r++){var a=document.createElement("td");e.appendChild(a)}})),t}},{key:"list",value:function(e){var t=document.createElement("div");return e.forEach((function(e){var n=document.createElement("ul");Ye(e,(function(e,t){e.level=t?t.level+1:1;var r=document.createElement("li");t?t.childContainer.appendChild(r):n.appendChild(r),e.textContent&&(r.textContent=e.textContent),mi(r,e),gi(r,e),e.children&&e.children.length>0&&(e.childContainer=document.createElement("ul"),t?t.childContainer.appendChild(e.childContainer):n.appendChild(e.childContainer))})),t.appendChild(n)})),t}},{key:"dom",value:function(e){var t=this,n=this.diagram,r=n.settings.copyType;e||(e=n.getCells().filter((function(e){return e.isStem}))),e=n.deduplicate(e);var a=document.createElement("div"),i=document.createElement("div"),o=[];e.forEach((function(e){o=o.concat(e.getAllCells())}));var c=o.reduce((function(e,t){var n=d()(t.computedProps)||{};return n.x=t.x,n.y=t.y,n.rootType=t.stem.type,n.nth=t.getNth(),n.hasParent=!!t.parent,e[t.model.id]=n,e}),{})||{},l=e.map((function(e){return di({},d()(e.model))}));i.dataset.lake_diagram_body=JSON.stringify(l);var s,u=JSON.stringify(c);return i.dataset.lake_extra_informations=u,a.appendChild(i),l.forEach((function(n,r){n.depth=e[r].depth,Xe(n,(function(e,t){e.depth=t.depth+1})),Ye(n,(function(e){e.textContent=t._textContent(e.html),e.note&&e.note.content&&(e.noteContent=t._textContent(e.note.content))}))})),s="doc"===r?this.doc(l):"table"===r?this.table(l):this.list(l),a.appendChild(s),a}},{key:"html",value:function(){return this.dom().outerHTML}},{key:"getText",value:function(){return this.dom().innerText}},{key:"clipboard",value:function(e){var t=this.dom(e);return{html:t.innerHTML,text:t.textContent}}},{key:"destroy",value:function(){this.diagram=void 0}}]),e}();c()(vi,"className","Exporter");var bi=function(){function e(t){m()(this,e);var n=new hn;n.css({"pointer-events":"none"}),this.diagram=t,this.group=n,this.arr=[],this.eventHelper=new ja}return y()(e,[{key:"bind",value:function(){var e=this,t=this.diagram,n=this.eventHelper;n.unbind(),n.bind(t,"afterchange",(function(t){var n=t.action;e.arr.length>0&&("update"===n||"delete"===n)&&e.draw()}))}},{key:"show",value:function(){this.group.show()}},{key:"hide",value:function(){this.group.hide()}},{key:"select",value:function(e){var t=this.diagram.viewport.zoom;e=e.filter((function(e){return e.multiSelectHighlight&&e.state.visible})),this.render(e,(function(e){return e.isLine?{type:"outline",shapeStyle:{fill:"none",stroke:"#096DD9","stroke-width":2/t}}:{type:"rect",shapeStyle:{fill:"none",stroke:"#fff","stroke-width":1/t},shadowStyle:{fill:"none",stroke:e.locked?"#979797":"#096DD9","stroke-width":1/t}}}))}},{key:"dock",value:function(e){this.render(e,(function(){return{type:"outline",shapeStyle:{"stroke-width":1,stroke:"#096DD9",fill:"none"},shadowStyle:{"stroke-width":2.5,stroke:"#E6F0FB",fill:"none"}}}))}},{key:"render",value:function(e,t){var n=this.group,r=this.diagram;tt(e,this.arr.map((function(e){return e.cell})))||(this.clear(),e&&!e.some((function(e){return!e||!e.isCell}))&&(r.frontRootGroup.add(n),this.bind(),this.arr=e.map((function(e){var r=t(e),a=r.type,i=r.shapeStyle,o=r.shadowStyle,c={cell:e,type:"function"==typeof a?a(e):a,shape:i&&new Wn(i),shadow:o&&new Wn(o)};return c.shadow&&n.add(c.shadow),c.shape&&n.add(c.shape),c})),this.draw()))}},{key:"_updateShape",value:function(e){var t=e.cell,n=e.type,r=e.shape,a=e.shadow,i=t.getKeyShape();if(i){var o,c=i.attr("stroke-width"),l=c/2,s=t.graphicGroup.matrix.concat([]),u=i.getBBox();if(o="outline"===n?i.attr("d"):_n(-l,-l,u.width+c,u.height+c),r.update({matrix:s,d:o}),a){var d=parseFloat(a.attr("stroke-width"))+parseFloat(r.attr("stroke-width")),f=u.width+c,h=u.height+c,p=o;t.isLine||(p=ae()(o).scale(1+d/f,1+d/h).translate(-d/2,-d/2).toString()),a.update({matrix:s,d:p})}}}},{key:"_draw",value:function(){var e=this;this.arr.forEach((function(t){e._updateShape(t)}))}},{key:"draw",value:function(){this.arr.length>0&&this._draw()}},{key:"clear",value:function(){this.destroyed||0===this.arr.length||(this.arr=[],this.group.clear(),this.group.remove(),this.eventHelper.unbind())}},{key:"destroy",value:function(){this.eventHelper.destroy(),this.group.destroy(),this.diagram=void 0,this.group=void 0,this.arr=void 0,this.destroyed=!0}}]),e}();c()(bi,"className","Highlight");var xi=function(){function e(t){m()(this,e),this.diagram=t}return y()(e,[{key:"json",value:function(e){this.diagram.add(e.body)}},{key:"clipboard",value:function(){return"clipboard"}},{key:"destroy",value:function(){this.diagram=void 0}}]),e}();c()(xi,"className","Importer");var ki=function(e){b()(n,ja);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(){}},{key:"reset",value:function(){}},{key:"pressKey",value:function(e){var t=e.diagram,n=e.keys,r=void 0===n?[]:n,a=e.isKey,i=void 0===a?function(e){return r.includes(e.key)}:a,o=e.onPress,c=void 0===o?function(){}:o,l=e.onCancel,s=void 0===l?function(){}:l,u=t.signal.keydown;this.bind(t,"keydown",(function(e){i(e)&&!u[e.key]&&(u[e.key]=!0,c(e))})),this.bind(window,"keyup",(function(e){u[e.key]&&(u[e.key]=!1,s(e))})),this.bind(window,"blur",(function(){for(var e in u)u[e]=!1}))}}]),n}();var wi=j.HotKeyUtils.isHotkey,Oi=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){wi("mod+z",t)?(e.command.execute("Undo"),e.tryFocus()):(wi("mod+y",t)||wi("shift+mod+z",t))&&(e.command.execute("Redo"),e.tryFocus())}))}}]),n}();function Ci(e){return j.ua.macos?e.metaKey:e.ctrlKey}var Ei=Object.freeze({__proto__:null,isMod:Ci});var Pi=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){if(Ci(t)&&"/"===t.key){if(e.command.enable("Collapse"))return e.command.execute("Collapse");if(e.command.enable("Expand"))return e.command.execute("Expand")}}))}}]),n}();var _i=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){var t=e.selector;this.bind(window,"mousedown",(function(n){var r=e.selector.selections,a=e.getCell(n.target);a&&a.state.selected&&e.contentEditor.isBegin||(a?n.shiftKey||(j.ua.macos?n.metaKey:n.ctrlKey)?r.includes(a)?t.select(r.filter((function(e){return e!==a}))):t.select(r.concat([a])):r.includes(a)||t.select([a]):it(n.target,(function(e){return e.dataset.lake_prevent_click_unselect||e.classList.contains("lake-diagram-prevent-mouse-select")}),window.document,(function(e){return e.parentNode}),(function(e){return!e}))||r.length>0&&t.clear(),a&&a.state.selected&&!e.contentEditor.isBegin&&n.preventDefault())}))}}]),n}();var ji=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"collapsedbutton:click",(function(t){var n=t.nativeEvent;if(n.stopPropagation(),n.target.closest("[data-diagram-collapsed-button=true]")){if(e.command.enable("Collapse"))return e.command.execute("Collapse");if(e.command.enable("Expand"))return e.command.execute("Expand")}}))}}]),n}();var Si=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"scroll",(function(e){(e.ctrlKey||j.ua.macos&&e.metaKey)&&(e.preventDefault(),e.stopPropagation())})),this.bind(e,"wheel",(function(t){if(t.ctrlKey||j.ua.macos&&t.metaKey){t.preventDefault(),t.stopPropagation();var n=t.wheelDelta||-t.deltaY;if(e.emit("wheelzoom"),Math.abs(n)>0){var r=e.viewport.zoom;n>0?e.viewport.setViewport(1.05*r):e.viewport.setViewport(r*(1/1.05))}}}))}}]),n}();var Ri=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"copy",(function(t){e.command.execute("Copy",{e:t})}))}}]),n}();var Mi=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"cut",(function(t){e.command.execute("Cut",{e:t})}))}}]),n}();var Bi=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"paste",(function(t){t.preventDefault(),e.command.execute("Paste",{e:t})}))}}]),n}();var Ai=j.HotKeyUtils.isHotkey,Di=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){Ai("mod+=",t)?(t.preventDefault(),e.command.execute("ZoomIn")):Ai("mod+shift+=",t)?(t.preventDefault(),e.command.execute("FitViewport")):Ai("mod+-",t)?(t.preventDefault(),e.command.execute("ZoomOut")):Ai("mod+0",t)?e.command.execute("ActualSize"):Ai("mod+8",t)&&e.command.execute("FocusSelection")}))}}]),n}();var Ni=document.createElement("div"),Li=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){var t=e.contentEditor;this.bind(t,"change",(function(t){var n=t.dom,r=e.getCell(n);!e.signal.preventUpdateCellContent&&r&&e.update(r,{html:n.innerHTML})})),this.bind(t,"beginedit",(function(t){var n=t.dom;e.signal.contentEditing=!0;var r=e.getCell(n);r&&r.beginEditContent()})),this.bind(t,"endedit",(function(t){var n=t.dom,r=t.startHTML,a=t.endHTML;e.signal.contentEditing=!1;var i=e.getCell(n);i&&(i.endEditContent(),Ni.innerHTML=a,""===Ni.textContent&&(a=-1!==a.indexOf("<br>")?a.replace("<br>","".concat("&#8203;","<br>")):"&#8203;"),r!==a&&"&#8203;"!==a?e.command.execute("UpdateCellContent",{id:i.model.id,startHTML:r,endHTML:a}):i.shouldRefreshEndEditContent()&&e.update(i))}))}}]),n}();var Ii=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){var t;this.bind(e,"mousedown",(function(n){clearTimeout(t),t=setTimeout((function(){e.getCell(n.target)?e.tryFocus():e.focus()}))}))}}]),n}();var Ti=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e;return m()(this,n),(e=t.call(this)).lines=void 0,e}return y()(n,[{key:"init",value:function(e){var t=this;this.bind(e,"afterselect",(function(){var n=e.selector.selections,r=t.lines;1===n.length?(r&&r.forEach((function(e){return e.resizer.end()})),t.lines=n.filter((function(e){return e.isLine})),t.lines.forEach((function(e){return e.resizer.begin()}))):(r&&r.forEach((function(e){return e.resizer.end()})),t.lines=void 0)}))}}]),n}(),zi=function(){function e(t){m()(this,e),this.diagram=t,this.modes={edit:[new Oi,new Pi,new _i,new ji,new Si,new Ri,new Mi,new Bi,new Di,new Li,new Ii,new Ti],read:[new Pi,new _i,new ji,new Di,new Si,new Ii,new Ri],none:[]},this.defaultCursors={read:"grab"},this.defaultCursor="default",this.currentMode=null}return y()(e,[{key:"_removeCurrentMode",value:function(){this.currentMode&&this.modes[this.currentMode].forEach((function(e){e.reset(),e.unbind()}))}},{key:"init",value:function(e){this.changeMode(e)}},{key:"addDefaultCursor",value:function(e){Object.assign(this.defaultCursors,e)}},{key:"registerMode",value:function(e,t){var n=this.modes;n[e]?n[e]=n[e].concat(t):this.modes[e]=t}},{key:"getModeCursor",value:function(){return this.defaultCursors[this.currentMode]||this.defaultCursor}},{key:"changeMode",value:function(e){var t=this,n=this.modes[e],r=this.diagram;r.emit("beforemodechange"),this._removeCurrentMode(),n.forEach((function(e){e.diagram=t.diagram,e.init(t.diagram)}));var a=this.defaultCursors[e]||this.defaultCursor;this.currentMode=e,r.emit("aftermodechange"),this.diagram.setCursor(a)}},{key:"destroy",value:function(){this._removeCurrentMode(),this.diagram=void 0,this.modes=void 0,this.currentMode=void 0}}]),e}();c()(zi,"className","Interaction");var Fi=function(){function e(t){m()(this,e),this.diagram=t,this.fill={color:"#ffffff"}}return y()(e,[{key:"init",value:function(e){Object.assign(this,{size:[200,200]},e),this.eventHelper=new ja,this.visible&&this.render(),this.bind()}},{key:"calculateBBox",value:function(){var e=this.diagram,t=this.size,n=e.rootGroup.getBBox(),r=e.viewport.zoom;if("auto"===t){var a={},i=e.width/r,o=e.height/r;if(n.width<i){var c=n.x+n.width/2,l=i/2;a.left=c-l,a.right=c+l}else a.left=n.x,a.right=n.x+n.width;if(n.height<o){var s=n.y+n.height/2,u=o/2;a.top=s-u,a.bottom=s+u}else a.top=n.y,a.bottom=n.y+n.height;return a}return 0===n.width&&0===n.height?Array.isArray(t)?{top:0,bottom:t[1],left:0,right:t[0]}:{top:0,bottom:e.height,left:0,right:e.width}:{top:Math.floor(n.y/t[1])*t[1],bottom:Math.ceil((n.y+n.height)/t[1])*t[1],left:Math.floor(n.x/t[0])*t[0],right:Math.ceil((n.x+n.width)/t[0])*t[0]}}},{key:"getBBox",value:function(){return this.calculateBBox()}},{key:"render",value:function(){var e=this.diagram,t=this.size,n=this.fill,r=e.defs,a=e.backRootGroup,i=Object(I.a)(),o=new Rr,c=new Ar({dx:0,dy:2,stdDeviation:8,"flood-color":"rgba(115, 115, 115, 0.08)"});o.attr({id:i}),o.add(c),r.add(o);var l=D()(t,2),s=l[0],u=l[1],d=new ar({x:0,y:0,width:s,height:u,fill:n.color});d.css({filter:"url(#".concat(i,")"),"pointer-events":"none"}),a.add(d),this.element=d}},{key:"bind",value:function(){var e=this;if(this.visible){var t=oe()((function(){e.update()}),16);this.eventHelper.bind(this.diagram,"afterviewportchange",t)}}},{key:"update",value:function(e){e&&Object.assign(this,e);var t=this.diagram,n=this.fill,r=this.size;if(this.visible){this.element||this.render();var a=D()(r,2),i=a[0],o=a[1],c=t.viewport.paperBox,l=c.left,s=c.top;this.element.update({x:l,y:s,width:i,height:o,fill:n&&n.color||"#fff"})}}},{key:"destroy",value:function(){this.element&&this.element.destroy(),this.eventHelper.destroy()}}]),e}();c()(Fi,"className","Paper");var Yi=function(){function e(t){m()(this,e),this.diagram=t}return y()(e,[{key:"init",value:function(e){var t=this;this.behaviours=[],e.forEach((function(e){t.registerPlugin(e)}))}},{key:"registerCell",value:function(e){this.diagram.Cells[e.className]=e}},{key:"registerPlugin",value:function(e){var t=this,n=this.diagram,r=e.Cells,a=e.Commands,i=e.Extends,o=e.modes,c=e.defaultCursors,l=e.dataProcessor,s=e.settings;r&&r.forEach((function(e){t.registerCell(e)})),o&&o.forEach((function(e){var r=e.mode,a=e.Behaviours.map((function(e){return new e}));n.interaction.registerMode(r,a),t.behaviours=t.behaviours.concat(a)})),a&&a.forEach((function(e){n.command.register(e)})),i&&n.addExtend(i),l&&n.addDataProcessor(l),c&&n.interaction.addDefaultCursor(c),s&&Object.assign(n.settings,s)}},{key:"destroy",value:function(){this.diagram=void 0,this.behaviours.forEach((function(e){return e.destroy()}))}}]),e}();c()(Yi,"className","Register");var Xi=function(){function e(t){m()(this,e),this.diagram=t,this.selections=[]}return y()(e,[{key:"_select",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.diagram,a=r.cellMap;"string"==typeof e&&(e=[a[e]]),Array.isArray(e)&&"string"==typeof e[0]&&(e=e.map((function(e){return a[e]}))),"object"===i()(e)&&e.isCell&&(e=[e]),e.forEach((function(e){if(e.state.selected!==n){var r=t.selections.indexOf(e);n?(e.select(),-1===r&&t.selections.push(e)):(e.unSelect(),-1!==r&&t.selections.splice(r,1))}}))}},{key:"select",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Array.isArray(e)||(e=[e]);var n=this.diagram,r=this.selections,a={selections:r.concat([])},i={selections:e.concat([]).map((function(e){return n.find(e)})).filter((function(e){return e}))},o={before:a,after:i,selections:i.selections},c=tt(a.selections,i.selections);!c&&n.emit("beforeselectionchange",o),n.emit("beforeselect",o),this._select(a.selections,!1),this._select(e,t),n.emit("afterselect",o),!c&&n.emit("afterselectionchange",o)}},{key:"clear",value:function(){this.select([])}},{key:"destroy",value:function(){this.diagram=void 0,this.selectedCell=void 0}}]),e}();c()(Xi,"className","Selector");var qi=function(){function e(t){m()(this,e),this.diagram=t}return y()(e,[{key:"init",value:function(){this.focusPoint=[0,0,1],this.minZoom=.2,this.maxZoom=4,this.zoom=1,this.autoFitPadding=8,this.m=null,this.scrollBarSize=20,this.eventHelper=new ja,this._initContainerSize(),this.setViewport(1),this._bindEvent()}},{key:"getViewportClientBox",value:function(){var e=this.diagram,t=this.scrollBarSize,n=e.viewportContainer.getBoundingClientRect(),r=n.x||n.left,a=n.y||n.top,i=n.width-t,o=n.height-t;return{minX:r,minY:a,maxX:r+i,maxY:a+o,x:r,y:a,width:i,height:o}}},{key:"getViewportCanvasBox",value:function(){var e=this.getViewportClientBox(),t=e.minX,n=e.minY,r=e.maxX,a=e.maxY,i=this.invertClient([t,n]),o=this.invertClient([r,a]);return{minX:i[0],minY:i[1],maxX:o[0],maxY:o[1],x:i[0],y:i[1],width:o[0]-i[0],height:o[1]-i[1]}}},{key:"width",get:function(){return this.diagram.width}},{key:"height",get:function(){return this.diagram.height}},{key:"_resetFocusPoint",value:function(){var e=this.focusPoint,t=this.getViewportClientBox();e[0]=t.x+t.width/2,e[1]=t.y+t.height/2}},{key:"_bindEvent",value:function(){var e=this,t=this.diagram,n=this.eventHelper,r=t.viewportContainer;n.bind(r,"scroll",oe()((function(){ht(e.scrollLeft,r.scrollLeft,1)&&ht(e.scrollTop,r.scrollTop,1)||e.moveTo(r.scrollLeft,r.scrollTop)}),16)),n.bind(t,"aftercommandexecute",(function(t){if(t.isModelChange){if(e.isPreventDefault||e.destroyed)return;e.refresh()}})),this._trackVisualFocus()}},{key:"translate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.scrollLeft,r=this.scrollTop;this.moveTo(n+e,r+t)}},{key:"preventDefault",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isPreventDefault=e}},{key:"scrollIntoView",value:function(e){var t=this.diagram,n=this.scrollBarSize,r=t.width,a=t.height,i=t.canvas.getBoundingClientRect();if(!(i.width<=r&&i.height<=a)){var o=this.convertViewport([e.x,e.y]),c=this.convertViewport([e.x+e.width,e.y+e.height]),l=this.scrollLeft,s=this.scrollTop;o[0]<0?l-=Math.abs(o[0])+20:c[0]>r-n&&(l+=c[0]-r+n+20),o[1]<0?s-=Math.abs(o[1])+20:c[1]>a-n&&(s+=c[1]-a+n+20),l===this.scrollLeft&&s===this.scrollTop||this.moveTo(l,s)}}},{key:"_trackVisualFocus",value:function(){var e=this,t=this.diagram,n=this.focusPoint,r=this.eventHelper;r.bind(t,"mousemove",(function(e){var t=e.clientX,r=e.clientY;n[0]=t,n[1]=r})),r.bind(t,"mouseleave",(function(t){t.relatedTarget&&1===t.relatedTarget.nodeType&&t.relatedTarget.closest(".lake-diagram-prevent-mouseleave-reset-focus-point")||e._resetFocusPoint()}))}},{key:"_resizeViewport",value:function(){var e=this.diagram,t=e.viewportContainer,n=e.width,r=e.height;t.style.width="".concat(n,"px"),t.style.height="".concat(r,"px"),t.style.maxWidth="".concat(n,"px"),t.style.maxHeight="".concat(r,"px")}},{key:"_initContainerSize",value:function(){this.diagram.viewportContainer.style.overflow="auto",this._resizeViewport()}},{key:"_change",value:function(){var e=this.scrollLeft,t=this.scrollTop,n=this.canvasWidth,r=this.canvasHeight,a=this.viewBox,i=this.diagram,o=i.viewportContainer,c=i.canvas;i.emit("beforeviewportchange"),this._resizeViewport(),c.rendererElement.style.display="block",c.rendererElement.style.width="".concat(n,"px"),c.rendererElement.style.height="".concat(r,"px"),c.rendererElement.setAttribute("viewBox",a.join(",")),o.scrollLeft=e,o.scrollTop=t,i.emit("afterviewportchange"),this._setMatrix(),this.viewportCanvasBox=this.getViewportCanvasBox()}},{key:"_setMatrix",value:function(){var e=this.zoom,t=this.scrollLeft,n=this.scrollTop,r=this.viewBox;this.n=[e,0,0,0,e,0,-e*r[0],-e*r[1],1],this.m=[e,0,0,0,e,0,-t-e*r[0],-n-e*r[1],1]}},{key:"isInnerCanvasPoint",value:function(e){var t=this.viewportCanvasBox,n=t.minX,r=t.maxX,a=t.minY,i=t.maxY;return!(e[0]<n||e[0]>r||e[1]<a||e[1]>i)}},{key:"focusFirstRoot",value:function(){var e=this.diagram,t=e.getCells().filter((function(e){return e.isStem}))[0];t&&(this.autoFit(),e.viewport.focus([t.x+t.width/2,t.y+t.height/2]),e.viewport.setViewport(1))}},{key:"focusGraphicCenter",value:function(){var e=this.diagram;if(e.getCells().length>0){var t=e.rootGroup.getBBox();e.viewport.focus([t.x+t.width/2,t.y+t.height/2]),e.viewport.setViewport(1)}}},{key:"moveTo",value:function(e,t){this._setScrollLeft(e),this._setScrollTop(t),this._change()}},{key:"getPadding",value:function(){var e=this.diagram;return e.options.padding||[e.height/2,e.width/2]}},{key:"_restoreCanvasTlPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zoom;this.setViewport(t);var n=this.invertViewport([0,0]);this.moveTo(this.scrollLeft+(e[0]-n[0])*t,this.scrollTop+(e[1]-n[1])*t)}},{key:"refresh",value:function(){var e=this.getViewportClientBox();this.setViewport(this.zoom,[e.x,e.y])}},{key:"_setScrollLeft",value:function(e){var t=this.diagram,n=this.canvasWidth,r=this.scrollBarSize,a=n-t.width+r,i=e;e<0&&(i=0),e>a&&(i=a),this.scrollLeft=i}},{key:"_setScrollTop",value:function(e){var t=this.diagram,n=this.canvasHeight,r=this.scrollBarSize,a=n-t.height+r,i=e;e<0&&(i=0),e>a&&(i=a),this.scrollTop=i}},{key:"setViewport",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.zoom,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.focusPoint,n=this.minZoom,r=this.maxZoom;e<n?e=n:e>r&&(e=r),this.zoom=e;var a,i,o=this.diagram,c=this.m,l=o.width,s=o.paper,u=s.getBBox(),d=this.getPadding(u,e),f=this.getViewportClientBox(),h=u.right-u.left,p=u.bottom-u.top,m=h*e+2*d[1],g=p*e+2*d[0],y=[u.left-d[1]/e,u.top-d[0]/e,m/e,g/e];if(c){var v=[t[0]-f.x,t[1]-f.y,1],b=ce.a.invert([],c),x=ce.c.transformMat3([],[v[0],v[1],1],b),k=[e,0,0,0,e,0,-e*y[0],-e*y[1],1],w=ce.c.transformMat3([],x,k);a=w[0]-v[0],i=w[1]-v[1]}else a=(m-l)/2,i=d[0]-u.top;this.paperBox=u,this.canvasWidth=m,this.canvasHeight=g,this.zoom=e,this.viewBox=y,this.containerBox=f,this._setScrollLeft(a),this._setScrollTop(i),this._change()}},{key:"convertViewport",value:function(e){var t=this.m;return ce.c.transformMat3([],[e[0],e[1],1],t)}},{key:"invertViewport",value:function(e){var t=this.m,n=ce.a.invert([],t);return ce.c.transformMat3([],[e[0],e[1],1],n)}},{key:"convertViewportAbs",value:function(e){var t=this.n;return ce.c.transformMat3([],[e[0],e[1],1],t)}},{key:"invertViewportAbs",value:function(e){var t=this.n,n=ce.a.invert([],t);return ce.c.transformMat3([],[e[0],e[1],1],n)}},{key:"convertClient",value:function(e){var t=this.m,n=this.getViewportClientBox(),r=ce.c.transformMat3([],[e[0],e[1],1],t);return[r[0]+n.x,r[1]+n.y]}},{key:"invertClient",value:function(e){var t=this.m,n=this.getViewportClientBox(),r=[e[0]-n.x,e[1]-n.y,1],a=ce.a.invert([],t),i=ce.c.transformMat3([],[r[0],r[1],1],a);return[i[0],i[1]]}},{key:"getCenter",value:function(){var e=this.getViewportClientBox();return this.invertClient([e.x+e.width/2,e.y+e.height/2])}},{key:"getFocus",value:function(){var e=this.focusPoint;return this.invertClient(e)}},{key:"toObject",value:function(){var e=this.zoom,t=this.diagram;return{zoom:e,tlCanvasPoint:this.invertViewport([0,0]),width:t.width,height:t.height}}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tlCanvasPoint||e.originCanvasTlPoint;if(t){var n=e.zoom;this._restoreCanvasTlPoint(t,n)}else"number"==typeof e.scrollLeft&&"number"==typeof e.scrollTop&&(this.setViewport(e.zoom),this.moveTo(e.scrollLeft,e.scrollTop))}},{key:"setWYSIWYG",value:function(e){var t=this.diagram,n=this.scrollBarSize;if(t.width>e.width&&t.height>e.height)this.set({zoom:e.zoom,tlCanvasPoint:e.tlCanvasPoint});else{var r=Math.min((t.width-n)/(e.width-n),(t.height-n)/(e.height-n))*e.zoom;this.set({zoom:r,tlCanvasPoint:e.tlCanvasPoint})}}},{key:"_focus",value:function(e){var t=this.m,n=this.getViewportClientBox(),r=ce.c.transformMat3([],[e[0],e[1],1],t),a=[n.width/2,n.height/2],i=a[0]-r[0],o=a[1]-r[1];this._setScrollLeft(this.scrollLeft-i),this._setScrollTop(this.scrollTop-o),this._setMatrix()}},{key:"focus",value:function(e){this._focus(e),this._change()}},{key:"autoFit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.minZoom,n=e.maxZoom,r=e.zoom,a=this.diagram,i=this.autoFitPadding,o=this.getViewportClientBox(),c=a.rootGroup,l=c.getBBox();t=t||this.minZoom,n=n||1,null==r&&(o.width-=2*i,o.height-=2*i,r=Math.min(o.width/l.width,o.height/l.height)),r<t?r=t:r>n&&(r=n),this._focus([l.x+l.width/2,l.y+l.height/2]),this._resetFocusPoint(),this.setViewport(r)}},{key:"destroy",value:function(){this.eventHelper.destroy(),this.diagram=void 0,this.destroyed=!0}}]),e}();c()(qi,"className","Viewport");var Vi,Hi,Gi,Zi=window.getSelection(),Wi=function(e){b()(n,E.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this)).diagram=e,r.eventHelper=new ja,r.emitQueryChange=se()((function(){r.destroyed||r.emit("querychange",{query:r._getQuery()})}),32),r}return y()(n,[{key:"init",value:function(){var e=this,t=this.diagram,n=this.eventHelper,r=this.emitQueryChange;n.bind(t.contentEditor,"selectionchange",(function(){e._updateEditRange(),r()})),n.bind(t,"afterselect",(function(){e._updateEditRange(),r()}))}},{key:"_updateEditRange",value:function(){var e=this.diagram;try{var t=Zi.getRangeAt(0);e.canvasContainer.contains(t.commonAncestorContainer)&&!Gi&&(Vi=t.cloneRange()),Hi=t.cloneRange()}catch(e){return}}},{key:"_setRange",value:function(e){e&&(Zi.removeAllRanges(),Zi.addRange(e))}},{key:"_getSelections",value:function(){return this.diagram.selector.selections.filter((function(e){return e.textAreaElement}))}},{key:"_getQuery",value:function(){var e,t=this.diagram,n=this._getSelections();if(n.length>1){var r=n.filter((function(e){return e.textAreaElement}));r.sort((function(e,t){return e.x-t.x}));var a=r.map((function(e){return e.textAreaElement.htmlContainer}));e=t.contentEditor.query(a[0],null)}else e=t.contentEditor.query();return e}},{key:"execCommand",value:function(e,t){var n=this.diagram,r=this.emitQueryChange;n.contentEditor.isBegin?(Vi.commonAncestorContainer!==Hi.commonAncestorContainer&&(Gi=!0),Gi&&this._setRange(Vi),n.contentEditor.execCommand(e,t),Vi=Zi.getRangeAt(0).cloneRange(),Gi=!1):n.command.execute("ContentCommand",{name:e,value:t}),r()}},{key:"destroy",value:function(){this.eventHelper&&this.eventHelper.destroy(),this.diagram=null,this.destroyed=!0}}]),n}();c()(Wi,"className","ContentEditorPlus");var Ki=Object.freeze({__proto__:null,Command:_a,ContentEditor:ei,Delegator:ni,Exporter:vi,Highlight:bi,Importer:xi,Interaction:zi,Paper:Fi,Register:Yi,Selector:Xi,Viewport:qi,ContentEditorPlus:Wi});function Ui(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Qi={find:function(e){if(null!=e){var t=this.cellMap;return"object"===i()(e)&&e.isCell?e:t[e]}},layout:function(e){var t=this.find(e);if(t&&!t.destroyed){if(!t.isStem)throw new Error("Only stem type cell can be layouted!");if(t.executeLayout){var n=this.cellMap;t.executeLayout(),this.emit("afterstemcelllayout",{stem:this}),Ye(t.model,(function(e){var r=n[e.id];r!==t&&r.drawPosition()}))}}},findByContent:function(e){return this.getCells().find((function(t){return t.html.includes(e)}))},_draw:function(e){var t=this;this.emit("beforedraw",e);var n=e.cells,r=void 0===n?[]:n,a=e.stems,i=void 0===a?[]:a,o=e.relatedLines,c=void 0===o?[]:o;i.forEach((function(e){!e.destroyed&&t.layout(e)})),r.forEach((function(e){!e.destroyed&&e.draw()})),c.forEach((function(e){!e.destroyed&&e.draw()})),this.emit("afterdraw",e)},_getStems:function(e){return et(e.map((function(e){return e.stem})))},_getRoots:function(e){return et(e.map((function(e){return e.root})))},_processSiblingSheets:function(e){var t=this.cellMap;e.sort((function(e,t){return t[3]-e[3]}));for(var n=0;n<e.length;n++){var r=e[n],a=t[r[0]],i=t[r[2]];if(a&&i){var o=r[1];"before"!==o&&"after"!==o||i.graphicGroup[o](a.graphicGroup)}}},getRelatedLines:function(e){var t=this.cellMap,n=e.reduce((function(e,t){return e[t.stem.model.id]=!0,e}),{}),r=this.getCells().filter((function(e){return e.isLine})),a=[];return r.forEach((function(e){["source","target"].some((function(r){var a=e[r].id,i=t[a];return a&&!i||i&&n[i.stem.model.id]}))&&a.push(e)})),a},_getCellConstructors:function(e){var t=this.Cells;if(!e)return[t.Cell];var n=e.charAt(0).toUpperCase()+e.substring(1),r=t[n+"Stem"],a=t[n+"Cell"];return r&&a?[r,a]:a||(a=t[n])?[a]:void 0},_getId:function(e){var t=this.cellMap;return null==e||t[e]?Object(I.a)():e},_add:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n={action:"add"};this.emit("beforechange",n);var r=this.cellMap,a=this.rootGroup,i=[],o=[];t.forEach((function(t){var n,a,c,l,s,u=t.model,d=t.options,f=[];if(d.parent){if(l=r[d.parent],a=l.stem.model,c=l.root.model,n=e._getCellConstructors(a.type),s=l,rt(l.model,u),d.nth>=0){var h=l.model.children;nt(h,h.indexOf(u),d.nth)}}else c=u;if(Ye(u,(function(t,i){i&&i.id&&(l=r[i.id]);var o=l?l.depth+1:0,s=0===o,u=!!t.type||s;u&&(a=t,n=e._getCellConstructors(t.type)),void 0!==t.html&&(t.html=Ba(t.html)),t.id=e._getId(t.id);var d=t.id,h=new(u?n[0]:n[n.length-1])({model:t,cellMap:r,parent:l,depth:o,isStem:u,isRoot:s,stem:r[a.id],root:r[c.id],diagram:e});r[d]=h,f.push(h)})),s){var p=e.find(u.id);i.push({cell:p,insertBeforeCell:s})}o=o.concat(f)})),o.sort((function(e,t){return e.zIndex-t.zIndex})),o.forEach((function(e){a.add(e.graphicGroup)})),i.forEach((function(e){var t=e.cell,n=e.insertBeforeCell;a.insertBefore(t.graphicGroup,n.graphicGroup)}));var c=[];t.forEach((function(e){var t=e.options;t.siblingSheets&&(c=c.concat(t.siblingSheets))})),this._processSiblingSheets(c);var l=t.map((function(e){return e.model})),s=this._getStems(o),u=this._getRoots(s),d=this.getRelatedLines(s);return n.models=l,n.stems=s,n.cells=o,n.roots=u,n.relatedLines=d,this._draw(n),this.emit("afterchange",n),l.map((function(e){return r[e.id]}))},add:function(e,t){var n,r={};if(Array.isArray(e))n=e.map((function(e){return{model:e}}));else{if(!s()(e))throw new Error("Params is illegal");n=[{model:e,options:t}]}return Array.isArray(t)?n.forEach((function(e,n){e.options=t[n]})):s()(t)&&n.forEach((function(e){e.options=t})),n.forEach((function(e){e.options||(e.options=r)})),this._add(d()(n))},_update:function(e){var t=this,n=this.cellMap,r=[],a={action:"update",models:[]},i=[];e=e.map((function(e){var n=t.find(e.id);return n?(e.cell=n,a.models.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ui(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ui(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:n.model.id},e.model)),e):null})).filter((function(e){return e})),this.emit("beforechange",a),e.forEach((function(e){var t=e.model,a=e.options,o=e.cell,c=n[a.parent];if(c){var l=o.parent!==c,s=c.stem.type===o.stem.type,u=c.isStem&&o.isStem;if(l&&(s||u)){if(o.parent){var d=o.parent.model.children;d.splice(d.indexOf(o.model),1)}rt(c.model,o.model),o.parent=c,o.isRoot=!1,o.stem!==o&&o.deepEach((function(e){e.stem=c.stem})),o.deepEach((function(e){e.root=c.root,e.depth=e.parent.depth+1}))}}else if(null===a.parent&&o.isStem&&o.parent){var f=o.parent.model.children;f.splice(f.indexOf(o.model),1),o.parent=null,o.isRoot=!0,o.depth=0,o.deepEachWithoutSelf((function(e){e.root=o,e.depth=e.parent.depth+1}))}var h=a.nth;if(void 0!==h&&o.parent){var p=o.parent.model.children;nt(p,p.indexOf(o.model),h)}a.siblingSheets&&(i=i.concat(a.siblingSheets)),o.updateModel(t),r.push(o),void 0!==t.collapsed&&Ye(o.model,(function(e){var t=n[e.id];t!==o&&t.drawCollapse()}))})),this._processSiblingSheets(i);var o=this._getStems(r),l=this._getRoots(o),s=this.getRelatedLines(o);a.cells=r,a.stems=o,a.roots=l,a.relatedLines=s,this._draw(a),this.emit("afterchange",a)},update:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(("string"==typeof e||"object"===i()(e)&&e.isCell)&&s()(n))t=[{id:e}];else{if(!Array.isArray(e))throw new Error("Please set id !");t=e.map((function(e){return{id:e}}))}return s()(n)?t.forEach((function(e){e.model=n})):Array.isArray(n)&&t.forEach((function(e,t){e.model=n[t]})),s()(r)?t.forEach((function(e){e.options=r})):Array.isArray(r)?t.forEach((function(e,t){e.options=r[t]})):t.forEach((function(e){e.options={}})),t.forEach((function(e){e.model=e.model||{},e.model=de()(e.model),e.options=e.options||{},e.options=de()(e.options)})),this._update(t)},_remove:function(e){var t=this,n=e.map((function(e){return t.find(e)})).filter((function(e){return e}));if(0!==n.length){n=this.deduplicate(n);var r=this.cellMap,a=n.map((function(e){return e.getAllCells()})).reduce((function(e,t){return e.concat(t)})),i=et(n.map((function(e){return e.stem}))),o=this.getRelatedLines(i),c=[],l={action:"remove",stems:i,models:c,relatedLines:o};n.forEach((function(e){c.push(e.model)})),this.emit("beforechange",l),n.forEach((function(e){if(l.models.push(e.model),e.parent){var t=e.parent.model.children;t.splice(t.indexOf(e.model),1)}})),a.forEach((function(e){e.destroy();var n=t.selector.selections.indexOf(e);-1!==n&&t.selector.selections.splice(n,1),delete r[e.model.id]})),this._draw(l),this.emit("afterchange",l)}},remove:function(e){return Array.isArray(e)||(e=[e]),this._remove(e)}},Ji={deduplicate:function(e){var t=this;if(!e||0===e.length)return e;if((e=e.concat([])).every((function(t){return t.depth===e[0].depth})))return e;e.sort((function(e,t){return e.depth-t.depth}));for(var n=0;n<e.length;n++){var r=e[n];r&&Xe(r.model,(function(n){n=t.find(n.id);var r=e.indexOf(n);-1!==r&&(e[r]=null)}))}return e.filter((function(e){return e}))},snapshot:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[t.map((function(e){return d()(e.model)})),t.map((function(t){return e.getCellOptions(t)}))]},getStaticSVG:function(){var e=this.getCells().filter((function(e){return e.state.beginEdit||e.state.selected||e.state.highlight}));e.forEach((function(e){return e.setDefault()}));var t=this.canvas.rendererElement.cloneNode(!0);return t.querySelector('[data-element="front_group"]').remove(),t.querySelector('[data-element="back_group"]').remove(),e.forEach((function(e){return e.updateState()})),t},getCell:function(e){var t=this.canvas,n=this.cellMap,r=this.domCellMap,a=this.rootGroup;if(!e||!a.rendererElement.contains(e)||t.rendererElement===e)return null;var i=r.get(e);if(i)return i;for(var o=Object.keys(n),c=0;c<o.length;c++){var l=n[o[c]];if(l.graphicGroup.rendererElement.contains(e))return r.set(e,l),l}return null},getCellOptions:function(e){var t=this,n=this.cellMap,r=[];return Ye(e.model,(function(e){var a=n[e.id],i=t.getSibling(a);i&&(i.unshift(a.model.id),i.push(a.getZIndex()),r.push(i))})),{parent:e.parent&&e.parent.model.id,nth:e.getNth(),siblingSheets:r}},getSibling:function(e){var t=e.graphicGroup.getSiblingRendererElement();return t?(t[1]=this.getCell(t[1]).model.id,t):null},getCells:function(){var e=[];return this.deepEach((function(t){e.push(t)})),e},getCellsByZIndex:function(){var e=[];return this.deepEach((function(t){e.push([t,t.getZIndex()])})),e.sort((function(e,t){var n=D()(e,2)[1],r=D()(t,2)[1];return n>r?1:n<r?-1:0})),e.map((function(e){return e[0]}))}},$i={changePaper:function(e){Object.assign(this.paper,e),this.viewport.refresh()},changeSize:function(e,t){var n=this.viewport;this.width=e,this.height=t,n.refresh()}},eo=Object.freeze({__proto__:null,Crud:Qi,Get:Ji,Change:$i});function to(e,t,n){for(var r=e.getCellsByZIndex().filter((function(e){return!(e.isLine||e.locked||e.isGroup||n&&(t=e,r=n,a=t.getBBox(),i=r.getBBox(),mt(a,i)||mt(i,a)));var t,r,a,i})),a=r.length-1;a>=0;a--){var i=r[a],o=i.getConnection(t);if(o&&i.model.id!==(null==n?void 0:n.model.id))return o===i?{id:i.model.id,connection:null}:{id:i.model.id,connection:o}}return{id:null,connection:t}}function no(e,t){var n=D()(t,2),r=n[0],a=n[1],i=e.createSVGPoint();return i.x=r,i.y=a,i}function ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ao(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ro(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var io=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(m()(this,e),!t.diagram)throw new Error("cell requires diagram!");Object.assign(this,ao({model:{},parent:null,computedProps:{},penetratedKeys:[],anchors:[],stroke:{width:1}},t)),this.stem=this.stem||this,this.root=this.root||this,this.type=this.stem.model.type,this.isCell=!0,this.matrix=[1,0,0,0,1,0,0,0,1],this.graphicGroup=new hn,this.eventHelper=new ja,this.state={visible:!0,capture:!0,selected:!1},this.zIndex=this.model.zIndex||0,this.cache={},this.options=t,this.multiSelectHighlight=!0,this.penetratedKeys=["strokeStyle"].concat(this.penetratedKeys)}return y()(e,[{key:"canDragCanvas",value:function(){return!0}},{key:"canDelete",value:function(){return!0}},{key:"canFill",value:function(){return!0}},{key:"canStroke",value:function(){return!0}},{key:"canStrokeWidth",value:function(){return!0}},{key:"canStrokeStyle",value:function(){return!0}},{key:"canCollapse",value:function(){var e=this.model;return e.children&&e.children.length>0&&!0!==this.collapsed}},{key:"canExpand",value:function(){var e=this.model;return e.children&&e.children.length>0&&!0===this.collapsed}},{key:"convertStrokeStyle",value:function(){if("dash"===this.stroke.style){var e=this.stroke.width||1;return{"stroke-dasharray":[e,3*e].join(" ")}}return{"stroke-dasharray":"none"}}},{key:"setDefault",value:function(){}},{key:"get",value:function(e){return d()(this[e])}},{key:"getOuterWidth",value:function(){return this.model.width}},{key:"isDiscrete",value:function(){}},{key:"beginEditContent",value:function(){}},{key:"endEditContent",value:function(){}},{key:"draw",value:function(){}},{key:"shouldRefreshEndEditContent",value:function(){return!1}},{key:"isContentEmpty",value:function(){var e=this.html,t=document.createElement("div");return t.innerHTML=e,!t.textContent||"%E2%80%8B"===encodeURI(t.textContent)}},{key:"getRelativePoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.width,r=this.height,a=this.getCanvasPoint({x:e.x*(n+2*t),y:e.y*(r+2*t)},t);return a}},{key:"getCanvasPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.matrix,r=ce.c.transformMat3([],[e.x-t,e.y-t,1],n),a=D()(r,2),i=a[0],o=a[1];return{x:i,y:o}}},{key:"capture",value:function(e){var t=this.graphicGroup,n=this.state;!0===e?t.css({"pointer-events":"auto"}):!1===e&&t.css({"pointer-events":"none"}),n.capture=e}},{key:"rotateTo",value:function(e){var t=[1,0,0,0,1,0,0,0,1];ce.a.fromRotation(t,e),this.matrix[0]=t[0],this.matrix[1]=t[1],this.matrix[3]=t[3],this.matrix[4]=t[4],this.graphicGroup.update({matrix:this.matrix})}},{key:"getBBox",value:function(){var e=this.getRelativePoint({x:0,y:0}),t=this.getRelativePoint({x:1,y:0}),n=this.getRelativePoint({x:0,y:1}),r=this.getRelativePoint({x:1,y:1}),a=Math.min(e.x,t.x,n.x,r.x),i=Math.min(e.y,t.y,n.y,r.y),o=Math.max(e.x,t.x,n.x,r.x),c=Math.max(e.y,t.y,n.y,r.y);return{minX:a,minY:i,maxX:o,maxY:c,x:a,y:i,width:o-a,height:c-i}}},{key:"eventDelegation",value:function(){}},{key:"getEventObject",value:function(e){return e}},{key:"getChildren",value:function(){var e=this.cellMap;return(this.model.children||[]).map((function(t){return e[t.id]}))}},{key:"getAllChildren",value:function(){var e=[];return this.deepEachWithoutSelf((function(t){return e.push(t)})),e}},{key:"getAllCellsByZIndex",value:function(){var e=this.getAllCells();return e.sort((function(e,t){return e.getZIndex()-t.getZIndex()})),e}},{key:"getAllCells",value:function(){var e=this.cellMap,t=[];return Ye(this.model,(function(n){t.push(e[n.id])})),t}},{key:"getSiblings",value:function(){var e=this,t=this.cellMap;return this.parent.model.children.filter((function(t){return t.id!==e.model.id})).map((function(e){return t[e.id]}))}},{key:"delegateEvent",value:function(e,t,n){var r=this,a=this.eventHelper,i=this.diagram;a.bind(e,t,(function(e){return i.emit(n,r.getEventObject(e))}))}},{key:"hide",value:function(){this.graphicGroup.css({display:"none"}),this.state.visible=!1}},{key:"show",value:function(){this.graphicGroup.css({display:""}),this.state.visible=!0}},{key:"updateState",value:function(){}},{key:"select",value:function(){this.state.selected=!0,this.state.highlight=!1,this.updateState()}},{key:"unSelect",value:function(){this.state.selected=!1,this.updateState()}},{key:"highlight",value:function(){this.state.highlight=!0,this.updateState()}},{key:"unHighlight",value:function(){this.state.highlight=!1,this.updateState()}},{key:"toBack",value:function(){this.graphicGroup.toBack()}},{key:"toFront",value:function(){this.graphicGroup.toFront()}},{key:"forward",value:function(){this.graphicGroup.forward()}},{key:"backward",value:function(){this.graphicGroup.backward()}},{key:"closest",value:function(e,t){return it(this,e,t)}},{key:"getZIndex",value:function(){return this.graphicGroup.getZIndex()}},{key:"getNth",value:function(){return this.parent?this.parent.model.children.indexOf(this.model):0}},{key:"forEach",value:function(e){var t=this.cellMap;this.model.children.forEach((function(n,r){e(t[n.id],r)}))}},{key:"deepEach",value:function(e){var t=this.cellMap;Ye(this.model,(function(n){return e(t[n.id])}))}},{key:"deepEachWithoutSelf",value:function(e){var t=this.cellMap;Xe(this.model,(function(n){return e(t[n.id])}))}},{key:"render",value:function(){}},{key:"update",value:function(e){this.updateModel(e),this.draw()}},{key:"updateModel",value:function(e){e&&(h()(this.model,e,(function(e,t){if(Array.isArray(e))return t})),this.normalize(),this.merge())}},{key:"normalize",value:function(){var e=this;Object.keys(this.model).forEach((function(t){var n=e.model[t];null==n?e.model[t]=void 0:s()(n)&&(Object.values(n).every((function(e){return null==e}))?e.model[t]=void 0:Object.keys(n).forEach((function(r){null==n[r]&&(e.model[t][r]=void 0)})))}))}},{key:"merge",value:function(){var e=this,t=this.model,n=this.penetratedKeys;Object.keys(t).filter((function(e){return n.includes(e)})).forEach((function(n){var r=t[n],a=e.default&&d()(e.default[n]);s()(r)&&a?Object.keys(r).forEach((function(t){var i=r[t];e[n][t]=null==i?a[t]:i})):e[n]=null==r?a:r}))}},{key:"isCacheStale",value:function(){for(var e=this,t=this.cache,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return r.some((function(n){var r=t[n],a=e[n];if(s()(a)&&s()(r))for(var i in a)if(a[i]!==r[i])return!0;return r!==a}))}},{key:"snapAnchor",value:function(e){var t=this,n=this.getRelativePoint({x:.5,y:.5}),r=[e.x-n.x,e.y-n.y];return this.anchors.map((function(e){var a=t.getRelativePoint(e);return ao(ao({},a),{},{rad:ce.b.angle(r,[a.x-n.x,a.y-n.y])})})).sort((function(e,t){return e.rad-t.rad}))}},{key:"getPoint",value:function(e){var t=this.anchors,n=i()(e);if("string"===n){var r=t.find((function(t){return t.name===e}));if(r)return this.getRelativePoint(r)}if("number"===n)if(e>=1&&e<t.length){var a=t[e-1];if(a)return this.getRelativePoint(a)}else if(e>=0)return this.getPointAtLength(e);if(Array.isArray(e)){var o=D()(e,2),c=o[0],l=o[1];return e.every((function(e){return e>=0&&e<=1}))?this.getRelativePoint({x:c,y:l}):{x:c,y:l}}throw new Error("unknown connection point ".concat(e))}},{key:"getKeyShape",value:function(){var e;return Xe(this.graphicGroup,(function(t){if(t.isPath)return e=t,!1})),e}},{key:"getSvgPoint",value:function(e){var t=e.x,n=e.y,r=this.diagram.canvas.rendererElement.createSVGPoint();return r.x=t,r.y=n,r}},{key:"isPointInShape",value:function(e){var t=this.matrix,n=ce.c.transformMat3([],[e.x,e.y,1],ce.a.invert([],t)),r=D()(n,2),a=r[0],i=r[1],o=this.getSvgPoint({x:a,y:i}),c=this.getKeyShape();return c.isPointInFill(o)||c.isPointInStroke(o)}},{key:"getIntersectionPoint",value:function(e){var t=this.matrix,n=[e.x,e.y,1],r=ce.c.transformMat3([],n,ce.a.invert([],t)),a=this.getRelativePoint({x:.5,y:.5}),i=ce.c.transformMat3([],[a.x,a.y,1],ce.a.invert([],t)),o=D()(i,2),c=o[0],l=o[1],s=D()(r,2),u=s[0],d=s[1],f=this.getKeyShape().getIntersectionPoint(u,d,c,l),h=this.width,p=this.height,m={x:Ze(f.x/h,0,1),y:Ze(f.y/p,0,1)};return this.getRelativePoint(m)}},{key:"getPointAtLength",value:function(e){var t=this.getKeyShape(),n=t.getTotalLength(),r=t.getPointAtLength(e*n);return this.getCanvasPoint(r)}},{key:"getConnection",value:function(e){var t=this.matrix,n=[e[0],e[1],1],r=ce.c.transformMat3([],n,ce.a.invert([],t)),a=D()(r,2),i=a[0],o=a[1],c=this.width,l=this.height;if(!(i<-8||i>c+8||o<-8||o>l+8)){for(var s=this.anchors,u=[i,o],d=0;d<s.length;d++){var f=s[d],h=[f.x*c,f.y*l];if(vt(u[0],u[1],h[0],h[1])<=8)return f.name||[f.x,f.y]}var p=this.getKeyShape(),m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=e.rendererElement.closest("svg"),a=no(r,t),i=e.attr("stroke-width");e.attr({"stroke-width":2*n});var o=e.isPointInStroke(a);return e.attr({"stroke-width":i}),o?e.getClosestPoint(t[0],t[1]):null}(p,[i,o],8);if(m)return[Ze(m[0]/c,0,1),Ze(m[1]/l,0,1)];var g=this.getSvgPoint({x:i,y:o});return p.isPointInFill(g)?this:void 0}}},{key:"drawPosition",value:function(){}},{key:"drawCollapse",value:function(){}},{key:"drawInherit",value:function(){}},{key:"destroy",value:function(){this.diagram.cleanDomCellMap(this.graphicGroup.rendererElement),this.eventHelper.destroy(),this.graphicGroup.destroy(),this.destroyed=!0,this.diagram=void 0,this.cellMap=void 0}}]),e}();c()(io,"className","Cell");var oo={plugins:[]},co="2.0.0";function lo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function so(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lo(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var uo=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","hover","drop","dragover","contextmenu"],fo=["touchstart","touchmove","touchend"],ho=["keydown","keyup","keypress"],po=["compositionstart","compositionend"],mo=["copy","paste","cut"],go=["wheel","scroll"],yo=j.HotKeyUtils.isHotkey,vo=function(e){b()(n,E.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;m()(this,n),e=so({locale:{},container:null,width:500,height:500,plugins:[],paper:null,padding:null,mode:"edit",head:{}},e),(r=t.call(this,e)).options=e,r.nativeEvents=[].concat(uo,fo,ho,po,mo,go),r.dataProcessors=[nn],r.Cells={Cell:io,Line:io.Line},r.head=so({version:"2.0.0"},e.head),r.cellMap={},r.elementMap={},r.signal={keydown:{}},r.settings={};var a=e.container,i=r._createViewportContainer(),o=r._createCanvasContainer(),c=r._createInputElement();return r.container=a,r.viewportContainer=i,r.canvasContainer=o,r.input=c,a.appendChild(i),i.appendChild(o),i.appendChild(c),r.width=e.width,r.height=e.height,r.calculatedContainer=r._appendCalculatedContainer(),r.domCellMap=new WeakMap,r._initMixin(),r._initCanvas(),r._initExtend(),r._initEvent(),r}return y()(n,[{key:"_initEvent",value:function(){var e=this,t=this.viewportContainer;this.nativeEvents.forEach((function(n){["mousedown","mouseup"].includes(n)?t.addEventListener(n,(function(t){var r=t.target,a={target:r,clientX:t.clientX,clientY:t.clientY,button:t.button,preventDefault:function(){t.preventDefault()},stopPropagation:function(){t.stopPropagation()}},i=e.getCell(r);i&&(a.cell=i,e.emit("".concat(i.type,":").concat(n),a)),e.emit(n,a)})):t.addEventListener(n,(function(t){e.emit(n,t)}))})),n._boundGlobalEvent||(window.addEventListener("mousedown",(function(e){!e.target.closest("[data-lake_prevent_click_unselect]")||e.target.matches("input")||e.target.matches("textarea")||e.preventDefault()})),n._boundGlobalEvent=!0)}},{key:"_createViewportContainer",value:function(){var e=document.createElement("div");return e.classList.add("lake-diagram-viewport-container"),e.style.position="relative",e.style.outline="none",e.style["user-select"]="text",e.setAttribute("tabindex",0),e.setAttribute("focusable",!0),e.setAttribute("dragable",!1),e.addEventListener("dragstart",(function(e){return e.preventDefault()})),e}},{key:"_createCanvasContainer",value:function(){return document.createElement("div")}},{key:"_createInputElement",value:function(){var e=this,t=document.createElement("div");return t.setAttribute("contenteditable",!0),t.style.position="fixed",t.style.top="-300px",t.style.left="-300px",t.style.right="0",t.style.bottom="0",t.style.width="100px",t.style.height="40px",t.margin="auto",t.style["z-index"]=2,t.style.outline="none",t.style.opacity=0,t.style["pointer-events"]="none",t.addEventListener("keydown",(function(t){yo("mod+v",t)||e.selector.selections.length>0&&(yo("mod+c",t)||yo("mod+x",t))})),t.addEventListener("beforeinput",(function(e){e.preventDefault()})),j.ua.mobile&&t.addEventListener("focus",(function(){t.blur()})),t}},{key:"_appendCalculatedContainer",value:function(){var e=this.options.container,t=document.createElement("div"),n=document.createElement("div");return t.appendChild(n),e.appendChild(t),t.style.opacity=0,t.style.height=0,t.style.width=0,t.style.overflow="hidden",n.style.width="10000px",n}},{key:"_initMixin",value:function(){var e=this;Object.keys(eo).forEach((function(t){var n=eo[t];Object.assign(e,n)}))}},{key:"_initExtend",value:function(){var e=this.options;this.extend={},this.addExtend(Object.keys(Ki).map((function(e){return Ki[e]}))),this.register.init(oo.plugins.concat(e.plugins)),this.paper.init(e.paper||{size:[828,1170]}),this.viewport.init(),this.interaction.init(e.mode),this.contentEditorPlus.init()}},{key:"_initCanvas",value:function(){var e=this.canvasContainer,t=this.calculatedContainer;this.canvas=new gn({container:e,calculatedContainer:t}),this.rootGroup=new hn,this.frontRootGroup=new hn,this.backRootGroup=new hn,this.rootGroup.dataset({element:"root_group"}),this.frontRootGroup.dataset({element:"front_group"}),this.backRootGroup.dataset({element:"back_group"}),this.defs=new wr,this.canvas.add(this.defs),this.canvas.add(this.backRootGroup),this.canvas.add(this.rootGroup),this.canvas.add(this.frontRootGroup)}},{key:"insertBefore",value:function(e,t){if(e.isStem&&t.isStem)for(var n=this.rootGroup,r=e.getAllCellsByZIndex(),a=t.getAllCellsByZIndex(),i=0;i<r.length;i++)n.insertBefore(r[i].graphicGroup,a[0].graphicGroup)}},{key:"cleanDomCellMap",value:function(e){var t=this.domCellMap;Ye(e,(function(e){t.delete(e)}),(function(e){return e.childNodes}))}},{key:"addExtend",value:function(e){var t=this;e.forEach((function(e){var n=e.className,r=n.charAt(0).toLowerCase()+n.substring(1),a=new e(t);t.extend[r]=a,t[r]=a}))}},{key:"addDataProcessor",value:function(e){this.dataProcessors.push(e)}},{key:"inherit",value:function(e,t){var n=this.cellMap;t||(t=this.getCells().filter((function(e){return e.isStem}))),t.forEach((function(t){Ye(t.model,(function(t,r){t=n[t.id],r=r&&n[r.id]||t.parent,t.computedProps=r?he()({},r.computedProps,ct(t,e)):ct(t,e)}))}))}},{key:"deepEach",value:function(e){var t=this.cellMap;Object.keys(t).forEach((function(n){e(t[n])}))}},{key:"focus",value:function(){var e=this.input,t=window.getSelection(),n=document.createRange();e.innerHTML="ddd",n.setStart(e.childNodes[0],1),n.setEnd(e.childNodes[0],2),t.removeAllRanges(),t.addRange(n)}},{key:"tryFocus",value:function(){this.viewportContainer.contains(document.activeElement)||this.focus()}},{key:"clear",value:function(){this.rootGroup.clear(),this.cellMap={}}},{key:"destroy",value:function(){if(!this.destroyed){var e=this.canvas,t=this.viewportContainer,n=this.extend,r=this.calculatedContainer;this.deepEach((function(e){e.destroy()})),Object.keys(n).forEach((function(e){n[e].destroy()})),t.parentNode.removeChild(t),r.remove(),e.destroy(),this.destroyed=!0}}},{key:"export",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json",t=e.split(":");if(!this.exporter[t[0]])throw new Error("Export of ".concat(t[0]," is not supported"));return this.exporter[t[0]](t[1])}},{key:"import",value:function(e){this.dataProcessors.forEach((function(t){t(e)}));var t=this.importer.json(e);return this.viewport.refresh(),t}},{key:"setCursor",value:function(e){this.canvas.css({cursor:e})}},{key:"resetCursor",value:function(){this.setCursor(this.interaction.getModeCursor())}}]),n}(),bo=function(){function e(t){m()(this,e),this.cell=t}return y()(e,[{key:"render",value:function(){}},{key:"update",value:function(){}},{key:"draw",value:function(){}},{key:"drawInherit",value:function(){}},{key:"drawPosition",value:function(){}},{key:"setDefault",value:function(){}},{key:"updateState",value:function(){}},{key:"destroy",value:function(){this.destroyed=!0}}]),e}();var xo=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"afterselect",(function(){var t=e.selector.selections;t.length>1?e.highlight.select(t.concat([])):e.highlight.clear()}))}}]),n}();var ko=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){var t,n,r,a,i;this.bind(e,"mousedown",(function(o){var c=e.getCell(o.target);(o.target===e.canvas.rendererElement||c&&c.canDragCanvas&&c.canDragCanvas())&&0===o.button&&(t=!0,n=o.clientX,r=o.clientY,a=e.viewport.scrollLeft,i=e.viewport.scrollTop,e.input.style.display="none")})),this.bind(e,"mousemove",(function(o){if(!e.signal.draggingcanvas&&t&&Math.abs(n-o.clientX)+Math.abs(r-o.clientY)>3&&(e.signal.draggingcanvas=!0,e.setCursor("grabbing")),e.signal.draggingcanvas&&void 0!==a){var c=a-(o.clientX-n),l=i-(o.clientY-r);e.viewport.moveTo(c,l)}})),this.bind(window,"mouseup",(function(){t&&(e.signal.draggingcanvas=!1,t=void 0,n=void 0,r=void 0,a=void 0,i=void 0,e.resetCursor(),e.input.style.display="")}))}}]),n}();var wo=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.pressKey({diagram:e,keys:["Alt","Control","Meta","Shift"]})}}]),n}();var Oo=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){Ci(t)&&"a"===t.key&&(t.preventDefault(),t.stopPropagation(),e.command.execute("SelectAll"),e.tryFocus())}))}}]),n}();var Co=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){function t(){"dragCanvas"===e.interaction.currentMode&&(e.interaction.changeMode("edit"),e.rootGroup.css({"pointer-events":"initial"}))}this.bind(e,"keydown",(function(t){" "!==t.key||e.signal.cellDragStart||(t.preventDefault(),t.stopPropagation(),"dragCanvas"!==e.interaction.currentMode&&(e.highlight.clear(),e.rootGroup.css({"pointer-events":"none"}),e.interaction.changeMode("dragCanvas")))})),this.bind(window,"keyup",t),this.bind(window,"blur",t)}}]),n}();function Eo(e){"flowchart"===e.type&&(e.type="geometry"),"edge"===e.type&&(e.type="line")}ki.AfterContentEditorChange=Li,ki.AfterSelectionChangeMultiSelectHighlight=xo,ki.KeyboardCollapseExpand=Pi,ki.KeyboardPressModifierKey=wo,ki.KeyboardSelectAll=Oo,ki.KeyboardSwitchEditAndDragCanvas=Co,ki.KeyboardUndoRedo=Oi,ki.KeyboardZoom=Di,ki.MouseCollapse=ji,ki.MouseDragCanvas=ko,ki.MouseSelect=_i,ki.MouseWheelZoom=Si,window.____lake_diagram_version="2.0.0";var Po=function(e){b()(n,io);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"getAlignBBox",value:function(){return this.getBBox()}},{key:"getKeyShapeBox",value:function(){var e=this.getKeyShape().getBBox(),t=this.x+e.x,n=this.y+e.y;return{x:t,y:n,width:e.width,height:e.height,minX:t,minY:n,maxX:t+e.width,maxY:n+e.height}}},{key:"getFullBBox",value:function(){var e=1/0,t=1/0,n=-1/0,r=-1/0;return this.deepEach((function(a){if(a.state.visible){var i=a.getBBox();e=Math.min(e,i.minX),t=Math.min(t,i.minY),n=Math.max(n,i.maxX),r=Math.max(r,i.maxY)}})),{x:e,y:t,width:n-e,height:r-t,minX:e,minY:t,maxX:n,maxY:r}}},{key:"toBack",value:function(){if(this.isStem){var e=this.diagram,t=e.groupManager.getStemsByZIndex(),n=t.indexOf(this);if(0!==n&&-1!==n){var r=t[0];e.insertBefore(this,r)}}}},{key:"toFront",value:function(){if(this.isStem){var e=this.diagram,t=e.groupManager.getStemsByZIndex(),n=t.indexOf(this),r=t.length;if(n!==r-1){var a=t[r-1];e.insertBefore(this,a),e.insertBefore(a,this)}}}},{key:"forward",value:function(){if(this.isStem){var e=this.diagram,t=e.groupManager.getStemsByZIndex(),n=t.indexOf(this);if(n!==t.length-1){var r=t[n+1];e.insertBefore(r,this)}}}},{key:"backward",value:function(){if(this.isStem){var e=this.diagram,t=e.groupManager.getStemsByZIndex(),n=t.indexOf(this);if(0!==n&&-1!==n){var r=t[n-1];e.insertBefore(this,r)}}}},{key:"canUseAddLineButton",value:function(){return!1}},{key:"canArrange",value:function(){return!!this.isStem}}]),n}();c()(Po,"className","BoardCell");var _o=[{key:"standard-h",directions:[[1,0],[-1,0]]},{key:"standard-r",directions:[[1,0]]},{key:"standard-l",directions:[[-1,0]]},{key:"standard-t",directions:[[0,-1]]},{key:"standard-b",directions:[[0,1]]},{key:"indent-br",directions:[[1,1]]},{key:"indent-bl",directions:[[-1,1]]},{key:"indent-tr",directions:[[1,-1]]},{key:"indent-tl",directions:[[-1,-1]]},{key:"timeline-r",directions:[[1,0]]},{key:"timeline-l",directions:[[-1,0]]}];function jo(e,t){if(0!==e.length){var n=[];return e.forEach((function(e){var r=t.get([e],"downDirection"),a=t.get([e],"downLayoutType"),i=t.get([e],"layoutQuadrantConstraint"),o=r.map((function(e){return Math.sign(e)})).join(","),c=(1===i.length?{"0,-1":"t","0,1":"b","-1,0":"l","1,0":"r","1,1":"br","-1,1":"bl","1,-1":"tr","-1,-1":"tl"}:{"-1,0":"h","1,0":"h","0,1":"v","0,-1":"v"})[o];n.push("".concat(a,"-").concat(c))})),n.every((function(e){return e===n[0]}))?n[0]:"multiValue"}}function So(e){var t,n,r=e.split("-"),a=D()(r,2),i=a[0],o=a[1];return"indent"===i?(t=[1,1],n={br:[1],bl:[2],tl:[3],tr:[4]}[o]):"standard"===i?"h"===o?(t=[1,0],n=null):"v"===o?(t=[0,1],n=null):"r"===o?(t=[1,0],n=[1]):"l"===o?(t=[1,0],n=[2]):"t"===o?(t=[0,1],n=[2]):"b"===o&&(t=[0,1],n=[1]):"timeline"===i&&("r"===o?(t=[1,0],n=[1]):"l"===o&&(t=[1,0],n=[2])),{type:i,direction:t,quadrantConstraint:n}}function Ro(e,t){var n=t.some((function(t,n){return Math.sign(t)===Math.sign(e[n])})),r=t.every((function(t,n){return Math.sign(t)!==-Math.sign(e[n])||0===Math.sign(t)}));return n&&r}function Mo(e,t){return"timeline"===e&&"indent"!==t}function Bo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ao(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bo(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Do(e){for(var t=[],n=1;n<e+1;n++)t.push(n);return t}function No(e,t,n){n=n||Do(t);for(var r,a,i,o={},c=0;c<e.length;c++){for(a=r=e[c],i=1;!n.includes(a)&&i<100;)i%2==1?(a+=i)>t&&(a%=t):(a-=i)<1&&(a=t+a%t),i++;o[r]=a}return o}var Lo=function(){function e(t){m()(this,e),Object.assign(this,Ao({algorithms:{},model:{}},t))}return y()(e,[{key:"_parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.algorithms,a=Ao(Ao({w:10,h:10,quadrant:void 0,quadrantConstraint:void 0,direction:[1,0],collapsed:!1,layout:void 0},e),{},{origin:e,depth:n,children:[],parent:t});if(a.quadrant?a.quadrant=Number(a.quadrant):a.quadrant=1,e.children&&!e.collapsed)for(var i=0;i<e.children.length;i++){var o=e.children[i];a.children.push(this._parse.call(this,o,a,n+1))}return a.layout&&(a.algorithm=r[a.layout],this._calculateDQ(a)),a}},{key:"_beforeLayoutAdjust",value:function(){this.beforeLayoutAdjust&&this.beforeLayoutAdjust(this.tree)}},{key:"_afterLayoutAdjust",value:function(){this.afterLayoutAdjust&&this.afterLayoutAdjust(this.tree)}},{key:"_buildTree",value:function(){var e=this.model,t=this._parse(e);t.x=void 0!==e.x?e.x:0,t.y=void 0!==e.y?e.y:0,t.layout=t.layout||"standard",this.tree=t}},{key:"_splitTreeByQuadrant",value:function(e){for(var t=e.quadrants,n=e.directionAngles,r=e.directions,a=[],i=0;i<t;i++){var o=Ao(Ao({},e),{},{directionAngle:n[i],quadrantTreeDirection:r[i],children:[]});a.push(o)}return e.children.forEach((function(e){a[e.mergedQuadrant-1].children.push(e)})),a}},{key:"_splitSubTrees",value:function(){var e=this.tree,t=[e];Xe(e,(function(e){e.layout&&(e.isSubTree=!0,e.x=0,e.y=0,e.tx=0,e.ty=0,t.unshift(e))})),this.trees=t}},{key:"_setUp",value:function(e){e.children.forEach((function(t){Ye(t,(function(t){t.upDirection=e.quadrantTreeDirection,t.upLayoutType=e.layout,t.upSignX=Math.sign(t.upDirection[0]),t.upSignY=Math.sign(t.upDirection[1])}),(function(e){if(!e.isSubTree)return e.children}))}))}},{key:"_setDown",value:function(e){Ye(e,(function(e){e.isSubTree?(e.downDirection=e.directions[e.quadrantConstraint[0]-1],e.downLayoutType=e.layout):(e.downDirection=e.upDirection,e.downLayoutType=e.upLayoutType),e.downSignX=Math.sign(e.downDirection[0]),e.downSignY=Math.sign(e.downDirection[1])}))}},{key:"_calculateSubTreeBBox",value:function(e){if(e.collapsed)return e.tx=e.x,e.ty=e.y,e.tw=e.w,void(e.th=e.h);var t=e.x,n=e.x+e.w,r=e.y,a=e.y+e.h;Xe(e,(function(e){var i,o,c,l;e.isSubTree?(i=e.tx,o=e.ty,c=e.tx+e.tw,l=e.ty+e.th):(i=e.x,o=e.y,c=e.x+e.w,l=e.y+e.h),i<t&&(t=i),o<r&&(r=o),c>n&&(n=c),l>a&&(a=l)}),(function(t){if(!t.isSubTree||t===e)return t.children})),e.tx=t,e.ty=r,e.tw=n-t,e.th=a-r}},{key:"_setUpAndDown",value:function(){var e=this,t=this.trees,n=this.tree;n.upDirection=n.directions[n.quadrantConstraint[0]-1],n.upLayoutType=n.layout,n.upSignX=Math.sign(n.upDirection[0]),n.upSignY=Math.sign(n.upDirection[1]),t.forEach((function(t){var n=e._splitTreeByQuadrant(t);(n=n.filter((function(e){return e.children&&e.children.length>0}))).forEach((function(t){e._setUp(t)})),t.quadrantTrees=n})),this._setDown(n)}},{key:"_layout",value:function(){var e=this,t=this.trees,n=this.tree;t.forEach((function(t){var n=t.algorithm,r=[];t.quadrantTrees.forEach((function(e){n.layout(e,r)})),e._calculateSubTreeBBox(t),r.push(t),t.zNodes=r})),n.zNodes=function e(t){return t.reduce((function(t,n){return Array.isArray(n)?[].concat(z()(t),z()(e(n))):[].concat(z()(t),[n])}),[])}(n.zNodes)}},{key:"_calculateDQ",value:function(e){e.quadrants=e.algorithm.constructor.QUADRANTS,e.directionAngles=function(e,t){for(var n=[],r=2*Math.PI/t,a=At(e,[1,0]),i=0;i<t;i++){var o=a+r*i;o=o>=2*Math.PI?o-2*Math.PI:o,n.push(o)}return n}(e.direction,e.quadrants),e.directions=e.directionAngles.map((function(e){return[Number(Math.cos(e).toFixed(3)),Number(Math.sin(e).toFixed(3))]})),e.quadrantRange=Do(e.quadrants),e.childQuadrantRange=et(e.children.map((function(e){return e.quadrant}))),e.quadrantConstraint=e.quadrantConstraint||e.quadrantRange}},{key:"_mergeQuadrant",value:function(e,t){var n=e.quadrantConstraint,r=e.quadrants,a=No(e.childQuadrantRange,r,n);e.children.forEach((function(e){e[t]=a[e.quadrant]}))}},{key:"_firstMergeQuadrant",value:function(){var e=this;this.trees.forEach((function(t){e._mergeQuadrant(t,"mergedQuadrant")}))}},{key:"_forceUseUpDirection",value:function(e,t){e.direction=t,this._calculateDQ(e)}},{key:"_fixQuadrantConflict",value:function(){var e=this;this.trees.concat([]).reverse().forEach((function(t){if(t.parent){for(var n=t.quadrants,r=function(e){if(e.parent){for(var t=e,n=t.parent;n&&!n.layout;)t=n,n=n.parent;var r=n,a=r.directions,i=r.layout;return{direction:a[t.mergedQuadrant-1],layout:i}}}(t),a=[],i=0,o=function(){var n=t.quadrantRange,o=t.directions;if(0===(a=n.filter((function(e,t){return Ro(o[t],r.direction)}))).length){var c=t.algorithm.constructor.VAILD_DIRECTION_ANGLES,l=At(r.direction,[1,0]);if(!c.some((function(e){return ht(e,l)})))return"break";e._forceUseUpDirection(t,r.direction)}i++};0===a.length&&i<10&&"break"!==o(););if(t.upDirection=r.direction,t.upLayoutType=r.layout,a.length>0){var c=No(t.quadrantConstraint,n,a);t.quadrantConstraint=Object.keys(c).map((function(e){return c[e]})),e._mergeQuadrant(t,"mergedQuadrant")}else t.layout=null,t.isSubTree=!1}}))}},{key:"_filterSimilarSubTree",value:function(){this.trees.forEach((function(e){if(!e.parent)return!0;var t=e.quadrantConstraint,n=e.upDirection,r=e.upLayoutType,a=e.directions;r===e.layout&&1===t.length&&pt(n,a[t[0]-1])&&(e.isSubTree=!1)}))}},{key:"_removeSubTree",value:function(){this.trees=this.trees.filter((function(e){return!e.parent||e.isSubTree}))}},{key:"execute",value:function(){return this._buildTree(),this._splitSubTrees(),this._firstMergeQuadrant(),this._fixQuadrantConflict(),this._filterSimilarSubTree(),this._removeSubTree(),this._setUpAndDown(),this._beforeLayoutAdjust(),this._layout(),this._afterLayoutAdjust(),this.tree}},{key:"destroy",value:function(){var e=this;this.destroyed=!0,Object.keys(this).forEach((function(t){e[t]=void 0}))}}]),e}(),Io=Object.freeze({__proto__:null,Event:ja,Layout:Lo,Comparator:It});function To(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?To(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):To(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fo=function(e,t){var n=["x","y"].map((function(n){return e[n]+2*(t[n]-e[n])})),r=D()(n,2);return{x:r[0],y:r[1]}},Yo=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}},Xo=function(e,t){var n=t/180*Math.PI,r=Math.sin(n),a=Math.cos(n),i=e.x,o=e.y;return{x:i*a-o*r,y:i*r+o*a}},qo=function(e,t,n){var r={x:e.x-t.x,y:e.y-t.y},a=Xo(r,n);return{x:a.x+t.x,y:a.y+t.y}},Vo=function(e){var t=e.x,n=e.y;return{x:t+e.w/2,y:n+e.h/2}},Ho=function(e){var t=e.x,n=e.y;return 180*Math.atan2(n,t)/Math.PI};var Go=function(){function e(t){m()(this,e),this.rect=t,this._tl=null,this._tr=null,this._br=null,this._bl=null,this._tc=null,this._bc=null,this._rc=null,this._lc=null,this._center=null}return y()(e,[{key:"center",get:function(){return this._center||(this._center=Vo(this.rect)),this._center}},{key:"tl",get:function(){if(!this._tl){var e=this.rect,t=e.x,n=e.y,r=e.r;this._tl=qo({x:t,y:n},this.center,r)}return this._tl}},{key:"tr",get:function(){if(!this._tr){var e=this.rect,t=e.x,n=e.y,r=e.w,a=e.r;this._tr=qo({x:t+r,y:n},this.center,a)}return this._tr}},{key:"br",get:function(){return this._br||(this._br=Fo(this.tl,this.center)),this._br}},{key:"bl",get:function(){return this._bl||(this._bl=Fo(this.tr,this.center)),this._bl}},{key:"tc",get:function(){return this._tc||(this._tc=Yo(this.tl,this.tr)),this._tc}},{key:"bc",get:function(){return this._bc||(this._bc=Yo(this.br,this.bl)),this._bc}},{key:"rc",get:function(){return this._rc||(this._rc=Yo(this.tr,this.br)),this._rc}},{key:"lc",get:function(){return this._lc||(this._lc=Yo(this.tl,this.bl)),this._lc}}]),e}();function Zo(e,t,n,r){var a=new Go(n),i=null,o=[],c=e;if(r){switch(t){case"tl":case"br":o=[a.tl,a.br];break;case"tr":case"bl":o=[a.tr,a.bl];break;case"tc":case"bc":o=[a.tc,a.bc],i="height";break;case"lc":case"rc":o=[a.lc,a.rc],i="width";break;default:o=[]}2===o.length&&(c=function(e,t){var n=t.x,r=t.y,a=D()(e,2),i=a[0],o=a[1];if(ht(i.x,o.x))return{x:i.x,y:r};if(ht(i.y,o.y))return{x:n,y:i.y};var c=yt(i.x,i.y,o.x,o.y),l=-1/c,s=(c*i.x+r-i.y-l*n)/(c-l);return{x:s,y:i.y-c*(i.x-s)}}(o,e))}var l=[];switch(t){case"tl":l=[a.br];break;case"tr":l=[a.bl];break;case"bl":l=[a.tr];break;case"br":l=[a.tl];break;case"bc":l=[a.tl,a.tr];break;case"tc":l=[a.bl,a.br];break;case"lc":l=[a.tr,a.br];break;case"rc":l=[a.tl,a.bl];break;default:l=[]}var s,u,d,f,h,p,m,g,y,v,b=l.length;return 1===b?(u=l[0],d=c,f=n.r,h=Yo(u,d),m=(p=qo(d,h,-f)).x,g=p.y,y=Math.abs(2*(m-h.x)),v=Math.abs(2*(g-h.y)),s={x:h.x-y/2,y:h.y-v/2,w:y,h:v,r:f}):2===b&&(s=r?function(e,t,n,r){var a,i,o=D()(e,2),c=o[0],l=o[1],s=Yo(c,l),u=t,d=Yo(s,u),f=function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}(s,u),h=n.w/n.h;return"width"===r?i=(a=f)/h:a=h*(i=f),{x:d.x-a/2,y:d.y-i/2,w:a,h:i,r:n.r}}(l,c,n,i):function(e,t,n){var r,a,i,o=e.map((function(e){return Xo(e,-n)})),c=D()(o,2),l=c[0],s=c[1],u=Xo(t,-n);ht(l.y,s.y)?(r=Math.abs(l.x-s.x),a=Math.abs(u.y-l.y),i={x:(l.x+s.x)/2,y:(l.y+u.y)/2}):ht(l.x,s.x)&&(a=Math.abs(l.y-s.y),r=Math.abs(u.x-l.x),i={x:(l.x+u.x)/2,y:(l.y+s.y)/2});var d=Xo(i,n);return{x:d.x-r/2,y:d.y-a/2,w:r,h:a,r:n}}(l,c,n.r)),s}function Wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wo(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Uo=hn,Qo=bn,Jo=Wn,$o=tr,ec={lake_prevent_click_unselect:!0,vertex_resize_controller:!0};function tc(e){var t=new Qo,n=new Jo({d:_n(-3,-3,6,6,1),stroke:"#096DD9",fill:"white"});return t.add(n),n.dataset(Ko(Ko({},ec),{},{type:"point"})),{group:t,shape:n,name:e}}function nc(e){var t=new Uo,n=new Jo({stroke:"rgba(255,255,255,0)"}),r=new Jo({stroke:"#096DD9"});return n.dataset(Ko(Ko({},ec),{},{type:"line"})),t.add(r),t.add(n),{visShape:r,shape:n,name:e,group:t}}function rc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[t.x+t.width/2,t.y+t.height/2],a=Math.cos(n),i=Math.sin(n),o=Dt(8,r,[r[0]+a,r[1]+i]);return o(e,0)||o(e,4)?"ew-resize":o(e,1)||o(e,5)?"nesw-resize":o(e,2)||o(e,6)?"ns-resize":"nwse-resize"}var ac=function(){function e(t){m()(this,e);var n=new Uo,r=t.diagram,a=nc("tc"),i=nc("bc"),o=nc("lc"),c=nc("rc"),l=tc("tl"),s=tc("tr"),u=tc("bl"),d=tc("br"),f=function(e){var t=new Qo,n=new $o({href:"https://gw.alipayobjects.com/zos/bmw-prod/e219ce81-1f30-43b8-aae6-14d41545d352.svg",x:-8,y:-8,width:16,height:16});return t.add(n),n.dataset({lake_prevent_click_unselect:!0}),t.css({cursor:"pointer"}),{group:t,shape:n,name:"rotate"}}();n.on("mousedown",(function(e){e.stopPropagation(),e.preventDefault()})),n.add(a.group),n.add(i.group),n.add(o.group),n.add(c.group),n.add(l.group),n.add(s.group),n.add(u.group),n.add(d.group),n.add(f.group),this.cell=t,this.diagram=r,this.group=n,this.tl=l,this.tr=s,this.bl=u,this.br=d,this.tc=a,this.bc=i,this.lc=o,this.rc=c,this.rotateBtn=f,this.eventHelper=new ja}return y()(e,[{key:"update",value:function(){var e=this.cell,t=this.tl,n=this.tr,r=this.bl,a=this.br,i=this.tc,o=this.bc,c=this.lc,l=this.rc,s=this.rotateBtn,u=1/this.diagram.viewport.zoom,d=e.rotate/360*2*Math.PI,f=e.getRelativePoint({x:0,y:0}),h=e.getRelativePoint({x:1,y:0}),p=e.getRelativePoint({x:0,y:1}),m=e.getRelativePoint({x:1,y:1}),g=u,y=8*u,v=12*u+e.stroke.width/2,b=e.getCanvasPoint({x:e.width+v,y:-v});t.group.update(Ko(Ko({},f),{},{scale:u,rotate:d})),n.group.update(Ko(Ko({},h),{},{scale:u,rotate:d})),r.group.update(Ko(Ko({},p),{},{scale:u,rotate:d})),a.group.update(Ko(Ko({},m),{},{scale:u,rotate:d})),s.group.update(Ko(Ko({},b),{},{scale:u,rotate:d})),i.shape.update({d:"M".concat(f.x,",").concat(f.y," L").concat(h.x,",").concat(h.y),"stroke-width":y}),o.shape.update({d:"M".concat(p.x,",").concat(p.y," L").concat(m.x,",").concat(m.y),"stroke-width":y}),c.shape.update({d:"M".concat(f.x,",").concat(f.y," L").concat(p.x,",").concat(p.y),"stroke-width":y}),l.shape.update({d:"M".concat(h.x,",").concat(h.y," L").concat(m.x,",").concat(m.y),"stroke-width":y}),i.visShape.update({d:"M".concat(f.x,",").concat(f.y," L").concat(h.x,",").concat(h.y),"stroke-width":g}),o.visShape.update({d:"M".concat(p.x,",").concat(p.y," L").concat(m.x,",").concat(m.y),"stroke-width":g}),c.visShape.update({d:"M".concat(f.x,",").concat(f.y," L").concat(p.x,",").concat(p.y),"stroke-width":g}),l.visShape.update({d:"M".concat(h.x,",").concat(h.y," L").concat(m.x,",").concat(m.y),"stroke-width":g})}},{key:"bindEvent",value:function(){var e,t,n,r,a,i,o,c,l=this,s=this.cell,u=this.tl,d=this.tr,f=this.bl,h=this.br,p=this.tc,m=this.bc,g=this.lc,y=this.rc,v=this.rotateBtn,b=this.eventHelper,x=s.diagram,k=x.viewport.zoom;function w(){var t={x:i.x+s.stroke.width/2,y:i.y+s.stroke.width/2,width:Math.max(i.w-s.stroke.width,1),height:Math.max(i.h-s.stroke.width,1),rotate:i.r};return"lc"===e||"rc"===e?t.height=void 0:"tc"!==e&&"bc"!==e||(t.width=void 0),t}[u,d,f,h,p,m,g,y,v].forEach((function(a){var i=a.shape,l=a.name;b.bind(i,"mousedown",(function(a){x.contentEditor.unbind(),e=l,n=x.viewport.invertClient([a.clientX,a.clientY]),r={x:s.x,y:s.y,width:s.width,height:s.height,rotate:s.rotate},t={x:s.x-s.stroke.width/2,y:s.y-s.stroke.width/2,w:s.width+s.stroke.width,h:s.height+s.stroke.width,r:s.rotate},x.align.updateToAlginPoints(s),"tc"!==e&&"bc"!==e||(x.align.preventAlignX=!0),"lc"!==e&&"rc"!==e||(x.align.preventAlignY=!0),o=jt(t.x,t.y+t.h,t.x+t.w,t.y),c=jt(t.x,t.y,t.x+t.w,t.y+t.h)}))})),b.bind(x,"mousemove",(function(r){if(e){var u=x.viewport.invertClient([r.clientX,r.clientY]),d=x.signal.keydown.Shift||s.constraints&&s.constraints.proportion;if("rotate"===e)i=function(e,t,n,r){var a=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},a={x:n.x-e.x,y:n.y-e.y},i=Ho(r);return Ho(a)-i}(Vo(n),e,t),i=n.r+a;return i>=180&&(i-=360),i<=-180&&(i+=360),r&&(i=r*Math.round(i/r)),zo(zo({},n),{},{r:i})}({x:n[0],y:n[1]},{x:u[0],y:u[1]},t,d&&15);else{var f=("tl"===e||"br"===e)&&c||("bl"===e||"tr"===e)&&o,h=f&&f.f(u[0]);u[1]=d&&h?h:u[1];var p=x.align.alignByPoint({x:u[0],y:u[1],weight:1,box:s.getBBox()});i=Zo({x:u[0]+p.dx,y:u[1]+p.dy},e,t)}if(x.update(s,w()),l.update(),-1!==["tl","bl","tr","br"].indexOf(e)){var m=rc(x.viewport.invertClient([r.clientX,r.clientY]),s.getBBox(),Math.PI/8);x.setCursor(m)}x.emit("vertexresizestart")}else if(r.target.dataset.vertex_resize_controller){var g;if("line"===r.target.dataset.type){var y=Cn(r.target.getAttribute("d"));g=rc([y[1][1]-y[0][1],y[1][2]-y[0][2]],{x:-1,y:-1,width:1,height:1},Math.PI/2+.01)}else g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[t.x+t.width/2,t.y+t.height/2],a=Math.cos(n),i=Math.sin(n),o=Dt(4,r,[r[0]+a,r[1]+i]);return o(e,0)||o(e,2)?"nesw-resize":"nwse-resize"}(x.viewport.invertClient([r.clientX,r.clientY]),s.getBBox());a||(a=!0),x.setCursor(g)}else a&&(x.resetCursor(),a=void 0)})),b.bind(x,"mouseup",(function(){i&&t&&(t.x!==i.x||t.y!==i.y||t.w!==i.w||t.h!==i.h||t.r!==i.r)&&x.command.execute("Update",{id:s,model:w(),originModels:[r]}),e=void 0,t=void 0,i=void 0,n=void 0,a=void 0,r=void 0,x.align.reset()})),b.bind(x,"afterviewportchange",oe()((function(){k!==x.viewport.zoom&&(l.update(),k=x.viewport.zoom)})))}},{key:"begin",value:function(){this.cell.diagram.frontRootGroup.add(this.group),this.update(),this.bindEvent()}},{key:"end",value:function(){this.group&&this.group.remove(),this.eventHelper.unbind(),this.diagram&&this.diagram.align.reset()}},{key:"destroy",value:function(){this.diagram&&this.diagram.resetCursor(),this.eventHelper.unbind(),this.group&&this.group.clear(),this.cell=void 0,this.diagram=void 0,this.group=void 0,this.tl=void 0,this.tr=void 0,this.bl=void 0,this.br=void 0}}]),e}();function ic(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=a?a/180*Math.PI:0,c=Math.sin(o),l=Math.cos(o),s=n/2,u=r/2;return[l*i,c*i,0,-c*i,l*i,0,e+(-s*l+u*c+s),t+(-s*c-u*l+u),1]}var oc=hn,cc=Wn,lc=ar,sc=ur,uc="lock-resize-cross",dc=function(){function e(t){m()(this,e);var n=t.diagram,r=t.width,a=t.height,i=new oc,o=new lc({x:0,y:0,width:r||0,height:a||0,stroke:"#9A9A9A",fill:"none"});if(i.add(o),n.container&&!n.container.querySelector("#".concat(uc))){var c=function(){var e=new oc({id:uc}),t=new cc({d:Pn([["M",-3,-3],["L",3,3],["M",-3,3],["L",3,-3]]),stroke:"#FFFFFF","stroke-width":3}),n=new cc({d:Pn([["M",-3,-3],["L",3,3],["M",-3,3],["L",3,-3]]),stroke:"#979797","stroke-width":1});return e.add(t),e.add(n),e}();n.defs.add(c)}for(var l=[],s=0;s<4;s++){var u=new sc({href:"#".concat(uc)});i.add(u),l.push(u)}var d=l[0],f=l[1],h=l[2],p=l[3];this.group=i,this.cell=t,this.diagram=n,this.rect=o,this.tl=d,this.tr=f,this.bl=p,this.br=h}return y()(e,[{key:"update",value:function(){var e=this.cell,t=this.diagram,n=this.group,r=this.rect,a=this.tr,i=this.bl,o=this.br,c=e.x,l=e.y,s=e.rotate,u=1/t.viewport.zoom,d=e.width/u,f=e.height/u;n.update({matrix:ic(c,l,e.width,e.height,s,u)}),r.update({d:_n(0,0,d,f)}),a.update({matrix:[1,0,0,0,1,0,d,0,1]}),i.update({matrix:[1,0,0,0,1,0,0,f,1]}),o.update({matrix:[1,0,0,0,1,0,d,f,1]})}},{key:"begin",value:function(){this.cell.diagram.frontRootGroup.add(this.group),this.update()}},{key:"end",value:function(){this.group&&this.group.remove()}}]),e}();function fc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hc(e){switch((e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fc(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({"stroke-linecap":"round","stroke-linejoin":"round"},e)).name){case"rect":return new ar(e);case"ellipse":return new cr(e);case"polygon":return new br(e);default:return new Wn(e)}}function pc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var mc=hn,gc=function(e){b()(n,bo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.cell,t=new mc;this.element=t,e.graphicGroup.add(t)}},{key:"update",value:function(){var e=this.cell,t=this.element;e.isCacheStale("shape")&&(t.clear(),this.shapeElement=hc(e.stencil.outline),t.add(this.shapeElement))}},{key:"draw",value:function(){var e=this.cell,t=this.shapeElement,n=e.stroke,r=e.fill,a=e.width,i=e.height,o=e.stencil,l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pc(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.convertStrokeStyle());if(e.isCacheStale("width","height","shape"))if(o.outline.path)l.d=o.outline.path(a,i);else{var s=a/o.width,u=i/o.height;l.d=t.getPath(s,u)}e.isCacheStale("stroke")&&Object.assign(l,{stroke:n.color,"stroke-width":n.width}),e.isCacheStale("fill")&&(l.fill=r.color),t.update(l)}}]),n}();function yc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yc(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}["getTotalLength","isPointInFill","isPointInStroke"].forEach((function(e){Object.defineProperty(gc.prototype,e,{value:function(){var t;return(t=this.shapeElement)[e].apply(t,arguments)}})}));var bc=hn,xc=function(e){b()(n,bo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.cell;this.element=new bc,e.graphicGroup.add(this.element)}},{key:"renderElements",value:function(){var e=this.element,t=this.cell.stencil.scene.map((function(e){return hc(e)}));t.forEach((function(t){e.add(t)})),this.elements=t}},{key:"update",value:function(){var e=this.cell,t=this.elements;e.isCacheStale("shape")&&(t&&t.forEach((function(e){return e.remove()})),this.renderElements())}},{key:"draw",value:function(){var e,t,n=this.cell,r=this.elements,a=n.stroke,i=n.fill,o={};if(n.isCacheStale("width","height")){var c=n.stencil,l=n.width,s=n.height;e=l/c.width,t=s/c.height}n.isCacheStale("stroke")&&(o.stroke=a.color,o["stroke-width"]=a.width),n.isCacheStale("fill")&&(o.fill=i.color),r.forEach((function(n){e&&t?n.update(vc(vc({},o),{},{d:n.getPath(e,t)})):n.update(o)}))}}]),n}();function kc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var wc=Qn,Oc=function(e){b()(n,bo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.cell,t=e.graphicGroup,n=new wc({styleSheets:e.textAreaContentStyleSheets,html:e.html});n.htmlContainer.classList.add("selection-transparent"),t.add(n),this.element=n,e.textAreaElement=n,e.textArea=this,this.initCalculatedDOM(),this.update()}},{key:"initCalculatedDOM",value:function(){var e=this.cell.diagram,t=document.createElement("div");e.calculatedContainer.appendChild(t),this.calculatedDOM=t}},{key:"update",value:function(){var e=this.cell,t=this.calculatedDOM,n=e.cache,r=e.textAreaContentStyleSheets;n.html!==e.html&&(t.innerHTML=e.html),this.updateStyleSheets(),["html","width","height","image"].some((function(t){return n[t]!==e[t]}))&&(ot(t,r),this._setBBox())}},{key:"updateStyleSheets",value:function(){for(var e=this.cell,t=e.textAreaContentStyleSheets,n=e.getPadding(),r=e.isDiscrete(),a=0;a<t.length;a++){var i=t[a];if("self"===i.query){var o=e.getOuterWidth();i.css.width=o&&!r?o-n[1]-n[3]+"px":""}}}},{key:"getPosition",value:function(){var e=this.cell,t=e.isDiscrete(),n=e.width,r=e.height,a=e.image,i=this.getBBox(),o=e.getPadding(),c=a&&a.height||0,l=c+i.height;return t?{x:(n-i.width)/2,y:r+8}:{x:Math.max((n-i.width)/2,o[3]),y:(r-l)/2+(c?c+2:0)}}},{key:"calculateBBox",value:function(){var e=this.calculatedDOM;e.style.display="inline-block";var t=e.getBoundingClientRect();return e.style.display="none",t}},{key:"_setBBox",value:function(){this.box=this.calculateBBox()}},{key:"getBBox",value:function(){return this.box}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=this.box,r=e.cache,a=e.textAreaContentStyleSheets,i={};r.html!==e.html&&(i.html=e.html),["html","width","height"].some((function(t){return r[t]!==e[t]}))&&(ot(t.htmlContainer,a),Object.assign(i,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kc(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({width:Math.ceil(n.width),height:Math.ceil(n.height)},this.getPosition()))),Object.keys(i).length>0&&(t.update(i),"read"===e.diagram.interaction.currentMode&&t.htmlContainer.querySelectorAll("a").forEach((function(e){var t=e.href,n=window.location.origin+window.location.pathname;(t===n||t.startsWith(n+location.search+"#"))&&e.removeAttribute("target")})))}},{key:"destroy",value:function(){this.element.destroy(),this.calculatedDOM.remove()}}]),n}();function Cc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}c()(Oc,"className","TextArea"),c()(Oc,"configName","textArea"),c()(Oc,"zIndex",2);var Ec=function(e){b()(n,Po);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),r=Qe({default:{html:"",x:0,y:0,rotate:0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],opacity:1,locked:!1},textAreaContentStyleSheets:[{query:"self",css:{outline:"none","white-space":"normal","letter-spacing":"normal","font-size":"14px","font-family":'PingFangSC-Regular, "PingFang SC", sans-serif',"min-height":"24px","min-width":"24px","line-height":"1.74","word-break":"break-word",color:"#262626"}}],penetratedKeys:["x","y","width","height","stroke","fill","rotate","html","shape","image","constraints","opacity","locked"]},r),e=t.call(this,r),Object.assign(R()(e),d()(r.default)),e.Subcells=r.Subcells||[gc,xc,Oc],e.isVertex=!0,e.initRotateResize(),e.initSubcell(),e.eventDelegation(),e.render(),e}return y()(n,[{key:"canUseAddLineButton",value:function(){return!0}},{key:"getRelativePoint",value:function(e){return B()(O()(n.prototype),"getRelativePoint",this).call(this,e,this.stroke.width/2)}},{key:"initRotateResize",value:function(){this.rotateResize=new ac(this),this.lockResize=new dc(this)}},{key:"beginRotateResize",value:function(){this.locked?this.lockResize.begin():this.rotateResize.begin()}},{key:"endRotateResize",value:function(){this.rotateResize.end(),this.lockResize.end()}},{key:"initSubcell",value:function(){var e=this;this.subcells=this.Subcells.map((function(t){return new t(e)}))}},{key:"getEventObject",value:function(e){return{cell:this,nativeEvent:e}}},{key:"eventDelegation",value:function(){var e=this.graphicGroup;this.delegateEvent(e,"mouseenter","vertexcell:mouseenter"),this.delegateEvent(e,"mouseleave","vertexcell:mouseleave")}},{key:"updateStencil",value:function(){var e=this,t=this.shape,n=this.stencils,r=t||"process";if(!this.stencil||this.stencil.name!==r){var a=n.find((function(e){return e.name===r}));if(!a)throw new Error("unknown shape ".concat(r));this.stencil=a,this.updateAnchors(),["width","height"].forEach((function(t){null==e[t]&&(e[t]=a[t])})),this.cache={}}}},{key:"updateAnchors",value:function(){for(var e=this.anchors,t=this.stencil,n=function(n){var r=e[n],a=t.anchors.find((function(e){return e.name===r.name}));a&&(e[n]=a)},r=0;r<e.length;r++)n(r)}},{key:"render",value:function(){var e=this.model;this.subcells.forEach((function(e){return e.render()})),this.updateModel(e)}},{key:"updateSize",value:function(){}},{key:"updateModel",value:function(e){if(!this.locked||e.hasOwnProperty("locked")){if(this.constraints&&this.constraints.proportion){var t=this.width/this.height;e.height>0&&null==e.width?e.width=e.height*t:e.width>0&&(e.height=e.width/t)}B()(O()(n.prototype),"updateModel",this).call(this,e),this.updateStencil(),this.updateSize(),this.updateMatrix(),this.subcells.forEach((function(e){e.update()}))}}},{key:"draw",value:function(){this.subcells.forEach((function(e){return e.draw()})),this.graphicGroup.attr({opacity:this.opacity}),this.drawPosition(),this.updateCache()}},{key:"updateCache",value:function(){var e=this,t=this.cache;["x","y","width","height","rotate","shape","fill","stroke"].forEach((function(n){var r=e[n];t[n]=s()(r)?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cc(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r):r}))}},{key:"drawPosition",value:function(){if(this.isCacheStale("matrix")){var e=this.graphicGroup,t=this.matrix;e.update({matrix:t})}}},{key:"canDelete",value:function(){return!this.locked}},{key:"getPadding",value:function(){var e=this.stencil,t=this.width,n=this.height;if(e&&Array.isArray(e.padding)){var r=e.padding,a=t/e.width,i=n/e.height;return r.map((function(e,t){return e*(t%2==0?i:a)}))}return[4,4,4,4]}},{key:"isDiscrete",value:function(){var e=this.stencil;return!!e&&e.discrete}},{key:"updateMatrix",value:function(){if(this.isCacheStale("x","y","width","height","rotate")){var e=this.x,t=this.y,n=this.width,r=this.height,a=this.rotate;this.matrix=ic(e,t,n,r,a)}}},{key:"getKeyShape",value:function(){return this.subcells.find((function(e){return e instanceof gc})).shapeElement}},{key:"destroy",value:function(){this.subcells.forEach((function(e){return e.destroy()})),this.rotateResize.destroy(),B()(O()(n.prototype),"destroy",this).call(this)}}]),n}();function Pc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pc(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c()(Ec,"className","VertexCell");var jc=function(e){b()(n,Ec);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),(e=t.call(this,_c({stencils:[{name:"text",width:120,height:60,outline:{name:"rect",x:0,y:0,width:120,height:60,rx:1,ry:1},scene:[],thumb:[{d:[["M",6.4,10.5],["L",25.6,10.5],["C",25.8209139,10.5,26,10.6790861,26,10.9],["L",26,22.1],["C",26,22.3209139,25.8209139,22.5,25.6,22.5],["L",6.4,22.5],["C",6.1790861,22.5,6,22.3209139,6,22.1],["L",6,10.9],["C",6,10.6790861,6.1790861,10.5,6.4,10.5],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]}],default:{fill:{color:"rgba(255,255,255,0)"},shape:"text",stroke:{width:1}}},r))).isText=!0,e}return y()(n,[{key:"updateSize",value:function(){var e=this.subcells.find((function(e){return e instanceof Oc})),t=this.getPadding();e.update();var n=e.getBBox();this.width="number"!=typeof this.model.width?n.width+t[1]+t[3]:this.width,this.height="number"!=typeof this.model.height?n.height+t[1]+t[3]:this.height}}]),n}();function Sc(e,t){var n=kt(e.x,e.y,t.x,t.y);if(n>=5*Math.PI/4&&n<7*Math.PI/4)return"N";if(n>=7*Math.PI/4||n<Math.PI/4)return"E";if(n>=Math.PI/4&&n<3*Math.PI/4)return"S";if(n>=3*Math.PI/4&&n<5*Math.PI/4)return"W";throw new Error("unexpected radian ".concat(n))}function Rc(e,t){var n=D()(e,2),r=n[0],a=n[1],i=D()(t,2),o=i[0],c=i[1],l=yt(r,a,o,c);Math.abs(l)<.1&&Math.abs(c-a)<8?t[1]=a:Math.abs(l)>10&&Math.abs(o-r)<8&&(t[0]=r)}function Mc(e,t){var n=[];return"straight"===e.shape?n=function(e){var t,n=[],r=e.getPoints(),a=r.length;for(t=0;t<a-1;t++){var i=[.5*(r[t].x+r[t+1].x),.5*(r[t].y+r[t+1].y)];n.push(i)}return n}(e):"curve"===e.shape?n=function(e){var t=[],n=e.getPoints().length,r=e.wireElement;if(2===n){var a=r.getPointAtLength(.5*r.getTotalLength());t.push([a.x,a.y])}else if(3===n){var i=r.getPointAtLength(.25*r.getTotalLength()),o=r.getPointAtLength(.75*r.getTotalLength());t.push([i.x,i.y]),t.push([o.x,o.y])}else{var c,l=Cn(e.d);for(c=0;c<l.length-1;c++){var s=[];if("M"===l[c][0])s.push(l[c]),s.push(l[c+1]);else{var u=l[c];s.push(["M",u[u.length-2],u[u.length-1]]),s.push(l[c+1])}var d=Pn(s),f=new Wn({d:d}),h=f.getPointAtLength(.5*f.getTotalLength());f.destroy(),t.push([h.x,h.y])}}return t}(e):"elbow"===e.shape&&(n=function(e,t){if(e.controlPoints.length>0||e.isLoop)return function(e,t){var n=e.getPoints(),r=e.controlPoints,a=n[0],i=r[0],o=n[n.length-1],c=r[r.length-1],l=d()(Bc(e,t)),s=Bn(r,n,t);return l.length<=2&&s.length<=3||(ht(i[0],a.x)||ht(i[1],a.y)||("V"===i[i.length-1]?l.unshift([a.x,.5*(i[1]+a.y),"H"]):l.unshift([.5*(i[0]+a.x),a.y,"V"])),ht(c[0],o.x)||ht(c[1],o.y)||("V"===c[c.length-1]?l.push([o.x,.5*(c[1]+o.y),"H"]):l.push([.5*(c[0]+o.x),o.y,"V"]))),l}(e,t);var n=e.source,r=e.target,a=e.diagram,i=a.find(n.id),o=a.find(r.id),c=e.getPoints(),l=[];if(!i&&!o&&2===c.length){var s=c[0],u=c[1],f=.5*(s.x+u.x),h=.5*(s.y+u.y);return ht(s.x,u.x)||ht(s.y,u.y)?l.push([f,h,0]):(l.push([.5*(s.x+f),s.y,"V"]),l.push([f,h,"H"]),l.push([.5*(f+u.x),u.y,"V"])),l}for(var p=Cn(e.d),m=1;m<p.length;m++){var g=p[m-1],y=p[m];ht(g[1],y[1])?l.push([g[1],.5*(g[2]+y[2]),"H"]):ht(g[2],y[2])&&l.push([.5*(g[1]+y[1]),g[2],"V"])}return l}(e,t)),n}function Bc(e,t){for(var n=e.getPoints(),r=Bn(e.controlPoints,n,t),a=[],i=0;i<r.length-1;i++){var o=r[i],c=r[i+1],l=[.5*(o[1]+c[1]),.5*(o[2]+c[2]),ht(o[1],c[1],2)?"H":"V"];a.push(l)}return a.length>2?a.slice(1,a.length-1):a}function Ac(e){var t=e.cell,n=e.uiPoints,r=e.uiPointIndex;return"elbow"===t.shape?function(e,t,n){return t.length<=1?t:0===n?t.splice(0,t.length-1):n===t.length-1?t.splice(1):t.slice(1,t.length-1)}(0,n,r):function(e,t,n){var r=t[n],a=d()(e.controlPoints);return a.splice(n,0,r),a}(t,n,r)}function Dc(e){var t=new bn,n=new cr({cx:0,cy:0,rx:4,ry:4,stroke:"#096DD9",fill:"white"});return t.add(n),t.dataset({lake_prevent_click_unselect:!0,test_id:"line_endpoint_".concat(e)}),{group:t,shape:n,name:e}}c()(jc,"className","TextCell");var Nc=function(e){b()(n,E.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,n),e=t.call(this),Object.assign(R()(e),r);var a=R()(e),i=a.group,o=a.cell,c=["source","target"].map((function(e){return Dc(e)}));return c.forEach((function(e){return i.add(e.group)})),e.buttons=c,e.diagram=o.diagram,e.eventHelper=new ja,e.cacheEndpointId=null,e.cellModel=null,e}return y()(n,[{key:"update",value:function(){var e=this.buttons,t=this.cell,n=this.diagram,r=this.group;if(r&&r.parent){var a=D()(e,2),i=a[0],o=a[1],c=t.getPoints(),l=c[0],s=c[c.length-1],u=1/n.viewport.zoom;i.group.update({scale:u,x:l.x,y:l.y}),o.group.update({scale:u,x:s.x,y:s.y})}}},{key:"bindEvent",value:function(){var e,t,n,r,a=this,i=this.buttons,o=this.cell,l=this.diagram,s=this.eventHelper,u=function(){l.resetCursor(),e=void 0,t=void 0,n=void 0,r=void 0,a.cacheEndpointId&&l.highlight.clear(),a.cacheEndpointId=null};i.forEach((function(n){var a=n.name,i=n.group;s.bind(i,"mousedown",(function(){e=a,t=he()({connection:null,id:null},ct(o.model[e],{connection:!0,id:!0})),r=d()(o.controlPoints),l.emit("endpointcontrolpointmousedown")}))})),s.bind(l,"mousemove",(function(t){if("source"===e||"target"===e){var i="source"===e?o.target:o.source,s=l.viewport.invertClient([t.clientX,t.clientY]);if(n=to(l,s,l.find(i.id)),i.id&&n.id===i.id&&null==i.connection&&null==n.connection&&r.length>0&&(n.id=null,n.connection=s),n.connection&&!n.id){var u,d=o.getPoints(),f=d.length;u="source"===e?d[1]:d[f-2],"straight"===o.shape&&Rc([u.x,u.y],n.connection)}a.cacheEndpointId!==n.id&&(l.highlight.dock([l.find(n.id)]),a.cacheEndpointId=n.id),l.update(o,c()({},e,n)),a.update()}})),s.bind(l,"mouseup",(function(){var i,s,d;"source"!==e&&"target"!==e||("elbow"===o.shape?l.command.execute("Update",{id:o.model.id,model:(i={},c()(i,e,n),c()(i,"controlPoints",Bc(o,!0)),i),originModels:(s={},c()(s,e,t),c()(s,"controlPoints",r),s)}):l.command.execute("Update",{id:o.model.id,model:c()({},e,n),originModels:(d={},c()(d,e,t),c()(d,"controlPoints",r),d)}),a.emit("endpointControlMouseup"),u())})),s.bind(l,"keydown",(function(n){var r=a.cell,i=a.diagram;!e||"Esc"!==n.key&&"Escape"!==n.key||(i.update(r,c()({},e,t)),a.update(),u())})),s.bind(l,"afterviewportchange",oe()((function(){var e=a.buttons,t=a.cell;e&&t&&a.update()}),16))}},{key:"begin",value:function(){this.update(),this.bindEvent()}},{key:"end",value:function(){this.eventHelper.unbind()}},{key:"destroy",value:function(){this.eventHelper.unbind(),this.group&&this.group.clear(),this.group=null,this.diagram=null,this.cell=null,this.buttons=null}}]),n}();function Lc(e,t){var n=new bn,r=new cr({cx:0,cy:0,rx:4,ry:4,width:8,height:8,stroke:t?"rgba(255,255,255,0.40)":"#096DD9",strokeWidth:"2px",fill:t?"rgba(9,109,217,0.40)":"white"});return r.dataset({isControlPoint:!t,isUIPoints:t,index:e,test_id:"line-control-point_".concat(e)}),n.add(r),n.dataset({lake_prevent_click_unselect:!0,test_id:"line-control-point_".concat(e),isControlPoint:!t,isUIPoints:t,index:e}),{group:n,shape:r,index:e,isUIPoints:t,isControlPoints:!t}}var Ic=function(e){b()(n,E.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,n),e=t.call(this),Object.assign(R()(e),r);var a=R()(e),i=a.cell;return e.diagram=i.diagram,e.eventHelper=new ja,e.onMove=!1,e}return y()(n,[{key:"_refresh",value:function(){var e=this.group,t=this.cell,n=Mc(t);e&&e.clear();var r=t.controlPoints.map((function(e,t){return Lc(t,!1)})),a=n.map((function(e,t){return Lc(t,!0)}));a.forEach((function(t){return e.add(t.group)})),r.forEach((function(t){return e.add(t.group)})),this.buttons=r,this.uiButtons=a,this.uiPoints=n}},{key:"update",value:function(){var e=this.cell;this._refresh();var t=this.buttons,n=this.diagram,r=this.group,a=this.uiButtons,i=this.uiPoints;if(r.parent)if(e.isLoop&&0===e.controlPoints.length)r.css({display:"none"});else{this.onMove?r.css({display:"none"}):r.css({display:""});var o=1/n.viewport.zoom;t.forEach((function(t){var n=t.group,r=t.index,a=e.getControlPointButtonPosition(r);n.update({scale:o,x:a[0],y:a[1]})})),a.forEach((function(e){var t=e.group,n=e.index;t.update({scale:o,x:i[n][0],y:i[n][1]})}))}}},{key:"bindEvent",value:function(){var e,t,n,r,a=this,i=this.cell,o=this.diagram,c=this.eventHelper,l=this.group,s=!1,u={},f=function(){o.resetCursor(),e=void 0,t=void 0,n=void 0,s=!1,a.onMove=!1,r=void 0,u={}};c.bind(o,"mousedown",(function(r){if("true"===(u=r.target&&r.target.dataset).isUIPoints&&"false"===u.isControlPoint){var c=Number(u.index);t=c,n={controlPoints:d()(i.controlPoints)},s=!0}if("false"===u.isUIPoints&&"true"===u.isControlPoint){var l=Number(u.index);e=l,n={controlPoints:d()(i.controlPoints)},s=!1,a.afterMove=!1}o.emit("endpointcontrolpointmousedown")})),c.bind(o,"mousemove",(function(n){if(u!=={}&&"true"===u.isUIPoints&&"false"===u.isControlPoint&&s){var r=Number(u.index);t=r;var c=Ac({cell:i,uiPoints:a.uiPoints,uiPointIndex:t});o.update(i,{controlPoints:c}),e=r,s=!1}if(void 0!==e){var l=o.viewport.invertClient([n.clientX,n.clientY]),d=i.controlPoints[e];void 0!==d&&(d[0]=l[0],d[1]=l[1]),i.draw(),a.onMove=!0}})),c.bind(o,"mouseup",(function(){if(void 0!==e)if(a.onMove){var c=d()(i.controlPoints);o.command.execute("Update",{id:i.model.id,model:{controlPoints:c},originModels:n,diagram:o}),l.css({display:""}),f()}else r=e,e=void 0;else void 0!==t&&f()})),c.bind(o,"dblclick",(function(){if(void 0!==r&&void 0===t){var e=d()(i.controlPoints);o.update(i,n),e.splice(r,1),o.command.execute("Update",{id:i.model.id,model:{controlPoints:e},diagram:o}),f()}})),c.bind(o,"keydown",(function(t){var r=a.cell,i=a.diagram;!e||"Esc"!==t.key&&"Escape"!==t.key||(i.update(r,n),a.update(),f())})),c.bind(o,"afterviewportchange",oe()((function(){var e=a.buttons,t=a.cell;e&&t&&a.update()}),16))}},{key:"begin",value:function(){this.update(),this.bindEvent()}},{key:"end",value:function(){this.eventHelper.unbind()}},{key:"destroy",value:function(){this.eventHelper.unbind(),this.group&&this.group.clear(),this.group=null,this.diagram=null,this.cell=null,this.buttons=null,this.uiButtons=null,this.uiPoints=null}}]),n}();function Tc(e,t,n){var r=new bn,a=new cr({cx:0,cy:0,rx:4,ry:4,stroke:t?"rgba(255,255,255,0.40)":"#096DD9",strokeWidth:"2px",fill:t?"rgba(9,109,217,0.40)":"white"});return a.dataset({isControlPoint:!t,isUIPoints:t,index:e}),a.css({cursor:"V"===n[n.length-1]?"row-resize":"col-resize"}),r.add(a),r.dataset({lake_prevent_click_unselect:!0,test_id:"elbow_".concat(t?"ui_point":"control_point","_").concat(e),isControlPoint:!t,isUIPoints:t,index:e}),{group:r,shape:a,index:e,isUIPoints:t,isControlPoints:!t}}var zc=function(e){b()(n,E.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,n),e=t.call(this),Object.assign(R()(e),r);var a=R()(e),i=a.cell;return e.diagram=i.diagram,e.eventHelper=new ja,e.onMove=!1,e.mergeSig=!1,e}return y()(n,[{key:"_refresh",value:function(){var e=this.group,t=this.cell,n=Mc(t,this.mergeSig);e&&e.clear();var r=n.map((function(e,r){return 0===t.controlPoints.length||0===r||r===n.length-1?Tc(r,!0,e):Tc(r,!1,e)}));r.forEach((function(t){return e.add(t.group)})),this.uiButtons=r,this.uiPoints=n}},{key:"update",value:function(){var e=this.cell;this._refresh();var t=this.diagram,n=this.group,r=this.uiButtons,a=this.uiPoints;if(n.parent){this.onMove?n.css({display:"none"}):n.css({display:""});var i=e.getPoints(),o=i[0],c=i[i.length-1],l=1/t.viewport.zoom;r.forEach((function(e){var t=e.group,n=e.index;0===n?vt(o.x,o.y,a[n][0],a[n][1])<8.5&&t.css({display:"none"}):n===r.length-1&&vt(c.x,c.y,a[n][0],a[n][1])<8.5&&t.css({display:"none"}),t.update({scale:l,x:a[n][0],y:a[n][1]})}))}}},{key:"bindEvent",value:function(){var e,t,n,r=this,a=this.cell,i=this.diagram,o=this.eventHelper,c=this.group,l=!1,s={},u=function(){i.resetCursor(),e=void 0,t=void 0,n=void 0,l=!1,r.onMove=!1,s={},r.mergeSig=!1};o.bind(i,"mousedown",(function(o){if("true"===(s=o.target&&o.target.dataset).isUIPoints&&"false"===s.isControlPoint){var c=Number(s.index);t=c,r.uiButtons[t].shape.update({fill:"white"}),n={controlPoints:0===a.controlPoints.length?null:d()(a.controlPoints)},l=!0,t=void 0,e=c,i.setCursor(0===r.uiPoints[c][2]?"row-resize":"col-resize")}if("false"===s.isUIPoints&&"true"===s.isControlPoint){var u=Number(s.index);e=0===u?0:u===r.uiPoints.length-1?a.controlPoints.length-1:u-1,n={controlPoints:d()(a.model.controlPoints)},l=!1;var f=r.uiPoints[u];f&&i.setCursor("V"===f[f.length-1]?"row-resize":"col-resize")}i.emit("endpointcontrolpointmousedown")})),o.bind(i,"mousemove",(function(n){if(s!=={}&&"true"===s.isUIPoints&&"false"===s.isControlPoint&&l){var o=Number(s.index);t=o;var c=Ac({cell:a,uiPoints:r.uiPoints,uiPointIndex:t});i.update(a,{controlPoints:c}),e=0===o?0:o===r.uiPoints.length-1?a.controlPoints.length-1:o-1,l=!1,r.mergeSig=!0}if(void 0!==e){r.onMove=!0;var u=i.viewport.invertClient([n.clientX,n.clientY]),f=d()(a.controlPoints),h=f[e];void 0!==h&&("V"===h[h.length-1]?h[1]=u[1]:h[0]=u[0]),i.update(a,{controlPoints:f})}})),o.bind(i,"mouseup",(function(){if(void 0!==e){var t=Bc(a,!0);i.command.execute("Update",{id:a.model.id,model:{controlPoints:t},originModels:n,diagram:i}),c.css({display:""}),u()}else u()})),o.bind(i,"keydown",(function(t){var a=r.cell,i=r.diagram;!e||"Esc"!==t.key&&"Escape"!==t.key||(i.update(a,n),r.update(),u())})),o.bind(i,"afterviewportchange",oe()((function(){var e=r.uiButtons,t=r.cell;e&&t&&r.update()}),16))}},{key:"begin",value:function(){this.update(),this.bindEvent()}},{key:"end",value:function(){this.eventHelper.unbind()}},{key:"destroy",value:function(){this.eventHelper.unbind(),this.group&&this.group.clear(),this.group=null,this.diagram=null,this.cell=null,this.buttons=null,this.uiButtons=null,this.uiPoints=null}}]),n}(),Fc=function(){function e(t){m()(this,e),this.eventHelper=new ja,this._init(t)}return y()(e,[{key:"update",value:function(){this.subResizers.forEach((function(e){return e.update()}))}},{key:"bindEvent",value:function(){var e=this,t=this.subResizers,n=this.eventHelper,r=this.diagram,a=this.cell,i=this.lineControlPointResizer;t.forEach((function(e){return e.bindEvent()})),n.bind(r,"endpointcontrolpointmousedown",(function(){"elbow"===a.shape&&(i.group.css({display:"none"}),e.lineControlPointResizer.mergeSig=!0)})),n.bind(r,"endpointControlMouseup",(function(){"elbow"===a.shape&&(i.group.css({display:""}),e.lineControlPointResizer.mergeSig=!1)}))}},{key:"begin",value:function(){var e=this.subResizers;this.diagram.frontRootGroup.prepend(this.group),e.forEach((function(e){return e.begin()})),this.isBegin=!0}},{key:"end",value:function(){var e=this.subResizers,t=this.group;e.forEach((function(e){return e.end()})),t&&t.remove(),this.isBegin=!1}},{key:"destroy",value:function(){var e=this.subResizers,t=this.group,n=this.eventHelper;t.remove(),e.forEach((function(e){return e.destroy()})),this.isBegin=!1,n.destroy()}},{key:"renew",value:function(e){this.destroy(),this._init(e),this.begin()}},{key:"_init",value:function(e){var t=new hn,n=[],r=new hn,a=new Nc({group:r,cell:e});t.add(r),n.push(a);var i,o=new hn;i="elbow"===e.shape?new zc({group:o,cell:e}):new Ic({group:o,cell:e}),t.add(o),n.push(i),this.cell=e,this.diagram=e.diagram,this.subResizers=n,this.group=t,this.lineEndpointResize=a,this.lineControlPointResizer=i}},{key:"getElbowMergeSig",value:function(){return this.lineControlPointResizer.mergeSig}}]),e}();function Yc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yc(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qc=Wn,Vc=Lr,Hc=function(e){b()(n,bo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.cell,t=e.graphicGroup,n={"stroke-linejoin":"round"},r=new qc(n),a=new qc(n);t.add(r),this.element=r,this.hitElement=a,e.wireElement=r,this._createClipPath()}},{key:"_createClipPath",value:function(){var e=this.cell,t=this.element,n=e.diagram.defs,r=Object(I.a)(),a=new Vc({id:r}),i=new qc({"fill-rule":"evenodd"});a.add(i),n.add(a),this.lineTextClipPath=i,this.clipPath=a,t.update({"clip-path":"url(#".concat(r,")")})}},{key:"_drawClipPath",value:function(){var e=this.cell,t=this.lineTextClipPath,n=e.textArea,r=n.box,a=r.width,i=r.height,o=n.getPosition(),c=o.x,l=o.y,s=e.getBBox(),u=s.x,d=s.y,f=s.width,h=s.height;r.width>0?t.update({d:Fn(u-5,d-5,u+f+10,d+h+10,c,l,c+a,l+i)}):t.update({d:_n(u-5,d-5,f+10,h+10)})}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=this.hitElement,r=e.d,a=e.stroke,i=e.graphicGroup,o={d:r};t.update(Xc(Xc({stroke:a.color,"stroke-width":a.width,fill:"none"},e.convertStrokeStyle()),o)),!n.parent&&i.insertAfter(n,t),n.update({stroke:"rgba(255,255,255,0)","stroke-width":a.width+8,fill:"none",d:o.d}),this._drawClipPath()}},{key:"destroy",value:function(){this.element.destroy(),this.hitElement.destroy(),this.lineTextClipPath.destroy(),this.clipPath.destroy(),B()(O()(n.prototype),"destroy",this).call(this)}}]),n}();var Gc=function(e){b()(n,Oc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"updateStyleSheets",value:function(){var e=this.cell,t=e.textAreaContentStyleSheets.find((function(e){return"self"===e.query}));e.diagram.contentEditor.isBegin&&e.diagram.contentEditor.dom===e.textAreaElement.htmlContainer?(t.css.padding="4px 8px",t.css["min-height"]="28px",t.css["min-width"]="54px"):(e.isContentEmpty()?t.css.padding=0:t.css.padding="4px 8px",t.css["min-height"]=0,t.css["min-width"]=0)}},{key:"getPosition",value:function(){var e=this.cell,t=this.box,n=e.getTextAreaPosition();return{x:n.x-t.width/2,y:n.y-t.height/2}}},{key:"calculateBBox",value:function(){var e=this.calculatedDOM;e.style.display="inline-block";var t=e.getBoundingClientRect();return e.style.display="none",t}}]),n}(),Zc={none:function(){return{baseOffset:0,pc:0,path:[]}},"open-triangle":function(e){return{baseOffset:0,pc:1,fill:"none",path:[["M",-1*e,-1*e*Math.sin(ft(30))],["L",0,0],["L",-1*e,e*Math.sin(ft(30))]]}},"one-side-up":function(e){return{baseOffset:0,pc:0,fill:"none",path:[["M",0,0],["L",-1*e,-1*e*Math.sin(ft(30))]]}},"one-side-down":function(e){return{baseOffset:0,pc:0,fill:"none",path:[["M",0,0],["L",-1*e,e*Math.sin(ft(30))]]}},arrow:function(e){return{baseOffset:e,pc:1,path:[["M",0,0],["L",-1*e,-1*e*Math.sin(ft(30))],["L",-1*e,e*Math.sin(ft(30))],["Z"]]}},"hollow-triangle":function(e){return{baseOffset:e,pc:1,fill:"white",path:[["M",0,0],["L",-1*e,-1*e*Math.sin(ft(30))],["L",-1*e,e*Math.sin(ft(30))],["Z"]]}},"sharp-solid-square":function(e){var t=e/=2,n=Math.tan(ft(60))*t;return{baseOffset:2*n,pc:1,path:[["M",0,0],["L",-n,-t],["L",-2*n,0],["L",-n,t],["Z"]]}},"sharp-hollow-square":function(e){var t=e/=2,n=Math.tan(ft(60))*t;return{baseOffset:2*n,pc:1,fill:"white",path:[["M",0,0],["L",-n,-t],["L",-2*n,0],["L",-n,t],["Z"]]}},"flat-solid-square":function(e){return{baseOffset:2*(e*=Math.tan(ft(30))),pc:.5,path:[["M",0,-1*e],["L",-2*e,-1*e],["L",-2*e,e],["L",0,e],["Z"]]}},"flat-hollow-square":function(e){return{baseOffset:2*(e*=Math.tan(ft(30))),pc:.5,fill:"white",path:[["M",0,-1*e],["L",-2*e,-1*e],["L",-2*e,e],["L",0,e],["Z"]]}},"solid-circle":function(e){return{baseOffset:2*(e*=Math.tan(ft(30))),pc:.5,path:Rn(-1*e,0,e)}},"hollow-circle":function(e){return{baseOffset:2*(e*=Math.tan(ft(30))),pc:.5,fill:"white",path:Rn(-e,0,e)}},"cross-circle":function(e){var t=-(e*=Math.tan(ft(30))),n=e;return{baseOffset:2*e,pc:.5,fill:"white",path:Rn(t,0,n)+Pn([["M",t,-n],["L",t,n],["M",-2*n,0],["L",0,0]])}},"half-open-circle":function(e){return{baseOffset:e*=Math.tan(ft(30)),pc:0,fill:"none",path:[["M",0,0],["m",0,-e],["A",e,e,0,1,0,0,e]]}},"end-vertical-line":function(e){return{baseOffset:0,pc:.5,fill:"none","stroke-linecap":"square",path:[["M",0,-(e*=Math.tan(ft(30)))],["L",0,e]]}},"middle-vertical-line":function(e){return{baseOffset:e/=1.5,pc:0,fill:"none",path:[["M",-1*e,2*-e/3],["L",-1*e,2*e/3],["M",-1*e,0],["L",0,0]]}},"double-vertical-line":function(e){var t=2*(e/=1.5)/3;return{baseOffset:2*e,pc:0,fill:"none",path:[["M",-2*e,-t],["L",-2*e,t],["M",-e,-t],["L",-e,t],["M",-2*e,0],["L",0,0]]}},"single-slash":function(e){return{baseOffset:e/=1.5,pc:0,path:[["M",0,0],["L",-e,0],["M",-(e+e*Math.cos(ft(60))),-e*Math.sin(ft(60))],["L",-(e-e*Math.cos(ft(60))),e*Math.sin(ft(60))]]}},"three-line":function(e){return{baseOffset:e,pc:0,fill:"none",path:[["M",-1*e,0],["L",0,0],["M",-1*e,0],["L",0,-1*Math.sin(ft(30))*e],["M",-1*e,0],["L",0,Math.sin(ft(30))*e]]}},"three-line-plus-vertical":function(e){var t=Math.sin(ft(30))*e;return{baseOffset:e,pc:0,fill:"none",path:[["M",-e,0],["L",0,0],["M",-e,0],["L",0,-t],["M",-e,0],["L",0,t],["M",-e,-t],["L",-e,t]]}},"three-line-plus-circle":function(e){var t=Math.sin(ft(30))*e,n=-e-t;return{baseOffset:e+2*t,pc:0,fill:"white",path:Pn([["M",-e,0],["L",0,0],["M",-e,0],["L",0,-t],["M",-e,0],["L",0,t]])+Rn(n,0,t)}},"circle-vertical":function(e){var t=.5*e,n=-(e+t);return{baseOffset:2*e,pc:0,fill:"white",path:Pn([["M",-t,-t],["L",-t,t],["M",0,0],["L",-e,-0]])+Rn(n,0,t)}}},Wc=Object.keys(Zc).map((function(e){return e}));var Kc=Wn,Uc=function(e){b()(n,bo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e,r){var a;return m()(this,n),(a=t.call(this,e)).type=r,a.size=10,a}return y()(n,[{key:"render",value:function(){var e=this.cell.graphicGroup,t=new Kc({"stroke-miterlimit":"10"});this.element=t,e.add(this.element)}},{key:"update",value:function(){var e=this.cell,t=this.type;this.stencil=Zc[("tip"===t?e.target.marker:e.source.marker)||"none"](6+2*(e.stroke.width-1));var n=this.stencil,r=n.baseOffset,a=n.pc;e["".concat(t,"Offset")]=r+e.stroke.width*a}},{key:"draw",value:function(){var e,t,n,r,a=this.cell,i=this.element,o=this.type,c=this.stencil,l=a.d,s=a.stroke,u=a.shape,d=c.pc,f=Cn(l),h=a.getPoints();if("curve"===u)if("tail"===o)e=h[0].x,t=h[0].y,n=f[1][1],r=f[1][2];else{var p=h.length;if(e=h[p-1].x,t=h[p-1].y,2===h.length)n=f[1][3],r=f[1][4];else if(3===h.length)n=f[1][1],r=f[1][2];else{var m=h.length-1;n=f[m][3],r=f[m][4]}}else if("tail"===o)if("straight"===u)e=h[0].x,t=h[0].y,n=h[1].x,r=h[1].y;else{e=h[0].x,t=h[0].y;var g=D()(f[1],3);n=g[1],r=g[2]}else if("straight"===u){var y=h.length;e=h[y-1].x,t=h[y-1].y,n=h[y-2].x,r=h[y-2].y}else{e=h[h.length-1].x,t=h[h.length-1].y;var v=D()(f[f.length-2],3);n=v[1],r=v[2]}var b=[1,0,0,0,1,0,-1*a.stroke.width*d,0,1],x=[1,0,0,0,1,0,e,t,1],k=ce.a.rotate([],[1,0,0,0,1,0,0,0,1],kt(n,r,e,t)),w=b;if("tail"===o){var O=a.source.marker;"one-side-up"!==O&&"one-side-down"!==O&&"single-slash"!==O||ce.a.multiply(w,[1,0,0,0,-1,0,0,0,1],w)}ce.a.multiply(w,k,w),ce.a.multiply(w,x,w),i.update({d:c.path,stroke:s.color,"stroke-width":s.width,fill:c.fill||s.color,"stroke-linecap":c["stroke-linecap"]||"butt",matrix:w}),i.dataset({test_id:("tip"===o?a.target.marker:a.source.marker)||"none"})}},{key:"destroy",value:function(){this.element.destroy(),B()(O()(n.prototype),"destroy",this).call(this)}}]),n}(),Qc=function(){function e(t){m()(this,e),this.line=t}return y()(e,[{key:"getFirstInsertControlPoints",value:function(){return!1}},{key:"getTextAreaPosition",value:function(){return this.line.getPointByPercent(.5)}},{key:"getControlPointButtonPosition",value:function(e){return this.line.controlPoints[e]}},{key:"updatePoints",value:function(){var e=this.line,t=e.source,n=e.target,r=e.sourceCell,a=e.targetCell,i=e.controlPoints.map((function(e){var t=D()(e,2);return{x:t[0],y:t[1]}})).filter((function(e){return!isNaN(e.x)})),o=i.length,c=e.getEndpoint(t),l=e.getEndpoint(n);if(c&&l){if(c.x===l.x&&c.y===l.y&&0===i.length)return l.x+=2,l.y+=2,void(this.points=[c,l]);"elbow"===e.shape?(r&&!t.connection&&(c=r.snapAnchor(i[0]||l)[0]),a&&!n.connection&&(l=a.snapAnchor(i[o-1]||c)[0])):(r&&!t.connection&&(c=r.getIntersectionPoint(i[0]||l)),a&&!n.connection&&(l=a.getIntersectionPoint(i[o-1]||c))),this.points=[c].concat(i).concat(l)}else this.points=[c,l]}},{key:"getPoints",value:function(){return this.points}},{key:"getPath",value:function(){return""}}]),e}();var Jc=function(e){b()(n,Qc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"getPath",value:function(){var e=this.line,t=e.getPoints(),n=e.tipOffset,r=e.tailOffset,a=t[t.length-1],i=t[t.length-2],o=bt(i.x,i.y,a.x,a.y,n),c=t[0],l=t[1],s=[bt(l.x,l.y,c.x,c.y,r)];return 0===e.controlPoints.length?s.push(o):s=s.concat(e.controlPoints.map((function(e){var t=D()(e,2);return{x:t[0],y:t[1]}})).filter((function(e){return!isNaN(e.x)})),o),jn(s)}}]),n}();var $c=function(e){b()(n,Qc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"getControlPointButtonPosition",value:function(e){var t=this.line,n=t.controlPoints,r=t.diagram,a=t.subcells.find((function(e){return e instanceof Gc})),i=n[e].concat([]);return t.isContentEmpty()&&!r.contentEditor.isBegin||1!==t.controlPoints.length||(i[1]+=a.box.height/2),i}},{key:"getTextAreaPosition",value:function(){var e=this.line;return 1===e.controlPoints.length?{x:e.controlPoints[0][0],y:e.controlPoints[0][1]}:e.getPointByPercent(.5)}},{key:"getPath",value:function(){var e,t=this.line,n=t.tailOffset,r=t.tipOffset,a=this.getPoints();if(2===a.length){(e=An(t)).unshift(["M",a[0].x,a[0].y]);var i={x:e[0][1],y:e[0][2]},o={x:e[1][1],y:e[1][2]},c={x:e[1][5],y:e[1][6]},l={x:e[1][3],y:e[1][4]};i=bt(o.x,o.y,i.x,i.y,n),c=bt(l.x,l.y,c.x,c.y,r),e[0][1]=i.x,e[0][2]=i.y,e[1][5]=c.x,e[1][6]=c.y}else if(3===a.length){var s=a[0],u=a[1],d=a[2];s=bt((u={x:(u.x-.25*d.x-.25*s.x)/.5,y:(u.y-.25*d.y-.25*s.y)/.5}).x,u.y,s.x,s.y,n),d=bt(u.x,u.y,d.x,d.y,r),u={x:(a[1].x-.25*d.x-.25*s.x)/.5,y:(a[1].y-.25*d.y-.25*s.y)/.5},e=[["M",s.x,s.y],["Q",u.x,u.y,d.x,d.y]]}else{(e=Mn(a)).unshift(["M",a[0].x,a[0].y]);var f=e.length-1,h={x:e[f][5],y:e[f][6]},p={x:e[f][3],y:e[f][4]},m={x:e[0][1],y:e[0][2]},g={x:e[1][1],y:e[1][2]};m=bt(g.x,g.y,m.x,m.y,n),h=bt(p.x,p.y,h.x,h.y,r),e[0][1]=m.x,e[0][2]=m.y,e[f][5]=h.x,e[f][6]=h.y}return Pn(e)}}]),n}();function el(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?el(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):el(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nl(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var al=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,e),Object.assign(this,tl({expandRectGap:16},t))}return y()(e,[{key:"getExpandedBBox",value:function(e){var t=this.expandRectGap;return{minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t}}},{key:"getRectLines",value:function(e){var t=500;return[{x1:e.minX,y1:e.minY-t,x2:e.minX,y2:e.maxY+t},{x1:e.minX-t,y1:e.minY,x2:e.maxX+t,y2:e.minY},{x1:e.maxX,y1:e.minY-t,x2:e.maxX,y2:e.maxY+t},{x1:e.minX-t,y1:e.maxY,x2:e.maxX+t,y2:e.maxY}]}},{key:"getVertexLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ray",r=500;return"all"===t?[{x1:e.x,y1:e.y,x2:e.x,y2:e.y-r,type:n},{x1:e.x,y1:e.y,x2:e.x-r,y2:e.y,type:n}]:"N"===t||"S"===t?["N"===t?{x1:e.x,y1:e.y,x2:e.x,y2:e.y-r,type:n}:{x1:e.x,y1:e.y,x2:e.x,y2:e.y+r,type:n}]:["W"===t?{x1:e.x,y1:e.y,x2:e.x-r,y2:e.y,type:n}:{x1:e.x,y1:e.y,x2:e.x+r,y2:e.y,type:n}]}},{key:"vMiddleLine",value:function(e,t){var n;n=Math.abs(e.minX-t.maxX)<Math.abs(e.maxX-t.minX)?(e.minX+t.maxX)/2:(e.maxX+t.minX)/2;var r=((e.minY+e.maxY)/2+(t.minY+t.maxY)/2)/2;return{x1:n,y1:r-500,x2:n,y2:r+500}}},{key:"hMiddleLine",value:function(e,t){var n;n=Math.abs(e.minY-t.maxY)<Math.abs(e.maxY-t.minY)?(e.minY+t.maxY)/2:(e.maxY+t.minY)/2;var r=((e.minX+e.maxX)/2+(t.minX+t.maxX)/2)/2;return{x1:r-500,y1:n,x2:r+500,y2:n}}},{key:"cost",value:function(e){var t,n=e.vertex,r=e.end,a=e.middleLine,i=0,o=0;return t=n.distance+Ct(n.x,n.y,r.x,r.y),n.from&&n.from.from&&wt(n.x,n.y,n.from.x,n.from.y)!==wt(n.from.x,n.from.y,n.from.from.x,n.from.from.y)&&(i=-1),a&&n.from&&n.from.from&&Rt(n,a)&&!Rt(n.from.from,a)&&n.from&&n.from.from&&wt(n.x,n.y,n.from.x,n.from.y)!==wt(n.from.x,n.from.y,n.from.from.x,n.from.from.y)&&(o=2),-t+i+o}},{key:"getSide",value:function(e,t){var n=[(e.minX+e.maxX)/2,(e.minY+e.maxY)/2],r=[e.maxX,e.minY],a=[e.maxX,e.maxY],i=[r[0]-n[0],r[1]-n[1]],o=[a[0]-n[0],a[1]-n[1]],c=[t[0]-n[0],t[1]-n[1]],l=ce.b.angle(i,o),s=l/2,u=[0,s],d=[u[1],s+Math.PI-l],f=[d[1],s+Math.PI],h=[2*Math.PI-s,2*Math.PI],p=ce.b.angle(c,[1,0]);return c[1]<0&&(p=2*Math.PI-p),Je(p,u)||Je(p,h)?"E":Je(p,d)?"S":Je(p,f)?"W":"N"}},{key:"dedupePoints",value:function(e){if(e.length>=3){for(var t=[e[0]],n=1;n<e.length-1;n++){var r=e[n-1],a=e[n],i=e[n+1];ht(r.x,a.x)&&ht(i.x,a.x)||ht(r.y,a.y)&&ht(i.y,a.y)||t.push(a)}return t.push(e[e.length-1]),t}return e}},{key:"getExpandPoint",value:function(e,t,n){return"N"===n?{x:e.x,y:t.minY}:"S"===n?{x:e.x,y:t.maxY}:"W"===n?{x:t.minX,y:e.y}:"E"===n?{x:t.maxX,y:e.y}:null}},{key:"find",value:function(e,t){var n=this,r=e.cell,a=t.cell,i=r&&r.getBBox(),o=a&&a.getBBox(),c=i&&this.getExpandedBBox(i),l=o&&this.getExpandedBBox(o),s=[];s=c?s.concat(this.getRectLines(c)):s,s=l?s.concat(this.getRectLines(l)):s;var u,d,f,h=new zt("start"),p=new zt("end"),m=[e.x,e.y],g=[t.x,t.y];Object.assign(h,{x:m[0],y:m[1]}),Object.assign(p,{x:g[0],y:g[1]}),i?(d=this.getSide(i,m),s=s.concat(this.getVertexLine(h,d))):s=s.concat(this.getVertexLine(h,"all","straight")),o?(f=this.getSide(o,g),s=s.concat(this.getVertexLine(p,f))):s=s.concat(this.getVertexLine(p,"all","straight")),a&&r&&("E"===d&&"W"===f?u=r.x+r.width<a.x?this.vMiddleLine(i,o):this.hMiddleLine(i,o):"W"===d&&"E"===f?u=r.x+r.width<a.x?this.hMiddleLine(i,o):this.vMiddleLine(i,o):"S"===d&&"N"===f?u=r.y+r.height>a.y?this.vMiddleLine(i,o):this.hMiddleLine(i,o):"N"===d&&"S"===f&&(u=r.y+r.height>a.y?this.hMiddleLine(i,o):this.vMiddleLine(i,o))),e.d&&("N"===d?h.y-=e.d:"S"===d?h.y+=e.d:"E"===d?h.x+=e.d:"W"===d&&(h.x-=e.d)),t.d&&("N"===f?p.y-=t.d:"S"===f?p.y+=t.d:"E"===f?p.x+=t.d:"W"===f&&(p.x-=t.d)),u&&s.push(u);var y=Vt(s);i&&o&&!gt(c,l)&&y.getAllEdges().forEach((function(e){var t=e.startVertex,n=e.endVertex,r={x1:t.x,y1:t.y,x2:n.x,y2:n.y};(St(r,i)||St(r,o))&&y.deleteEdge(e)}));var v,b=this.getExpandPoint(h,c,d)||h,x=this.getExpandPoint(p,l,f)||p,k=y.snap(b),w=y.snap(x);return k.from=h,w.from=p,(v=ht(k.x,w.x)&&ht(k.y,w.y)?[]:Ht(y,k,w,(function(e,t,r){return n.cost({vertex:e,start:t,end:r,middleLine:u})}))).unshift(h),v.push(p),this.dedupePoints(v)}},{key:"destroy",value:function(){this.destroyed=!0}}]),e}()),il=function(e){b()(n,Qc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"truncate",value:function(e){var t=this.line,n=t.tailOffset,r=t.tipOffset,a=Cn(e),i=a[a.length-1],o=a[a.length-2],c=a[0],l=a[1],s=bt(o[1],o[2],i[1],i[2],r),u=bt(l[1],l[2],c[1],c[2],n);return i[1]=s.x,i[2]=s.y,c[1]=u.x,c[2]=u.y,Pn(a)}},{key:"getPath",value:function(){return this.truncate(this._getPath())}},{key:"_getPath",value:function(){var e=this.line,t=e.source,n=e.target,r=e.diagram,a=this.getPoints();if(e.controlPoints.length>0)return Pn(Bn(e.controlPoints,a,e.resizer.getElbowMergeSig()));var i=r.find(t.id),o=r.find(n.id),c=e.getEndpoint(t),l=e.getEndpoint(n);if(null!=i&&i===o&&vt(c.x,c.y,l.x,l.y)<8&&0!==e.controlPoints.length)return Pn([["M",(c=i.getPoint([1,.5])).x,c.y-8],["l",16,0],["l",0,16],["L",c.x,c.y+8]]);if(!c||!l)return Pn([["M",0,0],["L",50,0],["L",50,50]]);if(!i&&!o&&0===e.controlPoints.length){var s=.5*(c.x+l.x);return"M".concat(c.x,",").concat(c.y," L").concat(s,",").concat(c.y," L").concat(s,",").concat(l.y," L").concat(l.x,",").concat(l.y)}return jn(al.find(rl(rl({cell:i},a[0]),{},{d:0}),rl(rl({cell:o},a[1]),{},{d:0})))}}]),n}();function ol(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var cl=function(e){b()(n,Po);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),r=Qe({default:{textAreaContentStyleSheets:[{query:"self",css:{outline:"none","white-space":"normal","letter-spacing":"normal","font-size":"14px","font-family":'PingFangSC-Regular, "PingFang SC", sans-serif',"line-height":"1.74","word-break":"break-word","box-sizing":"border-box",padding:"4px",color:"#262626"}}],shape:"straight",stroke:{color:"#595959",width:2},html:'<div style="text-align: center;">'.concat("&#8203;","</div>"),source:{},target:{},controlPoints:[],opacity:1},penetratedKeys:["source","target","stroke","fill","html","shape","controlPoints","opacity"]},r),e=t.call(this,r),Object.assign(R()(e),d()(r.default)),e.Subcells=[Hc,Gc],e.subcells=e.Subcells.map((function(t){return new t(R()(e))})),e.subcells.push(new Uc(R()(e),"tail")),e.subcells.push(new Uc(R()(e),"tip")),e.shapes={straight:new Jc(R()(e)),curve:new $c(R()(e)),elbow:new il(R()(e))},e.render(),e.isLine=!0,e.isLoop=!1,e.resizer=new Fc(R()(e)),e}return y()(n,[{key:"getKeyShape",value:function(){return this.wireElement}},{key:"getKeyShapeBox",value:function(){var e=this.getKeyShape().getBBox(),t=e.x,n=e.y;return{x:t,y:n,width:e.width,height:e.height,minX:t,minY:n,maxX:t+e.width,maxY:n+e.height}}},{key:"canArrange",value:function(){var e=this;return["source","target"].every((function(t){var n=e[t];return!n.id&&Array.isArray(n.connection)}))}},{key:"isDrawable",value:function(){var e=this.diagram,t=this.target,n=this.source,r=e.find(n.id),a=n.id&&!r||r&&!1===r.state.visible,i=e.find(t.id),o=t.id&&!i||i&&!1===i.state.visible;return!(a||o)}},{key:"shouldRefreshEndEditContent",value:function(){return this.isContentEmpty()}},{key:"canFill",value:function(){return!1}},{key:"beginEditContent",value:function(){this.textAreaElement.css({outline:"1px solid #096DD9"})}},{key:"endEditContent",value:function(){this.textAreaElement.css({outline:"none"})}},{key:"getPointByPercent",value:function(e){var t=this.wireElement,n=t.getTotalLength();return t.getPointAtLength(e*n)}},{key:"getPadding",value:function(){return[0,0,0,0]}},{key:"getEndpoint",value:function(e){var t=this.diagram,n=e.id,r=e.connection,a=t.find(n);if(a)return r?a.getPoint(r):a.getPoint([.5,.5]);if(Array.isArray(r)){var i=D()(r,2);return{x:i[0],y:i[1]}}return r}},{key:"getAlignBBox",value:function(){var e=this.wireElement.rendererElement.getBBox();return{x:e.x,y:e.y,width:e.width,height:e.height,minX:e.x,minY:e.y,maxX:e.x+e.width,maxY:e.y+e.height}}},{key:"getBBox",value:function(){var e=this.graphicGroup.rendererElement.getBBox();return{x:e.x,y:e.y,width:e.width,height:e.height,minX:e.x,minY:e.y,maxX:e.x+e.width,maxY:e.y+e.height}}},{key:"getShapeObj",value:function(){var e=this.shape;return this.shapes[e]}},{key:"getFirstInsertControlPoints",value:function(){return this.getShapeObj().getFirstInsertControlPoints(this)}},{key:"getTextAreaPosition",value:function(){return this.getShapeObj().getTextAreaPosition(this)}},{key:"getControlPointButtonPosition",value:function(e){return this.getShapeObj().getControlPointButtonPosition(e)}},{key:"getPath",value:function(){var e=this.shape,t=this.sourceCell,n=this.isLoop,r=this.getShapeObj();if(n&&0===this.controlPoints.length){var a=t.getPoint([1,.5]);return Pn([["M",a.x,a.y-8],["l",16,-4],["l",0,24],["L",a.x,a.y+8]])}if(r)return r.getPath(this);throw new Error("unsupported line shape ".concat(e))}},{key:"updatePath",value:function(){this.isCacheStale("shape","source","target")&&(this.d=this.getPath())}},{key:"render",value:function(){var e=this.model;this.subcells.forEach((function(e){return e.render()})),this.renderModel(e)}},{key:"renderModel",value:function(e){B()(O()(n.prototype),"updateModel",this).call(this,e),this.subcells.forEach((function(e){e.update()}))}},{key:"_updateResizer",value:function(){var e=this.diagram;this.resizer&&this.resizer.update(),1===e.selector.selections.length&&e.selector.selections[0]===this||this.resizer.end()}},{key:"updateModel",value:function(e){var t=!1;void 0!==e.shape&&e.shape!==this.shape&&(e.controlPoints=null,t=!0),B()(O()(n.prototype),"updateModel",this).call(this,e),t&&(this.updatePoints(),this.resizer&&this.resizer.renew(this)),this.subcells.forEach((function(e){e.update()}))}},{key:"draw",value:function(){if(this.isDrawable()){var e=this.source,t=this.target,n=this.diagram,r=n.find(e.id),a=n.find(t.id);this.isLoop=null!=r&&r===a,this.sourceCell=r,this.targetCell=a,this.show(),this.updatePoints(),this.updatePath(),this.subcells.forEach((function(e){return e.draw()})),this.drawPosition(),this.graphicGroup.attr({opacity:this.opacity}),this._updateResizer()}else this.hide()}},{key:"updatePoints",value:function(){this.getShapeObj().updatePoints()}},{key:"updateCache",value:function(){var e=this,t=this.cache;["shape","source","target"].forEach((function(n){var r=e[n];t[n]=s()(r)?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ol(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ol(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r):r}))}},{key:"drawPosition",value:function(){if(this.isCacheStale("matrix")){var e=this.graphicGroup,t=this.matrix;e.update({matrix:t}),this.resizer.update()}}},{key:"getPoints",value:function(){return this.shapes[this.shape].getPoints()}},{key:"convertStrokeStyle",value:function(){return"dash"===this.stroke.style?{"stroke-dasharray":2*(this.stroke.width||1)}:{"stroke-dasharray":"none"}}},{key:"destroy",value:function(){this.subcells.forEach((function(e){return e.destroy()})),this.shapes=null,this.resizer.destroy(),B()(O()(n.prototype),"destroy",this).call(this)}}]),n}();c()(cl,"className","LineCell"),c()(cl,"Shapes",{});var ll=tr,sl=function(e){b()(n,bo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.cell,t=new ll;this.element=t,e.graphicGroup.add(t)}},{key:"update",value:function(){var e=this.cell,t=this.element,n=e.diagram,r=e.image,a=n.imageManager;if(r&&e.isCacheStale("image","width","height")){var i=r.src,o=r.naturalWidth,c=r.naturalHeight;t.update({width:e.width,height:e.height}),a.setImageHref(t,i,o,c)}}},{key:"destroy",value:function(){this.element.destroy(),B()(O()(n.prototype),"destroy",this).call(this)}}]),n}();function ul(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ul(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ul(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fl=function(e){b()(n,Ec);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),(e=t.call(this,dl(dl({stencils:[{name:"image",width:120,height:60,outline:{name:"rect",x:0,y:0,width:120,height:60,rx:1,ry:1},scene:[],thumb:[{d:[["M",6.4,10.5],["L",25.6,10.5],["C",25.8209139,10.5,26,10.6790861,26,10.9],["L",26,22.1],["C",26,22.3209139,25.8209139,22.5,25.6,22.5],["L",6.4,22.5],["C",6.1790861,22.5,6,22.3209139,6,22.1],["L",6,10.9],["C",6,10.6790861,6.1790861,10.5,6.4,10.5],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]}],default:{fill:{color:"rgba(255,255,255,0)"},image:{},shape:"image",stroke:{width:1}}},r),{},{Subcells:[gc,sl]}))).isImage=!0,e}return y()(n)}();c()(fl,"className","ImageCell");var hl=[{name:"arrow-1",width:100,height:80,outline:{name:"polygon",points:[{x:49.4351641,y:0},{x:-181188398e-21,y:40.0053069},{x:49.4351641,y:80},{x:49.4351641,y:59.6453069},{x:100,y:59.6453069},{x:100,y:20.9653069},{x:49.4351641,y:20.9653069}]},scene:[],thumb:[{name:"polygon",points:[{x:16.2620321,y:7.99867328},{x:7,y:15.9997347},{x:16.2620321,y:23.9986733},{x:16.2620321,y:19.9277347},{x:25.7357163,y:19.9277347},{x:25.7357163,y:12.1917347},{x:16.2620321,y:12.1917347}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"arrow-2",width:100,height:80,outline:{name:"polygon",points:[{x:50.5648359,y:-671073958e-22},{x:100,y:40.0053069},{x:50.5648359,y:80},{x:50.5648359,y:59.6453069},{x:0,y:59.6453069},{x:0,y:20.9653069},{x:50.5648359,y:20.9653069}]},scene:[],thumb:[{name:"polygon",points:[{x:16.4736842,y:7.99867328},{x:25.7357163,y:15.9997347},{x:16.4736842,y:23.9986733},{x:16.4736842,y:19.9277347},{x:7,y:19.9277347},{x:7,y:12.1917347},{x:16.4736842,y:12.1917347}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"arrow-3",width:138,height:80,outline:{name:"polygon",points:[{x:92.2158589,y:0},{x:137.5,y:40},{x:92.2158589,y:80},{x:92.2158589,y:55.9003245},{x:46.7965867,y:55.9003245},{x:46.7965867,y:80},{x:88817842e-23,y:40.0053069},{x:46.7965867,y:0},{x:46.7965867,y:24.6624715},{x:92.2158589,y:24.6624715}]},scene:[],thumb:[{name:"polygon",points:[{x:19.8639344,y:8},{x:27.109397,y:16},{x:19.8639344,y:24},{x:19.8639344,y:19.1800649},{x:12.5968509,y:19.1800649},{x:12.5968509,y:24},{x:5.10939702,y:16.0010614},{x:12.5968509,y:8},{x:12.5968509,y:12.9324943},{x:19.8639344,y:12.9324943}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"circle",width:100,height:100,outline:{name:"ellipse",cx:50,cy:50,rx:50,ry:50},scene:[],thumb:[{name:"ellipse",cx:16,cy:16.5333333,rx:9,ry:9}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"collate",width:42,height:36,outline:{d:[["M",40.3837262,0],["C",40.6808145,0,40.9625216,.132096,41.1525116,.3604931],["C",41.478533,.7524209,41.4542938,1.3198118,41.1146853,1.6825771],["L",41.0232331,1.7687854],["L",20.9996243,18.0064637],["L",41.0232331,34.2312146],["C",41.2190021,34.3940632,41.3440192,34.6242958,41.3757431,34.8738407],["L",41.3837518,35],["C",41.3837518,35.5128358,40.997686,35.9355072,40.5003473,35.9932723],["L",40.3837262,36],["L",1.9253140000000002,36],["C",1.6282257999999992,36,1.3465187000000007,35.867904,1.1565287000000009,35.6395069],["C",.8305071999999996,35.2475791,.8547464999999992,34.6801882,1.1943549999999998,34.317423],["L",1.2858070999999995,34.2312146],["L",20.9996243,18.0064637],["L",1.2858070999999995,1.7687854],["C",1.0900382000000004,1.6059368,.9650210999999995,1.3757042,.9332972000000002,1.1261593],["L",.9252885000000006,1],["C",.9252885000000006,.4871642,1.3113542000000002,.0644928,1.8086929000000005,.0067277],["L",1.9253140000000002,0],["L",40.3837262,0],["Z"]]},scene:[],thumb:[{d:[["M",23.6671476,9],["C",23.787916,9,23.9022194,9.0545637,23.9781629,9.1484658],["C",24.1170814,9.3202349,24.0904508,9.5720969,23.9186817,9.7110154],["L",23.9186817,9.7110154],["L",16.142839,16],["L",23.9186817,22.2889846],["C",23.9938034,22.3497394,24.0437485,22.4350446,24.0607217,22.5285699],["L",24.0671476,22.6],["C",24.0671476,22.8209139,23.8880615,23,23.6671476,23],["L",23.6671476,23],["L",8.3328524,23],["C",8.212084,23,8.0977806,22.9454363,8.0218371,22.8515342],["C",7.8829186,22.6797651,7.9095492,22.4279031,8.0813183,22.2889846],["L",8.0813183,22.2889846],["L",15.856839,16],["L",8.0813183,9.7110154],["C",8.0061966,9.6502606,7.9562515,9.5649554,7.9392783,9.4714301],["L",7.9328524,9.4],["C",7.9328524,9.1790861,8.1119385,9,8.3328524,9],["L",8.3328524,9],["Z"]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.02,name:"NW"},{x:0,y:.98,name:"SW"},{x:1,y:.02,name:"NE"},{x:1,y:.98,name:"SE"}]},{name:"comment-2",width:113,height:100,outline:{d:[["M",18.75,0],["L",93.75,0],["C",104.105339,-0,112.5,8.3946609,112.5,18.75],["L",112.5,59.4444576],["C",112.5,69.7997966,104.105339,78.1944576,93.75,78.1944576],["L",53.1187263,78.1944576],["L",53.1187263,78.1944576],["L",21.9728275,100],["L",21.9728275,78.1916318],["L",18.75,78.1916318],["C",8.3946609,78.1916318,0,69.7969708,0,59.4416318],["L",0,18.75],["C",-0,8.3946609,8.3946609,0,18.75,0],["Z"]]},scene:[],thumb:[{d:[["M",10,9],["L",22,9],["C",23.6568542,9,25,10.3431458,25,12],["L",25,18.700459],["C",25,20.3573132,23.6568542,21.700459,22,21.700459],["L",15.4989962,21.700459],["L",15.4989962,21.700459],["L",10.5156524,25.2421473],["L",10.5156524,21.7],["L",10,21.7],["C",8.3431458,21.7,7,20.3568542,7,18.7],["L",7,12],["C",7,10.3431458,8.3431458,9,10,9],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"comment",width:76,height:60,outline:{d:[["M",1,49],["C",.4477153,49,0,48.5522847,0,48],["L",0,1],["C",-0,.4477153,.4477153,0,1,0],["L",75,0],["C",75.5522847,-0,76,.4477153,76,1],["L",76,48],["C",76,48.5522847,75.5522847,49,75,49],["L",45.6,49],["L",38,60],["L",30.4,49],["L",1,49],["Z"]]},scene:[],thumb:[{d:[["M",7,22],["C",6.4477153,22,6,21.5522847,6,21],["L",6,10],["C",6,9.4477153,6.4477153,9,7,9],["L",25,9],["C",25.5522847,9,26,9.4477153,26,10],["L",26,21],["C",26,21.5522847,25.5522847,22,25,22],["L",18,22],["L",16,25],["L",14,22],["L",7,22],["Z"]]}],padding:[0,10,10,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"connector",width:44,height:44,outline:{name:"ellipse",cx:22,cy:22,rx:22,ry:22},scene:[],thumb:[{name:"ellipse",cx:16,cy:16,rx:9,ry:9}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.145,y:.145,name:"NW"},{x:.145,y:.855,name:"SW"},{x:.855,y:.145,name:"NE"},{x:.855,y:.855,name:"SE"}]},{name:"data",width:124,height:60,outline:{d:[["M",17.1403103,0],["L",122.687657,0],["C",123.239942,-0,123.687657,.4477153,123.687657,1],["C",123.687657,1.0896438,123.675604,1.1788806,123.65182,1.2653118],["L",107.823852,58.7853118],["C",107.704434,59.2192873,107.309796,59.52,106.85969,59.52],["L",1.3123427,59.52],["C",.7600579,59.52,.3123427,59.0722847,.3123427,58.52],["C",.3123427,58.4303562,.3243965,58.3411194,.34818,58.2546882],["L",16.1761477,.7346882],["C",16.2955661,.3007127,16.6902043,-0,17.1403103,0],["Z"]]},scene:[],thumb:[{d:[["M",7.6068779,10],["L",27.4750629,10],["C",27.6959768,10,27.8750629,10.1790861,27.8750629,10.4],["C",27.8750629,10.4358575,27.8702414,10.4715522,27.860728,10.5061247],["L",24.7787871,21.7061247],["C",24.7310198,21.8797149,24.5731645,22,24.3931221,22],["L",4.5249371,22],["C",4.3040232,22,4.1249371,21.8209139,4.1249371,21.6],["C",4.1249371,21.5641425,4.1297586,21.5284478,4.139272,21.4938753],["L",7.2212129,10.2938753],["C",7.2689802,10.1202851,7.4268355,10,7.6068779,10],["Z"]]}],padding:[0,12,0,12],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:.095,y:.5,name:"W"},{x:.905,y:.5,name:"E"},{x:.23,y:.02,name:"NW"},{x:.015,y:.98,name:"SW"},{x:.985,y:.02,name:"NE"},{x:.77,y:.98,name:"SE"}]},{name:"database",width:70,height:80,outline:{d:[["M",35,0],["C",53.9753466,0,69.4238162,5.273994,69.9842524,11.8539517],["L",69.995311,11.8537712],["L",69.995311,12.022052],["L",70,12.2242015],["C",70,12.2917139,69.998433,12.3590985,69.995311,12.426351],["L",69.995311,67.977948],["C",69.6862333,74.6359505,54.1366666,80,35,80],["C",16.0547001,80,.6251167,74.7426951,.0185218,68.1772958],["L",.004689,67.977948],["L",0,11.8537712],["L",.0157476,11.8539517],["C",.5761838,5.273994,16.0246534,0,35,0],["Z"]]},scene:[{d:[["M",70,13],["C",70,19.0751322,54.3299662,24,35,24],["C",15.8633334,24,.3137667,19.1731371,.004689,13.1819051],["L",0,13]]}],thumb:[{d:[["M",16,7],["C",20.337222099999998,7,23.8683009,8.1866487,23.9964006,9.6671391],["L",23.9989282,9.6670985],["L",23.9989282,9.7049617],["L",24,9.750445299999999],["C",24,9.7656356,23.9996418,9.7807972,23.9989282,9.795929000000001],["L",23.9989282,22.2950383],["C",23.9282819,23.7930889,20.3740952,25,16,25],["C",11.6696457,25,8.1428838,23.8171064,8.0042336,22.3398916],["L",8.0010718,22.2950383],["L",8,9.6670985],["L",8.0035994,9.6671391],["C",8.1316991,8.1866487,11.6627779,7,16,7],["Z"]]},{d:[["M",24,10],["C",24,11.1045695,20.418278,12,16,12],["C",11.6259048,12,8.0717181,11.1223886,8.0010718,10.0330737],["L",8,10]]}],padding:[16,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:0,y:.15,name:"NW"},{x:0,y:.85,name:"SW"},{x:1,y:.15,name:"NE"},{x:1,y:.85,name:"SE"}]},{name:"decision",width:160,height:80,outline:{d:[["M",79.8944272,.4472136],["L",157.211146,39.1055728],["C",157.705124,39.3525621,157.905348,39.9532351,157.658359,40.4472136],["C",157.561596,40.640741,157.404673,40.7976635,157.211146,40.8944272],["L",79.8944272,79.5527864],["C",79.3313722,79.8343139,78.6686278,79.8343139,78.1055728,79.5527864],["L",.7888544,40.8944272],["C",.2948759000000001,40.6474379,.09465150000000011,40.0467649,.34164079999999997,39.5527864],["C",.4384045000000001,39.359259,.5953269999999999,39.2023365,.7888544,39.1055728],["L",78.1055728,.4472136],["C",78.6686278,.1656861,79.3313722,.1656861,79.8944272,.4472136],["Z"]]},scene:[],thumb:[{d:[["M",5.5303015,15.6625354],["L",15.7852498,9.1366592],["C",15.9162764,9.0532787,16.0837236,9.0532787,16.2147502,9.1366592],["L",26.4696985,15.6625354],["C",26.656075,15.7811387,26.7110162,16.0283736,26.5924129,16.2147502],["C",26.5609814,16.2641425,26.5190908,16.3060331,26.4696985,16.3374646],["L",16.2147502,22.8633408],["C",16.0837236,22.9467213,15.9162764,22.9467213,15.7852498,22.8633408],["L",5.5303015,16.3374646],["C",5.343925,16.2188613,5.2889839,15.9716264,5.4075871,15.7852498],["C",5.4390186,15.7358575,5.4809092,15.6939669,5.5303015,15.6625354],["Z"]]}],padding:[10,24,10,24],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"delay",width:120,height:60,outline:{d:[["M",1,0],["L",90,0],["C",106.568542,-0,120,13.4314575,120,30],["C",120,46.5685425,106.568542,60,90,60],["L",1,60],["C",.4477153,60,0,59.5522847,0,59],["L",0,1],["C",-0,.4477153,.4477153,0,1,0],["Z"]]},scene:[],thumb:[{d:[["M",6.4,11.0666667],["L",20,11.0666667],["C",23.3137085,11.0666667,26,13.7529582,26,17.0666667],["C",26,20.3803752,23.3137085,23.0666667,20,23.0666667],["L",6.4,23.0666667],["C",6.1790861,23.0666667,6,22.8875806,6,22.6666667],["L",6,11.4666667],["C",6,11.2457528,6.1790861,11.0666667,6.4,11.0666667],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:.02,y:.985,name:"SW"},{x:.81,y:0,name:"NE"},{x:.81,y:1,name:"SE"}]},{name:"diamond",width:100,height:100,outline:{d:[["M",50.5029462,.2083271],["L",99.7916729,49.4970538],["C",100.069442,49.7748233,100.069442,50.2251767,99.7916729,50.5029462],["L",50.5029462,99.7916729],["C",50.2251767,100.069442,49.7748233,100.069442,49.4970538,99.7916729],["L",.2083271,50.5029462],["C",-.0694424,50.2251767,-.0694424,49.7748233,.2083271,49.4970538],["L",49.4970538,.2083271],["C",49.7748233,-.0694424,50.2251767,-.0694424,50.5029462,.2083271],["Z"]]},scene:[],thumb:[{d:[["M",16.2852309,7.0928427],["L",24.9119336,15.7195454],["C",25.0681433,15.8757552,25.0681433,16.1290212,24.9119336,16.2852309],["L",16.2852309,24.9119336],["C",16.1290212,25.0681433,15.8757552,25.0681433,15.7195454,24.9119336],["L",7.0928427,16.2852309],["C",6.936633,16.1290212,6.936633,15.8757552,7.0928427,15.7195454],["L",15.7195454,7.0928427],["C",15.8757552,6.936633,16.1290212,6.936633,16.2852309,7.0928427],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"display",width:120,height:60,outline:{d:[["M",18.559242,0],["L",108.388294,0],["C",108.593661,-124e-7,108.794047,.0632157,108.962224,.18108],["C",116.320741,5.3381999,120,15.2778399,120,30],["C",120,43.9124351,116.326183,53.8383306,108.978548,59.7776865],["C",108.800609,59.9215337,108.578719,60,108.349908,60],["L",18.559242,60],["C",18.2079174,60,17.8823628,59.8156369,17.70166,59.5143473],["L",.3084873,30.5143473],["C",.1185966,30.1977386,.1185966,29.8022614,.3084873,29.4856527],["L",17.70166,.4856527],["C",17.8823628,.1843631,18.2079174,0,18.559242,0],["Z"]]},scene:[],thumb:[{d:[["M",8.7974767,10],["L",24.1863956,10],["L",24.1863956,10],["C",25.6811795,11.0207233,26.4285714,13.0207233,26.4285714,16],["C",26.4285714,18.8174994,25.6811795,20.8174994,24.1863956,22],["L",8.7974767,22],["C",8.6564465,22,8.525838,21.9257329,8.4537242,21.8045343],["L",5.1216988,16.2045343],["C",5.0467021,16.0784903,5.0467021,15.9215097,5.1216988,15.7954657],["L",8.4537242,10.1954657],["C",8.525838,10.0742671,8.6564465,10,8.7974767,10],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.2,y:.14,name:"NW"},{x:.2,y:.86,name:"SW"},{x:.92,y:.14,name:"NE"},{x:.92,y:.86,name:"SE"}]},{name:"document",width:120,height:72,outline:{d:[["M",1,0],["L",119,0],["C",119.552285,-0,120,.4477153,120,1],["L",120,63.2943312],["C",119.999975,63.8466024,119.552271,64.2943066,119,64.2943066],["C",118.874051,64.2943066,118.749236,64.2705132,118.63212,64.2241781],["C",108.562735,60.240377,99.0186463,58.2432881,89.9998549,58.2329113],["C",75.8605271,58.216643,73.9215376,58.9595768,59.9999032,65.0379103],["C",46.0782688,71.1162438,44.1653018,71.9832913,29.9999516,72],["C",20.7325008,72.010162,10.9291929,69.6914094,.590028,65.0437423],["C",.2309588,64.882365,-0,64.5253236,0,64.1316572],["L",0,1],["C",-0,.4477153,.4477153,0,1,0],["Z"]]},scene:[],thumb:[{d:[["M",6,10],["L",26,10],["L",26,23.0414063],["C",24.237687,22.2996937,22.5710122,21.9279131,20.9999758,21.9260644],["C",18.6434212,21.9232914,18.3202563,22.0499279,15.9999839,23.0860074],["C",13.6797115,24.122087,13.3608836,24.2698792,11,24.2726331],["C",9.4260668,24.274461,7.7594002,23.864052,6,23.0414063],["L",6,10],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:.9,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:0,y:.9,name:"SW"},{x:.98,y:.015,name:"NE"},{x:1,y:.9,name:"SE"}]},{name:"internal-storage",width:80,height:80,outline:{name:"rect",x:0,y:0,width:80,height:80,rx:0,ry:0},scene:[{d:[{name:"M",x:0,y:8},{name:"L",x:80,y:8}]},{d:[{name:"M",x:8,y:0},{name:"L",x:8,y:80}]}],thumb:[{name:"rect",x:8,y:8,width:17,height:17,rx:.4,ry:.4},{d:[{name:"M",x:8.5,y:12.5},{name:"L",x:24.5,y:12.5}]},{d:[{name:"M",x:12.5,y:8.5},{name:"L",x:12.5,y:24.5}]}],padding:[10,10,0,16],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:.02,y:.985,name:"SW"},{x:.98,y:.015,name:"NE"},{x:.98,y:.985,name:"SE"}]},{name:"loop-limit",width:120,height:60,outline:{d:[["M",17.5871195,0],["L",102.429999,0],["C",102.7204,-0,102.996458,.1262398,103.186409,.3459021],["L",119.75641,19.5077312],["C",119.913532,19.6894304,120,19.9216166,120,20.1618291],["L",120,59],["C",120,59.5522847,119.552285,60,119,60],["L",1,60],["C",.4477153,60,0,59.5522847,0,59],["L",0,20.1621158],["C",0,19.92173,.0865921,19.6893882,.2439196,19.5076371],["L",16.831039,.3455213],["C",17.0209853,.1260876,17.2968941,0,17.5871195,0],["Z"]]},scene:[],thumb:[{d:[["M",9.5170283,11.0666667],["L",22.4862374,11.0666667],["C",22.6043417,11.0666667,22.7164089,11.1188597,22.7924108,11.2092607],["L",25.9061734,14.9129485],["C",25.9667743,14.9850307,26,15.0761829,26,15.1703545],["L",26,22.6666667],["C",26,22.8875806,25.8209139,23.0666667,25.6,23.0666667],["L",6.4,23.0666667],["C",6.1790861,23.0666667,6,22.8875806,6,22.6666667],["L",6,15.1704681],["C",6,15.0762275,6.0332743,14.9850132,6.0939556,14.9129087],["L",9.210984,11.2091073],["C",9.286986,11.118798,9.3989942,11.0666667,9.5170283,11.0666667],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.1,y:.15,name:"NW"},{x:.02,y:.985,name:"SW"},{x:.9,y:.15,name:"NE"},{x:.98,y:.985,name:"SE"}]},{name:"manual-input",width:118,height:60,outline:{d:[["M",.8676336,15.6420323],["L",116.867634,.1512179],["C",117.415059,.0781139,117.918097,.4626272,117.991201,1.0100523],["C",117.99706,1.0539311,118,1.0981505,118,1.1424188],["L",118,59],["C",118,59.5522847,117.552285,60,117,60],["L",1,60],["C",.4477152,60,0,59.5522847,0,59],["L",0,16.6332332],["C",0,16.1321084,.3709182,15.7083644,.8676336,15.6420323],["Z"]]},scene:[],thumb:[{d:[["M",6.3471791,12.618128],["L",25.5471791,10.0603243],["C",25.7661584,10.0311521,25.9673249,10.1850212,25.9964971,10.4040005],["C",25.9988298,10.4215108,26,10.4391564,26,10.4568214],["L",26,21.2666667],["C",26,21.4875806,25.8209139,21.6666667,25.6,21.6666667],["L",6.4,21.6666667],["C",6.1790861,21.6666667,6,21.4875806,6,21.2666667],["L",6,13.0146251],["C",6,12.8141269,6.1484367,12.6446042,6.3471791,12.618128],["Z"]]}],padding:[16,10,0,10],anchors:[{x:.5,y:.195,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.985,name:"SW"},{x:.98,y:.015,name:"NE"},{x:.98,y:.985,name:"SE"}]},{name:"manual-loop",width:120,height:60,outline:{d:[["M",1.3143594,0],["L",118.682087,0],["C",119.234371,-0,119.682087,.4477153,119.682087,1],["C",119.682087,1.0910107,119.669662,1.1815953,119.645158,1.2692451],["L",103.43015,59.2692451],["C",103.309369,59.7012703,102.915669,60,102.467078,60],["L",17.3668015,60],["C",16.917245,60,16.5229467,59.7000072,16.4030326,59.2667387],["L",.3505905,1.2667387],["C",.2032748,.7344638,.5153458,.1835468,1.0476207,.0362311],["C",1.1344943,.0121874,1.2242199,-0,1.3143594,0],["Z"]]},scene:[],thumb:[{d:[["M",6.5216709,11.0666667],["L",25.4769568,11.0666667],["C",25.6978707,11.0666667,25.8769568,11.2457528,25.8769568,11.4666667],["C",25.8769568,11.5020572,25.8722601,11.5372913,25.8629896,11.5714461],["L",22.8230148,22.7714461],["C",22.7757173,22.9457017,22.6175425,23.0666667,22.4369821,23.0666667],["L",9.5311679,23.0666667],["C",9.3502305,23.0666667,9.1918239,22.9452058,9.1448706,22.7704667],["L",6.1353736,11.5704667],["C",6.0780465,11.3571206,6.2045248,11.1376966,6.4178708,11.0803694],["C",6.451721,11.0712737,6.4866199,11.0666667,6.5216709,11.0666667],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:.1,y:.5,name:"W"},{x:.9,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:.22,y:.985,name:"SW"},{x:.98,y:.015,name:"NE"},{x:.78,y:.985,name:"SE"}]},{name:"merge",width:50,height:36,outline:{d:[["M",48.9094474,1.5703958],["L",25.82137,34.8172272],["C",25.5063491,35.2708574,24.883234299999998,35.3832223,24.4296042,35.0682014],["C",24.3316502,35.0001778,24.246653600000002,34.9151812,24.17863,34.8172272],["L",1.0905526000000005,1.5703958],["C",.7755317000000002,1.1167657,.8878967000000006,.4936509,1.3415268000000005,.17863],["C",1.5090014000000007,.0623282,1.7080259000000009,0,1.9119226000000005,0],["L",48.0880774,0],["C",48.6403621,0,49.0880774,.4477153,49.0880774,1],["C",49.0880774,1.2038967,49.0257492,1.4029212,48.9094474,1.5703958],["Z"]]},scene:[],thumb:[{d:[["M",25.5482177,9.6324953],["L",16.3254934,22.5443093],["C",16.1970898,22.7240743,15.9472698,22.765711,15.7675047,22.6373074],["C",15.7315865,22.6116515,15.7001625,22.5802275,15.6745066,22.5443093],["L",6.4517823,9.6324953],["C",6.3233787,9.4527302,6.3650154,9.2029102,6.5447805,9.0745066],["C",6.6126207,9.0260493,6.6939065,9,6.7772757,9],["L",25.2227243,9],["C",25.4436382,9,25.6227243,9.1790861,25.6227243,9.4],["C",25.6227243,9.4833692,25.596675,9.564655,25.5482177,9.6324953],["Z"]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:0,y:0,name:"NW"},{x:0,y:1,name:"SW"},{x:1,y:0,name:"NE"},{x:1,y:1,name:"SE"}]},{name:"multi-document",width:120,height:80,outline:{d:[["M",119,-0],["C",119.552285,-0,120,.4477153,120,1],["L",120,57.6634711],["C",120.00004,58.2157781,119.552307,58.6635113,119,58.6635113],["C",118.846121,58.6635113,118.694318,58.6280008,118.556406,58.5597438],["C",117.079303,57.8286782,115.893834,57.3066398,115,56.9936286],["L",114.744,56.868],["L",114.744526,63.1694166],["C",114.744553,63.7217167,114.296826,64.1694445,113.744526,64.1694445],["C",113.610972,64.1694445,113.478771,64.1426929,113.355724,64.0907684],["C",111.834645,63.4488877,110.620494,62.9604303,109.71327,62.6253962],["L",109.714286,71.1461039],["C",109.714249,71.6983687,109.26655,72.1460677,108.714286,72.1460677],["C",108.59377,72.1460677,108.474247,72.1242823,108.361482,72.0817624],["C",98.4971172,68.3622546,89.1471649,66.4976545,80.3116246,66.4879622],["C",66.4538962,66.4727606,64.5535237,67.1669765,50.9091531,72.8467226],["C",37.2647825,78.5264687,35.3899142,79.3366596,21.5066816,79.351889],["C",12.4628087,79.3615937,5.4112062,77.2136321,.351874,72.9080041],["C",.1286374,72.7179927,0,72.4396044,0,72.1464509],["L",0,11.7804604],["C",0,11.2281757,.4477153,10.7804604,1,10.7804604],["L",5.255,10.78],["L",5.2554745,6.3902302],["C",5.2554745,5.8379455,5.7031897,5.3902302,6.2554745,5.3902302],["L",10.51,5.39],["L",10.5109489,1],["C",10.5109489,.4477153,10.9586642,-0,11.5109489,-0],["L",119,-0],["Z"]]},scene:[{d:[["M",10,5.3902302],["L",113.744526,5.3902302],["C",114.29681,5.3902302,114.744526,5.8379455,114.744526,6.3902302],["L",114.744526,61.6827625],["L",114.744526,61.6827625]]},{d:[["M",3,10.7804604],["L",108.714286,10.7804604],["C",109.26657,10.7804604,109.714286,11.2281757,109.714286,11.7804604],["L",109.714286,69.602221],["L",109.714286,69.602221]]}],thumb:[{d:[["M",8.4444444,10.4296499],["L",8.4444444,8],["L",28.4444444,8],["L",28.4444444,19.5606936],["C",28.0673004,19.4077004,26.2625497,18.3360173,25.8924529,18.2092979]]},{d:[["M",6.2222222,13.090719],["L",6.2222222,10.7555556],["L",25.4444444,10.7555556],["L",25.4444444,21.8666667],["C",25.0819671,21.7196232,23.3557041,21.1217914,23,21]]},{d:[["M",4.3333333,13.5111111],["L",22.3333333,13.5111111],["L",22.3333333,23.8011738],["C",20.6331063,23.1515551,19.0251483,22.8259361,17.5094592,22.824317],["C",15.2359257,22.8218883,14.9241458,22.9328011,12.6856163,23.8402371],["C",10.4470867,24.7476731,10.1394911,24.8771148,7.8617733,24.8795322],["C",6.3432947,24.8811295,5.1671481,24.5216767,4.3333333,23.8011738],["L",4.3333333,13.5111111],["Z"]]}],padding:[16,10,16,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:.88,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.08,y:.1,name:"NW"},{x:0,y:.91,name:"SW"},{x:.98,y:.02,name:"NE"},{x:.885,y:.91,name:"SE"}]},{name:"off-page",width:38,height:38,outline:{d:[["M",.3999999999999986,0],["L",37.6,0],["C",37.8209139,0,38,.1790861,38,.4],["L",38,19.0323398],["C",38,19.1391572,37.9572763,19.2415374,37.8813478,19.3166695],["L",19.2813478,37.7216028],["C",19.125486199999997,37.8758298,18.874513800000003,37.8758298,18.7186522,37.7216028],["L",.11865219999999965,19.3166695],["C",.04272369999999981,19.2415374,0,19.1391572,0,19.0323398],["L",0,.4],["C",0,.1790861,.17908609999999925,0,.3999999999999986,0],["Z"]]},scene:[],thumb:[{d:[["M",8.4,8],["L",23.6,8],["C",23.8209139,8,24,8.1790861,24,8.4],["L",24,15.9169777],["C",24,16.0237952,23.9572763,16.1261753,23.8813478,16.2013075],["L",16.2813478,23.7216028],["C",16.1254862,23.8758298,15.8745138,23.8758298,15.7186522,23.7216028],["L",8.1186522,16.2013075],["C",8.0427237,16.1261753,8,16.0237952,8,15.9169777],["L",8,8.4],["C",8,8.1790861,8.1790861,8,8.4,8],["Z"]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:0,y:0,name:"NW"},{x:1,y:0,name:"NE"}]},{name:"or",width:44,height:44,outline:{name:"ellipse",cx:22,cy:22,rx:22,ry:22},scene:[{d:[{name:"M",x:0,y:21.5},{name:"L",x:44,y:21.5}]},{d:[{name:"M",x:21.5,y:0},{name:"L",x:21.5,y:44}]}],thumb:[{name:"ellipse",cx:16,cy:17,rx:9,ry:9},{d:[["M",7,17],["L",25,17],["M",16,8],["L",16,26]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.145,y:.145,name:"NW"},{x:.145,y:.855,name:"SW"},{x:.855,y:.145,name:"NE"},{x:.855,y:.855,name:"SE"}]},{name:"parallelogram",width:137,height:87,outline:{d:[["M",38.1579057,0],["L",135.980025,0],["C",136.53231,-0,136.980025,.4477153,136.980025,1],["C",136.980025,1.136127,136.952232,1.2708207,136.898349,1.3958294],["L",100.260418,86.3958293],["C",100.102374,86.7624912,99.7413671,87,99.3420943,87],["L",1.5199747,87],["C",.9676899,87,.5199747,86.5522847,.5199747,86],["C",.5199747,85.863873,.5477675,85.7291793,.6016506,85.6041707],["L",37.2395816,.6041707],["C",37.3976255,.2375088,37.7586329,-0,38.1579057,0],["Z"]]},scene:[],thumb:[{d:[["M",11.2637585,9],["L",26.3933844,9],["C",26.6142983,9,26.7933844,9.1790861,26.7933844,9.4],["C",26.7933844,9.4541707,26.7823813,9.507777,26.7610424,9.5575677],["L",21.1038995,22.7575677],["C",21.040868,22.9046413,20.8962528,23,20.7362415,23],["L",5.6066156,23],["C",5.3857017,23,5.2066156,22.8209139,5.2066156,22.6],["C",5.2066156,22.5458293,5.2176187,22.492223,5.2389576,22.4424323],["L",10.8961005,9.2424323],["C",10.959132,9.0953587,11.1037472,9,11.2637585,9],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"polygon",width:96,height:91,outline:{name:"polygon",points:[{x:48,y:0},{x:95.5528258,y:34.5491503},{x:77.3892626,y:90.4508497},{x:18.6107374,y:90.4508497},{x:.44717419000000014,y:34.5491503}]},scene:[],thumb:[{name:"polygon",points:[{x:16,y:7},{x:24.5595086,y:13.2188471},{x:21.2900673,y:23.2811529},{x:10.7099327,y:23.2811529},{x:7.44049135,y:13.2188471}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"preparation",width:120,height:60,outline:{d:[["M",19.9840694,0],["L",99.6873184,0],["C",100.023525,-0,100.33723,.1689467,100.522259,.4496594],["L",119.639798,29.4535248],["C",119.858585,29.7854538,119.859975,30.2154564,119.64334,30.5487937],["L",100.798808,59.5449283],["C",100.614349,59.8287556,100.298826,60,99.960325,60],["L",20.1720063,60],["C",19.83462,60,19.5199796,59.8298739,19.3352402,59.5475604],["L",.3565669,30.5448953],["C",.1398092,30.2136523,.1388534,29.7857253,.3541294,29.4535175],["L",19.1448658,.4561827],["C",19.3292042,.1717169,19.6450984,0,19.9840694,0],["Z"]]},scene:[],thumb:[{d:[["M",9.1753609,10],["L",22.7586938,10],["C",22.8919773,10,23.016505,10.0663866,23.0907953,10.1770457],["L",26.8513724,15.7786117],["C",26.9413749,15.912675,26.9419451,16.0877051,26.8528179,16.2223519],["L",23.1470284,21.8207859],["C",23.072951,21.9326965,22.9476882,22,22.8134814,22],["L",9.2130739,22],["C",9.0793157,22,8.9544098,21.9331428,8.8802274,21.8218405],["L",5.1471359,16.2207607],["C",5.057961,16.0869638,5.0575691,15.9127763,5.1461411,15.7785795],["L",8.8415196,10.1796593],["C",8.9155518,10.067492,9.0409649,10,9.1753609,10],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.26,y:.02,name:"NW"},{x:.26,y:.98,name:"SW"},{x:.74,y:.02,name:"NE"},{x:.74,y:.98,name:"SE"}]},{name:"process",width:120,height:60,outline:{name:"rect",x:0,y:0,width:120,height:60,rx:1,ry:1},scene:[],thumb:[{d:[["M",6.4,10.5],["L",25.6,10.5],["C",25.8209139,10.5,26,10.6790861,26,10.9],["L",26,22.1],["C",26,22.3209139,25.8209139,22.5,25.6,22.5],["L",6.4,22.5],["C",6.1790861,22.5,6,22.3209139,6,22.1],["L",6,10.9],["C",6,10.6790861,6.1790861,10.5,6.4,10.5],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"rect",width:100,height:100,outline:{name:"polygon",points:[{x:0,y:0},{x:100,y:0},{x:100,y:100},{x:0,y:100}]},scene:[],thumb:[{d:[["M",8.4,8],["L",23.6,8],["C",23.8209139,8,24,8.1790861,24,8.4],["L",24,23.6],["C",24,23.8209139,23.8209139,24,23.6,24],["L",8.4,24],["C",8.1790861,24,8,23.8209139,8,23.6],["L",8,8.4],["C",8,8.1790861,8.1790861,8,8.4,8],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"rounded-rect",width:100,height:100,outline:{path:function(e,t){var n=e/2,r=t/2,a=n<8?n:8,i=r<8?r:8;return[["M",+a+0,0],["l",e-2*a,0],["a",a,i,0,0,1,a,i],["l",0,t-2*i],["a",a,i,0,0,1,-a,i],["l",2*a-e,0],["a",a,i,0,0,1,-a,-i],["l",0,2*i-t],["a",a,i,0,0,1,a,-i],["z"]]}},scene:[],thumb:[{d:[["M",11,8],["L",21,8],["C",22.6568542,8,24,9.3431458,24,11],["L",24,21],["C",24,22.6568542,22.6568542,24,21,24],["L",11,24],["C",9.3431458,24,8,22.6568542,8,21],["L",8,11],["C",8,9.3431458,9.3431458,8,11,8],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"sort",width:44,height:44,outline:{d:[["M",22.707552999999997,.7084468],["L",43.2664758,21.2933397],["C",43.6564052,21.6837616,43.6564052,22.3162384,43.2664758,22.7066603],["L",22.707552999999997,43.2915532],["C",22.3172753,43.682324,21.6841104,43.6827236,21.293339699999997,43.2924459],["C",21.2930419,43.2921485,21.292744399999997,43.291851,21.292447000000003,43.2915532],["L",.7335241999999997,22.7066603],["C",.3435948,22.3162384,.3435948,21.6837616,.7335241999999997,21.2933397],["L",21.292447000000003,.7084468],["C",21.6827247,.317676,22.3158896,.3172764,22.706660300000003,.7075541],["C",22.7069581,.7078515,22.707255600000003,.708149,22.707552999999997,.7084468],["Z"]]},scene:[{d:[{name:"M",x:.1242938,y:22},{name:"L",x:43.8757062,y:22}]}],thumb:[{d:[["M",16.2830212,7.2833787],["L",24.706338,15.7173359],["C",24.8623098,15.8735046,24.8623098,16.1264954,24.706338,16.2826641],["L",16.2830212,24.7166213],["C",16.1269101,24.8729296,15.8736442,24.8730894,15.7173359,24.7169784],["C",15.7172168,24.7168594,15.7170978,24.7167404,15.7169788,24.7166213],["L",7.293662,16.2826641],["C",7.1376902,16.1264954,7.1376902,15.8735046,7.293662,15.7173359],["L",15.7169788,7.2833787],["C",15.8730899,7.1270704,16.1263558,7.1269106,16.2826641,7.2830216],["C",16.2827832,7.2831406,16.2829022,7.2832596,16.2830212,7.2833787],["Z"],["M",7.3175141,15.7333333],["L",25.2158192,15.7333333]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"star",width:96,height:91,outline:{name:"polygon",points:[{x:48,y:75},{x:18.6107374,y:90.4508497},{x:24.2235871,y:57.7254249},{x:.44717419000000014,y:34.5491503},{x:33.3053687,y:29.7745751},{x:48,y:0},{x:62.6946313,y:29.7745751},{x:95.5528258,y:34.5491503},{x:71.7764129,y:57.7254249},{x:77.3892626,y:90.4508497}]},scene:[],thumb:[{name:"polygon",points:[{x:16,y:21},{x:10.1221475,y:24.0901699},{x:11.2447174,y:17.545085},{x:6.48943484,y:12.9098301},{x:13.0610737,y:11.954915},{x:16,y:6},{x:18.9389263,y:11.954915},{x:25.5105652,y:12.9098301},{x:20.7552826,y:17.545085},{x:21.8778525,y:24.0901699}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"start-end",width:120,height:60,outline:{path:function(e,t){var n=e/2,r=t/2,a=Math.min(n,r);return[["M",+a+0,0],["l",e-2*a,0],["a",a,a,0,0,1,a,a],["l",0,t-2*a],["a",a,a,0,0,1,-a,a],["l",2*a-e,0],["a",a,a,0,0,1,-a,-a],["l",0,2*a-t],["a",a,a,0,0,1,a,-a],["z"]]}},scene:[],thumb:[{d:[["M",11,10],["L",21,10],["C",24.3137085,10,27,12.6862915,27,16],["C",27,19.3137085,24.3137085,22,21,22],["L",11,22],["C",7.6862915,22,5,19.3137085,5,16],["C",5,12.6862915,7.6862915,10,11,10],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.11,y:.11,name:"NW"},{x:.11,y:.89,name:"SW"},{x:.89,y:.11,name:"NE"},{x:.89,y:.89,name:"SE"}]},{name:"stored-data",width:120,height:60,outline:{d:[["M",13.7777709,0],["L",120,0],["C",111.115006,4.7754794,106.672509,14.7754794,106.672509,30],["C",106.672509,44.2961128,111.115006,54.2961128,120,60],["L",13.7777709,60],["C",4.2600422,53.6223342,-.3265282,43.6223342,.0180598,30],["C",.4106176,14.4813071,4.997188,4.4813072,13.7777709,0],["Z"]]},scene:[],thumb:[{d:[["M",7.7592332,10],["L",26.7592332,10],["C",24.3123052,10.9550959,23.0888412,12.9550959,23.0888412,16],["C",23.0888412,18.8592226,24.3123052,20.8592226,26.7592332,22],["L",7.7592332,22],["C",5.853146,20.7244668,4.9346072,18.7244668,5.0036168,16],["C",5.0822332,12.8962614,6.000772,10.8962614,7.7592332,10],["Z"]]}],padding:[0,20,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:.93,y:.5,name:"E"},{x:.1,y:0,name:"NW"},{x:.1,y:1,name:"SW"},{x:.995,y:.01,name:"NE"},{x:.995,y:.99,name:"SE"}]},{name:"subroutine",width:120,height:60,outline:{name:"rect",x:0,y:0,width:120,height:60,rx:1,ry:1},scene:[{d:[{name:"M",x:8,y:-0},{name:"L",x:8,y:60}]},{d:[{name:"M",x:112,y:-0},{name:"L",x:112,y:60}]}],thumb:[{d:[["M",6.4,10],["L",25.6,10],["C",25.8209139,10,26,10.1790861,26,10.4],["L",26,21.6],["C",26,21.8209139,25.8209139,22,25.6,22],["L",6.4,22],["C",6.1790861,22,6,21.8209139,6,21.6],["L",6,10.4],["C",6,10.1790861,6.1790861,10,6.4,10],["Z"],["M",10,10],["L",10,22],["M",22,10],["L",22,22]]}],padding:[0,20,0,20],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:.02,y:.985,name:"SW"},{x:.98,y:.015,name:"NE"},{x:.98,y:.985,name:"SE"}]},{name:"summing-junction",width:44,height:44,outline:{name:"ellipse",cx:22,cy:22,rx:22,ry:22},scene:[{d:[["M",6.44365,6.44365],["l",31.1127,31.1127],["m",-31.1127,0],["l",31.1127,-31.1127]]}],thumb:[{name:"ellipse",cx:16,cy:17,rx:9,ry:9},{d:[["M",9.636,10.636],["l",12.727922,12.727922],["m",0,-12.727922],["l",-12.727922,12.727922]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.145,y:.145,name:"NW"},{x:.145,y:.855,name:"SW"},{x:.855,y:.145,name:"NE"},{x:.855,y:.855,name:"SE"}]},{name:"triangle",width:100,height:87,outline:{name:"polygon",points:[{x:50,y:0},{x:100,y:87},{x:-141931921e-23,y:87}]},scene:[],thumb:[{name:"polygon",points:[{x:16,y:8},{x:25,y:24},{x:7,y:24}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]}];function pl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ml(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pl(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gl=function(e){b()(n,Ec);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),(e=t.call(this,ml({default:{stencils:hl,shape:"process",stroke:{color:"#595959",width:2},fill:{color:"#ffffff"}}},r))).isGeometry=!0,e}return y()(n,[{key:"render",value:function(){B()(O()(n.prototype),"render",this).call(this);var e=this.model;e.width||(e.width=this.width),e.height||(e.height=this.height)}},{key:"getOuterWidth",value:function(){return this.width}}]),n}();c()(gl,"className","Geometry");var yl=Wn,vl=function(e){b()(n,bo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).eventHelper=new ja,r}return y()(n,[{key:"render",value:function(){var e=this.cell.graphicGroup,t=new yl;e.add(t),this.element=t,this.bindEvent()}},{key:"bindEvent",value:function(){var e=this,t=this.eventHelper,n=this.element;t.bind(n,"mouseenter",(function(){e.hover=!0,e.updateState()})),t.bind(n,"mouseleave",(function(){e.hover=!1,e.updateState()}))}},{key:"getClassNames",value:function(){return this.classNames.join(" ")}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=e.width,r=e.height;e.isCacheStale("width","height")&&t.update({d:_n(0,0,n,r),"stroke-width":1,fill:"rgba(0, 0, 0, 0)"})}},{key:"updateState",value:function(){var e=this.cell,t=this.element,n=this.hover,r=e.diagram,a=e.state,i=a.selected,o=a.actived,c=r.signal;return i?t.update({stroke:"rgba(9, 109, 217)"}):o||n&&!c.cellDragStart?t.update({stroke:"rgba(9, 109, 217, 0.4)"}):t.update({stroke:"none"})}},{key:"destroy",value:function(){this.element.destroy(),this.eventHelper.destroy()}}]),n}();var bl=function(e){b()(n,Po);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),r=Object.assign({default:{fill:"rgba(2, 2, 2, 0.3)",x:0,y:0,width:1,height:1}},r),e=t.call(this,r),Object.assign(R()(e),d()(r.default)),e.isGroup=!0,e.Subcells=[vl],e.subcells=e.Subcells.map((function(t){return new t(R()(e))})),e.render(),e}return y()(n,[{key:"render",value:function(){var e=this.model;this.subcells.forEach((function(e){return e.render()})),this.updateModel(e)}},{key:"updateState",value:function(){this.subcells.forEach((function(e){e.updateState()}))}},{key:"_hasEntity",value:function(){var e=!1;return this.deepEach((function(t){if(!t.isGroup)return e=!0,!1})),e}},{key:"_drawInner",value:function(){var e,t,n,r,a=this.graphicGroup,i=this.getChildren();e=1/0,t=1/0,n=-1/0,r=-1/0,this.show(),i.forEach((function(a){var i;i=a.isGroup?a.getBBox():a.getFullBBox(),e=Math.min(e,i.minX),t=Math.min(t,i.minY),n=Math.max(n,i.maxX),r=Math.max(r,i.maxY)}));var o=[1,0,0,0,1,0,e,t,1];this.x=e,this.y=t,this.width=n-e,this.height=r-t,this.matrix=o,this.isCacheStale("x","y","width","height")&&(this.subcells.forEach((function(e){return e.draw()})),a.update({matrix:o})),this.cache.x=e,this.cache.y=t,this.cache.width=n-e,this.cache.height=r-t}},{key:"draw",value:function(){var e=this.diagram.interaction;return this._hasEntity()&&"edit"===e.currentMode?this._drawInner():this.hide()}}]),n}();c()(bl,"className","Group");var xl=hn,kl=Wn,wl=function(){function e(t){m()(this,e),this.diagram=t;var n=new xl;t.frontRootGroup.add(n),Object.assign(this,{style:{stroke:""},tolerance:5,bleed:20,toAlignPoints:[],refLines:[],showLine:!0,preventAlignX:!1,preventAlignY:!1,refLinesGroup:n})}return y()(e,[{key:"_getPointsByBox",value:function(e){var t={x:e.maxX,y:e.minY,weight:0,box:e};return[{x:e.minX,y:e.maxY,weight:0,box:e},t,{x:(e.minX+e.maxX)/2,y:(e.minY+e.maxY)/2,weight:1,box:e}]}},{key:"_getPointsByPoint",value:function(e){return[e]}},{key:"_getPointsByCell",value:function(e){var t=e.getBBox();return this._getPointsByBox(t)}},{key:"drawRefLines",value:function(){var e=this.refLines,t=this.refLinesGroup;t.clear(),e.forEach((function(e){var n=e.x1,r=e.y1,a=e.x2,i=e.y2;t.add(new kl({d:"M".concat(n,",").concat(r," L").concat(a,",").concat(i),stroke:"#FF4E50"}))}))}},{key:"clear",value:function(){this.refLinesGroup.clear()}},{key:"updateToAlginPoints",value:function(e){var t=this,n=this.diagram,r=n.paper,a=n.viewport,i=n.groupManager.getCells().filter((function(t){return!e||e.stem!==t.stem&&"line"!==t.model.type})),o=[];if(i.forEach((function(e){o=o.concat(t._getPointsByCell(e))})),o=o.filter((function(e){return a.isInnerCanvasPoint([e.x,e.y])})),r.visible){var c=r.getBBox();o=o.concat(this._getPointsByBox({minX:c.left,minY:c.top,maxX:c.right,maxY:c.bottom}))}this.toAlignPoints=o}},{key:"alignByPoint",value:function(e){return this._align("Point",e)}},{key:"alignByBox",value:function(e){return this._align("Box",e)}},{key:"_align",value:function(e,t){var n=this,r=this.bleed,a=this.showLine,i=this.toAlignPoints,o=this.diagram,c=this.preventAlignX,l=this.preventAlignY,s={dx:0,dy:0},u=this.tolerance/o.viewport.zoom;if(0===i.length)return s;var d=this["_getPointsBy"+e](t),f=[];return this.refLines=[],d.forEach((function(e){f=f.concat(i.map((function(t){var n=t.x-e.x,r=t.y-e.y;return{from:e,to:t,weight:e.weight+t.weight,dx:n,dy:r,hDis:Math.abs(n),vDis:Math.abs(r)}})))})),c||(f.sort((function(e,t){return e.hDis-t.hDis})),f.filter((function(e){return e.dx===f[0].dx})).forEach((function(e){e.hDis<u&&(s.dx=e.dx,n.refLines.push({x1:e.to.x,x2:e.to.x,y1:Math.min(e.to.box.minY,e.from.box.minY)-r,y2:Math.max(e.to.box.maxY,e.from.box.maxY)+r}))}))),l||(f.sort((function(e,t){return e.vDis-t.vDis})),f.filter((function(e){return e.dy===f[0].dy})).forEach((function(e){e.vDis<u&&(s.dy=e.dy,n.refLines.push({x1:Math.min(e.to.box.minX,e.from.box.minX)-r,x2:Math.max(e.to.box.maxX,e.from.box.maxX)+r,y1:e.to.y,y2:e.to.y}))}))),a&&this.drawRefLines(),s}},{key:"reset",value:function(){this.clear(),this.preventAlignX=!1,this.preventAlignY=!1}},{key:"destroy",value:function(){this.diagram=void 0}}]),e}();c()(wl,"className","Align");var Ol=function(){function e(){m()(this,e),this.colors=[["#000000","#262626","#595959","#8C8C8C","#BFBFBF","#D9D9D9","#E9E9E9","#F5F5F5","#FAFAFA","#FFFFFF"],["#69B1E4","#E482D4","#77C386","#E48484","#A287E1","#DFB85D","#6EC4C4","#C28976","#6F81DB","#B1C774"],["#E6F4FC","#FAEDF6","#E9F7E9","#FCEFED","#EFE8FA","#FCF6E1","#E4F7F5","#F7EDE6","#E8EEFC","#F7FAE6"],["#C4E4F5","#F2D0E8","#CEEBD2","#FBD3D0","#DBCEF5","#F7E9BC","#C0EBE5","#EBD5CA","#C2CDF0","#E5EDCA"],["#91CAED","#EDA6D9","#9DD1A6","#EFACA9","#C0ABEB","#EBD28D","#9AD6D4","#D6AC9A","#91A2E3","#D0E09D"],["#5493C7","#BA5FA6","#579C67","#BD6468","#8169BF","#B88F44","#509FA1","#9C6657","#5461B8","#8CA357"],["#234870","#6B2D62","#244F31","#703039","#392E6E","#6B4C1D","#214D52","#4F2B24","#262A69","#415222"]]}return y()(e,[{key:"_map",value:function(){for(var e={},t=this.colors,n=0,r=t.length;n<r;n++)for(var a=0,i=t[n].length;a<i;a++)e[t[n][a]]={y:n,x:a};return e}},{key:"getStroke",value:function(e){var t=this._map[e];return t&&(2===t.y||3===t.y&&t.x>2&&t.x<5)?this.colors[4][t.x]:e}},{key:"getColors",value:function(){return this.colors}},{key:"destroy",value:function(){this.colors=void 0}}]),e}();function Cl(e,t){var n=[],r={};e.forEach((function(e){Ye(e,(function(e){var a=Object(I.a)();r[e.id]=a,t[a]=t[e.id],e.id=a,"line"!==e.type&&"edge"!==e.type||n.push(e)}))})),n.forEach((function(e){var n=Object(I.a)();t[n]=t[e.id],e.id=n,e.source&&e.source.id&&r[e.source.id]&&(e.source.id=r[e.source.id]),e.target&&e.target.id&&r[e.target.id]&&(e.target.id=r[e.target.id])}))}function El(e){var t=1/0,n=1/0,r=-1/0,a=-1/0;return e.forEach((function(e){var i,o,c,l;if("edge"===e.type){var s=[];e.source&&!e.source.id&&e.source.connection&&s.push(e.source.connection),e.target&&!e.target.id&&e.target.connection&&s.push(e.target.connection);var u=s.map((function(e){return e[0]})),d=s.map((function(e){return e[1]}));i=Math.min.apply(Math,z()(u)),o=Math.min.apply(Math,z()(d)),c=Math.max.apply(Math,z()(u)),l=Math.max.apply(Math,z()(d))}else i=e.x,o=e.y,c=e.x+(e.width||0),l=e.y+(e.height||0);i<t&&(t=i),o<n&&(n=o),c>r&&(r=c),l>a&&(a=l)})),{minX:t,minY:n,maxX:r,maxY:a}}function Pl(e,t,n){if(e&&!e.id){var r=e.connection;e.connection=[r[0]+t,r[1]+n]}}function _l(e,t,n){"edge"===e.type?(Pl(e.source,t,n),Pl(e.target,t,n)):(e.x=(e.x||0)+t,e.y=(e.y||0)+n)}c()(Ol,"className","Palette");var jl=function(e){b()(n,xi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).caches={},r}return y()(n,[{key:"clone",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.diagram,a=this.caches,i=5;e.forEach((function(e){var n=r.find(e.id)?1:0;a[e.id]||(a[e.id]=[]),(t=a[e.id]).forEach((function(){n++})),_l(e,i*n,i*n),t.push(e.id)}));var o=El(e);if(!gt(o,r.viewport.viewportCanvasBox)){var c=r.viewport.getCenter(),l=c[0]-(o.minX+o.maxX)/2,s=c[1]-(o.minY+o.maxY)/2;e.forEach((function(e){_l(e,l,s)}))}return Cl(e,n),e}}]),n}(),Sl=function(){function e(t){m()(this,e),this.diagram=t,this.group=null}return y()(e,[{key:"getStemsByZIndex",value:function(){var e,t=this.diagram,n=this.group;return(e=n?n.getChildren():t.getCells().filter((function(e){return e.isRoot}))).sort((function(e,t){return e.getZIndex()-t.getZIndex()})),e}},{key:"_getGroupCells",value:function(e){var t=[];return e.deepEachWithoutSelf((function(e){if(e.isGroup)return t.push(e),!1;t.push(e)})),t}},{key:"getCells",value:function(){var e=this.diagram,t=this.group;return t?this._getGroupCells(t):e.getCells().filter((function(e){return e.isRoot})).reduce((function(e,t){return t.isStem&&!t.isGroup?t.deepEach((function(t){e.push(t)})):e.push(t),e}),[])}},{key:"enter",value:function(e,t){this.group&&this.exit();var n,r=this.diagram,a=r.getCells(),i=e.getChildren();return i.forEach((function(e){if(e.isStem&&!e.isGroup)e.deepEach((function(e){if(e.isPointInShape(t))return n=e,!1}));else if(e.isPointInShape(t))return n=e,!1})),n?(a.forEach((function(e){i.includes(e.stem)?e.capture(!0):e.capture(!1)})),e.state.actived=!0,this.group=e,r.emit("afteractivedgroupchange"),n):null}},{key:"exit",value:function(){var e=this.group,t=this.diagram;if(e){for(var n=t.getCells(),r=e;r;)r.isGroup&&r.show(),r=r.parent;n.forEach((function(e){return e.capture(!0)})),e.state.actived=!1}this.group=null,t.emit("afteractivedgroupchange")}},{key:"destroy",value:function(){this.destroyed=!0,this.group=null}}]),e}();function Rl(e){var t=e.reduce((function(e,t){var n=t.getBBox(),r=[n.x,n.y],a=[[r[0],r[1]],[r[0]+n.width,r[1]+n.height]];return e.push.apply(e,a),e}),[]),n=t.reduce((function(e,t){return t[0]>e?t[0]:e}),t[0][0]),r=t.reduce((function(e,t){return t[0]<e?t[0]:e}),t[0][0]),a=t.reduce((function(e,t){return t[1]>e?t[1]:e}),t[0][1]);return{minX:r,minY:t.reduce((function(e,t){return t[1]<e?t[1]:e}),t[0][1]),maxX:n,maxY:a}}c()(Sl,"className","GroupManager");var Ml=Wn,Bl=hn,Al=function(){function e(t){m()(this,e),this.diagram=t,this.eventHelper=new ja,this.create()}return y()(e,[{key:"create",value:function(){var e=new Bl,t=new Ml({stroke:"rgba(9, 109, 217, 0.4)","stroke-width":1,fill:"none"});e.css({"pointer-events":"none"}),e.add(t),this.group=e,this.shape=t}},{key:"bind",value:function(){var e=this,t=this.diagram,n=this.eventHelper;n.unbind(),n.bind(t,"afterchange",(function(t){var n=t.action;"update"!==n&&"delete"!==n||e.update()}))}},{key:"begin",value:function(){this.end();var e=this.group;this.diagram.frontRootGroup.add(e),this.update(),this.bind()}},{key:"end",value:function(){this.destroyed||(this.group.remove(),this.eventHelper.unbind())}},{key:"update",value:function(){var e=this.shape,t=this.diagram.selector.selections.filter((function(e){return e.isRoot}));if(t.length>0){var n=Rl(t),r=n.minX,a=n.minY,i=n.maxX,o=n.maxY;e.update({d:_n(r,a,i-r,o-a)})}}},{key:"destroy",value:function(){this.eventHelper.destroy(),this.group.destroy(),this.diagram=void 0,this.group=void 0,this.destroyed=!0}}]),e}();c()(Al,"className","GroupResizer");var Dl=function(){function e(t){m()(this,e),this.diagram=t,this.eventHelper=new ja,this.zoom=-1/0,this.arr=[],this.maxStashes={},this.bindEvent()}return y()(e,[{key:"bindEvent",value:function(){var e=this,t=this.diagram;this.eventHelper.bind(t,"afterviewportchange",se()((function(){t.destroyed||e._update()}),100))}},{key:"setImageHref",value:function(e,t,n,r){this.arr.push({image:e,href:t,naturalWidth:n,naturalHeight:r}),this._setImageHref(e,t,n,r)}},{key:"_setImageHref",value:function(e,t,n,a){var i,o=this.diagram,c=this.maxStashes,l=o.viewport.zoom,s=Number(e.attr("width")),u=e.attr("href"),d=c[t],f=s*l;d&&d.clientWidth>f?i=d.href:(i=r.OssUtil.resizeImage({maxWidth:f,src:t,data:{width:f,originWidth:n,originHeight:a}})||t,c[t]={clientWidth:f,href:i}),u!==i&&e.update({href:i})}},{key:"_gc",value:function(){this.arr=this.arr.filter((function(e){return e&&!e.image.destroyed}))}},{key:"_refreshOssUrl",value:function(){var e=this,t=this.arr,n=this.diagram,r=this.zoom;n.viewport.zoom>r&&(t.forEach((function(t){var n=t.image,r=t.href,a=t.naturalWidth,i=t.naturalHeight;e._setImageHref(n,r,a,i)})),this.zoom=n.viewport.zoom)}},{key:"_update",value:function(){this._gc(),this._refreshOssUrl()}},{key:"destroy",value:function(){this.eventHelper.destroy(),this.diagram=void 0,this.destroyed=!0}}]),e}();c()(Dl,"className","ImageManager");var Nl=Wn,Ll=hn,Il=function(){function e(t){m()(this,e);var n=new Ll;n.css({"pointer-events":"none"}),this.diagram=t,this.group=n,this.arr=[],this.eventHelper=new ja}return y()(e,[{key:"bind",value:function(){var e=this,t=this.diagram,n=this.eventHelper;n.unbind(),n.bind(t,"afterchange",(function(t){var n=t.action;e.arr.length>0&&("update"===n||"delete"===n)&&e.draw()}))}},{key:"show",value:function(){this.group.show()}},{key:"hide",value:function(){this.group.hide()}},{key:"select",value:function(e){e=e.filter((function(e){return!e.isGroup}));var t=this.diagram.viewport.zoom;e=e.filter((function(e){return e.multiSelectHighlight&&e.state.visible})),this.render(e,(function(e){return e.isLine?{type:"outline",shapeStyle:{fill:"none",stroke:"#096DD9","stroke-width":2/t}}:{type:"rect",shapeStyle:{fill:"none",stroke:e.locked?"#979797":"#096DD9","stroke-width":1/t}}}))}},{key:"dock",value:function(e){this.render(e,(function(){return{type:"outline",shapeStyle:{"stroke-width":1,stroke:"#096DD9",fill:"none"},shadowStyle:{"stroke-width":2.5,stroke:"#E6F0FB",fill:"none"}}}))}},{key:"render",value:function(e,t){var n=this.group,r=this.diagram;this.clear(),e&&!e.some((function(e){return!e||!e.isCell}))&&(r.frontRootGroup.add(n),this.bind(),this.arr=e.map((function(e){var r=t(e),a=r.type,i=r.shapeStyle,o=r.shadowStyle,c={cell:e,type:"function"==typeof a?a(e):a,shape:i&&new Nl(i),shadow:o&&new Nl(o)};return c.shadow&&n.add(c.shadow),c.shape&&n.add(c.shape),c})),this.draw())}},{key:"_updateShape",value:function(e){var t=e.cell,n=e.type,r=e.shape,a=e.shadow,i=t.getKeyShape();if(i){var o,c=i.attr("stroke-width"),l=c/2,s=t.graphicGroup.matrix.concat([]),u=i.getBBox();if(o="outline"===n?i.attr("d"):_n(-l,-l,u.width+c,u.height+c),r.update({matrix:s,d:o}),a){var d=parseFloat(a.attr("stroke-width"))+parseFloat(r.attr("stroke-width")),f=u.width+c,h=u.height+c,p=o;t.isLine||(p=ae()(o).scale(1+d/f,1+d/h).translate(-d/2,-d/2).toString()),a.update({matrix:s,d:p})}}}},{key:"_draw",value:function(){var e=this;this.arr.forEach((function(t){e._updateShape(t)}))}},{key:"draw",value:function(){this.arr.length>0&&this._draw()}},{key:"clear",value:function(){this.destroyed||(this.arr=[],this.group.clear(),this.group.remove(),this.eventHelper.unbind())}},{key:"destroy",value:function(){this.eventHelper.destroy(),this.group.destroy(),this.diagram=void 0,this.group=void 0,this.arr=void 0,this.destroyed=!0}}]),e}();c()(Il,"className","Highlight");var Tl=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e;return m()(this,n),(e=t.call(this)).cell,e}return y()(n,[{key:"init",value:function(e){var t=this;this.bind(e,"afterselect",(function(){var n=e.selector.selections;if(t.cell&&(t.cell.endRotateResize(),t.cell=void 0),1===n.length){if(t.cell=n[0],!t.cell.isVertex)return void(t.cell=void 0);t.cell&&t.cell.beginRotateResize()}})),this.bind(e,"cell:dragstart",(function(){t.cell&&(t.cell.endRotateResize(),t.cell=void 0)}))}}]),n}();function zl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zl(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yl=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e;return m()(this,n),e=t.call(this),c()(R()(e),"onMouseDown",(function(t){var n=to(R()(e).diagram,e.getPoint(t));e.source=n})),c()(R()(e),"onMouseMove",(function(t){var n=R()(e),r=n.diagram,a=n.line,i=n.source,o=to(r,e.getPoint(t),i&&r.find(i.id));if(e.cacheEndpointId!==o.id&&(r.highlight.dock([r.find(o.id)]),e.cacheEndpointId=o.id),a){if(o.connection&&!o.id){var c=a.getEndpoint(a.source);Rc([c.x,c.y],o.connection)}r.update(a,{target:o})}else i&&function(e,t){return t.id!==e.id||(t.connection&&e.connection?vt(t.connection[0],t.connection[1],e.connection[0],e.connection[1])>8:void 0)}(i,o)&&e.beginInsertLine({source:i,target:o})})),c()(R()(e),"onMouseUp",(function(){var t=R()(e),n=t.diagram,r=t.line;e.clear(),n.interaction.changeMode("edit"),r&&n.command.execute("Add",{model:Fl(Fl({},r.model),{},{id:null})})})),e.cacheEndpointId=null,e.diagramType="board",e.cellType="line",e}return y()(n,[{key:"getSetting",value:function(){var e=this.diagram,t=this.diagramType;return e.settings[t]}},{key:"getPoint",value:function(e){return this.diagram.viewport.invertClient([e.clientX,e.clientY])}},{key:"beginInsertLine",value:function(e){var t=e.source,n=e.target,r=this.diagram,a=this.cellType,i=r.add(he()({},r.settings.line,{type:a,source:t,target:Fl({},n)}))[0];this.line=i}},{key:"init",value:function(e){var t=this;this.diagram=e,this.bind(e,"begininsertline",(function(e){t.beginInsertLine(e)})),this.bind(e,"mousemove",this.onMouseMove),this.bind(e,"mousedown",this.onMouseDown),this.bind(e,"mouseup",this.onMouseUp),this.bind(window,"keyup",(function(n){"Esc"!==n.key&&"Escape"!==n.key||(t.clear(),e.interaction.changeMode("edit"))}))}},{key:"clear",value:function(){var e=this.line,t=this.diagram;t&&(this.cacheEndpointId&&t.highlight.clear(),this.cacheEndpointId=null,e&&t.remove(e),this.line=null,this.source=null)}},{key:"unbind",value:function(){this.clear(),B()(O()(n.prototype),"unbind",this).call(this)}}]),n}();function Xl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ql(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xl(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vl=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(R()(e),"onMouseMove",(function(t){e.delegation||e.initDelegation();var n=R()(e).delegation,r=e.getPoint(t),a=D()(r,2),i=a[0],o=a[1];n.translate(i,o)})),c()(R()(e),"onClick",(function(t){e.clear();var n=R()(e).diagram,r=n.settings.vertex,a=e.getPoint(t),i=D()(a,2),o=i[0],c=i[1],l=Object(I.a)();n.interaction.changeMode("edit"),n.command.execute("Add",{model:ql(ql({},r),{},{id:l,x:o,y:c})})})),e}return y()(n,[{key:"getPoint",value:function(e){return this.diagram.viewport.invertClient([e.clientX,e.clientY])}},{key:"initDelegation",value:function(){var e=this.diagram,t=e.settings.vertex,n=e.add(ql(ql({},t),{},{x:0,y:0}))[0];this.delegation=e.delegator.create([n]),this.cell=n,n.hide()}},{key:"init",value:function(e){var t=this;this.diagram=e,this.bind(e,"mousemove",this.onMouseMove),this.bind(e,"click",this.onClick),this.bind(window,"keyup",(function(n){"Esc"!==n.key&&"Escape"!==n.key||(t.clear(),e.interaction.changeMode("edit"))})),this.bind(window,"mousedown",(function(n){e.canvas.rendererElement.contains(n.target)||(t.clear(),e.interaction.changeMode("edit"))}))}},{key:"clear",value:function(){var e=this.cell,t=this.delegation,n=this.diagram;e&&!e.destroyed&&n.remove(e.model.id),t&&t.destroy(),this.cell=null,this.delegation=null}},{key:"unbind",value:function(){this.clear(),B()(O()(n.prototype),"unbind",this).call(this)}}]),n}();function Hl(e,t,n){return e.map((function(e){return function(e,t,n){if("group"===e.type)return{};if("line"===e.type){var r={};return e.target&&!e.target.id&&e.target.connection&&(r.target=d()(e.target),r.target.connection[0]+=t,r.target.connection[1]+=n),e.source&&!e.source.id&&e.source.connection&&(r.source=d()(e.source),r.source.connection[0]+=t,r.source.connection[1]+=n),r}return{x:e.x+t,y:e.y+n}}(e,t,n)}))}function Gl(e,t,n){e.forEach((function(e){Ye(e,(function(e){return function(e,t,n){return!!e.type&&("line"===e.type?(e.target&&!e.target.id&&(e.target.connection[0]+=t,e.target.connection[1]+=n),e.source&&!e.source.id&&(e.source.connection[0]+=t,e.source.connection[1]+=n),e.controlPoints&&e.controlPoints.forEach((function(e){e[0]+=t,e[1]+=n}))):"group"!==e.type&&(e.x=e.x+t,e.y=e.y+n),e)}(e,t,n)}))}))}function Zl(e){var t={stems:[],originModels:[]};return e.forEach((function(e){e.deepEach((function(e){if(!e.isStem)return!1;var n=function(e){var t,n=e.model;return e.isLine?t={type:n.type,source:d()(n.source),target:d()(n.target)}:e.isGroup||(t={type:n.type,x:e.x,y:e.y}),t}(e);n&&Object.keys(n).length>0&&(t.stems.push(e),t.originModels.push(n))}))})),t}var Wl=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e;return m()(this,n),(e=t.call(this)).default={selectedCells:void 0,dragClone:void 0,dragCells:void 0,startPoint:void 0,startBox:void 0,originModels:void 0,startClient:void 0,onMouseMoveEvent:void 0,dx:0,dy:0},Object.assign(R()(e),e.default),e}return y()(n,[{key:"reset",value:function(){var e=this.diagram;this.dragCells&&this.dragCells.length>1&&e.highlight.show(),this.onMouseMoveEvent&&this.unbind(this.onMouseMoveEvent),e.signal.cellDragStart=!1,e.align.clear(),Object.assign(this,this.default)}},{key:"initDragData",value:function(){var e=this.diagram;if(!e.contentEditor.isBegin){var t,n=e.selector.selections.filter((function(e){return!e.locked&&e})),r=n[0];if(1!==n.length||r.isLine||e.align.updateToAlginPoints(r),e.signal.keydown.Alt){var a=n.map((function(e){return d()(e.model)}));t=e.add(e.importer.clone(a)),this.dragClone=!0,this.dragCloneModels=a}else t=n;1!==t.length||r.isLine||(this.startBox=r.getBBox(),t=t.filter((function(e){return!e.isLine||["source","target"].every((function(t){return!e[t].id}))})));var i=Zl(t),o=i.stems,c=i.originModels;this.selectedCells=t,this.dragCells=o,this.originModels=c}}},{key:"init",value:function(){var e=this,t=this.diagram,n=function(){return Hl(e.originModels,e.dx,e.dy)},r=oe()((function(r){if(t.signal.cellDragStart){var a=t.viewport.invertClient([r.clientX,r.clientY]);if(e.dx=a[0]-e.startPoint[0],e.dy=a[1]-e.startPoint[1],e.startBox){var i={minX:e.startBox.minX+e.dx,maxX:e.startBox.maxX+e.dx,minY:e.startBox.minY+e.dy,maxY:e.startBox.maxY+e.dy},o=t.align.alignByBox(i);e.dx+=o.dx,e.dy+=o.dy}var c=n();t.update(e.dragCells,c)}else{if(vt(e.startClient[0],e.startClient[1],r.clientX,r.clientY)<8)return;if(e.initDragData(),!e.dragCells)return;t.signal.cellDragStart=!0,t.emit("cell:dragstart"),e.dragCells.length>1&&t.highlight.hide(),1===e.dragCells.length&&t.contentEditor&&(t.contentEditor.unbind(),t.focus())}}),16),a=function(){var a,i=e.selectedCells,o=e.originModels,c=e.dragCloneModels,l=[],s=function(){var e=i.map((function(e){return e.model.id})).map((function(e){return t.find(e)})).filter((function(e){return e}));t.selector.select(e)};e.dragClone?(t.remove(i),Gl(c,e.dx,e.dy),l.push("Add",{model:c,select:s})):l.push("Update",{id:e.dragCells.map((function(e){return e.model.id})),model:n(),select:s,originModels:o}),t.emit("cell:dragend",{cells:e.dragCells}),r.cancel(),e.reset(),(a=t.command).execute.apply(a,l)},i=function(){r.cancel(),e.reset()};this.bind(t,"mousedown",(function(n){var a=n.target,i=n.clientX,o=n.clientY,c=n.button,l=t.getCell(a);0===c&&l&&!l.locked&&l.isStem&&(e.startClient=[i,o],e.startPoint=t.viewport.invertClient([i,o]),e.onMouseMoveEvent=e.bind(t,"mousemove",r))})),this.bind(t,"mouseup",(function(){e.dragCells&&e.dragCells[0]&&t.signal.cellDragStart?a():i()})),this.bind(t,"mouseleave",(function(){e.dragCells&&e.dragCells[0]&&t.signal.cellDragStart?a():i()}))}}]),n}();function Kl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ul(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kl(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ql=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e;return m()(this,n),e=t.call(this),c()(R()(e),"updateLine",(function(t){var n=R()(e),r=n.diagram,a=n.line,i=n.origin,o=n.sourceCell,c=r.viewport.invertClient([t.clientX,t.clientY]);if(i&&!a&&o&&vt(i[0],i[1],c[0],c[1])>8){var l=r.add(e.initLine(c))[0];l.graphicGroup.css({cursor:"crosshair"}),r.setCursor("crosshair"),e.line=l,e.clearButton()}else if(a){var s=to(r,c,o);if(e.cacheEndpointId!==s.id&&(r.highlight.dock([r.find(s.id)]),e.cacheEndpointId=s.id),!s.id){var u=o.getPoint([.5,.5]);Rc([u.x,u.y],s.connection)}r.update(a,he()({},r.settings.line,{target:s}))}})),c()(R()(e),"commitLine",(function(t){var n=R()(e),r=n.line,a=n.diagram,i=n.origin,o=n.sourceCell;if(r||i){var c;if(r)c=r.model,a.remove(r);else if(i){e.updateCurrentDirection(t);var l=e.getTargetConnection(e.currentDirection);c=e.initLine(l)}var s=Object(I.a)();a.command.execute("Add",{model:Ul(Ul({},c),{},{id:s})}),e.clear(),null==c.target.id&&requestAnimationFrame((function(){a.emit("vertexcell:prompt",{line:a.find(s),sourceCell:o})}))}})),c()(R()(e),"revertLine",(function(t){var n=R()(e),r=n.line,a=n.diagram;r&&("Esc"!==t.key&&"Escape"!==t.key||(a.remove(r),e.clear()))})),e.cacheEndpointId=null,e}return y()(n,[{key:"_initHoverButtonDefs",value:function(){var e=this.diagram.defs,t=Object(I.a)(),n=new Wn({id:t,fill:"rgba(9, 109, 217, .6)",stroke:"rgba(0,0,0,0)","stroke-width":5,d:Rn(7.635,7.635,6)});e.add(n),this.hoverButtonDefId=t,this.hoverButtonDef=n}},{key:"_initButtonDefs",value:function(){var e=this.diagram.defs,t=Object(I.a)(),n=new Wn({id:t,fill:"rgba(9, 109, 217, .4)",stroke:"rgba(0,0,0,0)","stroke-width":5,d:Rn(7.635,7.635,3)});e.add(n),this.buttonDefId=t,this.buttonDef=n}},{key:"_initDefs",value:function(){this._initHoverButtonDefs(),this._initButtonDefs()}},{key:"_initButton",value:function(){var e=this,t=this.buttonDefId,n=this.hoverButtonDefId,r=this.diagram,a=new hn,i={};["N","E","S","W"].forEach((function(o,c){var l=new hn,s=[1,0,0,0,1,0,0,0,1];ce.a.translate(s,s,[7.635,7.635,1]),ce.a.rotate(s,s,Math.PI/2*(c-1)),ce.a.translate(s,s,[-7.635,-7.635,1]);var u=new ur({width:15.27,height:15.27,href:"#".concat(t),matrix:s}),d=new Wn({fill:"rgba(0,0,0,0)",d:_n(0,0,15.27,15.27)});l.add(u),l.add(d),u.css("pointer-events","none"),d.dataset({testid:"add_line_button_".concat(o)}),d.on("mousedown",(function(n){var a=r.viewport.invertClient([n.clientX,n.clientY]),i=D()(a,2),c=i[0],l=i[1];e.origin=[c,l],u.update({href:"#".concat(t)}),e.updateCurrentDirection(o)})),d.on("mouseenter",(function(){u.update({href:"#".concat(n)})})),d.on("mouseleave",(function(){u.update({href:"#".concat(t)})})),a.add(l),i[o]=l})),a.css({cursor:"copy"}),a.dataset({lake_prevent_click_unselect:!0,testid:"add_line_button_group"}),this.buttonMap=i,this.buttonGroup=a}},{key:"updateButton",value:function(){var e=this.diagram,t=this.sourceCell,n=this.buttonGroup,r=this.buttonMap;if(t){var a=e.viewport,i=e.frontRootGroup,o=a.zoom,c=t.getKeyShape().getBBox(),l=c.width,s=c.height,u=1/o,d=0,f=0;i.add(n),Object.keys(r).forEach((function(e){var n=r[e],a=[1,0,0,0,1,0,0,0,1];switch(ce.a.scale(a,a,[u,u]),e){case"N":d=l/2/u-7.635,f=-23.27;break;case"E":d=l/u+8,f=s/2/u-7.635;break;case"S":d=l/2/u-7.635,f=s/u+8;break;case"W":d=-23.27,f=s/2/u-7.635}ce.a.translate(a,a,[d,f,1]),ce.a.mul(a,t.matrix,a),n.update({matrix:a})}))}}},{key:"clearButton",value:function(){var e=this.showButtonGroup;e&&(e.remove(),this.showButtonGroup=null)}},{key:"initLine",value:function(e){var t=this.sourceCell,n=this.currentDirection;return{type:"line",source:{id:t.model.id,connection:n},target:{connection:e}}}},{key:"getTargetConnection",value:function(e){var t=this.sourceCell.getPoint(e),n=t.x,r=t.y;switch(e){case"N":return[n,r-50];case"E":return[n+50,r];case"S":return[n,r+50];case"W":return[n-50,r];default:throw new Error("unexpected direction ".concat(e))}}},{key:"updateCurrentDirection",value:function(e){var t=this.diagram;if("string"==typeof e)this.currentDirection=e;else{var n=t.viewport.invertClient([e.clientX,e.clientY]),r=D()(n,2),a=r[0],i=r[1],o=this.sourceCell.getPoint([.5,.5]);vt(o.x,o.y,n[0],n[1])>16&&(this.currentDirection=Sc(o,{x:a,y:i}))}}},{key:"updateBoundingRect",value:function(e){var t=e.graphicGroup.getBoundingClientRect(),n=t.x,r=t.y,a=r-15.27-8,i=n+t.width+15.27+8,o=r+t.height+15.27+8,c=n-15.27-8;this.boundingRect={top:a,right:i,bottom:o,left:c}}},{key:"update",value:function(e){e&&(this.sourceCell=e,this.showButtonGroup=this.buttonGroup,this.updateBoundingRect(e),this.updateButton())}},{key:"clear",value:function(){this.clearButton(),this.sourceCell=null,this.boundingRect=null,this.origin=null,this.line=null,this.draggingCell=!1;var e=this.diagram;e.resetCursor(),this.cacheEndpointId&&e.highlight.clear(),this.cacheEndpointId=null}},{key:"init",value:function(e){var t=this,n=e.selector;this._initDefs(),this._initButton(),this.bind(e,"afterselect",(function(){var r=n.selections,a=r[0];1!==r.length||a.isLine||!a.canUseAddLineButton()||t.line||e.signal.cellDragStart?t.clear():t.update(a)})),this.bind(e,"vertexcell:update",(function(e){e.cell===t.sourceCell&&t.updateButton()})),this.bind(e,"vertexcell:remove",(function(e){var n=e.id,r=t.sourceCell;r&&r.model.id===n&&t.clear()})),this.bind(e,"cell:dragstart",(function(){t.clear()})),this.bind(e,"mousemove",oe()((function(e){t.origin&&t.updateLine(e)}),16)),this.bind(e,"mouseup",this.commitLine),this.bind(e,"keydown",this.revertLine)}},{key:"reset",value:function(){this.hoverButtonDef&&this.hoverButtonDef.destroy(),this.buttonDef&&this.buttonDef.destroy()}}]),n}();function Jl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jl(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var es=function(e){b()(n,hn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;m()(this,n);var a=$l({width:32,height:32},e),i=a.width,o=a.height,c=a.noFill,l=e.matrix||[1,0,0,0,1,0,0,0,1];i>0&&(l[0]=i/32),o>0&&(l[4]=o/32),r=t.call(this,$l($l({},e),{},{matrix:l}));var s=e.stencil,u=e.title,d=s.name,f=s.thumb,h=new ar({x:0,y:0,width:i,height:o,rx:2,fill:c?"none":"#ffffff",stroke:"none"});return r.add(new hr({title:u})),r.add(h),f.forEach((function(e){r.add(hc(e))})),R()(r).rendererElement.setAttribute("data-name",d),r.css({cursor:"pointer"}),r}return y()(n)}();var ts=function(e){b()(n,hn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;m()(this,n),r=t.call(this,e);var a=e.key,i=e.title,o=e.shapes,c=8,l=8;if(i){var s=new gr({text:i,matrix:[1,0,0,0,1,0,12,28,1],fill:"#262626"});r.add(s),l+=32}return o.forEach((function(e){var t=e.name,n=e.title,a=hl.find((function(e){return e.name===t}));c>=200&&(c=8,l+=32);var i=new es({stencil:a,matrix:[1,0,0,0,1,0,c,l,1],stroke:"#595959",fill:"#ffffff",title:n});r.add(i),c+=32})),r.rendererElement.setAttribute("data-group",a),r}return y()(n)}();function ns(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ns(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ns(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var as=[{name:"rect",title:Qt("矩形")},{name:"rounded-rect",title:Qt("圆角矩形")},{name:"circle",title:Qt("圆形")},{name:"triangle",title:Qt("三角形")},{name:"diamond",title:Qt("菱形")},{name:"comment-2",title:Qt("标注 2")},{name:"parallelogram",title:Qt("平行四边形")},{name:"star",title:Qt("星形")},{name:"arrow-1",title:Qt("左箭头")},{name:"arrow-2",title:Qt("右箭头")},{name:"arrow-3",title:Qt("双向箭头")},{name:"polygon",title:Qt("五边形")}],is=[{name:"process",title:Qt("过程")},{name:"start-end",title:Qt("起止符")},{name:"decision",title:Qt("决策")},{name:"collate",title:Qt("整理")},{name:"data",title:Qt("数据")},{name:"database",title:Qt("数据库")},{name:"delay",title:Qt("延迟")},{name:"display",title:Qt("显示")},{name:"document",title:Qt("文档")},{name:"internal-storage",title:Qt("内部存储")},{name:"loop-limit",title:Qt("循环起止符")},{name:"manual-input",title:Qt("手动输入")},{name:"manual-loop",title:Qt("手动循环")},{name:"merge",title:Qt("合并")},{name:"multi-document",title:Qt("多文档")},{name:"off-page",title:Qt("页外连接符")},{name:"connector",title:Qt("连接器")},{name:"summing-junction",title:Qt("汇总连接")},{name:"subroutine",title:Qt("预定义流程")},{name:"preparation",title:Qt("准备")},{name:"sort",title:Qt("排序")},{name:"stored-data",title:Qt("存储数据")},{name:"or",title:Qt("或者")},{name:"comment",title:Qt("标注")}],os={basic:{title:Qt("基础图形"),shapes:as,height:100},flowchart:{title:Qt("流程图图形"),shapes:is,height:178}},cs=function(e){b()(n,hn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;m()(this,n),e=rs({groups:["basic"]},e),r=t.call(this,e);var a,i=0,o=e.groups,c=o.map((function(e){var t=os[e],n=o.length>1,r=i;return i+=n?t.height:t.height-34,new ts(rs(rs({},t),{},{key:e,title:n?t.title:"",matrix:[1,0,0,0,1,0,0,r,1]}))}));return[new ar({x:0,y:0,width:208,height:i,rx:4,stroke:"#e9e9e9",fill:"#ffffff"})].concat(c).forEach((function(e){return r.add(e)})),r.height=i,r.on("mouseover",oe()((function(e){for(var t=e.target.closest("[data-name]"),n=r.rendererElement.querySelectorAll("[data-name]"),a=0;a<n.length;a++){var i=n[a],o=i.querySelector("path");o&&o.setAttribute("fill",i===t?"#f5f5f5":"#ffffff")}}),16)),r.on("mouseleave",oe()((function(){if(a){var e=a.querySelector("path");e&&e.setAttribute("fill","#ffffff")}}),16)),r.on("click",(function(e){var t=e.target.closest("[data-name]");t&&(r.emit("shape:select",{shape:t.dataset.name,group:t.closest("[data-group]").dataset.group,type:"geometry"}),a=t)})),r}return y()(n)}(),ls='<div style="text-align:center;">&nbsp;</div>';function ss(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function us(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ss(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ss(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ds=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"createPanel",value:function(){var e=this.diagram,t=e.frontRootGroup,n=e.defs,r=new cs({groups:["basic","flowchart"]}),a=Object(I.a)(),i=new Rr,o=new Ar({dx:0,dy:0,stdDeviation:4,"flood-color":"rgba(0, 0, 0, 0.08)"});return i.attr({id:a}),i.add(o),n.add(i),r.css({filter:"url(#".concat(a,")")}),r.css({visibility:"hidden"}),t.add(r),r}},{key:"initPanel",value:function(){var e=this;this.panel=this.createPanel(),this.panel.on("shape:select",(function(t){var n=t.shape,r=t.type,a=e.diagram,i=e.line,o=i.target.connection,c=e.computeInheritedStyles(n),l=e.adjustVertexPosition(o,n,c.stroke),s=D()(l,2),u=s[0],d=s[1];a.command.execute("AddVertex",{model:us({type:r,shape:n,x:u,y:d,html:ls},c),lineId:i.model.id}),e.closePanel()}))}},{key:"computeInheritedStyles",value:function(e){var t=this.sourceCell,n=t.width,r=t.height,a={stroke:t.stroke,fill:t.fill};return t.shape===e&&Object.assign(a,{width:n,height:r}),a}},{key:"closePanel",value:function(){var e=this.diagram;this.panel.css({visibility:"hidden"}),e.signal.addVertexPanelVisibility=!1,this.direction=null,this.line=null,this.sourceCell=null}},{key:"adjustPanelPosition",value:function(e){var t=this.diagram,n=this.direction,r=this.panel,a=t.viewportContainer.getBoundingClientRect(),i=r.getBBox(),o=t.viewport.invertViewport([a.width-i.width-8,a.height-i.height-8]),c=Math.min(e[0]+8,o[0]),l=Math.min(e[1]+8,o[1]);return"N"===n?c<e[0]+8&&(c=e[0]-8-i.width):"E"===n?c<e[0]+8&&l<e[1]+8&&(l=e[1]-8-i.height):"S"===n?c<e[0]+8&&l<e[1]+8&&(c=e[0]-8-i.width):"W"===n&&l<e[1]+8&&(l=e[1]-8-i.height),[c,l]}},{key:"adjustVertexPosition",value:function(e,t,n){var r,a,i=this.direction,o=this.sourceCell,c=hl.find((function(e){return e.name===t})),l=D()(e,2),s=l[0],u=l[1],d=(n.width||2)/2;switch(t===o.shape?(r=o.width,a=o.height):(r=c.width,a=c.height),i){case"N":s-=r/2,u-=a+d;break;case"E":s+=d,u-=a/2;break;case"S":u+=d,s-=r/2;break;case"W":s-=r+d,u-=a/2}return[s,u]}},{key:"getDirection",value:function(e){var t=Cn(e.d).slice(-2),n=t[0].slice(1),r=t[1].slice(1);return Sc({x:n[0],y:n[1]},{x:r[0],y:r[1]})}},{key:"updatePanel",value:function(e){var t=this.diagram;this.panel||this.initPanel();var n=this.panel,r=e.line,a=e.sourceCell;this.line=r,this.sourceCell=a,this.direction=this.getDirection(r);var i=r.target.connection,o=this.adjustPanelPosition(i),c=D()(o,2),l=c[0],s=c[1];n.update({matrix:[1,0,0,0,1,0,l,s,1]}),n.css({visibility:""}),t.signal.addVertexPanelVisibility=!0}},{key:"init",value:function(e){var t=this;this.diagram=e,this.line=null,this.sourceCell=null,this.direction=null,this.bind(e,"vertexcell:prompt",(function(e){return t.updatePanel(e)})),this.bind(e,"mousedown",(function(e){var n=t.panel;n&&!n.rendererElement.contains(e.target)&&t.closePanel()})),this.bind(e,"keyup",(function(e){!t.panel||"Esc"!==e.key&&"Escape"!==e.key||t.closePanel()}))}}]),n}();function fs(e){var t=function(e){var t=e.type.split("/");return t[t.length-1]}(e);return r.EXTS.IMAGE_EXT.includes(t)}var hs=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"dragover",(function(e){e.preventDefault()})),this.bind(e,"drop",(function(t){t.preventDefault();var n=Array.from(t.dataTransfer.files).filter((function(e){return fs(e)}));n[0]&&e.emit("importimage",{files:n,from:"drop"})}))}}]),n}();var ps=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(){this._initEvent()}},{key:"_initEvent",value:function(){var e=this.diagram;this.bind(e,"dblclick",(function(t){var n=e.viewport.invertClient([t.clientX,t.clientY,1]),r=e.getCell(t.target);if(r&&r.isGroup){var a=e.groupManager.enter(r,{x:n[0],y:n[1]});a&&e.selector.select(a)}})),this.bind(e,"afterselect",(function(t){e.groupManager.group&&0===t.selections.length&&e.groupManager.exit()}))}}]),n}();var ms=Wn,gs=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"unbindMousemoveEvent",value:function(){this.mouseMoveEvent&&(this.unbind(this.mouseMoveEvent),this.mouseMoveEvent=void 0)}},{key:"init",value:function(e){var t,n,r,a=this;e.signal.mouseMultiSelecting=!1;var i=new ms({fill:"rgba(9, 109, 217, .05)",stroke:"#096DD9"});function o(a){if(t){e.signal.mouseMultiSelecting=!0,n=e.viewport.invertClient([a.clientX,a.clientY]);var o={minX:Math.min(t[0],n[0]),minY:Math.min(t[1],n[1]),width:Math.abs(n[0]-t[0]),height:Math.abs(n[1]-t[1])},c=_n(o.minX,o.minY,o.width,o.height);o.maxX=o.minX+o.width,o.maxY=o.minY+o.height,i.update({d:c}),tt(r=e.groupManager.getCells().filter((function(e){if(e.state.visible&&e.state.capture){var t=e.getKeyShapeBox();if(gt(t,o)){if(e.isLine){var n=e.d;if(!mt(o,t)&&0===me()(c,n).length)return!1}return!0}}return!1})),e.selector.selections)||e.selector.select(r)}}i.dataset({testid:"mouse-drag-multi-select"}),this.selectBox=i,this.bind(e,"mousedown",(function(n){(function(t){if(t.target===e.canvas.rendererElement)return!0;var n=e.getCell(t.target);return!(!n||!n.locked)})(n)&&(a.unbindMousemoveEvent(),a.mouseMoveEvent=a.bind(window,"mousemove",oe()(o,16)),e.frontRootGroup.add(i),t=e.viewport.invertClient([n.clientX,n.clientY]))})),this.bind(window,"mouseup",(function(){t&&e.tryFocus(),e.signal.mouseMultiSelecting=!1,r&&e.selector.select(r),r=void 0,t=void 0,n=void 0,a.unbindMousemoveEvent(),i.remove(),i.update({d:""})}))}},{key:"unbind",value:function(e){!e&&this.selectBox&&(this.selectBox.remove(),this.selectBox=void 0),B()(O()(n.prototype),"unbind",this).call(this,e)}}]),n}();var ys=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"mouseenter",(function(){e.signal.mouseenter=!0})),this.bind(e,"mouseleave",(function(){e.signal.mouseenter=!1}))}}]),n}();var vs=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"updateControlPoints",value:function(e){var t=this.beforeData,n=this.afterData;e.forEach((function(e){var r=e.model,a=r.controlPoints,i=[0,0];["source","target"].forEach((function(e){var a=r[e]&&r[e].id||"".concat(r.id,"-").concat(e);if(a){var o=t[a],c=n[a];if(i&&o&&c){var l=ce.b.sub([],c.slice(0,2),o.slice(0,2));i=tt(l,[0,0])?null:ce.b.add(i,i,l)}}})),i&&!tt(i,[0,0])&&(i=i.map((function(e){return e/2})),e.update({controlPoints:a.map((function(e){return[e[0]+i[0],e[1]+i[1],e[2]]}))}))}))}},{key:"getData",value:function(e){var t={},n=this.diagram;return e.forEach((function(e){var r=e.model;["source","target"].forEach((function(e){var a=r[e]&&r[e].id;if(a){var i=n.find(a),o=i.getRelativePoint({x:.5,y:.5});t[i.model.id]=[o.x,o.y]}else r[e].connection&&(t["".concat(r.id,"-").concat(e)]=r[e].connection)}))})),t}},{key:"getLines",value:function(){return this.diagram.getCells().filter((function(e){return e.isLine})).filter((function(e){return e.isDrawable()&&e.model.controlPoints}))}},{key:"onBeforeChange",value:function(){var e=this.getLines();this.beforeData=this.getData(e)}},{key:"onAfterChange",value:function(){var e=this.getLines();this.afterData=this.getData(e),this.updateControlPoints(e)}},{key:"reset",value:function(){this.beforeData={},this.afterData={}}},{key:"init",value:function(){var e=this.diagram;this.reset(),this.bind(e,"beforechange",this.onBeforeChange.bind(this)),this.bind(e,"afterchange",this.onAfterChange.bind(this))}}]),n}();var bs=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"afterchange",(function(t){if(t){var n=t.models,r=t.action;"remove"===r?function(e,t){t.forEach((function(t){e.emit("vertexcell:remove",{id:t.id})}))}(e,n):"update"===r&&function(e,t){for(var n={},r=function(r){var a=t[r],i=e.find(a.id),o=["x","y","width","height","shape","rotate"];i.isText&&o.push("html"),i.isVertex&&o.some((function(e){return null!=a[e]}))&&(n[a.id]=!0,i.state.selected&&i.rotateResize.update(),e.emit("vertexcell:update",{cell:i}))},a=0;a<t.length;a++)r(a)}(e,n)}}))}}]),n}();var xs=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(){this._initParam(),this._initEvent()}},{key:"_initParam",value:function(){this.groups=[]}},{key:"_calculateGroups",value:function(e,t){var n=[];e.concat(t).forEach((function(e){for(var t=e.parent;t&&!n.includes(t);)t.isGroup&&n.push(t),t=t.parent})),this.groups=n.sort((function(e,t){return t.depth-e.depth}))}},{key:"_draw",value:function(){var e=this.groups,t=this.diagram,n=this.action,r=t.rootGroup;e.forEach((function(e){if("add"===n){var t=e.getAllChildren(),a=t.length;if(a>0){t.sort((function(e,t){return e.getZIndex()-t.getZIndex()}));var i=t[a-1];r.insertBefore(e.graphicGroup,i.graphicGroup),r.insertBefore(i.graphicGroup,e.graphicGroup)}}e.draw()}))}},{key:"_initEvent",value:function(){var e=this.diagram;this.bind(e,"beforechange",this._onBeforeChange.bind(this)),this.bind(e,"afterchange",this._onAfterChange.bind(this))}},{key:"_onBeforeChange",value:function(e){var t=e.stems,n=e.relatedLines,r=e.action;this.destroyed||"remove"===r&&this._calculateGroups(t,n)}},{key:"_onAfterChange",value:function(e){var t=e.stems,n=e.relatedLines,r=e.action;this.destroyed||("update"!==r&&"add"!==r||this._calculateGroups(t,n),this.action=r,this._draw(),this._initParam())}}]),n}();var ks={default:{insertParagraphKey:function(e){return 13===e.which},cancelKey:function(e){return 27===e.which}}},ws=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){var t=e.contentEditor;function n(){if(!e.signal.mouseMultiSelecting){var n=e.selector.selections,r=n[0];if(1===n.length&&r&&r.textAreaElement){var a=r.textAreaElement;if(e.destroyed)return;var i=a.htmlContainer;if(t.dom&&t.dom!==i&&t.unbind(),!t.dom&&e.viewportContainer.contains(i)){var o=ks[r.type]||ks.default;t.bind(i,o)}t.isBegin||t.prepareEdit()}else t.unbind(),e.focus()}}var r=se()(n,32);this.bind(e,"afterselect",(function(){e.signal.beforePasteSelect?r():n()})),this.bind(e,"mousedown",(function(t){var n=e.getCell(t.target);n&&n.textAreaElement&&!n.textAreaElement.htmlContainer.contains(t.target)&&t.preventDefault()})),this.bind(e,"dblclick",(function(n){var r=n.target,a=e.getCell(r);a&&a.state.selected&&a.textAreaElement&&!e.contentEditor.isBegin&&(e.selector.selections.length>1&&e.selector.select([a]),t.prepareEdit(),t.beginEdit(),e.update(a,{}))})),this.bind(e,"click",(function(t){var n=e.getCell(t.target);n&&n.textAreaElement&&n.textAreaElement.htmlContainer.contains(t.target)&&"A"===t.target.tagName&&t.preventDefault()}))}}],[{key:"registerContentEditorOptions",value:function(e,t){ks[e]=t}}]),n}();var Os=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){var t;this.bind(e,"afteractivedgroupchange",(function(){t&&(t.updateState(),t=null);var n=e.groupManager.group;n&&(n.updateState(),t=n)}))}}]),n}();var Cs=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"afterselect",(function(){var t=e.selector.selections.filter((function(e){return e.isRoot}));t.length>1?(e.highlight.select(t.concat([])),e.groupResizer.begin()):(e.highlight.clear(),e.groupResizer.end())}))}}]),n}();var Es=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){!Ci(t)&&["Backspace","Delete"].includes(t.key)&&(t.preventDefault(),e.command.execute("Delete"),e.tryFocus())}))}}]),n}();var Ps=[],_s=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(){this._initParam(),this._initEvent()}},{key:"_initParam",value:function(){this.originModels=null,this.stems=null,this.dx=0,this.dy=0}},{key:"executeCommand",value:function(){var e=this.diagram,t=this.stems,n=this.dx,r=this.dy,a=this.originModels,i=this.selectionIds;!e.destroyed&&a&&(e.command.execute("Update",{id:t,model:Hl(t,n,r),originModels:a,select:function(){e.selector.select(i)}}),this._initParam())}},{key:"_initEvent",value:function(){var e=this,t=this.diagram;this.bind(t,"keydown",(function(n){var r,a=t.selector.selections,i=a.filter((function(e){return Ps.every((function(t){return t(e)}))})),o=0,c=0;if(!(i.length<=0)){switch(e.selectionIds=a.map((function(e){return e.model.id})),r=n.shiftKey?10:1,n.key){case"Left":case"ArrowLeft":o=-r;break;case"Right":case"ArrowRight":o=r;break;case"Up":case"ArrowUp":c=-r;break;case"Down":case"ArrowDown":c=r;break;default:return}if(0!==o||0!==c){var l=Zl(i),s=l.stems,u=l.originModels;n.preventDefault(),t.update(s,Hl(s,o,c)),e.stems=s,e.originModels=u}}})),this.bind(t,"keyup",se()((function(){e.executeCommand()}),400))}}],[{key:"filterCell",value:function(e){Ps.push(e)}}]),n}();var js=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){var t=this;this.bind(e,"keydown",(function(n){if(Ci(n)&&"l"===n.key){var r=e.selector.selections;if(t.cell=r[0],2===r.length&&r.every((function(e){return!e.isLine&&!e.isGroup})))return e.command.execute("Add",{model:{type:"line",shape:null,source:{id:r[0].model.id},target:{id:r[1].model.id,marker:"arrow"}}});e.command.execute("BeginInsertLine",{shape:null,marker:"arrow"})}}))}}]),n}();var Ss=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){0!==e.selector.selections.length||"t"!==t.key||Ci(t)||(t.preventDefault(),e.command.execute("BeginInsertText"))}))}}]),n}();var Rs=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){0!==e.selector.selections.length||"s"!==t.key||Ci(t)||(t.preventDefault(),e.command.execute("BeginInsertGeometry"))}))}}]),n}();var Ms=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){e.selector.selections.some((function(e){return e.textAreaElement}))&&Ci(t)&&("b"===t.key?(t.preventDefault(),e.command.execute("ContentCommand",{name:"bold"})):"i"===t.key?e.command.execute("ContentCommand",{name:"italic"}):"k"===t.key?e.command.execute("CreateLink"):"u"===t.key?e.command.execute("ContentCommand",{name:"underline"}):t.shiftKey&&"x"===t.key&&e.command.execute("ContentCommand",{name:"strikethrough"}))}))}}]),n}();var Bs=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){var n=e.selector,r=e.viewport;if(n.selections.length>0&&"d"===t.key&&Ci(t)){t.preventDefault();var a=r.getFocus();aa("copy",e),aa("paste",e,a,!1)}}))}}]),n}();var As=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){"g"===t.key&&Ci(t)&&!t.shiftKey?(t.preventDefault(),e.command.execute("Group")):("g"===t.key||"G"===t.key)&&Ci(t)&&t.shiftKey&&(t.preventDefault(),e.command.execute("UnGroup"))}))}}]),n}();var Ds=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){var n=e.selector;e.groupManager.group&&"Escape"===t.key&&!Ci(t)&&(t.preventDefault(),n.clear())}))}}]),n}();var Ns=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"beforecommandexecute",(function(t){var n=t.commandName,r=t.command;if("Add"===n&&"line"===r.model.type){var a={};he()(a,e.settings.line,r.model),r.model=a}})),this.bind(e,"aftercommandexecute",(function(t){var n=t.command;if("Update"===t.commandName&&1===(null==n?void 0:n.id.length)&&n.id[0].isLine){var r,a,i=n.id[0];e.settings.line={shape:i.shape,stroke:i.stroke,target:{marker:null==i||null===(r=i.target)||void 0===r?void 0:r.marker},source:{marker:null==i||null===(a=i.source)||void 0===a?void 0:a.marker}}}}))}}]),n}(),Ls=function(){function e(t){m()(this,e),this.diagram=t}return y()(e,[{key:"reset",value:function(){this.diagram.update(this.lineCache.map((function(e){return e.id})),this.lineCache)}},{key:"pin",value:function(){var e=this.diagram;this.lineCache.map((function(t){return e.find(t.id)})).filter((function(e){return e})).forEach((function(e){var t=e.source,n=e.target,r=e.diagram,a=Cn(e.wireElement.attr("d")),i={};if(r.find(t.id)||(i.source={id:null,connection:[a[0][1],a[0][2]]}),!r.find(n.id)){var o=a.length-1,c=a[o].length;i.target={id:null,connection:[a[o][c-2],a[o][c-1]]}}e.update(i)}))}},{key:"cache",value:function(e){var t=this.diagram,n=e.reduce((function(e,t){return t.getAllCells().forEach((function(t){e[t.model.id]=!0})),e}),{});this.lineCache=t.getCells().filter((function(e){return e.isLine&&(n[e.model.target.id]||n[e.model.source.id])})).map((function(e){var t=e.model,n={id:t.id};return n.target=d()(t.target),n.target.connection||(n.target.connection=null),n.source=d()(t.source),n.source.connection||(n.source.connection=null),n}))}}]),e}();var Is=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).pinLine=new Ls(e.diagram),r}return y()(n,[{key:"selectParent",value:function(){var e=this.diagram,t=this.changeArguments,n=e.find(t[0][0].id).parent;this.select(n&&n.model.id)}},{key:"selectNearest",value:function(){var e=this.diagram,t=this.changeArguments,n=e.find(t[0][0].id),r=n.parent;if(t[0].length>1&&r)return this.select(r.model.id);if(1===t[0].length&&r){var a=r.getChildren().filter((function(e){return e.upSignX===n.upSignX&&e.upSignY===n.upSignY})),i=a.indexOf(n);if(r.model.children){var o=a[i-1];if(o)return this.select([o]);var c=a[i+1];if(c)return this.select([c])}return this.select(r.model.id)}return e.selector.clear()}},{key:"execute",value:function(){var e=this.diagram,t=this.id,n=this.pinLine,r=Yr(t,{}),a=r[0].map((function(t){return e.find(t)}));a.forEach((function(t,n){r[0][n]=d()(t.model),r[1][n]=e.getCellOptions(t)})),this.changeArguments=r,n.cache(a),this.forward()}},{key:"forward",value:function(){var e=this.diagram,t=this.changeArguments,n=this.pinLine;this.selectNearest(),e.remove(t[0].map((function(e){return e.id}))),e.tryFocus(),n.pin()}},{key:"backward",value:function(){var e=this.diagram,t=this.changeArguments,n=this.pinLine,r=e.add.apply(e,z()(t));n.reset(),this.select(r),e.tryFocus()}}]),n}();c()(Is,"className","Remove");var Ts=function(e){b()(n,Is);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.deduplicate(e.selector.selections);this.id=t.filter((function(e){return e.canDelete()})).map((function(e){return e.model.id})),B()(O()(n.prototype),"execute",this).call(this)}}]),n}();c()(Ts,"className","Delete"),c()(Ts,"enable",(function(e){return e.selector.selections.filter((function(e){return e.canDelete()})).length>0}));var zs=function(e){b()(n,Ts);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){na(this.e,this.diagram),B()(O()(n.prototype),"execute",this).call(this)}}]),n}();c()(zs,"className","Cut"),c()(zs,"isModelChange",!0);var Fs=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){B()(O()(n.prototype),"execute",this).call(this);var e=this.diagram,t=this.lineId,r=this.model,a=e.find(t);this.originTarget=["id","connection","marker"].reduce((function(e,t){var n=a.target[t];return e[t]=null==n?null:n,e}),{}),e.update(a,{target:{id:r.id,connection:null}})}},{key:"forward",value:function(){B()(O()(n.prototype),"forward",this).call(this);var e=this.diagram,t=this.lineId,r=this.model,a=e.find(t);a&&!a.destroyed&&e.update(a,{target:{id:r.id,connection:null}})}},{key:"backward",value:function(){var e=this.diagram,t=this.lineId,n=this.originTarget,r=this.model,a=e.find(t);e.remove(r.id),a&&!a.destroyed&&e.update(a.model.id,{target:n})}}]),n}(Fr.Add);function Ys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}c()(Fs,"className","AddVertex");var Xs=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ys(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({html:ls},e))).queue=!1,r}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.shape,n=this.html,r=this.fill,a=this.stroke;Object.assign(e.settings.vertex,{type:"geometry",html:n,shape:t||"rect",fill:r,stroke:a}),e.selector.clear(),e.interaction.changeMode("beginInsertVertex")}}],[{key:"enable",value:function(){return!0}}]),n}();function qs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}c()(Xs,"className","BeginInsertGeometry"),c()(Xs,"isModelChange",!1);var Vs=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qs(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({html:Qt("文本")},e))).queue=!1,r}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.html,n=this.stroke;Object.assign(e.settings.vertex,{type:"text",html:t,stroke:n,shape:"text"}),e.selector.clear(),e.interaction.changeMode("beginInsertVertex")}}],[{key:"enable",value:function(){return!0}}]),n}();c()(Vs,"className","BeginInsertText"),c()(Vs,"isModelChange",!1);var Hs=Fr.Update,Gs=function(e){b()(n,Hs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"arrange",value:function(){}},{key:"getArrangeTstem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=[],r=[];return e.forEach((function(e,a){var i=Zl([e]),o=i.stems,c=i.originModels,l=t(a,e),s=l.dx,u=l.dy;r.push.apply(r,z()(o)),n.push.apply(n,z()(Hl(c,s,u)))})),{tStems:r,models:n}}},{key:"execute",value:function(){var e=this.diagram.selector.selections.concat([]),t=this.arrange(),r=t.tStems,a=t.models;this.id=r,this.model=a,this.selectedIds=e.map((function(e){return e.model.id})),B()(O()(n.prototype),"execute",this).call(this)}},{key:"select",value:function(){B()(O()(n.prototype),"select",this).call(this,this.selectedIds)}}]),n}();c()(Gs,"className","Arrange");var Zs=function(e){b()(n,Gs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"_getAlignCells",value:function(e){return e.filter((function(e){return e.canArrange()}))}},{key:"_getAlignCellPoints",value:function(e){var t=[];return e.forEach((function(e){var n=[],r=e.getAlignBBox();n.push([r.minX,r.minY]),n.push([r.maxX,r.maxY]),n.push([(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]),t.push(n)})),t}},{key:"arrange",value:function(){var e=this.diagram.selector.selections.concat([]),t=this._getAlignCells(e),n=this._getAlignCellPoints(t);return this.align(t,n)}},{key:"align",value:function(){}}]),n}();c()(Zs,"className","Align"),c()(Zs,"enable",(function(e){return e.selector.selections.filter((function(e){return e.canArrange()})).length>1}));var Ws=function(e){b()(n,Zs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"align",value:function(e,t){var n=t.reduce((function(e,t){return e.concat(t)}),[]),r=Math.max.apply(Math,z()(n.map((function(e){return e[1]}))));return this.getArrangeTstem(e,(function(e,n){var a=t[e];return{dx:0,dy:n.isLine?r-Math.max.apply(Math,z()(a.map((function(e){return e[1]})))):r-a[1][1]}}))}}]),n}();c()(Ws,"className","AlignBottom");var Ks=function(e){b()(n,Zs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"align",value:function(e,t){var n,r=e.map((function(e){return e.getAlignBBox()})),a=We(r,"width");if(r.every((function(e){return e.minX>=a.minX&&e.maxX<=a.maxX})))n=a.x+a.width/2;else{var i=t.reduce((function(e,t){return e.concat([t[2]])}),[]).map((function(e){return e[0]}));n=(Math.max.apply(Math,z()(i))+Math.min.apply(Math,z()(i)))/2}return this.getArrangeTstem(e,(function(e,r){var a=t[e];return{dx:(r.isLine,n-a[2][0]),dy:0}}))}}]),n}();c()(Ks,"className","AlignHCenter");var Us=function(e){b()(n,Zs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"align",value:function(e,t){var n=t.reduce((function(e,t){return e.concat(t)}),[]),r=Math.min.apply(Math,z()(n.map((function(e){return e[0]}))));return this.getArrangeTstem(e,(function(e,n){var a=t[e];return{dx:n.isLine?r-Math.min.apply(Math,z()(a.map((function(e){return e[0]})))):r-a[0][0],dy:0}}))}}]),n}();c()(Us,"className","AlignLeft");var Qs=function(e){b()(n,Zs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"align",value:function(e,t){var n=t.reduce((function(e,t){return e.concat(t)}),[]),r=Math.max.apply(Math,z()(n.map((function(e){return e[0]}))));return this.getArrangeTstem(e,(function(e,n){var a=t[e];return{dx:n.isLine?r-Math.max.apply(Math,z()(a.map((function(e){return e[0]})))):r-a[1][0],dy:0}}))}}]),n}();c()(Qs,"className","AlignRight");var Js=function(e){b()(n,Zs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"align",value:function(e,t){var n=t.reduce((function(e,t){return e.concat(t)}),[]),r=Math.min.apply(Math,z()(n.map((function(e){return e[1]}))));return this.getArrangeTstem(e,(function(e,n){var a=t[e];return{dx:0,dy:n.isLine?r-Math.min.apply(Math,z()(a.map((function(e){return e[1]})))):r-a[0][1]}}))}}]),n}();c()(Js,"className","AlignTop");var $s=function(e){b()(n,Zs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"align",value:function(e,t){var n,r=e.map((function(e){return e.getAlignBBox()})),a=We(r,"height");if(r.every((function(e){return e.minY>=a.minY&&e.maxY<=a.maxY})))n=a.y+a.height/2;else{var i=t.reduce((function(e,t){return e.concat([t[2]])}),[]).map((function(e){return e[1]}));n=(Math.max.apply(Math,z()(i))+Math.min.apply(Math,z()(i)))/2}return this.getArrangeTstem(e,(function(e,r){var a=t[e];return{dx:0,dy:(r.isLine,n-a[2][1])}}))}}]),n}();c()($s,"className","AlignVCenter");var eu=function(e){b()(n,Gs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"distribute",value:function(){}},{key:"arrange",value:function(){var e=this.diagram.selector.selections.filter((function(e){return e.canArrange()}));return this.distribute(e)}}]),n}();c()(eu,"enable",(function(e){return e.selector.selections.filter((function(e){return e.canArrange()})).length>2}));var tu=function(e){b()(n,eu);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"distribute",value:function(e){var t=e.length,n=e.map((function(e){return{cell:e,box:e.getAlignBBox()}}));n=n.sort((function(e,t){return e.box.minX-t.box.minX}));var r=Math.min.apply(Math,z()(n.map((function(e){return e.box.minX})))),a=(Math.max.apply(Math,z()(n.map((function(e){return e.box.maxX}))))-r-n.reduce((function(e,t){return e+t.box.width}),0))/(t-1),i=n[0].box;e=n.map((function(e){return e.cell}));var o=0;return this.getArrangeTstem(e,(function(e){var t=0;if(e>0){var r=n[e-1],c=n[e];o=o+a+r.box.width,t=i.minX+o-c.box.minX}return{dx:t,dy:0}}))}}]),n}();c()(tu,"className","DistributeHorizontally");var nu=function(e){b()(n,eu);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"distribute",value:function(e){var t=e.length,n=e.map((function(e){return{cell:e,box:e.getAlignBBox()}}));n=n.sort((function(e,t){return e.box.minY-t.box.minY}));var r=Math.min.apply(Math,z()(n.map((function(e){return e.box.minY})))),a=(Math.max.apply(Math,z()(n.map((function(e){return e.box.maxY}))))-r-n.reduce((function(e,t){return e+t.box.height}),0))/(t-1),i=n[0].box;e=n.map((function(e){return e.cell}));var o=0;return this.getArrangeTstem(e,(function(e){var t=0;if(e>0){var r=n[e-1],c=n[e];o=o+a+r.box.height,t=i.minY+o-c.box.minY}return{dx:0,dy:t}}))}}]),n}();c()(nu,"className","DistributeVertically");var ru=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this.diagram,r=n.selector.selections.filter((function(e){return e.isStem}));r.sort(t);var a=r.map((function(e){return e.model.id})),i=r.map((function(e){return n.getCellOptions(e)}));r.forEach((function(t){t[e]()}));var o=r.map((function(e){return n.getCellOptions(e)}));this.beforeCellOptions=i,this.afterCellOptions=o,this.id=a,this.select(a)}},{key:"backward",value:function(){var e=this.diagram,t=this.id,n=this.beforeCellOptions;e.update(t,{},n),this.select(t)}},{key:"forward",value:function(){var e=this.diagram,t=this.id,n=this.afterCellOptions;e.update(t,{},n),this.select(t)}}]),n}();c()(ru,"className","ZIndex");var au=function(e){b()(n,ru);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){B()(O()(n.prototype),"execute",this).call(this,"toBack",(function(e,t){return t.getZIndex()-e.getZIndex()}))}}]),n}();c()(au,"className","ToBack");var iu=function(e){b()(n,ru);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){B()(O()(n.prototype),"execute",this).call(this,"toFront",(function(e,t){return e.getZIndex()-t.getZIndex()}))}}]),n}();c()(iu,"className","ToFront");var ou=function(e){b()(n,ru);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){B()(O()(n.prototype),"execute",this).call(this,"backward",(function(e,t){return e.getZIndex()-t.getZIndex()}))}}]),n}();c()(ou,"className","Backward");var cu=function(e){b()(n,ru);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){B()(O()(n.prototype),"execute",this).call(this,"forward",(function(e,t){return t.getZIndex()-e.getZIndex()}))}}]),n}();c()(cu,"className","Forward");var lu=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.x,t=this.y;this.model={type:"text",html:Qt("文本"),x:e,y:t},B()(O()(n.prototype),"execute",this).call(this)}}]),n}(Fr.Add);c()(lu,"className","InsertText"),c()(lu,"enable",(function(e){return"edit"===e.interaction.currentMode}));var su=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.x,t=this.y;this.model={type:"geometry",html:ls,shape:"rect",x:e,y:t},B()(O()(n.prototype),"execute",this).call(this)}}]),n}(Fr.Add);c()(su,"className","InsertGeometry"),c()(su,"enable",(function(e){return"edit"===e.interaction.currentMode}));var uu=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.x,t=this.y,r=this.image,a=this.diagram,i=r.naturalWidth/r.naturalHeight,o=Math.min(r.naturalWidth,1e3,1e3*i),c=o/i,l=a.viewport.getCenter();this.model={type:"image",image:r,width:o,height:c,x:null==e?l[0]:e,y:null==t?l[1]:t,constraints:{proportion:!0}},B()(O()(n.prototype),"execute",this).call(this)}}]),n}(Fr.Add);c()(uu,"className","InsertImage"),c()(uu,"enable",(function(e){return"edit"===e.interaction.currentMode}));var du=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,[{key:"execute",value:function(){this.diagram.contentEditor.execCommand("createLink",Qt("链接"))}}]),n}();c()(du,"className","AttachLink"),c()(du,"enable",(function(e){var t=e.getCell(e.contentEditor.dom);return e.contentEditor.getRange()&&t}));var fu=function(e){var t=e.model,n=e.offset;t.x=(t.x||0)+n[0],t.y=(t.y||0)+n[1]},hu={text:{lake:fu,text:function(e){var t=e.text,n=e.focusPoint;return[{type:"text",html:t,x:n[0],y:n[1]}]},textIndex:1},geometry:{lake:fu},image:{lake:fu},group:{lake:function(e){var t=e.model,n=e.offset;Gl([t],n[0],n[1])}},line:{lake:function(e){var t=e.model,n=e.extraInformations,r=e.offset,a=e.diagram;t.source&&t.source.id&&!a.find(t.source.id)&&!n[t.source.id]||t.target&&t.target.id&&!a.find(t.target.id)&&!n[t.target.id]?t.shouldRemove=!0:(["source","target"].forEach((function(e){var n=t[e];!n.id&&n.connection&&(n.connection[0]+=r[0],n.connection[1]+=r[1])})),!t.controlPoints||t.source.id&&!n[t.source.id]&&t.target.id&&!n[t.target.id]||t.controlPoints.forEach((function(e){e[0]+=r[0],e[1]+=r[1]})))}}},pu=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,[{key:"_getOptions",value:function(e){var t=this.diagram.groupManager.group;return e.map((function(e){var n=e.options||{};return delete e.options,t&&(n.parent=t.model.id),n}))}},{key:"execute",value:function(){var e,t=this.diagram,n=this.e,r=n.clipboardData.getData("text/html"),a=n.clipboardData.getData("text/plain"),i=this.focusPoint;if(n.clipboardData.files.length>0&&(""===r&&/^.+\.\w+$/.test(a)||""===a&&/^(<meta.+?>)?<img.+?>$/.test(r)||!a||!r)&&(e=Array.from(n.clipboardData.files)),i=i||t.viewport.getFocus(),e){var o=Array.from(e).filter((function(e){return fs(e)}));o[0]&&t.emit("importimage",{files:o,from:"clipboard",x:i[0],y:i[1]})}else{var c=Ra(r);if(c){var l=c.body,s=c.extraInformations,u=function(e,t){var n=[[],[]];return e.forEach((function(e){Ye(e,(function(e){var t=e.x,r=e.y,a=e.type,i=e.source,o=e.target;"line"===a?(i&&!i.id&&i.connection&&(n[0].push(i.connection[0]),n[1].push(i.connection[1])),o&&!o.id&&o.connection&&(n[0].push(o.connection[0]),n[1].push(o.connection[1]))):null!=t&&null!=r&&(n[0].push(t),n[1].push(r))}))})),n[0]=n[0].length>0&&Math.min.apply(Math,z()(n[0]))||0,n[1]=n[1].length>0&&Math.min.apply(Math,z()(n[1]))||0,[t[0]-n[0],t[1]-n[1]]}(l,i);l.sort((function(e,t){return e.zIndex-t.zIndex})),Cl(l,s),l.forEach((function(e){Eo(e);var n=s[e.id];e.type||(e.type=n.rootType||"text"),e.options={},Ye(e,(function(e){delete e.zIndex}));var r=hu[e.type];r&&r.lake&&r.lake({model:e,extraInformation:n,extraInformations:s,offset:u,diagram:t})}));for(var d=[],f=[],h=0;h<l.length;h++){var p=l[h];s[p.id].hasParent?d.push(p):f.push(p)}d.sort((function(e,t){var n=s[e.id],r=s[t.id];return n.nth-r.nth})),l=f.concat(d),t.command.execute("Add",{model:l,cellOptions:this._getOptions(l)})}else if(a){var m,g=Object.keys(hu),y=Aa(a),v=[];g.forEach((function(e){var t=hu[e].text;t&&v.push({textProcessor:t,textIndex:hu[e].textIndex})})),v.sort((function(e,t){return t.textIndex-e.textIndex})),v=v.map((function(e){return e.textProcessor}));for(var b=0;b<v.length&&!(m=(0,v[b])({text:a,focusPoint:i,diagram:t,structuredText:y}));b++);t.command.execute("Add",{model:m,cellOptions:this._getOptions(m)}),t.emit("afterpasteplaintext",{body:m,focusPoint:i,structuredText:y})}}}}],[{key:"registerClipboardProcessor",value:function(e,t){hu[e]=t}}]),n}();function mu(e){return e.isStem}c()(pu,"className","Paste");var gu=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.groupManager.group,n=e.selector.selections.filter(mu),r={},a=Object(I.a)();t&&(r.parent=t.model.id),n.sort((function(e,t){return e.getZIndex()-t.getZIndex()}));var i={id:a,type:"group"},o={parent:a};this.beforeZIndexCache=e.getCellsByZIndex().map((function(e){return e.model.id})),this.newGroupModel=i,this.newGroupOption=r,this.selectionIds=n.map((function(e){return e.model.id})),this.updateModel={},this.updateOption=o,this.forward()}},{key:"forward",value:function(){var e=this.diagram,t=this.newGroupModel,n=this.selectionIds,r=this.newGroupOption,a=this.updateModel,i=this.updateOption,o=e.rootGroup,c=n.map((function(t){return e.find(t)})),l=t.id,s=c[c.length-1].getAllCellsByZIndex(),u=s[s.length-1];e.add(t,r),e.update(c,a,i);var d=e.find(l);o.insertBefore(d.graphicGroup,u.graphicGroup);for(var f=0;f<c.length;f++)c[f].getAllCellsByZIndex().forEach((function(e){o.insertBefore(e.graphicGroup,d.graphicGroup)}));e.selector.select(l)}},{key:"backward",value:function(){var e=this.diagram,t=this.selectionIds,n=this.newGroupModel,r=this.newGroupOption,a=this.beforeZIndexCache,i=n.id,o=e.rootGroup,c=t.map((function(t){return e.find(t)}));r.parent?e.update(c,{parent:r.parent}):e.update(c,{},{parent:null}),e.remove(i);for(var l=0;l<a.length;l++){var s=e.find(a[l]);o.append(s.graphicGroup)}e.selector.select(t)}}]),n}();c()(gu,"className","Group"),c()(gu,"enable",(function(e){var t=e.selector.selections;return(t=t.filter(mu)).length>1}));var yu=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections,n=t.map((function(e){return e.model.id})),r={};t.forEach((function(e){e.getChildren().forEach((function(t){r[t.model.id]=e.model.id}))})),this.beforeZIndexCache=e.getCellsByZIndex().map((function(e){return e.model.id})),this.selectionIds=n,this.groupMap=r,this.forward()}},{key:"forward",value:function(){var e=this.diagram,t=this.selectionIds.map((function(t){return e.find(t)})),n=[];t.forEach((function(t){var r=t.parent&&t.parent.model.id||null;t.getChildren().forEach((function(t){n.push(t),e.update(t,{},{parent:r})}))})),e.remove(t),e.selector.select(n)}},{key:"backward",value:function(){var e=this.diagram,t=this.groupMap,n=this.selectionIds,r=this.beforeZIndexCache,a=e.rootGroup;e.add(n.map((function(e){return{id:e,type:"group"}}))),Object.keys(t).forEach((function(n){e.update(n,{},{parent:t[n]})}));for(var i=0;i<r.length;i++){var o=e.find(r[i]);a.append(o.graphicGroup)}e.selector.select(n)}}]),n}();c()(yu,"className","UnGroup"),c()(yu,"enable",(function(e){return e.selector.selections.every((function(e){return e.isGroup}))}));var vu=ki.MouseDragCanvas,bu=ki.KeyboardPressModifierKey,xu=ki.KeyboardSelectAll,ku=ki.KeyboardSwitchEditAndDragCanvas,wu={Extends:[wl,Ol,jl,Il,Sl,Al,Dl],Cells:[jc,cl,fl,gl,bl],Commands:[Is,Ts,zs,gu,yu,pu,Fs,Xs,Vs,Ws,Ks,Us,Qs,Js,$s,tu,nu,au,iu,ou,cu,lu,su,uu,du],defaultCursors:{read:"grab",dragCanvas:"grab",beginInsertLine:"crosshair"},settings:{line:{shape:"elbow",target:{marker:"arrow"}},vertex:{}},dataProcessor:function(e){if(e&&e.body){var t=[],n=[];e.body.forEach((function(e){t.push(e),Ye(e,(function(e){e.type&&n.push(e)}))})),t.forEach((function(e){Eo(e)})),n.forEach((function(e){!function(e){"line"===e.type&&e.controlPoints&&(e.controlPoints=e.controlPoints.filter((function(e){return e&&e[0]&&e[1]})))}(e)}))}},modes:[{mode:"edit",Behaviours:[bs,vs,xs,ws,Os,Cs,gs,Wl,Ql,ds,Tl,hs,ps,ys,Es,Ds,js,Rs,Ss,_s,bu,xu,ku,Ms,Bs,As,Ns]},{mode:"read",Behaviours:[vu]},{mode:"dragCanvas",Behaviours:[ku,vu]},{mode:"beginInsertLine",Behaviours:[Yl]},{mode:"beginInsertVertex",Behaviours:[Vl]}]};pu.registerClipboardProcessor("mindmap",{lake:function(e){var t=e.model,n=e.extraInformation,r=e.extraInformations,a=e.offset,i=e.diagram.selector.selections,o=i[0];1===i.length&&o.isMindmap&&"mindmap"===n.rootType?(delete t.type,delete t.treeEdge,o.isStem&&(t.treeEdge=n.treeEdge),t.options={parent:o.model.id}):(t.x="number"==typeof t.x?t.x:n.x,t.y="number"==typeof t.y?t.y:n.y,t.x+=a[0],t.y+=a[1],t.children&&t.children.forEach((function(e){var t=r[e.id];t.treeEdge&&t.treeEdge.stroke&&(e.treeEdge?e.treeEdge.stroke||(e.treeEdge.stroke=t.treeEdge.stroke):e.treeEdge={stroke:t.treeEdge.stroke})})))},text:function(e){var t=e.structuredText,n=e.diagram.selector.selections,r=n[0];return!(1!==n.length||!r.isMindmap)&&(t.forEach((function(e){e.options={parent:r.model.id}})),t)},textIndex:2}),ws.registerContentEditorOptions("mindmap",{}),_s.filterCell((function(e){return!e.isMindmap}));var Ou=["#A287E1","#E48484","#69B1E4","#DE81C6","#77C386","#DFB85D","#8169BF"];function Cu(e){var t=e.naturalWidth/e.naturalHeight,n=e.firstInsertRatio?e.naturalWidth*e.firstInsertRatio:e.naturalWidth;return e.width=n>=480?480:n,e.height=e.width/t,e}function Eu(e){return e<=2?3:e>=2&&e<=4?2:1}function Pu(e){var t=e.radius,n=e.outer,r=e.width+2*n,a=e.height+2*n;return"capsule"===e.shape&&(t=r<a?r/2:a/2),_n(-n,-n,r,a,t)}var _u=Wn,ju=function(e){b()(n,bo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"getSytle",value:function(){var e=this.cell,t=e.border,n=e.computedProps,r=ct(t,{fill:!0});return r.stroke=t.stroke||n.treeEdge.stroke,r["stroke-width"]=e.getBorderStrokeWidth(),"line"===t.shape&&(r.stroke="rgba(255,255,255,0)",r.fill="rgba(255,255,255,0)"),r}},{key:"render",value:function(){var e=this.cell,t=e.graphicGroup,n=new _u;t.add(n),this.element=n,e.borderElement=n}},{key:"drawInherit",value:function(){this.draw()}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=e.cache,r=e.width,a=e.height,i=e.border,o=i.outer,c=i.radius,l=i.shape,s=this.getSytle(),u=lt(s,n.borderStyle,["stroke","fill","stroke-width"]);r===n.width&&a===n.height&&ye()(i,n.border)||(u.d=Pu({radius:c,outer:o,width:r,height:a,shape:l})),Object.keys(u).length>0&&(t.update(u),n.borderStyle=s)}},{key:"destroy",value:function(){this.element.destroy()}}]),n}();c()(ju,"className","Border"),c()(ju,"configName","border"),c()(ju,"zIndex",1);var Su=Wn,Ru=function(e){b()(n,bo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"setDefault",value:function(){this.element.remove()}},{key:"updateState",value:function(){var e=this.element,t=this.cell,n=t.outline,r=t.graphicGroup,a=this.getSytle();a.d=this.getPath(),t.state.highlight&&Object.assign(a,n.highlight),t.state.selected&&Object.assign(a,n.selected),t.state.beginEdit&&Object.assign(a,n.beginEdit),(t.state.highlight||t.state.selected)&&(r.add(e),e.toBack(),t.treeEdgeElement&&t.treeEdgeElement.toBack()),e.update(a)}},{key:"render",value:function(){var e=this.cell,t=e.outline,n=new Su(t.default);this.element=n,e.outlineElement=n}},{key:"getSytle",value:function(){return ct(this.cell.border,{stroke:!0,fill:!0,"stroke-width":!0})}},{key:"getPath",value:function(){var e=this.cell,t=e.width,n=e.height,r=e.outline,a=e.border,i=r.radius,o=r.outer,c=a.shape;return"line"===a.shape&&(o-=2,i-=2),Pu({radius:i,outer:o,width:t,height:n,shape:c})}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=e.cache,r=e.width,a=e.height,i=lt(this.getSytle(),n.borderStyle,["stroke","fill","stroke-width"]);r===n.width&&a===n.height||(i.d=this.getPath()),Object.keys(i).length>0&&t.update(i)}},{key:"destroy",value:function(){this.element.destroy(),B()(O()(n.prototype),"destroy",this).call(this)}}]),n}();c()(Ru,"className","Outline"),c()(Ru,"configName","outline"),c()(Ru,"zIndex",3);var Mu=tr,Bu=function(e){b()(n,bo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.cell,t=new Mu;this.element=t,e.imageElement=t}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=e.graphicGroup,r=e.image,a=e.contentBox,i=e.diagram.imageManager,o=e.getPadding();if(r.src){if(n.children.includes(t)||n.add(t),r){var c=r.src,l=r.width,s=r.height,u=r.naturalWidth,d=r.naturalHeight;t.update({x:a.x+(a.width-r.width)/2,y:o[0],width:l,height:s}),t.dataset({raw_src:r.src}),i.setImageHref(t,c,u,d)}}else t.remove()}},{key:"destroy",value:function(){this.element.destroy(),B()(O()(n.prototype),"destroy",this).call(this)}}]),n}();function Au(e){var t=be()(e).toRgb(),n=t.r,r=t.g,a=t.b;return t.a<.5||.299*n+.587*r+.114*a>=210?"#8C8C8C":"#fff"}c()(Bu,"className","ImageSubcell"),c()(Bu,"configName","image"),c()(Bu,"zIndex",2);var Du=[];function Nu(e,t){var n=t.colors.reduce((function(e,t){return e.concat(t)}),[]);Du.concat(n).includes(e)||(Du.push(e),Du.length>10&&Du.splice(0,1))}var Lu=Qn,Iu=function(e){b()(n,bo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;m()(this,n),r=t.call(this,e);var a=e.note,i=a.width,o=a.height,c=a.padding;return r.size=[i+c[1]+c[3],o+c[0]+c[2]],r}return y()(n,[{key:"render",value:function(){var e=this.cell.note,t=e.width,n=e.height,r=new Lu({width:t,height:n}),a=r.htmlContainer;a.classList.add("lake-diagram-note"),a.classList.add("lake-icon"),a.classList.add("lake-icon-diagram-cell-note"),a.style.cursor="pointer",a.style["vertical-align"]="top",a.style.color="#8C8C8C",a.style["font-size"]=t+"px",a.style.width=t+"px",a.style.height=n+"px",a.style["line-height"]=t+"px",this.element=r}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=e.model,r=e.note,a=e.graphicGroup,i=e.width,o=e.height,c=e.border;n.note?(t.attr({x:i-r.width-r.padding[1],y:(o-r.height)/2}),c.fill&&(t.htmlContainer.style.color=Au(c.fill)),a.add(t)):t.remove()}}]),n}();c()(Iu,"className","Note"),c()(Iu,"zIndex",3);var Tu=function(e){b()(n,Oc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"calculateBBox",value:function(){var e=B()(O()(n.prototype),"calculateBBox",this).call(this),t=this.cell,r=this.calculatedDOM,a=t.image&&t.image.src;return r.textContent||t.state.beginEdit||!a?e:{width:e.width+1,height:0}}},{key:"calculateUnlimitBBox",value:function(){var e=this.calculatedDOM;return e.style.width="auto",e.getBoundingClientRect()}},{key:"updateStyleSheets",value:function(){for(var e=this.cell,t=e.textAreaContentStyleSheets,n=e.model,r=e.minWidth,a=e.minHeight,i=e.getPadding(),o=i[1]+i[3]+e.getNoteWidth(),c=i[0]+i[2],l=0;l<t.length;l++){var s=t[l];"self"===s.query&&(n.width?(s.css.width=n.width-o+"px",s.css["max-width"]=""):n.image&&n.image.src&&n.image.width?this.calculateBBox().width<n.image.width&&(s.css.width=n.image.width-1+"px",s.css["max-width"]=""):(s.css["max-width"]="480px",s.css.width=""),s.css["min-width"]=r-o+"px",s.css["min-height"]=a-c+"px")}}},{key:"getPosition",value:function(){var e=this.cell,t=e.image,n=e.contentBox,r=t&&t.src&&t.height+2||0;return{x:n.x,y:n.y+r}}}]),n}();c()(Tu,"className","TextArea");var zu=function(e){b()(n,Po);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),r=Qe({default:{x:0,y:0,collapsed:!1,html:"&#8203;",layout:{},image:{width:0,height:0},note:{width:14,height:14,padding:[0,8,0,0]}},anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],Subcells:[ju,Tu,Ru,Bu,Iu],penetratedKeys:["x","y","width","height","collapsed","quadrant","zIndex","html","layout","rainbow","tapered","note","treeEdge"]},r),(e=t.call(this,r)).model.children||(e.model.children=[]),e.isMindmap=!0,e.multiSelectHighlight=!1,e.penetratedKeys=e.penetratedKeys.concat(e.Subcells.map((function(e){return e.configName}))),r.Subcells.sort((function(e,t){return e.zIndex-t.zIndex})),r.Subcells.forEach((function(t){var n=t.configName;n&&(e[n]={},!e.default[n]&&(e.default[n]={}))})),Object.assign(R()(e),d()(e.default)),e.initSubcell(),e.render(),e.eventDelegation(),e}return y()(n,[{key:"minWidth",get:function(){var e=this.border;if(e){var t=e.shape;if("rect"===t)return 38;if("capsule"===t)return 42}return 32}},{key:"minHeight",get:function(){return 16}},{key:"isPlaceholder",get:function(){return this.model.isPlaceholder}},{key:"getBBox",value:function(){var e=this.graphicGroup.rendererElement.getBBox(),t=this.x+e.x,n=this.y+e.y;return{x:t,y:n,width:e.width,height:e.height,minX:t,minY:n,maxX:t+e.width,maxY:n+e.height}}},{key:"getTimelineLayoutAlign",value:function(){var e=this.getTimelineLayoutSourceCell(),t="";return[e,this].forEach((function(e){e&&"line"===e.border.shape?t+="b":t+="c"})),t}},{key:"getTimelineLayoutSourceCell",value:function(){var e=this.parent;if(this.isStem)return null;var t=this.getNth();return 0===t?e:this.getSiblings()[t-1]}},{key:"showCollapsedButton",value:function(){this.state.collapsedButtonVisible||(this.state.collapsedButtonVisible=!0,this.updateState())}},{key:"hideCollapsedButton",value:function(){this.state.collapsedButtonVisible&&(this.state.collapsedButtonVisible=!1,this.updateState())}},{key:"findSubcell",value:function(e){return this.subcells.find((function(t){return t.constructor.className===e}))}},{key:"shouldRefreshEndEditContent",value:function(){return this.isContentEmpty()&&this.image&&this.image.src}},{key:"canStroke",value:function(){return"line"!==this.border.shape}},{key:"canStrokeWidth",value:function(){return!1}},{key:"canStrokeStyle",value:function(){return!1}},{key:"canFill",value:function(){return"line"!==this.border.shape}},{key:"get",value:function(e){var t=B()(O()(n.prototype),"get",this).call(this,e);return"border"===e?(t.stroke=t.stroke||this.computedProps.treeEdge.stroke,t["stroke-width"]=this.getBorderStrokeWidth(),t):"treeEdge"===e?(t.stroke=this.computedProps.treeEdge.stroke,t["stroke-width"]=this.getTreeEdgeStrokeWidth(),t):t}},{key:"getKeyShape",value:function(){return this.borderElement}},{key:"getPadding",value:function(){return[4,8,4,8]}},{key:"getBorderStrokeWidth",value:function(){return this.border["stroke-width"]||this.getDefaultStrokeWidth()}},{key:"getTreeEdgeStrokeWidth",value:function(){return this.computedProps.treeEdge["stroke-width"]||this.getDefaultStrokeWidth()}},{key:"getDefaultStrokeWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.depth,t=this.stem,n=t.tapered;return n&&Eu(e)||3}},{key:"initSubcell",value:function(){var e=this;this.subcells=this.Subcells.map((function(t){return new t(e)}))}},{key:"eventDelegation",value:function(){var e=this.graphicGroup,t=this.imageElement;this.delegateEvent(t,"mouseenter","mindmapcellimage:mouseenter"),this.delegateEvent(t,"mouseleave","mindmapcellimage:mouseleave"),this.delegateEvent(e,"mouseenter","mindmapcell:mouseenter"),this.delegateEvent(e,"mouseleave","mindmapcell:mouseleave")}},{key:"render",value:function(){this.subcells.forEach((function(e){e.render()})),this.updateModel(this.model)}},{key:"draw",value:function(){this.drawInner(),this.updateCache(),this.updateState()}},{key:"updateModel",value:function(e){e&&""===e.html&&(e.html="&#8203;"),B()(O()(n.prototype),"updateModel",this).call(this,e),this.calculate()}},{key:"isInCollapsed",value:function(){for(var e=this.parent;e;){if(!0===e.collapsed)return!0;e=e.parent}return!1}},{key:"getCellQuadrant",value:function(){for(var e=this;1!==e.depth;)e=e.parent;return e.model.quadrant}},{key:"drawInner",value:function(){this.subcells.forEach((function(e){e.draw()})),this.drawCollapse(),this.drawPosition()}},{key:"drawInherit",value:function(){this.subcells.forEach((function(e){e.drawInherit()}))}},{key:"drawPosition",value:function(){this.subcells.forEach((function(e){e.drawPosition()}));var e=this.graphicGroup,t=this.x,n=this.y,r=this.cache;if(!r.matrix||t!==r.matrix[6]||n!==r.matrix[7]){var a=[1,0,0,0,1,0,t,n,1];e.update({matrix:a}),r.matrix=a,this.matrix=a}}},{key:"drawCollapse",value:function(){this.isInCollapsed()?this.hide():this.show()}},{key:"getNoteWidth",value:function(){return this.model.note&&this.findSubcell("Note").size[0]||0}},{key:"calculate",value:function(){this.calculateSize()}},{key:"calculateSize",value:function(){var e=this,t=this.cache,n=this.getPadding(),r={noteWidth:this.getNoteWidth(),padding:n},a=this.findSubcell("TextArea");a.update(),this.textAreaBBox=a.getBBox(),t.html&&this.html&&t.html!==this.html&&(this.model.height=null),["width","height","html","image"].some((function(n){return t[n]!==e[n]}))&&(this.calculateImageSize(r),this.contentHeight=this.getContentHeight(r),this.contentWidth=this.getContentWidth(r),this.height=this.getHeight(r),this.width=this.getWidth(r),this.contentBox=this.getContentBox(r))}},{key:"getContentBox",value:function(e){var t=e.padding,n=e.noteWidth,r=this.width,a=this.contentWidth,i=this.contentHeight;return{x:(r-a-t[1]-t[3]-n)/2+t[3],y:t[0],width:a,height:i}}},{key:"getHasModelSizeContentWidth",value:function(e,t){var n,r=this.model,a=this.border,i=e[1]+e[3]+t,o=r.width-i;return"capsule"===a.shape&&(n=r.width>r.height?r.width-r.height+i:r.width/2,o=Math.min(o,n)),o}},{key:"calculateImageSize",value:function(e){var t=e.padding,r=e.noteWidth,a=this.image,i=this.model;if(!a.height||i.height){if(!a.src)return Object.assign(a,{width:0,height:0});var o=a.naturalWidth/a.naturalHeight,c=this.getTextAreaHeight(),l=this.getHasModelSizeContentWidth(t,r),s=i.height-t[0]-t[2]-c-4,u=((s=Math.max(s>0?s:0,36))>0?l/s:o)<=o?l/o:s,d=u*o;B()(O()(n.prototype),"updateModel",this).call(this,{image:{width:d,height:u}})}}},{key:"getWidth",value:function(e){var t,n=e.padding,r=e.noteWidth,a=this.isPlaceholder,i=this.model,o=this.border,c=this.contentWidth,l=this.contentHeight;if(a)return i.width;if(i.width)t=i.width;else if(t=c+n[1]+n[3]+r,"capsule"===o.shape){var s=n[1]+n[3];l>s&&(t+=l-s)}return Ue(Math.ceil(t),this.minWidth)}},{key:"getHeight",value:function(e){var t=e.padding;return this.isPlaceholder?this.model.height:Ue(this.contentHeight+t[0]+t[2],this.minHeight)}},{key:"getContentWidth",value:function(e){var t=e.padding,n=e.noteWidth,r=this.textAreaBBox,a=this.image,i=this.model;return i.width?i.width-n-t[1]-t[3]:Math.ceil(Math.max(r.width,a.width))||100}},{key:"getTextAreaHeight",value:function(){var e=this.textAreaBBox,t=this.image,n=this.diagram;return t.src&&this.isContentEmpty()&&!n.contentEditor.isBegin?0:e.height}},{key:"getContentHeight",value:function(){var e=this.image,t=this.getTextAreaHeight();return Math.ceil(t+e.height)}},{key:"updateState",value:function(){this.setDefault(),this.subcells.forEach((function(e){e.updateState()}))}},{key:"setDefault",value:function(){this.subcells.forEach((function(e){e.setDefault()}))}},{key:"updateCache",value:function(){this.cache.width=this.width,this.cache.height=this.height,this.cache.html=this.html,this.cache.collapsed=this.collapsed}},{key:"preventDelete",value:function(){return!1}},{key:"beginEditContent",value:function(){this.state.beginEdit=!0,this.updateState()}},{key:"endEditContent",value:function(){this.state.beginEdit=!1,this.updateState()}},{key:"getEventObject",value:function(e){return{cell:this,nativeEvent:e}}},{key:"destroy",value:function(){this.subcells.forEach((function(e){e.destroy()})),B()(O()(n.prototype),"destroy",this).call(this)}}]),n}();c()(zu,"className","MindmapBase");var Fu=Wn,Yu=Lr,Xu=function(e){b()(n,bo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.cell,t=e.graphicGroup,n=e.parent,r=new Fu({fill:"none","stroke-linecap":"round","stroke-linejoin":"round"});r.rendererElement.style["pointer-events"]="none",t.add(r),this.element=r,e.treeEdgeElement=r,n&&n.isStem&&this._createClipPath()}},{key:"_createClipPath",value:function(){var e=this.cell,t=this.element,n=e.parent,r=e.diagram;if(n){var a=r.defs,i=Object(I.a)(),o=new Yu({id:i}),c=new Fu({"fill-rule":"nonzero"});o.add(c),a.add(o),this.treeEdgeClipPath=c,this.clipPath=o,t.update({"clip-path":"url(#".concat(i,")")})}}},{key:"VH",value:function(e,t){return"M".concat(e[0],",").concat(e[1]," L").concat(e[0],",").concat(t[1]," L").concat(t[0],",").concat(t[1])}},{key:"curveHVH",value:function(){var e,t,n,r,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=this.cell,l=c.parent,s=.5,u=4,d=4,f=36,h="";return c.x>l.x?(t=l.isStem?[l.x-c.x+l.width-f,l.y-c.y+l.height/2]:[l.x-c.x+l.width,l.y-c.y+l.height/2+i],(n=[0,c.height/2])[1]+=o,r=[t[0]+u,t[1]],e=(a=[n[0]-d,n[1]])[0]-r[0],h+="M".concat(t[0]," ").concat(t[1]," "),h+="L".concat(r[0]," ").concat(r[1]," "),h+="C".concat(r[0]+e*(1-s)," ").concat(r[1],", ").concat(a[0]-e*s," ").concat(a[1],", ").concat(a[0]," ").concat(a[1]," "),h+="L".concat(n[0]," ").concat(n[1]),"line"===c.border.shape&&(h+="L".concat(n[0]+c.width," ").concat(n[1]))):(t=l.isStem?[l.x-c.x+f,l.y-c.y+l.height/2]:[l.x-c.x,l.y-c.y+l.height/2+i],(n=[c.width,c.height/2])[1]+=o,r=[t[0]-u,t[1]],a=[n[0]+d,n[1]],e=r[0]-a[0],h+="M".concat(t[0]," ").concat(t[1]," "),h+="L".concat(r[0]," ").concat(r[1]," "),h+="C".concat(r[0]-e*(1-s)," ").concat(r[1],", ").concat(a[0]+e*s," ").concat(a[1],", ").concat(a[0]," ").concat(a[1]," "),h+="L".concat(n[0]," ").concat(n[1]),"line"===c.border.shape&&(h+="L".concat(n[0]-c.width," ").concat(n[1]))),h}},{key:"VHV",value:function(){var e,t,n=this.cell,r=n.parent,a={x:r.x-n.x,y:r.y-n.y},i="";n.y<r.y?(e=[a.x+r.width/2,a.y],t=[n.width/2,n.height]):(e=[a.x+r.width/2,a.y+r.height],t=[n.width/2,0]);var o=(e[1]+t[1])/2;return i+="M".concat(e[0]," ").concat(e[1]," "),i+="L".concat(e[0]," ").concat(o," "),(i+="L".concat(t[0]," ").concat(o," "))+"L".concat(t[0]," ").concat(t[1])}},{key:"HVH",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.cell,o=i.parent,c="";return i.x>o.x?(e=o.isStem?[o.x-i.x+o.width,o.y-i.y+o.height/2]:[o.x-i.x+o.width,o.y-i.y+o.height/2+r],(t=[0,i.height/2])[1]+=a,n=(o.x-i.x+o.width)/2,"line"===i.border.shape&&(t[0]+=i.width)):(e=1===i.depth?[o.x-i.x,o.y-i.y+o.height/2]:[o.x-i.x,o.y-i.y+o.height/2+r],(t=[i.width,i.height/2])[1]+=a,n=(o.x-i.x+i.width)/2,"line"===i.border.shape&&(t[0]-=i.width)),c+="M".concat(e[0]," ").concat(e[1]," "),c+="L".concat(n," ").concat(e[1]," "),(c+="L".concat(n," ").concat(t[1]," "))+"L".concat(t[0]," ").concat(t[1])}},{key:"curveVHV",value:function(){var e,t,n,r,a,i=this.cell,o=i.parent,c={x:o.x-i.x,y:o.y-i.y},l="",s=1===i.depth?0:8;return i.y<o.y?(t=[c.x+o.width/2,c.y],n=[i.width/2,i.height],r=[t[0],t[1]-s],a=[n[0],n[1]+0],e=r[1]-a[1]):(t=[c.x+o.width/2,c.y+o.height],n=[i.width/2,0],r=[t[0],t[1]+s],a=[n[0],n[1]-0],e=r[1]-a[1]),l+="M".concat(t[0]," ").concat(t[1]," "),l+="L".concat(r[0]," ").concat(r[1]," "),(l+="C".concat(r[0]," ").concat(r[1]-.5*e,", ").concat(a[0]," ").concat(a[1]+.5*e,", ").concat(a[0]," ").concat(a[1]," "))+"L".concat(n[0]," ").concat(n[1])}},{key:"getStandardLayoutPath",value:function(){var e=this.cell,t=e.parent,n=e.computedProps,r=e.upDirection,a=n.treeEdge.shape;if(0===r[0])return"polyline"===a?this.VHV():this.curveVHV();var i=0,o=0;return"line"===t.border.shape&&(i=t.height/2),"line"===e.border.shape&&(o=e.height/2),"polyline"===a?this.HVH(i,o):this.curveHVH(i,o)}},{key:"getIndentLayoutPath",value:function(){var e,t,n=this.cell,r=n.parent,a=n.computedProps,i=n.border,o=a.treeEdge.shape,c={x:r.x-n.x,y:r.y-n.y},l=r.x+r.width/2-(n.x+n.width)>0,s=r.y-n.y-n.height>0,u="";if(s?(e=[c.x+r.width/2,c.y],t=l?"line"===i.shape?[0,n.height]:[n.width,n.height/2]:"line"===i.shape?[n.width,n.height]:[0,n.height/2]):(e=[c.x+r.width/2,c.y+r.height],t=l?"line"===i.shape?[0,n.height]:[n.width,n.height/2]:"line"===i.shape?[n.width,n.height]:[0,n.height/2]),"polyline"===o)u+="M".concat(e[0],",").concat(e[1]),u+="L".concat(e[0],",").concat(t[1]),u+="L".concat(t[0],",").concat(t[1]);else{var d=16;if(u+="M".concat(e[0],",").concat(e[1]),s){var f=Math.abs(t[1]-e[1]);f<=d&&(d=f),l?(u+="L".concat(e[0],",").concat(t[1]+d),u+="A ".concat(d," ").concat(d,", 0, 0, 0, ").concat(e[0]-d,", ").concat(t[1]),u+="L".concat(t[0],",").concat(t[1])):(u+="L".concat(e[0],",").concat(t[1]+d),u+="A ".concat(d," ").concat(d,", 0, 0, 1, ").concat(e[0]+d,", ").concat(t[1]),u+="L".concat(t[0],",").concat(t[1]))}else l?(u+="L".concat(e[0],",").concat(t[1]-d),u+="A ".concat(d," ").concat(d,", 0, 0, 1, ").concat(e[0]-d,", ").concat(t[1]),u+="L".concat(t[0],",").concat(t[1])):(u+="L".concat(e[0],",").concat(t[1]-d),u+="A ".concat(d," ").concat(d,", 0, 0, 0, ").concat(e[0]+d,", ").concat(t[1]),u+="L".concat(t[0],",").concat(t[1]))}return u}},{key:"getTimelineLayoutPath",value:function(){var e,t,n=this.cell,r=n.upSignX,a=n.getTimelineLayoutAlign(),i=n.getTimelineLayoutSourceCell(),o={x:i.x-n.x,y:i.y-n.y};return 1===r?(e="b"===a[0]?[o.x+i.width,o.y+i.height]:[o.x+i.width,o.y+i.height/2],t="b"===a[1]?[n.width,n.height]:[0,n.height/2]):-1===r&&(e="b"===a[0]?[o.x,o.y+i.height]:[o.x,o.y+i.height/2],t="b"===a[1]?[0,n.height]:[n.width,n.height/2]),e&&"M".concat(e[0],",").concat(e[1]," L").concat(t[0],",").concat(t[1])}},{key:"getPath",value:function(){var e=this.cell.upLayoutType;return e?"indent"===e?this.getIndentLayoutPath():"timeline"===e?this.getTimelineLayoutPath():this.getStandardLayoutPath():""}},{key:"getSytle",value:function(){var e=this.cell;return{stroke:e.computedProps.treeEdge.stroke,"stroke-width":e.getTreeEdgeStrokeWidth()}}},{key:"drawClipPath",value:function(){var e=this.cell,t=this.treeEdgeClipPath;if(t){var n=e.parent,r={x:n.x-e.x,y:n.y-e.y},a=n.getPadding(),i=[r.x+a[3],r.y+a[0]],o=[r.x+n.width-a[1],r.y+n.height-a[2]],c=[Math.min(0,r.x)-50,Math.min(0,r.y)-50],l=[Math.max(e.width,r.x+n.width)+50,Math.max(e.height,r.y+n.height)+50];t.update({d:Fn(c[0],c[1],l[0],l[1],i[0],i[1],o[0],o[1])})}}},{key:"_drawPath",value:function(){var e=this.cell,t=this.element,n=e.cache,r=this.getPath();n.treeEdgePath!==r&&(t.update({d:r}),n.treeEdgePath=r,this.drawClipPath())}},{key:"drawPosition",value:function(){this._drawPath()}},{key:"drawInherit",value:function(){this.draw()}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=e.cache,r=this.getSytle(),a=lt(r,n.treeEdgeStyle,["stroke","stroke-width"]);this._drawPath(),Object.keys(a).length>0&&(t.update(a),n.treeEdgeStyle=d()(r))}},{key:"destroy",value:function(){this.element.destroy(),this.clipPath&&this.clipPath.destroy()}}]),n}();c()(Xu,"className","TreeEdge"),c()(Xu,"configName","treeEdge"),c()(Xu,"zIndex",1);var qu=hn,Vu=Qn,Hu=Wn,Gu=gr,Zu=ar,Wu=document.createElement("span");Wu.style.visibility="hidden",Wu.style.fontSize="12px",Wu.style.fontFamily="system-ui";var Ku=function(e){b()(n,bo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.cell,t=new qu;this.element=t,e.delegateEvent(t,"click","collapsedbutton:click"),e.collapsedButtonElement=t}},{key:"measureText",value:function(e){var t=this.cell.diagram.calculatedContainer;Wu.innerHTML=e,t.appendChild(Wu);var n=Wu.getBoundingClientRect().width;return Wu.remove(),n}},{key:"_drawHotArea",value:function(){var e=this.element,t=this.bbox,n=new Hu;n.update({fill:"rgba(255, 255, 255, 0)",d:_n(-8,-8,t.width+16,t.height+16)}),e.add(n),n.toBack()}},{key:"_getCurrent",value:function(e){var t=this.cell,n=t.computedProps.treeEdge,r=t.x,a=t.y,i=t.width,o=t.height;return e+r+a+n.stroke+i+o}},{key:"_setBBox",value:function(){var e,t,n=this.direction,r=this.circleButtonWidth,a=this.circleButtonHeight;switch(n){case"top":case"bottom":e=r,t=a+8;break;default:t=a,e=r+8}this.bbox={width:e,height:t}}},{key:"drawCollapse",value:function(){var e,t=this.cell,n=this.element,r=this.direction,a=t.computedProps,i=t.diagram,o=t.graphicGroup,c=i.viewport.zoom;switch(n.clear(),o.add(n),r){case"top":e=-Math.PI/2;break;case"bottom":e=Math.PI/2;break;case"left":e=Math.PI;break;default:e=0}var l=["border-radius: 16px","width: ".concat(16,"px"),"height: ".concat(16,"px"),"cursor: pointer","background: white","border: 3px solid ".concat(a.treeEdge.stroke),"display: inline-block"];j.ua.macos||l.unshift("position: absolute");var s=[1,0,0,0,1,0,0,0,1];ce.a.translate(s,s,[8,8,1]),ce.a.rotate(s,s,e),ce.a.translate(s,s,[-8,-8,1]);var u=new Vu({html:'<span style="'.concat(l.join(";"),'" data-diagram-collapsed-button=true data-testid="diagram-collapsed-button"></span>'),x:0,y:0,width:0,height:0,matrix:s});u.css({"line-height":"normal"}),n.add(u);var d=u.htmlContainer.querySelector("span"),f=d.getBoundingClientRect(),h=f.width/c,p=f.height/c;u.update({width:h,height:p}),d.addEventListener("mouseenter",(function(){d.style.background=a.treeEdge.stroke,d.style["background-repeat"]="no-repeat",d.style["background-position"]="1px 1px",d.style["background-image"]="url(".concat("https://gw.alipayobjects.com/zos/bmw-prod/c8f8bbfd-df13-421d-85f1-e310d67c89fc.svg",")")})),d.addEventListener("mouseout",(function(){d.style.background="white",d.style["background-image"]="none"})),this.circleButtonWidth=h,this.circleButtonHeight=p,this._setBBox(),this._drawTail(),this._drawHotArea(),this._updatePosition(),this.current=this._getCurrent("collapseButton")}},{key:"drawExpand",value:function(){var e=this.cell,t=this.element,n=e.computedProps,r=e.graphicGroup,a=n.treeEdge.stroke;t.clear(),r.add(t);var i=-1;e.deepEach((function(){i++}));var o=this.measureText(String(i))+8,c=Au(a),l=new Gu({x:4,y:3,text:"".concat(i),fill:c,"dominant-baseline":"hanging"});l.dataset({diagramCollapsedButton:!0}),l.css({fontFamily:"system-ui",fontSize:"12px",cursor:"pointer"});var s=new Zu({x:0,y:0,rx:8,width:o,height:16,fill:"".concat(a)});t.add(l),l.before(s),this.circleButtonWidth=o,this.circleButtonHeight=16,this._setBBox(),this._drawTail(),this._drawHotArea(),this._updatePosition(),this.current=this._getCurrent("expandButton")}},{key:"_drawTail",value:function(){var e,t=this.element,n=this.circleButtonWidth,r=this.circleButtonHeight,a=this.direction,i=this.cell,o=i.computedProps,c={x:n/2,y:r/2};switch(a){case"top":e="M".concat(c.x," ").concat(r," L").concat(c.x," ").concat(r+8);break;case"bottom":e="M".concat(c.x," 0 L").concat(c.x," -").concat(8);break;case"left":e="M".concat(n," ").concat(c.y," L").concat(n+8," ").concat(c.y);break;default:e="M0 ".concat(c.y," L-").concat(8," ").concat(c.y)}t.add(new Hu({d:e,stroke:o.treeEdge.stroke,"stroke-width":i.getTreeEdgeStrokeWidth()}))}},{key:"_updatePosition",value:function(){var e,t,n=this.cell,r=this.element,a=this.direction,i=this.bbox,o=n.border,c=i.width,l=i.height;switch(a){case"top":e=n.width/2-c/2,t=-l;break;case"bottom":e=n.width/2-c/2,t=n.height+8;break;case"left":t="line"===o.shape?n.height-l/2:n.height/2-l/2,e=-c;break;default:t="line"===o.shape?n.height-l/2:n.height/2-l/2,e=n.width+8}r.update({matrix:[1,0,0,0,1,0,e,t,1]})}},{key:"drawPosition",value:function(){this.draw()}},{key:"updateState",value:function(){this.draw()}},{key:"_setDirection",value:function(){var e=this.cell,t=e.downLayoutType,n=e.downDirection,r=e.stem;if("standard"===t)if(0===n[0])Math.sign(-1===n[1])?this.direction="top":this.direction="bottom";else{var a=e.x+e.width/2<r.x+r.width/2;this.direction=a?"left":"right"}else"indent"===t?-1===Math.sign(n[1])?this.direction="top":this.direction="bottom":this.direction="right"}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=this.current,r=e.state;this._setDirection(),e.canExpand()?n!==this._getCurrent("expandButton")&&this.drawExpand():e.canCollapse()&&r.collapsedButtonVisible?n!==this._getCurrent("collapseButton")&&this.drawCollapse():("none"!==n&&t.remove(),this.current=this._getCurrent("none"))}},{key:"destroy",value:function(){this.element.destroy()}}]),n}();function Uu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uu(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c()(Ku,"className","CollapsedButton"),c()(Ku,"configName","bollapsedButton"),c()(Ku,"zIndex",1);var Ju=function(e){b()(n,zu);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,n);var r=14,a=1===e.depth?400:"normal",i=1===e.depth?'PingFangSC-Medium, "PingFang SC"':'PingFangSC-Regular, "PingFang SC"',o=e.model&&e.model.defaultContentStyle||{};return e=Qe({default:{collapsedButton:{},border:{outer:0,radius:3,shape:"line",fill:"rgba(255,255,255,0)"},outline:{outer:3,radius:6,fill:"rgba(255,255,255,0)","stroke-width":1,highlight:{stroke:"#349BF9",fill:"rgba(255,255,255,0)","stroke-width":1},beginEdit:{stroke:"#096dd9",fill:"rgba(255,255,255,0)","stroke-width":1},selected:{stroke:"#096dd9",fill:"rgba(52, 155, 249, .15)","stroke-width":1}},treeEdge:{}},textAreaContentStyleSheets:[{query:"self",css:Qu({outline:"none","white-space":"normal","letter-spacing":"0.1px","font-size":"".concat(r,"px"),"font-weight":"".concat(a),"font-family":i,"line-height":"1.74","word-break":"break-word",color:"#262626"},o)}],Subcells:[Xu,Ku]},e),t.call(this,e)}return y()(n,[{key:"getPadding",value:function(){var e,t=this.model;return e=1===this.depth?"line"===this.border.shape?[2,8,2,8]:[6,12,6,12]:this.depth>1?"line"===this.border.shape?[2,8,2,8]:[6,8,6,8]:B()(O()(n.prototype),"getPadding",this).call(this),t.note&&(e[1]/=2),e}}]),n}();c()(Ju,"className","MindmapCell");var $u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,e),this.options=t,Object.assign(this,t)}return y()(e,[{key:"getHGap",value:function(){return 20}},{key:"getVGap",value:function(){return 20}},{key:"beforeInsert",value:function(e){var t=this.zNodes;e.isSubTree?t.unshift(e.zNodes):t.unshift(e)}},{key:"getAxisNorm",value:function(e,t,n){var r=e.isSubTree?"t":"";return{axis:r+t,norm:r+n}}},{key:"getAxisNormValue",value:function(e,t,n){var r=e.isSubTree?"t":"",a=r+t,i=r+n;return{coord:null==e[a]?e[t]:e[a],normValue:null==e[i]?e[n]:e[i]}}},{key:"setNodeCoord",value:function(e,t,n){if(e.isSubTree){var r="t"+t,a=e[r]-n;this.deepEach(e,(function(e){e.isSubTree&&(e[r]-=a),e[t]-=a}))}else e[t]=n}},{key:"postOrder",value:function(e,t,n){var r=this;!e.children||e.isSubTree&&n||e.collapsed||e.children.forEach((function(n){r.postOrder(n,t,e)})),t(e,n)}},{key:"postOrderWithOutSelf",value:function(e,t,n){var r=this;!e.children||e.isSubTree&&n||e.collapsed||e.children.forEach((function(n){r.postOrderWithOutSelf(n,t,e),t(n,e)}))}},{key:"preOrder",value:function(e,t,n){var r=this,a=e.children;t(e,n),!a||e.isSubTree&&n||e.collapsed||e.children.forEach((function(n){r.preOrder(n,t,e)}))}},{key:"preOrderWithOutSelf",value:function(e,t,n){var r=this;!e.children||e.isSubTree&&n||e.collapsed||e.children.forEach((function(n){t(n,e),r.preOrderWithOutSelf(n,t,e)}))}},{key:"deepEach",value:function(e,t){var n=this,r=e.children;t(e),r&&e.children.forEach((function(e){n.deepEach(e,t)}))}},{key:"move",value:function(e,t,n){this.deepEach(e,(function(e){e.x+=t,e.y+=n,e.isSubTree&&(e.tx+=t,e.ty+=n)}))}},{key:"moveX",value:function(e,t){this.deepEach(e,(function(e){e.x+=t,e.isSubTree&&(e.tx+=t)}))}},{key:"moveY",value:function(e,t){this.deepEach(e,(function(e){e.y+=t,e.isSubTree&&(e.ty+=t)}))}},{key:"layout",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.constructor,r=n.VAILD_DIRECTION_ANGLES,a=e.directionAngle;this.zNodes=t,r.some((function(e){return ht(e,a)}))?(this.setKeys(e),this.normalize(e),this.setCoord(e),this.setZIndex(e)):console.warn("The layout does not support the direction")}},{key:"setKeys",value:function(){}},{key:"normalize",value:function(){}},{key:"setCoord",value:function(){}},{key:"setZIndex",value:function(){}}]),e}();c()($u,"VAILD_DIRECTION_ANGLES",[]);var ed=function(e){b()(n,$u);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"_setDepth",value:function(e){var t=this,n=this.depthAxis,r=this.depthNorm,a=this.depthGap,i=this.isPositive;this.preOrderWithOutSelf(e,(function(e){var o,c=t.getAxisNorm(e,n,r).norm,l=e.parent,s=e[a];o=i?l[n]+l[r]+s:l[n]-e[c]-s,t.setNodeCoord(e,n,o)}))}},{key:"getBreadthGap",value:function(e,t){var n,r,a=this.breadthGap;if(e.parent===t.parent)return t[a];e.depth<t.depth?(n=t,r=e):(n=e,r=t);for(var i=n.depth-r.depth,o=0;o<r.ancestors.length;o++){var c=o+i;if(r.ancestors[o]===n.ancestors[c])return n.ancestors[c-1][a]}}},{key:"getBreadthByChildren",value:function(e){var t=e.children,n=e.breadthAxis,r=e.node,a=e.breadthNorm,i=t.length,o=this.getAxisNormValue(t[0],n,a),c=this.getAxisNormValue(t[i-1],n,a),l=this.getAxisNormValue(r,n,a);return(o.coord+c.coord+c.normValue-l.normValue)/2}},{key:"_setBreadth",value:function(e){var t,n=this,r=this.breadthAxis,a=this.breadthNorm,i=this.breadthGap,o=this.isVertical,c=e.x,l=e.y;this.postOrderWithOutSelf(e,(function(e,c){var l,s,u=n.getAxisNorm(e,r,a),d=u.axis,f=u.norm;if(t){var h=e.children;if(!h||0===h.length||e.collapsed||e.isSubTree){var p=n.getBreadthGap(e,t);l=t.maxBreadth+p}else{l=n.getBreadthByChildren({children:h,breadthAxis:r,node:e,breadthNorm:a,norm:f,isVertical:o}),e.minBreadth=Math.min(e.minBreadth,l);var m=c.children[c.children.indexOf(e)-1];if(m){var g=m.maxBreadth+m[i]-e.minBreadth;g>0&&(s=g)}}}else l=0;n.setNodeCoord(e,r,l),s&&(o?n.move(e,s,0):n.move(e,0,s),e.maxBreadth+=s);var y=e[d]+e[f];e.maxBreadth=Math.max(y,e.maxBreadth||0),c.maxBreadth=Math.max(y,e.maxBreadth,c.maxBreadth||0);var v=e[d];e.minBreadth=Math.min(v,e.minBreadth||1/0),c.minBreadth=Math.min(v,e.minBreadth,c.minBreadth||1/0),t=e})),e[r]=this.getBreadthByChildren({children:e.children,breadthAxis:r,node:e,breadthNorm:a,norm:a,isVertical:o}),o?this.move(e,c-e.x,0):this.move(e,0,l-e.y)}},{key:"setKeys",value:function(e){var t=e.directionAngle,n=ht(t,Math.PI/2)||ht(t,3*Math.PI/2);n?(this.breadthAxis="x",this.breadthNorm="w",this.breadthGap="hgap",this.depthAxis="y",this.depthNorm="h",this.depthGap="vgap"):(this.breadthAxis="y",this.breadthNorm="h",this.breadthGap="vgap",this.depthAxis="x",this.depthNorm="w",this.depthGap="hgap"),ht(t,0)||ht(t,Math.PI/2)?this.isPositive=!0:this.isPositive=!1,this.isVertical=n}},{key:"setZIndex",value:function(e){var t=this,n=this.breadthAxis,r=this.breadthNorm;this.preOrder(e,(function(a){var i=a.children;if(e!==a&&t.beforeInsert(a),i&&!a.collapsed){var o=a[n]+a[r]/2;i.sort((function(e,t){return Math.abs(e[n]+e[r]-o)-Math.abs(t[n]+t[r]-o)}))}}))}},{key:"normalize",value:function(e){var t=this,n=this.isVertical;this.preOrderWithOutSelf(e,(function(e,t){e.ancestors=[t].concat(t.ancestors||[])})),this.preOrder(e,(function(e){var r={node:e,isVertical:n};e.vgap=t.getVGap(r),e.hgap=t.getHGap(r)}))}},{key:"setCoord",value:function(e){this._setDepth(e),this._setBreadth(e)}}]),n}();c()(ed,"className","Standard"),c()(ed,"VAILD_DIRECTION_ANGLES",[0,Math.PI/2,Math.PI,3*Math.PI/2]),c()(ed,"QUADRANTS",2);var td=function(e){b()(n,$u);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"setKeys",value:function(e){var t,n,r=e.directionAngle,a=this.constructor.MAIN_AXIS;ht(r,Math.PI/4)?(t=!0,n=!0):ht(r,3*Math.PI/4)?(t=!1,n=!0):ht(r,5*Math.PI/4)?(t=!1,n=!1):ht(r,7*Math.PI/4)&&(t=!0,n=!1),"x"===a?(this.mainAxis="x",this.secondaryAxis="y",this.mainNorm="w",this.secondaryNorm="h",this.mainGap="hgap",this.secondaryGap="vgap",this.isMainPositive=t,this.isSecondaryPositive=n):(this.mainAxis="y",this.secondaryAxis="x",this.mainNorm="h",this.secondaryNorm="w",this.mainGap="vgap",this.secondaryGap="hgap",this.isMainPositive=n,this.isSecondaryPositive=t)}},{key:"normalize",value:function(e){var t=this;this.preOrder(e,(function(e){var n={node:e};e.vgap=t.getVGap(n),e.hgap=t.getHGap(n)}))}},{key:"setCoord",value:function(e){this._setMainCoord(e),this._setSecondaryCoord(e)}},{key:"_setMainCoord",value:function(e){var t=this,n=this.mainAxis,r=this.mainNorm,a=this.mainGap,i=this.isMainPositive,o=e[n],c=e[r];this.preOrderWithOutSelf(e,(function(e){var l,s=t.getAxisNorm(e,n,r).norm,u=e[a],d=e[s];o=l=i?o+c+u:o-d-u,c=d,t.setNodeCoord(e,n,l)}))}},{key:"_setSecondaryCoord",value:function(e){var t=this,n=this.secondaryAxis,r=this.secondaryNorm,a=this.secondaryGap,i=this.isSecondaryPositive;this.preOrderWithOutSelf(e,(function(e){var o,c=t.getAxisNorm(e,n,r).norm,l=e.parent,s=e[a];o=i?l[n]+l[r]/2+s:l[n]+l[r]/2-e[c]-s,t.setNodeCoord(e,n,o)}))}},{key:"setZIndex",value:function(e){var t=this,n=this.mainAxis,r=this.mainNorm;this.preOrder(e,(function(a){var i=a.children;if(e!==a&&t.beforeInsert(a),i&&!a.collapsed){var o=a[n]+a[r]/2;i.sort((function(e,t){return Math.abs(e[n]+e[r]-o)-Math.abs(t[n]+t[r]-o)}))}}))}}]),n}();function nd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nd(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c()(td,"className","Indent"),c()(td,"VAILD_DIRECTION_ANGLES",[Math.PI/4,3*Math.PI/4,5*Math.PI/4,7*Math.PI/4]),c()(td,"QUADRANTS",4),c()(td,"MAIN_AXIS","y");var ad=function(e){b()(n,$u);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),t.call(this,rd({hgap1:40,hgap2:32,vgap1:0,vgap2:0,compact:!1},e))}return y()(n,[{key:"normalize",value:function(e){var t=this;this.preOrder(e,(function(e){var n={node:e};e.align=t.getAlign(n)}))}},{key:"setKeys",value:function(e){var t=e.directionAngle;ht(t,0)?(this.mainAxis="x",this.secondaryAxis="y",this.mainNorm="w",this.secondaryNorm="h",this.mainGap="hgap",this.secondaryGap="vgap",this.secondaryDownSign="downSignY",this.isMainPositive=!0):ht(t,Math.PI)&&(this.mainAxis="x",this.secondaryAxis="y",this.mainNorm="w",this.secondaryNorm="h",this.mainGap="hgap",this.secondaryGap="vgap",this.secondaryDownSign="downSignY",this.isMainPositive=!1)}},{key:"setCoord",value:function(e){this._setMainCoord(e),this._setSecondaryCoord(e)}},{key:"_setMainCoord",value:function(e){var t=this,n=this.secondaryDownSign,r=this.mainAxis,a=this.mainNorm,i=this.mainGap,o=this.isMainPositive,c=this.compact;if(o){var l=e[r]+e[a],s=l,u=l,d=l;e.children.forEach((function(e){var o,f=t.getAxisNorm(e,r,a).norm;-1===e[n]&&c?(d>s?(o=t["".concat(i,"1")],l=d):(o=t["".concat(i,"2")],l=s),s=(l+=o)+e[f],d=l+e[a]):(d>u?(o=t["".concat(i,"1")],l=d):(o=t["".concat(i,"2")],l=u),u=(l+=o)+e[f],d=l+e[a]),t.setNodeCoord(e,r,l)}))}else{var f=e[r],h=f,p=f,m=f;e.children.forEach((function(e){var o,l=t.getAxisNorm(e,r,a).norm;-1===e[n]&&c?(m<h?(o=t["".concat(i,"1")],f=m):(o=t["".concat(i,"2")],f=h),f=f-o-e[l],h=f,m=f+(e[l]-e[a])):(m<p?(o=t["".concat(i,"1")],f=m):(o=t["".concat(i,"2")],f=p),f=f-o-e[l],p=f,m=f+(e[l]-e[a])),t.setNodeCoord(e,r,f)}))}}},{key:"_setSecondaryCoord",value:function(e){var t,n,r=this.secondaryAxis,a=this.secondaryNorm,i=e.children,o=this["move".concat(r.toUpperCase())].bind(this);i.forEach((function(c,l){var s=0===l?e:i[l-1],u=c.align;"b"===u[0]?t=s[r]+s[a]:"c"===u[0]&&(t=s[r]+s[a]/2),"c"===u[1]?n=function(e){return t-e[a]/2}:"b"===u[1]&&(n=function(e){return t-e[a]});var d=n(c)-c[r];o(c,d)}))}},{key:"setZIndex",value:function(e){var t=this,n=this.mainAxis,r=this.mainNorm;this.preOrder(e,(function(a){var i=a.children;if(e!==a&&t.beforeInsert(a),i&&!a.collapsed){var o=a[n]+a[r]/2;i.sort((function(e,t){return Math.abs(e[n]+e[r]-o)-Math.abs(t[n]+t[r]-o)}))}}))}}]),n}();function id(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function od(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?id(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):id(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cd(e,t,n){return{coord:e[t],normValue:e[n]}}c()(ad,"className","Timeline"),c()(ad,"VAILD_DIRECTION_ANGLES",[0,Math.PI]),c()(ad,"QUADRANTS",2);var ld=function(e){b()(n,zu);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,n);var a=r.model.defaultContentStyle||{};return r=Qe({default:{border:{outer:0,radius:4,shape:"rect",fill:"#596086","stroke-width":2,stroke:"rgba(0, 0, 0, 0)"},outline:{outer:2,radius:6,"stroke-width":2,selected:{stroke:"#096dd9",fill:"rgba(52, 155, 249, .15)","stroke-width":1},highlight:{stroke:"#349BF9",fill:"none"},beginEdit:{stroke:"#096dd9",fill:"rgba(255,255,255,0)"}},textArea:{className:"lake-diagram-mindmap-root"},layout:{type:"standard",direction:[1,0]},treeEdge:{stroke:"#959EA6"},tapered:!1,rainbow:!0,note:{width:20,height:20,padding:[0,8,0,0]}},textAreaContentStyleSheets:[{query:"self",css:od({"letter-spacing":"normal","font-size":"18px","font-family":'PingFangSC-Medium, "PingFang SC"',"line-height":"1.74","word-break":"break-word",outline:"none",color:"white"},a)}]},r),(e=t.call(this,r)).isStem=!0,e.initLayoutEngine(),e}return y()(n,[{key:"minWidth",get:function(){return 52}},{key:"canCollapse",value:function(){return!1}},{key:"getPadding",value:function(){return[6,this.model.note?8:16,6,16]}},{key:"_createLayoutModel",value:function(){var e=this.cellMap,t=this.model,n=[],r=Ke(t,(function(t){var r=e[t.id],a={x:r.x,y:r.y,w:r.width,h:r.height,layout:r.layout.type,direction:r.layout.direction,quadrantConstraint:r.layout.quadrantConstraint,quadrant:r.layout.quadrant,collapsed:r.collapsed,border:{shape:r.border.shape},cell:r};return"timeline"===a.layout&&n.push(a),a}));return n.forEach((function(e){e.children.forEach((function(t,n){t.layout&&!Mo("timeline",t.layout)||(t.layout="indent",t.direction=[1,1],0===e.direction[1]?t.quadrantConstraint=n%2==0?[4]:[1]:t.quadrantConstraint=n%2==0?[1]:[2]),t.children&&t.children.forEach((function(t){t.layout||(t.layout="standard",t.direction=[1,0],-1===e.direction[0]?t.quadrantConstraint=[2]:t.quadrantConstraint=[1])}))}))})),r}},{key:"initLayoutEngine",value:function(){this.layoutHelper=new Lo({beforeLayoutAdjust:function(e){e.needAfterAdjustedNodes=[],Xe(e,(function(t){"timeline"!==t.parent.layout&&t.collapsed&&(1===t.downSignY?t.h+=24:-1===t.downSignY?(t.h+=24,e.needAfterAdjustedNodes.push({node:t,key:"y",value:24})):1===t.downSignX?t.w+=24:-1===t.downSignX&&(t.w+=24,e.needAfterAdjustedNodes.push({node:t,key:"x",value:24})))}))},afterLayoutAdjust:function(e){e.needAfterAdjustedNodes.forEach((function(e){var t=e.node,n=e.key,r=e.value;t[n]+=r}))},algorithms:{timeline:new ad({getAlign:function(e){return e.node.cell.getTimelineLayoutAlign()}}),standard:new ed({getBreadthByChildren:function(e){var t=e.children,n=e.breadthAxis,r=e.node,a=e.breadthNorm,i=e.isVertical,o=t.length,c=cd(t[0],n,a),l=cd(t[o-1],n,a),s=cd(r,n,a);if(!i&&[c,l].every((function(e){return!e.isSubTree}))){if("line"===t[0].border.shape&&"line"===r.border.shape)return(c.coord+c.normValue+l.coord+l.normValue)/2-s.normValue;if("line"===t[0].border.shape&&"line"!==r.border.shape)return(c.coord+c.normValue+l.coord+l.normValue-s.normValue)/2;if("line"!==t[0].border.shape&&"line"===r.border.shape&&t[0]===t[o-1])return c.coord+c.normValue/2-s.normValue}return(c.coord+l.coord+l.normValue-s.normValue)/2},getHGap:function(e){var t=e.isVertical,n=e.node.depth;return t?1===n?48:24:n>1?48:64},getVGap:function(e){var t,n=e.isVertical,r=e.node,a=r.depth,i=r.border;return n?t=64:1===a?t=24:(t=2===a?10:8,"line"!==i.shape&&(t*=2)),t}}),indent:new td({getHGap:function(){return 16},getVGap:function(e){var t=e.node,n=t.parent;return n&&t===n.children[0]&&-1===t.upSignY?24:8}})}})}},{key:"_layoutPosition",value:function(e){e.forEach((function(e){var t=e.cell;t.x=e.x||0,t.y=e.y||0}))}},{key:"_layoutZIndex",value:function(e){var t=this,n=this.diagram,r=n.rootGroup;n.contentEditor.isBegin||e.forEach((function(e,n){var a=e.cell;a.zIndex=n,a!==t&&r.insertBefore(a.graphicGroup,t.graphicGroup)}))}},{key:"_layoutdrectionAngle",value:function(e){e.forEach((function(e){e.cell.upDirection=e.upDirection,e.cell.downDirection=e.downDirection,e.cell.upLayoutType=e.upLayoutType,e.cell.downLayoutType=e.downLayoutType,e.cell.layoutQuadrantConstraint=e.quadrantConstraint||[1],e.cell.downSignX=e.downSignX,e.cell.downSignY=e.downSignY,e.cell.upSignX=e.upSignX,e.cell.upSignY=e.upSignY}))}},{key:"executeLayout",value:function(){var e=this.layoutHelper,t=this._createLayoutModel();e.model=t,e.execute();var n=[],r=e.tree;Ye(r,(function(e){n.push(e)})),this._layoutPosition(n),this._layoutZIndex(r.zNodes),this._layoutdrectionAngle(n)}},{key:"destroy",value:function(){this.layoutHelper.destroy(),B()(O()(n.prototype),"destroy",this).call(this)}}]),n}();c()(ld,"className","MindmapStem");var sd={treeEdge:!0,layout:!0},ud=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"beforedraw",(function(t){t&&"remove"!==t.action&&(function(e,t){var n=e.stems.filter((function(e){return e.isMindmap}));n.length>0&&(t.inherit(sd,n),n.forEach((function(e){e.deepEach((function(t){t!==e&&t.drawInherit()}))})))}(t,e),function(e,t){if("update"===e.action){var n=e.models.filter((function(e){var n=t.find(e.id);return n&&n.isMindmap&&n.isStem}));n.length>0&&n.forEach((function(e){if(void 0!==e.tapered||void 0!==e.rainbow){var n=t.find(e.id);void 0!==e.rainbow&&(!1===e.rainbow?n.forEach((function(e){e.updateModel({treeEdge:{stroke:"#959EA6"}})})):n.forEach((function(e,t){e.updateModel({treeEdge:{stroke:Ou[t%7]}})})),t.inherit(sd,[n])),n.deepEachWithoutSelf((function(e){e.drawInner()}))}}))}}(t,e))}))}}]),n}();var dd=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"afterselect",(function(){var t=e.selector.selections;if(1===t.length&&t[0].isMindmap){var n=t[0];e.viewport.scrollIntoView(n)}}))}}]),n}();var fd=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"mindmapcell:mouseenter",(function(t){var n=t.cell;!e.signal.draggingMindmapCell&&n.isMindmap&&!n.model.isPlaceholder&&n.highlight()})),this.bind(e,"mindmapcell:mouseleave",(function(e){var t=e.cell;t&&t.isMindmap&&t.unHighlight()}))}}]),n}();var hd=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){var t;function n(){t&&t.hideCollapsedButton(),t=void 0}this.bind(e,"mindmapcell:mouseenter",(function(n){var r=n.cell;!e.signal.draggingMindmapCell&&r.isMindmap&&!r.model.isPlaceholder&&r.canCollapse()&&(r.showCollapsedButton(),t=r)})),this.bind(e,"mindmapcell:mouseleave",(function(e){var t=e.cell,r=e.nativeEvent;!t||!t.isMindmap||r.relatedTarget&&r.relatedTarget.closest('[data-lake_mindmap_add_button="true"]')||n()})),this.bind(e,"addbutton:mouseleave",(function(){n()})),this.bind(e,"aftercommandexecute",(function(e){"Expand"===e.commandName&&n()}))}}]),n}();function pd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var md=function(){function e(){m()(this,e)}return y()(e,[{key:"createHotArea",value:function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pd(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({child:e.child,stem:e.stem},t)}},{key:"stem",value:function(){}},{key:"child",value:function(){}},{key:"prevSibling",value:function(){}},{key:"nextSibling",value:function(){}},{key:"betweenSibling",value:function(){}}]),e}();var gd=function(e){b()(n,md);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"stem",value:function(e){var t=e.child,n=e.hotAreas,r=e.postFix,a=t.upDirection;0===Math.sign(a[0])?(n.push(this.createHotArea(e,{minX:t.minX-50,minY:t.minY-60,maxX:t.maxX+50,maxY:(t.minY+t.maxY)/2,parent:t.id,id:t.id+"2"+r,nth:t.children.length,quadrant:2,color:"orange"})),n.push(this.createHotArea(e,{minX:t.minX-50,minY:(t.minY+t.maxY)/2,maxX:t.maxX+50,maxY:t.maxY+60,parent:t.id,id:t.id+"1"+r,nth:t.children.length,quadrant:1,color:"pink"}))):(n.push(this.createHotArea(e,{minX:t.minX-50,minY:t.minY-60,maxX:(t.minX+t.maxX)/2,maxY:t.maxY+60,parent:t.id,id:t.id+"2"+r,nth:t.children.length,quadrant:2,color:"orange"})),n.push(this.createHotArea(e,{minX:(t.minX+t.maxX)/2,minY:t.minY-60,maxX:t.maxX+50,maxY:t.maxY+60,parent:t.id,id:t.id+"1"+r,nth:t.children.length,quadrant:1,color:"pink"})))}},{key:"child",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.postFix,i=e.stem,o=n.upDirection,c=Math.sign(o[0]),l=this.createHotArea(e,{parent:n.id,id:NaN+n.id+a,nth:0,color:"green",quadrant:n.layout.quadrant,addOrder:"push",stem:i});0===c?n.minY>r.minY?Object.assign(l,{minX:n.minX,maxX:n.maxX,minY:n.maxY,maxY:n.maxY+60}):Object.assign(l,{minX:n.minX,maxX:n.maxX,minY:n.minY-60,maxY:n.minY}):n.minX>r.minX?Object.assign(l,{minX:n.maxX,minY:n.minY-0,maxX:n.maxX+100,maxY:n.maxY+0}):Object.assign(l,{minX:n.minX-100,minY:n.minY-0,maxX:n.minX,maxY:n.maxY+0}),t.push(l)}},{key:"prevSibling",value:function(e){var t,n,r=e.hotAreas,a=e.child,i=e.parent,o=e.index,c=e.postFix,l=a.upDirection,s=Math.sign(l[0]),u=this.createHotArea(e,{parent:i.id,id:void 0+a.id+i.id+c,quadrant:a.layout.quadrant,color:"yellow",nth:o});if(0===s){var d=1===a.depth&&1===a.layout.quadrant,f=1===a.depth&&2===a.layout.quadrant;Object.assign(u,{minX:(n=a.minX-16,f||d?n-50:n),minY:d?a.minY-50:a.minY,maxX:(a.minX+a.maxX)/2,maxY:f?a.maxY+50:a.maxY})}else{var h=1===a.depth&&1===a.layout.quadrant,p=1===a.depth&&2===a.layout.quadrant;Object.assign(u,{minX:h?a.minX-50:a.minX,minY:(t=a.minY-16,p||h?t-50:t),maxX:p?a.maxX+50:a.maxX,maxY:(a.minY+a.maxY)/2})}r.push(u)}},{key:"nextSibling",value:function(e){var t,n,r=e.hotAreas,a=e.child,i=e.parent,o=e.index,c=e.postFix,l=a.upDirection,s=Math.sign(l[0]),u=this.createHotArea(e,{parent:i.id,id:a.id+void 0+i.id+c,color:"red",nth:o+1,addOrder:"push",quadrant:a.layout.quadrant});if(0===s){var d=1===a.depth&&1===a.layout.quadrant,f=1===a.depth&&2===a.layout.quadrant;Object.assign(u,{minX:(a.minX+a.maxX)/2,minY:d?a.minY-50:a.minY,maxX:(n=a.maxX+16,f||d?n+50:n),maxY:f?a.maxY+50:a.maxY})}else{var h=1===a.depth&&1===a.layout.quadrant,p=1===a.depth&&2===a.layout.quadrant;Object.assign(u,{minX:h?a.minX-50:a.minX,minY:(a.minY+a.maxY)/2,maxX:p?a.maxX+50:a.maxX,maxY:(t=a.maxY+16,p||h?t+50:t)})}r.push(u)}},{key:"betweenSibling",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.index,i=e.next,o=e.postFix,c=n.upDirection,l=Math.sign(c[0]),s=this.createHotArea(e,{parent:r.id,id:n.id+(i?i.id:void 0)+r.id+o,quadrant:n.layout.quadrant,color:"blue",nth:a+1});if(0===l){var u=1===n.depth&&1===n.layout.quadrant,d=1===n.depth&&2===n.layout.quadrant;Object.assign(s,{minX:(n.minX+n.maxX)/2,minY:2===n.layout.quadrant?Math.max(n.minY,i.minY):u?n.minY-50:n.minY,maxX:(i.minX+i.maxX)/2,maxY:1===n.layout.quadrant?Math.min(n.maxY,i.maxY):d?n.maxY+50:n.maxY})}else Object.assign(s,{minX:2===n.layout.quadrant?n.minX:1===n.depth?n.minX-50:n.minX,minY:(n.minY+n.maxY)/2,maxX:1===n.layout.quadrant?n.maxX:1===n.depth?n.maxX+50:n.maxX,maxY:(i.minY+i.maxY)/2});t.push(s)}}]),n}();var yd=function(e){b()(n,md);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"stem",value:function(e){var t=e.child,n=e.hotAreas,r=e.postFix,a=t.upDirection,i=Math.sign(a[0]),o=Math.sign(a[1]),c=this.createHotArea(e,{parent:t.id,id:t.id+"1"+r,nth:0,quadrant:1,color:"pink"});1===i&&1===o?Object.assign(c,{minX:(t.minX+t.maxX)/2,minY:(t.minY+t.maxY)/2,maxX:t.maxX+50,maxY:t.maxY+30}):-1===i&&1===o?Object.assign(c,{minX:t.minX-50,minY:(t.minY+t.maxY)/2,maxX:(t.minX+t.maxX)/2,maxY:t.maxY+30}):-1===i&&-1===o?Object.assign(c,{minX:t.minX-50,minY:t.minY-30,maxX:(t.minX+t.maxX)/2,maxY:(t.minY+t.maxY)/2}):1===i&&-1===o&&Object.assign(c,{minX:(t.minX+t.maxX)/2,minY:t.minY-30,maxX:t.maxX+50,maxY:(t.minY+t.maxY)/2}),n.push(c)}},{key:"child",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.postFix,i=this.createHotArea(e,{parent:n.id,id:NaN+n.id+a,nth:0,color:"green",quadrant:n.layout.quadrant,addOrder:"push"}),o=n.downDirection,c=1===Math.sign(o[1])?32:-32;n.minX>r.minX?Object.assign(i,{minX:n.maxX,minY:n.minY-0+c,maxX:n.maxX+50,maxY:n.maxY+0+c}):Object.assign(i,{minX:n.minX-50,minY:n.minY-0+c,maxX:n.minX,maxY:n.maxY+0+c}),t.push(i)}},{key:"prevSibling",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.index,i=e.postFix,o=n.upDirection,c=Math.sign(o[1]),l=this.createHotArea(e,{parent:r.id,id:void 0+n.id+r.id+i,quadrant:n.layout.quadrant,color:"yellow",nth:a});1===c?Object.assign(l,{minX:n.minX,minY:n.minY-4,maxX:n.maxX,maxY:(n.minY+n.maxY)/2}):Object.assign(l,{minX:n.minX,minY:(n.minY+n.maxY)/2,maxX:n.maxX,maxY:n.maxY+4}),t.push(l)}},{key:"nextSibling",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.index,i=e.postFix;if(!(n.children.length>1)||n.collapsed){var o=n.upDirection,c=Math.sign(o[1]),l=this.createHotArea(e,{parent:r.id,id:n.id+void 0+r.id+i,color:"red",nth:a+1,addOrder:"push",quadrant:n.layout.quadrant});1===c?Object.assign(l,{minX:n.minX,minY:(n.minY+n.maxY)/2,maxX:n.maxX,maxY:n.maxY+16}):Object.assign(l,{minX:n.minX,minY:n.minY-16,maxX:n.maxX,maxY:(n.minY+n.maxY)/2}),t.push(l)}}},{key:"betweenSibling",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.index,i=e.next,o=e.postFix,c=e.stem,l=this.createHotArea(e,{parent:r.id,id:n.id+(i?i.id:void 0)+r.id+o,color:"blue",nth:a+1,stem:c}),s=(n.minY+n.maxY)/2,u=(i.minY+i.maxY)/2;Object.assign(l,{minX:n.minX,minY:Math.min(s,u),maxX:n.maxX,maxY:Math.max(s,u)}),t.push(l)}}]),n}();var vd=function(e){b()(n,md);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"prevSibling",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.index,i=e.postFix,o=n.upDirection,c=Math.sign(o[0]),l=this.createHotArea(e,{parent:r.id,id:void 0+n.id+r.id+i,quadrant:n.layout.quadrant,color:"yellow",nth:a});1===c?Object.assign(l,{minX:r.maxX,minY:r.minY,maxX:n.minX,maxY:r.maxY}):Object.assign(l,{minX:n.maxX,minY:r.minY,maxX:r.minX,maxY:r.maxY}),t.push(l)}},{key:"betweenSibling",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.index,i=e.next,o=e.postFix,c=e.stem;if(i){var l=n.upDirection,s=Math.sign(l[0]),u=this.createHotArea(e,{parent:r.id,id:n.id+(i?i.id:void 0)+r.id+o,color:"blue",nth:a+1,stem:c});1===s?Object.assign(u,{minX:n.maxX,minY:n.minY,maxX:i.minX,maxY:n.maxY}):Object.assign(u,{minX:i.maxX,minY:n.minY,maxX:n.minX,maxY:n.maxY}),t.push(u)}}},{key:"nextSibling",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.index,i=e.postFix,o=e.root,c=n.upDirection,l=Math.sign(c[0]),s=this.createHotArea(e,{parent:r.id,id:n.id+void 0+r.id+i,color:"red",nth:a+1,addOrder:"push",quadrant:n.layout.quadrant,root:o});1===l?Object.assign(s,{minX:n.maxX,minY:n.minY,maxX:n.maxX+32,maxY:n.maxY}):Object.assign(s,{minX:n.minX-32,minY:n.minY,maxX:n.minX,maxY:n.maxY}),t.push(s)}}]),n}(),bd=Wn,xd={standard:new gd,indent:new yd,timeline:new vd},kd=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];m()(this,e),this.diagram=t,this.drawHotArea=n,this.eventHelper=new ja,this.hotAreas=[],this.activated=!1,this._bindEvent()}return y()(e,[{key:"turnOn",value:function(){this.update(),this.activated=!0}},{key:"turnOff",value:function(){this.activated=!1}},{key:"_bindEvent",value:function(){var e=this,t=this.diagram,n=this.drawHotArea,r=this.eventHelper,a=this.activated;r.bind(t,"afterstemcelllayout",(function(t){var n=t.stem;a&&e.update(n)})),n&&r.bind(t,"afterviewportchange",(function(){e.draw()}))}},{key:"update",value:function(e){var t,n=this.diagram,r=this.drawHotArea;if(t=e?[e]:n.getCells().filter((function(e){return e.isStem&&e.isMindmap})),0!==t.length){var a=[],i=t.map((function(e){return d()(e.model)}));i.forEach((function(e){Ye(e,(function(e){var t=n.find(e.id);e.minX=t.x,e.minY=t.y,e.maxX=t.x+t.width,e.maxY=t.y+t.height,e.depth=t.depth,e.layout=t.computedProps.layout,e.visible=t.state.visible,e.collapsed=t.collapsed,e.isStem=t.isStem,e.stem=t.stem.model.id,e.upLayoutType=t.upLayoutType,e.downLayoutType=t.downLayoutType,e.upDirection=t.upDirection,e.downDirection=t.downDirection,e.zIndex=t.zIndex,e.children=e.children&&e.children.filter((function(e){return!e.isPlaceholder}))||[]}))})),i.forEach((function(e){Ye(e,(function(e,t,n){if(!e.isPlaceholder&&e.visible){var r=e.upLayoutType,i=e.downLayoutType,o=e.children,c=t?function(e,t,n){var r=n.children,a=e;if(!n.parent)for(;r[a]&&!pt(r[a].upDirection,t.upDirection);)a++;if(r[a]&&pt(r[a].upDirection,t.upDirection))return r[a]}(n+1,e,t):null,l=t?function(e,t,n){var r=n.children,a=e;if(!n.parent)for(;r[a]&&!pt(r[a].upDirection,t.upDirection);)a--;if(r[a]&&pt(r[a].upDirection,t.upDirection))return r[a]}(n-1,e,t):null,s=xd[i],u=xd[r],d={hotAreas:a,child:e,parent:t,next:c,prev:l,index:n,stem:e.stem,postFix:"placeholder"};e.isStem?s.stem(d):(0===o.length&&s.child(d),l||u.prevSibling(d),c||u.nextSibling(d),c&&u.betweenSibling(d))}}))})),this.hotAreas=a,this.buildQuadtree(),r&&this.draw()}}},{key:"buildQuadtree",value:function(){var e=Ce(),t=this.hotAreas.map((function(e){return[e.minX,e.minY,e.maxX-e.minX,e.maxY-e.minY,e]}));e.addAll(t),this.quadtree=e,this.maxWidth=at(t,(function(e){return e[2]})),this.maxHeight=at(t,(function(e){return e[3]}))}},{key:"_search",value:function(e,t){var n=this.quadtree,r=this.maxWidth,a=this.maxHeight,i=[];return n.visit((function(n,o,c,l,s){var u=n.data;return u&&u[0]+u[2]>=e&&u[0]<e&&u[1]+u[3]>=t&&u[1]<t&&i.push(u[4]),o>=e||c>=t||l+r<e||s+a<t})),i.sort((function(e,t){return t.zIndex-e.zIndex})),i}},{key:"hit",value:function(e){return this._search(e[0],e[1])[0]}},{key:"draw",value:function(){var e=this.diagram.frontRootGroup;e.clear(),this.hotAreas.forEach((function(t){var n=t.minX,r=t.minY,a=t.maxX,i=t.maxY,o=t.color,c=new bd({d:_n(n,r,a-n,i-r),fill:o,opacity:.5,"pointer-events":"none"});e.add(c)}))}},{key:"destroy",value:function(){this.eventHelper.destroy(),this.diagram=void 0,this.drawHotArea=void 0,this.eventHelper=void 0}}]),e}();function wd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Od=ar,Cd=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){var t,n,r,a,i,o,l,s,u,f,h,p,m=new kd(e);function g(){if(e.viewport.preventDefault(!1),n&&e.remove(n.id),n){var c=d()(r);c.forEach((function(e){Ye(e,(function(e){delete e.zIndex}))})),n.parent===n.stem&&c.forEach((function(e){var t=n.quadrant||null;e.layout?e.layout.quadrant=t:e.layout={quadrant:t}}));var f=t.map((function(e,t){return{parent:n.parent,nth:n.nth+t}})),h=e.find(n.parent);t.forEach((function(e,t){var n=c[t];1===e.depth&&h.depth>0&&n&&n.treeEdge&&n.treeEdge.stroke&&delete n.treeEdge.stroke})),h.isStem&&c.forEach((function(t,n){var r=e.query.appendChildModel(h,n);t.treeEdge?t.treeEdge.stroke||(t.treeEdge.stroke=r.treeEdge.stroke):t.treeEdge={stroke:r.treeEdge.stroke}})),e.command.execute("MindmapMoveNode",{dragCells:t,dragCellModels:r,addCellModels:c,addOptions:f,dragCellOptions:s})}else r&&e.add(r,s);u&&e.delegator.remove(u),u=void 0,t=void 0,r=void 0,n=void 0,a=void 0,i=void 0,s=void 0,o=void 0,l=void 0,p=void 0,e.signal.draggingMindmapCell=!1,m.turnOff()}this.mindmapHotAreaHelper=m,this.bind(e,"mousedown",(function(n){var r=n.target,o=n.clientX,c=n.clientY,l=n.button,s=e.getCell(r);s&&s.isMindmap&&!s.isStem&&0===l&&!e.signal.contentEditing&&(a=o,i=c,e.selector.selections.length>1&&e.selector.selections.includes(s)?(t=(t=e.selector.selections.concat([])).filter((function(e){return!e.isStem})),(t=e.deduplicate(t)).sort((function(e,t){return e.getNth()-t.getNth()})),p=!0):t=[s])})),this.bind(e,"mousemove",(function(g){if(t&&0!==t.length){if(!r&&Math.abs(a-g.clientX)+Math.abs(i-g.clientY)>10&&!e.signal.contentEditing){e.selector.clear(),r=t.map((function(e){return d()(e.model)})),s=t.map((function(t){return e.getCellOptions(t)}));var y=e.viewport.invertClient([g.clientX,g.clientY]);u=e.delegator.create((function(e){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=new Od({x:t-24.5-r,y:n-11+r,height:22,width:49,rx:4,ry:4,fill:"rgba(52, 155, 249, .2)"}),i=new Od({x:t-24.5+r,y:n-11-r,height:22,width:49,rx:4,ry:4,fill:"rgba(52, 155, 249, .2)"});e.add(a),e.add(i)}(e,y[0],y[1],p?3:0)})),e.remove(t),e.signal.draggingMindmapCell=!0,m.turnOn(),e.viewport.preventDefault(),o=g.clientX,l=g.clientY,e.emit("mindmap:afterdragchildcellstart")}if(u){var v=e.viewport.zoom;f=(g.clientX-o)/v,h=(g.clientY-l)/v,u.translate(f,h)}if(r){var b=e.viewport.invertClient([g.clientX,g.clientY]),x=m.hit(b);if(n&&(x?n.id!==x.id&&e.remove(n.id):e.remove(n.id)),x&&!e.find(x.id)){var k=e.add(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wd(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isPlaceholder:!0,width:32,height:10,border:{shape:"rect",fill:"#C5E3FF"},treeEdge:{stroke:"#C5E3FF"},layout:{quadrant:x.quadrant}},x),{parent:x.parent,nth:x.nth});D()(k,1)[0].toBack()}n=x}}})),this.bind(e,"keydown",(function(e){27===e.which&&g()})),this.bind(e,"mouseup",(function(){g()})),this.bind(e,"mouseleave",(function(){g()}))}},{key:"unbind",value:function(){this.mindmapHotAreaHelper&&(this.mindmapHotAreaHelper.destroy(),this.mindmapHotAreaHelper=void 0),B()(O()(n.prototype),"unbind",this).call(this)}}]),n}();function Ed(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ed(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ed(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _d="rgba(255, 255, 255, 0.65)";function jd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add_button",t=new hn,n=new Wn({fill:"rgba(255,255,255,0)"}),r=new Wn({stroke:"#BFBFBF",fill:_d}),a=new Cr,i=new Wn({fill:"url(#".concat(a.id,")")});return t.dataset({lake_prevent_click_unselect:!0,lake_mindmap_add_button:!0,testid:e}),n.css({cursor:"default"}),r.css({cursor:"pointer"}),t.add(n),t.add(r),{group:t,background:n,btn:r,tail:i,gradient:a}}function Sd(e){var t=e.x,n=e.y,r=e.width,a=e.height,i=e.group,o=e.background,c=e.btn,l=e.tail,s=e.gradient,u=e.zoom,d=e.verticalAlign,f=void 0===d?"center":d,h=e.tailConfig,p=9/u,m=4/u,g={x:t+r/2,y:n+a/2},y=0,v=a;"bottom"===f&&(y=a/2,v+=p),o.update({d:_n(t,n,r,v)});var b=g.x,x=g.y+y;if(c.update({stroke:"#BFBFBF",d:Rn(b,x,p)+"M".concat(b,",").concat(x-m," L").concat(b,",").concat(x+m)+"M".concat(b+m,",").concat(x," L").concat(b-m,",").concat(x),"stroke-width":2/u}),h){var k=h.stroke,w=h.position,O=10/u,C="rgba(255,255,255,0)";i.add(l),"right"===w?(s.update("l(0) 0:".concat(k," 1:").concat(C)),l.update({d:_n(b+p,x-h["stroke-width"]/2,O,h["stroke-width"])})):"left"===w?(s.update("l(0) 0:".concat(C," 1:").concat(k)),l.update({d:_n(b-O-p,x-h["stroke-width"]/2,O,h["stroke-width"])})):"bottom"===w?(s.update("l(270) 0:".concat(C," 1:").concat(k)),l.update({d:_n(b-h["stroke-width"]/2,x+p,h["stroke-width"],O)})):"top"===w&&(s.update("l(270) 0:".concat(k," 1:").concat(C)),l.update({d:_n(b-h["stroke-width"]/2,x-O-p,h["stroke-width"],O)}))}else l.remove()}var Rd=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e;return m()(this,n),(e=t.call(this)).horizontalElements=jd(),e.verticalElements=jd(),e}return y()(n,[{key:"init",value:function(e){var t,n=this,r=e.frontRootGroup,a=e.defs,i=this.horizontalElements,o=this.verticalElements,c=function(){},l=function(){};function s(){i.group.remove(),o.group.remove(),c=function(){},l=function(){},t=void 0}function u(e){return i.group.rendererElement.contains(e)||o.group.rendererElement.contains(e)}a.add(i.gradient),a.add(o.gradient),this.horizontalElements=i,this.verticalElements=o,this.bind(i.btn,"click",(function(n){n.stopPropagation(),e.selector.select([t]),c(),s()})),this.bind(o.btn,"click",(function(n){n.stopPropagation(),e.selector.select([t]),l(),s()})),this.bind(e,"cell:dragstart",(function(){s()})),[i,o].forEach((function(r){var a=r.group,i=r.btn;n.bind(a,"mouseenter",(function(e){e.stopPropagation(),i.update({stroke:"#595959",fill:"white"})})),n.bind(a,"mouseleave",(function(n){n.stopPropagation(),i.update({stroke:"#BFBFBF",fill:_d}),t&&t.graphicGroup.rendererElement.contains(n.relatedTarget)||u(n.relatedTarget)||(e.emit("addbutton:mouseleave"),s())}))})),this.bind(e,"afterchange",se()((function(){!t||e.find(t.model.id)&&!t.collapsed||s()}),16)),this.bind(e,"mindmapcell:mouseenter",(function(n){var a=n.cell;if(!e.signal.cellDragStart&&a.isMindmap&&!a.collapsed){var s=a.downSignX,u=a.downSignY,d=0!==u,f=e.viewport.zoom,h=38/f,p=a.canCollapse()?-18:0,m=(d||"line"!==a.border.shape?-1:0)/f+p,g={x:a.x+a.width-m,y:a.y,width:h,height:a.height},y={x:a.x+(a.width-h)/2,y:a.y+a.height-m,width:h,height:h};if(t=a,i.group.remove(),o.group.remove(),d)-1===u&&(y.y=a.y-h+m),g.x-=m,y.tailConfig=Pd({position:1===u?"top":"bottom"},e.query.appendChildAddButtonTail(a).treeEdge),l=function(){e.command.execute("MindmapAppendChild")};else{var v=-1===s;v&&(g.x=a.x-h+m),y.height-=4*m,"line"===a.border.shape&&(g.verticalAlign="bottom"),g.tailConfig=Pd({position:v?"right":"left"},e.query.appendChildAddButtonTail(a).treeEdge),c=function(){e.command.execute("MindmapAppendChild")}}d?(r.add(o.group),Sd(Pd(Pd({},y),{},{zoom:f},o))):(r.add(i.group),Sd(Pd(Pd({},g),{},{zoom:f},i)))}})),this.bind(e,"mindmapcell:mouseleave",(function(t){var n=t.nativeEvent;u(n.relatedTarget)||e.elementMap.fullScreenBtn.contains(n.relatedTarget)||s()})),this.bind(e.contentEditor,"beginedit",(function(){s()})),this.bind(e.contentEditor,"change",(function(){s()})),this.bind(e,"afterselect",(function(){(e.selector.selections.length>1||1===e.selector.selections.length&&e.selector.selections[0]!==t)&&s()}))}}]),n}();function Md(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Bd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bd(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function Bd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ad(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Dd=Wn,Nd={"top-right":"nesw-resize","top-left":"nwse-resize","bottom-right":"nwse-resize","bottom-left":"nesw-resize"},Ld=function(){function e(){m()(this,e);var t=new Dd({stroke:"white",fill:"#096dd9"});t.css({cursor:"nesw-resize"}),t.dataset({lake_prevent_click_unselect:!0}),this.element=t,this.position="top-right"}return y()(e,[{key:"contains",value:function(e){return this.element.rendererElement.contains(e)}},{key:"update",value:function(e,t){var n,r,a,i=e.upDirection,o=Math.sign(i[0]),c=Math.sign(i[1]),l=2;"line"===e.border.shape?l=1:"capsule"===e.border.shape&&(l=-(e.width>e.height?e.height:e.width)/9),-1===o?(n="top-left",r=e.x-l,a=e.y-l):1===c&&0===o?(n="bottom-right",r=e.x+e.width+l,a=e.y+e.height+l):(n="top-right",r=e.x+e.width+l,a=e.y-l);var s=4/t,u=1/t;this.position=n,this.element.update({"stroke-width":u,d:Rn(r,a,s-u)}),this.element.css({cursor:Nd[n]})}},{key:"remove",value:function(){this.element.remove()}}]),e}(),Id=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e;m()(this,n);var r=new Ld;return(e=t.call(this)).handle=r,e}return y()(n,[{key:"init",value:function(e){var t=this.handle,n=null,r=null,a=null,i=null,o=se()((function(o){if(a&&r&&n){var c=e.find(n),l=e.viewport.zoom,s=t.position,u=(o.clientX-a.x)*(["top-left"].includes(s)?-1:1),d=(o.clientY-a.y)*(["bottom-right"].includes(s)?1:-1);i={width:Ue(r.width+u*l,c.minWidth),height:Ue(r.height+d*l,c.minHeight)},e.update(c,i)}}),10);function l(t){a=null,document.body.removeEventListener("mousemove",o),e.signal.draggingMindmapCell=!1,n&&r&&i&&(t.stopPropagation(),e.update(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ad(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ad(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r.model)),e.command.execute("Update",{id:n,model:i}))}this.bind(e,"afterchange",(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.models,i=r.action;if(a&&"update"===i){var o,c=Md(a);try{for(c.s();!(o=c.n()).done;){var l=o.value;l.id===n&&t.update(e.cellMap[l.id],e.viewport.zoom)}}catch(e){c.e(e)}finally{c.f()}}})),this.bind(e,"mousedown",(function(i){if(t.contains(i.target)){var c=n&&e.find(n);if(c&&c.isMindmap){var s=c.textAreaBBox;r={width:c.width,height:c.height,textArea:s.width*s.height,model:{width:c.model.width||null,height:c.model.height||null}},e.signal.draggingMindmapCell=!0,a={x:i.clientX,y:i.clientY},document.body.addEventListener("mousemove",o),document.body.addEventListener("click",l,{once:!0})}}})),this.bind(e,"afterselectionchange",(function(){var r=e.selector.selections;if(1===r.length){var a=r[0];if(a.isMindmap)return a.state.selected?(t.update(a,e.viewport.zoom),e.frontRootGroup.add(t.element),void(n=a.model.id)):(n=null,void t.remove())}t.remove()})),this.bind(e,"afterviewportchange",(function(){var r=n&&e.cellMap[n];r&&r.state.selected?t.update(r,e.viewport.zoom):t.remove()}))}}]),n}();var Td=Wn,zd=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e;return m()(this,n),(e=t.call(this)).mask=new Td({"stroke-width":1,stroke:"#1890FF",fill:"rgba(24, 144, 255, 0.15)"}),e.mask.css({"pointer-events":"none"}),e}return y()(n,[{key:"init",value:function(e){var t=this.mask;t.dataset({lake_prevent_click_unselect:!0});var n=null,r=!0;this.bind(e,"keyup",(function(r){if(n)switch(r.key){case"Delete":case"Backspace":e.command.execute("Update",{id:n,model:{width:null,height:null,image:null}}),t.remove()}})),this.bind(e,"mousedown",(function(t){var n=t.target.closest("image"),a=n&&e.getCell(n);r=!(a&&a.isMindmap&&a.state.selected)})),this.bind(e,"click",(function(a){var i=a.target.closest("image"),o=i&&e.getCell(i);o&&!r?(a.stopPropagation(),o.endEditContent(),e.selector.select([o],!1),function(e,n){var r=["x","y","width","height"].reduce((function(e,t){return e[t]=parseFloat(n.getAttribute(t)),e}),{});t.update({d:_n(e.x+r.x-1,e.y+r.y-1,r.width+2,r.height+2,1)})}(o,i),e.frontRootGroup.add(t),n=o.model.id,e.tryFocus(),r=!0):a.target!==t.rendererElement&&(n=null,t.remove())})),this.bind(e,"afterselectionchange",(function(){n&&(n=null,t.remove())})),this.bind(e,"mindmap:afterdragchildcellstart",(function(){n&&(n=null,t.remove())}))}}]),n}();function Fd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fd(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xd=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){var t,n,r,a,i,o,c,l=!1;function s(){l?t&&e.remove(t):(c=Object(I.a)(),e.command.execute("Add",{model:Yd({id:c,x:t.x+i,y:t.y+o},e.query.insertStemModel())}),e.remove(t)),n&&n.destroy(),t=void 0,r=void 0,a=void 0,i=void 0,o=void 0,l=!1,n=void 0,e.interaction.changeMode("edit"),c&&(e.selector.clear(),e.selector.select([c]),c=void 0)}this.bind(e,"mousemove",(function(c){if(!n){var l=e.viewport.invertClient([c.clientX,c.clientY]);t=e.add(Yd({x:l[0],y:l[1]},e.query.insertStemModel()))[0],n=e.delegator.create([t]),r=c.clientX,a=c.clientY,t.hide()}n&&(i=(c.clientX-r)/e.viewport.zoom,o=(c.clientY-a)/e.viewport.zoom,n.translate(i,o))})),this.bind(window,"mouseleave",(function(){l=!0,s()})),this.bind(window,"mouseup",(function(t){n&&(e.viewportContainer.contains(t.target)||(l=!0),s())})),this.bind(e,"keydown",(function(e){27===e.which&&(l=!0,s())}))}}]),n}();var qd=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){var e;m()(this,n),e=t.call(this);var a=document.createElement("div"),i=document.createElement("span");return i.classList.add("lake-icon"),i.classList.add("lake-icon-full-screen"),i.classList.add("lake-prevent-card-activated"),a.appendChild(i),a.style["z-index"]="1033",a.style["border-radius"]="4px",a.style.position="absolute",a.style.width="".concat(20,"px"),a.style.height="".concat(20,"px"),a.style.color="#fff",a.style.cursor="pointer",a.style["box-shadow"]="0px 2px 8px 0px rgba(0, 0, 0, 0.08)",a.style["background-color"]="rgba(0, 0, 0, 0.65)",a.style["text-align"]="center",e.fullScreenBtn=a,e.imageBrowser=Object(r.getImageBrowser)(),e}return y()(n,[{key:"init",value:function(e){var t,n,r=this,a=this.fullScreenBtn,i=this.imageBrowser;e.elementMap.fullScreenBtn=a;var o=function(){a.remove(),n&&r.unbind(n),t=void 0,n=void 0};this.bind(a,"click",(function(){if(t){var e=t.image,n=t.imageElement.rendererElement;i.open([{src:n.getAttribute("data-raw_src"),msrc:n.getAttribute("href"),w:e.naturalWidth,h:e.naturalHeight}],0)}})),this.bind(a,"mouseleave",(function(e){t.imageElement.rendererElement.contains(e.relatedTarget)||o()})),this.bind(e,"mindmapcellimage:mouseenter",(function(i){var c=i.cell;if(!e.signal.cellDragStart){document.body.appendChild(a);var l=c.imageElement.getBoundingClientRect(),s=c.image;t=c,s.width>30&&s.height>30?(a.style.top="".concat(l.top+window.pageYOffset+6,"px"),a.style.left="".concat(l.right+window.pageXOffset-26,"px")):(a.style.top="".concat(l.top+window.pageYOffset-20,"px"),a.style.left="".concat(l.left+window.pageXOffset,"px")),n=r.bind(e,"afterviewportchange",(function(){o()}))}})),this.bind(e,"mindmapcellimage:mouseleave",(function(e){var t=e.nativeEvent;a.contains(t.relatedTarget)||o()})),this.bind(e,"mindmap:afterdragchildcellstart",(function(){o()})),this.bind(e,"cell:dragstart",(function(){o()}))}}]),n}();var Vd=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(window,"click",(function(t){t.target.closest(".lake-diagram-note")&&e.command.execute("MindmapAttachNote")}))}}]),n}();var Hd=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){var n=e.selector.selections[0],r="Tab",a="Enter";n&&("timeline"===n.upLayoutType||"standard"===n.upLayoutType&&0===n.upSignX)&&(r="Enter",a="Tab"),t.key===r?(t.preventDefault(),t.altKey?e.command.execute("MindmapAppendParent"):e.command.execute("MindmapAppendChild")):t.key===a&&(t.preventDefault(),t.shiftKey?e.command.execute("MindmapInsertStem"):n&&n.isStem?e.command.execute("MindmapAppendChild"):t.altKey?e.command.execute("MindmapPrependSibling"):e.command.execute("MindmapAppendSibling"))}))}}]),n}();var Gd=j.HotKeyUtils.isHotkey,Zd=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){if(37===t.which||38===t.which||39===t.which||40===t.which){t.preventDefault();var n=e.selector,r=n.selections;if(1===r.length&&r[0].isMindmap){var a,i,o,c,l=(r=r.filter((function(e){return e.isMindmap})))[r.length-1],s=e.getCells().filter((function(e){return e.state.visible&&e.isMindmap})),u=(a=l.upDirection,"0,1"===(a=String(a))||"0,-1"===a),d=!l.isStem&&"timeline"!==l.upLayoutType;if(Gd("right",t)){if(d&&l.x<l.parent.x&&!u)return void n.select([l.parent]);o="x",c=!0}else if(Gd("left",t)){if(d&&l.x>l.parent.x&&!u)return void n.select([l.parent]);o="x",c=!1}else if(Gd("up",t)){if(d&&l.y>l.parent.y&&u)return void n.select([l.parent]);o="y",c=!1}else if(Gd("down",t)){if(d&&l.y<l.parent.y&&u)return void n.select([l.parent]);o="y",c=!0}var f="x"===o?"width":"height",h="x"===o?"y":"x",p="x"===o?"height":"width",m=l[h]+l[p]/2,g=l[h]+l[p];(i=(i=(i=c?s.filter((function(e){return l[o]+l[f]<e[o]})):s.filter((function(e){return e[o]+e[f]<l[o]}))).filter((function(e){var t=e[h]+e[p],n=t<l[h],r=e[h]>g,a=e[h]<=l[h]&&t>=g;return!(n||r)||a}))).sort((function(e,t){if(c){if(e[o]!==t[o])return e[o]-t[o]}else if(e[o]+e[f]!==t[o]+t[f])return t[o]+t[f]-(e[o]+e[f]);return Math.min(Math.abs(m-e[h]),Math.abs(m-(e[h]+e[p])))-Math.min(Math.abs(m-t[h]),Math.abs(m-(t[h]+t[p])))})))[0]&&n.select([i[0]])}}}))}}]),n}();var Wd=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){Ci(t)&&["Backspace","Delete"].includes(t.key)&&e.command.execute("MindmapRemoveSingleNode")}))}}]),n}();var Kd=function(e){b()(n,ki);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){0!==e.selector.selections.length||"m"!==t.key||Ci(t)||(t.preventDefault(),e.command.execute("MindmapBeginInsertStem"))}))}}]),n}();var Ud=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections,r=t[t.length-1];r.model.collapsed&&(e.update(r,{collapsed:!1}),this.originSelectedCollapsed=!0);var a={model:{},cellOptions:{parent:r.model.id,nth:r.model.children?r.model.children.length:0}},i=e.find(a.cellOptions.parent);he()(a.model,e.query.appendChildModel(i)),a.model.id=this.id,Object.assign(this,a),this.selectedCellId=r.model.id,B()(O()(n.prototype),"execute",this).call(this),e.contentEditor.beginEdit()}},{key:"forward",value:function(){var e=this.selectedCellId,t=this.diagram;this.originSelectedCollapsed&&t.update(e,{collapsed:!1}),B()(O()(n.prototype),"forward",this).call(this)}},{key:"backward",value:function(){var e=this.selectedCellId,t=this.diagram;this.originSelectedCollapsed&&t.update(e,{collapsed:!0}),B()(O()(n.prototype),"backward",this).call(this),t.selector.select([e])}}]),n}(Fr.Add);c()(Ud,"className","MindmapAppendChild"),c()(Ud,"enable",(function(e){var t=e.selector.selections;return 1===t.length&&t.every((function(e){return e.isMindmap}))}));var Qd=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.diagram,r=this.addType,a=t.selector.selections,i=a[a.length-1],o=i.parent,c={model:{html:"".concat(Qt(""))},cellOptions:{parent:o.model.id,nth:r&&"prepend"===r?i.getNth():i.getNth()+e}};o.isStem&&(c.model.layout={quadrant:i.computedProps.layout.quadrant}),he()(c.model,t.query.appendChildModel(o)),c.model.id=this.id,Object.assign(this,c),this.selectedCellId=i.model.id,B()(O()(n.prototype),"execute",this).call(this),t.contentEditor.beginEdit()}},{key:"backward",value:function(){var e=this.selectedCellId,t=this.diagram;B()(O()(n.prototype),"backward",this).call(this),t.selector.select([e])}}]),n}(Fr.Add);c()(Qd,"className","MindmapAddSibling"),c()(Qd,"enable",(function(e){var t=e.selector.selections;return 1===t.length&&t.every((function(e){return!e.isStem&&e.isMindmap}))}));var Jd=function(e){b()(n,Qd);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n)}();c()(Jd,"className","MindmapAppendSibling");var $d=function(e){b()(n,Qd);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){B()(O()(n.prototype),"execute",this).call(this,0)}}]),n}();c()($d,"className","MindmapPrependSibling");var ef=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.addCellModels,t=this.addOptions;this.diagram.add(e,t),this.select(e.map((function(e){return e.id})))}},{key:"forward",value:function(){var e=this.addCellModels,t=this.addOptions,n=this.diagram;n.remove(e.map((function(e){return e.id}))),n.add(e,t),this.select(e.map((function(e){return e.id})))}},{key:"backward",value:function(){var e=this.dragCellModels,t=this.dragCellOptions,n=this.diagram;n.remove(e.map((function(e){return e.id}))),n.add(e,t),this.select(e.map((function(e){return e.id})))}}]),n}();c()(ef,"className","MindmapMoveNode");var tf=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.image,r=e.selector.selections,a=r[r.length-1],i=a.model;this.id=i.id,this.model={image:Cu(t),width:null,height:null},e.signal.preventUpdateCellContent=!0,a.textAreaElement.htmlContainer===e.contentEditor.dom&&(e.contentEditor.execCommand("justifyCenter"),e.contentEditor.updateStartContent(),this.model.html=e.contentEditor.dom.innerHTML),e.signal.preventUpdateCellContent=!1,B()(O()(n.prototype),"execute",this).call(this)}}]),n}(Fr.Update);c()(tf,"className","MindmapAttachImage"),c()(tf,"enable",(function(e){var t=e.selector.selections;return 1===t.length&&t[0].isMindmap}));var nf=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,[{key:"execute",value:function(){var e=this.diagram;e.selector.clear(),e.interaction.changeMode("beginAddMindmapStem")}}]),n}();function rf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}c()(nf,"className","MindmapBeginInsertStem");var af=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.x,r=this.y;if(this.model=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rf(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.query.insertStemModel()),null!=t&&null!=r)Object.assign(this.model,{x:t,y:r});else{var a=e.getCells().filter((function(e){return e.isStem})),i=a[a.length-1];Object.assign(this.model,{x:i.x+20,y:i.y+i.height+20})}B()(O()(n.prototype),"execute",this).call(this)}}]),n}(Fr.Add);c()(af,"className","MindmapInsertStem");var of=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n)}(Fr.CreateLink);c()(of,"className","MindmapCreateLink");var cf=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this,t=this.diagram,r=this.image;this.model={type:"mindmap",image:Cu(r),html:""};var a=t.viewport.getCenter();this.model.x=a[0]-this.model.image.width/2,this.model.y=a[1]-this.model.image.height/2,B()(O()(n.prototype),"execute",this).call(this),se()((function(){var n=t.selector.selections;1===n.length&&n[0].model.id===e.id&&t.contentEditor.execCommand("justifyCenter")}),16)()}}]),n}(Fr.Add);c()(cf,"className","MindmapInsertImage"),c()(cf,"enable",(function(e){return 0===e.selector.selections.length}));var lf=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"processNotRoot",value:function(){}},{key:"processRoot",value:function(){}},{key:"execute",value:function(){var e=this.diagram.selector.selections.concat([]).sort((function(e,t){return e.getNth()-t.getNth()}));e[0].parent?this.processNotRoot(e):this.processRoot(e)}},{key:"forward",value:function(){var e=this.diagram,t=this.forwardRemoveId,n=this.forwardSnapshot,r=this.forwardSelections;e.remove(t),e.add.apply(e,z()(n)),e.selector.select(r)}},{key:"backward",value:function(){var e=this.diagram,t=this.backwardRemoveId,n=this.backwardSnapshot,r=this.backwardSelections;e.remove(t),e.add.apply(e,z()(n)),e.selector.select(r)}}]),n}();function sf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sf(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function df(e,t){return e=e.filter((function(e){return e.isMindmap})),t.deduplicate(e)}c()(lf,"className","Snapshot");var ff=function(e){b()(n,lf);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"processNotRoot",value:function(e){var t=this.diagram,n=(e=df(e,t))[e.length-1],r=n.getNth(),a=n.parent,i=a.model.id,o=uf(uf({},t.query.appendChildModel(a)),{},{id:Object(I.a)(),html:"",children:[]});1===n.depth&&(o.layout=uf({},n.model.layout)),this.backwardRemoveId=i,this.backwardSnapshot=t.snapshot([a]),this.backwardSelections=t.selector.selections.map((function(e){return e.model.id})),1===n.depth&&e.forEach((function(e){e.updateModel({layout:null})})),t.add(o,{parent:i,nth:r}),t.update(e,{},{parent:o.id}),t.selector.select(o.id),this.forwardRemoveId=i,this.forwardSnapshot=t.snapshot([a]),this.forwardSelections=t.selector.selections.map((function(e){return e.model.id}))}},{key:"processRoot",value:function(e){var t=this.diagram,n=(e=t.deduplicate(e))[0],r={id:Object(I.a)(),html:"",x:n.x,y:n.y,type:"mindmap",children:e.map((function(e){var t=d()(e.model);return delete t.type,delete t.x,delete t.y,delete t.layout,t}))};Ye(r,(function(e){delete e.zIndex})),this.backwardRemoveId=r.id,this.backwardSnapshot=t.snapshot(e),this.backwardSelections=t.selector.selections.map((function(e){return e.model.id})),t.remove(e),t.add(r),t.selector.select(r.id),this.forwardRemoveId=e.map((function(e){return e.model.id})),this.forwardSnapshot=t.snapshot([t.find(r.id)]),this.forwardSelections=t.selector.selections.map((function(e){return e.model.id}))}}]),n}();function hf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hf(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c()(ff,"className","MindmapAppendParent"),c()(ff,"enable",(function(e){var t=df(e.selector.selections,e);return t.length>0&&t.every((function(e){return e.isMindmap&&e.parent===t[0].parent}))}));var mf=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).pinLine=new Ls(e.diagram),r}return y()(n,[{key:"execute",value:function(){var e,t=this.diagram,n=this.pinLine,r=t.selector.selections[0],a=r.getChildren(),i=a.map((function(e){return e.model.id})),o=d()(r.model),c=r.parent&&r.parent.model.id,l=r.isStem,s=r.getNth();e=l?a.map((function(e){var t=e.model;return Object.assign(d()(t),{type:"mindmap",x:e.x,y:e.y,layout:pf(pf({},r.layout),e.layout)})})):a.map((function(e){return d()(e.model)})).reverse(),this.isStem=l,this.nth=s,this.childIds=i,this.childModels=e,this.selfId=r.model.id,this.selfModel=o,this.parentId=c,n.cache([r]),this.forward()}},{key:"forward",value:function(){var e=this.isStem,t=this.nth,n=this.childModels,r=this.parentId,a=this.diagram,i=this.selfId,o=this.childIds,c=this.pinLine,l={};a.remove(i),c.pin(),r&&(l.parent=r),e||(l.nth=t),a.add(n,l),this.select(o)}},{key:"backward",value:function(){var e=this.isStem,t=this.nth,n=this.childIds,r=this.selfModel,a=this.parentId,i=this.diagram,o=this.selfId,c=this.pinLine,l={};i.remove(n),a&&(l.parent=a),e||(l.nth=t),i.add(r,l),c.reset(),this.select(o)}}]),n}();c()(mf,"className","MindmapRemoveSingleNode"),c()(mf,"enable",(function(e){var t=e.selector.selections;return 1===t.length&&t.every((function(e){return e.isMindmap}))}));var gf=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections[0];e.emit("opennote",{cell:t})}}]),n}();function yf(e,t){return be()(e).toHex()===be()(t).toHex()}function vf(e,t){return e.reduce((function(e,t){return"object"===i()(e)?e[t]:e}),t)}function bf(e,t,n){var r=e.length;n=d()(n),e.reduce((function(e,t,a){if(a===r-1)return e[t]=n,n;if("object"===i()(e[t]))return e[t];if(void 0===e[t]){var o={};return e[t]=o,o}return{}}),t)}function xf(e,t){var n=Ga(t.find(e.id).textAreaElement.htmlContainer);return e.children&&(n.children=e.children.map((function(e){return xf(e,t)}))),n}function kf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=n.children,i=vf(t=t.split("."),n),o="none";if(a&&a.length>1)for(var c=0;c<a.length;c++){var l=a[c],s=vf(t,l);if("none"!==o){if(!ye()(s,o)){o="none";break}}else o=s}return"none"!==o?bf(t,e,o):i&&!r&&bf(t,e,i),e}c()(gf,"className","MindmapAttachNote"),c()(gf,"isModelChange",!1),c()(gf,"enable",(function(e){var t=e.selector.selections;return 1===t.length&&t.every((function(e){return e.isMindmap}))}));var wf=function(){function e(t){m()(this,e),this.diagram=t}return y()(e,[{key:"_getRainBowColors",value:function(){var e=this.diagram,t=e.palette,n=Ou;if(t){var r=e.palette.colors[1];n=[r[4],r[8],r[6],r[5],r[9],r[2],r[7],r[3],r[1],r[0]]}return n}},{key:"appendChildAddButtonTail",value:function(e){var t=this._getRainBowColors(),n=e.stem.rainbow;return e.isStem?{treeEdge:{stroke:n?t[e.model.children.length%t.length]:"#959EA6","stroke-width":e.getDefaultStrokeWidth(e.depth+1)}}:{treeEdge:{stroke:e.computedProps.treeEdge.stroke,"stroke-width":e.getDefaultStrokeWidth(e.depth+1)}}}},{key:"appendChildTransitiveCommon",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];kf(e,"border.shape",t.model,n),kf(e,"border.stroke",t.model,n),kf(e,"border.fill",t.model,n),kf(e,"border.stroke-width",t.model,n),kf(e,"layout",t.model,!0),kf(e,"treeEdge.stroke-width",t.model,n)}},{key:"appendChildTransitiveTextFormat",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=xf(t.model,this.diagram),a={},i=[];kf(a,"fontSize",r,n),kf(a,"color",r,n),a.fontSize&&14!==a.fontSize&&i.push("font-size: ".concat(a.fontSize,"px")),a.color&&!yf(a.color,"#262626")&&i.push("color: ".concat(a.color)),i.length>0&&(e.html='<span style="'.concat(i.join(";"),'">').concat("&#8203;","</span>"))}},{key:"appendChildTreeEdge",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.stem,a=r.rainbow,i=this._getRainBowColors();bf(["treeEdge","stroke"],e,a?i[(t.model.children.length+n)%i.length]:"#959EA6")}},{key:"appendChildModel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={};return e.isStem?(this.appendChildTransitiveCommon(n,e,!0),this.appendChildTransitiveTextFormat(n,e,!0),this.appendChildTreeEdge(n,e,t)):(this.appendChildTransitiveCommon(n,e),this.appendChildTransitiveTextFormat(n,e)),n}},{key:"insertStemModel",value:function(){return Jt}},{key:"destroy",value:function(){this.diagram=void 0}}]),e}();c()(wf,"className","Query");var Of=function(){var e={};return Array.from(arguments).forEach((function(t){Object.keys(t).forEach((function(n){var r=t[n];s()(r)?e[n]?Object.assign(e[n],r):e[n]=Object.assign({},r):Array.isArray(r)?e[n]?e[n]=[].concat(e[n],r):e[n]=[].concat(r):e[n]=r}))})),e}(wu,{Cells:[Ju,ld],Extends:[wf],defaultCursors:{},modes:[{mode:"edit",Behaviours:[ud,dd,Cd,Rd,Id,zd,qd,Vd,hd,Hd,Zd,Wd,Kd]},{mode:"read",Behaviours:[ud,Zd,fd,qd,Vd,hd]},{mode:"beginAddMindmapStem",Behaviours:[ud,Xd]}],Commands:[Ud,Jd,ef,tf,nf,of,$d,af,cf,ff,mf,gf]}),Cf=Object.freeze({__proto__:null,Board:Of});Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-toolbar-dropdown .ant-btn:after {\n  display: none;\n}\n.lake-diagram-toolbar-dropdown .ant-btn.ant-dropdown-trigger:hover {\n  background: #f5f5f5;\n  border-radius: 2px;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button {\n  height: 32px;\n  line-height: 32px;\n  border-radius: 2px;\n  border: 1px solid transparent;\n  display: flex;\n  align-items: center;\n  transition: border 0.3s;\n  margin-right: 4px;\n  overflow: hidden;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button:hover {\n  border-color: #e8e8e8;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button:hover .ant-btn:first-child {\n  border-color: #e8e8e8;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn {\n  border-radius: 0;\n  transition: none;\n  margin-right: 0;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn:hover {\n  background: #f5f5f5;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn:first-child {\n  border-right: 1px solid transparent;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn:first-child:hover {\n  background: #f5f5f5;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn:first-child:not(:last-child) {\n  min-width: auto;\n  width: 30px;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) {\n  min-width: auto;\n  width: 16px;\n  border: none;\n  background: none;\n  padding: 0;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  position: relative;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) .lake-icon {\n  position: absolute;\n  right: 4px;\n  top: 14px;\n  width: 8px;\n  height: 8px;\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSI1IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgb3BhY2l0eT0iLjQ1Ij48cGF0aCBkPSJNMC0yaDh2OEgweiIvPjxwYXRoIGQ9Ik0uNTk2LjU1N2wzLjE1IDMuODIxYS4zMzIuMzMyIDAgMDAuNDk1IDBMNy40MDUuNTU3YS4zMzIuMzMyIDAgMDAtLjI0Ny0uNTUzSC44NDVjLS4yODggMC0uNDQuMzM5LS4yNDkuNTUzeiIgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPg==);\n  background-repeat: no-repeat;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) .lake-icon:before {\n  content: '';\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child):hover {\n  background: #e8e8e8;\n}\n.lake-diagram-toolbar-dropdown-menu .lake-icon {\n  font-size: 16px;\n}\n");var Ef=["mode"];function Pf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pf(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jf(e){return e.overlay?e.overlay:Me.a.createElement(Y.a,{onClick:e.onSelect,className:Ne()("lake-diagram-toolbar-dropdown-menu",e.menuClassName)},e.data.map((function(e){return Me.a.createElement(Y.a.Item,{key:e.key},Me.a.createElement("span",{className:"lake-icon lake-icon-".concat(e.icon)}))})))}function Sf(e){var t=e.command,n=e.name;return Me.a.createElement("div",{className:"lake-diagram-toolbar-command lake-diagram-toolbar-dropdown"},Me.a.createElement(X.a,{overlay:jf(_f(_f({},e),{},{onSelect:function(n){var r=n.key;e.onSelect?e.onSelect({key:r}):e.execCommand(t,{key:r})}}))},Me.a.createElement(q.a,{"data-testid":n},Me.a.createElement("span",{className:"lake-icon lake-icon-".concat(e.icon)}))))}function Rf(e){var t=e.name,n=e.command,r=e.defaultKey,a=e.data,i=Object(Re.useState)(r),o=D()(i,2),c=o[0],l=o[1],s=a.find((function(e){return e.key===c}));return Me.a.createElement("div",{className:"lake-diagram-toolbar-command lake-diagram-toolbar-dropdown"},Me.a.createElement(X.a.Button,{onClick:function(){e.onClick?e.onClick({key:c}):e.execCommand(n,{key:c})},overlay:jf(_f(_f({},e),{},{onSelect:function(t){var n=t.key;l(n),e.onSelect&&e.onSelect({key:n})}})),icon:Me.a.createElement("span",{className:"lake-icon lake-icon-dropdown-arrow"}),"data-testid":t},Me.a.createElement("span",{className:"lake-icon lake-icon-".concat(e.icon||s.icon)})))}function Mf(e){var t=e.mode,n=Ie()(e,Ef);return"button"===t?Me.a.createElement(Rf,n):Me.a.createElement(Sf,n)}function Bf(e){var t=e.name,n=e.icon,r=e.accept,a=e.disabled,i=e.title,o=e.onChange,c=Object(Re.useRef)();return Me.a.createElement("div",{className:"lake-diagram-toolbar-command","data-testid":t},Me.a.createElement(V.a,{disabled:a||!i,placement:"bottom",title:Me.a.createElement("div",{className:"lake-diagram-toolbar-tooltip"},i&&Me.a.createElement("div",{className:"lake-diagram-toolbar-tooltip-title"},i))},Me.a.createElement(q.a,{className:"lake-diagram-toolbar-upload",onClick:function(){return c.current.click()},disabled:a},Me.a.createElement("span",{className:"lake-icon lake-icon-".concat(n)}),Me.a.createElement("input",{type:"file",accept:r,onChange:o,ref:c}))))}function Af(e){var t=e.name,n=e.title,r=e.hotkey,a=e.icon,i=e.label,o=e.command,c=e.disabled,l=e.active,s=Object.keys(e).reduce((function(t,n){return n.startsWith("data-")&&(t[n]=e[n]),t}),{});return Me.a.createElement("div",Se()({className:"lake-diagram-toolbar-command","data-testid":t},s),Me.a.createElement(V.a,{disabled:c||!(n||r),placement:"bottom",title:Me.a.createElement("div",{className:"lake-diagram-toolbar-tooltip"},n&&Me.a.createElement("div",{className:"lake-diagram-toolbar-tooltip-title"},n),r&&Me.a.createElement("div",{className:"lake-diagram-toolbar-tooltip-hotkey"},r))},Me.a.createElement(q.a,{onClick:function(t){t.stopPropagation(),e.onClick?e.onClick():e.execCommand(o)},disabled:c,className:Ne()({"lake-button-active":l}),"data-testid":"".concat(t,"-button")},Me.a.createElement("span",{className:"lake-icon lake-icon-".concat(a)}),i&&Me.a.createElement("span",{className:"lake-diagram-toolbar-command-label"},i))))}function Df(e){switch(e.type){case"separator":return Me.a.createElement("div",{className:"lake-diagram-toolbar-separator"});case"dropdown":return Me.a.createElement(Mf,e);case"upload":return Me.a.createElement(Bf,e);default:return Me.a.createElement(Af,e)}}function Nf(e){var t=e.commands,n=e.extra,r=e.execCommand;return Me.a.createElement("div",{className:Ne()("lake-diagram-toolbar",e.className),"data-lake_prevent_click_unselect":"true"},Me.a.createElement("div",{className:"lake-diagram-toolbar-title"},e.title),Me.a.createElement("div",{className:"lake-diagram-toolbar-body"},t.map((function(e,t){return Me.a.createElement(Df,Se()({key:"".concat(e.name||e.type,"-").concat(t),execCommand:r},e))}))),Me.a.createElement("div",{className:"lake-diagram-toolbar-extra"},n))}jf.propTypes={data:Ae.a.array,overlay:Ae.a.node,onSelect:Ae.a.func,menuClassName:Ae.a.string},Sf.propTypes={command:Ae.a.string,name:Ae.a.string,icon:Ae.a.string,onSelect:Ae.a.func,execCommand:Ae.a.func},Rf.propTypes={command:Ae.a.string,name:Ae.a.string,defaultKey:Ae.a.string,title:Ae.a.string,data:Ae.a.array,icon:Ae.a.string,onClick:Ae.a.func,onSelect:Ae.a.func,execCommand:Ae.a.func},Mf.propTypes={mode:Ae.a.string},Fe(".lake-diagram-toolbar-upload {\n  position: relative;\n}\n.lake-diagram-toolbar-upload input {\n  position: absolute;\n  left: 0;\n  top: 0;\n  opacity: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  display: none;\n}\n"),Bf.propTypes={name:Ae.a.string,icon:Ae.a.string,accept:Ae.a.string,disabled:Ae.a.bool,title:Ae.a.string,onChange:Ae.a.func},Af.defaultProps={disabled:!0},Af.propTypes={disabled:Ae.a.bool,name:Ae.a.string,title:Ae.a.string,hotkey:Ae.a.string,type:Ae.a.string,icon:Ae.a.string,label:Ae.a.string,command:Ae.a.string,onClick:Ae.a.func,execCommand:Ae.a.func,active:Ae.a.bool},Df.propTypes={type:Ae.a.string},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-toolbar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 38px;\n  border: solid #e8e8e8;\n  border-width: 1px 0;\n  padding-left: 16px;\n  padding-right: 12px;\n  background: #fcfcfc;\n}\n.lake-diagram-toolbar-body {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n}\n.lake-diagram-toolbar-separator {\n  width: 1px;\n  height: 100%;\n  margin: 0 4px;\n  background: #e8e8e8;\n}\n.lake-diagram-toolbar-command .ant-btn {\n  border: none;\n  background: none;\n  padding: 0 8px;\n  height: 32px;\n  min-width: 32px;\n  margin-left: 4px;\n  margin-right: 4px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  outline: none;\n}\n.lake-diagram-toolbar-command .ant-btn[disabled] {\n  color: #BFBFBF;\n  background: none;\n}\n.lake-diagram-toolbar-command .ant-btn:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-diagram-toolbar-command .ant-btn:focus {\n  color: #595959;\n}\n.lake-diagram-toolbar-command .ant-btn::after {\n  display: none;\n}\n.lake-diagram-toolbar-command .ant-btn .lake-icon {\n  margin-right: 0;\n  font-size: 16px;\n}\n.lake-diagram-toolbar-command .lake-button-active {\n  background-color: #e8e8e8;\n}\n.lake-diagram-toolbar-command-label {\n  display: inline-block;\n  margin-left: 0.25em;\n}\n.lake-diagram-toolbar-tooltip {\n  text-align: center;\n}\n.lake-diagram-toolbar-tooltip-hotkey {\n  font-size: 12px;\n  color: #BFBFBF;\n  margin-top: 4px;\n}\n.lake-diagram-toolbar-tooltip-hotkey:first-child {\n  margin-top: 0;\n}\n"),Nf.defaultProps={commands:[],toggleProperties:function(){},domContainer:null},Nf.propTypes={className:Ae.a.string,commands:Ae.a.array,domContainer:Ae.a.object,title:Ae.a.node,extra:Ae.a.node,execCommand:Ae.a.func},Nf.Control=Df,Fe(".lake-diagram-link-editor {\n  max-width: 398px;\n  display: inline-block;\n  border: 1px solid #E8E8E8;\n  border-radius: 4px;\n  box-shadow: rgba(221, 221, 221, 0.5) 0px 1px 3px;\n  background: white;\n}\n.lake-diagram-link-editor .lake-link-invalid-link {\n  color: #CF1322;\n}\n.lake-diagram-link-editor p {\n  margin-top: 0;\n  margin-bottom: 14px;\n}\n.lake-diagram-link-editor .lake-diagram-link-editor-slash {\n  margin: 0 2px;\n}\n.lake-diagram-link-editor .lake-diagram-link-editor-slash {\n  width: 1px;\n  height: 14px;\n  border-left: 1px solid #E8E8E8;\n  margin: 0 1px;\n  margin-top: 5px;\n  vertical-align: top;\n}\n.lake-diagram-link-editor .lake-icon {\n  color: #8590A6;\n  font-size: 16px;\n}\n.lake-diagram-link-editor-preview {\n  line-height: 16px;\n  padding: 6px 8px;\n  vertical-align: middle;\n  white-space: nowrap;\n}\n.lake-diagram-link-editor-preview * {\n  display: inline-block;\n}\n.lake-diagram-link-editor-preview .lake-diagram-link-editor-button {\n  color: #595959;\n  margin: 0px 0px 0px 8px;\n  padding: 4px;\n}\n.lake-diagram-link-editor-preview .lake-diagram-link-editor-button:hover {\n  background: #F4F4F4;\n  cursor: pointer;\n}\n.lake-diagram-link-editor-preview .lake-diagram-link-editor-link-container {\n  color: #1890FF;\n  height: 16px;\n  padding: 0 6px;\n  min-width: 180px;\n  max-width: 292px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  text-decoration: none;\n  line-height: 12px;\n  font-size: 14px;\n  letter-spacing: 1.2px;\n  vertical-align: middle;\n}\n.lake-diagram-link-editor-preview .lake-diagram-link-editor-link-empty {\n  height: 16px;\n  padding: 0 6px;\n  min-width: 146px;\n  max-width: 292px;\n  line-height: 20px;\n  font-size: 14px;\n}\n.lake-diagram-link-editor-preview .lake-diagram-link-editor-link-container:hover {\n  cursor: pointer;\n}\n.lake-diagram-link-editor-edit {\n  width: 365px;\n  padding: 16px 12px;\n  padding-bottom: 4px;\n}\n");var Lf={"zh-cn":{text:"文本",link:"链接",editLink:"编辑链接",addDescription:"添加描述",linkAddress:"链接地址",deleteLink:"删除链接",confirm:"确定",pleaseInputLink:"请输入链接",emptyLink:"空链接",pleaseEnterCorrectLink:"请输入正确的链接",selectedContent:"多行文字被选中，暂不支持修改文本"},en:{text:"Text",link:"Link",editLink:"Edit link",addDescription:"Add a description",linkAddress:"Link address",deleteLink:"Delete link",confirm:"Confirm",pleaseInputLink:"Please input link address",emptyLink:"Empty link",pleaseEnterCorrectLink:"Please enter the correct link",selectedContent:"Selected in the document"}};Lf["en-us"]=Lf.en;var If=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(e){var r;m()(this,n);var a=(r=t.call(this,e)).props,i=a.lang,o=a.target;return r.locale=Lf[i],r.nativeEvents=[],r.rect=o.getBoundingClientRect(),r.link=o.getAttribute("href"),r.isMultiLink=o.length>1,r.state={invalidLink:r.isInvalidLink(r.link)},r.preventScrollCancel=!1,r}return y()(n,[{key:"adjustPosition",value:function(){var e=this.container,t=this.props.target,n=e.getBoundingClientRect(),r=e.offsetParent.getBoundingClientRect(),a=t.getBoundingClientRect(),i=window.pageYOffset+a.bottom+4-r.top,o=window.pageXOffset+a.left-r.left;i+n.height>window.innerHeight-20&&(i=window.pageYOffset+a.top-n.height-4),n.right>window.innerWidth-20?o=window.pageXOffset+window.innerWidth-n.width-4:o<20&&(o=window.pageXOffset+20),e.style.top="".concat(i,"px"),e.style.left="".concat(o,"px")}},{key:"componentDidMount",value:function(){this.bindNativeEvents(),this.adjustPosition()}},{key:"componentDidUpdate",value:function(){this.adjustPosition()}},{key:"componentWillUnmount",value:function(){this.removeNativeEvents()}},{key:"bindNativeEvents",value:function(){var e=this,t=this.container,n=!1;this.addNativeEvent(window,"scroll",(function(t){!0!==e.preventScrollCancel?t.target.className&&-1!==t.target.className.indexOf("lake-link")||e.cancel():t.preventDefault()}),!0),this.addNativeEvent(window,"resize",(function(){e.cancel()}),!0),this.addNativeEvent(window,"mousedown",(function(e){var r=e.target;t.contains(r)||(n=!0)}),!0),this.addNativeEvent(window,"mouseup",(function(r){var a=r.target;n&&!t.contains(a)&&e.cancel(),n=!1}))}},{key:"cancel",value:function(){var e=this.props,t=e.onCancel,n=e.target;t({link:n&&n.getAttribute("href")})}},{key:"addNativeEvent",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.addEventListener(t,n,r),this.nativeEvents.push({dom:e,name:t,callback:n,useCapture:r})}},{key:"removeNativeEvents",value:function(){this.nativeEvents.forEach((function(e){var t=e.dom,n=e.name,r=e.callback,a=e.useCapture;t.removeEventListener(n,r,a)})),this.nativeEvents=[]}},{key:"confirm",value:function(){var e=this.props.onConfirm,t=this.state.invalidLink,n=this.getText(),r=this.getLink();t||e(n,r)}},{key:"renderPreview",value:function(){var e,t=this.props,n=t.onDeleteLink,r=t.shouldTargetBlank,a=t.onSwitchToEdit,i=t.dataset,o=this.getLink(),c=this.locale,l=o||c.emptyLink;return e=o?r(o)?Me.a.createElement("a",{className:"lake-diagram-link-editor-link-container",href:Kt(o),target:"_blank"},l):Me.a.createElement("a",{className:"lake-diagram-link-editor-link-container",href:Kt(o)},l):Me.a.createElement("span",{className:"lake-diagram-link-editor-link-empty"},l),Me.a.createElement("div",{className:"lake-diagram-link-editor lake-diagram-link-editor-preview"},Me.a.createElement("span",{className:"lake-icon lake-icon-link"}),e,Me.a.createElement("span",{className:"lake-diagram-link-editor-slash"}),Me.a.createElement(V.a,{title:c.editLink},Me.a.createElement("a",Se()({},i,{className:"lake-icon lake-icon-edit lake-diagram-link-editor-button",onClick:function(){a()}}))),Me.a.createElement(V.a,{title:c.deleteLink},Me.a.createElement("a",Se()({},i,{className:"lake-icon lake-icon-unlink lake-diagram-link-editor-button",onClick:n}))))}},{key:"isInvalidLink",value:function(e){return function(e){return!e||e&&!e.match(/^[\x00-\x7F]/)||e.startsWith("javascript:")}(e)}},{key:"renderEditorContent",value:function(){var e=this,t=this.props.dataset,n=this.state.invalidLink,r=this.getText(),a=this.getLink(),i=this.locale;return Me.a.createElement("div",{className:"lake-diagram-link-editor lake-diagram-link-editor-edit",onKeyDown:function(t){var n=t.which,r=e.state.invalidLink;13!==n||r||e.confirm(),27===n&&e.cancel()}},Me.a.createElement("p",null,i.text),Me.a.createElement("p",null,Me.a.createElement(H.a,{className:"lake-link-text-input",defaultValue:this.isMultiLink?i.selectedContent:r,ref:function(t){e.textInputDom=t},placeholder:i.addDescription,disabled:this.isMultiLink,onChange:function(t){e.text=t.target.value}})),Me.a.createElement("p",null,i.link),Me.a.createElement("p",null,Me.a.createElement(H.a,{className:"lake-link-link-input",defaultValue:a,ref:function(t){e.preventScrollCancel=!0,t&&t.focus(),e.linkInputDom=t,setTimeout((function(){e.preventScrollCancel=!1}),32)},placeholder:i.linkAddress,onChange:function(t){e.link=t.target.value,e.setState({invalidLink:e.isInvalidLink(e.link)})}})),n&&""!==a?Me.a.createElement("p",{className:"lake-link-invalid-link"},i.pleaseEnterCorrectLink):"",Me.a.createElement("p",null,Me.a.createElement(q.a,Se()({},t,{className:"lake-link-confirm-button",onClick:function(){e.confirm()},disabled:!this.link||n}),i.confirm)))}},{key:"getLink",value:function(){var e=this.props.getLink;return this.link&&e(this.link)||""}},{key:"getText",value:function(){var e=this.props.target;return this.isMultiLink?"":this.text||e.textContent}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.type,a=n.className,i=n.dataset;return e="edit"===r?this.renderEditorContent():this.renderPreview(),Me.a.createElement("div",Se()({},i,{className:a,ref:function(e){t.container=e},style:{top:"0px",position:"absolute",zIndex:"1400"}}),e)}}]),n}(Me.a.Component);function Tf(e){var t=window.location,n=(t.origin+t.pathname.replace("/edit","")).replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=new RegExp("^".concat(n,"#"));return e=e.replace(r,"#").trim(),/^(\w+\.)+\w+(\/|$)/.test(e)&&(e="https://"+e),e}function zf(e){var t=e.diagram,n=Object(Re.useState)(null),r=D()(n,2),a=r[0],i=r[1],o=Object(Re.useState)("preview"),c=D()(o,2),l=c[0],s=c[1];return Object(Re.useEffect)((function(){function e(e,t){i(e),s(t)}function n(t){var n=t.result,r=t.target,a=t.name;n&&"createLink"===a&&e(r,"edit")}function r(){i(null)}var a=se()((function(){var n=t.contentEditor.getRange();if(n){var r=t.contentEditor.closest(n.commonAncestorContainer,"a");r?e(r,"preview"):i(null)}}),16);return t.contentEditor.on("execcommand",n),t.contentEditor.on("endedit",r),t.contentEditor.on("selectionchange",a),function(){t.contentEditor.off("execcommand",n),t.contentEditor.off("endedit",r),t.contentEditor.off("selectionchange",a)}}),[t]),a?Me.a.createElement(If,{dataset:{"data-lake_prevent_click_unselect":!0},target:a,type:l,lang:Ut.locale,getLink:Tf,onConfirm:function(e,n){a.textContent=e,a.setAttribute("href",n),setTimeout((function(){if(a&&t.viewportContainer.contains(a)){var e=window.getSelection(),n=document.createRange();n.selectNode(a),n.collapse(),e.removeAllRanges(),e.addRange(n)}}),16),i(null)},onSwitchToEdit:function(){s("edit")},onCancel:function(){i(null)},onDeleteLink:function(){a.removeAttribute("href"),function(e){for(var t=e.firstChild;t;){var n=t.nextSibling;e.parentNode.insertBefore(t,e),t=n}e.parentNode.removeChild(e)}(a),i(null)},shouldTargetBlank:function(){return!0}}):Me.a.createElement("div",null)}function Ff(e){var t=Object(Re.useRef)(),n=e.groups,r=e.shapeSelect||Object(Re.useMemo)((function(){return new cs({groups:n})}),[n]);return Object(Re.useEffect)((function(){t.current.appendChild(r.rendererElement),t.current.setAttribute("height",r.height)}),[r]),Object(Re.useEffect)((function(){function t(t){var n=t.shape,r=t.group;e.onSelect&&e.onSelect({key:n,group:r})}return r.on("shape:select",t),function(){r.off("shape:select",t)}}),[e.onSelect]),Me.a.createElement("svg",{className:Ne()(e.className,"lake-prevent-card-activated"),"data-lake_prevent_click_unselect":"true",ref:t,onClick:function(t){e.onClick&&e.onClick(t)},width:208,style:{boxShadow:"0 1px 2px -2px rgb(0 0 0 / 8%), 0 2px 6px 0 rgb(0 0 0 / 4%), 0 4px 8px 1px rgb(0 0 0 / 2%)",border:"1px solid #e9e9e9"},"data-testid":"shape-overlay"})}If.defaultProps={dataset:{},className:null,type:"preview",lang:"zh-cn",onDeleteLink:function(){},onSwitchToEdit:function(){},onConfirm:function(){},onCancel:function(){},shouldTargetBlank:function(){},getLink:function(e){return e}},If.propTypes={dataset:Ae.a.object,className:Ae.a.string,target:Ae.a.object,type:Ae.a.string,lang:Ae.a.string,onDeleteLink:Ae.a.func,onSwitchToEdit:Ae.a.func,onConfirm:Ae.a.func,onCancel:Ae.a.func,shouldTargetBlank:Ae.a.func,getLink:Ae.a.func},Fe(""),zf.defaultProps={diagram:null},zf.propTypes={diagram:Ae.a.object.isRequired},Ff.defaultProps={groups:["flowchart"],shapeSelect:null},Ff.propTypes={onClick:Ae.a.func,onSelect:Ae.a.func,className:Ae.a.string,shapeSelect:Ae.a.object,groups:Ae.a.arrayOf(Ae.a.string)},Fe(".lake-zoom-tool {\n  padding: 0 5px;\n  width: auto;\n  height: 25px;\n  border: 1px solid #E2E2E2;\n  box-shadow: 0px 2px 4px rgba(225, 225, 225, 0.5);\n  color: #EEEEEE;\n  background: #B4B4B4;\n  position: absolute;\n  top: 16px;\n  right: 28px;\n  border-radius: 6px;\n  font-size: 14px;\n  line-height: 24px;\n  letter-spacing: 0.05em;\n  outline-style: none;\n  word-wrap: break-word;\n}\n.lake-zoom-tool .ant-dropdown {\n  left: -2.5px;\n}\n.lake-zoom-tool ul {\n  list-style-type: none;\n  margin: 0;\n}\n.lake-zoom-tool ul.lake-zoom-tool-menu {\n  width: 86px;\n  background: #595959;\n}\n.lake-zoom-tool ul.lake-zoom-tool-menu li {\n  font-size: 12px;\n  margin-left: 0;\n  margin-top: 0;\n  margin-bottom: 0;\n  white-space: nowrap;\n}\n.lake-zoom-tool .ant-dropdown-menu-item:hover {\n  background: #3C3C3C;\n}\n.lake-zoom-tool .ant-dropdown-menu-item {\n  color: white;\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n.lake-zoom-tool .lake-icon {\n  margin: 3.5px;\n  margin-top: 2px;\n  font-size: 14px;\n  width: 14px;\n  height: 14px;\n}\n.lake-zoom-tool .lake-icon:hover {\n  cursor: pointer;\n}\n.lake-zoom-tool .lake-zoom-tool-precent {\n  vertical-align: top;\n  line-height: 23px;\n}\n.lake-zoom-tool span {\n  display: inline-block;\n  padding: 0;\n  font-size: 12px;\n  height: 26px;\n  text-align: center;\n  user-select: none;\n}\n.lake-zoom-tool .lake-zoom-tool-dropdown:hover {\n  cursor: pointer;\n}\n.lake-zoom-tool:hover {\n  background: #595959;\n}\n.lake-card-block-max .lake-zoom-tool {\n  margin: 8px;\n}\n");var Yf=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"_setZoom",value:function(e){var t=this.props,n=t.onChange,r=t.minZoom,a=t.maxZoom;e<r&&(e=r),e>a&&(e=a),n(e)}},{key:"_clickZoomIn",value:function(){var e=this.props,t=e.zoomStep,n=e.zoom;this._setZoom(n+t)}},{key:"_clickZoomOut",value:function(){var e=this.props,t=e.zoomStep,n=e.zoom;this._setZoom(n-t)}},{key:"render",value:function(){var e=this,t=this.props.zoom,n=Me.a.createElement(Y.a,{className:"lake-zoom-tool-menu",onClick:function(t){var n=t.item;e._setZoom(n.props.value)}},Me.a.createElement(Y.a.Item,{value:"resetView"},Qt("回到中心")),Me.a.createElement(Y.a.Item,{value:.2},"20%"),Me.a.createElement(Y.a.Item,{value:.5},"50%"),Me.a.createElement(Y.a.Item,{value:1},"100%"),Me.a.createElement(Y.a.Item,{value:2},"200%"),Me.a.createElement(Y.a.Item,{value:4},"400%"),Me.a.createElement(Y.a.Item,{value:"autoFit"},Qt("适应画布")));return Me.a.createElement("div",{className:"lake-zoom-tool",ref:function(t){e.zoomToolDOM=t}},Me.a.createElement("span",{className:"lake-icon lake-icon-zoom-out",onClick:this._clickZoomOut.bind(this)}),Me.a.createElement(X.a,{className:"lake-zoom-tool-dropdown",overlay:n,placement:"bottomCenter",trigger:["click"],getPopupContainer:function(){return e.zoomToolDOM}},Me.a.createElement("span",{className:"lake-zoom-tool-precent"},Math.round(100*t)+"%")),Me.a.createElement("span",{className:"lake-icon lake-icon-zoom-in",onClick:this._clickZoomIn.bind(this)}))}}]),n}(Me.a.Component);function Xf(e){var t=e.diagram,n=Object(Re.useState)(null),r=D()(n,2),a=r[0],i=r[1];return Object(Re.useEffect)((function(){if(t){i(t.viewport.zoom);var e=se()((function(){i(t.viewport.zoom)}),32);return t.on("afterviewportchange",e),function(){t.off("afterviewportchange",e)}}}),[a,t]),t?Me.a.createElement(Yf,{zoom:a,onChange:function(e){"autoFit"===e?t.viewport.autoFit():"resetView"===e?t.viewport.focusFirstRoot():t.viewport.setViewport(e)}}):Me.a.createElement("div",null)}function qf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qf(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Yf.defaultProps={zoom:1,onChange:function(){},minZoom:.2,maxZoom:4,zoomStep:.2},Yf.propTypes={zoom:Ae.a.number,onChange:Ae.a.func,minZoom:Ae.a.number,maxZoom:Ae.a.number,zoomStep:Ae.a.number},Xf.propTypes={diagram:Ae.a.object},Fe("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n/**\n * lake/editor 的卡片容器实现方式会导致文档样式影响卡片编辑器样式\n */\n.lake-diagram-panel-properties ~ div .ant-dropdown-menu-item {\n  margin-left: 0;\n  list-style-type: none;\n}\n.lake-diagram-panel-properties {\n  background-color: #fafafa;\n  border-left: 1px solid #e8e8e8;\n  height: 100%;\n  width: 100%;\n  min-width: 212px;\n  max-width: 286px;\n  cursor: default;\n  user-select: none;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-menu-hide-header {\n  margin-top: 8px;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-menu-hide-header .ant-collapse-header {\n  display: none;\n}\n.lake-diagram-panel-properties .lake-diagam-multi-properties-selection {\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/8c02d0c7-9749-4078-b865-6084959df78f.svg);\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body {\n  height: 100%;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs {\n  height: 100%;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs .ant-tabs-nav {\n  width: 100%;\n  margin-bottom: 0px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.09);\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs .ant-tabs-nav .ant-tabs-nav-list {\n  width: 100%;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab {\n  flex-grow: 1;\n  margin: 0 2px;\n  display: inline-block;\n  text-align: center;\n  border: none;\n  color: #8C8C8C;\n  border-radius: 0;\n  background-color: rgba(0, 0, 0, 0);\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab:hover {\n  color: #262626;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn {\n  color: #262626;\n  font-weight: 400;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs .ant-tabs-content-holder {\n  overflow: auto;\n  height: calc(100% - 38px);\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs-bar {\n  margin: 0;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse {\n  border: none;\n  background-color: rgba(0, 0, 0, 0);\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-header {\n  padding: 0 16px;\n  margin: 8px 0;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-header .anticon {\n  padding: 0;\n  margin-right: 8px;\n  top: 6px;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-item {\n  padding-top: 8px;\n  border-bottom: none;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-item .ant-collapse-content {\n  border: none;\n  background: none;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-item .ant-collapse-content .ant-collapse-content-box {\n  margin: 0px 16px;\n  padding: 0px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.09);\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-item:last-child .ant-collapse-content-box {\n  border-bottom: none;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-item:last-child {\n  border-bottom: none;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body-empty {\n  height: 100%;\n  position: relative;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body-empty .lake-diagram-background-wrapper {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  margin: auto;\n  padding-bottom: 96px;\n  width: 200px;\n  height: 140px;\n  text-align: center;\n  color: #BFBFBF;\n  line-height: 24px;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body-empty .lake-diagram-background-wrapper p {\n  margin-bottom: 0;\n}\n.lake-diagram-control {\n  margin-bottom: 8px;\n}\n.lake-diagram-control.disabled .lake-diagram-control-title {\n  color: #BFBFBF;\n}\n.lake-diagram-control.disabled .lake-diagram-control-extra {\n  border-color: #e8e8e8;\n  background: none;\n}\n.lake-diagram-control.disabled .lake-diagram-control-extra > svg {\n  display: none;\n}\n.lake-diagram-control-title {\n  color: #595959;\n  letter-spacing: 0;\n}\n.lake-diagram-control-head {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.lake-diagram-control-extra {\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  width: 92px;\n  min-height: 32px;\n  overflow: hidden;\n  background: #ffffff;\n  cursor: pointer;\n}\n.lake-diagram-control-extra > svg {\n  display: block;\n}\n.lake-diagram-control-body .ant-checkbox + span {\n  letter-spacing: 0;\n}\n.lake-diagram-panel-head {\n  border-bottom: 1px solid #e8e8e8;\n  margin-bottom: 12px;\n  padding-bottom: 4px;\n}\n.lake-diagram-panel-head-title {\n  color: #262626;\n  font-size: 14px;\n  font-weight: 500;\n}\n");var Hf=G.a.TabPane;function Gf(e,t){var n="object"===i()(e)?e:c()({},e,t),r={},a=function(e){e.split(".").reduce((function(t,r,a,i){return t[r]=a+1===i.length?n[e]:{}}),r)};for(var o in n)a(o);return r}function Zf(e){var t,n,r,a=e.diagram,i=e.menus,o=e.tabs,c=e.emptyImg,l=e.className,s=Object(Re.useState)(e.selections||a.selector.selections.concat([])),u=D()(s,2),d=u[0],f=u[1],h=Object(Re.useState)(null),p=D()(h,2),m=p[0],g=p[1];function y(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;return"function"==typeof t?(t(),void f(z()(d))):e.onChange?e.onChange(Gf(t,n),r):(a.command.execute("Update",{id:r,model:Gf(t,n),autoSelect:!1}),void f(z()(d)))}return Object(Re.useEffect)((function(){Array.isArray(e.selections)&&f(e.selections)}),[e.selections]),Object(Re.useEffect)((function(){if(a){var e=se()((function(e){e&&g(e),f(a.selector.selections.concat([]))}),32),t=function(){e()};return a.on("afterselect",t),function(){a.off("afterselect",t)}}}),[a,m]),Me.a.createElement("div",{className:Ne()("lake-diagram-panel lake-diagram-panel-properties",l),"data-lake_prevent_click_unselect":"true"},d.length>0?(t=function(e,t,n){var r={},a=[];return e.forEach((function(e,t){var n=e.name,a=e.key;r[a]={name:n,menus:[],index:t,key:a}})),t.forEach((function(e){n.length>0&&e.condition(n)&&(r[e.tabKey].menus.push(e),a.push(e.name))})),Object.values(r).filter((function(e){return e.menus.length>0})).sort((function(e,t){return e.index-t.index}))}(o,i,d),n=i.map((function(e){return e.name})),r=t.map((function(e){return e.key})),Me.a.createElement("div",{className:"lake-diagram-panel-body"},Me.a.createElement(G.a,{type:"card",activeKey:m&&-1!==r.indexOf(m)?m:d.every((function(e){return e.isText}))?"text":t[0].key,onChange:function(e){g(e)}},t.map((function(e){var t=e.name,r=e.menus,i=e.key;return Me.a.createElement(Hf,{tab:t,key:i},Me.a.createElement(Z.a,{defaultActiveKey:n,expandIcon:function(e){return e.isActive?Me.a.createElement(Te.a,{style:{color:"#595959"}}):Me.a.createElement(ze.a,{style:{color:"#595959"}})}},r.map((function(e){return Me.a.createElement(Z.a.Panel,{header:e.name,key:e.name,className:!0===e.hideHeader?"lake-diagram-panel-menu-hide-header":""},e.controls.map((function(e,t){return Me.a.createElement(e.Control,Vf(Vf({},e.props),{},{key:t,path:e.path,title:e.title,selections:d,diagram:a,onChange:y}))})))}))))}))))):Me.a.createElement("div",{className:"lake-diagram-panel-body lake-diagram-panel-body-empty"},Me.a.createElement("div",{className:"lake-diagram-background-wrapper"},Me.a.createElement("img",{src:c}),Me.a.createElement("p",null,Qt("点击选中元素")),Me.a.createElement("p",null,Qt("可设置颜色、布局、文字等样式")))))}function Wf(e){var t=e.title,n=e.extra,r=e.children,a=e.disabled,i=e.onMouseDown,o=Ne()("lake-diagram-control",e.className,{disabled:a});return Me.a.createElement("div",{className:o,onMouseDown:i},t&&Me.a.createElement("div",{className:"lake-diagram-control-head"},Me.a.createElement("div",{className:"lake-diagram-control-title"},t),n&&Me.a.createElement("div",{className:"lake-diagram-control-extra"},n)),r&&Me.a.createElement("div",{className:"lake-diagram-control-body"},r))}function Kf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kf(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qf(e){var t=e.zoom;e=Uf(Uf({},e),{},{zoomToolDOM:null});var n=[{value:.2,title:"20%"},{value:.5,title:"50%"},{value:1,title:"100%"},{value:2,title:"200%"},{value:4,title:"400%"},{value:"autoFit",title:Qt("适应画布")}],r=function(t){var n=e,r=n.onChange,a=n.minZoom,i=n.maxZoom;t<a&&(t=a),t>i&&(t=i),r(t)},a=Me.a.createElement(Y.a,{className:"lake-zoom-tool-menu",onClick:function(e){var t=e.item;r(t.props.value)}},n.map((function(e,t){return Me.a.createElement(Y.a.Item,{key:t,value:e.value},e.title)})));return Me.a.createElement("div",{className:"lake-board-zoom-tool",ref:function(t){e.zoomToolDOM=t}},Me.a.createElement("span",{className:"lake-icon lake-icon-board-zoom-out",onClick:function(){var t=e,n=t.zoomStep,a=t.zoom;r(a-n)}}),Me.a.createElement(X.a,{overlayClassName:"lake-board-zoom-tool-dropdown-overlay",overlay:a,placement:"bottomCenter",trigger:["click"]},Me.a.createElement("span",{className:"lake-zoom-tool-precent"},Math.round(100*t)+"%")),Me.a.createElement("span",{className:"lake-icon lake-icon-board-zoom-in",onClick:function(){var t=e,n=t.zoomStep,a=t.zoom;r(a+n)}}))}function Jf(e){var t=e.diagram,n=Object(Re.useState)(null),r=D()(n,2),a=r[0],i=r[1];return Object(Re.useEffect)((function(){if(t){i(t.viewport.zoom);var e=se()((function(){i(t.viewport.zoom)}),32);return t.on("afterviewportchange",e),function(){t.off("afterviewportchange",e)}}}),[a,t]),t?Me.a.createElement(Qf,{zoom:a,onChange:function(e){"autoFit"===e?t.viewport.autoFit():"resetView"===e?t.viewport.focusFirstRoot():t.viewport.setViewport(e)}}):Me.a.createElement("div",null)}function $f(e,t){var n=Array.from(e.nativeEvent.target.files).filter((function(e){return fs(e)}));n[0]&&t.emit("importimage",{files:n,from:"uploadButton"})}function eh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function th(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eh(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nh(e){return e.overlay?e.overlay({onSelect:e.onSelect}):Me.a.createElement(Y.a,{onClick:e.onSelect,className:Ne()("lake-diagram-board-toolbar-menu",e.menuClassName)},e.data.map((function(e){return Me.a.createElement(Y.a.Item,{key:e.key,style:{marginTop:"2px"}},Me.a.createElement("div",{className:"lake-icon lake-icon-".concat(e.icon)}))})))}function rh(e){var t=e.name,n=e.icon,r=e.tooltipPlacement,a=e.defaultKey,i=e.data,o=e.titleTag,c=Object(Re.useState)(a),l=D()(c,2),s=l[0],u=l[1],d=i&&i.find((function(e){return e.key===s})),f=Object(Re.useState)(!1),h=D()(f,2),p=h[0],m=h[1],g=Object(Re.useState)(!1),y=D()(g,2),v=y[0],b=y[1];return Me.a.createElement("div",{className:"lake-diagram-board-toolbar-command"},Me.a.createElement(W.a,{overlayClassName:"lake-diagram-board-toolbar-popover",content:nh(th(th({},e),{},{onSelect:function(t){var n=t.key;u(n),b(!1),e.onSelect&&e.onSelect({key:n})},setPopoverVisible:b})),trigger:"click",placement:"".concat(r,"Top"),visible:v,onVisibleChange:function(){return b(!v)}},Me.a.createElement(V.a,{visible:p,placement:r,overlayClassName:Ne()({"lake-diagram-board-toolbar-tooltip-overlay":"right"===r}),title:o},Me.a.createElement(q.a,{"data-testid":t,onClick:function(){m(!1),b(!v),e.onClick({key:s})},onMouseEnter:function(){return m(!0)},onMouseLeave:function(){return m(!1)}},Me.a.createElement("span",{className:"lake-icon lake-icon-".concat(n||d.icon)})))))}function ah(e){var t=e.name,n=e.icon,r=e.accept,a=e.disabled,i=e.title,o=e.tooltipPlacement,c=e.onChange,l=e.titleTag,s=Object(Re.useRef)();return Me.a.createElement("div",{className:"lake-diagram-board-toolbar-command","data-testid":t},Me.a.createElement(V.a,{disabled:a||!i,placement:o,title:l,overlayClassName:Ne()({"lake-diagram-board-toolbar-tooltip-overlay":"right"===o})},Me.a.createElement(q.a,{className:"lake-diagram-board-toolbar-upload",onClick:function(){s.current.value="",s.current.click()},disabled:a},Me.a.createElement("span",{className:"lake-icon lake-icon-".concat(n)}),Me.a.createElement("input",{type:"file",accept:r,onChange:c,ref:s}))))}function ih(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ih(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ih(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ch(e){var t=e.name,n=e.titleTag,r=e.title,a=e.hotkey,i=e.icon,o=e.label,c=e.tooltipPlacement,l=e.disabled,s=e.diagram,u=e.defaultKey,d=e.active,f=Object.keys(e).reduce((function(t,n){return n.startsWith("data-")&&(t[n]=e[n]),t}),{});return Me.a.createElement("div",Se()({className:"lake-diagram-board-toolbar-command","data-testid":t},f),Me.a.createElement(V.a,{disabled:l||!(r||a),placement:c,title:n,overlayClassName:Ne()({"lake-diagram-board-toolbar-tooltip-overlay":"right"===c})},Me.a.createElement(q.a,{onClick:function(t){t.stopPropagation(),e.onClick?e.onClick({key:u}):e.execCommand&&e.execCommand(s)},disabled:l,className:Ne()({"lake-button-active":d})},Me.a.createElement("span",{className:"lake-icon lake-icon-".concat(i)}),o&&Me.a.createElement("span",{className:"lake-diagram-board-toolbar-command-label"},o))))}function lh(e){var t=e.speratorAlignment,n=e.tooltipPlacement,r=e.title,a=e.hotkey,i=e.diagram,o=e.disabled,c=e.active;o="function"==typeof o?o(i):o,c="function"==typeof c?c(i):c;var l=oh(oh({},e),{},{disabled:o,active:c}),s="bottom"===n?Me.a.createElement("div",{className:"lake-diagram-board-toolbar-tooltip"},r&&Me.a.createElement("div",{className:"lake-diagram-board-toolbar-tooltip-title"},r),a&&Me.a.createElement("div",{className:"lake-diagram-board-toolbar-tooltip-hotkey"},a)):Me.a.createElement("div",{className:"lake-diagram-board-toolbar-tooltip"},r&&Me.a.createElement("div",{className:"lake-diagram-board-toolbar-tooltip-title"},r,a&&Me.a.createElement("span",{className:"lake-diagram-board-toolbar-popover-shortcut"},a)));switch(e.type){case"separator":return Me.a.createElement("div",{className:"lake-diagram-board-toolbar-".concat(t,"-separator")});case"popover":return Me.a.createElement(rh,Se()({},l,{titleTag:s}));case"upload":return Me.a.createElement(ah,Se()({},l,{titleTag:s}));case"custom":return e.component;default:return Me.a.createElement(ch,Se()({},l,{titleTag:s}))}}function sh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sh(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Zf.defaultProps={diagram:null,menus:null,tabs:null,emptyImg:"",className:""},Zf.propTypes={diagram:Ae.a.object,menus:Ae.a.array,tabs:Ae.a.array,emptyImg:Ae.a.string,selections:Ae.a.arrayOf(Ae.a.object),onChange:Ae.a.func,className:Ae.a.string},Fe("/* stylelint-disable */\n.lake-diagram-control .lake-diagram-control-extra .ant-input-number {\n  border: none;\n}\n.lake-diagram-control .lake-diagram-control-extra .lake-diagram-dropdown-input {\n  border: none;\n}\n.lake-diagram-control.disabled .lake-diagram-control-extra {\n  background-color: #fafafa;\n}\n.lake-diagram-control.disabled .ant-input-number.ant-input-number-disabled {\n  background-color: #fafafa;\n}\n"),Object.assign(Wf,{get:function(e,t,n){var r=n;if(e.length>0)if((r=e.map((function(e){return t.split(".").reduce((function(e,t){return e?e.isCell&&e.get(t)||e[t]:e}),e)}))).every((function(e){return e===r[0]})))r=r[0];else{if(!r.every((function(e){return"number"==typeof e})))return"multiValue";r.sort(),r=r[r.length-1]}return r}}),Wf.propTypes={title:Ae.a.string,extra:Ae.a.object,children:Ae.a.node,className:Ae.a.string,disabled:Ae.a.bool,onMouseDown:Ae.a.func},Zf.Control=Wf,Fe(".lake-board-zoom-tool-dropdown-overlay {\n  padding-top: 6px;\n  min-width: 111px;\n}\n.lake-board-zoom-tool-dropdown-overlay ul {\n  list-style-type: none;\n  margin: 0;\n}\n.lake-board-zoom-tool-dropdown-overlay ul.lake-zoom-tool-menu {\n  width: 111px;\n}\n.lake-board-zoom-tool-dropdown-overlay ul.lake-zoom-tool-menu li {\n  font-size: 12px;\n  margin-left: 0;\n  margin-top: 0;\n  margin-bottom: 0;\n  white-space: nowrap;\n}\n.lake-board-zoom-tool-dropdown-overlay .ant-dropdown-menu {\n  box-shadow: 0 2px 4px #d8d8d8;\n  border-radius: 5px;\n}\n.lake-board-zoom-tool-dropdown-overlay .ant-dropdown-menu .ant-dropdown-menu-item {\n  color: black;\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n.lake-board-zoom-tool {\n  display: flex;\n  align-items: center;\n  height: 100%;\n}\n.lake-board-zoom-tool .lake-icon {\n  color: #262626;\n  margin-left: 10px;\n  margin-right: 10px;\n  font-size: 18px;\n  width: 18px;\n  height: 18px;\n}\n.lake-board-zoom-tool .lake-icon:hover {\n  cursor: pointer;\n}\n.lake-board-zoom-tool .lake-zoom-tool-precent {\n  vertical-align: middle;\n  width: 40px;\n  line-height: 25px;\n}\n.lake-board-zoom-tool span {\n  display: inline-block;\n  padding: 0;\n  font-size: 12px;\n  height: 26px;\n  text-align: center;\n  user-select: none;\n}\n.lake-card-block-max .lake-zoom-tool {\n  margin: 8px;\n}\n"),Qf.defaultProps={zoom:1,onChange:function(){},minZoom:.2,maxZoom:4,zoomStep:.2},Qf.propTypes={zoom:Ae.a.number,onChange:Ae.a.func,minZoom:Ae.a.number,maxZoom:Ae.a.number,zoomStep:Ae.a.number,zoomToolDOM:Ae.a.element},Jf.propTypes={diagram:Ae.a.object},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-board-toolbar-popover .ant-btn::after {\n  display: none;\n}\n.lake-diagram-board-toolbar-popover .ant-btn.ant-dropdown-trigger:hover {\n  background: #f5f5f5;\n  border-radius: 2px;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button {\n  display: flex;\n  height: 32px;\n  line-height: 32px;\n  border-radius: 2px;\n  border: 1px solid transparent;\n  align-items: center;\n  transition: border 0.3s;\n  margin-right: 4px;\n  overflow: hidden;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button:hover {\n  border-color: #e8e8e8;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button:hover .ant-btn:first-child {\n  border-color: #e8e8e8;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn {\n  border-radius: 0;\n  transition: none;\n  margin-right: 0;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn:hover {\n  background: #f5f5f5;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn:first-child {\n  border-right: 1px solid transparent;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn:first-child:hover {\n  background: #f5f5f5;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn:first-child:not(:last-child) {\n  min-width: auto;\n  width: auto;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) {\n  min-width: auto;\n  width: 16px;\n  border: none;\n  background: none;\n  padding: 0;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  position: relative;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) .lake-icon {\n  color: #262626;\n  position: absolute;\n  right: 4px;\n  top: 14px;\n  width: 8px;\n  height: 8px;\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSI1IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgb3BhY2l0eT0iLjQ1Ij48cGF0aCBkPSJNMC0yaDh2OEgweiIvPjxwYXRoIGQ9Ik0uNTk2LjU1N2wzLjE1IDMuODIxYS4zMzIuMzMyIDAgMDAuNDk1IDBMNy40MDUuNTU3YS4zMzIuMzMyIDAgMDAtLjI0Ny0uNTUzSC44NDVjLS4yODggMC0uNDQuMzM5LS4yNDkuNTUzeiIgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPg==);\n  background-repeat: no-repeat;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) .lake-icon::before {\n  content: '';\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child):hover {\n  background: #e8e8e8;\n}\n.lake-diagram-board-toolbar-popover-menu .lake-icon {\n  color: #262626;\n  font-size: 16px;\n}\n.lake-diagram-board-toolbar-popover .ant-popover-content {\n  min-width: auto;\n  width: auto;\n  border-radius: 3px;\n}\n.lake-diagram-board-toolbar-popover .ant-popover-content .ant-popover-arrow {\n  display: none;\n}\n.lake-diagram-board-toolbar-popover .ant-popover-content .ant-popover-inner {\n  background-color: inherit;\n  box-shadow: none;\n  background-clip: none;\n}\n.lake-diagram-board-toolbar-popover .ant-popover-content .ant-popover-inner .ant-popover-inner-content {\n  padding: 0;\n}\n.lake-diagram-board-toolbar-menu.ant-menu {\n  box-shadow: 0 1px 2px -2px rgba(0, 0, 0, 0.08), 0 2px 6px 0 rgba(0, 0, 0, 0.04), 0 4px 8px 1px rgba(0, 0, 0, 0.02);\n  border: 1px solid #e9e9e9;\n  width: 38px;\n  padding-top: 3px;\n  padding-bottom: 3px;\n}\n.lake-diagram-board-toolbar-menu.ant-menu .ant-menu-item {\n  padding: 0 5px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  width: 28px;\n  margin-left: 4px;\n  margin-right: 4px;\n  height: 28px;\n  line-height: 32px;\n}\n.lake-diagram-board-toolbar-menu.ant-menu .ant-menu-item .lake-icon {\n  color: #262626;\n  font-size: 18px;\n}\n.lake-diagram-board-toolbar-menu.ant-menu .ant-menu-item-selected {\n  background-color: transparent;\n}\n"),nh.propTypes={data:Ae.a.array,overlay:Ae.a.node,onSelect:Ae.a.func,menuClassName:Ae.a.string},rh.propTypes={command:Ae.a.string,name:Ae.a.string,icon:Ae.a.string,overlay:Ae.a.func,onSelect:Ae.a.func,onClick:Ae.a.func,execCommand:Ae.a.func,defaultKey:Ae.a.string,data:Ae.a.array,tooltipPlacement:Ae.a.string,diagram:Ae.a.object,titleTag:Ae.a.object},Fe(".lake-diagram-board-toolbar-upload {\n  position: relative;\n}\n.lake-diagram-board-toolbar-upload input {\n  position: absolute;\n  left: 0;\n  top: 0;\n  opacity: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  display: none;\n}\n"),ah.propTypes={name:Ae.a.string,icon:Ae.a.string,accept:Ae.a.string,disabled:Ae.a.bool,title:Ae.a.string,onChange:Ae.a.func,diagram:Ae.a.object,tooltipPlacement:Ae.a.string,titleTag:Ae.a.object},Fe(".lake-diagram-board-toolbar-tooltip-overlay .ant-tooltip-content {\n  padding-left: 4px;\n}\n"),ch.propTypes={disabled:Ae.a.bool,active:Ae.a.bool,name:Ae.a.string,title:Ae.a.string,hotkey:Ae.a.string,titleTag:Ae.a.object,type:Ae.a.string,icon:Ae.a.string,label:Ae.a.string,command:Ae.a.string,onClick:Ae.a.func,execCommand:Ae.a.func,diagram:Ae.a.object,tooltipPlacement:Ae.a.string,defaultKey:Ae.a.string},lh.propTypes={type:Ae.a.string,component:Ae.a.object,speratorAlignment:Ae.a.string,tooltipPlacement:Ae.a.string,title:Ae.a.string,hotkey:Ae.a.string,disabled:Ae.a.oneOfType([Ae.a.bool,Ae.a.func]),active:Ae.a.oneOfType([Ae.a.bool,Ae.a.func]),diagram:Ae.a.object},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-board-side-toolbar:empty {\n  display: none;\n}\n.lake-diagram-board-top-toolbar {\n  position: absolute;\n  top: 10px;\n  left: 0;\n  right: 0;\n  z-index: 1;\n  padding-left: 8px;\n  padding-right: 16px;\n  height: 40px;\n  display: flex;\n  justify-content: space-between;\n  pointer-events: none;\n}\n.lake-diagram-board-top-toolbar > div {\n  pointer-events: auto;\n}\n.lake-diagram-board-top-toolbar-body {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-left: 8px;\n  margin-right: 8px;\n  height: 100%;\n  border-radius: 3px;\n  box-shadow: 0 1px 2px -2px rgba(0, 0, 0, 0.08), 0 2px 6px 0 rgba(0, 0, 0, 0.04), 0 4px 8px 1px rgba(0, 0, 0, 0.02);\n  border: 1px solid #e4e4e4;\n}\n.lake-diagram-board-toolbar-left {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.lake-diagram-board-toolbar-left .lake-diagram-board-top-toolbar-body {\n  background: white;\n}\n.lake-diagram-board-toolbar-right {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n}\n.lake-diagram-board-toolbar-right .lake-diagram-board-top-toolbar-body {\n  background: white;\n}\n.lake-diagram-board-side-toolbar {\n  position: absolute;\n  width: 40px;\n  left: 16px;\n  height: 100%;\n  z-index: 1;\n  display: flex;\n  align-content: center;\n  pointer-events: none;\n}\n.lake-diagram-board-side-toolbar-body {\n  display: flex;\n  align-content: center;\n  flex-flow: row wrap;\n  margin: auto;\n  background: white;\n  border-radius: 3px;\n  box-shadow: 0 1px 2px -2px rgba(0, 0, 0, 0.08), 0 2px 6px 0 rgba(0, 0, 0, 0.04), 0 4px 8px 1px rgba(0, 0, 0, 0.02);\n  border: 1px solid #e4e4e4;\n  pointer-events: initial;\n  padding: 4px 0;\n}\n.lake-diagram-board-toolbar-vertical-separator {\n  width: 1px;\n  height: 60%;\n  background: #e8e8e8;\n}\n.lake-diagram-board-toolbar-horizontal-separator {\n  height: 1px;\n  background: #e8e8e8;\n  margin-top: 4px;\n  margin-bottom: 4px;\n  width: calc(100% - 16px);\n  margin-left: 8px;\n}\n.lake-diagram-board-toolbar-command .ant-btn {\n  border: none;\n  background: none;\n  padding: 0 5px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  outline: none;\n  width: 32px;\n  margin-left: 3px;\n  margin-right: 3px;\n  color: #262626;\n}\n.lake-diagram-board-toolbar-command .ant-btn[disabled] {\n  color: #BFBFBF;\n  background: none;\n}\n.lake-diagram-board-toolbar-command .ant-btn:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-diagram-board-toolbar-command .ant-btn:focus {\n  color: #595959;\n}\n.lake-diagram-board-toolbar-command .ant-btn::after {\n  display: none;\n}\n.lake-diagram-board-toolbar-command .ant-btn .lake-icon {\n  font-size: 18px;\n  margin: 0;\n}\n.lake-diagram-board-toolbar-command .lake-button-active {\n  color: #096dd9;\n}\n.lake-diagram-board-toolbar-command-label {\n  font-size: 12px;\n  display: inline-block;\n  margin-left: 0.25em;\n}\n.lake-diagram-board-toolbar-tooltip {\n  text-align: center;\n  font-size: 12px;\n}\n.lake-diagram-board-toolbar-tooltip .lake-diagram-board-toolbar-tooltip-hotkey {\n  color: #BFBFBF;\n  margin-top: 4px;\n}\n.lake-diagram-board-toolbar-tooltip .lake-diagram-board-toolbar-tooltip-hotkey:first-child {\n  margin-top: 0;\n}\n.lake-diagram-board-toolbar-popover-shortcut {\n  font-size: 12px;\n  color: #d8d8d8;\n  padding-left: 4px;\n}\n");function dh(e){var t=e.items,n=e.tooltipPlacement,r=e.className,a=e.diagram;return Me.a.createElement("div",{className:r},t.map((function(t,r){return Me.a.createElement(lh,Se()({key:"".concat(t.name||t.type,"-").concat(r),execCommand:t.execCommand,tooltipPlacement:n,diagram:a},t,e))})))}function fh(e){var t=e.items,n={placement:"top-left",tooltipPlacement:"bottom",speratorAlignment:"vertical",className:"lake-diagram-board-top-toolbar-body"},r=function(n){return(r=n.placement,t.reduce((function(e,t){return t.align===r&&e.push(t.subItems),e}),[])).map((function(t,r){return Me.a.createElement(dh,{key:r,items:t,tooltipPlacement:n.tooltipPlacement,speratorAlignment:n.speratorAlignment,className:n.className,diagram:e.diagram})}));var r};return Me.a.createElement(Me.a.Fragment,null,Me.a.createElement("div",{className:Ne()("lake-diagram-board-top-toolbar",e.className),"data-lake_prevent_click_unselect":"true"},Me.a.createElement("div",{className:"lake-diagram-board-toolbar-left"},r(n)),Me.a.createElement("div",{className:"lake-diagram-board-toolbar-right"},r(uh(uh({},n),{},{placement:"top-right"})))),Me.a.createElement("div",{className:Ne()("lake-diagram-board-side-toolbar",e.className),"data-lake_prevent_click_unselect":"true"},r(uh(uh({},n),{},{placement:"left-middle",tooltipPlacement:"right",speratorAlignment:"horizontal",className:"lake-diagram-board-side-toolbar-body"}))))}function hh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ph(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hh(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}dh.defaultProps={items:[]},dh.propTypes={items:Ae.a.array,tooltipPlacement:Ae.a.string,className:Ae.a.string,diagram:Ae.a.object},fh.defaultProps={items:[]},fh.propTypes={className:Ae.a.string,items:Ae.a.array,execCommand:Ae.a.func,diagram:Ae.a.object},fh.Control=lh,Fe("/* stylelint-disable */\n");var mh=new cs({groups:["basic","flowchart"]});function gh(e){var t=e.diagram,n=e.mini,r=e.onProperties,a=e.showProperties,i=e.onSave,o=e.readOnly,c=e.focusMode,l=e.setFocusMode,s=Object(Re.useState)([]),u=D()(s,2),d=u[0],f=u[1];return Object(Re.useEffect)((function(){if(t){var e=function(){var e=function(e){var t=e.diagram,n=e.mini,r=e.onProperties,a=e.showProperties,i=e.onSave,o=e.readOnly,c=e.focusMode;return function(e){var t=e.diagram,n=e.onProperties,r=e.onSave,a=e.setFocusMode;return[{align:"top-left",subItems:[{name:"save",type:"button",title:Qt("保存"),hotkey:j.ua.macos?"⌘+S":"Ctrl+S",noMini:!0,noReadOnly:!0,icon:"board-save",disabled:!1,execCommand:function(){return r&&r()}},{type:"separator",noMini:!0,noReadOnly:!0},{name:"undo",type:"button",title:Qt("撤销"),hotkey:j.ua.macos?"⌘+Z":"Ctrl+Z",icon:"board-undo",noMini:!0,noReadOnly:!0,disabled:function(e){return!e.command.enable("Undo")},execCommand:function(e){return e.command.execute("Undo")}},{name:"redo",title:Qt("重做"),hotkey:j.ua.macos?"⌘+Shift+Z":"Ctrl+Shift+Z",icon:"board-redo",noMini:!0,noReadOnly:!0,disabled:function(e){return!e.command.enable("Redo")},execCommand:function(e){return e.command.execute("Redo")}}],focusHidden:!0},{align:"top-right",subItems:[{name:"hand",type:"button",title:Qt("拖拽"),noReadOnly:!0,hotkey:"Space",icon:"board-hand",active:function(e){return"dragCanvas"===e.interaction.currentMode},disabled:function(e){return!e.command.enable("ButtonDragCanvas")},execCommand:function(e){return e.command.execute("ButtonDragCanvas")}},{type:"separator",noReadOnly:!0},{type:"custom",component:Me.a.createElement(Jf,{diagram:t})}],focusHidden:!0},{align:"top-right",subItems:[{name:"properties",type:"button",title:Qt("打开设置"),noReadOnly:!0,icon:"board-setting",disabled:function(){return!1},execCommand:function(){n()},noMini:!0}],focusHidden:!0},{align:"top-right",subItems:[{name:"focusmode",type:"button",title:Qt("隐藏工具栏"),hotkey:j.ua.macos?"⌘+.":"Ctrl+.",noMini:!1,noReadOnly:!0,icon:"board-toolbar-hide",disabled:!1,execCommand:function(){return a(!0)}}],focusHidden:!0},{align:"top-right",subItems:[{name:"focusmode",type:"button",title:Qt("展开工具栏"),hotkey:j.ua.macos?"⌘+.":"Ctrl+.",noMini:!1,noReadOnly:!0,icon:"board-toolbar-show",disabled:!1,execCommand:function(){return a(!1)}}],focusHidden:!1},{align:"left-middle",subItems:[{type:"button",name:"insertText",title:Qt("文本"),noReadOnly:!0,hotkey:"T",icon:"board-insert-text",disabled:function(e){return!e.command.enable("BeginInsertText")},execCommand:function(e){return e.command.execute("BeginInsertText")}},{name:"board:insertShape",title:Qt("图形"),hotkey:"S",type:"popover",noReadOnly:!0,icon:"board-insert-shape",execCommand:function(e){return e.command.execute("BeginInsertGeometry")},onClick:function(e){var n=e.key;t.command.execute("BeginInsertGeometry",{shape:n})},overlay:function(e){var n=e.onSelect;return Me.a.createElement(Ff,{onSelect:function(e){var r=e.key;n({key:r}),t.command.execute("BeginInsertGeometry",{shape:r})},shapeSelect:mh})}},{type:"popover",name:"insertEdge",title:Qt("连线"),hotkey:j.ua.macos?"⌘+L":"Ctrl+L",defaultKey:"straight-line-arrow",icon:"board-straight-line-arrow",noReadOnly:!0,disabled:function(e){return!e.command.enable("BeginInsertLine")},data:[{key:"straight-line-arrow",icon:"board-straight-line-arrow"},{key:"curve-line-arrow",icon:"board-curve-line-arrow"},{key:"elbow-line-arrow",icon:"board-elbow-line-arrow"}],onClick:function(){t.selector.clear(),t.command.execute("BeginInsertLine",t.settings.line)},onSelect:function(e){var n=e.key.split("-"),r=D()(n,3),a=r[0],i=r[2];t.command.execute("BeginInsertLine",{shape:a,marker:i})}},{type:"button",name:"insertMindmap",title:Qt("思维导图"),hotkey:"M",icon:"board-mind",noReadOnly:!0,disabled:function(e){return!e.command.enable("MindmapBeginInsertStem")},execCommand:function(e){return e.command.execute("MindmapBeginInsertStem")}},{type:"separator",noReadOnly:!0},{name:"insertImage",title:Qt("图片"),type:"upload",icon:"board-upload-image",noReadOnly:!0,accept:j.EXTS.IMAGE_EXT.map((function(e){return"."+e})).join(","),disabled:!1,onChange:function(e){$f(e,t)}}],focusHidden:!0}]}({diagram:t,onProperties:r,onSave:i,setFocusMode:e.setFocusMode}).map((function(e){if(c===e.focusHidden)return null;var t=e.subItems.filter((function(e){return!(n&&e.noMini||!n&&e.noMaxim||o&&e.noReadOnly||"properties"===e.name&&a)}));return t.length>0?ph(ph({},e),{},{subItems:t}):null})).filter((function(e){return e}))}({diagram:t,mini:n,onProperties:r,showProperties:a,onSave:i,readOnly:o,focusMode:c,setFocusMode:l});f(e)},s=function(t){t.isModelChange&&e()};return e(),t.on("aftercommandexecute",s),t.on("afterselect",e),t.on("aftermodechange",e),function(){t.off("aftercommandexecute",s),t.off("afterselect",e),t.off("aftermodechange",e)}}return function(){}}),[t,n,r,i]),Me.a.createElement(fh,{diagram:t,items:d,className:"lake-diagram-board-toolbar"})}function yh(e){var t=e.icon,n=e.title,r=e.hotkey;return Me.a.createElement("div",null,t,n,r&&Me.a.createElement("span",{className:"lake-context-menu-hotkey"},r))}function vh(e){var t=e.title,n=e.hotkey,r=e.accept,a=e.icon,i=e.onChange,o=Object(Re.useRef)();return Me.a.createElement("div",{className:"lake-board-context-menu-upload-item-content",onClick:function(e){e.stopPropagation(),o.current.click()}},a,t,n&&Me.a.createElement("span",{className:"lake-context-menu-hotkey"},n),Me.a.createElement("input",{type:"file",accept:r,onChange:i,ref:o}))}function bh(e,t){var n=e.disabled,r=e.title,a=e.key,i=e.hotkey,o=e.type,c=e.accept,l=e.onChange;if(e.data)return Me.a.createElement(Y.a.SubMenu,{key:a,title:r,disabled:n,popupClassName:"lake-context-submenu lake-prevent-card-activated lake-diagram-dialog-popover lake-diagram-prevent-mouse-select"},e.data.map(bh));if("separator"===o)return Me.a.createElement(Y.a.Divider,{key:a+"_"+t});var s,u="string"==typeof e.icon?Me.a.createElement("span",{className:"lake-icon lake-icon-".concat(e.icon)}):e.icon;return s="upload"===o?Me.a.createElement(vh,{icon:u,title:r,hotkey:i,accept:c,onChange:l}):Me.a.createElement(yh,{icon:u,title:r,hotkey:i}),Me.a.createElement(Y.a.Item,{key:a,className:"ant-menu-item",disabled:n},s)}function xh(e){var t=e.coord,n=e.overlayClassName,r=e.diagram,a=e.onClose,i=Object(Re.useState)(null),o=D()(i,2),c=o[0],l=o[1],s=Object(Re.useRef)();if(Object(Re.useEffect)((function(){if(t){var e=s.current.offsetParent.getBoundingClientRect();l([t[0]-e.x,t[1]-e.y])}else l(null)}),[t]),Object(Re.useEffect)((function(){function e(){a()}function t(t){t.target.closest(".lake-diagram-dialog-popover")||e()}function n(){e()}return window.addEventListener("mousedown",t),window.addEventListener("scroll",e,{passive:!0}),r.on("afterviewportchange",n),function(){window.removeEventListener("mousedown",t),window.removeEventListener("scroll",e),r.off("afterviewportchange",n)}}),[r,a]),c){var u="lake-diagram-dialog-popover lake-prevent-card-activated lake-diagram-prevent-mouse-select lake-diagram-prevent-mouseleave-reset-focus-point";return Me.a.createElement(W.a,Se()({},e,{getPopupContainer:function(){return e.getPopupContainer?e.getPopupContainer():document.querySelector(".yuque-sdk-extra-container")||document.body},visible:!0,overlayClassName:n?n+" "+u:u}),Me.a.createElement("div",{ref:s,style:{position:"absolute",left:"".concat(c[0],"px"),top:"".concat(c[1],"px"),pointerEvents:"none",width:"0px",height:"0px"}}))}return Me.a.createElement("span",{ref:s})}function kh(e){var t=e.getMenuData,n=e.diagram,r=Object(Re.useState)(e.coord),a=D()(r,2),i=a[0],o=a[1],c=Object(Re.useState)(t()),l=D()(c,2),s=l[0],u=l[1],d=Object.keys(e).reduce((function(t,n){return n.startsWith("data-")&&(t[n]=e[n]),t}),{});Object(Re.useEffect)((function(){function e(e){e.preventDefault(),u(t()),o([e.clientX,e.clientY])}return n.on("contextmenu",e),function(){n.off("contextmenu",e)}}),[n]);var f=Me.a.createElement("div",Se()({},d,{className:Ne()("lake-context-menu",e.className)}),Me.a.createElement(Y.a,{className:"lake-context-submenu",onMouseDown:function(e){e.preventDefault()},onClick:function(t){var r=n.viewport.invertClient(i);e.onClick({key:t.key,canvasPoint:r}),o(null)},selectable:!1},s.map(bh)));return Me.a.createElement(xh,{placement:"rightTop",content:f,visible:!0,overlayClassName:"lake-diagram-context-menu-popover",diagram:n,coord:i,onClose:function(){o(null)}})}function wh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wh(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}gh.defaultProps={mini:!1,readOnly:!1,diagram:null,showProperties:!0,onProperties:function(){},onSave:function(){}},gh.propTypes={mini:Ae.a.bool,readOnly:Ae.a.bool,diagram:Ae.a.object,showProperties:Ae.a.bool,onProperties:Ae.a.func,onSave:Ae.a.func,focusMode:Ae.a.bool,setFocusMode:Ae.a.func},yh.propTypes={title:Ae.a.string,hotkey:Ae.a.string,icon:Ae.a.oneOf([Ae.a.string,Ae.a.node])},Fe(".lake-board-context-menu-upload-item-content input {\n  display: none;\n}\n"),vh.propTypes={title:Ae.a.string,hotkey:Ae.a.string,icon:Ae.a.oneOf([Ae.a.string,Ae.a.node]),data:Ae.a.arrayOf(Ae.a.object),onChange:Ae.a.func,accept:Ae.a.string},bh.propTypes={title:Ae.a.string,key:Ae.a.string,hotkey:Ae.a.string,type:Ae.a.string,disabled:Ae.a.bool,icon:Ae.a.oneOf([Ae.a.string,Ae.a.node]),data:Ae.a.arrayOf(Ae.a.object),onChange:Ae.a.func,accept:Ae.a.string},Fe("/* stylelint-disable */\n.lake-diagram-dialog-popover .ant-popover-inner-content {\n  padding: 0;\n}\n"),xh.defaultProps={coord:null,diagram:null,onClose:function(){}},xh.propTypes={coord:Ae.a.array,diagram:Ae.a.object,onClose:Ae.a.func,overlayClassName:Ae.a.string,getPopupContainer:Ae.a.object},Fe("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-context-menu-popover {\n  z-index: 1033;\n}\n.lake-diagram-context-menu-popover .ant-popover-arrow {\n  display: none;\n}\n.lake-context-menu {\n  z-index: 13;\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.13);\n}\n.lake-context-menu,\n.lake-context-submenu {\n  list-style-type: none !important;\n}\n.lake-context-menu li,\n.lake-context-submenu li {\n  margin-left: 0 !important;\n}\n.lake-context-menu .ant-menu,\n.lake-context-submenu .ant-menu {\n  border-radius: 2px;\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n.lake-context-menu .ant-menu .ant-menu-submenu,\n.lake-context-submenu .ant-menu .ant-menu-submenu,\n.lake-context-menu .ant-menu .ant-menu-item,\n.lake-context-submenu .ant-menu .ant-menu-item {\n  height: 32px;\n  line-height: 32px;\n  min-width: 164px;\n}\n.lake-context-menu .ant-menu .ant-menu-item-active,\n.lake-context-submenu .ant-menu .ant-menu-item-active,\n.lake-context-menu .ant-menu .ant-menu-submenu-active,\n.lake-context-submenu .ant-menu .ant-menu-submenu-active {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-context-menu .ant-menu .ant-menu-submenu .ant-menu-submenu-title,\n.lake-context-submenu .ant-menu .ant-menu-submenu .ant-menu-submenu-title {\n  height: auto;\n  line-height: inherit;\n  color: #595959;\n}\n.lake-context-menu .ant-menu .ant-menu-submenu .ant-menu-submenu-arrow::before,\n.lake-context-submenu .ant-menu .ant-menu-submenu .ant-menu-submenu-arrow::before,\n.lake-context-menu .ant-menu .ant-menu-submenu .ant-menu-submenu-arrow::after,\n.lake-context-submenu .ant-menu .ant-menu-submenu .ant-menu-submenu-arrow::after {\n  width: 5px;\n  height: 1px;\n  background-image: linear-gradient(90deg, #595959, #595959);\n}\n.lake-context-menu .ant-menu.ant-menu-vertical .ant-menu-item,\n.lake-context-submenu .ant-menu.ant-menu-vertical .ant-menu-item {\n  margin-bottom: 4px;\n}\n.lake-context-menu .ant-menu.ant-menu-vertical .ant-menu-submenu,\n.lake-context-submenu .ant-menu.ant-menu-vertical .ant-menu-submenu {\n  margin-bottom: 4px;\n}\n.lake-context-menu .ant-menu.ant-menu-sub,\n.lake-context-submenu .ant-menu.ant-menu-sub {\n  width: auto;\n}\n.lake-context-menu .ant-menu.ant-menu-sub > li,\n.lake-context-submenu .ant-menu.ant-menu-sub > li {\n  width: auto;\n}\n.lake-context-menu .lake-icon,\n.lake-context-submenu .lake-icon {\n  display: inline-block;\n  margin-right: 0.25em;\n}\n.lake-context-menu-hotkey {\n  float: right;\n  color: #BFBFBF;\n  margin-left: 16px;\n}\n"),kh.defaultProps={},kh.propTypes={className:Ae.a.string,coord:Ae.a.object,data:Ae.a.arrayOf(Ae.a.object),onClick:Ae.a.func,diagram:Ae.a.object,getMenuData:Ae.a.func};var Ch=[{key:"Align",title:Qt("对齐"),data:[{key:"AlignLeft",icon:"align-left",title:Qt("左对齐")},{key:"AlignHCenter",icon:"align-h-center",title:Qt("左右居中")},{key:"AlignRight",icon:"align-right",title:Qt("右对齐")},{type:"separator"},{key:"AlignTop",icon:"align-top",title:Qt("顶对齐")},{key:"AlignVCenter",icon:"align-v-center",title:Qt("上下居中")},{key:"AlignBottom",icon:"align-bottom",title:Qt("底对齐")}]},{key:"ZIndex",title:Qt("层级"),data:[{key:"ToFront",title:Qt("置顶")},{key:"ToBack",title:Qt("置底")},{key:"Forward",title:Qt("上移一层")},{key:"Backward",title:Qt("下移一层")}]},{key:"AttachToVertex",title:Qt("插入"),data:[{key:"AttachLink",title:Qt("链接"),hotkey:"⌘+K"}]},{key:"AttachToMindmapCell",title:Qt("插入"),data:[{key:"MindmapAppendChild",title:Qt("子级"),hotkey:"Tab"},{key:"MindmapAppendParent",title:Qt("父级"),hotkey:"Option+Tab"},{key:"MindmapAppendSibling",title:Qt("同级"),hotkey:"Enter"},{key:"separator",type:"separator"},{key:"AttachLink",title:Qt("链接"),hotkey:"⌘+K"},{key:"MindmapAttachImage",title:Qt("图片"),type:"upload",accept:j.EXTS.IMAGE_EXT.map((function(e){return"."+e})).join(",")},{key:"MindmapAttachNote",title:Qt("备注")}]},{key:"Cut",title:Qt("剪切"),hotkey:"⌘+X"},{key:"Copy",title:Qt("复制"),hotkey:"⌘+C"},{key:"CopyOtherFormat",title:Qt("复制为其它格式"),data:[{key:"CopyDoc",title:Qt("语雀文档")},{key:"CopyTable",title:Qt("语雀表格")}]},{key:"Paste",title:Qt("粘贴"),hotkey:"⌘+V"},{key:"Collapse",title:Qt("折叠"),hotkey:"⌘+/"},{key:"Expand",title:Qt("展开"),hotkey:"⌘+/"},{key:"MindmapAppendParent",title:Qt("插入父级"),hotkey:"Option+Tab"},{key:"MindmapInsertStem",title:Qt("添加思维导图"),hotkey:"M"},{key:"MindmapAppendSibling",title:Qt("插入同级"),hotkey:"Enter"},{key:"MindmapAppendChild",title:Qt("插入子级"),hotkey:"Tab"},{key:"ActualSize",title:Qt("实际尺寸"),hotkey:"⌘+0"},{key:"FitViewport",title:Qt("适应画布"),hotkey:"⌘+Shift+="},{key:"Delete",title:Qt("删除"),hotkey:"Delete"},{key:"MindmapRemoveSingleNode",title:Qt("删除单个节点"),hotkey:"⌘+Delete"},{key:"BeginInsertLine",title:Qt("添加连线"),hotkey:"⌘+L"},{key:"BeginEditContent",title:Qt("编辑文本")},{key:"separator",type:"separator"},{key:"InsertText",title:Qt("添加文字"),hotkey:"T"},{key:"InsertGeometry",title:Qt("添加图形"),hotkey:"S"},{key:"Group",title:Qt("成组"),hotkey:"⌘+G"},{key:"UnGroup",title:Qt("取消分组"),hotkey:"⌘+Shift+G"}];function Eh(e,t){var n=e.key;e.disabled=!!t.command.find(n)&&!t.command.enable(n),"MindmapAttachImage"===n&&(e.onChange=function(e){$f(e,t)})}function Ph(e,t){return(e=e.filter((function(e){return null!=e}))).map((function(e,n){var r=Oh(Oh({},d()(Ch[e])),{},{disabled:!!t.command.find(e)&&!t.command.enable(e)});return Eh(r,t),r.data&&r.data.forEach((function(e){Eh(e,t)})),"separator"===e&&(r.key=e+"-"+n),r}))}function _h(e){return e.command.enable("Expand")?["Expand"]:["Collapse"]}function jh(e){var t=[],n=e.filter((function(e){return e.isStem}));return n.length>1&&t.push("Align"),n.length>0&&t.push("ZIndex"),t.length>0?t.push("separator"):t=null,t}function Sh(e){var t=[];return e.filter((function(e){return e.isStem})).length>1?(t.push("Group"),t.push("separator")):t=null,t}function Rh(e){try{aa("copy",e),F.a.success(Qt("复制成功！"))}catch(e){F.a.error(Qt("复制失败！"))}}function Mh(e){var t=e.diagram;return Me.a.createElement(kh,{diagram:t,getMenuData:function(){return function(e){return"read"===e.interaction.currentMode?function(e){var t=e.selector.selections,n=["ActualSize","FitViewport"];return t.length>0&&t.every((function(e){return e.isMindmap}))&&(n=["Copy"].concat(_h(e)).concat(["separator"]).concat(n)),Ph(n,e)}(e):function(e){var t=e.selector.selections,n=[];return 0===t.length?n=["InsertText","InsertGeometry","BeginInsertLine","MindmapInsertStem","separator","Paste","separator","ActualSize","FitViewport"]:t.every((function(e){return e.isMindmap}))?(1===t.length&&(n=["AttachToMindmapCell","separator"]),n=n.concat(_h(e)).concat(["separator","Cut","Copy","CopyOtherFormat","Paste","separator"]).concat(jh(t)).concat(Sh(t)).concat(["Delete","MindmapRemoveSingleNode"])):t.every((function(e){return e.isVertex}))?(1!==t.length||t[0].isImage||(n=["AttachToVertex","separator"]),n=n.concat(["Cut","Copy","Paste","separator"]).concat(jh(t)).concat(Sh(t)).concat(["Delete"])):n=t.every((function(e){return e.isGroup}))?n.concat(["Cut","Copy","Paste","separator"]).concat(jh(t)).concat(Sh(t)).concat(["UnGroup","separator"]).concat(["Delete"]):["Cut","Copy","Paste","separator"].concat(jh(t)).concat(Sh(t)).concat(["Delete"]),Ph(n,e)}(e)}(t)},onClick:function(e){var n=e.key,r=e.canvasPoint;switch(t.tryFocus(),n){case"Cut":!function(e){try{aa("cut",e),F.a.success(Qt("剪切成功！"))}catch(e){F.a.error(Qt("剪切失败！"))}}(t);break;case"Copy":Rh(t);break;case"CopyDoc":t.settings.copyType="doc",Rh(t),t.settings.copyType="default";break;case"CopyTable":t.settings.copyType="table",Rh(t),t.settings.copyType="default";break;case"Paste":!function(e,t){try{aa("paste",e,t)}catch(e){F.a.error(Qt("粘贴失败！"))}}(t,r);break;case"MindmapInsertStem":t.command.execute("MindmapInsertStem",{x:r[0],y:r[1]});break;case"InsertText":t.command.execute("InsertText",{x:r[0],y:r[1]});break;case"InsertGeometry":t.command.execute("InsertGeometry",{x:r[0],y:r[1]});break;default:if(n)try{t.command.execute(n)}catch(e){throw new Error("unknown command ".concat(n))}}t.tryFocus()}})}function Bh(e){var t=e.diagram;return Me.a.createElement("div",{className:"lake-diagram-properties-alignment"},Me.a.createElement(K.a.Group,{onChange:function(e){t.command.execute(e.target.value)},value:null},Me.a.createElement(K.a.Button,{value:"AlignLeft",disabled:!t.command.enable("AlignLeft")},Me.a.createElement("span",{className:"lake-icon lake-icon-align-left"})),Me.a.createElement(K.a.Button,{value:"AlignHCenter",disabled:!t.command.enable("AlignHCenter")},Me.a.createElement("span",{className:"lake-icon lake-icon-align-h-center"})),Me.a.createElement(K.a.Button,{value:"AlignRight",disabled:!t.command.enable("AlignRight")},Me.a.createElement("span",{className:"lake-icon lake-icon-align-right"})),Me.a.createElement(K.a.Button,{value:"AlignTop",disabled:!t.command.enable("AlignTop")},Me.a.createElement("span",{className:"lake-icon lake-icon-align-top"})),Me.a.createElement(K.a.Button,{value:"AlignVCenter",disabled:!t.command.enable("AlignVCenter")},Me.a.createElement("span",{className:"lake-icon lake-icon-align-v-center"})),Me.a.createElement(K.a.Button,{value:"AlignBottom",disabled:!t.command.enable("AlignBottom")},Me.a.createElement("span",{className:"lake-icon lake-icon-align-bottom"}))))}function Ah(e){var t=e.selections,n=e.diagram,r=t.filter((function(e){return e.canArrange()})).length<3;return Me.a.createElement("div",{className:"lake-diagram-properties-distribute"},Me.a.createElement(K.a.Group,{onChange:function(e){n.command.execute(e.target.value)},value:null},Me.a.createElement(K.a.Button,{value:"DistributeHorizontally",disabled:r},Me.a.createElement("span",{className:"lake-icon lake-icon-horizontally"})),Me.a.createElement(K.a.Button,{value:"DistributeVertically",disabled:r},Me.a.createElement("span",{className:"lake-icon lake-icon-vertically"}))),Me.a.createElement("div",{className:"lake-diagram-properties-distribute-label-group"},Me.a.createElement("span",{className:"lake-diagram-properties-distribute-label"},Qt("水平分布")),Me.a.createElement("span",{className:"lake-diagram-properties-distribute-label"},Qt("垂直分布"))))}function Dh(e){var t=e.diagram,n=e.selections,r=t.getCells(),a=n.some((function(e){return e.locked}))||1===n.length&&n[0].getZIndex()===r.length-1,i=n.some((function(e){return e.locked}))||1===n.length&&0===n[0].getZIndex();function o(r){e.onChange((function(){t.command.execute(r.target.value,{cells:n})}))}return Me.a.createElement("div",{className:"lake-diagram-properties-z-index"},Me.a.createElement("div",{className:"lake-diagram-properties-z-index-btn-group"},Me.a.createElement(K.a.Group,{onChange:o,value:null},Me.a.createElement(V.a,{title:Qt("置顶")},Me.a.createElement(K.a.Button,{value:"ToFront",disabled:a},Me.a.createElement("span",{className:"lake-icon lake-icon-to-front"}))),Me.a.createElement(V.a,{title:Qt("置底")},Me.a.createElement(K.a.Button,{value:"ToBack",disabled:i},Me.a.createElement("span",{className:"lake-icon lake-icon-to-back"}))))),Me.a.createElement("div",{className:"lake-diagram-properties-z-index-btn-group"},Me.a.createElement(K.a.Group,{onChange:o,value:null},Me.a.createElement(V.a,{title:Qt("上移")},Me.a.createElement(K.a.Button,{value:"Forward",disabled:a},Me.a.createElement("span",{className:"lake-icon lake-icon-forward"}))),Me.a.createElement(V.a,{title:Qt("下移")},Me.a.createElement(K.a.Button,{value:"Backward",disabled:i},Me.a.createElement("span",{className:"lake-icon lake-icon-backward"}))))))}function Nh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nh(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ih(e){var t=e,n=t.onBlur,r=t.onPressEnter,a=t.onStep,i=t.value,o=Object(Re.useState)(null),c=D()(o,2),l=c[0],s=c[1];return e=Lh(Lh({},e),{},{value:"number"==typeof l?l:i,onChange:function(e){s(e)},onBlur:function(e){s(null),n(e)},onPressEnter:function(e){s(null),r(e)},onStep:function(e){s(null),a(e)}}),Ih.propTypes={value:Ae.a.number,onStep:Ae.a.func,onBlur:Ae.a.func,onPressEnter:Ae.a.func},Me.a.createElement(U.a,e)}function Th(e){var t=e.selections,n=0===t.length||t.some((function(e){return e.locked})),r={width:Qt("宽"),height:Qt("高")};function a(t,n){n>=1&&e.onChange(t,n)}return Me.a.createElement(Wf,{className:"lake-diagram-size-control",disabled:n},Object.keys(r).map((function(e){return Me.a.createElement("div",{className:"lake-diagram-size-control-".concat(e),key:e},r[e],Me.a.createElement(Ih,{disabled:n,min:1,max:2560,value:Math.round(Wf.get(t,e)),onBlur:function(t){return a(e,parseFloat(t.target.value))},onPressEnter:function(t){return a(e,parseFloat(t.target.value))},onStep:function(t){return a(e,t)}}))})))}function zh(e){var t=e.path,n=e.selections,r=0===n.length||n.some((function(e){return e.locked}));return Me.a.createElement(Wf,{className:"lake-diagram-ratio-control",disabled:r},Me.a.createElement(Q.a,{disabled:r,checked:Wf.get(n,t),onChange:function(n){e.onChange(t,n.target.checked)}},Qt("保持宽高比")))}function Fh(e){var t=e.selections,n=e.onChange,r=0===t.length||t.some((function(e){return e.locked}));return Me.a.createElement(Wf,{className:"lake-diagram-reset-size-control",disabled:r},Me.a.createElement(q.a,{disabled:r,onClick:function(){var e=t[0];e.isImage?n({width:e.image.naturalWidth,height:e.image.naturalHeight}):e.isVertex&&n({width:e.stencil.width,height:e.stencil.height})}},Qt("原始大小")))}function Yh(e){var t=e.selections,n=0===t.length||t.some((function(e){return e.locked}));function r(t,n){e.onChange(t,n)}return Me.a.createElement(Wf,{className:"lake-diagram-position-control",disabled:n},["x","y"].map((function(e){return Me.a.createElement("div",{className:"lake-diagram-position-control-".concat(e),key:e},e.toUpperCase(),Me.a.createElement(Ih,{disabled:n,value:Math.round(Wf.get(t,e)),onBlur:function(t){return r(e,parseFloat(t.target.value))},onPressEnter:function(t){return r(e,parseFloat(t.target.value))},onStep:function(t){return r(e,t)}}))})))}function Xh(e){return""===e?e:"".concat(Math.round(e),"°")}function qh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.replace("°","");return""===t?t:parseInt(t,10)%360||0}function Vh(e){var t=e.selections,n=0===t.length||t.some((function(e){return null==e.rotate}))||t.some((function(e){return e.locked}));function r(t){isFinite(t)&&e.onChange("rotate",t)}function a(e){r(parseFloat(e.target.value))}return Me.a.createElement(Wf,{className:"lake-diagram-rotate-control",disabled:n},Qt("角度"),Me.a.createElement(Ih,{disabled:n,min:0,max:360,formatter:Xh,parser:qh,value:Wf.get(t,"rotate"),onBlur:a,onPressEnter:a,onStep:r}))}Ch=Ch.reduce((function(e,t){var n;return e[t.key]=t,t.hotkey&&(t.hotkey=(n=t.hotkey,j.ua.macos?n:n.replace(/⌘/g,"Ctrl").replace(/Option/g,"Alt"))),e}),{}),Mh.propTypes={diagram:Ae.a.object},Fe(".lake-diagram-properties-alignment {\n  margin-top: 8px;\n  margin-bottom: 16px;\n}\n.lake-diagram-properties-alignment .ant-radio-group {\n  display: flex;\n}\n.lake-diagram-properties-alignment .ant-radio-group label {\n  flex-grow: 1;\n  padding: 0;\n  text-align: center;\n}\n"),Bh.defaultProps={},Bh.propTypes={diagram:Ae.a.object.isRequired,selections:Ae.a.arrayOf(Ae.a.object).isRequired},Bh.key="AlignControl",Fe(".lake-diagram-properties-distribute {\n  margin-bottom: 8px;\n}\n.lake-diagram-properties-distribute .ant-radio-group {\n  width: 100%;\n}\n.lake-diagram-properties-distribute .ant-radio-button-wrapper {\n  width: 50%;\n  text-align: center;\n}\n.lake-diagram-properties-distribute-label-group {\n  width: 100%;\n}\n.lake-diagram-properties-distribute-label {\n  display: inline-block;\n  width: 50%;\n  text-align: center;\n}\n"),Ah.propTypes={selections:Ae.a.arrayOf(Ae.a.object),diagram:Ae.a.object},Fe(".lake-diagram-properties-z-index {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 8px;\n}\n.lake-diagram-properties-z-index .ant-radio-button-wrapper {\n  padding: 0 14px;\n}\n.lake-diagram-properties-z-index .lake-diagram-properties-z-index-label {\n  display: inline-block;\n  width: 50%;\n  text-align: center;\n}\n.lake-diagram-properties-z-index .lake-diagram-properties-z-index-btn-group {\n  width: calc(50% - 4px);\n}\n.lake-diagram-properties-z-index .lake-diagram-properties-z-index-btn-group .ant-radio-group {\n  display: flex;\n}\n.lake-diagram-properties-z-index .lake-diagram-properties-z-index-btn-group .ant-radio-group label {\n  text-align: center;\n  flex-grow: 1;\n  flex-shrink: 1;\n}\n"),Dh.defaultProps={onChange:function(){}},Dh.propTypes={onChange:Ae.a.func.isRequired,diagram:Ae.a.object.isRequired,selections:Ae.a.arrayOf(Ae.a.object).isRequired},Dh.key="ZIndexControl",Fe(".lake-diagram-size-control .lake-diagram-control-body {\n  display: flex;\n  justify-content: space-between;\n}\n.lake-diagram-size-control-width,\n.lake-diagram-size-control-height {\n  display: flex;\n  align-items: center;\n  width: calc(50% - 8px);\n}\n.lake-diagram-size-control-width .ant-input-number,\n.lake-diagram-size-control-height .ant-input-number {\n  margin-left: 16px;\n  width: calc(100% - 32px);\n}\n"),Th.propTypes={selections:Ae.a.array,onChange:Ae.a.func},zh.defaultProps={path:"constraints.proportion"},zh.propTypes={path:Ae.a.string,selections:Ae.a.array,onChange:Ae.a.func},Fe(".lake-diagram-reset-size-control .lake-diagram-control-body {\n  margin-top: 12px;\n}\n.lake-diagram-reset-size-control .ant-btn {\n  width: 100%;\n}\n"),Fh.propTypes={selections:Ae.a.array,onChange:Ae.a.func},Fe(".lake-diagram-position-control .lake-diagram-control-body {\n  display: flex;\n  justify-content: space-between;\n}\n.lake-diagram-position-control-x,\n.lake-diagram-position-control-y {\n  display: flex;\n  align-items: center;\n  width: calc(50% - 8px);\n}\n.lake-diagram-position-control-x .ant-input-number,\n.lake-diagram-position-control-y .ant-input-number {\n  margin-left: 16px;\n  width: calc(100% - 32px);\n}\n"),Yh.propTypes={selections:Ae.a.array,onChange:Ae.a.func},Fe(".lake-diagram-rotate-control .lake-diagram-control-body {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n"),Vh.propTypes={selections:Ae.a.arrayOf(Ae.a.object),onChange:Ae.a.func};var Hh=[{name:Qt("排列"),hideHeader:!0,tabKey:"arrangement",condition:function(e){return e.length>0&&e.some((function(e){return e.isStem}))},controls:[{Control:Bh},{Control:Ah},{Control:Dh}]},{name:Qt("位置"),tabKey:"arrangement",condition:function(e){return e.length>0&&e.every((function(e){return e.isVertex&&e.isStem}))},controls:[{Control:Yh}]},{name:Qt("大小"),tabKey:"arrangement",condition:function(e){return e.length>0&&e.every((function(e){return e.isGeometry&&e.isStem}))},controls:[{Control:Th},{Control:zh},{Control:Fh}]},{name:Qt("旋转"),tabKey:"arrangement",condition:function(e){return e.length>0&&e.every((function(e){return null!=e.rotate}))},controls:[{Control:Vh}]}];function Gh(e){var t=e.color,n=e.disabled,a=e.onClear,i=e.palette,o=e.transSVG,c=Object(Re.useState)(!1),l=D()(c,2),s=l[0],u=l[1];return Me.a.createElement(X.a,{disabled:n,trigger:["click"],visible:s,onVisibleChange:function(e){u(e),e||Nu(t,i)},overlay:Me.a.createElement("div",{className:"lake-diagram-color-pick-container"},Me.a.createElement(r.ColorPicker,{className:"lake-prevent-card-activated",activeColors:[t],defaultColor:e.defaultColor,onSelect:function(t,n){e.onSelect(t,n)},onClear:a,show:s,customColors:Du,CustomPalette:i})),placement:"bottomRight",getPopupContainer:function(){return document.querySelector(".yuque-sdk-extra-container")||document.body}},!t||function(e){return!e||"transparent"===e||"rgba(255,255,255,0)"===e.replace(/ /g,"")||"rgba(0,0,0,0)"===e.replace(/ /g,"")}(t)?o||Me.a.createElement("svg",{width:"90",viewBox:"0 0 90 30",xmlns:"http://www.w3.org/2000/svg"},Me.a.createElement("path",{d:"M0 30L90 0",stroke:"#D0021B",fill:"none",fillRule:"evenodd",strokeLinecap:"square"})):e.children)}function Zh(e){var t=e.path,n=e.title,r=e.diagram,a=e.selections.filter((function(e){return e.canFill()})),i=0===a.length||a.some((function(e){return e.locked})),o=Wf.get(a,t),c="multiValue"===o?"#FFFFFF":o;function l(n){e.onChange(t,n,a)}return Me.a.createElement(Wf,{disabled:i,title:n,extra:Me.a.createElement(Gh,{disabled:i,color:c,defaultColor:e.defaultColor,onSelect:l,onClear:function(){return l("rgba(0, 0, 0, 0)")},palette:r&&r.palette},Me.a.createElement("div",{className:Ne()("lake-diagram-fill",{"lake-diagam-multi-properties-selection":"multiValue"===o}),style:{backgroundColor:c}}))})}function Wh(e){var t=e.path,n=e.title,r=e.diagram,a=e.selections.filter((function(e){return e.canStroke()})),i=function(e,t){return Wf.get(e,t)||(e.length>0&&!e[0].isStem?Wf.get(e,"treeEdge.stroke"):void 0)}(a,t)||"rgba(0, 0, 0, 0)",o=0===a.length||a.some((function(e){return e.locked})),c="multiValue"===i?"#FFFFFF":i;function l(n){e.onChange(t,n,a)}return Me.a.createElement(Wf,{disabled:o,title:n||Qt("颜色"),extra:Me.a.createElement(Gh,{disabled:o,color:c,defaultColor:e.defaultColor,onSelect:l,onClear:function(){return l("rgba(0, 0, 0, 0)")},palette:r&&r.palette},Me.a.createElement("div",{className:Ne()("lake-diagram-stroke",{"lake-diagam-multi-properties-selection":"multiValue"===i}),style:{backgroundColor:c}}))})}function Kh(e){var t=e.selections,n=e.path,r=0===t.length||t.some((function(e){return e.locked})),a=t.filter((function(e){return e.canStrokeWidth()})),i=Wf.get(a,n);function o(t){var r=Math.min(Math.max(t,1),10);r!==i&&e.onChange(n,r,a)}function c(e){o(parseFloat(e.target.value))}return Me.a.createElement(Wf,{className:"lake-diagram-stroke-width-control",disabled:r,title:Qt("粗细"),extra:Me.a.createElement(Ih,{disabled:r,min:1,max:10,value:i,onBlur:c,onPressEnter:c,onStep:o})})}Fe(".lake-diagram-color-pick-container {\n  background: #ffffff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  padding: 5px 0;\n  min-width: 74px;\n}\n"),Gh.propTypes={color:Ae.a.string,defaultColor:Ae.a.string,children:Ae.a.node,disabled:Ae.a.bool,onClear:Ae.a.func,onSelect:Ae.a.func,palette:Ae.a.object,transSVG:Ae.a.object},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-control .lake-diagram-fill {\n  border: 4px solid #ffffff;\n  border-radius: 2px;\n  width: 100%;\n  height: 32px;\n}\n.lake-diagram-control.disabled .lake-diagram-fill {\n  display: none;\n}\n"),Zh.defaultProps={defaultColor:"transparent",title:Qt("填充颜色"),onChange:function(){}},Zh.propTypes={defaultColor:Ae.a.string,selections:Ae.a.arrayOf(Ae.a.object).isRequired,path:Ae.a.string.isRequired,title:Ae.a.string,onChange:Ae.a.func.isRequired,diagram:Ae.a.object},Zh.key="FillControl",Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-control.disabled .lake-diagram-stroke {\n  display: none;\n}\n.lake-diagram-stroke {\n  border: 4px solid #ffffff;\n  height: 30px;\n}\n"),Wh.defaultProps={defaultColor:"transparent",onChange:function(){}},Wh.propTypes={defaultColor:Ae.a.string,selections:Ae.a.arrayOf(Ae.a.object).isRequired,path:Ae.a.string.isRequired,onChange:Ae.a.func.isRequired,title:Ae.a.string,diagram:Ae.a.object},Wh.key="StrokeControl",Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-stroke-width-control .ant-input-number {\n  width: 100%;\n}\n"),Kh.defaultProps={onChange:function(){}},Kh.propTypes={selections:Ae.a.arrayOf(Ae.a.object).isRequired,path:Ae.a.string.isRequired,onChange:Ae.a.func.isRequired},Kh.key="StrokeWidthControl",Fe(".lake-diagram-stroke-style-item {\n  width: 92px;\n  height: 32px;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.lake-diagram-stroke-style-selected {\n  line-height: 0;\n}\n.lake-diagram-stroke-style-selected .lake-diagram-stroke-style-selected-item {\n  width: 70px;\n  display: inline-block;\n}\n.lake-diagram-stroke-style-selected .lake-properties-stroke-style-dropdown-icon {\n  width: 10px;\n  height: 10px;\n  float: right;\n  margin-top: 11px;\n  margin-right: 10px;\n  color: #8c8c8c;\n}\n.lake-diagram-stroke-style-selected .lake-diagram-properties-stroke-style {\n  width: 100%;\n  height: 100%;\n}\n");var Uh={none:"https://gw.alipayobjects.com/zos/bmw-prod/5e3dbea7-f3c3-418f-91de-cfbcb825343c.svg",dash:"https://gw.alipayobjects.com/zos/bmw-prod/3d7118e9-1bac-465d-acb9-cc0766ece25e.svg"};function Qh(e){var t=e.selections,n=e.path,r=0===t.length||t.some((function(e){return e.locked})),a=t.filter((function(e){return e.canStrokeStyle()})),i=Wf.get(a,n);return Me.a.createElement(Wf,{className:"lake-diagram-properties-stroke-style",disabled:r,title:Qt("样式"),extra:Me.a.createElement(X.a,{disabled:r,trigger:["click"],overlay:Me.a.createElement(Y.a,{"data-lake_prevent_click_unselect":!0,onClick:function(t){var r=t.key;e.onChange(n,"none"===r?null:r,a)}},Me.a.createElement(Y.a.Item,{className:"lake-diagram-stroke-style-item","test-id":"lake-diagram-stroke-style-item-none",key:"none",style:{backgroundImage:"url(".concat(Uh.none,")")}}),Me.a.createElement(Y.a.Item,{className:"lake-diagram-stroke-style-item","test-id":"lake-diagram-stroke-style-item-dash",key:"dash",style:{backgroundImage:"url(".concat(Uh.dash,")")}})),placement:"bottomRight"},Me.a.createElement("div",{className:"lake-diagram-stroke-style-selected"},Me.a.createElement("span",{className:"lake-diagram-stroke-style-item lake-diagram-stroke-style-selected-item",style:{backgroundImage:"url(".concat(Uh[i||"none"],")")}}),Me.a.createElement(Te.a,{className:"lake-properties-stroke-style-dropdown-icon",style:{color:"#8C8C8C",fontSize:"10px"}})))})}function Jh(e){return""===e?e:"".concat(Math.round(100*e),"%")}function $h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.replace("%","");return""===t?t:Math.min(Math.max(parseFloat(t)/100||0,0),1)}function ep(e){var t=e.selections,n=0===t.length||t.some((function(e){return e.locked})),r=parseFloat(Wf.get(t,"opacity"))||1,a=oe()((function(t){isFinite(t)&&e.onChange("opacity",t)}),16);function i(e){a($h(e.target.value))}return Object(Re.useEffect)((function(){return function(){return a.cancel()}})),Me.a.createElement(Wf,{className:"lake-diagram-opacity-control",disabled:n},Me.a.createElement(J.a,{disabled:n,min:0,max:1,step:.01,tooltipVisible:!1,value:r,onChange:a}),Me.a.createElement(Ih,{disabled:n,min:0,max:1,step:.01,value:r,formatter:Jh,parser:$h,onBlur:i,onPressEnter:i,onStep:a}))}function tp(e){var t=Object(Re.useRef)(),n=e.width,r=e.height,a=e.shape,i=a&&hl.find((function(e){return e.name===a}));return Object(Re.useEffect)((function(){if(t.current&&i){var e=new es({stencil:i,width:n,height:r-8}).rendererElement;e.setAttribute("stroke","#595959"),e.setAttribute("fill","#ffffff"),Array.from(t.current.children,(function(e){return e.remove()})),t.current.appendChild(e)}}),[t,n,r,i]),i?Me.a.createElement("svg",{ref:t,width:n,height:r,viewBox:[0,0,n,r].join(" ")}):null}function np(e){var t=e.selections,n=0===t.length,r=t.filter((function(e){return e.isGeometry})),a=Wf.get(r,e.path);return Me.a.createElement(Wf,{className:"lake-diagram-geometry-shape-control",disabled:n,title:Qt("形状"),extra:Me.a.createElement(X.a,{disabled:n,overlay:Me.a.createElement(Ff,{onSelect:function(t){var n=t.key;e.onChange(e.path,n,r)},groups:e.groups}),placement:"bottomRight",trigger:["click"]},Me.a.createElement(q.a,null,Me.a.createElement("div",{className:Ne()("lake-diagram-geometry-shape-current",{"multi-geometry-selection":"multiValue"===a})},Me.a.createElement(tp,{shape:a,width:40,height:40}))))})}Qh.defaultProps={onChange:function(){},path:"stroke.style"},Qh.propTypes={selections:Ae.a.arrayOf(Ae.a.object).isRequired,onChange:Ae.a.func.isRequired,path:Ae.a.string.isRequired},Qh.key="StrokeStyleControl",Fe(".lake-diagram-opacity-control .lake-diagram-control-body {\n  display: flex;\n  justify-content: space-between;\n}\n.lake-diagram-opacity-control .lake-diagram-control-body .ant-slider {\n  flex: 1 0 auto;\n  margin-left: 0;\n  margin-right: 16px;\n}\n"),ep.propTypes={selections:Ae.a.arrayOf(Ae.a.object),onChange:Ae.a.func},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-geometry-shape-control .lake-diagram-control-extra {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.lake-diagram-geometry-shape-control .lake-diagram-control-extra .ant-btn {\n  background: none;\n  border: none;\n  height: 32px;\n  width: 100%;\n  padding: 0;\n}\n.lake-diagram-geometry-shape-control .multi-geometry-selection {\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/8c02d0c7-9749-4078-b865-6084959df78f.svg);\n}\n.lake-diagram-geometry-shape-control .lake-diagram-geometry-shape-current {\n  width: 100%;\n  min-height: 32px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 4px;\n}\n"),tp.propTypes={width:Ae.a.number,height:Ae.a.number,shape:Ae.a.string},np.defaultProps={path:"shape",groups:["basic","flowchart"],onChange:function(){}},np.propTypes={selections:Ae.a.arrayOf(Ae.a.object).isRequired,path:Ae.a.string.isRequired,groups:Ae.a.array,onChange:Ae.a.func.isRequired},np.key="GeometryShapeControl";var rp=[{name:Qt("节点"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isGeometry}))},controls:[{path:"shape",Control:np},{path:"fill.color",Control:Zh}]},{name:Qt("边框"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isGeometry}))},controls:[{path:"stroke.color",Control:Wh},{path:"stroke.width",Control:Kh},{Control:Qh}]},{name:Qt("不透明度"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return e.isGeometry&&null!=e.opacity}))},controls:[{Control:ep}]}];function ap(e){var t=e.selections,n=e.diagram,r=t.filter((function(e){return e.isMindmap})),a=jo(r,Wf),i=Object(Re.useState)(!1),o=D()(i,2),c=o[0],l=o[1],s=r.map((function(e){return e.upDirection})),u=r.map((function(e){return e.upLayoutType})),d=_o.filter((function(e){if(r.every((function(e){return e.isStem})))return!0;var t=e.key.split("-")[0],n=u.some((function(e){return Mo(e,t)})),a=!e.directions.every((function(e){return s.every((function(t){return Ro(t,e)}))}));return!n&&!a}));function f(e){0!==d.length&&l(e)}return Me.a.createElement(Wf,{className:"lake-diagram-layout-control",title:Qt("结构"),disabled:0===d.length,extra:Me.a.createElement(X.a,{overlay:Me.a.createElement(Me.a.Fragment,null,d.map((function(t){var i=t.key;return Me.a.createElement("div",{key:i,"data-lake_prevent_click_unselect":"true",className:Ne()("lake-diagram-layout-thumb",i,{selected:i===a}),onClick:function(){f(!c),function(t){e.onChange("layout",So(t),r),n&&n.selector.select(r)}(i)}})}))),overlayClassName:"lake-diagram-layout-dropdown",placement:"bottomRight",onClick:function(){f(!c)},visible:c,onVisibleChange:function(e){f(e)},trigger:["click"]},Me.a.createElement("div",{className:Ne()("lake-diagram-layout-current",{"lake-diagam-multi-properties-selection":"multiValue"===a})},Me.a.createElement("div",{className:"lake-diagram-layout-thumb ".concat(a)})))})}function ip(e){var t=e.selections,n=Object(Re.useState)(!1),r=D()(n,2),a=r[0],i=r[1],o=0===t.length;return Object(Re.useEffect)((function(){var e=Wf.get(t,"model.width");i("multiValue"===e?"multiValue":null!=e)}),[t]),Me.a.createElement(Wf,{disabled:o},Me.a.createElement(Q.a,{disabled:o,indeterminate:"multiValue"===a,checked:!!a,onChange:function(n){var r=n.target.checked?Wf.get(t,"width"):null;i(n.target.checked),e.onChange({width:r,height:null})},"data-testid":"checkbox-node-width"},Qt("手动设置节点尺寸")))}Fe("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-control.lake-diagram-layout-control .lake-diagram-control-extra {\n  padding: 0;\n  justify-content: space-around;\n}\n.lake-diagram-layout-current {\n  background: #ffffff;\n  width: 100%;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  border-radius: 4px;\n}\n.lake-diagram-layout-current .lake-diagram-layout-thumb:hover {\n  background-color: transparent;\n}\n.lake-diagram-layout-dropdown {\n  width: 168px;\n  border-radius: 4px;\n  border: 1px solid #e8e8e8;\n  display: flex;\n  flex-wrap: wrap;\n  background: #ffffff;\n  justify-content: initial;\n  padding: 8px 11px;\n}\n.lake-diagram-layout-dropdown.ant-dropdown-hidden {\n  display: none;\n}\n.lake-diagram-layout-thumb {\n  width: 48px;\n  height: 32px;\n  border-radius: 2px;\n  background-position: center;\n  background-repeat: no-repeat;\n  cursor: pointer;\n}\n.lake-diagram-layout-thumb.indent-bl {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/bc67f2b4-b84a-4b09-970f-92bc893cdc1a.svg);\n}\n.lake-diagram-layout-thumb.indent-br {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/103fb753-229b-4717-9e49-356f013b3309.svg);\n}\n.lake-diagram-layout-thumb.indent-tr {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/15763057-474a-4b44-a999-3058a5328e9a.svg);\n}\n.lake-diagram-layout-thumb.indent-tl {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/44546c1d-75f7-4839-a198-6f7d4049798f.svg);\n}\n.lake-diagram-layout-thumb.standard-t {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/f2060601-21d5-4882-8159-01a1fa4c241a.svg);\n}\n.lake-diagram-layout-thumb.standard-b {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/f9e3e9f4-638c-46bb-ba35-9d9bf5a87f41.svg);\n}\n.lake-diagram-layout-thumb.standard-l {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/f7687207-ddcc-4e07-abfa-a9985f86e70a.svg);\n}\n.lake-diagram-layout-thumb.standard-r {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/af8bdfa5-f0ae-446b-836e-1d0340d2f5c6.svg);\n}\n.lake-diagram-layout-thumb.standard-h {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/069fa8cc-c99f-4d1b-98a5-371367ace0e5.svg);\n}\n.lake-diagram-layout-thumb.timeline-r {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/56c34bb7-b888-4103-bc03-3124cd7b99a3.svg);\n}\n.lake-diagram-layout-thumb.timeline-l {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/23f1801a-504c-4254-a5d2-f33fcee86de7.svg);\n}\n.lake-diagram-layout-thumb:hover,\n.lake-diagram-layout-thumb.selected {\n  background-color: #fafafa;\n}\n"),ap.defaultProps={onChange:function(){}},ap.propTypes={selections:Ae.a.arrayOf(Ae.a.object).isRequired,onChange:Ae.a.func.isRequired,diagram:Ae.a.object},ap.key="LayoutControl",ip.propTypes={selections:Ae.a.arrayOf(Ae.a.object).isRequired,onChange:Ae.a.func.isRequired},ip.key="NodeWidthControl",Fe("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-border-shape-item {\n  width: 92px;\n  height: 32px;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.lake-diagram-border-shape-selected {\n  line-height: 0;\n}\n.lake-diagram-border-shape-selected .lake-diagram-border-shape-selected-item {\n  width: 70px;\n  display: inline-block;\n}\n.lake-diagram-border-shape-selected .lake-properties-border-shape-dropdown-icon {\n  width: 10x;\n  height: 10px;\n  float: right;\n  margin-top: 11px;\n  margin-right: 10px;\n  color: #8C8C8C;\n}\n.lake-diagram-border-shape-selected .lake-diagram-properties-border-shape {\n  width: 100%;\n  height: 100%;\n}\n");var op=["line","rect","capsule"],cp={none:"https://gw.alipayobjects.com/zos/bmw-prod/8c02d0c7-9749-4078-b865-6084959df78f.svg",line:"https://gw.alipayobjects.com/zos/bmw-prod/6ffe619f-04e8-48c7-af45-5f0f3cf2c4a1.svg",rect:"https://gw.alipayobjects.com/zos/bmw-prod/7b0ba540-6360-430b-a960-90c928ca037c.svg",capsule:"https://gw.alipayobjects.com/zos/bmw-prod/3818284f-32e3-44cb-875c-1b722074ddaa.svg"};function lp(e){var t=e.selections,n=Wf.get(t,"border.shape","line")||null,r=t.length>0&&t.some((function(e){return e.isStem}))?op.filter((function(e){return"line"!==e})):op,a=r.find((function(e){return e===n}))?n:"",i=0===t.length;return Me.a.createElement(Wf,{className:"lake-diagram-properties-border-shape",disabled:i,title:Qt("节点形状"),extra:Me.a.createElement(X.a,{disabled:i,trigger:["click"],overlay:Me.a.createElement(Y.a,{"data-lake_prevent_click_unselect":!0,onClick:function(n){var r=n.key;e.onChange("border.shape",r,t)}},r.map((function(e){return Me.a.createElement(Y.a.Item,{className:"lake-diagram-border-shape-item","test-id":"lake-diagram-border-shape-item-".concat(e),key:e,style:{backgroundImage:"url(".concat(cp[e],")")}})}))),placement:"bottomRight",getPopupContainer:function(){return document.querySelector(".yuque-sdk-extra-container")||document.body}},Me.a.createElement("div",{className:"lake-diagram-border-shape-selected"},Me.a.createElement("span",{className:"lake-diagram-border-shape-item lake-diagram-border-shape-selected-item",style:{backgroundImage:"url(".concat(cp[a||"none"],")")}}),Me.a.createElement(Te.a,{className:"lake-properties-border-shape-dropdown-icon",style:{color:"#8C8C8C",fontSize:"10px"}})))})}function sp(e){var t=e.selections.filter((function(e){return e.canStroke()&&e.isMindmap})),n=0===t.length,r=Wf.get(t,"border.stroke-width");function a(n){var a=Math.min(Math.max(n,1),10);a!==r&&e.onChange("border.stroke-width",a,t)}function i(e){a(parseFloat(e.target.value))}return Me.a.createElement(Wf,{className:"lake-diagram-border-stroke-width-control",disabled:n,title:Qt("边框粗细"),extra:Me.a.createElement(Ih,{disabled:n,min:1,max:10,value:r,onBlur:i,onPressEnter:i,onStep:a})})}function up(e){var t=et(e.selections.map((function(e){return e.stem}))),n=Object(Re.useState)(!1),r=D()(n,2),a=r[0],i=r[1];return Object(Re.useEffect)((function(){i(Wf.get(t,"rainbow"))}),[t]),Me.a.createElement(Wf,null,Me.a.createElement(Q.a,{indeterminate:"multiValue"===a,checked:!!a,onChange:function(n){var r=n.target.checked;i(r),e.onChange("rainbow",r,t)}},Qt("彩虹分支")))}function dp(e){var t=et(e.selections.map((function(e){return e.stem}))),n=Wf.get(t,"tapered");return Me.a.createElement(Wf,null,Me.a.createElement(Q.a,{indeterminate:"multiValue"===n,checked:!!n,onChange:function(n){var r=n.target.checked;e.onChange("tapered",r,t)}},Qt("分支线条宽度逐渐变细")))}function fp(e){var t=e.selections,n=e.onChange,r=et(t.map((function(e){return e.stem}))),a=Wf.get(r,"treeEdge.shape",null);a="multiValue"===a?null:void 0===a?"curve":a;var i=0===t.length;return Me.a.createElement(Wf,{className:"lake-diagram-properties-edge-shape",disabled:i,title:Qt("分支类型"),extra:Me.a.createElement(K.a.Group,{disabled:i,value:a,onChange:function(e){var t="curve"===e.target.value?null:e.target.value;n("treeEdge.shape",t,r)}},Me.a.createElement(K.a.Button,{value:"curve"},Me.a.createElement("span",{className:"lake-icon lake-icon-mind-tree-edge-none"})),Me.a.createElement(K.a.Button,{value:"polyline"},Me.a.createElement("span",{className:"lake-icon lake-icon-mind-tree-edge-polyline"})))})}function hp(e){var t=e.selections,n=e.diagram,r=Wf.get(t,"treeEdge.stroke","#A287E1"),a="multiValue"===r?"#FFFFFF":r;return Me.a.createElement(Wf,{disabled:0===t.length,title:Qt("分支颜色"),extra:Me.a.createElement(Gh,{disabled:0===t.length,color:a,onSelect:function(t){e.onChange("treeEdge.stroke",t)},palette:n&&n.palette},Me.a.createElement("div",{className:Ne()("lake-diagram-tree-edge-stroke",{"lake-diagam-multi-properties-selection":"multiValue"===r})},Me.a.createElement("svg",{width:"64",viewBox:"0 0 64 12",xmlns:"http://www.w3.org/2000/svg"},Me.a.createElement("path",{d:"M64 2c-27.42 0-35.012 8-64 8",stroke:"multiValue"===r?"none":r,strokeWidth:"4",fill:"none",fillRule:"evenodd"}))))})}function pp(e){var t=e.selections.filter((function(e){return e.isMindmap&&!e.isStem})),n=0===t.length,r=Wf.get(t,"treeEdge.stroke-width");function a(n){var a=Math.min(Math.max(n,1),5);"number"==typeof a&&a!==r&&e.onChange("treeEdge.stroke-width",a,t)}function i(e){a(parseFloat(e.target.value))}return Me.a.createElement(Wf,{className:"lake-diagram-tree-edge-stroke-width-control",disabled:n,title:Qt("分支粗细"),extra:Me.a.createElement(Ih,{disabled:n,min:1,max:5,value:r,onBlur:i,onPressEnter:i,onStep:a})})}lp.propTypes={selections:Ae.a.arrayOf(Ae.a.object).isRequired,onChange:Ae.a.func.isRequired},lp.key="BorderShapeControl",Fe("/* stylelint-disable */\n.lake-diagram-border-stroke-width-control .ant-input-number {\n  width: 100%;\n}\n"),sp.defaultProps={onChange:function(){}},sp.propTypes={selections:Ae.a.arrayOf(Ae.a.object).isRequired,onChange:Ae.a.func.isRequired},sp.key="BorderStrokeWidthControl",up.propTypes={selections:Ae.a.arrayOf(Ae.a.object).isRequired,onChange:Ae.a.func},up.key="TreeEdgeRainbowControl",dp.propTypes={selections:Ae.a.arrayOf(Ae.a.object).isRequired,onChange:Ae.a.func},dp.key="TreeEdgeTaperedControl",Fe(".lake-diagram-properties-edge-shape .lake-diagram-control-extra {\n  border: none;\n}\n.lake-diagram-properties-edge-shape .lake-diagram-control-extra button {\n  padding: 0 13px;\n}\n"),fp.defaultProps={onChange:function(){}},fp.propTypes={selections:Ae.a.arrayOf(Ae.a.object).isRequired,onChange:Ae.a.func.isRequired},fp.key="TreeEdgeShapeControl",Fe(".lake-diagram-tree-edge-stroke {\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n}\n"),hp.defaultProps={onChange:function(){}},hp.propTypes={selections:Ae.a.arrayOf(Ae.a.object).isRequired,onChange:Ae.a.func.isRequired,diagram:Ae.a.object},hp.key="TreeEdgeStrokeControl",Fe("/* stylelint-disable */\n"),pp.defaultProps={onChange:function(){}},pp.propTypes={selections:Ae.a.arrayOf(Ae.a.object).isRequired,onChange:Ae.a.func.isRequired},pp.key="TreeEdgeStrokeWidthControl";var mp=[{name:Qt("布局"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isMindmap}))},controls:[{Control:ap}]},{name:Qt("节点"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isMindmap}))},controls:[{Control:lp},{path:"border.fill",Control:Zh},{path:"border.stroke",title:Qt("边框颜色"),Control:Wh},{Control:sp},{Control:ip}]},{name:Qt("分支"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isMindmap&&e.isStem}))},controls:[{Control:up},{Control:dp},{Control:fp}]},{name:Qt("分支"),tabKey:"style",condition:function(e){return!e.every((function(e){return e.isStem}))&&e.every((function(e){return e.isMindmap&&!e.isStem}))},controls:[{Control:hp},{Control:pp},{Control:fp},{Control:up},{Control:dp}]}];Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-dropdown-input {\n  position: relative;\n  overflow: hidden;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  transition: border-color 0.3s;\n}\n.lake-diagram-dropdown-input:hover {\n  border-color: #47C479;\n}\n.lake-diagram-dropdown-input-focus {\n  border-color: #47C479;\n  box-shadow: 0 0 0 2px rgba(71, 196, 121, 0.2);\n  outline: none;\n}\n.lake-diagram-dropdown-input .ant-input {\n  padding-right: 24px;\n  border: none;\n}\n.lake-diagram-dropdown-input .ant-dropdown-trigger {\n  position: absolute;\n  top: -1px;\n  right: -1px;\n  padding: 0;\n  border-width: 0 0 0 1px;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  width: 24px;\n}\n.lake-diagram-dropdown-input .ant-dropdown-trigger .lake-icon {\n  position: absolute;\n  right: 8px;\n  top: 14px;\n  width: 8px;\n  height: 8px;\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSI1IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgb3BhY2l0eT0iLjQ1Ij48cGF0aCBkPSJNMC0yaDh2OEgweiIvPjxwYXRoIGQ9Ik0uNTk2LjU1N2wzLjE1IDMuODIxYS4zMzIuMzMyIDAgMDAuNDk1IDBMNy40MDUuNTU3YS4zMzIuMzMyIDAgMDAtLjI0Ny0uNTUzSC44NDVjLS4yODggMC0uNDQuMzM5LS4yNDkuNTUzeiIgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPg==);\n  background-repeat: no-repeat;\n}\n.lake-diagram-dropdown-input .ant-dropdown-trigger .lake-icon::before {\n  content: ' ';\n}\n.lake-diagram-dropdown-input .ant-dropdown-trigger:hover {\n  background: #f5f5f5;\n  border-color: #d9d9d9;\n}\n");var gp=["disabled"];function yp(e){var t=e.disabled,n=Ie()(e,gp),r=Object(Re.useState)(e.value),a=D()(r,2),i=a[0],o=a[1],c=Object(Re.useState)(!1),l=D()(c,2),s=l[0],u=l[1];return Object(Re.useEffect)((function(){o(e.value)}),[e.value]),Me.a.createElement("div",{className:Ne()("lake-diagram-dropdown-input",{"lake-diagram-dropdown-input-focus":s})},Me.a.createElement(H.a,{disabled:t,value:i,onFocus:function(){u(!0)},onBlur:function(t){parseInt(t.target.value,10)>0&&e.onChange(t),u(!1)},onChange:function(e){o(e.target.value)},onKeyDown:function(t){"Enter"===t.key&&parseInt(t.target.value,10)>0&&(e.onChange(t),t.target.select())}}),Me.a.createElement(X.a,Se()({disabled:t},n),Me.a.createElement(q.a,null,Me.a.createElement("span",{className:"lake-icon lake-icon-dropdown-arrow"}))))}function vp(e){var t=e.selections,n=e.diagram,r=0===t.length||t.some((function(e){return e.locked})),a=Object(Re.useState)({}),i=D()(a,2),o=i[0],c=i[1],l=n.contentEditorPlus,s=o.fontSize,u=o.color,d=o.bold,f=o.italic,h=o.strikethrough,p=o.underline;return Object(Re.useEffect)((function(){function e(e){var t=e.query;c(t)}return l.emitQueryChange(),n&&l.on("querychange",e),function(){l.off("querychange",e)}}),[n]),Me.a.createElement(Wf,{disabled:r,className:"text-format-control"},Me.a.createElement("div",{className:"text-format-li",style:{display:"flex",justifyContent:"space-between"}},Me.a.createElement("span",{style:{display:"flex",flexWrap:"nowrap"}},Me.a.createElement(q.a,{disabled:r,className:Ne()("bisu-btn",{active:d}),onClick:function(){return l.execCommand("bold")}},Me.a.createElement("span",{className:"lake-icon lake-icon-bold"})),Me.a.createElement(q.a,{disabled:r,className:Ne()("bisu-btn",{active:f}),onClick:function(){return l.execCommand("italic")}},Me.a.createElement("span",{className:"lake-icon lake-icon-italic"})),Me.a.createElement(q.a,{disabled:r,className:Ne()("bisu-btn",{active:h}),onClick:function(){return l.execCommand("strikethrough")}},Me.a.createElement("span",{className:"lake-icon lake-icon-strikethrough"})),Me.a.createElement(q.a,{disabled:r,className:Ne()("bisu-btn",{active:p}),onClick:function(){return l.execCommand("underline")}},Me.a.createElement("span",{className:"lake-icon lake-icon-underline"})))),Me.a.createElement("div",{className:"text-format-li text-format-font-color"},Qt("字号"),Me.a.createElement("div",{className:"lake-diagram-control-extra lake-diagrm-font-color-control-extra"},Me.a.createElement(yp,{disabled:r,trigger:["click"],value:s,onChange:function(e){return l.execCommand("fontSize",parseInt(e.target.value))},overlay:Me.a.createElement(Y.a,{"data-lake_prevent_click_unselect":!0,className:"lake-user-select-none text-format-font-size-menu",selectedKeys:[s&&s.toString()],onClick:function(e){var t=e.key;return l.execCommand("fontSize",parseInt(t))}},[12,14,16,18,22,24,32,36,48,64,92].map((function(e){return Me.a.createElement(Y.a.Item,{key:e},e===s&&Me.a.createElement("span",{className:"lake-icon lake-icon-success"}),e,"px")}))),placement:"bottomRight"}))),Me.a.createElement("div",{className:"text-format-li text-format-font-color"},Qt("文本颜色"),Me.a.createElement("div",{className:"lake-diagram-control-extra lake-diagrm-font-color-control-extra"},Me.a.createElement(Gh,{disabled:r,color:u,defaultColor:e.defaultColor,onSelect:se()((function(e){return l.execCommand("foreColor",e)}),16),palette:n.palette},Me.a.createElement("div",{className:"lake-diagram-font-color",style:{backgroundColor:u}})))))}yp.propTypes={value:Ae.a.oneOfType([Ae.a.string,Ae.a.number]),disabled:Ae.a.bool,onChange:Ae.a.func},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.text-format-control .text-format-font-color {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.text-format-control .text-format-li {\n  margin-bottom: 16px;\n}\n.text-format-control .text-format-li:last-child {\n  margin-bottom: 0;\n}\n.text-format-control .lake-diagram-control-extra {\n  display: inline-block;\n  vertical-align: bottom;\n  margin-left: 8px;\n}\n.text-format-control .lake-diagram-font-color {\n  border: 4px solid #ffffff;\n  border-radius: 2px;\n  width: 100%;\n  height: 30px;\n}\n.text-format-control.disabled .lake-diagram-font-color {\n  display: none;\n}\n.text-format-control .control-body {\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: nowrap;\n}\n.text-format-control .bisu-btn {\n  padding: 0;\n  text-align: center;\n  width: 32px;\n  line-height: 30px;\n  margin-right: 8px;\n}\n.text-format-control .bisu-btn[disabled] {\n  border-color: #e8e8e8;\n}\n.text-format-control .bisu-btn.active {\n  border-color: #47C479;\n}\n.lake-diagram-control-extra.lake-diagrm-font-color-control-extra {\n  width: auto;\n  flex: auto;\n  max-width: 90px;\n}\n.text-format-font-size {\n  max-width: 90px;\n  display: inline-block;\n  flex: auto;\n  height: 32px;\n  line-height: 30px;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  padding: 0 8px;\n  font-size: 14px;\n  font-weight: 400;\n}\n.text-format-font-size[disabled] {\n  color: #BFBFBF;\n  cursor: not-allowed;\n  border-color: #e8e8e8;\n}\n.text-format-font-size .lake-icon-arrow-down {\n  width: 8px;\n  height: 8px;\n  float: right;\n  margin-top: 12px;\n  background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjhweCIgaGVpZ2h0PSI1cHgiIHZpZXdCb3g9IjAgMCA4IDUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA1Mi41ICg2NzQ2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPkdyb3VwIENvcHkgNjwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGcgaWQ9IlN5bWJvbHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIG9wYWNpdHk9IjAuNDUiPg0KICAgICAgICA8ZyBpZD0idG9vbGJhciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyOC4wMDAwMDAsIC0xOC4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIGlkPSJwYXJhZ3JhcGgtc3R5bGUiPg0KICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyNi4wMDAwMDAsIDQuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC1Db3B5LTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMi4wMDAwMDAsIDEyLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgeD0iMCIgeT0iMCIgd2lkdGg9IjgiIGhlaWdodD0iOCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuNTk2MDkzNzUsMi41NTcwMzEyNSBMMy43NDUzMTI1LDYuMzc4MTI1IEMzLjg3NzM0Mzc1LDYuNTI1NzgxMjUgNC4xMDg1OTM3NSw2LjUyNTc4MTI1IDQuMjQwNjI1LDYuMzc4MTI1IEw3LjQwNTQ2ODc1LDIuNTU3MDMxMjUgQzcuNTk2MDkzNzUsMi4zNDI5Njg3NSA3LjQ0NDUzMTI1LDIuMDAzOTA2MjUgNy4xNTc4MTI1LDIuMDAzOTA2MjUgTDAuODQ0NTMxMjUsMi4wMDM5MDYyNSBDMC41NTcwMzEyNSwyLjAwMzkwNjI1IDAuNDA0Njg3NSwyLjM0Mjk2ODc1IDAuNTk2MDkzNzUsMi41NTcwMzEyNSBaIiBpZD0iU2hhcGUiIGZpbGw9IiMwMDAwMDAiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+) no-repeat;\n}\n.text-format-font-size .lake-icon-arrow-down::before {\n  display: none;\n}\n.text-format-font-size-menu {\n  min-width: 104px;\n}\n.text-format-font-size-menu .ant-dropdown-menu-item {\n  text-align: center;\n  position: relative;\n}\n.text-format-font-size-menu .ant-dropdown-menu-item .lake-icon {\n  position: absolute;\n  left: 12px;\n  top: 9px;\n}\n.text-format-text-align.ant-radio-group {\n  display: flex;\n}\n.text-format-text-align.ant-radio-group .ant-radio-button-wrapper {\n  flex-grow: 1;\n  padding: 0 17.5px;\n  text-align: center;\n}\n.text-format-text-align.ant-radio-group .ant-radio-button-wrapper-disabled {\n  border-color: #e8e8e8;\n}\n.text-format-color {\n  margin-top: 8px;\n  width: 92px;\n  height: 32px;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  padding: 4px;\n}\n.text-format-color-indicator {\n  width: 100%;\n  height: 100%;\n}\n.text-format-color[disabled] {\n  cursor: not-allowed;\n  border-color: #e8e8e8;\n}\n.text-format-color[disabled]-indicator {\n  display: none;\n}\n"),vp.defaultProps={defaultColor:"#262626"},vp.propTypes={defaultColor:Ae.a.string,selections:Ae.a.arrayOf(Ae.a.object).isRequired,onChange:Ae.a.func.isRequired,diagram:Ae.a.object.isRequired},vp.key="TextBasicFormat";var bp={left:"justifyLeft",center:"justifyCenter",right:"justifyRight",justify:"justifyFull"};function xp(e){var t=e.selections,n=e.diagram,r=0===t.length||t.some((function(e){return e.locked})),a=Object(Re.useState)({}),i=D()(a,2),o=i[0],c=i[1],l=n.contentEditorPlus,s=o.textAlign;return Object(Re.useEffect)((function(){function e(e){var t=e.query;c(t)}return l.emitQueryChange(),n&&l.on("querychange",e),function(){l.off("querychange",e)}}),[n]),Me.a.createElement(Wf,{disabled:r,className:"text-format-control"},Me.a.createElement(K.a.Group,{className:"text-format-li text-format-text-align",disabled:r,defaultValue:bp.left,value:bp[s]},Me.a.createElement(K.a.Button,{value:bp.left,onClick:function(){return l.execCommand(bp.left)}},Me.a.createElement("span",{className:"lake-icon lake-icon-left"})),Me.a.createElement(K.a.Button,{value:bp.center,onClick:function(){return l.execCommand(bp.center)}},Me.a.createElement("span",{className:"lake-icon lake-icon-center"})),Me.a.createElement(K.a.Button,{value:bp.right,onClick:function(){return l.execCommand(bp.right)}},Me.a.createElement("span",{className:"lake-icon lake-icon-right"})),Me.a.createElement(K.a.Button,{value:bp.justify,onClick:function(){return l.execCommand(bp.justify)}},Me.a.createElement("span",{className:"lake-icon lake-icon-justify"}))))}function kp(e){var t=e.diagram;return Me.a.createElement(q.a,{block:!0,onClick:function(){t.command.execute("AttachLink")}},Qt("添加链接"))}xp.defaultProps={defaultColor:"#262626"},xp.propTypes={defaultColor:Ae.a.string,selections:Ae.a.arrayOf(Ae.a.object).isRequired,onChange:Ae.a.func.isRequired,diagram:Ae.a.object.isRequired},xp.key="TextAlign",kp.propTypes={diagram:Ae.a.object.isRequired},kp.key="TextLink";var wp=[{name:Qt("基础格式"),hideHeader:!0,tabKey:"text",condition:function(e){return e.length>0&&e.every((function(e){return e.textAreaElement}))},controls:[{Control:vp}]},{name:Qt("对齐方式"),tabKey:"text",condition:function(e){return e.length>0&&e.every((function(e){return e.textAreaElement}))},controls:[{Control:xp}]},{name:Qt("链接"),tabKey:"text",condition:function(e){return e.length>0&&e.every((function(e){return e.textAreaElement}))},controls:[{Control:kp}]}];function Op(e){var t=e.selections,n=0===t.length,r=t.filter((function(e){return e.isLine})),a={source:Qt("起点"),target:Qt("终点")};return Me.a.createElement(Wf,{className:"lake-diagram-line-arrow-control",disabled:n},Object.keys(a).map((function(t){var i,o="".concat(t,".marker"),l=Wf.get(r,o)||"none";return Me.a.createElement("div",{className:"lake-diagram-line-arrow-control-".concat(t),key:t},a[t],Me.a.createElement(X.a,{disabled:n,trigger:["click"],overlay:Me.a.createElement(Y.a,{"data-lake_prevent_click_unselect":!0,onClick:function(t){var n=t.key;e.onChange(o,"none"===n?null:n,r)},style:{padding:"5px",display:"grid",gridTemplateColumns:"repeat(4, 1fr)"}},Wc.map((function(e){return Me.a.createElement(Y.a.Item,{className:Ne()("lake-diagram-line-endpoint-item",{active:e===l}),"test-id":"lake-diagram-line-endpoint-item-".concat(e),key:e,style:{textAlign:"center"}},Me.a.createElement("span",{className:Ne()("lake-icon lake-icon-contextual-".concat(e),{source:"source"===t})}))}))),placement:"bottomRight"},Me.a.createElement("div",{className:Ne()("lake-diagram-line-arrow-selected")},Me.a.createElement("span",{className:Ne()("lake-diagram-line-arrow-selected-item","lake-icon",(i={"lake-diagam-multi-properties-selection":"multiValue"===l},c()(i,"lake-icon-contextual-".concat(l),l),c()(i,"source","source"===t),i))}),Me.a.createElement(Te.a,{className:"lake-properties-line-arrow-dropdown-icon",style:{color:"#8C8C8C",fontSize:"10px"}}))))})))}Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-line-arrow-control .lake-diagram-control-body {\n  display: flex;\n  justify-content: space-between;\n}\n.lake-icon.source {\n  transform: matrix(-1, 0, 0, 1, 0, 0);\n}\n.lake-diagram-line-endpoint-item:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-diagram-line-endpoint-item.active {\n  background: #e8e8e8;\n  color: #595959;\n}\n.lake-diagram-line-arrow-selected {\n  line-height: 0;\n}\n.lake-diagram-line-arrow-selected .lake-diagram-line-arrow-selected-item {\n  width: 32px;\n  height: 32px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n}\n.lake-diagram-line-arrow-selected .lake-properties-line-arrow-dropdown-icon {\n  width: 10px;\n  height: 10px;\n  float: right;\n  margin-top: 11px;\n  margin-right: 10px;\n  color: #8c8c8c;\n}\n.lake-diagram-line-arrow-selected .lake-diagram-properties-line-arrow {\n  width: 100%;\n  height: 100%;\n}\n.lake-diagram-line-arrow-control-source,\n.lake-diagram-line-arrow-control-target {\n  display: flex;\n  align-items: center;\n  width: 50%;\n}\n.lake-diagram-line-arrow-control-source .lake-diagram-line-arrow-selected,\n.lake-diagram-line-arrow-control-target .lake-diagram-line-arrow-selected {\n  margin-left: 16px;\n  width: calc(100% - 64px);\n  border: 1px solid #e8e8e8;\n  border-radius: 4px;\n}\n"),Op.defaultProps={onChange:function(){}},Op.propTypes={selections:Ae.a.arrayOf(Ae.a.object).isRequired,onChange:Ae.a.func.isRequired},Op.key="LineArrowControl",Fe(".lake-diagram-line-shape-item {\n  width: 92px;\n  height: 32px;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.lake-diagram-line-shape-selected {\n  line-height: 0;\n}\n.lake-diagram-line-shape-selected .lake-diagram-line-shape-selected-item {\n  width: 70px;\n  display: inline-block;\n}\n.lake-diagram-line-shape-selected .lake-properties-line-shape-dropdown-icon {\n  width: 10px;\n  height: 10px;\n  float: right;\n  margin-top: 11px;\n  margin-right: 10px;\n  color: #8c8c8c;\n}\n.lake-diagram-line-shape-selected .lake-diagram-properties-line-shape {\n  width: 100%;\n  height: 100%;\n}\n");var Cp={none:"https://gw.alipayobjects.com/zos/bmw-prod/a9d015cf-7b31-496c-b60d-e224f7f0df29.svg",straight:"https://gw.alipayobjects.com/zos/bmw-prod/a9d015cf-7b31-496c-b60d-e224f7f0df29.svg",curve:"https://gw.alipayobjects.com/zos/bmw-prod/e683ab4e-70b3-4bcf-8eb1-ad843acf2add.svg",elbow:"https://gw.alipayobjects.com/zos/bmw-prod/96671966-3f77-469f-afa7-40ff402dc773.svg"};function Ep(e){var t=e.selections,n=0===t.length,r=t.filter((function(e){return e.isLine})),a=Wf.get(r,"shape");return Me.a.createElement(Wf,{className:"lake-diagram-properties-line-shape",disabled:n,title:Qt("类型"),extra:Me.a.createElement(X.a,{disabled:n,trigger:["click"],overlay:Me.a.createElement(Y.a,{"data-lake_prevent_click_unselect":!0,onClick:function(t){var n=t.key;e.onChange("shape","none"===n?null:n,r)}},Me.a.createElement(Y.a.Item,{className:"lake-diagram-line-shape-item","test-id":"lake-diagram-line-shape-item-none",key:"none",style:{backgroundImage:"url(".concat(Cp.none,")")}}),Me.a.createElement(Y.a.Item,{className:"lake-diagram-line-shape-item","test-id":"lake-diagram-line-shape-item-curve",key:"curve",style:{backgroundImage:"url(".concat(Cp.curve,")")}}),Me.a.createElement(Y.a.Item,{className:"lake-diagram-line-shape-item","test-id":"lake-diagram-line-shape-item-elbow",key:"elbow",style:{backgroundImage:"url(".concat(Cp.elbow,")")}})),placement:"bottomRight"},Me.a.createElement("div",{className:"lake-diagram-line-shape-selected"},Me.a.createElement("span",{className:"lake-diagram-line-shape-item lake-diagram-line-shape-selected-item",style:{backgroundImage:"url(".concat(Cp[a||"none"],")")}}),Me.a.createElement(Te.a,{className:"lake-properties-line-shape-dropdown-icon",style:{color:"#8C8C8C",fontSize:"10px"}})))})}Ep.defaultProps={onChange:function(){}},Ep.propTypes={selections:Ae.a.arrayOf(Ae.a.object).isRequired,onChange:Ae.a.func.isRequired},Ep.key="LineShapeControl";var Pp=[{name:Qt("线条"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isLine}))},controls:[{Control:Ep},{path:"stroke.color",Control:Wh},{path:"stroke.width",Control:Kh},{Control:Qh}]},{name:Qt("端点"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isLine}))},controls:[{Control:Op}]},{name:Qt("不透明度"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isLine}))},controls:[{Control:ep}]}],_p=[{name:Qt("不透明度"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return e.isImage&&null!=e.opacity}))},controls:[{Control:ep}]}];function jp(e){var t=e.diagram,n=e.onClose,r={tabs:[{name:Qt("样式"),key:"style"},{name:Qt("文本"),key:"text"},{name:Qt("排列"),key:"arrangement"}],className:"lake-diagram-properties-board",menus:[].concat(Hh).concat(rp).concat(wp).concat(mp).concat(Pp).concat(_p),diagram:t,emptyImg:"https://gw.alipayobjects.com/zos/bmw-prod/209ef531-e33b-4e55-8273-5b56b6df44be.svg"};return Me.a.createElement("div",{className:"lake-diagram-properties-board-wrapper","data-lake_prevent_click_unselect":"true"},Me.a.createElement("div",{className:"lake-diagram-properties-board-header"},Me.a.createElement("span",{className:"lake-diagram-properties-board-header-title"},Qt("设置")),Me.a.createElement("span",{className:"lake-diagram-properties-board-header-close-button",onClick:n})),Me.a.createElement("div",{className:"lake-diagram-properties-body-wrapper"},Me.a.createElement(Zf,r)))}Fe(".lake-diagram-properties-board-wrapper {\n  height: 100%;\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-body-wrapper {\n  height: calc(100% - 40px);\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-left: 1px solid #e8e8e8;\n  border-bottom: 1px solid #e8e8e8;\n  padding: 4px 8px;\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board-header .lake-diagram-properties-board-header-title {\n  margin: 4px 8px;\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board-header .lake-diagram-properties-board-header-close-button {\n  margin-right: 8px;\n  width: 16px;\n  height: 16px;\n  display: block;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/3a5cc682-0502-44f1-80cf-4a8de2d89e1e.svg);\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board-header .lake-diagram-properties-board-header-close-button:hover {\n  cursor: pointer;\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board {\n  background-color: white;\n  top: 0;\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board .ant-radio-button-wrapper {\n  background: white;\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board .lake-diagram-panel-body .ant-tabs .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab {\n  flex-grow: inherit;\n  padding: 8px 0;\n  margin: 0 16px;\n  border-bottom: 2px solid rgba(0, 0, 0, 0);\n  animation: none;\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board .lake-diagram-panel-body .ant-tabs .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab.ant-tabs-tab-active {\n  border-bottom: 2px solid black;\n}\n"),jp.defaultProps={diagram:null,onClose:function(){}},jp.propTypes={diagram:Ae.a.object,onClose:Ae.a.func},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.text-msg {\n  min-width: 34px;\n  font-size: 16px;\n}\n.contextual-text-size-font-size-menu {\n  min-width: 104px;\n}\n.contextual-text-size-font-size-menu .ant-dropdown-menu-item {\n  text-align: center;\n  position: relative;\n}\n.contextual-text-size-font-size-menu .ant-dropdown-menu-item .lake-icon {\n  color: #262626;\n  position: absolute;\n  left: 12px;\n  top: 9px;\n}\n");var Sp=function(e){var t=e.name,n=e.diagram,r=Object(Re.useState)({}),a=D()(r,2),i=a[0],o=a[1],c=n.contentEditorPlus,l=i.fontSize;return Object(Re.useEffect)((function(){function e(e){var t=e.query;o(t)}return n&&(c.on("querychange",e),c.emitQueryChange()),function(){c.off("querychange",e)}}),[n]),Me.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Me.a.createElement(X.a,{trigger:["click"],value:l,onChange:function(e){return c.execCommand("fontSize",parseInt(e.target.value))},overlay:Me.a.createElement(Y.a,{"data-lake_prevent_click_unselect":!0,className:"lake-user-select-none contextual-text-size-font-size-menu",selectedKeys:[l&&l.toString()],onClick:function(e){var t=e.key;return c.execCommand("fontSize",parseInt(t))}},[12,14,15,16,18,22,24,32,36,48,64,92].map((function(e){return Me.a.createElement(Y.a.Item,{key:e},e===l&&Me.a.createElement("span",{className:"lake-icon lake-icon-success"}),e,"px")}))),placement:"bottomCenter"},Me.a.createElement(V.a,{placement:"top",title:e.title},Me.a.createElement(q.a,{"data-testid":t},Me.a.createElement("span",{className:"text-msg"}," ",l?"".concat(l,"px"):e.defaultFontSize," ")))))};Sp.defaultProps={defaultFontSize:"14px"},Sp.propTypes={title:Ae.a.string,data:Ae.a.array,name:Ae.a.string,selections:Ae.a.array,diagram:Ae.a.object,defaultFontSize:Ae.a.string},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-align {\n  box-shadow: 0 1px 2px -2px rgba(0, 0, 0, 0.08), 0 2px 6px 0 rgba(0, 0, 0, 0.04), 0 4px 8px 1px rgba(0, 0, 0, 0.02);\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-align .lake-diagram-dropdown-item {\n  color: #262626;\n  font-size: 14px;\n  margin-left: 4px;\n  margin-right: 4px;\n  min-width: 16px;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-align .ant-menu-item {\n  height: 32px;\n  line-height: 32px;\n  padding: 0 12px;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-align .ant-menu-item[disabled] {\n  border-color: #e8e8e8;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-align .ant-menu-item.active {\n  background: #f5f5f5;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-align .ant-menu-item:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-align .ant-menu-item-selected {\n  background: none;\n  color: #595959;\n}\n.text-msg {\n  min-width: 34px;\n  font-size: 16px;\n}\n");var Rp=function(e){return Me.a.createElement(Y.a,{className:Ne()("lake-diagram-contextual-toolbar-dropdown-menu lake-diagram-contextual-toolbar-text-align",e.menuClassName),onSelect:e.onSelect,"data-lake_prevent_click_unselect":"true"},e.data.map((function(t){return Me.a.createElement(Y.a.Item,{key:t.key},Me.a.createElement("span",{className:Ne()("lake-icon lake-diagram-dropdown-item",{"lake-icon-success":t.key===e.currIcon})}),Me.a.createElement("span",{className:"lake-icon lake-icon-".concat(t.icon," lake-diagram-dropdown-item")}),Me.a.createElement("span",{className:"lake-diagram-dropdown-item"},t.title))})))};Rp.propTypes={title:Ae.a.string,menuClassName:Ae.a.string,data:Ae.a.array,onSelect:Ae.a.func,currIcon:Ae.a.string};var Mp=function(e){var t=e.name,n=e.diagram,r=n.contentEditorPlus,a=Object(Re.useState)({}),i=D()(a,2),o=i[0],c=i[1],l=Object(Re.useState)(!1),s=D()(l,2),u=s[0],d=s[1],f=o.textAlign;Object(Re.useEffect)((function(){function e(e){var t=e.query;c(t)}return n&&(r.on("querychange",e),r.emitQueryChange()),function(){r.off("querychange",e)}}),[n]);var h=function(e){if("justify"===e)r.execCommand("justifyFull");else r.execCommand("justify".concat(e&&e[0].toUpperCase()+e.slice(1)))};return Me.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Me.a.createElement(X.a,{onClick:function(){f&&h(f)},overlay:Me.a.createElement(Rp,{data:[{key:"left",icon:"left",title:"左对齐"},{key:"center",icon:"center",title:"居中对齐"},{key:"right",icon:"right",title:"右对齐"},{key:"justify",icon:"justify",title:"两端对齐"}],onSelect:function(e){var t=e.key;h(t),d(!1)},currIcon:"start"===f?"left":f}),placement:"bottomCenter",trigger:"click",visible:u,onVisibleChange:function(e){d(e)}},Me.a.createElement(V.a,{placement:"top",title:e.title},Me.a.createElement(q.a,{"data-testid":t,onClick:function(){return d(!0)}},Me.a.createElement("span",{className:"lake-icon lake-icon-".concat(f?"start"===f?"left":f:e.defaultAlign)})))))};Mp.defaultProps={defaultAlign:"left"},Mp.propTypes={title:Ae.a.string,data:Ae.a.array,name:Ae.a.string,diagram:Ae.a.object,defaultAlign:Ae.a.string},Fe(".ne-embed-icon {\n  display: inline-flex;\n  width: 16px;\n  height: 16px;\n}\n");var Bp=function(e){b()(n,Re.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return y()(n,[{key:"_isLowContrast",value:function(e){var t=be()(e).toRgb();return.3*t.r+.59*t.g+.11*t.b>=248}},{key:"_isTransparent",value:function(e){return!e||"transparent"===e||"rgba(255,255,255,0)"===e.replace(/ /g,"")||"rgba(0,0,0,0)"===e.replace(/ /g,"")}},{key:"requireStroke",value:function(e){return this._isTransparent(e)||this._isLowContrast(e)}},{key:"render",value:function(){return this._getIcon()}},{key:"_getIcon",value:function(){var e,t=this.props,n=t.type,r=t.fill,a=t.stroke;if(this._isTransparent(r))return Me.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1"},Me.a.createElement("defs",null,Me.a.createElement("pattern",{id:"rect",viewBox:"0,0,8,8",width:"35%",height:"35%"},Me.a.createElement("rect",{id:"矩形",fill:"#FAFAFA",x:"0",y:"0",width:"4",height:"4"}),Me.a.createElement("rect",{id:"矩形备份-21",fill:"#FAFAFA",x:"4",y:"4",width:"4",height:"4"}),Me.a.createElement("rect",{id:"矩形备份-20",fill:"#D9D9D9",x:"4",y:"0",width:"4",height:"4"}),Me.a.createElement("rect",{id:"矩形备份-22",fill:"#D9D9D9",x:"0",y:"4",width:"4",height:"4"}))),Me.a.createElement("circle",{cx:"8",cy:"8",r:"8",fill:"url(#rect)"}));if("stroke-color"===n&&this._isTransparent(a))return Me.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1"},Me.a.createElement("title",null,"透明环"),Me.a.createElement("g",{id:"控件",stroke:"none",strokeWidth:"0.5",fill:"none",fillRule:"evenodd"},Me.a.createElement("g",{id:"透明环",transform:"translate(-0.000000, 0.000000)"},Me.a.createElement("path",{d:"M8,0 C12.418278,0 16,3.581722 16,8 C16,12.418278 12.418278,16 8,16 C3.581722,16 0,12.418278 0,8 C0,3.581722 3.581722,0 8,0 Z M8,3 C5.23857625,3 3,5.23857625 3,8 C3,10.7614237 5.23857625,13 8,13 C10.7614237,13 13,10.7614237 13,8 C13,5.23857625 10.7614237,3 8,3 Z",id:"形状",fill:"#FAFAFA"}),Me.a.createElement("path",{d:"M8,13 L8,12.999 L8,16 C6.91549955,16 5.88140117,15.7842031 4.93830231,15.3932066 L6.08631593,12.6207031 C6.67578581,12.8651081 7.32214006,13 8,13 Z M11.5247537,11.5462815 L13.6458509,13.6678364 C12.905585,14.4052487 12.0216994,14.9985887 11.0398062,15.4022444 L9.89058451,12.6302127 C10.5062584,12.3785637 11.0605479,12.0076869 11.5247537,11.5462815 Z M4.48114009,11.5521301 L2.36015992,13.6738177 C1.61882513,12.9368948 1.02109994,12.0556625 0.612650477,11.075787 L3.38472128,9.92671467 C3.64106728,10.5400536 4.01611047,11.091429 4.48114009,11.5521301 Z M16,7.999 C16,9.08450045 15.7842031,10.1185988 15.3932066,11.0616977 L12.6207031,9.91368407 C12.8651081,9.32421419 13,8.67785994 13,8 L16,7.999 Z M3,8 L2.999,8 L4.45652404e-11,8 C4.45652404e-11,6.91549955 0.215796936,5.88140117 0.606793361,4.93830231 L3.37929685,6.08631593 C3.13489185,6.67578581 3,7.32214006 3,8 Z M13.6398401,2.32618229 C14.3811749,3.06310522 14.9789001,3.94433749 15.3873495,4.92421296 L12.6152787,6.07328533 C12.3589327,5.45994637 11.9838895,4.90857096 11.5188599,4.44786988 L13.6398401,2.32618229 Z M8,9.09494702e-13 C9.0848864,9.09494702e-13 10.1193348,0.215950555 11.0627045,0.607210861 L9.91368407,3.37929685 C9.32421419,3.13489185 8.67785994,3 8,3 L7.999,9.09494702e-13 L8,9.09494702e-13 Z M2.37521442,2.31125673 C2.36817981,2.31821274 2.36115804,2.32518171 2.35414914,2.33216359 C2.47280694,2.21398682 2.594547,2.10004476 2.71975554,1.98995348 L2.91043586,1.82748893 C3.08291716,1.68509277 3.26177813,1.54957175 3.44628096,1.42161318 L3.44587689,1.42189343 C3.64121394,1.28642097 3.84244471,1.15967042 4.04944431,1.04189047 L4.04893797,1.04217859 L4.35587152,0.876283146 L4.35587152,0.876283146 L4.67022901,0.723755702 L4.96019384,0.597755619 L6.10941549,3.36978734 L6.08230453,3.38096211 C6.01729624,3.40798236 5.95298109,3.43633501 5.88939319,3.46598597 L6.10941549,3.36978734 C6.00994969,3.41044274 5.91208604,3.45421002 5.81594555,3.50096817 C5.67093771,3.57146782 5.52925326,3.64913643 5.39194239,3.73324727 C5.36336599,3.75074884 5.33464738,3.76874189 5.30612657,3.78701662 C5.2498994,3.8230481 5.19464208,3.86003397 5.14017772,3.89807688 C5.13087827,3.90457251 5.12161081,3.91109266 5.11236658,3.91764341 C5.0411436,3.96811355 4.9712726,4.02042159 4.90284866,4.07448042 C4.89157281,4.08338639 4.8797933,4.09277659 4.86805733,4.10221872 C4.81544399,4.14455883 4.76415727,4.18754838 4.71376093,4.2315324 C4.69109675,4.25131063 4.66840717,4.2714759 4.64590384,4.29184316 L4.61016998,4.32449924 L4.61016998,4.32449924 L4.47532075,4.45364446 L4.47532075,4.45364446 L2.35414914,2.33216359 L2.359,2.326 L2.36467214,2.32170046 L2.361,2.325 Z",id:"形状结合",fill:"#D9D9D9"}))));var i=this._isLowContrast(a)?"#e8e8e8":a;switch(n){case"t-font-color":e=function(e){return Me.a.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18"},Me.a.createElement("title",null,"color-font"),Me.a.createElement("desc",null,"Created with Sketch."),Me.a.createElement("g",{id:"color-font",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Me.a.createElement("rect",{fill:e,id:"Rectangle-55",stroke:"none",strokeWidth:"1",x:"2",y:"13.75",width:"12",height:"1.5",rx:"0.125"}),Me.a.createElement("path",{d:"M5.29102819,11.25 L3.96365715,11.25 C3.87952002,11.25 3.8113134,11.1817934 3.8113134,11.0976562 C3.8113134,11.08076 3.81412419,11.0639814 3.81963067,11.0480076 L7.0756112,1.60269506 C7.09679504,1.5412426 7.15463644,1.5 7.21963767,1.5 L8.81868806,1.5 C8.883726,1.5 8.94159158,1.54128846 8.96274706,1.60278951 L12.2118,11.048102 C12.239168,11.1276636 12.1968568,11.2143472 12.1172952,11.2417152 C12.1013495,11.2472004 12.0846037,11.25 12.067741,11.25 L10.6761419,11.25 C10.6099165,11.25 10.5512771,11.2072154 10.531066,11.1441494 L9.69970662,8.55 L6.27433466,8.55 L5.43599205,11.1444975 C5.41567115,11.2073865 5.35711879,11.25 5.29102819,11.25 Z M8.02635163,3.18571429 L7.96199183,3.18571429 L6.63904023,7.30714286 L9.33500105,7.30714286 L8.02635163,3.18571429 Z",id:"A",fill:"#595959"})))}(r);break;case"t-bg-color":e=function(e,t){return Me.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1"},Me.a.createElement("g",{id:"控件",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Me.a.createElement("g",{id:"Z图标/2.编辑器/2.格式/背景色",transform:"translate(-5.000000, -6.000000)"},Me.a.createElement("g",{id:"编组-9",transform:"translate(-1.000000, 0.000000)"},Me.a.createElement("mask",{id:"mask-2",fill:"black"},Me.a.createElement("use",{xlinkHref:"#path-1"})),Me.a.createElement("circle",{fill:e,stroke:t,strokeWidth:"1",cx:"14",cy:"14",r:"7.5"})))))}(r,a);break;case"stroke-color":e=function(e,t){return Me.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1"},Me.a.createElement("title",null,"编组 10"),Me.a.createElement("g",{id:"控件",stroke:"none",fill:"none",fillRule:"evenodd"},Me.a.createElement("g",{id:"Z图标/2.编辑器/2.格式/描边",transform:"translate(-6.000000, -8.000000)"},Me.a.createElement("g",{id:"编组-10",transform:"translate(6.000000, 8.000000)"},Me.a.createElement("circle",{id:"椭圆形",stroke:t,fill:"none",cx:"8",cy:"8",r:"6.5",strokeWidth:"3"})),Me.a.createElement("g",{id:"编组-11",transform:"translate(6.000000, 8.000000)"},Me.a.createElement("circle",{id:"椭圆形2",stroke:e,fill:"none",cx:"8",cy:"8",r:"6.5",strokeWidth:"1"})))))}(a,i);break;case"properties-cb-trans":e=Me.a.createElement("svg",{width:"90",viewBox:"0 0 90 30",xmlns:"http://www.w3.org/2000/svg"},Me.a.createElement("path",{d:"M0 30L90 0",stroke:"#D0021B",fill:"none",fillRule:"evenodd",strokeLinecap:"square"}));break;case"context-cb-trans":e=Me.a.createElement("svg",{width:"30",viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},Me.a.createElement("path",{d:"M0 30L30 0",stroke:"#D0021B",fill:"none",fillRule:"evenodd",strokeLinecap:"square"}));break;default:e=null}return Me.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},onClick:this.props.onClick},e)}}]),n}();c()(Bp,"propTypes",{className:Ae.a.string,type:Ae.a.string.isRequired,fill:Ae.a.string,stroke:Ae.a.string,onClick:Ae.a.func}),c()(Bp,"defaultProps",{fill:"red"}),Fe(".lake-diagram-board-color-pick-container {\n  background: #fff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  padding: 5px 0;\n  min-width: 74px;\n}\n");var Ap=function(e){var t=e.name,n=e.diagram,a=Object(Re.useState)({}),i=D()(a,2),o=i[0],c=i[1],l=n.contentEditorPlus,s=n&&n.palette||[];Object(Re.useEffect)((function(){function e(e){var t=e.query;c(t)}return n&&(l.on("querychange",e),l.emitQueryChange()),function(){l.off("querychange",e)}}),[n]);var u="#"+be()(o.color).toHex().toUpperCase(),d=Object(Re.useState)(u||"#262626"),f=D()(d,2),h=f[0],p=f[1],m=Object(Re.useState)(!1),g=D()(m,2),y=g[0],v=g[1];function b(e){p(e),l.execCommand("foreColor",e)}var x=Me.a.createElement("div",{className:"lake-diagram-board-color-pick-container"},Me.a.createElement(r.ColorPicker,{className:"lake-prevent-card-activated",visible:y,activeColors:[h],defaultColor:e.defaultColor,onSelect:b,onClear:function(){return b("rgba(0, 0, 0, 0)")},show:y,customColors:Du,CustomPalette:s}));return Me.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Me.a.createElement(X.a,{visible:y,onVisibleChange:function(e){v(e),p(u),e||Nu(h,s)},overlay:x,placement:"bottomCenter",trigger:"click"},Me.a.createElement(V.a,{placement:"top",title:e.title},Me.a.createElement(q.a,{"data-testid":t},Me.a.createElement("span",{style:{marginTop:"5px"}},Me.a.createElement(Bp,{type:"t-font-color",fill:u}))))))};Ap.defaultProps={defaultColor:"transparent"},Ap.propTypes={title:Ae.a.string,name:Ae.a.string,diagram:Ae.a.object,selections:Ae.a.array,currColor:Ae.a.string,defaultColor:Ae.a.string};var Dp=function(e){var t=e.name,n=e.diagram,r=e.selections,a=0===r.length||r.some((function(e){return e.locked})),i=Object(Re.useState)({}),o=D()(i,2),c=o[0],l=o[1],s=n.contentEditorPlus,u=c.bold;return Object(Re.useEffect)((function(){function e(e){var t=e.query;l(t)}return n&&(s.on("querychange",e),s.emitQueryChange()),function(){s.off("querychange",e)}}),[n]),Me.a.createElement("div",{className:"lake-diagram-contextual-command"},Me.a.createElement(V.a,{disabled:a,placement:"top",title:e.title},Me.a.createElement(q.a,{"data-testid":t,icon:Me.a.createElement("span",{className:"lake-icon lake-icon-bold"}),className:Ne()({active:u}),onClick:function(e){e.stopPropagation(),s.execCommand("bold")}})))};Dp.propTypes={title:Ae.a.string,selections:Ae.a.array,name:Ae.a.string,execCommand:Ae.a.func,diagram:Ae.a.object};var Np=function(e){var t=e.name,n=e.diagram,r=e.title,a=e.disabled;return Me.a.createElement("div",{className:"lake-diagram-contextual-command"},Me.a.createElement(V.a,{disabled:a,placement:"top",title:r},Me.a.createElement(q.a,{"data-testid":t,icon:Me.a.createElement("span",{className:"lake-icon lake-icon-contextual-link"}),onClick:function(e){e.preventDefault(),e.stopPropagation(),n.command.execute("CreateLink")}})))};Np.propTypes={title:Ae.a.string,name:Ae.a.string,execCommand:Ae.a.func,diagram:Ae.a.object,disabled:Ae.a.oneOfType([Ae.a.bool,Ae.a.func])};var Lp=function(e){var t=e.name,n=e.onProperties,r=e.title;return Me.a.createElement("div",{className:"lake-diagram-contextual-command"},Me.a.createElement(V.a,{disabled:!1,placement:"top",title:r},Me.a.createElement(q.a,{"data-testid":t,icon:Me.a.createElement("span",{className:"lake-icon lake-icon-board-properties"}),onClick:n})))};Lp.defaultProps={onProperties:function(){}},Lp.propTypes={title:Ae.a.string,name:Ae.a.string,diagram:Ae.a.object,onProperties:Ae.a.func},Fe(".lake-diagram-board-color-pick-container {\n  background: #fff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  padding: 5px 0;\n  min-width: 74px;\n}\n");var Ip=function(e){var t=e.name,n=e.diagram,a=e.selections,i=a.every((function(e){return e.isMindmap})),o=Object(Re.useState)(e.defaultColor),c=D()(o,2),l=c[0],s=c[1],u=Object(Re.useState)(!1),d=D()(u,2),f=d[0],h=d[1],p=Object(Re.useState)(null),m=D()(p,2),g=m[0],y=m[1],v=n&&n.palette||[],b=function(e){var t=be()(e).toRgb();return.3*t.r+.59*t.g+.11*t.b>=248},x=function(t){s(t),i?e.execCommand("border.fill",t,a):e.execCommand("fill.color",t,a),b(t)?y("#e8e8e8"):y(null)};Object(Re.useEffect)((function(){if(a&&a.length>0){var t=i?"border.fill":"fill.color",n=e.get(a,t),r="multiValue"===n?"#FFFFFF":n;s(r),b(r)?y("#e8e8e8"):y(null)}return function(){}}),[]);var k=Me.a.createElement("div",{className:"lake-diagram-board-color-pick-container"},Me.a.createElement(r.ColorPicker,{className:"lake-prevent-card-activated",visible:f,activeColors:[l],defaultColor:e.defaultColor,onSelect:x,onClear:function(){return x("rgba(0, 0, 0, 0)")},show:f,customColors:Du,CustomPalette:n&&n.palette}));return Me.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Me.a.createElement(X.a,{visible:f,onVisibleChange:function(e){h(e),e||Nu(l,v)},overlay:k,placement:"bottomRight",trigger:"click"},Me.a.createElement(V.a,{placement:"top",title:e.title},Me.a.createElement(q.a,{"data-testid":t},Me.a.createElement(Bp,{type:"t-bg-color",fill:l,stroke:g})))))};function Tp(e){var t=Object(Re.useRef)(),n=e.width,r=e.height,a=e.shape,i=a&&hl.find((function(e){return e.name===a}));return Object(Re.useEffect)((function(){if(t.current&&i){var e=new es({stencil:i,width:n,height:r,noFill:!0}).rendererElement;e.setAttribute("stroke","#595959"),e.setAttribute("fill","#ffffff"),Array.from(t.current.children,(function(e){return e.remove()})),t.current.appendChild(e)}}),[t,n,r,i]),i?Me.a.createElement("svg",{ref:t,width:n,height:r,viewBox:[0,0,n,r].join(" ")}):null}Ip.defaultProps={defaultColor:"transparent"},Ip.propTypes={title:Ae.a.string,name:Ae.a.string,diagram:Ae.a.object,selections:Ae.a.array,currColor:Ae.a.string,defaultColor:Ae.a.string,execCommand:Ae.a.func,get:Ae.a.func,disabled:Ae.a.oneOfType([Ae.a.bool,Ae.a.func])},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagam-multi-properties-selection {\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/8c02d0c7-9749-4078-b865-6084959df78f.svg);\n}\n.lake-diagram-contextual-shape-current {\n  width: 100%;\n  height: 32px;\n  min-width: 34px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  border-radius: 4px;\n}\n"),Tp.propTypes={width:Ae.a.number,height:Ae.a.number,shape:Ae.a.string};var zp=function(e){var t=e.name,n=e.selections,r=e.get(n,"shape");return Me.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Me.a.createElement(X.a,{overlay:Me.a.createElement(Ff,{onSelect:function(t){var r=t.key;e.execCommand("shape",r,n)},groups:["basic","flowchart"]}),key:e.key,placement:"bottomCenter",trigger:"click"},Me.a.createElement(V.a,{placement:"top",title:e.title},Me.a.createElement(q.a,{"data-testid":t},Me.a.createElement("div",{className:Ne()("lake-diagram-contextual-shape-current",{"lake-diagam-multi-properties-selection":"multiValue"===r})},Me.a.createElement(Tp,{shape:r,width:30,height:30}))))))};function Fp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fp(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}zp.propTypes={title:Ae.a.string,command:Ae.a.string,name:Ae.a.string,onSelect:Ae.a.func,key:Ae.a.string,diagram:Ae.a.object,selections:Ae.a.array,execCommand:Ae.a.func,get:Ae.a.func},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-contextual-stroke-dropdown {\n  background: #fff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  padding: 5px 5px;\n  width: auto;\n  height: auto;\n}\n.lake-diagram-contextual-stroke-dropdown .geo-btn {\n  padding: 0;\n  width: 32px;\n  line-height: 30px;\n  margin-right: 8px;\n  border: none;\n  background: none;\n}\n.lake-diagram-contextual-stroke-dropdown .geo-btn[disabled] {\n  border-color: #e8e8e8;\n}\n.lake-diagram-contextual-stroke-dropdown .geo-btn.active {\n  background: #f5f5f5;\n}\n.lake-diagram-contextual-stroke-dropdown .geo-btn:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-diagram-contextual-stroke-dropdown .geo-btn::after {\n  display: none;\n}\n.lake-diagram-contextual-stroke-dropdown-row {\n  display: flex;\n}\n.lake-diagram-board-contextual-toolbar-separator {\n  height: 1px;\n  background: #e8e8e8;\n  width: 100%;\n  margin-top: 5px;\n  margin-bottom: 5px;\n}\n.lake-diagram-board-contextual-stroke-width-control {\n  max-width: 70px;\n  margin-right: 5px;\n}\n.lake-diagram-board-contextual-stroke-width-control .lake-diagram-board-contextual-stroke-width-inner {\n  border: none;\n}\n.lake-diagram-board-contextual-stroke-width-control .lake-diagram-board-contextual-stroke-width-inner .ant-input-number {\n  width: 100%;\n  border: 1px solid #e8e8e8;\n  border-radius: 5px;\n}\n.lake-diagram-board-contextual-stroke-width-control .lake-diagram-board-contextual-stroke-width-inner .ant-input-number-focused {\n  box-shadow: none;\n}\n.lake-diagram-board-contextual-stroke-color {\n  border: 1px solid #e8e8e8;\n  border-radius: 4px;\n  width: 32px;\n  max-height: 32px;\n  overflow: hidden;\n  background: #fff;\n  cursor: pointer;\n}\n");var Xp=function(e){var t=e.diagram,n=e.selections,r=e.strokeProps,a=e.setStrokeProps,i=Object(Re.useState)(r.style?"dash":"none"),o=D()(i,2),c=o[0],l=o[1],s=function(t){var i=Math.min(Math.max(t,1),10);i!==r.width&&(a(Yp(Yp({},r),{},{width:i})),e.execCommand("stroke.width",i,n))},u=function(e){s(e.target.value)},d=function(t){e.onSelect&&e.onSelect(t)},f=function(t){e.execCommand("stroke.style",t,n)};return Me.a.createElement("div",{className:Ne()("lake-diagram-contextual-stroke-dropdown",e.className),"data-lake_prevent_click_unselect":"true"},Me.a.createElement("div",{className:"lake-diagram-contextual-stroke-dropdown-row"},Me.a.createElement(q.a,{icon:Me.a.createElement("span",{className:"lake-icon lake-icon-contextual-stroke-none"}),className:Ne()("geo-btn",{active:"none"===c}),onClick:function(e){e.preventDefault(),l("none"),f(null)}}),Me.a.createElement(q.a,{icon:Me.a.createElement("span",{className:"lake-icon lake-icon-contextual-stroke-dash"}),target:"dash",className:Ne()("geo-btn",{active:"dash"===c}),onClick:function(e){e.preventDefault(),l("dash"),f("dash")}})),Me.a.createElement("div",{className:"lake-diagram-board-contextual-toolbar-separator"}),Me.a.createElement("div",{className:"lake-diagram-contextual-stroke-dropdown-row"},Me.a.createElement("div",{className:"lake-diagram-board-contextual-stroke-width-control"},Me.a.createElement("div",{className:"lake-diagram-board-contextual-stroke-width-inner"},Me.a.createElement(Ih,{min:1,max:10,value:r.width,onBlur:u,onPressEnter:u,onStep:s}))),Me.a.createElement("div",{className:"lake-diagram-board-contextual-stroke-color"},Me.a.createElement(Gh,{color:r.color,defaultColor:e.defaultColor,onSelect:d,onClear:function(){return d("rgba(0, 0, 0, 0)")},palette:t&&t.palette,transSVG:Me.a.createElement(Bp,{type:"context-cb-trans"})},Me.a.createElement("div",{className:Ne()("lake-diagram-stroke"),style:{backgroundColor:r.color}})))))};Xp.propTypes={title:Ae.a.string,colorBadge:Ae.a.object,name:Ae.a.string,className:Ae.a.string,diagram:Ae.a.object,onSelect:Ae.a.func,defaultColor:Ae.a.string,strokeProps:Ae.a.object,selections:Ae.a.array,setStrokeProps:Ae.a.func,execCommand:Ae.a.func};var qp=function(e){var t=e.name,n=e.selections,r=Object(Re.useState)({}),a=D()(r,2),i=a[0],o=a[1],c=Object(Re.useState)(!1),l=D()(c,2),s=l[0],u=l[1];return Object(Re.useEffect)((function(){return n&&n.length>0&&o(n[0].stroke),function(){}}),[]),Me.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Me.a.createElement(X.a,{visible:s,onVisibleChange:function(e){u(e)},overlay:Me.a.createElement(Xp,Se()({setStrokeProps:o,strokeProps:i,onSelect:function(t){o(Yp(Yp({},i),{},{color:t})),e.execCommand("stroke.color",t,n)}},e)),placement:"bottomCenter",trigger:"click"},Me.a.createElement(V.a,{placement:"top",title:e.title},Me.a.createElement(q.a,{"data-testid":t},Me.a.createElement(Bp,{type:"stroke-color",stroke:i.color})))))};qp.defaultProps={defaultColor:"transparent"},qp.propTypes={title:Ae.a.string,name:Ae.a.string,diagram:Ae.a.object,selections:Ae.a.array,currColor:Ae.a.string,defaultColor:Ae.a.string,execCommand:Ae.a.func},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-contextual-text-dropdown {\n  background: #fff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  padding: 5px 5px;\n  width: auto;\n  height: auto;\n}\n.lake-diagram-contextual-text-dropdown .ant-btn {\n  border: none;\n  background: none;\n  padding: 0 6px;\n  height: 32px;\n  min-width: 32px;\n  margin: 0 2px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  outline: none;\n}\n.lake-diagram-contextual-text-dropdown .ant-btn[disabled] {\n  color: #BFBFBF;\n  background: none;\n}\n.lake-diagram-contextual-text-dropdown .ant-btn:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-diagram-contextual-text-dropdown .ant-btn:focus {\n  color: #595959;\n}\n.lake-diagram-contextual-text-dropdown .ant-btn::after {\n  display: none;\n}\n.lake-diagram-contextual-text-dropdown .ant-btn .lake-icon {\n  color: #262626;\n  font-size: 18px;\n}\n.lake-diagram-contextual-text-dropdown .ant-btn.active {\n  background: #e8e8e8;\n  color: #595959;\n}\n.lake-diagram-contextual-text-dropdown .lake-button-active {\n  background-color: #e8e8e8;\n}\n.lake-diagram-contextual-text-dropdown-row {\n  display: flex;\n}\n");var Vp=function(e){var t=e.diagram,n=Object(Re.useState)({}),r=D()(n,2),a=r[0],i=r[1],o=t.contentEditorPlus;Object(Re.useEffect)((function(){function e(e){var t=e.query;i(t)}return t&&(o.on("querychange",e),o.emitQueryChange()),function(){o.off("querychange",e)}}),[t]);var c=a.bold,l=a.italic,s=a.strikethrough,u=a.underline;return Me.a.createElement("div",{className:Ne()("lake-diagram-contextual-text-dropdown",e.className),"data-lake_prevent_click_unselect":"true"},Me.a.createElement("div",{className:"lake-diagram-contextual-text-dropdown-row"},Me.a.createElement(q.a,{className:Ne()({active:c}),icon:Me.a.createElement("span",{className:"lake-icon lake-icon-bold"}),onClick:function(){return o.execCommand("bold")}}),Me.a.createElement(q.a,{className:Ne()({active:l}),onClick:function(){return o.execCommand("italic")},icon:Me.a.createElement("span",{className:"lake-icon lake-icon-italic"})}),Me.a.createElement(q.a,{className:Ne()({active:s}),onClick:function(){return o.execCommand("strikethrough")},icon:Me.a.createElement("span",{className:"lake-icon lake-icon-strikethrough"})}),Me.a.createElement(q.a,{className:Ne()({active:u}),onClick:function(){return o.execCommand("underline")},icon:Me.a.createElement("span",{className:"lake-icon lake-icon-underline"})})),Me.a.createElement("div",{className:"lake-diagram-board-contextual-toolbar-separator"}),Me.a.createElement("div",{className:"lake-diagram-contextual-text-dropdown-row"},Me.a.createElement(Sp,Se()({},e,{textStyle:a,title:Qt("字号")})),Me.a.createElement(Ap,Se()({},e,{textStyle:a,title:Qt("字色")})),Me.a.createElement(Mp,Se()({},e,{textStyle:a,title:Qt("对齐")}))))};Vp.defaultProps={defaultColor:"transparent"},Vp.propTypes={title:Ae.a.string,name:Ae.a.string,diagram:Ae.a.object,selections:Ae.a.array,className:Ae.a.string};var Hp=function(e){var t=e.name,n=Object(Re.useState)(!1),r=D()(n,2),a=r[0],i=r[1];return Me.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Me.a.createElement(X.a,{trigger:"click",visible:a,onVisibleChange:function(e){i(e)},overlay:Me.a.createElement(Vp,e)},Me.a.createElement(V.a,{placement:"top",title:e.title},Me.a.createElement(q.a,{"data-testid":t},Me.a.createElement("span",{className:"lake-icon lake-icon-contextual-text"})))))};Hp.defaultProps={defaultColor:"transparent"},Hp.propTypes={title:Ae.a.string,name:Ae.a.string,diagram:Ae.a.object,selections:Ae.a.array},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-contextual-toolbar-dropdown .lake-icon.source {\n  transform: matrix(-1, 0, 0, 1, 0, 0);\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu {\n  box-shadow: 0 1px 2px -2px rgba(0, 0, 0, 0.08), 0 2px 6px 0 rgba(0, 0, 0, 0.04), 0 4px 8px 1px rgba(0, 0, 0, 0.02);\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu::before {\n  display: none;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu::after {\n  display: none;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .lake-diagram-dropdown-item {\n  margin-left: 4px;\n  margin-right: 4px;\n  min-width: 16px;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .ant-menu-item {\n  min-width: 32px;\n  height: 32px;\n  padding: 0 6px;\n  border-radius: 3px;\n  text-align: center;\n  line-height: 32px;\n  margin: 0 2px;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .ant-menu-item[disabled] {\n  border-color: #e8e8e8;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .ant-menu-item:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .ant-menu-item.active {\n  background: #e8e8e8;\n  color: #595959;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .lake-icon {\n  color: #262626;\n  font-size: 16px;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .lake-icon.source {\n  transform: matrix(-1, 0, 0, 1, 0, 0);\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .ant-menu-item-selected {\n  color: #595959;\n}\n.text-msg {\n  min-width: 34px;\n  font-size: 16px;\n}\n");var Gp=function(e){var t=e.onSelect,n=e.source,r=e.marker;return Me.a.createElement(Y.a,{className:Ne()("lake-diagram-contextual-toolbar-dropdown-menu"),"data-lake_prevent_click_unselect":"true",onSelect:t,style:{padding:"5px",display:"grid",gridTemplateColumns:"repeat(4, 1fr)"}},Wc.map((function(e){return Me.a.createElement(Y.a.Item,{key:e,className:Ne()({active:e===r})},Me.a.createElement("span",{className:Ne()("lake-icon lake-icon-contextual-".concat(e," lake-diagram-dropdown-item"),{source:n})}))})))};Gp.propTypes={source:Ae.a.bool,title:Ae.a.string,className:Ae.a.string,diagram:Ae.a.object,onSelect:Ae.a.func,marker:Ae.a.string};var Zp=function(e){var t=e.name,n=e.selections,r=e.type,a=Object(Re.useState)(null),i=D()(a,2),o=i[0],c=i[1],l=Object(Re.useState)(e.defaultIcon),s=D()(l,2),u=s[0],d=s[1],f=Object(Re.useState)(!1),h=D()(f,2),p=h[0],m=h[1];return Object(Re.useEffect)((function(){if(n&&n.length>0){var e=n[0][r];e.marker?c(e.marker):c("none"),Wc.filter((function(t){return t===e.marker})).forEach((function(e){return d("contextual-".concat(e))}))}return function(){}}),[]),Me.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Me.a.createElement(X.a,{overlay:Me.a.createElement(Gp,Se()({onSelect:function(t){var a=t.key;e.execCommand("".concat(r,".marker"),"none"===a?null:a,n),c(a),Wc.filter((function(e){return e===a})).forEach((function(e){return d("contextual-".concat(e))})),m(!1)},marker:o,source:"source"===r,trigger:"click"},e)),placement:"bottomCenter",trigger:"click",visible:p,onVisibleChange:function(e){m(e)}},Me.a.createElement(V.a,{placement:"top",title:e.title},Me.a.createElement(q.a,{"data-testid":t,onClick:function(){return m(!0)}},Me.a.createElement("span",{className:Ne()("lake-icon lake-icon-".concat(u),{source:"source"===r})})))))};function Wp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wp(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Zp.defaultProps={defaultIcon:"contextual-stroke-none"},Zp.propTypes={type:Ae.a.string,title:Ae.a.string,name:Ae.a.string,diagram:Ae.a.object,selections:Ae.a.array,defaultIcon:Ae.a.string,execCommand:Ae.a.func},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-contextual-line-dropdown {\n  background: #fff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  padding: 5px 5px;\n  width: auto;\n  height: auto;\n}\n.lake-diagram-contextual-line-dropdown .ant-btn {\n  border: none;\n  background: none;\n  padding: 0 6px;\n  height: 32px;\n  min-width: 32px;\n  margin: 0 2px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  outline: none;\n  color: #262626;\n}\n.lake-diagram-contextual-line-dropdown .ant-btn[disabled] {\n  color: #BFBFBF;\n  background: none;\n}\n.lake-diagram-contextual-line-dropdown .ant-btn:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-diagram-contextual-line-dropdown .ant-btn:focus {\n  color: #595959;\n}\n.lake-diagram-contextual-line-dropdown .ant-btn::after {\n  display: none;\n}\n.lake-diagram-contextual-line-dropdown .ant-btn .lake-icon {\n  font-size: 18px;\n}\n.lake-diagram-contextual-line-dropdown .ant-btn.active {\n  background: #e8e8e8;\n  color: #595959;\n}\n.lake-diagram-contextual-line-dropdown-row {\n  display: flex;\n}\n.lake-diagram-board-contextual-toolbar-separator {\n  height: 1px;\n  background: #e8e8e8;\n  width: 100%;\n  margin-top: 5px;\n  margin-bottom: 5px;\n}\n.lake-diagram-board-contextual-line-width-control {\n  max-width: 70px;\n  margin-right: 5px;\n}\n.lake-diagram-board-contextual-line-width-control .lake-diagram-board-contextual-line-width-inner {\n  border: none;\n}\n.lake-diagram-board-contextual-line-width-control .ant-input-number {\n  width: 100%;\n  border: 1px solid #e8e8e8;\n  border-radius: 5px;\n}\n.lake-diagram-board-contextual-line-color {\n  border: 1px solid #e8e8e8;\n  border-radius: 4px;\n  width: 32px;\n  min-height: 32px;\n  overflow: hidden;\n  background: #fff;\n  cursor: pointer;\n}\n");var Up=function(e){var t=e.diagram,n=e.selections,r=e.strokeProps,a=e.setStrokeProps,i=Object(Re.useState)(r.style?"dash":"none"),o=D()(i,2),c=o[0],l=o[1],s=function(t){var i=Math.min(Math.max(t,1),10);i!==r.width&&(a(Kp(Kp({},r),{},{width:i})),e.execCommand("stroke.width",i,n))},u=function(e){s(e.target.value)},d=function(t){e.onSelect&&e.onSelect(t)},f=function(t){e.execCommand("stroke.style",t,n)},h=function(t){e.execCommand("shape",t,n)};return Me.a.createElement("div",{className:Ne()("lake-diagram-contextual-line-dropdown",e.className),"data-lake_prevent_click_unselect":"true"},Me.a.createElement("div",{className:"lake-diagram-contextual-line-dropdown-row"},Me.a.createElement(q.a,{icon:Me.a.createElement("span",{className:"lake-icon lake-icon-contextual-straight-line"}),className:Ne()({active:"straight"===e.currShape}),onClick:function(t){t.preventDefault(),h("straight"),e.setCurrShape("straight")}}),Me.a.createElement(q.a,{icon:Me.a.createElement("span",{className:"lake-icon lake-icon-contextual-curve-line"}),target:"dash",className:Ne()({active:"curve"===e.currShape}),onClick:function(t){t.preventDefault(),h("curve"),e.setCurrShape("curve")}}),Me.a.createElement(q.a,{icon:Me.a.createElement("span",{className:"lake-icon lake-icon-contextual-elbow-line"}),target:"dash",className:Ne()({active:"elbow"===e.currShape}),onClick:function(t){t.preventDefault(),h("elbow"),e.setCurrShape("elbow")}})),Me.a.createElement("div",{className:"lake-diagram-board-contextual-toolbar-separator"}),Me.a.createElement("div",{className:"lake-diagram-contextual-line-dropdown-row"},Me.a.createElement(q.a,{icon:Me.a.createElement("span",{className:"lake-icon lake-icon-contextual-stroke-none"}),className:Ne()({active:"none"===c}),onClick:function(e){e.preventDefault(),l("none"),f(null)}}),Me.a.createElement(q.a,{icon:Me.a.createElement("span",{className:"lake-icon lake-icon-contextual-stroke-dash"}),target:"dash",className:Ne()({active:"dash"===c}),onClick:function(e){e.preventDefault(),l("dash"),f("dash")}})),Me.a.createElement("div",{className:"lake-diagram-board-contextual-toolbar-separator"}),Me.a.createElement("div",{className:"lake-diagram-contextual-line-dropdown-row"},Me.a.createElement("div",{className:"lake-diagram-board-contextual-line-width-control"},Me.a.createElement("div",{className:"lake-diagram-board-contextual-line-width-inner"},Me.a.createElement(Ih,{min:1,max:10,value:r.width,onBlur:u,onPressEnter:u,onStep:s}))),Me.a.createElement("div",{className:"lake-diagram-board-contextual-line-color"},Me.a.createElement(Gh,{color:r.color,defaultColor:e.defaultColor,onSelect:d,onClear:function(){return d("rgba(0, 0, 0, 0)")},palette:t&&t.palette,transSVG:Me.a.createElement(Bp,{type:"context-cb-trans"})},Me.a.createElement("div",{className:Ne()("lake-diagram-stroke"),style:{backgroundColor:r.color}})))))};Up.propTypes={title:Ae.a.string,colorBadge:Ae.a.object,name:Ae.a.string,className:Ae.a.string,diagram:Ae.a.object,onSelect:Ae.a.func,defaultColor:Ae.a.string,strokeProps:Ae.a.object,selections:Ae.a.array,setStrokeProps:Ae.a.func,currShape:Ae.a.string,setCurrShape:Ae.a.func,execCommand:Ae.a.func};var Qp=function(e){var t=e.name,n=e.selections,r=Object(Re.useState)({}),a=D()(r,2),i=a[0],o=a[1],c=Object(Re.useState)(e.defaultShape),l=D()(c,2),s=l[0],u=l[1];return Object(Re.useEffect)((function(){return n&&n.length>0&&(o(n[0].stroke),u(n[0].shape)),function(){}}),[]),Me.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Me.a.createElement(X.a,{overlay:Me.a.createElement(Up,Se()({setStrokeProps:o,strokeProps:i,onSelect:function(t){o(Kp(Kp({},i),{},{color:t})),e.execCommand("stroke.color",t,n)},currShape:s,setCurrShape:u},e)),placement:"bottomCenter",trigger:"click"},Me.a.createElement(V.a,{placement:"top",title:e.title},Me.a.createElement(q.a,{"data-testid":t},Me.a.createElement("span",{className:"lake-icon lake-icon-contextual-".concat(s,"-line")})))))};Qp.defaultProps={defaultShape:"straight"},Qp.propTypes={title:Ae.a.string,name:Ae.a.string,diagram:Ae.a.object,selections:Ae.a.array,defaultShape:Ae.a.string,execCommand:Ae.a.func},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-contextual-layout-current {\n  width: 100%;\n  height: 30px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  border-radius: 4px;\n}\n.lake-diagram-contextual-layout-current .lake-diagram-layout-thumb:hover {\n  background-color: #f5f5f5;\n}\n.lake-diagram-contextual-command {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.lake-diagram-contextual-command > * {\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n}\n.lake-diagam-multi-properties-selection {\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/8c02d0c7-9749-4078-b865-6084959df78f.svg);\n}\n.lake-diagram-contextual-mindmap-dropdown {\n  background: #fff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  padding: 5px 5px;\n  width: auto;\n  height: auto;\n}\n.lake-diagram-contextual-mindmap-dropdown .mindmap-btn {\n  padding: 0;\n  width: 32px;\n  line-height: 30px;\n  margin-left: 3px;\n  margin-right: 3px;\n  border: none;\n  background: none;\n}\n.lake-diagram-contextual-mindmap-dropdown .mindmap-btn[disabled] {\n  border-color: #e8e8e8;\n}\n.lake-diagram-contextual-mindmap-dropdown .mindmap-btn.active {\n  background: #f5f5f5;\n}\n.lake-diagram-contextual-mindmap-dropdown .mindmap-btn:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-diagram-contextual-mindmap-dropdown .mindmap-btn::after {\n  display: none;\n}\n.lake-diagram-contextual-mindmap-dropdown .lake-diagram-contextual-mindmap-dropdown-row {\n  display: flex;\n}\n.lake-diagram-board-contextual-mindmap-width-control {\n  max-width: 70px;\n  margin-right: 5px;\n}\n.lake-diagram-board-contextual-mindmap-width-control .lake-diagram-board-contextual-mindmap-width-inner {\n  border: none;\n}\n.lake-diagram-board-contextual-mindmap-width-control .lake-diagram-board-contextual-mindmap-width-inner .ant-input-number {\n  width: 100%;\n  border: 1px solid #e8e8e8;\n  border-radius: 5px;\n}\n.lake-diagram-board-contextual-mindmap-width-control .lake-diagram-board-contextual-mindmap-width-inner .ant-input-number-focused {\n  box-shadow: none;\n}\n.lake-diagram-board-contextual-mindmap-color {\n  border: 1px solid #e8e8e8;\n  border-radius: 4px;\n  width: 32px;\n  max-height: 32px;\n  overflow: hidden;\n  background: #fff;\n  cursor: pointer;\n}\n");var Jp=function(e){var t=e.layouts,n=e.selectedKey,r=e.setVisible,a=e.visible;return Me.a.createElement("div",{className:"lake-diagram-layout-dropdown","data-lake_prevent_click_unselect":"true"},t.map((function(t){var i=t.key;return Me.a.createElement("div",{key:i,"data-lake_prevent_click_unselect":"true",className:Ne()("lake-diagram-layout-thumb",i,{selected:i===n}),onClick:function(){r(!a),e.onSelect(i)}})})))};Jp.propTypes={title:Ae.a.string,diagram:Ae.a.object,layouts:Ae.a.array,selectedKey:Ae.a.string,setVisible:Ae.a.func,onSelect:Ae.a.func,visible:Ae.a.bool};var $p=function(e){var t=e.name,n=e.selections.filter((function(e){return e.isMindmap})),r=jo(n,Wf),a=n.map((function(e){return e.upDirection})),i=n.map((function(e){return e.upLayoutType})),o=Object(Re.useState)(!1),c=D()(o,2),l=c[0],s=c[1],u=_o.filter((function(e){if(n.every((function(e){return e.isStem})))return!0;var t=e.key.split("-")[0],r=i.some((function(e){return Mo(e,t)})),o=!e.directions.every((function(e){return a.every((function(t){return Ro(t,e)}))}));return!r&&!o}));function d(e){0!==u.length&&s(e)}return Me.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Me.a.createElement(X.a,{overlay:Me.a.createElement(Jp,Se()({setVisible:d,selectedKey:r,layouts:u,onSelect:function(t){e.execCommand("layout",So(t),n)},visible:l},e)),placement:"bottomCenter",onClick:function(){return d(!l)},visible:l,onVisibleChange:function(e){return d(e)},trigger:"click"},Me.a.createElement(V.a,{placement:"top",title:e.title},Me.a.createElement("div",{className:Ne()("lake-diagram-contextual-layout-current"),"data-testid":t},Me.a.createElement("div",{className:Ne()("lake-diagram-layout-thumb ".concat(r),{"lake-diagam-multi-properties-selection":"multiValue"===r})})))))};function em(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?em(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):em(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}$p.defaultProps={selections:[]},$p.propTypes={title:Ae.a.string,className:Ae.a.string,diagram:Ae.a.object,selections:Ae.a.array,execCommand:Ae.a.func,name:Ae.a.string};var nm=function(e){var t=e.diagram,n=e.selections,r=e.treeEdgeProps,a=e.setTreeEdgeProps,i=e.containRoot,o=et(n.map((function(e){return e.stem}))),c=Object(Re.useState)(""),l=D()(c,2),s=l[0],u=l[1],d=function(t){var i=Math.min(Math.max(t,1),5);i!==r.width&&(a(tm(tm({},r),{},{"stroke-width":i})),e.execCommand("treeEdge.stroke-width",i,n))},f=function(e){d(e.target.value)},h=function(t){e.onSelect&&e.onSelect(t)},p=function(t){e.execCommand("treeEdge.shape",t,o),e.setTreeRootProps({shape:t?"polyline":"none"})};return Object(Re.useEffect)((function(){return o.length>0&&u(o[0].treeEdge.shape||"none"),function(){}}),[]),Me.a.createElement("div",{className:Ne()("lake-diagram-contextual-mindmap-dropdown",e.className),"data-lake_prevent_click_unselect":"true"},Me.a.createElement("div",{className:"lake-diagram-contextual-mindmap-dropdown-row"},Me.a.createElement(q.a,{icon:Me.a.createElement("span",{className:"lake-icon lake-icon-mind-tree-edge-none"}),className:Ne()("mindmap-btn",{active:"none"===s}),onClick:function(e){e.preventDefault(),u("none"),p(null)}}),Me.a.createElement(q.a,{icon:Me.a.createElement("span",{className:"lake-icon lake-icon-mind-tree-edge-polyline"}),target:"dash",className:Ne()("mindmap-btn",{active:"polyline"===s}),onClick:function(e){e.preventDefault(),u("polyline"),p("polyline")}})),!i&&Me.a.createElement(Me.a.Fragment,null,Me.a.createElement("div",{className:"lake-diagram-board-contextual-toolbar-separator"}),Me.a.createElement("div",{className:"lake-diagram-contextual-mindmap-dropdown-row"},Me.a.createElement("div",{className:"lake-diagram-board-contextual-mindmap-width-control"},Me.a.createElement("div",{className:"lake-diagram-board-contextual-mindmap-width-inner"},Me.a.createElement(Ih,{min:1,max:5,value:r["stroke-width"]||e.defaultStrokeWidth,onBlur:f,onPressEnter:f,onStep:d}))),Me.a.createElement("div",{className:"lake-diagram-board-contextual-mindmap-color"},Me.a.createElement(Gh,{color:r.stroke,defaultColor:e.defaultColor,onSelect:h,onClear:function(){return h("rgba(0, 0, 0, 0)")},palette:t&&t.palette,transSVG:Me.a.createElement(Bp,{type:"context-cb-trans"})},Me.a.createElement("div",{className:Ne()("lake-diagram-stroke"),style:{backgroundColor:r.stroke}}))))))};nm.defaultProps={defaultStrokeWidth:3},nm.propTypes={title:Ae.a.string,colorBadge:Ae.a.object,containRoot:Ae.a.bool,name:Ae.a.string,className:Ae.a.string,diagram:Ae.a.object,onSelect:Ae.a.func,defaultColor:Ae.a.string,treeEdgeProps:Ae.a.object,selections:Ae.a.array,setTreeEdgeProps:Ae.a.func,defaultStrokeWidth:Ae.a.number,execCommand:Ae.a.func,setTreeRootProps:Ae.a.func};var rm=function(e){var t=e.name,n=e.selections,r=Object(Re.useState)({}),a=D()(r,2),i=a[0],o=a[1],c=Object(Re.useState)({}),l=D()(c,2),s=l[0],u=l[1],d=Object(Re.useState)(!1),f=D()(d,2),h=f[0],p=f[1],m=n.some((function(e){return e.isStem}));return Object(Re.useEffect)((function(){if(n&&n.length>0){var e=n[0];o(e.treeEdge),u(e.stem.treeEdge)}return function(){}}),[]),Me.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Me.a.createElement(X.a,{visible:h,onVisibleChange:function(e){p(e)},overlay:Me.a.createElement(nm,Se()({setTreeEdgeProps:o,setTreeRootProps:u,treeEdgeProps:i,onSelect:function(t){o(tm(tm({},i),{},{stroke:t})),e.execCommand("treeEdge.stroke",t,n)},containRoot:m},e)),placement:"bottomCenter",trigger:"click"},Me.a.createElement(V.a,{placement:"top",title:e.title},Me.a.createElement(q.a,{"data-testid":t},Me.a.createElement("span",{className:"lake-icon lake-icon-mind-tree-edge-".concat(s.shape?s.shape:"none")})))))};rm.defaultProps={defaultColor:"transparent"},rm.propTypes={title:Ae.a.string,name:Ae.a.string,diagram:Ae.a.object,selections:Ae.a.array,currColor:Ae.a.string,defaultColor:Ae.a.string,execCommand:Ae.a.func};var am=function(e){var t=function(t){e.execCommand("border.shape",t,e.selections),e.setShape(t)};return Me.a.createElement("div",{className:Ne()("lake-diagram-contextual-mindmap-dropdown",e.className),"data-lake_prevent_click_unselect":"true"},Me.a.createElement("div",{className:"lake-diagram-contextual-mindmap-dropdown-row"},Me.a.createElement(q.a,{icon:Me.a.createElement("span",{className:"lake-icon lake-icon-mindmap-line"}),className:Ne()("mindmap-btn",{active:"line"===e.shape}),onClick:function(e){e.preventDefault(),t("line")}}),Me.a.createElement(q.a,{icon:Me.a.createElement("span",{className:"lake-icon lake-icon-mindmap-rect"}),className:Ne()("mindmap-btn",{active:"rect"===e.shape}),onClick:function(e){e.preventDefault(),t("rect")}}),Me.a.createElement(q.a,{icon:Me.a.createElement("span",{className:"lake-icon lake-icon-mindmap-capsule"}),className:Ne()("mindmap-btn",{active:"capsule"===e.shape}),onClick:function(e){e.preventDefault(),t("capsule")}})))};am.propTypes={title:Ae.a.string,className:Ae.a.string,borderProps:Ae.a.object,selections:Ae.a.array,execCommand:Ae.a.func,shape:Ae.a.string,setShape:Ae.a.func,isLine:Ae.a.bool};var im=function(e){var t=e.name,n=e.selections,r=Object(Re.useState)(e.get(n,"border.shape","line")||null),a=D()(r,2),i=a[0],o=a[1];return Me.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Me.a.createElement(X.a,{overlay:Me.a.createElement(am,Se()({shape:i,isLine:"line"===i,setShape:o},e)),placement:"bottomCenter",trigger:"click"},Me.a.createElement(V.a,{placement:"top",title:e.title},Me.a.createElement(q.a,{"data-testid":t},Me.a.createElement("div",{className:Ne()("lake-diagram-contextual-layout-current",{"lake-diagam-multi-properties-selection":"multiValue"===i})},Me.a.createElement("span",{className:"lake-icon lake-icon-mindmap-".concat(i)}))))))};function om(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?om(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):om(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}im.propTypes={title:Ae.a.string,name:Ae.a.string,diagram:Ae.a.object,selections:Ae.a.array,defaultShape:Ae.a.string,get:Ae.a.func};var lm=function(e){var t=e.diagram,n=e.selections,r=e.strokeProps,a=e.setStrokeProps,i=function(t){var i=Math.min(Math.max(t,1),10);i!==r.strokeWidth&&(a(cm(cm({},r),{},{strokeWidth:i})),e.execCommand("border.stroke-width",i,n))},o=function(e){i(e.target.value)},c=function(t){e.onSelect&&e.onSelect(t)};return Me.a.createElement("div",{className:Ne()("lake-diagram-contextual-mindmap-dropdown",e.className),"data-lake_prevent_click_unselect":"true"},Me.a.createElement("div",{className:"lake-diagram-contextual-mindmap-dropdown-row"},Me.a.createElement("div",{className:"lake-diagram-board-contextual-mindmap-width-control"},Me.a.createElement("div",{className:"lake-diagram-board-contextual-mindmap-width-inner"},Me.a.createElement(Ih,{min:1,max:10,value:r.strokeWidth,onBlur:o,onPressEnter:o,onStep:i}))),Me.a.createElement("div",{className:"lake-diagram-board-contextual-mindmap-color"},Me.a.createElement(Gh,{color:r.strokeColor,defaultColor:e.defaultColor,onSelect:c,onClear:function(){return c("rgba(0, 0, 0, 0)")},palette:t&&t.palette,transSVG:Me.a.createElement(Bp,{type:"context-cb-trans"})},Me.a.createElement(V.a,{placement:"top",title:Qt("边框颜色")},Me.a.createElement("div",{className:Ne()("lake-diagram-stroke"),style:{backgroundColor:r.strokeColor}}))))))};lm.propTypes={title:Ae.a.string,colorBadge:Ae.a.object,name:Ae.a.string,className:Ae.a.string,diagram:Ae.a.object,onSelect:Ae.a.func,defaultColor:Ae.a.string,strokeProps:Ae.a.object,selections:Ae.a.array,setStrokeProps:Ae.a.func,execCommand:Ae.a.func};var sm=function(e){var t=e.name,n=e.selections,r=Object(Re.useState)({}),a=D()(r,2),i=a[0],o=a[1],c=Object(Re.useState)(!1),l=D()(c,2),s=l[0],u=l[1],d=Object(Re.useState)(!0),f=D()(d,2),h=f[0],p=f[1];return Object(Re.useEffect)((function(){if(n&&n.length>0){var t=n.filter((function(e){return e.canStroke()&&e.isMindmap})),r=e.get(t,"border.stroke-width"),a=e.get(n,"border.shape","line")||null,i=e.get(n,"border.stroke","transparent")||null;o({strokeWidth:r,shape:a,strokeColor:i}),p("line"===a)}return function(){}}),[]),Me.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Me.a.createElement(X.a,{visible:s,onVisibleChange:function(e){u(e)},overlay:Me.a.createElement(lm,Se()({setStrokeProps:o,strokeProps:i,onSelect:function(t){o(cm(cm({},i),{},{strokeColor:t})),e.execCommand("border.stroke",t,n)},isLine:h},e)),placement:"bottomCenter",trigger:"click"},Me.a.createElement(V.a,{placement:"top",title:e.title},Me.a.createElement(q.a,{"data-testid":t},Me.a.createElement(Bp,{type:"stroke-color",stroke:i.strokeColor})))))};sm.defaultProps={defaultColor:"transparent"},sm.propTypes={title:Ae.a.string,name:Ae.a.string,diagram:Ae.a.object,selections:Ae.a.array,currColor:Ae.a.string,defaultColor:Ae.a.string,get:Ae.a.func,execCommand:Ae.a.func};var um=function(e){var t=e.name,n=e.diagram,r=e.title,a=e.disabled;return Me.a.createElement("div",{className:"lake-diagram-contextual-command"},Me.a.createElement(V.a,{disabled:a,placement:"top",title:r},Me.a.createElement(q.a,{"data-testid":t,icon:Me.a.createElement("span",{className:"lake-icon lake-icon-contextual-group"}),onClick:function(e){e.preventDefault(),e.stopPropagation(),n.command.execute("Group")}})))};um.propTypes={title:Ae.a.string,name:Ae.a.string,execCommand:Ae.a.func,diagram:Ae.a.object,disabled:Ae.a.oneOfType([Ae.a.bool,Ae.a.func])};var dm=function(e){var t=e.name,n=e.diagram,r=e.title,a=e.disabled;return Me.a.createElement("div",{className:"lake-diagram-contextual-command"},Me.a.createElement(V.a,{disabled:a,placement:"top",title:r},Me.a.createElement(q.a,{"data-testid":t,icon:Me.a.createElement("span",{className:"lake-icon lake-icon-contextual-ungroup"}),onClick:function(e){e.preventDefault(),e.stopPropagation(),n.command.execute("UnGroup")}})))};dm.propTypes={title:Ae.a.string,name:Ae.a.string,execCommand:Ae.a.func,diagram:Ae.a.object,disabled:Ae.a.oneOfType([Ae.a.bool,Ae.a.func])},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-contextual-align-dropdown {\n  background: #fff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  padding: 5px 5px;\n  width: auto;\n  height: auto;\n}\n.lake-diagram-contextual-align-dropdown .ant-btn {\n  border: none;\n  background: none;\n  padding: 0 6px;\n  height: 32px;\n  min-width: 32px;\n  margin: 0 2px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  outline: none;\n}\n.lake-diagram-contextual-align-dropdown .ant-btn[disabled] {\n  color: #BFBFBF;\n  background: none;\n}\n.lake-diagram-contextual-align-dropdown .ant-btn:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-diagram-contextual-align-dropdown .ant-btn:focus {\n  color: #595959;\n}\n.lake-diagram-contextual-align-dropdown .ant-btn::after {\n  display: none;\n}\n.lake-diagram-contextual-align-dropdown .ant-btn .lake-icon {\n  color: #262626;\n  font-size: 18px;\n}\n.lake-diagram-contextual-align-dropdown .ant-btn.active {\n  background: #e8e8e8;\n  color: #595959;\n}\n.lake-diagram-contextual-align-dropdown .lake-button-active {\n  background-color: #e8e8e8;\n}\n.lake-diagram-contextual-align-dropdown p {\n  margin-bottom: 0;\n}\n");var fm=function(e){var t=e.diagram;return Me.a.createElement("div",{className:"lake-diagram-contextual-align-dropdown","data-lake_prevent_click_unselect":"true"},Me.a.createElement("p",null,t.command.enable("AlignLeft")&&Me.a.createElement(q.a,{icon:Me.a.createElement("span",{className:"lake-icon lake-icon-align-left"}),onClick:function(){return t.command.execute("AlignLeft")}}),t.command.enable("AlignHCenter")&&Me.a.createElement(q.a,{icon:Me.a.createElement("span",{className:"lake-icon lake-icon-align-h-center"}),onClick:function(){return t.command.execute("AlignHCenter")}}),t.command.enable("AlignRight")&&Me.a.createElement(q.a,{icon:Me.a.createElement("span",{className:"lake-icon lake-icon-align-right"}),onClick:function(){return t.command.execute("AlignRight")}}),t.command.enable("DistributeHorizontally")&&Me.a.createElement(q.a,{icon:Me.a.createElement("span",{className:"lake-icon lake-icon-distribute-horizontally"}),onClick:function(){return t.command.execute("DistributeHorizontally")}})),Me.a.createElement("p",null,t.command.enable("AlignTop")&&Me.a.createElement(q.a,{icon:Me.a.createElement("span",{className:"lake-icon lake-icon-align-top"}),onClick:function(){return t.command.execute("AlignTop")}}),t.command.enable("AlignVCenter")&&Me.a.createElement(q.a,{icon:Me.a.createElement("span",{className:"lake-icon lake-icon-align-v-center"}),onClick:function(){return t.command.execute("AlignVCenter")}}),t.command.enable("AlignBottom")&&Me.a.createElement(q.a,{icon:Me.a.createElement("span",{className:"lake-icon lake-icon-align-bottom"}),onClick:function(){return t.command.execute("AlignBottom")}}),t.command.enable("DistributeVertically")&&Me.a.createElement(q.a,{icon:Me.a.createElement("span",{className:"lake-icon lake-icon-distribute-vertically"}),onClick:function(){return t.command.execute("DistributeVertically")}})))};fm.defaultProps={diagram:null},fm.propTypes={diagram:Ae.a.object};var hm=function(e){var t=e.name,n=Object(Re.useState)(!1),r=D()(n,2),a=r[0],i=r[1];return Me.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Me.a.createElement(X.a,{trigger:"click",visible:a,onVisibleChange:function(e){i(e)},overlay:Me.a.createElement(fm,e)},Me.a.createElement(V.a,{placement:"top",title:e.title},Me.a.createElement(q.a,{"data-testid":t},Me.a.createElement("span",{className:"lake-icon lake-icon-contextual-align"})))))};function pm(e){var t=e.coord,n=e.overlayClassName,r=Object(Re.useRef)();if(t){var a="lake-prevent-card-activated lake-diagram-prevent-mouse-select lake-diagram-prevent-mouseleave-reset-focus-point";return Me.a.createElement(W.a,Se()({},e,{getPopupContainer:function(){return e.getPopupContainer?e.getPopupContainer():document.querySelector(".yuque-sdk-extra-container")||e.diagram.container},visible:!0,overlayClassName:n?"".concat(n," ").concat(a):a,"data-lake_prevent_click_unselect":!0}),Me.a.createElement("div",{ref:r,"data-lake_prevent_click_unselect":"true",style:{position:"absolute",left:"".concat(t[0],"px"),top:"".concat(t[1]-16,"px"),pointerEvents:"none",width:"".concat(e.width,"px"),height:"".concat(e.height+32,"px")}}))}return Me.a.createElement("span",{ref:r})}function mm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mm(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ym(e){var t=e.diagram;switch(e.type){case"separator":default:return Me.a.createElement("div",{className:"lake-diagram-board-contextual-vertical-separator"});case"custom":return Me.a.createElement(e.custom,gm(gm({},e),{},{execCommand:function(e,n,r){t.command.execute("Update",{id:r,model:ut(e,n),autoSelect:!1})},get:function(e,t,n){var r=n;if(e.length>0)if((r=e.map((function(e){return t.split(".").reduce((function(e,t){return e?e.isCell&&e.get(t)||e[t]:e}),e)}))).every((function(e){return e===r[0]})))r=r[0];else{if(!r.every((function(e){return"number"==typeof e})))return"multiValue";r.sort(),r=r[r.length-1]}return r}}))}}function vm(e){var t=e.diagram,n=e.onProperties,r=e.mini,a=Object(Re.useState)(null),i=D()(a,2),o=i[0],c=i[1],l=Object(Re.useState)(null),s=D()(l,2),u=s[0],d=s[1],f=Object(Re.useState)(null),h=D()(f,2),p=h[0],m=h[1],g=Object(Re.useState)(0),y=D()(g,2),v=y[0],b=y[1],x=Object(Re.useState)(0),k=D()(x,2),w=k[0],O=k[1];function C(){return function(e,t,n){var r=e.length,a=[];if(0===r)return[];if(function(e){return e.every((function(e){return e.isMindmap}))||e.every((function(e){return e.isGeometry}))||e.every((function(e){return e.isText}))||e.every((function(e){return e.isLine}))||e.every((function(e){return e.isGroup}))}(e))switch(e[0].type){case"line":a=[{name:"contextual-line-style",type:"custom",title:Qt("线条样式"),custom:Qp},{type:"separator"},{name:"contextual-line-source",type:"custom",title:Qt("起点"),custom:function(e){return Me.a.createElement(Zp,Se()({},e,{type:"source"}))}},{name:"contextual-line-target",type:"custom",title:Qt("终点"),custom:function(e){return Me.a.createElement(Zp,Se()({},e,{type:"target"}))}},{type:"separator"},{name:"font-style",type:"custom",title:Qt("文字样式"),custom:Hp},{type:"separator",noMini:!0},{name:"properties",type:"custom",custom:Lp,title:Qt("打开设置"),noMini:!0}];break;case"mindmap":a=[{name:"contextual-mindmap-layout",type:"custom",title:Qt("结构"),custom:$p,disabled:!1},{name:"contextual-mindmap-tree-edge",type:"custom",title:Qt("分支"),custom:rm,disabled:!1},{type:"separator"},{name:"contextual-mindmap-shape",type:"custom",title:Qt("节点形状"),custom:im,disabled:!1},{name:"contextual-mindmap-fill",type:"custom",title:Qt("节点填充"),custom:Ip,disabled:function(e){var t=e.selector.selections.filter((function(e){return e.canFill()}));return 0===t.length||t.some((function(e){return e.locked}))}},{name:"contextual-mindmap-stroke",type:"custom",title:Qt("节点描边"),custom:sm,disabled:function(e){var t=e.selector.selections.filter((function(e){return e.canStroke()}));return 0===t.length||t.some((function(e){return e.locked}))}},{type:"separator"},{name:"font-style",type:"custom",title:Qt("文字样式"),custom:Hp,disabled:!1},{name:"add-link",type:"custom",custom:Np,title:Qt("插入链接"),disabled:!1},{type:"separator",noMini:!0},{name:"properties",type:"custom",custom:Lp,title:Qt("打开设置"),noMini:!0}];break;case"text":a=[{name:"contextual-text-size",type:"custom",custom:Sp,title:Qt("字号"),disabled:!1},{type:"separator"},{name:"contextual-text-color",type:"custom",title:Qt("字色"),disabled:!1,custom:Ap},{name:"contextual-text-alignment",title:Qt("对齐"),type:"custom",custom:Mp,disabled:!1},{name:"contextual-text-bold",type:"custom",custom:Dp,title:Qt("加粗"),disabled:!1},{name:"add-link",type:"separator"},{name:"add-link",type:"custom",custom:Np,title:Qt("插入链接"),hotkey:j.ua.macos?"⌘+K":"Ctrl+K"},{type:"separator",noMini:!0},{name:"properties",type:"custom",custom:Lp,title:Qt("打开设置"),noMini:!0}];break;case"geometry":a=[{name:"contextual-geometry-shape",type:"custom",custom:zp,title:Qt("图形"),disabled:!1},{type:"separator"},{name:"contextual-geometry-fill-color",type:"custom",title:Qt("填充"),custom:Ip,disabled:function(e){var t=e.selector.selections.filter((function(e){return e.canFill()}));return 0===t.length||t.some((function(e){return e.locked}))}},{name:"contextual-geometry-stroke-color",type:"custom",title:Qt("描边"),disabled:!1,custom:qp},{type:"separator"},{name:"font-style",type:"custom",title:Qt("文字样式"),custom:Hp,disabled:!1},{name:"add-link",type:"custom",custom:Np,title:Qt("插入链接"),hotkey:j.ua.macos?"⌘+K":"Ctrl+K"},{type:"separator",noMini:!0},{name:"properties",type:"custom",custom:Lp,title:Qt("打开设置"),noMini:!0}];break;case"group":a=1===e.length?[{name:"ungroup",type:"custom",custom:dm,title:Qt("取消成组")},{type:"separator",noMini:!0},{name:"properties",type:"custom",custom:Lp,title:Qt("打开设置"),noMini:!0}]:[];break;default:a=[]}if(e.filter((function(e){return e.isStem})).length>1){var i,o=0===a.length?[{name:"arrangement",type:"custom",custom:hm,title:Qt("排列")},{name:"group",type:"custom",custom:um,title:Qt("成组")},{type:"separator",noMini:!0},{name:"properties",type:"custom",custom:Lp,title:Qt("打开设置"),noMini:!0}]:[{name:"arrangement",type:"custom",custom:hm,title:Qt("排列")},{name:"group",type:"custom",custom:um,title:Qt("成组")},{type:"separator",noMini:!0}];(i=a).splice.apply(i,[a.length-1,0].concat(z()(o)))}return r>1&&(a=a.filter((function(e){return"add-link"!==e.name}))),(a=a.filter((function(t){return!(n&&t.noMini||("function"==typeof t.disabled?t.disabled(e[0].diagram):t.disabled))}))).forEach((function(e){"properties"===e.name&&(e.onProperties=t)})),a}(t.selector.selections,n,r)}Object(Re.useEffect)((function(){return m(t.viewport.invertViewport([0,0])),function(){}}),[]),Object(Re.useEffect)((function(){m(t.viewport.invertViewport([0,0]));var e=se()((function(){if(t.signal.addVertexPanelVisibility)return c(null),void d(null);var e=t.selector.selections,n=C();e&&c(n),1===n.length||n.length>1&&!t.signal.mouseMultiSelecting?function(e){d(null);var n=function(e,t){var n=Rl(e),r=n.minX,a=n.minY,i=n.maxX,o=n.maxY,c=t.viewport.convertViewport([r,a]),l=t.viewport.convertViewport([i,o]),s=l[0]-c[0],u=l[1]-c[1];return{minX:c[0],minY:c[1],width:s,height:u}}(e,t),r=n.minX,a=n.minY,i=n.width,o=n.height;b(o),O(i),d([r,a])}(e):d(null)}),20),n=function(){c(null),d(null)},r=se()((function(){var e=C();c(e)}),16),a=function(){var n=t.viewport.invertViewport([0,0]);p&&ht(p[0],n[0],.001)&&ht(p[1],n[1],.001)||(c(null),d(null),e())},i=function(e){e.isModelChange&&r()};return t.on("afterselect",e),t.on("cell:dragstart",n),t.on("vertexresizestart",n),t.on("endpointcontrolpointmousedown",n),t.on("aftercommandexecute",i),t.on("afterviewportchange",a),function(){t.off("afterselect",e),t.off("cell:dragstart",n),t.off("vertexresizestart",n),t.off("endpointcontrolpointmousedown",n),t.off("aftercommandexecute",i),t.off("afterviewportchange",a)}}),[t,o]);var E=Me.a.createElement("div",{className:"lake-diagram-board-contextual-toolbar"},o&&o.map((function(e,n){return Me.a.createElement(ym,Se()({key:n,diagram:t,selections:t.selector.selections},e))})));return Me.a.createElement("div",{"data-testid":"board-contextual-toolbar"},Me.a.createElement(pm,{height:v,width:w,content:E,visible:!0,overlayClassName:"lake-diagram-board-contextual-toolbar-popover",diagram:t,coord:u}))}hm.defaultProps={title:"",name:"",diagram:null},hm.propTypes={title:Ae.a.string,name:Ae.a.string,diagram:Ae.a.object},pm.defaultProps={coord:null,diagram:null,onClose:function(){}},pm.propTypes={coord:Ae.a.array,diagram:Ae.a.object,onClose:Ae.a.func,overlayClassName:Ae.a.string,getPopupContainer:Ae.a.object,height:Ae.a.number,width:Ae.a.number},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-board-contextual-toolbar {\n  display: flex;\n  height: 40px;\n  flex-direction: row;\n  background: white;\n  box-shadow: 0 1px 2px -2px rgba(0, 0, 0, 0.08), 0 2px 6px 0 rgba(0, 0, 0, 0.04), 0 4px 8px 1px rgba(0, 0, 0, 0.02);\n  border: 1px solid #e9e9e9;\n  justify-content: center;\n  align-items: center;\n  padding: 0 6px;\n}\n.lake-diagram-board-contextual-toolbar-body {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-left: 4px;\n  margin-right: 4px;\n  height: 100%;\n  border-radius: 5px;\n}\n.lake-diagram-board-contextual-toolbar-popover .ant-popover-content {\n  min-width: auto;\n  width: auto;\n}\n.lake-diagram-board-contextual-toolbar-popover .ant-popover-content .ant-popover-arrow {\n  display: none;\n}\n.lake-diagram-board-contextual-toolbar-popover .ant-popover-content .ant-popover-inner {\n  background-color: inherit;\n  box-shadow: none;\n  border-radius: 0;\n  background-clip: none;\n}\n.lake-diagram-board-contextual-toolbar-popover .ant-popover-content .ant-popover-inner .ant-popover-inner-content {\n  padding: 0;\n}\n.lake-diagram-board-contextual-toolbar-popover .ant-btn::after {\n  display: none;\n}\n.lake-diagram-board-contextual-toolbar-popover .ant-btn.ant-dropdown-trigger:hover {\n  background: #f5f5f5;\n  border-radius: 2px;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button {\n  display: flex;\n  height: 32px;\n  line-height: 32px;\n  border-radius: 2px;\n  border: 1px solid transparent;\n  align-items: center;\n  transition: border 0.3s;\n  margin-right: 4px;\n  overflow: hidden;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button:hover {\n  border-color: #e8e8e8;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button:hover .ant-btn:first-child {\n  border-color: #e8e8e8;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn {\n  border-radius: 0;\n  transition: none;\n  margin-right: 0;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn:hover {\n  background: #f5f5f5;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn:first-child {\n  border-right: 1px solid transparent;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn:first-child:hover {\n  background: #f5f5f5;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn:first-child:not(:last-child) {\n  min-width: auto;\n  width: auto;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) {\n  min-width: auto;\n  width: 16px;\n  border: none;\n  background: none;\n  padding: 0;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  position: relative;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) .lake-icon {\n  color: #262626;\n  position: absolute;\n  right: 4px;\n  top: 14px;\n  width: 8px;\n  height: 8px;\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSI1IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgb3BhY2l0eT0iLjQ1Ij48cGF0aCBkPSJNMC0yaDh2OEgweiIvPjxwYXRoIGQ9Ik0uNTk2LjU1N2wzLjE1IDMuODIxYS4zMzIuMzMyIDAgMDAuNDk1IDBMNy40MDUuNTU3YS4zMzIuMzMyIDAgMDAtLjI0Ny0uNTUzSC44NDVjLS4yODggMC0uNDQuMzM5LS4yNDkuNTUzeiIgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPg==);\n  background-repeat: no-repeat;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) .lake-icon::before {\n  content: '';\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child):hover {\n  background: #e8e8e8;\n}\n.lake-diagram-contextual-command .ant-btn {\n  border: none;\n  background: none;\n  padding: 0 6px;\n  height: 32px;\n  min-width: 32px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  outline: none;\n  color: #262626;\n}\n.lake-diagram-contextual-command .ant-btn[disabled] {\n  color: #BFBFBF;\n  background: none;\n}\n.lake-diagram-contextual-command .ant-btn:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-diagram-contextual-command .ant-btn:focus {\n  color: #595959;\n}\n.lake-diagram-contextual-command .ant-btn::after {\n  display: none;\n}\n.lake-diagram-contextual-command .ant-btn .lake-icon {\n  margin-right: 0;\n  font-size: 18px;\n}\n.lake-diagram-contextual-command .ant-btn.active {\n  background: #e8e8e8;\n  color: #595959;\n}\n.lake-diagram-contextual-command .lake-button-active {\n  background-color: #e8e8e8;\n}\n.lake-diagram-contextual-button-popover {\n  padding-top: 0;\n}\n.lake-diagram-contextual-button-popover .ant-popover-content {\n  min-width: auto;\n  width: auto;\n}\n.lake-diagram-contextual-button-popover .ant-popover-content .ant-popover-arrow {\n  display: none;\n}\n.lake-diagram-contextual-button-popover .ant-popover-content .ant-popover-inner {\n  background-color: inherit;\n  box-shadow: none;\n  border-radius: 0;\n  background-clip: none;\n}\n.lake-diagram-contextual-button-popover .ant-popover-content .ant-popover-inner .ant-popover-inner-content {\n  padding: 0;\n  stroke: \"#e9e9e9\";\n  box-shadow: rgba(0, 0, 0, 0.08) 0 0 4px;\n}\n.lake-diagram-board-contextual-vertical-separator {\n  width: 1px;\n  height: 60%;\n  margin: 0 6px;\n  background: #e8e8e8;\n}\n"),ym.propTypes={type:Ae.a.string,curr:Ae.a.string,custom:Ae.a.func,diagram:Ae.a.object},vm.propTypes={className:Ae.a.string,position:Ae.a.string,items:Ae.a.array,domContainer:Ae.a.object,title:Ae.a.node,extra:Ae.a.node,execCommand:Ae.a.func,diagram:Ae.a.object,onProperties:Ae.a.func,mini:Ae.a.bool};var bm=Object.freeze({__proto__:null,ZoomTool:Jf,Toolbar:gh,ContextMenu:Mh,Properties:jp,ContextualMenu:vm}),xm=Object.freeze({__proto__:null});function km(e){var t,n=e.diagram,r=e.readonly,a=Object(Re.useState)(null),i=D()(a,2),o=i[0],c=i[1],l=Object(Re.useState)(""),s=D()(l,2),u=s[0],d=s[1],f=Object(Re.useState)(null),h=D()(f,2),p=h[0],m=h[1],g=Object(Re.useRef)();return Object(Re.useEffect)((function(){function e(e){var t=e.cell,n=t.getKeyShape().getBoundingClientRect();c(null),c([n.x+n.width,n.y+n.height/2]),m(t),d(t.note.content)}return n.on("opennote",e),function(){n.off("opennote",e)}}),[n,o,c,m,u]),Object(Re.useEffect)((function(){setTimeout((function(){var e=document.querySelector("textarea.lake-diagram-note-area");if(e){var t=e.value.length;e.focus(),e.setSelectionRange(t,t)}}),16)}),[o,g.current,p]),t=r?Me.a.createElement("div",{className:"lake-diagram-note-area"},u):Me.a.createElement("textarea",{className:"lake-diagram-note-area",value:u,onChange:function(e){var t=e.target.value;d(t)},ref:g}),Me.a.createElement(xh,{placement:"right",content:t,visible:!0,overlayClassName:"lake-diagram-note-popover",diagram:n,coord:o,onClose:function(){o&&p&&(m(null),c(null),p.note.content!==u&&n.command.execute("Update",{id:p,model:{note:u?{content:u}:null}}))}})}function wm(e){return Me.a.createElement(km,e)}function Om(e){return Me.a.createElement(km,Se()({},e,{readonly:!0}))}Fe("/* stylelint-disable */\n.lake-diagram-note-popover {\n  z-index: 1033;\n}\n.lake-diagram-note-popover .lake-diagram-note-area {\n  font-size: 12px;\n  border: none;\n  resize: none;\n  outline: none;\n  box-shadow: none;\n  width: 294px;\n  height: 128px;\n  padding: 16px 18px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  word-break: break-word;\n  white-space: pre-wrap;\n}\n"),km.defaultProps={diagram:null,readonly:!1},km.propTypes={diagram:Ae.a.object,readonly:Ae.a.bool},wm.defaultProps={diagram:null},wm.propTypes={diagram:Ae.a.object},Om.defaultProps={diagram:null},Om.propTypes={diagram:Ae.a.object};var Cm=Object.freeze({__proto__:null,Editor:wm,Reader:Om}),Em=Object.freeze({__proto__:null,Properties:Zf,Note:Cm,Toolbar:Nf,LinkEditor:zf,ShapeOverlay:Ff,Dropdown:Mf,ZoomTool:Xf,ContextMenu:xm,Board:bm}),Pm={};function _m(e,t){Pm[e]=t}function jm(e){return Pm[e]}function Sm(e){return Rm.apply(this,arguments)}function Rm(){return(Rm=ee()(ne.a.mark((function e(t){var n,r,a,i,o,c,l;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.arrayBuffer();case 3:return n=e.sent,e.next=6,crypto.subtle.digest("SHA-256",n);case 6:return r=e.sent,a=Array.from(new Uint8Array(r)),i=a.map((function(e){return e.toString(16).padStart(2,"0")})).join(""),e.abrupt("return",i);case 12:return e.prev=12,e.t0=e.catch(0),e.next=16,t.arrayBuffer();case 16:return o=e.sent,c=Array.from(new Uint8Array(o)),l=c.map((function(e){return e.toString(16).padStart(2,"0")})).join(""),e.abrupt("return",l.length>100&&l.substring(0,100));case 20:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function Mm(e){return Bm.apply(this,arguments)}function Bm(){return(Bm=ee()(ne.a.mark((function e(t){var n,a,i,o,c,l,s,u,d,f;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.file,a=t.uploader,i=t.enable,o=t.callback,n){e.next=3;break}return e.abrupt("return");case 3:if(!n.type){e.next=7;break}if(c=n.type.split("/").pop(),r.EXTS.IMAGE_EXT.includes(c)){e.next=7;break}return e.abrupt("return");case 7:if(!i||i()){e.next=9;break}return e.abrupt("return");case 9:return l=URL.createObjectURL(n),e.next=12,Sm(n);case 12:return s=e.sent,u=new Image,d={src:l,naturalWidth:void 0,naturalHeight:void 0,uploadInfo:{hash:s,fileName:n.name,fileType:n.type,fileSize:n.size,localTempSrc:l,state:0}},u.onload=function(){Object.assign(d,{naturalWidth:u.naturalWidth,naturalHeight:u.naturalHeight}),o&&o(d)},u.src=l,e.next=19,a.image(n);case 19:if(f=e.sent){e.next=23;break}return d.uploadInfo.state=-1,e.abrupt("return",d);case 23:return _m(s,f),e.abrupt("return",d);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Am(e){if(e.image&&e.image.uploadInfo&&e.image.uploadInfo.hash){var t=jm(e.image.uploadInfo.hash);t?(e.image.src=t,e.image.uploadInfo.state=2):e.image.uploadInfo.state=-2}}function Dm(e){e.body.forEach((function(e){Ye(e,(function(e){Am(e)}))}))}function Nm(e){return Lm.apply(this,arguments)}function Lm(){return(Lm=ee()(ne.a.mark((function e(t){var n,r,a,i,o,c,l,s,u,d,f,h;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.model,r=t.diagram,a=t.uploader,n){e.next=3;break}return e.abrupt("return");case 3:if((i=n.image||n.sourceImage)&&i.src){e.next=6;break}return e.abrupt("return");case 6:if(o=n.id,c=i.src,l=i.uploadInfo,!c.startsWith("blob:")){e.next=24;break}return e.prev=10,e.next=13,fetch(c).then((function(e){return e.blob()}));case 13:return s=e.sent,u=new File([s],l&&"".concat(i.uploadInfo.fileName)),e.next=17,Mm({file:u,uploader:a});case 17:d=e.sent,r&&!r.destroyed&&(f=r.find(o))&&f.updateModel({image:d}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(10),r&&!r.destroyed&&(h=r.find(o))&&h.model.image.src===c&&r.update(h,{image:null,sourceImage:n.image});case 24:case"end":return e.stop()}}),e,null,[[10,21]])})))).apply(this,arguments)}function Im(e){return e.command.enable("Collapse")?e.command.execute("Collapse"):e.command.enable("Expand")?e.command.execute("Expand"):void 0}function Tm(e){return e.command.enable("Collapse")||e.command.enable("Expand")}function zm(e){return e.command.enable("Expand")}function Fm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"curve-arrow",n=t.split("-"),r=D()(n,2),a=r[0],i=r[1],o=e.selector.selections;if(2===o.length&&o.every((function(e){return e.isMindmap}))){var c=e.add([{type:"line",source:{id:o[0].model.id},target:{id:o[1].model.id}}]),l=c[0].getPointAtLength(.5);return e.remove(c),e.command.execute("Add",{model:{type:"line",shape:a,source:{id:o[0].model.id},target:{id:o[1].model.id,marker:i},controlPoints:[[l.x,l.y]]}})}e.command.execute("BeginInsertLine",{shape:a,marker:i})}window.___lakeDiagramUplaodFileHashMap=Pm;var Ym=[{name:"save",title:Qt("保存"),hotkey:j.ua.macos?"⌘+S":"Ctrl+S",icon:"save",disabled:!1,execCommand:function(){}},{name:"undo",title:Qt("撤销"),hotkey:j.ua.macos?"⌘+Z":"Ctrl+Z",icon:"undo",disabled:function(e){return!e.command.enable("Undo")},execCommand:function(e){return e.command.execute("Undo")}},{name:"redo",title:Qt("重做"),hotkey:j.ua.macos?"⌘+Shift+Z":"Ctrl+Shift+Z",icon:"redo",disabled:function(e){return!e.command.enable("Redo")},execCommand:function(e){return e.command.execute("Redo")}},{type:"separator"},{name:"beginInsertRoot",title:Qt("插入主节点"),hotkey:(j.ua.macos,"Shift+Enter"),icon:"insert-root",disabled:function(e){return!e.command.enable("MindmapBeginInsertStem")},execCommand:function(e){return e.command.execute("MindmapBeginInsertStem")}},{name:"append",title:Qt("插入同级"),hotkey:"Enter",icon:"insert-sibling",disabled:function(e){return!e.command.enable("MindmapAppendSibling")},execCommand:function(e){return e.command.execute("MindmapAppendSibling")}},{name:"appendChild",title:Qt("插入子级"),hotkey:"Tab",icon:"insert-child",disabled:function(e){return!e.command.enable("MindmapAppendChild")},execCommand:function(e){return e.command.execute("MindmapAppendChild")}},{name:"insertLine",title:Qt("线条"),hotkey:j.ua.macos?"⌘+L":"Ctrl+L",type:"dropdown",mode:"button",defaultKey:"curve-arrow",data:[{key:"curve",icon:"line-curve"},{key:"curve-arrow",icon:"line-curve-arrow"}],execCommand:function(e,t){return Fm(e,t)}},{name:"insertNote",title:Qt("备注"),icon:"diagram-toolbar-note",disabled:function(e){return!e.command.enable("MindmapOpenNote")},execCommand:function(e){return e.command.execute("MindmapOpenNote")}},{name:"createLink",title:Qt("插入链接"),hotkey:j.ua.macos?"⌘+K":"Ctrl+K",icon:"link",disabled:function(e){return!e.command.enable("CreateLink")},execCommand:function(e){return e.command.execute("CreateLink")}},{name:"insertImage",title:Qt("插入图片"),type:"upload",icon:"image",accept:j.EXTS.IMAGE_EXT.map((function(e){return"."+e})).join(","),disabled:function(e){return!e.command.enable("MindmapAttachImage")&&!e.command.enable("MindmapInsertImage")},onChange:function(){}},{type:"separator"},{name:"collapseExpand",title:Qt("折叠"),hotkey:j.ua.macos?"⌘+/":"Ctrl+/",icon:"collapse-node",disabled:function(e){return!Tm(e)},active:function(e){return zm(e)},execCommand:function(e){return Im(e)}}],Xm=Object.freeze({__proto__:null,uploadImage:Mm,onBeforeSave:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(r){if(e.destroyed)r();else if(t.isCompleted())r();else{var a,i=Date.now();!n&&F.a.warning(Qt("图片上传中，请稍候")),Promise.resolve().then((function e(){t.isCompleted()||Date.now()-i>=72e4?(a&&clearTimeout(a),r()):a=setTimeout(e,6e3)}))}}))},processImageModel:Am,processExportData:Dm,exportData:function(e){var t=e.export();return Dm(t),t},tryTransferBlobUrl:Nm,importData:function(e){var t=e.diagram,n=e.data,r=e.uploader;if(n&&n.body&&t){if(t.import(n),r&&"edit"===t.interaction.currentMode){var a=[];return n.body.forEach((function(e){Ye(e,(function(e){a.push(Nm({model:e,diagram:t,uploader:r}))}))})),a}return[]}},map:Pm,addHashCdn:_m,getHashCdn:jm,generateHash:Sm,executeCollapseExpand:Im,enableCollapseExpand:Tm,collapseActive:zm,mindmapInsertLine:Fm,mindToolbarConfigs:Ym,uploadMindmapImage:function(e){var t=e.file,n=e.uploader,r=e.diagram,a=e.from;return new Promise((function(e){Mm({file:t,uploader:n,enable:function(){return r.command.enable("MindmapAttachImage")||r.command.enable("MindmapInsertImage")},callback:function(t){"clipboard"===a&&(t.firstInsertRatio=1/window.devicePixelRatio),0===r.selector.selections.length||"drop"===a?r.command.execute("MindmapInsertImage",{image:t}):1===r.selector.selections.length&&r.command.execute("MindmapAttachImage",{image:t}),e(t)}})}))}})},296:function(e,t,n){"use strict";var r={};(0,n(244).assign)(r,n(1577),n(1580),n(634)),e.exports=r},340:function(e,t,n){e.exports={type:n(1565)}},341:function(e,t){var n=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},r=-1;n.Diff=function(e,t){return[e,t]},n.prototype.diff_main=function(e,t,r,a){void 0===a&&(a=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var i=a;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[new n.Diff(0,e)]:[];void 0===r&&(r=!0);var o=r,c=this.diff_commonPrefix(e,t),l=e.substring(0,c);e=e.substring(c),t=t.substring(c),c=this.diff_commonSuffix(e,t);var s=e.substring(e.length-c);e=e.substring(0,e.length-c),t=t.substring(0,t.length-c);var u=this.diff_compute_(e,t,o,i);return l&&u.unshift(new n.Diff(0,l)),s&&u.push(new n.Diff(0,s)),this.diff_cleanupMerge(u),u},n.prototype.diff_compute_=function(e,t,a,i){var o;if(!e)return[new n.Diff(1,t)];if(!t)return[new n.Diff(r,e)];var c=e.length>t.length?e:t,l=e.length>t.length?t:e,s=c.indexOf(l);if(-1!=s)return o=[new n.Diff(1,c.substring(0,s)),new n.Diff(0,l),new n.Diff(1,c.substring(s+l.length))],e.length>t.length&&(o[0][0]=o[2][0]=r),o;if(1==l.length)return[new n.Diff(r,e),new n.Diff(1,t)];var u=this.diff_halfMatch_(e,t);if(u){var d=u[0],f=u[1],h=u[2],p=u[3],m=u[4],g=this.diff_main(d,h,a,i),y=this.diff_main(f,p,a,i);return g.concat([new n.Diff(0,m)],y)}return a&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,i):this.diff_bisect_(e,t,i)},n.prototype.diff_lineMode_=function(e,t,a){var i=this.diff_linesToChars_(e,t);e=i.chars1,t=i.chars2;var o=i.lineArray,c=this.diff_main(e,t,!1,a);this.diff_charsToLines_(c,o),this.diff_cleanupSemantic(c),c.push(new n.Diff(0,""));for(var l=0,s=0,u=0,d="",f="";l<c.length;){switch(c[l][0]){case 1:u++,f+=c[l][1];break;case r:s++,d+=c[l][1];break;case 0:if(s>=1&&u>=1){c.splice(l-s-u,s+u),l=l-s-u;for(var h=this.diff_main(d,f,!1,a),p=h.length-1;p>=0;p--)c.splice(l,0,h[p]);l+=h.length}u=0,s=0,d="",f=""}l++}return c.pop(),c},n.prototype.diff_bisect_=function(e,t,a){for(var i=e.length,o=t.length,c=Math.ceil((i+o)/2),l=c,s=2*c,u=new Array(s),d=new Array(s),f=0;f<s;f++)u[f]=-1,d[f]=-1;u[l+1]=0,d[l+1]=0;for(var h=i-o,p=h%2!=0,m=0,g=0,y=0,v=0,b=0;b<c&&!((new Date).getTime()>a);b++){for(var x=-b+m;x<=b-g;x+=2){for(var k=l+x,w=(_=x==-b||x!=b&&u[k-1]<u[k+1]?u[k+1]:u[k-1]+1)-x;_<i&&w<o&&e.charAt(_)==t.charAt(w);)_++,w++;if(u[k]=_,_>i)g+=2;else if(w>o)m+=2;else if(p){if((E=l+h-x)>=0&&E<s&&-1!=d[E])if(_>=(C=i-d[E]))return this.diff_bisectSplit_(e,t,_,w,a)}}for(var O=-b+y;O<=b-v;O+=2){for(var C,E=l+O,P=(C=O==-b||O!=b&&d[E-1]<d[E+1]?d[E+1]:d[E-1]+1)-O;C<i&&P<o&&e.charAt(i-C-1)==t.charAt(o-P-1);)C++,P++;if(d[E]=C,C>i)v+=2;else if(P>o)y+=2;else if(!p){if((k=l+h-O)>=0&&k<s&&-1!=u[k]){var _;w=l+(_=u[k])-k;if(_>=(C=i-C))return this.diff_bisectSplit_(e,t,_,w,a)}}}}return[new n.Diff(r,e),new n.Diff(1,t)]},n.prototype.diff_bisectSplit_=function(e,t,n,r,a){var i=e.substring(0,n),o=t.substring(0,r),c=e.substring(n),l=t.substring(r),s=this.diff_main(i,o,!1,a),u=this.diff_main(c,l,!1,a);return s.concat(u)},n.prototype.diff_linesToChars_=function(e,t){var n=[],r={};function a(e){for(var t="",a=0,o=-1,c=n.length;o<e.length-1;){-1==(o=e.indexOf("\n",a))&&(o=e.length-1);var l=e.substring(a,o+1);(r.hasOwnProperty?r.hasOwnProperty(l):void 0!==r[l])?t+=String.fromCharCode(r[l]):(c==i&&(l=e.substring(a),o=e.length),t+=String.fromCharCode(c),r[l]=c,n[c++]=l),a=o+1}return t}n[0]="";var i=4e4,o=a(e);return i=65535,{chars1:o,chars2:a(t),lineArray:n}},n.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var r=e[n][1],a=[],i=0;i<r.length;i++)a[i]=t[r.charCodeAt(i)];e[n][1]=a.join("")}},n.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),a=r,i=0;n<a;)e.substring(i,a)==t.substring(i,a)?i=n=a:r=a,a=Math.floor((r-n)/2+n);return a},n.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),a=r,i=0;n<a;)e.substring(e.length-a,e.length-i)==t.substring(t.length-a,t.length-i)?i=n=a:r=a,a=Math.floor((r-n)/2+n);return a},n.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(0==n||0==r)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));var a=Math.min(n,r);if(e==t)return a;for(var i=0,o=1;;){var c=e.substring(a-o),l=t.indexOf(c);if(-1==l)return i;o+=l,0!=l&&e.substring(a-o)!=t.substring(0,o)||(i=o,o++)}},n.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||2*r.length<n.length)return null;var a=this;function i(e,t,n){for(var r,i,o,c,l=e.substring(n,n+Math.floor(e.length/4)),s=-1,u="";-1!=(s=t.indexOf(l,s+1));){var d=a.diff_commonPrefix(e.substring(n),t.substring(s)),f=a.diff_commonSuffix(e.substring(0,n),t.substring(0,s));u.length<f+d&&(u=t.substring(s-f,s)+t.substring(s,s+d),r=e.substring(0,n-f),i=e.substring(n+d),o=t.substring(0,s-f),c=t.substring(s+d))}return 2*u.length>=e.length?[r,i,o,c,u]:null}var o,c,l,s,u,d=i(n,r,Math.ceil(n.length/4)),f=i(n,r,Math.ceil(n.length/2));return d||f?(o=f?d&&d[4].length>f[4].length?d:f:d,e.length>t.length?(c=o[0],l=o[1],s=o[2],u=o[3]):(s=o[0],u=o[1],c=o[2],l=o[3]),[c,l,s,u,o[4]]):null},n.prototype.diff_cleanupSemantic=function(e){for(var t=!1,a=[],i=0,o=null,c=0,l=0,s=0,u=0,d=0;c<e.length;)0==e[c][0]?(a[i++]=c,l=u,s=d,u=0,d=0,o=e[c][1]):(1==e[c][0]?u+=e[c][1].length:d+=e[c][1].length,o&&o.length<=Math.max(l,s)&&o.length<=Math.max(u,d)&&(e.splice(a[i-1],0,new n.Diff(r,o)),e[a[i-1]+1][0]=1,i--,c=--i>0?a[i-1]:-1,l=0,s=0,u=0,d=0,o=null,t=!0)),c++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),c=1;c<e.length;){if(e[c-1][0]==r&&1==e[c][0]){var f=e[c-1][1],h=e[c][1],p=this.diff_commonOverlap_(f,h),m=this.diff_commonOverlap_(h,f);p>=m?(p>=f.length/2||p>=h.length/2)&&(e.splice(c,0,new n.Diff(0,h.substring(0,p))),e[c-1][1]=f.substring(0,f.length-p),e[c+1][1]=h.substring(p),c++):(m>=f.length/2||m>=h.length/2)&&(e.splice(c,0,new n.Diff(0,f.substring(0,m))),e[c-1][0]=1,e[c-1][1]=h.substring(0,h.length-m),e[c+1][0]=r,e[c+1][1]=f.substring(m),c++),c++}c++}},n.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var r=e.charAt(e.length-1),a=t.charAt(0),i=r.match(n.nonAlphaNumericRegex_),o=a.match(n.nonAlphaNumericRegex_),c=i&&r.match(n.whitespaceRegex_),l=o&&a.match(n.whitespaceRegex_),s=c&&r.match(n.linebreakRegex_),u=l&&a.match(n.linebreakRegex_),d=s&&e.match(n.blanklineEndRegex_),f=u&&t.match(n.blanklineStartRegex_);return d||f?5:s||u?4:i&&!c&&l?3:c||l?2:i||o?1:0}for(var r=1;r<e.length-1;){if(0==e[r-1][0]&&0==e[r+1][0]){var a=e[r-1][1],i=e[r][1],o=e[r+1][1],c=this.diff_commonSuffix(a,i);if(c){var l=i.substring(i.length-c);a=a.substring(0,a.length-c),i=l+i.substring(0,i.length-c),o=l+o}for(var s=a,u=i,d=o,f=t(a,i)+t(i,o);i.charAt(0)===o.charAt(0);){a+=i.charAt(0),i=i.substring(1)+o.charAt(0),o=o.substring(1);var h=t(a,i)+t(i,o);h>=f&&(f=h,s=a,u=i,d=o)}e[r-1][1]!=s&&(s?e[r-1][1]=s:(e.splice(r-1,1),r--),e[r][1]=u,d?e[r+1][1]=d:(e.splice(r+1,1),r--))}r++}},n.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,n.whitespaceRegex_=/\s/,n.linebreakRegex_=/[\r\n]/,n.blanklineEndRegex_=/\n\r?\n$/,n.blanklineStartRegex_=/^\r?\n\r?\n/,n.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,a=[],i=0,o=null,c=0,l=!1,s=!1,u=!1,d=!1;c<e.length;)0==e[c][0]?(e[c][1].length<this.Diff_EditCost&&(u||d)?(a[i++]=c,l=u,s=d,o=e[c][1]):(i=0,o=null),u=d=!1):(e[c][0]==r?d=!0:u=!0,o&&(l&&s&&u&&d||o.length<this.Diff_EditCost/2&&l+s+u+d==3)&&(e.splice(a[i-1],0,new n.Diff(r,o)),e[a[i-1]+1][0]=1,i--,o=null,l&&s?(u=d=!0,i=0):(c=--i>0?a[i-1]:-1,u=d=!1),t=!0)),c++;t&&this.diff_cleanupMerge(e)},n.prototype.diff_cleanupMerge=function(e){e.push(new n.Diff(0,""));for(var t,a=0,i=0,o=0,c="",l="";a<e.length;)switch(e[a][0]){case 1:o++,l+=e[a][1],a++;break;case r:i++,c+=e[a][1],a++;break;case 0:i+o>1?(0!==i&&0!==o&&(0!==(t=this.diff_commonPrefix(l,c))&&(a-i-o>0&&0==e[a-i-o-1][0]?e[a-i-o-1][1]+=l.substring(0,t):(e.splice(0,0,new n.Diff(0,l.substring(0,t))),a++),l=l.substring(t),c=c.substring(t)),0!==(t=this.diff_commonSuffix(l,c))&&(e[a][1]=l.substring(l.length-t)+e[a][1],l=l.substring(0,l.length-t),c=c.substring(0,c.length-t))),a-=i+o,e.splice(a,i+o),c.length&&(e.splice(a,0,new n.Diff(r,c)),a++),l.length&&(e.splice(a,0,new n.Diff(1,l)),a++),a++):0!==a&&0==e[a-1][0]?(e[a-1][1]+=e[a][1],e.splice(a,1)):a++,o=0,i=0,c="",l=""}""===e[e.length-1][1]&&e.pop();var s=!1;for(a=1;a<e.length-1;)0==e[a-1][0]&&0==e[a+1][0]&&(e[a][1].substring(e[a][1].length-e[a-1][1].length)==e[a-1][1]?(e[a][1]=e[a-1][1]+e[a][1].substring(0,e[a][1].length-e[a-1][1].length),e[a+1][1]=e[a-1][1]+e[a+1][1],e.splice(a-1,1),s=!0):e[a][1].substring(0,e[a+1][1].length)==e[a+1][1]&&(e[a-1][1]+=e[a+1][1],e[a][1]=e[a][1].substring(e[a+1][1].length)+e[a+1][1],e.splice(a+1,1),s=!0)),a++;s&&this.diff_cleanupMerge(e)},n.prototype.diff_xIndex=function(e,t){var n,a=0,i=0,o=0,c=0;for(n=0;n<e.length&&(1!==e[n][0]&&(a+=e[n][1].length),e[n][0]!==r&&(i+=e[n][1].length),!(a>t));n++)o=a,c=i;return e.length!=n&&e[n][0]===r?c:c+(t-o)},n.prototype.diff_prettyHtml=function(e){for(var t=[],n=/&/g,a=/</g,i=/>/g,o=/\n/g,c=0;c<e.length;c++){var l=e[c][0],s=e[c][1].replace(n,"&amp;").replace(a,"&lt;").replace(i,"&gt;").replace(o,"&para;<br>");switch(l){case 1:t[c]='<ins style="background:#e6ffe6;">'+s+"</ins>";break;case r:t[c]='<del style="background:#ffe6e6;">'+s+"</del>";break;case 0:t[c]="<span>"+s+"</span>"}}return t.join("")},n.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},n.prototype.diff_text2=function(e){for(var t=[],n=0;n<e.length;n++)e[n][0]!==r&&(t[n]=e[n][1]);return t.join("")},n.prototype.diff_levenshtein=function(e){for(var t=0,n=0,a=0,i=0;i<e.length;i++){var o=e[i][0],c=e[i][1];switch(o){case 1:n+=c.length;break;case r:a+=c.length;break;case 0:t+=Math.max(n,a),n=0,a=0}}return t+=Math.max(n,a)},n.prototype.diff_toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case 1:t[n]="+"+encodeURI(e[n][1]);break;case r:t[n]="-"+e[n][1].length;break;case 0:t[n]="="+e[n][1].length}return t.join("\t").replace(/%20/g," ")},n.prototype.diff_fromDelta=function(e,t){for(var a=[],i=0,o=0,c=t.split(/\t/g),l=0;l<c.length;l++){var s=c[l].substring(1);switch(c[l].charAt(0)){case"+":try{a[i++]=new n.Diff(1,decodeURI(s))}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+s)}break;case"-":case"=":var u=parseInt(s,10);if(isNaN(u)||u<0)throw new Error("Invalid number in diff_fromDelta: "+s);var d=e.substring(o,o+=u);"="==c[l].charAt(0)?a[i++]=new n.Diff(0,d):a[i++]=new n.Diff(r,d);break;default:if(c[l])throw new Error("Invalid diff operation in diff_fromDelta: "+c[l])}}if(o!=e.length)throw new Error("Delta length ("+o+") does not equal source text length ("+e.length+").");return a},n.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},n.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(t),a=this;function i(e,r){var i=e/t.length,o=Math.abs(n-r);return a.Match_Distance?i+o/a.Match_Distance:o?1:i}var o=this.Match_Threshold,c=e.indexOf(t,n);-1!=c&&(o=Math.min(i(0,c),o),-1!=(c=e.lastIndexOf(t,n+t.length))&&(o=Math.min(i(0,c),o)));var l,s,u=1<<t.length-1;c=-1;for(var d,f=t.length+e.length,h=0;h<t.length;h++){for(l=0,s=f;l<s;)i(h,n+s)<=o?l=s:f=s,s=Math.floor((f-l)/2+l);f=s;var p=Math.max(1,n-s+1),m=Math.min(n+s,e.length)+t.length,g=Array(m+2);g[m+1]=(1<<h)-1;for(var y=m;y>=p;y--){var v=r[e.charAt(y-1)];if(g[y]=0===h?(g[y+1]<<1|1)&v:(g[y+1]<<1|1)&v|(d[y+1]|d[y])<<1|1|d[y+1],g[y]&u){var b=i(h,y-1);if(b<=o){if(o=b,!((c=y-1)>n))break;p=Math.max(1,2*n-c)}}}if(i(h+1,n)>o)break;d=g}return c},n.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},n.prototype.patch_addContext_=function(e,t){if(0!=t.length){if(null===e.start2)throw Error("patch not initialized");for(var r=t.substring(e.start2,e.start2+e.length1),a=0;t.indexOf(r)!=t.lastIndexOf(r)&&r.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)a+=this.Patch_Margin,r=t.substring(e.start2-a,e.start2+e.length1+a);a+=this.Patch_Margin;var i=t.substring(e.start2-a,e.start2);i&&e.diffs.unshift(new n.Diff(0,i));var o=t.substring(e.start2+e.length1,e.start2+e.length1+a);o&&e.diffs.push(new n.Diff(0,o)),e.start1-=i.length,e.start2-=i.length,e.length1+=i.length+o.length,e.length2+=i.length+o.length}},n.prototype.patch_make=function(e,t,a){var i,o;if("string"==typeof e&&"string"==typeof t&&void 0===a)i=e,(o=this.diff_main(i,t,!0)).length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(e&&"object"==typeof e&&void 0===t&&void 0===a)o=e,i=this.diff_text1(o);else if("string"==typeof e&&t&&"object"==typeof t&&void 0===a)i=e,o=t;else{if("string"!=typeof e||"string"!=typeof t||!a||"object"!=typeof a)throw new Error("Unknown call format to patch_make.");i=e,o=a}if(0===o.length)return[];for(var c=[],l=new n.patch_obj,s=0,u=0,d=0,f=i,h=i,p=0;p<o.length;p++){var m=o[p][0],g=o[p][1];switch(s||0===m||(l.start1=u,l.start2=d),m){case 1:l.diffs[s++]=o[p],l.length2+=g.length,h=h.substring(0,d)+g+h.substring(d);break;case r:l.length1+=g.length,l.diffs[s++]=o[p],h=h.substring(0,d)+h.substring(d+g.length);break;case 0:g.length<=2*this.Patch_Margin&&s&&o.length!=p+1?(l.diffs[s++]=o[p],l.length1+=g.length,l.length2+=g.length):g.length>=2*this.Patch_Margin&&s&&(this.patch_addContext_(l,f),c.push(l),l=new n.patch_obj,s=0,f=h,u=d)}1!==m&&(u+=g.length),m!==r&&(d+=g.length)}return s&&(this.patch_addContext_(l,f),c.push(l)),c},n.prototype.patch_deepCopy=function(e){for(var t=[],r=0;r<e.length;r++){var a=e[r],i=new n.patch_obj;i.diffs=[];for(var o=0;o<a.diffs.length;o++)i.diffs[o]=new n.Diff(a.diffs[o][0],a.diffs[o][1]);i.start1=a.start1,i.start2=a.start2,i.length1=a.length1,i.length2=a.length2,t[r]=i}return t},n.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);for(var a=0,i=[],o=0;o<e.length;o++){var c,l,s=e[o].start2+a,u=this.diff_text1(e[o].diffs),d=-1;if(u.length>this.Match_MaxBits?-1!=(c=this.match_main(t,u.substring(0,this.Match_MaxBits),s))&&(-1==(d=this.match_main(t,u.substring(u.length-this.Match_MaxBits),s+u.length-this.Match_MaxBits))||c>=d)&&(c=-1):c=this.match_main(t,u,s),-1==c)i[o]=!1,a-=e[o].length2-e[o].length1;else if(i[o]=!0,a=c-s,u==(l=-1==d?t.substring(c,c+u.length):t.substring(c,d+this.Match_MaxBits)))t=t.substring(0,c)+this.diff_text2(e[o].diffs)+t.substring(c+u.length);else{var f=this.diff_main(u,l,!1);if(u.length>this.Match_MaxBits&&this.diff_levenshtein(f)/u.length>this.Patch_DeleteThreshold)i[o]=!1;else{this.diff_cleanupSemanticLossless(f);for(var h,p=0,m=0;m<e[o].diffs.length;m++){var g=e[o].diffs[m];0!==g[0]&&(h=this.diff_xIndex(f,p)),1===g[0]?t=t.substring(0,c+h)+g[1]+t.substring(c+h):g[0]===r&&(t=t.substring(0,c+h)+t.substring(c+this.diff_xIndex(f,p+g[1].length))),g[0]!==r&&(p+=g[1].length)}}}}return[t=t.substring(n.length,t.length-n.length),i]},n.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,r="",a=1;a<=t;a++)r+=String.fromCharCode(a);for(a=0;a<e.length;a++)e[a].start1+=t,e[a].start2+=t;var i=e[0],o=i.diffs;if(0==o.length||0!=o[0][0])o.unshift(new n.Diff(0,r)),i.start1-=t,i.start2-=t,i.length1+=t,i.length2+=t;else if(t>o[0][1].length){var c=t-o[0][1].length;o[0][1]=r.substring(o[0][1].length)+o[0][1],i.start1-=c,i.start2-=c,i.length1+=c,i.length2+=c}if(0==(o=(i=e[e.length-1]).diffs).length||0!=o[o.length-1][0])o.push(new n.Diff(0,r)),i.length1+=t,i.length2+=t;else if(t>o[o.length-1][1].length){c=t-o[o.length-1][1].length;o[o.length-1][1]+=r.substring(0,c),i.length1+=c,i.length2+=c}return r},n.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,a=0;a<e.length;a++)if(!(e[a].length1<=t)){var i=e[a];e.splice(a--,1);for(var o=i.start1,c=i.start2,l="";0!==i.diffs.length;){var s=new n.patch_obj,u=!0;for(s.start1=o-l.length,s.start2=c-l.length,""!==l&&(s.length1=s.length2=l.length,s.diffs.push(new n.Diff(0,l)));0!==i.diffs.length&&s.length1<t-this.Patch_Margin;){var d=i.diffs[0][0],f=i.diffs[0][1];1===d?(s.length2+=f.length,c+=f.length,s.diffs.push(i.diffs.shift()),u=!1):d===r&&1==s.diffs.length&&0==s.diffs[0][0]&&f.length>2*t?(s.length1+=f.length,o+=f.length,u=!1,s.diffs.push(new n.Diff(d,f)),i.diffs.shift()):(f=f.substring(0,t-s.length1-this.Patch_Margin),s.length1+=f.length,o+=f.length,0===d?(s.length2+=f.length,c+=f.length):u=!1,s.diffs.push(new n.Diff(d,f)),f==i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(f.length))}l=(l=this.diff_text2(s.diffs)).substring(l.length-this.Patch_Margin);var h=this.diff_text1(i.diffs).substring(0,this.Patch_Margin);""!==h&&(s.length1+=h.length,s.length2+=h.length,0!==s.diffs.length&&0===s.diffs[s.diffs.length-1][0]?s.diffs[s.diffs.length-1][1]+=h:s.diffs.push(new n.Diff(0,h))),u||e.splice(++a,0,s)}}},n.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},n.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var a=e.split("\n"),i=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<a.length;){var c=a[i].match(o);if(!c)throw new Error("Invalid patch string: "+a[i]);var l=new n.patch_obj;for(t.push(l),l.start1=parseInt(c[1],10),""===c[2]?(l.start1--,l.length1=1):"0"==c[2]?l.length1=0:(l.start1--,l.length1=parseInt(c[2],10)),l.start2=parseInt(c[3],10),""===c[4]?(l.start2--,l.length2=1):"0"==c[4]?l.length2=0:(l.start2--,l.length2=parseInt(c[4],10)),i++;i<a.length;){var s=a[i].charAt(0);try{var u=decodeURI(a[i].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+u)}if("-"==s)l.diffs.push(new n.Diff(r,u));else if("+"==s)l.diffs.push(new n.Diff(1,u));else if(" "==s)l.diffs.push(new n.Diff(0,u));else{if("@"==s)break;if(""!==s)throw new Error('Invalid patch mode "'+s+'" in: '+u)}i++}}return t},(n.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:e="+";break;case r:e="-";break;case 0:e=" "}t[n+1]=e+encodeURI(this.diffs[n][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=n,e.exports.diff_match_patch=n,e.exports.DIFF_DELETE=r,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0},35:function(e,t,n){"use strict";n(1551);var r=n(256);n(151);t.a=r.a},393:function(e,t,n){},394:function(e,t,n){},483:function(e,t,n){"use strict";var r=/,?([a-z]),?/gi,a=parseFloat,i=Math,o=i.PI,c=i.min,l=i.max,s=i.pow,u=i.abs,d=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/gi,f=/(-?\d*\.?\d*(?:e[-+]?\\d+)?)[\s]*,?[\s]*/gi,h=Array.isArray||function(e){return e instanceof Array};function p(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function m(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)p(e,n)&&(t[n]=m(e[n]));return t}function g(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function y(e){var t=y.ps=y.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout((function(){for(var n in t)p(t,n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])})),t[e]}function v(e,t,n,r){return 1===arguments.length&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,height:r,x2:e+n,y2:t+r}}function b(){return this.join(",").replace(r,"$1")}function x(e){var t=m(e);return t.toString=b,t}function k(e,t,n,r,a,i,o,c,l){var u=1-l,d=s(u,3),f=s(u,2),h=l*l*l,p=d*t+3*f*l*r+3*u*l*l*i+h*c;return{x:_(d*e+3*f*l*n+3*u*l*l*a+h*o),y:_(p)}}function w(e){var t=D.apply(null,e);return v(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function O(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function C(e,t,n,r,a){return e*(e*(-3*t+9*n-9*r+3*a)+6*t-12*n+6*r)-3*t+3*n}function E(e,t,n,r,a,o,c,l,s){null==s&&(s=1);for(var u=(s=s>1?1:s<0?0:s)/2,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,p=0;p<12;p++){var m=u*d[p]+u,g=C(m,e,n,a,c),y=C(m,t,r,o,l),v=g*g+y*y;h+=f[p]*i.sqrt(v)}return u*h}function P(e,t,n,r,a,i,o,s){if(!(l(e,n)<c(a,o)||c(e,n)>l(a,o)||l(t,r)<c(i,s)||c(t,r)>l(i,s))){var u=(e*r-t*n)*(i-s)-(t-r)*(a*s-i*o),d=(e-n)*(i-s)-(t-r)*(a-o);if(d){var f=_(((e*r-t*n)*(a-o)-(e-n)*(a*s-i*o))/d),h=_(u/d),p=+f.toFixed(2),m=+h.toFixed(2);if(!(p<+c(e,n).toFixed(2)||p>+l(e,n).toFixed(2)||p<+c(a,o).toFixed(2)||p>+l(a,o).toFixed(2)||m<+c(t,r).toFixed(2)||m>+l(t,r).toFixed(2)||m<+c(i,s).toFixed(2)||m>+l(i,s).toFixed(2)))return{x:f,y:h}}}}function _(e){return Math.round(1e11*e)/1e11}function j(e,t,n){if(!function(e,t){return e=v(e),O(t=v(t),e.x,e.y)||O(t,e.x2,e.y)||O(t,e.x,e.y2)||O(t,e.x2,e.y2)||O(e,t.x,t.y)||O(e,t.x2,t.y)||O(e,t.x,t.y2)||O(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}(w(e),w(t)))return n?0:[];for(var r=E.apply(0,e),a=E.apply(0,t),i=R(e)?1:~~(r/5)||1,o=R(t)?1:~~(a/5)||1,c=[],l=[],s={},d=n?0:[],f=0;f<i+1;f++){var h=k.apply(0,e.concat(f/i));c.push({x:h.x,y:h.y,t:f/i})}for(f=0;f<o+1;f++)h=k.apply(0,t.concat(f/o)),l.push({x:h.x,y:h.y,t:f/o});for(f=0;f<i;f++)for(var p=0;p<o;p++){var m,g=c[f],y=c[f+1],b=l[p],x=l[p+1],C=u(y.x-g.x)<.01?"y":"x",_=u(x.x-b.x)<.01?"y":"x",j=P(g.x,g.y,y.x,y.y,b.x,b.y,x.x,x.y);if(j){if(s[m=j.x.toFixed(9)+"#"+j.y.toFixed(9)])continue;s[m]=!0;var S=g.t+u((j[C]-g[C])/(y[C]-g[C]))*(y.t-g.t),M=b.t+u((j[_]-b[_])/(x[_]-b[_]))*(x.t-b.t);S>=0&&S<=1&&M>=0&&M<=1&&(n?d++:d.push({x:j.x,y:j.y,t1:S,t2:M}))}}return d}function S(e){var t=y(e);if(t.abs)return x(t.abs);if(h(e)&&h(e&&e[0])||(e=function(e){if(!e)return null;var t=y(e);if(t.arr)return m(t.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=[];return h(e)&&h(e[0])&&(r=m(e)),r.length||String(e).replace(d,(function(e,t,a){var i=[],o=t.toLowerCase();for(a.replace(f,(function(e,t){t&&i.push(+t)})),"m"==o&&i.length>2&&(r.push([t].concat(i.splice(0,2))),o="l",t="m"==t?"l":"L");i.length>=n[o]&&(r.push([t].concat(i.splice(0,n[o]))),n[o]););})),r.toString=y.toString,t.arr=m(r),r}(e)),!e||!e.length)return[["M",0,0]];var n,r=[],a=0,i=0,o=0,c=0,l=0;"M"==e[0][0]&&(o=a=+e[0][1],c=i=+e[0][2],l++,r[0]=["M",a,i]);for(var s,u,p=l,g=e.length;p<g;p++){if(r.push(s=[]),(n=(u=e[p])[0])!=n.toUpperCase())switch(s[0]=n.toUpperCase(),s[0]){case"A":s[1]=u[1],s[2]=u[2],s[3]=u[3],s[4]=u[4],s[5]=u[5],s[6]=+u[6]+a,s[7]=+u[7]+i;break;case"V":s[1]=+u[1]+i;break;case"H":s[1]=+u[1]+a;break;case"M":o=+u[1]+a,c=+u[2]+i;default:for(var v=1,k=u.length;v<k;v++)s[v]=+u[v]+(v%2?a:i)}else for(var w=0,O=u.length;w<O;w++)s[w]=u[w];switch(n=n.toUpperCase(),s[0]){case"Z":a=+o,i=+c;break;case"H":a=s[1];break;case"V":i=s[1];break;case"M":o=s[s.length-2],c=s[s.length-1];default:a=s[s.length-2],i=s[s.length-1]}}return r.toString=b,t.abs=x(r),r}function R(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function M(e,t,n,r){return[e,t,n,r,n,r]}function B(e,t,n,r,a,i){var o=1/3,c=2/3;return[o*e+c*n,o*t+c*r,o*a+c*n,o*i+c*r,a,i]}function A(e,t,n,r,a,c,l,s,d,f){var h,m,y=120*o/180,v=o/180*(+a||0),b=[],x=(m=function(e,t,n){return{x:e*i.cos(n)-t*i.sin(n),y:e*i.sin(n)+t*i.cos(n)}},function e(){var t=Array.prototype.slice.call(arguments,0),n=t.join("␀"),r=e.cache=e.cache||{},a=e.count=e.count||[];return p(r,n)?(g(a,n),r[n]):(a.length>=1e3&&delete r[a.shift()],a.push(n),r[n]=m.apply(0,t),r[n])});if(f)S=f[0],R=f[1],_=f[2],j=f[3];else{e=(h=x(e,t,-v)).x,t=h.y;var k=(e-(s=(h=x(s,d,-v)).x))/2,w=(t-(d=h.y))/2,O=k*k/(n*n)+w*w/(r*r);O>1&&(n*=O=i.sqrt(O),r*=O);var C=n*n,E=r*r,P=(c==l?-1:1)*i.sqrt(u((C*E-C*w*w-E*k*k)/(C*w*w+E*k*k))),_=P*n*w/r+(e+s)/2,j=P*-r*k/n+(t+d)/2,S=i.asin(((t-j)/r).toFixed(9)),R=i.asin(((d-j)/r).toFixed(9));(S=e<_?o-S:S)<0&&(S=2*o+S),(R=s<_?o-R:R)<0&&(R=2*o+R),l&&S>R&&(S-=2*o),!l&&R>S&&(R-=2*o)}var M=R-S;if(u(M)>y){var B=R,D=s,N=d;R=S+y*(l&&R>S?1:-1),b=A(s=_+n*i.cos(R),d=j+r*i.sin(R),n,r,a,0,l,D,N,[R,B,_,j])}M=R-S;var L=i.cos(S),I=i.sin(S),T=i.cos(R),z=i.sin(R),F=i.tan(M/4),Y=4/3*n*F,X=4/3*r*F,q=[e,t],V=[e+Y*I,t-X*L],H=[s+Y*z,d-X*T],G=[s,d];if(V[0]=2*q[0]-V[0],V[1]=2*q[1]-V[1],f)return[V,H,G].concat(b);for(var Z=[],W=0,K=(b=[V,H,G].concat(b).join().split(",")).length;W<K;W++)Z[W]=W%2?x(b[W-1],b[W],v).y:x(b[W],b[W+1],v).x;return Z}function D(e,t,n,r,a,o,s,d){for(var f,h,p,m,g,y,v,b,x=[],k=[[],[]],w=0;w<2;++w)if(0==w?(h=6*e-12*n+6*a,f=-3*e+9*n-9*a+3*s,p=3*n-3*e):(h=6*t-12*r+6*o,f=-3*t+9*r-9*o+3*d,p=3*r-3*t),u(f)<1e-12){if(u(h)<1e-12)continue;0<(m=-p/h)&&m<1&&x.push(m)}else v=h*h-4*p*f,b=i.sqrt(v),v<0||(0<(g=(-h+b)/(2*f))&&g<1&&x.push(g),0<(y=(-h-b)/(2*f))&&y<1&&x.push(y));for(var O,C=x.length,E=C;C--;)O=1-(m=x[C]),k[0][C]=O*O*O*e+3*O*O*m*n+3*O*m*m*a+m*m*m*s,k[1][C]=O*O*O*t+3*O*O*m*r+3*O*m*m*o+m*m*m*d;return k[0][E]=e,k[1][E]=t,k[0][E+1]=s,k[1][E+1]=d,k[0].length=k[1].length=E+2,{x0:c.apply(0,k[0]),y0:c.apply(0,k[1]),x1:l.apply(0,k[0]),y1:l.apply(0,k[1])}}function N(e){var t=y(e);if(t.curve)return x(t.curve);for(var n=S(e),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},i=function(e,t,n){var r,a;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(A.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"==n||"S"==n?(r=2*t.x-t.bx,a=2*t.y-t.by):(r=t.x,a=t.y),e=["C",r,a].concat(e.slice(1));break;case"T":"Q"==n||"T"==n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(B(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(B(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(M(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(M(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(M(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(M(t.x,t.y,t.X,t.Y))}return e},o=function(e,t){if(e[t].length>7){e[t].shift();for(var r=e[t];r.length;)c[t]="A",e.splice(t++,0,["C"].concat(r.splice(0,6)));e.splice(t,1),d=n.length}},c=[],l="",s="",u=0,d=n.length;u<d;u++){n[u]&&(l=n[u][0]),"C"!=l&&(c[u]=l,u&&(s=c[u-1])),n[u]=i(n[u],r,s),"A"!=c[u]&&"C"==l&&(c[u]="C"),o(n,u);var f=n[u],h=f.length;r.x=f[h-2],r.y=f[h-1],r.bx=a(f[h-4])||r.x,r.by=a(f[h-3])||r.y}return t.curve=x(n),n}e.exports=function(e,t,n){e=N(e),t=N(t);for(var r,a,i,o,c,l,s,u,d,f,h=n?0:[],p=0,m=e.length;p<m;p++){var g=e[p];if("M"==g[0])r=c=g[1],a=l=g[2];else{"C"==g[0]?(d=[r,a].concat(g.slice(1)),r=d[6],a=d[7]):(d=[r,a,r,a,c,l,c,l],r=c,a=l);for(var y=0,v=t.length;y<v;y++){var b=t[y];if("M"==b[0])i=s=b[1],o=u=b[2];else{"C"==b[0]?(f=[i,o].concat(b.slice(1)),i=f[6],o=f[7]):(f=[i,o,i,o,s,u,s,u],i=s,o=u);var x=j(d,f,n);if(n)h+=x;else{for(var k=0,w=x.length;k<w;k++)x[k].segment1=p,x[k].segment2=y,x[k].bez1=d,x[k].bez2=f;h=h.concat(x)}}}}}return h}},499:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(807))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},500:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(809))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},507:function(e,t,n){var r=n(627),a=n(1567);for(var i in(t=e.exports=function(e,t){return new a(t).process(e)}).FilterCSS=a,r)t[i]=r[i];"undefined"!=typeof window&&(window.filterCSS=e.exports)},508:function(e,t){e.exports={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,a;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,a=e.length;r<a;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}}},509:function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},514:function(e,t,n){var r=n(353),a=n(352),i=n(270),o=n(354);e.exports=function(e){return r(e)||a(e)||i(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},515:function(e,t,n){"use strict";e.exports=n(1585)},616:function(e,t,n){},625:function(e,t){e.exports=function(e,t,n,r){var a=e.transformX=function(e,i){n(e),n(i);for(var o,c,l,s=[],u=0;u<i.length;u++){for(var d=i[u],f=[],h=0;h<e.length;){var p=[];if(o=e[h],l=p,t(f,o,c=d,"left"),t(l,c,o,"right"),h++,1!==p.length){if(0===p.length){for(var m=h;m<e.length;m++)r(f,e[m]);d=null;break}for(var g=a(e.slice(h),p),y=0;y<g[0].length;y++)r(f,g[0][y]);for(var v=0;v<g[1].length;v++)r(s,g[1][v]);d=null;break}d=p[0]}null!=d&&r(s,d),e=f}return[e,s]};e.transform=function(e,n,r){if("left"!==r&&"right"!==r)throw new Error("type must be 'left' or 'right'");return 0===n.length?e:1===e.length&&1===n.length?t([],e[0],n[0],r):"left"===r?a(e,n)[0]:a(n,e)[1]}}},626:function(e,t,n){var r=n(507).FilterCSS,a=n(507).getDefaultWhiteList,i=n(508);function o(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var c=new r;function l(e){return e.replace(s,"&lt;").replace(u,"&gt;")}var s=/</g,u=/>/g,d=/"/g,f=/&quot;/g,h=/&#([a-zA-Z0-9]*);?/gim,p=/&colon;?/gim,m=/&newline;?/gim,g=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,y=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,v=/u\s*r\s*l\s*\(.*/gi;function b(e){return e.replace(d,"&quot;")}function x(e){return e.replace(f,'"')}function k(e){return e.replace(h,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function w(e){return e.replace(p,":").replace(m," ")}function O(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return i.trim(t)}function C(e){return e=O(e=w(e=k(e=x(e))))}function E(e){return e=l(e=b(e))}t.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},t.getDefaultWhiteList=o,t.onTag=function(e,t,n){},t.onIgnoreTag=function(e,t,n){},t.onTagAttr=function(e,t,n){},t.onIgnoreTagAttr=function(e,t,n){},t.safeAttrValue=function(e,t,n,r){if(n=C(n),"href"===t||"src"===t){if("#"===(n=i.trim(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"data:image/"!==n.substr(0,11)&&"ftp://"!==n.substr(0,6)&&"./"!==n.substr(0,2)&&"../"!==n.substr(0,3)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===t){if(g.lastIndex=0,g.test(n))return""}else if("style"===t){if(y.lastIndex=0,y.test(n))return"";if(v.lastIndex=0,v.test(n)&&(g.lastIndex=0,g.test(n)))return"";!1!==r&&(n=(r=r||c).process(n))}return n=E(n)},t.escapeHtml=l,t.escapeQuote=b,t.unescapeQuote=x,t.escapeHtmlEntities=k,t.escapeDangerHtml5Entities=w,t.clearNonPrintableCharacter=O,t.friendlyAttrValue=C,t.escapeAttrValue=E,t.onIgnoreTagStripAll=function(){return""},t.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var n=!Array.isArray(e),r=[],a=!1;return{onIgnoreTag:function(o,c,l){if(function(t){return!!n||-1!==i.indexOf(e,t)}(o)){if(l.isClosing){var s="[/removed]",u=l.position+s.length;return r.push([!1!==a?a:l.position,u]),a=!1,s}return a||(a=l.position),"[removed]"}return t(o,c,l)},remove:function(e){var t="",n=0;return i.forEach(r,(function(r){t+=e.slice(n,r[0]),n=r[1]})),t+=e.slice(n)}}},t.stripCommentTag=function(e){for(var t="",n=0;n<e.length;){var r=e.indexOf("\x3c!--",n);if(-1===r){t+=e.slice(n);break}t+=e.slice(n,r);var a=e.indexOf("--\x3e",r);if(-1===a)break;n=a+3}return t},t.stripBlankChar=function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))}))).join("")},t.cssFilter=c,t.getDefaultCSSWhiteList=a},627:function(e,t){function n(){var e={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return e}var r=/javascript\s*\:/gim;t.whiteList=n(),t.getDefaultWhiteList=n,t.onAttr=function(e,t,n){},t.onIgnoreAttr=function(e,t,n){},t.safeAttrValue=function(e,t){return r.test(t)?"":t}},628:function(e,t){e.exports={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,a;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,a=e.length;r<a;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}}},629:function(e,t,n){var r=n(508);function a(e){var t=r.spaceIndex(e);if(-1===t)var n=e.slice(1,-1);else n=e.slice(1,t+1);return"/"===(n=r.trim(n).toLowerCase()).slice(0,1)&&(n=n.slice(1)),"/"===n.slice(-1)&&(n=n.slice(0,-1)),n}function i(e){return"</"===e.slice(0,2)}var o=/[^a-zA-Z0-9_:\.\-]/gim;function c(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"="===n?t:-1}}function l(e,t){for(;t>0;t--){var n=e[t];if(" "!==n)return"="===n?t:-1}}function s(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}t.parseTag=function(e,t,n){"use strict";var r="",o=0,c=!1,l=!1,s=0,u=e.length,d="",f="";e:for(s=0;s<u;s++){var h=e.charAt(s);if(!1===c){if("<"===h){c=s;continue}}else if(!1===l){if("<"===h){r+=n(e.slice(o,s)),c=s,o=s;continue}if(">"===h){r+=n(e.slice(o,c)),d=a(f=e.slice(c,s+1)),r+=t(c,r.length,d,f,i(f)),o=s+1,c=!1;continue}if('"'===h||"'"===h)for(var p=1,m=e.charAt(s-p);""===m.trim()||"="===m;){if("="===m){l=h;continue e}m=e.charAt(s-++p)}}else if(h===l){l=!1;continue}}return o<e.length&&(r+=n(e.substr(o))),r},t.parseAttr=function(e,t){"use strict";var n=0,a=[],i=!1,u=e.length;function d(e,n){if(!((e=(e=r.trim(e)).replace(o,"").toLowerCase()).length<1)){var i=t(e,n||"");i&&a.push(i)}}for(var f=0;f<u;f++){var h,p=e.charAt(f);if(!1!==i||"="!==p)if(!1===i||f!==n||'"'!==p&&"'"!==p||"="!==e.charAt(f-1))if(/\s|\n|\t/.test(p)){if(e=e.replace(/\s|\n|\t/g," "),!1===i){if(-1===(h=c(e,f))){d(r.trim(e.slice(n,f))),i=!1,n=f+1;continue}f=h-1;continue}if(-1===(h=l(e,f-1))){d(i,s(r.trim(e.slice(n,f)))),i=!1,n=f+1;continue}}else;else{if(-1===(h=e.indexOf(p,f+1)))break;d(i,r.trim(e.slice(n+1,h))),i=!1,n=(f=h)+1}else i=e.slice(n,f),n=f+1}return n<e.length&&(!1===i?d(e.slice(n)):d(i,s(r.trim(e.slice(n))))),r.trim(a.join(" "))}},630:function(e,t,n){"use strict";e.exports=function(e,t,n,r){for(var a=65535&e|0,i=e>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{i=i+(a=a+t[r++]|0)|0}while(--o);a%=65521,i%=65521}return a|i<<16|0}},631:function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,a){var i=r,o=a+n;e^=-1;for(var c=a;c<o;c++)e=e>>>8^i[255&(e^t[c])];return-1^e}},632:function(e,t,n){"use strict";var r=n(244),a=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(e){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){i=!1}for(var o=new r.Buf8(256),c=0;c<256;c++)o[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;function l(e,t){if(t<65534&&(e.subarray&&i||!e.subarray&&a))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",o=0;o<t;o++)n+=String.fromCharCode(e[o]);return n}o[254]=o[254]=1,t.string2buf=function(e){var t,n,a,i,o,c=e.length,l=0;for(i=0;i<c;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<c&&56320==(64512&(a=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(a-56320),i++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(l),o=0,i=0;o<l;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<c&&56320==(64512&(a=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(a-56320),i++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},t.buf2binstring=function(e){return l(e,e.length)},t.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,a=t.length;n<a;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,r,a,i,c=t||e.length,s=new Array(2*c);for(r=0,n=0;n<c;)if((a=e[n++])<128)s[r++]=a;else if((i=o[a])>4)s[r++]=65533,n+=i-1;else{for(a&=2===i?31:3===i?15:7;i>1&&n<c;)a=a<<6|63&e[n++],i--;i>1?s[r++]=65533:a<65536?s[r++]=a:(a-=65536,s[r++]=55296|a>>10&1023,s[r++]=56320|1023&a)}return l(s,r)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+o[e[n]]>t?n:t}},633:function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},634:function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},635:function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;this.queue=[],this.cache=null}r.prototype.matrix=function(e){return 1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&0===e[4]&&0===e[5]||(this.cache=null,this.queue.push(e)),this},r.prototype.translate=function(e,t){return 0===e&&0===t||(this.cache=null,this.queue.push([1,0,0,1,e,t])),this},r.prototype.scale=function(e,t){return 1===e&&1===t||(this.cache=null,this.queue.push([e,0,0,t,0,0])),this},r.prototype.rotate=function(e,t,n){var r,a,i;return 0!==e&&(this.translate(t,n),r=e*Math.PI/180,a=Math.cos(r),i=Math.sin(r),this.queue.push([a,i,-i,a,0,0]),this.cache=null,this.translate(-t,-n)),this},r.prototype.skewX=function(e){return 0!==e&&(this.cache=null,this.queue.push([1,0,Math.tan(e*Math.PI/180),1,0,0])),this},r.prototype.skewY=function(e){return 0!==e&&(this.cache=null,this.queue.push([1,Math.tan(e*Math.PI/180),0,1,0,0])),this},r.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],1===this.queue.length)return this.cache;for(var e=1;e<this.queue.length;e++)this.cache=(t=this.cache,n=this.queue[e],[t[0]*n[0]+t[2]*n[1],t[1]*n[0]+t[3]*n[1],t[0]*n[2]+t[2]*n[3],t[1]*n[2]+t[3]*n[3],t[0]*n[4]+t[2]*n[5]+t[4],t[1]*n[4]+t[3]*n[5]+t[5]]);var t,n;return this.cache},r.prototype.calc=function(e,t,n){var r;return this.queue.length?(this.cache||(this.cache=this.toArray()),[e*(r=this.cache)[0]+t*r[2]+(n?0:r[4]),e*r[1]+t*r[3]+(n?0:r[5])]):[e,t]},e.exports=r},645:function(e,t,n){var r=n(626),a=n(629),i=n(1569);function o(e,t){return new i(t).process(e)}for(var c in(t=e.exports=o).filterXSS=o,t.FilterXSS=i,r)t[c]=r[c];for(var c in a)t[c]=a[c];"undefined"!=typeof window&&(window.filterXSS=e.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)},66:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i}));var r={};n.r(r),n.d(r,"create",(function(){return s})),n.d(r,"fromMat4",(function(){return u})),n.d(r,"clone",(function(){return d})),n.d(r,"copy",(function(){return f})),n.d(r,"fromValues",(function(){return h})),n.d(r,"set",(function(){return p})),n.d(r,"identity",(function(){return m})),n.d(r,"transpose",(function(){return g})),n.d(r,"invert",(function(){return y})),n.d(r,"adjoint",(function(){return v})),n.d(r,"determinant",(function(){return b})),n.d(r,"multiply",(function(){return x})),n.d(r,"translate",(function(){return k})),n.d(r,"rotate",(function(){return w})),n.d(r,"scale",(function(){return O})),n.d(r,"fromTranslation",(function(){return C})),n.d(r,"fromRotation",(function(){return E})),n.d(r,"fromScaling",(function(){return P})),n.d(r,"fromMat2d",(function(){return _})),n.d(r,"fromQuat",(function(){return j})),n.d(r,"normalFromMat4",(function(){return S})),n.d(r,"projection",(function(){return R})),n.d(r,"str",(function(){return M})),n.d(r,"frob",(function(){return B})),n.d(r,"add",(function(){return A})),n.d(r,"subtract",(function(){return D})),n.d(r,"multiplyScalar",(function(){return N})),n.d(r,"multiplyScalarAndAdd",(function(){return L})),n.d(r,"exactEquals",(function(){return I})),n.d(r,"equals",(function(){return T})),n.d(r,"mul",(function(){return z})),n.d(r,"sub",(function(){return F}));var a={};n.r(a),n.d(a,"create",(function(){return Y})),n.d(a,"clone",(function(){return X})),n.d(a,"fromValues",(function(){return q})),n.d(a,"copy",(function(){return V})),n.d(a,"set",(function(){return H})),n.d(a,"add",(function(){return G})),n.d(a,"subtract",(function(){return Z})),n.d(a,"multiply",(function(){return W})),n.d(a,"divide",(function(){return K})),n.d(a,"ceil",(function(){return U})),n.d(a,"floor",(function(){return Q})),n.d(a,"min",(function(){return J})),n.d(a,"max",(function(){return $})),n.d(a,"round",(function(){return ee})),n.d(a,"scale",(function(){return te})),n.d(a,"scaleAndAdd",(function(){return ne})),n.d(a,"distance",(function(){return re})),n.d(a,"squaredDistance",(function(){return ae})),n.d(a,"length",(function(){return ie})),n.d(a,"squaredLength",(function(){return oe})),n.d(a,"negate",(function(){return ce})),n.d(a,"inverse",(function(){return le})),n.d(a,"normalize",(function(){return se})),n.d(a,"dot",(function(){return ue})),n.d(a,"cross",(function(){return de})),n.d(a,"lerp",(function(){return fe})),n.d(a,"random",(function(){return he})),n.d(a,"transformMat2",(function(){return pe})),n.d(a,"transformMat2d",(function(){return me})),n.d(a,"transformMat3",(function(){return ge})),n.d(a,"transformMat4",(function(){return ye})),n.d(a,"rotate",(function(){return ve})),n.d(a,"angle",(function(){return be})),n.d(a,"zero",(function(){return xe})),n.d(a,"str",(function(){return ke})),n.d(a,"exactEquals",(function(){return we})),n.d(a,"equals",(function(){return Oe})),n.d(a,"len",(function(){return Ee})),n.d(a,"sub",(function(){return Pe})),n.d(a,"mul",(function(){return _e})),n.d(a,"div",(function(){return je})),n.d(a,"dist",(function(){return Se})),n.d(a,"sqrDist",(function(){return Re})),n.d(a,"sqrLen",(function(){return Me})),n.d(a,"forEach",(function(){return Be}));var i={};n.r(i),n.d(i,"create",(function(){return Ae})),n.d(i,"clone",(function(){return De})),n.d(i,"length",(function(){return Ne})),n.d(i,"fromValues",(function(){return Le})),n.d(i,"copy",(function(){return Ie})),n.d(i,"set",(function(){return Te})),n.d(i,"add",(function(){return ze})),n.d(i,"subtract",(function(){return Fe})),n.d(i,"multiply",(function(){return Ye})),n.d(i,"divide",(function(){return Xe})),n.d(i,"ceil",(function(){return qe})),n.d(i,"floor",(function(){return Ve})),n.d(i,"min",(function(){return He})),n.d(i,"max",(function(){return Ge})),n.d(i,"round",(function(){return Ze})),n.d(i,"scale",(function(){return We})),n.d(i,"scaleAndAdd",(function(){return Ke})),n.d(i,"distance",(function(){return Ue})),n.d(i,"squaredDistance",(function(){return Qe})),n.d(i,"squaredLength",(function(){return Je})),n.d(i,"negate",(function(){return $e})),n.d(i,"inverse",(function(){return et})),n.d(i,"normalize",(function(){return tt})),n.d(i,"dot",(function(){return nt})),n.d(i,"cross",(function(){return rt})),n.d(i,"lerp",(function(){return at})),n.d(i,"hermite",(function(){return it})),n.d(i,"bezier",(function(){return ot})),n.d(i,"random",(function(){return ct})),n.d(i,"transformMat4",(function(){return lt})),n.d(i,"transformMat3",(function(){return st})),n.d(i,"transformQuat",(function(){return ut})),n.d(i,"rotateX",(function(){return dt})),n.d(i,"rotateY",(function(){return ft})),n.d(i,"rotateZ",(function(){return ht})),n.d(i,"angle",(function(){return pt})),n.d(i,"zero",(function(){return mt})),n.d(i,"str",(function(){return gt})),n.d(i,"exactEquals",(function(){return yt})),n.d(i,"equals",(function(){return vt})),n.d(i,"sub",(function(){return bt})),n.d(i,"mul",(function(){return xt})),n.d(i,"div",(function(){return kt})),n.d(i,"dist",(function(){return wt})),n.d(i,"sqrDist",(function(){return Ot})),n.d(i,"len",(function(){return Ct})),n.d(i,"sqrLen",(function(){return Et})),n.d(i,"forEach",(function(){return Pt}));var o=1e-6,c="undefined"!=typeof Float32Array?Float32Array:Array,l=Math.random;Math.PI;function s(){var e=new c(9);return c!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function u(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function d(e){var t=new c(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function f(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function h(e,t,n,r,a,i,o,l,s){var u=new c(9);return u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=a,u[5]=i,u[6]=o,u[7]=l,u[8]=s,u}function p(e,t,n,r,a,i,o,c,l,s){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e[4]=i,e[5]=o,e[6]=c,e[7]=l,e[8]=s,e}function m(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function g(e,t){if(e===t){var n=t[1],r=t[2],a=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=a}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function y(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],c=t[5],l=t[6],s=t[7],u=t[8],d=u*o-c*s,f=-u*i+c*l,h=s*i-o*l,p=n*d+r*f+a*h;return p?(p=1/p,e[0]=d*p,e[1]=(-u*r+a*s)*p,e[2]=(c*r-a*o)*p,e[3]=f*p,e[4]=(u*n-a*l)*p,e[5]=(-c*n+a*i)*p,e[6]=h*p,e[7]=(-s*n+r*l)*p,e[8]=(o*n-r*i)*p,e):null}function v(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],c=t[5],l=t[6],s=t[7],u=t[8];return e[0]=o*u-c*s,e[1]=a*s-r*u,e[2]=r*c-a*o,e[3]=c*l-i*u,e[4]=n*u-a*l,e[5]=a*i-n*c,e[6]=i*s-o*l,e[7]=r*l-n*s,e[8]=n*o-r*i,e}function b(e){var t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],c=e[6],l=e[7],s=e[8];return t*(s*i-o*l)+n*(-s*a+o*c)+r*(l*a-i*c)}function x(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],c=t[4],l=t[5],s=t[6],u=t[7],d=t[8],f=n[0],h=n[1],p=n[2],m=n[3],g=n[4],y=n[5],v=n[6],b=n[7],x=n[8];return e[0]=f*r+h*o+p*s,e[1]=f*a+h*c+p*u,e[2]=f*i+h*l+p*d,e[3]=m*r+g*o+y*s,e[4]=m*a+g*c+y*u,e[5]=m*i+g*l+y*d,e[6]=v*r+b*o+x*s,e[7]=v*a+b*c+x*u,e[8]=v*i+b*l+x*d,e}function k(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],c=t[4],l=t[5],s=t[6],u=t[7],d=t[8],f=n[0],h=n[1];return e[0]=r,e[1]=a,e[2]=i,e[3]=o,e[4]=c,e[5]=l,e[6]=f*r+h*o+s,e[7]=f*a+h*c+u,e[8]=f*i+h*l+d,e}function w(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],c=t[4],l=t[5],s=t[6],u=t[7],d=t[8],f=Math.sin(n),h=Math.cos(n);return e[0]=h*r+f*o,e[1]=h*a+f*c,e[2]=h*i+f*l,e[3]=h*o-f*r,e[4]=h*c-f*a,e[5]=h*l-f*i,e[6]=s,e[7]=u,e[8]=d,e}function O(e,t,n){var r=n[0],a=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function C(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function E(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function P(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function _(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function j(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=n+n,c=r+r,l=a+a,s=n*o,u=r*o,d=r*c,f=a*o,h=a*c,p=a*l,m=i*o,g=i*c,y=i*l;return e[0]=1-d-p,e[3]=u-y,e[6]=f+g,e[1]=u+y,e[4]=1-s-p,e[7]=h-m,e[2]=f-g,e[5]=h+m,e[8]=1-s-d,e}function S(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],c=t[5],l=t[6],s=t[7],u=t[8],d=t[9],f=t[10],h=t[11],p=t[12],m=t[13],g=t[14],y=t[15],v=n*c-r*o,b=n*l-a*o,x=n*s-i*o,k=r*l-a*c,w=r*s-i*c,O=a*s-i*l,C=u*m-d*p,E=u*g-f*p,P=u*y-h*p,_=d*g-f*m,j=d*y-h*m,S=f*y-h*g,R=v*S-b*j+x*_+k*P-w*E+O*C;return R?(R=1/R,e[0]=(c*S-l*j+s*_)*R,e[1]=(l*P-o*S-s*E)*R,e[2]=(o*j-c*P+s*C)*R,e[3]=(a*j-r*S-i*_)*R,e[4]=(n*S-a*P+i*E)*R,e[5]=(r*P-n*j-i*C)*R,e[6]=(m*O-g*w+y*k)*R,e[7]=(g*x-p*O-y*b)*R,e[8]=(p*w-m*x+y*v)*R,e):null}function R(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function M(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function B(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function A(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function D(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function N(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function L(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function I(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function T(e,t){var n=e[0],r=e[1],a=e[2],i=e[3],c=e[4],l=e[5],s=e[6],u=e[7],d=e[8],f=t[0],h=t[1],p=t[2],m=t[3],g=t[4],y=t[5],v=t[6],b=t[7],x=t[8];return Math.abs(n-f)<=o*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-h)<=o*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(a-p)<=o*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(i-m)<=o*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(c-g)<=o*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(l-y)<=o*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(s-v)<=o*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-b)<=o*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(d-x)<=o*Math.max(1,Math.abs(d),Math.abs(x))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var z=x,F=D;function Y(){var e=new c(2);return c!=Float32Array&&(e[0]=0,e[1]=0),e}function X(e){var t=new c(2);return t[0]=e[0],t[1]=e[1],t}function q(e,t){var n=new c(2);return n[0]=e,n[1]=t,n}function V(e,t){return e[0]=t[0],e[1]=t[1],e}function H(e,t,n){return e[0]=t,e[1]=n,e}function G(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function Z(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function W(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function K(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function U(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function Q(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function J(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function $(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function ee(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function te(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function ne(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function re(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.hypot(n,r)}function ae(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function ie(e){var t=e[0],n=e[1];return Math.hypot(t,n)}function oe(e){var t=e[0],n=e[1];return t*t+n*n}function ce(e,t){return e[0]=-t[0],e[1]=-t[1],e}function le(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function se(e,t){var n=t[0],r=t[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e}function ue(e,t){return e[0]*t[0]+e[1]*t[1]}function de(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}function fe(e,t,n,r){var a=t[0],i=t[1];return e[0]=a+r*(n[0]-a),e[1]=i+r*(n[1]-i),e}function he(e,t){t=t||1;var n=2*l()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}function pe(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[2]*a,e[1]=n[1]*r+n[3]*a,e}function me(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[2]*a+n[4],e[1]=n[1]*r+n[3]*a+n[5],e}function ge(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[3]*a+n[6],e[1]=n[1]*r+n[4]*a+n[7],e}function ye(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[4]*a+n[12],e[1]=n[1]*r+n[5]*a+n[13],e}function ve(e,t,n,r){var a=t[0]-n[0],i=t[1]-n[1],o=Math.sin(r),c=Math.cos(r);return e[0]=a*c-i*o+n[0],e[1]=a*o+i*c+n[1],e}function be(e,t){var n=e[0],r=e[1],a=t[0],i=t[1],o=Math.sqrt(n*n+r*r)*Math.sqrt(a*a+i*i),c=o&&(n*a+r*i)/o;return Math.acos(Math.min(Math.max(c,-1),1))}function xe(e){return e[0]=0,e[1]=0,e}function ke(e){return"vec2("+e[0]+", "+e[1]+")"}function we(e,t){return e[0]===t[0]&&e[1]===t[1]}function Oe(e,t){var n=e[0],r=e[1],a=t[0],i=t[1];return Math.abs(n-a)<=o*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-i)<=o*Math.max(1,Math.abs(r),Math.abs(i))}var Ce,Ee=ie,Pe=Z,_e=W,je=K,Se=re,Re=ae,Me=oe,Be=(Ce=Y(),function(e,t,n,r,a,i){var o,c;for(t||(t=2),n||(n=0),c=r?Math.min(r*t+n,e.length):e.length,o=n;o<c;o+=t)Ce[0]=e[o],Ce[1]=e[o+1],a(Ce,Ce,i),e[o]=Ce[0],e[o+1]=Ce[1];return e});function Ae(){var e=new c(3);return c!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function De(e){var t=new c(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ne(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function Le(e,t,n){var r=new c(3);return r[0]=e,r[1]=t,r[2]=n,r}function Ie(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Te(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function ze(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Fe(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Ye(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function Xe(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function qe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Ve(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function He(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function Ge(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function Ze(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function We(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Ke(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function Ue(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return Math.hypot(n,r,a)}function Qe(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return n*n+r*r+a*a}function Je(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function $e(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function et(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function tt(e,t){var n=t[0],r=t[1],a=t[2],i=n*n+r*r+a*a;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function nt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function rt(e,t,n){var r=t[0],a=t[1],i=t[2],o=n[0],c=n[1],l=n[2];return e[0]=a*l-i*c,e[1]=i*o-r*l,e[2]=r*c-a*o,e}function at(e,t,n,r){var a=t[0],i=t[1],o=t[2];return e[0]=a+r*(n[0]-a),e[1]=i+r*(n[1]-i),e[2]=o+r*(n[2]-o),e}function it(e,t,n,r,a,i){var o=i*i,c=o*(2*i-3)+1,l=o*(i-2)+i,s=o*(i-1),u=o*(3-2*i);return e[0]=t[0]*c+n[0]*l+r[0]*s+a[0]*u,e[1]=t[1]*c+n[1]*l+r[1]*s+a[1]*u,e[2]=t[2]*c+n[2]*l+r[2]*s+a[2]*u,e}function ot(e,t,n,r,a,i){var o=1-i,c=o*o,l=i*i,s=c*o,u=3*i*c,d=3*l*o,f=l*i;return e[0]=t[0]*s+n[0]*u+r[0]*d+a[0]*f,e[1]=t[1]*s+n[1]*u+r[1]*d+a[1]*f,e[2]=t[2]*s+n[2]*u+r[2]*d+a[2]*f,e}function ct(e,t){t=t||1;var n=2*l()*Math.PI,r=2*l()-1,a=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=r*t,e}function lt(e,t,n){var r=t[0],a=t[1],i=t[2],o=n[3]*r+n[7]*a+n[11]*i+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*a+n[8]*i+n[12])/o,e[1]=(n[1]*r+n[5]*a+n[9]*i+n[13])/o,e[2]=(n[2]*r+n[6]*a+n[10]*i+n[14])/o,e}function st(e,t,n){var r=t[0],a=t[1],i=t[2];return e[0]=r*n[0]+a*n[3]+i*n[6],e[1]=r*n[1]+a*n[4]+i*n[7],e[2]=r*n[2]+a*n[5]+i*n[8],e}function ut(e,t,n){var r=n[0],a=n[1],i=n[2],o=n[3],c=t[0],l=t[1],s=t[2],u=a*s-i*l,d=i*c-r*s,f=r*l-a*c,h=a*f-i*d,p=i*u-r*f,m=r*d-a*u,g=2*o;return u*=g,d*=g,f*=g,h*=2,p*=2,m*=2,e[0]=c+u+h,e[1]=l+d+p,e[2]=s+f+m,e}function dt(e,t,n,r){var a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[0],i[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),i[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function ft(e,t,n,r){var a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),i[1]=a[1],i[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function ht(e,t,n,r){var a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),i[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),i[2]=a[2],e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function pt(e,t){var n=e[0],r=e[1],a=e[2],i=t[0],o=t[1],c=t[2],l=Math.sqrt(n*n+r*r+a*a)*Math.sqrt(i*i+o*o+c*c),s=l&&nt(e,t)/l;return Math.acos(Math.min(Math.max(s,-1),1))}function mt(e){return e[0]=0,e[1]=0,e[2]=0,e}function gt(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function yt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function vt(e,t){var n=e[0],r=e[1],a=e[2],i=t[0],c=t[1],l=t[2];return Math.abs(n-i)<=o*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-c)<=o*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(a-l)<=o*Math.max(1,Math.abs(a),Math.abs(l))}var bt=Fe,xt=Ye,kt=Xe,wt=Ue,Ot=Qe,Ct=Ne,Et=Je,Pt=function(){var e=Ae();return function(t,n,r,a,i,o){var c,l;for(n||(n=3),r||(r=0),l=a?Math.min(a*n+r,t.length):t.length,c=r;c<l;c+=n)e[0]=t[c],e[1]=t[c+1],e[2]=t[c+2],i(e,e,o),t[c]=e[0],t[c+1]=e[1],t[c+2]=e[2];return t}}()},807:function(e,t,n){"use strict";var r=n(152),a=n(111);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(128)),o=r(n(0)),c=a(n(808)),l=a(n(218)),s=function(e,t){return o.createElement(l.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:c.default}))};s.displayName="CheckOutlined";var u=o.forwardRef(s);t.default=u},808:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"}},809:function(e,t,n){"use strict";var r=n(152),a=n(111);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(128)),o=r(n(0)),c=a(n(810)),l=a(n(218)),s=function(e,t){return o.createElement(l.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:c.default}))};s.displayName="DownOutlined";var u=o.forwardRef(s);t.default=u},810:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"}},834:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},937:function(e,t,n){"use strict";n(1730);var r=n(624);n(616);t.a=r.a}}]);