/*! For license information please see p__doc__routers.d7aa6f57.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[94,6,7,8,9,11,12,13,39,281],{1e3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,a.default)(e),e.replace(new RegExp("[".concat(t,"]+"),"g"),"")};var r,a=(r=n(60))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},1001:function(e,t,n){"use strict";n(126);var r=n(55),a=(n(136),n(36)),o=(n(101),n(26)),i=(n(392),n(253)),c=(n(57),n(23)),l=n(0),s=n.n(l),u=n(1),d=n.n(u),f=n(8),p=n.n(f),h=n(395),m={fileTypeSelector:"index-module_fileTypeSelector_73BHW",item:"index-module_item_H3xgY",fileType:"index-module_fileType_l65Jm",fileTypeIcon:"index-module_fileTypeIcon_eSmiM",fileTypeMeta:"index-module_fileTypeMeta_4eYr8",fileTypeName:"index-module_fileTypeName_9B0Rn",fileTypeExt:"index-module_fileTypeExt_wTTFB",fileTypeReady:"index-module_fileTypeReady_TAUvL",fadein:"index-module_fadein_-4JC+",flash:"index-module_flash_-CNBG"};function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var a=x(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(){return E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}function C(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function O(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var P=function(e){var t,n,r,a,o,u=e.fileOption,d=e.getParamsOption,f=e.book,p=e.importType,m=e.onBeforeUpload,g=e.onUploadChange,v=e.customRequest,y=e.maxCount,b=S(Object(l.useState)([]),2),k=b[0],w=b[1],x=function(e){var t=O(e.fileList);w(t),g(e)},_=function(){var e,n=(e=regeneratorRuntime.mark((function e(n,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(y&&r.length>y)){e.next=4;break}throw a="一次最多上传 ".concat(y," 个文件。"),t||(c.a.warn(__(a)),t=!0),new Error(a);case 4:if(!m){e.next=7;break}return e.next=7,m();case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){C(o,r,a,i,c,"next",e)}function c(e){C(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e,t){return n.apply(this,arguments)}}();return s.a.createElement(i.a,E({},(n=u.extensions.join(", "),r="/api/import?ctoken=".concat(Object(h.a)(window)),a={book_id:f.id,type:u.key,import_type:p},o={name:"file",action:r,data:function(){if(d){var e=d();e&&(a.options=JSON.stringify(e))}return a},showUploadList:!1,dataType:"json",multiple:!0,supportServerRender:!1,accept:n,withCredentials:!0,beforeUpload:_,onChange:x},"function"==typeof v&&(o.customRequest=v),o),{fileList:k,key:u.key}),e.children)};P.defaultProps={maxCount:10};var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&y(e,t)}(l,e);var t,n,i,c=b(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),_(w(t=c.call(this,e)),"handleSelect",(function(e){t.setState({selected:e}),t.props.onSelect(e)})),t.state={selected:null},"export"===e.mode&&e.types.forEach((function(e){e.extensions.length=1})),t}return t=l,(n=[{key:"renderItem",value:function(e){var t,n=this,r="ready"===e.status,a=this.props.mode,i=s.a.createElement("div",{className:p()((t={},_(t,m.fileType,!0),_(t,m.fileTypeReady,r),_(t,m.fileTypeSelected,this.state.selected===e.key),t)),onClick:function(){n.handleSelect(e.key)},"data-aspm-click":"c34618.d69452","data-aspm-param":"file_type=".concat(e.key,"^action_mode=").concat(a),"data-testid":"fileTypeSelectorItem-".concat(e.key)},s.a.createElement("div",{className:m.fileTypeIcon},s.a.createElement("img",{src:e.icon,className:""})),s.a.createElement("div",{className:m.fileTypeMeta},s.a.createElement("div",{className:m.fileTypeName},e.name),s.a.createElement("div",{className:m.fileTypeExt},e.extensions.join(" "))));return r?s.a.createElement(o.a,{title:__("即将支持，敬请期待。")},i):"confluence"===e.key?s.a.createElement(o.a,{title:__("将 cf 导出的文件加上 .zip 后缀再导入")},i):"zip"===e.key?s.a.createElement(o.a,{title:__("将文件使用 zip 压缩后再导入")},i):i}},{key:"render",value:function(){var e=this,t=this.props.types;return s.a.createElement("div",{className:m.fileTypeSelector},s.a.createElement(r.a,{gutter:6},t.map((function(t){return s.a.createElement(a.a,{key:t.key,className:m.item},"import"!==e.props.mode||t.status||e.props.disableUpload(t)?e.renderItem(t):s.a.createElement(P,E({},e.props,{fileOption:t}),e.renderItem(t)))}))))}}])&&v(t.prototype,n),i&&v(t,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(l.PureComponent);A.defaultProps={onSelect:function(){},onBeforeUpload:function(){},onUploadChange:function(){},disableUpload:function(){return!1}},A.propTypes={types:d.a.array.isRequired,mode:d.a.oneOf(["import","export"]),importType:d.a.string,maxCount:d.a.number,getParamsOption:d.a.func,book:d.a.object,disableUpload:d.a.func,onSelect:d.a.func,onBeforeUpload:d.a.func,customRequest:d.a.func,onUploadChange:d.a.func},A.FileUpload=P;t.a=A},1002:function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},1003:function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function a(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function o(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var n,a,i=[];for(a in"string"!=typeof t&&(t="?"),e)if(r.call(e,a)){if((n=e[a])||null!=n&&!isNaN(n)||(n=""),a=o(a),n=o(n),null===a||null===n)continue;i.push(a+"="+n)}return i.length?t+i.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,r={};t=n.exec(e);){var o=a(t[1]),i=a(t[2]);null===o||null===i||o in r||(r[o]=i)}return r}},1004:function(e,t,n){e.exports=n(119)},1005:function(e,t,n){"use strict";var r=n(505),a=n.n(r),o=n(369),i=n(1004),c=n(175);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){u(o,r,a,i,c,"next",e)}function c(e){u(o,r,a,i,c,"throw",e)}i(void 0)}))}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=p((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"getAllTemplatesByBook",function(){var e=d(regeneratorRuntime.mark((function e(t){var n,i,c,s,u,d,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.templateProxy.find({type:"Book",id:t});case 2:n=e.sent,i=[{category:"Book",name:__("本知识库模板"),templates:[]},{category:"Group",name:__("团队模板"),templates:[]},{category:"Personal",name:__("个人模板"),templates:[]},{category:"Official",name:__("推荐模板"),templates:[]}],c=l(n);try{for(c.s();!(s=c.n()).done;)(u=s.value).type===o.TYPE.OFFICIAL?(u.meta=a()(u.meta)?{}:JSON.parse(u.meta),i[3].templates.push(u)):u.type===o.TYPE.PERSONAL?i[2].templates.push(u):u.type===o.TYPE.GROUP?i[1].templates.push(u):i[0].templates.push(u)}catch(e){c.e(e)}finally{c.f()}for(d=0,f=i;d<f.length;d++)"Official"!==(p=f[d]).category?p.templates.sort((function(e,t){return-(new Date(e.content_updated_at||e.updated_at||e.created_at)-new Date(t.content_updated_at||t.updated_at||t.created_at))})):p.templates.sort((function(e,t){return e.meta.order-t.meta.order}));return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h(this,"loadTemplate",function(){var e=d(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.templateProxy.findOne({id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h(this,"loadDoc",function(){var e=d(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.docProxy.findOne({book_id:n,id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),h(this,"filterTemplatesByFormat",(function(e,t){var n,r=[],a=l(e);try{for(a.s();!(n=a.n()).done;){var o,i=n.value,c={category:i.category,name:i.name,templates:[]},s=l(i.templates);try{for(s.s();!(o=s.n()).done;){var u=o.value;u.format===t&&c.templates.push(u)}}catch(e){s.e(e)}finally{s.f()}r.push(c)}}catch(e){a.e(e)}finally{a.f()}return r})),h(this,"getTemplateCover",(function(e){var t={lakesheet:"https://gw.alipayobjects.com/zos/bmw-prod/766284e3-a150-4438-a294-171a15cf216b.svg",laketable:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*W_NeRqkOsJsAAAAAAAAAAAAAARQnAQ",lake:"https://gw.alipayobjects.com/zos/bmw-prod/7c85db16-e017-4002-b37c-77dcf275d31f.svg",lakemind:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*R1-oT6osRqQAAAAAAAAAAAAAARQnAQ",lakeboard:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*R1-oT6osRqQAAAAAAAAAAAAAARQnAQ",lakeshow:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*-GRzR6CgSGUAAAAAAAAAAAAAARQnAQ"};return e.cover?e.cover:t[e.format]||t.lake})),h(this,"createTemplate",function(){var e=d(regeneratorRuntime.mark((function e(t,n,a,i,c){var l,s,u,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=d.length>5&&void 0!==d[5]?d[5]:null,s=d.length>6&&void 0!==d[6]&&d[6],u={target_id:t,target_type:n,template_type:a,format:o.TYPE_FORMAT_MAP[i],type:i,name:c,in_edit:s},null!==l&&(u.doc_id=l),e.next=6,r.templateProxy.create(u);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o){return e.apply(this,arguments)}}()),h(this,"updateTitle",function(){var e=d(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.templateProxy.update({id:t,name:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),h(this,"deleteTemplate",function(){var e=d(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.templateProxy.destroy({id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h(this,"revertDeletedTemplate",function(){var e=d(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.templateProxy.restore({id:t,recycleId:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),h(this,"createDocByTemplate",function(){var e=d(regeneratorRuntime.mark((function e(t,n){var a,i,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>2&&void 0!==l[2]?l[2]:{useOriginResp:!1,from:"modal"},e.next=3,r.templateProxy.createDocByTemplate({template_id:n.id,book_id:t.id,doc_id:a.docId},{useOriginResp:a.useOriginResp});case 3:return i=e.sent,c.a.logTemplateUsage(n.type,n.id,n.format,a.from,n.type===o.TYPE.OFFICIAL?1:0,n.type!==o.TYPE.OFFICIAL?1:0),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),h(this,"cloneSheetDataToEmptyDoc",function(){var e=d(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.docProxy.cloneSheetData({source_doc_id:t,target_doc_id:n});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.templateProxy=t,this.docProxy=n}));m.getLegalBooks=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.filter((function(e){return!!i.MIXING_BOOK_TYPES.includes(e.type)}));return a()(t)?n:n.filter((function(e){return e.user_id===t.id}))},t.a=m},117:function(e,t,n){"use strict";var r=n(27),a=n(129),o=n(145),i=n(131),c=n(130),l=n(477).isPreviewableZipFiles,s=n(1841).getSizeValue,u=n(1842),d=n(127).NUMBER_SIZE;e.exports={wordCount:u,getSizeValue:s,sortByTime:function(e,t){var n=e.filter((function(e){return e[t]}));return 0===n.length?e:(n.sort((function(e,n){return new Date(n[t])-new Date(e[t])})),n.length===e.length?n:n.concat(e.filter((function(e){return!e[t]}))))},countdown:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=function(e){return e};"undefined"!=typeof window&&"function"==typeof window.__?a=window.__:this.ctx&&(a=function(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.ctx.__).call.apply(e,[t.ctx].concat(r))}),e=r(e).unix();var o=r().unix(),i=e-o;if(!(i<0)){var c,l=r.duration(1e3*i,"milliseconds"),s=l.years(),u=l.months(),d=l.days(),f=l.hours(),p=l.minutes(),h=l.seconds();return s>0?c="".concat(s," ").concat(a("年")):u>0?c="".concat(u," ").concat(a("个月")):d>0?c="".concat(d," ").concat(a("天")):f>0?c="".concat(f," ").concat(a("小时")):p>0?c="".concat(p," ").concat(a("分")):h>0&&(c="".concat(h," ").concat(a("秒"))),n?c:{text:c,years:s,months:u,days:d,hours:f,minutes:p,seconds:h}}},getAvatarText:function(e){var t=e.codePointAt(0);if(t=String.fromCodePoint(t),!/[0-9a-zA-Z\u4e00-\u9fa5]/.test(t)){var n=e.match(/[\u4e00-\u9fa5]/);n||(n=e.match(/[0-9a-zA-Z]/)),n&&(t=n[0])}return t},isPreviewableZipFiles:l,getExtFromFileName:function(e){return e.endsWith(".mindnode.zip")?"mindnode.zip":e.endsWith(".xmind.zip")?"xmind.zip":e.endsWith(".mpp.zip")?"mpp.zip":e.endsWith(".mmap.zip")?"mmap.zip":(/^\.[^.]+$/.test(e)?e:(n=(t=e).lastIndexOf("."))>0?t.substring(n):"").substring(1).toLowerCase();var t,n},isImage:function(e){var t=this.getExtFromFileName(e);return a.includes(".".concat(t))},isCompressedFile:function(e){var t=this.getExtFromFileName(e);return o.includes(".".concat(t))},isAudio:function(e){var t=this.getExtFromFileName(e);return i.includes(".".concat(t))},isVideo:function(e){var t=this.getExtFromFileName(e);return c.includes(".".concat(t))},isAxure:function(e){return e.endsWith(".rp")||e.endsWith(".rplib")},numberFormat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zh-cn";return"number"!=typeof e?"0":"zh-cn"===t?e<d.W?"".concat(e):"".concat(parseFloat((e/d.W).toFixed(1)),"W"):"en-us"===t?e>d.M?"".concat(parseFloat((e/d.M).toFixed(1)),"M"):e>d.K?"".concat(parseFloat((e/d.K).toFixed(1)),"K"):"".concat(e):void 0}}},121:function(e,t,n){"use strict";n(420);var r=n(210),a=n(0),o=n.n(a),i=n(1),c=n.n(i),l=n(63),s=n.n(l),u=n(8),d=n.n(u);n(195);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=o.a.forwardRef((function(e,t){var n=e.className,i=e.overlayClassName,c=e.type,l=e.noArrow,s=e.hideWhenInactive,u=e.content,f=g(Object(a.useState)(e.visible||e.defaultVisible),2),p=f[0],h=f[1];Object(a.useEffect)((function(){"visible"in e&&h(e.visible)}),[e.visible]);var v=function(t){"visible"in e||h(t),e.onVisibleChange&&e.onVisibleChange(t)};return o.a.createElement(r.a,m({},e,{className:d()(n,"larkui-popover-trigger"),overlayClassName:d()(i,{"larkui-popover":!0,"larkui-popover-menu":"menu"===c,"larkui-popover-no-arrow":l}),content:s?o.a.createElement("div",{onClick:function(){v(!1)}},u):u,ref:t,visible:p,onVisibleChange:v}))}));y.propTypes=p(p({},r.a.PopoverProps),{},{type:c.a.oneOf(["menu"]),content:c.a.node,children:c.a.node,className:c.a.string,overlayClassName:c.a.string,noArrow:c.a.bool,hideWhenInactive:c.a.bool}),s()(y,r.a),t.a=y},122:function(e,t,n){"use strict";n(2072);var r=n(1722);n(294);t.a=r.a},126:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){},151:function(e,t,n){},1552:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a="x-yuque-pt-signature",o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.query=new URLSearchParams(window.location.search),this.isServify=!!this.get(a),this.viewport=this.get("viewport"),this.sidebar="0"===this.get("toc_sidebar")?"none":"toc",this.cards=this.get("cards").split(",").map((function(e){return e.trim()})).filter((function(e){return!!e})),this.thirdpartyCards=this.get("thirdparty_cards")?this.get("thirdparty_cards").split(",").map((function(e){return e.trim()})).filter((function(e){return!!e})):[],this.showTitle="0"!==this.get("title"),this.showHeader="0"!==this.get("header"),this.isEmbedMode=this.get("mode").startsWith("embed"),this.autoHeight=this.getAutoHeight(),this.editorType=this.get("editor_type"),this.editorMode=this.get("editor_mode"),this.language=this.get("language")||"zh-cn",this.pageMinWidth=this.get("page_min_width"),this.onchange="1"===this.get("onchange"),this.allowMention="0"!==this.get("mention"),this.allowResource="1"===this.get("resource"),this.watermark=this.get("watermark"),this.backgroundColor=this.get("background_color"),this.bodyBackgroundColor=this.get("body_background_color"),this.toolbarBackgroundColor=this.get("toolbar_background_color"),this.autoSaveInterval=this.getAutoSaveInterval(),this.saveToServer="0"!==this.get("save_to_server"),this.customUploadUrl=this.get("upload_url"),this.customUploadTypes=this.get("upload_types"),this.customMentionUrl=this.getMentionUrl(),this.customMentionOrigin=this.get("search_user_origin"),this.imageUploadUrl=this.getImageUploadUrl(),this.fileUploadUrl=this.getFileUploadUrl(),this.videoUploadUrl=this.getVideoUploadUrl(),this.videoUploadStatusUrl=this.getVideoUploadStatusUrl(),this.fullHTML="1"===this.query.get("full_html"),this.allowResizeVideo=!0,this.extraConfig=JSON.parse(this.query.get("extra_config")||"{}")}var t,n,o;return t=e,(n=[{key:"get",value:function(e){return this.query.get(e)||""}},{key:"getAutoHeight",value:function(){return!window.h5&&"0"!==this.get("auto_height")}},{key:"getAutoSaveInterval",value:function(){var e=this.get("auto_save_interval");return e&&!Number.isNaN(Number(e))?((e=Number(e))<60&&(e=60),1e3*e):null}},{key:"getMentionUrl",value:function(){var e=this.get("search_user_url");return this._joinCsrf(e)}},{key:"getImageUploadUrl",value:function(){return this.customUploadTypes&&this.customUploadTypes.includes("image")?"".concat(this._joinCsrf(this.customUploadUrl),"&type=image"):null}},{key:"getFileUploadUrl",value:function(){return this.customUploadTypes&&this.customUploadTypes.includes("attachment")?"".concat(this._joinCsrf(this.customUploadUrl),"&type=attachment"):null}},{key:"getVideoUploadUrl",value:function(){var e=this.get("upload_video_url");return e?this._joinCsrf(e):null}},{key:"getVideoUploadStatusUrl",value:function(){var e=this.get("upload_video_status_url");return e?this._joinCsrf(e):null}},{key:"_joinCsrf",value:function(e){var t=e.includes("?")?"&":"?";return"".concat(e).concat(t).concat(this._getCustomCsrf())}},{key:"_getCustomCsrf",value:function(){var e=this.get("upload_csrf_token_field"),t=this.get("upload_csrf_token_value");return e?"".concat(e,"=").concat(encodeURIComponent(t)):""}},{key:"isExtremeMode",value:function(){return"extreme"===this.editorMode}}])&&r(t.prototype,n),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();o.isServify=function(){var e=new URLSearchParams(window.location.search).get("from");if(!e)return!1;try{if(new URL(e).searchParams.get(a))return!0}catch(e){}return!1},o.SERVIFY_TAG_SRT=a,t.a=o},1553:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="UpOutlined";t.a=a.forwardRef(c)},1554:function(e,t,n){e.exports=n(1844)},1556:function(e,t,n){},1557:function(e,t,n){"use strict";var r=".lake-sheet-scrollbar-x .lake-sheet-scrollbar-trigger",a=".lake-sheet-scrollbar-y .lake-sheet-scrollbar-trigger",o={storePosition:function(e,t){if(sessionStorage){var n=this._getStorageKey(e);sessionStorage.setItem(n,"".concat(t))}},storeSheetPosition:function(e,t){if(sessionStorage){var n=this._getStorageKey(e);sessionStorage.setItem("".concat(n,"-x"),"".concat(t.x)),sessionStorage.setItem("".concat(n,"-y"),"".concat(t.y))}},getStoredPosition:function(e){if(!sessionStorage)return-1;var t=this._getStorageKey(e),n=sessionStorage.getItem(t);return n?parseInt(n,10):-1},getSheetStoredPosition:function(e){if(!sessionStorage)return null;var t=this._getStorageKey(e),n=sessionStorage.getItem("".concat(t,"-x")),r=sessionStorage.getItem("".concat(t,"-y"));return n&&r?{x:parseFloat(n),y:parseFloat(r)}:null},clearStorage:function(e){if(sessionStorage){var t=this._getStorageKey(e);sessionStorage.removeItem(t)}},clearSheetStorage:function(e){if(sessionStorage){var t=this._getStorageKey(e);sessionStorage.removeItem("".concat(t,"-x")),sessionStorage.removeItem("".concat(t,"-y"))}},_getStorageKey:function(e){return"content-position-offset-".concat(e)}},i={saveReadPosition:function(e){var t,n=(null===(t=document.scrollingElement)||void 0===t?void 0:t.scrollTop)||document.body.scrollTop;n&&n>=32?o.storePosition(e,n):o.clearStorage(e)},letReaderFocusToMemorizedPosition:function(e){var t=o.getStoredPosition(e);t<=0||(window.scrollTo(0,t),o.clearStorage(e))},letEditorFocusToReadPosition:function(e){var t=o.getStoredPosition(e);if(!(t<=0)){var n=this.getScrollContainer();n&&(n.scrollTop=t,o.clearStorage(e))}},getScrollContainer:function(){return document.querySelector(".ne-editor-wrap")||document.querySelector(".lake-editor-scroll-container")},saveEditPosition:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"lake";if("lakesheet"!==t){var n=this.getScrollContainer();if(n){var r=n.scrollTop;r>=32&&o.storePosition(e,r)}}else i.saveSheetPosition(e)},saveSheetPosition:function(e){var t=document.querySelector(r),n=document.querySelector(a);if(t&&n){var i={x:t.getAttribute("data-scroll"),y:n.getAttribute("data-scroll")};o.storeSheetPosition(e,i)}},getSheetStoredPosition:function(e){var t=o.getSheetStoredPosition(e);return t?(o.clearSheetStorage(e),t):null}};t.a=i},1558:function(e,t,n){"use strict";var r=n(68),a=n.n(r);function o(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.doc=t,this.engine=n,this.emitter=new a.a}var t,n,r,s,u;return t=e,n=[{key:"resetDoc",value:function(e){this.doc=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)}},{key:"init",value:function(e){e.content,e.onFocus}},{key:"initCollabDoc",value:function(e){}},{key:"setContent",value:function(e){}},{key:"appendContent",value:function(e){}},{key:"getValue",value:function(){return null}},{key:"getPureContent",value:function(){return null}},{key:"getEditorContent",value:function(e){return{content:"",html:null,premium:null,premiumHtml:null}}},{key:"getThumbnail",value:function(){return""}},{key:"getDocMeta",value:function(e){return null}},{key:"updateDocEditorMeta",value:function(e){var t=this;["meta_draft","meta"].forEach((function(n){var r="editor_".concat(n);e[n]&&(t.doc[r]=e[n])}))}},{key:"getPremium",value:function(){return null}},{key:"getWordCount",value:function(e){return e&&e(-1),0}},{key:"getSummary",value:function(e){e({summary:null,cover:null})}},{key:"isEmpty",value:function(){return!1}},{key:"isFocus",value:function(){return!1}},{key:"hasUserChanged",value:function(){return!0}},{key:"resetUserChanged",value:function(){}},{key:"disable",value:function(){}},{key:"enable",value:function(){}},{key:"readonly",value:function(e){}},{key:"focus",value:function(e){}},{key:"focusToEnd",value:function(e){}},{key:"onBeforeSave",value:(s=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})),u=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=s.apply(e,t);function i(e){o(a,n,r,i,c,"next",e)}function c(e){o(a,n,r,i,c,"throw",e)}i(void 0)}))},function(){return u.apply(this,arguments)})},{key:"reset",value:function(e){}},{key:"getOriginEngine",value:function(){return this.engine}},{key:"getCollabMembers",value:function(e){return[]}},{key:"setCollabMembers",value:function(){}},{key:"addCollabMember",value:function(){}},{key:"removeCollabMember",value:function(){}},{key:"setCurrentMember",value:function(){}},{key:"onCommandError",value:function(e){}},{key:"onCommandEnd",value:function(e){}},{key:"getReportValue",value:function(){return null}}],n&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=s},1560:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o={GUIDELINES:{dashboard:[{title:"工作台是什么",img:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*bRb-SYtxeyYAAAAAAAAAAAAAARQnAQ",tip:"工作台是你在语雀上的信息枢纽，在这里可以快速查看你最近编辑的文档，也可以找到你参与的团队。",url:"https://www.yuque.com/yuque/ng1qth/dashboard"},{title:"如何回到工作台",img:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*BX4mSbTgCtQAAAAAAAAAAAAAARQnAQ",tip:"点击「语雀 Logo」 或者点击导航栏「工作台」，即可回到工作台页面。",url:""},{title:"如何查看最近编辑的文档",img:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*RG_jQrWQy0gAAAAAAAAAAAAAARQnAQ",tip:"进入工作台后，第一个区块即是最近编辑的文档，也可以点击tab切换查看最近文档，资源或者话题",url:""}],doc_editor:[{title:"如何插入图片、表格等内容",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556443024911-fa99fe6e-f4c8-482e-a946-55b825cb13f9.png",tip:"点击编辑器中工具栏「插入」图标选择对应内容插入，或者在空白行输入“ /” ，选择对应内容插入。",url:"https://www.yuque.com/yuque/gpvawt/rs0a17"},{title:"如何查看文档历史",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556443114161-781348c4-e209-4bb5-817a-221074f34ef3.png",tip:"点击编辑器右上角「历史」按钮查看文档对应的历史，可恢复到任意版本。",url:"https://www.yuque.com/yuque/thyzgp/fs0x2z"},{title:"如何发布到目录",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556443180423-55f29815-59c7-4a38-9ca2-e543830c1c72.png",tip:"在文档知识库编辑页面，可以选择将文档发布到目录，点击右上角「发布」后选择对应目录位置即可完成发布。",url:"https://www.yuque.com/yuque/thyzgp/oe6ium"},{title:"如何修改文档信息",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556443229381-d1fea0af-5889-4b9f-b819-d5f7e368c32e.png",tip:"点击编辑器左上角标题「下拉」图标，在这里可以修改文档的基本信息，包括设置单篇文档权限。",url:""}],table_editor:[{title:"表单-如何新建表单？",img:"https://gw.alipayobjects.com/mdn/rms_740edc/afts/img/A*1qdoRJuheXYAAAAAAAAAAAAAARQnAQ",tip:"在「工具栏」中点击「表单」按钮即完成新建。当前数据表中的列将会生成表单项。"},{title:"表单-如何新建表单项？",img:"https://gw.alipayobjects.com/mdn/rms_740edc/afts/img/A*j4gJTJSwkmgAAAAAAAAAAAAAARQnAQ",tip:"点击页面下方的「+添加」按钮即可新建表单项。默认类型为单行文本，表单发布或更新后，数据表中也会新增一列。"},{title:"表单-如何修改表单项类型？",img:"https://gw.alipayobjects.com/mdn/rms_740edc/afts/img/A*aG7RTZTk3TwAAAAAAAAAAAAAARQnAQ",tip:"点击要修改的表单项，在右上角可切换表单项类型，如单选、多选等。"},{title:"数据表-如何创建列？",img:"https://gw.alipayobjects.com/mdn/rms_740edc/afts/img/A*oFuhQ4oKFQUAAAAAAAAAAAAAARQnAQ",tip:"点击「+」号，修改数据表列名，选择合适的列类型，点击「确定」即可完成创建。\n      列类型决定了该列数据的类型。"},{title:"如何筛选",img:"https://gw.alipayobjects.com/mdn/rms_740edc/afts/img/A*XmxcQpRoOVoAAAAAAAAAAAAAARQnAQ",tip:"点击「+添加筛选」，选择要筛选的某列，依据所选的筛选列类型设置筛选条件，点击确定即可。"},{title:"如何排序",img:"https://gw.alipayobjects.com/mdn/rms_740edc/afts/img/A*C3NPRr98jgEAAAAAAAAAAAAAARQnAQ",tip:"点击「选择一列进行排序」，选择需排序的列，点击确定即可完成。\n      排序对整个数据表生效。"}],mind_editor:[{title:__("如何制作思维图"),img:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*vaJiTbEsD70AAAAAAAAAAAAAARQnAQ",tip:__("在思维图编辑器中，您可以利用工具栏（快捷键）来插入元素，利用属性面板来修改样式。"),url:"https://www.yuque.com/yuque/wknab3/ribrnd"},{title:__("思维图的多场景应用"),img:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*y_kXQoRO184AAAAAAAAAAAAAARQnAQ",tip:__("除了利用模版之外，我们可以将普通的树形结构进行结构变化和样式修改来实现不同的场景功能。"),url:"https://www.yuque.com/yuque/wknab3/dhnw9v"},{title:__("语雀思维图的特色功能"),img:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*UjW5QJsaJe8AAAAAAAAAAAAAARQnAQ",tip:__("思维图是语雀文档体系的一员，它旨在利用图形化的方式去帮助整体、表达人的思维体系。利用语雀文档+思维图的连接性可以帮助您更高效地构建自己的知识体系。"),url:"https://www.yuque.com/yuque/wknab3/yoxbc4"}],toc_editor:[{title:__("现已支持在阅读页直接编排"),img:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*mX9DT43KI70AAAAAAAAAAABkARQnAQ",tip:__("试试全新的拖拽体验吧"),url:"https://www.yuque.com/yuque/thyzgp/vlki63"}],group:[{title:"如何添加团队成员",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556441753633-eb8f1169-8b94-47ca-a93c-224ed0dc9d2d.png",tip:"进入团队，点击右上角「成员」，可通过搜索、邀请链接等方式添加成员。",url:"https://www.yuque.com/yuque/rvzzxz/hcaaw3"},{title:"如何设置团队权限",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556441704230-c17391ae-f519-4459-bf40-8aa0bf3bab5b.png",tip:"进入团队，点击右上角「设置」，进入「高级设置」选择「团队可见范围」，设置对应的访问权限。",url:""},{title:"如何置顶知识库",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556441733550-1bc9abc3-e2fb-4005-98a8-ba32c3e11acb.png",tip:"进入团队，点击知识库卡片右上角更多操作，选择「置顶」可将知识库置顶显示在团队首页。",url:""}],book:[{title:"如何编排目录",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556441643945-9a46cb7b-5047-461f-95de-dcc8e5963129.png",tip:"进入知识库，点击目录右上角「编排目录」，或在阅读页面点击更多操作中「编排目录」。注意：未发布文档不会出现在目录中。",url:"https://www.yuque.com/yuque/thyzgp/vlki63"},{title:"如何管理文档",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556441556832-8f41746f-0656-4994-a75f-3f5405e6487c.png",tip:"进入知识库，点击右上角「文档管理」，进入后可对文档进行转移、复制、删除等操作。",url:""},{title:"如何完成知识库协作",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556441689760-34b0eea8-c65c-4cbd-8b9d-dfe7042f2e62.png",tip:"进入知识库，点击「协作」将需要协作的人加入到知识库中即可在线与他完成协同。",url:"https://www.yuque.com/yuque/thyzgp/zmbxqc"},{title:"如何转移 & 删除知识库",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556441613658-6a0b6f50-407d-4ae2-b561-8f029fd052d7.png",tip:"进入知识库，点击「设置」，进入「高级设置」选择「转移知识库」或 「删除知识库」。注意：仅 Owner 有权限操作。",url:"https://www.yuque.com/yuque/thyzgp/mqxn6q"},{title:"如何修改知识库信息",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556441618750-191e58cf-e948-4867-85d5-5d0337eb8853.png",tip:"进入知识库，点击「设置」，进入「基础设置」后可以修改知识库名称、描述、以及路径。",url:""}],origination:[{title:"如何添加成员或外部联系人",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556442769213-55889f8c-977a-4ee9-b1d0-635a6e42a60d.png",tip:"空间成员、外部联系人需管理员进行添加，空间下的团队、知识库仅可添加空间成员和外部联系人。",url:""},{title:"空间下内容如何分享给外部人员",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556442855994-d6f2bf1e-4416-4d41-aa23-f101b6fd6909.png",tip:"当前空间内容无法直接分享给外部人员，需使用知识库、文档分享功能。",url:""},{title:"如何绑定钉钉等第三方登录",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556442962970-0d770aac-2d48-45a0-9c5c-74e73014d1a7.png",tip:"管理员进入空间设置，点击「附加功能」，按照对应的绑定说明完成第三方登录绑定。",url:"https://www.yuque.com/yuque/rvzzxz/kt5keg"}]},SCENES:[{key:"project",title:"项目文档",img:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*eQuEQpBX48AAAAAAAAAAAABjARQnAQ"},{key:"note",title:"学习笔记",img:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*4NqHSqYtMBsAAAAAAAAAAABjARQnAQ"},{key:"column",title:"团队专栏",img:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*oJlBTrdrPRkAAAAAAAAAAABjARQnAQ"},{key:"help",title:"帮助手册",img:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*TYaGQaVJRn8AAAAAAAAAAABjARQnAQ"}],FEATURES:[{area:"DOC_HEAD_MORE",type:"lite",enable:!1,tip_id:"feature_mail_doc",tip:__("可以用邮件发送文档了！"),containerSelector:'[data-feature-guide-container="doc-more-action"]',placement:"bottomRight",createdAt:"2020-04-30"},{area:"HEAD_NEW",type:"lite",enable:!1,tip_id:"feature_mind",tip:__("试试新建思维图"),containerSelector:'[data-feature-guide-container="head-new"]',placement:"bottom",offsetY:"-12px",readTrigger:["click"],createdAt:"2020-07-29"},{area:"HEAD_NEW",type:"lite",enable:!1,tip_id:"feature_note_release",tip:__("小记全新上线"),containerSelector:'[data-feature-guide-container="head-new-note"]',placement:"bottom",offsetY:"0px",readTrigger:["click"],createdAt:"2020-09-07"},{area:"HEAD_NEW",type:"lite",enable:!0,tip_id:"feature_events_move_to_explore_2",tip:__("你关注的动态移到广场中啦"),containerSelector:'[data-feature-guide-container="head-events-move-to-explore"]',placement:"bottom",offsetY:"0px",readTrigger:["click"],createdAt:"2021-10-22"},{area:"HEAD_NEW_MENU_ITEM",enable:!0,type:"mini",tip_id:"feature_mind",createdAt:"2020-07-29"},{area:"DOC_EDITOR_TOOLBAR",type:"lite",enable:!1,tip_id:"feature_vote",tip:__("可以插入投票啦"),containerSelector:'.lake-max-editor [accessbilityid="main-card-button"]',placement:"bottomLeft",offsetY:"-6px",readTrigger:["click"],createdAt:"2020-04-30"},{area:"DOC_EDITOR_TOOLBAR_CARD",enable:!1,type:"mini",tip_id:"feature_vote",containerSelector:'[accessbilityid="vote-card-button"]',readTrigger:["click"],createdAt:"2020-04-30"},{area:"SHEET_EDITOR_TOOLBAR",type:"lite",enable:!1,tip_id:"feature_sheet_note",tip:__("支持添加备注啦"),containerSelector:'.lake-sheet-toolbar [accessbilityid="main-card-button"]',placement:"bottomLeft",offsetY:"-6px",readTrigger:["click"],createdAt:"2020-08-10"},{area:"SHEET_EDITOR_TOOLBAR_CARD",enable:!1,type:"mini",tip_id:"feature_sheet_note",containerSelector:".lake-sheet-card-note .lake-menu-item",readTrigger:["click"],createdAt:"2020-08-10"},{area:"SHEET_EDITOR_TOOLBAR",type:"lite",enable:!1,tip_id:"feature_sheet_filter",tip:__("筛选可设置仅你自己可见了"),containerSelector:'.lake-sheet-toolbar [accessbilityid="main-filter-button"]',placement:"bottomLeft",offsetY:"-6px",readTrigger:["click"],createdAt:"2020-10-27"},{area:"GROUP_HOMEPAGE_3",enable:!0,type:"lite",tip_id:"feature_group_homepage_customize",tip:__("自定义首页功能升级啦"),placement:"left",containerSelector:'[data-feature-guide-container="group-homepage-customize_3"]',readTrigger:["click"],offsetY:"0px",guideSignContainerStyle:{marginTop:"-10px",right:"-10px"},createdAt:"2020-09-17"},{area:"BOOK_INDEX_MORE_ACTION",enable:!0,type:"lite",tip_id:"feature_book_custom_index_landing",tip:a.a.createElement("div",null,a.a.createElement("p",null,a.a.createElement("strong",null,__("首页可以自定义了！"))),a.a.createElement("p",null,__("点击「更多」-「设置」-「高级设置」，选择「自定义首页」试一试")),a.a.createElement("button",{type:"button",onClick:function(){window.location.href="https://www.yuque.com/yuque/thyzgp/gw6zsn"},className:"larkui-feature-guide-lite-multi-line-button"},a.a.createElement("strong",null,__("查看案例")))),offsetY:"-6px",placement:"bottomRight",containerSelector:'[data-feature-guide-container="book-header-more-action"]',enableMultiLines:!0,createdAt:"2020-08-17"},{area:"BOOK_ADVANCED_SETTING_CUSTOM_LAYOUT",enable:!0,type:"lite",tip_id:"feature_book_custom_index_setting",tip:__("试试自定义首页吧"),offsetY:"42px",placement:"top",containerSelector:'[data-feature-guide-container="book-advanced-setting-custom-layout"]',createdAt:"2020-08-17"},{area:"RESOURCE_AREA_COMMENT",enable:!0,type:"lite",tip_id:"feature_resource_area_comment",tip:__("试试框选评论吧"),placement:"left",containerSelector:'[data-feature-guide-container="feature_resource_area_comment"]',readTrigger:["click"],createdAt:"2020-09-01"},{area:"SHEET_EDITOR_DATA_TABLE",type:"lite",enable:!1,tip_id:"feature_data_table",tip:__("可以制作问卷啦，新增数据表试试!"),containerSelector:".lake-sheet-tabbar .insert-sheet-tab.show-grid",placement:"top",offsetY:"-10px",readTrigger:["click"],createdAt:"2021-01-19"},{area:"DASHBOARD_GROUP_UPGRADED",enable:!0,type:"lite",tip_id:"feature_group_upgraded",tip:a.a.createElement("div",{style:{width:200}},a.a.createElement("h6",{style:{fontSize:16,color:"#fff",marginBottom:8}},__("团队升级为空间啦")),a.a.createElement("p",{style:{fontSize:14,fontWight:"normal"}},__("空间是专门服务组织协同的解决方案，拥有独立域名，数据和个人空间隔离，请由此{action}空间工作台",{action:window.appData.organization?__("切换"):__("进入")}))),placement:"bottom",containerSelector:'[data-feature-guide-container="feature_group_upgraded"]',readTrigger:["click"],createdAt:"2021-06-03"},{area:"DASHBOARD_ORG_SWITCH",enable:!0,type:"lite",tip_id:"feature_org_switch",tip:__("在此切换个人和空间"),placement:"bottom",containerSelector:'[data-feature-guide-container="feature_org_switch"]',readTrigger:["click"],offsetY:"-6px",createdAt:"2021-12-06"}]};t.a=o},1563:function(e,t,n){},1565:function(e,t,n){var r=function(e){return"[object Array]"==Object.prototype.toString.call(e)},a=function(e){return JSON.parse(JSON.stringify(e))},o={name:"json0",uri:"http://sharejs.org/types/JSONv0"},i={};function c(e){e.t="text0";var t={p:e.p.pop()};null!=e.si&&(t.i=e.si),null!=e.sd&&(t.d=e.sd),e.o=[t]}function l(e){e.p.push(e.o[0].p),null!=e.o[0].i&&(e.si=e.o[0].i),null!=e.o[0].d&&(e.sd=e.o[0].d),delete e.t,delete e.o}o.registerSubtype=function(e){i[e.name]=e},o.create=function(e){return void 0===e?null:a(e)},o.invertComponent=function(e){var t={p:e.p};return e.t&&i[e.t]&&(t.t=e.t,t.o=i[e.t].invert(e.o)),void 0!==e.si&&(t.sd=e.si),void 0!==e.sd&&(t.si=e.sd),void 0!==e.oi&&(t.od=e.oi),void 0!==e.od&&(t.oi=e.od),void 0!==e.li&&(t.ld=e.li),void 0!==e.ld&&(t.li=e.ld),void 0!==e.na&&(t.na=-e.na),void 0!==e.lm&&(t.lm=e.p[e.p.length-1],t.p=e.p.slice(0,e.p.length-1).concat([e.lm])),t},o.invert=function(e){for(var t=e.slice().reverse(),n=[],r=0;r<t.length;r++)n.push(o.invertComponent(t[r]));return n},o.checkValidOp=function(e){for(var t=0;t<e.length;t++)if(!r(e[t].p))throw new Error("Missing path")},o.checkList=function(e){if(!r(e))throw new Error("Referenced element not a list")},o.checkObj=function(e){if(!(t=e)||t.constructor!==Object)throw new Error("Referenced element not an object (it was "+JSON.stringify(e)+")");var t},o.apply=function(e,t){o.checkValidOp(t),t=a(t);for(var n={data:e},r=0;r<t.length;r++){var l=t[r];null==l.si&&null==l.sd||c(l);for(var s=null,u=n,d="data",f=0;f<l.p.length;f++){var p=l.p[f];if(s=u,d,u=u[d],d=p,null==s)throw new Error("Path invalid")}if(l.t&&void 0!==l.o&&i[l.t])u[d]=i[l.t].apply(u[d],l.o);else if(void 0!==l.na){if("number"!=typeof u[d])throw new Error("Referenced element not a number");u[d]+=l.na}else if(void 0!==l.li&&void 0!==l.ld)o.checkList(u),u[d]=l.li;else if(void 0!==l.li)o.checkList(u),u.splice(d,0,l.li);else if(void 0!==l.ld)o.checkList(u),u.splice(d,1);else if(void 0!==l.lm){if(o.checkList(u),l.lm!=d){var h=u[d];u.splice(d,1),u.splice(l.lm,0,h)}}else if(void 0!==l.oi)o.checkObj(u),u[d]=l.oi;else{if(void 0===l.od)throw new Error("invalid / missing instruction in op");o.checkObj(u),delete u[d]}}return n.data},o.shatter=function(e){for(var t=[],n=0;n<e.length;n++)t.push([e[n]]);return t},o.incrementalApply=function(e,t,n){for(var r=0;r<t.length;r++){var a=[t[r]];n(a,e=o.apply(e,a))}return e};var s=o.pathMatches=function(e,t,n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r]&&(!n||r!==e.length-1))return!1;return!0};o.append=function(e,t){if(t=a(t),0!==e.length){var n=e[e.length-1];if(null==t.si&&null==t.sd||null==n.si&&null==n.sd||(c(t),c(n)),s(t.p,n.p))if(t.t&&n.t&&t.t===n.t&&i[t.t]){if(n.o=i[t.t].compose(n.o,t.o),null!=t.si||null!=t.sd){for(var r=t.p,o=0;o<n.o.length-1;o++)t.o=[n.o.pop()],t.p=r.slice(),l(t),e.push(t);l(n)}}else null!=n.na&&null!=t.na?e[e.length-1]={p:n.p,na:n.na+t.na}:void 0!==n.li&&void 0===t.li&&t.ld===n.li?void 0!==n.ld?delete n.li:e.pop():void 0!==n.od&&void 0===n.oi&&void 0!==t.oi&&void 0===t.od?n.oi=t.oi:void 0!==n.oi&&void 0!==t.od?void 0!==t.oi?n.oi=t.oi:void 0!==n.od?delete n.oi:e.pop():void 0!==t.lm&&t.p[t.p.length-1]===t.lm||e.push(t);else null==t.si&&null==t.sd||null==n.si&&null==n.sd||(l(t),l(n)),e.push(t)}else e.push(t)},o.compose=function(e,t){o.checkValidOp(e),o.checkValidOp(t);for(var n=a(e),r=0;r<t.length;r++)o.append(n,t[r]);return n},o.normalize=function(e){var t=[];e=r(e)?e:[e];for(var n=0;n<e.length;n++){var a=e[n];null==a.p&&(a.p=[]),o.append(t,a)}return t},o.commonLengthForOps=function(e,t){var n=e.p.length,r=t.p.length;if((null!=e.na||e.t)&&n++,(null!=t.na||t.t)&&r++,0===n)return-1;if(0===r)return null;n--,r--;for(var a=0;a<n;a++){var o=e.p[a];if(a>=r||o!==t.p[a])return null}return n},o.canOpAffectPath=function(e,t){return null!=o.commonLengthForOps({p:t},e)},o.transformComponent=function(e,t,n,s){t=a(t);var u=o.commonLengthForOps(n,t),d=o.commonLengthForOps(t,n),f=t.p.length,p=n.p.length;if((null!=t.na||t.t)&&f++,(null!=n.na||n.t)&&p++,null!=d&&p>f&&t.p[d]==n.p[d])if(void 0!==t.ld)(m=a(n)).p=m.p.slice(f),t.ld=o.apply(a(t.ld),[m]);else if(void 0!==t.od){(m=a(n)).p=m.p.slice(f),t.od=o.apply(a(t.od),[m])}if(null!=u){var h=f==p,m=n;if(null==t.si&&null==t.sd||null==n.si&&null==n.sd||(c(t),c(m=a(n))),m.t&&i[m.t]){if(t.t&&t.t===m.t){var g=i[t.t].transform(t.o,m.o,s);if(null!=t.si||null!=t.sd)for(var v=t.p,y=0;y<g.length;y++)t.o=[g[y]],t.p=v.slice(),l(t),o.append(e,t);else(!r(g)||g.length>0)&&(t.o=g,o.append(e,t));return e}}else if(void 0!==n.na);else if(void 0!==n.li&&void 0!==n.ld){if(n.p[u]===t.p[u]){if(!h)return e;if(void 0!==t.ld){if(void 0===t.li||"left"!==s)return e;t.ld=a(n.li)}}}else if(void 0!==n.li)void 0!==t.li&&void 0===t.ld&&h&&t.p[u]===n.p[u]?"right"===s&&t.p[u]++:n.p[u]<=t.p[u]&&t.p[u]++,void 0!==t.lm&&h&&n.p[u]<=t.lm&&t.lm++;else if(void 0!==n.ld){if(void 0!==t.lm&&h){if(n.p[u]===t.p[u])return e;v=n.p[u];var b=t.p[u];(v<(k=t.lm)||v===k&&b<k)&&t.lm--}if(n.p[u]<t.p[u])t.p[u]--;else if(n.p[u]===t.p[u]){if(p<f)return e;if(void 0!==t.ld){if(void 0===t.li)return e;delete t.ld}}}else if(void 0!==n.lm)if(void 0!==t.lm&&f===p){b=t.p[u];var k=t.lm,w=n.p[u],x=n.lm;if(w!==x)if(b===w){if("left"!==s)return e;t.p[u]=x,b===k&&(t.lm=x)}else b>w&&t.p[u]--,b>x?t.p[u]++:b===x&&w>x&&(t.p[u]++,b===k&&t.lm++),(k>w||k===w&&k>b)&&t.lm--,k>x?t.lm++:k===x&&(x>w&&k>b||x<w&&k<b?"right"===s&&t.lm++:k>b?t.lm++:k===w&&t.lm--)}else if(void 0!==t.li&&void 0===t.ld&&h){b=n.p[u],k=n.lm;(v=t.p[u])>b&&t.p[u]--,v>k&&t.p[u]++}else{b=n.p[u],k=n.lm;(v=t.p[u])===b?t.p[u]=k:(v>b&&t.p[u]--,(v>k||v===k&&b>k)&&t.p[u]++)}else if(void 0!==n.oi&&void 0!==n.od){if(t.p[u]===n.p[u]){if(void 0===t.oi||!h)return e;if("right"===s)return e;t.od=n.oi}}else if(void 0!==n.oi){if(void 0!==t.oi&&t.p[u]===n.p[u]){if("left"!==s)return e;o.append(e,{p:t.p,od:n.oi})}}else if(void 0!==n.od&&t.p[u]==n.p[u]){if(!h)return e;if(void 0===t.oi)return e;delete t.od}}return o.append(e,t),e},n(625)(o,o.transformComponent,o.checkValidOp,o.append);var u=n(1566);o.registerSubtype(u),e.exports=o},1566:function(e,t,n){var r=e.exports={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(e){if(null!=e&&"string"!=typeof e)throw new Error("Initial data must be a string");return e||""}},a=function(e,t,n){return e.slice(0,t)+n+e.slice(t)},o=function(e){if("number"!=typeof e.p)throw new Error("component missing position field");if("string"==typeof e.i==("string"==typeof e.d))throw new Error("component needs an i or d field");if(e.p<0)throw new Error("position cannot be negative")},i=function(e){for(var t=0;t<e.length;t++)o(e[t])};r.apply=function(e,t){var n;i(t);for(var r=0;r<t.length;r++){var o=t[r];if(null!=o.i)e=a(e,o.p,o.i);else{if(n=e.slice(o.p,o.p+o.d.length),o.d!==n)throw new Error("Delete component '"+o.d+"' does not match deleted text '"+n+"'");e=e.slice(0,o.p)+e.slice(o.p+o.d.length)}}return e};var c=r._append=function(e,t){if(""!==t.i&&""!==t.d)if(0===e.length)e.push(t);else{var n=e[e.length-1];null!=n.i&&null!=t.i&&n.p<=t.p&&t.p<=n.p+n.i.length?e[e.length-1]={i:a(n.i,t.p-n.p,t.i),p:n.p}:null!=n.d&&null!=t.d&&t.p<=n.p&&n.p<=t.p+t.d.length?e[e.length-1]={d:a(t.d,n.p-t.p,n.d),p:t.p}:e.push(t)}};r.compose=function(e,t){i(e),i(t);for(var n=e.slice(),r=0;r<t.length;r++)c(n,t[r]);return n},r.normalize=function(e){var t=[];null==e.i&&null==e.p||(e=[e]);for(var n=0;n<e.length;n++){var r=e[n];null==r.p&&(r.p=0),c(t,r)}return t};var l=function(e,t,n){return null!=t.i?t.p<e||t.p===e&&n?e+t.i.length:e:e<=t.p?e:e<=t.p+t.d.length?t.p:e-t.d.length};r.transformCursor=function(e,t,n){for(var r="right"===n,a=0;a<t.length;a++)e=l(e,t[a],r);return e};var s=r._tc=function(e,t,n,r){if(o(t),o(n),null!=t.i)c(e,{i:t.i,p:l(t.p,n,"right"===r)});else if(null!=n.i){var a=t.d;t.p<n.p&&(c(e,{d:a.slice(0,n.p-t.p),p:t.p}),a=a.slice(n.p-t.p)),""!==a&&c(e,{d:a,p:t.p+n.i.length})}else if(t.p>=n.p+n.d.length)c(e,{d:t.d,p:t.p-n.d.length});else if(t.p+t.d.length<=n.p)c(e,t);else{var i={d:"",p:t.p};t.p<n.p&&(i.d=t.d.slice(0,n.p-t.p)),t.p+t.d.length>n.p+n.d.length&&(i.d+=t.d.slice(n.p+n.d.length-t.p));var s=Math.max(t.p,n.p),u=Math.min(t.p+t.d.length,n.p+n.d.length);if(t.d.slice(s-t.p,u-t.p)!==n.d.slice(s-n.p,u-n.p))throw new Error("Delete ops delete different text in the same region of the document");""!==i.d&&(i.p=l(i.p,n),c(e,i))}return e};r.invert=function(e){e=e.slice().reverse();for(var t=0;t<e.length;t++)e[t]=null!=(n=e[t]).i?{d:n.i,p:n.p}:{i:n.d,p:n.p};var n;return e},n(625)(r,s,i,c)},1567:function(e,t,n){var r=n(627),a=n(1568);n(628);function o(e){return null==e}function i(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).whiteList=e.whiteList||r.whiteList,e.onAttr=e.onAttr||r.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||r.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||r.safeAttrValue,this.options=e}i.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onAttr,i=t.onIgnoreAttr,c=t.safeAttrValue;return a(e,(function(e,t,a,l,s){var u=n[a],d=!1;if(!0===u?d=u:"function"==typeof u?d=u(l):u instanceof RegExp&&(d=u.test(l)),!0!==d&&(d=!1),l=c(a,l)){var f,p={position:t,sourcePosition:e,source:s,isWhite:d};return d?o(f=r(a,l,p))?a+":"+l:f:o(f=i(a,l,p))?void 0:f}}))},e.exports=i},1568:function(e,t,n){var r=n(628);e.exports=function(e,t){";"!==(e=r.trimRight(e))[e.length-1]&&(e+=";");var n=e.length,a=!1,o=0,i=0,c="";function l(){if(!a){var n=r.trim(e.slice(o,i)),l=n.indexOf(":");if(-1!==l){var s=r.trim(n.slice(0,l)),u=r.trim(n.slice(l+1));if(s){var d=t(o,c.length,s,u,n);d&&(c+=d+"; ")}}}o=i+1}for(;i<n;i++){var s=e[i];if("/"===s&&"*"===e[i+1]){var u=e.indexOf("*/",i+2);if(-1===u)break;o=(i=u+1)+1,a=!1}else"("===s?a=!0:")"===s?a=!1:";"===s?a||l():"\n"===s&&l()}return r.trim(c)}},1569:function(e,t,n){var r=n(507).FilterCSS,a=n(626),o=n(629),i=o.parseTag,c=o.parseAttr,l=n(508);function s(e){return null==e}function u(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=a.onIgnoreTagStripAll),e.whiteList=e.whiteList||a.whiteList,e.onTag=e.onTag||a.onTag,e.onTagAttr=e.onTagAttr||a.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||a.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||a.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||a.safeAttrValue,e.escapeHtml=e.escapeHtml||a.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new r(e.css))}u.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onTag,o=t.onIgnoreTag,u=t.onTagAttr,d=t.onIgnoreTagAttr,f=t.safeAttrValue,p=t.escapeHtml,h=this.cssFilter;t.stripBlankChar&&(e=a.stripBlankChar(e)),t.allowCommentTag||(e=a.stripCommentTag(e));var m=!1;if(t.stripIgnoreTagBody){m=a.StripTagBody(t.stripIgnoreTagBody,o);o=m.onIgnoreTag}var g=i(e,(function(e,t,a,i,m){var g,v={sourcePosition:e,position:t,isClosing:m,isWhite:n.hasOwnProperty(a)};if(!s(g=r(a,i,v)))return g;if(v.isWhite){if(v.isClosing)return"</"+a+">";var y=function(e){var t=l.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var n="/"===(e=l.trim(e.slice(t+1,-1)))[e.length-1];return n&&(e=l.trim(e.slice(0,-1))),{html:e,closing:n}}(i),b=n[a],k=c(y.html,(function(e,t){var n,r=-1!==l.indexOf(b,e);return s(n=u(a,e,t,r))?r?(t=f(a,e,t,h))?e+'="'+t+'"':e:s(n=d(a,e,t,r))?void 0:n:n}));i="<"+a;return k&&(i+=" "+k),y.closing&&(i+=" /"),i+=">"}return s(g=o(a,i,v))?p(i):g}),p);return m&&(g=m.remove(g)),g},e.exports=u},1576:function(e,t,n){var r=n(4);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},1577:function(e,t,n){"use strict";var r=n(1578),a=n(244),o=n(632),i=n(509),c=n(633),l=Object.prototype.toString;function s(e){if(!(this instanceof s))return new s(e);this.options=a.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(i[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var u;if(u="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=r.deflateSetDictionary(this.strm,u)))throw new Error(i[n]);this._dict_set=!0}}function u(e,t){var n=new s(t);if(n.push(e,!0),n.err)throw n.msg||i[n.err];return n.result}s.prototype.push=function(e,t){var n,i,c=this.strm,s=this.options.chunkSize;if(this.ended)return!1;i=t===~~t?t:!0===t?4:0,"string"==typeof e?c.input=o.string2buf(e):"[object ArrayBuffer]"===l.call(e)?c.input=new Uint8Array(e):c.input=e,c.next_in=0,c.avail_in=c.input.length;do{if(0===c.avail_out&&(c.output=new a.Buf8(s),c.next_out=0,c.avail_out=s),1!==(n=r.deflate(c,i))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==c.avail_out&&(0!==c.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(o.buf2binstring(a.shrinkBuf(c.output,c.next_out))):this.onData(a.shrinkBuf(c.output,c.next_out)))}while((c.avail_in>0||0===c.avail_out)&&1!==n);return 4===i?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==i||(this.onEnd(0),c.avail_out=0,!0)},s.prototype.onData=function(e){this.chunks.push(e)},s.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=s,t.deflate=u,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,u(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,u(e,t)}},1578:function(e,t,n){"use strict";var r,a=n(244),o=n(1579),i=n(630),c=n(631),l=n(509),s=-2,u=258,d=262,f=103,p=113,h=666;function m(e,t){return e.msg=l[t],t}function g(e){return(e<<1)-(e>4?9:0)}function v(e){for(var t=e.length;--t>=0;)e[t]=0}function y(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(a.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function b(e,t){o._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,y(e.strm)}function k(e,t){e.pending_buf[e.pending++]=t}function w(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function x(e,t){var n,r,a=e.max_chain_length,o=e.strstart,i=e.prev_length,c=e.nice_match,l=e.strstart>e.w_size-d?e.strstart-(e.w_size-d):0,s=e.window,f=e.w_mask,p=e.prev,h=e.strstart+u,m=s[o+i-1],g=s[o+i];e.prev_length>=e.good_match&&(a>>=2),c>e.lookahead&&(c=e.lookahead);do{if(s[(n=t)+i]===g&&s[n+i-1]===m&&s[n]===s[o]&&s[++n]===s[o+1]){o+=2,n++;do{}while(s[++o]===s[++n]&&s[++o]===s[++n]&&s[++o]===s[++n]&&s[++o]===s[++n]&&s[++o]===s[++n]&&s[++o]===s[++n]&&s[++o]===s[++n]&&s[++o]===s[++n]&&o<h);if(r=u-(h-o),o=h-u,r>i){if(e.match_start=t,i=r,r>=c)break;m=s[o+i-1],g=s[o+i]}}}while((t=p[t&f])>l&&0!=--a);return i<=e.lookahead?i:e.lookahead}function _(e){var t,n,r,o,l,s,u,f,p,h,m=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-d)){a.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=m?r-m:0}while(--n);t=n=m;do{r=e.prev[--t],e.prev[t]=r>=m?r-m:0}while(--n);o+=m}if(0===e.strm.avail_in)break;if(s=e.strm,u=e.window,f=e.strstart+e.lookahead,p=o,h=void 0,(h=s.avail_in)>p&&(h=p),n=0===h?0:(s.avail_in-=h,a.arraySet(u,s.input,s.next_in,h,f),1===s.state.wrap?s.adler=i(s.adler,u,h,f):2===s.state.wrap&&(s.adler=c(s.adler,u,h,f)),s.next_in+=h,s.total_in+=h,h),e.lookahead+=n,e.lookahead+e.insert>=3)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+3-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<d&&0!==e.strm.avail_in)}function E(e,t){for(var n,r;;){if(e.lookahead<d){if(_(e),e.lookahead<d&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-d&&(e.match_length=x(e,n)),e.match_length>=3)if(r=o._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function C(e,t){for(var n,r,a;;){if(e.lookahead<d){if(_(e),e.lookahead<d&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-d&&(e.match_length=x(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,r=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(b(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=o._tr_tally(e,0,e.window[e.strstart-1]))&&b(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function O(e,t,n,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=a}function S(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(1146),this.dyn_dtree=new a.Buf16(122),this.bl_tree=new a.Buf16(78),v(this.dyn_ltree),v(this.dyn_dtree),v(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(16),this.heap=new a.Buf16(573),v(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(573),v(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function R(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:p,e.adler=2===t.wrap?0:1,t.last_flush=0,o._tr_init(t),0):m(e,s)}function j(e){var t,n=R(e);return 0===n&&((t=e.state).window_size=2*t.w_size,v(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n}function P(e,t,n,r,o,i){if(!e)return s;var c=1;if(-1===t&&(t=6),r<0?(c=0,r=-r):r>15&&(c=2,r-=16),o<1||o>9||8!==n||r<8||r>15||t<0||t>9||i<0||i>4)return m(e,s);8===r&&(r=9);var l=new S;return e.state=l,l.strm=e,l.wrap=c,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new a.Buf8(2*l.w_size),l.head=new a.Buf16(l.hash_size),l.prev=new a.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new a.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=i,l.method=n,j(e)}r=[new O(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(_(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,b(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-d&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(b(e,!1),e.strm.avail_out),1)})),new O(4,4,8,4,E),new O(4,5,16,8,E),new O(4,6,32,32,E),new O(4,4,16,16,C),new O(8,16,32,32,C),new O(8,16,128,128,C),new O(8,32,128,256,C),new O(32,128,258,1024,C),new O(32,258,258,4096,C)],t.deflateInit=function(e,t){return P(e,t,8,15,8,0)},t.deflateInit2=P,t.deflateReset=j,t.deflateResetKeep=R,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?s:(e.state.gzhead=t,0):s},t.deflate=function(e,t){var n,a,i,l;if(!e||!e.state||t>5||t<0)return e?m(e,s):s;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||a.status===h&&4!==t)return m(e,0===e.avail_out?-5:s);if(a.strm=e,n=a.last_flush,a.last_flush=t,42===a.status)if(2===a.wrap)e.adler=0,k(a,31),k(a,139),k(a,8),a.gzhead?(k(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),k(a,255&a.gzhead.time),k(a,a.gzhead.time>>8&255),k(a,a.gzhead.time>>16&255),k(a,a.gzhead.time>>24&255),k(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),k(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(k(a,255&a.gzhead.extra.length),k(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=c(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(k(a,0),k(a,0),k(a,0),k(a,0),k(a,0),k(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),k(a,3),a.status=p);else{var d=8+(a.w_bits-8<<4)<<8;d|=(a.strategy>=2||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(d|=32),d+=31-d%31,a.status=p,w(a,d),0!==a.strstart&&(w(a,e.adler>>>16),w(a,65535&e.adler)),e.adler=1}if(69===a.status)if(a.gzhead.extra){for(i=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>i&&(e.adler=c(e.adler,a.pending_buf,a.pending-i,i)),y(e),i=a.pending,a.pending!==a.pending_buf_size));)k(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>i&&(e.adler=c(e.adler,a.pending_buf,a.pending-i,i)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){i=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>i&&(e.adler=c(e.adler,a.pending_buf,a.pending-i,i)),y(e),i=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,k(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>i&&(e.adler=c(e.adler,a.pending_buf,a.pending-i,i)),0===l&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){i=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>i&&(e.adler=c(e.adler,a.pending_buf,a.pending-i,i)),y(e),i=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,k(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>i&&(e.adler=c(e.adler,a.pending_buf,a.pending-i,i)),0===l&&(a.status=f)}else a.status=f;if(a.status===f&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&y(e),a.pending+2<=a.pending_buf_size&&(k(a,255&e.adler),k(a,e.adler>>8&255),e.adler=0,a.status=p)):a.status=p),0!==a.pending){if(y(e),0===e.avail_out)return a.last_flush=-1,0}else if(0===e.avail_in&&g(t)<=g(n)&&4!==t)return m(e,-5);if(a.status===h&&0!==e.avail_in)return m(e,-5);if(0!==e.avail_in||0!==a.lookahead||0!==t&&a.status!==h){var x=2===a.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(_(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(a,t):3===a.strategy?function(e,t){for(var n,r,a,i,c=e.window;;){if(e.lookahead<=u){if(_(e),e.lookahead<=u&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=c[a=e.strstart-1])===c[++a]&&r===c[++a]&&r===c[++a]){i=e.strstart+u;do{}while(r===c[++a]&&r===c[++a]&&r===c[++a]&&r===c[++a]&&r===c[++a]&&r===c[++a]&&r===c[++a]&&r===c[++a]&&a<i);e.match_length=u-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=o._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(a,t):r[a.level].func(a,t);if(3!==x&&4!==x||(a.status=h),1===x||3===x)return 0===e.avail_out&&(a.last_flush=-1),0;if(2===x&&(1===t?o._tr_align(a):5!==t&&(o._tr_stored_block(a,0,0,!1),3===t&&(v(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),y(e),0===e.avail_out))return a.last_flush=-1,0}return 4!==t?0:a.wrap<=0?1:(2===a.wrap?(k(a,255&e.adler),k(a,e.adler>>8&255),k(a,e.adler>>16&255),k(a,e.adler>>24&255),k(a,255&e.total_in),k(a,e.total_in>>8&255),k(a,e.total_in>>16&255),k(a,e.total_in>>24&255)):(w(a,e.adler>>>16),w(a,65535&e.adler)),y(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&t!==f&&t!==p&&t!==h?m(e,s):(e.state=null,t===p?m(e,-3):0):s},t.deflateSetDictionary=function(e,t){var n,r,o,c,l,u,d,f,p=t.length;if(!e||!e.state)return s;if(2===(c=(n=e.state).wrap)||1===c&&42!==n.status||n.lookahead)return s;for(1===c&&(e.adler=i(e.adler,t,p,0)),n.wrap=0,p>=n.w_size&&(0===c&&(v(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new a.Buf8(n.w_size),a.arraySet(f,t,p-n.w_size,n.w_size,0),t=f,p=n.w_size),l=e.avail_in,u=e.next_in,d=e.input,e.avail_in=p,e.next_in=0,e.input=t,_(n);n.lookahead>=3;){r=n.strstart,o=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--o);n.strstart=r,n.lookahead=2,_(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=u,e.input=d,e.avail_in=l,n.wrap=c,0},t.deflateInfo="pako deflate (from Nodeca project)"},1579:function(e,t,n){"use strict";var r=n(244);function a(e){for(var t=e.length;--t>=0;)e[t]=0}var o=256,i=286,c=30,l=15,s=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],u=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],f=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],p=new Array(576);a(p);var h=new Array(60);a(h);var m=new Array(512);a(m);var g=new Array(256);a(g);var v=new Array(29);a(v);var y,b,k,w=new Array(c);function x(e,t,n,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}function _(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function E(e){return e<256?m[e]:m[256+(e>>>7)]}function C(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function O(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,C(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function S(e,t,n){O(e,n[2*t],n[2*t+1])}function R(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function j(e,t,n){var r,a,o=new Array(16),i=0;for(r=1;r<=l;r++)o[r]=i=i+n[r-1]<<1;for(a=0;a<=t;a++){var c=e[2*a+1];0!==c&&(e[2*a]=R(o[c]++,c))}}function P(e){var t;for(t=0;t<i;t++)e.dyn_ltree[2*t]=0;for(t=0;t<c;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function A(e){e.bi_valid>8?C(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function T(e,t,n,r){var a=2*t,o=2*n;return e[a]<e[o]||e[a]===e[o]&&r[t]<=r[n]}function D(e,t,n){for(var r=e.heap[n],a=n<<1;a<=e.heap_len&&(a<e.heap_len&&T(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!T(t,r,e.heap[a],e.depth));)e.heap[n]=e.heap[a],n=a,a<<=1;e.heap[n]=r}function M(e,t,n){var r,a,i,c,l=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],a=e.pending_buf[e.l_buf+l],l++,0===r?S(e,a,t):(S(e,(i=g[a])+o+1,t),0!==(c=s[i])&&O(e,a-=v[i],c),S(e,i=E(--r),n),0!==(c=u[i])&&O(e,r-=w[i],c))}while(l<e.last_lit);S(e,256,t)}function N(e,t){var n,r,a,o=t.dyn_tree,i=t.stat_desc.static_tree,c=t.stat_desc.has_stree,s=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<s;n++)0!==o[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(a=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[a]=0,e.opt_len--,c&&(e.static_len-=i[2*a+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)D(e,o,n);a=s;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],D(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*a]=o[2*n]+o[2*r],e.depth[a]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=a,e.heap[1]=a++,D(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,a,o,i,c,s=t.dyn_tree,u=t.max_code,d=t.stat_desc.static_tree,f=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,m=t.stat_desc.max_length,g=0;for(o=0;o<=l;o++)e.bl_count[o]=0;for(s[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(o=s[2*s[2*(r=e.heap[n])+1]+1]+1)>m&&(o=m,g++),s[2*r+1]=o,r>u||(e.bl_count[o]++,i=0,r>=h&&(i=p[r-h]),c=s[2*r],e.opt_len+=c*(o+i),f&&(e.static_len+=c*(d[2*r+1]+i)));if(0!==g){do{for(o=m-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[m]--,g-=2}while(g>0);for(o=m;0!==o;o--)for(r=e.bl_count[o];0!==r;)(a=e.heap[--n])>u||(s[2*a+1]!==o&&(e.opt_len+=(o-s[2*a+1])*s[2*a],s[2*a+1]=o),r--)}}(e,t),j(o,u,e.bl_count)}function L(e,t,n){var r,a,o=-1,i=t[1],c=0,l=7,s=4;for(0===i&&(l=138,s=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)a=i,i=t[2*(r+1)+1],++c<l&&a===i||(c<s?e.bl_tree[2*a]+=c:0!==a?(a!==o&&e.bl_tree[2*a]++,e.bl_tree[32]++):c<=10?e.bl_tree[34]++:e.bl_tree[36]++,c=0,o=a,0===i?(l=138,s=3):a===i?(l=6,s=3):(l=7,s=4))}function I(e,t,n){var r,a,o=-1,i=t[1],c=0,l=7,s=4;for(0===i&&(l=138,s=3),r=0;r<=n;r++)if(a=i,i=t[2*(r+1)+1],!(++c<l&&a===i)){if(c<s)do{S(e,a,e.bl_tree)}while(0!=--c);else 0!==a?(a!==o&&(S(e,a,e.bl_tree),c--),S(e,16,e.bl_tree),O(e,c-3,2)):c<=10?(S(e,17,e.bl_tree),O(e,c-3,3)):(S(e,18,e.bl_tree),O(e,c-11,7));c=0,o=a,0===i?(l=138,s=3):a===i?(l=6,s=3):(l=7,s=4)}}a(w);var B=!1;function z(e,t,n,a){O(e,0+(a?1:0),3),function(e,t,n,a){A(e),a&&(C(e,n),C(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}t._tr_init=function(e){B||(!function(){var e,t,n,r,a,o=new Array(16);for(n=0,r=0;r<28;r++)for(v[r]=n,e=0;e<1<<s[r];e++)g[n++]=r;for(g[n-1]=r,a=0,r=0;r<16;r++)for(w[r]=a,e=0;e<1<<u[r];e++)m[a++]=r;for(a>>=7;r<c;r++)for(w[r]=a<<7,e=0;e<1<<u[r]-7;e++)m[256+a++]=r;for(t=0;t<=l;t++)o[t]=0;for(e=0;e<=143;)p[2*e+1]=8,e++,o[8]++;for(;e<=255;)p[2*e+1]=9,e++,o[9]++;for(;e<=279;)p[2*e+1]=7,e++,o[7]++;for(;e<=287;)p[2*e+1]=8,e++,o[8]++;for(j(p,287,o),e=0;e<c;e++)h[2*e+1]=5,h[2*e]=R(e,5);y=new x(p,s,257,i,l),b=new x(h,u,0,c,l),k=new x(new Array(0),d,0,19,7)}(),B=!0),e.l_desc=new _(e.dyn_ltree,y),e.d_desc=new _(e.dyn_dtree,b),e.bl_desc=new _(e.bl_tree,k),e.bi_buf=0,e.bi_valid=0,P(e)},t._tr_stored_block=z,t._tr_flush_block=function(e,t,n,r){var a,i,c=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<o;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),N(e,e.l_desc),N(e,e.d_desc),c=function(e){var t;for(L(e,e.dyn_ltree,e.l_desc.max_code),L(e,e.dyn_dtree,e.d_desc.max_code),N(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*f[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=a&&(a=i)):a=i=n+5,n+4<=a&&-1!==t?z(e,t,n,r):4===e.strategy||i===a?(O(e,2+(r?1:0),3),M(e,p,h)):(O(e,4+(r?1:0),3),function(e,t,n,r){var a;for(O(e,t-257,5),O(e,n-1,5),O(e,r-4,4),a=0;a<r;a++)O(e,e.bl_tree[2*f[a]+1],3);I(e,e.dyn_ltree,t-1),I(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,c+1),M(e,e.dyn_ltree,e.dyn_dtree)),P(e),r&&A(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(g[n]+o+1)]++,e.dyn_dtree[2*E(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){O(e,2,3),S(e,256,p),function(e){16===e.bi_valid?(C(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},1580:function(e,t,n){"use strict";var r=n(1581),a=n(244),o=n(632),i=n(634),c=n(509),l=n(633),s=n(1584),u=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==i.Z_OK)throw new Error(c[n]);if(this.header=new s,r.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=o.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=r.inflateSetDictionary(this.strm,t.dictionary))!==i.Z_OK))throw new Error(c[n])}function f(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||c[n.err];return n.result}d.prototype.push=function(e,t){var n,c,l,s,d,f=this.strm,p=this.options.chunkSize,h=this.options.dictionary,m=!1;if(this.ended)return!1;c=t===~~t?t:!0===t?i.Z_FINISH:i.Z_NO_FLUSH,"string"==typeof e?f.input=o.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new a.Buf8(p),f.next_out=0,f.avail_out=p),(n=r.inflate(f,i.Z_NO_FLUSH))===i.Z_NEED_DICT&&h&&(n=r.inflateSetDictionary(this.strm,h)),n===i.Z_BUF_ERROR&&!0===m&&(n=i.Z_OK,m=!1),n!==i.Z_STREAM_END&&n!==i.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&n!==i.Z_STREAM_END&&(0!==f.avail_in||c!==i.Z_FINISH&&c!==i.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(f.output,f.next_out),s=f.next_out-l,d=o.buf2string(f.output,l),f.next_out=s,f.avail_out=p-s,s&&a.arraySet(f.output,f.output,l,s,0),this.onData(d)):this.onData(a.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(m=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==i.Z_STREAM_END);return n===i.Z_STREAM_END&&(c=i.Z_FINISH),c===i.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===i.Z_OK):c!==i.Z_SYNC_FLUSH||(this.onEnd(i.Z_OK),f.avail_out=0,!0)},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===i.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=d,t.inflate=f,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},t.ungzip=f},1581:function(e,t,n){"use strict";var r=n(244),a=n(630),o=n(631),i=n(1582),c=n(1583),l=-2,s=12,u=30;function d(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function f(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function p(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):l}function h(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,p(e)):l}function m(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?l:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,h(e))):l}function g(e,t){var n,r;return e?(r=new f,e.state=r,r.window=null,0!==(n=m(e,t))&&(e.state=null),n):l}var v,y,b=!0;function k(e){if(b){var t;for(v=new r.Buf32(512),y=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(c(1,e.lens,0,288,v,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;c(2,e.lens,0,32,y,0,e.work,{bits:5}),b=!1}e.lencode=v,e.lenbits=9,e.distcode=y,e.distbits=5}function w(e,t,n,a){var o,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new r.Buf8(i.wsize)),a>=i.wsize?(r.arraySet(i.window,t,n-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):((o=i.wsize-i.wnext)>a&&(o=a),r.arraySet(i.window,t,n-a,o,i.wnext),(a-=o)?(r.arraySet(i.window,t,n-a,a,0),i.wnext=a,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0}t.inflateReset=h,t.inflateReset2=m,t.inflateResetKeep=p,t.inflateInit=function(e){return g(e,15)},t.inflateInit2=g,t.inflate=function(e,t){var n,f,p,h,m,g,v,y,b,x,_,E,C,O,S,R,j,P,A,T,D,M,N,L,I=0,B=new r.Buf8(4),z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return l;(n=e.state).mode===s&&(n.mode=13),m=e.next_out,p=e.output,v=e.avail_out,h=e.next_in,f=e.input,g=e.avail_in,y=n.hold,b=n.bits,x=g,_=v,M=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;b<16;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}if(2&n.wrap&&35615===y){n.check=0,B[0]=255&y,B[1]=y>>>8&255,n.check=o(n.check,B,2,0),y=0,b=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&y)<<8)+(y>>8))%31){e.msg="incorrect header check",n.mode=u;break}if(8!=(15&y)){e.msg="unknown compression method",n.mode=u;break}if(b-=4,D=8+(15&(y>>>=4)),0===n.wbits)n.wbits=D;else if(D>n.wbits){e.msg="invalid window size",n.mode=u;break}n.dmax=1<<D,e.adler=n.check=1,n.mode=512&y?10:s,y=0,b=0;break;case 2:for(;b<16;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}if(n.flags=y,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=u;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=u;break}n.head&&(n.head.text=y>>8&1),512&n.flags&&(B[0]=255&y,B[1]=y>>>8&255,n.check=o(n.check,B,2,0)),y=0,b=0,n.mode=3;case 3:for(;b<32;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}n.head&&(n.head.time=y),512&n.flags&&(B[0]=255&y,B[1]=y>>>8&255,B[2]=y>>>16&255,B[3]=y>>>24&255,n.check=o(n.check,B,4,0)),y=0,b=0,n.mode=4;case 4:for(;b<16;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}n.head&&(n.head.xflags=255&y,n.head.os=y>>8),512&n.flags&&(B[0]=255&y,B[1]=y>>>8&255,n.check=o(n.check,B,2,0)),y=0,b=0,n.mode=5;case 5:if(1024&n.flags){for(;b<16;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}n.length=y,n.head&&(n.head.extra_len=y),512&n.flags&&(B[0]=255&y,B[1]=y>>>8&255,n.check=o(n.check,B,2,0)),y=0,b=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((E=n.length)>g&&(E=g),E&&(n.head&&(D=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,f,h,E,D)),512&n.flags&&(n.check=o(n.check,f,E,h)),g-=E,h+=E,n.length-=E),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===g)break e;E=0;do{D=f[h+E++],n.head&&D&&n.length<65536&&(n.head.name+=String.fromCharCode(D))}while(D&&E<g);if(512&n.flags&&(n.check=o(n.check,f,E,h)),g-=E,h+=E,D)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===g)break e;E=0;do{D=f[h+E++],n.head&&D&&n.length<65536&&(n.head.comment+=String.fromCharCode(D))}while(D&&E<g);if(512&n.flags&&(n.check=o(n.check,f,E,h)),g-=E,h+=E,D)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;b<16;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}if(y!==(65535&n.check)){e.msg="header crc mismatch",n.mode=u;break}y=0,b=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=s;break;case 10:for(;b<32;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}e.adler=n.check=d(y),y=0,b=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=m,e.avail_out=v,e.next_in=h,e.avail_in=g,n.hold=y,n.bits=b,2;e.adler=n.check=1,n.mode=s;case s:if(5===t||6===t)break e;case 13:if(n.last){y>>>=7&b,b-=7&b,n.mode=27;break}for(;b<3;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}switch(n.last=1&y,b-=1,3&(y>>>=1)){case 0:n.mode=14;break;case 1:if(k(n),n.mode=20,6===t){y>>>=2,b-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=u}y>>>=2,b-=2;break;case 14:for(y>>>=7&b,b-=7&b;b<32;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}if((65535&y)!=(y>>>16^65535)){e.msg="invalid stored block lengths",n.mode=u;break}if(n.length=65535&y,y=0,b=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(E=n.length){if(E>g&&(E=g),E>v&&(E=v),0===E)break e;r.arraySet(p,f,h,E,m),g-=E,h+=E,v-=E,m+=E,n.length-=E;break}n.mode=s;break;case 17:for(;b<14;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}if(n.nlen=257+(31&y),y>>>=5,b-=5,n.ndist=1+(31&y),y>>>=5,b-=5,n.ncode=4+(15&y),y>>>=4,b-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=u;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;b<3;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}n.lens[z[n.have++]]=7&y,y>>>=3,b-=3}for(;n.have<19;)n.lens[z[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,N={bits:n.lenbits},M=c(0,n.lens,0,19,n.lencode,0,n.work,N),n.lenbits=N.bits,M){e.msg="invalid code lengths set",n.mode=u;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;R=(I=n.lencode[y&(1<<n.lenbits)-1])>>>16&255,j=65535&I,!((S=I>>>24)<=b);){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}if(j<16)y>>>=S,b-=S,n.lens[n.have++]=j;else{if(16===j){for(L=S+2;b<L;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}if(y>>>=S,b-=S,0===n.have){e.msg="invalid bit length repeat",n.mode=u;break}D=n.lens[n.have-1],E=3+(3&y),y>>>=2,b-=2}else if(17===j){for(L=S+3;b<L;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}b-=S,D=0,E=3+(7&(y>>>=S)),y>>>=3,b-=3}else{for(L=S+7;b<L;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}b-=S,D=0,E=11+(127&(y>>>=S)),y>>>=7,b-=7}if(n.have+E>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=u;break}for(;E--;)n.lens[n.have++]=D}}if(n.mode===u)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=u;break}if(n.lenbits=9,N={bits:n.lenbits},M=c(1,n.lens,0,n.nlen,n.lencode,0,n.work,N),n.lenbits=N.bits,M){e.msg="invalid literal/lengths set",n.mode=u;break}if(n.distbits=6,n.distcode=n.distdyn,N={bits:n.distbits},M=c(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,N),n.distbits=N.bits,M){e.msg="invalid distances set",n.mode=u;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(g>=6&&v>=258){e.next_out=m,e.avail_out=v,e.next_in=h,e.avail_in=g,n.hold=y,n.bits=b,i(e,_),m=e.next_out,p=e.output,v=e.avail_out,h=e.next_in,f=e.input,g=e.avail_in,y=n.hold,b=n.bits,n.mode===s&&(n.back=-1);break}for(n.back=0;R=(I=n.lencode[y&(1<<n.lenbits)-1])>>>16&255,j=65535&I,!((S=I>>>24)<=b);){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}if(R&&0==(240&R)){for(P=S,A=R,T=j;R=(I=n.lencode[T+((y&(1<<P+A)-1)>>P)])>>>16&255,j=65535&I,!(P+(S=I>>>24)<=b);){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}y>>>=P,b-=P,n.back+=P}if(y>>>=S,b-=S,n.back+=S,n.length=j,0===R){n.mode=26;break}if(32&R){n.back=-1,n.mode=s;break}if(64&R){e.msg="invalid literal/length code",n.mode=u;break}n.extra=15&R,n.mode=22;case 22:if(n.extra){for(L=n.extra;b<L;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}n.length+=y&(1<<n.extra)-1,y>>>=n.extra,b-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;R=(I=n.distcode[y&(1<<n.distbits)-1])>>>16&255,j=65535&I,!((S=I>>>24)<=b);){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}if(0==(240&R)){for(P=S,A=R,T=j;R=(I=n.distcode[T+((y&(1<<P+A)-1)>>P)])>>>16&255,j=65535&I,!(P+(S=I>>>24)<=b);){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}y>>>=P,b-=P,n.back+=P}if(y>>>=S,b-=S,n.back+=S,64&R){e.msg="invalid distance code",n.mode=u;break}n.offset=j,n.extra=15&R,n.mode=24;case 24:if(n.extra){for(L=n.extra;b<L;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}n.offset+=y&(1<<n.extra)-1,y>>>=n.extra,b-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=u;break}n.mode=25;case 25:if(0===v)break e;if(E=_-v,n.offset>E){if((E=n.offset-E)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=u;break}E>n.wnext?(E-=n.wnext,C=n.wsize-E):C=n.wnext-E,E>n.length&&(E=n.length),O=n.window}else O=p,C=m-n.offset,E=n.length;E>v&&(E=v),v-=E,n.length-=E;do{p[m++]=O[C++]}while(--E);0===n.length&&(n.mode=21);break;case 26:if(0===v)break e;p[m++]=n.length,v--,n.mode=21;break;case 27:if(n.wrap){for(;b<32;){if(0===g)break e;g--,y|=f[h++]<<b,b+=8}if(_-=v,e.total_out+=_,n.total+=_,_&&(e.adler=n.check=n.flags?o(n.check,p,_,m-_):a(n.check,p,_,m-_)),_=v,(n.flags?y:d(y))!==n.check){e.msg="incorrect data check",n.mode=u;break}y=0,b=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;b<32;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}if(y!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=u;break}y=0,b=0}n.mode=29;case 29:M=1;break e;case u:M=-3;break e;case 31:return-4;default:return l}return e.next_out=m,e.avail_out=v,e.next_in=h,e.avail_in=g,n.hold=y,n.bits=b,(n.wsize||_!==e.avail_out&&n.mode<u&&(n.mode<27||4!==t))&&w(e,e.output,e.next_out,_-e.avail_out)?(n.mode=31,-4):(x-=e.avail_in,_-=e.avail_out,e.total_in+=x,e.total_out+=_,n.total+=_,n.wrap&&_&&(e.adler=n.check=n.flags?o(n.check,p,_,e.next_out-_):a(n.check,p,_,e.next_out-_)),e.data_type=n.bits+(n.last?64:0)+(n.mode===s?128:0)+(20===n.mode||15===n.mode?256:0),(0===x&&0===_||4===t)&&0===M&&(M=-5),M)},t.inflateEnd=function(e){if(!e||!e.state)return l;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?l:(n.head=t,t.done=!1,0):l},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?l:11===n.mode&&a(1,t,r,0)!==n.check?-3:w(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):l},t.inflateInfo="pako inflate (from Nodeca project)"},1582:function(e,t,n){"use strict";e.exports=function(e,t){var n,r,a,o,i,c,l,s,u,d,f,p,h,m,g,v,y,b,k,w,x,_,E,C,O;n=e.state,r=e.next_in,C=e.input,a=r+(e.avail_in-5),o=e.next_out,O=e.output,i=o-(t-e.avail_out),c=o+(e.avail_out-257),l=n.dmax,s=n.wsize,u=n.whave,d=n.wnext,f=n.window,p=n.hold,h=n.bits,m=n.lencode,g=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{h<15&&(p+=C[r++]<<h,h+=8,p+=C[r++]<<h,h+=8),b=m[p&v];t:for(;;){if(p>>>=k=b>>>24,h-=k,0===(k=b>>>16&255))O[o++]=65535&b;else{if(!(16&k)){if(0==(64&k)){b=m[(65535&b)+(p&(1<<k)-1)];continue t}if(32&k){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&b,(k&=15)&&(h<k&&(p+=C[r++]<<h,h+=8),w+=p&(1<<k)-1,p>>>=k,h-=k),h<15&&(p+=C[r++]<<h,h+=8,p+=C[r++]<<h,h+=8),b=g[p&y];n:for(;;){if(p>>>=k=b>>>24,h-=k,!(16&(k=b>>>16&255))){if(0==(64&k)){b=g[(65535&b)+(p&(1<<k)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(x=65535&b,h<(k&=15)&&(p+=C[r++]<<h,(h+=8)<k&&(p+=C[r++]<<h,h+=8)),(x+=p&(1<<k)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=k,h-=k,x>(k=o-i)){if((k=x-k)>u&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(_=0,E=f,0===d){if(_+=s-k,k<w){w-=k;do{O[o++]=f[_++]}while(--k);_=o-x,E=O}}else if(d<k){if(_+=s+d-k,(k-=d)<w){w-=k;do{O[o++]=f[_++]}while(--k);if(_=0,d<w){w-=k=d;do{O[o++]=f[_++]}while(--k);_=o-x,E=O}}}else if(_+=d-k,k<w){w-=k;do{O[o++]=f[_++]}while(--k);_=o-x,E=O}for(;w>2;)O[o++]=E[_++],O[o++]=E[_++],O[o++]=E[_++],w-=3;w&&(O[o++]=E[_++],w>1&&(O[o++]=E[_++]))}else{_=o-x;do{O[o++]=O[_++],O[o++]=O[_++],O[o++]=O[_++],w-=3}while(w>2);w&&(O[o++]=O[_++],w>1&&(O[o++]=O[_++]))}break}}break}}while(r<a&&o<c);r-=w=h>>3,p&=(1<<(h-=w<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<a?a-r+5:5-(r-a),e.avail_out=o<c?c-o+257:257-(o-c),n.hold=p,n.bits=h}},1583:function(e,t,n){"use strict";var r=n(244),a=15,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,s,u,d,f,p){var h,m,g,v,y,b,k,w,x,_=p.bits,E=0,C=0,O=0,S=0,R=0,j=0,P=0,A=0,T=0,D=0,M=null,N=0,L=new r.Buf16(16),I=new r.Buf16(16),B=null,z=0;for(E=0;E<=a;E++)L[E]=0;for(C=0;C<s;C++)L[t[n+C]]++;for(R=_,S=a;S>=1&&0===L[S];S--);if(R>S&&(R=S),0===S)return u[d++]=20971520,u[d++]=20971520,p.bits=1,0;for(O=1;O<S&&0===L[O];O++);for(R<O&&(R=O),A=1,E=1;E<=a;E++)if(A<<=1,(A-=L[E])<0)return-1;if(A>0&&(0===e||1!==S))return-1;for(I[1]=0,E=1;E<a;E++)I[E+1]=I[E]+L[E];for(C=0;C<s;C++)0!==t[n+C]&&(f[I[t[n+C]]++]=C);if(0===e?(M=B=f,b=19):1===e?(M=o,N-=257,B=i,z-=257,b=256):(M=c,B=l,b=-1),D=0,C=0,E=O,y=d,j=R,P=0,g=-1,v=(T=1<<R)-1,1===e&&T>852||2===e&&T>592)return 1;for(;;){k=E-P,f[C]<b?(w=0,x=f[C]):f[C]>b?(w=B[z+f[C]],x=M[N+f[C]]):(w=96,x=0),h=1<<E-P,O=m=1<<j;do{u[y+(D>>P)+(m-=h)]=k<<24|w<<16|x|0}while(0!==m);for(h=1<<E-1;D&h;)h>>=1;if(0!==h?(D&=h-1,D+=h):D=0,C++,0==--L[E]){if(E===S)break;E=t[n+f[C]]}if(E>R&&(D&v)!==g){for(0===P&&(P=R),y+=O,A=1<<(j=E-P);j+P<S&&!((A-=L[j+P])<=0);)j++,A<<=1;if(T+=1<<j,1===e&&T>852||2===e&&T>592)return 1;u[g=D&v]=R<<24|j<<16|y-d|0}}return 0!==D&&(u[y+D]=E-P<<24|64<<16|0),p.bits=R,0}},1584:function(e,t,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},1585:function(e,t,n){"use strict";var r=n(1586),a=n(1587),o=n(635),i=n(1588),c=n(1589);function l(e){if(!(this instanceof l))return new l(e);var t=r(e);this.segments=t.segments,this.err=t.err,this.__stack=[]}l.from=function(e){if("string"==typeof e)return new l(e);if(e instanceof l){var t=new l("");return t.err=e.err,t.segments=e.segments.map((function(e){return e.slice()})),t.__stack=e.__stack.map((function(e){return o().matrix(e.toArray())})),t}throw new Error("SvgPath.from: invalid param type "+e)},l.prototype.__matrix=function(e){var t,n=this;e.queue.length&&this.iterate((function(r,a,o,i){var l,s,u,d;switch(r[0]){case"v":s=0===(l=e.calc(0,r[1],!0))[0]?["v",l[1]]:["l",l[0],l[1]];break;case"V":s=(l=e.calc(o,r[1],!1))[0]===e.calc(o,i,!1)[0]?["V",l[1]]:["L",l[0],l[1]];break;case"h":s=0===(l=e.calc(r[1],0,!0))[1]?["h",l[0]]:["l",l[0],l[1]];break;case"H":s=(l=e.calc(r[1],i,!1))[1]===e.calc(o,i,!1)[1]?["H",l[0]]:["L",l[0],l[1]];break;case"a":case"A":var f=e.toArray(),p=c(r[1],r[2],r[3]).transform(f);if(f[0]*f[3]-f[1]*f[2]<0&&(r[5]=r[5]?"0":"1"),l=e.calc(r[6],r[7],"a"===r[0]),"A"===r[0]&&r[6]===o&&r[7]===i||"a"===r[0]&&0===r[6]&&0===r[7]){s=["a"===r[0]?"l":"L",l[0],l[1]];break}s=p.isDegenerate()?["a"===r[0]?"l":"L",l[0],l[1]]:[r[0],p.rx,p.ry,p.ax,r[4],r[5],l[0],l[1]];break;case"m":d=a>0,s=["m",(l=e.calc(r[1],r[2],d))[0],l[1]];break;default:for(s=[u=r[0]],d=u.toLowerCase()===u,t=1;t<r.length;t+=2)l=e.calc(r[t],r[t+1],d),s.push(l[0],l[1])}n.segments[a]=s}),!0)},l.prototype.__evaluateStack=function(){var e,t;if(this.__stack.length){if(1===this.__stack.length)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(e=o(),t=this.__stack.length;--t>=0;)e.matrix(this.__stack[t].toArray());this.__matrix(e),this.__stack=[]}},l.prototype.toString=function(){var e,t,n=[];this.__evaluateStack();for(var r=0;r<this.segments.length;r++)t=this.segments[r][0],e=r>0&&"m"!==t&&"M"!==t&&t===this.segments[r-1][0],n=n.concat(e?this.segments[r].slice(1):this.segments[r]);return n.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")},l.prototype.translate=function(e,t){return this.__stack.push(o().translate(e,t||0)),this},l.prototype.scale=function(e,t){return this.__stack.push(o().scale(e,t||0===t?t:e)),this},l.prototype.rotate=function(e,t,n){return this.__stack.push(o().rotate(e,t||0,n||0)),this},l.prototype.skewX=function(e){return this.__stack.push(o().skewX(e)),this},l.prototype.skewY=function(e){return this.__stack.push(o().skewY(e)),this},l.prototype.matrix=function(e){return this.__stack.push(o().matrix(e)),this},l.prototype.transform=function(e){return e.trim()?(this.__stack.push(a(e)),this):this},l.prototype.round=function(e){var t,n=0,r=0,a=0,o=0;return e=e||0,this.__evaluateStack(),this.segments.forEach((function(i){var c=i[0].toLowerCase()===i[0];switch(i[0]){case"H":case"h":return c&&(i[1]+=a),a=i[1]-i[1].toFixed(e),void(i[1]=+i[1].toFixed(e));case"V":case"v":return c&&(i[1]+=o),o=i[1]-i[1].toFixed(e),void(i[1]=+i[1].toFixed(e));case"Z":case"z":return a=n,void(o=r);case"M":case"m":return c&&(i[1]+=a,i[2]+=o),a=i[1]-i[1].toFixed(e),o=i[2]-i[2].toFixed(e),n=a,r=o,i[1]=+i[1].toFixed(e),void(i[2]=+i[2].toFixed(e));case"A":case"a":return c&&(i[6]+=a,i[7]+=o),a=i[6]-i[6].toFixed(e),o=i[7]-i[7].toFixed(e),i[1]=+i[1].toFixed(e),i[2]=+i[2].toFixed(e),i[3]=+i[3].toFixed(e+2),i[6]=+i[6].toFixed(e),void(i[7]=+i[7].toFixed(e));default:return t=i.length,c&&(i[t-2]+=a,i[t-1]+=o),a=i[t-2]-i[t-2].toFixed(e),o=i[t-1]-i[t-1].toFixed(e),void i.forEach((function(t,n){n&&(i[n]=+i[n].toFixed(e))}))}})),this},l.prototype.iterate=function(e,t){var n,r,a,o=this.segments,i={},c=!1,l=0,s=0,u=0,d=0;if(t||this.__evaluateStack(),o.forEach((function(t,n){var r=e(t,n,l,s);Array.isArray(r)&&(i[n]=r,c=!0);var a=t[0]===t[0].toLowerCase();switch(t[0]){case"m":case"M":return l=t[1]+(a?l:0),s=t[2]+(a?s:0),u=l,void(d=s);case"h":case"H":return void(l=t[1]+(a?l:0));case"v":case"V":return void(s=t[1]+(a?s:0));case"z":case"Z":return l=u,void(s=d);default:l=t[t.length-2]+(a?l:0),s=t[t.length-1]+(a?s:0)}})),!c)return this;for(a=[],n=0;n<o.length;n++)if(void 0!==i[n])for(r=0;r<i[n].length;r++)a.push(i[n][r]);else a.push(o[n]);return this.segments=a,this},l.prototype.abs=function(){return this.iterate((function(e,t,n,r){var a,o=e[0],i=o.toUpperCase();if(o!==i)switch(e[0]=i,o){case"v":return void(e[1]+=r);case"a":return e[6]+=n,void(e[7]+=r);default:for(a=1;a<e.length;a++)e[a]+=a%2?n:r}}),!0),this},l.prototype.rel=function(){return this.iterate((function(e,t,n,r){var a,o=e[0],i=o.toLowerCase();if(o!==i&&(0!==t||"M"!==o))switch(e[0]=i,o){case"V":return void(e[1]-=r);case"A":return e[6]-=n,void(e[7]-=r);default:for(a=1;a<e.length;a++)e[a]-=a%2?n:r}}),!0),this},l.prototype.unarc=function(){return this.iterate((function(e,t,n,r){var a,o,c,l=[],s=e[0];return"A"!==s&&"a"!==s?null:("a"===s?(o=n+e[6],c=r+e[7]):(o=e[6],c=e[7]),0===(a=i(n,r,o,c,e[4],e[5],e[1],e[2],e[3])).length?[["a"===e[0]?"l":"L",e[6],e[7]]]:(a.forEach((function(e){l.push(["C",e[2],e[3],e[4],e[5],e[6],e[7]])})),l))})),this},l.prototype.unshort=function(){var e,t,n,r,a,o=this.segments;return this.iterate((function(i,c,l,s){var u,d=i[0],f=d.toUpperCase();c&&("T"===f?(u="t"===d,"Q"===(n=o[c-1])[0]?(e=n[1]-l,t=n[2]-s):"q"===n[0]?(e=n[1]-n[3],t=n[2]-n[4]):(e=0,t=0),r=-e,a=-t,u||(r+=l,a+=s),o[c]=[u?"q":"Q",r,a,i[1],i[2]]):"S"===f&&(u="s"===d,"C"===(n=o[c-1])[0]?(e=n[3]-l,t=n[4]-s):"c"===n[0]?(e=n[3]-n[5],t=n[4]-n[6]):(e=0,t=0),r=-e,a=-t,u||(r+=l,a+=s),o[c]=[u?"c":"C",r,a,i[1],i[2],i[3],i[4]]))})),this},e.exports=l},1586:function(e,t,n){"use strict";var r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},a=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function o(e){return e>=48&&e<=57}function i(e){return e>=48&&e<=57||43===e||45===e||46===e}function c(e){this.index=0,this.path=e,this.max=e.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function l(e){for(;e.index<e.max&&(10===(t=e.path.charCodeAt(e.index))||13===t||8232===t||8233===t||32===t||9===t||11===t||12===t||160===t||t>=5760&&a.indexOf(t)>=0);)e.index++;var t}function s(e){var t=e.path.charCodeAt(e.index);return 48===t?(e.param=0,void e.index++):49===t?(e.param=1,void e.index++):void(e.err="SvgPath: arc flag can be 0 or 1 only (at pos "+e.index+")")}function u(e){var t,n=e.index,r=n,a=e.max,i=!1,c=!1,l=!1,s=!1;if(r>=a)e.err="SvgPath: missed param (at pos "+r+")";else if(43!==(t=e.path.charCodeAt(r))&&45!==t||(t=++r<a?e.path.charCodeAt(r):0),o(t)||46===t){if(46!==t){if(i=48===t,t=++r<a?e.path.charCodeAt(r):0,i&&r<a&&t&&o(t))return void(e.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+n+")");for(;r<a&&o(e.path.charCodeAt(r));)r++,c=!0;t=r<a?e.path.charCodeAt(r):0}if(46===t){for(s=!0,r++;o(e.path.charCodeAt(r));)r++,l=!0;t=r<a?e.path.charCodeAt(r):0}if(101===t||69===t){if(s&&!c&&!l)return void(e.err="SvgPath: invalid float exponent (at pos "+r+")");if(43!==(t=++r<a?e.path.charCodeAt(r):0)&&45!==t||r++,!(r<a&&o(e.path.charCodeAt(r))))return void(e.err="SvgPath: invalid float exponent (at pos "+r+")");for(;r<a&&o(e.path.charCodeAt(r));)r++}e.index=r,e.param=parseFloat(e.path.slice(n,r))+0}else e.err="SvgPath: param should start with 0..9 or `.` (at pos "+r+")"}function d(e){var t,n;n=(t=e.path[e.segmentStart]).toLowerCase();var a=e.data;if("m"===n&&a.length>2&&(e.result.push([t,a[0],a[1]]),a=a.slice(2),n="l",t="m"===t?"l":"L"),"r"===n)e.result.push([t].concat(a));else for(;a.length>=r[n]&&(e.result.push([t].concat(a.splice(0,r[n]))),r[n]););}function f(e){var t,n,a,o,c,f=e.max;if(e.segmentStart=e.index,t=e.path.charCodeAt(e.index),n=97==(32|t),function(e){switch(32|e){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}(t))if(o=r[e.path[e.index].toLowerCase()],e.index++,l(e),e.data=[],o){for(a=!1;;){for(c=o;c>0;c--){if(!n||3!==c&&4!==c?u(e):s(e),e.err.length)return;e.data.push(e.param),l(e),a=!1,e.index<f&&44===e.path.charCodeAt(e.index)&&(e.index++,l(e),a=!0)}if(!a){if(e.index>=e.max)break;if(!i(e.path.charCodeAt(e.index)))break}}d(e)}else d(e);else e.err="SvgPath: bad command "+e.path[e.index]+" (at pos "+e.index+")"}e.exports=function(e){var t=new c(e),n=t.max;for(l(t);t.index<n&&!t.err.length;)f(t);return t.err.length?t.result=[]:t.result.length&&("mM".indexOf(t.result[0][0])<0?(t.err="SvgPath: string should start with `M` or `m`",t.result=[]):t.result[0][0]="M"),{err:t.err,segments:t.result}}},1587:function(e,t,n){"use strict";var r=n(635),a={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},o=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,i=/[\s,]+/;e.exports=function(e){var t,n,c=new r;return e.split(o).forEach((function(e){if(e.length)if(void 0===a[e])switch(n=e.split(i).map((function(e){return+e||0})),t){case"matrix":return void(6===n.length&&c.matrix(n));case"scale":return void(1===n.length?c.scale(n[0],n[0]):2===n.length&&c.scale(n[0],n[1]));case"rotate":return void(1===n.length?c.rotate(n[0],0,0):3===n.length&&c.rotate(n[0],n[1],n[2]));case"translate":return void(1===n.length?c.translate(n[0],0):2===n.length&&c.translate(n[0],n[1]));case"skewX":return void(1===n.length&&c.skewX(n[0]));case"skewY":return void(1===n.length&&c.skewY(n[0]))}else t=e})),c}},1588:function(e,t,n){"use strict";var r=2*Math.PI;function a(e,t,n,r){var a=e*n+t*r;return a>1&&(a=1),a<-1&&(a=-1),(e*r-t*n<0?-1:1)*Math.acos(a)}function o(e,t){var n=4/3*Math.tan(t/4),r=Math.cos(e),a=Math.sin(e),o=Math.cos(e+t),i=Math.sin(e+t);return[r,a,r-a*n,a+r*n,o+i*n,i-o*n,o,i]}e.exports=function(e,t,n,i,c,l,s,u,d){var f=Math.sin(d*r/360),p=Math.cos(d*r/360),h=p*(e-n)/2+f*(t-i)/2,m=-f*(e-n)/2+p*(t-i)/2;if(0===h&&0===m)return[];if(0===s||0===u)return[];s=Math.abs(s),u=Math.abs(u);var g=h*h/(s*s)+m*m/(u*u);g>1&&(s*=Math.sqrt(g),u*=Math.sqrt(g));var v=function(e,t,n,o,i,c,l,s,u,d){var f=d*(e-n)/2+u*(t-o)/2,p=-u*(e-n)/2+d*(t-o)/2,h=l*l,m=s*s,g=f*f,v=p*p,y=h*m-h*v-m*g;y<0&&(y=0),y/=h*v+m*g;var b=(y=Math.sqrt(y)*(i===c?-1:1))*l/s*p,k=y*-s/l*f,w=d*b-u*k+(e+n)/2,x=u*b+d*k+(t+o)/2,_=(f-b)/l,E=(p-k)/s,C=(-f-b)/l,O=(-p-k)/s,S=a(1,0,_,E),R=a(_,E,C,O);return 0===c&&R>0&&(R-=r),1===c&&R<0&&(R+=r),[w,x,S,R]}(e,t,n,i,c,l,s,u,f,p),y=[],b=v[2],k=v[3],w=Math.max(Math.ceil(Math.abs(k)/(r/4)),1);k/=w;for(var x=0;x<w;x++)y.push(o(b,k)),b+=k;return y.map((function(e){for(var t=0;t<e.length;t+=2){var n=e[t+0],r=e[t+1],a=p*(n*=s)-f*(r*=u),o=f*n+p*r;e[t+0]=a+v[0],e[t+1]=o+v[1]}return e}))}},1589:function(e,t,n){"use strict";var r=1e-10,a=Math.PI/180;function o(e,t,n){if(!(this instanceof o))return new o(e,t,n);this.rx=e,this.ry=t,this.ax=n}o.prototype.transform=function(e){var t=Math.cos(this.ax*a),n=Math.sin(this.ax*a),o=[this.rx*(e[0]*t+e[2]*n),this.rx*(e[1]*t+e[3]*n),this.ry*(-e[0]*n+e[2]*t),this.ry*(-e[1]*n+e[3]*t)],i=o[0]*o[0]+o[2]*o[2],c=o[1]*o[1]+o[3]*o[3],l=((o[0]-o[3])*(o[0]-o[3])+(o[2]+o[1])*(o[2]+o[1]))*((o[0]+o[3])*(o[0]+o[3])+(o[2]-o[1])*(o[2]-o[1])),s=(i+c)/2;if(l<r*s)return this.rx=this.ry=Math.sqrt(s),this.ax=0,this;var u=o[0]*o[1]+o[2]*o[3],d=s+(l=Math.sqrt(l))/2,f=s-l/2;return this.ax=Math.abs(u)<r&&Math.abs(d-c)<r?90:180*Math.atan(Math.abs(u)>Math.abs(d-c)?(d-i)/u:u/(d-c))/Math.PI,this.ax>=0?(this.rx=Math.sqrt(d),this.ry=Math.sqrt(f)):(this.ax+=90,this.rx=Math.sqrt(f),this.ry=Math.sqrt(d)),this},o.prototype.isDegenerate=function(){return this.rx<r*this.ry||this.ry<r*this.rx},e.exports=o},1590:function(e,t,n){},1591:function(e,t){e.exports={Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",amp:"&",AMP:"&",andand:"⩕",And:"⩓",and:"∧",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angmsd:"∡",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",apacir:"⩯",ap:"≈",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxHd:"╤",boxhD:"╥",boxHD:"╦",boxhu:"┴",boxHu:"╧",boxhU:"╨",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsolb:"⧅",bsol:"\\",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",capand:"⩄",capbrcup:"⩉",capcap:"⩋",cap:"∩",Cap:"⋒",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cir:"○",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cup:"∪",Cup:"⋓",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",Darr:"↡",dArr:"⇓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",ddagger:"‡",ddarr:"⇊",DD:"ⅅ",dd:"ⅆ",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrowBar:"⤓",downarrow:"↓",DownArrow:"↓",Downarrow:"⇓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVectorBar:"⥖",DownLeftVector:"↽",DownRightTeeVector:"⥟",DownRightVectorBar:"⥗",DownRightVector:"⇁",DownTeeArrow:"↧",DownTee:"⊤",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",Ecirc:"Ê",ecirc:"ê",ecir:"≖",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",edot:"ė",eDot:"≑",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp13:" ",emsp14:" ",emsp:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",ge:"≥",gE:"≧",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",gescc:"⪩",ges:"⩾",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gla:"⪥",gl:"≷",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gt:">",GT:">",Gt:"≫",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",harrcir:"⥈",harr:"↔",hArr:"⇔",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",Im:"ℑ",imof:"⊷",imped:"Ƶ",Implies:"⇒",incare:"℅",in:"∈",infin:"∞",infintie:"⧝",inodot:"ı",intcal:"⊺",int:"∫",Int:"∬",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larrb:"⇤",larrbfs:"⤟",larr:"←",Larr:"↞",lArr:"⇐",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",latail:"⤙",lAtail:"⤛",lat:"⪫",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",LeftArrowBar:"⇤",leftarrow:"←",LeftArrow:"←",Leftarrow:"⇐",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVectorBar:"⥙",LeftDownVector:"⇃",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTeeArrow:"↤",LeftTee:"⊣",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangleBar:"⧏",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVectorBar:"⥘",LeftUpVector:"↿",LeftVectorBar:"⥒",LeftVector:"↼",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",lescc:"⪨",les:"⩽",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",llarr:"⇇",ll:"≪",Ll:"⋘",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoustache:"⎰",lmoust:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftrightarrow:"⟷",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longmapsto:"⟼",longrightarrow:"⟶",LongRightArrow:"⟶",Longrightarrow:"⟹",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",lt:"<",LT:"<",Lt:"≪",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",midast:"*",midcir:"⫰",mid:"∣",middot:"·",minusb:"⊟",minus:"−",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natural:"♮",naturals:"ℕ",natur:"♮",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",ne:"≠",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nlE:"≦̸",nle:"≰",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangleBar:"⧏̸",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangleBar:"⧐̸",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",nparallel:"∦",npar:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",nprec:"⊀",npreceq:"⪯̸",npre:"⪯̸",nrarrc:"⤳̸",nrarr:"↛",nrArr:"⇏",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",Ocirc:"Ô",ocirc:"ô",ocir:"⊚",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",orarr:"↻",Or:"⩔",or:"∨",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",otimesas:"⨶",Otimes:"⨷",otimes:"⊗",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",para:"¶",parallel:"∥",par:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plus:"+",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",prap:"⪷",Pr:"⪻",pr:"≺",prcue:"≼",precapprox:"⪷",prec:"≺",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",pre:"⪯",prE:"⪳",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportional:"∝",Proportion:"∷",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarr:"→",Rarr:"↠",rArr:"⇒",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",Re:"ℜ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrowBar:"⇥",rightarrow:"→",RightArrow:"→",Rightarrow:"⇒",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVectorBar:"⥕",RightDownVector:"⇂",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTeeArrow:"↦",RightTee:"⊢",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangleBar:"⧐",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVectorBar:"⥔",RightUpVector:"↾",RightVectorBar:"⥓",RightVector:"⇀",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoustache:"⎱",rmoust:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",scap:"⪸",Scaron:"Š",scaron:"š",Sc:"⪼",sc:"≻",sccue:"≽",sce:"⪰",scE:"⪴",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdotb:"⊡",sdot:"⋅",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",solbar:"⌿",solb:"⧄",sol:"/",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squ:"□",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succapprox:"⪸",succ:"≻",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup1:"¹",sup2:"²",sup3:"³",sup:"⊃",Sup:"⋑",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",therefore:"∴",Therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",ThinSpace:" ",thinsp:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",timesbar:"⨱",timesb:"⊠",times:"×",timesd:"⨰",tint:"∭",toea:"⤨",topbot:"⌶",topcir:"⫱",top:"⊤",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",uarr:"↑",Uarr:"↟",uArr:"⇑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrowBar:"⤒",uparrow:"↑",UpArrow:"↑",Uparrow:"⇑",UpArrowDownArrow:"⇅",updownarrow:"↕",UpDownArrow:"↕",Updownarrow:"⇕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTeeArrow:"↥",UpTee:"⊥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",Vcy:"В",vcy:"в",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",veebar:"⊻",vee:"∨",Vee:"⋁",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xharr:"⟷",xhArr:"⟺",Xi:"Ξ",xi:"ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",yuml:"ÿ",Yuml:"Ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",zfr:"𝔷",Zfr:"ℨ",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}},1592:function(e,t,n){"use strict";var r=n(87),a=n(1599),o=n(1603),i=n(1604),c=n(1612),l=n(1626),s=n(1639),u=n(638),d=n(399),f={default:n(1641),zero:n(1642),commonmark:n(1643)},p=/^(vbscript|javascript|file|data):/,h=/^data:image\/(gif|png|jpeg|webp);/;function m(e){var t=e.trim().toLowerCase();return!p.test(t)||!!h.test(t)}var g=["http:","https:","mailto:"];function v(e){var t=u.parse(e,!0);if(t.hostname&&(!t.protocol||g.indexOf(t.protocol)>=0))try{t.hostname=d.toASCII(t.hostname)}catch(e){}return u.encode(u.format(t))}function y(e){var t=u.parse(e,!0);if(t.hostname&&(!t.protocol||g.indexOf(t.protocol)>=0))try{t.hostname=d.toUnicode(t.hostname)}catch(e){}return u.decode(u.format(t))}function b(e,t){if(!(this instanceof b))return new b(e,t);t||r.isString(e)||(t=e||{},e="default"),this.inline=new l,this.block=new c,this.core=new i,this.renderer=new o,this.linkify=new s,this.validateLink=m,this.normalizeLink=v,this.normalizeLinkText=y,this.utils=r,this.helpers=r.assign({},a),this.options={},this.configure(e),t&&this.set(t)}b.prototype.set=function(e){return r.assign(this.options,e),this},b.prototype.configure=function(e){var t,n=this;if(r.isString(e)&&!(e=f[t=e]))throw new Error('Wrong `markdown-it` preset "'+t+'", check name');if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&n.set(e.options),e.components&&Object.keys(e.components).forEach((function(t){e.components[t].rules&&n[t].ruler.enableOnly(e.components[t].rules),e.components[t].rules2&&n[t].ruler2.enableOnly(e.components[t].rules2)})),this},b.prototype.enable=function(e,t){var n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach((function(t){n=n.concat(this[t].ruler.enable(e,!0))}),this),n=n.concat(this.inline.ruler2.enable(e,!0));var r=e.filter((function(e){return n.indexOf(e)<0}));if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this},b.prototype.disable=function(e,t){var n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach((function(t){n=n.concat(this[t].ruler.disable(e,!0))}),this),n=n.concat(this.inline.ruler2.disable(e,!0));var r=e.filter((function(e){return n.indexOf(e)<0}));if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this},b.prototype.use=function(e){var t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},b.prototype.parse=function(e,t){if("string"!=typeof e)throw new Error("Input data should be a String");var n=new this.core.State(e,this,t);return this.core.process(n),n.tokens},b.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)},b.prototype.parseInline=function(e,t){var n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens},b.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)},e.exports=b},1593:function(e,t,n){"use strict";var r={};function a(e,t,n){var o,i,c,l,s,u="";for("string"!=typeof t&&(n=t,t=a.defaultChars),void 0===n&&(n=!0),s=function(e){var t,n,a=r[e];if(a)return a;for(a=r[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),/^[0-9a-z]$/i.test(n)?a.push(n):a.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)a[e.charCodeAt(t)]=e[t];return a}(t),o=0,i=e.length;o<i;o++)if(c=e.charCodeAt(o),n&&37===c&&o+2<i&&/^[0-9a-f]{2}$/i.test(e.slice(o+1,o+3)))u+=e.slice(o,o+3),o+=2;else if(c<128)u+=s[c];else if(c>=55296&&c<=57343){if(c>=55296&&c<=56319&&o+1<i&&(l=e.charCodeAt(o+1))>=56320&&l<=57343){u+=encodeURIComponent(e[o]+e[o+1]),o++;continue}u+="%EF%BF%BD"}else u+=encodeURIComponent(e[o]);return u}a.defaultChars=";/?:@&=+$,-_.!~*'()#",a.componentChars="-_.!~*'()",e.exports=a},1594:function(e,t,n){"use strict";var r={};function a(e,t){var n;return"string"!=typeof t&&(t=a.defaultChars),n=function(e){var t,n,a=r[e];if(a)return a;for(a=r[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),a.push(n);for(t=0;t<e.length;t++)a[n=e.charCodeAt(t)]="%"+("0"+n.toString(16).toUpperCase()).slice(-2);return a}(t),e.replace(/(%[a-f0-9]{2})+/gi,(function(e){var t,r,a,o,i,c,l,s="";for(t=0,r=e.length;t<r;t+=3)(a=parseInt(e.slice(t+1,t+3),16))<128?s+=n[a]:192==(224&a)&&t+3<r&&128==(192&(o=parseInt(e.slice(t+4,t+6),16)))?(s+=(l=a<<6&1984|63&o)<128?"��":String.fromCharCode(l),t+=3):224==(240&a)&&t+6<r&&(o=parseInt(e.slice(t+4,t+6),16),i=parseInt(e.slice(t+7,t+9),16),128==(192&o)&&128==(192&i))?(s+=(l=a<<12&61440|o<<6&4032|63&i)<2048||l>=55296&&l<=57343?"���":String.fromCharCode(l),t+=6):240==(248&a)&&t+9<r&&(o=parseInt(e.slice(t+4,t+6),16),i=parseInt(e.slice(t+7,t+9),16),c=parseInt(e.slice(t+10,t+12),16),128==(192&o)&&128==(192&i)&&128==(192&c))?((l=a<<18&1835008|o<<12&258048|i<<6&4032|63&c)<65536||l>1114111?s+="����":(l-=65536,s+=String.fromCharCode(55296+(l>>10),56320+(1023&l))),t+=9):s+="�";return s}))}a.defaultChars=";/?:@&=+$,#",a.componentChars="",e.exports=a},1595:function(e,t,n){"use strict";e.exports=function(e){var t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&-1!==e.hostname.indexOf(":")?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||""}},1596:function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var a=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),s=["%","/","?",";","#"].concat(l),u=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},h={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};r.prototype.parse=function(e,t){var n,r,o,c,l,m=e;if(m=m.trim(),!t&&1===e.split("#").length){var g=i.exec(m);if(g)return this.pathname=g[1],g[2]&&(this.search=g[2]),this}var v=a.exec(m);if(v&&(o=(v=v[0]).toLowerCase(),this.protocol=v,m=m.substr(v.length)),(t||v||m.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(l="//"===m.substr(0,2))||v&&p[v]||(m=m.substr(2),this.slashes=!0)),!p[v]&&(l||v&&!h[v])){var y,b,k=-1;for(n=0;n<u.length;n++)-1!==(c=m.indexOf(u[n]))&&(-1===k||c<k)&&(k=c);for(-1!==(b=-1===k?m.lastIndexOf("@"):m.lastIndexOf("@",k))&&(y=m.slice(0,b),m=m.slice(b+1),this.auth=y),k=-1,n=0;n<s.length;n++)-1!==(c=m.indexOf(s[n]))&&(-1===k||c<k)&&(k=c);-1===k&&(k=m.length),":"===m[k-1]&&k--;var w=m.slice(0,k);m=m.slice(k),this.parseHost(w),this.hostname=this.hostname||"";var x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x){var _=this.hostname.split(/\./);for(n=0,r=_.length;n<r;n++){var E=_[n];if(E&&!E.match(d)){for(var C="",O=0,S=E.length;O<S;O++)E.charCodeAt(O)>127?C+="x":C+=E[O];if(!C.match(d)){var R=_.slice(0,n),j=_.slice(n+1),P=E.match(f);P&&(R.push(P[1]),j.unshift(P[2])),j.length&&(m=j.join(".")+m),this.hostname=R.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var A=m.indexOf("#");-1!==A&&(this.hash=m.substr(A),m=m.slice(0,A));var T=m.indexOf("?");return-1!==T&&(this.search=m.substr(T),m=m.slice(0,T)),m&&(this.pathname=m),h[o]&&this.hostname&&!this.pathname&&(this.pathname=""),this},r.prototype.parseHost=function(e){var t=o.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},e.exports=function(e,t){if(e&&e instanceof r)return e;var n=new r;return n.parse(e,t),n}},1597:function(e,t,n){"use strict";t.Any=n(639),t.Cc=n(640),t.Cf=n(1598),t.P=n(511),t.Z=n(641)},1598:function(e,t){e.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},1599:function(e,t,n){"use strict";t.parseLinkLabel=n(1600),t.parseLinkDestination=n(1601),t.parseLinkTitle=n(1602)},1600:function(e,t,n){"use strict";e.exports=function(e,t,n){var r,a,o,i,c=-1,l=e.posMax,s=e.pos;for(e.pos=t+1,r=1;e.pos<l;){if(93===(o=e.src.charCodeAt(e.pos))&&0===--r){a=!0;break}if(i=e.pos,e.md.inline.skipToken(e),91===o)if(i===e.pos-1)r++;else if(n)return e.pos=s,-1}return a&&(c=e.pos),e.pos=s,c}},1601:function(e,t,n){"use strict";var r=n(87).isSpace,a=n(87).unescapeAll;e.exports=function(e,t,n){var o,i,c=t,l={ok:!1,pos:0,lines:0,str:""};if(60===e.charCodeAt(t)){for(t++;t<n;){if(10===(o=e.charCodeAt(t))||r(o))return l;if(62===o)return l.pos=t+1,l.str=a(e.slice(c+1,t)),l.ok=!0,l;92===o&&t+1<n?t+=2:t++}return l}for(i=0;t<n&&32!==(o=e.charCodeAt(t))&&!(o<32||127===o);)if(92===o&&t+1<n)t+=2;else{if(40===o&&i++,41===o){if(0===i)break;i--}t++}return c===t||0!==i||(l.str=a(e.slice(c,t)),l.lines=0,l.pos=t,l.ok=!0),l}},1602:function(e,t,n){"use strict";var r=n(87).unescapeAll;e.exports=function(e,t,n){var a,o,i=0,c=t,l={ok:!1,pos:0,lines:0,str:""};if(t>=n)return l;if(34!==(o=e.charCodeAt(t))&&39!==o&&40!==o)return l;for(t++,40===o&&(o=41);t<n;){if((a=e.charCodeAt(t))===o)return l.pos=t+1,l.lines=i,l.str=r(e.slice(c+1,t)),l.ok=!0,l;10===a?i++:92===a&&t+1<n&&(t++,10===e.charCodeAt(t)&&i++),t++}return l}},1603:function(e,t,n){"use strict";var r=n(87).assign,a=n(87).unescapeAll,o=n(87).escapeHtml,i={};function c(){this.rules=r({},i)}i.code_inline=function(e,t,n,r,a){var i=e[t];return"<code"+a.renderAttrs(i)+">"+o(e[t].content)+"</code>"},i.code_block=function(e,t,n,r,a){var i=e[t];return"<pre"+a.renderAttrs(i)+"><code>"+o(e[t].content)+"</code></pre>\n"},i.fence=function(e,t,n,r,i){var c,l,s,u,d=e[t],f=d.info?a(d.info).trim():"",p="";return f&&(p=f.split(/\s+/g)[0]),0===(c=n.highlight&&n.highlight(d.content,p)||o(d.content)).indexOf("<pre")?c+"\n":f?(l=d.attrIndex("class"),s=d.attrs?d.attrs.slice():[],l<0?s.push(["class",n.langPrefix+p]):s[l][1]+=" "+n.langPrefix+p,u={attrs:s},"<pre><code"+i.renderAttrs(u)+">"+c+"</code></pre>\n"):"<pre><code"+i.renderAttrs(d)+">"+c+"</code></pre>\n"},i.image=function(e,t,n,r,a){var o=e[t];return o.attrs[o.attrIndex("alt")][1]=a.renderInlineAsText(o.children,n,r),a.renderToken(e,t,n)},i.hardbreak=function(e,t,n){return n.xhtmlOut?"<br />\n":"<br>\n"},i.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?"<br />\n":"<br>\n":"\n"},i.text=function(e,t){return o(e[t].content)},i.html_block=function(e,t){return e[t].content},i.html_inline=function(e,t){return e[t].content},c.prototype.renderAttrs=function(e){var t,n,r;if(!e.attrs)return"";for(r="",t=0,n=e.attrs.length;t<n;t++)r+=" "+o(e.attrs[t][0])+'="'+o(e.attrs[t][1])+'"';return r},c.prototype.renderToken=function(e,t,n){var r,a="",o=!1,i=e[t];return i.hidden?"":(i.block&&-1!==i.nesting&&t&&e[t-1].hidden&&(a+="\n"),a+=(-1===i.nesting?"</":"<")+i.tag,a+=this.renderAttrs(i),0===i.nesting&&n.xhtmlOut&&(a+=" /"),i.block&&(o=!0,1===i.nesting&&t+1<e.length&&("inline"===(r=e[t+1]).type||r.hidden||-1===r.nesting&&r.tag===i.tag)&&(o=!1)),a+=o?">\n":">")},c.prototype.renderInline=function(e,t,n){for(var r,a="",o=this.rules,i=0,c=e.length;i<c;i++)void 0!==o[r=e[i].type]?a+=o[r](e,i,t,n,this):a+=this.renderToken(e,i,t);return a},c.prototype.renderInlineAsText=function(e,t,n){for(var r="",a=0,o=e.length;a<o;a++)"text"===e[a].type?r+=e[a].content:"image"===e[a].type&&(r+=this.renderInlineAsText(e[a].children,t,n));return r},c.prototype.render=function(e,t,n){var r,a,o,i="",c=this.rules;for(r=0,a=e.length;r<a;r++)"inline"===(o=e[r].type)?i+=this.renderInline(e[r].children,t,n):void 0!==c[o]?i+=c[e[r].type](e,r,t,n,this):i+=this.renderToken(e,r,t,n);return i},e.exports=c},1604:function(e,t,n){"use strict";var r=n(512),a=[["normalize",n(1605)],["block",n(1606)],["inline",n(1607)],["linkify",n(1608)],["replacements",n(1609)],["smartquotes",n(1610)]];function o(){this.ruler=new r;for(var e=0;e<a.length;e++)this.ruler.push(a[e][0],a[e][1])}o.prototype.process=function(e){var t,n,r;for(t=0,n=(r=this.ruler.getRules("")).length;t<n;t++)r[t](e)},o.prototype.State=n(1611),e.exports=o},1605:function(e,t,n){"use strict";var r=/\r[\n\u0085]?|[\u2424\u2028\u0085]/g,a=/\u0000/g;e.exports=function(e){var t;t=(t=e.src.replace(r,"\n")).replace(a,"�"),e.src=t}},1606:function(e,t,n){"use strict";e.exports=function(e){var t;e.inlineMode?((t=new e.Token("inline","",0)).content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}},1607:function(e,t,n){"use strict";e.exports=function(e){var t,n,r,a=e.tokens;for(n=0,r=a.length;n<r;n++)"inline"===(t=a[n]).type&&e.md.inline.parse(t.content,e.md,e.env,t.children)}},1608:function(e,t,n){"use strict";var r=n(87).arrayReplaceAt;function a(e){return/^<\/a\s*>/i.test(e)}e.exports=function(e){var t,n,o,i,c,l,s,u,d,f,p,h,m,g,v,y,b,k,w=e.tokens;if(e.md.options.linkify)for(n=0,o=w.length;n<o;n++)if("inline"===w[n].type&&e.md.linkify.pretest(w[n].content))for(m=0,t=(i=w[n].children).length-1;t>=0;t--)if("link_close"!==(l=i[t]).type){if("html_inline"===l.type&&(k=l.content,/^<a[>\s]/i.test(k)&&m>0&&m--,a(l.content)&&m++),!(m>0)&&"text"===l.type&&e.md.linkify.test(l.content)){for(d=l.content,b=e.md.linkify.match(d),s=[],h=l.level,p=0,u=0;u<b.length;u++)g=b[u].url,v=e.md.normalizeLink(g),e.md.validateLink(v)&&(y=b[u].text,y=b[u].schema?"mailto:"!==b[u].schema||/^mailto:/i.test(y)?e.md.normalizeLinkText(y):e.md.normalizeLinkText("mailto:"+y).replace(/^mailto:/,""):e.md.normalizeLinkText("http://"+y).replace(/^http:\/\//,""),(f=b[u].index)>p&&((c=new e.Token("text","",0)).content=d.slice(p,f),c.level=h,s.push(c)),(c=new e.Token("link_open","a",1)).attrs=[["href",v]],c.level=h++,c.markup="linkify",c.info="auto",s.push(c),(c=new e.Token("text","",0)).content=y,c.level=h,s.push(c),(c=new e.Token("link_close","a",-1)).level=--h,c.markup="linkify",c.info="auto",s.push(c),p=b[u].lastIndex);p<d.length&&((c=new e.Token("text","",0)).content=d.slice(p),c.level=h,s.push(c)),w[n].children=i=r(i,t,s)}}else for(t--;i[t].level!==l.level&&"link_open"!==i[t].type;)t--}},1609:function(e,t,n){"use strict";var r=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,a=/\((c|tm|r|p)\)/i,o=/\((c|tm|r|p)\)/gi,i={c:"©",r:"®",p:"§",tm:"™"};function c(e,t){return i[t.toLowerCase()]}function l(e){var t,n,r=0;for(t=e.length-1;t>=0;t--)"text"!==(n=e[t]).type||r||(n.content=n.content.replace(o,c)),"link_open"===n.type&&"auto"===n.info&&r--,"link_close"===n.type&&"auto"===n.info&&r++}function s(e){var t,n,a=0;for(t=e.length-1;t>=0;t--)"text"!==(n=e[t]).type||a||r.test(n.content)&&(n.content=n.content.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/gm,"$1—$2").replace(/(^|\s)--(\s|$)/gm,"$1–$2").replace(/(^|[^-\s])--([^-\s]|$)/gm,"$1–$2")),"link_open"===n.type&&"auto"===n.info&&a--,"link_close"===n.type&&"auto"===n.info&&a++}e.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&(a.test(e.tokens[t].content)&&l(e.tokens[t].children),r.test(e.tokens[t].content)&&s(e.tokens[t].children))}},1610:function(e,t,n){"use strict";var r=n(87).isWhiteSpace,a=n(87).isPunctChar,o=n(87).isMdAsciiPunct,i=/['"]/,c=/['"]/g;function l(e,t,n){return e.substr(0,t)+n+e.substr(t+1)}function s(e,t){var n,i,s,u,d,f,p,h,m,g,v,y,b,k,w,x,_,E,C,O,S;for(C=[],n=0;n<e.length;n++){for(i=e[n],p=e[n].level,_=C.length-1;_>=0&&!(C[_].level<=p);_--);if(C.length=_+1,"text"===i.type){d=0,f=(s=i.content).length;e:for(;d<f&&(c.lastIndex=d,u=c.exec(s));){if(w=x=!0,d=u.index+1,E="'"===u[0],m=32,u.index-1>=0)m=s.charCodeAt(u.index-1);else for(_=n-1;_>=0&&("softbreak"!==e[_].type&&"hardbreak"!==e[_].type);_--)if("text"===e[_].type){m=e[_].content.charCodeAt(e[_].content.length-1);break}if(g=32,d<f)g=s.charCodeAt(d);else for(_=n+1;_<e.length&&("softbreak"!==e[_].type&&"hardbreak"!==e[_].type);_++)if("text"===e[_].type){g=e[_].content.charCodeAt(0);break}if(v=o(m)||a(String.fromCharCode(m)),y=o(g)||a(String.fromCharCode(g)),b=r(m),(k=r(g))?w=!1:y&&(b||v||(w=!1)),b?x=!1:v&&(k||y||(x=!1)),34===g&&'"'===u[0]&&m>=48&&m<=57&&(x=w=!1),w&&x&&(w=!1,x=y),w||x){if(x)for(_=C.length-1;_>=0&&(h=C[_],!(C[_].level<p));_--)if(h.single===E&&C[_].level===p){h=C[_],E?(O=t.md.options.quotes[2],S=t.md.options.quotes[3]):(O=t.md.options.quotes[0],S=t.md.options.quotes[1]),i.content=l(i.content,u.index,S),e[h.token].content=l(e[h.token].content,h.pos,O),d+=S.length-1,h.token===n&&(d+=O.length-1),f=(s=i.content).length,C.length=_;continue e}w?C.push({token:n,pos:u.index,single:E,level:p}):x&&E&&(i.content=l(i.content,u.index,"’"))}else E&&(i.content=l(i.content,u.index,"’"))}}}}e.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&i.test(e.tokens[t].content)&&s(e.tokens[t].children,e)}},1611:function(e,t,n){"use strict";var r=n(513);function a(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}a.prototype.Token=r,e.exports=a},1612:function(e,t,n){"use strict";var r=n(512),a=[["table",n(1613),["paragraph","reference"]],["code",n(1614)],["fence",n(1615),["paragraph","reference","blockquote","list"]],["blockquote",n(1616),["paragraph","reference","blockquote","list"]],["hr",n(1617),["paragraph","reference","blockquote","list"]],["list",n(1618),["paragraph","reference","blockquote"]],["reference",n(1619)],["heading",n(1620),["paragraph","reference","blockquote"]],["lheading",n(1621)],["html_block",n(1622),["paragraph","reference","blockquote"]],["paragraph",n(1624)]];function o(){this.ruler=new r;for(var e=0;e<a.length;e++)this.ruler.push(a[e][0],a[e][1],{alt:(a[e][2]||[]).slice()})}o.prototype.tokenize=function(e,t,n){for(var r,a=this.ruler.getRules(""),o=a.length,i=t,c=!1,l=e.md.options.maxNesting;i<n&&(e.line=i=e.skipEmptyLines(i),!(i>=n))&&!(e.sCount[i]<e.blkIndent);){if(e.level>=l){e.line=n;break}for(r=0;r<o&&!a[r](e,i,n,!1);r++);e.tight=!c,e.isEmpty(e.line-1)&&(c=!0),(i=e.line)<n&&e.isEmpty(i)&&(c=!0,i++,e.line=i)}},o.prototype.parse=function(e,t,n,r){var a;e&&(a=new this.State(e,t,n,r),this.tokenize(a,a.line,a.lineMax))},o.prototype.State=n(1625),e.exports=o},1613:function(e,t,n){"use strict";var r=n(87).isSpace;function a(e,t){var n=e.bMarks[t]+e.blkIndent,r=e.eMarks[t];return e.src.substr(n,r-n)}function o(e){var t,n=[],r=0,a=e.length,o=0,i=0,c=!1,l=0;for(t=e.charCodeAt(r);r<a;)96===t?c?(c=!1,l=r):o%2==0&&(c=!0,l=r):124!==t||o%2!=0||c||(n.push(e.substring(i,r)),i=r+1),92===t?o++:o=0,++r===a&&c&&(c=!1,r=l+1),t=e.charCodeAt(r);return n.push(e.substring(i)),n}e.exports=function(e,t,n,i){var c,l,s,u,d,f,p,h,m,g,v,y;if(t+2>n)return!1;if(d=t+1,e.sCount[d]<e.blkIndent)return!1;if(e.sCount[d]-e.blkIndent>=4)return!1;if((s=e.bMarks[d]+e.tShift[d])>=e.eMarks[d])return!1;if(124!==(c=e.src.charCodeAt(s++))&&45!==c&&58!==c)return!1;for(;s<e.eMarks[d];){if(124!==(c=e.src.charCodeAt(s))&&45!==c&&58!==c&&!r(c))return!1;s++}for(f=(l=a(e,t+1)).split("|"),m=[],u=0;u<f.length;u++){if(!(g=f[u].trim())){if(0===u||u===f.length-1)continue;return!1}if(!/^:?-+:?$/.test(g))return!1;58===g.charCodeAt(g.length-1)?m.push(58===g.charCodeAt(0)?"center":"right"):58===g.charCodeAt(0)?m.push("left"):m.push("")}if(-1===(l=a(e,t).trim()).indexOf("|"))return!1;if(e.sCount[t]-e.blkIndent>=4)return!1;if((p=(f=o(l.replace(/^\||\|$/g,""))).length)>m.length)return!1;if(i)return!0;for((h=e.push("table_open","table",1)).map=v=[t,0],(h=e.push("thead_open","thead",1)).map=[t,t+1],(h=e.push("tr_open","tr",1)).map=[t,t+1],u=0;u<f.length;u++)(h=e.push("th_open","th",1)).map=[t,t+1],m[u]&&(h.attrs=[["style","text-align:"+m[u]]]),(h=e.push("inline","",0)).content=f[u].trim(),h.map=[t,t+1],h.children=[],h=e.push("th_close","th",-1);for(h=e.push("tr_close","tr",-1),h=e.push("thead_close","thead",-1),(h=e.push("tbody_open","tbody",1)).map=y=[t+2,0],d=t+2;d<n&&!(e.sCount[d]<e.blkIndent)&&-1!==(l=a(e,d).trim()).indexOf("|")&&!(e.sCount[d]-e.blkIndent>=4);d++){for(f=o(l.replace(/^\||\|$/g,"")),h=e.push("tr_open","tr",1),u=0;u<p;u++)h=e.push("td_open","td",1),m[u]&&(h.attrs=[["style","text-align:"+m[u]]]),(h=e.push("inline","",0)).content=f[u]?f[u].trim():"",h.children=[],h=e.push("td_close","td",-1);h=e.push("tr_close","tr",-1)}return h=e.push("tbody_close","tbody",-1),h=e.push("table_close","table",-1),v[1]=y[1]=d,e.line=d,!0}},1614:function(e,t,n){"use strict";e.exports=function(e,t,n){var r,a,o;if(e.sCount[t]-e.blkIndent<4)return!1;for(a=r=t+1;r<n;)if(e.isEmpty(r))r++;else{if(!(e.sCount[r]-e.blkIndent>=4))break;a=++r}return e.line=a,(o=e.push("code_block","code",0)).content=e.getLines(t,a,4+e.blkIndent,!0),o.map=[t,e.line],!0}},1615:function(e,t,n){"use strict";e.exports=function(e,t,n,r){var a,o,i,c,l,s,u,d=!1,f=e.bMarks[t]+e.tShift[t],p=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(f+3>p)return!1;if(126!==(a=e.src.charCodeAt(f))&&96!==a)return!1;if(l=f,(o=(f=e.skipChars(f,a))-l)<3)return!1;if(u=e.src.slice(l,f),(i=e.src.slice(f,p)).indexOf(String.fromCharCode(a))>=0)return!1;if(r)return!0;for(c=t;!(++c>=n)&&!((f=l=e.bMarks[c]+e.tShift[c])<(p=e.eMarks[c])&&e.sCount[c]<e.blkIndent);)if(e.src.charCodeAt(f)===a&&!(e.sCount[c]-e.blkIndent>=4||(f=e.skipChars(f,a))-l<o||(f=e.skipSpaces(f))<p)){d=!0;break}return o=e.sCount[t],e.line=c+(d?1:0),(s=e.push("fence","code",0)).info=i,s.content=e.getLines(t+1,c,o,!0),s.markup=u,s.map=[t,e.line],!0}},1616:function(e,t,n){"use strict";var r=n(87).isSpace;e.exports=function(e,t,n,a){var o,i,c,l,s,u,d,f,p,h,m,g,v,y,b,k,w,x,_,E,C=e.lineMax,O=e.bMarks[t]+e.tShift[t],S=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(62!==e.src.charCodeAt(O++))return!1;if(a)return!0;for(l=p=e.sCount[t]+O-(e.bMarks[t]+e.tShift[t]),32===e.src.charCodeAt(O)?(O++,l++,p++,o=!1,k=!0):9===e.src.charCodeAt(O)?(k=!0,(e.bsCount[t]+p)%4==3?(O++,l++,p++,o=!1):o=!0):k=!1,h=[e.bMarks[t]],e.bMarks[t]=O;O<S&&(i=e.src.charCodeAt(O),r(i));)9===i?p+=4-(p+e.bsCount[t]+(o?1:0))%4:p++,O++;for(m=[e.bsCount[t]],e.bsCount[t]=e.sCount[t]+1+(k?1:0),u=O>=S,y=[e.sCount[t]],e.sCount[t]=p-l,b=[e.tShift[t]],e.tShift[t]=O-e.bMarks[t],x=e.md.block.ruler.getRules("blockquote"),v=e.parentType,e.parentType="blockquote",E=!1,f=t+1;f<n&&(e.sCount[f]<e.blkIndent&&(E=!0),!((O=e.bMarks[f]+e.tShift[f])>=(S=e.eMarks[f])));f++)if(62!==e.src.charCodeAt(O++)||E){if(u)break;for(w=!1,c=0,s=x.length;c<s;c++)if(x[c](e,f,n,!0)){w=!0;break}if(w){e.lineMax=f,0!==e.blkIndent&&(h.push(e.bMarks[f]),m.push(e.bsCount[f]),b.push(e.tShift[f]),y.push(e.sCount[f]),e.sCount[f]-=e.blkIndent);break}h.push(e.bMarks[f]),m.push(e.bsCount[f]),b.push(e.tShift[f]),y.push(e.sCount[f]),e.sCount[f]=-1}else{for(l=p=e.sCount[f]+O-(e.bMarks[f]+e.tShift[f]),32===e.src.charCodeAt(O)?(O++,l++,p++,o=!1,k=!0):9===e.src.charCodeAt(O)?(k=!0,(e.bsCount[f]+p)%4==3?(O++,l++,p++,o=!1):o=!0):k=!1,h.push(e.bMarks[f]),e.bMarks[f]=O;O<S&&(i=e.src.charCodeAt(O),r(i));)9===i?p+=4-(p+e.bsCount[f]+(o?1:0))%4:p++,O++;u=O>=S,m.push(e.bsCount[f]),e.bsCount[f]=e.sCount[f]+1+(k?1:0),y.push(e.sCount[f]),e.sCount[f]=p-l,b.push(e.tShift[f]),e.tShift[f]=O-e.bMarks[f]}for(g=e.blkIndent,e.blkIndent=0,(_=e.push("blockquote_open","blockquote",1)).markup=">",_.map=d=[t,0],e.md.block.tokenize(e,t,f),(_=e.push("blockquote_close","blockquote",-1)).markup=">",e.lineMax=C,e.parentType=v,d[1]=e.line,c=0;c<b.length;c++)e.bMarks[c+t]=h[c],e.tShift[c+t]=b[c],e.sCount[c+t]=y[c],e.bsCount[c+t]=m[c];return e.blkIndent=g,!0}},1617:function(e,t,n){"use strict";var r=n(87).isSpace;e.exports=function(e,t,n,a){var o,i,c,l,s=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(42!==(o=e.src.charCodeAt(s++))&&45!==o&&95!==o)return!1;for(i=1;s<u;){if((c=e.src.charCodeAt(s++))!==o&&!r(c))return!1;c===o&&i++}return!(i<3)&&(a||(e.line=t+1,(l=e.push("hr","hr",0)).map=[t,e.line],l.markup=Array(i+1).join(String.fromCharCode(o))),!0)}},1618:function(e,t,n){"use strict";var r=n(87).isSpace;function a(e,t){var n,a,o,i;return a=e.bMarks[t]+e.tShift[t],o=e.eMarks[t],42!==(n=e.src.charCodeAt(a++))&&45!==n&&43!==n||a<o&&(i=e.src.charCodeAt(a),!r(i))?-1:a}function o(e,t){var n,a=e.bMarks[t]+e.tShift[t],o=a,i=e.eMarks[t];if(o+1>=i)return-1;if((n=e.src.charCodeAt(o++))<48||n>57)return-1;for(;;){if(o>=i)return-1;if(!((n=e.src.charCodeAt(o++))>=48&&n<=57)){if(41===n||46===n)break;return-1}if(o-a>=10)return-1}return o<i&&(n=e.src.charCodeAt(o),!r(n))?-1:o}e.exports=function(e,t,n,r){var i,c,l,s,u,d,f,p,h,m,g,v,y,b,k,w,x,_,E,C,O,S,R,j,P,A,T,D,M=!1,N=!0;if(e.sCount[t]-e.blkIndent>=4)return!1;if(r&&"paragraph"===e.parentType&&e.tShift[t]>=e.blkIndent&&(M=!0),(R=o(e,t))>=0){if(f=!0,P=e.bMarks[t]+e.tShift[t],y=Number(e.src.substr(P,R-P-1)),M&&1!==y)return!1}else{if(!((R=a(e,t))>=0))return!1;f=!1}if(M&&e.skipSpaces(R)>=e.eMarks[t])return!1;if(v=e.src.charCodeAt(R-1),r)return!0;for(g=e.tokens.length,f?(D=e.push("ordered_list_open","ol",1),1!==y&&(D.attrs=[["start",y]])):D=e.push("bullet_list_open","ul",1),D.map=m=[t,0],D.markup=String.fromCharCode(v),k=t,j=!1,T=e.md.block.ruler.getRules("list"),E=e.parentType,e.parentType="list";k<n;){for(S=R,b=e.eMarks[k],d=w=e.sCount[k]+R-(e.bMarks[t]+e.tShift[t]);S<b;){if(9===(i=e.src.charCodeAt(S)))w+=4-(w+e.bsCount[k])%4;else{if(32!==i)break;w++}S++}if((u=(c=S)>=b?1:w-d)>4&&(u=1),s=d+u,(D=e.push("list_item_open","li",1)).markup=String.fromCharCode(v),D.map=p=[t,0],x=e.blkIndent,O=e.tight,C=e.tShift[t],_=e.sCount[t],e.blkIndent=s,e.tight=!0,e.tShift[t]=c-e.bMarks[t],e.sCount[t]=w,c>=b&&e.isEmpty(t+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,t,n,!0),e.tight&&!j||(N=!1),j=e.line-t>1&&e.isEmpty(e.line-1),e.blkIndent=x,e.tShift[t]=C,e.sCount[t]=_,e.tight=O,(D=e.push("list_item_close","li",-1)).markup=String.fromCharCode(v),k=t=e.line,p[1]=k,c=e.bMarks[t],k>=n)break;if(e.sCount[k]<e.blkIndent)break;for(A=!1,l=0,h=T.length;l<h;l++)if(T[l](e,k,n,!0)){A=!0;break}if(A)break;if(f){if((R=o(e,k))<0)break}else if((R=a(e,k))<0)break;if(v!==e.src.charCodeAt(R-1))break}return(D=f?e.push("ordered_list_close","ol",-1):e.push("bullet_list_close","ul",-1)).markup=String.fromCharCode(v),m[1]=k,e.line=k,e.parentType=E,N&&function(e,t){var n,r,a=e.level+2;for(n=t+2,r=e.tokens.length-2;n<r;n++)e.tokens[n].level===a&&"paragraph_open"===e.tokens[n].type&&(e.tokens[n+2].hidden=!0,e.tokens[n].hidden=!0,n+=2)}(e,g),!0}},1619:function(e,t,n){"use strict";var r=n(87).normalizeReference,a=n(87).isSpace;e.exports=function(e,t,n,o){var i,c,l,s,u,d,f,p,h,m,g,v,y,b,k,w,x=0,_=e.bMarks[t]+e.tShift[t],E=e.eMarks[t],C=t+1;if(e.sCount[t]-e.blkIndent>=4)return!1;if(91!==e.src.charCodeAt(_))return!1;for(;++_<E;)if(93===e.src.charCodeAt(_)&&92!==e.src.charCodeAt(_-1)){if(_+1===E)return!1;if(58!==e.src.charCodeAt(_+1))return!1;break}for(s=e.lineMax,k=e.md.block.ruler.getRules("reference"),m=e.parentType,e.parentType="reference";C<s&&!e.isEmpty(C);C++)if(!(e.sCount[C]-e.blkIndent>3||e.sCount[C]<0)){for(b=!1,d=0,f=k.length;d<f;d++)if(k[d](e,C,s,!0)){b=!0;break}if(b)break}for(E=(y=e.getLines(t,C,e.blkIndent,!1).trim()).length,_=1;_<E;_++){if(91===(i=y.charCodeAt(_)))return!1;if(93===i){h=_;break}(10===i||92===i&&++_<E&&10===y.charCodeAt(_))&&x++}if(h<0||58!==y.charCodeAt(h+1))return!1;for(_=h+2;_<E;_++)if(10===(i=y.charCodeAt(_)))x++;else if(!a(i))break;if(!(g=e.md.helpers.parseLinkDestination(y,_,E)).ok)return!1;if(u=e.md.normalizeLink(g.str),!e.md.validateLink(u))return!1;for(c=_=g.pos,l=x+=g.lines,v=_;_<E;_++)if(10===(i=y.charCodeAt(_)))x++;else if(!a(i))break;for(g=e.md.helpers.parseLinkTitle(y,_,E),_<E&&v!==_&&g.ok?(w=g.str,_=g.pos,x+=g.lines):(w="",_=c,x=l);_<E&&(i=y.charCodeAt(_),a(i));)_++;if(_<E&&10!==y.charCodeAt(_)&&w)for(w="",_=c,x=l;_<E&&(i=y.charCodeAt(_),a(i));)_++;return!(_<E&&10!==y.charCodeAt(_))&&(!!(p=r(y.slice(1,h)))&&(o||(void 0===e.env.references&&(e.env.references={}),void 0===e.env.references[p]&&(e.env.references[p]={title:w,href:u}),e.parentType=m,e.line=t+x+1),!0))}},1620:function(e,t,n){"use strict";var r=n(87).isSpace;e.exports=function(e,t,n,a){var o,i,c,l,s=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(35!==(o=e.src.charCodeAt(s))||s>=u)return!1;for(i=1,o=e.src.charCodeAt(++s);35===o&&s<u&&i<=6;)i++,o=e.src.charCodeAt(++s);return!(i>6||s<u&&!r(o))&&(a||(u=e.skipSpacesBack(u,s),(c=e.skipCharsBack(u,35,s))>s&&r(e.src.charCodeAt(c-1))&&(u=c),e.line=t+1,(l=e.push("heading_open","h"+String(i),1)).markup="########".slice(0,i),l.map=[t,e.line],(l=e.push("inline","",0)).content=e.src.slice(s,u).trim(),l.map=[t,e.line],l.children=[],(l=e.push("heading_close","h"+String(i),-1)).markup="########".slice(0,i)),!0)}},1621:function(e,t,n){"use strict";e.exports=function(e,t,n){var r,a,o,i,c,l,s,u,d,f,p=t+1,h=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;for(f=e.parentType,e.parentType="paragraph";p<n&&!e.isEmpty(p);p++)if(!(e.sCount[p]-e.blkIndent>3)){if(e.sCount[p]>=e.blkIndent&&(l=e.bMarks[p]+e.tShift[p])<(s=e.eMarks[p])&&(45===(d=e.src.charCodeAt(l))||61===d)&&(l=e.skipChars(l,d),(l=e.skipSpaces(l))>=s)){u=61===d?1:2;break}if(!(e.sCount[p]<0)){for(a=!1,o=0,i=h.length;o<i;o++)if(h[o](e,p,n,!0)){a=!0;break}if(a)break}}return!!u&&(r=e.getLines(t,p,e.blkIndent,!1).trim(),e.line=p+1,(c=e.push("heading_open","h"+String(u),1)).markup=String.fromCharCode(d),c.map=[t,e.line],(c=e.push("inline","",0)).content=r,c.map=[t,e.line-1],c.children=[],(c=e.push("heading_close","h"+String(u),-1)).markup=String.fromCharCode(d),e.parentType=f,!0)}},1622:function(e,t,n){"use strict";var r=n(1623),a=n(642).HTML_OPEN_CLOSE_TAG_RE,o=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+r.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(a.source+"\\s*$"),/^$/,!1]];e.exports=function(e,t,n,r){var a,i,c,l,s=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(s))return!1;for(l=e.src.slice(s,u),a=0;a<o.length&&!o[a][0].test(l);a++);if(a===o.length)return!1;if(r)return o[a][2];if(i=t+1,!o[a][1].test(l))for(;i<n&&!(e.sCount[i]<e.blkIndent);i++)if(s=e.bMarks[i]+e.tShift[i],u=e.eMarks[i],l=e.src.slice(s,u),o[a][1].test(l)){0!==l.length&&i++;break}return e.line=i,(c=e.push("html_block","",0)).map=[t,i],c.content=e.getLines(t,i,e.blkIndent,!0),!0}},1623:function(e,t,n){"use strict";e.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},1624:function(e,t,n){"use strict";e.exports=function(e,t){var n,r,a,o,i,c,l=t+1,s=e.md.block.ruler.getRules("paragraph"),u=e.lineMax;for(c=e.parentType,e.parentType="paragraph";l<u&&!e.isEmpty(l);l++)if(!(e.sCount[l]-e.blkIndent>3||e.sCount[l]<0)){for(r=!1,a=0,o=s.length;a<o;a++)if(s[a](e,l,u,!0)){r=!0;break}if(r)break}return n=e.getLines(t,l,e.blkIndent,!1).trim(),e.line=l,(i=e.push("paragraph_open","p",1)).map=[t,e.line],(i=e.push("inline","",0)).content=n,i.map=[t,e.line],i.children=[],i=e.push("paragraph_close","p",-1),e.parentType=c,!0}},1625:function(e,t,n){"use strict";var r=n(513),a=n(87).isSpace;function o(e,t,n,r){var o,i,c,l,s,u,d,f;for(this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.parentType="root",this.level=0,this.result="",f=!1,c=l=u=d=0,s=(i=this.src).length;l<s;l++){if(o=i.charCodeAt(l),!f){if(a(o)){u++,9===o?d+=4-d%4:d++;continue}f=!0}10!==o&&l!==s-1||(10!==o&&l++,this.bMarks.push(c),this.eMarks.push(l),this.tShift.push(u),this.sCount.push(d),this.bsCount.push(0),f=!1,u=0,d=0,c=l+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}o.prototype.push=function(e,t,n){var a=new r(e,t,n);return a.block=!0,n<0&&this.level--,a.level=this.level,n>0&&this.level++,this.tokens.push(a),a},o.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},o.prototype.skipEmptyLines=function(e){for(var t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},o.prototype.skipSpaces=function(e){for(var t,n=this.src.length;e<n&&(t=this.src.charCodeAt(e),a(t));e++);return e},o.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!a(this.src.charCodeAt(--e)))return e+1;return e},o.prototype.skipChars=function(e,t){for(var n=this.src.length;e<n&&this.src.charCodeAt(e)===t;e++);return e},o.prototype.skipCharsBack=function(e,t,n){if(e<=n)return e;for(;e>n;)if(t!==this.src.charCodeAt(--e))return e+1;return e},o.prototype.getLines=function(e,t,n,r){var o,i,c,l,s,u,d,f=e;if(e>=t)return"";for(u=new Array(t-e),o=0;f<t;f++,o++){for(i=0,d=l=this.bMarks[f],s=f+1<t||r?this.eMarks[f]+1:this.eMarks[f];l<s&&i<n;){if(c=this.src.charCodeAt(l),a(c))9===c?i+=4-(i+this.bsCount[f])%4:i++;else{if(!(l-d<this.tShift[f]))break;i++}l++}u[o]=i>n?new Array(i-n+1).join(" ")+this.src.slice(l,s):this.src.slice(l,s)}return u.join("")},o.prototype.Token=r,e.exports=o},1626:function(e,t,n){"use strict";var r=n(512),a=[["text",n(1627)],["newline",n(1628)],["escape",n(1629)],["backticks",n(1630)],["strikethrough",n(643).tokenize],["emphasis",n(644).tokenize],["link",n(1631)],["image",n(1632)],["autolink",n(1633)],["html_inline",n(1634)],["entity",n(1635)]],o=[["balance_pairs",n(1636)],["strikethrough",n(643).postProcess],["emphasis",n(644).postProcess],["text_collapse",n(1637)]];function i(){var e;for(this.ruler=new r,e=0;e<a.length;e++)this.ruler.push(a[e][0],a[e][1]);for(this.ruler2=new r,e=0;e<o.length;e++)this.ruler2.push(o[e][0],o[e][1])}i.prototype.skipToken=function(e){var t,n,r=e.pos,a=this.ruler.getRules(""),o=a.length,i=e.md.options.maxNesting,c=e.cache;if(void 0===c[r]){if(e.level<i)for(n=0;n<o&&(e.level++,t=a[n](e,!0),e.level--,!t);n++);else e.pos=e.posMax;t||e.pos++,c[r]=e.pos}else e.pos=c[r]},i.prototype.tokenize=function(e){for(var t,n,r=this.ruler.getRules(""),a=r.length,o=e.posMax,i=e.md.options.maxNesting;e.pos<o;){if(e.level<i)for(n=0;n<a&&!(t=r[n](e,!1));n++);if(t){if(e.pos>=o)break}else e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},i.prototype.parse=function(e,t,n,r){var a,o,i,c=new this.State(e,t,n,r);for(this.tokenize(c),i=(o=this.ruler2.getRules("")).length,a=0;a<i;a++)o[a](c)},i.prototype.State=n(1638),e.exports=i},1627:function(e,t,n){"use strict";function r(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}e.exports=function(e,t){for(var n=e.pos;n<e.posMax&&!r(e.src.charCodeAt(n));)n++;return n!==e.pos&&(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}},1628:function(e,t,n){"use strict";var r=n(87).isSpace;e.exports=function(e,t){var n,a,o=e.pos;if(10!==e.src.charCodeAt(o))return!1;for(n=e.pending.length-1,a=e.posMax,t||(n>=0&&32===e.pending.charCodeAt(n)?n>=1&&32===e.pending.charCodeAt(n-1)?(e.pending=e.pending.replace(/ +$/,""),e.push("hardbreak","br",0)):(e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0)):e.push("softbreak","br",0)),o++;o<a&&r(e.src.charCodeAt(o));)o++;return e.pos=o,!0}},1629:function(e,t,n){"use strict";for(var r=n(87).isSpace,a=[],o=0;o<256;o++)a.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach((function(e){a[e.charCodeAt(0)]=1})),e.exports=function(e,t){var n,o=e.pos,i=e.posMax;if(92!==e.src.charCodeAt(o))return!1;if(++o<i){if((n=e.src.charCodeAt(o))<256&&0!==a[n])return t||(e.pending+=e.src[o]),e.pos+=2,!0;if(10===n){for(t||e.push("hardbreak","br",0),o++;o<i&&(n=e.src.charCodeAt(o),r(n));)o++;return e.pos=o,!0}}return t||(e.pending+="\\"),e.pos++,!0}},1630:function(e,t,n){"use strict";e.exports=function(e,t){var n,r,a,o,i,c,l=e.pos;if(96!==e.src.charCodeAt(l))return!1;for(n=l,l++,r=e.posMax;l<r&&96===e.src.charCodeAt(l);)l++;for(a=e.src.slice(n,l),o=i=l;-1!==(o=e.src.indexOf("`",i));){for(i=o+1;i<r&&96===e.src.charCodeAt(i);)i++;if(i-o===a.length)return t||((c=e.push("code_inline","code",0)).markup=a,c.content=e.src.slice(l,o).replace(/[ \n]+/g," ").trim()),e.pos=i,!0}return t||(e.pending+=a),e.pos+=a.length,!0}},1631:function(e,t,n){"use strict";var r=n(87).normalizeReference,a=n(87).isSpace;e.exports=function(e,t){var n,o,i,c,l,s,u,d,f,p="",h=e.pos,m=e.posMax,g=e.pos,v=!0;if(91!==e.src.charCodeAt(e.pos))return!1;if(l=e.pos+1,(c=e.md.helpers.parseLinkLabel(e,e.pos,!0))<0)return!1;if((s=c+1)<m&&40===e.src.charCodeAt(s)){for(v=!1,s++;s<m&&(o=e.src.charCodeAt(s),a(o)||10===o);s++);if(s>=m)return!1;for(g=s,(u=e.md.helpers.parseLinkDestination(e.src,s,e.posMax)).ok&&(p=e.md.normalizeLink(u.str),e.md.validateLink(p)?s=u.pos:p=""),g=s;s<m&&(o=e.src.charCodeAt(s),a(o)||10===o);s++);if(u=e.md.helpers.parseLinkTitle(e.src,s,e.posMax),s<m&&g!==s&&u.ok)for(f=u.str,s=u.pos;s<m&&(o=e.src.charCodeAt(s),a(o)||10===o);s++);else f="";(s>=m||41!==e.src.charCodeAt(s))&&(v=!0),s++}if(v){if(void 0===e.env.references)return!1;if(s<m&&91===e.src.charCodeAt(s)?(g=s+1,(s=e.md.helpers.parseLinkLabel(e,s))>=0?i=e.src.slice(g,s++):s=c+1):s=c+1,i||(i=e.src.slice(l,c)),!(d=e.env.references[r(i)]))return e.pos=h,!1;p=d.href,f=d.title}return t||(e.pos=l,e.posMax=c,e.push("link_open","a",1).attrs=n=[["href",p]],f&&n.push(["title",f]),e.md.inline.tokenize(e),e.push("link_close","a",-1)),e.pos=s,e.posMax=m,!0}},1632:function(e,t,n){"use strict";var r=n(87).normalizeReference,a=n(87).isSpace;e.exports=function(e,t){var n,o,i,c,l,s,u,d,f,p,h,m,g,v="",y=e.pos,b=e.posMax;if(33!==e.src.charCodeAt(e.pos))return!1;if(91!==e.src.charCodeAt(e.pos+1))return!1;if(s=e.pos+2,(l=e.md.helpers.parseLinkLabel(e,e.pos+1,!1))<0)return!1;if((u=l+1)<b&&40===e.src.charCodeAt(u)){for(u++;u<b&&(o=e.src.charCodeAt(u),a(o)||10===o);u++);if(u>=b)return!1;for(g=u,(f=e.md.helpers.parseLinkDestination(e.src,u,e.posMax)).ok&&(v=e.md.normalizeLink(f.str),e.md.validateLink(v)?u=f.pos:v=""),g=u;u<b&&(o=e.src.charCodeAt(u),a(o)||10===o);u++);if(f=e.md.helpers.parseLinkTitle(e.src,u,e.posMax),u<b&&g!==u&&f.ok)for(p=f.str,u=f.pos;u<b&&(o=e.src.charCodeAt(u),a(o)||10===o);u++);else p="";if(u>=b||41!==e.src.charCodeAt(u))return e.pos=y,!1;u++}else{if(void 0===e.env.references)return!1;if(u<b&&91===e.src.charCodeAt(u)?(g=u+1,(u=e.md.helpers.parseLinkLabel(e,u))>=0?c=e.src.slice(g,u++):u=l+1):u=l+1,c||(c=e.src.slice(s,l)),!(d=e.env.references[r(c)]))return e.pos=y,!1;v=d.href,p=d.title}return t||(i=e.src.slice(s,l),e.md.inline.parse(i,e.md,e.env,m=[]),(h=e.push("image","img",0)).attrs=n=[["src",v],["alt",""]],h.children=m,h.content=i,p&&n.push(["title",p])),e.pos=u,e.posMax=b,!0}},1633:function(e,t,n){"use strict";var r=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,a=/^<([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)>/;e.exports=function(e,t){var n,o,i,c,l,s,u=e.pos;return 60===e.src.charCodeAt(u)&&(!((n=e.src.slice(u)).indexOf(">")<0)&&(a.test(n)?(c=(o=n.match(a))[0].slice(1,-1),l=e.md.normalizeLink(c),!!e.md.validateLink(l)&&(t||((s=e.push("link_open","a",1)).attrs=[["href",l]],s.markup="autolink",s.info="auto",(s=e.push("text","",0)).content=e.md.normalizeLinkText(c),(s=e.push("link_close","a",-1)).markup="autolink",s.info="auto"),e.pos+=o[0].length,!0)):!!r.test(n)&&(c=(i=n.match(r))[0].slice(1,-1),l=e.md.normalizeLink("mailto:"+c),!!e.md.validateLink(l)&&(t||((s=e.push("link_open","a",1)).attrs=[["href",l]],s.markup="autolink",s.info="auto",(s=e.push("text","",0)).content=e.md.normalizeLinkText(c),(s=e.push("link_close","a",-1)).markup="autolink",s.info="auto"),e.pos+=i[0].length,!0))))}},1634:function(e,t,n){"use strict";var r=n(642).HTML_TAG_RE;e.exports=function(e,t){var n,a,o,i=e.pos;return!!e.md.options.html&&(o=e.posMax,!(60!==e.src.charCodeAt(i)||i+2>=o)&&(!(33!==(n=e.src.charCodeAt(i+1))&&63!==n&&47!==n&&!function(e){var t=32|e;return t>=97&&t<=122}(n))&&(!!(a=e.src.slice(i).match(r))&&(t||(e.push("html_inline","",0).content=e.src.slice(i,i+a[0].length)),e.pos+=a[0].length,!0))))}},1635:function(e,t,n){"use strict";var r=n(637),a=n(87).has,o=n(87).isValidEntityCode,i=n(87).fromCodePoint,c=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i,l=/^&([a-z][a-z0-9]{1,31});/i;e.exports=function(e,t){var n,s,u=e.pos,d=e.posMax;if(38!==e.src.charCodeAt(u))return!1;if(u+1<d)if(35===e.src.charCodeAt(u+1)){if(s=e.src.slice(u).match(c))return t||(n="x"===s[1][0].toLowerCase()?parseInt(s[1].slice(1),16):parseInt(s[1],10),e.pending+=o(n)?i(n):i(65533)),e.pos+=s[0].length,!0}else if((s=e.src.slice(u).match(l))&&a(r,s[1]))return t||(e.pending+=r[s[1]]),e.pos+=s[0].length,!0;return t||(e.pending+="&"),e.pos++,!0}},1636:function(e,t,n){"use strict";e.exports=function(e){var t,n,r,a,o=e.delimiters,i=e.delimiters.length;for(t=0;t<i;t++)if((r=o[t]).close)for(n=t-r.jump-1;n>=0;){if((a=o[n]).open&&a.marker===r.marker&&a.end<0&&a.level===r.level)if(!((a.close||r.open)&&void 0!==a.length&&void 0!==r.length&&(a.length+r.length)%3==0)){r.jump=t-n,r.open=!1,a.end=t,a.jump=0;break}n-=a.jump+1}}},1637:function(e,t,n){"use strict";e.exports=function(e){var t,n,r=0,a=e.tokens,o=e.tokens.length;for(t=n=0;t<o;t++)r+=a[t].nesting,a[t].level=r,"text"===a[t].type&&t+1<o&&"text"===a[t+1].type?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}},1638:function(e,t,n){"use strict";var r=n(513),a=n(87).isWhiteSpace,o=n(87).isPunctChar,i=n(87).isMdAsciiPunct;function c(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[]}c.prototype.pushPending=function(){var e=new r("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e},c.prototype.push=function(e,t,n){this.pending&&this.pushPending();var a=new r(e,t,n);return n<0&&this.level--,a.level=this.level,n>0&&this.level++,this.pendingLevel=this.level,this.tokens.push(a),a},c.prototype.scanDelims=function(e,t){var n,r,c,l,s,u,d,f,p,h=e,m=!0,g=!0,v=this.posMax,y=this.src.charCodeAt(e);for(n=e>0?this.src.charCodeAt(e-1):32;h<v&&this.src.charCodeAt(h)===y;)h++;return c=h-e,r=h<v?this.src.charCodeAt(h):32,d=i(n)||o(String.fromCharCode(n)),p=i(r)||o(String.fromCharCode(r)),u=a(n),(f=a(r))?m=!1:p&&(u||d||(m=!1)),u?g=!1:d&&(f||p||(g=!1)),t?(l=m,s=g):(l=m&&(!g||d),s=g&&(!m||p)),{can_open:l,can_close:s,length:c}},c.prototype.Token=r,e.exports=c},1639:function(e,t,n){"use strict";function r(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach((function(t){t&&Object.keys(t).forEach((function(n){e[n]=t[n]}))})),e}function a(e){return Object.prototype.toString.call(e)}function o(e){return"[object Function]"===a(e)}function i(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var c={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};var l={"http:":{validate:function(e,t,n){var r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){var r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){var r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},s="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function u(e){var t=e.re=n(1640)(e.__opts__),r=e.__tlds__.slice();function c(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||r.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),r.push(t.src_xn),t.src_tlds=r.join("|"),t.email_fuzzy=RegExp(c(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(c(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(c(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(c(t.tpl_host_fuzzy_test),"i");var l=[];function s(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach((function(t){var n=e.__schemas__[t];if(null!==n){var r={validate:null,link:null};if(e.__compiled__[t]=r,"[object Object]"===a(n))return!function(e){return"[object RegExp]"===a(e)}(n.validate)?o(n.validate)?r.validate=n.validate:s(t,n):r.validate=function(e){return function(t,n){var r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}(n.validate),void(o(n.normalize)?r.normalize=n.normalize:n.normalize?s(t,n):r.normalize=function(e,t){t.normalize(e)});!function(e){return"[object String]"===a(e)}(n)?s(t,n):l.push(t)}})),l.forEach((function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)})),e.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};var u=Object.keys(e.__compiled__).filter((function(t){return t.length>0&&e.__compiled__[t]})).map(i).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+u+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+u+")","ig"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(e)}function d(e,t){var n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}function f(e,t){var n=new d(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function p(e,t){if(!(this instanceof p))return new p(e,t);var n;t||(n=e,Object.keys(n||{}).reduce((function(e,t){return e||c.hasOwnProperty(t)}),!1)&&(t=e,e={})),this.__opts__=r({},c,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=r({},l,e),this.__compiled__={},this.__tlds__=s,this.__tlds_replaced__=!1,this.re={},u(this)}p.prototype.add=function(e,t){return this.__schemas__[e]=t,u(this),this},p.prototype.set=function(e){return this.__opts__=r(this.__opts__,e),this},p.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,n,r,a,o,i,c,l;if(this.re.schema_test.test(e))for((c=this.re.schema_search).lastIndex=0;null!==(t=c.exec(e));)if(a=this.testSchemaAt(e,t[2],c.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+a;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||l<this.__index__)&&null!==(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(o=n.index+n[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=n.index+n[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&e.indexOf("@")>=0&&null!==(r=e.match(this.re.email_fuzzy))&&(o=r.index+r[1].length,i=r.index+r[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&i>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=i)),this.__index__>=0},p.prototype.pretest=function(e){return this.re.pretest.test(e)},p.prototype.testSchemaAt=function(e,t,n){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,n,this):0},p.prototype.match=function(e){var t=0,n=[];this.__index__>=0&&this.__text_cache__===e&&(n.push(f(this,t)),t=this.__last_index__);for(var r=t?e.slice(t):e;this.test(r);)n.push(f(this,t)),r=r.slice(this.__last_index__),t+=this.__last_index__;return n.length?n:null},p.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter((function(e,t,n){return e!==n[t-1]})).reverse(),u(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,u(this),this)},p.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},p.prototype.onCompile=function(){},e.exports=p},1640:function(e,t,n){"use strict";e.exports=function(e){var t={};t.src_Any=n(639).source,t.src_Cc=n(640).source,t.src_Z=n(641).source,t.src_P=n(511).source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");return t.src_pseudo_letter="(?:(?![><｜]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><｜]|"+t.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+"[><｜]|[()[\\]{}.,\"'?!\\-]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-]).|\\.{2,4}[a-zA-Z0-9%/]|\\.(?!"+t.src_ZCc+"|[.]).|"+(e&&e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+t.src_ZCc+").|\\!(?!"+t.src_ZCc+"|[!]).|\\?(?!"+t.src_ZCc+"|[?]).)+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy='(^|[><｜]|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}},1641:function(e,t,n){"use strict";e.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},1642:function(e,t,n){"use strict";e.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}}},1643:function(e,t,n){"use strict";e.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}}},1644:function(e,t){e.exports={100:"💯",1234:"🔢",grinning:"😀",smiley:"😃",smile:"😄",grin:"😁",laughing:"😆",satisfied:"😆",sweat_smile:"😅",joy:"😂",rofl:"🤣",relaxed:"☺️",blush:"😊",innocent:"😇",slightly_smiling_face:"🙂",upside_down_face:"🙃",wink:"😉",relieved:"😌",heart_eyes:"😍",kissing_heart:"😘",kissing:"😗",kissing_smiling_eyes:"😙",kissing_closed_eyes:"😚",yum:"😋",stuck_out_tongue_winking_eye:"😜",stuck_out_tongue_closed_eyes:"😝",stuck_out_tongue:"😛",money_mouth_face:"🤑",hugs:"🤗",nerd_face:"🤓",sunglasses:"😎",clown_face:"🤡",cowboy_hat_face:"🤠",smirk:"😏",unamused:"😒",disappointed:"😞",pensive:"😔",worried:"😟",confused:"😕",slightly_frowning_face:"🙁",frowning_face:"☹️",persevere:"😣",confounded:"😖",tired_face:"😫",weary:"😩",triumph:"😤",angry:"😠",rage:"😡",pout:"😡",no_mouth:"😶",neutral_face:"😐",expressionless:"😑",hushed:"😯",frowning:"😦",anguished:"😧",open_mouth:"😮",astonished:"😲",dizzy_face:"😵",flushed:"😳",scream:"😱",fearful:"😨",cold_sweat:"😰",cry:"😢",disappointed_relieved:"😥",drooling_face:"🤤",sob:"😭",sweat:"😓",sleepy:"😪",sleeping:"😴",roll_eyes:"🙄",thinking:"🤔",lying_face:"🤥",grimacing:"😬",zipper_mouth_face:"🤐",nauseated_face:"🤢",sneezing_face:"🤧",mask:"😷",face_with_thermometer:"🤒",face_with_head_bandage:"🤕",smiling_imp:"😈",imp:"👿",japanese_ogre:"👹",japanese_goblin:"👺",hankey:"💩",poop:"💩",shit:"💩",ghost:"👻",skull:"💀",skull_and_crossbones:"☠️",alien:"👽",space_invader:"👾",robot:"🤖",jack_o_lantern:"🎃",smiley_cat:"😺",smile_cat:"😸",joy_cat:"😹",heart_eyes_cat:"😻",smirk_cat:"😼",kissing_cat:"😽",scream_cat:"🙀",crying_cat_face:"😿",pouting_cat:"😾",open_hands:"👐",raised_hands:"🙌",clap:"👏",pray:"🙏",handshake:"🤝","+1":"👍",thumbsup:"👍","-1":"👎",thumbsdown:"👎",fist_oncoming:"👊",facepunch:"👊",punch:"👊",fist_raised:"✊",fist:"✊",fist_left:"🤛",fist_right:"🤜",crossed_fingers:"🤞",v:"✌️",metal:"🤘",ok_hand:"👌",point_left:"👈",point_right:"👉",point_up_2:"👆",point_down:"👇",point_up:"☝️",hand:"✋",raised_hand:"✋",raised_back_of_hand:"🤚",raised_hand_with_fingers_splayed:"🖐",vulcan_salute:"🖖",wave:"👋",call_me_hand:"🤙",muscle:"💪",middle_finger:"🖕",fu:"🖕",writing_hand:"✍️",selfie:"🤳",nail_care:"💅",ring:"💍",lipstick:"💄",kiss:"💋",lips:"👄",tongue:"👅",ear:"👂",nose:"👃",footprints:"👣",eye:"👁",eyes:"👀",speaking_head:"🗣",bust_in_silhouette:"👤",busts_in_silhouette:"👥",baby:"👶",boy:"👦",girl:"👧",man:"👨",woman:"👩",blonde_woman:"👱‍♀",blonde_man:"👱",person_with_blond_hair:"👱",older_man:"👴",older_woman:"👵",man_with_gua_pi_mao:"👲",woman_with_turban:"👳‍♀",man_with_turban:"👳",policewoman:"👮‍♀",policeman:"👮",cop:"👮",construction_worker_woman:"👷‍♀",construction_worker_man:"👷",construction_worker:"👷",guardswoman:"💂‍♀",guardsman:"💂",female_detective:"🕵️‍♀️",male_detective:"🕵",detective:"🕵",woman_health_worker:"👩‍⚕",man_health_worker:"👨‍⚕",woman_farmer:"👩‍🌾",man_farmer:"👨‍🌾",woman_cook:"👩‍🍳",man_cook:"👨‍🍳",woman_student:"👩‍🎓",man_student:"👨‍🎓",woman_singer:"👩‍🎤",man_singer:"👨‍🎤",woman_teacher:"👩‍🏫",man_teacher:"👨‍🏫",woman_factory_worker:"👩‍🏭",man_factory_worker:"👨‍🏭",woman_technologist:"👩‍💻",man_technologist:"👨‍💻",woman_office_worker:"👩‍💼",man_office_worker:"👨‍💼",woman_mechanic:"👩‍🔧",man_mechanic:"👨‍🔧",woman_scientist:"👩‍🔬",man_scientist:"👨‍🔬",woman_artist:"👩‍🎨",man_artist:"👨‍🎨",woman_firefighter:"👩‍🚒",man_firefighter:"👨‍🚒",woman_pilot:"👩‍✈",man_pilot:"👨‍✈",woman_astronaut:"👩‍🚀",man_astronaut:"👨‍🚀",woman_judge:"👩‍⚖",man_judge:"👨‍⚖",mrs_claus:"🤶",santa:"🎅",princess:"👸",prince:"🤴",bride_with_veil:"👰",man_in_tuxedo:"🤵",angel:"👼",pregnant_woman:"🤰",bowing_woman:"🙇‍♀",bowing_man:"🙇",bow:"🙇",tipping_hand_woman:"💁",information_desk_person:"💁",sassy_woman:"💁",tipping_hand_man:"💁‍♂",sassy_man:"💁‍♂",no_good_woman:"🙅",no_good:"🙅",ng_woman:"🙅",no_good_man:"🙅‍♂",ng_man:"🙅‍♂",ok_woman:"🙆",ok_man:"🙆‍♂",raising_hand_woman:"🙋",raising_hand:"🙋",raising_hand_man:"🙋‍♂",woman_facepalming:"🤦‍♀",man_facepalming:"🤦‍♂",woman_shrugging:"🤷‍♀",man_shrugging:"🤷‍♂",pouting_woman:"🙎",person_with_pouting_face:"🙎",pouting_man:"🙎‍♂",frowning_woman:"🙍",person_frowning:"🙍",frowning_man:"🙍‍♂",haircut_woman:"💇",haircut:"💇",haircut_man:"💇‍♂",massage_woman:"💆",massage:"💆",massage_man:"💆‍♂",business_suit_levitating:"🕴",dancer:"💃",man_dancing:"🕺",dancing_women:"👯",dancers:"👯",dancing_men:"👯‍♂",walking_woman:"🚶‍♀",walking_man:"🚶",walking:"🚶",running_woman:"🏃‍♀",running_man:"🏃",runner:"🏃",running:"🏃",couple:"👫",two_women_holding_hands:"👭",two_men_holding_hands:"👬",couple_with_heart_woman_man:"💑",couple_with_heart:"💑",couple_with_heart_woman_woman:"👩‍❤️‍👩",couple_with_heart_man_man:"👨‍❤️‍👨",couplekiss_man_woman:"💏",couplekiss_woman_woman:"👩‍❤️‍💋‍👩",couplekiss_man_man:"👨‍❤️‍💋‍👨",family_man_woman_boy:"👪",family:"👪",family_man_woman_girl:"👨‍👩‍👧",family_man_woman_girl_boy:"👨‍👩‍👧‍👦",family_man_woman_boy_boy:"👨‍👩‍👦‍👦",family_man_woman_girl_girl:"👨‍👩‍👧‍👧",family_woman_woman_boy:"👩‍👩‍👦",family_woman_woman_girl:"👩‍👩‍👧",family_woman_woman_girl_boy:"👩‍👩‍👧‍👦",family_woman_woman_boy_boy:"👩‍👩‍👦‍👦",family_woman_woman_girl_girl:"👩‍👩‍👧‍👧",family_man_man_boy:"👨‍👨‍👦",family_man_man_girl:"👨‍👨‍👧",family_man_man_girl_boy:"👨‍👨‍👧‍👦",family_man_man_boy_boy:"👨‍👨‍👦‍👦",family_man_man_girl_girl:"👨‍👨‍👧‍👧",family_woman_boy:"👩‍👦",family_woman_girl:"👩‍👧",family_woman_girl_boy:"👩‍👧‍👦",family_woman_boy_boy:"👩‍👦‍👦",family_woman_girl_girl:"👩‍👧‍👧",family_man_boy:"👨‍👦",family_man_girl:"👨‍👧",family_man_girl_boy:"👨‍👧‍👦",family_man_boy_boy:"👨‍👦‍👦",family_man_girl_girl:"👨‍👧‍👧",womans_clothes:"👚",shirt:"👕",tshirt:"👕",jeans:"👖",necktie:"👔",dress:"👗",bikini:"👙",kimono:"👘",high_heel:"👠",sandal:"👡",boot:"👢",mans_shoe:"👞",shoe:"👞",athletic_shoe:"👟",womans_hat:"👒",tophat:"🎩",mortar_board:"🎓",crown:"👑",rescue_worker_helmet:"⛑",school_satchel:"🎒",pouch:"👝",purse:"👛",handbag:"👜",briefcase:"💼",eyeglasses:"👓",dark_sunglasses:"🕶",closed_umbrella:"🌂",open_umbrella:"☂️",dog:"🐶",cat:"🐱",mouse:"🐭",hamster:"🐹",rabbit:"🐰",fox_face:"🦊",bear:"🐻",panda_face:"🐼",koala:"🐨",tiger:"🐯",lion:"🦁",cow:"🐮",pig:"🐷",pig_nose:"🐽",frog:"🐸",monkey_face:"🐵",see_no_evil:"🙈",hear_no_evil:"🙉",speak_no_evil:"🙊",monkey:"🐒",chicken:"🐔",penguin:"🐧",bird:"🐦",baby_chick:"🐤",hatching_chick:"🐣",hatched_chick:"🐥",duck:"🦆",eagle:"🦅",owl:"🦉",bat:"🦇",wolf:"🐺",boar:"🐗",horse:"🐴",unicorn:"🦄",bee:"🐝",honeybee:"🐝",bug:"🐛",butterfly:"🦋",snail:"🐌",shell:"🐚",beetle:"🐞",ant:"🐜",spider:"🕷",spider_web:"🕸",turtle:"🐢",snake:"🐍",lizard:"🦎",scorpion:"🦂",crab:"🦀",squid:"🦑",octopus:"🐙",shrimp:"🦐",tropical_fish:"🐠",fish:"🐟",blowfish:"🐡",dolphin:"🐬",flipper:"🐬",shark:"🦈",whale:"🐳",whale2:"🐋",crocodile:"🐊",leopard:"🐆",tiger2:"🐅",water_buffalo:"🐃",ox:"🐂",cow2:"🐄",deer:"🦌",dromedary_camel:"🐪",camel:"🐫",elephant:"🐘",rhinoceros:"🦏",gorilla:"🦍",racehorse:"🐎",pig2:"🐖",goat:"🐐",ram:"🐏",sheep:"🐑",dog2:"🐕",poodle:"🐩",cat2:"🐈",rooster:"🐓",turkey:"🦃",dove:"🕊",rabbit2:"🐇",mouse2:"🐁",rat:"🐀",chipmunk:"🐿",feet:"🐾",paw_prints:"🐾",dragon:"🐉",dragon_face:"🐲",cactus:"🌵",christmas_tree:"🎄",evergreen_tree:"🌲",deciduous_tree:"🌳",palm_tree:"🌴",seedling:"🌱",herb:"🌿",shamrock:"☘️",four_leaf_clover:"🍀",bamboo:"🎍",tanabata_tree:"🎋",leaves:"🍃",fallen_leaf:"🍂",maple_leaf:"🍁",mushroom:"🍄",ear_of_rice:"🌾",bouquet:"💐",tulip:"🌷",rose:"🌹",wilted_flower:"🥀",sunflower:"🌻",blossom:"🌼",cherry_blossom:"🌸",hibiscus:"🌺",earth_americas:"🌎",earth_africa:"🌍",earth_asia:"🌏",full_moon:"🌕",waning_gibbous_moon:"🌖",last_quarter_moon:"🌗",waning_crescent_moon:"🌘",new_moon:"🌑",waxing_crescent_moon:"🌒",first_quarter_moon:"🌓",moon:"🌔",waxing_gibbous_moon:"🌔",new_moon_with_face:"🌚",full_moon_with_face:"🌝",sun_with_face:"🌞",first_quarter_moon_with_face:"🌛",last_quarter_moon_with_face:"🌜",crescent_moon:"🌙",dizzy:"💫",star:"⭐️",star2:"🌟",sparkles:"✨",zap:"⚡️",fire:"🔥",boom:"💥",collision:"💥",comet:"☄",sunny:"☀️",sun_behind_small_cloud:"🌤",partly_sunny:"⛅️",sun_behind_large_cloud:"🌥",sun_behind_rain_cloud:"🌦",rainbow:"🌈",cloud:"☁️",cloud_with_rain:"🌧",cloud_with_lightning_and_rain:"⛈",cloud_with_lightning:"🌩",cloud_with_snow:"🌨",snowman_with_snow:"☃️",snowman:"⛄️",snowflake:"❄️",wind_face:"🌬",dash:"💨",tornado:"🌪",fog:"🌫",ocean:"🌊",droplet:"💧",sweat_drops:"💦",umbrella:"☔️",green_apple:"🍏",apple:"🍎",pear:"🍐",tangerine:"🍊",orange:"🍊",mandarin:"🍊",lemon:"🍋",banana:"🍌",watermelon:"🍉",grapes:"🍇",strawberry:"🍓",melon:"🍈",cherries:"🍒",peach:"🍑",pineapple:"🍍",kiwi_fruit:"🥝",avocado:"🥑",tomato:"🍅",eggplant:"🍆",cucumber:"🥒",carrot:"🥕",corn:"🌽",hot_pepper:"🌶",potato:"🥔",sweet_potato:"🍠",chestnut:"🌰",peanuts:"🥜",honey_pot:"🍯",croissant:"🥐",bread:"🍞",baguette_bread:"🥖",cheese:"🧀",egg:"🥚",fried_egg:"🍳",bacon:"🥓",pancakes:"🥞",fried_shrimp:"🍤",poultry_leg:"🍗",meat_on_bone:"🍖",pizza:"🍕",hotdog:"🌭",hamburger:"🍔",fries:"🍟",stuffed_flatbread:"🥙",taco:"🌮",burrito:"🌯",green_salad:"🥗",shallow_pan_of_food:"🥘",spaghetti:"🍝",ramen:"🍜",stew:"🍲",fish_cake:"🍥",sushi:"🍣",bento:"🍱",curry:"🍛",rice:"🍚",rice_ball:"🍙",rice_cracker:"🍘",oden:"🍢",dango:"🍡",shaved_ice:"🍧",ice_cream:"🍨",icecream:"🍦",cake:"🍰",birthday:"🎂",custard:"🍮",lollipop:"🍭",candy:"🍬",chocolate_bar:"🍫",popcorn:"🍿",doughnut:"🍩",cookie:"🍪",milk_glass:"🥛",baby_bottle:"🍼",coffee:"☕️",tea:"🍵",sake:"🍶",beer:"🍺",beers:"🍻",clinking_glasses:"🥂",wine_glass:"🍷",tumbler_glass:"🥃",cocktail:"🍸",tropical_drink:"🍹",champagne:"🍾",spoon:"🥄",fork_and_knife:"🍴",plate_with_cutlery:"🍽",soccer:"⚽️",basketball:"🏀",football:"🏈",baseball:"⚾️",tennis:"🎾",volleyball:"🏐",rugby_football:"🏉","8ball":"🎱",ping_pong:"🏓",badminton:"🏸",goal_net:"🥅",ice_hockey:"🏒",field_hockey:"🏑",cricket:"🏏",golf:"⛳️",bow_and_arrow:"🏹",fishing_pole_and_fish:"🎣",boxing_glove:"🥊",martial_arts_uniform:"🥋",ice_skate:"⛸",ski:"🎿",skier:"⛷",snowboarder:"🏂",weight_lifting_woman:"🏋️‍♀️",weight_lifting_man:"🏋",person_fencing:"🤺",women_wrestling:"🤼‍♀",men_wrestling:"🤼‍♂",woman_cartwheeling:"🤸‍♀",man_cartwheeling:"🤸‍♂",basketball_woman:"⛹️‍♀️",basketball_man:"⛹",woman_playing_handball:"🤾‍♀",man_playing_handball:"🤾‍♂",golfing_woman:"🏌️‍♀️",golfing_man:"🏌",surfing_woman:"🏄‍♀",surfing_man:"🏄",surfer:"🏄",swimming_woman:"🏊‍♀",swimming_man:"🏊",swimmer:"🏊",woman_playing_water_polo:"🤽‍♀",man_playing_water_polo:"🤽‍♂",rowing_woman:"🚣‍♀",rowing_man:"🚣",rowboat:"🚣",horse_racing:"🏇",biking_woman:"🚴‍♀",biking_man:"🚴",bicyclist:"🚴",mountain_biking_woman:"🚵‍♀",mountain_biking_man:"🚵",mountain_bicyclist:"🚵",running_shirt_with_sash:"🎽",medal_sports:"🏅",medal_military:"🎖","1st_place_medal":"🥇","2nd_place_medal":"🥈","3rd_place_medal":"🥉",trophy:"🏆",rosette:"🏵",reminder_ribbon:"🎗",ticket:"🎫",tickets:"🎟",circus_tent:"🎪",woman_juggling:"🤹‍♀",man_juggling:"🤹‍♂",performing_arts:"🎭",art:"🎨",clapper:"🎬",microphone:"🎤",headphones:"🎧",musical_score:"🎼",musical_keyboard:"🎹",drum:"🥁",saxophone:"🎷",trumpet:"🎺",guitar:"🎸",violin:"🎻",game_die:"🎲",dart:"🎯",bowling:"🎳",video_game:"🎮",slot_machine:"🎰",car:"🚗",red_car:"🚗",taxi:"🚕",blue_car:"🚙",bus:"🚌",trolleybus:"🚎",racing_car:"🏎",police_car:"🚓",ambulance:"🚑",fire_engine:"🚒",minibus:"🚐",truck:"🚚",articulated_lorry:"🚛",tractor:"🚜",kick_scooter:"🛴",bike:"🚲",motor_scooter:"🛵",motorcycle:"🏍",rotating_light:"🚨",oncoming_police_car:"🚔",oncoming_bus:"🚍",oncoming_automobile:"🚘",oncoming_taxi:"🚖",aerial_tramway:"🚡",mountain_cableway:"🚠",suspension_railway:"🚟",railway_car:"🚃",train:"🚋",mountain_railway:"🚞",monorail:"🚝",bullettrain_side:"🚄",bullettrain_front:"🚅",light_rail:"🚈",steam_locomotive:"🚂",train2:"🚆",metro:"🚇",tram:"🚊",station:"🚉",helicopter:"🚁",small_airplane:"🛩",airplane:"✈️",flight_departure:"🛫",flight_arrival:"🛬",rocket:"🚀",artificial_satellite:"🛰",seat:"💺",canoe:"🛶",boat:"⛵️",sailboat:"⛵️",motor_boat:"🛥",speedboat:"🚤",passenger_ship:"🛳",ferry:"⛴",ship:"🚢",anchor:"⚓️",construction:"🚧",fuelpump:"⛽️",busstop:"🚏",vertical_traffic_light:"🚦",traffic_light:"🚥",world_map:"🗺",moyai:"🗿",statue_of_liberty:"🗽",fountain:"⛲️",tokyo_tower:"🗼",european_castle:"🏰",japanese_castle:"🏯",stadium:"🏟",ferris_wheel:"🎡",roller_coaster:"🎢",carousel_horse:"🎠",parasol_on_ground:"⛱",beach_umbrella:"🏖",desert_island:"🏝",mountain:"⛰",mountain_snow:"🏔",mount_fuji:"🗻",volcano:"🌋",desert:"🏜",camping:"🏕",tent:"⛺️",railway_track:"🛤",motorway:"🛣",building_construction:"🏗",factory:"🏭",house:"🏠",house_with_garden:"🏡",houses:"🏘",derelict_house:"🏚",office:"🏢",department_store:"🏬",post_office:"🏣",european_post_office:"🏤",hospital:"🏥",bank:"🏦",hotel:"🏨",convenience_store:"🏪",school:"🏫",love_hotel:"🏩",wedding:"💒",classical_building:"🏛",church:"⛪️",mosque:"🕌",synagogue:"🕍",kaaba:"🕋",shinto_shrine:"⛩",japan:"🗾",rice_scene:"🎑",national_park:"🏞",sunrise:"🌅",sunrise_over_mountains:"🌄",stars:"🌠",sparkler:"🎇",fireworks:"🎆",city_sunrise:"🌇",city_sunset:"🌆",cityscape:"🏙",night_with_stars:"🌃",milky_way:"🌌",bridge_at_night:"🌉",foggy:"🌁",watch:"⌚️",iphone:"📱",calling:"📲",computer:"💻",keyboard:"⌨️",desktop_computer:"🖥",printer:"🖨",computer_mouse:"🖱",trackball:"🖲",joystick:"🕹",clamp:"🗜",minidisc:"💽",floppy_disk:"💾",cd:"💿",dvd:"📀",vhs:"📼",camera:"📷",camera_flash:"📸",video_camera:"📹",movie_camera:"🎥",film_projector:"📽",film_strip:"🎞",telephone_receiver:"📞",phone:"☎️",telephone:"☎️",pager:"📟",fax:"📠",tv:"📺",radio:"📻",studio_microphone:"🎙",level_slider:"🎚",control_knobs:"🎛",stopwatch:"⏱",timer_clock:"⏲",alarm_clock:"⏰",mantelpiece_clock:"🕰",hourglass:"⌛️",hourglass_flowing_sand:"⏳",satellite:"📡",battery:"🔋",electric_plug:"🔌",bulb:"💡",flashlight:"🔦",candle:"🕯",wastebasket:"🗑",oil_drum:"🛢",money_with_wings:"💸",dollar:"💵",yen:"💴",euro:"💶",pound:"💷",moneybag:"💰",credit_card:"💳",gem:"💎",balance_scale:"⚖️",wrench:"🔧",hammer:"🔨",hammer_and_pick:"⚒",hammer_and_wrench:"🛠",pick:"⛏",nut_and_bolt:"🔩",gear:"⚙️",chains:"⛓",gun:"🔫",bomb:"💣",hocho:"🔪",knife:"🔪",dagger:"🗡",crossed_swords:"⚔️",shield:"🛡",smoking:"🚬",coffin:"⚰️",funeral_urn:"⚱️",amphora:"🏺",crystal_ball:"🔮",prayer_beads:"📿",barber:"💈",alembic:"⚗️",telescope:"🔭",microscope:"🔬",hole:"🕳",pill:"💊",syringe:"💉",thermometer:"🌡",toilet:"🚽",potable_water:"🚰",shower:"🚿",bathtub:"🛁",bath:"🛀",bellhop_bell:"🛎",key:"🔑",old_key:"🗝",door:"🚪",couch_and_lamp:"🛋",bed:"🛏",sleeping_bed:"🛌",framed_picture:"🖼",shopping:"🛍",shopping_cart:"🛒",gift:"🎁",balloon:"🎈",flags:"🎏",ribbon:"🎀",confetti_ball:"🎊",tada:"🎉",dolls:"🎎",izakaya_lantern:"🏮",lantern:"🏮",wind_chime:"🎐",email:"✉️",envelope:"✉️",envelope_with_arrow:"📩",incoming_envelope:"📨","e-mail":"📧",love_letter:"💌",inbox_tray:"📥",outbox_tray:"📤",package:"📦",label:"🏷",mailbox_closed:"📪",mailbox:"📫",mailbox_with_mail:"📬",mailbox_with_no_mail:"📭",postbox:"📮",postal_horn:"📯",scroll:"📜",page_with_curl:"📃",page_facing_up:"📄",bookmark_tabs:"📑",bar_chart:"📊",chart_with_upwards_trend:"📈",chart_with_downwards_trend:"📉",spiral_notepad:"🗒",spiral_calendar:"🗓",calendar:"📆",date:"📅",card_index:"📇",card_file_box:"🗃",ballot_box:"🗳",file_cabinet:"🗄",clipboard:"📋",file_folder:"📁",open_file_folder:"📂",card_index_dividers:"🗂",newspaper_roll:"🗞",newspaper:"📰",notebook:"📓",notebook_with_decorative_cover:"📔",ledger:"📒",closed_book:"📕",green_book:"📗",blue_book:"📘",orange_book:"📙",books:"📚",book:"📖",open_book:"📖",bookmark:"🔖",link:"🔗",paperclip:"📎",paperclips:"🖇",triangular_ruler:"📐",straight_ruler:"📏",pushpin:"📌",round_pushpin:"📍",scissors:"✂️",pen:"🖊",fountain_pen:"🖋",black_nib:"✒️",paintbrush:"🖌",crayon:"🖍",memo:"📝",pencil:"📝",pencil2:"✏️",mag:"🔍",mag_right:"🔎",lock_with_ink_pen:"🔏",closed_lock_with_key:"🔐",lock:"🔒",unlock:"🔓",heart:"❤️",yellow_heart:"💛",green_heart:"💚",blue_heart:"💙",purple_heart:"💜",black_heart:"🖤",broken_heart:"💔",heavy_heart_exclamation:"❣️",two_hearts:"💕",revolving_hearts:"💞",heartbeat:"💓",heartpulse:"💗",sparkling_heart:"💖",cupid:"💘",gift_heart:"💝",heart_decoration:"💟",peace_symbol:"☮️",latin_cross:"✝️",star_and_crescent:"☪️",om:"🕉",wheel_of_dharma:"☸️",star_of_david:"✡️",six_pointed_star:"🔯",menorah:"🕎",yin_yang:"☯️",orthodox_cross:"☦️",place_of_worship:"🛐",ophiuchus:"⛎",aries:"♈️",taurus:"♉️",gemini:"♊️",cancer:"♋️",leo:"♌️",virgo:"♍️",libra:"♎️",scorpius:"♏️",sagittarius:"♐️",capricorn:"♑️",aquarius:"♒️",pisces:"♓️",id:"🆔",atom_symbol:"⚛️",accept:"🉑",radioactive:"☢️",biohazard:"☣️",mobile_phone_off:"📴",vibration_mode:"📳",eight_pointed_black_star:"✴️",vs:"🆚",white_flower:"💮",ideograph_advantage:"🉐",secret:"㊙️",congratulations:"㊗️",u6e80:"🈵",a:"🅰️",b:"🅱️",ab:"🆎",cl:"🆑",o2:"🅾️",sos:"🆘",x:"❌",o:"⭕️",stop_sign:"🛑",no_entry:"⛔️",name_badge:"📛",no_entry_sign:"🚫",anger:"💢",hotsprings:"♨️",no_pedestrians:"🚷",do_not_litter:"🚯",no_bicycles:"🚳","non-potable_water":"🚱",underage:"🔞",no_mobile_phones:"📵",no_smoking:"🚭",exclamation:"❗️",heavy_exclamation_mark:"❗️",grey_exclamation:"❕",question:"❓",grey_question:"❔",bangbang:"‼️",interrobang:"⁉️",low_brightness:"🔅",high_brightness:"🔆",part_alternation_mark:"〽️",warning:"⚠️",children_crossing:"🚸",trident:"🔱",fleur_de_lis:"⚜️",beginner:"🔰",recycle:"♻️",white_check_mark:"✅",chart:"💹",sparkle:"❇️",eight_spoked_asterisk:"✳️",negative_squared_cross_mark:"❎",globe_with_meridians:"🌐",diamond_shape_with_a_dot_inside:"💠",m:"Ⓜ️",cyclone:"🌀",zzz:"💤",atm:"🏧",wc:"🚾",wheelchair:"♿️",parking:"🅿️",sa:"🈂️",passport_control:"🛂",customs:"🛃",baggage_claim:"🛄",left_luggage:"🛅",mens:"🚹",womens:"🚺",baby_symbol:"🚼",restroom:"🚻",put_litter_in_its_place:"🚮",cinema:"🎦",signal_strength:"📶",koko:"🈁",symbols:"🔣",information_source:"ℹ️",abc:"🔤",abcd:"🔡",capital_abcd:"🔠",ng:"🆖",ok:"🆗",up:"🆙",cool:"🆒",new:"🆕",free:"🆓",zero:"0️⃣",one:"1️⃣",two:"2️⃣",three:"3️⃣",four:"4️⃣",five:"5️⃣",six:"6️⃣",seven:"7️⃣",eight:"8️⃣",nine:"9️⃣",keycap_ten:"🔟",hash:"#️⃣",asterisk:"*️⃣",arrow_forward:"▶️",pause_button:"⏸",play_or_pause_button:"⏯",stop_button:"⏹",record_button:"⏺",next_track_button:"⏭",previous_track_button:"⏮",fast_forward:"⏩",rewind:"⏪",arrow_double_up:"⏫",arrow_double_down:"⏬",arrow_backward:"◀️",arrow_up_small:"🔼",arrow_down_small:"🔽",arrow_right:"➡️",arrow_left:"⬅️",arrow_up:"⬆️",arrow_down:"⬇️",arrow_upper_right:"↗️",arrow_lower_right:"↘️",arrow_lower_left:"↙️",arrow_upper_left:"↖️",arrow_up_down:"↕️",left_right_arrow:"↔️",arrow_right_hook:"↪️",leftwards_arrow_with_hook:"↩️",arrow_heading_up:"⤴️",arrow_heading_down:"⤵️",twisted_rightwards_arrows:"🔀",repeat:"🔁",repeat_one:"🔂",arrows_counterclockwise:"🔄",arrows_clockwise:"🔃",musical_note:"🎵",notes:"🎶",heavy_plus_sign:"➕",heavy_minus_sign:"➖",heavy_division_sign:"➗",heavy_multiplication_x:"✖️",heavy_dollar_sign:"💲",currency_exchange:"💱",tm:"™️",copyright:"©️",registered:"®️",wavy_dash:"〰️",curly_loop:"➰",loop:"➿",end:"🔚",back:"🔙",on:"🔛",top:"🔝",soon:"🔜",heavy_check_mark:"✔️",ballot_box_with_check:"☑️",radio_button:"🔘",white_circle:"⚪️",black_circle:"⚫️",red_circle:"🔴",large_blue_circle:"🔵",small_red_triangle:"🔺",small_red_triangle_down:"🔻",small_orange_diamond:"🔸",small_blue_diamond:"🔹",large_orange_diamond:"🔶",large_blue_diamond:"🔷",white_square_button:"🔳",black_square_button:"🔲",black_small_square:"▪️",white_small_square:"▫️",black_medium_small_square:"◾️",white_medium_small_square:"◽️",black_medium_square:"◼️",white_medium_square:"◻️",black_large_square:"⬛️",white_large_square:"⬜️",speaker:"🔈",mute:"🔇",sound:"🔉",loud_sound:"🔊",bell:"🔔",no_bell:"🔕",mega:"📣",loudspeaker:"📢",eye_speech_bubble:"👁‍🗨",speech_balloon:"💬",thought_balloon:"💭",right_anger_bubble:"🗯",spades:"♠️",clubs:"♣️",hearts:"♥️",diamonds:"♦️",black_joker:"🃏",flower_playing_cards:"🎴",mahjong:"🀄️",clock1:"🕐",clock2:"🕑",clock3:"🕒",clock4:"🕓",clock5:"🕔",clock6:"🕕",clock7:"🕖",clock8:"🕗",clock9:"🕘",clock10:"🕙",clock11:"🕚",clock12:"🕛",clock130:"🕜",clock230:"🕝",clock330:"🕞",clock430:"🕟",clock530:"🕠",clock630:"🕡",clock730:"🕢",clock830:"🕣",clock930:"🕤",clock1030:"🕥",clock1130:"🕦",clock1230:"🕧",white_flag:"🏳️",black_flag:"🏴",checkered_flag:"🏁",triangular_flag_on_post:"🚩",rainbow_flag:"🏳️‍🌈",afghanistan:"🇦🇫",aland_islands:"🇦🇽",albania:"🇦🇱",algeria:"🇩🇿",american_samoa:"🇦🇸",andorra:"🇦🇩",angola:"🇦🇴",anguilla:"🇦🇮",antarctica:"🇦🇶",antigua_barbuda:"🇦🇬",argentina:"🇦🇷",armenia:"🇦🇲",aruba:"🇦🇼",australia:"🇦🇺",austria:"🇦🇹",azerbaijan:"🇦🇿",bahamas:"🇧🇸",bahrain:"🇧🇭",bangladesh:"🇧🇩",barbados:"🇧🇧",belarus:"🇧🇾",belgium:"🇧🇪",belize:"🇧🇿",benin:"🇧🇯",bermuda:"🇧🇲",bhutan:"🇧🇹",bolivia:"🇧🇴",caribbean_netherlands:"🇧🇶",bosnia_herzegovina:"🇧🇦",botswana:"🇧🇼",brazil:"🇧🇷",british_indian_ocean_territory:"🇮🇴",british_virgin_islands:"🇻🇬",brunei:"🇧🇳",bulgaria:"🇧🇬",burkina_faso:"🇧🇫",burundi:"🇧🇮",cape_verde:"🇨🇻",cambodia:"🇰🇭",cameroon:"🇨🇲",canada:"🇨🇦",canary_islands:"🇮🇨",cayman_islands:"🇰🇾",central_african_republic:"🇨🇫",chad:"🇹🇩",chile:"🇨🇱",cn:"🇨🇳",christmas_island:"🇨🇽",cocos_islands:"🇨🇨",colombia:"🇨🇴",comoros:"🇰🇲",congo_brazzaville:"🇨🇬",congo_kinshasa:"🇨🇩",cook_islands:"🇨🇰",costa_rica:"🇨🇷",cote_divoire:"🇨🇮",croatia:"🇭🇷",cuba:"🇨🇺",curacao:"🇨🇼",cyprus:"🇨🇾",czech_republic:"🇨🇿",denmark:"🇩🇰",djibouti:"🇩🇯",dominica:"🇩🇲",dominican_republic:"🇩🇴",ecuador:"🇪🇨",egypt:"🇪🇬",el_salvador:"🇸🇻",equatorial_guinea:"🇬🇶",eritrea:"🇪🇷",estonia:"🇪🇪",ethiopia:"🇪🇹",eu:"🇪🇺",european_union:"🇪🇺",falkland_islands:"🇫🇰",faroe_islands:"🇫🇴",fiji:"🇫🇯",finland:"🇫🇮",fr:"🇫🇷",french_guiana:"🇬🇫",french_polynesia:"🇵🇫",french_southern_territories:"🇹🇫",gabon:"🇬🇦",gambia:"🇬🇲",georgia:"🇬🇪",de:"🇩🇪",ghana:"🇬🇭",gibraltar:"🇬🇮",greece:"🇬🇷",greenland:"🇬🇱",grenada:"🇬🇩",guadeloupe:"🇬🇵",guam:"🇬🇺",guatemala:"🇬🇹",guernsey:"🇬🇬",guinea:"🇬🇳",guinea_bissau:"🇬🇼",guyana:"🇬🇾",haiti:"🇭🇹",honduras:"🇭🇳",hong_kong:"🇭🇰",hungary:"🇭🇺",iceland:"🇮🇸",india:"🇮🇳",indonesia:"🇮🇩",iran:"🇮🇷",iraq:"🇮🇶",ireland:"🇮🇪",isle_of_man:"🇮🇲",israel:"🇮🇱",it:"🇮🇹",jamaica:"🇯🇲",jp:"🇯🇵",crossed_flags:"🎌",jersey:"🇯🇪",jordan:"🇯🇴",kazakhstan:"🇰🇿",kenya:"🇰🇪",kiribati:"🇰🇮",kosovo:"🇽🇰",kuwait:"🇰🇼",kyrgyzstan:"🇰🇬",laos:"🇱🇦",latvia:"🇱🇻",lebanon:"🇱🇧",lesotho:"🇱🇸",liberia:"🇱🇷",libya:"🇱🇾",liechtenstein:"🇱🇮",lithuania:"🇱🇹",luxembourg:"🇱🇺",macau:"🇲🇴",macedonia:"🇲🇰",madagascar:"🇲🇬",malawi:"🇲🇼",malaysia:"🇲🇾",maldives:"🇲🇻",mali:"🇲🇱",malta:"🇲🇹",marshall_islands:"🇲🇭",martinique:"🇲🇶",mauritania:"🇲🇷",mauritius:"🇲🇺",mayotte:"🇾🇹",mexico:"🇲🇽",micronesia:"🇫🇲",moldova:"🇲🇩",monaco:"🇲🇨",mongolia:"🇲🇳",montenegro:"🇲🇪",montserrat:"🇲🇸",morocco:"🇲🇦",mozambique:"🇲🇿",myanmar:"🇲🇲",namibia:"🇳🇦",nauru:"🇳🇷",nepal:"🇳🇵",netherlands:"🇳🇱",new_caledonia:"🇳🇨",new_zealand:"🇳🇿",nicaragua:"🇳🇮",niger:"🇳🇪",nigeria:"🇳🇬",niue:"🇳🇺",norfolk_island:"🇳🇫",northern_mariana_islands:"🇲🇵",north_korea:"🇰🇵",norway:"🇳🇴",oman:"🇴🇲",pakistan:"🇵🇰",palau:"🇵🇼",palestinian_territories:"🇵🇸",panama:"🇵🇦",papua_new_guinea:"🇵🇬",paraguay:"🇵🇾",peru:"🇵🇪",philippines:"🇵🇭",pitcairn_islands:"🇵🇳",poland:"🇵🇱",portugal:"🇵🇹",puerto_rico:"🇵🇷",qatar:"🇶🇦",reunion:"🇷🇪",romania:"🇷🇴",ru:"🇷🇺",rwanda:"🇷🇼",st_barthelemy:"🇧🇱",st_helena:"🇸🇭",st_kitts_nevis:"🇰🇳",st_lucia:"🇱🇨",st_pierre_miquelon:"🇵🇲",st_vincent_grenadines:"🇻🇨",samoa:"🇼🇸",san_marino:"🇸🇲",sao_tome_principe:"🇸🇹",saudi_arabia:"🇸🇦",senegal:"🇸🇳",serbia:"🇷🇸",seychelles:"🇸🇨",sierra_leone:"🇸🇱",singapore:"🇸🇬",sint_maarten:"🇸🇽",slovakia:"🇸🇰",slovenia:"🇸🇮",solomon_islands:"🇸🇧",somalia:"🇸🇴",south_africa:"🇿🇦",south_georgia_south_sandwich_islands:"🇬🇸",kr:"🇰🇷",south_sudan:"🇸🇸",es:"🇪🇸",sri_lanka:"🇱🇰",sudan:"🇸🇩",suriname:"🇸🇷",swaziland:"🇸🇿",sweden:"🇸🇪",switzerland:"🇨🇭",syria:"🇸🇾",taiwan:"🇹🇼",tajikistan:"🇹🇯",tanzania:"🇹🇿",thailand:"🇹🇭",timor_leste:"🇹🇱",togo:"🇹🇬",tokelau:"🇹🇰",tonga:"🇹🇴",trinidad_tobago:"🇹🇹",tunisia:"🇹🇳",tr:"🇹🇷",turkmenistan:"🇹🇲",turks_caicos_islands:"🇹🇨",tuvalu:"🇹🇻",uganda:"🇺🇬",ukraine:"🇺🇦",united_arab_emirates:"🇦🇪",gb:"🇬🇧",uk:"🇬🇧",us:"🇺🇸",us_virgin_islands:"🇻🇮",uruguay:"🇺🇾",uzbekistan:"🇺🇿",vanuatu:"🇻🇺",vatican_city:"🇻🇦",venezuela:"🇻🇪",vietnam:"🇻🇳",wallis_futuna:"🇼🇫",western_sahara:"🇪🇭",yemen:"🇾🇪",zambia:"🇿🇲",zimbabwe:"🇿🇼"}},1645:function(e,t,n){"use strict";e.exports={angry:[">:(",">:-("],blush:[':")',':-")'],broken_heart:["</3","<\\3"],confused:[":/",":-/"],cry:[":'(",":'-(",":,(",":,-("],frowning:[":(",":-("],heart:["<3"],imp:["]:(","]:-("],innocent:["o:)","O:)","o:-)","O:-)","0:)","0:-)"],joy:[":')",":'-)",":,)",":,-)",":'D",":'-D",":,D",":,-D"],kissing:[":*",":-*"],laughing:["x-)","X-)"],neutral_face:[":|",":-|"],open_mouth:[":o",":-o",":O",":-O"],rage:[":@",":-@"],smile:[":D",":-D"],smiley:[":)",":-)"],smiling_imp:["]:)","]:-)"],sob:[":,'(",":,'-(",";(",";-("],stuck_out_tongue:[":P",":-P"],sunglasses:["8-)","B-)"],sweat:[",:(",",:-("],sweat_smile:[",:)",",:-)"],unamused:[":s",":-S",":z",":-Z",":$",":-$"],wink:[";)",";-)"]}},1646:function(e,t,n){"use strict";e.exports=function(e,t){return e[t].content}},1647:function(e,t,n){"use strict";e.exports=function(e,t,n,r,a){var o=e.utils.arrayReplaceAt,i=e.utils.lib.ucmicro,c=new RegExp([i.Z.source,i.P.source,i.Cc.source].join("|"));function l(e,r,o){var i,l=0,s=[];return e.replace(a,(function(r,a,u){var d;if(n.hasOwnProperty(r)){if(d=n[r],a>0&&!c.test(u[a-1]))return;if(a+r.length<u.length&&!c.test(u[a+r.length]))return}else d=r.slice(1,-1);a>l&&((i=new o("text","",0)).content=e.slice(l,a),s.push(i)),(i=new o("emoji","",0)).markup=d,i.content=t[d],s.push(i),l=a+r.length})),l<e.length&&((i=new o("text","",0)).content=e.slice(l),s.push(i)),s}return function(e){var t,n,a,i,c,s=e.tokens,u=0;for(n=0,a=s.length;n<a;n++)if("inline"===s[n].type)for(t=(i=s[n].children).length-1;t>=0;t--)"link_open"!==(c=i[t]).type&&"link_close"!==c.type||"auto"===c.info&&(u-=c.nesting),"text"===c.type&&0===u&&r.test(c.content)&&(s[n].children=i=o(i,t,l(c.content,c.level,e.Token)))}}},1648:function(e,t,n){"use strict";e.exports=function(e){var t,n=e.defs;e.enabled.length&&(n=Object.keys(n).reduce((function(t,r){return e.enabled.indexOf(r)>=0&&(t[r]=n[r]),t}),{})),t=Object.keys(e.shortcuts).reduce((function(t,r){return n[r]?Array.isArray(e.shortcuts[r])?(e.shortcuts[r].forEach((function(e){t[e]=r})),t):(t[e.shortcuts[r]]=r,t):t}),{});var r=Object.keys(n).map((function(e){return":"+e+":"})).concat(Object.keys(t)).sort().reverse().map((function(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")})).join("|"),a=RegExp(r),o=RegExp(r,"g");return{defs:n,shortcuts:t,scanRE:a,replaceRE:o}}},1649:function(e,t,n){"use strict";var r=n(152),a=n(111);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(128)),i=r(n(0)),c=a(n(1650)),l=a(n(218)),s=function(e,t){return i.createElement(l.default,(0,o.default)((0,o.default)({},e),{},{ref:t,icon:c.default}))};s.displayName="CaretDownFilled";var u=i.forwardRef(s);t.default=u},1650:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"}},1651:function(e,t,n){"use strict";n(73);var r=n(38),a=(n(126),n(55)),o=(n(321),n(176)),i=(n(45),n(18)),c=(n(151),n(35)),l=n(0),s=n.n(l),u=n(1),d=n.n(u),f=n(587),p=n(369),h=n(1005),m=(n(136),n(36)),g=(n(196),n(95)),v=(n(195),n(121)),y=(n(57),n(23)),b=n(8),k=n.n(b),w=n(175),x=n(1714);n(2077);function _(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){_(o,r,a,i,c,"next",e)}function c(e){_(o,r,a,i,c,"throw",e)}i(void 0)}))}}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e){Promise.all([n.e(1),n.e(300)]).then(n.bind(null,4312));var t=e.book,r=e.template,a=e.isDesktop,o=e.reloadTemplates,i=e.templateBiz,l=e.openTemplateEditPage,u=e.onUseTemplate,d=e.commandParams,f=e.openContributorPage,h=S.useViewModel({reloadTemplates:o,templateBiz:i,book:t,template:r,commandParams:d}),y=h.state,b=y.editMenuVisible,x=y.triggerVisible,_=y.showDeleteConfirmation,E=x?{display:"block"}:{display:"none"};return s.a.createElement(m.a,{flex:"column",key:r.id},s.a.createElement("div",{className:"template-card-wrap"},s.a.createElement("div",{className:k()("lark-template-card",{"lark-template-item":!x,"lark-template-item-active":x}),onMouseEnter:function(){h.setTriggerVisible(!0)},onMouseLeave:function(){h.setTriggerVisible(b||_||!1)},onClick:function(){if(u)return u(r,!1),void(a&&w.a.logTemplateUsage(r.type,r.id,r.format,"desktop",r.type===p.TYPE.OFFICIAL?1:0,r.type!==p.TYPE.OFFICIAL?1:0));h.createDocByTemplate(t,r)},id:r.id},r.type!==p.TYPE.OFFICIAL&&s.a.createElement("div",{className:"lark-template-item-btn",onClick:function(e){return e.stopPropagation()}},s.a.createElement(v.a,{trigger:"hover",type:"menu",visible:b,align:{offset:[-13,-7]},onVisibleChange:function(e){return h.handleVisibleChange(e)},placement:"bottomLeft",content:s.a.createElement(c.a,null,s.a.createElement(c.a.Item,{key:"0"},s.a.createElement("a",{"data-testid":"template-card-edit",onClick:function(e){e.stopPropagation(),l("/r/templates/".concat(r.id,"/edit"))}},__("编辑"))),s.a.createElement(c.a.Item,{key:"1"},s.a.createElement("a",{"data-testid":"template-card-delete",onClick:function(e){return h.handleClickToShowDeleteConfimation(e)}},__("删除"))))},s.a.createElement("div",{style:E,"data-testid":"template-card-more-actions"},s.a.createElement("svg",{style:{width:16,height:16}},s.a.createElement("use",{xlinkHref:"#moreAction"}))))),s.a.createElement(g.a,{placement:"topRight",align:{offset:[12,0]},title:s.a.createElement("div",{"data-testid":"template-card-delete-confirmation"},s.a.createElement("h4",null,__("确定删除这个模板？")),s.a.createElement("p",null,__("删除后可在回收站中恢复"))),onConfirm:function(e){return h.handleClickToDeleteTemplate(e,r.id)},onCancel:h.handleClickToHideDeleteConfirmation,okText:__("删除"),cancelText:__("取消"),visible:_},s.a.createElement("p",{className:k()({"lark-template-item-title":!r.cover,"lark-template-item-title-float":r.cover&&!x,"lark-template-item-title-float-active":r.cover&&x})},r.name)),s.a.createElement("div",{"data-testid":"lark-template-card-image",className:k()({"lark-template-item-thumb":!r.cover,"lark-template-item-thumb-full":r.cover,"lark-template-item-thumb-official":!r.cover&&r.type===p.TYPE.OFFICIAL&&!x})},s.a.createElement("img",{className:"cover",src:i.getTemplateCover(r),alt:r.name})))),r.type===p.TYPE.OFFICIAL&&s.a.createElement("div",{className:"lark-template-card-contributor"},s.a.createElement("span",{className:"lark-template-card-contributor-from"},__("来自")),r.meta.contributorUrl?s.a.createElement("a",{onClick:function(){return f(r.meta.contributorUrl)}},r.meta.contributor):s.a.createElement("span",null,__("语雀"))))}S.useViewModel=function(e){var t=e.reloadTemplates,n=e.templateBiz,r=e.book,a=e.template,o=e.commandParams,i=void 0===o?{}:o,c=C(Object(l.useState)(!1),2),u=c[0],d=c[1],f=C(Object(l.useState)(!1),2),p=f[0],h=f[1],m=C(Object(l.useState)(!1),2),g=m[0],v=m[1];return{state:{editMenuVisible:u,triggerVisible:p,showDeleteConfirmation:g},handleVisibleChange:function(e){e?d(e):(d(!1),h(g||!1))},handleClickToShowDeleteConfimation:function(e){e.stopPropagation(),d(!1),v(!0),h(!0)},handleClickToHideDeleteConfirmation:function(e){e.stopPropagation(),v(!1),h(!1)},handleClickToRevertTemplate:function(e,r){return E(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.revertDeletedTemplate(e,r).then(y.a.success(__("模板已恢复"),5));case 2:return a.next=4,t();case 4:case"end":return a.stop()}}),a)})))()},handleClickToDeleteTemplate:function(e,r){var a=this;return E(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e.stopPropagation(),n.deleteTemplate(r).then(function(){var e=E(regeneratorRuntime.mark((function e(n){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.a.createElement("span",{"data-testid":"template-revert-message"},__("模板已删除 "),s.a.createElement("a",{"data-testid":"template-revert-button",onClick:function(){return a.handleClickToRevertTemplate(r,n.id)}},__("撤销"))),e.next=3,t();case 3:y.a.config({maxCount:1}),y.a.success(o,5);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return o.stop()}}),o)})))()},createDocByTemplate:function(){return E(regeneratorRuntime.mark((function e(){var t,o,c,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.createDocByTemplate(r,a);case 2:if(t=e.sent,o="/".concat(r.namespace,"/").concat(t.slug,"/edit"),c=new URL(o,window.location.origin),!i||"doc_toc"!==i.create_from){e.next=12;break}return c.searchParams.set("toc_node_uuid",i.toc_node_uuid),l=t.id,e.next=10,x.a.docs.addToCatalog({ids:[l],book_id:r.id,target_node_uuid:i.toc_node_uuid,action:"prependChild"});case 10:e.next=15;break;case 12:return s=t.id,e.next=15,x.a.docs.addToCatalog({ids:[s],book_id:r.id,target_node_uuid:null,action:"prependChild"});case 15:window.location.href=c.href;case 16:case"end":return e.stop()}}),e)})))()},setEditMenuVisible:d,setTriggerVisible:h,setShowDeleteConfirmation:v}},S.propTypes={template:d.a.shape({name:d.a.string,cover:d.a.string,id:d.a.number,doclet_id:d.a.number,type:d.a.number,format:d.a.string,meta:d.a.shape({contributor:d.a.string,contributorUrl:d.a.string,order:d.a.number})}),book:d.a.object,reloadTemplates:d.a.func,templateBiz:d.a.object,openTemplateEditPage:d.a.func,onUseTemplate:d.a.func,commandParams:d.a.object,openContributorPage:d.a.func,isDesktop:d.a.bool};var R=S,j=n(2081);function P(){return P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P.apply(this,arguments)}function A(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){A(o,r,a,i,c,"next",e)}function c(e){A(o,r,a,i,c,"throw",e)}i(void 0)}))}}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e){var t=e.book,n=e.templateProxy,l=e.docProxy,u=e.content,d=e.defaultType,f=e.onUseTemplate,h=e.commandParams,m=e.openTemplateEditPage,g=e.isDesktop,v=e.group,y=e.organization,b=e.currentUser,k=e.openContributorPage,w=N.useViewModel({book:t,templateProxy:n,docProxy:l,content:u,defaultType:d,openTemplateEditPage:m,currentUser:b}),x=w.state,_=x.selectedFormat,E=x.singleFormatTemplates,C=x.templatesByCategory,O="all"===_?C:E,S=s.a.createElement(c.a,null,s.a.createElement(c.a.Item,{key:"docTypeSelector-doc"},s.a.createElement("a",{"data-testid":"new-lake-template",onClick:function(){return w.setNewDocletType("Doc")}},__("文档"))),s.a.createElement(c.a.Item,{key:"docTypeSelector-sheet"},s.a.createElement("a",{onClick:function(){return w.setNewDocletType("Sheet")}},__("表格"))),s.a.createElement(c.a.Item,{key:"docTypeSelector-mind"},s.a.createElement("a",{onClick:function(){return w.setNewDocletType("Board")}},__("画板")))),A=s.a.createElement(s.a.Fragment,null,s.a.createElement(i.a,{onClick:function(){return w.setNewDocletType(null)}},__("取消")),s.a.createElement(i.a,{type:"primary",onClick:function(){return w.createTemplate()}},__("确定"))),T=w.state,D=T.newTemplateName,M=T.newDocletType,L=T.templateBiz,I=null!==M,B=window.appData.isYuque,z=!g&&B||!B&&!g;return s.a.createElement(r.a,{className:"modal-without-padding",visible:e.visible,bodyStyle:I?{"min-height":198}:{height:"75vh","max-height":650},style:{top:48},onCancel:e.onCancel,width:I?"368px":"960px",footer:I?A:null,title:I?__("新建模板"):__("选择模板"),maskClosable:!I},!I&&s.a.createElement(s.a.Fragment,null,s.a.createElement(c.a,{defaultValue:"all",className:"template-selector-radio-menu",mode:"horizontal",defaultSelectedKeys:[d],onClick:function(e){return w.switchFormat(e.key)}},s.a.createElement(c.a.Item,{key:"all",className:"template-selector-radio-item"},s.a.createElement("a",null,__("全部"))),s.a.createElement(c.a.Item,{key:p.FORMAT.LAKE,className:"template-selector-radio-item"},s.a.createElement("a",{"data-testid":"lake-template-button"},__("文档"))),s.a.createElement(c.a.Item,{key:p.FORMAT.LAKESHEET,className:"template-selector-radio-item"},s.a.createElement("a",{"data-testid":"lakesheet-template-button"},__("表格"))),s.a.createElement(c.a.Item,{key:p.FORMAT.LAKESHOW,className:"template-selector-radio-item"},s.a.createElement("a",null,__("演示文稿"))),s.a.createElement(c.a.Item,{key:p.FORMAT.LAKEBOARD,className:"template-selector-radio-item"},s.a.createElement("a",null,__("画板"))),z&&s.a.createElement(c.a.Item,{key:"laketable",className:"template-selector-radio-item"},s.a.createElement("a",null,__("数据表")))),s.a.createElement(o.a,{overlay:S,trigger:["hover"]},s.a.createElement(i.a,{"data-testid":"new-template",className:"template-selector-new-button"},__("新建模板"))),s.a.createElement("div",{className:"sections"},O&&O.length>0&&O.map((function(e){return e.templates.length>0&&s.a.createElement("div",{className:"templates-section",key:e.name},s.a.createElement("h4",{className:"templates-section-title"},e.name),s.a.createElement(a.a,{type:"flex",gutter:16,align:"top",className:"lark-template"},e.templates.map((function(e){if(!z&&(null==e?void 0:e.format)===p.FORMAT.LAKETABLE)return null;var n={};return f&&(n.onUseTemplate=f),s.a.createElement(R,P({book:t,template:e,key:e.id,reloadTemplates:w.reloadTemplatesByBook,templateBiz:L,commandParams:h,openTemplateEditPage:m,openContributorPage:k,isDesktop:g},n))}))))})))),I&&s.a.createElement(j.a,{newTemplateName:D,onSetNewTemplateName:w.setNewTemplateName,onSetSelectedScope:w.setSelectedScope,templateBiz:L,isDesktop:g,group:v,organization:y}))}N.useViewModel=function(e){var t=e.book,n=e.templateProxy,r=e.docProxy,a=e.content,o=void 0===a?[]:a,i=e.defaultType,c=e.openTemplateEditPage,s=e.currentUser,u=new h.a(n,r),d=D(Object(l.useState)(o),2),f=d[0],m=d[1],g=D(Object(l.useState)(i),2),v=g[0],y=g[1],b=D(Object(l.useState)([]),2),k=b[0],w=b[1],x=D(Object(l.useState)(-1),2),_=x[0],E=x[1],C=D(Object(l.useState)(__("未命名模板")),2),O=C[0],S=C[1],R=D(Object(l.useState)(null),2),j=R[0],P=R[1];return Object(l.useEffect)((function(){var e=function(){var e=T(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==o.length){e.next=5;break}return e.next=3,u.getAllTemplatesByBook(t.id);case 3:n=e.sent,m(n);case 5:"all"!==i&&(r=u.filterTemplatesByFormat(f,i),w(r));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),{state:{newTemplateName:O,newDocletType:j,selectedFormat:v,singleFormatTemplates:k,templatesByCategory:f,templateBiz:u},switchFormat:function(e){var t=u.filterTemplatesByFormat(f,e);y(e),w(t)},reloadTemplatesByBook:function(){return T(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.getAllTemplatesByBook(t.id);case 2:n=e.sent,m(n),"all"!==v&&(r=u.filterTemplatesByFormat(n,v),w(r));case 5:case"end":return e.stop()}}),e)})))()},createTemplate:function(){var e=this;return T(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return _===p.TYPE.BOOK?(r=t.id,a=p.TARGET_TYPE.BOOK):_===p.TYPE.PERSONAL?(r=s.id,a=p.TARGET_TYPE.USER):(r=t.user_id,a=p.TARGET_TYPE.USER),n.next=3,u.createTemplate(r,a,_,j,O);case 3:return o=n.sent,P(null),n.next=7,e.reloadTemplatesByBook();case 7:c("/r/templates/".concat(o.id,"/edit"));case 8:case"end":return n.stop()}}),n)})))()},setNewTemplateName:S,setNewDocletType:P,setSelectedScope:E}},N.defaultProps={defaultType:"all"},N.propTypes={book:d.a.object,visible:d.a.bool,onCancel:d.a.func.isRequired,templateProxy:d.a.object,docProxy:d.a.object,content:d.a.array,defaultType:d.a.string,onUseTemplate:d.a.func,commandParams:d.a.object,openTemplateEditPage:d.a.func,openContributorPage:d.a.func,isDesktop:d.a.bool,group:d.a.object,organization:d.a.object,currentUser:d.a.object};t.a=Object(f.b)(N,!0)},1652:function(e,t,n){"use strict";n(2288);var r=n(2100);n(1962);t.a=r.a},1654:function(e,t,n){"use strict";n(57);var r=n(23),a=n(0),o=n.n(a),i=n(1),c=n.n(i),l=n(3048);function s(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e){var t=e.doc,n=e.docDomain,i=e.type,c=u(Object(a.useState)(null),2),d=c[0],f=c[1],p=u(Object(a.useState)(!1),2),h=p[0],m=p[1],g=function(){var a,o=(a=regeneratorRuntime.mark((function a(){var o,c;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.docVersionProxy.find({doc_id:t.id,doc_type:n,draft:"published"===i?0:1,limit:1});case 2:1===(o=a.sent).length?f(o[0]):(c="published"===i?__("文档尚未发布"):__("暂无历史记录，请先保存文档"),r.a.warning(c)),m(!1);case 5:case"end":return a.stop()}}),a)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var o=a.apply(e,t);function i(e){s(o,n,r,i,c,"next",e)}function c(e){s(o,n,r,i,c,"throw",e)}i(void 0)}))});return function(){return o.apply(this,arguments)}}();return Object(a.useEffect)((function(){g()}),[]),h||!d?null:o.a.createElement(l.b,{version:d,docVersionProxy:e.docVersionProxy,onCancel:e.onCancel,onCreated:e.onCreated||function(e){r.a.success(__("保存版本成功，点击查看 {link}",{link:o.a.createElement("a",{href:"/r/doc_versions/".concat(e.id),target:"_blank","data-testid":"version-link"},e.name)}))}})}f.propTypes={doc:c.a.object.isRequired,docDomain:c.a.string.isRequired,type:c.a.oneOf(["draft","published"]),onCancel:c.a.func.isRequired,onCreated:c.a.func,docVersionProxy:c.a.object.isRequired},t.a=f},1655:function(e,t,n){"use strict";var r=n(269),a=n.n(r),o=n(31),i=n(222),c=n(590),l=n(940),s=n.n(l),u=n(1959),d=n.n(u);var f=n(3065);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){y(o,r,a,i,c,"next",e)}function c(e){y(o,r,a,i,c,"throw",e)}i(void 0)}))}}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var a=C(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&w(e,t)}(u,e);var t,n,c,l=x(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),O(E(t=l.call(this,e)),"_getSubmitBaseParams",(function(){return"organization"===t.type?{organization_id:t.target_id}:"group"===t.type?{group_id:t.target_id}:"book"===t.type||"doc"===t.type?{target_id:t.target_id,target_type:t.target_type}:"list"===t.type?{list_id:t.target_id}:{}})),O(E(t),"getRealUsers",function(){var e=b(regeneratorRuntime.mark((function e(n){var r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.dataSourceServices){e.next=2;break}return e.abrupt("return",n);case 2:r=g(t.dataSourceServices),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}if(!(o=a.value).getRealUsers){e.next=11;break}return e.next=10,o.getRealUsers(n);case 10:n=e.sent;case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})));return function(t){return e.apply(this,arguments)}}()),O(E(t),"getUserCount",(function(e){var n;if(t.dataSourceServices){var r,a=g(t.dataSourceServices);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o.getUserCount){n=o.getUserCount(e);break}}}catch(e){a.e(e)}finally{a.f()}}return void 0===n&&null!=e&&e.length?e.length:n})),O(E(t),"submit",function(){var e=b(regeneratorRuntime.mark((function e(n,r){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRealUsers(n);case 2:return n=e.sent,a=m(m({},t._getSubmitBaseParams()),{},{users:t.serializeUserPostBody(n)}),r&&(a.role=r.value),e.next=7,t.createProxy(a,{ignoreGlobalMessage:!0});case 7:if(!((o=e.sent).success_count<=0&&o.errors&&o.errors.length>0)){e.next=10;break}return e.abrupt("return",{status:"error",message:__("[ {members} ] 添加失败; 错误原因: {message}",{members:o.errors.map((function(e){return e.name})).join(", "),message:o.message}),data:o});case 10:if(0!==o.success_count&&0!==o.length){e.next=12;break}return e.abrupt("return",{status:"error",message:__("选择的成员已被添加")});case 12:return e.abrupt("return",{status:"success",message:__("成功添加了 {count} 位成员",{count:o.success_count||o.length}),data:o});case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),O(E(t),"checkValid",(function(e){return t.isMember(e)?{status:"error",message:__("成员已存在")}:{status:"success",message:"ok"}})),O(E(t),"searchUser",function(){var e=b(regeneratorRuntime.mark((function e(n){var a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={q:n},"organization"===t.type?a.global=!0:a.include_unconfirmed_corp_account=!0,window.appData.organization&&(a.optional_properties="profile"),e.next=5,o.a.users.complete(a);case 5:return c=(c=e.sent).map((function(e){return t.setUid(e),e.type="User",e.profile&&e.profile.status===r.STATUS.joined&&(e.dep=e.profile.department||i.a.getMemberRoleName(e.profile.role),e.avatar_url=e.profile.orgAvatar||e.avatar),e})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.dataSourceServices=e.dataSourceServices,t}return t=u,c=[{key:"create",value:function(e){var t=new u(e);return t.check(),t.init(),t}}],(n=[{key:"init",value:function(){var e;"organization"===this.type?(this.target_id=this.organization.id,this.target_type="Organization",this.abilities=this.organization.abilities,this.createProxy=o.a.organizationUsers.create):"group"===this.type?(this.group.members&&(this.members=Object(f.a)(this.group)),this.target_id=this.group.id,this.target_type="Group",this.abilities=this.group.abilities,this.createProxy=o.a.groupUsers.create):"book"===this.type?(this.book.collaborators&&(this.members=Object(f.a)(this.book)),this.target_id=this.book.id,this.target_type="Book",this.abilities=this.book.abilities,this.createProxy=o.a.collaborations.create):"doc"===this.type?(this.doc.collaborations&&(this.members=Object(f.a)(this.doc)),this.target_id=this.doc.id,this.target_type="Doc",this.createProxy=o.a.collaborations.create,this.abilities=this.doc.abilities):"list"===this.type&&(this.list.members&&(this.members=Object(f.a)(this.list)),this.target_id=this.list.id,this.target_type="List",this.abilities=this.list.abilities,this.createProxy=o.a.listUsers.create),this.status="organization"===(e=this.type)?a.a.STATUS:"group"===e?s.a.STATUS:"book"===e||"doc"===e?d.a.STATUS:void 0}},{key:"check",value:function(){var e=window.appData.isPrivateCloud;"organization"===this.type&&e&&(this.enable=!1)}},{key:"isOwner",value:function(){return this.abilities.manage}},{key:"isMember",value:function(e){return!("organization"!==this.type||!e.profile||e.profile.status!==r.STATUS.joined)||!(!this.members||0===this.members.length)&&this.members.some((function(t){return Object(f.b)(t,e)}))}}])&&k(t.prototype,n),c&&k(t,c),Object.defineProperty(t,"prototype",{writable:!1}),u}(c.a);O(S,"id","search"),O(S,"title",__("搜索"));t.a=S},1713:function(e,t,n){},1715:function(e,t,n){},1716:function(e,t,n){},1718:function(e,t,n){var r={"./action-copy.svg":[1006,0,1],"./action-delete.svg":[1007,0,1],"./action-doc-info.svg":[1008,0,1],"./action-export.svg":[1009,0,1],"./action-mobile.svg":[1010,0,1],"./action-move.svg":[1011,0,1],"./action-print.svg":[1012,0,1],"./action-save-as.svg":[1013,0,1],"./action-version.svg":[1014,0,1],"./add-list.svg":[1015,0,1],"./add-to-catalog.svg":[1016,0,1],"./add.svg":[1017,0,1],"./address-book.svg":[1018,0,1],"./advanced-search.svg":[1019,0,1],"./anchor-rect.svg":[1020,0,1],"./announcement-edit.svg":[1021,0,1],"./area-comment.svg":[1022,0,1],"./arrow-down.svg":[1023,0,1],"./arrow-left.svg":[1024,0,1],"./arrow-outlined.svg":[1025,0,1],"./arrow-right.svg":[1026,0,1],"./backtop.svg":[1027,0,1],"./bell.svg":[1028,0,1],"./beta.svg":[1029,0,1],"./bilibili.svg":[1030,0,1],"./board-insert-geometry.svg":[1031,0,1],"./board-insert-line.svg":[1032,0,1],"./board-insert-link.svg":[1033,0,1],"./board-insert-mind.svg":[1034,0,1],"./board-insert-text.svg":[1035,0,1],"./book-fill.svg":[1036,0,1],"./book-icon-alibaba.svg":[1037,0,1],"./book-icon-alipay.svg":[1038,0,1],"./book-icon-taobao.svg":[1039,0,1],"./book-icon-topic.svg":[1040,0,1],"./book-icon-yuque.svg":[1041,0,1],"./book-new-create.svg":[1042,0,1],"./book-temporary-storage.svg":[1043,0,1],"./book-toc.svg":[1044,0,1],"./book-type-blog.svg":[1045,0,1],"./book-type-default.svg":[1046,0,1],"./book-type-default2.svg":[1047,0,1],"./book-type-design.svg":[1048,0,1],"./book-type-design2.svg":[1049,0,1],"./book-type-import.svg":[1050,0,1],"./book-type-import2.svg":[1051,0,1],"./book-type-manual.svg":[1052,0,1],"./book-type-notes.svg":[1053,0,1],"./book-type-project.svg":[1054,0,1],"./book-type-reports.svg":[1055,0,1],"./book-type-resource.svg":[1056,0,1],"./book-type-resource2.svg":[1057,0,1],"./book-type-sheet.svg":[1058,0,1],"./book-type-thread.svg":[1059,0,1],"./book-type-thread2.svg":[1060,0,1],"./book-type-travel.svg":[1061,0,1],"./book_announcement.svg":[1062,0,1],"./books-icon-aixin.svg":[1063,0,1],"./books-icon-alibaba.svg":[1064,0,1],"./books-icon-baozhi.svg":[1065,0,1],"./books-icon-bianzu.svg":[1066,0,1],"./books-icon-bianzu_15.svg":[1067,0,1],"./books-icon-biaoge.svg":[1068,0,1],"./books-icon-biaoqian.svg":[1069,0,1],"./books-icon-bikan.svg":[1070,0,1],"./books-icon-boke.svg":[1071,0,1],"./books-icon-chanpinwendang.svg":[1072,0,1],"./books-icon-chucun.svg":[1073,0,1],"./books-icon-dabiaowenjian.svg":[1074,0,1],"./books-icon-default.svg":[1075,0,1],"./books-icon-dengpao.svg":[1076,0,1],"./books-icon-duihua.svg":[1077,0,1],"./books-icon-gerendangan.svg":[1078,0,1],"./books-icon-huabao.svg":[1079,0,1],"./books-icon-huati.svg":[1080,0,1],"./books-icon-huati2.svg":[1081,0,1],"./books-icon-hudun.svg":[1082,0,1],"./books-icon-huojian.svg":[1083,0,1],"./books-icon-huowu.svg":[1084,0,1],"./books-icon-jiami.svg":[1085,0,1],"./books-icon-jiangbei.svg":[1086,0,1],"./books-icon-jihua.svg":[1087,0,1],"./books-icon-lanqiu.svg":[1088,0,1],"./books-icon-lingdang.svg":[1089,0,1],"./books-icon-liucheng.svg":[1090,0,1],"./books-icon-mubiao.svg":[1091,0,1],"./books-icon-penzai.svg":[1092,0,1],"./books-icon-qiqiu.svg":[1093,0,1],"./books-icon-qunzu.svg":[1094,0,1],"./books-icon-renwuliebiao.svg":[1095,0,1],"./books-icon-rili.svg":[1096,0,1],"./books-icon-suozhu.svg":[1097,0,1],"./books-icon-tongxunlu.svg":[1098,0,1],"./books-icon-tuandui.svg":[1099,0,1],"./books-icon-wendang.svg":[1100,0,1],"./books-icon-wengao.svg":[1101,0,1],"./books-icon-wenjiandai.svg":[1102,0,1],"./books-icon-wenjiandai_2.svg":[1103,0,1],"./books-icon-wenjianjia.svg":[1104,0,1],"./books-icon-xiezuo.svg":[1105,0,1],"./books-icon-xinfeng.svg":[1106,0,1],"./books-icon-xingquxiaozu.svg":[1107,0,1],"./books-icon-xuexibiji.svg":[1108,0,1],"./books-icon-yingyuxuexi.svg":[1109,0,1],"./books-icon-yuque_logo.svg":[1110,0,1],"./books-icon-zhiding.svg":[1111,0,1],"./card-guide-code.svg":[1112,0,1],"./card-guide-image.svg":[1113,0,1],"./card-guide-table.svg":[1114,0,1],"./card-guide-video.svg":[1115,0,1],"./catalog-caret.svg":[1116,0,1],"./catalog-create-link.svg":[1117,0,1],"./catalog-create-title.svg":[1118,0,1],"./catalog-expand.svg":[1119,0,1],"./catalog-fold.svg":[1120,0,1],"./catalog-more.svg":[1121,0,1],"./check-circle-fill.svg":[1122,0,1],"./check-circle.svg":[1123,0,1],"./check-green.svg":[1124,0,1],"./check.svg":[1125,0,1],"./chinese.svg":[1126,0,1],"./classic-active.svg":[1127,0,1],"./classic.svg":[1128,0,1],"./clock.svg":[1129,0,1],"./cloud.svg":[1130,0,1],"./collab-outlined.svg":[1131,0,1],"./collapse.svg":[1132,0,1],"./collect-star-full.svg":[1133,0,1],"./collect-star.svg":[1134,0,1],"./column.svg":[1135,0,1],"./comment-bubble.svg":[1136,0,1],"./comment-hide.svg":[1137,0,1],"./comment-timeline.svg":[1138,0,1],"./comments.svg":[1139,0,1],"./comments_para.svg":[1140,0,1],"./compass.svg":[1141,0,1],"./contact.svg":[1142,0,1],"./cost_detail.svg":[1143,0,1],"./crown.svg":[1144,0,1],"./cup-color.svg":[1145,0,1],"./curved-clound-sm.svg":[1146,0,1],"./curved-clound.svg":[1147,0,1],"./dashboard-outlined.svg":[1148,0,1],"./dashboard.svg":[1149,0,1],"./delete.svg":[1150,0,1],"./department.svg":[1151,0,1],"./dept.svg":[1152,0,1],"./diagram-format.svg":[1153,0,1],"./diamond-gold.svg":[1154,0,1],"./diamond-gray.svg":[1155,0,1],"./diamond.svg":[1156,0,1],"./dingding-filled.svg":[1157,0,1],"./dingding.svg":[1158,0,1],"./dingtalk-white.svg":[1159,0,1],"./dingtalk.svg":[1160,0,1],"./divider.svg":[1161,0,1],"./doc-has-content-risk.svg":[1162,0,1],"./doc-has-new-content.svg":[1163,0,1],"./doc-outline.svg":[1164,0,1],"./doc-qrcode.svg":[1165,0,1],"./doc-quick-create.svg":[1166,0,1],"./doc-risk.svg":[1167,0,1],"./doc-setting.svg":[1168,0,1],"./doc-type-artboard.svg":[1169,0,1],"./doc-type-board.svg":[1170,0,1],"./doc-type-default.svg":[1171,0,1],"./doc-type-markdown.svg":[1172,0,1],"./doc-type-mind.svg":[1173,0,1],"./doc-type-note.svg":[1174,0,1],"./doc-type-sheet.svg":[1175,0,1],"./doc-type-show.svg":[1176,0,1],"./doc-type-table.svg":[1177,0,1],"./doc-type-thread.svg":[1178,0,1],"./docs.svg":[1179,0,1],"./double-arrow-down.svg":[1180,0,1],"./down.svg":[1181,0,1],"./download.svg":[1182,0,1],"./drag.svg":[1183,0,1],"./edison.svg":[1184,0,1],"./edit-border.svg":[1185,0,1],"./edit-event.svg":[1186,0,1],"./edit-no-border.svg":[1187,0,1],"./edit-readme.svg":[1188,0,1],"./edit-sudoku.svg":[1189,0,1],"./edit.svg":[1190,0,1],"./editor-aligncenter.svg":[1191,0,1],"./editor-alignjustify.svg":[1192,0,1],"./editor-alignleft.svg":[1193,0,1],"./editor-alignright.svg":[1194,0,1],"./editor-blockquotes.svg":[1195,0,1],"./editor-bold.svg":[1196,0,1],"./editor-card.svg":[1197,0,1],"./editor-codeblock.svg":[1198,0,1],"./editor-command.svg":[1199,0,1],"./editor-findandreplace.svg":[1200,0,1],"./editor-h1.svg":[1201,0,1],"./editor-h2.svg":[1202,0,1],"./editor-h3.svg":[1203,0,1],"./editor-h4.svg":[1204,0,1],"./editor-horizontalrule.svg":[1205,0,1],"./editor-indent.svg":[1206,0,1],"./editor-inlinecode.svg":[1207,0,1],"./editor-italic.svg":[1208,0,1],"./editor-link.svg":[1209,0,1],"./editor-mention.svg":[1210,0,1],"./editor-option.svg":[1211,0,1],"./editor-orderedlist.svg":[1212,0,1],"./editor-outdent.svg":[1213,0,1],"./editor-pasteplaintext.svg":[1214,0,1],"./editor-pick.svg":[1215,0,1],"./editor-redo.svg":[1216,0,1],"./editor-shortcut.svg":[1217,0,1],"./editor-strikethrough.svg":[1218,0,1],"./editor-sub.svg":[1219,0,1],"./editor-sup.svg":[1220,0,1],"./editor-tasklist.svg":[1221,0,1],"./editor-underline.svg":[1222,0,1],"./editor-undo.svg":[1223,0,1],"./editor-unorderedlist.svg":[1224,0,1],"./ellipsis.svg":[1225,0,1],"./empty-notification.svg":[1226,0,1],"./english.svg":[1227,0,1],"./expand.svg":[1228,0,1],"./expire-book.svg":[1229,0,1],"./expire-doc.svg":[1230,0,1],"./expire-member.svg":[1231,0,1],"./expire-resource.svg":[1232,0,1],"./explore.svg":[1233,0,1],"./export_x.svg":[1234,0,1],"./feather-color.svg":[1235,0,1],"./feather-fill.svg":[1236,0,1],"./feather-outlined.svg":[1237,0,1],"./feather.svg":[1238,0,1],"./feature-guide-close.svg":[1239,0,1],"./feature-type-book.svg":[1240,0,1],"./feature-type-note.svg":[1241,0,1],"./feature-type-org.svg":[1242,0,1],"./feedback.svg":[1243,0,1],"./file-ai.svg":[1244,0,1],"./file-audio.svg":[1245,0,1],"./file-axure.svg":[1246,0,1],"./file-default.svg":[1247,0,1],"./file-doc.svg":[1248,0,1],"./file-excel.svg":[1249,0,1],"./file-folder.svg":[1250,0,1],"./file-graffle.svg":[1251,0,1],"./file-image.svg":[1252,0,1],"./file-keynote.svg":[1253,0,1],"./file-mindmap.svg":[1254,0,1],"./file-mindnode.svg":[1255,0,1],"./file-numbers.svg":[1256,0,1],"./file-pdf.svg":[1257,0,1],"./file-ppt.svg":[1258,0,1],"./file-psd.svg":[1259,0,1],"./file-rar.svg":[1260,0,1],"./file-sheet.svg":[1261,0,1],"./file-sketch.svg":[1262,0,1],"./file-txt.svg":[1263,0,1],"./file-video.svg":[1264,0,1],"./file-word.svg":[1265,0,1],"./file-xmind.svg":[1266,0,1],"./flow.svg":[1267,0,1],"./fu-get-egg.svg":[1268,0,1],"./fu-goon.svg":[1269,0,1],"./fu-shortcut-awards.svg":[1270,0,1],"./fu-shortcut-share.svg":[1271,0,1],"./fu-shortcut-tasks.svg":[1272,0,1],"./fu-task-disabled.svg":[1273,0,1],"./fu-task-done.svg":[1274,0,1],"./fu-task-hot.svg":[1275,0,1],"./fu-task-normal.svg":[1276,0,1],"./fu-task-todo.svg":[1277,0,1],"./gift-box.svg":[1278,0,1],"./grain.svg":[1279,0,1],"./grid.svg":[1280,0,1],"./group-empty.svg":[1281,0,1],"./group-type-commerce.svg":[1282,0,1],"./group-type-default.svg":[1283,0,1],"./group-type-department.svg":[1284,0,1],"./group-type-interest.svg":[1285,0,1],"./group-type-official_doc.svg":[1286,0,1],"./group-type-project.svg":[1287,0,1],"./guide-sign.svg":[1288,0,1],"./h5-comment.svg":[1289,0,1],"./h5-doc-edit.svg":[1290,0,1],"./h5-doc-publish.svg":[1291,0,1],"./h5-note-add.svg":[1292,0,1],"./h5-outline.svg":[1293,0,1],"./h5-social-share.svg":[1294,0,1],"./h5-star-gray.svg":[1295,0,1],"./h5-star.svg":[1296,0,1],"./help-doc.svg":[1297,0,1],"./help-search.svg":[1298,0,1],"./help.svg":[1299,0,1],"./helpdoc.svg":[1300,0,1],"./history-delete.svg":[1301,0,1],"./homepage-arrow-right.svg":[1302,0,1],"./hot.svg":[1303,0,1],"./icon-active-members.svg":[1304,0,1],"./icon-book-group.svg":[1305,0,1],"./icon-chain.svg":[1306,0,1],"./icon-custom.svg":[1307,0,1],"./icon-delete.svg":[1308,0,1],"./icon-desktop.svg":[1309,0,1],"./icon-discuz.svg":[1310,0,1],"./icon-excel-gray.svg":[1311,0,1],"./icon-excel-green.svg":[1312,0,1],"./icon-group-zone.svg":[1313,0,1],"./icon-guide.svg":[1314,0,1],"./icon-hot-book.svg":[1315,0,1],"./icon-hot-doc.svg":[1316,0,1],"./icon-hot-thread.svg":[1317,0,1],"./icon-members.svg":[1318,0,1],"./icon-mobile.svg":[1319,0,1],"./icon-organization.svg":[1320,0,1],"./icon-resource-copy.svg":[1321,0,1],"./icon-resource-move.svg":[1322,0,1],"./icon-resource-remove.svg":[1323,0,1],"./icon-resource-upload-folder.svg":[1324,0,1],"./icon-resource-upload.svg":[1325,0,1],"./icon-settings.svg":[1326,0,1],"./icon-speaker.svg":[1327,0,1],"./icon-topics.svg":[1328,0,1],"./icon-zoomer.svg":[1329,0,1],"./import_doc.svg":[1330,0,1],"./import_x.svg":[1331,0,1],"./index-cloud.svg":[1332,0,1],"./info.svg":[1333,0,1],"./install-desktop.svg":[1334,0,1],"./invite.svg":[1335,0,1],"./knowledge-list.svg":[1336,0,1],"./lark.svg":[1337,0,1],"./left-thin.svg":[1338,0,1],"./light-outlined.svg":[1339,0,1],"./light.svg":[1340,0,1],"./lightning-filled.svg":[1341,0,1],"./lightning.svg":[1342,0,1],"./like-bubble-active.svg":[1343,0,1],"./like-bubble.svg":[1344,0,1],"./like-color.svg":[1345,0,1],"./like-fill.svg":[1346,0,1],"./like-small-after.svg":[1347,0,1],"./like-small-before.svg":[1348,0,1],"./like.svg":[1349,0,1],"./link.svg":[1350,0,1],"./list.svg":[1351,0,1],"./logo-inverse.svg":[1352,0,1],"./logout.svg":[1353,0,1],"./lower-right-corner.svg":[1354,0,1],"./m-notification-action.svg":[1355,0,1],"./m-notification-arrow.svg":[1356,0,1],"./m-notification-mention.svg":[1357,0,1],"./m-notification-normal.svg":[1358,0,1],"./m-notification-system.svg":[1359,0,1],"./meh.svg":[1360,0,1],"./member-big-level-bordered.svg":[1361,0,1],"./member-big-level1-alibaba-gray.svg":[1362,0,1],"./member-big-level1-alibaba.svg":[1363,0,1],"./member-big-level1.svg":[1364,0,1],"./member-desc-1.svg":[1365,0,1],"./member-desc-2.svg":[1366,0,1],"./member-desc-3.svg":[1367,0,1],"./member-desc-4.svg":[1368,0,1],"./member-desc-5.svg":[1369,0,1],"./member-expired-level1.svg":[1370,0,1],"./member-level1.svg":[1371,0,1],"./membership-expired.svg":[1372,0,1],"./membership.svg":[1373,0,1],"./mind-append-child.svg":[1374,0,1],"./mind-append-sibling.svg":[1375,0,1],"./mind-collapse-expand.svg":[1376,0,1],"./mind-create-link.svg":[1377,0,1],"./mind-insert-root.svg":[1378,0,1],"./mind-toggle-properties.svg":[1379,0,1],"./mini-editor-shortcut.svg":[1380,0,1],"./minus.svg":[1381,0,1],"./more-circle.svg":[1382,0,1],"./more-horizontal.svg":[1383,0,1],"./more-vertical.svg":[1384,0,1],"./more.svg":[1385,0,1],"./move-bottom.svg":[1386,0,1],"./move-delete.svg":[1387,0,1],"./move-down.svg":[1388,0,1],"./move-top.svg":[1389,0,1],"./move-up.svg":[1390,0,1],"./nav-bell.svg":[1391,0,1],"./nav-clock.svg":[1392,0,1],"./nav-create.svg":[1393,0,1],"./nav-invite.svg":[1394,0,1],"./nav-menu.svg":[1395,0,1],"./nav-recent-edit.svg":[1396,0,1],"./nav-search.svg":[1397,0,1],"./nav-share.svg":[1398,0,1],"./new-ellipsis.svg":[1399,0,1],"./new-group.svg":[1400,0,1],"./new-tab-outlined.svg":[1401,0,1],"./new_group_sign.svg":[1402,0,1],"./newtrash-outlined.svg":[1403,0,1],"./newtrash.svg":[1404,0,1],"./next-page.svg":[1405,0,1],"./note-add-active.svg":[1406,0,1],"./note-add.svg":[1407,0,1],"./note-book.svg":[1408,0,1],"./note-icon-attachment.svg":[1409,0,1],"./note-icon-bookmark.svg":[1410,0,1],"./note-icon-image.svg":[1411,0,1],"./note-icon-todo.svg":[1412,0,1],"./note-mobile.svg":[1413,0,1],"./note-recycle.svg":[1414,0,1],"./note-swap.svg":[1415,0,1],"./note-tag.svg":[1416,0,1],"./note.svg":[1417,0,1],"./number.svg":[1418,0,1],"./official-doc-icon.svg":[1419,0,1],"./order.svg":[1420,0,1],"./org-add-new.svg":[1421,0,1],"./org-add-new2.svg":[1422,0,1],"./org-add.svg":[1423,0,1],"./org-bind.svg":[1424,0,1],"./org-buy-tips.svg":[1425,0,1],"./org-groups.svg":[1426,0,1],"./org-member.svg":[1427,0,1],"./org-repos.svg":[1428,0,1],"./original.svg":[1429,0,1],"./package-blue.svg":[1430,0,1],"./paginate.svg":[1431,0,1],"./para_comment.svg":[1432,0,1],"./pencil-outlined.svg":[1433,0,1],"./permission-intranet-all.svg":[1434,0,1],"./permission-intranet.svg":[1435,0,1],"./permission-private-book.svg":[1436,0,1],"./permission-private.svg":[1437,0,1],"./permission-public.svg":[1438,0,1],"./pin-outlined.svg":[1439,0,1],"./pin.svg":[1440,0,1],"./play.svg":[1441,0,1],"./premium.svg":[1442,0,1],"./present.svg":[1443,0,1],"./previous-page.svg":[1444,0,1],"./profile.svg":[1445,0,1],"./project.svg":[1446,0,1],"./promo.svg":[1447,0,1],"./publish-loading-icon.svg":[1448,0,1],"./quan_icon_book.svg":[1449,0,1],"./quan_icon_logo.svg":[1450,0,1],"./question.svg":[1451,0,1],"./quote.svg":[1452,0,1],"./required.svg":[1453,0,1],"./review-accept.svg":[1454,0,1],"./review-arrow-down.svg":[1455,0,1],"./review-arrow-right.svg":[1456,0,1],"./review-cancel.svg":[1457,0,1],"./review-finish.svg":[1458,0,1],"./review-history.svg":[1459,0,1],"./review-reject.svg":[1460,0,1],"./review-start-active.svg":[1461,0,1],"./review-start.svg":[1462,0,1],"./review-status.svg":[1463,0,1],"./right-thin.svg":[1464,0,1],"./safe.svg":[1465,0,1],"./scene-review.svg":[1466,0,1],"./scene-send-mail.svg":[1467,0,1],"./scene-translate.svg":[1468,0,1],"./send-mail.svg":[1469,0,1],"./setting.svg":[1470,0,1],"./share-dingtalk-icon.svg":[1471,0,1],"./share-link-icon.svg":[1472,0,1],"./site-tip-book.svg":[1473,0,1],"./site-tip-dashboard.svg":[1474,0,1],"./site-tip-guidelines.svg":[1475,0,1],"./site-tip-team.svg":[1476,0,1],"./site-tip.svg":[1477,0,1],"./spark.svg":[1478,0,1],"./star-outlined.svg":[1479,0,1],"./star.svg":[1480,0,1],"./statistics-book.svg":[1481,0,1],"./statistics-contribution.svg":[1482,0,1],"./statistics-grain.svg":[1483,0,1],"./statistics-group.svg":[1484,0,1],"./statistics-like.svg":[1485,0,1],"./statistics-member.svg":[1486,0,1],"./statistics-members.svg":[1487,0,1],"./statistics-watch.svg":[1488,0,1],"./swip-outlined.svg":[1489,0,1],"./tag.svg":[1490,0,1],"./taobao.svg":[1491,0,1],"./thread_archive.svg":[1492,0,1],"./thread_daily.svg":[1493,0,1],"./thread_filter_clock.svg":[1494,0,1],"./thread_h5_home_menu.svg":[1495,0,1],"./thread_home_list.svg":[1496,0,1],"./thread_home_recent.svg":[1497,0,1],"./thread_main_post.svg":[1498,0,1],"./thread_reaction.svg":[1499,0,1],"./thread_reply.svg":[1500,0,1],"./thread_schedule.svg":[1501,0,1],"./thread_user_docker_close.svg":[1502,0,1],"./thread_user_posts.svg":[1503,0,1],"./thread_weekly.svg":[1504,0,1],"./time-outlined.svg":[1505,0,1],"./time.svg":[1506,0,1],"./tip.svg":[1507,0,1],"./to_dashboard.svg":[1508,0,1],"./toipic-baiyan-bug.svg":[1509,0,1],"./topic.svg":[1510,0,1],"./topics-icon.svg":[1511,0,1],"./traditional-active.svg":[1512,0,1],"./traditional.svg":[1513,0,1],"./trash-bin.svg":[1514,0,1],"./trash-grid.svg":[1515,0,1],"./trash.svg":[1516,0,1],"./unsafe.svg":[1517,0,1],"./user-briefcase.svg":[1518,0,1],"./user-department-opa.svg":[1519,0,1],"./user-department.svg":[1520,0,1],"./user-email.svg":[1521,0,1],"./user-fill.svg":[1522,0,1],"./user-job.svg":[1523,0,1],"./user-location-line.svg":[1524,0,1],"./user-location.svg":[1525,0,1],"./user-mobile.svg":[1526,0,1],"./user_member.svg":[1527,0,1],"./user_member_active.svg":[1528,0,1],"./warning.svg":[1529,0,1],"./webapp-newbie.svg":[1530,0,1],"./webapp-plus.svg":[1531,0,1],"./webapp-search.svg":[1532,0,1],"./wechat.svg":[1533,0,1],"./wheat.svg":[1534,0,1],"./wireframe-banner.svg":[1535,0,1],"./wireframe-book-cover.svg":[1536,0,1],"./wireframe-book-cover1.svg":[1537,0,1],"./wireframe-book-cover2.svg":[1538,0,1],"./wireframe-book.svg":[1539,0,1],"./wireframe-doc-cover.svg":[1540,0,1],"./wireframe-headlines.svg":[1541,0,1],"./wireframe-hot-doc.svg":[1542,0,1],"./wireframe-latest-book.svg":[1543,0,1],"./wireframe-latest-doc.svg":[1544,0,1],"./wireframe-member.svg":[1545,0,1],"./wireframe-pic-view.svg":[1546,0,1],"./wireframe-quick-link.svg":[1547,0,1],"./wireframe-search.svg":[1548,0,1],"./wireframe-topic.svg":[1549,0,1],"./wireframe-trends-list-thrice.svg":[1550,0,1]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=1718,e.exports=a},1726:function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var o=n(252).myNotesConsts,i=n(2088),c=i.debounce,l=i.throttle,s=a((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)})),u=o.COLLAPSE_BTN_CLASS,d=o.SUBMIT_BTN_CLASS;function f(e){var t=document.querySelectorAll(".".concat(e));if(t&&t.length){var n=document.body.getBoundingClientRect().height;t.forEach((function(t){var r=t.getBoundingClientRect().top,a=t.closest(".note-list-item").querySelector(".right-tool-".concat(e));a.style.display=r-n>10?"flex":"none"}))}}s.scrollToTop=c((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=document.querySelector("#mynote-container .note-list-scroll"),n={top:0,left:0};e.silent||(n.behavior="smooth"),t.scrollTo(n)}),100),s.scrollToElem=c((function(e){var t=e.id,n=document.querySelector("#note-".concat(t));if(n){var r=n.offsetTop;document.querySelector("#mynote-container .note-list-scroll").scrollTo({top:r,left:0,behavior:"smooth"})}}),100),s.fixListContainerHeight=function(){var e=document.querySelector(".material-library-view"),t=document.querySelector(".note-list-container .note-list");if(e&&t){var n=e.getBoundingClientRect().height-82,r=document.querySelector(".note-tag-container");r&&(n-=r.getBoundingClientRect().height),t.style.height="".concat(n,"px")}},s.checkSubmitBtnShow=function(){return f(d)},s.checkCollapseBtnShow=function(){return f(u)};var p=l((function(){s.checkSubmitBtnShow(),s.checkCollapseBtnShow()}),500);s.handleListScroll=function(){var e=document.querySelector("#mynote-container .note-list-scroll");e&&(e.removeEventListener("scroll",p),e.addEventListener("scroll",p))},e.exports=s},1733:function(e,t,n){},1736:function(e,t,n){"use strict";n.d(t,"b",(function(){return U})),n.d(t,"a",(function(){return Z})),n.d(t,"j",(function(){return oe})),n.d(t,"h",(function(){return pe})),n.d(t,"g",(function(){return Se})),n.d(t,"e",(function(){return Le})),n.d(t,"f",(function(){return We})),n.d(t,"i",(function(){return Qe})),n.d(t,"c",(function(){return ot})),n.d(t,"d",(function(){return ht}));var r=n(78),a=n.n(r),o=n(1946),i=n(0),c=n.n(i),l=n(104),s=n.n(l),u=n(3017),d=n.n(u),f=n(211),p=n.n(f),h=n(2261),m=n.n(h),g=n(3019),v=n(2262),y=n(225),b=n(88),k=n(89),w=n(31),x=n(3060);function _(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){C(o,r,a,i,c,"next",e)}function c(e){C(o,r,a,i,c,"throw",e)}i(void 0)}))}}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=s()("biz:lakex_mini_editor_base"),A=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S(this,e),j(this,"getDefaultSuggestions",(function(){return t.options.getDefaultSuggestions?t.options.getDefaultSuggestions():[]})),j(this,"setEngine",(function(e){t._engine=e})),j(this,"getEngine",(function(){return t._engine})),j(this,"setValue",(function(e){var n=e;e?e.startsWith("<")?(n={type:"lake",value:e},t._engine.setDocument(n)):"string"==typeof e&&(n={type:"json",value:JSON.parse(e)},t._engine.setDocument(n)):t._engine.setDocument()})),j(this,"getValue",(function(){return t._engine?t._engine.getPureContent():t.getDefaultValue()})),j(this,"isEmpty",(function(){return!t._engine||t._engine.isEmpty()})),j(this,"getSafetyValue",O(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.contentReady();case 2:return e.abrupt("return",t.getValue());case 3:case"end":return e.stop()}}),e)})))),j(this,"getHtml",(function(){return t._engine?t._engine.getPureHtml():null})),j(this,"focus",(function(e){if(!t._engine)return null;t._engine.focus(e)})),j(this,"contentReady",O(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._engine){e.next=2;break}return e.abrupt("return",null);case 2:return n=0,r=function e(r,a){t._engine.canGetDocument()?r():n>10?a():(n++,setTimeout((function(){e(r,a)}),1e3))},e.abrupt("return",new Promise(r));case 5:case"end":return e.stop()}}),e)})))),j(this,"saveAll",(function(){if(!t.options.disableCache){var e={format:a.a.FORMAT.LAKE,value:t.getValue(),html:t.getHtml()};t.saveToCache(e)}})),this.options=n,this.from=n.from||"reply",this.targetType=n.targetType,this.belong=n.belong,this.belongType=n.belongType,this.group=n.group,this.target=n.target,this.attachType=n.attachType,this.isEditMode=!!n.target,this.type=this.getType(),this.ctoken=Object(y.a)(window);var r=this.getCacheKey();this.cacheKeys={title:"".concat(r,"/title"),content:"".concat(r,"/content")},this.editorCache=new x.a(this.cacheKeys.content),this.uuid=this.getUuid(),this._engine=null,this.initialDocument=null,this.init()}var t,n,r;return t=e,n=[{key:"init",value:function(){this.initialDocument=this.getInitialDocument(),P("init use: ",this.initialDocument)}},{key:"buildOptions",value:function(e){var t={image:{uploadFileURL:this.getImageUploadUrl(),accept:Object(v.getImageAcceptArr)()},file:{uploadFileURL:this.getFileUploadUrl(),accept:Object(v.getFileAcceptArr)()},transfer:{transferFilesURL:this.getTransferUrl()},localdoc:{uploadFileURL:this.getFileUploadUrl(),accept:Object(v.getLocalDocAcceptArr)()},mention:{mentionURL:b.a.patchGroupIdToUrl(this.getMentionActionUrl()),defaultList:this.getDefaultSuggestions()},lockedtext:{action:this.getCryptoUrl()},placeholder:this.getPlaceholder(),link:{autoCompleteLink:null==e?void 0:e.autoCompleteLink},video:{uploadAction:this.getMediaUploadUrl("video"),queryAction:"/api/video",accept:Object(v.getVideoAcceptArr)()},audio:{uploadFileURL:this.getMediaUploadUrl("audio"),queryURL:"/api/video",accept:Object(v.getAudioAcceptArr)()},vote:{allowVote:!0,queryDetailUrl:"api/votes",voteUrl:"api/votes"},cardSelect:{simple:{groups:[{items:this.getCards()}]}},yuque:{disableEmbedView:this.getDisableYuqueCardEmbedView()},materialLibrary:{component:c.a.createElement(g.a,{storage:k.default,webProxy:w.a}),repository:{requestBooksURL:"/api/mine/books?".concat(d.a.stringify({target_id:this.target&&this.target.id,target_type:this.targetType})),requestResourceURL:"/api/resources",searchURL:"/api/resources/search",imagePreviewURLPrefix:"".concat(window.location.origin,"/preview")}},fullscreen:{enable:this.getEnableFullEditor()}},n=[],r=this.getBlockedCards();return r&&r.length>1&&(n=Array.from(new Set([].concat(_(n),_(r))))),t.disabledPlugins=n,t}},{key:"getProps",value:function(){return{format:this.getFormat(),defaultValue:this.getDefaultValue(),autoFocus:this.getAutoFocus(),isMiniSize:this.isMiniSize()}}},{key:"getType",value:function(){return this.options.type||"unknown"}},{key:"getAutoFocus",value:function(){var e=this.options.autoFocus;return null!=e?e:!!this.options.useMiniGuide}},{key:"isMiniSize",value:function(){return!1}},{key:"getEnableFullEditor",value:function(){return!0}},{key:"getCards",value:function(){return["image","label","yuqueMain"]}},{key:"getBlockedCards",value:function(){return["video","checkIn","vote","audio","premium"]}},{key:"getUuid",value:function(){var e=this.cacheKeys.uuid,t=k.default.get(e);return t||(t=p()(32)+p()(32),k.default.set(e,t)),t}},{key:"getDefaultFormat",value:function(){return a.a.FORMAT.LAKE}},{key:"getFormat",value:function(){var e=this.options.format;return e||this.initialDocument.format}},{key:"getPlaceholder",value:function(){return null}},{key:"getInitialDocument",value:function(){if(this.initialDocument)return this.initialDocument;var e=this.loadFromCache();if(P("cached document:",e),this.isEditMode){var t=this.getContentObject();return P("adapted content: ",t),e&&(P("merge with cached content",e),t.format=e.format||t.format,t.title=e.title||t.title,t.value=e.value||t.value),t}if(e)return e.format=e.format||this.getDefaultFormat(),e;var n=this.loadFromUrl();return n||{format:this.getDefaultFormat(),title:null,value:null}}},{key:"getContentObject",value:function(e){return{format:(e=e||this.target||{}).format||this.getDefaultFormat(),title:e.title||e.name||"",value:e.value||e.body_asl||e.content}}},{key:"getDefaultValue",value:function(){var e=this.options.defaultValue;return e||this.initialDocument.value}},{key:"getFullUrl",value:function(e){return this.isEditMode&&!this.options.useBelongAttach?"".concat(e,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):this.belong?"".concat(e,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.belong.id,"&from=").concat(this.from):null}},{key:"getTransferUrl",value:function(){var e="/api/upload/copy?type=attachment",t=this.getFullUrl(e);return t||(t="".concat(e,"&attachable_uuid=").concat(this.uuid,"&from=").concat(this.from)),t}},{key:"getFileUploadUrl",value:function(){var e="/api/upload/attach?ctoken=".concat(this.ctoken,"&type=attachment");return this.getFullUrl(e)}},{key:"getMediaUploadUrl",value:function(e){var t="/api/video?ctoken=".concat(this.ctoken,"&format=").concat(e);return this.getFullUrl(t)}},{key:"getImageUploadUrl",value:function(){var e=this.getFileUploadUrl();return e?e.replace("&type=attachment","&type=image"):null}},{key:"getMentionActionUrl",value:function(){var e="";return this.isEditMode&&!this.options.useBelongAttach?e="/api/users/complete?target_type=".concat(this.attachType,"&target_id=").concat(this.target.id):this.belong&&(e="/api/users/complete?target_type=".concat(this.attachType,"&target_id=").concat(this.belong.id)),e}},{key:"getCryptoUrl",value:function(){return"/api/services/crypto"}},{key:"getDisableYuqueCardEmbedView",value:function(){return this.options.disableYuqueCardEmbedView}},{key:"saveToCache",value:function(e){P("save to cache:",e),e.format&&(e.title&&k.default.set(this.cacheKeys.title,e.title),this.needCacheContent(e)?this.editorCache.put(e.value,e.format):P("value is empty or the same as origin, ignore cache"))}},{key:"needCacheContent",value:function(e){if(!e.value)return!1;if(m.a.isBlank(e))return this.editorCache.clear(),!1;if(!this.target)return!0;var t=this.getContentObject();return!m.a.isContentSame(e.format,t.value,e.value)}},{key:"reset",value:function(){P("reset editor"),this.clearCache(),this._engine&&this._engine.setDocument()}},{key:"isContentChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e){var t=this.loadFromCache();t&&(e=t.value)}if(!this.target)return!0;var n="<cursor />",r=this.target.body_asl;return r.trim().replace(n,"")!==e.trim().replace(n,"")}},{key:"clearCache",value:function(){var e=this;P("clear cache"),Object.keys(this.cacheKeys).forEach((function(t){k.default.remove(e.cacheKeys[t])}))}},{key:"getCacheKey",value:function(){return this.isEditMode&&this.target&&this.belong?"autosave/".concat(this.type,"/").concat(this.belong.id,"/").concat(this.target.id,"/edit"):this.belong?"autosave/".concat(this.type,"/").concat(this.belong.id,"/new"):"autosave/".concat(this.type)}},{key:"loadFromUrl",value:function(){}},{key:"loadFromCache",value:function(){var e=!1,t={format:null,title:null,value:null},n=this.editorCache.retrieve();if(n&&(e=!0,t.format=n.format,t.value=n.value),this.cacheKeys.title){var r=k.default.get(this.cacheKeys.title);r&&(e=!0,t.title=r)}return e?t:null}}],r=[{key:"getEmptyDocument",value:function(){return{format:a.a.FORMAT.LAKE,value:null}}}],n&&R(t.prototype,n),r&&R(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),T=A;function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},L(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=z(e);if(t){var a=z(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return B(this,n)}}function B(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function z(e){return z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},z(e)}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&L(e,t)}(c,e);var t,n,r,i=I(c);function c(){return M(this,c),i.apply(this,arguments)}return t=c,r=[{key:"getEmptyDocument",value:function(){return{format:a.a.FORMAT.LAKE,value:null}}}],(n=[{key:"getType",value:function(){var e=this.options.targetType;return e?"".concat(e,"_comment").toLowerCase():"comment"}},{key:"isMiniSize",value:function(){return this.options.useMiniGuide||this.options.isMiniSize||window.h5}},{key:"getDefaultFormat",value:function(){return o.a.getDefaultDocumentFormat(a.a.TYPE.TOPIC)}},{key:"getEnableFullEditor",value:function(){return"Artboard"!==this.targetType}}])&&N(t.prototype,n),r&&N(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(T),U=F;function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},W(e,t)}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=X(e);if(t){var a=X(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return G(this,n)}}function G(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&W(e,t)}(o,e);var t,n,r,a=Y(o);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return q(this,o),e.attachType="Resource",e.useBelongAttach=!0,e.from="reply",a.call(this,e)}return t=o,(n=[{key:"getType",value:function(){return"area_comment"}},{key:"getAutoFocus",value:function(){return!0}},{key:"isMiniSize",value:function(){return!0}}])&&H(t.prototype,n),r&&H(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(U),Z=K;function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){return ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ee(e,t)}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=re(e);if(t){var a=re(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ne(this,n)}}function ne(e,t){if(t&&("object"===$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}var ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&ee(e,t)}(o,e);var t,n,r,a=te(o);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Q(this,o),e.attachType="Doc",e.useBelongAttach=!0,e.from="reply",a.call(this,e)}return t=o,(n=[{key:"getType",value:function(){return"word_comment"}},{key:"getAutoFocus",value:function(){return!0}},{key:"isMiniSize",value:function(){return!0}}])&&J(t.prototype,n),r&&J(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(U),oe=ae,ie=n(3052);function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},se(e,t)}function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fe(e);if(t){var a=fe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return de(this,n)}}function de(e,t){if(t&&("object"===ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function fe(e){return fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fe(e)}var pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&se(e,t)}(c,e);var t,n,r,i=ue(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).isEditMode||(t.cacheKeys.uuid="autosave/topics/".concat(e.belong.id,"/uuid")),t}return t=c,(n=[{key:"getType",value:function(){return"topic"}},{key:"getContentObject",value:function(e){var t={title:(e=e||this.target||{}).title||"",format:a.a.FORMAT.LAKE,value:null};return e.format===a.a.FORMAT.LAKE?(t.value=e.body_asl,t):(t.format=e.format,t.value=e.body_asl||e.body,t)}},{key:"getDefaultFormat",value:function(){return o.a.getDefaultDocumentFormat(a.a.TYPE.TOPIC)}},{key:"getFileUploadUrl",value:function(){var e="/api/upload/attach?ctoken=".concat(this.ctoken,"&type=attachment&from=").concat(this.from);return this.target?"".concat(e,"&attachable_type=Topic&attachable_id=").concat(this.target.id):"".concat(e,"&attachable_uuid=").concat(this.uuid,"&attachable_type=User&attachable_id=").concat(this.belong.id)}},{key:"getFileCopyUrl",value:function(){var e="/api/upload/copy?type=attachment&from=".concat(this.from);return this.target?"".concat(e,"&attachable_type=Topic&attachable_id=").concat(this.target.id):"".concat(e,"&attachable_uuid=").concat(this.uuid)}},{key:"getMentionActionUrl",value:function(){return this.target?"/api/users/complete?target_type=Topic&target_id=".concat(this.target.id):"/api/users/complete?target_type=Group&target_id=".concat(this.belong.id)}},{key:"loadFromUrl",value:function(){var e={format:a.a.FORMAT.MARKDOWN,title:null,value:null},t={},n=!1,r=this.belong.id,o=k.default.get("group/".concat(r,"/topic/searchparams"));if(["title","body"].forEach((function(e){var r=Object(ie.g)(e,o||void 0);r&&(t[e]=r,n=!0)})),!n)return null;if(e.title=t.title,t.body){var i=t.body.replace(/</g,"&lt;").replace(/>/g,"&gt;");e.value=i}return e}}])&&le(t.prototype,n),r&&le(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(T),he=n(27),me=n.n(he);function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t){return we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},we(e,t)}function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ee(e);if(t){var a=Ee(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _e(this,n)}}function _e(e,t){if(t&&("object"===ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ee(e){return Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ee(e)}var Ce={daily:{title:"#prefix# #day# 日报汇总",content:'<!doctype lake><meta name="doc-version" content="1" /><p>建议 TL 每天组织日会，将一天的重点事项安排于此</p><p>每位同学下班前，在此提交日报</p><p><br /></p><p>日报不要记流水账，尽量在 200 字以内</p><p>重点项目或工作要及时总结和提报，尤其风险点要及时提报</p><p>可以写写思考和感想</p><p><br /></p><p>写完自己的日报，也看看大家的</p><p>每一位同学的努力，都值得认真阅读与交流</p><p><br /></p><p><span style="color: #FA541C;"><span>注意不要提及保密项目和敏感数据</span></span></p>'},weekly:{title:"#prefix# #day# 周报汇总",content:'<!doctype lake><meta name="doc-version" content="1" /><p>将一周的工作总结回复于此</p><p><br /></p><p>不要记流水账，尽量在 800 字以内</p><p>重点项目或工作要及时总结和提报，尤其风险点要及时提报</p><p>可以写写思考和感想</p><p><br /></p><p>写完自己的周报，也看看大家的</p><p>每一位同学的努力，都值得认真阅读与交流</p><p><br /></p><p><span style="color: #FA541C;"><span>注意不要提及保密项目和敏感数据</span></span></p>'},vote:{title:"一起来投票吧",content:'<!doctype lake><meta name="doc-version" content="1" /><card type="block" name="vote" value="data:%7B%22margin%22%3Atrue%2C%22id%22%3A%22jTHWG%22%2C%22type%22%3A%22single%22%7D"></card><p><br /><cursor /></p>'},default:{title:"",content:"<!doctype lake><p></p>"}},Oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&we(e,t)}(o,e);var t,n,r,a=xe(o);function o(){return be(this,o),a.apply(this,arguments)}return t=o,r=[{key:"getTemplate",value:function(e,t){var n=Ce[e];if(!n)return{title:null,content:null};var r=me()(new Date).format("YYYY-MM-DD"),a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);return a.title=a.title.replace("#prefix#",t),a.title=a.title.replace("#day#",r),a}}],(n=[{key:"getType",value:function(){return"thread"}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete?target_type=Group&target_id=".concat(this.group.id)}},{key:"getFileUploadUrl",value:function(){var e="/api/upload/attach?ctoken=".concat(this.ctoken,"&type=attachment");return this.isEditMode?"".concat(e,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):this.belong?"".concat(e,"&attachable_type=").concat(this.belongType||"Book","&attachable_id=").concat(this.belong.id,"&from=").concat(this.from):this.group?"".concat(e,"&attachable_type=User&attachable_id=").concat(this.group.id,"&from=").concat(this.from):null}},{key:"getFileCopyUrl",value:function(){var e="/api/upload/copy?type=attachment";return this.isEditMode?"".concat(e,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):"".concat(e,"&attachable_uuid=").concat(this.uuid,"&from=").concat(this.from)}},{key:"getBlockedCards",value:function(){return["video","audio","premium","checkIn"]}}])&&ke(t.prototype,n),r&&ke(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(T),Se=Oe;function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t){return Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ae(e,t)}function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Me(e);if(t){var a=Me(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return De(this,n)}}function De(e,t){if(t&&("object"===Re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Me(e){return Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Me(e)}var Ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&Ae(e,t)}(o,e);var t,n,r,a=Te(o);function o(){return je(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"getType",value:function(){return"thread_board"}},{key:"getAutoFocus",value:function(){return!0}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete?target_type=Group&target_id=".concat(this.group.id)}},{key:"getFileUploadUrl",value:function(){var e="/api/upload/attach?ctoken=".concat(this.ctoken,"&type=attachment");return this.isEditMode&&!this.options.useBelongAttach?"".concat(e,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):this.belong?"".concat(e,"&attachable_type=").concat(this.belongType,"&attachable_id=").concat(this.belong.id,"&from=").concat(this.from):null}}])&&Pe(t.prototype,n),r&&Pe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(T),Le=Ne;function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t){return Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Fe(e,t)}function Ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qe(e);if(t){var a=qe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ve(this,n)}}function Ve(e,t){if(t&&("object"===Ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function qe(e){return qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qe(e)}var He=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&Fe(e,t)}(o,e);var t,n,r,a=Ue(o);function o(){return Be(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"getType",value:function(){return"thread_comment"}}])&&ze(t.prototype,n),r&&ze(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(U),We=He;function Ye(e){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ye(e)}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xe(e,t){return Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Xe(e,t)}function Ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$e(e);if(t){var a=$e(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ze(this,n)}}function Ze(e,t){if(t&&("object"===Ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function $e(e){return $e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$e(e)}var Qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&Xe(e,t)}(o,e);var t,n,r,a=Ke(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e.attachType="User",e.useBelongAttach=!0,a.call(this,e)}return t=o,(n=[{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"isMiniSize",value:function(){return this.options.small}},{key:"getAutoFocus",value:function(){return!0}}])&&Ge(t.prototype,n),r&&Ge(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(T);function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e,t){return tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},tt(e,t)}function nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=at(e);if(t){var a=at(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return rt(this,n)}}function rt(e,t){if(t&&("object"===Je(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function at(e){return at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},at(e)}var ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&tt(e,t)}(o,e);var t,n,r,a=nt(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e.from="group_custom",e.attachType="User",e.useBelongAttach=!0,a.call(this,e)}return t=o,(n=[{key:"getType",value:function(){return"group_custom"}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete?target_type=Group&target_id=".concat(this.group.id)}},{key:"isMiniSize",value:function(){return this.options.small}},{key:"getAutoFocus",value:function(){return!0}}])&&et(t.prototype,n),r&&et(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(T);function it(e){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},it(e)}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lt(){return lt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=st(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},lt.apply(this,arguments)}function st(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pt(e)););return e}function ut(e,t){return ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ut(e,t)}function dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pt(e);if(t){var a=pt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ft(this,n)}}function ft(e,t){if(t&&("object"===it(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function pt(e){return pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},pt(e)}var ht=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&ut(e,t)}(o,e);var t,n,r,a=dt(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e.target&&(e.attachType="Doclet"),a.call(this,e)}return t=o,(n=[{key:"getCards",value:function(){return this.options.target?lt(pt(o.prototype),"getCards",this).call(this):["label"]}},{key:"getFullCards",value:function(){return this.options.target?lt(pt(o.prototype),"getFullCards",this).call(this):["label"]}},{key:"getAutoFocus",value:function(){return!0}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"isMiniSize",value:function(){return!0}}])&&ct(t.prototype,n),r&&ct(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(T)},1738:function(e,t,n){"use strict";n(2282);var r=n(2097);n(1964);t.a=r.b},1741:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="FileOutlined";t.a=a.forwardRef(c)},1743:function(e,t,n){"use strict";var r=n(31),a=n(222);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var a=p(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&s(e,t)}(g,e);var t,n,o,d,p,m=u(g);function g(){var e;c(this,g);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return h(f(e=m.call.apply(m,[this].concat(n))),"getUrl",(function(t){if(e.joinToken=t||e.joinToken,e.joinToken)return"doc"===e.type?"".concat(window.location.origin,"/g/").concat(e.group.login,"/").concat(e.book.slug,"/").concat(e.doc.slug,"/collaborator/join?token=").concat(t.token):"book"===e.type?"".concat(window.location.origin,"/g/").concat(e.group.login,"/").concat(e.book.slug,"/collaborator/join?token=").concat(t.token):"group"===e.type?"".concat(window.location.origin,"/groups/").concat(e.group.login,"/join?token=").concat(t.token):"organization"===e.type?"".concat(window.location.origin,"/r/organizations/").concat(e.organization.login,"/join?token=").concat(t.token):"list"===e.type?"".concat(window.location.origin,"/r/list/").concat(e.list.id,"/join?token=").concat(t.token):null})),h(f(e),"getCopyText",(function(t,n){return __("邀你加入「{targetName}」{typeName}: {url}# ({role})",{targetName:e.target.name||e.target.title,typeName:e.typeName,url:t,role:n.label})})),h(f(e),"getOrgTipText",(function(){return e.organization?e.canPublic?__("获得链接的所有人（含空间外人员）可加入{type}",{type:e.typeName}):__("仅获得链接的空间成员可加入{type}",{type:e.typeName}):""})),h(f(e),"getToken",(function(t){var n=t.checked,r=t.force,a=t.role;if(e.proxy){var o={id:e.target.id};return null!=n&&(o.approve=n?1:0),null!=r&&(o.force=r),null!=a&&(o.role=a),e.proxy.token(o).then((function(t){return e.joinToken=t,t}))}})),h(f(e),"updateToken",(function(t){var n=t.checked,r=t.role;if(e.proxy){var a={id:e.target.id};return null!=n&&(a.approve=!0===n?1:0),null!=r&&(a.role=r),e.proxy.updateToken(a).then((function(t){return e.joinToken=t,t}))}})),e}return t=g,n=[{key:"init",value:function(){this.target&&(this.joinToken=this.target.joinToken),"organization"===this.type?this.proxy=r.a.organizations:"group"===this.type?this.proxy=r.a.groups:"book"===this.type?this.proxy=r.a.books:"doc"===this.type?this.proxy=r.a.docs:"list"===this.type&&(this.proxy=r.a.list)}},{key:"check",value:function(){this.target||(this.enable=!1)}},{key:"orgDataReady",value:(d=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.organization){e.next=4;break}return e.next=3,a.a.canIndirectAddOrgMember(this.organization);case 3:this.canPublic=e.sent;case 4:case"end":return e.stop()}}),e,this)})),p=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=d.apply(e,t);function o(e){i(a,n,r,o,c,"next",e)}function c(e){i(a,n,r,o,c,"throw",e)}o(void 0)}))},function(){return p.apply(this,arguments)})}],o=[{key:"create",value:function(e){var t=new g(e);return t.check(),t.enable&&t.init(),t}}],n&&l(t.prototype,n),o&&l(t,o),Object.defineProperty(t,"prototype",{writable:!1}),g}(n(590).a);h(m,"id","invite"),h(m,"title",__("邀请")),t.a=m},1744:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.location.origin;if(e){var a="doc"===t?"".concat(r,"/docs/share/").concat(e.token):"".concat(r,"/books/share/").concat(e.token);return"doc"===t&&"Sheet"===n.type?a+="?".concat(""===window.location.hash?"#":window.location.hash):a+="?#",e.password_enable&&(a+=__("（密码：{password}）",{password:e.password})),"doc"===t&&(a+=" 《".concat(n.title,"》")),"book"===t&&(a+=" 《".concat(n.name,"》")),a}}},1754:function(e,t,n){var r,a;r="undefined"!=typeof window?window:this,a=function(){var e,t;return function(n,r){e&&t||(e=document.createElement("canvas"),t=e.getContext("2d")),r=function(e){return Object.assign({width:250,height:80,color:"#ebebeb",alpha:.8,font:"10px Arial"},e)}(r);var a=r.width,o=r.height;return e.width=a,e.height=o,t.clearRect(0,0,a,o),t.globalAlpha=0,t.fillRect(0,0,a,o),t.globalAlpha=r.alpha,t.fillStyle=r.color,t.font=r.font,t.textAlign="left",t.textBaseline="bottom",t.translate(.1*a,.9*o),t.rotate(-Math.PI/12),t.fillText(n,0,0),e.toDataURL()}},e.exports?(e.exports=a(),e.exports.default=e.exports):r.alimask=a()},176:function(e,t,n){"use strict";n(501);var r=n(174),a=n(0),o=n.n(a),i=n(1),c=n.n(i),l=n(8),s=n.n(l),u=n(63),d=n.n(u),f=["className","overlayClassName"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}function v(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var y=o.a.forwardRef((function(e,t){var n=e.className,a=e.overlayClassName,i=v(e,f);return o.a.createElement(r.a,g({className:s()(n,"larkui-dropdown-trigger"),overlayClassName:s()(a,"larkui-dropdown"),ref:t},i))}));y.propTypes=h(h({},r.a.DropDownProps),{},{className:c.a.string,overlayClassName:c.a.string}),d()(y,r.a);var b=y,k=["className","overlayClassName","overlay","children"];function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(){return E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}function C(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var O=o.a.forwardRef((function(e,t){var n=e.className,a=e.overlayClassName,i=e.overlay,c=e.children,l=C(e,k),u=i?i.props:{};return o.a.createElement(r.a.Button,E({className:s()(n,"larkui-dropdown-trigger"),overlay:o.a.cloneElement(i,{className:s()(u.className,a,"larkui-dropdown-menu")}),ref:t},l),c)}));O.propTypes=x(x({},r.a.DropdownButtonProps),{},{className:c.a.string,overlayClassName:c.a.string,overlay:c.a.node,children:c.a.any}),d()(O,r.a.Button);var S=O,R=n(500),j=n.n(R),P=n(499),A=n.n(P),T=n(209),D=n(35),M=n(26);function N(){return N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N.apply(this,arguments)}var L=function(e){var t=e.className,n=e.overlayClassName,r=e.currentValue,a=e.menus,i=e.disableMenus,c=void 0===i?[]:i,l=e.disableTip,u=e.handleChange,d=e.triggerPrefix,f=a.find((function(e){return e.value===r}));return o.a.createElement(b,N({},e,{trigger:["click"],className:s()("larkui-dropdown-selector",t),overlayClassName:s()("larkui-dropdown-selector-menu",n),overlay:o.a.createElement(D.a,{selectedKeys:[r]},a.map((function(e){var t=c.some((function(t){return t.value===e.value})),n=o.a.createElement("span",{className:"larkui-dropdown-selector-option"},o.a.createElement("span",{className:"larkui-dropdown-selector-option-name"},e.name),e.value===r&&o.a.createElement("span",{className:"larkui-dropdown-selector-option-checked"},o.a.createElement(A.a,null)));return o.a.createElement(D.a.Item,{key:e.value,disabled:t,onClick:function(){u(e.value)}},t&&l?o.a.createElement(M.a,{title:l,placement:"right"},n):n)})),e.externalActions&&o.a.createElement(D.a.Divider,null),e.externalActions&&e.externalActions())}),o.a.createElement("span",{className:"larkui-dropdown-selector-trigger"},o.a.createElement("span",null,d),o.a.createElement("span",null,f?f.name:Object(T.a)("请选择")),o.a.createElement("span",{className:"larkui-dropdown-selector-trigger-icon"},o.a.createElement(j.a,null))))};L.propTypes={className:c.a.string,overlayClassName:c.a.string,currentValue:c.a.string.isRequired,menus:c.a.arrayOf(c.a.shape({name:c.a.string.isRequired,value:c.a.string.isRequired})).isRequired,disableMenus:c.a.array,disableTip:c.a.node,handleChange:c.a.func.isRequired,externalActions:c.a.func,triggerPrefix:c.a.node};var I=L;b.Selector=I,b.Button=S;t.a=b},179:function(e,t,n){},1840:function(e,t,n){e.exports=function(e){}},1841:function(e,t,n){"use strict";var r=n(127).SIZE;e.exports={getSizeValue:function(e){return e>=r.TB?{value:e/r.TB,unit:"TB"}:e>=r.GB?{value:e/r.GB,unit:"GB"}:e>=r.MB?{value:e/r.MB,unit:"MB"}:{value:e/r.KB,unit:"KB"}}}},1842:function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o=n(1843),i=/(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3400-\u4DBF\u4E00-\u9FFF\uF900-\uFA6D\uFA70-\uFAD9]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])+|(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F])/g,c=/--+/g,l=/\s+/;e.exports=function(e){if(!e)return 0;var t=0;return(e=(e=(e=" ".concat(o(String(e))," ")).replace(i,(function(e){return e.codePointAt(0)>127?(t+=r(e).length," "):e})).replace(c,(function(e,n,r){return l.test(r[n-1])&&t++," "}))).trim())&&(t+=e.split(l).length),t}},1843:function(e,t,n){"use strict";var r=/<[^>]+>/g;e.exports=function(e){return e.replace(r," ").trim()}},1844:function(e,t,n){"use strict";var r=n(231),a=n(984),o=n(1846),i=n(990);function c(e){var t=new o(e),n=a(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var l=c(n(987));l.Axios=o,l.create=function(e){return c(i(l.defaults,e))},l.Cancel=n(991),l.CancelToken=n(1858),l.isCancel=n(986),l.all=function(e){return Promise.all(e)},l.spread=n(1859),e.exports=l,e.exports.default=l},1845:function(e,t){e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},1846:function(e,t,n){"use strict";var r=n(231),a=n(985),o=n(1847),i=n(1848),c=n(990);function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=c(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var t=[i,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},l.prototype.getUri=function(e){return e=c(this.defaults,e),a(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(r.merge(n||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,a){return this.request(r.merge(a||{},{method:e,url:t,data:n}))}})),e.exports=l},1847:function(e,t,n){"use strict";var r=n(231);function a(){this.handlers=[]}a.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=a},1848:function(e,t,n){"use strict";var r=n(231),a=n(1849),o=n(986),i=n(987),c=n(1856),l=n(1857);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.baseURL&&!c(e.url)&&(e.url=l(e.baseURL,e.url)),e.headers=e.headers||{},e.data=a(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||i.adapter)(e).then((function(t){return s(e),t.data=a(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(s(e),t&&t.response&&(t.response.data=a(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},1849:function(e,t,n){"use strict";var r=n(231);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},1850:function(e,t,n){"use strict";var r=n(231);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},1851:function(e,t,n){"use strict";var r=n(989);e.exports=function(e,t,n){var a=n.config.validateStatus;!a||a(n.status)?e(n):t(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},1852:function(e,t,n){"use strict";e.exports=function(e,t,n,r,a){return e.config=t,n&&(e.code=n),e.request=r,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},1853:function(e,t,n){"use strict";var r=n(231),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,i={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(i[t]&&a.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([n]):i[t]?i[t]+", "+n:n}})),i):i}},1854:function(e,t,n){"use strict";var r=n(231);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function a(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=a(window.location.href),function(t){var n=r.isString(t)?a(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},1855:function(e,t,n){"use strict";var r=n(231);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,a,o,i){var c=[];c.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),r.isString(a)&&c.push("path="+a),r.isString(o)&&c.push("domain="+o),!0===i&&c.push("secure"),document.cookie=c.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1856:function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},1857:function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},1858:function(e,t,n){"use strict";var r=n(991);function a(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.source=function(){var e;return{token:new a((function(t){e=t})),cancel:e}},e.exports=a},1859:function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},1860:function(e,t,n){e.exports=n(49)},1861:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,a.default)(e),parseInt(e,t||10)};var r,a=(r=n(60))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},1862:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,a.default)(e),t)return"1"===e||"true"===e;return"0"!==e&&"false"!==e&&""!==e};var r,a=(r=n(60))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},1863:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,a.default)(e),e===t};var r,a=(r=n(60))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},1864:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,r.default)(e),e.indexOf((0,a.default)(t))>=0};var r=o(n(60)),a=o(n(804));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},1865:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){(0,a.default)(e),"[object RegExp]"!==Object.prototype.toString.call(t)&&(t=new RegExp(t,n));return t.test(e)};var r,a=(r=n(60))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},1866:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,r.default)(e),(t=(0,a.default)(t,s)).require_display_name||t.allow_display_name){var n=e.match(u);if(n)e=n[1];else if(t.require_display_name)return!1}var l=e.split("@"),g=l.pop(),v=l.join("@"),y=g.toLowerCase();if(t.domain_specific_validation&&("gmail.com"===y||"googlemail.com"===y)){var b=(v=v.toLowerCase()).split("+")[0];if(!(0,o.default)(b.replace(".",""),{min:6,max:30}))return!1;for(var k=b.split("."),w=0;w<k.length;w++)if(!f.test(k[w]))return!1}if(!(0,o.default)(v,{max:64})||!(0,o.default)(g,{max:254}))return!1;if(!(0,i.default)(g,{require_tld:t.require_tld})){if(!t.allow_ip_domain)return!1;if(!(0,c.default)(g)){if(!g.startsWith("[")||!g.endsWith("]"))return!1;var x=g.substr(1,g.length-2);if(0===x.length||!(0,c.default)(x))return!1}}if('"'===v[0])return v=v.slice(1,v.length-1),t.allow_utf8_local_part?m.test(v):p.test(v);for(var _=t.allow_utf8_local_part?h:d,E=v.split("."),C=0;C<E.length;C++)if(!_.test(E[C]))return!1;return!0};var r=l(n(60)),a=l(n(366)),o=l(n(993)),i=l(n(805)),c=l(n(584));function l(e){return e&&e.__esModule?e:{default:e}}var s={allow_display_name:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0},u=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\,\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\s]*<(.+)>$/i,d=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,f=/^[a-z\d]+$/,p=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,h=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,m=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;e.exports=t.default,e.exports.default=t.default},1867:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,r.default)(e),!e||e.length>=2083||/[\s<>]/.test(e))return!1;if(0===e.indexOf("mailto:"))return!1;var n,c,d,f,p,h,m,g;if(t=(0,i.default)(t,l),m=e.split("#"),e=m.shift(),m=e.split("?"),e=m.shift(),(m=e.split("://")).length>1){if(n=m.shift().toLowerCase(),t.require_valid_protocol&&-1===t.protocols.indexOf(n))return!1}else{if(t.require_protocol)return!1;if("//"===e.substr(0,2)){if(!t.allow_protocol_relative_urls)return!1;m[0]=e.substr(2)}}if(""===(e=m.join("://")))return!1;if(m=e.split("/"),""===(e=m.shift())&&!t.require_host)return!0;if((m=e.split("@")).length>1){if(t.disallow_auth)return!1;if((c=m.shift()).indexOf(":")>=0&&c.split(":").length>2)return!1}f=m.join("@"),h=null,g=null;var v=f.match(s);v?(d="",g=v[1],h=v[2]||null):(m=f.split(":"),d=m.shift(),m.length&&(h=m.join(":")));if(null!==h&&(p=parseInt(h,10),!/^[0-9]+$/.test(h)||p<=0||p>65535))return!1;if(!((0,o.default)(d)||(0,a.default)(d,t)||g&&(0,o.default)(g,6)))return!1;if(d=d||g,t.host_whitelist&&!u(d,t.host_whitelist))return!1;if(t.host_blacklist&&u(d,t.host_blacklist))return!1;return!0};var r=c(n(60)),a=c(n(805)),o=c(n(584)),i=c(n(366));function c(e){return e&&e.__esModule?e:{default:e}}var l={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1},s=/^\[([^\]]+)\](?::([0-9]+))?$/;function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(e===r||(a=r,"[object RegExp]"===Object.prototype.toString.call(a)&&r.test(e)))return!0}var a;return!1}e.exports=t.default,e.exports.default=t.default},1868:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,a.default)(e),t&&t.no_colons)return i.test(e);return o.test(e)};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/^([0-9a-fA-F][0-9a-fA-F]:){5}([0-9a-fA-F][0-9a-fA-F])$/,i=/^([0-9a-fA-F]){12}$/;e.exports=t.default,e.exports.default=t.default},1869:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,r.default)(e);var t=e.split("/");if(2!==t.length)return!1;if(!i.test(t[1]))return!1;if(t[1].length>1&&t[1].startsWith("0"))return!1;return(0,a.default)(t[0],4)&&t[1]<=32&&t[1]>=0};var r=o(n(60)),a=o(n(584));function o(e){return e&&e.__esModule?e:{default:e}}var i=/^\d{1,2}$/;e.exports=t.default,e.exports.default=t.default},187:function(e,t){e.exports={MODE:{pac:"PAC",http:"HTTP"},TYPE:{http:"HTTP",socks4:"SOCKS4",socks5:"SOCKS5"}}},1870:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),["true","false","1","0"].indexOf(e)>=0};var r,a=(r=n(60))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},1871:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";if((0,a.default)(e),t in o.alpha)return o.alpha[t].test(e);throw new Error("Invalid locale '".concat(t,"'"))},t.locales=void 0;var r,a=(r=n(60))&&r.__esModule?r:{default:r},o=n(585);var i=Object.keys(o.alpha);t.locales=i},1872:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";if((0,a.default)(e),t in o.alphanumeric)return o.alphanumeric[t].test(e);throw new Error("Invalid locale '".concat(t,"'"))},t.locales=void 0;var r,a=(r=n(60))&&r.__esModule?r:{default:r},o=n(585);var i=Object.keys(o.alphanumeric);t.locales=i},1873:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,a.default)(e),t&&t.no_symbols)return i.test(e);return o.test(e)};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/^[+-]?([0-9]*[.])?[0-9]+$/,i=/^[0-9]+$/;e.exports=t.default,e.exports.default=t.default},1874:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e,{min:0,max:65535})};var r,a=(r=n(994))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},1875:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),e===e.toLowerCase()};var r,a=(r=n(60))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},1876:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),e===e.toUpperCase()};var r,a=(r=n(60))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},1877:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),o.test(e)};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/^[\x00-\x7F]+$/;e.exports=t.default,e.exports.default=t.default},1878:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),o.fullWidth.test(e)&&i.halfWidth.test(e)};var r,a=(r=n(60))&&r.__esModule?r:{default:r},o=n(995),i=n(996);e.exports=t.default,e.exports.default=t.default},1879:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),o.test(e)};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/[^\x00-\x7F]/;e.exports=t.default,e.exports.default=t.default},1880:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),o.test(e)};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/[\uD800-\uDBFF][\uDC00-\uDFFF]/;e.exports=t.default,e.exports.default=t.default},1881:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,a.default)(e),t=t||{};var n=new RegExp("^(?:[-+])?(?:[0-9]+)?(?:\\".concat(t.locale?o.decimal[t.locale]:".","[0-9]*)?(?:[eE][\\+\\-]?(?:[0-9]+))?$"));if(""===e||"."===e||"-"===e||"+"===e)return!1;var r=parseFloat(e.replace(",","."));return n.test(e)&&(!t.hasOwnProperty("min")||r>=t.min)&&(!t.hasOwnProperty("max")||r<=t.max)&&(!t.hasOwnProperty("lt")||r<t.lt)&&(!t.hasOwnProperty("gt")||r>t.gt)},t.locales=void 0;var r,a=(r=n(60))&&r.__esModule?r:{default:r},o=n(585);var i=Object.keys(o.decimal);t.locales=i},1882:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,a.default)(e),(t=(0,r.default)(t,l)).locale in i.decimal)return!(0,o.default)(s,e.replace(/ /g,""))&&function(e){return new RegExp("^[-+]?([0-9]+)?(\\".concat(i.decimal[e.locale],"[0-9]{").concat(e.decimal_digits,"})").concat(e.force_decimal?"":"?","$"))}(t).test(e);throw new Error("Invalid locale '".concat(t.locale,"'"))};var r=c(n(366)),a=c(n(60)),o=c(n(806)),i=n(585);function c(e){return e&&e.__esModule?e:{default:e}}var l={force_decimal:!1,decimal_digits:"1,",locale:"en-US"},s=["","-","+"];e.exports=t.default,e.exports.default=t.default},1883:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,r.default)(e),(0,a.default)(e)%parseInt(t,10)==0};var r=o(n(60)),a=o(n(992));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},1884:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),o.test(e)};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i;e.exports=t.default,e.exports.default=t.default},1885:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),o.test(e)};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/^[A-Z]{2}[0-9A-Z]{3}\d{2}\d{5}$/;e.exports=t.default,e.exports.default=t.default},1886:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),o.test(e)};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/^[a-f0-9]{32}$/;e.exports=t.default,e.exports.default=t.default},1887:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,a.default)(e),new RegExp("^[a-f0-9]{".concat(o[t],"}$")).test(e)};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o={md5:32,md4:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8};e.exports=t.default,e.exports.default=t.default},1888:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),o.test(e)};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/^([A-Za-z0-9\-_~+\/]+[=]{0,2})\.([A-Za-z0-9\-_~+\/]+[=]{0,2})(?:\.([A-Za-z0-9\-_~+\/]+[=]{0,2}))?$/;e.exports=t.default,e.exports.default=t.default},1889:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,a.default)(e);try{var t=JSON.parse(e);return!!t&&"object"===o(t)}catch(e){}return!1};var r,a=(r=n(60))&&r.__esModule?r:{default:r};function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}e.exports=t.default,e.exports.default=t.default},1890:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,r.default)(e),0===((t=(0,a.default)(t,i)).ignore_whitespace?e.trim().length:e.length)};var r=o(n(60)),a=o(n(366));function o(e){return e&&e.__esModule?e:{default:e}}var i={ignore_whitespace:!1};e.exports=t.default,e.exports.default=t.default},1891:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,r;(0,a.default)(e),"object"===o(t)?(n=t.min||0,r=t.max):(n=arguments[1],r=arguments[2]);var i=e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],c=e.length-i.length;return c>=n&&(void 0===r||c<=r)};var r,a=(r=n(60))&&r.__esModule?r:{default:r};function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}e.exports=t.default,e.exports.default=t.default},1892:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";(0,a.default)(e);var n=o[t];return n&&n.test(e)};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};e.exports=t.default,e.exports.default=t.default},1893:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)(e),(0,a.default)(e)&&24===e.length};var r=o(n(60)),a=o(n(997));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},1894:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String(new Date);(0,r.default)(e);var n=(0,a.default)(t),o=(0,a.default)(e);return!!(o&&n&&o>n)};var r=o(n(60)),a=o(n(803));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},1895:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String(new Date);(0,r.default)(e);var n=(0,a.default)(t),o=(0,a.default)(e);return!!(o&&n&&o<n)};var r=o(n(60)),a=o(n(803));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},1896:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n;if((0,r.default)(e),"[object Array]"===Object.prototype.toString.call(t)){var o=[];for(n in t)({}).hasOwnProperty.call(t,n)&&(o[n]=(0,a.default)(t[n]));return o.indexOf(e)>=0}if("object"===i(t))return t.hasOwnProperty(e);if(t&&"function"==typeof t.indexOf)return t.indexOf(e)>=0;return!1};var r=o(n(60)),a=o(n(804));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}e.exports=t.default,e.exports.default=t.default},1897:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,a.default)(e);var t=e.replace(/[- ]+/g,"");if(!o.test(t))return!1;for(var n,r,i,c=0,l=t.length-1;l>=0;l--)n=t.substring(l,l+1),r=parseInt(n,10),c+=i&&(r*=2)>=10?r%10+1:r,i=!i;return!(c%10!=0||!t)};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11}|6[27][0-9]{14})$/;e.exports=t.default,e.exports.default=t.default},1898:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any";if((0,a.default)(e),t in o)return o[t](e);if("any"===t){for(var n in o)if(o.hasOwnProperty(n)){var r=o[n];if(r(e))return!0}return!1}throw new Error("Invalid locale '".concat(t,"'"))};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o={ES:function(e){(0,a.default)(e);var t={X:0,Y:1,Z:2},n=e.trim().toUpperCase();if(!/^[0-9X-Z][0-9]{7}[TRWAGMYFPDXBNJZSQVHLCKE]$/.test(n))return!1;var r=n.slice(0,-1).replace(/[X,Y,Z]/g,(function(e){return t[e]}));return n.endsWith(["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"][r%23])}};e.exports=t.default,e.exports.default=t.default},1899:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,a.default)(e),!o.test(e))return!1;for(var t,n,r=e.replace(/[A-Z]/g,(function(e){return parseInt(e,36)})),i=0,c=!0,l=r.length-2;l>=0;l--)t=r.substring(l,l+1),n=parseInt(t,10),i+=c&&(n*=2)>=10?n+1:n,c=!c;return parseInt(e.substr(e.length-1),10)===(1e4-i)%10};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/;e.exports=t.default,e.exports.default=t.default},1900:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,a.default)(t),!(n=String(n)))return e(t,10)||e(t,13);var r,l=t.replace(/[\s-]+/g,""),s=0;if("10"===n){if(!o.test(l))return!1;for(r=0;r<9;r++)s+=(r+1)*l.charAt(r);if("X"===l.charAt(9)?s+=100:s+=10*l.charAt(9),s%11==0)return!!l}else if("13"===n){if(!i.test(l))return!1;for(r=0;r<12;r++)s+=c[r%2]*l.charAt(r);if(l.charAt(12)-(10-s%10)%10==0)return!!l}return!1};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/^(?:[0-9]{9}X|[0-9]{10})$/,i=/^(?:[0-9]{13})$/,c=[1,3];e.exports=t.default,e.exports.default=t.default},1901:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.default)(e);var n=o;if(n=t.require_hyphen?n.replace("?",""):n,!(n=t.case_sensitive?new RegExp(n):new RegExp(n,"i")).test(e))return!1;for(var r=e.replace("-","").toUpperCase(),i=0,c=0;c<r.length;c++){var l=r[c];i+=("X"===l?10:+l)*(8-c)}return i%11==0};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o="^\\d{4}-?\\d{3}[\\dX]$";e.exports=t.default,e.exports.default=t.default},1902:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if((0,a.default)(e),n&&n.strictMode&&!e.startsWith("+"))return!1;if(Array.isArray(t))return t.some((function(t){if(o.hasOwnProperty(t)&&o[t].test(e))return!0;return!1}));if(t in o)return o[t].test(e);if(!t||"any"===t){for(var r in o){if(o.hasOwnProperty(r))if(o[r].test(e))return!0}return!1}throw new Error("Invalid locale '".concat(t,"'"))},t.locales=void 0;var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o={"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-EG":/^((\+?20)|0)?1[012]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)[569]\d{7}$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/\+?(88)?0?1[356789][0-9]{8}\b/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^(\+49)?0?1(5[0-25-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7}$/,"el-GR":/^(\+?30|0)?(69\d{8})$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|28)\d{7}$/,"en-HK":/^(\+?852\-?)?[456789]\d{3}\-?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-KE":/^(\+?254|0)?[7]\d{8}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PK":/^((\+92)|(0092))-{0,1}\d{3}-{0,1}\d{7}$|^\d{11}$|^\d{4}-\d{7}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[89]\d{7}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?09[567]\d{7}$/,"es-ES":/^(\+?34)?(6\d{1}|7[1234])\d{7}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4(0|1|2|4|5|6)?|50)\s?(\d\s?){4,8}\d$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36)(20|30|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"ja-JP":/^(\+?81|0)[789]0[ \-]?[1-9]\d{2}[ \-]?\d{5}$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"lt-LT":/^(\+370|8)\d{8}$/,"ms-MY":/^(\+?6?01){1}(([0145]{1}(\-|\s)?\d{7,8})|([236789]{1}(\s|\-)?\d{7}))$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"nl-BE":/^(\+?32|0)4?\d{8}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?[5-8]\d ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/(?=^(\+?5{2}\-?|0)[1-9]{2}\-?\d{4}\-?\d{4}$)(^(\+?5{2}\-?|0)[1-9]{2}\-?[6-9]{1}\d{3}\-?\d{4}$)|(^(\+?5{2}\-?|0)[1-9]{2}\-?9[6-9]{1}\d{3}\-?\d{4}$)/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"ro-RO":/^(\+?4?0)\s?7\d{2}(\/|\s|\.|\-)?\d{3}(\s|\.|\-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"uk-UA":/^(\+?38|8)?0\d{9}$/,"vi-VN":/^(\+?84|0)((3([2-9]))|(5([689]))|(7([0|6-9]))|(8([1-5]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?1([358][0-9]|4[579]|66|7[0135678]|9[89])[0-9]{8}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/};o["en-CA"]=o["en-US"],o["fr-BE"]=o["nl-BE"],o["zh-HK"]=o["en-HK"];var i=Object.keys(o);t.locales=i},1903:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,a.default)(e),function(e){var t="\\d{".concat(e.digits_after_decimal[0],"}");e.digits_after_decimal.forEach((function(e,n){0!==n&&(t="".concat(t,"|\\d{").concat(e,"}"))}));var n="(\\".concat(e.symbol.replace(/\./g,"\\."),")").concat(e.require_symbol?"":"?"),r="-?",a="[1-9]\\d{0,2}(\\".concat(e.thousands_separator,"\\d{3})*"),o="(".concat(["0","[1-9]\\d*",a].join("|"),")?"),i="(\\".concat(e.decimal_separator,"(").concat(t,"))").concat(e.require_decimal?"":"?"),c=o+(e.allow_decimal||e.require_decimal?i:"");e.allow_negatives&&!e.parens_for_negatives&&(e.negative_sign_after_digits?c+=r:e.negative_sign_before_digits&&(c=r+c));e.allow_negative_sign_placeholder?c="( (?!\\-))?".concat(c):e.allow_space_after_symbol?c=" ?".concat(c):e.allow_space_after_digits&&(c+="( (?!$))?");e.symbol_after_digits?c+=n:c=n+c;e.allow_negatives&&(e.parens_for_negatives?c="(\\(".concat(c,"\\)|").concat(c,")"):e.negative_sign_before_digits||e.negative_sign_after_digits||(c=r+c));return new RegExp("^(?!-? )(?=.*\\d)".concat(c,"$"))}(t=(0,r.default)(t,i)).test(e)};var r=o(n(366)),a=o(n(60));function o(e){return e&&e.__esModule?e:{default:e}}var i={symbol:"$",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_decimal:!0,require_decimal:!1,digits_after_decimal:[2],allow_space_after_digits:!1};e.exports=t.default,e.exports.default=t.default},1904:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,a.default)(e);var n=o.test(e);return t&&n&&t.strict?function(e){var t=e.match(/^(\d{4})-?(\d{3})([ T]{1}\.*|$)/);if(t){var n=Number(t[1]),r=Number(t[2]);return n%4==0&&n%100!=0?r<=366:r<=365}var a=e.match(/(\d{4})-?(\d{0,2})-?(\d*)/).map(Number),o=a[1],i=a[2],c=a[3],l=i?"0".concat(i).slice(-2):i,s=c?"0".concat(c).slice(-2):c,u=new Date("".concat(o,"-").concat(l||"01","-").concat(s||"01"));if(isNaN(u.getUTCFullYear()))return!1;if(i&&c)return u.getUTCFullYear()===o&&u.getUTCMonth()+1===i&&u.getUTCDate()===c;return!0}(e):n};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;e.exports=t.default,e.exports.default=t.default},1905:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),f.test(e)};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/([01][0-9]|2[0-3])/,i=/[0-5][0-9]/,c=new RegExp("[-+]".concat(o.source,":").concat(i.source)),l=new RegExp("([zZ]|".concat(c.source,")")),s=new RegExp("".concat(o.source,":").concat(i.source,":").concat(/([0-5][0-9]|60)/.source).concat(/(\.[0-9]+)?/.source)),u=new RegExp("".concat(/[0-9]{4}/.source,"-").concat(/(0[1-9]|1[0-2])/.source,"-").concat(/([12]\d|0[1-9]|3[01])/.source)),d=new RegExp("".concat(s.source).concat(l.source)),f=new RegExp("".concat(u.source,"[ tT]").concat(d.source));e.exports=t.default,e.exports.default=t.default},1906:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)(e),(0,a.default)(i,e.toUpperCase())};var r=o(n(60)),a=o(n(806));function o(e){return e&&e.__esModule?e:{default:e}}var i=["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"];e.exports=t.default,e.exports.default=t.default},1907:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)(e),(0,a.default)(i,e.toUpperCase())};var r=o(n(60)),a=o(n(806));function o(e){return e&&e.__esModule?e:{default:e}}var i=["AFG","ALA","ALB","DZA","ASM","AND","AGO","AIA","ATA","ATG","ARG","ARM","ABW","AUS","AUT","AZE","BHS","BHR","BGD","BRB","BLR","BEL","BLZ","BEN","BMU","BTN","BOL","BES","BIH","BWA","BVT","BRA","IOT","BRN","BGR","BFA","BDI","KHM","CMR","CAN","CPV","CYM","CAF","TCD","CHL","CHN","CXR","CCK","COL","COM","COG","COD","COK","CRI","CIV","HRV","CUB","CUW","CYP","CZE","DNK","DJI","DMA","DOM","ECU","EGY","SLV","GNQ","ERI","EST","ETH","FLK","FRO","FJI","FIN","FRA","GUF","PYF","ATF","GAB","GMB","GEO","DEU","GHA","GIB","GRC","GRL","GRD","GLP","GUM","GTM","GGY","GIN","GNB","GUY","HTI","HMD","VAT","HND","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","IMN","ISR","ITA","JAM","JPN","JEY","JOR","KAZ","KEN","KIR","PRK","KOR","KWT","KGZ","LAO","LVA","LBN","LSO","LBR","LBY","LIE","LTU","LUX","MAC","MKD","MDG","MWI","MYS","MDV","MLI","MLT","MHL","MTQ","MRT","MUS","MYT","MEX","FSM","MDA","MCO","MNG","MNE","MSR","MAR","MOZ","MMR","NAM","NRU","NPL","NLD","NCL","NZL","NIC","NER","NGA","NIU","NFK","MNP","NOR","OMN","PAK","PLW","PSE","PAN","PNG","PRY","PER","PHL","PCN","POL","PRT","PRI","QAT","REU","ROU","RUS","RWA","BLM","SHN","KNA","LCA","MAF","SPM","VCT","WSM","SMR","STP","SAU","SEN","SRB","SYC","SLE","SGP","SXM","SVK","SVN","SLB","SOM","ZAF","SGS","SSD","ESP","LKA","SDN","SUR","SJM","SWZ","SWE","CHE","SYR","TWN","TJK","TZA","THA","TLS","TGO","TKL","TON","TTO","TUN","TUR","TKM","TCA","TUV","UGA","UKR","ARE","GBR","USA","UMI","URY","UZB","VUT","VEN","VNM","VGB","VIR","WLF","ESH","YEM","ZMB","ZWE"];e.exports=t.default,e.exports.default=t.default},1908:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,a.default)(e);var t=e.length;if(!t||t%4!=0||o.test(e))return!1;var n=e.indexOf("=");return-1===n||n===t-1||n===t-2&&"="===e[t-1]};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/[^A-Z0-9+\/=]/i;e.exports=t.default,e.exports.default=t.default},1909:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,a.default)(e);var t=e.split(",");if(t.length<2)return!1;var n=t.shift().trim().split(";"),r=n.shift();if("data:"!==r.substr(0,5))return!1;var l=r.substr(5);if(""!==l&&!o.test(l))return!1;for(var s=0;s<n.length;s++)if(s===n.length-1&&"base64"===n[s].toLowerCase());else if(!i.test(n[s]))return!1;for(var u=0;u<t.length;u++)if(!c.test(t[u]))return!1;return!0};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/^[a-z]+\/[a-z0-9\-\+]+$/i,i=/^[a-z\-]+=[a-z0-9\-]+$/i,c=/^[a-z0-9!\$&'\(\)\*\+,;=\-\._~:@\/\?%\s]*$/i;e.exports=t.default,e.exports.default=t.default},1910:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),o.test(e.trim())};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/^magnet:\?xt=urn:[a-z0-9]+:[a-z0-9]{32,40}&dn=.+&tr=.+$/i;e.exports=t.default,e.exports.default=t.default},1911:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),o.test(e)||i.test(e)||c.test(e)};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/^(application|audio|font|image|message|model|multipart|text|video)\/[a-zA-Z0-9\.\-\+]{1,100}$/i,i=/^text\/[a-zA-Z0-9\.\-\+]{1,100};\s?charset=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?$/i,c=/^multipart\/[a-zA-Z0-9\.\-\+]{1,100}(;\s?(boundary|charset)=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?){0,2}$/i;e.exports=t.default,e.exports.default=t.default},1912:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,a.default)(e),!e.includes(","))return!1;var t=e.split(",");return o.test(t[0])&&i.test(t[1])};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/^\(?[+-]?(90(\.0+)?|[1-8]?\d(\.\d+)?)$/,i=/^\s?[+-]?(180(\.0+)?|1[0-7]\d(\.\d+)?|\d{1,2}(\.\d+)?)\)?$/;e.exports=t.default,e.exports.default=t.default},1913:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,a.default)(e),t in l)return l[t].test(e);if("any"===t){for(var n in l){if(l.hasOwnProperty(n))if(l[n].test(e))return!0}return!1}throw new Error("Invalid locale '".concat(t,"'"))},t.locales=void 0;var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/^\d{4}$/,i=/^\d{5}$/,c=/^\d{6}$/,l={AD:/^AD\d{3}$/,AT:o,AU:o,BE:o,BG:o,CA:/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJ-NPRSTV-Z][\s\-]?\d[ABCEGHJ-NPRSTV-Z]\d$/i,CH:o,CZ:/^\d{3}\s?\d{2}$/,DE:i,DK:o,DZ:i,EE:i,ES:i,FI:i,FR:/^\d{2}\s?\d{3}$/,GB:/^(gir\s?0aa|[a-z]{1,2}\d[\da-z]?\s?(\d[a-z]{2})?)$/i,GR:/^\d{3}\s?\d{2}$/,HR:/^([1-5]\d{4}$)/,HU:o,IL:i,IN:c,IS:/^\d{3}$/,IT:i,JP:/^\d{3}\-\d{4}$/,KE:i,LI:/^(948[5-9]|949[0-7])$/,LT:/^LT\-\d{5}$/,LU:o,LV:/^LV\-\d{4}$/,MX:i,NL:/^\d{4}\s?[a-z]{2}$/i,NO:o,PL:/^\d{2}\-\d{3}$/,PT:/^\d{4}\-\d{3}?$/,RO:c,RU:c,SA:i,SE:/^\d{3}\s?\d{2}$/,SI:o,SK:/^\d{3}\s?\d{2}$/,TN:o,TW:/^\d{3}(\d{2})?$/,UA:i,US:/^\d{5}(-\d{4})?$/,ZA:o,ZM:i},s=Object.keys(l);t.locales=s},1914:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,r.default)((0,a.default)(e,t),t)};var r=o(n(999)),a=o(n(998));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},1915:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\\/g,"&#x5C;").replace(/`/g,"&#96;")};var r,a=(r=n(60))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},1916:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),e.replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#x2F;/g,"/").replace(/&#x5C;/g,"\\").replace(/&#96;/g,"`")};var r,a=(r=n(60))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},1917:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,r.default)(e);var n=t?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F";return(0,a.default)(e,n)};var r=o(n(60)),a=o(n(1e3));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},1918:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,a.default)(e),e.replace(new RegExp("[^".concat(t,"]+"),"g"),"")};var r,a=(r=n(60))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},1919:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,a.default)(e);for(var n=e.length-1;n>=0;n--)if(-1===t.indexOf(e[n]))return!1;return!0};var r,a=(r=n(60))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},1920:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t=(0,a.default)(t,o);var n=e.split("@"),r=n.pop(),d=[n.join("@"),r];if(d[1]=d[1].toLowerCase(),"gmail.com"===d[1]||"googlemail.com"===d[1]){if(t.gmail_remove_subaddress&&(d[0]=d[0].split("+")[0]),t.gmail_remove_dots&&(d[0]=d[0].replace(/\.+/g,u)),!d[0].length)return!1;(t.all_lowercase||t.gmail_lowercase)&&(d[0]=d[0].toLowerCase()),d[1]=t.gmail_convert_googlemaildotcom?"gmail.com":d[1]}else if(i.indexOf(d[1])>=0){if(t.icloud_remove_subaddress&&(d[0]=d[0].split("+")[0]),!d[0].length)return!1;(t.all_lowercase||t.icloud_lowercase)&&(d[0]=d[0].toLowerCase())}else if(c.indexOf(d[1])>=0){if(t.outlookdotcom_remove_subaddress&&(d[0]=d[0].split("+")[0]),!d[0].length)return!1;(t.all_lowercase||t.outlookdotcom_lowercase)&&(d[0]=d[0].toLowerCase())}else if(l.indexOf(d[1])>=0){if(t.yahoo_remove_subaddress){var f=d[0].split("-");d[0]=f.length>1?f.slice(0,-1).join("-"):f[0]}if(!d[0].length)return!1;(t.all_lowercase||t.yahoo_lowercase)&&(d[0]=d[0].toLowerCase())}else s.indexOf(d[1])>=0?((t.all_lowercase||t.yandex_lowercase)&&(d[0]=d[0].toLowerCase()),d[1]="yandex.ru"):t.all_lowercase&&(d[0]=d[0].toLowerCase());return d.join("@")};var r,a=(r=n(366))&&r.__esModule?r:{default:r};var o={all_lowercase:!0,gmail_lowercase:!0,gmail_remove_dots:!0,gmail_remove_subaddress:!0,gmail_convert_googlemaildotcom:!0,outlookdotcom_lowercase:!0,outlookdotcom_remove_subaddress:!0,yahoo_lowercase:!0,yahoo_remove_subaddress:!0,yandex_lowercase:!0,icloud_lowercase:!0,icloud_remove_subaddress:!0},i=["icloud.com","me.com"],c=["hotmail.at","hotmail.be","hotmail.ca","hotmail.cl","hotmail.co.il","hotmail.co.nz","hotmail.co.th","hotmail.co.uk","hotmail.com","hotmail.com.ar","hotmail.com.au","hotmail.com.br","hotmail.com.gr","hotmail.com.mx","hotmail.com.pe","hotmail.com.tr","hotmail.com.vn","hotmail.cz","hotmail.de","hotmail.dk","hotmail.es","hotmail.fr","hotmail.hu","hotmail.id","hotmail.ie","hotmail.in","hotmail.it","hotmail.jp","hotmail.kr","hotmail.lv","hotmail.my","hotmail.ph","hotmail.pt","hotmail.sa","hotmail.sg","hotmail.sk","live.be","live.co.uk","live.com","live.com.ar","live.com.mx","live.de","live.es","live.eu","live.fr","live.it","live.nl","msn.com","outlook.at","outlook.be","outlook.cl","outlook.co.il","outlook.co.nz","outlook.co.th","outlook.com","outlook.com.ar","outlook.com.au","outlook.com.br","outlook.com.gr","outlook.com.pe","outlook.com.tr","outlook.com.vn","outlook.cz","outlook.de","outlook.dk","outlook.es","outlook.fr","outlook.hu","outlook.id","outlook.ie","outlook.in","outlook.it","outlook.jp","outlook.kr","outlook.lv","outlook.my","outlook.ph","outlook.pt","outlook.sa","outlook.sg","outlook.sk","passport.com"],l=["rocketmail.com","yahoo.ca","yahoo.co.uk","yahoo.com","yahoo.de","yahoo.fr","yahoo.in","yahoo.it","ymail.com"],s=["yandex.ru","yandex.ua","yandex.kz","yandex.com","yandex.by","ya.ru"];function u(e){return e.length>1?e:""}e.exports=t.default,e.exports.default=t.default},1924:function(e,t,n){"use strict";function r(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function a(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function o(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return a(n.overflowY,t)||a(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function i(e,t,n,r,a,o,i,c){return o<e&&i>t||o>e&&i<t?0:o<=e&&c<=n||i>=t&&c>=n?o-e-r:i>t&&c<n||o<e&&c>n?i-t+a:0}var c=function(e,t){var n=window,a=t.scrollMode,c=t.block,l=t.inline,s=t.boundary,u=t.skipOverflowHiddenElements,d="function"==typeof s?s:function(e){return e!==s};if(!r(e))throw new TypeError("Invalid target");for(var f=document.scrollingElement||document.documentElement,p=[],h=e;r(h)&&d(h);){if((h=h.parentElement)===f){p.push(h);break}null!=h&&h===document.body&&o(h)&&!o(document.documentElement)||null!=h&&o(h,u)&&p.push(h)}for(var m=n.visualViewport?n.visualViewport.width:innerWidth,g=n.visualViewport?n.visualViewport.height:innerHeight,v=window.scrollX||pageXOffset,y=window.scrollY||pageYOffset,b=e.getBoundingClientRect(),k=b.height,w=b.width,x=b.top,_=b.right,E=b.bottom,C=b.left,O="start"===c||"nearest"===c?x:"end"===c?E:x+k/2,S="center"===l?C+w/2:"end"===l?_:C,R=[],j=0;j<p.length;j++){var P=p[j],A=P.getBoundingClientRect(),T=A.height,D=A.width,M=A.top,N=A.right,L=A.bottom,I=A.left;if("if-needed"===a&&x>=0&&C>=0&&E<=g&&_<=m&&x>=M&&E<=L&&C>=I&&_<=N)return R;var B=getComputedStyle(P),z=parseInt(B.borderLeftWidth,10),F=parseInt(B.borderTopWidth,10),U=parseInt(B.borderRightWidth,10),V=parseInt(B.borderBottomWidth,10),q=0,H=0,W="offsetWidth"in P?P.offsetWidth-P.clientWidth-z-U:0,Y="offsetHeight"in P?P.offsetHeight-P.clientHeight-F-V:0;if(f===P)q="start"===c?O:"end"===c?O-g:"nearest"===c?i(y,y+g,g,F,V,y+O,y+O+k,k):O-g/2,H="start"===l?S:"center"===l?S-m/2:"end"===l?S-m:i(v,v+m,m,z,U,v+S,v+S+w,w),q=Math.max(0,q+y),H=Math.max(0,H+v);else{q="start"===c?O-M-F:"end"===c?O-L+V+Y:"nearest"===c?i(M,L,T,F,V+Y,O,O+k,k):O-(M+T/2)+Y/2,H="start"===l?S-I-z:"center"===l?S-(I+D/2)+W/2:"end"===l?S-N+U+W:i(I,N,D,z,U+W,S,S+w,w);var G=P.scrollLeft,X=P.scrollTop;O+=X-(q=Math.max(0,Math.min(X+q,P.scrollHeight-T+Y))),S+=G-(H=Math.max(0,Math.min(G+H,P.scrollWidth-D+W)))}R.push({el:P,top:q,left:H})}return R};function l(e){return e===Object(e)&&0!==Object.keys(e).length}t.a=function(e,t){var n=!e.ownerDocument.documentElement.contains(e);if(l(t)&&"function"==typeof t.behavior)return t.behavior(n?[]:c(e,t));if(!n){var r=function(e){return!1===e?{block:"end",inline:"nearest"}:l(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach((function(e){var r=e.el,a=e.top,o=e.left;r.scroll&&n?r.scroll({top:a,left:o,behavior:t}):(r.scrollTop=a,r.scrollLeft=o)}))}(c(e,r),r.behavior)}}},1925:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="DownloadOutlined";t.a=a.forwardRef(c)},1926:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="QuestionCircleOutlined";t.a=a.forwardRef(c)},1927:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="RedoOutlined";t.a=a.forwardRef(c)},1928:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:e}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:t}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:t}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:t}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:e}}]}},name:"picture",theme:"twotone"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="PictureTwoTone";t.a=a.forwardRef(c)},1929:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:t}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:e}}]}},name:"file",theme:"twotone"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="FileTwoTone";t.a=a.forwardRef(c)},1930:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="PaperClipOutlined";t.a=a.forwardRef(c)},1931:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="DeleteOutlined";t.a=a.forwardRef(c)},1932:function(e,t,n){"use strict";n(586);var r=n(416),a=(n(57),n(23)),o=n(0),i=n.n(o),c=n(79),l=n(1),s=n.n(l),u=n(31),d=n(1719);function f(e){var t=e.group,n=e.book,o=e.closeModal;return i.a.createElement(d.a,{visible:!0,title:__("删除知识库"),content:i.a.createElement(r.a,{description:__("正在删除知识库 {name}，该操作不可逆，一旦操作成功，知识库下的所有内容将会删除。请输入下面内容再次确认操作。",{name:i.a.createElement("span",{className:"highlight_name"},n.name)}),type:"warning"}),buttonText:__("确定删除 {name}",{name:n.name}),slug:n.slug,onOk:function(){u.a.books.destroy({id:n.id}).then((function(e){a.a.success(__("操作成功"),3),o(),setTimeout((function(){window.location.href="/".concat(t.login)}),300)}))},onCancel:o})}f.propTypes={book:s.a.object,group:s.a.object,closeModal:s.a.func},t.a=Object(c.c)((function(e){return{book:e.book,group:e.group}}))(f)},1934:function(e,t,n){"use strict";n(1933);var r=n(935);n(1713);t.a=r.a},1935:function(e,t,n){"use strict";var r=n(0);t.a=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current}},1936:function(e,t,n){"use strict";var r=/["'&<>]/;e.exports=function(e){var t,n=""+e,a=r.exec(n);if(!a)return n;var o="",i=0,c=0;for(i=a.index;i<n.length;i++){switch(n.charCodeAt(i)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#39;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}c!==i&&(o+=n.substring(c,i)),c=i+1,o+=t}return c!==i?o+n.substring(c,i):o}},1937:function(e,t,n){"use strict";n(73);var r=n(38),a=(n(293),n(80)),o=(n(75),n(25)),i=(n(45),n(18)),c=(n(144),n(37)),l=(n(126),n(55)),s=(n(368),n(275)),u=(n(136),n(36)),d=n(0),f=n.n(d),p=n(1),h=n.n(p),m=n(187),g=n(932),v=n.n(g),y={wrapper:"index-module_wrapper_JWVrc",group:"index-module_group_v1Ma7",switcherCon:"index-module_switcherCon_ukBSF",proxyInfo:"index-module_proxyInfo_xyyvb",proxyEdit:"index-module_proxyEdit_dCgE9",itemTitle:"index-module_itemTitle_+3-Mr",confirm:"index-module_confirm_21TS+"};function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function k(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){k(o,r,a,i,c,"next",e)}function c(e){k(o,r,a,i,c,"throw",e)}i(void 0)}))}}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var a=R(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&E(e,t)}(g,e);var t,n,d,p,h=C(g);function g(){var e;x(this,g);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return j(S(e=h.call.apply(h,[this].concat(n))),"formRef",f.a.createRef()),j(S(e),"state",{proxySetting:{},showProxyUrlBoard:!1,errMessage:"",proxyUrl:""}),j(S(e),"onSwitchProxy",function(){var t=w(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=e.state.proxySetting).enable=n,r.mode||(r.mode=m.MODE.http,r.type=m.TYPE.http),t.next=5,e.props.updateProxySettings(r);case 5:e.setState({proxySetting:r});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),j(S(e),"changeProxyType",function(){var t=w(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=e.state.proxySetting).mode=n,n===m.MODE.http&&(r.type=m.TYPE.http),t.next=5,e.props.updateProxySettings(r);case 5:e.setState({proxySetting:r});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),j(S(e),"changeType",function(){var t=w(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=e.state.proxySetting).type=n,t.next=4,e.props.updateProxySettings(r);case 4:e.setState({proxySetting:r});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),j(S(e),"editProxyUrl",(function(){e.setState({showProxyUrlBoard:!0})})),j(S(e),"onConfirmProxyUrl",w(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.proxyUrl,r=Object.keys(m.TYPE),n&&v.a.isURL(n,{require_protocol:!0,protocols:r})){t.next=4;break}return t.abrupt("return",e.setState({errMessage:__("代理地址输入错误")}));case 4:return(a=e.state.proxySetting).url=n,t.next=8,e.props.updateProxySettings(a);case 8:e.setState({proxySetting:a,showProxyUrlBoard:!1});case 9:case"end":return t.stop()}}),t)})))),e}return t=g,n=[{key:"componentWillMount",value:(p=w(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getProxySettings();case 2:t=e.sent,this.setState({proxySetting:t||{}});case 4:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,n=t.proxySetting,d=t.showProxyUrlBoard,p=t.errMessage,h=n.mode===m.MODE.http,g="mini"===this.props.scene,v={left:g?15:18,right:g?9:6},b="100%",k=g?"small":"normal",w=g?{borderBottom:"none"}:{};return f.a.createElement("div",{className:y.wrapper,style:w},!g&&f.a.createElement("h2",null,__("代理设置")),f.a.createElement("div",{className:y.group},f.a.createElement("div",{className:y.item},f.a.createElement(l.a,null,f.a.createElement(u.a,{span:v.left},__("启用代理")),f.a.createElement(u.a,{className:y.switcherCon,span:v.right},f.a.createElement(s.a,{defaultChecked:n.enable,checked:n.enable,size:"large",onChange:this.onSwitchProxy}))))),n.enable&&f.a.createElement("div",null,f.a.createElement("div",{className:y.group},f.a.createElement("div",{className:y.item},f.a.createElement(l.a,null,f.a.createElement(u.a,{span:v.left,className:y.itemTitle},__("代理模式")),f.a.createElement(u.a,{span:v.right},f.a.createElement(c.a,{style:{width:b},onChange:function(t){return e.changeProxyType(t)},defaultValue:n.mode||m.MODE.http,size:k},f.a.createElement(c.a.Option,{value:m.MODE.http},__("HTTP 代理")),f.a.createElement(c.a.Option,{value:m.MODE.pac},__("PAC 代理"))))))),h&&f.a.createElement("div",{className:y.group},f.a.createElement("div",{className:y.item},f.a.createElement(l.a,null,f.a.createElement(u.a,{span:v.left,className:y.itemTitle},__("代理协议")),f.a.createElement(u.a,{span:v.right},f.a.createElement(c.a,{style:{width:b},onChange:function(t){return e.changeType(t)},defaultValue:n.type||m.TYPE.http,size:k},f.a.createElement(c.a.Option,{value:m.TYPE.http},m.TYPE.http),f.a.createElement(c.a.Option,{value:m.TYPE.socks4},m.TYPE.socks4),f.a.createElement(c.a.Option,{value:m.TYPE.socks5},m.TYPE.socks5)))))),f.a.createElement("div",{className:y.group,style:{border:"none"}},f.a.createElement("div",{className:y.item},f.a.createElement(l.a,null,f.a.createElement(u.a,{span:v.left,className:y.itemTitle},__("代理服务器"),n.url&&f.a.createElement("span",{className:y.proxyInfo},n.url)),f.a.createElement(u.a,{span:v.right,className:y.proxyEdit},f.a.createElement(i.a,{onClick:this.editProxyUrl},__("修改")))))),g&&f.a.createElement("div",{className:y.confirm},f.a.createElement(i.a,{type:"primary",onClick:this.props.onOk},__("确定")))),f.a.createElement(r.a,{title:__("设置代理地址"),closable:!0,maskClosable:!1,visible:d,onCancel:function(){e.setState({showProxyUrlBoard:!1})},footer:null},f.a.createElement(a.a,{ref:this.formRef},f.a.createElement(a.a.Item,{name:"proxyUrl",help:p||null,validateStatus:p?"error":null},f.a.createElement(o.a,{ref:function(t){e.proxyUrlInputElem=t},defaultValue:n.url,placeholder:__("协议://IP:端口"),onChange:function(t){return e.setState({proxyUrl:t.target.value,errMessage:""})}}))),f.a.createElement("div",{style:{textAlign:"right",marginTop:8}},f.a.createElement(i.a,{type:"primary",onClick:this.onConfirmProxyUrl},__("确定")))))}}],n&&_(t.prototype,n),d&&_(t,d),Object.defineProperty(t,"prototype",{writable:!1}),g}(d.Component);P.defaultProps={scene:""},P.propTypes={scene:h.a.string,updateProxySettings:h.a.func,getProxySettings:h.a.func,onOk:h.a.func};t.a=P},1938:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="CaretRightOutlined";t.a=a.forwardRef(c)},1940:function(e,t,n){"use strict";n(2078);var r=n(1731);n(1715);t.a=r.a},1941:function(e,t,n){"use strict";n(2079);var r=n(1732);n(1716);t.a=r.a},1942:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z"}}]},name:"vertical-align-top",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="VerticalAlignTopOutlined";t.a=a.forwardRef(c)},1943:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(79),i=n(104),c=n.n(i),l=n(245),s=n(99),u=n(588);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=new c.a("sys:guide");t.a=Object(s.b)(Object(o.c)((function(e){return{guide:e.guide,me:e.me}}))((function(e){var t=e.guide,n=e.me,o=new Date(n.created_at).getTime(),i=l.a.FEATURES.filter((function(e){var t=!!e.enable,n=new Date(e.createdAt).getTime()>=o;return t&&n})),c=d(Object(r.useState)(!1),2),s=c[0],f=c[1];return Object(r.useEffect)((function(){setTimeout((function(){f(!0)}),1e3)}),[]),s?a.a.createElement(a.a.Fragment,null,i.map((function(n){if(p("process:","".concat(n.area,"_").concat(n.tip_id)),o=n.tip_id,"#guide"===window.location.hash||!t.readTip[o]){var r=n.containerSelector||'[data-feature-guide-portal="'.concat(n.tip_id,'"]');return p("selector to show guide",r),a.a.createElement("span",{key:n.tip_id,"data-testid":n.tip_id},a.a.createElement(u.a,{type:n.type,placement:n.placement,tip:n.tip,offsetY:n.offsetY,containerSelector:r,readTrigger:n.readTrigger||[],guideSignContainerStyle:n.guideSignContainerStyle,onRead:function(){!function(t){"lite"===t.type?l.a.readLiteFeatureGuide(t):l.a.readMiniFeatureGuide(t,e.dispatch)}(n)},enableMultiLines:n.enableMultiLines}))}var o;return p("guide already read, just render empty node"),a.a.createElement("span",{key:"".concat(n.tip_id,"-").concat(n.area),"data-testid":n.tip_id,"data-feature-guide-read":n.tip_id})}))):null})),!1)},1944:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),a=n.n(r),o=n(418),i=n.n(o),c=n(188);function l(){if(i()())return null;var e,t,n,r=window.appData,o=r.organization,l=r.group,s=void 0===l?{}:l,u=r.me,d=void 0===u?{}:u;o?(e=__("联系管理员升级为付费空间后可用"),!0===(null==o||null===(n=o.abilities)||void 0===n?void 0:n.destroy)&&(e=__("升级为付费空间后可用"),t="/r/organizations/dashboard/cashier")):Object(c.a)(s)?e=Object(c.c)(s)?__("知识小组内暂不支持此格式"):__("团队内暂不支持此格式"):s.id===d.id?(e=__("升级为语雀会员后可用"),t="/settings/member"):e=__("知识库管理员为语雀会员时可用");return a.a.createElement("div",{"data-testid":"video-remark"},e,!!t&&a.a.createElement("a",{style:{marginLeft:5},rel:"noreferrer",href:t,target:"_blank",onClick:function(e){window.openExternalLink&&(window.openExternalLink(t,!0),e.preventDefault())}},__("立即升级")))}},1945:function(e,t,n){e.exports=n(1939)},1946:function(e,t,n){"use strict";var r=n(78),a=n.n(r),o={_bookGrayscaleConfig:null,getDefaultDocumentFormat:function(e,t,n){return t=t||"",n=n||{},a.a.DOC_DEFAULT_FORMAT[e]||a.a.FORMAT.LAKE}};t.a=o},195:function(e,t,n){},196:function(e,t,n){},1961:function(e,t,n){"use strict";var r=n(31),a={epv:function(e){var t=e.type,n=e.id;r.a.logs.activity({type:t,action:"epv",id:n})}};t.a=a},1962:function(e,t,n){},1964:function(e,t,n){},1966:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="EditOutlined";t.a=a.forwardRef(c)},1967:function(e,t,n){"use strict";var r,a=[{id:1,title:__("加油")},{id:2,title:__("开心")},{id:3,title:__("很忙")},{id:4,title:__("想哭")},{id:5,title:__("生气")}],o=(r={},a.forEach((function(e){r[e.id]=e})),r),i=[{id:"thumbs_up",title:__("支持"),icon:"https://gw.alipayobjects.com/zos/basement_prod/40dd7f62-e6ad-48c6-b2c1-aeed729ff753.svg"},{id:"thumbs_down",title:__("反对"),icon:"https://gw.alipayobjects.com/zos/basement_prod/49753f89-a52b-47f8-8dff-ca2b7d5ab29e.svg"},{id:"applause",title:__("喝彩"),icon:"https://gw.alipayobjects.com/zos/basement_prod/39b96288-777c-4ad9-8065-fe27ee2366d5.svg"},{id:"momo",title:__("摸摸"),icon:"https://gw.alipayobjects.com/zos/basement_prod/486defba-93e3-4151-8b23-6fb09dfb7f97.svg"},{id:"+1",title:__("+1"),icon:"https://gw.alipayobjects.com/zos/basement_prod/36cfd05d-c682-4e82-8653-2f0d000b4374.svg"}],c=function(){var e={};return i.forEach((function(t){e[t.id]=t})),e}(),l={REACTIONS:i,getMoodTitleById:function(e){return(o[e]||{}).title||""},getPostUrl:function(e){var t=window.location.hash||"",n=window.location.href;return n=n.substring(0,n.length-t.length),"".concat(n,"#comment-").concat(e)},classifyReactions:function(e){var t=Object.keys(c),n={};return t.forEach((function(e){n[e]={count:0,user_ids:[]}})),e.forEach((function(e){e.action_option.split(",").forEach((function(t){n[t]&&(n[t].count++,n[t].user_ids.push(e.user_id))}))})),n},getReactionById:function(e){return c[e]}};t.a=l},1968:function(e,t,n){"use strict";n(73);var r=n(38),a=(n(45),n(18)),o=(n(57),n(23)),i=n(0),c=n.n(i),l=n(1),s=n.n(l),u=n(587),d=n(369),f=n(1005),p=n(2081);n(2077);function h(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){var t=m(Object(i.useState)({}),2),n=t[0],l=t[1],s=m(Object(i.useState)(e.doc.title),2),u=s[0],g=s[1],v=m(Object(i.useState)(-1),2),y=v[0],b=v[1];Object(i.useEffect)((function(){l(new f.a(e.templateProxy,e.docProxy))}),[]);var k=function(){var t,r=(t=regeneratorRuntime.mark((function t(){var r,a,i,l,s,f,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.book,a=e.doc,i=e.docletType,l=e.onOpenTemplateSelector,s=e.inEdit,y===d.TYPE.BOOK?(f=r.id,p=d.TARGET_TYPE.BOOK):y===d.TYPE.PERSONAL?(f=window.appData.me.id,p=d.TARGET_TYPE.USER):(f=r.user_id,p=d.TARGET_TYPE.USER),n.createTemplate(f,p,y,i,u,a.id,s).then((function(){var t=c.a.createElement("span",null,__("模板已创建")," ",c.a.createElement("a",{onClick:l},__("查看全部模板")));o.a.success(t),e.onCancel()})).catch((function(e){console.error(e)}));case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){h(o,r,a,i,c,"next",e)}function c(e){h(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}(),w=e.group,x=e.organization,_=e.isDesktop;return c.a.createElement(r.a,{className:"modal-without-padding",visible:e.visible,style:{top:78},width:"368px",onCancel:e.onCancel,title:e.modalTitle,footer:c.a.createElement(c.a.Fragment,null,c.a.createElement(a.a,{onClick:e.onCancel},__("取消")),c.a.createElement(a.a,{type:"primary",onClick:k},__("确定")))},c.a.createElement(p.a,{newTemplateName:u,onSetNewTemplateName:g,onSetSelectedScope:b,group:w,organization:x,isDesktop:_}))}v.propTypes={visible:s.a.bool,onCancel:s.a.func,modalTitle:s.a.string,docletType:s.a.string,doc:s.a.object,book:s.a.object,group:s.a.object,organization:s.a.object,isDesktop:s.a.bool,onOpenTemplateSelector:s.a.func,templateProxy:s.a.object,docProxy:s.a.object,inEdit:s.a.bool},t.a=Object(u.b)(v,!0)},1979:function(e,t,n){"use strict";n(1962);var r=n(1652),a=n(0),o=n.n(a),i=n(266),c=n(104),l=n.n(c),s=n(8),u=n.n(s),d=n(1),f=n.n(d),p=n(120),h=n.n(p),m=n(2717),g=n.n(m),v=n(181),y=n(271),b={loading:"index-module_loading_6Xjs9",titleWrapper:"index-module_titleWrapper_NRfy4",wrapper:"index-module_wrapper_G8dbv",editable:"index-module_editable_js4TT",scrolled:"index-module_scrolled_ZXFD1",topScrolled:"index-module_topScrolled_8VE-9",bottomScrolled:"index-module_bottomScrolled_G+APF",dragging:"index-module_dragging_fFNee",normalWrapper:"index-module_normalWrapper_9CiWJ",largeWrapper:"index-module_largeWrapper_SUwil",ListTocWrapper:"index-module_ListTocWrapper_4wy2S"};function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function w(){return w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(this,arguments)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=O(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function C(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},P(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M(e);if(t){var a=M(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return D(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L="catalog-tree",I="".concat(L,"-drag-container"),B=l()(L),z=r.a.DirectoryTree,F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&P(e,t)}(c,e);var t,n,r,a=A(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),N(D(t=a.call(this,e)),"initScrollValue",(function(){t.scrolled=!0})),N(D(t),"initScrollMask",(function(){if(t.props.showScrollMask){var e=t.getCurrentScrollElement();if(e){var n=t.containerElem.getBoundingClientRect().height;t.virtualListEnabled()&&(n=t.props.height);var r=e.childNodes[0].offsetHeight,a=!1,o=!1;r>n&&(a=!0,o=!0,e.scrollTop<=0?a=!1:e.scrollTop>=r-n&&(o=!1));var i={};a!==t.state.showTopScrollMask&&(i.showTopScrollMask=a),o!==t.state.showBottomScrollMask&&(i.showBottomScrollMask=o),t.setState(i)}}})),N(D(t),"onExpand",(function(e,n){var r=n.expanded,a=n.node;t.expandLocked||t.setState({expandedKeys:e,currentNodeExpanded:r,autoExpandParent:!1},(function(){t.props.onExpand&&t.props.onExpand(e,{expanded:r,node:a}),t.timer&&clearTimeout(t.timer),t.timer=setTimeout(t.initScrollMask,200)}))})),N(D(t),"onSelect",(function(e,n){var r=e[0],a=n.node.props,o=a.type,i=t.props.toggleTitleOnSelect,c=t.state.expandedKeys.slice(),l=c.findIndex((function(e){return e===r}));l<0?c.push(r):o===v.TYPES.title&&i&&c.splice(l,1),t.setState({expandedKeys:c,selectedKeys:[r]});var s=t.props.onSelect;s&&([v.TYPES.doc,v.TYPES.link,v.TYPES.uncreated_doc,v.TYPES.title].includes(o)&&s(a,n.nativeEvent))})),N(D(t),"onCheck",(function(e,n){t.props.onCheck&&t.props.onCheck(e,n)})),N(D(t),"getAction",(function(e){var n=e.node.pos.split("-");return-1===e.dropPosition-Number(n[n.length-1])?v.ACTIONS.moveBefore:e.dropToGap||t.props.useListToc?v.ACTIONS.moveAfter:v.ACTIONS.prependChild})),N(D(t),"onDrop",function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var r,a,o,i,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.node.key,a=n.dragNode.key,t._showLoading(),o=t.getAction(n),B("发出 Action",i={action:o,target_uuid:r,node_uuid:a}),e.next=8,t.props.onAction(i);case 8:[v.ACTIONS.prependChild].includes(o)&&(c=t.state.expandedKeys,(l=c.slice()).includes(r)||(l.push(r),t.setState({expandedKeys:l}))),t.props.onDragEnd&&t.props.onDragEnd(n.dragNode),t.setState({draggingNode:null}),t._hideLoading();case 12:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){R(o,r,a,i,c,"next",e)}function c(e){R(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}()),N(D(t),"onDragEnd",(function(e){if(t.props.onDragEnd&&t.props.onDragEnd(e.dragNode),t._hideLoading(),t.cacheExpandedKey){var n=C(t.state.expandedKeys);n.includes(t.cacheExpandedKey)||t.setState({draggingNode:null,expandedKeys:[].concat(C(n),[t.cacheExpandedKey])}),t.collapseTimer&&clearTimeout(t.collapseTimer),t.cacheExpandedKey=null}else t.setState({draggingNode:null})})),N(D(t),"onDragStart",(function(e){var n=e.event,r=e.node;if(r.expanded?(t.collapseTimer&&clearTimeout(t.collapseTimer),t.collapseTimer=setTimeout((function(){var e=C(t.state.expandedKeys);if(e.includes(r.uuid)){t.cacheExpandedKey=r.uuid;var n=g()(e,[r.uuid]);t.setState({draggingNode:r,expandedKeys:n})}}),10)):t.setState({draggingNode:r}),n.dataTransfer){var a=document.getElementById(I);a&&document.body.removeChild(a);var o=document.createElement("div");o.style.position="fixed";var i=t.props.offscreenRendering;o.style.top=i?"-100px":"0px",o.style.left="0px",o.style.cursor="grabbing",o.id=I,o.innerText=n.target.innerText,document.body.appendChild(o),n.dataTransfer.setDragImage(o,16,10),n.dataTransfer.dropEffect="none"}t.props.onDragStart&&t.props.onDragStart(r)})),N(D(t),"_showLoading",(function(){if(t.loadingElem){var e=t.containerElem.getBoundingClientRect(),n=e.x,r=e.width;t.loadingElem.style.left="".concat(n,"px"),t.loadingElem.style.width="".concat(r,"px"),t.loadingElem.style.display="block"}})),N(D(t),"_hideLoading",(function(){t.loadingElem&&(t.loadingElem.style.display="none")})),N(D(t),"scrollTo",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.virtualListEnabled()){if(!t.treeRef)return;t.treeRef.scrollTo(e)}else{var n=t.containerElem.querySelector('[data-uuid="catalog-'.concat(e.key,'"]'));if(!n)return;var r=n.closest(".ant-tree-treenode");t.containerElem.scrollTop=r.offsetTop-e.offset}})),N(D(t),"_getChildNodeUIds",(function(e){return e&&e.child_uuid?Object(y.findAllChildrenByParentNode)(t.props.listData,e,!0).map((function(e){return e.uuid})):[]})),N(D(t),"getTreeData",(function(){var e=t.props,n=e.data,r=e.disabledKeys,a=e.disabledCheckedKeys,i=e.highlightKeys,c=e.renderTitle,l=e.visibleFilter,s=0,d=C(r);if(t.state.draggingNode){var f=t._getChildNodeUIds(t.state.draggingNode);f&&f.length&&d.push.apply(d,C(f))}return function e(t){var n,r=[],f=E(t=t.filter(l));try{for(f.s();!(n=f.n()).done;){var p=n.value,h=d.includes(p.uuid),m=i.includes(p.uuid),g=a&&a.includes(p.uuid);p.index=s,s++;var v=_(_({},p),{},{disableCheckbox:g,"data-tree-index":p.index,"data-uuid":"catalog-".concat(p.uuid),key:p.uuid,className:u()(["catalog-treenode-level-".concat(p.level+1)],{"catalog-item-highlight":m,"catalog-item-disabled":h}),title:o.a.createElement("div",{className:u()(b.titleWrapper,N({},b.titleDisabled,h))},c(p,p.index))});p.children&&p.children.length&&(v.children=e(p.children)),r.push(v)}}catch(e){f.e(e)}finally{f.f()}return r}(n)})),t.maxNodeLengthForLoading=100,t.scrolled=!1;var n=e.expandedKeys||t.getExpandKeysByLevel(e);return t.state={draggingNode:null,expandedKeys:n,selectedKeys:e.selectedKeys||[],currentNodeExpanded:!0,autoExpandParent:!0,showTopScrollMask:!1,showBottomScrollMask:!1},t}return t=c,n=[{key:"componentDidMount",value:function(){var e=this.getCurrentScrollElement();e&&e.addEventListener("scroll",this.initScrollValue,!1),this.props.showScrollMask&&(this.initScrollMask(),e&&e.addEventListener("scroll",this.initScrollMask,!1));var t=this.containerElem;t&&this.props.enableScrollHelper&&t.addEventListener("dragover",this.dragoverEdgeToScroll)}},{key:"componentWillUnmount",value:function(){var e=this.getCurrentScrollElement();e&&(e.removeEventListener("scroll",this.initScrollValue,!1),e.removeEventListener("scroll",this.initScrollMask,!1));var t=this.containerElem;t&&t.removeEventListener("dragover",this.dragoverEdgeToScroll)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,n=this.props,r=n.catalogLevel,a=n.expandedKeys,o=e.catalogLevel,i=e.expandedKeys,c=e.selectedKeys;if(!h()(i,a)){var l=i||this.lastExpandedKeys;return this.lastExpandedKeys=this.state.expandedKeys,void this.setState({expandedKeys:l})}if(i&&!h()(i,this.state.expandedKeys))return this.lastExpandedKeys=this.state.expandedKeys,void this.setState({expandedKeys:i});o!==r&&this.setState((function(n){return{expandedKeys:t.getExpandKeysByLevel(e,n.currentNodeExpanded)}})),c&&!h()(c,this.state.selectedKeys)&&this.setState({selectedKeys:c})}},{key:"shouldComponentUpdate",value:function(e,t){return!this.props.editable||!(e.catalogLevel===this.props.catalogLevel&&e.rerenderString===this.props.rerenderString&&e.height===this.props.height&&h()(e.highlightKeys,this.props.highlightKeys)&&h()(e.listData,this.props.listData)&&h()(e.checkedKeys,this.props.checkedKeys)&&h()(e.disabledCheckedKeys,this.props.disabledCheckedKeys)&&h()(t,this.state))}},{key:"dragoverEdgeToScroll",value:function(e){var t=e.clientY,n=document.documentElement,r=n.scrollTop;r>199&&t<150&&n.scrollTop>0?n.scrollTop=r-10:t>window.innerHeight-150&&n.scrollTop<n.scrollHeight-n.offsetHeight&&(n.scrollTop=r+10)}},{key:"getCurrentScrollElement",value:function(){var e=this.containerElem;return this.virtualListEnabled()&&(e=document.querySelector(".ant-tree-list-holder")),e}},{key:"virtualListEnabled",value:function(){var e=this.props,t=e.listData,n=void 0===t?[]:t,r=e.height;return n.length>this.maxNodeLengthForLoading&&r}},{key:"lockExpand",value:function(){var e=this;this.expandLocked=!0,setTimeout((function(){e.expandLocked=!1}),100)}},{key:"foldAll",value:function(){var e=this.getExpandKeysByLevel(_(_({},this.props),{},{catalogLevel:1}));this.setState({expandedKeys:e,autoExpandParent:!1})}},{key:"unfoldAll",value:function(){var e=this.getExpandKeysByLevel(_(_({},this.props),{},{catalogLevel:1/0}));this.setState({expandedKeys:e})}},{key:"getExpandKeysByLevel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.catalogLevel,r=e.listData,a=e.selectedKeys;if(n===1/0)return r.map((function(e){return e.uuid}));var o,i=[],c=E(r);try{for(c.s();!(o=c.n()).done;){var l=o.value;l.level<n-1&&i.push(l.uuid)}}catch(e){c.e(e)}finally{c.f()}return a&&a.length&&t&&i.push.apply(i,C(a)),i}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.listData,a=n.editable,c=void 0!==a&&a,l=n.wrapperClassName,s=void 0===l?"":l,d=n.size,f=n.height,p=n.onRightClick,h=n.useListToc,m=n.checkable,g=n.checkStrictly,v=n.checkedKeys,y={},k={};this.virtualListEnabled()?(y.virtual=!0,y.height="large"===d?f-32:f):(y.virtual=!1,f&&(k.height=f,k.overflow="hidden auto")),p&&(y.onRightClick=function(e){return p(e.node.props)});var x=this.state,_=x.expandedKeys,E=void 0===_?[]:_,O=x.selectedKeys,S=x.autoExpandParent,R=x.showTopScrollMask,j=x.showBottomScrollMask,P=x.draggingNode,A=this.getTreeData();return o.a.createElement("div",{"data-testid":L,className:u()(s,b.wrapper,(e={},N(e,b.largeWrapper,"large"===d),N(e,b.normalWrapper,"normal"===d),N(e,b.editable,c),N(e,b.dragging,!!P),N(e,b.scrolled,R||j),N(e,b.topScrolled,R),N(e,b.bottomScrolled,j),N(e,b.ListTocWrapper,h),e))},o.a.createElement("div",{style:k,ref:function(e){t.containerElem=e}},o.a.createElement(z,w({switcherIcon:o.a.createElement("span",{className:"lake-icon lake-icon-catalog-switcher",style:{fontSize:"16px",fontWeight:"500"}}),showIcon:!1,showLine:!1,draggable:c,expandedKeys:C(new Set(E)),selectedKeys:C(new Set(O)),blockNode:!0,expandAction:"click",autoExpandParent:S,onExpand:this.onExpand,onSelect:this.onSelect,onDrop:this.onDrop,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onCheck:this.onCheck,treeData:A,checkable:m,checkStrictly:g,checkedKeys:v,ref:function(e){t.treeRef=e}},y)),r.length>this.maxNodeLengthForLoading&&o.a.createElement("div",{className:b.loading,ref:function(e){t.loadingElem=e}},o.a.createElement(i.a,null))))}}],n&&j(t.prototype,n),r&&j(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(a.Component);F.defaultProps={listData:[],highlightKeys:[],selectedKeys:[],disabledKeys:[],size:"normal",toggleTitleOnSelect:!1,visibleFilter:function(){return!0},enableScrollHelper:!1},F.propTypes={autoExpandParent:f.a.bool,size:f.a.oneOf(["normal","large"]),toggleTitleOnSelect:f.a.bool,data:f.a.array.isRequired,listData:f.a.array,editable:f.a.bool.isRequired,offscreenRendering:f.a.bool,onRightClick:f.a.func,onAction:f.a.func,renderTitle:f.a.func.isRequired,catalogLevel:f.a.number,wrapperClassName:f.a.string,onSelect:f.a.func,onDragStart:f.a.func,onDragEnd:f.a.func,onExpand:f.a.func,visibleFilter:f.a.func,highlightKeys:f.a.array,expandedKeys:f.a.array,selectedKeys:f.a.array,disabledKeys:f.a.array,checkedKeys:f.a.object,height:f.a.number,showScrollMask:f.a.bool,rerenderString:f.a.string,useListToc:f.a.bool,enableScrollHelper:f.a.bool,checkable:f.a.bool,checkStrictly:f.a.bool,onCheck:f.a.func,disabledCheckedKeys:f.a.array};t.a=F},1980:function(e,t,n){"use strict";var r=n(41),a=n.n(r),o=n(2711),i=n.n(o),c=n(31),l=n(222);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){h(o,r,a,i,c,"next",e)}function c(e){h(o,r,a,i,c,"throw",e)}i(void 0)}))}}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var a=w(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&v(e,t)}(s,e);var t,n,r,o=y(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),x(k(t=o.call(this,e)),"enableDepthAll",(function(){return!1})),x(k(t),"enableDepSelect",(function(){return"simple"===t.type})),x(k(t),"getIconUrl",(function(){var e=window.appData,t=e.isYuque,n=e.corp,r=e.organization,a={buc:"https://gw.alipayobjects.com/zos/bmw-prod/8d7f7670-2c26-4ba5-bb0f-fb124e7f9fc8.svg",dingtalk:"https://gw.alipayobjects.com/zos/bmw-prod/4c033358-95df-4e2a-b468-89fe697fc03d.svg",wechat:"https://gw.alipayobjects.com/zos/bmw-prod/8f2f3dae-cc7c-455c-9579-ed042085da7d.svg"};return t?n?a[n.type]:r&&r.logo:a.buc})),x(k(t),"getInitData",m(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.mine.department({self:!0});case 2:if((r=e.sent)&&0!==r.length){e.next=9;break}return e.next=6,t.getTopData();case 6:n=e.sent,e.next=10;break;case 9:n=t.getData(r[r.length-1]);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})))),x(k(t),"fetchCache",function(){var e=m(regeneratorRuntime.mark((function e(n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.cacheFetch[n]){e.next=5;break}return e.next=4,r();case 4:t.cacheFetch[n]=e.sent;case 5:return e.abrupt("return",a()(t.cacheFetch[n]));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),x(k(t),"getData",m(regeneratorRuntime.mark((function e(){var n,r,a,o,i,l,s,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>0&&void 0!==u[0]?u[0]:{},r={},a=n.id,!n.getTop){e.next=9;break}return e.next=6,t.getTopData();case 6:return o=e.sent,r.users=t.adpatUIListData(o),e.abrupt("return",r);case 9:if(!(t.enableDepthAll()&&t.isDepartment(n))&&!t.cacheDepthRes[a]){e.next=15;break}return e.next=13,t.getDataWithDepth(n);case 13:return i=e.sent,e.abrupt("return",i);case 15:return l={id:a},e.next=18,t.fetchCache(a,m(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.users.department(l);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))));case 18:return(s=e.sent).parents&&s.parents.forEach((function(e){e&&(t.cacheParent[e.id]=e)})),r=t.serialize(s),t.cacheDeps[a]=r,e.abrupt("return",r);case 23:case"end":return e.stop()}}),e)})))),x(k(t),"getDataWithDepth",m(regeneratorRuntime.mark((function e(){var n,r,o,i,l,s,u,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.length>0&&void 0!==d[0]?d[0]:{},r=n.id,o={id:r,depth:"all"},i=a()(t.cacheDepthRes),i[r]){e.next=12;break}return e.next=8,c.a.users.department(o);case 8:l=e.sent,t.cacheDepthRes=a()(p(p({},t.cacheDepthRes),l)),e.next=13;break;case 12:l=a()(i);case 13:return t.includeUserCount(l),(s=Object.keys(l)).forEach((function(e){var n=l[e].parent;n&&(t.cacheParent[e]=n)})),s.forEach((function(e){var n=l[e];n.parent=t.cacheParent[e],t.cacheDeps[e]=t.serialize(n)})),u=t.cacheDeps[r],n.name&&(u._name=n._name||n.name,u.name="".concat(u._name," (").concat(u.user_count,")")),e.abrupt("return",u);case 20:case"end":return e.stop()}}),e)})))),x(k(t),"adpatUIListData",(function(e){return e.map((function(e){var n=t.cacheDeps[e.id];t.setUid(e);var r={uid:e.uid,id:e.id,avatar_url:e.avatar_url,name:e.name,_name:e._name||e.name,user_id:e.user_id,work_id:e.work_id,login:e.login,type:e.type||"User",provider_type:e.provider_type,provider_userid:e.provider_userid,iconName:e.iconName,isTop:e.isTop};return n&&"user_count"in n&&(r.user_count=n.user_count,r.name="".concat(r._name," (").concat(r.user_count,")")),!e.isTop&&t.isDepartment(e)?r.sub=e:e.manageDepartment&&(r.sub=e.manageDepartment),r}))})),x(k(t),"adpatUINavData",(function(e){if(e){var n=[];if(Array.isArray(e))n=e;else{n.push(e);!function e(r){if(r.parentDepId){var a=t.cacheParent[r.parentDepId];if(!a)return;Array.isArray(a)?n=a.concat(n):(n.unshift(a),e(a))}}(e)}return n.map((function(e){return e.manageDepartment?{uid:"nav_".concat(e.manageDepartment.id),id:e.manageDepartment.id,name:e.manageDepartment.name,type:"Department"}:{uid:"nav_".concat(e.id),id:e.id,name:e.name,type:"Department"}}))}})),x(k(t),"getTopData",m(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.mine.department({self:!0});case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return t=e.t0,window.appData.isYuque||(n=t[0],t=[{id:"I0001",name:__("集团董事局"),iconName:"organization",type:"Department"},{id:"12503",name:__("阿里巴巴"),iconName:"organization",type:"Department"},{id:"8430",name:__("蚂蚁金服"),iconName:"organization",type:"Department"},{id:"134318",name:__("网商银行"),iconName:"organization",type:"Department"}],n&&(n.iconName="department",n.type="Department",t.push(n))),t=t.map((function(e){return e.isTop=!0,e.type="Department",e})),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))),x(k(t),"getAllDepUsers",function(){var e=m(regeneratorRuntime.mark((function e(n){var r,a,o,i,l,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.id,!(a=t.cacheDeps[r])){e.next=4;break}return e.abrupt("return",a);case 4:return e.next=6,c.a.user.searchAllDepUsers({id:r});case 6:for(o=e.sent,i=Object.keys(o.data),l=0,s=i;l<s.length;l++)u=s[l],t.cacheDeps[u]=o.data[u];return e.abrupt("return",o.data);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x(k(t),"getDepUsers",function(){var e=m(regeneratorRuntime.mark((function e(n){var r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.id,!(a=t.cacheDeps[r])){e.next=4;break}return e.abrupt("return",a);case 4:return e.next=6,c.a.user.userServices.searchDepUsers({id:r});case 6:return o=e.sent,t.cacheDeps[r]=o.data,e.abrupt("return",o.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x(k(t),"getRealUsers",(function(e){var n,r=[],a=u(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(t.isDepartment(o)){var c=t.cacheDeps[o.id];c&&(r=r.concat(c.depthUsers||c.users))}else r.push(o)}}catch(e){a.e(e)}finally{a.f()}return i()(r,"uid")})),t.cacheDeps={},t.cacheParent={},t.cacheFetch={},t.cacheDepthRes={},t.enable=!1,t}return t=s,n=[{key:"check",value:function(){l.a.enableAddressbook()&&!l.a.enableContacts()&&(this.enable=!0)}},{key:"includeUserCount",value:function(e){var t=this;Object.keys(this.cacheDeps).forEach((function(e){t.cacheDeps[e].user_count=0})),Object.keys(e).forEach((function(n){var r=e[n];if(!Array.isArray(r)){if(r.user_count=(r.user_count||0)+function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.users.filter((function(e){return"user"===e.type}));if(!e.depthUsers||!e.depthUsers.length)return t.length;var n=e.depthUsers.reduce((function(e,t){return e[t.uid]=t,e}),{});return t.filter((function(e){return!n[e.uid]})).length}(r),r.parent){var a=e[r.parent.parentDepId]||t.cacheDeps[r.parent.parentDepId];a&&(a.user_count=(a.user_count||0)+r.user_count,a.depthUsers=(a.depthUsers||[]).concat(r.users.filter((function(e){return t.isUser(e)}))),e[r.parent.parentDepId]=a,t.cacheDeps[r.parent.parentDepId]=a)}t.cacheDeps[n]=r}}))}}],r=[{key:"create",value:function(e){var t=new s(e);return t.check(),t}}],n&&g(t.prototype,n),r&&g(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(n(590).a);x(_,"id","addrbook"),x(_,"title",window.appData.isYuque?__("通讯录"):__("组织架构")),t.a=_},1981:function(e,t,n){"use strict";var r=n(31);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,l,"next",e)}function l(e){o(i,r,a,c,l,"throw",e)}c(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var a=p(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&s(e,t)}(d,e);var t,n,a,o=u(d);function d(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c(this,d),h(f(e=o.call(this,t)),"getIconUrl",(function(){return e.organization.logo})),h(f(e),"getInitData",i(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))),h(f(e),"getData",i(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.cache){t.next=2;break}return t.abrupt("return",e.cache);case 2:return t.next=4,r.a.organizationUsers.find({organization_id:e.organization.id,user_role:2,status:1,offset:0,limit:500});case 4:return n=t.sent,a=e.serialize({users:n}),e.cache=a,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})))),h(f(e),"adpatUIListData",(function(t){return t.map((function(t){var n=t.user;return e.setUid(t),{uid:t.uid,id:t.id,avatar_url:n.avatar_url,name:n.name,user_id:n.id,work_id:n.work_id,login:n.login,type:n.type,provider_type:n.provider_type,provider_userid:n.provider_userid}}))})),e.organization=t.organization||window.appData.organization,e}return t=d,a=[{key:"create",value:function(e){var t=new d(e);return t.check(),t}}],(n=[{key:"check",value:function(){this.organization&&this.organization.abilities&&this.organization.abilities.read||(this.enable=!1)}}])&&l(t.prototype,n),a&&l(t,a),Object.defineProperty(t,"prototype",{writable:!1}),d}(n(590).a);h(m,"id","outsourcer"),h(m,"title",__("外部联系人")),t.a=m},1982:function(e,t,n){"use strict";var r=n(31),a=n(222);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){i(o,r,a,c,l,"next",e)}function l(e){i(o,r,a,c,l,"throw",e)}c(void 0)}))}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&u(e,t)}(f,e);var t,n,o,i=d(f);function f(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l(this,f),m(p(e=i.call(this,t)),"getIconUrl",(function(){return e.organization.logo})),m(p(e),"getInitData",c(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))),m(p(e),"getData",c(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.cache){t.next=2;break}return t.abrupt("return",e.cache);case 2:return t.next=4,r.a.organizationUsers.find({organization_id:e.organization.id,user_role:"0,1",status:1,offset:0,limit:500});case 4:return n=t.sent,a=e.serialize({users:n}),e.cache=a,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})))),m(p(e),"adpatUIListData",(function(t){return t.map((function(t){var n=t.user;return e.setUid(t),{uid:t.uid,id:t.id,avatar_url:n.avatar_url,name:n.name,user_id:n.id,work_id:n.work_id,login:n.login,type:n.type,provider_type:n.provider_type,provider_userid:n.provider_userid}}))})),e.organization=t.organization||window.appData.organization,e.cache=null,e}return t=f,o=[{key:"create",value:function(e){var t=new f(e);return t.check(),t}}],(n=[{key:"check",value:function(){this.organization&&this.organization.abilities&&this.organization.abilities.read&&!a.a.enableContacts()||(this.enable=!1)}}])&&s(t.prototype,n),o&&s(t,o),Object.defineProperty(t,"prototype",{writable:!1}),f}(n(590).a);m(g,"id","orgMember"),m(g,"title",__("空间成员")),t.a=g},1983:function(e,t,n){"use strict";var r=n(31),a=n(88),o=n(590),i=n(2085);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){l(o,r,a,i,c,"next",e)}function c(e){l(o,r,a,i,c,"throw",e)}i(void 0)}))}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&f(e,t)}(c,e);var t,n,a,o=p(c);function c(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u(this,c),v(m(e=o.call(this,t)),"getIconUrl",(function(){return e.group.avatar_url})),v(m(e),"getIconName",(function(){return e.group.name})),v(m(e),"getFilterRoles",(function(){var t=Object(i.c)("group");return t.unshift(e.allRoleObj),t})),v(m(e),"getInitData",s(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))),v(m(e),"getData",s(regeneratorRuntime.mark((function t(){var n,a,o,i,c,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=l.length>0&&void 0!==l[0]?l[0]:{},a="role_".concat(n.role),!e.cache[a]){t.next=4;break}return t.abrupt("return",e.cache[a]);case 4:return o={id:e.group.id,offset:0,limit:500},"role"in n&&(o.role=n.role),t.next=8,r.a.groups.users(o);case 8:return i=t.sent,c=e.serialize({users:i}),e.cache[a]=c,t.abrupt("return",c);case 12:case"end":return t.stop()}}),t)})))),v(m(e),"adpatUIListData",(function(t){return t.map((function(t){var n=t.user;return e.setUid(t),{uid:t.uid,id:t.id,avatar_url:n.avatar_url,name:n.name,user_id:n.id,work_id:n.work_id,login:n.login,type:n.type,provider_type:n.provider_type,provider_userid:n.provider_userid}}))})),e.group=t.group||window.appData.group,e.cache={},e.allRoleObj={key:-1,label:__("全部")},e}return t=c,a=[{key:"create",value:function(e){var t=new c(e);return t.check(),t}}],(n=[{key:"check",value:function(){this.group&&this.group.abilities&&this.group.abilities.read||(this.enable=!1)}}])&&d(t.prototype,n),a&&d(t,a),Object.defineProperty(t,"prototype",{writable:!1}),c}(o.a);v(y,"id","groupuser"),v(y,"title",a.a.isPublication(window.appData.group)?__("知识小组成员"):__("团队成员")),t.a=y},1984:function(e,t,n){"use strict";n(57);var r=n(23),a=n(225),o=n(269),i=n.n(o);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"getUploadProps",(function(){return{name:"file",action:n.action,headers:{"x-csrf-token":Object(a.a)(window,!0)},onChange:function(e){var t=this;if("done"===e.file.status){var n=e.file.response.data;r.a.success(__("通过 {mobiles} 手机号码成功邀请 {members} 位注册用户，还有 {temp_members} 位用户没有注册语雀",{mobiles:n.mobiles,members:n.members,temp_members:n.temp_members})),setTimeout((function(){window.location.href=t.goto}),3e3)}else"error"===e.file.status&&r.a.error(e.file.response.message||"".concat(e.file.name," file upload failed."))}}})),l(this,"getBtnText",(function(){return n.btnText})),this.options=t,this.type=t.type,this.organization=t.organization,this.role=t.supportRoles&&t.supportRoles[0],this.target=t[this.type],this.enable=!1}var t,n,o;return t=e,o=[{key:"create",value:function(t){var n=new e(t);return n.check(),n.enable&&n.init(),n}}],(n=[{key:"init",value:function(){if("organization"===this.type){this.action="/api/organization_users/import?role=".concat(this.role,"&organization_id=").concat(this.organization.id);var e=this.role===i.a.ROLE.outsourcer?"external":"all";this.goto="/r/organizations/dashboard/members?role=".concat(e),this.btnText=this.role===i.a.ROLE.outsourcer?__("批量导入外部联系人"):__("批量导入空间成员")}}},{key:"check",value:function(){!window.appData.isPrivateCloud&&this.target&&this.target.enableAdvancedFeature&&(this.enable=!0)}}])&&c(t.prototype,n),o&&c(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();l(s,"id","import"),l(s,"title",__("导入")),t.a=s},1985:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),c=n(209),l=n(35),s=n(38);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(e){return"larkui-member-selector-container"+(e?"-".concat(e):"")};function p(e){var t=e.selectors,n=u(Object(r.useState)(e.defaultTabKey),2),o=n[0],i=n[1],d=u(Object(r.useState)(460),2),p=d[0],h=d[1],m=function(e){i(e.key)};Object(r.useEffect)((function(){h(e.getWidth(o)||460)}),[o]);return a.a.createElement(s.a,{wrapClassName:f(),visible:e.visible,width:p,title:a.a.createElement("div",{className:f("select-by")},a.a.createElement(l.a,{onSelect:m,selectedKeys:[o],mode:"horizontal"},t.map((function(e){return a.a.createElement(l.a.Item,{key:e.props.id},Object(c.a)("{title}添加",{title:e.props.title}))})))),footer:null,maskClosable:!1,onCancel:e.onCancel,onClose:e.onClose,destroyOnClose:!0},t.filter((function(e){return e.props.id===o}))[0])}p.defaultProps={selectors:[],getWidth:function(){},onCancel:function(){},onClose:function(){}},p.propTypes={selectors:i.a.arrayOf(i.a.node),getWidth:i.a.func,defaultTabKey:i.a.string,onCancel:i.a.func,onClose:i.a.func};var h=p,m=n(3092),g=n.n(m),v=n(69),y=n.n(v);function b(e,t){return!(!e||!t)&&(e.uid&&t.uid?e.uid===t.uid:e.login&&t.login?e.login===t.login:!(!t.provider_userid||!e.provider_userid)&&(e.provider_userid===t.provider_userid&&e.provider_type===t.provider_type))}n(2730);var k=n(2729).a,w=n(55),x=n(36),_=n(18),E=n(23),C=n(500),O=n.n(C),S=n(499),R=n.n(S),j=n(176),P=n(47);function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=function(e){return"larkui-member-selector-role"+(e?"-".concat(e):"")};function M(e){var t=e.roles,n=e.onChange,o=e.defaultRole||t[0],i=A(Object(r.useState)(o),2),c=i[0],s=i[1];if(c){var u=function(e){s(e),n(e)};return"radio"===e.type?a.a.createElement("div",{className:D("radio")},a.a.createElement(P.a.Group,{defaultValue:c.key,onChange:function(e){var n=e.target.value,r=t.find((function(e){return e.key===n}));u(r)}},t.map((function(e){var t=c.key===e.key?a.a.createElement("span",{className:D("checked")},a.a.createElement(R.a,null)):null;return a.a.createElement(P.a.Button,{value:e.key},t,e.label)})))):a.a.createElement(j.a,{trigger:["click"],overlayClassName:D(),overlay:a.a.createElement(l.a,{selectedKeys:["".concat(c.key)]},t.map((function(e){return a.a.createElement(l.a.Item,{key:e.key,onClick:function(){u(e)}},a.a.createElement("span",null,a.a.createElement("span",null,e.label)))})))},a.a.createElement("span",null,c.label," ",a.a.createElement(O.a,null)))}}M.propTypes={type:i.a.oneOf(["dropdown","radio"]),defaultRole:i.a.object,roles:i.a.array.isRequired,onChange:i.a.func.isRequired};var N=M,L=n(3095),I=n.n(L),B=n(37);function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var U=function(e){return"larkui-member-selector-user-search"+(e?"-".concat(e):"")},V=B.a.Option;var q=a.a.createElement("div",{className:U("notfound")},a.a.createElement(I.a,null),a.a.createElement("p",null,Object(c.a)("未搜索到相关结果")));function H(e){var t=e.users,n=function(e){var t=z(Object(r.useState)(!1),2),n=t[0],a=t[1],o=z(Object(r.useState)(!1),2),i=o[0],c=o[1],l=e.getUsers,s=e.onChange,u=Object(r.useRef)(null),d=y()((function(e){return a(!0),c(!1),l(e).then((function(t){if(a(!1),e&&!(t&&t.length>0))return c(!0),clearTimeout(u.current),u.current=setTimeout((function(){c(!1)}),3e3),t})).catch((function(){a(!1)}))}),300);return{state:{loading:n,fetchEnd:i},handleChange:function(e){s(e)},handleSearch:function(e){d(e)}}}(e),o=n.state,i=n.handleChange,c=n.handleSearch,l=Object(r.useRef)(null),s=e.notFoundContent||q;return Object(r.useEffect)((function(){e.getRef&&e.getRef(l)}),[]),a.a.createElement("div",{className:U()},a.a.createElement(B.a,{ref:l,className:U("container"),value:e.value,showSearch:!0,autoFocus:!0,mode:"multiple",placeholder:e.placeholder,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,notFoundContent:!o.loading&&o.fetchEnd?s:null,onSearch:c,onChange:i,optionLabelProp:"label",getPopupContainer:function(e){return e.parentNode},loading:o.loading},t.map((function(t){var n=t.dep?U("isdep"):null;return a.a.createElement(V,{key:t.id||t.uid,value:t[e.keyField],label:t.name,className:U("menu-item")},a.a.createElement("span",{className:"".concat(U("user")," ").concat(n)},a.a.createElement(k,{className:U("icon"),src:t.avatar_url,name:t.name,size:32}),a.a.createElement("span",{className:U("title-wrap")},a.a.createElement("span",{className:U("title")},a.a.createElement("span",{className:U("name")},t.name),a.a.createElement("span",{className:U("login")},t.login)),t.dep&&a.a.createElement("span",{className:U("dep")},t.dep))))}))))}H.defaultProps={keyField:"login"},H.propTypes={keyField:i.a.string,value:i.a.array.isRequired,users:i.a.array.isRequired,getUsers:i.a.func.isRequired,onChange:i.a.func.isRequired,getRef:i.a.func,placeholder:i.a.string,notFoundContent:i.a.node};var W=H;function Y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=$(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function G(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function K(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){X(o,r,a,i,c,"next",e)}function c(e){X(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||$(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){if(e){if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var J=function(e){return"larkui-member-selector-search"+(e?"-".concat(e):"")};function ee(e){return a.a.createElement("span",{className:e.className},Object(c.a)("已选择 {count} 人",{count:e.userCount}))}function te(e){var t;return t=e.roles&&1===e.roles.length?a.a.createElement("span",{className:J("role-text")},e.roles[0].label):a.a.createElement(N,{roles:e.roles,defaultRole:e.defaultRole,onChange:e.onRoleChange}),a.a.createElement("span",{className:e.className},a.a.createElement("span",null,Object(c.a)("添加为：")),t)}function ne(e){var t,n,o=e.selectors,i=1===o.length,l=i?0:null,s=Z(Object(r.useState)(l),2),u=s[0],d=s[1],f=function(e){i||d(e)};return a.a.createElement("div",{className:J("quick-selector-container")},null!=u||i?(t=o[u],n=a.a.cloneElement(t,{className:J("quick-selector-main-list"),selected:e.selected,onSelect:e.onSelect,onDeselect:e.onDeselect}),a.a.createElement("div",null,a.a.createElement("h2",{className:J("quick-selector-subtitle")},!i&&a.a.createElement("span",{className:J("quick-selector-subicon"),onClick:function(){return f(null)}},a.a.createElement(g.a,null)),a.a.createElement("span",{onClick:function(){return f(null)}},Object(c.a)("从{title}添加",{title:t.props.title}))),a.a.createElement("div",{className:J("quick-selector-main")},n))):a.a.createElement("div",{className:J("quick-selector-choose")},a.a.createElement("h2",{className:J("quick-selector-title")},Object(c.a)("快捷添加")),a.a.createElement("div",{className:J("quick-selector-list")},o.map((function(e,t){return a.a.createElement(w.a,{key:e.props.id,type:"flex",justify:"start",align:"middle",className:J("quick-selector-item"),onClick:function(){return f(t)}},a.a.createElement(x.a,null,e.props.getIconUrl&&a.a.createElement(k,{className:J("quick-selector-icon"),src:e.props.getIconUrl(),size:18})),a.a.createElement(x.a,null,a.a.createElement("span",{className:J("quick-selector-text")},Object(c.a)("从{title}添加",{title:e.props.title}))))})))))}function re(e){var t=e.roles,n=e.searchUser,a=e.checkValid,o=e.getUserCount,i=e.disableMeta,c=e.onSubmit,l=Z(Object(r.useState)([]),2),s=l[0],u=l[1],d=Z(Object(r.useState)([]),2),f=d[0],p=d[1],h=Z(Object(r.useState)(0),2),m=h[0],g=h[1],v=Object(r.useRef)(t&&t[0]),k=Object(r.useRef)(null),w=Object(r.useRef)([]),x=function(){var e=K(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u([]),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,n(t);case 5:return r=(r=e.sent).filter((function(e){return!f.some((function(t){return b(t,e)}))})),u(r),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(e){return e.filter((function(e){return e._valid}))},C=y()((function(e){E.a.warn(e)}),300),O=function(e){return e.map((function(e){if("_valid"in e)return e;var t=a(e);return t&&"success"===t.status?e._valid=!0:(e._valid=!1,C(t.message)),e}))},S=function(e){var t=O(e);p(t),i||g(o(_(t)))},R=function(){var e=K(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c(_(f),v.current);case 3:(t=e.sent)&&("success"===t.status?(E.a.success(t.message),setTimeout((function(){window.location.reload()}),2e3)):E.a.error(t.message)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),E.a.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return{state:{users:s,selected:f,userCount:m},getUsers:x,getRef:function(e){k.current=e.current},disableSubmit:function(){return 0===f.length},handleSelect:function(e){if(k.current){Array.isArray(e)||(e=[e]);var t,n=G(w.current),r=G(f),a=Y(e);try{var o=function(){var e=t.value;n.every((function(t){return t.uid!==e.uid}))&&n.push(e),r.every((function(t){return t.uid!==e.uid}))&&r.push(e)};for(a.s();!(t=a.n()).done;)o()}catch(e){a.e(e)}finally{a.f()}u(n),w.current=n,S(r)}},handleDeselect:function(e){if(k.current){Array.isArray(e)||(e=[e]);var t,n=G(f),r=Y(e);try{var a=function(){var e=t.value,r=n.findIndex((function(t){return t.uid===e.uid}));r>-1&&n.splice(r,1)};for(r.s();!(t=r.n()).done;)a()}catch(e){r.e(e)}finally{r.f()}S(n)}},handleChange:function(e){var t=O(function(e){return e.map((function(e){return[].concat(G(s),G(f)).find((function(t){return t.uid===e}))}))}(e)),n=t.filter((function(e){return e._valid}));n.length===t.length?(p(t),i||g(o(_(t))),setTimeout((function(){u([])}),300)):p(n)},handleRoleChange:function(e){v.current=e},handleSubmit:R,handleFocus:function(){k.current.focus()}}}function ae(e){var t=re(e),n=t.state,r=t.getRef,o=t.getUsers,i=t.disableSubmit,l=t.handleSelect,s=t.handleDeselect,u=t.handleChange,d=t.handleRoleChange,f=t.handleSubmit,p=t.handleFocus;return a.a.createElement("div",{className:J()},a.a.createElement(w.a,null,a.a.createElement(x.a,{span:e.quickSelectors&&e.quickSelectors.length>0?12:24,className:J("selector"),onClick:p},a.a.createElement("div",{className:J("content")},a.a.createElement(W,{keyField:"uid",getRef:r,value:n.selected.filter((function(e){return e._valid})).map((function(e){return e.uid})),users:n.users,getUsers:o,onChange:u,notFoundContent:e.notFoundContent,placeholder:Object(c.a)("输入用户名、id 搜索")})),a.a.createElement("div",{className:J("footer")},e.disableMeta?null:a.a.createElement(ee,{className:J("meta"),userCount:n.userCount}),e.roles&&e.roles.length>0?a.a.createElement(te,{className:J("role"),defaultRole:e.roles[0],roles:e.roles,onRoleChange:d}):null,a.a.createElement("div",{className:J("footer-btn")},a.a.createElement(_.a,{type:"primary",onClick:f,disabled:i()},Object(c.a)("添加"))))),e.quickSelectors&&e.quickSelectors.length>0?a.a.createElement(x.a,{span:12},a.a.createElement(ne,{selectors:e.quickSelectors,selected:n.selected,onSelect:l,onDeselect:s})):null))}ae.defaultProps={id:"search",title:"搜索",onSubmit:function(){}},ae.propTypes={searchUser:i.a.func.isRequired,notFoundContent:i.a.node,onSubmit:i.a.func};var oe=ae,ie=n(3098),ce=n.n(ie),le=n(243),se=n.n(le),ue=n(25),de=n(74);function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var he=function(e){return"larkui-member-selector-invite"+(e?"-".concat(e):"")};function me(e){var t,n=e.tipContent,o=function(e){var t=Object(c.a)("复制链接"),n=Object(c.a)("已复制"),a=function(t){if(t)return e.getJoinUrl(t)},o=e.roles[0],i=fe(Object(r.useState)(e.joinToken),2),l=i[0],s=i[1],u=fe(Object(r.useState)(!e.joinToken||e.joinToken.approve),2),d=u[0],f=u[1],p=fe(Object(r.useState)(t),2),h=p[0],m=p[1],g=fe(Object(r.useState)(a(e.joinToken)),2),v=g[0],y=g[1],b=fe(Object(r.useState)(!1),2),k=b[0],w=b[1],x=Object(r.useRef)(null),_=fe(Object(r.useState)(o),2),C=_[0],O=_[1],S=Object(r.useRef)({}),R=function(t){return e.getToken({checked:d,force:t,role:C.value}).then((function(e){return s(e),f(!!e.approve),y(a(e)),S.current[e.role]=e,e}))};Object(r.useEffect)((function(){e.joinToken?S.current[e.joinToken.role]=e.joinToken:R()}),[]);var j=function(t){m(n),se()(e.getCopyText(t||v,C)),E.a.success(Object(c.a)("复制成功，可粘贴到钉钉或微信群里邀请成员")),clearTimeout(x.current),x.current=setTimeout((function(){m(n)}),1500)};return{state:{checked:d,copyText:h,joinUrl:v,loading:k,joinToken:l,role:C},defaultRole:o,onCopyUrl:j,onRefreshLink:function(){return w(!0),R(!0).then((function(e){w(!1),E.a.success(Object(c.a)("重置链接成功")),h===n&&setTimeout((function(){j(a(e))}),200)})).catch((function(){w(!1)}))},onCheckChange:function(t){e.updateToken({checked:t.target.checked,role:C.value}).then((function(e){E.a.success(Object(c.a)("更新审批状态成功")),f(t.target.checked);var n=S.current[C.value];n.approve=!!t.target.checked,s(n),S.current[C.value]=n}))},onRoleChange:function(n){O(n);var r,o=S.current[n];if(o)return s(r=o),y(a(r)),m(t),void f(!!r.approve);e.getToken({role:n.value}).then((function(e){s(e),y(a(e)),m(t),f(!!e.approve),S.current[e.role]=e}))}}}(e),i=o.state,l=o.onCheckChange,s=o.onRoleChange,u=o.onCopyUrl,d=o.onRefreshLink,f=o.defaultRole;return i.joinToken&&(t=1===e.roles.length?a.a.createElement("span",{className:he("role")},e.roles[0].label):a.a.createElement(N,{type:e.roleSelectorType,joinToken:i.joinToken,roles:e.roles,defaultRole:f,onChange:s})),a.a.createElement("div",{className:he()},a.a.createElement("div",{className:he("title")},Object(c.a)("通过链接邀请成为"),t,n),a.a.createElement(ue.a.Group,{compact:!0},a.a.createElement(ue.a,{style:{width:"80%"},disabled:!0,value:i.joinUrl,readOnly:!0}),a.a.createElement(_.a,{type:"primary",style:{width:"20%"},onClick:function(){return u()}},i.copyText)),a.a.createElement(w.a,{className:he("footer"),type:"flex",justify:"space-between"},a.a.createElement(x.a,null,a.a.createElement(de.a,{checked:i.checked,onChange:l},Object(c.a)("提交申请后需审批确认"))),a.a.createElement(x.a,null,a.a.createElement("a",{onClick:d,className:he("reset-link")},a.a.createElement(ce.a,{spin:i.loading,className:he("reset-icon")}),Object(c.a)("重置链接")))))}me.defaultTypes={roleSelectorType:"dropdown"},me.propTypes={roleSelectorType:i.a.oneOf(["dropdown","radio"]),tipContent:i.a.node,getJoinUrl:i.a.func,joinToken:i.a.object,getToken:i.a.func,updateToken:i.a.func,roles:i.a.array,getCopyText:i.a.func};var ge=me,ve=n(339),ye=n(295),be=n(98);function ke(e){return function(e){if(Array.isArray(e))return Ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function xe(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){we(o,r,a,i,c,"next",e)}function c(e){we(o,r,a,i,c,"throw",e)}i(void 0)}))}}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||Ee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){if(e){if("string"==typeof e)return Ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ce(e,t):void 0}}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Oe=function(e){return"larkui-member-selector-list"+(e?"-".concat(e):"")};function Se(e){return a.a.createElement("div",{className:Oe("breadcrumb")},a.a.createElement(ve.a,null,!e.disableNavTop&&a.a.createElement(ve.a.Item,{onClick:function(t){e.disabled||e.getData({getTop:!0})}},"全部"),e.navs&&e.navs.map((function(t,n){return a.a.createElement(ve.a.Item,{key:t.id,onClick:function(n){return function(t,n){e.disabled||e.getData(n)}(0,t)},disabled:e.disabled},t.name)}))))}function Re(e){return a.a.createElement("span",{className:"".concat(Oe("item-icon")," icon-organization"),onClick:function(t){e.disabled||e.getData(e.sub)}},a.a.createElement("span",{className:"".concat(Oe("item-larkicon")," larkicon-subordinate")}),a.a.createElement("span",null," ",Object(c.a)("下级")))}function je(e){var t=e.item;return t.isTop?a.a.createElement("div",{className:Oe("item"),onClick:function(){return e.getData(t)}},a.a.createElement("span",{className:"".concat(Oe("larkicon")," larkicon-").concat(t.iconName)}),a.a.createElement("span",{className:Oe("item-name")},t.name)):a.a.createElement("div",{className:Oe("item")},a.a.createElement(de.a,{className:Oe("checked"),value:t.uid,checked:t.checked||e.disabled,onChange:function(n){n.target.checked?e.onSelect(n,t):e.onDeselect(t)},disabled:t.disabled||e.disabled},t.loading?a.a.createElement(be.a,null):a.a.createElement("span",{className:Oe("user")},t.avatar_url&&a.a.createElement(k,{className:Oe("icon"),src:t.avatar_url,size:24}),a.a.createElement("span",null,a.a.createElement("span",{className:Oe("title")},a.a.createElement("span",{className:Oe("name")},t.name),a.a.createElement("span",{className:Oe("login")},t.login))))),t.sub&&a.a.createElement("div",{className:Oe("item-action")},a.a.createElement(Re,{sub:t.sub,getData:e.getData,disabled:e.disabledSub})))}function Pe(e){var t=_e(Object(r.useState)(!1),2),n=t[0],a=t[1],o=_e(Object(r.useState)([]),2),i=o[0],c=o[1],l=_e(Object(r.useState)([]),2),s=l[0],u=l[1],d=_e(Object(r.useState)(!1),2),f=d[0],p=d[1],h=_e(Object(r.useState)(e.enableSelectNav),1)[0],m=_e(Object(r.useState)(null),2),g=m[0],v=m[1],y=_e(Object(r.useState)(!1),2),b=y[0],k=y[1],w=_e(Object(r.useState)(!1),2),x=w[0],_=w[1],E=_e(Object(r.useState)(!1),2),C=E[0],O=E[1],S=function(t,n,r){var a=t.reduce((function(e,t){return e[t.uid]=t,e}),{});if(e.enableDepthAll&&r){var o,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ee(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(r);try{for(i.s();!(o=i.n()).done;){var l=o.value;if(a[l.uid])return c(n.map((function(e){return e.checked=!0,e.disabled=!0,e}))),k(!0),void _(!0)}}catch(e){i.e(e)}finally{i.f()}_(!1)}var s=!1,u=!1,d=n.map((function(e){var t=a[e.uid];return e.checked=t&&t._valid,t?u=!0:s=!0,e}));c(d),v(!(!u||!s)),k(!(!u||s))};Object(r.useEffect)((function(){S(e.selected,i,s)}),[e.selected]);var R=function(t){t.map((function(t){var n=e.checkValid(t);return n&&"success"===n.status?t._valid=!0:t._valid=!1,t}))},j=function(t){return xe(regeneratorRuntime.mark((function n(){var r,o,i,l,s=arguments;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(a(!0),r=s.length,o=new Array(r),i=0;i<r;i++)o[i]=s[i];return o&&o[0]&&o[0].getTop?p(!1):p(!0),n.next=5,t.apply(void 0,o);case 5:l=n.sent,R(l.users),c(l.users),u(l.navs),S(e.selected,l.users,l.navs),a(!1);case 11:case"end":return n.stop()}}),n)})))},P=j(e.getData),A=j(e.getInitData);Object(r.useEffect)((function(){A()}),[]);return{state:{list:i,navs:s,showAll:f,showNavSelect:h,loading:n,allChecked:b,allIndeterminate:g,allDisabled:x,navSelectChecked:C},getData:P,handleSelect:function(t,n){t.target.checked&&e.enableDepthAll&&n.sub?(c(ke(i).map((function(e){return e.id===n.id?e.loading=!0:e.loading=!1,e}))),e.getData(n.sub).then((function(t){c(ke(i).map((function(e){return e.loading=!1,e}))),n.name=t.name,e.onSelect(n)}))):e.onSelect(n)},handleAllSelect:function(t){t.target.checked?e.onSelect(i):e.onDeselect(i)},handleRoleChange:function(e){P({role:e.value})},handleNavSelect:function(t,n){t.target.checked?(O(!0),e.onSelect(n)):(O(!1),e.onDeselect(n))}}}function Ae(e){var t=Pe(e),n=t.state,r=t.handleAllSelect,o=t.handleSelect,i=t.handleNavSelect,l=t.handleRoleChange,s=t.getData,u=e.getFilterRoles&&e.getFilterRoles(),d=n.navs&&n.navs[n.navs.length-1];return a.a.createElement("div",{className:"".concat(e.className," ").concat(Oe())},u&&a.a.createElement("div",{className:Oe("role-filter")},a.a.createElement(N,{roles:u,onChange:l})),n.navs&&n.navs.length?a.a.createElement(Se,{getData:s,navs:n.navs,disabled:n.navSelectChecked,disableNavTop:e.disableNavTop}):null,n.showNavSelect&&d&&a.a.createElement("div",{className:Oe("select-dep")},a.a.createElement(de.a,{onChange:function(e){return i(e,d)}},Object(c.a)("选择{dep}所有成员",{dep:d.name}))),n.showAll&&!n.loading?a.a.createElement("div",{className:Oe("select-all")},a.a.createElement(de.a,{onChange:function(e){return r(e)},indeterminate:n.allIndeterminate,checked:n.allChecked||n.navSelectChecked,disabled:n.allDisabled||n.navSelectChecked},Object(c.a)("全选"))):null,a.a.createElement(ye.a,{className:Oe("list"),justify:"block",dataSource:n.list,loading:n.loading,renderItem:function(t){return a.a.createElement(je,{onSelect:o,onDeselect:e.onDeselect,item:t,getData:s,disabled:n.navSelectChecked||!1===t._valid,disabledSub:n.navSelectChecked})}}))}Ae.defaultProps={disableNavTop:!1,enableDepthAll:!1,enableSelectNav:!1},Ae.propTypes={id:i.a.number,getData:i.a.func,onSelect:i.a.func,onDeselect:i.a.func,checkValid:i.a.func,disableNavTop:i.a.bool,enableDepthAll:i.a.bool,enableSelectNav:i.a.bool};var Te=Ae,De=n(3101),Me=n.n(De),Ne=n(253),Le=function(e){return"larkui-member-selector-import"+(e?"-".concat(e):"")};function Ie(e){var t=e.getUploadProps(),n=e.getBtnText();return a.a.createElement("div",{className:Le()},a.a.createElement("p",{className:Le("desc")},a.a.createElement("span",null,a.a.createElement("a",{href:e.templateUrl},Object(c.a)("下载模板文件（import_users.txt）")),Object(c.a)("填写人员信息，")),a.a.createElement("span",null,n)),a.a.createElement("div",null,a.a.createElement(Ne.a,t,a.a.createElement(_.a,null,a.a.createElement(Me.a,null)," ",Object(c.a)("选择文件并提交")))))}Ie.defaultProps={templateUrl:"https://cdn.nlark.com/import_users.txt"},Ie.propTypes={role:i.a.number.isRequired,getUploadProps:i.a.func.isRequired,getBtnText:i.a.func.isRequired,templateUrl:i.a.string};var Be=Ie;function ze(e){return a.a.createElement(h,{selectors:e.selectors,getWidth:e.getWidth,defaultTabKey:e.defaultTabKey,onCancel:e.onCancel,onClose:e.onClose,visible:e.visible})}ze.ListSelector=Te,ze.SearchSelector=oe,ze.InviteSelector=ge,ze.ImportSelector=Be,ze.propTypes={selectors:i.a.array,defaultTabKey:i.a.string,getWidth:i.a.func,onCancel:i.a.func,onClose:i.a.func,visible:i.a.bool};t.a=ze},1986:function(e,t,n){"use strict";var r=n(41),a=n.n(r),o=n(2711),i=n.n(o),c=n(269),l=n(222),s=n(31),u=n(590);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){g(o,r,a,i,c,"next",e)}function c(e){g(o,r,a,i,c,"throw",e)}i(void 0)}))}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var a=_(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&b(e,t)}(u,e);var t,n,r,o=k(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),E(x(t=o.call(this,e)),"getIconUrl",(function(){var e=window.appData.organization;return e&&e.logo})),E(x(t),"enableDepthAll",(function(){return!0})),E(x(t),"getInitData",v(regeneratorRuntime.mark((function e(){var n,r,a,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.appData.organization,e.next=3,s.a.mine.department({self:!0},{useOriginResp:!0});case 3:if(r=e.sent,a={id:0,name:n.name,type:"Department",parents:[],getTop:!0},r.length)for((a=r[0]).parents=r[0].dept_full_path,o=a.parents.findIndex((function(e){return e.id===a.id})),o>=0&&a.parents.splice(o,1),i=0;i<a.parents.length;i++)a.parents[i].parents=a.parents.slice(0,i);return e.next=8,t.getData(a);case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})))),E(x(t),"fetchCache",function(){var e=v(regeneratorRuntime.mark((function e(n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.cacheFetch[n]){e.next=5;break}return e.next=4,r();case 4:t.cacheFetch[n]=e.sent;case 5:return e.abrupt("return",a()(t.cacheFetch[n]));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),E(x(t),"getDepUsers",function(){var e=v(regeneratorRuntime.mark((function e(n){var r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.id,a=n.organization_id,!(o=t.cacheDeps[r])){e.next=4;break}return e.abrupt("return",o);case 4:return e.next=6,s.a.departmentUser.find({department_id:r,organization_id:a,onlyMember:1});case 6:return i=e.sent,t.cacheDeps[r]=i.data,e.abrupt("return",i.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E(x(t),"getData",v(regeneratorRuntime.mark((function e(){var n,r,a,o,i,c,l,u,d,p=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.length>0&&void 0!==p[0]?p[0]:{},r=m({},n),a=n.id,n.getTop&&(a=0),!t.cacheDeps[a]){e.next=6;break}return e.abrupt("return",t.cacheDeps[a]);case 6:return o=window.appData.organization,i=void 0===o?{}:o,e.next=9,s.a.departments.find({parent_id:a,depth:1,withMemberCount:1});case 9:if(c=e.sent,l=n.users){e.next=15;break}return e.next=14,s.a.departmentUser.find({department_id:a,organization_id:i.id,onlyMember:1});case 14:l=e.sent;case 15:return e.next=17,Promise.all(c.map(function(){var e=v(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.type="Department",t.parents=n.parents.concat(n),void 0!==t.member_count&&(t._name=t.name,t.name="".concat(t.name),t.login="(".concat(__("{num} 人",{num:t.member_count}),")"));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 17:u=f(l);try{for(u.s();!(d=u.n()).done;)d.value.type="User"}catch(e){u.e(e)}finally{u.f()}return r.users=c.concat(l),r.parents=n.parents.concat(n),r._name||void 0===r.member_count||(r._name=r.name,r.name="".concat(r.name,"(").concat(__("{num} 人",{num:r.member_count}),")")),((r=t.serialize(r)).member_count||0===a)&&(t.cacheDeps[a]=r),e.abrupt("return",r);case 25:case"end":return e.stop()}}),e)})))),E(x(t),"adpatUIListData",(function(e){return e.map((function(e){t.setUid(e);var n=t.isUser(e)&&void 0!==e.status&&e.status!==c.STATUS.joined;t.disableDepSelect&&t.isDepartment(e)&&(n=!0);var r={uid:t.isDepartment(e)?"nav_".concat(e.id):e.uid,id:e.id,avatar_url:t.isUser(e)?e.avatar||"//gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png?x-oss-process=image%2Fresize%2Cm_fill%2Cw_64%2Ch_64%2Fformat%2Cpng":"//gw.alipayobjects.com/zos/bmw-prod/50ed3df8-e735-4a0a-893a-0d66860fb738.svg",name:e.name,_name:e._name,user_id:e.user_id,login:e.login,type:e.type||"User",iconName:e.iconName,isTop:e.isTop,disabled:n,parents:e.parents,_login:e.login,users:e.users,organization_id:e.organization_id,member_count:e.member_count};return!e.isTop&&t.isDepartment(e)?r.sub=e:e.manageDepartment&&(r.sub=e.manageDepartment),r}))})),E(x(t),"adpatUINavData",(function(e){if(e){var n=[];if(Array.isArray(e))n=e;else{n.push(e);!function e(r){if(r.parentDepId){var a=t.cacheParent[r.parentDepId];if(!a)return;Array.isArray(a)?n=a.concat(n):(n.unshift(a),e(a))}}(e)}return n.map((function(e){return{uid:"nav_".concat(e.id),id:e.id,name:e._name||e.name,type:"Department",parents:e.parents}}))}})),E(x(t),"getUserCount",(function(e){var n,r=0,a=f(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;t.isDepartment(o)?o.member_count&&(r+=o.member_count):r+=1}}catch(e){a.e(e)}finally{a.f()}return r})),E(x(t),"getRealUsers",function(){var e=v(regeneratorRuntime.mark((function e(n){var r,a,o,c,l,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=f(n),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=22;break}if(c=o.value,!t.isDepartment(c)){e.next=19;break}if(!c.depthUsers&&!c.users){e.next=11;break}r=r.concat(c.depthUsers||c.users),e.next=17;break;case 11:return l=c.id,u=c.organization_id,e.next=14,s.a.departmentUser.getAllSubDepartmentUsers({department_id:l,organization_id:u});case 14:d=e.sent,t.setUid(d),r=r.concat(d);case 17:e.next=20;break;case 19:r.push(c);case 20:e.next=4;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(2),a.e(e.t0);case 27:return e.prev=27,a.f(),e.finish(27);case 30:return e.abrupt("return",i()(r,"uid"));case 31:case"end":return e.stop()}}),e,null,[[2,24,27,30]])})));return function(t){return e.apply(this,arguments)}}()),t.cacheDeps={},t.cacheParent={},t.cacheFetch={},t.cacheDepthRes={},t.enable=!1,t.disableDepSelect=e.disableDepSelect,t}return t=u,r=[{key:"create",value:function(e){var t=new u(e);return t.check(),t}}],(n=[{key:"check",value:function(){l.a.enableContacts()&&(this.enable=!0)}}])&&y(t.prototype,n),r&&y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(u.a);E(C,"id","yuque_contacts"),E(C,"title",__("通讯录"));t.a=C},1990:function(e,t,n){"use strict";var r=n(851);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,l,"next",e)}function l(e){o(i,r,a,c,l,"throw",e)}c(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var a=f(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&s(e,t)}(p,e);var t,n,a,o,d,f=u(p);function p(){return c(this,p),f.apply(this,arguments)}return t=p,n=[{key:"init",value:function(e){var t=e.content;this.setContent(t)}},{key:"getDefaultContent",value:function(){return{shows:[r.c.getTemplate().title]}}},{key:"setContent",value:function(e){var t;t=e&&"lakeshow"===e.format?e:e&&"string"==typeof e?JSON.parse(e):this.getDefaultContent(),this.engine.setValue(t)}},{key:"getValue",value:function(){return JSON.stringify(this.engine.getValue())}},{key:"getPureContent",value:function(){return JSON.stringify(this.engine.getValue())}},{key:"getEditorContent",value:function(e){return{content:this.getValue(),html:null,premium:null,premiumHtml:null}}},{key:"getThumbnail",value:(d=i(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.engine.getValue(),e.abrupt("return",t.shows[0].thumb);case 2:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"onBeforeSave",value:(o=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.engine.onBeforeSave();case 2:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})}],n&&l(t.prototype,n),a&&l(t,a),Object.defineProperty(t,"prototype",{writable:!1}),p}(n(1558).a);p.contentToShow=function(e){try{return JSON.parse(e)}catch(e){return{}}},t.a=p},2068:function(e,t,n){"use strict";n.r(t);var r=n(27),a=n.n(r),o="undefined"!=typeof window&&window.__?window.__:function(e){return e},i={format:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{disableYear:!1,onlyDate:!1},n=a()(e);if(t.full)return n.format("YYYY-MM-DD HH:mm:ss");var r=t.base?a()(t.base):a()(),i=n.isSame(r,"year"),c=n.isSame(r,"day"),l=n.isSame(r.add(-1,"day"),"day"),s="MM-DD HH:mm",u="";return c?(s="HH:mm",u="".concat(o("今天")," ")):l?(s="HH:mm",u="".concat(o("昨天")," ")):s=i||t.disableYear?"MM-DD HH:mm":"YYYY-MM-DD HH:mm",t.onlyDate?u||n.format(s.split(" ")[0]):t.onlyDateWhenNotInSameYear?i?"".concat(u).concat(n.format(s)):"".concat(u).concat(n.format(s.split(" ")[0])):"".concat(u).concat(n.format(s))}};t.default=i},2077:function(e,t,n){},2080:function(e,t,n){e.exports=function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return l(e)||s(e)||u(e)||f()}function l(e){if(Array.isArray(e))return d(e)}function s(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function u(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var p="undefined"!=typeof window&&void 0!==window.document,h=p?window:{},m=!(!p||!h.document.documentElement)&&"ontouchstart"in h.document.documentElement,g=!!p&&"PointerEvent"in h,v="cropper",y="all",b="crop",k="move",w="zoom",x="e",_="w",E="s",C="n",O="ne",S="nw",R="se",j="sw",P="".concat(v,"-crop"),A="".concat(v,"-disabled"),T="".concat(v,"-hidden"),D="".concat(v,"-hide"),M="".concat(v,"-invisible"),N="".concat(v,"-modal"),L="".concat(v,"-move"),I="".concat(v,"Action"),B="".concat(v,"Preview"),z="crop",F="move",U="none",V="crop",q="cropend",H="cropmove",W="cropstart",Y="dblclick",G=m?"touchstart":"mousedown",X=m?"touchmove":"mousemove",K=m?"touchend touchcancel":"mouseup",Z=g?"pointerdown":G,$=g?"pointermove":X,Q=g?"pointerup pointercancel":K,J="ready",ee="resize",te="wheel",ne="zoom",re="image/jpeg",ae=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,oe=/^data:/,ie=/^data:image\/jpeg;base64,/,ce=/^img|canvas$/i,le=200,se=100,ue={viewMode:0,dragMode:z,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:le,minContainerHeight:se,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},de='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',fe=Number.isNaN||h.isNaN;function pe(e){return"number"==typeof e&&!fe(e)}var he=function(e){return e>0&&e<1/0};function me(e){return void 0===e}function ge(e){return"object"===n(e)&&null!==e}var ve=Object.prototype.hasOwnProperty;function ye(e){if(!ge(e))return!1;try{var t=e.constructor,n=t.prototype;return t&&n&&ve.call(n,"isPrototypeOf")}catch(e){return!1}}function be(e){return"function"==typeof e}var ke=Array.prototype.slice;function we(e){return Array.from?Array.from(e):ke.call(e)}function xe(e,t){return e&&be(t)&&(Array.isArray(e)||pe(e.length)?we(e).forEach((function(n,r){t.call(e,n,r,e)})):ge(e)&&Object.keys(e).forEach((function(n){t.call(e,e[n],n,e)}))),e}var _e=Object.assign||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ge(e)&&n.length>0&&n.forEach((function(t){ge(t)&&Object.keys(t).forEach((function(n){e[n]=t[n]}))})),e},Ee=/\.\d*(?:0|9){12}\d*$/;function Ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return Ee.test(e)?Math.round(e*t)/t:e}var Oe=/^width|height|left|top|marginLeft|marginTop$/;function Se(e,t){var n=e.style;xe(t,(function(e,t){Oe.test(t)&&pe(e)&&(e="".concat(e,"px")),n[t]=e}))}function Re(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function je(e,t){if(t)if(pe(e.length))xe(e,(function(e){je(e,t)}));else if(e.classList)e.classList.add(t);else{var n=e.className.trim();n?n.indexOf(t)<0&&(e.className="".concat(n," ").concat(t)):e.className=t}}function Pe(e,t){t&&(pe(e.length)?xe(e,(function(e){Pe(e,t)})):e.classList?e.classList.remove(t):e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,"")))}function Ae(e,t,n){t&&(pe(e.length)?xe(e,(function(e){Ae(e,t,n)})):n?je(e,t):Pe(e,t))}var Te=/([a-z\d])([A-Z])/g;function De(e){return e.replace(Te,"$1-$2").toLowerCase()}function Me(e,t){return ge(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(De(t)))}function Ne(e,t,n){ge(n)?e[t]=n:e.dataset?e.dataset[t]=n:e.setAttribute("data-".concat(De(t)),n)}function Le(e,t){if(ge(e[t]))try{delete e[t]}catch(n){e[t]=void 0}else if(e.dataset)try{delete e.dataset[t]}catch(n){e.dataset[t]=void 0}else e.removeAttribute("data-".concat(De(t)))}var Ie=/\s\s*/,Be=function(){var e=!1;if(p){var t=!1,n=function(){},r=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(e){t=e}});h.addEventListener("test",n,r),h.removeEventListener("test",n,r)}return e}();function ze(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=n;t.trim().split(Ie).forEach((function(t){if(!Be){var o=e.listeners;o&&o[t]&&o[t][n]&&(a=o[t][n],delete o[t][n],0===Object.keys(o[t]).length&&delete o[t],0===Object.keys(o).length&&delete e.listeners)}e.removeEventListener(t,a,r)}))}function Fe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=n;t.trim().split(Ie).forEach((function(t){if(r.once&&!Be){var o=e.listeners,i=void 0===o?{}:o;a=function(){delete i[t][n],e.removeEventListener(t,a,r);for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];n.apply(e,c)},i[t]||(i[t]={}),i[t][n]&&e.removeEventListener(t,i[t][n],r),i[t][n]=a,e.listeners=i}e.addEventListener(t,a,r)}))}function Ue(e,t,n){var r;return be(Event)&&be(CustomEvent)?r=new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(r)}function Ve(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var qe=h.location,He=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function We(e){var t=e.match(He);return null!==t&&(t[1]!==qe.protocol||t[2]!==qe.hostname||t[3]!==qe.port)}function Ye(e){var t="timestamp=".concat((new Date).getTime());return e+(-1===e.indexOf("?")?"?":"&")+t}function Ge(e){var t=e.rotate,n=e.scaleX,r=e.scaleY,a=e.translateX,o=e.translateY,i=[];pe(a)&&0!==a&&i.push("translateX(".concat(a,"px)")),pe(o)&&0!==o&&i.push("translateY(".concat(o,"px)")),pe(t)&&0!==t&&i.push("rotate(".concat(t,"deg)")),pe(n)&&1!==n&&i.push("scaleX(".concat(n,")")),pe(r)&&1!==r&&i.push("scaleY(".concat(r,")"));var c=i.length?i.join(" "):"none";return{WebkitTransform:c,msTransform:c,transform:c}}function Xe(e){var n=t({},e),r=0;return xe(e,(function(e,t){delete n[t],xe(n,(function(t){var n=Math.abs(e.startX-t.startX),a=Math.abs(e.startY-t.startY),o=Math.abs(e.endX-t.endX),i=Math.abs(e.endY-t.endY),c=Math.sqrt(n*n+a*a),l=(Math.sqrt(o*o+i*i)-c)/c;Math.abs(l)>Math.abs(r)&&(r=l)}))})),r}function Ke(e,n){var r=e.pageX,a=e.pageY,o={endX:r,endY:a};return n?o:t({startX:r,startY:a},o)}function Ze(e){var t=0,n=0,r=0;return xe(e,(function(e){var a=e.startX,o=e.startY;t+=a,n+=o,r+=1})),{pageX:t/=r,pageY:n/=r}}function $e(e){var t=e.aspectRatio,n=e.height,r=e.width,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",o=he(r),i=he(n);if(o&&i){var c=n*t;"contain"===a&&c>r||"cover"===a&&c<r?n=r/t:r=n*t}else o?n=r/t:i&&(r=n*t);return{width:r,height:n}}function Qe(e){var t=e.width,n=e.height,r=e.degree;if(90==(r=Math.abs(r)%180))return{width:n,height:t};var a=r%90*Math.PI/180,o=Math.sin(a),i=Math.cos(a),c=t*i+n*o,l=t*o+n*i;return r>90?{width:l,height:c}:{width:c,height:l}}function Je(e,t,n,r){var a=t.aspectRatio,o=t.naturalWidth,i=t.naturalHeight,l=t.rotate,s=void 0===l?0:l,u=t.scaleX,d=void 0===u?1:u,f=t.scaleY,p=void 0===f?1:f,h=n.aspectRatio,m=n.naturalWidth,g=n.naturalHeight,v=r.fillColor,y=void 0===v?"transparent":v,b=r.imageSmoothingEnabled,k=void 0===b||b,w=r.imageSmoothingQuality,x=void 0===w?"low":w,_=r.maxWidth,E=void 0===_?1/0:_,C=r.maxHeight,O=void 0===C?1/0:C,S=r.minWidth,R=void 0===S?0:S,j=r.minHeight,P=void 0===j?0:j,A=document.createElement("canvas"),T=A.getContext("2d"),D=$e({aspectRatio:h,width:E,height:O}),M=$e({aspectRatio:h,width:R,height:P},"cover"),N=Math.min(D.width,Math.max(M.width,m)),L=Math.min(D.height,Math.max(M.height,g)),I=$e({aspectRatio:a,width:E,height:O}),B=$e({aspectRatio:a,width:R,height:P},"cover"),z=Math.min(I.width,Math.max(B.width,o)),F=Math.min(I.height,Math.max(B.height,i)),U=[-z/2,-F/2,z,F];return A.width=Ce(N),A.height=Ce(L),T.fillStyle=y,T.fillRect(0,0,N,L),T.save(),T.translate(N/2,L/2),T.rotate(s*Math.PI/180),T.scale(d,p),T.imageSmoothingEnabled=k,T.imageSmoothingQuality=x,T.drawImage.apply(T,[e].concat(c(U.map((function(e){return Math.floor(Ce(e))}))))),T.restore(),A}var et=String.fromCharCode;function tt(e,t,n){var r="";n+=t;for(var a=t;a<n;a+=1)r+=et(e.getUint8(a));return r}var nt=/^data:.*,/;function rt(e){var t=e.replace(nt,""),n=atob(t),r=new ArrayBuffer(n.length),a=new Uint8Array(r);return xe(a,(function(e,t){a[t]=n.charCodeAt(t)})),r}function at(e,t){for(var n=[],r=8192,a=new Uint8Array(e);a.length>0;)n.push(et.apply(null,we(a.subarray(0,r)))),a=a.subarray(r);return"data:".concat(t,";base64,").concat(btoa(n.join("")))}function ot(e){var t,n=new DataView(e);try{var r,a,o;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var i=n.byteLength,c=2;c+1<i;){if(255===n.getUint8(c)&&225===n.getUint8(c+1)){a=c;break}c+=1}if(a){var l=a+10;if("Exif"===tt(n,a+4,4)){var s=n.getUint16(l);if(((r=18761===s)||19789===s)&&42===n.getUint16(l+2,r)){var u=n.getUint32(l+4,r);u>=8&&(o=l+u)}}}if(o){var d,f,p=n.getUint16(o,r);for(f=0;f<p;f+=1)if(d=o+12*f+2,274===n.getUint16(d,r)){d+=8,t=n.getUint16(d,r),n.setUint16(d,1,r);break}}}catch(e){t=1}return t}function it(e){var t=0,n=1,r=1;switch(e){case 2:n=-1;break;case 3:t=-180;break;case 4:r=-1;break;case 5:t=90,r=-1;break;case 6:t=90;break;case 7:t=90,n=-1;break;case 8:t=-90}return{rotate:t,scaleX:n,scaleY:r}}var ct={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,n=this.container,r=this.cropper,a=Number(t.minContainerWidth),o=Number(t.minContainerHeight);je(r,T),Pe(e,T);var i={width:Math.max(n.offsetWidth,a>=0?a:le),height:Math.max(n.offsetHeight,o>=0?o:se)};this.containerData=i,Se(r,{width:i.width,height:i.height}),je(e,T),Pe(r,T)},initCanvas:function(){var e=this.containerData,t=this.imageData,n=this.options.viewMode,r=Math.abs(t.rotate)%180==90,a=r?t.naturalHeight:t.naturalWidth,o=r?t.naturalWidth:t.naturalHeight,i=a/o,c=e.width,l=e.height;e.height*i>e.width?3===n?c=e.height*i:l=e.width/i:3===n?l=e.width/i:c=e.height*i;var s={aspectRatio:i,naturalWidth:a,naturalHeight:o,width:c,height:l};this.canvasData=s,this.limited=1===n||2===n,this.limitCanvas(!0,!0),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),s.left=(e.width-s.width)/2,s.top=(e.height-s.height)/2,s.oldLeft=s.left,s.oldTop=s.top,this.initialCanvasData=_e({},s)},limitCanvas:function(e,t){var n=this.options,r=this.containerData,a=this.canvasData,o=this.cropBoxData,i=n.viewMode,c=a.aspectRatio,l=this.cropped&&o;if(e){var s=Number(n.minCanvasWidth)||0,u=Number(n.minCanvasHeight)||0;i>1?(s=Math.max(s,r.width),u=Math.max(u,r.height),3===i&&(u*c>s?s=u*c:u=s/c)):i>0&&(s?s=Math.max(s,l?o.width:0):u?u=Math.max(u,l?o.height:0):l&&(s=o.width,(u=o.height)*c>s?s=u*c:u=s/c));var d=$e({aspectRatio:c,width:s,height:u});s=d.width,u=d.height,a.minWidth=s,a.minHeight=u,a.maxWidth=1/0,a.maxHeight=1/0}if(t)if(i>(l?0:1)){var f=r.width-a.width,p=r.height-a.height;a.minLeft=Math.min(0,f),a.minTop=Math.min(0,p),a.maxLeft=Math.max(0,f),a.maxTop=Math.max(0,p),l&&this.limited&&(a.minLeft=Math.min(o.left,o.left+(o.width-a.width)),a.minTop=Math.min(o.top,o.top+(o.height-a.height)),a.maxLeft=o.left,a.maxTop=o.top,2===i&&(a.width>=r.width&&(a.minLeft=Math.min(0,f),a.maxLeft=Math.max(0,f)),a.height>=r.height&&(a.minTop=Math.min(0,p),a.maxTop=Math.max(0,p))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=r.width,a.maxTop=r.height},renderCanvas:function(e,t){var n=this.canvasData,r=this.imageData;if(t){var a=Qe({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),o=a.width,i=a.height,c=n.width*(o/n.naturalWidth),l=n.height*(i/n.naturalHeight);n.left-=(c-n.width)/2,n.top-=(l-n.height)/2,n.width=c,n.height=l,n.aspectRatio=o/i,n.naturalWidth=o,n.naturalHeight=i,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,Se(this.canvas,_e({width:n.width,height:n.height},Ge({translateX:n.left,translateY:n.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,n=this.imageData,r=n.naturalWidth*(t.width/t.naturalWidth),a=n.naturalHeight*(t.height/t.naturalHeight);_e(n,{width:r,height:a,left:(t.width-r)/2,top:(t.height-a)/2}),Se(this.image,_e({width:n.width,height:n.height},Ge(_e({translateX:n.left,translateY:n.top},n)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,n=e.aspectRatio||e.initialAspectRatio,r=Number(e.autoCropArea)||.8,a={width:t.width,height:t.height};n&&(t.height*n>t.width?a.height=a.width/n:a.width=a.height*n),this.cropBoxData=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*r),a.height=Math.max(a.minHeight,a.height*r),a.left=t.left+(t.width-a.width)/2,a.top=t.top+(t.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBoxData=_e({},a)},limitCropBox:function(e,t){var n=this.options,r=this.containerData,a=this.canvasData,o=this.cropBoxData,i=this.limited,c=n.aspectRatio;if(e){var l=Number(n.minCropBoxWidth)||0,s=Number(n.minCropBoxHeight)||0,u=i?Math.min(r.width,a.width,a.width+a.left,r.width-a.left):r.width,d=i?Math.min(r.height,a.height,a.height+a.top,r.height-a.top):r.height;l=Math.min(l,r.width),s=Math.min(s,r.height),c&&(l&&s?s*c>l?s=l/c:l=s*c:l?s=l/c:s&&(l=s*c),d*c>u?d=u/c:u=d*c),o.minWidth=Math.min(l,u),o.minHeight=Math.min(s,d),o.maxWidth=u,o.maxHeight=d}t&&(i?(o.minLeft=Math.max(0,a.left),o.minTop=Math.max(0,a.top),o.maxLeft=Math.min(r.width,a.left+a.width)-o.width,o.maxTop=Math.min(r.height,a.top+a.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=r.width-o.width,o.maxTop=r.height-o.height))},renderCropBox:function(){var e=this.options,t=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,e.movable&&e.cropBoxMovable&&Ne(this.face,I,n.width>=t.width&&n.height>=t.height?k:y),Se(this.cropBox,_e({width:n.width,height:n.height},Ge({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ue(this.element,V,this.getData())}},lt={initPreview:function(){var e=this.element,t=this.crossOrigin,n=this.options.preview,r=t?this.crossOriginUrl:this.url,a=e.alt||"The image to preview",o=document.createElement("img");if(t&&(o.crossOrigin=t),o.src=r,o.alt=a,this.viewBox.appendChild(o),this.viewBoxImage=o,n){var i=n;"string"==typeof n?i=e.ownerDocument.querySelectorAll(n):n.querySelector&&(i=[n]),this.previews=i,xe(i,(function(e){var n=document.createElement("img");Ne(e,B,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),t&&(n.crossOrigin=t),n.src=r,n.alt=a,n.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',e.innerHTML="",e.appendChild(n)}))}},resetPreview:function(){xe(this.previews,(function(e){var t=Me(e,B);Se(e,{width:t.width,height:t.height}),e.innerHTML=t.html,Le(e,B)}))},preview:function(){var e=this.imageData,t=this.canvasData,n=this.cropBoxData,r=n.width,a=n.height,o=e.width,i=e.height,c=n.left-t.left-e.left,l=n.top-t.top-e.top;this.cropped&&!this.disabled&&(Se(this.viewBoxImage,_e({width:o,height:i},Ge(_e({translateX:-c,translateY:-l},e)))),xe(this.previews,(function(t){var n=Me(t,B),s=n.width,u=n.height,d=s,f=u,p=1;r&&(f=a*(p=s/r)),a&&f>u&&(d=r*(p=u/a),f=u),Se(t,{width:d,height:f}),Se(t.getElementsByTagName("img")[0],_e({width:o*p,height:i*p},Ge(_e({translateX:-c*p,translateY:-l*p},e))))})))}},st={bind:function(){var e=this.element,t=this.options,n=this.cropper;be(t.cropstart)&&Fe(e,W,t.cropstart),be(t.cropmove)&&Fe(e,H,t.cropmove),be(t.cropend)&&Fe(e,q,t.cropend),be(t.crop)&&Fe(e,V,t.crop),be(t.zoom)&&Fe(e,ne,t.zoom),Fe(n,Z,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&Fe(n,te,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&Fe(n,Y,this.onDblclick=this.dblclick.bind(this)),Fe(e.ownerDocument,$,this.onCropMove=this.cropMove.bind(this)),Fe(e.ownerDocument,Q,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&Fe(window,ee,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,n=this.cropper;be(t.cropstart)&&ze(e,W,t.cropstart),be(t.cropmove)&&ze(e,H,t.cropmove),be(t.cropend)&&ze(e,q,t.cropend),be(t.crop)&&ze(e,V,t.crop),be(t.zoom)&&ze(e,ne,t.zoom),ze(n,Z,this.onCropStart),t.zoomable&&t.zoomOnWheel&&ze(n,te,this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&ze(n,Y,this.onDblclick),ze(e.ownerDocument,$,this.onCropMove),ze(e.ownerDocument,Q,this.onCropEnd),t.responsive&&ze(window,ee,this.onResize)}},ut={resize:function(){if(!this.disabled){var e,t,n=this.options,r=this.container,a=this.containerData,o=r.offsetWidth/a.width,i=r.offsetHeight/a.height,c=Math.abs(o-1)>Math.abs(i-1)?o:i;1!==c&&(n.restore&&(e=this.getCanvasData(),t=this.getCropBoxData()),this.render(),n.restore&&(this.setCanvasData(xe(e,(function(t,n){e[n]=t*c}))),this.setCropBoxData(xe(t,(function(e,n){t[n]=e*c})))))}},dblclick:function(){this.disabled||this.options.dragMode===U||this.setDragMode(Re(this.dragBox,P)?F:z)},wheel:function(e){var t=this,n=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(e.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){t.wheeling=!1}),50),e.deltaY?r=e.deltaY>0?1:-1:e.wheelDelta?r=-e.wheelDelta/120:e.detail&&(r=e.detail>0?1:-1),this.zoom(-r*n,e)))},cropStart:function(e){var t=e.buttons,n=e.button;if(!(this.disabled||("mousedown"===e.type||"pointerdown"===e.type&&"mouse"===e.pointerType)&&(pe(t)&&1!==t||pe(n)&&0!==n||e.ctrlKey))){var r,a=this.options,o=this.pointers;e.changedTouches?xe(e.changedTouches,(function(e){o[e.identifier]=Ke(e)})):o[e.pointerId||0]=Ke(e),r=Object.keys(o).length>1&&a.zoomable&&a.zoomOnTouch?w:Me(e.target,I),ae.test(r)&&!1!==Ue(this.element,W,{originalEvent:e,action:r})&&(e.preventDefault(),this.action=r,this.cropping=!1,r===b&&(this.cropping=!0,je(this.dragBox,N)))}},cropMove:function(e){var t=this.action;if(!this.disabled&&t){var n=this.pointers;e.preventDefault(),!1!==Ue(this.element,H,{originalEvent:e,action:t})&&(e.changedTouches?xe(e.changedTouches,(function(e){_e(n[e.identifier]||{},Ke(e,!0))})):_e(n[e.pointerId||0]||{},Ke(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,n=this.pointers;e.changedTouches?xe(e.changedTouches,(function(e){delete n[e.identifier]})):delete n[e.pointerId||0],t&&(e.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,Ae(this.dragBox,N,this.cropped&&this.options.modal)),Ue(this.element,q,{originalEvent:e,action:t}))}}},dt={change:function(e){var t,n=this.options,r=this.canvasData,a=this.containerData,o=this.cropBoxData,i=this.pointers,c=this.action,l=n.aspectRatio,s=o.left,u=o.top,d=o.width,f=o.height,p=s+d,h=u+f,m=0,g=0,v=a.width,P=a.height,A=!0;!l&&e.shiftKey&&(l=d&&f?d/f:1),this.limited&&(m=o.minLeft,g=o.minTop,v=m+Math.min(a.width,r.width,r.left+r.width),P=g+Math.min(a.height,r.height,r.top+r.height));var D=i[Object.keys(i)[0]],M={x:D.endX-D.startX,y:D.endY-D.startY},N=function(e){switch(e){case x:p+M.x>v&&(M.x=v-p);break;case _:s+M.x<m&&(M.x=m-s);break;case C:u+M.y<g&&(M.y=g-u);break;case E:h+M.y>P&&(M.y=P-h)}};switch(c){case y:s+=M.x,u+=M.y;break;case x:if(M.x>=0&&(p>=v||l&&(u<=g||h>=P))){A=!1;break}N(x),(d+=M.x)<0&&(c=_,s-=d=-d),l&&(f=d/l,u+=(o.height-f)/2);break;case C:if(M.y<=0&&(u<=g||l&&(s<=m||p>=v))){A=!1;break}N(C),f-=M.y,u+=M.y,f<0&&(c=E,u-=f=-f),l&&(d=f*l,s+=(o.width-d)/2);break;case _:if(M.x<=0&&(s<=m||l&&(u<=g||h>=P))){A=!1;break}N(_),d-=M.x,s+=M.x,d<0&&(c=x,s-=d=-d),l&&(f=d/l,u+=(o.height-f)/2);break;case E:if(M.y>=0&&(h>=P||l&&(s<=m||p>=v))){A=!1;break}N(E),(f+=M.y)<0&&(c=C,u-=f=-f),l&&(d=f*l,s+=(o.width-d)/2);break;case O:if(l){if(M.y<=0&&(u<=g||p>=v)){A=!1;break}N(C),f-=M.y,u+=M.y,d=f*l}else N(C),N(x),M.x>=0?p<v?d+=M.x:M.y<=0&&u<=g&&(A=!1):d+=M.x,M.y<=0?u>g&&(f-=M.y,u+=M.y):(f-=M.y,u+=M.y);d<0&&f<0?(c=j,u-=f=-f,s-=d=-d):d<0?(c=S,s-=d=-d):f<0&&(c=R,u-=f=-f);break;case S:if(l){if(M.y<=0&&(u<=g||s<=m)){A=!1;break}N(C),f-=M.y,u+=M.y,d=f*l,s+=o.width-d}else N(C),N(_),M.x<=0?s>m?(d-=M.x,s+=M.x):M.y<=0&&u<=g&&(A=!1):(d-=M.x,s+=M.x),M.y<=0?u>g&&(f-=M.y,u+=M.y):(f-=M.y,u+=M.y);d<0&&f<0?(c=R,u-=f=-f,s-=d=-d):d<0?(c=O,s-=d=-d):f<0&&(c=j,u-=f=-f);break;case j:if(l){if(M.x<=0&&(s<=m||h>=P)){A=!1;break}N(_),d-=M.x,s+=M.x,f=d/l}else N(E),N(_),M.x<=0?s>m?(d-=M.x,s+=M.x):M.y>=0&&h>=P&&(A=!1):(d-=M.x,s+=M.x),M.y>=0?h<P&&(f+=M.y):f+=M.y;d<0&&f<0?(c=O,u-=f=-f,s-=d=-d):d<0?(c=R,s-=d=-d):f<0&&(c=S,u-=f=-f);break;case R:if(l){if(M.x>=0&&(p>=v||h>=P)){A=!1;break}N(x),f=(d+=M.x)/l}else N(E),N(x),M.x>=0?p<v?d+=M.x:M.y>=0&&h>=P&&(A=!1):d+=M.x,M.y>=0?h<P&&(f+=M.y):f+=M.y;d<0&&f<0?(c=S,u-=f=-f,s-=d=-d):d<0?(c=j,s-=d=-d):f<0&&(c=O,u-=f=-f);break;case k:this.move(M.x,M.y),A=!1;break;case w:this.zoom(Xe(i),e),A=!1;break;case b:if(!M.x||!M.y){A=!1;break}t=Ve(this.cropper),s=D.startX-t.left,u=D.startY-t.top,d=o.minWidth,f=o.minHeight,M.x>0?c=M.y>0?R:O:M.x<0&&(s-=d,c=M.y>0?j:S),M.y<0&&(u-=f),this.cropped||(Pe(this.cropBox,T),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}A&&(o.width=d,o.height=f,o.left=s,o.top=u,this.action=c,this.renderCropBox()),xe(i,(function(e){e.startX=e.endX,e.startY=e.endY}))}},ft={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&je(this.dragBox,N),Pe(this.cropBox,T),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=_e({},this.initialImageData),this.canvasData=_e({},this.initialCanvasData),this.cropBoxData=_e({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(_e(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Pe(this.dragBox,N),je(this.cropBox,T)),this},replace:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,xe(this.previews,(function(t){t.getElementsByTagName("img")[0].src=e})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Pe(this.cropper,A)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,je(this.cropper,A)),this},destroy:function(){var e=this.element;return e[v]?(e[v]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.canvasData,r=n.left,a=n.top;return this.moveTo(me(e)?e:r+Number(e),me(t)?t:a+Number(t))},moveTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.canvasData,r=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(pe(e)&&(n.left=e,r=!0),pe(t)&&(n.top=t,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(e,t){var n=this.canvasData;return e=(e=Number(e))<0?1/(1-e):1+e,this.zoomTo(n.width*e/n.naturalWidth,null,t)},zoomTo:function(e,t,n){var r=this.options,a=this.canvasData,o=a.width,i=a.height,c=a.naturalWidth,l=a.naturalHeight;if((e=Number(e))>=0&&this.ready&&!this.disabled&&r.zoomable){var s=c*e,u=l*e;if(!1===Ue(this.element,ne,{ratio:e,oldRatio:o/c,originalEvent:n}))return this;if(n){var d=this.pointers,f=Ve(this.cropper),p=d&&Object.keys(d).length?Ze(d):{pageX:n.pageX,pageY:n.pageY};a.left-=(s-o)*((p.pageX-f.left-a.left)/o),a.top-=(u-i)*((p.pageY-f.top-a.top)/i)}else ye(t)&&pe(t.x)&&pe(t.y)?(a.left-=(s-o)*((t.x-a.left)/o),a.top-=(u-i)*((t.y-a.top)/i)):(a.left-=(s-o)/2,a.top-=(u-i)/2);a.width=s,a.height=u,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return pe(e=Number(e))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,pe(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(pe(t)?t:1,e)},scale:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.imageData,r=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(pe(e)&&(n.scaleX=e,r=!0),pe(t)&&(n.scaleY=t,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.options,r=this.imageData,a=this.canvasData,o=this.cropBoxData;if(this.ready&&this.cropped){e={x:o.left-a.left,y:o.top-a.top,width:o.width,height:o.height};var i=r.width/r.naturalWidth;if(xe(e,(function(t,n){e[n]=t/i})),t){var c=Math.round(e.y+e.height),l=Math.round(e.x+e.width);e.x=Math.round(e.x),e.y=Math.round(e.y),e.width=l-e.x,e.height=c-e.y}}else e={x:0,y:0,width:0,height:0};return n.rotatable&&(e.rotate=r.rotate||0),n.scalable&&(e.scaleX=r.scaleX||1,e.scaleY=r.scaleY||1),e},setData:function(e){var t=this.options,n=this.imageData,r=this.canvasData,a={};if(this.ready&&!this.disabled&&ye(e)){var o=!1;t.rotatable&&pe(e.rotate)&&e.rotate!==n.rotate&&(n.rotate=e.rotate,o=!0),t.scalable&&(pe(e.scaleX)&&e.scaleX!==n.scaleX&&(n.scaleX=e.scaleX,o=!0),pe(e.scaleY)&&e.scaleY!==n.scaleY&&(n.scaleY=e.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var i=n.width/n.naturalWidth;pe(e.x)&&(a.left=e.x*i+r.left),pe(e.y)&&(a.top=e.y*i+r.top),pe(e.width)&&(a.width=e.width*i),pe(e.height)&&(a.height=e.height*i),this.setCropBoxData(a)}return this},getContainerData:function(){return this.ready?_e({},this.containerData):{}},getImageData:function(){return this.sized?_e({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&xe(["left","top","width","height","naturalWidth","naturalHeight"],(function(n){t[n]=e[n]})),t},setCanvasData:function(e){var t=this.canvasData,n=t.aspectRatio;return this.ready&&!this.disabled&&ye(e)&&(pe(e.left)&&(t.left=e.left),pe(e.top)&&(t.top=e.top),pe(e.width)?(t.width=e.width,t.height=e.width/n):pe(e.height)&&(t.height=e.height,t.width=e.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var e,t=this.cropBoxData;return this.ready&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(e){var t,n,r=this.cropBoxData,a=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&ye(e)&&(pe(e.left)&&(r.left=e.left),pe(e.top)&&(r.top=e.top),pe(e.width)&&e.width!==r.width&&(t=!0,r.width=e.width),pe(e.height)&&e.height!==r.height&&(n=!0,r.height=e.height),a&&(t?r.height=r.width/a:n&&(r.width=r.height*a)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,n=Je(this.image,this.imageData,t,e);if(!this.cropped)return n;var r=this.getData(),a=r.x,o=r.y,i=r.width,l=r.height,s=n.width/Math.floor(t.naturalWidth);1!==s&&(a*=s,o*=s,i*=s,l*=s);var u=i/l,d=$e({aspectRatio:u,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),f=$e({aspectRatio:u,width:e.minWidth||0,height:e.minHeight||0},"cover"),p=$e({aspectRatio:u,width:e.width||(1!==s?n.width:i),height:e.height||(1!==s?n.height:l)}),h=p.width,m=p.height;h=Math.min(d.width,Math.max(f.width,h)),m=Math.min(d.height,Math.max(f.height,m));var g=document.createElement("canvas"),v=g.getContext("2d");g.width=Ce(h),g.height=Ce(m),v.fillStyle=e.fillColor||"transparent",v.fillRect(0,0,h,m);var y=e.imageSmoothingEnabled,b=void 0===y||y,k=e.imageSmoothingQuality;v.imageSmoothingEnabled=b,k&&(v.imageSmoothingQuality=k);var w,x,_,E,C,O,S=n.width,R=n.height,j=a,P=o;j<=-i||j>S?(j=0,w=0,_=0,C=0):j<=0?(_=-j,j=0,C=w=Math.min(S,i+j)):j<=S&&(_=0,C=w=Math.min(i,S-j)),w<=0||P<=-l||P>R?(P=0,x=0,E=0,O=0):P<=0?(E=-P,P=0,O=x=Math.min(R,l+P)):P<=R&&(E=0,O=x=Math.min(l,R-P));var A=[j,P,w,x];if(C>0&&O>0){var T=h/i;A.push(_*T,E*T,C*T,O*T)}return v.drawImage.apply(v,[n].concat(c(A.map((function(e){return Math.floor(Ce(e))}))))),g},setAspectRatio:function(e){var t=this.options;return this.disabled||me(e)||(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,n=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var a=e===z,o=t.movable&&e===F;e=a||o?e:U,t.dragMode=e,Ne(n,I,e),Ae(n,P,a),Ae(n,L,o),t.cropBoxMovable||(Ne(r,I,e),Ae(r,P,a),Ae(r,L,o))}return this}},pt=h.Cropper,ht=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r(this,e),!t||!ce.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=_e({},ue,ye(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return o(e,[{key:"init",value:function(){var e,t=this.element,n=t.tagName.toLowerCase();if(!t[v]){if(t[v]=this,"img"===n){if(this.isImg=!0,e=t.getAttribute("src")||"",this.originalUrl=e,!e)return;e=t.src}else"canvas"===n&&window.HTMLCanvasElement&&(e=t.toDataURL());this.load(e)}}},{key:"load",value:function(e){var t=this;if(e){this.url=e,this.imageData={};var n=this.element,r=this.options;if(r.rotatable||r.scalable||(r.checkOrientation=!1),r.checkOrientation&&window.ArrayBuffer)if(oe.test(e))ie.test(e)?this.read(rt(e)):this.clone();else{var a=new XMLHttpRequest,o=this.clone.bind(this);this.reloading=!0,this.xhr=a,a.onabort=o,a.onerror=o,a.ontimeout=o,a.onprogress=function(){a.getResponseHeader("content-type")!==re&&a.abort()},a.onload=function(){t.read(a.response)},a.onloadend=function(){t.reloading=!1,t.xhr=null},r.checkCrossOrigin&&We(e)&&n.crossOrigin&&(e=Ye(e)),a.open("GET",e,!0),a.responseType="arraybuffer",a.withCredentials="use-credentials"===n.crossOrigin,a.send()}else this.clone()}}},{key:"read",value:function(e){var t=this.options,n=this.imageData,r=ot(e),a=0,o=1,i=1;if(r>1){this.url=at(e,re);var c=it(r);a=c.rotate,o=c.scaleX,i=c.scaleY}t.rotatable&&(n.rotate=a),t.scalable&&(n.scaleX=o,n.scaleY=i),this.clone()}},{key:"clone",value:function(){var e=this.element,t=this.url,n=e.crossOrigin,r=t;this.options.checkCrossOrigin&&We(t)&&(n||(n="anonymous"),r=Ye(t)),this.crossOrigin=n,this.crossOriginUrl=r;var a=document.createElement("img");n&&(a.crossOrigin=n),a.src=r||t,a.alt=e.alt||"The image to crop",this.image=a,a.onload=this.start.bind(this),a.onerror=this.stop.bind(this),je(a,D),e.parentNode.insertBefore(a,e.nextSibling)}},{key:"start",value:function(){var e=this,t=this.image;t.onload=null,t.onerror=null,this.sizing=!0;var n=h.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(h.navigator.userAgent),r=function(t,n){_e(e.imageData,{naturalWidth:t,naturalHeight:n,aspectRatio:t/n}),e.initialImageData=_e({},e.imageData),e.sizing=!1,e.sized=!0,e.build()};if(!t.naturalWidth||n){var a=document.createElement("img"),o=document.body||document.documentElement;this.sizingImage=a,a.onload=function(){r(a.width,a.height),n||o.removeChild(a)},a.src=t.src,n||(a.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(a))}else r(t.naturalWidth,t.naturalHeight)}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var e=this.element,t=this.options,n=this.image,r=e.parentNode,a=document.createElement("div");a.innerHTML=de;var o=a.querySelector(".".concat(v,"-container")),i=o.querySelector(".".concat(v,"-canvas")),c=o.querySelector(".".concat(v,"-drag-box")),l=o.querySelector(".".concat(v,"-crop-box")),s=l.querySelector(".".concat(v,"-face"));this.container=r,this.cropper=o,this.canvas=i,this.dragBox=c,this.cropBox=l,this.viewBox=o.querySelector(".".concat(v,"-view-box")),this.face=s,i.appendChild(n),je(e,T),r.insertBefore(o,e.nextSibling),this.isImg||Pe(n,D),this.initPreview(),this.bind(),t.initialAspectRatio=Math.max(0,t.initialAspectRatio)||NaN,t.aspectRatio=Math.max(0,t.aspectRatio)||NaN,t.viewMode=Math.max(0,Math.min(3,Math.round(t.viewMode)))||0,je(l,T),t.guides||je(l.getElementsByClassName("".concat(v,"-dashed")),T),t.center||je(l.getElementsByClassName("".concat(v,"-center")),T),t.background&&je(o,"".concat(v,"-bg")),t.highlight||je(s,M),t.cropBoxMovable&&(je(s,L),Ne(s,I,y)),t.cropBoxResizable||(je(l.getElementsByClassName("".concat(v,"-line")),T),je(l.getElementsByClassName("".concat(v,"-point")),T)),this.render(),this.ready=!0,this.setDragMode(t.dragMode),t.autoCrop&&this.crop(),this.setData(t.data),be(t.ready)&&Fe(e,J,t.ready,{once:!0}),Ue(e,J)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),Pe(this.element,T))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=pt,e}},{key:"setDefaults",value:function(e){_e(ue,ye(e)&&e)}}]),e}();return _e(ht.prototype,ct,lt,st,ut,dt,ft),ht}()},2081:function(e,t,n){"use strict";n(321);var r=n(176),a=(n(75),n(25)),o=(n(151),n(35)),i=n(0),c=n.n(i),l=n(1),s=n.n(l),u=n(407),d=n(326),f=n(188);n(2077);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e){Promise.all([n.e(1),n.e(298)]).then(n.bind(null,2718)),Promise.all([n.e(1),n.e(306)]).then(n.bind(null,2719)),Promise.all([n.e(1),n.e(307)]).then(n.bind(null,2720));var t,l=e.isOfficial,s=e.isDesktop,h=e.newTemplateName,m=e.onSetNewTemplateName,g=e.onSetSelectedScope,v=e.group,y=e.organization,b=s?v&&Object(f.b)(v):v&&Object(f.b)(v)&&v.abilities.read_private,k=!!y,w=p(Object(i.useState)(b||k||l?0:1),2),x=w[0],_=w[1];t=k?b?[{header:__("本知识库可用"),icon:c.a.createElement("svg",{style:{width:20,height:20}},c.a.createElement("use",{xlinkHref:"#home"})),desc:__("仅在本知识库中可以使用"),type:0},{header:__("本团队可用"),icon:c.a.createElement("span",{className:"larkicon larkicon-team"}),desc:__("成员在团队中新建文档时均可使用"),type:2}]:[{header:__("本知识库可用"),icon:c.a.createElement("svg",{style:{width:20,height:20}},c.a.createElement("use",{xlinkHref:"#home"})),desc:__("仅在本知识库中可以使用"),type:0}]:b?[{header:__("本知识库可用"),icon:c.a.createElement("svg",{style:{width:20,height:20}},c.a.createElement("use",{xlinkHref:"#home"})),desc:__("仅在本知识库中可以使用"),type:0},{header:__("本团队可用"),icon:c.a.createElement("svg",{style:{width:20,height:20}},c.a.createElement("use",{xlinkHref:"#team"})),desc:__("成员在团队中新建文档时均可使用"),type:2},{header:__("仅自己可用"),icon:c.a.createElement("svg",{style:{width:20,height:20}},c.a.createElement("use",{xlinkHref:"#user"})),desc:__("可以在你参与的所有知识库中使用"),type:3}]:[{header:__("本知识库可用"),icon:c.a.createElement("svg",{style:{width:20,height:20}},c.a.createElement("use",{xlinkHref:"#home"})),desc:__("仅在本知识库中可以使用"),type:0},{header:__("仅自己可用"),icon:c.a.createElement("svg",{style:{width:20,height:20}},c.a.createElement("use",{xlinkHref:"#user"})),desc:__("可以在你参与的所有知识库中使用"),type:3}];var E=[{header:__("官方模板"),icon:c.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*KnODQ5KXlh4AAAAAAAAAAABjAQAAAQ/original",alt:"语雀logo",height:20}),desc:__("所有知识库中都可以使用"),type:1}];l&&(t=E);var C=t[x];Object(i.useEffect)((function(){return g(t[x].type)}),[]);var O=c.a.createElement(o.a,null,t.map((function(e,n){var r=c.a.createElement("div",{"data-testid":"dropdown-item-".concat(e.type),className:"template-scope-menu-item"},c.a.createElement("div",{className:"template-scope-icon"},e.icon),c.a.createElement("div",{className:"template-scope-text"},c.a.createElement("h4",null,e.header),c.a.createElement("p",null,e.desc)),n===x&&c.a.createElement("div",{className:"template-scope-more-icon"},c.a.createElement(u.a,{width:20})));return c.a.createElement(o.a.Item,{key:e.header,onClick:function(){_(n),g(t[n].type)}},r)})));return c.a.createElement("div",{"data-testid":"creator-view",className:"template-creator-content"},c.a.createElement("p",null,__("模板名称")),c.a.createElement(a.a,{value:h||"",onChange:function(e){return m(e.target.value)},onFocus:function(e){return e.target.setSelectionRange(0,e.target.value.length)}}),c.a.createElement("p",null,__("可用范围")),c.a.createElement(r.a,{trigger:["click"],overlay:O},c.a.createElement("div",{"data-testid":"dropdown-trigger",className:"template-scope"},c.a.createElement("div",{className:"template-scope-icon"},C.icon),c.a.createElement("div",{className:"template-scope-text"},c.a.createElement("h4",null,C.header),c.a.createElement("p",null,C.desc)),c.a.createElement("div",{className:"template-scope-more-icon"},c.a.createElement(d.a,null)))))}m.defaultProps={isOfficial:!1},m.propTypes={newTemplateName:s.a.string,onSetNewTemplateName:s.a.func,onSetSelectedScope:s.a.func,isOfficial:s.a.bool,isDesktop:s.a.bool,group:s.a.object,organization:s.a.object},t.a=m},2082:function(e,t,n){"use strict";n(1965);var r=n(649);n(1563);t.a=r.a},2085:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return g}));var r=n(269),a=n.n(r),o=n(940),i=n.n(o),c=n(1959),l=n.n(c),s=n(2289),u=n.n(s);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p={organization:a.a.ROLE,group:i.a.ROLE,book:l.a.ROLE,doc:l.a.ROLE,list:u.a.ROLE};function h(e){var t=p[e],n={};return"organization"===e?n=Object.keys(t).reduce((function(e,n){var r={key:n,value:t[n]};return"owner"===n&&(r.label=__("管理员")),"member"===n&&(r.label=__("成员")),"outsourcer"===n&&(r.label=__("外部联系人")),e[n]=r,e}),{}):"group"===e?n=Object.keys(t).reduce((function(e,n){var r={key:n,value:t[n]};return"owner"===n&&(r.label=__("管理员")),"member"===n&&(r.label=__("成员")),"readonly"===n&&(r.label=__("只读成员")),e[n]=r,e}),{}):"book"===e||"doc"===e?n=Object.keys(t).reduce((function(e,n){var r={key:n,value:t[n]};return"readonly"===n&&(r.label=__("只读成员")),"edit"===n&&(r.label=__("成员")),e[n]=r,e}),{}):"list"===e&&(n=Object.keys(t).reduce((function(e,n){var r={key:n,value:t[n]};return"owner"===n&&(r.label=__("管理员")),"member"===n&&(r.label=__("成员")),e[n]=r,e}),{})),n}function m(e){var t=h(e);return["owner","member","edit","readonly","outsourcer"].map((function(e){return t[e]})).filter((function(e){return!!e}))}function g(e,t){var n,r=h(e),a=d(Object.keys(r).map((function(e){return r[e]})));try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o.value===t)return o}}catch(e){a.e(e)}finally{a.f()}return{}}},2090:function(e,t,n){!function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=e.exports,r="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,a=function(){for(var e,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,a=n.length,o={};r<a;r++)if((e=n[r])&&e[1]in t){for(r=0;r<e.length;r++)o[n[0][r]]=e[r];return o}return!1}(),o={change:a.fullscreenchange,error:a.fullscreenerror},i={request:function(e){var n=a.requestFullscreen;e=e||t.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?e[n]():e[n](r?Element.ALLOW_KEYBOARD_INPUT:{})},exit:function(){t[a.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,n){var r=o[e];r&&t.addEventListener(r,n,!1)},off:function(e,n){var r=o[e];r&&t.removeEventListener(r,n,!1)},raw:a};a?(Object.defineProperties(i,{isFullscreen:{get:function(){return Boolean(t[a.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[a.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(t[a.fullscreenEnabled])}}}),n?e.exports=i:window.screenfull=i):n?e.exports=!1:window.screenfull=!1}()},2091:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="WarningOutlined";t.a=a.forwardRef(c)},2095:function(e,t,n){"use strict";var r,a=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(a)}var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var c=function(e){return"string"==typeof e&&i.test(e)},l=[],s=0;s<256;++s)l.push((s+256).toString(16).substr(1));var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!c(n))throw TypeError("Stringified UUID is invalid");return n};t.a=function(e,t,n){var r=(e=e||{}).random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return u(r)}},2096:function(e,t,n){"use strict";var r=n(660),a=n.n(r),o=n(0),i=n.n(o),c=n(1),l=n.n(c),s=n(8),u=n.n(s),d=n(41),f=n.n(d),p={scrollTop:function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},offset:function(e){if(!e.getClientRects().length)return{top:0,left:0};var t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}}},h=(n(1590),"undefined"!=typeof navigator?navigator.userAgent:""),m=/yuque-desktop\/[\d.]+/i.test(h);function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=k(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e){var t,n,r=e.contents,c=void 0===r?[]:r,l=e.current,s=e.withHeader,d=e.offsetTop,h=e.enableProgressBar,k=e.onClickItem,w=Object(o.useRef)(null),x=(t=c,n=Object(o.useRef)(),Object(o.useEffect)((function(){n.current=t}),[t]),n.current),_=b(Object(o.useState)([]),2),E=_[0],C=_[1],O=b(Object(o.useState)(-1),2),S=O[0],R=O[1],j=Object(o.useMemo)((function(){return function(e){for(var t=[],n=e.length-1;n>=0;n--){for(var r=!1,a=n-1;a>=0&&1!==e.depth;a--)if(e[a].depth<e[n].depth){var o={id:n,pid:a,title:e[n].html,key:e[n].id,data:e[n]};t.unshift(o),r=!0;break}if(!r){var i={id:n,pid:-1,title:e[n].html,key:e[n].id,data:e[n]};t.unshift(i)}}return t}(c)}),[c]);return Object(o.useEffect)((function(){C((function(e){var t,n=[],r=null,a=y(c.keys());try{for(a.s();!(t=a.n()).done;){var o=t.value,i=!1,l=!0;x&&x.length>0&&function(){var t=c[o].id,n=x.findIndex((function(e){return e.id===t}));-1!=n?(i=e[n].collapsed,l=e[n].display):r=o}();for(var s=!1,u=o+1;u<c.length&&!(c[u].depth<=c[o].depth);u++)if(c[u].depth>c[o].depth&&c[u].text){s=!0;break}var d={collapsible:s,collapsed:i,display:l};n.push(d)}}catch(e){a.e(e)}finally{a.f()}if(r){for(var f=[r],p=j[r].pid;-1!==p;)f.push(p),n[p].collapsed=!1,n[p].display=!0,p=j[p].pid;for(var h=r+1;h<c.length&&!(-1!==j[r].pid&&c[h].depth<=c[j[r].pid].depth);h++)n[h].collapsible&&!n[h].collapsed&&f.includes(j[h].pid)&&f.push(h);var m,g=y(j.keys());try{for(g.s();!(m=g.n()).done;){var v=m.value;f.includes(j[v].pid)&&(n[v].display=!0)}}catch(e){g.e(e)}finally{g.f()}}return n}))}),[c]),Object(o.useEffect)((function(){if(E.length>0&&l<E.length)if(-1===l||E[l].display)R(l);else{for(var e=j[l].pid;!E[e].display;)e=j[e].pid;R(e)}else R(-1)}),[j,l,E]),Object(o.useEffect)((function(){return e.autoAdjustPosition&&l>0&&S&&function(e){var t=e.querySelector(".larkui-synopsis-item-active");if(t){var n=e.scrollHeight-e.clientHeight,r=e.clientHeight,a=0;t.offsetTop>r?(a=(a=t.offsetTop-r/2+t.clientHeight/2+16)>=n?n:a,e.scrollTop=a):t.offsetTop>e.clientHeight/2?(a=t.offsetTop+16-e.clientHeight/2+t.clientHeight/2,e.scrollTop=a):e.scrollTop=0}}(w.current),function(){}}),[l,e.autoAdjustPosition,e.height,S]),i.a.createElement("div",{className:"larkui-synopsis-wrap ".concat(e.className),style:e.style,ref:w,"data-testid":"larkui-synopsis"},i.a.createElement("ul",{className:"larkui-synopsis"},c.map((function(e,t){var n={};return m||(n.href="#".concat(encodeURIComponent(e.id))),E[t]&&E[t].display&&i.a.createElement("li",{className:u()({"larkui-synopsis-item":!0,"larkui-synopsis-item-active":S===t,"larkui-synopsis-progress-bar":h,"larkui-synopsis-progress-bar-highlighted":S===t&&h}),key:t},i.a.createElement("span",{className:u()(v({"larkui-synopsis-item-collapsible-link":E[t].collapsible,"larkui-synopsis-item-link":!E[t].collapsible},"larkui-synopsis-item-link-".concat(e.depth),!0))},E[t].collapsible&&i.a.createElement("a",{onClick:function(e){!function(e,t,n){var r=f()(E);r[t].collapsed=!r[t].collapsed;for(var a=t+1;a<c.length&&!(c[a].depth<=c[t].depth);a++){var o=j[a],i=r[a];if(!o||!i)break;if(o.pid!==t)if(n){for(var l=o.pid,s=!1;l!==t&&-1!==l;)E[l].collapsed&&(s=!0),l=j[l].pid;i.display=!s&&!E[o.pid].collapsed}else i.display=!1;else i.display=n}C(r)}(0,t,!E[t+1].display)}},i.a.createElement(a.a,{rotate:E[t].collapsed?270:0,style:{fontSize:"10px",margin:"5px",color:"#8c8c8c"}})),i.a.createElement("a",g({onClick:function(t){!function(e,t){if(e.preventDefault(),k)k({event:e,id:t});else if(m){var n=document.getElementById(t);if(!n)return;n.scrollIntoView(!0)}else{var r=p.scrollTop(),a=encodeURIComponent(t);window.location.hash=a;var o=document.getElementById(a);if(!o)return;if(o.scrollIntoView(),s){var i=p.scrollTop();i<r&&window.scrollTo(0,i-60)}else if(d>0){var c=p.scrollTop();window.scrollTo(0,c-d)}}}(t,e.id)}},n,{title:e.text}),i.a.createElement("span",null,e.text))))}))))}x.defaultProps={offsetTop:0},x.propTypes={className:l.a.string,style:l.a.object,contents:l.a.array.isRequired,current:l.a.number,height:l.a.number,autoAdjustPosition:l.a.bool,withHeader:l.a.bool,offsetTop:l.a.number,enableProgressBar:l.a.bool,onClickItem:l.a.func};t.a=x},2098:function(e,t,n){e.exports=n(3135)},2101:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="MinusSquareOutlined";t.a=a.forwardRef(c)},2102:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="PlusSquareOutlined";t.a=a.forwardRef(c)},2103:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="CaretDownFilled";t.a=a.forwardRef(c)},2104:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="FolderOpenOutlined";t.a=a.forwardRef(c)},2105:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="FolderOutlined";t.a=a.forwardRef(c)},2110:function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return d}));var r=n(68);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var a=u(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var d={SCROLL:"SCROLL"},f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&c(e,t)}(s,e);var t,n,r,a=l(s);function s(){return i(this,s),a.apply(this,arguments)}return t=s,n&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(n.n(r).a),p=new f;function h(){return p}},2119:function(e,t,n){"use strict";var r=n(3027),a=n.n(r);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){i(o,r,a,c,l,"next",e)}function l(e){i(o,r,a,c,l,"throw",e)}c(void 0)}))}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var a=p(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&u(e,t)}(f,e);var t,n,r,a,o,i=d(f);function f(){return l(this,f),i.apply(this,arguments)}return t=f,n=[{key:"init",value:function(e){var t=e.content;e.onFocus,this.setContent(t)}},{key:"getDefaultDiagram",value:function(){return{diagramData:{head:{},body:[]}}}},{key:"setContent",value:function(e){var t=f.contentToMind(e);t?this.isUseDefaultContent=!1:(t=this.getDefaultDiagram(),this.isUseDefaultContent=!0),this.engine.setValue(t)}},{key:"getValue",value:function(){return JSON.stringify(this.engine.getValue())}},{key:"getPureContent",value:function(){return JSON.stringify(this.engine.getValue())}},{key:"getEditorContent",value:function(e){return{content:this.getValue(),html:null,premium:null,premiumHtml:null}}},{key:"export",value:function(e,t){"png"!==e&&"jpg"!==e||this.engine.download(e,t)}},{key:"getThumbnail",value:(o=c(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.engine.canvas({backgroundColor:"#fff"});case 2:return t=e.sent,e.abrupt("return",t.toDataURL("image/jpeg",.5));case 4:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"isEmpty",value:function(){return this.isUseDefaultContent}},{key:"getDocMeta",value:function(){return this.engine.getMeta()}},{key:"onBeforeSave",value:(a=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.engine.onBeforeSave();case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"onCommandEnd",value:function(e){this.engine.on("commandEnd",(function(t,n){e("board",t,n)}))}}],n&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),f}(n(1558).a);h.contentToMind=function(e){return e&&(a.a.isLakeMind(e)||a.a.isLakeBoard(e))?JSON.parse(e):null},t.a=h},216:function(e,t){let n;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return r[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},t.isKanjiModeEnabled=function(){return void 0!==n},t.toSJIS=function(e){return n(e)}},217:function(e,t,n){const r=n(495),a=n(496);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!r.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return a.testNumeric(e)?t.NUMERIC:a.testAlphanumeric(e)?t.ALPHANUMERIC:a.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(e){return n}}},222:function(e,t,n){"use strict";var r,a,o=n(49),i=n(269),c=n(373),l=n(31);function s(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={},f=(u(r={},i.STATUS.applying,__("待审批")),u(r,i.STATUS.invited,__("待激活")),u(r,i.STATUS.imported,__("待激活")),u(r,i.STATUS.terminated,__("已离职")),r),p={isOwner:function(e){return e.abilities&&e.abilities.destroy},enableAddressbook:function(){if(!window.appData.isYuque)return!0;var e=window.appData.organization,t=void 0===e?{}:e;return!(!t||t.address_book_type!==o.ADDRESS_BOOK_TYPE.yuque)||!!window.appData.corp&&(!!this.isWeixin()||!this.isTeambition())},disableRegistry:function(e){return!!e&&!(!e.id||e.enable_registry)},isWeixin:function(){return window.appData.corp&&"weixin"===window.appData.corp.type},isDingtalk:function(){return window.appData.corp&&"dingtalk"===window.appData.corp.type},isTeambition:function(){return window.appData.corp&&"teambition"===window.appData.corp.type},isYuqueAddressBook:function(){var e=window.appData,t=e.organization,n=void 0===t?{}:t;return e.isYuque&&(null==n?void 0:n.address_book_type)===o.ADDRESS_BOOK_TYPE.yuque},enableContacts:function(){var e=window.appData,t=e.organization,n=void 0===t?{}:t;return e.isYuque&&[o.ADDRESS_BOOK_TYPE.dingtalk,o.ADDRESS_BOOK_TYPE.weixin,o.ADDRESS_BOOK_TYPE.yuque].includes(n.address_book_type)},isWeixinAddressBook:function(){var e=window.appData,t=e.organization,n=void 0===t?{}:t;return e.isYuque&&o.ADDRESS_BOOK_TYPE.weixin===n.address_book_type},userNameEditable:function(){var e=window.appData,t=e.organization,n=void 0===t?{}:t,r=e.isYuque;return this.isWeixinAddressBook()||this.isYuqueAddressBook()||r&&1!==n.corp_sync_name_enable},isExpired:function(e){return!!e&&(!p.isFree(e)&&new Date(e.expired_at)<Date.now())},isFree:function(e){return!e||(e.payment_type===o.PAYMENT_TYPE.free||e.payment_type===o.PAYMENT_TYPE.downgrade_free)},canIndirectAddOrgMember:function(e){return(t=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d[e.id]){t.next=4;break}return t.next=3,l.a.organizations.getPermissions({id:e.id});case 3:d[e.id]=t.sent;case 4:return n=d[e.id],t.abrupt("return",n&&n.indirect_add_org_member);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){s(o,r,a,i,c,"next",e)}function c(e){s(o,r,a,i,c,"throw",e)}i(void 0)}))})();var t},getMemberRoleName:function(e){return e===i.ROLE.owner?__("空间管理员"):e===i.ROLE.member?__("空间成员"):e===i.ROLE.outsourcer?__("外部联系人"):""},getPaymentAction:function(e){return e===o.PAYMENT_TYPE.trial?__("付费"):__("续费")},getCorpType:function(e){if(!e)return null;switch(c.TYPE[e.type]){case c.TYPE.dingtalk:case c.TYPE.dingtalk_selfcorp:return{addressBookName:__("钉钉通讯录"),corpName:__("钉钉")};case c.TYPE.teambition:case c.TYPE.aone_teambition:return{addressBookName:__("Teambition"),corpName:__("Teambition")};case c.TYPE.weixin:return{addressBookName:__("企业微信通讯录"),corpName:__("企业微信")};default:return null}},getStatusLabel:function(e){var t=e.status;return f[t]},ROLE_MAP:(u(a={},i.ROLE.owner,__("管理员")),u(a,i.ROLE.member,__("成员")),u(a,i.ROLE.outsourcer,__("外部联系人")),a)};t.a=p},2261:function(e,t,n){"use strict";var r=n(2965),a=n(78),o=a.FORMAT,i=a.FORMATS_SAVE_TO_BODY_ASL;e.exports={guessFormat:function(e){return(e=(e=e||"").trim())?this.isLake(e)?o.LAKE:this.isAsl(e)?o.ASL:this.isSpreadJs(e)?o.SPREADJS:this.isLakeSheet(e)?o.LAKESHEET:o.MARKDOWN:null},isAsl:function(e){return e.startsWith('["root"')},isAsl1:function(e){return(e=(e=e||"").trimLeft()).startsWith('{"nodes":')},isLake:function(e){return e.startsWith("<!doctype lake>")},isSpreadJs:function(e){return e.startsWith('{"type":"Sheet"')},isLakeSheet:function(e){return e.startsWith('{"format":"lakesheet","type":"Sheet"')},isLakeMind:function(e){return e.startsWith('{"format":"lakemind","type":"Mind"')},isLakeBoard:function(e){return e.startsWith('{"format":"lakeboard","type":"Board"')},isLakeShow:function(e){return e.startsWith('{"format":"lakeshow","type":"Show"')},isSheet:function(e){return this.isLakeSheet(e)||this.isSpreadJs(e)},isBlank:function(e){if(!e)return!0;if(!e.value)return!0;var t=e.value,n=e.format;if(n===o.LAKE)return"<!doctype lake>"===t.replace(/<(?:br|cursor|meta) [^>]*\/>/g,"").replace(/<p><\/p>/g,"")||""===r(t).stripTags().value()&&!t.includes("<card");if(n===o.MARKDOWN&&"string"==typeof t)return""===t.trim();return!1},extractSummary:function(e){return r(e).stripTags().trim(" \n").replace(/\n/g," ").unescapeHTML().truncate(147,"...").value()},isHasImageCard:function(e){if(!e)return!1;return/<card.*\s*name="image"\s+value="(.{5,190})"/i.test(e)},extractFirstImage:function(e){if(e){var t=/<img[^>]{1,2000}src="([^"]{10,190})"/i.exec(e);return t?t[1]:void 0}},getContentForEdit:function(e){return(i.includes(e.format)?e.body_draft_asl||e.body_asl||"":e.body_draft||e.body||"").trim()},isContentSame:function(e,t,n){return t===n||e===o.LAKE&&this.getPureLakeContent(t)===this.getPureLakeContent(n)},getPureLakeContent:function(e){return(e=e||"").replace(/<anchor\s*\/>/gi,"").replace(/<focus\s*\/>/gi,"").replace(/<cursor\s*\/>/gi,"")},removeLakeMeta:function(e){return e?e.replace(/<meta [^>]{1,256}\/>/gi,""):e}}},2262:function(e,t,n){"use strict";n.r(t),n.d(t,"getFileAccept",(function(){return H})),n.d(t,"getImageAccept",(function(){return W})),n.d(t,"getLocalDocAcceptArr",(function(){return Y})),n.d(t,"getFileAcceptArr",(function(){return G})),n.d(t,"getImageAcceptArr",(function(){return X})),n.d(t,"getVideoAcceptArr",(function(){return K})),n.d(t,"getAudioAcceptArr",(function(){return Z}));var r=n(162),a=n.n(r),o=n(129),i=n.n(o),c=n(130),l=n.n(c),s=n(131),u=n.n(s),d=n(114),f=n.n(d),p=n(154),h=n.n(p),m=n(155),g=n.n(m),v=n(160),y=n.n(v),b=n(1561),k=n.n(b),w=a.a,x=a.a.normal,_=a.a.paid,E=[h.a,g.a,f.a,y.a],C={LOCAL_DOC_EXT:k()(E).concat([".pdf"]),LOCAL_DOC_EXT_NORMAL:k()(E.map((function(e){return e.normal}))).concat([".pdf"]),LOCAL_DOC_EXT_PAID:k()(E.map((function(e){return e.paid}))).concat([".pdf"]),FILE_EXT:w,FILE_EXT_NORMAL:x,FILE_EXT_PAID:_,IMAGE_EXT:i.a,IMAGE_EXT_NORMAL:i.a.normal,IMAGE_EXT_PAID:i.a.paid,VIDEO_EXT:l.a,VIDEO_EXT_NORMAL:l.a.normal,VIDEO_EXT_PAID:l.a.paid,AUDIO_EXT:u.a,AUDIO_EXT_NORMAL:u.a.normal,AUDIO_EXT_PAID:u.a.paid},O=n(418),S=n.n(O),R=C.LOCAL_DOC_EXT,j=C.LOCAL_DOC_EXT_NORMAL,P=C.LOCAL_DOC_EXT_PAID,A=C.FILE_EXT,T=C.FILE_EXT_NORMAL,D=C.FILE_EXT_PAID,M=C.IMAGE_EXT,N=C.IMAGE_EXT_NORMAL,L=C.IMAGE_EXT_PAID,I=C.VIDEO_EXT,B=C.VIDEO_EXT_NORMAL,z=C.VIDEO_EXT_PAID,F=C.AUDIO_EXT,U=C.AUDIO_EXT_NORMAL,V=C.AUDIO_EXT_PAID,q=function(){var e="undefined"!=typeof navigator?navigator.userAgent:"";return/android/i.test(e)};function H(){return q()?"*/*":(window.appData||{}).isYuque?S()()?D.join(","):T.join(","):A.join(",")}function W(){return q()?"image/*":(window.appData||{}).isYuque?S()()?L.join(","):N.join(","):M.join(",")}function Y(){return(window.appData||{}).isYuque?S()()?P:j:R}function G(){return(window.appData||{}).isYuque?S()()?D:T:A}function X(){return(window.appData||{}).isYuque?S()()?L:N:M}function K(){return(window.appData||{}).isYuque?S()()?z:B:I}function Z(){return(window.appData||{}).isYuque?S()()?V:U:F}},2263:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="ReloadOutlined";t.a=a.forwardRef(c)},2264:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M308.6 545.7c-19.8 2-57.1 10.7-77.4 28.6-61 53-24.5 150 99 150 71.8 0 143.5-45.7 199.8-119-80.2-38.9-148.1-66.8-221.4-59.6zm460.5 67c100.1 33.4 154.7 43 166.7 44.8A445.9 445.9 0 00960 512c0-247.4-200.6-448-448-448S64 264.6 64 512s200.6 448 448 448c155.9 0 293.2-79.7 373.5-200.5-75.6-29.8-213.6-85-286.8-120.1-69.9 85.7-160.1 137.8-253.7 137.8-158.4 0-212.1-138.1-137.2-229 16.3-19.8 44.2-38.7 87.3-49.4 67.5-16.5 175 10.3 275.7 43.4 18.1-33.3 33.4-69.9 44.7-108.9H305.1V402h160v-56.2H271.3v-31.3h193.8v-80.1s0-13.5 13.7-13.5H557v93.6h191.7v31.3H557.1V402h156.4c-15 61.1-37.7 117.4-66.2 166.8 47.5 17.1 90.1 33.3 121.8 43.9z"}}]},name:"alipay-circle",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="AlipayCircleOutlined";t.a=a.forwardRef(c)},2265:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="ArrowRightOutlined";t.a=a.forwardRef(c)},2266:function(e,t,n){"use strict";n(101);var r=n(26),a=n(0),o=n.n(a),i=n(1),c=n.n(i),l=n(8),s=n.n(l),u=n(71),d=n.n(u),f=n(251),p="list-module_wrapper_tGfkb",h="list-module_hideMore_8dBY+",m="list-module_expand_Si1IM",g="list-module_list_lCazx",v="list-module_addTag_4jBp6",y="list-module_rightSide_7U15N",b="list-module_item_E+vat",k="list-module_isMobile_KywIe",w="list-module_delete_IdEkT",x="list-module_active_3nZpN",_="list-module_canSelect_2Re6L",E="list-module_name_q3jnk",C="list-module_count_KWssq",O="list-module_expandBtn_nVsXC",S="list-module_expanded_Woc70",R="list-module_icon_NsFXq";function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e){var t;Promise.all([n.e(1),n.e(294)]).then(n.bind(null,4301)),Promise.all([n.e(1),n.e(305)]).then(n.bind(null,4302));var i=e.data,c=e.onDelete,l=e.renderFirstItem,u=e.showCount,A=e.hideMore,T=e.storageKey,D=e.localStorage,M=e.currentTagId,N=e.onSelect,L=e.isMobile,I=e.renderRightSide,B=!1;T&&D&&D.get(T)&&(B=!0);var z=P(Object(a.useState)(B),2),F=z[0],U=z[1],V=P(Object(a.useState)(!1),2),q=V[0],H=V[1],W=Object(a.useRef)(),Y=function(){if(A&&W&&W.current){var e=W.current.children;if(!e||e.length<=2)H(!1);else{var t=e[1],n=e[e.length-1],r=t.getBoundingClientRect().top!==n.getBoundingClientRect().top;H(r)}}};Object(a.useEffect)((function(){Y()}),[i]),Object(a.useEffect)((function(){D&&T&&(F?D.set(T,"true"):D.remove(T))}),[F]),Object(a.useEffect)((function(){var e=d()(Y,200);return A&&window.addEventListener("resize",e,!1),function(){window.removeEventListener("resize",e,!1)}}),[]);return o.a.createElement("div",{"data-testid":"note-tag-list-wrapper",className:s()(p,(t={},j(t,m,F),j(t,h,A),t),"note-tag-list")},o.a.createElement("div",{className:g,ref:W,onMouseDown:function(e){L&&e.preventDefault()}},l&&o.a.createElement("div",{className:v},l()),I||q?o.a.createElement("div",{className:y},q&&o.a.createElement("div",{className:s()(O,"tag-list-expand",j({},S,F)),onClick:function(e){e.stopPropagation(),U(!F)},onMouseDown:function(e){L&&e.preventDefault()}},o.a.createElement(f.a,{className:R})),I&&I()):null,i.map((function(e){var t,n=e.tag_meta.name,a=n.length>20,i=a?"".concat(n.slice(0,20),"..."):n,l=M===e.tag_meta.id;return o.a.createElement(r.a,{title:a?n:null},o.a.createElement("div",{"data-testid":"note-tag-list-item",className:s()(b,(t={},j(t,x,l),j(t,_,!!N),j(t,k,L),t)),key:e.tag_meta.name,onClick:function(){N&&N(e.tag_meta.id)}},o.a.createElement("span",{className:E},i),function(e){return u&&void 0!==e.count?o.a.createElement("span",{className:C},"(",e.count,")"):null}(e),c&&o.a.createElement("span",{"data-testid":"note-tag-list-delete",className:s()(w,j({},k,L)),onClick:function(){return c(e)}},o.a.createElement("svg",null,o.a.createElement("use",{xlinkHref:"#close"})))))}))))}T.propTypes={data:c.a.array.isRequired,onSelect:c.a.func,onDelete:c.a.func,renderFirstItem:c.a.func,showCount:c.a.bool,hideMore:c.a.bool,storageKey:c.a.string,localStorage:c.a.object,currentTagId:c.a.id,isMobile:c.a.bool,renderRightSide:c.a.func};t.a=T},2267:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="SettingOutlined";t.a=a.forwardRef(c)},2268:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="LockOutlined";t.a=a.forwardRef(c)},2269:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm192 472c0 4.4-3.6 8-8 8H544v152c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V544H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h152V328c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v152h152c4.4 0 8 3.6 8 8v48z"}}]},name:"plus-circle",theme:"filled"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="PlusCircleFilled";t.a=a.forwardRef(c)},2270:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="MailOutlined";t.a=a.forwardRef(c)},2271:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M689 165.1L308.2 493.5c-10.9 9.4-10.9 27.5 0 37L689 858.9c14.2 12.2 35 1.2 35-18.5V183.6c0-19.7-20.8-30.7-35-18.5z"}}]},name:"caret-left",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="CaretLeftOutlined";t.a=a.forwardRef(c)},2272:function(e,t,n){"use strict";n(75);var r=n(25),a=n(0),o=n.n(a),i=n(1),c=n.n(i),l=n(8),s=n.n(l),u=n(572),d=n(252),f={wrapper:"search-module_wrapper_S445p",searchBar:"search-module_searchBar_x3Krl",active:"search-module_active_eYHT+",webAppSearchBar:"search-module_webAppSearchBar_KqxgR",searchMini:"search-module_searchMini_V+K7h",searchMiniShow:"search-module_searchMiniShow_xFcgm",webapp:"search-module_webapp_4SxuM",mobile:"search-module_mobile_Yq+MK"};function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=function(e){var t,n,i=e.activeMode,c=e.isDesktopApp,l=e.isMobile,m=e.searchValue,g=e.searchActive,v=e.setSearchActive,y=e.onSearchNote,b=e.onSearchReset,k=h(Object(a.useState)(null),2),w=k[0],x=k[1],_=Object(a.useRef)(null);Object(a.useEffect)((function(){m||(x(null),v(!1))}),[m]);var E={ref:_,value:w,prefix:o.a.createElement(u.a,null),placeholder:__("搜索"),autoComplete:"nope",allowClear:!0,onSearch:y,onBlur:function(e){e.target.value||(v(!1),b())},onChange:function(e){var t=e.target.value;x(t)},onClear:function(){x(null)},style:{borderColor:"#e8e8e8"}};return o.a.createElement("div",{"data-testid":"note-search",className:s()(f.wrapper,p({},f.mobile,l),"note-search")},o.a.createElement("div",{className:s()(f.searchBar,(t={},p(t,f.active,i||g),p(t,f.webAppSearchBar,d.isWebAppMiniApp),t))},o.a.createElement(r.a.Search,E)),!i&&!l&&o.a.createElement("div",{className:s()(f.searchMini,(n={},p(n,f.searchMiniShow,!g),p(n,f.desktop,c),p(n,f.webApp,d.isWebAppMiniApp),n)),onClick:function(){v(!0),_&&_.current&&_.current.focus()}},o.a.createElement(u.a,{width:16,height:16})))};g.defaultProps={activeMode:!1,isDesktopApp:!1,isMobile:!1},g.propTypes={searchValue:c.a.string,searchActive:c.a.bool,isMobile:c.a.bool,isDesktopApp:c.a.bool,onSearchNote:c.a.func,onSearchReset:c.a.func,setSearchActive:c.a.func,activeMode:c.a.bool};t.a=g},2273:function(e,t,n){"use strict";var r=n(505),a=n.n(r),o=n(2709),i=n.n(o),c=(n(153),n(74)),l=(n(94),n(48)),s=n(0),u=n.n(s),d=n(27),f=n.n(d),p=n(8),h=n.n(p),m=n(1),g=n.n(m),v=n(248),y=n.n(v),b=n(2266),k=n(68),w=n.n(k),x=n(42),_={}.toString,E=function(e,t){return _.call(e)==="[object "+t+"]"};function C(e){return null==e}function O(e,t,n){try{return window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.currentStyle[t]}catch(e){return C(n)?null:n}}function S(e,t){var n=[];if(e){if(t&&!t(e))return n;for(var r=e.childNodes,a=0;a<r.length;a++){var o=r[a],i=o.nodeType;3===i?n.push(o):1!==i&&9!==i&&11!==i||(n=n.concat(S(o,t)))}}return n}function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},D(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L(e);if(t){var a=L(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return N(this,n)}}function N(e,t){if(t&&("object"===R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&D(e,t)}(o,e);var t,n,r,a=M(o);function o(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=a.call(this,e),!e.target)throw new Error("please set a dom element as target!");return t.options=P({target:null,style:{highlight:{fill:"rgba(255, 230, 0, 0.5)"},select:{fill:"rgba(255, 140, 0, 0.5)"}},filter:null},e),t.ranges=[],t._initTarget(),t._createCanvas(),t}return t=o,n=[{key:"_initTarget",value:function(){var e=this.options.target;"static"===O(e,"position")&&(e.style.position="relative")}},{key:"_createCanvas",value:function(){var e=this.options.target,t=document.createElement("div");t.style.position="absolute",t.style.top=0,t.style.left=0,t.style["pointer-events"]="none",t.style["z-index"]=99,e.appendChild(t);var n=new x.TinyCanvas({container:t});this.container=t,this.canvas=n}},{key:"_resizeCanvas",value:function(){var e=this.options.target,t=this.canvas,n=function(e,t){var n=O(e,"width",t);return"auto"===n&&(n=e.offsetWidth),parseFloat(n)}(e),r=function(e,t){var n=O(e,"height",t);return"auto"===n&&(n=e.offsetHeight),parseFloat(n)}(e);t.resize(n,r)}},{key:"_getRelativeRect",value:function(e){var t=this.container,n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return{x:n.left-r.left,y:n.top-r.top,width:n.right-n.left,height:n.bottom-n.top}}},{key:"_cacheRange",value:function(e){return{startOffset:e.startOffset,endOffset:e.endOffset,startContainer:e.startContainer,endContainer:e.endContainer,commonAncestorContainer:e.commonAncestorContainer}}},{key:"_isRangeWrap",value:function(e){var t=this._cacheRange(e);e.setEnd(t.startContainer,t.startOffset+1);var n=e.getBoundingClientRect();e.setEnd(t.startContainer,t.endOffset-1),e.setStart(t.endContainer,t.endOffset);var r=e.getBoundingClientRect();return e.setStart(t.startContainer,t.startOffset),e.setEnd(t.endContainer,t.endOffset),n.bottom!==r.bottom}},{key:"_drawOneByOne",value:function(e,t){for(var n=this._cacheRange(e),r=this.canvas,a=n.startOffset;a<n.endOffset;){e.setStart(n.commonAncestorContainer,a),e.setEnd(n.commonAncestorContainer,a+1);var o=this._getRelativeRect(e);r.clearRect(o),r.draw("Rect",P(P({},o),t)),a++}e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset)}},{key:"_drawRangeBackground",value:function(e,t){var n=this.canvas;if(this._isRangeWrap(e))return this._drawOneByOne(e,t);var r=this._getRelativeRect(e);n.clearRect(r),n.draw("Rect",P(P({},r),t))}},{key:"_highlightRanges",value:function(e){var t=this;e.forEach((function(e){t._highlightRange(e)}))}},{key:"_clearRange",value:function(e){var t=this.canvas,n=this._getRelativeRect(e);t.clearRect(n)}},{key:"_highlightRange",value:function(e){var t=this.options.style.highlight;this._drawRangeBackground(e,t)}},{key:"_selectRange",value:function(e){var t=this.options.style.select;this._drawRangeBackground(e,t)}},{key:"_clearCanvas",value:function(){this.canvas.clear()}},{key:"_move",value:function(e){var t=this.selectedRange,n=this.ranges;if(t){var r=n.indexOf(t),a=n[r+e];a||(a=e>0?n[e-1]:n[n.length+e]),this._highlightRange(t),this.select(a),this.scrollIntoView()}}},{key:"_replace",value:function(e,t){var n=e.commonAncestorContainer.parentNode,r=document.createTextNode(t);"A"===n.tagName&&n.getAttribute("href")===n.innerText&&n.setAttribute("href",t),e.deleteContents(),e.insertNode(r)}},{key:"replace",value:function(e){if(!C(e)){var t=this.selectedRange;if(this.ranges.length>0){var n={range:t};this.emit("before:replace",n),this._replace(t,e),this._clearRange(t),this.emit("after:replace",n)}}}},{key:"replaceAll",value:function(e){var t=this;if(!C(e)){var n=this.ranges,r={ranges:n};this.emit("before:replaceAll",r),n.forEach((function(n){t._replace(n,e)})),this.emit("after:replaceAll",r),n.forEach((function(e){t._saveCardValue(e)})),this.clear()}}},{key:"show",value:function(){this.container.style.display=""}},{key:"hide",value:function(){this.container.style.display="none"}},{key:"find",value:function(e,t){var n=[];if(this.clear(),e&&E(e,"String")&&e.length>0){t=function(e){return E(e,"Function")}(t)?t:function(){return!0},this._resizeCanvas();var r=S(this.options.target,(function(e){return"none"!==e.style.display&&t(e)}));r.length>0&&(n=function(e,t){var n=[];return e.forEach((function(e){var r=e.nodeValue,a=t.length,o=function(e,t){for(var n=[],r=t.length,a=e.indexOf(t);a>-1;)n.push(a),a=e.indexOf(t,a+r);return n}((r||"").toLowerCase(),(t||"").toLowerCase());o.forEach((function(t){var r=document.createRange();r.setStart(e,t),r.setEnd(e,t+a),n.push(r)}))})),n}(r,e),this._highlightRanges(n),this.ranges=n,this.keyword=e)}return this.ranges=n,n}},{key:"reFind",value:function(){var e=this.selectedRangeIndex,t=this.find(this.keyword);if(t.length>0&&!C(e)){var n=t[e]?t[e]:t[0];this.select(n)}return t}},{key:"scrollIntoView",value:function(){if(this.selectedRange){var e=this.selectedRange.commonAncestorContainer.parentElement;(t=e.getBoundingClientRect()).top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)||(e.scrollIntoView({block:"center"}),document.documentElement.scrollTop=0,document.body.scrollTop=0)}var t}},{key:"select",value:function(e){if(!C(e)){var t=this.ranges,n=e;E(e,"Number")&&(n=t[e]);var r={range:n};this.emit("before:select",r),this._selectRange(n),this.selectedRange=n,this.selectedRangeIndex=t.indexOf(n),this.emit("after:select",r)}}},{key:"next",value:function(){this._move(1)}},{key:"prev",value:function(){this._move(-1)}},{key:"clear",value:function(){this._clearCanvas(),this.selectedRange=void 0,this.ranges=[],this.keyword=void 0}},{key:"count",value:function(){var e=this.ranges;if(0===e.length)return 0;var t=this.selectedRange;return[e.indexOf(t)+1,e.length]}},{key:"destroy",value:function(){var e=this.container;this.options=null,e.parentElement.removeChild(e)}}],n&&T(t.prototype,n),r&&T(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(w.a),B=I,z=n(3031),F=n(1925),U=n(266),V=n(3043),q=n(252),H=n(2068),W="note-status-module_dev_g73YZ",Y="note-status-module_publicInfo_8wLHo",G="note-status-module_text_ZLRRs",X=function(e){var t=e.item,r=e.orderBy,a=t.editing,o=t.is_public,i=t.first_published_at,c=t.content_updated_at,l=r===V.ORDER_BY.content_updated_at,s=l?c:i;Promise.all([n.e(1),n.e(22)]).then(n.bind(null,4303));return u.a.createElement(u.a.Fragment,null,a?u.a.createElement("span",null,__("编辑中"),"..."):u.a.createElement("span",{className:G},l?__("更新于"):__("创建于")," ",H.default.format(s),o&&u.a.createElement("span",{className:Y},__("分享中"))),function(e){if(!q.isDev)return null;var t=null===e.content_updated_at;return u.a.createElement("span",{className:W},e.id,"/",e.doclet_id," ",t?"mirror":""," ",f()(e.content_updated_at).format("YYYY-MM-DD HH:mm:ss"))}(t))};X.propTypes={item:g.a.object,orderBy:g.a.string};var K=X,Z=n(1726),$=n(146),Q=n(938),J=n.n(Q),ee={toolBarBtn:"index-module_toolBarBtn_kG8Cd",wrapper:"index-module_wrapper_8ethE",note:"index-module_note_geZ56",selected:"index-module_selected_aA0w-",rightToolBar:"index-module_rightToolBar_e1gvN",noteItemExpand:"index-module_noteItemExpand_PjrCj",leftToolBar:"index-module_leftToolBar_JMyy5",noteItem:"index-module_noteItem_dVp5J",content:"index-module_content_Yf3Cm",loading:"index-module_loading_uVMCS",mask:"index-module_mask_-nOYf",fixAbsolutePosition:"index-module_fixAbsolutePosition_UGTPA",reading:"index-module_reading_dfUvx",isTemplate:"index-module_isTemplate_7o8Q-",viewBlank:"index-module_viewBlank_ecM7l",viewMore:"index-module_viewMore_gsQbm",searchMode:"index-module_searchMode_jG3fm",meta:"index-module_meta_B+ClL",contentExpanded:"index-module_contentExpanded_lWgEI",editing:"index-module_editing_nW8gJ",hasTag:"index-module_hasTag_wtzsZ",viewMoreShow:"index-module_viewMoreShow_pN6H7",isAlipayWebApp:"index-module_isAlipayWebApp_GrkNf",expanded:"index-module_expanded_SeCFz",images:"index-module_images_fAoGp",date:"index-module_date_095hy",imagesContent:"index-module_imagesContent_t0q35",item:"index-module_item_2FEiU",bookmark:"index-module_bookmark_-+dy+",title:"index-module_title_6RJyp",desc:"index-module_desc_WTwbK",belong:"index-module_belong_Csy5b",text:"index-module_text_bro5m",left:"index-module_left_s-MXM",right:"index-module_right_RJVuX",attachment:"index-module_attachment_H4LKm",file:"index-module_file_e9W5F",name:"index-module_name_fKT1c",size:"index-module_size_xQNXJ",empty:"index-module_empty_cBT2k",loadMoreBtn:"index-module_loadMoreBtn_t6j9W",theEndTips:"index-module_theEndTips_tq+NY",blank:"index-module_blank_2HJdh",desktop:"index-module_desktop_oahLD",mobile:"index-module_mobile_KgQqT",hasSearchBar:"index-module_hasSearchBar_1LCG7",liteViewMode:"index-module_liteViewMode_oZJlC",toolbarStyle:"index-module_toolbarStyle_cNHWw",batchProcess:"index-module_batchProcess_BqhA4",checkBox:"index-module_checkBox_mz+g+",isMobile:"index-module_isMobile_vdPgd",rightToolBarCollapse:"index-module_rightToolBarCollapse_cPTfb",rightToolBarSave:"index-module_rightToolBarSave_vhDcz",tagContainer:"index-module_tagContainer_nVqVt"};function te(e){return function(e){if(Array.isArray(e))return le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ce(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function re(){return re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},re.apply(this,arguments)}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e,t){if(e){if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var se=q.myNotesConsts.NOTE_ITEM_CONTENT_MIN_HEIGHT,ue=q.myNotesConsts.NOTE_LIST_VIEW_MODES,de=q.myNotesConsts.COLLAPSE_BTN_CLASS,fe=q.myNotesConsts.SUBMIT_BTN_CLASS,pe=q.myNotesConsts.NOTE_LIST_ITEM_CLASS,he=q.myNotesConsts.NOTE_LIST_READ_TAG_ADD_CLASS,me=function(e){var t,r=e.state,o=r.hasMore,d=r.listData,p=r.listLoading,m=r.searchValue,g=r.orderBy,v=r.filterTab,k=r.currentTagId,w=r.noteTags,x=r.toDocList,_=r.batchProcess,E=r.noteStatus,C=e.getNotes,O=e.onSelectNote,S=e.onLoadNote,R=e.onCollapseNote,j=e.onFinishLoadNote,P=e.onChangeNode,A=e.isMobile,T=e.setLoadRef,D=e.viewMode,M=e.renderToolBar,N=e.setToDocList,L=e.setBatchProcess,I=e.isAlipayWebApp,V=v===$.FILTER_TYPES.all,H=D===ue.lite;function W(){if(!k||m)return null;var e=w.find((function(e){return e.tag_meta.id===k}));if(!e||!e.count)return null;var t=d&&d.length,n=e.count-t;return!n||n<0?null:__("{num} 篇小记不包含{text}",{num:n,text:Object(q.getFilterBarConfig)()[v]})}Promise.all([n.e(1),n.e(302)]).then(n.bind(null,4298)),Promise.all([n.e(1),n.e(301)]).then(n.bind(null,4299)),Promise.all([n.e(1),n.e(23)]).then(n.bind(null,4300)),Object(s.useEffect)((function(){if(V){var e=document.querySelector("#mynote-container .note-list");if(e){var t=e.querySelectorAll(".yuque-doc-content");setTimeout((function(){var e,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ce(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;m?(r.searchPad||(r.searchPad=new B({target:r,style:{highlight:{fill:"rgba(255, 230, 0, 0.5)"},select:{fill:"rgba(255, 140, 0, 0.5)"}}})),r.searchPad.find(m.trim())):r.searchPad&&r.searchPad.clear()}}catch(e){n.e(e)}finally{n.f()}}),100),Object(Z.handleListScroll)()}}}),[d]);var Y=function(e){var t=e.doclet,n=void 0===t?{}:t;return v!==$.FILTER_TYPES.todo||e.not_filter_todo?n.body_draft_asl:Object(q.parseTodoListCard)(n.body_draft_asl)},G=function(t){var n,r,a=t.editing,o=t.loading,i=t.expanded_at,c=t.loaded_at,s=t.changed_at,d=t.save_from,f=t.content_updated_at,p=t.doclet,m=void 0===p?{}:p,g=t.description,y=t.tags,k=void 0===y?[]:y,x=null===f;if(!q.isDev&&x)return null;var _="item-".concat(t.id,"-").concat(t.content_updated_at),E={};q.isDesktopApp&&(E.downloadFileHandler=q.downloadFileHandler);var C=k&&k.map((function(e){var t=w&&w.find((function(t){return t.tag_meta.id===e}));return t?{tag_map_id:e,tag_meta:t.tag_meta}:null})).filter((function(e){return!!e})),T=!a&&C&&!!C.length,D=v===$.FILTER_TYPES.todo,M=d===$.SAVE_FROM_TYPE.TEMPLATE;return t.editing?u.a.createElement(l.a,{className:h()(ee.content,ie({},ee.contentExpanded,i),ee.editing,"note-list-content")},function(t){var n=oe(oe({},e),{},{state:oe(oe({},e.state),{},{note:t}),mode:"list"});return e.renderEditor(n)}(t)):u.a.createElement(l.a,{className:h()(ee.content,(n={},ie(n,ee.contentExpanded,!(!D&&!M)||i),ie(n,ee.reading,!a),ie(n,ee.hasTag,T),ie(n,ee.isTemplate,M),n),"note-list-content","override-redirect-in-webview"),onClick:q.isWebAppMiniApp||A?function(e){(e.target.nodeType!==Node.ELEMENT_NODE||null===e.target.closest("ne-tli-i")&&null===e.target.closest("a.ne-link")&&null==e.target.closest("div.ne-card-bookmark")&&null===e.target.closest("div.ne-image-box"))&&(e.preventDefault(),e.stopPropagation(),O(t))}:null},!c&&!D&&u.a.createElement(z.a,re({docId:t.doclet_id,key:"".concat(_,"-description"),content:g,onReady:function(e){return function(e,t){if(e&&!e.container_loaded){e.container_loaded=!0;var n=t.description,r=t.id,a=n&&n.endsWith($.VIEW_MORE_TAG),o=e.getBoundingClientRect().height;if(a||o>se-34){var i=e.closest(".".concat(pe)),c=i.querySelector(".view-more");if(c){if(new URLSearchParams(window.location.search).get("note_id")===String(r))return c.click(),void Object(Z.scrollToElem)(t);c.style.display="block"}var l=i.querySelector(".view-blank");l&&(l.style.cursor="pointer",l.style.display="block"),i.classList.add("view-more-mask")}else{var s=e.closest(".".concat(pe)).querySelector(".view-more");s&&(s.style.display="none")}}}(e,t)},enableDynamicTaskList:e.enableDynamicTaskList,dynamicData:t.doc_dynamic_data},E)),m.id&&u.a.createElement("div",{className:h()({fixAbsolutePosition:!!D||!c})},u.a.createElement(z.a,re({docId:m.id,key:"".concat(_,"-doclet-").concat(m.id,"-").concat(m.content_updated_at),content:Y(t),onReady:function(){return j(t)},onDynamicDataChange:function(){return P&&P(t)},enableDynamicTaskList:e.enableDynamicTaskList,dynamicData:t.doc_dynamic_data},E))),T&&u.a.createElement(b.a,{data:C}),u.a.createElement("div",{className:h()(ee.viewBlank,"view-blank"),onClick:function(e){var t=e.currentTarget;t&&"pointer"===t.style.cursor&&t.nextSibling&&t.nextSibling.click()}}),u.a.createElement("div",{key:"doclet-viewmore-".concat(m.id),className:h()(ee.viewMore,(r={},ie(r,ee.isAlipayWebApp,I),ie(r,ee.viewMoreShow,i),ie(r,ee.expanded,i),r),"view-more"),onClick:function(){var e,n=(e=regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.stopPropagation(),!i){e.next=12;break}if(Object(Z.scrollToElem)(t),!s){e.next=9;break}return e.next=6,S(t);case 6:R(t),e.next=10;break;case 9:R(t);case 10:e.next=15;break;case 12:return e.next=14,S(t);case 14:setTimeout((function(){Object(Z.checkCollapseBtnShow)()}),100);case 15:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ne(o,r,a,i,c,"next",e)}function c(e){ne(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}()},i?u.a.createElement("span",{className:de},u.a.createElement("svg",{style:{width:12,height:12}},u.a.createElement("use",{xlinkHref:"#note-collapse"})),__("收起")):u.a.createElement("span",null,u.a.createElement("svg",{style:{width:12,height:12}},u.a.createElement("use",{xlinkHref:"#note-expand"})),__("展开"))),a&&u.a.createElement("div",{className:ee.mask}),o&&u.a.createElement("div",{className:ee.loading},u.a.createElement(U.a,null)))};function X(e,t){var n,r;return H?null:u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:h()(ee.leftToolBar,(n={},ie(n,ee.batchProcess,_),ie(n,ee.isMobile,A),n))},!e.editing&&function(e){if(m)return null;var t=x.some((function(t){return t.id===e.id}));return u.a.createElement("div",{className:ee.checkBox,onClick:function(){L(!0)}},u.a.createElement(c.a,{onChange:function(t){!0===t.target.checked?N([].concat(te(x),[e])):1===x.length?(N(te(x).filter((function(t){return t.id!==e.id}))),L(!1)):N(te(x).filter((function(t){return t.id!==e.id})))},checked:t}))}(e)),u.a.createElement("div",{className:h()(ee.rightToolBar,(r={},ie(r,ee.batchProcess,_),ie(r,ee.isMobile,A),r))},!t&&!e.editing&&M(e),e.editing&&u.a.createElement("div",{onClick:function(e){var t=e.target.closest(".".concat(pe)).querySelector(".".concat(fe));t&&t.click()},className:h()(ee.rightToolBarSave,"right-tool-".concat(fe))},u.a.createElement("svg",{style:{width:18,height:18}},u.a.createElement("use",{xlinkHref:"#submit"}))),e.expanded_at&&!e.editing&&u.a.createElement("div",{className:h()(ee.rightToolBarCollapse,"right-tool-".concat(de)),onClick:function(){Object(Z.scrollToElem)(e),R(e)}},u.a.createElement("svg",{style:{width:18,height:18}},u.a.createElement("use",{xlinkHref:"#note-collapse"})))))}var Q=function(e){var t=e.content_updated_at,n=e.editing,r=null===t;if(!q.isDev&&r)return null;var a="item-".concat(e.id,"-").concat(e.content_updated_at);q.isDesktopApp&&q.downloadFileHandler;var o=H||A;return u.a.createElement("div",{id:"note-".concat(e.id),key:a,className:h()(ee.note,ie({},ee.selected,n),pe),onDoubleClick:A?null:function(){O(e)}},u.a.createElement("div",{className:h()(ee.noteItem,ie({},ee.noteItemExpand,n),"note-item")},!e.editing&&u.a.createElement("div",{className:ee.meta},u.a.createElement(K,{item:e,orderBy:g}),o&&M(e)),G(e),u.a.createElement("div",{className:h()(ee.tagContainer,he)})),X(e,o))};return a()(d)?u.a.createElement("div",{"data-testid":"note-list-empty",className:h()(ee.wrapper,ee.empty,ie({},ee.desktop,q.isDesktopApp),"note-list-empty")},function(){if(p)return null;if(m)return u.a.createElement("div",{className:ee.blank},__("未能找到相关小记"));var e=W(),t=__("灵光乍现，小记一下");return E===$.STATUS.archived&&(t=__("不再使用的小记可归档于此")),u.a.createElement(u.a.Fragment,null,u.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*4Nf5RqeyDHQAAAAAAAAAAAAAARQnAQ"}),u.a.createElement("p",null,e||t))}()):u.a.createElement("div",{className:h()(ee.wrapper,(t={},ie(t,ee.mobile,A),ie(t,ee.desktop,q.isDesktopApp),ie(t,ee.win,q.isWin),ie(t,ee.searchMode,!A&&m),ie(t,ee.hasSearchBar,A&&V),ie(t,ee.liteViewMode,H),t),"note-list"),"data-testid":"note-list"},function(t){if([$.FILTER_TYPES.all,$.FILTER_TYPES.todo,$.FILTER_TYPES.share,$.FILTER_TYPES.dingTalkRobot].includes(v))return t.sort((function(e,t){return new Date(t[g]).getTime()-new Date(e[g]).getTime()})).map(Q);var n=t.reduce((function(e,t){if(!t.cards)return e;var n=t.cards.map((function(e){return oe(oe({},e),{},{first_published_at:t.first_published_at})}));return e.concat(n||[])}),[]);if(v===$.FILTER_TYPES.image){var r=i()(n,(function(e){return f()(e.first_published_at).startOf("month").format()}));return Object.keys(r).sort((function(e,t){return new Date(t).getTime()-new Date(e).getTime()})).map((function(e){return function(e,t){return u.a.createElement("div",{className:h()(ee.noteItem,ee.images)},u.a.createElement("div",{className:ee.date},Object(q.getLocaleMonthName)(t)),u.a.createElement("div",{className:ee.imagesContent},e.map((function(t,n){return u.a.createElement("div",{onClick:function(){return Object(q.showImgBrowser)(e,n)},className:ee.item,id:"note-image-item-".concat(t.uuid)},u.a.createElement("img",{src:Object(q.getPreviewImage)(J.a.sanitizeUrl(t.src),{size:160})}))}))))}(r[e],e)}))}return v===$.FILTER_TYPES.bookmark?function(e,t){var n=t.webAppNavigate;return u.a.createElement(u.a.Fragment,null,e.map((function(e){return u.a.createElement("div",{className:h()(ee.noteItem,ee.bookmark)},u.a.createElement(l.a,{className:ee.item},u.a.createElement(K,{item:e}),u.a.createElement("a",{href:J.a.sanitizeUrl(e.detail.url),onClick:function(t){n&&n.openInBrowser(e.detail.url)&&t.preventDefault()},target:"_blank"},u.a.createElement("div",{className:ee.left},u.a.createElement("div",{className:ee.title},e.detail.title||__("无标题")),u.a.createElement("div",{className:ee.desc},e.detail.desc||""),u.a.createElement("div",{className:ee.belong},e.detail.icon&&u.a.createElement("img",{src:J.a.sanitizeUrl(e.detail.icon)}),u.a.createElement("span",{className:ee.text},e.detail.belong||e.detail.url||""))),e.detail.image&&u.a.createElement("div",{className:ee.right},u.a.createElement("img",{src:J.a.sanitizeUrl(e.detail.image)})))))})))}(n,e):v===$.FILTER_TYPES.attachment?function(e,t){return u.a.createElement(u.a.Fragment,null,e.map((function(e){return u.a.createElement("div",{className:h()(ee.noteItem,ee.attachment)},u.a.createElement(l.a,{className:ee.item},u.a.createElement(K,{item:e}),u.a.createElement("div",{className:ee.file},u.a.createElement("div",{className:ee.left},t.renderResourceIcon(e),u.a.createElement("span",{className:ee.name},e.name),e.size&&u.a.createElement("span",{className:ee.size},"(",y()(e.size),")")),u.a.createElement("div",{className:ee.right},u.a.createElement("a",{href:J.a.sanitizeUrl(e.src),download:e.name},u.a.createElement(F.a,null))))))})))}(n,e):null}(Object(q.parseCardData)(d,v)),function(){if(o)return u.a.createElement("div",{className:ee.loadMoreBtn,onClick:C,ref:function(e){return T(e)}},__("点击加载更多"));var e=W();return e?u.a.createElement("div",{className:ee.theEndTips},e):d&&d.length>9?u.a.createElement("div",{className:ee.theEndTips},__("我是有底线的")):void 0}())};me.defaultProps={renderEditor:function(){return null},renderResourceIcon:function(){return null},viewMode:ue.full},me.propTypes={isMobile:g.a.bool,isAlipayWebApp:g.a.bool,setLoadRef:g.a.func,setShowRepoModal:g.a.func,state:g.a.object,getNotes:g.a.func,onLoadNote:g.a.func,onCollapseNote:g.a.func,onArchiveNotes:g.a.func,onRemoveNote:g.a.func,onSelectNote:g.a.func,onChangeNode:g.a.func,onFinishLoadNote:g.a.func,onShowPublicModal:g.a.func,onHidePublicModal:g.a.func,onChangeToPublic:g.a.func,onChangeToPrivate:g.a.func,onInsertToLakeEditor:g.a.func,renderToolBar:g.a.func,renderEditor:g.a.func,viewMode:g.a.oneOf(Object.values(ue)),renderResourceIcon:g.a.func,webAppNavigate:g.a.object,enableDynamicTaskList:g.a.bool};t.a=me},2274:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),c=n(2266),l=n(3028),s=n(252),u="index-module_wrapper_F+6pY",d="index-module_liteWrapper_zRLdH",f=s.myNotesConsts.NOTE_LIST_VIEW_MODES;function p(e){var t=e.data,n=e.onRefreshData,r=e.currentTagId,o=e.onSelect,i=e.viewMode,s=e.webProxy,p=e.storage;return i===f.lite?a.a.createElement("div",{className:d},a.a.createElement(c.a,{hideMore:!1,showCount:!0,currentTagId:r,onSelect:o,localStorage:p,storageKey:"NOTE_LIST_TAG_MANAGER",data:t})):a.a.createElement("div",{className:u},a.a.createElement(c.a,{hideMore:!0,showCount:!0,currentTagId:r,onSelect:o,localStorage:p,storageKey:"NOTE_LIST_TAG_MANAGER",data:t,renderRightSide:function(){return a.a.createElement(l.a,{editable:!0,placement:"bottomRight",tagProxy:s.tagMetas,onDestroy:n,onUpdate:n,getPopupContainer:function(e){return e.parentNode}})}}))}p.defaultProps={viewMode:f.full},p.propTypes={data:i.a.array,storage:i.a.object,webProxy:i.a.object,onRefreshData:i.a.func,currentTagId:i.a.int,onSelect:i.a.func,viewMode:i.a.oneOf(Object.values(f))};t.a=p},2275:function(e,t,n){"use strict";var r,a=n(0),o=n.n(a),i=n(1),c=n.n(i),l=n(8),s=n.n(l),u=(n(2708),["onSort","className"]);function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function g(e){var t,n,i=e.onSort,c=e.className,l=m(e,u),f=Object(a.useRef)();function h(e){var t=e.target;if(t.classList.remove("placeholder"),Object.assign(t.style,{width:"",height:""}),!r.dropped){var n=parseInt(t.dataset.index,10);f.current.removeChild(t),f.current.insertBefore(t,f.current.children[n])}}function g(e){if(n!==e){n=e,f.current.classList.add("droppable");var r=f.current.children[n],a=f.current.querySelector(".placeholder")||document.createElement("div");a.classList.add("placeholder"),a!==r&&(f.current.insertBefore(a,r),t=null)}}function v(){n=null;var e=f.current.querySelector(".placeholder:empty");e&&e.remove(),f.current.classList.remove("droppable")}Object(a.useEffect)((function(){Array.from(f.current.querySelectorAll('[draggable="true"]'),(function(e,t){e.dataset.index=t}))}),[e.children]);var y={};return o.a.createElement("div",d({},l,{className:s()("larkui-sortable",c),onDragStart:function(t){var n=t.target;if(n.parentNode===f.current){var a;t.stopPropagation();try{a=JSON.parse(n.dataset.drag)}catch(e){}var o=p(p({},a),{},{type:f.current.dataset.type,index:parseInt(n.dataset.index,10),rect:n.getBoundingClientRect(),origin:{x:t.clientX,y:t.clientY}});t.dataTransfer.setData("application/json",JSON.stringify(o)),r=o,t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(n,t.clientX-o.rect.x,t.clientY-o.rect.y),n.addEventListener("dragend",h,{once:!0}),e.onDragStart(),setTimeout((function(){n.classList.add("placeholder"),Object.assign(n.style,{width:"".concat(o.rect.width,"px"),height:"".concat(o.rect.height,"px")})}),1)}},onDragEnter:function(e){e.dataTransfer.dropEffect="move",t=null},onDragOver:function(e){var n=r;if(n&&n.type===f.current.dataset.type){e.preventDefault();var a=e.clientX-n.origin.x,o=e.clientY-n.origin.y,i={width:n.rect.width,height:n.rect.height,top:n.rect.top+o,right:n.rect.right+a,bottom:n.rect.bottom+o,left:n.rect.left+a},c=(e.clientY,y.clientY,e.clientX-y.clientX>0),l=(e.clientX,y.clientX,e.clientY-y.clientY>0);y={clientX:e.clientX,clientY:e.clientY},t||(t=Array.from(f.current.children,(function(e){return e.getBoundingClientRect()})));var s=t.reduce((function(e,t,n){if(i.top>t.bottom||i.right<t.left||i.bottom<t.top||i.left>t.right)return e;var r=Math.max(i.left,t.left),a=Math.max(i.top,t.top),o=(Math.min(i.right,t.right)-r)*(Math.min(i.bottom,t.bottom)-a);return o>e.area?{area:o,index:c||l?n+1:n}:e}),{area:0});s.area/(i.width*i.height)>=.3?g(s.index):g(t.length)}},onDragLeave:function(e){if(!e.currentTarget.contains(e.relatedTarget)){var t=e.currentTarget.getBoundingClientRect(),n=getComputedStyle(e.currentTarget).marginTop,r=Math.max(t.top,t.top-parseInt(n,10));e.clientX>=t.left&&e.clientX<=t.right&&e.clientY>=r&&e.clientY<=t.bottom||v()}},onDrop:function(e){e.preventDefault();var t=r;null!=t.index&&null!=n&&(t.dropped=!0,i(t,n)),v()},ref:f}),e.children)}g.defaultProps={onDragStart:function(){}},g.propTypes={children:c.a.array,className:c.a.string,onSort:c.a.func,onDragStart:c.a.func},t.a=g},2276:function(e,t,n){"use strict";var r=n(0);t.a=function(e,t){Object(r.useEffect)((function(){if(e){var n=function(e){return e.preventDefault(),t&&(e.returnValue=t),t};return window.addEventListener("beforeunload",n),function(){return window.removeEventListener("beforeunload",n)}}}),[t,e])}},2277:function(e,t,n){"use strict";n(196);var r=n(95),a=n(0),o=n.n(a),i=n(1),c=n.n(i),l=n(1739),s=n.n(l),u=n(105),d=n(119),f=n(156),p=n(34),h=n(2099),m=n(99),g="ReaderAudit-module_closeBtn_hHU+3",v="ReaderAudit-module_detail_mWCgN",y="ReaderAudit-module_toggleDetail_pq7CA",b="ReaderAudit-module_moreLink_oxcCo";function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e){var t,n=_(Object(a.useState)(!1),2),i=n[0],c=n[1],l=_(Object(a.useState)(!0),2),m=l[0],k=l[1],x=null===(t=window.appData.settings)||void 0===t?void 0:t.forbid_insecure_content,E=e.doc,C=e.type,O=E.audits,S=E.read_status,R=E.id,j=E.content_updated_at,P=E.abilities,A=void 0===P?{}:P,T=window.appData,D=T.book,M=T.group,N=T.me,L=e.isYuque||window.appData.isYuque;var I="audit_ignored_".concat(C,"_").concat(R);if(Object(a.useEffect)((function(){if(S===u.READ_STATUS.insecure)if(N.isAdmin||A.update){if(!x){var e=localStorage.getItem(I);if(e&&j){var t=new Date(j).getTime();k(t>e)}}}else k(!1)}),[]),S<=u.READ_STATUS.ok&&(null==D?void 0:D.status)!==d.STATUS.banned&&(null==M?void 0:M.status)!==f.STATUS.blocked)return null;if(S<=u.READ_STATUS.ok&&((null==D?void 0:D.status)===d.STATUS.banned||(null==M?void 0:M.status)===f.STATUS.blocked))return null;if("Comment"===C&&S<=u.READ_STATUS.ok)return null;var B=[];O&&(O.forbidden||O.reason)&&(B=O.forbidden||[O.reason]);var z,F={};if(F[u.READ_STATUS.pending]=__("当前内容正在审核中，其他人暂时无法查看，请稍候。"),F[u.READ_STATUS.suspect]=__("当前内容疑似有违规内容，其他人无法查看，请检查并修正后再发布。"),F[u.READ_STATUS.illegal]=__("当前内容有违规内容，其他人无法查看，请修正后再发布。"),F[u.READ_STATUS.banned]=__("当前内容疑似含敏感信息已被系统屏蔽，当前其他人无法查看，请修正后再发布。"),L)z=F[S]||F[u.READ_STATUS.suspect];else{var U=B.length>0?o.a.createElement("a",{onClick:function(e){e.preventDefault(),c(!i)},className:y},i?"收起详情":"展开详情"):null,V=o.a.createElement("a",{href:"https://yuque.antfin.com/lark/bqllwz/cg2xev",target:"_blank",className:b},"了解更多");z=x||S!==u.READ_STATUS.insecure?o.a.createElement(o.a.Fragment,null,"当前文档中包含疑似明文敏感信息（包括不限于OSS秘钥、AK信息、数据库账密等），已被系统自动设置为私密，请脱敏或删除明文敏感信息后重新发布。",V,U," "):o.a.createElement(o.a.Fragment,null,"当前文档中包含疑似明文敏感信息（包括不限于OSS秘钥、AK信息、数据库账密等），可能会造成公司信息数据泄露，请脱敏或删除明文敏感信息后重新发布。",V,U)}if(!m)return null;var q=L?{}:{padding:24,paddingRight:32,marginTop:8,position:"relative"};return o.a.createElement(h.a,{style:w({marginBottom:"Doc"===C?24:0},q),icon:o.a.createElement(p.a,{name:"doc-has-content-risk",height:17,width:15}),content:o.a.createElement(o.a.Fragment,null,!L&&o.a.createElement(r.a,{title:__("确认忽略该提醒？"),onConfirm:function(e){e.preventDefault(),localStorage.setItem(I,Date.now()),k(!1)},okText:__("忽略"),cancelText:__("取消"),placement:"bottom"},o.a.createElement("span",{className:g},o.a.createElement(p.a,{name:"delete",width:14}))),o.a.createElement("span",{"data-testid":"audit-tip"},z),i&&o.a.createElement("ul",{className:v},function(e){var t=e.filter((function(e){return null!==e}));return s()(t)}(B).map((function(e){return o.a.createElement("li",{key:e},e)}))))})}C.defaultProps={isYuque:window.appData.isYuque},C.propTypes={doc:c.a.object.isRequired,type:c.a.string,isYuque:c.a.bool};t.a=Object(m.b)(C)},2280:function(e,t,n){"use strict";t.a={fullscreen:"index-module_fullscreen_YFc74",head:"index-module_head_5fmgf",back:"index-module_back_1eag2",pageTitle:"index-module_pageTitle_UaM1v",headNav:"index-module_headNav_10ysn",headActions:"index-module_headActions_dizKK",versionNameTip:"index-module_versionNameTip_+ul2k",versionName:"index-module_versionName_mi01u",body:"index-module_body_LQoQ8",aside:"index-module_aside_kliFq",main:"index-module_main_kYLWG",content:"index-module_content_8lh-O",document:"index-module_document_oSFJb",fixed:"index-module_fixed_5d1CF",toolbar:"index-module_toolbar_icO0H",adapt:"index-module_adapt_esbh-",doc:"index-module_doc_2jnwi",fadein:"index-module_fadein_4cIRi",flash:"index-module_flash_ytr2T"}},2283:function(e,t,n){"use strict";n.d(t,"a",(function(){return te})),n.d(t,"b",(function(){return ie}));var r=n(0),a=n.n(r),o=n(1),i=n.n(o),c=n(28),l=n(3),s=n.n(l),u=n(8),d=n.n(u),f=n(19),p=n.n(f),h=n(17),m=n(51),g=n.n(m),v=n(6),y=n.n(v),b=n(7),k=n.n(b),w=n(9),x=n.n(w),_=n(10),E=n.n(_),C=n(4),O=n.n(C),S=n(68),R=n.n(S);function j(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}j("/* stylelint-disable */\n");var P=c.i.Board;function A(e){var t=e.viewModel,n=t.diagram,r=t.onProperties,o=t.showProperties,i=t.onSave,c=t.engine,l=t.mini,s=t.readOnly,u=t.onMaximize,d=t.focusMode,f=t.setFocusMode;return n&&c?a.a.createElement("div",{className:"lake-board-toolbar"},a.a.createElement(P.Toolbar,{diagram:n,mini:l,onSave:i,onProperties:r,readOnly:s,showProperties:o,onMaximize:u,focusMode:d,setFocusMode:f})):a.a.createElement("div",{className:"lake-board-toolbar"})}A.propTypes={viewModel:i.a.shape({diagram:i.a.object,onProperties:i.a.func,onImageInputChange:i.a.func,showProperties:i.a.bool,mini:i.a.bool,readOnly:i.a.bool,onSave:i.a.func,onMaximize:i.a.func,engine:i.a.object,focusMode:i.a.bool,setFocusMode:i.a.func})};var T=c.i.Board;function D(e){var t=e.viewModel,n=t.diagram,r=t.onProperties,o=t.showProperties,i=t.engine,c=t.mini;return n&&i&&!o?a.a.createElement("div",{className:"lake-board-contextual-menu-wrap"},a.a.createElement(T.ContextualMenu,{diagram:n,mini:c,onProperties:r})):a.a.createElement("div",{className:"lake-board-contextual-menu-wrap"})}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){var t=e.getBoundingClientRect(),n=t.height;return{width:t.width,height:n}}function L(e){var t=e.diagram,n=e.setDiagram,a=e.model,o=e.container,i=e.engine,l=e.mini,u=a.diagramData,d=a.viewportSetting,f=a.mode;Object(r.useEffect)((function(){if(!t){var e=new c.l(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({container:o.current,plugins:[c.t.Board],mode:f,paper:{size:"auto"}},N(o.current)));n(e)}return function(){return t&&t.destroy()}}),[t]),Object(r.useEffect)((function(){i&&i.setValue({diagramData:u,viewportSetting:d})}),[i]),Object(r.useEffect)((function(){var e=o.current,n=new ResizeObserver((function(n){var r=n.find((function(t){return t.target===e}));if(t&&r&&r.contentRect){var a=N(o.current),i=a.width,c=a.height,s=l?18:0;t.changeSize(i+s,c+s)}}));return n.observe(e),function(){return n.unobserve(e)}}),[t,l])}function I(e){var t=Object(r.useRef)(),n=e.viewModel,o=n.diagram,i=n.setDiagram,c=n.model,l=n.engine,s=n.mini,u=n.focusMode,d=n.setFocusMode;return L({diagram:o,setDiagram:i,model:c,container:t,engine:l,mini:s}),a.a.createElement("div",{ref:t,className:"lake-board-canvas"},a.a.createElement(A,{viewModel:n,focusMode:u,setFocusMode:d}),a.a.createElement(D,{viewModel:n}))}D.propTypes={viewModel:i.a.shape({diagram:i.a.object,onProperties:i.a.func,showProperties:i.a.bool,mini:i.a.bool,engine:i.a.object})},j(".lake-board-editor .lake-board-content .lake-board-canvas {\n  width: 100%;\n  height: 100%;\n}\n"),I.defaultProps={viewModel:{}},I.propTypes={viewModel:i.a.shape({model:i.a.object,engine:i.a.object,diagram:i.a.object,setDiagram:i.a.func,mini:i.a.bool,focusMode:i.a.bool,setFocusMode:i.a.func})};var B=c.i.Board;function z(e){var t=e.viewModel,n=t.diagram,r=t.propertiesWidth,o=t.onProperties;return a.a.createElement("div",{className:"lake-board-properties",style:{width:"".concat(r,"px"),flex:"none"}},n&&a.a.createElement(B.Properties,{diagram:n,onClose:function(){o()}}))}z.defaultProps={viewModel:{}},z.propTypes={viewModel:i.a.shape({diagram:i.a.object,propertiesWidth:i.a.number,onProperties:i.a.func})},j("/* stylelint-disable */\n.lake-board-editor {\n  width: 100%;\n  height: 100%;\n}\n.lake-board-editor .lake-board-content {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n.lake-board-editor .lake-board-content .lake-board-canvas-wrapper {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n}\n.lake-board-editor .lake-board-content .lake-board-canvas-wrapper.lake-board-has-properties {\n  width: calc(100% - 284px);\n  margin-right: 284px;\n}\n.lake-board-editor .lake-board-content .lake-board-properties-wrapper {\n  width: 284px;\n  height: 100%;\n  position: absolute;\n  right: 0;\n}\n.lake-board-editor .lake-board-content .lake-board-properties-wrapper .lake-board-properties {\n  height: 100%;\n}\n");var F=c.i.LinkEditor,U=c.i.Note,V=c.i.Board;function q(e){var t=e.viewModel,n=t.showProperties,r=t.diagram,o=t.focusMode,i=t.setFocusMode;return a.a.createElement("div",{className:"lake-board-editor"},a.a.createElement("div",{className:"lake-board-content"},a.a.createElement("div",{className:d()("lake-board-canvas-wrapper",{"lake-board-has-properties":n})},a.a.createElement(I,{viewModel:t,focusMode:o,setFocusMode:i}),r&&a.a.createElement(V.ContextMenu,{diagram:r})),n&&a.a.createElement("div",{className:"lake-board-properties-wrapper"},a.a.createElement(z,{viewModel:t}))),r&&a.a.createElement(F,{diagram:r}),r&&a.a.createElement(U.Editor,{diagram:r}))}q.defaultProps={viewModel:{}},q.propTypes={viewModel:i.a.shape({diagramData:i.a.object,engine:i.a.object,diagram:i.a.object,showProperties:i.a.bool,focusMode:i.a.bool,setFocusMode:i.a.func})};var H=c.d.exportData,W=c.d.importData,Y=c.d.onBeforeSave,G=function(e){x()(n,R.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E()(this,n)}}(n);function n(e){var r,a=e.diagram,o=e.model,i=e.uploader;y()(this,n),r=t.call(this);var l=new c.o.Event;return r.model=o,r.diagram=a,r.uploader=i,r.eventHelper=l,l.bind(a,"aftercommandexecute",(function(e){var t=e.isModelChange,n=e.commandName,a=e.useTime;t&&r.emit("change"),r.emit("commandEnd",n,a)})),r}return k()(n,[{key:"save",value:function(){this.emit("save")}},{key:"setValue",value:function(e){var t=this.diagram,n=this.model,r=this.uploader;n.update(e);var a=n.diagramData,o=n.viewportSetting;t.clear(),W({data:a,diagram:t,uploader:r}),o&&("IndependentDocAutoFit"===o?function(e){var t=e.getCells().filter((function(e){return e.isRoot&&e.isMindmap&&!e.isLine}));e.viewport.autoFit({zoom:1}),t.length>0&&e.viewport.scrollIntoView(t[0])}(t):"object"===g()(o)&&t.viewport.set(o))}},{key:"getValue",value:function(){var e=this.diagram;return{format:"lakeboard",type:"Board",version:"1.0",diagramData:H(e),viewportSetting:e.viewport.toObject(),text:this.getText()}}},{key:"getMeta",value:function(){return{cellCount:this.diagram.getCells().length}}},{key:"getHtml",value:function(){return this.diagram?this.diagram.exporter.html():"<div>LakeBoard</div>"}},{key:"getText",value:function(){return this.diagram?this.diagram.exporter.getText():"LakeBoard"}},{key:"download",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"jpeg",t=arguments.length>1?arguments[1]:void 0,n=this.diagram;return n.exporter.download(e,t)}},{key:"canvas",value:function(){var e,t=this.diagram;return(e=t.exporter).canvas.apply(e,arguments)}},{key:"onBeforeSave",value:function(){return Y(this,this.uploader)}},{key:"destroy",value:function(){this.diagram=void 0,this.uploader=void 0,this.eventHelper.destroy(),this.destroyed=!0}}]),n}();function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y()(this,e),this.update(K({diagramData:{head:{},body:[]},viewportSetting:null},t))}return k()(e,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this,e)}}]),e}();function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J=c.d.uploadImage;function ee(e){var t=e.file,n=e.uploader,r=e.diagram,a=e.from,o=e.x,i=e.y;return new Promise((function(e){J({file:t,uploader:n,enable:function(){return r.command.enable("MindmapAttachImage")||r.command.enable("InsertImage")},callback:function(t){var n=r.selector.selections;"clipboard"===a&&(t.firstInsertRatio=1/window.devicePixelRatio),1===n.length&&n[0].isMindmap?r.command.execute("MindmapAttachImage",{image:t}):r.command.execute("InsertImage",{image:t,x:o,y:i}),e(t)}})}))}function te(e){var t=function(e){var t=e.data,n=e.onLoad,a=e.uploader,o=e.mini,i=void 0!==o&&o,c=e.onMaximize,l=Object(r.useMemo)((function(){return new Z(t)}),[t]),s=Object(r.useState)(null),u=p()(s,2),d=u[0],f=u[1],m=Object(r.useState)(!1),g=p()(m,2),v=g[0],y=g[1],b=Object(r.useState)(null),k=p()(b,2),w=k[0],x=k[1],_=Object(r.useState)(!1),E=p()(_,2),C=E[0],O=E[1];function S(){y(!v),setTimeout((function(){window.dispatchEvent(new Event("resize"))}))}return l.mode="edit",Object(r.useEffect)((function(){if(d){var e=new G({diagram:d,model:l,uploader:a});return x(e),n(e),function(){return e.destroy()}}}),[d]),Object(r.useEffect)((function(){function e(e){ee(Q(Q({},e),{},{file:e.files[0],uploader:a,diagram:d}))}if(d)return d.on("importimage",e),function(){return d.off("importimage",e)}}),[d]),Object(r.useEffect)((function(){function e(e){(function(e){return h.ua.macos?e.metaKey:e.ctrlKey})(e)&&("s"===e.key?(e.preventDefault(),w.save()):"."===e.key&&(e.preventDefault(),O((function(e){return!e}))))}return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[w,S]),Object(r.useEffect)((function(){function e(e){if(!a.isCompleted())return e.preventDefault(),e.returnValue="仍有图片正在上传中，是否确认关闭？",""}return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[w]),{model:l,engine:w,uploader:a,onImageInputChange:function(e){ee({file:e.nativeEvent.target.files[0],uploader:a,diagram:d}),e.nativeEvent.target.value=null},onMaximize:c,onSave:function(){w.save()},onProperties:S,diagram:d,setDiagram:f,mini:i,showProperties:!i&&v,setShowProperties:y,focusMode:C,setFocusMode:O}}(e);return a.a.createElement(q,{viewModel:t})}function ne(e){var t=e.viewModel,n=Object(r.useRef)();return L({diagram:t.diagram,setDiagram:t.setDiagram,model:t.model,container:n,engine:t.engine,mini:t.mini}),a.a.createElement("div",{ref:n,className:"lake-board-canvas"},a.a.createElement(A,{viewModel:t}))}te.defaultProps={data:{},onLoad:function(){}},te.propTypes={data:i.a.shape({diagramData:i.a.object}),onLoad:i.a.func,uploader:i.a.object.isRequired},j(".lake-board-reader .lake-board-content .lake-board-canvas {\n  width: 100%;\n  height: 100%;\n  user-select: none;\n}\n"),ne.defaultProps={viewModel:{},contentContainer:{}},ne.propTypes={viewModel:i.a.shape({diagram:i.a.object,setDiagram:i.a.func,model:i.a.object,engine:i.a.object,mini:i.a.bool}),contentContainer:i.a.object.isRequired},j("/* stylelint-disable */\n.lake-board-reader {\n  width: 100%;\n  height: 100%;\n}\n.lake-board-reader .lake-board-content {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n.lake-board-reader .lake-board-content .lake-board-canvas-wrapper {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n}\n");var re=c.i.Note,ae=c.i.Board;function oe(e){var t=e.viewModel,n=t.diagram;return a.a.createElement("div",{className:"lake-board-reader"},a.a.createElement("div",{className:"lake-board-content"},a.a.createElement("div",{className:"lake-board-canvas-wrapper"},a.a.createElement(ne,{viewModel:t}),n&&a.a.createElement(ae.ContextMenu,{diagram:n}))),n&&a.a.createElement(re.Reader,{diagram:n}))}function ie(e){var t,n,o,i,c,l,s,u,d,f,h,m,g,v,y=(n=(t=e).data,o=t.onLoad,i=t.mini,c=t.onMaximize,l=Object(r.useMemo)((function(){return new Z(n)}),[n]),s=Object(r.useState)(null),u=p()(s,2),d=u[0],f=u[1],h=Object(r.useState)(null),g=(m=p()(h,2))[0],v=m[1],l.mode="read",Object(r.useEffect)((function(){if(d){var e=new G({diagram:d,model:l});return v(e),o(e),function(){return e.destroy()}}}),[d]),{model:l,onMaximize:c,mini:i,engine:g,setEngine:v,diagram:d,setDiagram:f,readOnly:!0});return a.a.createElement(oe,{viewModel:y})}oe.defaultProps={viewModel:{}},oe.propTypes={viewModel:i.a.shape({diagramData:i.a.object,diagram:i.a.object})},ie.defaultProps={data:{},onLoad:function(){}},ie.propTypes={data:i.a.shape({diagramData:i.a.object}),onLoad:i.a.func}},2284:function(e,t,n){"use strict";n.d(t,"a",(function(){return ge})),n.d(t,"b",(function(){return A}));var r=n(51),a=n.n(r),o=n(2741),i=n.n(o),c=n(1977),l=n.n(c),s=n(296),u=n.n(s),d=n(2735),f=n.n(d),p=n(29),h=n.n(p),m=n(593),g=n.n(m),v=n(19),y=n.n(v),b=n(2709),k=n.n(b);function w(e,t){return function(e){for(var t,n=e.rows,r=n.length,a=[],o=[],i=0,c=0,l=0,s=0;s<r;s++){for(var u=n[s].cells,d=0,f=0;f<u.length;f++){var p=u[f],h=p.rowSpan,m=p.colSpan;i+=h*m,d+=m,h>1&&(c+=(h-1)*m)}o[s]=d,0===s&&(t=d),l=Math.max(d,l)}if(g()(i/t)&&t===l){var v=0;if(o.forEach((function(e){v+=l-e})),v!==c){var y=c-v;if(y&&g()(y/l)){for(var b=[],k=0;k<r;k++){for(var w=n[k].cells;a[k+b.length]===l;)b.push(k+b.length);for(var x=k+b.length,_=0;_<w.length;_++){var E=w[_],C=E.rowSpan,O=E.colSpan;if(C>1)for(var S=1;S<C;S++)a[x+S]=(a[x+S]||0)+O}}b.forEach((function(t){e.insertRow(t)}))}}}}(e),function(e){var t=e.rows[0];0===t.cells.length&&t.remove(),e.rows.length>1&&1===t.cells.length&&""===t.cells[0].innerText.trim()&&0===t.cells[0].getElementsByTagName("img").length&&1===t.cells[0].colSpan&&1===t.cells[0].rowSpan&&t.remove()}(e),function(e){Array.from(e.rows).forEach((function(e){var t=e.getAttribute("style"),n=t&&t.match(/mso-xlrowspan:(\d+)/),r=e.getAttribute("height");if(n&&r){var a=parseInt(n[1]);r=parseInt(r)/a||24,e.setAttribute("height",r),e.style.height=r+"px"}if(Array.from(e.cells).forEach((function(t){var n=t.getAttribute("style");if(t.setAttribute("height",r),t.style.height=r+"px",t.colSpan>1&&n&&-1!==n.indexOf("mso-ignore:colspan")){var a=t.colSpan;t.setAttribute("colSpan",1);for(var o=1;o<a;o++){var i=t.cloneNode();e.insertBefore(i,t.nextSibling)}}})),n){var o=parseInt(n[1]);if(o<1e6)for(var i=1;i<o;i++){var c=e.cloneNode();e.parentNode.insertBefore(c,e)}}}))}(e),function(e,t){for(var n=[],r=e.rows,a=r.length,o=100,i=0;i<a;i++){var c=r[i].cells,l=c.length;n[i]=n[i]||[];for(var s=l>16300,u=0;u<l;u++){var d=c[u];if(s&&u>o&&""===d.innerHTML&&x(d))break;o=Math.max(o,u);for(var f=d.rowSpan,p=void 0===f?1:f,m=d.colSpan,g=void 0===m?1:m,v=p>1||g>1,y=u;n[i][y];)y++;if(n[i][y]={rowSpan:p,colSpan:g,isMulti:v,element:d},v)for(var b=p;b>0;){for(var k=g;k>0;){if(1!==k||1!==b){var w=i+b-1,_=y+k-1;n[w]=n[w]||[],n[w][_]={isEmpty:!0,parent:{row:i,col:y}}}k--}b--}}}var E=n.map((function(e){return e.length})),C=Math.max.apply(Math,h()(E));return n.forEach((function(e,n){if(e.length<C)for(var r=C-e.length;r--;)0!==n||t?e.push({rowSpan:1,colSpan:1,isShadow:!0,element:null}):e.unshift({rowSpan:1,colSpan:1,isShadow:!0,element:null});for(var a=0;a<C;a++)e[a]||(e[a]={rowSpan:1,colSpan:1,isShadow:!0,element:null})})),{rows:n.length,cols:C,table:n}}(e,t)}function x(e){for(var t=10;t>0&&e;){if(e.tagName&&"td"===e.tagName.toLowerCase()){if(""!==e.innerHTML)return!1;t-=1}e=e.nextSibling}return!0}function _(e,t,n){var r=e.match(/<col[^>]*>/g),a=0;if(r){var o=r[r.length-1].match(/<col[^>]*span=(\d+)[^>]*>/);o&&(a=parseInt(o[1],10))}if(a>n){var i=e.split("</tr>");e=(i=i.map((function(e){var t=e.match(/(\s*<td[^>]*>\s*<\/td>)(\s*)$/);if(t){var n=t[1].repeat(a-30);e.endsWith(n+t[2])&&(e=e.substr(0,e.length-n.length-t[2].length))}return e}))).join("</tr>")}var c=e.match(/\s*<tr[^>]*>\s*(<td[^>]*>\s*<\/td>\s*)+<\/tr>/g);if(c&&c.length>t){var l=e.match(/<td[^>]*>[^<]*[^\s<]+[^<]*<\/td>/g);if(!l)return"<table><tr><td></td></tr></table>";var s=l[l.length-1],u=e.lastIndexOf(s),d=e.slice(0,u+s.length);e=e.slice(u+s.length);var p={};c.forEach((function(e){p[e]=p[e]||{content:e,count:0},p[e].count+=1}));for(var h=Object.values(p),m=(h=f()(h,"count")).length-1;h[m];){var g=h[m];if(g.count>t){var v=g.content.replace(/([*.?+$^[\](){}|/\\])/g,(function(e){return"\\".concat(e)}));e=e.replace(new RegExp(v,"g"),"")}m--}e=d+e}return e}var E=/^\s*\(?¥\s*\(?[\d,.]+\)?$/,C=/^#+$/,O=/^\d\.\d+[Ee]\+\d+$/,S=String.fromCharCode(165),R=String.fromCharCode(36),j=String.fromCharCode(8364),P=String.fromCharCode(163);function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;e=T(e=_(e,200,200));var o=(new DOMParser).parseFromString(e,"text/html"),c=o.body,s=te(o.all,(function(e){return"STYLE"===e.tagName}));if(!c)return null;for(var u,d=c.firstChild,f=[],p=[],h={},m={},g=[],v={},y=!1;d;)if(I(d)){var b=K(d,f.length,s,a);b.mergeCells&&(p=p.concat(b.mergeCells)),b.startCell&&(u=b.startCell),b.selectOptions&&Object.assign(v,b.selectOptions),Object.assign(m,b.rows),b.columns&&Object.assign(h,b.columns),f=f.concat(b.table),b.cellsNeedFix&&(g=g.concat(b.cellsNeedFix)),d=X(d),y=!1}else if(q(d))U(d)&&(d.innerHTML=""),B(d)&&(d.innerHTML=d.innerHTML.replace(/\n/g,"<br/>")),d=d.firstChild||X(d),y=!1;else if(F(d)){var k=d.innerText.trim(),w=d.getAttribute("href");N(f,f.length,k,w),y=!1,d=X(d)}else if(z(d)){var x=d.getAttribute("src");L(f,f.length,x,a),y=!1,d=X(d)}else if(W(d))d=d.firstChild||X(d);else if(Y(d))y=!1,d=X(d);else if(G(d)){var E=d.data;if(""!==E.trim()||!q(d.parentNode)){var C=y?f.length-1:f.length;M(f,C,E),y=!0}d=X(d)}else d=X(d);var O=D(f);p=l()(p,(function(e){return"".concat(e.row,":").concat(e.col)}));var S=i()(f.map((function(e){return e.length})))||20,R={name:n||"Sheet".concat(t+1),rowCount:r?Math.max(f.length,r.rowCount):f.length,colCount:r?Math.max(S,r.colCount):S,data:O,mergeCells:p,rows:m,columns:h,filter:{},index:t,defaults:{}};return u&&(R.startCell=u),Object.keys(v).length>0&&(R.selectOptions=v),g.length>0&&(R.cellsNeedFix=g),R}function T(e){return e.replace(/\\0022/g,"")}function D(e){var t={};return e.forEach((function(e,n){e.forEach((function(e,r){e&&0!==Object.keys(e).length&&(t[n]=t[n]||{},0!==Object.keys(e).length&&(t[n][r]=e))}))})),t}function M(e,t,n){e[t]=e[t]||[],e[t][0]?e[t][0].value+=""+n:e[t][0]={value:n}}function N(e,t,n,r){e[t]=e[t]||[],e[t][0]=e[t][0]||{},e[t][0].value={class:"link",text:n,url:r}}function L(e,t,n,r){n=function(e){return e.replace(/\?x-oss-process=image\/resize.+/,"")}(n),e[t]=e[t]||[],e[t][0]=e[t][0]||{},e[t][0].value=r?{class:"image",name:"",src:n}:{class:"image",name:"",status:"needUpload",originSrc:n}}function I(e){return"TABLE"===e.tagName}function B(e){return"PRE"===e.tagName}function z(e){return"IMG"===e.tagName}function F(e){return"A"===e.tagName}function U(e){var t=e.getAttribute("style");return t&&t.startsWith("mso-element")}var V=["BODY","ARTICLE","ASIDE","ADDRESS","DD","DL","FIELDSET","FIGCAPTION","FIGURE","FOOTER","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","P","DIV","PRE","BLOCKQUOTE","UL","OL","LI","TABLE","THEAD","TBODY","TFOOT","SECTION"];function q(e){return 1===e.nodeType&&V.includes(e.tagName)}var H=["B","I","ABBR","CITE","CODE","DFN","DEL","EM","KBD","STRONG","SAMP","A","BDO","Q","SPAN","SUB","SUP","BUTTON","LABEL"];function W(e){return 1===e.nodeType&&H.includes(e.tagName)}function Y(e){return"BR"===e.tagName}function G(e){return 3===e.nodeType}function X(e){if(e.nextSibling)return e.nextSibling;for(var t=e.parentNode;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}return null}function K(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=e.cloneNode(!0);document.body.appendChild(o);var i=w(o,r),c={};n&&n.forEach((function(e){document.body.appendChild(e),Object.assign(c,J(e.innerHTML))}));var l={table:[]},s=o.querySelectorAll("col");if(s.length>0){var u={},d=0;s.forEach((function(e){for(var t=parseInt(e.getAttribute("width")),n=e.span,r=0;r<n&&d<i.cols;)u[d]=0!==t?{size:t}:{size:0,hidden:!0,oldSize:120},d+=1,r+=1})),l.columns=u}var f=Array.from(o.rows);l.rows={},f.forEach((function(e,n){if(0===e.offsetHeight&&n!==f.length-1)l.rows[n+t]={size:0,hidden:!0,oldSize:24};else{var r=Math.max(e.offsetHeight,24)||24,a={size:r};24!==r&&(a.customSize=r),l.rows[n+t]=a}}));var p=o.getAttribute("data-startCell");if(p){var h=p.split(":");l.startCell={row:parseInt(h[0])||0,col:parseInt(h[1])||0}}var m=o.getAttribute("data-selectOptions");if(m)try{l.selectOptions=JSON.parse(decodeURIComponent(m))}catch(e){console.log(e)}return i.table.forEach((function(e,n){l.table[n]=[],e.forEach((function(e,o){if(e.element){var i=Z(e.element,r),s=Q(e.element),u={name:"auto"},d=!1;if(c){var f=e.element.classList&&e.element.classList[0];c[f]&&("object"===a()(c[f])?Object.assign(u,c[f]):u.name=c[f],["currency","number","percentage"].includes(u.name)&&(u.decimal=2),l.table[n][o]=l.table[n][o]||{},l.table[n][o].type=u,["text","auto"].includes(u.name)||(d=!0))}s&&(l.table[n][o]=l.table[n][o]||{},l.table[n][o].style=s),void 0!==i&&""!==i?(l.table[n][o]=l.table[n][o]||{},l.table[n][o].type=u,l.table[n][o].value=i,"string"==typeof i&&((C.test(i)||O.test(i))&&(d=!0),E.test(i)&&"auto"===u.name&&(d=!0,l.table[n][o].type.name="currency",l.table[n][o].type.symbol=S,l.table[n][o].type.decimal=2))):""===i&&l.columns&&l.columns[o]&&l.columns[o].size<=15&&l.columns[o].size>=0&&(d=!0),d&&r&&(l.cellsNeedFix=l.cellsNeedFix||[],l.cellsNeedFix.push({row:n+t,col:o})),e.isMulti&&(l.mergeCells=l.mergeCells||[],l.mergeCells.push({row:n+t,col:o,rowCount:e.rowSpan,colCount:e.colSpan}),s&&(l.table[n+e.rowSpan-1]=l.table[n+e.rowSpan-1]||[],l.table[n+e.rowSpan-1][o+e.colSpan-1]=l.table[n+e.rowSpan-1][o+e.colSpan-1]||{},l.table[n+e.rowSpan-1][o+e.colSpan-1].style=s))}}))})),o.remove(),n&&n.forEach((function(e){e.remove()})),l}function Z(e,t){var n=e.getAttribute("data-value");if(n)try{var r=JSON.parse(decodeURIComponent(n));if(function(e){return!!e.class&&("link"===e.class?e.text&&e.url:"file"===e.class||"image"===e.class?e.name&&e.src:"checkbox"===e.class?void 0!==e.value:"select"===e.class?e.value&&(e.options||e.optionId):"mention"===e.class?e.value&&e.value[0].id&&e.value[0].login:"formula"===e.class&&void 0!==e.formula)}(r))return r}catch(e){console.log(e)}for(var a=e.querySelectorAll("img"),o=a.length,i=0;i<o;i++){var c=a[i].getAttribute("src");if(c)return t?{class:"image",src:c,name:"image"}:{class:"image",status:"needUpload",originSrc:c,name:"image"}}e.innerHTML=e.innerHTML.replace(/<!--\[if[\s\S]+<!--\[endif\]-->/g,"").replace(/<rt[^>]*>[^<]*<\/rt>/g,"").replace(/\n/g,"").replace(/<br>\s+/g,"\n");var l,s=e.innerHTML.replace(/<[^>]+>/g,"").trim();s="string"!=typeof(l=s)?l:l.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&nbsp;/g," ");var u=e.querySelector("a");return u&&u.getAttribute("href")?{class:"link",text:s.replace(/\n/g,""),url:u.getAttribute("href")}:(s.endsWith(" %")&&(s=s.replace(/ %$/,"%")),s)}var $={"-webkit-left":"left","-webkit-right":"right","-webkit-center":"center",left:"left",right:"right",center:"center","-webkit-baseline-middle":"middle",top:"top",bottom:"bottom",middle:"middle"};function Q(e){try{var t=window.getComputedStyle(e),n={};1===e.childNodes.length&&"S"===e.childNodes[0].tagName&&(n.strikeThrough=!0);var r=function(e){var t;-1!==e.indexOf("pt")&&(t=parseInt(e,10));var n=12;if(-1!==e.indexOf("em")?n=parseFloat(e,14):-1!==e.indexOf("px")&&(n=parseFloat(e,10)),t=t||Math.round(n/1.3333333),ee[t])return t;var r=Object.keys(ee).map((function(e){return parseInt(e,10)}));r.sort();for(var a=0;r[a];){if(r[a]>t)return r[a];a++}return r[a-1]}(t.fontSize);return-1!==t.textDecoration.indexOf("underline")&&(n.underline=!0),-1!==t.textDecoration.indexOf("line-through")&&(n.strikeThrough=!0),(r>12||e.style.fontSize&&e.style.fontSize.indexOf("px")>0)&&(n.fontSize=r),["rgba(0, 0, 0)","rgb(0, 0, 0)","rgba(0, 0, 0, 0.65)","rgb(89, 89, 89)"].includes(t.color)||(n.color=t.color),"italic"===t.fontStyle&&(n.fontStyle=t.fontStyle),"normal"===t.whiteSpace&&e.classList.length>0&&(n.overflow="wrap"),["400",400,"normal"].includes(t.fontWeight)||(n.fontWeight=t.fontWeight),"middle"!==t.verticalAlign&&(n.vAlign=$[t.verticalAlign]||"middle"),"start"!==t.textAlign&&"left"!==t.textAlign&&(n.hAlign=$[t.textAlign]||"left"),"rgba(0, 0, 0, 0)"!==t.backgroundColor&&"rgb(255, 255, 255)"!==t.backgroundColor&&(n.backColor=t.backgroundColor),"0px"!==t.borderLeftWidth&&"rgb(204, 204, 204)"!==t.borderLeftColor&&(n.border=n.border||{},n.border.left={color:t.borderLeftColor,lineStyle:"dashed"===t.borderLeftStyle?"dash":"normal"}),"0px"!==t.borderRightWidth&&"rgb(204, 204, 204)"!==t.borderRightColor&&(n.border=n.border||{},n.border.right={color:t.borderRightColor,lineStyle:"dashed"===t.borderRightStyle?"dash":"normal"}),"0px"!==t.borderTopWidth&&"rgb(204, 204, 204)"!==t.borderTopColor&&(n.border=n.border||{},n.border.top={color:t.borderTopColor,lineStyle:"dashed"===t.borderTopStyle?"dash":"normal"}),"0px"!==t.borderBottomWidth&&"rgb(204, 204, 204)"!==t.borderBottomColor&&(n.border=n.border||{},n.border.bottom={color:t.borderBottomColor,lineStyle:"dashed"===t.borderBottomStyle?"dash":"normal"}),0===Object.keys(n).length?null:n}catch(e){return null}}function J(e){var t=/([^{}]+){([^{}]+)}/,n=e.match(/[^{}]+{([^{}]+)}/g),r={};return n&&n.forEach((function(e){var n=e.match(t);if(n){var a=n[1].trim(),o=n[2];if(a.startsWith(".")){var i=o.match(/mso-number-format:(.+);(\n|$)/);i&&(r[a.substr(1)]=function(e){return-1!==(e=e.replace(/\/|"|\\/g,"")).indexOf("Date")?"date":-1!==e.indexOf("Time")?"time":e.endsWith("%")?"percentage":-1!==e.indexOf(P)?{name:"currency",symbol:P}:-1!==e.indexOf(j)?{name:"currency",symbol:j}:-1!==e.indexOf(S)?{name:"currency",symbol:S}:e.match(/^@$/)?"text":-1!==e.indexOf("General")||-1!==e.indexOf("Standard")||-1!==e.indexOf("Fixed")?"auto":e.match(/(年|月|日|时|分|秒|dd|y|m|h|s|md|dm)/)?e.match(/(时|分|秒|s|h)/)?"datetime":e.match(/[^d]ddd[^d]/)?{name:"datetime",formatter:"dddd"}:"date":-1!==e.indexOf(R)?{name:"currency",symbol:R}:"number"}(i[1]))}}})),0===Object.keys(r).length?null:r}var ee={9:12,10:13,11:14,12:16,14:19,16:22,18:24,22:29,24:32,30:40,36:48};function te(e,t){for(var n=e.length,r=[],a=0;a<n;a++)t(e[a])&&r.push(e[a]);return r}function ne(e,t){if(t.workbook&&t.worksheets){for(var n=function(e){if(!e)return null;var t=me(e).getElementsByTagName("c");if(0!==t.length){for(var n=[],r=0;r<t.length;r++)n.push({cell:t[r].getAttribute("r"),sheetIndex:t[r].getAttribute("i")||1});return 0===n.length?null:k()(n,"sheetIndex")}}(t.calcChain),r=me(t.workbook).getElementsByTagName("sheet"),o={},i={},c={},l=1,s=0;s<r.length;s++){var u=parseInt(r[s].getAttribute("r:id").replace("rId","")),d=r[s].getAttribute("sheetId"),f=r[s].getAttribute("state");o[d]=u,"hidden"!==f&&(i[l]=u,c[d]=l,l+=1)}if(e.calcChain=[],n)for(var p in n){var h=o[p],m="sheet".concat(h);if(t.worksheets[m])for(var g=me(t.worksheets[m]).getElementsByTagName("f"),v={},y=0;y<g.length;y++){var b=g[y],w=b.parentNode.getAttribute("r"),x=b.innerHTML.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&nbsp;/g," "),_=b.getAttribute("t"),E=b.getAttribute("ref"),C=b.getAttribute("si");"shared"===_&&(E?v[C]={baseCell:w,formula:x}:x=he(v[C],w));var O=w.match(/\d+/),S=w.match(/[A-Z]+/);O&&(O=parseInt(O[0])-1),S&&(S=de(S[0]));var R=c[p]-1;if(e.sheet[R])if(e.sheet[R].data[O]=e.sheet[R].data[O]||{},e.sheet[R].data[O][S]=e.sheet[R].data[O][S]||{},"string"==typeof x&&0===x.toLowerCase().indexOf("hyperlink(")){var j=x.substring(10,x.length-1).split(","),P=re(j[0]),A=j.length>1?re(j[1]):P;console.log(P,A),e.sheet[R].data[O][S].value={class:"link",url:P,text:A}}else e.sheet[R].data[O][S].value={class:"formula",formula:x,value:e.sheet[R].data[O][S].value||""},e.calcChain.push({row:O,col:S,sheet:R})}}e.sheet.forEach((function(e,n){if(e.cellsNeedFix){var r=i[n+1],o="sheet".concat(r),c=me(t.worksheets[o]);e.cellsNeedFix.forEach((function(t){var n=t.row,r=t.col,o=pe({row:{index:n},col:{index:r}}),i=c.querySelector("c[r=".concat(o,"]"));if(i){var l="s"===i.getAttribute("t"),s=i.querySelector("v");if(s&&s.innerHTML&&!l){var u=e.data[n]&&e.data[n][r]&&e.data[n][r].value,d=e.data[n]&&e.data[n][r]&&e.data[n][r].type,f=s.innerHTML;if(d&&!isNaN(1*f)){var p=1*f,h=p>=367?343:p<61?86400:0;"date"===d.name||"datetime"===d.name||"time"===d.name?f=86400*f+h:["percentage","number","currency"].includes(d.name)&&(f*=1)}u&&"formula"===u.class?u.value=f:"object"!==a()(u)&&(e.data[n]=e.data[n]||{},e.data[n][r]=e.data[n][r]||{},e.data[n][r].value=f)}}})),delete e.cellsNeedFix}}))}}function re(e){return e.trim().replace(/'/g,"").replace(/"/g,"")}var ae="ABCDEFGHIJKLMNOPQRSTUVWXYZ",oe=ae.length,ie=[{type:"whitespace",reg:/^(?:\s+)/},{type:"string",reg:/^(?:"(\\["]|[^"])*")/},{type:"string",reg:/^(?:'(\\[']|[^'])*')/},{type:"function",reg:/^(?:[A-Za-z]{1,}[A-Za-z_0-9\.]+(?=[(]))/},{type:"error",reg:/^(?:#[A-Z0-9\/]+(!|\?)?)/},{type:"sheetCell",reg:/^(?:'{1}[^']+'{1}!{1}\${0,1}[A-Za-z]+\${0,1}[0-9]+)/},{type:"sheetCell",reg:/^(?:[\u4e00-\u9fa5A-Za-z0-9]+!{1}\${0,1}[A-Za-z]+\${0,1}[0-9]+)/},{type:"absoluteCell",reg:/^(?:\$[A-Za-z]+\$[0-9]+)/},{type:"absoluteColCell",reg:/^(?:\$[A-Za-z]+[0-9]+)/},{type:"absoluteRowCell",reg:/^(?:[A-Za-z]+\$[0-9]+)/},{type:"relativeCell",reg:/^(?:[A-Za-z]+[0-9]+)/},{type:"colRange",reg:/^(?:[A-Za-z]+:[A-Za-z]+)/},{type:"colRange",reg:/^(?:'{1}[\u4e00-\u9fa5A-Za-z0-9]+'{1}!{1}[A-Za-z]+:[A-Za-z]+)/},{type:"colRange",reg:/^(?:[\u4e00-\u9fa5A-Za-z0-9]+!{1}[A-Za-z]+:[A-Za-z]+)/},{type:"rowRange",reg:/^(?:[0-9]+:[0-9]+)/},{type:"rowRange",reg:/^(?:'{1}[\u4e00-\u9fa5A-Za-z0-9]+'{1}!{1}[0-9]+:[0-9]+)/},{type:"rowRange",reg:/^(?:[\u4e00-\u9fa5A-Za-z0-9]+!{1}[0-9]+:[0-9]+)/},{type:"mixRange",reg:/^(?:[0-9]+:[0-9]+)/},{type:"function",reg:/^(?:[A-Za-z\.0-9]+(?=[(]))/},{type:"variable",reg:/^(?:[A-Za-z]{1,}[A-Za-z_0-9]+)/},{type:"number",reg:/^(?:[0-9]+)/},{type:"array",reg:/^(?:\[(.*)?\])/},{type:"&",reg:/^(?:&)/},{type:"whitespace",reg:/^(?: )/},{type:"decimal",reg:/^(?:[.])/},{type:":",reg:/^(?::)/},{type:";",reg:/^(?:;)/},{type:",",reg:/^(?:,)/},{type:"*",reg:/^(?:\*)/},{type:"/",reg:/^(?:\/)/},{type:"-",reg:/^(?:-)/},{type:"+",reg:/^(?:\+)/},{type:"^",reg:"/^(?:^)/,"},{type:"(",reg:/^(?:\()/},{type:")",reg:/^(?:\))/},{type:">",reg:/^(?:>)/},{type:"<",reg:/^(?:<)/},{type:"NOT",reg:/^(?:NOT\b)/},{type:'"',reg:/^(?:")/},{type:"'",reg:/^(?:')/},{type:"!",reg:/^(?:!)/},{type:"=",reg:/^(?:=)/},{type:"%",reg:/^(?:%)/},{type:"#",reg:/^(?:[#])/},{type:"EOF",reg:/^(?:$)/}],ce=/^([\u4e00-\u9fa5A-Za-z0-9]+!{1})/,le=/^'{1}(.+'{1}!{1})/,se=/^([$])?([A-Za-z]+)([$])?([0-9]+)$/;function ue(e){var t=parseInt(e,10);return isNaN(t)?-1:Math.max(t-1,-1)}function de(e){var t=0;if("string"==typeof e)for(var n=0,r=e.length-1;n<e.length;n+=1,r-=1)t+=Math.pow(oe,r)*(ae.indexOf(e[n])+1);return t-1}function fe(e){var t=function(e){var t=null,n=e,r=e.match(ce);return r?(n=e.substring(r[0].length),t=r[0].slice(0,-1)):(r=e.match(le))&&(n=e.substring(r[0].length),t=r[0].slice(1,-2)),{sheet:t,label:n.toUpperCase()}}(e),n=t.label.match(se),r=y()(n,5),a=r[1],o=r[2],i=r[3],c=r[4];return{row:{index:ue(c),label:c,absolute:"$"===i},col:{index:de(o),label:o,absolute:"$"===a},sheet:t.sheet}}function pe(e){var t=(e.row.absolute?"$":"")+(e.row.index+1);return function(e,t){return t?/^[A-Za-z0-9]+$/.test(t)&&!t.match(/^[A-Za-z]{1,3}[0-9]+/)?"".concat(t,"!").concat(e):"'".concat(t,"'!").concat(e):e}((e.col.absolute?"$":"")+function e(t){var n=ae.substr(t%26,1),r=Math.floor(t/26);return r>0?"".concat(e(r-1)).concat(n):n}(e.col.index)+t,e.sheet)}function he(e,t){var n=e.baseCell,r=e.formula,a=fe(n),o=fe(t);return function(e,t,n,r){var a=function(e,t){var n=[];e=(e+"").replace(/\s/g,"");for(var r=function(){var t=void 0,r=void 0,a=void 0;ie.forEach((function(n){(a=e.match(n.reg))&&(!t||a[0].length>t[0].length)&&(t=a,r=n.type)})),t?(n.push({text:t[0],type:r}),e=e.slice(t[0].length)):(n.push({text:e[0],type:"other"}),e=e.slice(1)),t=null};e.length>0;)r();for(var a=n.length,o=0;o<a-2;o++)n[o].type.indexOf("Cell")>0&&":"===n[o+1].type&&n[o+2].type.indexOf("Cell")<0&&(n[o+1].type="colon");return n}(e),o="";return a.forEach((function(e){if(e.type.indexOf("Cell")>0){var r=fe(e.text);r.row.index+=r.row.absolute?0:t,r.col.index+=r.col.absolute?0:n,o+=pe(r)}else o+=e.text})),o}(r,o.row.index-a.row.index,o.col.index-a.col.index)}function me(e){return(new DOMParser).parseFromString(e,"text/xml")}function ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof e&&(e=[e]);var n={format:"lakesheet",type:"Sheet",version:"1.0",larkJson:!0,sheet:[]},r=t.names,a=void 0===r?[]:r,o=t.deflate,i=void 0!==o&&o,c=t.worksheetsDeflate,l=void 0!==c&&c,s=t.xml;if(e.forEach((function(e,t){i&&(e=u.a.inflate(e,{to:"string"}));var r=A(e,t,a[t],{rowCount:50,colCount:20},!0);r.selectOptions&&(n.selectOptions=n.selectOptions||{},Object.assign(n.selectOptions,r.selectOptions),delete r.selectOptions),n.sheet.push(r)})),s){if(l&&s.worksheets){var d={};for(var f in s.worksheets){var p=s.worksheets[f];d[f]=u.a.inflate(p,{to:"string"})}s.worksheets=d}ne(n,s)}return n.sheet=u.a.deflate(JSON.stringify(n.sheet),{to:"string"}),n}},2287:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(0);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}var i=new Map,c=new WeakMap,l=0,s=void 0;function u(e){return Object.keys(e).sort().filter((function(t){return void 0!==e[t]})).map((function(t){return t+"_"+("root"===t?(n=e.root)?(c.has(n)||(l+=1,c.set(n,l.toString())),c.get(n)):"0":e[t]);var n})).toString()}function d(e,t,n,r){if(void 0===n&&(n={}),void 0===r&&(r=s),void 0===window.IntersectionObserver&&void 0!==r){var a=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"==typeof n.threshold?n.threshold:0,time:0,boundingClientRect:a,intersectionRect:a,rootBounds:a}),function(){}}var o=function(e){var t=u(e),n=i.get(t);if(!n){var r,a=new Map,o=new IntersectionObserver((function(t){t.forEach((function(t){var n,o=t.isIntersecting&&r.some((function(e){return t.intersectionRatio>=e}));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=o),null==(n=a.get(t.target))||n.forEach((function(e){e(o,t)}))}))}),e);r=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:o,elements:a},i.set(t,n)}return n}(n),c=o.id,l=o.observer,d=o.elements,f=d.get(e)||[];return d.has(e)||d.set(e,f),f.push(t),l.observe(e),function(){f.splice(f.indexOf(t),1),0===f.length&&(d.delete(e),l.unobserve(e)),0===d.size&&(l.disconnect(),i.delete(c))}}var f=["children","as","tag","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function p(e){return"function"!=typeof e.children}var h=function(e){var t,n;function i(t){var n;return(n=e.call(this,t)||this).node=null,n._unobserveCb=null,n.handleNode=function(e){n.node&&(n.unobserve(),e||n.props.triggerOnce||n.props.skip||n.setState({inView:!!n.props.initialInView,entry:void 0})),n.node=e||null,n.observeNode()},n.handleChange=function(e,t){e&&n.props.triggerOnce&&n.unobserve(),p(n.props)||n.setState({inView:e,entry:t}),n.props.onChange&&n.props.onChange(e,t)},n.state={inView:!!t.initialInView,entry:void 0},n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var c=i.prototype;return c.componentDidUpdate=function(e){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold&&e.skip===this.props.skip&&e.trackVisibility===this.props.trackVisibility&&e.delay===this.props.delay||(this.unobserve(),this.observeNode())},c.componentWillUnmount=function(){this.unobserve(),this.node=null},c.observeNode=function(){if(this.node&&!this.props.skip){var e=this.props,t=e.threshold,n=e.root,r=e.rootMargin,a=e.trackVisibility,o=e.delay,i=e.fallbackInView;this._unobserveCb=d(this.node,this.handleChange,{threshold:t,root:n,rootMargin:r,trackVisibility:a,delay:o},i)}},c.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},c.render=function(){if(!p(this.props)){var e=this.state,t=e.inView,n=e.entry;return this.props.children({inView:t,entry:n,ref:this.handleNode})}var o=this.props,i=o.children,c=o.as,l=o.tag,s=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(o,f);return r.createElement(c||l||"div",a({ref:this.handleNode},s),i)},i}(r.Component);h.displayName="InView",h.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1}},2291:function(e,t,n){"use strict";n(151);var r=n(35),a=(n(196),n(95)),o=n(0),i=n.n(o),c=n(1),l=n.n(c),s=n(562),u=n(355),d=n(836);n(3081);function f(e){var t=null;t=e.readonly?{edit:!1,delete:!1}:u.a.adaptAbilities({me:e.me,comment:e.comment,target_type:"Doc",target:e.target});var n=e.me.id===e.comment.user_id,o=Object(s.a)()||Object(s.b)(),c=!n&&o,l=u.a.getPostActions(t,c);return i.a.createElement(d.a,{className:"post-actions",content:i.a.createElement(r.a,null,l.map((function(t){return t.confirm?i.a.createElement(r.a.Item,{key:t.cmd},i.a.createElement(a.a,{title:__("确认删除该评论么？"),onConfirm:function(){e.exec(t.cmd)}},i.a.createElement("span",{className:"action-link"},__("删除")))):i.a.createElement(r.a.Item,{onClick:function(){e.exec(t.cmd)},key:t.cmd},i.a.createElement("span",{className:"action-link"},t.title))})))})}f.propTypes={me:l.a.object.isRequired,comment:l.a.object.isRequired,target:l.a.object.isRequired,readonly:l.a.bool,exec:l.a.func},t.a=f},2292:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),c=n(34),l=n(104),s=n.n(l),u=n(96);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=new s.a("thread:post.port");var y=function(e){var t=e.me,n=e.comment,a=h(Object(r.useState)(n.reactions||[]),2),o=a[0],i=a[1],c=h(Object(r.useState)({}),2),l=c[0],s=c[1],m=h(Object(r.useState)(!1),2),g=m[0],y=m[1],b="Comment";Object(r.useEffect)((function(){i(n.reactions||[])}),[n]);var k=function(){var e=null;return t&&t.id&&(e=o.find((function(e){return e.user_id===t.id})))&&(e.reaction_types=e.action_option.split(",")),e},w=function(e){return u.webProxy.actions.create({target_id:n.id,target_type:b,action_type:"reaction",action_option:e}).then((function(n){v("success",n);var r=o.filter((function(e){return e.user_id!==t.id}));r.push({user_id:t.id,action_type:"reaction",action_option:e}),i(r)}))};return{state:{reactions:o,reactionUserMap:l},reaction:function(e){v("reaction",e);var t=e,n=k();if(n){var r=p(n.reaction_types);if(r.includes(e))return Promise.resolve({});r.push(e),t=r.join(",")}return w(t)},cancelReaction:function(e){v("cancel reaction:",e);var r=k();if(!r)return Promise.resolve({});var a=r.reaction_types.filter((function(t){return t!==e}));if(a.length>0){var c=a.join(",");return v("update action_option",a.join(",")),w(c)}return u.webProxy.actions.destroy({target_id:n.id,target_type:b,action_type:"reaction"}).then((function(){var e=o.filter((function(e){return e.user_id!==t.id}));i(e)}))},loadReactionUser:function(e){v("load users for reaction",e),g||(y(!0),u.webProxy.actions.users({target_id:n.id,target_type:b,action_type:"reaction",action_option:"".concat(e),limit:30}).then((function(t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},l);n[e]=t,y(!1),s(n)})))},resetReactionUser:function(e){s({})},getMyReaction:k}},b=n(1967),k=(n(195),n(121)),w=n(8),x=n.n(w);n(3072);function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e){var t=e.reaction,n=e.users,o=e.myReaction,i=_(Object(r.useState)(!1),2),c=i[0],l=i[1];return a.a.createElement(k.a,{className:"post-reaction-detail",overlayClassName:"post-reaction-detail-popover",getPopupContainer:function(e){return e.parentNode},mouseEnterDelay:.618,trigger:["hover"],placement:"bottomLeft",onVisibleChange:function(n){l(n),!1===n?e.reset(t.id):e.loadUsers(t.id)},visible:c,content:a.a.createElement("ul",{className:"post-reaction-users"},n.map((function(e){return a.a.createElement("li",{key:e.id},a.a.createElement("a",{href:"/".concat(e.login),target:"_blank"},e.name))})))},a.a.createElement("div",{onClick:e.onReactionClick,className:x()({"post-reaction-detail-type":!0,"post-reaction-detail-active":o&&o.reaction_types.includes(t.id)})},a.a.createElement("img",{className:"post-interaction-icon",src:t.icon,height:20}),a.a.createElement("span",{className:"post-interaction-num"},e.total)))}C.defaultProps={onReactionClick:function(){}},C.propTypes={myReaction:i.a.object,users:i.a.array.isRequired,total:i.a.number.isRequired,reaction:i.a.object.isRequired,loadUsers:i.a.func.isRequired,reset:i.a.func.isRequired,onReactionClick:i.a.func};var O=C,S=(n(101),n(26)),R=b.a.REACTIONS;function j(e){var t=e.active,n=e.totalReaction;return a.a.createElement("div",{className:"post-reaction"},a.a.createElement(k.a,{getPopupContainer:function(e){return e.parentNode},trigger:window.h5?["click"]:["hover"],autoAdjustOverflow:!1,content:a.a.createElement("div",null,a.a.createElement("ul",{className:"post-reaction-items"},R.map((function(n){return a.a.createElement("li",{className:t.includes(n.id)?"post-reaction-active":"",key:n.id},a.a.createElement("a",{onClick:function(){var r;r=n,t.includes(r.id)?e.onCancelReaction(r.id):e.onReaction(r.id),e.onReactionUpdate(r)}},window.h5?a.a.createElement("img",{src:n.icon}):a.a.createElement(S.a,{title:n.title},a.a.createElement("img",{src:n.icon}))))}))))},a.a.createElement("span",{className:"post-reaction-entry"},a.a.createElement(c.a,{name:"thread_reaction",width:20,height:20})),n>0&&a.a.createElement("span",{className:"post-interaction-action-total"},n)))}j.defaultProps={onReactionUpdate:function(){}},j.propTypes={active:i.a.array,onReaction:i.a.func.isRequired,onCancelReaction:i.a.func.isRequired,onReactionUpdate:i.a.func,totalReaction:i.a.number};var P=j,A=b.a.REACTIONS;function T(e){var t=e.comment,n=e.me,o=e.subComments||[],i=y({me:n,comment:t}),l=i.state,s=l.reactions,u=l.reactionUserMap,d=Object(r.useMemo)((function(){var e={reactionMap:b.a.classifyReactions(s),myReaction:i.getMyReaction(),totalReaction:0};return Object.keys(e.reactionMap).forEach((function(t){e.totalReaction+=e.reactionMap[t].count})),e}),[s]),f=d.reactionMap,p=d.myReaction,h=d.totalReaction;return a.a.createElement("div",{className:"post-interaction"},s.length>0&&a.a.createElement("div",{className:"post-interaction-reaction-summary"},a.a.createElement("ul",null,A.map((function(n){var r=f[n.id].count;return 0===r?null:a.a.createElement("li",{key:n.id},a.a.createElement(O,{myReaction:p,reaction:n,users:u[n.id]||[],total:r,loadUsers:function(){i.loadReactionUser(n.id)},reset:function(){i.resetReactionUser(n.id)},onReactionClick:function(){(p&&p.action_option.includes(n.id)?i.cancelReaction(n.id):i.reaction(n.id)).then((function(){i.loadReactionUser(n.id),e.onReactionUpdate(n,t)}))}}))})))),a.a.createElement("div",{className:"post-interaction-actions"},a.a.createElement("div",{"data-post-action":"reaction",className:"post-interaction-action post-interaction-reaction"},a.a.createElement(P,{active:p?p.reaction_types:[],onReaction:i.reaction,onCancelReaction:i.cancelReaction,onReactionUpdate:function(n){return e.onReactionUpdate(n,t)},totalReaction:h})),a.a.createElement("div",{"data-post-action":"reply",className:"post-interaction-action",onClick:e.onReply},a.a.createElement(c.a,{name:"thread_reply",width:20,height:20}),o.length>0&&a.a.createElement("span",{className:"post-interaction-action-total"},o.length))))}T.defaultProps={onReactionUpdate:function(){},onReply:function(){}},T.propTypes={me:i.a.object.isRequired,comment:i.a.object.isRequired,onReactionUpdate:i.a.func,onReply:i.a.func,subComments:i.a.array};t.a=T},2295:function(e,t,n){"use strict";var r=n(2737),a=n.n(r),o=n(2738),i=n.n(o),c=n(849),l=n.n(c),s=n(2739),u=n.n(s),d=n(2106),f=n.n(d),p=n(71),h=n.n(p),m=n(1939);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){k(o,r,a,i,c,"next",e)}function c(e){k(o,r,a,i,c,"throw",e)}i(void 0)}))}}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&x(e.prototype,t),n&&x(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=_((function e(t){var n=this,r=t.tagProxy;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,"isLongTag",(function(e){return e&&e.length>m.MAX_SHOW_TEXT_LENGTH})),E(this,"getShowText",(function(e){return"".concat(e.slice(0,m.MAX_SHOW_TEXT_LENGTH),"...")})),E(this,"createTag",h()(function(){var e=w(regeneratorRuntime.mark((function e(t){var r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.currentTags,a=t.docId,o=f()(t.title)){e.next=4;break}return e.abrupt("return");case 4:if(m.TAG_RULES_REG.test(o)){e.next=6;break}return e.abrupt("return",{error:__("标签只能输入中文、数字、字母、-_@#/ 等符号")});case 6:if(!(o.length>m.MAX_LENGTH)){e.next=8;break}return e.abrupt("return",{error:__("标签最多{length}字",{length:m.MAX_LENGTH})});case 8:if(!u()(r,(function(e){return e.title===o}))){e.next=10;break}return e.abrupt("return",{error:__("不允许添加重复的标签")});case 10:return e.next=12,n.tagProxy.create({docId:a,title:o});case 12:if(!(i=e.sent)||!i.id){e.next=15;break}return e.abrupt("return",{data:[].concat(y(r),[i])});case 15:return e.abrupt("return",{error:__("标签新增失败")});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),200)),E(this,"getSuggest",function(){var e=w(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tagProxy.suggest(t);case 2:return r=e.sent,e.abrupt("return",l()(r,(function(e){return{value:e.title}})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E(this,"destroy",function(){var e=w(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tagProxy.destroy(t);case 2:return e.sent&&i()(r,(function(e){return e.id===t.id})),e.abrupt("return",y(r));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),E(this,"arrangeResultTags",(function(e,t,n){var r=n.reduce((function(e,t){return v(v({},e),{},E({},t.title,t.count))}),{});return l()(e,(function(e){var n=e.tags.split(",").filter((function(e){return a()(t,e)<0})),o=function(e,t){return r[t]-r[e]},i=[].concat(y(t.sort(o)),y(n.sort(o)));return v(v({},e),{},{tags:i.map((function(e){return{title:e}}))})}))})),E(this,"tagsToString",(function(e){var t=e.tags,n=void 0===t?[]:t;return v(v({},e),{},{tags:n.join(",")})})),E(this,"findDocs",function(){var e=w(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tagProxy.findDocs(n.tagsToString(t));case 2:return a=e.sent,e.abrupt("return",n.arrangeResultTags(a,t.tags,r.tagGroup));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),E(this,"countDocs",function(){var e=w(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tagProxy.countDocs(n.tagsToString(t));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.tagProxy=r}));t.a=C},2296:function(e,t,n){"use strict";var r=n(104),a=n.n(r),o=n(89);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=a()("sub_comment:biz"),l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cacheKey="autosave/sub_comment/".concat(t.id)}var t,n,r;return t=e,(n=[{key:"retrieveFromCache",value:function(){return o.default.get(this.cacheKey)}},{key:"saveToCache",value:function(e){c("save to cache:",e),e?o.default.set(this.cacheKey,e):this.clearCache()}},{key:"clearCache",value:function(){c("clear cache"),o.default.remove(this.cacheKey)}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=l},2302:function(e,t,n){"use strict";n(2745);var r=n(2742).a,a=(n(502),n(284)),o=(n(196),n(95)),i=(n(57),n(23)),c=n(0),l=n.n(c),s=n(1),u=n.n(s),d=n(1939),f=n(282),p=n(283),h=n(69),m="Tag-module_wrapper_hMv3z",g="Tag-module_add_2EgPb";function v(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){v(o,r,a,i,c,"next",e)}function c(e){v(o,r,a,i,c,"throw",e)}i(void 0)}))}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=n.n(h)()((function(e,t){t(e)}),400),x=function(e){var t=e.docId,n=e.group,r=e.tagBiz,a=b(Object(c.useState)([]),2),o=a[0],l=a[1],s=b(Object(c.useState)([]),2),u=s[0],d=s[1],f=b(Object(c.useState)(""),2),p=f[0],h=f[1],m=b(Object(c.useState)(!1),2),g=m[0],v=m[1];function k(e,t){return w.apply(this,arguments)}function w(){return(w=y(regeneratorRuntime.mark((function e(n,a){var c,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.createTag({title:n,currentTags:o,docId:t});case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:if(c=e.t0,s=c.error,u=c.data,!s){e.next=12;break}if(i.a.error(s),"blur"===a){e.next=12;break}return e.abrupt("return");case 12:v(!1),h(""),d([]),u&&l(u);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=y(regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.destroy({docId:t,id:n},o);case 2:a=e.sent,l(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=y(regeneratorRuntime.mark((function e(a){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getSuggest({target:n.login,query:a,docId:t});case 2:o=e.sent,d(o);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=y(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(13!==(t.keyCode||t.which)){e.next=6;break}return t.preventDefault(),t.stopPropagation(),e.next=6,k(t.target.value);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{state:{tagsArray:o,suggestOptions:u,showInput:g,inputValue:p},setTagsArray:l,deleteTag:function(e){return x.apply(this,arguments)},createTag:k,getSuggest:function(e){return _.apply(this,arguments)},setInputShowStatus:v,handleKeydown:function(e){return E.apply(this,arguments)},setInputValue:h}},_=function(e){var t=e.tagsArray,n=e.group,r=e.editable,i=e.deleteTag;return t.map((function(e){var t=e.title,c=e.id;return l.a.createElement(a.a,{className:"doc-tag",key:c},l.a.createElement("span",{className:"tag-title",onClick:function(){window.location.href="/r/".concat(n.login,"/tags?tag=").concat(encodeURIComponent(t))}},t),r&&l.a.createElement(o.a,{title:__("确认删除标签"),onConfirm:function(){i(c)},okText:__("确认"),cancelText:__("取消"),placement:"bottom"},l.a.createElement(f.a,{width:8})))}))},E=function(e){var t=e.tags,n=e.editable,a=e.docId,o=e.group,i=e.tagBiz,s=x({docId:a,group:o,tagBiz:i}),u=s.state,f=u.tagsArray,h=u.showInput,v=u.suggestOptions,y=u.inputValue,b=s.getSuggest,k=s.deleteTag,E=s.setInputShowStatus,C=s.handleKeydown,O=s.setTagsArray,S=s.setInputValue,R=s.createTag,j=(f?f.length:0)>=d.MAX_COUNT,P=n&&!h&&!j,A=n&&h;Object(c.useEffect)((function(){O(t)}),[O,t]);var T=l.a.createElement(_,{tagsArray:f,group:o,editable:n,deleteTag:k,tagBiz:i});return n?l.a.createElement("div",{className:m,"data-testid":"editable-tag"},T,P&&l.a.createElement("span",{className:g,onClick:function(){return E(!0)},"data-testid":"edit-btn"},l.a.createElement(p.a,null)),A&&l.a.createElement(r,{"data-testid":"tag-suggest",defaultActiveFirstOption:!1,className:"doc-tag-auto-complete",autoFocus:!0,options:v,onChange:function(e){S(e),w(e,b)},onSelect:R,style:{width:"200px"},backfill:!0,value:y,onBlur:function(e){R(e.target.value,"blur")},onInputKeyDown:C})):l.a.createElement("div",{className:m,"data-testid":"only-read-tag"},T)};E.useViewModel=x,E.propTypes={tags:u.a.array.isRequired,docId:u.a.number,editable:u.a.bool,group:u.a.object,tagBiz:u.a.object};t.a=E},2303:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="MinusOutlined";t.a=a.forwardRef(c)},2309:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},o(e,t)};var i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)};var c="Pixel",l="Percent",s={unit:l,value:.8};function u(e){return"number"==typeof e?{unit:l,value:100*e}:"string"==typeof e?e.match(/^(\d*(\.\d+)?)px$/)?{unit:c,value:parseFloat(e)}:e.match(/^(\d*(\.\d+)?)%$/)?{unit:l,value:parseFloat(e)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),s):(console.warn("scrollThreshold should be string or number"),s)}var d=function(e){function t(t){var n=e.call(this,t)||this;return n.lastScrollTop=0,n.actionTriggered=!1,n.startY=0,n.currentY=0,n.dragging=!1,n.maxPullDownDistance=0,n.getScrollableTarget=function(){return n.props.scrollableTarget instanceof HTMLElement?n.props.scrollableTarget:"string"==typeof n.props.scrollableTarget?document.getElementById(n.props.scrollableTarget):(null===n.props.scrollableTarget&&console.warn("You are trying to pass scrollableTarget but it is null. This might\n        happen because the element may not have been added to DOM yet.\n        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.\n      "),null)},n.onStart=function(e){n.lastScrollTop||(n.dragging=!0,e instanceof MouseEvent?n.startY=e.pageY:e instanceof TouchEvent&&(n.startY=e.touches[0].pageY),n.currentY=n.startY,n._infScroll&&(n._infScroll.style.willChange="transform",n._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},n.onMove=function(e){n.dragging&&(e instanceof MouseEvent?n.currentY=e.pageY:e instanceof TouchEvent&&(n.currentY=e.touches[0].pageY),n.currentY<n.startY||(n.currentY-n.startY>=Number(n.props.pullDownToRefreshThreshold)&&n.setState({pullToRefreshThresholdBreached:!0}),n.currentY-n.startY>1.5*n.maxPullDownDistance||n._infScroll&&(n._infScroll.style.overflow="visible",n._infScroll.style.transform="translate3d(0px, "+(n.currentY-n.startY)+"px, 0px)")))},n.onEnd=function(){n.startY=0,n.currentY=0,n.dragging=!1,n.state.pullToRefreshThresholdBreached&&(n.props.refreshFunction&&n.props.refreshFunction(),n.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame((function(){n._infScroll&&(n._infScroll.style.overflow="auto",n._infScroll.style.transform="none",n._infScroll.style.willChange="unset")}))},n.onScrollListener=function(e){"function"==typeof n.props.onScroll&&setTimeout((function(){return n.props.onScroll&&n.props.onScroll(e)}),0);var t=n.props.height||n._scrollableNode?e.target:document.documentElement.scrollTop?document.documentElement:document.body;n.actionTriggered||((n.props.inverse?n.isElementAtTop(t,n.props.scrollThreshold):n.isElementAtBottom(t,n.props.scrollThreshold))&&n.props.hasMore&&(n.actionTriggered=!0,n.setState({showLoader:!0}),n.props.next&&n.props.next()),n.lastScrollTop=t.scrollTop)},n.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:t.dataLength},n.throttledOnScrollListener=function(e,t,n,r){var a,o=!1,i=0;function c(){a&&clearTimeout(a)}function l(){var l=this,s=Date.now()-i,u=arguments;function d(){i=Date.now(),n.apply(l,u)}function f(){a=void 0}o||(r&&!a&&d(),c(),void 0===r&&s>e?d():!0!==t&&(a=setTimeout(r?f:d,void 0===r?e-s:e)))}return"boolean"!=typeof t&&(r=n,n=t,t=void 0),l.cancel=function(){c(),o=!0},l}(150,n.onScrollListener).bind(n),n.onStart=n.onStart.bind(n),n.onMove=n.onMove.bind(n),n.onEnd=n.onEnd.bind(n),n}return function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.componentDidMount=function(){if(void 0===this.props.dataLength)throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),"number"==typeof this.props.initialScrollY&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),"function"!=typeof this.props.refreshFunction))throw new Error('Mandatory prop "refreshFunction" missing.\n          Pull Down To Refresh functionality will not work\n          as expected. Check README.md for usage\'')},t.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},t.prototype.componentDidUpdate=function(e){this.props.dataLength!==e.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},t.getDerivedStateFromProps=function(e,t){return e.dataLength!==t.prevDataLength?i(i({},t),{prevDataLength:e.dataLength}):null},t.prototype.isElementAtTop=function(e,t){void 0===t&&(t=.8);var n=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,r=u(t);return r.unit===c?e.scrollTop<=r.value+n-e.scrollHeight+1:e.scrollTop<=r.value/100+n-e.scrollHeight+1},t.prototype.isElementAtBottom=function(e,t){void 0===t&&(t=.8);var n=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,r=u(t);return r.unit===c?e.scrollTop+n>=e.scrollHeight-r.value:e.scrollTop+n>=r.value/100*e.scrollHeight},t.prototype.render=function(){var e=this,t=i({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),n=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),r=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return a.a.createElement("div",{style:r,className:"infinite-scroll-component__outerdiv"},a.a.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(t){return e._infScroll=t},style:t},this.props.pullDownToRefresh&&a.a.createElement("div",{style:{position:"relative"},ref:function(t){return e._pullDown=t}},a.a.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!n&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},t}(r.Component);t.a=d},231:function(e,t,n){"use strict";var r=n(984),a=n(1845),o=Object.prototype.toString;function i(e){return"[object Array]"===o.call(e)}function c(e){return null!==e&&"object"==typeof e}function l(e){return"[object Function]"===o.call(e)}function s(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:a,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:c,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:l,isStream:function(e){return c(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:s,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,a=arguments.length;r<a;r++)s(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,a=arguments.length;r<a;r++)s(arguments[r],n);return t},extend:function(e,t,n){return s(t,(function(t,a){e[a]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},2312:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),c=n(104),l=n.n(c),s=n(78),u=n.n(s),d=n(3211),f=n.n(d),p=new l.a("doc:diff"),h=function(e){return e.querySelector(".lake-engine")||e},m=function(e){for(var t=e.childNodes,n=0,r=t.length;n<r;n++){var a=t[n],o=!1;if(a.nodeType===Node.ELEMENT_NODE){if(["DEL","INS"].includes(a.tagName))o=!0;else a.querySelector("del,ins")&&(o=!0);a.classList.add(o?"doc-diff-paragraph-changed":"doc-diff-paragraph-unchanged")}}},g=function(e){return e?e.startsWith(u.a.HTML_DOCTYPE)?e.substring(u.a.HTML_DOCTYPE.length):e:""};function v(e){var t=e.head,n=e.base;t=g(t),n=g(n);var o=Object(r.useRef)(null),i=Object(r.useMemo)((function(){return f()(n,t,"html-diff",null,"iframe,video,a,em,strong,del,meta")}),[]);return p("head",t),p("base",n),Object(r.useEffect)((function(){if(o.current){var e=h(o.current);m(e)}}),[]),t===n?a.a.createElement("div",{className:"doc-diff","data-testid":"unchanged-view"},__("内容一致")):a.a.createElement("div",{"data-testid":"doc-diff",className:"doc-diff"},a.a.createElement("div",{"data-testid":"diff-view",dangerouslySetInnerHTML:{__html:i},ref:o}))}v.propTypes={base:i.a.string.isRequired,head:i.a.string.isRequired};t.a=v},232:function(e,t,n){"use strict";n.r(t),n.d(t,"BrowserRouter",(function(){return d})),n.d(t,"HashRouter",(function(){return f})),n.d(t,"Link",(function(){return y})),n.d(t,"NavLink",(function(){return w}));var r=n(90);n.d(t,"MemoryRouter",(function(){return r.a})),n.d(t,"Prompt",(function(){return r.b})),n.d(t,"Redirect",(function(){return r.c})),n.d(t,"Route",(function(){return r.d})),n.d(t,"Router",(function(){return r.e})),n.d(t,"StaticRouter",(function(){return r.f})),n.d(t,"Switch",(function(){return r.g})),n.d(t,"generatePath",(function(){return r.i})),n.d(t,"matchPath",(function(){return r.j})),n.d(t,"useHistory",(function(){return r.k})),n.d(t,"useLocation",(function(){return r.l})),n.d(t,"useParams",(function(){return r.m})),n.d(t,"useRouteMatch",(function(){return r.n})),n.d(t,"withRouter",(function(){return r.o}));var a=n(93),o=n(0),i=n.n(o),c=n(67),l=n(12),s=n(83),u=n(92),d=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).history=Object(c.a)(t.props),t}return Object(a.a)(t,e),t.prototype.render=function(){return i.a.createElement(r.e,{history:this.history,children:this.props.children})},t}(i.a.Component);var f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).history=Object(c.b)(t.props),t}return Object(a.a)(t,e),t.prototype.render=function(){return i.a.createElement(r.e,{history:this.history,children:this.props.children})},t}(i.a.Component);var p=function(e,t){return"function"==typeof e?e(t):e},h=function(e,t){return"string"==typeof e?Object(c.c)(e,null,null,t):e},m=function(e){return e},g=i.a.forwardRef;void 0===g&&(g=m);var v=g((function(e,t){var n=e.innerRef,r=e.navigate,a=e.onClick,o=Object(s.default)(e,["innerRef","navigate","onClick"]),c=o.target,u=Object(l.default)({},o,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||c&&"_self"!==c||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return u.ref=m!==g&&t||n,i.a.createElement("a",u)}));var y=g((function(e,t){var n=e.component,a=void 0===n?v:n,o=e.replace,d=e.to,f=e.innerRef,y=Object(s.default)(e,["component","replace","to","innerRef"]);return i.a.createElement(r.h.Consumer,null,(function(e){e||Object(u.default)(!1);var n=e.history,r=h(p(d,e.location),e.location),s=r?n.createHref(r):"",v=Object(l.default)({},y,{href:s,navigate:function(){var t=p(d,e.location),r=Object(c.e)(e.location)===Object(c.e)(h(t));(o||r?n.replace:n.push)(t)}});return m!==g?v.ref=t||f:v.innerRef=f,i.a.createElement(a,v)}))})),b=function(e){return e},k=i.a.forwardRef;void 0===k&&(k=b);var w=k((function(e,t){var n=e["aria-current"],a=void 0===n?"page":n,o=e.activeClassName,c=void 0===o?"active":o,d=e.activeStyle,f=e.className,m=e.exact,g=e.isActive,v=e.location,w=e.sensitive,x=e.strict,_=e.style,E=e.to,C=e.innerRef,O=Object(s.default)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return i.a.createElement(r.h.Consumer,null,(function(e){e||Object(u.default)(!1);var n=v||e.location,o=h(p(E,n),n),s=o.pathname,S=s&&s.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),R=S?Object(r.j)(n.pathname,{path:S,exact:m,sensitive:w,strict:x}):null,j=!!(g?g(R,n):R),P="function"==typeof f?f(j):f,A="function"==typeof _?_(j):_;j&&(P=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(P,c),A=Object(l.default)({},A,d));var T=Object(l.default)({"aria-current":j&&a||null,className:P,style:A,to:o},O);return b!==k?T.ref=t||C:T.innerRef=C,i.a.createElement(y,T)}))}))},24:function(e,t,n){var r=n(1576);function a(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=a=Reflect.get,e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,n){var a=r(e,t);if(a){var o=Object.getOwnPropertyDescriptor(a,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(this,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},243:function(e,t,n){"use strict";var r=n(834),a={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,o,i,c,l,s,u=!1;t||(t={}),n=t.debug||!1;try{if(i=r(),c=document.createRange(),l=document.getSelection(),(s=document.createElement("span")).textContent=e,s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",s.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),void 0===r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var o=a[t.format]||a.default;window.clipboardData.setData(o,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(s),c.selectNodeContents(s),l.addRange(c),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(r){n&&console.error("unable to copy using execCommand: ",r),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(r){n&&console.error("unable to copy using clipboardData: ",r),n&&console.error("falling back to prompt"),o=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(o,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(c):l.removeAllRanges()),s&&document.body.removeChild(s),i()}return u}},244:function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)a(n,r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,r,a){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),a);else for(var o=0;o<r;o++)e[a+o]=t[n+o]},flattenChunks:function(e){var t,n,r,a,o,i;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(i=new Uint8Array(r),a=0,t=0,n=e.length;t<n;t++)o=e[t],i.set(o,a),a+=o.length;return i}},i={arraySet:function(e,t,n,r,a){for(var o=0;o<r;o++)e[a+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(r)},252:function(e,t,n){var r;function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var s=n(27),u=n(3044).default,d=n(2713).default,f=n(89).default,p=n(211),h=n(146),m=h.FILTER_TYPES,g=h.ORDER_BY,v=window,y=v.appData,b=void 0===y?{}:y,k=v.navigator,w=v.location,x=b.isDesktopApp,_=b.env,E=b.me,C=void 0===E?{}:E,O=b.locale,S=b.isYuque,R=b.isAlipayApp,j=b.isDingTalkMiniApp,P="note/version/".concat(C.id),A="note/latest/updated/".concat(C.id),T="note/orderby/".concat(C.id),D="note/filertab/".concat(C.id),M="note/status/".concat(C.id),N=["January","February","March","April","May","June","July","August","September","October","November","December"],L=l((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));L.isWebAppMiniApp=window.appData.isAlipayWebApp||window.appData.isDingTalkMiniApp,L.isYuque=S,L.isDesktopApp=x,L.isMiniApp=R||j,L.isDev="local"===_;var I="en-us"===O;L.isEN=I;var B="win32"===k.platform.toLowerCase();L.isWin=B,L.myNotesConsts={NOTE_VERSION_STORAGE_KEY:P,NOTE_LATEST_UPDATED_STORAGE_KEY:A,NOTE_ORDER_BY_STORAGE_KEY:T,NOTE_FILTER_TYPE_STORAGE_KEY:D,NOTE_QUERY_STATUS_INTERVAL:3e4,NOTE_ITEM_CONTENT_MIN_HEIGHT:214,NOTE_ALLOW_PAGEPATH_LIST:["/my/notes","/dashboard/notes"],NOTE_LIST_VIEW_MODES:{lite:"lite",full:"full"},NOTE_STATUS_STORAGE_KEY:M,COLLAPSE_BTN_CLASS:"note-item-collapse",SUBMIT_BTN_CLASS:"note-item-submit",NOTE_LIST_ITEM_CLASS:"note-list-item",NOTE_LIST_READ_TAG_ADD_CLASS:"note-list-item-read-tag-add"},L.editorConsts={NOTE_EDITOR_AUTO_SAVE_INTERVAL:3e4},L.getFilterBarConfig=function(){var e,t;return S?(i(e={},m.all,__("全部")),i(e,m.image,__("图片")),i(e,m.todo,__("待办")),i(e,m.bookmark,__("书签")),i(e,m.attachment,__("附件")),i(e,m.share,__("分享中")),e):(i(t={},m.all,__("全部")),i(t,m.image,__("图片")),i(t,m.todo,__("待办")),i(t,m.bookmark,__("书签")),i(t,m.attachment,__("附件")),i(t,m.dingTalkRobot,__("来自钉钉")),i(t,m.share,__("分享中")),t)},L.downloadFileHandler=function(e,t){var n=new URL(e);n.searchParams.append("yuque-desktop-download",""),t&&n.searchParams.append("filename",encodeURIComponent(t)),fetch(n.toString(),null,{ignoreGlobalMessage:!0})},L.getLocale=function(){return(new URLSearchParams(w.search).get("language")||"").startsWith("en")?"en":"zh-cn"},L.getNoteDetailLink=function(e){var t=e.slug,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.hostUrl,a=void 0===r?"".concat(w.protocol,"//").concat(w.host):r;return"".concat(a,"/r/note/").concat(t)};var z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.size||80;try{var r=new URL(e);return r.search="",r.hash="",t.noResize?r.toString():(r.searchParams.append("x-oss-process","image/resize,m_fill,h_".concat(n,",w_").concat(n)),r.toString())}catch(t){return e}};L.showImgBrowser=function(e,t){var n=e.filter((function(e){return e.src})).map((function(e){return new Promise((function(t){if(e.width||e.height)t(e);else{var n=document.querySelector("#note-image-item-".concat(e.uuid)),r=parseInt(n.getAttribute("origin-width"),10),a=parseInt(n.getAttribute("origin-height"),10);if(r||a)t(o(o({},e),{},{width:r,height:a}));else{var i=z(e.src,{noResize:!0}),c=new Image;c.src=i,c.onload=function(){var r=c.width,a=c.height;n.setAttribute("origin-width",r),n.setAttribute("origin-height",a),t(o(o({},e),{},{width:r,height:a}))}}}}))}));Promise.all(n).then((function(e){var n=e.map((function(e){return{src:e.src,msrc:e.src,w:e.width,h:e.height}}));d.previewImages(n,t)}))},L.getPreviewImage=z;var F=(i(r={},m.image,'card[name="image"]'),i(r,m.bookmark,'card[name="bookmarklink"]'),i(r,m.attachment,'card[name="file"]'),i(r,m.todo,'card[name="checkbox"]'),r);L.parseCardData=function(e,t){return[m.todo,m.all,m.share,m.dingTalkRobot].includes(t)?e:e.map((function(e){var n=e.doclet,r=(n=void 0===n?{}:n).body_draft_asl,a=F[t];if(r){var i=(new DOMParser).parseFromString(r,"text/html").body.querySelectorAll(a),c=[];i.forEach((function(e){var t=e.getAttribute("value"),n=JSON.parse(decodeURIComponent(t).slice(5));c.push(o(o({},n),{},{uuid:p(10)}))})),e.cards=c.filter((function(e){return t===m.image||t===m.attachment?e.src:t===m.bookmark&&(e.detail||(e.detail={_serializer:"web.editor_link_detail"}),e.detail)}))}return e})).filter((function(e){return e.cards&&e.cards.length}))},L.parseTodoListCard=function(e){var t=(new DOMParser).parseFromString(e,"text/html"),n=t.body.querySelectorAll("ul.lake-list");t.body.innerHTML="";for(var r=0;r<n.length;r++){var a=n[r];t.body.appendChild(a)}return t.children[0].outerHTML},L.getDefaultShortCutText=function(){return __("按 {shortcut} 发送",{shortcut:B?"Ctrl + Enter":"⌘ Enter"})},L.combineNotes=function(e){var t="";return e.forEach((function(e){t+=(e||"").replace(/<!doctype\s+lake>/g,"").replace(/<meta[^>]{0,1024}?\/>/g,"")})),t},L.getDefaultOrderBy=function(){return f.get(T)||g[L.isWebAppMiniApp?"content_updated_at":"first_published_at"]},L.orderTag=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return[];var n=[],r=[];return e.forEach((function(e){t&&t.some((function(t){var n;return(null==t||null===(n=t.tag_meta)||void 0===n?void 0:n.id)===e.id}))?r.push(o(o({},e),{},{selected:!0})):n.push(e)})),[].concat(n,r)},L.openDocLink=function(e,t){if(!x)return window.open(e);new URL(w.href).searchParams.get("open_doc_in_desktop")?window.parent.postMessage({name:"openDocInDesktop",args:[e,t]},"*"):window.openExternalLink(e,!0)},L.getLocaleMonthName=function(e){if(s(e).format("YYYY-MM")===s().format("YYYY-MM"))return __("本月");var t=s(e).format("YYYY"),n=s(e).format("M");if(I){var r=N[parseInt(n,10)];if(r)return"".concat(r," year")}return"".concat(t," ").concat(__("年")," ").concat(n," ").concat(__("月"))},L.placeholderHelper=new u,e.exports=L},253:function(e,t,n){"use strict";n(2075);var r=n(1725);n(392);t.a=r.a},255:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(105),a=n.n(r),o=n(477),i={URL_TYPE_LIST:["book-type-default","book-type-sheet","book-type-blog","book-icon-topic","group-type-project","book-type-manual","book-type-design","book-type-thread","group-type-interest","book-type-travel","group-type-default","book-type-reports","book-type-import","group-type-department","book-type-project","book-type-notes","book-type-resource","book-icon-alibaba","book-icon-taobao","book-icon-alipay","book-icon-yuque"],LEGACY_URL_TYPE_LIST:["books-url-wendangzhishiku","books-url-biaogezhishiku","books-url-boke","books-url-bokebeifen","books-url-bumen","books-url-chanpinshouce","books-url-huabanzhishiku","books-url-huati","books-url-lanqiubeifen","books-url-lvhanggonglve","books-url-morentuandui","books-url-tuanduizhoubao","books-url-wenjianjiabeifen","books-url-xiangmu","books-url-xiangmufangan","books-url-xuexibiji","books-url-ziyuanzhishiku","books-url-ali","books-url-taobao","books-url-zhifubao","books-url-yuque"],ICON_TYPE_LIST:["books-icon-default","books-icon-aixin","books-icon-baozhi","books-icon-biaoge","books-icon-biaoqian","books-icon-bikan","books-icon-boke","books-icon-chanpinwendang","books-icon-chucun","books-icon-dabiaowenjian","books-icon-dengpao","books-icon-duihua","books-icon-gerendangan","books-icon-huabao","books-icon-huati","books-icon-huati2","books-icon-hudun","books-icon-huojian","books-icon-huowu","books-icon-jiami","books-icon-jiangbei","books-icon-jihua","books-icon-lanqiu","books-icon-lingdang","books-icon-liucheng","books-icon-mubiao","books-icon-penzai","books-icon-qiqiu","books-icon-qunzu","books-icon-renwuliebiao","books-icon-rili","books-icon-suozhu","books-icon-tongxunlu","books-icon-tuandui","books-icon-wengao","books-icon-wenjiandai","books-icon-wenjiandai_2","books-icon-wenjianjia","books-icon-xiezuo","books-icon-xinfeng","books-icon-xingquxiaozu","books-icon-xuexibiji","books-icon-yingyuxuexi","books-icon-zhiding"],LEGACY_ICON_TYPE_LIST:["books-icon-wendang"],EMOJI_TYPE_LIST:[],COLOR_LIST:["#4E86E6","#98D352","#FFC63F","#FF9C6E","#E2B39D","#7A8188"],LEGACY_COLOR_LIST:["#6CA4EA"]},c={default:"book-type-default",book:"book-type-default",sheet:"book-type-sheet",design:"book-type-design",thread:"book-type-thread",resource:"book-type-resource",column:"book-type-blog",notes:"book-type-notes",blog:"book-type-blog",travel:"book-type-travel",project:"book-type-project",manual:"book-type-manual",reports:"book-type-reports",team_blog:"book-type-blog"},l={default:"group-type-default",project:"group-type-project",department:"group-type-department",interest:"group-type-interest",commerce:"group-type-commerce",official_doc:"group-type-official_doc"},s={doc:"doc-type-default",sheet:"doc-type-sheet",table:"doc-type-table",mind:"doc-type-mind",board:"doc-type-board",show:"doc-type-show",thread:"doc-type-thread",artboardgroup:"doc-type-artboard",artboard:"doc-type-artboard",note:"doc-type-note"},u={default:"doc-type-thread",daily:"doc-type-thread",weekly:"doc-type-thread"},d={markdown:"doc-type-default",asl:"doc-type-default",lake:"doc-type-default",spreadjs:"doc-type-sheet",lakesheet:"doc-type-sheet",lakemind:"doc-type-mind",lakeboard:"doc-type-board",lakeshow:"doc-type-show"};function f(e){if(e.symbol){var t=i.URL_TYPE_LIST,n=i.LEGACY_URL_TYPE_LIST,r=i.ICON_TYPE_LIST,a=i.LEGACY_ICON_TYPE_LIST;if("url"===e.type){if(n.includes(e.symbol))return t[n.findIndex((function(t){return t===e.symbol}))||0];if(t.includes(e.symbol))return e.symbol}else if("icon"===e.type){if(a.includes(e.symbol))return r[a.findIndex((function(t){return t===e.symbol}))||0];if(r.includes(e.symbol))return e.symbol}}}var p={book:function(e){var t=(e.type||"").toLowerCase(),n=(e.scene||"").toLowerCase();return c[n]||c[t]||c.default},user:function(e){var t=e.scene||"";return e.avatar?null:l[t]||null},doc:function(e){return"Thread"===e.type?this.thread(e):s[e.type.toLowerCase()]||null},template:function(e){return"lakesheet"===e.format?p.doc({type:"Sheet"}):"lake"===e.format?p.doc({type:"Doc"}):"lakemind"===e.format?p.doc({type:"Mind"}):"lakeboard"===e.format?p.doc({type:"Board"}):"lakeshow"===e.format?p.doc({type:"Show"}):"laketable"===e.format?p.doc({type:"Table"}):void 0},thread:function(e){var t=e.sub_type||"";return e.view_status===a.a.VIEW_STATUS.archive?"thread_archive":u[t.toLowerCase()]||u.default},resource:function(e){return Object(o.getFileIcon)(e)},artboardGroup:function(){return s.artboardgroup},docVersion:function(e){return d[e.format]},recycle:function(e){var t=e.target_type,n=e.params;if(!t||!n)return null;if("User"===t)return p.user(n.group)||l.default;if("Note"===t)return s.note;if("ArtboardGroup"===t)return s.artboardgroup;var r=t.toLowerCase();return p[r]&&n[r]?p[r](n[r]):null},action:function(e){var t=e.target_type,n=e.action_option;if(e.target&&e.target.book_icon){var r=f(e.target.book_icon);if(r)return r}if("Doc"===t){var a=this._entityTypeOfAction(e);return s[a]}if("Book"===t){if(e.target)return p.book(e.target);var i=this._entityTypeOfAction(e);return s[i]}return"User"===t&&e.target?p.user(e.target):"Resource"===t?Object(o.getFileIcon)({type:"file",ext:n}):"ArtboardGroup"===t?s.artboardgroup:"DocVersion"===t&&e.target?p.docVersion(e.target):null},_entityTypeOfAction:function(e){var t=e.action_option.split("_"),n=null;return t.length>=1&&(n=t[t.length-1]),n},userActionLog:function(e){var t=e.target_type,n=e.subject_type;if("Book"===t)return e.target?p.book(e.target):c.default;if("User"===t)return l.default;if("Resource"===t)return p.resource({type:"file",ext:e.fileExt});var r=null;return"Design"===n?r=s.artboardgroup:"Sheet"===n?r=s.sheet:"Table"===n?r=s.table:"Doc"===n?r=s.doc:"Thread"===n?r=s.thread:"Mind"===n?r=s.mind:"Board"===n?r=s.board:"Show"===n&&(r=s.show),r}},h={getName:function(e,t){if(!e||!t)return null;if(e=e.charAt(0).toLowerCase()+e.slice(1),t.book_icon){var n=f(t.book_icon);if(n)return n}return p[e]?p[e](t):null},getStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var n=t.size,r=void 0===n?24:n,a=e.book_icon,o=void 0===a?{}:a,c=i.COLOR_LIST,l=i.LEGACY_COLOR_LIST;if(o.color){var s;if(l.includes(o.color)){var u=l.findIndex((function(e){return e===o.color}))||0;s=c[u]}else c.includes(o.color)&&(s=o.color);if(s)return{color:s,width:"".concat(r,"px"),height:"".concat(r,"px")}}return{width:"".concat(r,"px"),height:"".concat(r,"px")}}},getSelectorIcons:function(){return i},getSymbolName:f,getColor:function(e){if(e&&e.color){var t=i.COLOR_LIST,n=i.LEGACY_COLOR_LIST;return n.includes(e.color)?t[n.findIndex((function(t){return t===e.color}))||0]:e.color}}};t.b=h},257:function(e,t,n){"use strict";n(1555);var r=n(506);n(394);t.a=r.a},2708:function(e,t,n){},2710:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var a=n(0),o=r(a),i=r(n(259));function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=function(e,t,n){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==n&&"function"!=typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(r){if("function"!=typeof r)throw new Error("Expected WrappedComponent to be a React component.");var s,u=[];function d(){s=e(u.map((function(e){return e.props}))),f.canUseDOM?t(s):n&&(s=n(s))}var f=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.peek=function(){return s},a.rewind=function(){if(a.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=s;return s=void 0,u=[],e};var c=a.prototype;return c.shouldComponentUpdate=function(e){return!i(e,this.props)},c.componentWillMount=function(){u.push(this),d()},c.componentDidUpdate=function(){d()},c.componentWillUnmount=function(){var e=u.indexOf(this);u.splice(e,1),d()},c.render=function(){return o.createElement(r,this.props)},a}(a.Component);return c(f,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(r)+")"),c(f,"canUseDOM",l),f}}},2712:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="UploadOutlined";t.a=a.forwardRef(c)},2728:function(e,t,n){},275:function(e,t,n){"use strict";n(1728);var r=n(623);n(368);t.a=r.a},277:function(e,t,n){"use strict";n(1723);var r=n(622);n(393);t.a=r.a},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return Gt})),n.d(t,"b",(function(){return Vr})),n.d(t,"c",(function(){return xo})),n.d(t,"d",(function(){return Vm})),n.d(t,"e",(function(){return ii})),n.d(t,"f",(function(){return oa})),n.d(t,"g",(function(){return Fr})),n.d(t,"h",(function(){return dt})),n.d(t,"i",(function(){return Cm})),n.d(t,"j",(function(){return en})),n.d(t,"k",(function(){return Ut})),n.d(t,"l",(function(){return yi})),n.d(t,"m",(function(){return Zo})),n.d(t,"n",(function(){return Ir})),n.d(t,"o",(function(){return Ii})),n.d(t,"p",(function(){return so})),n.d(t,"q",(function(){return Oo})),n.d(t,"r",(function(){return Ma})),n.d(t,"s",(function(){return Wn})),n.d(t,"t",(function(){return Ef})),n.d(t,"u",(function(){return bi})),n.d(t,"v",(function(){return li}));var r=n(42),a=n(51),o=n.n(a),i=n(3),c=n.n(i),l=n(103),s=n.n(l),u=n(41),d=n.n(u),f=n(594),p=n.n(f),h=n(6),m=n.n(h),g=n(7),v=n.n(g),y=n(9),b=n.n(y),k=n(10),w=n.n(k),x=n(4),_=n.n(x),E=n(68),C=n.n(E),O=n(645),S=n.n(O),R=n(17),j=n(5),P=n.n(j),A=n(24),T=n.n(A),D=n(19),M=n.n(D),N=n(514),L=n.n(N),I=n(2095),B=n(29),z=n.n(B),F=n(23),U=n(35),V=n(176),q=n(18),H=n(26),W=n(25),Y=n(257),G=n(937),X=n(121),K=n(47),Z=n(277),$=n(74),Q=n(320),J=n(54),ee=n.n(J),te=n(20),ne=n.n(te),re=n(515),ae=n.n(re),oe=n(71),ie=n.n(oe),ce=n(66),le=n(69),se=n.n(le),ue=n(595),de=n.n(ue),fe=n(180),pe=n.n(fe),he=n(483),me=n.n(he),ge=n(120),ve=n.n(ge),ye=n(81),be=n.n(ye);function ke(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var a,o,i,c,l,s,u,d,f,p=e._root,h={data:r},m=e._x0,g=e._y0,v=e._x1,y=e._y1;if(!p)return e._root=h,e;for(;p.length;)if((s=t>=(o=(m+v)/2))?m=o:v=o,(u=n>=(i=(g+y)/2))?g=i:y=i,a=p,!(p=p[d=u<<1|s]))return a[d]=h,e;if(c=+e._x.call(null,p.data),l=+e._y.call(null,p.data),t===c&&n===l)return h.next=p,a?a[d]=h:e._root=h,e;do{a=a?a[d]=new Array(4):e._root=new Array(4),(s=t>=(o=(m+v)/2))?m=o:v=o,(u=n>=(i=(g+y)/2))?g=i:y=i}while((d=u<<1|s)==(f=(l>=i)<<1|c>=o));return a[f]=p,a[d]=h,e}var we=function(e,t,n,r,a){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=a};function xe(e){return e[0]}function _e(e){return e[1]}function Ee(e,t,n){var r=new Ce(null==t?xe:t,null==n?_e:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function Ce(e,t,n,r,a,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=a,this._y1=o,this._root=void 0}function Oe(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Se=Ee.prototype=Ce.prototype;Se.copy=function(){var e,t,n=new Ce(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Oe(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var a=0;a<4;++a)(t=r.source[a])&&(t.length?e.push({source:t,target:r.target[a]=new Array(4)}):r.target[a]=Oe(t));return n},Se.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return ke(this.cover(t,n),t,n,e)},Se.addAll=function(e){var t,n,r,a,o=e.length,i=new Array(o),c=new Array(o),l=1/0,s=1/0,u=-1/0,d=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(i[n]=r,c[n]=a,r<l&&(l=r),r>u&&(u=r),a<s&&(s=a),a>d&&(d=a));if(l>u||s>d)return this;for(this.cover(l,s).cover(u,d),n=0;n<o;++n)ke(this,i[n],c[n],e[n]);return this},Se.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,a=this._x1,o=this._y1;if(isNaN(n))a=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var i,c,l=a-n,s=this._root;n>e||e>=a||r>t||t>=o;)switch(c=(t<r)<<1|e<n,(i=new Array(4))[c]=s,s=i,l*=2,c){case 0:a=n+l,o=r+l;break;case 1:n=a-l,o=r+l;break;case 2:a=n+l,r=o-l;break;case 3:n=a-l,r=o-l}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=a,this._y1=o,this},Se.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},Se.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Se.find=function(e,t,n){var r,a,o,i,c,l,s,u=this._x0,d=this._y0,f=this._x1,p=this._y1,h=[],m=this._root;for(m&&h.push(new we(m,u,d,f,p)),null==n?n=1/0:(u=e-n,d=t-n,f=e+n,p=t+n,n*=n);l=h.pop();)if(!(!(m=l.node)||(a=l.x0)>f||(o=l.y0)>p||(i=l.x1)<u||(c=l.y1)<d))if(m.length){var g=(a+i)/2,v=(o+c)/2;h.push(new we(m[3],g,v,i,c),new we(m[2],a,v,g,c),new we(m[1],g,o,i,v),new we(m[0],a,o,g,v)),(s=(t>=v)<<1|e>=g)&&(l=h[h.length-1],h[h.length-1]=h[h.length-1-s],h[h.length-1-s]=l)}else{var y=e-+this._x.call(null,m.data),b=t-+this._y.call(null,m.data),k=y*y+b*b;if(k<n){var w=Math.sqrt(n=k);u=e-w,d=t-w,f=e+w,p=t+w,r=m.data}}return r},Se.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(i=+this._y.call(null,e)))return this;var t,n,r,a,o,i,c,l,s,u,d,f,p=this._root,h=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!p)return this;if(p.length)for(;;){if((s=o>=(c=(h+g)/2))?h=c:g=c,(u=i>=(l=(m+v)/2))?m=l:v=l,t=p,!(p=p[d=u<<1|s]))return this;if(!p.length)break;(t[d+1&3]||t[d+2&3]||t[d+3&3])&&(n=t,f=d)}for(;p.data!==e;)if(r=p,!(p=p.next))return this;return(a=p.next)&&delete p.next,r?(a?r.next=a:delete r.next,this):t?(a?t[d]=a:delete t[d],(p=t[0]||t[1]||t[2]||t[3])&&p===(t[3]||t[2]||t[1]||t[0])&&!p.length&&(n?n[f]=p:this._root=p),this):(this._root=a,this)},Se.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},Se.root=function(){return this._root},Se.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},Se.visit=function(e){var t,n,r,a,o,i,c=[],l=this._root;for(l&&c.push(new we(l,this._x0,this._y0,this._x1,this._y1));t=c.pop();)if(!e(l=t.node,r=t.x0,a=t.y0,o=t.x1,i=t.y1)&&l.length){var s=(r+o)/2,u=(a+i)/2;(n=l[3])&&c.push(new we(n,s,u,o,i)),(n=l[2])&&c.push(new we(n,r,u,s,i)),(n=l[1])&&c.push(new we(n,s,a,o,u)),(n=l[0])&&c.push(new we(n,r,a,s,u))}return this},Se.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new we(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var a=t.node;if(a.length){var o,i=t.x0,c=t.y0,l=t.x1,s=t.y1,u=(i+l)/2,d=(c+s)/2;(o=a[0])&&n.push(new we(o,i,c,u,d)),(o=a[1])&&n.push(new we(o,u,c,l,d)),(o=a[2])&&n.push(new we(o,i,d,u,s)),(o=a[3])&&n.push(new we(o,u,d,l,s))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},Se.x=function(e){return arguments.length?(this._x=e,this):this._x},Se.y=function(e){return arguments.length?(this._y=e,this):this._y};var Re=n(30),je=n.n(Re),Pe=n(0),Ae=n.n(Pe),Te=n(1),De=n.n(Te),Me=n(8),Ne=n.n(Me),Le=n(106),Ie=n.n(Le),Be=n(850),ze=n(1938);function Fe(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}function Ue(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e.children},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!1!==t(e,r,a)){var o=n(e);if(o)for(var i=0;i<o.length;i++)Ue(o[i],t,n,e,i)}}function Ve(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e.children},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=n(e);if(a)for(var o=0;o<a.length;o++)!1!==t(a[o],e,r)&&Ve(a[o],t,n,o)}function qe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return He(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?He(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ge(e,t,n){return e<t?t:e>n?n:e}function Xe(e,t){for(var n,r=-1/0,a=0;a<e.length;a++){var o=e[a],i=t?o[t]:o;i>r&&(r=i,n=o)}return n}function Ke(e,t){var n=t(e);return e.children&&(n.children=[],e.children.forEach((function(e){n.children.push(Ke(e,t))}))),n}function Ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return e<t?t:e>n?n:e}function $e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Ye(Ye({},e),t);return e.default&&t.default&&(n.default=Object.assign(e.default,t.default)),e.textAreaContentStyleSheets&&t.textAreaContentStyleSheets&&(n.textAreaContentStyleSheets=e.textAreaContentStyleSheets.concat(t.textAreaContentStyleSheets)),e.Subcells&&t.Subcells&&(n.Subcells=e.Subcells.concat(t.Subcells)),n}function Qe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-5;return e>=t[0]-n&&e<=t[1]+n}function Je(e,t){return Object.values(e.reduce((function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e}),{}))}function et(e){return e.filter((function(e,t,n){return n.indexOf(e,0)===t}))}function tt(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function nt(e,t,n){if(n>=e.length)for(var r=n-e.length+1;r--;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),e}function rt(e,t){e.children?e.children.push(t):e.children=[t]}function at(e,t){var n,r=-1/0;if(void 0===t){var a,o=qe(e);try{for(o.s();!(a=o.n()).done;)null!=(n=a.value)&&r<n&&(r=n)}catch(e){o.e(e)}finally{o.f()}}else{var i,c=-1,l=qe(e);try{for(l.s();!(i=l.n()).done;)null!=(n=t(n=i.value,++c,e))&&r<n&&(r=n)}catch(e){l.e(e)}finally{l.f()}}return r}function ot(e,t,n){for(var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e.parent},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return void 0===e};e&&e!==n&&o(r);)r=t(e),e=a(e);return r}function it(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.forEach((function(t){var n=t.query,r=t.css;"self"!==n?e.querySelectorAll(n).forEach((function(e){Object.keys(r).forEach((function(t){e.style[t]=r[t]}))})):Object.keys(r).forEach((function(t){e.style[t]=r[t]}))}))}function ct(e,t){var n={};return Object.keys(t).forEach((function(r){!0===t[r]?n[r]=d()(e[r]):s()(t[r])&&s()(e[r])&&(n[r]=ct(e[r],t[r]))})),n}function lt(e,t,n){var r={};return e&&n?t?(n.forEach((function(n){e[n]!==t[n]&&(r[n]=e[n])})),r):Ye({},e):r}function st(e,t){return p()(e,t,(function(e,t){return void 0!==e||s()(t)?e:null}))}function ut(e,t){var n="object"===o()(e)?e:c()({},e,t),r={},a=function(e){e.split(".").reduce((function(t,r,a,o){return t[r]=a+1===o.length?n[e]:{}}),r)};for(var i in n)a(i);return r}Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-viewport-container *::selection {\n  background-color: rgba(52, 155, 249, 0.15) !important;\n  color: inherit !important;\n}\n.lake-user-select-none {\n  user-select: none;\n}\n.lake-diagram-mindmap-root::selection {\n  background-color: #ddefff !important;\n}\n.selection-transparent::selection {\n  background-color: transparent !important;\n  color: inherit !important;\n}\n.selection-transparent *::selection {\n  background-color: transparent !important;\n  color: inherit !important;\n}\n");var dt=Object.freeze({__proto__:null,limitValue:Ge,findMaxObjBy:Xe,buildTree:Ke,getValue:Ze,mergeCellOptions:$e,between:Qe,groupBy:Je,arrayUnique:et,arrayEqual:tt,arrayMove:nt,removeArray:function(e){for(var t,n,r=arguments,a=r.length;a>1&&e.length;)for(t=r[--a];-1!==(n=e.indexOf(t));)e.splice(n,1);return t},append:rt,max:at,min:function(e,t){var n,r=1/0;if(void 0===t){var a,o=qe(e);try{for(o.s();!(a=o.n()).done;)null!=(n=a.value)&&r>n&&(r=n)}catch(e){o.e(e)}finally{o.f()}}else{var i,c=-1,l=qe(e);try{for(l.s();!(i=l.n()).done;)null!=(n=t(n=i.value,++c,e))&&r>n&&(r=n)}catch(e){l.e(e)}finally{l.f()}}return r},closest:ot,setStyleSheets:it,pick:ct,diff:lt,mergeUndefinedToNull:st,makeChangeModel:ut});function ft(e){return Math.PI/180*e}function pt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-4;return Math.abs(e-t)<n}function ht(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-4;return e.length===t.length&&e.every((function(e,r){return pt(e,t[r],n)}))}function mt(e,t){return e.minX<t.minX&&e.minY<t.minY&&e.maxX>t.maxX&&e.maxY>t.maxY}function gt(e,t){return!(t.maxX<e.minX||t.minX>e.maxX||t.maxY<e.minY||t.minY>e.maxY)}function vt(e,t,n,r){var a;return a=(r-t)/(n-e),isNaN(a)?1/0:a=Number(a.toFixed(2))}function yt(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}function bt(e,t,n,r,a){if(yt(e,t,n,r)<a)return{x:e,y:t};var o=kt(e,t,n,r,a);return{x:n-o.offsetX,y:r-o.offsetY}}function kt(e,t,n,r,a){var o=vt(e,t,n,r),i=Math.atan(o),c=n<e,l=a*Math.cos(i),s=a*Math.sin(i);return c&&(l*=-1,s*=-1),{offsetX:l,offsetY:s}}function wt(e,t,n,r){var a=vt(e,t,n,r),o=Math.atan(a);return n<e?o+Math.PI:r<t?o+2*Math.PI:o}function xt(e,t,n,r){var a;return a=pt(e,n)?1/0:pt(t,r)?0:(a=(r-t)/(n-e)).toFixed(2),Number(a)}function _t(e,t,n,r,a,o,i,c){if(xt(e,t,n,r)===xt(a,o,i,c))return!1;var l=((e*r-n*t)*(a-i)-(e-n)*(a*c-o*i))/((e-n)*(o-c)-(t-r)*(a-i)),s=((e*r-n*t)*(o-c)-(t-r)*(a*c-o*i))/((e-n)*(o-c)-(t-r)*(a-i));return{x:-0===l?0:l,y:-0===s?0:s}}function Et(e,t,n,r){return Math.abs(e-n)+Math.abs(t-r)}function Ct(e,t,n){return e>=t&&e<=n}function Ot(e,t,n,r){return pt(e,n)&&pt(t,r)}function St(e,t,n,r,a,o,i,c){var l=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],s={x:a-e,y:o-t},u={x:n-e,y:r-t},d={x:i-a,y:c-o},f=u.x*d.y-u.y*d.x,p=f*f,h=u.x*u.x+u.y*u.y,m=d.x*d.x+d.y*d.y,g=null;if(p>1e-4*h*m){var v=(s.x*d.y-s.y*d.x)/f,y=(s.x*u.y-s.y*u.x)/f;Ct(v,0,1)&&Ct(y,0,1)&&(g={x:e+v*u.x,y:t+v*u.y})}return g&&!l&&(Ot(e,t,g.x,g.y)||Ot(n,r,g.x,g.y)||Ot(a,o,g.x,g.y)||Ot(i,c,g.x,g.y))?null:g}function Rt(e,t,n,r){if(e===n)return{f:function(){return null},string:"x=".concat(e.toFixed(3))};if(t===r)return{f:function(){return t},string:"y=".concat(t.toFixed(3))};var a=(r-t)/(n-e),o=-e/(n-e)*(r-t)+t;return{f:function(e){return a*e+o},string:"y=".concat(a.toFixed(3),"x+").concat(o.toFixed(3))}}function jt(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!!(St(e.x1,e.y1,e.x2,e.y2,t.minX,t.minY,t.minX,t.maxY,n)||St(e.x1,e.y1,e.x2,e.y2,t.minX,t.minY,t.maxX,t.minY,n)||St(e.x1,e.y1,e.x2,e.y2,t.maxX,t.minY,t.maxX,t.maxY,n)||St(e.x1,e.y1,e.x2,e.y2,t.minX,t.maxY,t.maxX,t.maxY,n))}function Pt(e,t){return xt(e.x,e.y,t.x1,t.y1)===xt(e.x,e.y,t.x2,t.y2)}function At(e,t,n,r){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-r,2))}function Tt(e,t){if(e.k===1/0){if(e.y1<e.y2&&t.y<e.y1)return!1;if(e.y1>e.y2&&t.y>e.y1)return!1}else{if(e.x1<e.x2&&t.x<e.x1)return!1;if(e.x1>e.x2&&t.x>e.x1)return!1}return!0}function Dt(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e[0]*t[0]+e[1]*t[1],a=e[0]*t[1]-e[1]*t[0],o=Math.atan2(a,r);return o<0&&(o=2*Math.PI-Math.abs(o)),n?2*Math.PI-o:o}function Mt(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,0],r=[],a=2*Math.PI/e,o=0;o<e;o++)r.push([a*o,a*(o+1)]);var i=[n[0]-t[0],n[1]-t[1]];return function(e,n){var a=[e[0]-t[0],e[1]-t[1]],o=r[n];return Qe(Dt(a,i,!1),o)}}var Nt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];m()(this,e),this.vertices={},this.edges={},this.isDirected=t}return v()(e,[{key:"snap",value:function(e){for(var t={vertex:void 0,distance:1/0},n=this.getAllVertices(),r=0;r<n.length;r++){var a=n[r];if(a.x===e.x&&a.y===e.y)return a;var o=Math.abs(a.x-e.x)+Math.abs(a.y-e.y);o<t.distance&&(t.vertex=a,t.distance=o)}return t.vertex}},{key:"addVertex",value:function(e){return this.vertices[e.getKey()]=e,this}},{key:"getVertexByKey",value:function(e){return this.vertices[e]}},{key:"getNeighbors",value:function(e){return e.getNeighbors()}},{key:"getAllVertices",value:function(){return Object.values(this.vertices)}},{key:"getAllEdges",value:function(){return Object.values(this.edges)}},{key:"addEdge",value:function(e){var t=this.getVertexByKey(e.startVertex.getKey()),n=this.getVertexByKey(e.endVertex.getKey());if(t||(this.addVertex(e.startVertex),t=this.getVertexByKey(e.startVertex.getKey())),n||(this.addVertex(e.endVertex),n=this.getVertexByKey(e.endVertex.getKey())),this.edges[e.getKey()])throw new Error("Edge has already been added before");return this.edges[e.getKey()]=e,this.isDirected?t.addEdge(e):(t.addEdge(e),n.addEdge(e)),this}},{key:"deleteEdge",value:function(e){if(!this.edges[e.getKey()])throw new Error("Edge not found in graph");delete this.edges[e.getKey()];var t=this.getVertexByKey(e.startVertex.getKey()),n=this.getVertexByKey(e.endVertex.getKey());t.deleteEdge(e),n.deleteEdge(e)}},{key:"findEdge",value:function(e,t){return this.getVertexByKey(e.getKey()).findEdge(t)}},{key:"findVertexByKey",value:function(e){return this.vertices[e]?this.vertices[e]:null}},{key:"getWeight",value:function(){return this.getAllEdges().reduce((function(e,t){return e+t.weight}),0)}},{key:"reverse",value:function(){var e=this;return this.getAllEdges().forEach((function(t){e.deleteEdge(t),t.reverse(),e.addEdge(t)})),this}},{key:"getVerticesIndices",value:function(){var e={};return this.getAllVertices().forEach((function(t,n){e[t.getKey()]=n})),e}},{key:"getAdjacencyMatrix",value:function(){var e=this,t=this.getAllVertices(),n=this.getVerticesIndices(),r=Array(t.length).fill(null).map((function(){return Array(t.length).fill(1/0)}));return t.forEach((function(t,a){t.getNeighbors().forEach((function(o){var i=n[o.getKey()];r[a][i]=e.findEdge(t,o).weight}))})),r}},{key:"toString",value:function(){return Object.keys(this.vertices).toString()}}]),e}(),Lt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;m()(this,e),this.value=t,this.next=n}return v()(e,[{key:"toString",value:function(e){return e?e(this.value):"".concat(this.value)}}]),e}(),It=function(){function e(t){m()(this,e),this.compare=t||e.defaultCompareFunction}return v()(e,[{key:"equal",value:function(e,t){return 0===this.compare(e,t)}},{key:"lessThan",value:function(e,t){return this.compare(e,t)<0}},{key:"greaterThan",value:function(e,t){return this.compare(e,t)>0}},{key:"lessThanOrEqual",value:function(e,t){return this.lessThan(e,t)||this.equal(e,t)}},{key:"greaterThanOrEqual",value:function(e,t){return this.greaterThan(e,t)||this.equal(e,t)}},{key:"reverse",value:function(){var e=this.compare;this.compare=function(t,n){return e(n,t)}}}],[{key:"defaultCompareFunction",value:function(e,t){return e===t?0:e<t?-1:1}}]),e}(),Bt=function(){function e(t){m()(this,e),this.head=null,this.tail=null,this.compare=new It(t)}return v()(e,[{key:"prepend",value:function(e){return this.head=new Lt(e,this.head),this}},{key:"append",value:function(e){var t=new Lt(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)}},{key:"delete",value:function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare.equal(this.head.value,e);)t=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare.equal(n.next.value,e)?(t=n.next,n.next=n.next.next):n=n.next;return this.compare.equal(this.tail.value,e)&&(this.tail=n),t}},{key:"find",value:function(e){var t=e.value,n=void 0===t?void 0:t,r=e.callback,a=void 0===r?void 0:r;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value))return o;if(void 0!==n&&this.compare.equal(o.value,n))return o;o=o.next}return null}},{key:"deleteTail",value:function(){if(this.head===this.tail){var e=this.tail;return this.head=null,this.tail=null,e}for(var t=this.tail,n=this.head;n.next;)n.next.next?n=n.next:n.next=null;return this.tail=n,t}},{key:"deleteHead",value:function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e}},{key:"toArray",value:function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e}},{key:"toString",value:function(e){return this.toArray().map((function(t){return t.toString(e)})).toString()}}]),e}(),zt=function(){function e(t){if(m()(this,e),void 0===t)throw new Error("Graph vertex must have a value");this.value=t,this.edges=new Bt((function(e,t){return e.getKey()===t.getKey()?0:e.getKey()<t.getKey()?-1:1}))}return v()(e,[{key:"addEdge",value:function(e){return this.edges.append(e),this}},{key:"deleteEdge",value:function(e){this.edges.delete(e)}},{key:"getNeighbors",value:function(){var e=this;return this.edges.toArray().map((function(t){return t.value.startVertex===e?t.value.endVertex:t.value.startVertex}))}},{key:"getEdges",value:function(){return this.edges.toArray().map((function(e){return e.value}))}},{key:"getDegree",value:function(){return this.edges.toArray().length}},{key:"hasEdge",value:function(e){return!!this.edges.find({callback:function(t){return t===e}})}},{key:"hasNeighbor",value:function(e){return!!this.edges.find({callback:function(t){return t.startVertex===e||t.endVertex===e}})}},{key:"findEdge",value:function(e){var t=this.edges.find({callback:function(t){return t.startVertex===e||t.endVertex===e}});return t?t.value:null}},{key:"getKey",value:function(){return this.value}},{key:"deleteAllEdges",value:function(){var e=this;return this.getEdges().forEach((function(t){return e.deleteEdge(t)})),this}},{key:"toString",value:function(e){return e?e(this.value):"".concat(this.value)}}]),e}(),Ft=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;m()(this,e),this.startVertex=t,this.endVertex=n,this.weight=r}return v()(e,[{key:"getKey",value:function(){var e=this.startVertex.getKey(),t=this.endVertex.getKey();return"".concat(e,"_").concat(t)}},{key:"reverse",value:function(){var e=this.startVertex;return this.startVertex=this.endVertex,this.endVertex=e,this}},{key:"toString",value:function(){return this.getKey()}}]),e}(),Ut=Object.freeze({__proto__:null,Graph:Nt,Vertex:zt,Edge:Ft,LinkedList:Bt});function Vt(e){return e.getNeighbors().filter((function(e){return!0!==e.visited}))}function qt(e){var t,n={};for(t=0;t<e.length;t++){var r=e[t],a=Rt(r.x1,r.y1,r.x2,r.y2).string;if(n[a])"ray"===r.type&&(n[a].type="straight"),e[t]=null;else{n[a]=r;var o,i=xt(r.x1,r.y1,r.x2,r.y2);o=r.x1===r.x2?r.x1:r.y1===r.y2?r.y1:r.y1-(r.y2-r.y1)/(r.x2-r.x1)*r.x1,r.k=i,r.b=o,r.intersections=[]}}return(e=e.filter((function(e){return e}))).sort((function(e,t){return e.b-t.b})),e}function Ht(e){var t,n,r=Je(e=qt(e),"k"),a=[];for(t=0;t<r.length;t++){var o=r[t],i=function(){var e=r[n];o.forEach((function(t){e.forEach((function(e){var n=_t(t.x1,t.y1,t.x2,t.y2,e.x1,e.y1,e.x2,e.y2);("ray"!==t.type||Tt(t,n))&&("ray"!==e.type||Tt(e,n))&&(t.intersections.push(n),e.intersections.push(n),n.index=a.length,a.push(n))}))}))};for(n=t+1;n<r.length;n++)i()}var c=new Nt,l=a.map((function(e,t){var n=new zt(t);return Object.assign(n,e),n})),s=[];for(t=0;t<e.length;t++){var u=e[t];for(n=0;n<u.intersections.length;n++){var d=u.intersections[n],f=u.intersections[n+1];f&&s.push(new Ft(l[d.index],l[f.index]))}}return l.forEach((function(e){c.addVertex(e)})),s.forEach((function(e){c.addEdge(e)})),c}function Wt(e,t,n,r){t=e.snap(t),n=e.snap(n);var a,o,i=t,c=Vt(i),l=[i];for(i.visited=!0,i.distance=0;c.length>0;){a=-1/0,o=void 0;for(var s=0;s<c.length;s++){var u=c[s];if(u.from=i,!u.visited){u.distance=At(i.x,i.y,u.x,u.y)+i.distance;var d=r(u,t,n);d>a&&(o=u,a=d)}}if(o&&(c=Vt(i=o),l.push(i),i.visited=!0,i===n))break}return l}function Yt(e,t){var n=e.getTotalLength();if(0===n)return{x:0,y:0};var r,a,o,i,c,l=8,s=1/0;for(i=0;i<=n;i+=l)(c=t((o=e.getPointAtLength(i)).x,o.y))<s&&(s=c,a=i,r=o);for(l/=2;l>.25;){var u=a-l,d=e.getPointAtLength(u),f=t(d.x,d.y);if(u>=0&&f<s)r=d,a=u,s=f;else{var p=a+l,h=e.getPointAtLength(p),m=t(h.x,h.y);m>=0&&m<s?(r=h,a=p,s=m):l/=2}}return r}var Gt=Object.freeze({__proto__:null,deepTreeTraversal:Ue,deepTreeTraversalWithoutSelf:Ve,breadthTreeTraversal:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e.children},r=[];for(r.unshift(e);0!==r.length;){var a=r.shift();t(a);var o=n(a);if(o)for(var i=0;i<o.length;i++)r.push(o[i])}},toRadian:ft,roughlyEqual:pt,roughlyArrayEqual:ht,rectContainRect:mt,pointInRect:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minX,r=t.minY,a=t.maxX,o=t.maxY;return!(e[0]<=n||e[0]>=a||e[1]<=r||e[1]>=o)},rectIntersectRect:gt,lineSlope:vt,lineDistance:yt,findThridPoint:bt,computeXYOffset:kt,lineRadian:wt,lineIntercept:xt,lineIntersection:_t,manhattanDistance:Et,isBetween:Ct,isEqlPoint:Ot,lineSegmentIntersect:St,getLineEquation:Rt,lineSegmentIntersectRect:jt,pointInLine:Pt,pointToPointDistance:At,isInRay:Tt,clockwiseAngle:Dt,radialQuadrantSegmentationGenerator:Mt,normalize2D:function(e){var t=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2));return[1/t*e[0],1/t*e[1]]},getOffset:function(e,t){return Math.max(Math.max(Math.abs(Math.abs(e[0])-Math.abs(t[0])),Math.abs(Math.abs(e[1])-Math.abs(t[1])))/3,4)},calculateLine:qt,linesToGraph:Ht,snapPoint:function(e,t){for(var n={vertex:void 0,distance:1/0},r=e.getAllVertices(),a=0;a<r.length;a++){var o=r[a];if(o.x===t.x&&o.y===t.y)return o;var i=Et(o.x,o.y,t.x,t.y);i<n.distance&&(n.vertex=o,n.distance=i)}return n.vertex},pathFinding:Wt,binaryFindPoint:Yt}),Xt=["http:","https:","data:","dingtalk:","ftp:","mailto:","blob:"];function Kt(e){return function(e){return"string"==typeof e&&!(e=e.toLowerCase()).startsWith("data:text/html")&&!/\s/.test(e)&&(!!Xt.some((function(t){return e.startsWith(t)}))||!(!e.startsWith("./")&&!e.startsWith("/"))||e.indexOf(":")<0)}(e)?e:""}var Zt={locale:r.LocaleUtil.getLocale(),translations:{"en-us":{"成组":"Group","取消分组":"UnGroup"," 粘贴":" paste","三角形":"Triangle","上下居中":"Vertical Align Center","上移":"Forward","上移一层":"Bring Forward","下移":"Backward","下移一层":"Bring Backward","不透明度":"Opacity","五边形":"Polygon","位置":"Position","保存":"Save","保持宽高比":"Constrain proportions","内部存储":"Internal Storage","决策":"Decision","准备":"Preparation","分支":"Branch Line","分支类型":"Branch type","分支粗细":"Branch thickness","分支线条宽度逐渐变细":"Tapered line","分支颜色":"Line Color","删除":"Delete","删除单个节点":"Delete a single node","前进":"Forward","剪切":"Cut","剪切失败！":"Cut failed!","剪切成功！":"Cut successfully!","副标题":"Subtitle","加粗":"Bold","原始大小":"Original size","双击画布快速添加":"Double click to directly add","双向箭头":"Arrow 3","可设置颜色、布局、文字等样式":"Can set color, layout, text and other styles","右对齐":"Right","右箭头":"Arrow 2","合并":"Merge","后退":"Backward","回到中心":"Fit Page","图形":"Shape","图片":"Picture","图片上传中，请稍候":"Picture uploading, please wait","圆形":"Circle","圆角矩形":"Rounded Rectangle","垂直分布":"Vertically","基础图形":"Basic Graphics","基础格式":"Basic Format","填充":"Fill","填充颜色":"Fill","备注":"Note","复制":"Copy","复制为其它格式":"Copy to other formats","复制失败！":"Copy failed!","复制成功！":"Copy successfully!","多文档":"Multi Document","大小":"Size","大标题":"Title","子级":"Child","字号":"Font size","字色":"Font Color","存储数据":"Stored Data","实际尺寸":"Actual size","宽":"Widht","宽度":"Width","对齐":"Alignment","对齐方式":"Alignment","小标题":"Title small","层级":"Level","展开":"Expand","展开节点":"Expand topic","左右居中":"Justify","左对齐":"Left","左箭头":"Arrow 1","已粘贴当前页面复制的内容，如需粘贴页面外内容请使用 ":"The copied content of the current page has been pasted. If you need to paste the content outside the page, please use","布局":"Layout","平行四边形":"Parallelogram","幻灯片布局":"Slide layout","底对齐":"Bottom","延迟":"Delay","形状":"Shape","彩虹分支":"Multi-colored lines","循环起止符":"Loop Limit","思维导图":"Mindmap","或者":"Or","手动循环":"Manual loop","手动设置节点宽度":"Fixed size","手动设置节点尺寸":"Custom size","手动输入":"Manual Input","折叠":"Collapse","折叠节点":"Collapse topic","拖拽":"Drag","排列":"Arrange","排序":"Sort","描边":"Stroke","插入":"Insert","插入主节点":"Insert root topic","插入同级":"Insert sibling","插入同级节点":"Insert topic","插入图片":"Insert image","插入子级":"Insert child","插入子节点":"Insert subtopic","插入父级":"Insert parent","插入连线":"Inset line","插入链接":"Insert link","撤销":"Undo","数据":"Data","数据库":"Storage","整理":"Collate","文字样式":"Text Style","文本":"Text","文本颜色":"Font color","文档":"Document","新建节点":"New Node","旋转":"Rotate","旋转角度":"Rotate angle","无颜色":"No color","星形":"Star","显示":"Display","标注":"Comment","标注 2":"Annotation 2","样式":"Styles","格式":"Format","格式面板":"Format panel","正文":"Text","水平分布":"Horizontally","汇总连接":"Summing Junction","流程图":"Flowchart","流程图图形":"Flowchart Graphics","添加图形":"Insert Geometry","添加思维导图":"Insert Mindmap","添加文字":"Insert Text","添加连线":"Insert Line","添加链接":"Insert Link","点击选中元素":"Click on the selected element","父级":"Parent","矩形":"Rectangle","端点":"End Point","类型":"Type","粗细":"Line Width","粘贴":"Paste","粘贴失败！":"Paste failed!","线条":"Line","线条/边框":"Line/Border","线条样式":"Line style","线条端点":"Line Endpoint","线条类型":"Line Shape","线条粗细":"Line Width","线条颜色":"Line Color","终点":"End","结构":"Structure","编辑文本":"Edit text","置底":"Back","置顶":"Front","背景":"Background","背景颜色":"Background color","节点":"Node","节点填充":"Fill","节点形状":"Topic shape","节点描边":"Stroke","菱形":"Diamond","角度":"Angle","设置":"Setting","设置面板":"Properties","语雀文档":"Yuque document","语雀表格":"Yuque table","起止符":"Terminator","起点":"Start","边框":"Border","边框粗细":"Border thickness","边框颜色":"Border color","过程":"Process","连接器":"Connector","连接线":"Line","连线":"Insert Line","适应画布":"Reset View","重做":"Redo","链接":"Link","页外连接符":"Off-page Connector","顶对齐":"Top","预定义流程":"Predefined Process","颜色":"Color","高":"Height","高度":"Height","隐藏工具栏":"Hide Toolbar","展开工具栏":"Expand Toolbar"}}};function $t(e,t){if(!e)return e;var n=Zt.locale,r=Zt.translations[n]||{};return"zh-cn"!==n&&(e=r[e]||e),e.replace(/\{([^\}]+)\}/g,(function(e,n){return t[n]||n}))}var Qt={html:"".concat($t("思维导图")),type:"mindmap",defaultContentStyle:{color:"rgb(38, 38, 38)"},border:{fill:"rgb(245, 245, 245)"}},Jt={"line-height":!0,"font-size":!0,"text-decoration-line":!0,"font-weight":!0,"font-style":!0,"text-align":!0,"text-decoration":!0,color:!0},en=Object.freeze({__proto__:null,MINDMAP_ROOT_TEMPLATE:Qt,INLINE_STYLE:Jt,EMPTY_TEXT:"&#8203;",SELECTED_STROKE_COLOR:"#096DD9",LOCKED_STROKE_COLOR:"#979797",DEFAULT_FONT_COLOR:"#262626",MULTI_SELECTED_FRAME_FILL:"rgba(9, 109, 217, .05)",LOCAL_STORAGE_CLIPBOARD_DATA_KEY:"lake_diagram_clipboard_data"}),tn=new S.a.FilterXSS({onIgnoreTag:function(){return""},css:{whiteList:Jt},whiteList:{p:["style","id"],a:["href","title","target","style"],b:["style"],i:["style"],span:["style"],br:[],div:["style"]},onTagAttr:function(e,t,n){if("a"===e&&"href"===t){var r=Kt(n);return r?"".concat(t,'="').concat(r,'"'):""}}});function nn(e){if(e&&e.body){var t=[];e.body.forEach((function(e){Ue(e,(function(e,n){e.isPlaceholder?t.push({model:e,parent:n}):(function(e){if(e&&e.layout){var t=e.layout.type,n=e.layout,r=n.quadrants,a=n.direction;"standrad"===t?(1===(r=Array.isArray(r)?r.length:Number(r))&&(tt(a,[-1,0])||tt(a,[0,-1])?e.layout.quadrantConstraint=[2]:e.layout.quadrantConstraint=[1]),tt(a,[-1,0])?e.layout.direction=[1,0]:tt(a,[0,-1])&&(e.layout.direction=[0,1])):"indent"===t&&(tt(a,[1,0])?e.layout.quadrantConstraint=[1]:tt(a,[-1,0])&&(e.layout.quadrantConstraint=[2]),e.layout.direction=[1,1])}}(e),function(e){if("line"===e.type&&e.children&&delete e.children,e.image&&e.image.src){var t=Kt(e.image.src);e.image.src=tn.process(t)}}(e))}))})),t.forEach((function(t){var n=t.model,r=t.parent,a=r?r.children:e.body,o=a.indexOf(n);o>-1&&a.splice(o,1)}))}}var rn="http://www.w3.org/2000/svg",an="http://www.w3.org/1999/xlink";function on(e){e=e||document.body;var t=document.createElementNS(rn,"svg");return t.setAttribute("version","1.1"),t.setAttribute("xmlns",rn),t.setAttribute("xmlns:xlink",an),t.style.opacity=0,t.style.width="0px",t.style.height="0px",t.style.position="absolute",t.style["z-index"]=-1,e.appendChild(t),t}function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sn=on(),un=function(e){b()(n,C.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(m()(this,n),r=ln({matrix:[1,0,0,0,1,0,0,0,1]},r),e=t.call(this,r),!r.name)throw new Error("Should set name for Graphics Element!");return e.options=r,e.matrix=r.matrix,e.attrs={},e.styles={},e.rendererElement=e.create(r.name),e.update(r),e}return v()(n,[{key:"hide",value:function(){this.update({visibility:"hidden"})}},{key:"show",value:function(){this.update({visibility:"visible"})}},{key:"on",value:function(e,t){-1!==this.passthroughEventKeys().indexOf(e)&&this.rendererElement.addEventListener(e,t),T()(_()(n.prototype),"on",this).call(this,e,t)}},{key:"off",value:function(e,t){-1!==this.passthroughEventKeys().indexOf(e)&&this.rendererElement.removeEventListener(e,t),T()(_()(n.prototype),"off",this).call(this,e,t)}},{key:"passthroughEventKeys",value:function(){return["mousedown","mouseenter","mouseleave","mousemove","mouseover","click"]}},{key:"passthroughAttributeKeys",value:function(){return["id","fill","stroke","stroke-width","stroke-linecap","stroke-linejoin","stroke-miterlimit","clip-path","visibility","pointer-events","opacity","stroke-dasharray","class"]}},{key:"dataset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.rendererElement;t.dataset?Object.assign(t.dataset,e):Object.keys(e).forEach((function(n){t.setAttribute("data-".concat(n),e[n])}))}},{key:"_getPassthroughData",value:function(e,t){var n={},r=Object.keys(t),a=this["passthrough".concat(e,"Keys")]();return r.filter((function(e){return a.includes(e)})).forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n}},{key:"update",value:function(e){var t=this._getPassthroughData("Attribute",e),n=e.matrix;n&&(t.transform="matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(n[6],", ").concat(n[7],")"),this.matrix=n),this.attr(t)}},{key:"_setAttrs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rendererElement;Object.keys(e).forEach((function(n){var r=e[n];null==r?t.removeAttribute(n):t.setAttribute(n,r)}))}},{key:"_setStyles",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rendererElement;Object.keys(e).forEach((function(n){t.style[n]=e[n]}))}},{key:"create",value:function(e){return document.createElementNS(rn,e)}},{key:"css",value:function(e){if("object"===o()(e))this.styles=ln(ln({},this.styles),e),this._setStyles(e);else if("string"==typeof e)return this.styles[e]}},{key:"attr",value:function(e){if("object"===o()(e))this.attrs=ln(ln({},this.attrs),e),this._setAttrs(e);else if("string"==typeof e)return this.attrs[e]}},{key:"getBBox",value:function(){var e,t=this.rendererElement,n=this.canvas,r=n&&n.calculateCanvas||sn;if(document.contains(t))e=t.getBBox();else{var a=t.cloneNode(!0);r.appendChild(a),e=a.getBBox(),r.removeChild(a)}return{x:e.x,y:e.y,width:e.width,height:e.height}}},{key:"getBoundingClientRect",value:function(){return this.rendererElement.getBoundingClientRect()}},{key:"getZIndex",value:function(){return this.parent?this.parent.children.indexOf(this):null}},{key:"getSiblingRendererElement",value:function(){return this.rendererElement.nextSibling?["before",this.rendererElement.nextSibling]:this.rendererElement.previousSibling?["after",this.rendererElement.previousSibling]:null}},{key:"remove",value:function(){this.parent&&this.parent.removeChild(this)}},{key:"previousSibling",get:function(){var e=this.parent.children,t=e.indexOf(this);return t>=1?e[t-1]:null}},{key:"nextSibling",get:function(){var e=this.parent.children,t=e.indexOf(this);return t>=0?e[t+1]:null}},{key:"before",value:function(e){this.parent.insertBefore(e,this)}},{key:"after",value:function(e){this.parent.insertAfter(e,this)}},{key:"toBack",value:function(){if(!this.destroyed){var e=this.parent;e&&e.insertBefore(this,e.children[0])}}},{key:"toFront",value:function(){if(!this.destroyed){var e=this.parent;e&&e.insertBefore(this,null)}}},{key:"forward",value:function(){if(!this.destroyed){var e=this.parent,t=this.nextSibling;e&&t&&e.insertBefore(t,this)}}},{key:"backward",value:function(){if(!this.destroyed){var e=this.parent,t=this.previousSibling;e&&t&&e.insertBefore(this,t)}}},{key:"destroy",value:function(){this.destroyed=!0,this.options=null,this.remove()}}]),n}();function dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pn=function(e){b()(n,un);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),r=fn({name:"g"},r),(e=t.call(this,r)).children=[],e}return v()(n,[{key:"passthroughAttributeKeys",value:function(){return T()(_()(n.prototype),"passthroughAttributeKeys",this).call(this)}},{key:"deepEach",value:function(e){Ue(this,e)}},{key:"add",value:function(e){this.children.includes(e)||(e.parent=this,this.children.push(e),this.rendererElement.appendChild(e.rendererElement))}},{key:"append",value:function(e){this.rendererElement.appendChild(e.rendererElement)}},{key:"prepend",value:function(e){this.insertBefore(e,this.children[0])}},{key:"insertBefore",value:function(e,t){var n=this.children,r=this.rendererElement,a=n.indexOf(e);a>=0&&n.splice(a,1),e.parent=this;var o=n.indexOf(t);o>=0?(n.splice(o,0,e),r.insertBefore(e.rendererElement,t.rendererElement)):(n.push(e),r.insertBefore(e.rendererElement,null))}},{key:"insertAfter",value:function(e,t){t?this.insertBefore(e,t.nextSibling):this.insertBefore(e,null)}},{key:"removeChild",value:function(e){if(e.parent===this){var t=this.children,n=t.indexOf(e);n>-1&&t.splice(n,1),e.parent=void 0,this.rendererElement.removeChild(e.rendererElement)}}},{key:"clear",value:function(){[].concat(this.children).forEach((function(e){e.remove()}))}}]),n}();function hn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gn=function(e){b()(n,pn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(m()(this,n),!(r=mn({container:null,calculatedContainer:null,name:"svg"},r)).container)throw new Error("Please set container for canvas!");(e=t.call(this,r)).options=r;var a=r,o=a.container,i=P()(e),c=i.rendererElement;return c.setAttribute("version","1.1"),c.setAttribute("xmlns",rn),c.setAttribute("xmlns:xlink",an),o.appendChild(c),e.createCalculateCanvas(),e.container=o,e.canvas=P()(e),e}return v()(n,[{key:"createCalculateCanvas",value:function(){var e=this.options;this.calculateCanvas=on(e.calculatedContainer)}},{key:"remove",value:function(){this.container&&this.container.removeChild(this.rendererElement),this.calculateCanvas&&this.calculateCanvas.parentElement.removeChild(this.calculateCanvas)}}]),n}();function vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bn=function(e){b()(n,pn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),t.call(this,yn({x:0,y:0,scale:1,rotate:0},e))}return v()(n,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.options,e);var t=this.options,r=t.x,a=t.y,o=t.scale,i=t.rotate,c=o,l=Math.cos(i),s=Math.sin(i);e.matrix=[l*c,s*c,0,-s*c,l*c,0,r,a,1],T()(_()(n.prototype),"update",this).call(this,e)}}]),n}();var kn=function(e){b()(n,un);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),(e=t.call(this,r)).isShape=!0,e}return v()(n)}(),wn="\t\n\v\f\r   ᠎             　\u2028\u2029",xn=new RegExp("([a-z])["+wn+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+wn+"]*,?["+wn+"]*)+)","ig"),_n=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+wn+"]*,?["+wn+"]*","ig");function En(e){if(!e)return null;if(Array.isArray(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return(e=String(e)).replace(xn,(function(e,r,a){var o=[],i=r.toLowerCase();if(a.replace(_n,(function(e,t){t&&o.push(+t)})),"m"===i&&o.length>2&&(n.push([r].concat(o.splice(0,2))),i="l",r="m"===r?"l":"L"),"o"===i&&1===o.length&&n.push([r,o[0]]),"r"===i)n.push([r].concat(o));else for(;o.length>=t[i]&&(n.push([r].concat(o.splice(0,t[i]))),t[i]););return""})),n}function Cn(e){if(Array.isArray(e)){var t=L()(e);return[t[0],t.slice(1).join()].join("")}var n=e.name,r=e.x,a=e.y;switch(n.toLowerCase()){case"m":case"l":return n+[r,a].join();case"h":case"v":return n+r;case"z":return n;case"a":var o=e.xAxisRotation,i=e.largeArcFlag,c=e.sweepFlag;return n+[e.rx,e.ry,o,i,c,r,a].join();case"c":return n+[e.x1,e.y1,e.x2,e.y2,e.x,e.y].join();case"q":return n+[e.x1,e.y1,e.x,e.y].join();default:throw new Error("unknown path command: ".concat(n))}}function On(e){return e.map(Cn).join("")}function Sn(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:a;return On(a?[["M",+e+ +a,t],["l",n-2*a,0],["a",a,o,0,0,1,a,o],["l",0,r-2*o],["a",a,o,0,0,1,-a,o],["l",2*a-n,0],["a",a,o,0,0,1,-a,-o],["l",0,2*o-r],["a",a,o,0,0,1,a,-o],["z"]]:[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]])}function Rn(e){return On(e.map((function(e,t){return[0===t?"M":"L",e.x,e.y]})))}function jn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return On([["M",e-n,t],["a",n,r,0,1,0,2*n,0],["a",n,r,0,1,0,-2*n,0],["Z"]])}function Pn(e,t,n){return jn(e,t,n)}function An(e){for(var t=[],n=[0,.25,.5,.75],r=0;r<e.length-1;r++){var a=e[r-1],o=e[r],i=e[r+1],c=e[r+2];void 0===a&&(a={x:2*o.x-i.x,y:2*o.y-i.y}),void 0===c&&(c={x:2*i.x-o.x,y:2*i.y-o.y}),n[1]=Math.pow(yt(a.x,a.y,o.x,o.y),1)+n[0],n[2]=Math.pow(yt(o.x,o.y,i.x,i.y),1)+n[1],n[3]=Math.pow(yt(i.x,i.y,c.x,c.y),1)+n[2];var l=[(n[2]-n[1])/(n[2]-n[0]),(n[1]-n[0])/(n[2]-n[0]),(n[3]-n[2])/(n[3]-n[1]),(n[2]-n[1])/(n[3]-n[1])],s=[(n[2]-n[1])*(l[0]*(o.x-a.x)/(n[1]-n[0])+l[1]*(i.x-o.x)/(n[2]-n[1])),(n[2]-n[1])*(l[0]*(o.y-a.y)/(n[1]-n[0])+l[1]*(i.y-o.y)/(n[2]-n[1]))],u=[(n[2]-n[1])*(l[2]*(i.x-o.x)/(n[2]-n[1])+l[3]*(c.x-i.x)/(n[3]-n[2])),(n[2]-n[1])*(l[2]*(i.y-o.y)/(n[2]-n[1])+l[3]*(c.y-i.y)/(n[3]-n[2]))];t.push(["C",o.x+s[0]/3,o.y+s[1]/3,i.x-u[0]/3,i.y-u[1]/3,i.x,i.y])}return t}function Tn(e,t,n){var r=[],a=t[0],o=t[t.length-1],i=e[0],c=e[e.length-1];if(!i&&!i)return[];"V"===i[i.length-1]?r.push(["L",a.x,i[1]]):r.push(["L",i[0],a.y]);for(var l=1;l<e.length;l++){var s=e[l-1],u=e[l];"V"===u[u.length-1]?r.push(["L",s[0],u[1]]):r.push(["L",u[0],s[1]])}"V"===c[c.length-1]?r.push(["L",o.x,c[1]]):r.push(["L",c[0],o.y]);var d=r;n&&(d=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],a=e[n+1];r&&a&&ht(r.slice(1),a.slice(1),2)?n+=1:t.push(r)}return t}(r)),d.unshift(["M",a.x,a.y]);var f=d[d.length-1];if(pt(f[1],t[t.length-1].x,.65)&&pt(f[f.length-1],t[t.length-1].y,.65)?d[d.length-1]=["L",t[t.length-1].x,t[t.length-1].y]:pt(f[1],t[t.length-1].x)&&pt(f[f.length-1],t[t.length-1].y)||d.push(["L",t[t.length-1].x,t[t.length-1].y]),d.length>1){var p=d[0],h=d[1];pt(p[1],h[1],.65)&&pt(p[p.length-1],h[h.length-1],.65)&&d.splice(1,1)}return d}function Dn(e){var t=e.source,n=e.target,r=e.diagram,a=[],o=r.find(t.id),i=r.find(n.id),c=e.getPoints(),l=c[0],s=c[1];if(!o&&!i){var u=In(c[0],c[1]);return a.push(u),a}if(o&&i){var d=Mn(o,t),f=Mn(i,n),p=o.getRelativePoint({x:.5,y:.5}),h=i.getRelativePoint({x:.5,y:.5}),m=Nn(d,p,l,s),g=Nn(f,h,s,l),v=[l.x+m.direction[0]*m.offset,l.y+m.direction[1]*m.offset],y=[s.x+g.direction[0]*g.offset,s.y+g.direction[1]*g.offset];return[["C",v[0],v[1],y[0],y[1],s.x,s.y]]}if(!o&&i){var b=Nn(Mn(i,n),i.getRelativePoint({x:.5,y:.5}),s,l),k=In(c[0],c[1]);return k[3]=s.x+b.direction[0]*b.offset,k[4]=s.y+b.direction[1]*b.offset,a.push(k),a}var w=Nn(Mn(o,t),o.getRelativePoint({x:.5,y:.5}),l,s),x=In(c[0],c[1]);return x[1]=l.x+w.direction[0]*w.offset,x[2]=l.y+w.direction[1]*w.offset,a.push(x),a}function Mn(e,t){var n={x:-1,y:-1},r=t.connection;return r&&("string"===o()(r)?n=e.anchors.filter((function(e){return e.name===r}))[0]:Array.isArray(r)&&(n={x:r[0],y:r[1]})),{width:e.width,height:e.height,theta:e.rotate,port:n}}function Nn(e,t,n,r){var a,o,i=e.width,c=e.height,l=e.port,s=e.theta,u=l.x,d=l.y;if(0===u&&0===d||1===u&&1===d||0===u&&1===d||1===u&&0===d)return a=[n.x-t.x,n.y-t.y],o=Math.sqrt(Math.pow(i,2)+Math.pow(c,2))/3,{direction:Ln(a),offset:Math.max(o,36)};var f=Ln([n.x-t.x,n.y-t.y]);return 0===u&&d>0&&d<1?(a=0===s?[-1,0]:f,o=Math.abs(Math.abs(n.x)-Math.abs(r.x))):1===u&&d>0&&d<1?(a=0===s?[1,0]:f,o=Math.abs(Math.abs(n.x)-Math.abs(r.x))):0===d&&u>0&&u<1?(a=0===s?[0,-1]:f,o=Math.abs(Math.abs(n.y)-Math.abs(r.y))):1===d&&u>0&&u<1?(a=0===s?[0,1]:f,o=Math.abs(Math.abs(n.y)-Math.abs(r.y))):(a=f,o=Math.abs(n.y-r.y)),o/=2,{direction:a,offset:Math.max(o,32)}}function Ln(e){var t=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2));return 0!==t?[1/t*e[0],1/t*e[1]]:t}function In(e,t){var n=Bn(e,t),r=Bn(t,e);return["C",n.x,n.y,r.x,r.y,t.x,t.y]}function Bn(e,t){var n=0,r=0;return function(e,t){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)}(e,t)?n=zn(e.x,t.x):r=zn(e.y,t.y),{x:e.x+n,y:e.y+r}}function zn(e,t){return(t-e)/3}function Fn(e,t,n,r,a,o,i,c){return On([["M",e,t],["L",n,t],["L",n,r],["L",e,r],["Z"],["M",a,o],["L",a,c],["L",i,c],["L",i,o],["Z"]])}function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qn(e){for(var t,n=/([mlhvcsqtaz])/gi,r=e.replace(n," $1 ").trim().split(/[ ,]+/),a=[],o=0;o<r.length;o++){var i=r[o];n.test(i)?(t&&a.push(t),t=[i]):t.push(parseFloat(i))}return a}function Hn(e,t,n){return"string"==typeof e&&(e=qn(e)),e.map((function(e){return function(e,t,n){switch(Array.isArray(e)&&(e=function(e){var t=L()(e),n=t[0],r=t.slice(1);switch(n.toLowerCase()){case"m":case"l":var a=M()(r,2);return{name:n,x:a[0],y:a[1]};case"a":var o=M()(r,7);return{name:n,rx:o[0],ry:o[1],xAxisRotation:o[2],largeArcFlag:o[3],sweepFlag:o[4],x:o[5],y:o[6]};case"c":var i=M()(r,6);return{name:n,x1:i[0],y1:i[1],x2:i[2],y2:i[3],x:i[4],y:i[5]};case"q":var c=M()(r,4);return{name:n,x1:c[0],y1:c[1],x:c[2],y:c[3]};default:return{name:n}}}(e)),e.name.toLowerCase()){case"m":case"l":var r=e,a=r.x,o=r.y;return Vn(Vn({},e),{},{x:a*t,y:o*n});case"a":var i=e,c=i.x,l=i.y,s=i.rx,u=i.ry;return Vn(Vn({},e),{},{x:c*t,y:l*n,rx:s*t,ry:u*n});case"c":var d=e,f=d.x1,p=d.y1,h=d.x2,m=d.y2,g=d.x,v=d.y;return Vn(Vn({},e),{},{x1:f*t,y1:p*n,x2:h*t,y2:m*n,x:g*t,y:v*n});case"q":var y=e,b=y.x1,k=y.y1,w=y.x,x=y.y;return Vn(Vn({},e),{},{x1:b*t,y1:k*n,x:w*t,y:x*n});default:return e}}(e,t,n)}))}var Wn=Object.freeze({__proto__:null,parsePathString:En,formatPath:On,rectPath:Sn,polylinePath:Rn,ellipsePath:jn,circlePath:Pn,catmullRomPath:An,elbowPath:Tn,bezierPath:Dn,huiPath:Fn,inflatePath:qn,scalePath:Hn});function Yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xn=function(e){b()(n,kn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),r=Gn(Gn({},r),{},{name:"path"}),(e=t.call(this,r)).isPath=!0,e}return v()(n,[{key:"passthroughAttributeKeys",value:function(){return T()(_()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["d","marker-start","marker-end","fill-rule"])}},{key:"update",value:function(e){var t=e.d;Array.isArray(t)?T()(_()(n.prototype),"update",this).call(this,Gn(Gn({},e),{},{d:On(t)})):T()(_()(n.prototype),"update",this).call(this,e)}},{key:"getPath",value:function(e,t){return Hn(this.options.d,e,t)}},{key:"getClosestPoint",value:function(e,t){var n=Yt(this.rendererElement,(function(n,r){var a=n-e,o=r-t;return a*a+o*o}));return[n.x,n.y]}},{key:"getIntersectionPoint",value:function(e,t,n,r){return Yt(this.rendererElement,(function(a,o){var i=a-e,c=o-t,l=a-n,s=o-r;return Math.sqrt(i*i+c*c)+Math.sqrt(l*l+s*s)}))}}]),n}();function Kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}["getPointAtLength","getTotalLength","isPointInFill","isPointInStroke"].forEach((function(e){Object.defineProperty(Xn.prototype,e,{value:function(){var t=this.rendererElement;return t[e].apply(t,arguments)}})}));var $n=function(e){b()(n,kn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),e=Zn({name:"html",html:"",x:0,y:0,width:0,height:0,styleSheets:[]},e),t.call(this,e)}return v()(n,[{key:"addClass",value:function(e){this.htmlContainer.classList.add(e)}},{key:"removeClass",value:function(e){this.htmlContainer.classList.remove(e)}},{key:"passthroughAttributeKeys",value:function(){return T()(_()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["x","y","width","height"])}},{key:"create",value:function(){var e=document.createElement("div"),t=T()(_()(n.prototype),"create",this).call(this,"foreignObject");return e.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),t.appendChild(e),this.htmlContainer=e,it(this.htmlContainer,this.options.styleSheets),t}},{key:"update",value:function(e){e.html&&this.htmlContainer.innerHTML!==e.html&&(this.html=e.html,this.htmlContainer.innerHTML=e.html,it(this.htmlContainer,this.options.styleSheets)),T()(_()(n.prototype),"update",this).call(this,e)}}]),n}();var Qn=function(e){b()(n,kn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),e={name:"avatar",matrix:e.element.matrix,element:e.element},t.call(this,e)}return v()(n,[{key:"create",value:function(){return this.options.element.rendererElement.cloneNode(!0)}}]),n}();function Jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tr=function(e){b()(n,kn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),t.call(this,er({name:"image",crossorigin:"anonymous",preserveAspectRatio:"none"},e))}return v()(n,[{key:"passthroughAttributeKeys",value:function(){return T()(_()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["href","x","y","width","height","crossorigin","preserveAspectRatio"])}}]),n}();function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ar=function(e){b()(n,Xn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){m()(this,n);var r=e.x,a=e.y,o=e.width,i=e.height,c=e.rx,l=e.ry;return t.call(this,rr(rr({},e),{},{d:Sn(r,a,o,i,c,l)}))}return v()(n,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.options,r=n.x,a=n.y,o=n.width,i=n.height,c=n.rx,l=n.ry;return Sn(r*e,a*t,o*e,i*t,Math.min(c*e,c),Math.min(l*e,l))}}]),n}();function or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ir(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?or(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cr=function(e){b()(n,Xn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){m()(this,n);var r=e.cx,a=e.cy,o=e.rx,i=e.ry;return t.call(this,ir(ir({},e),{},{d:jn(r,a,o,i)}))}return v()(n,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.options,r=n.cx,a=n.cy,o=n.rx,i=n.ry;return jn(r*e,a*t,o*e,i*t)}}]),n}();function lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ur=function(e){b()(n,un);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),e=sr({name:"use"},e),t.call(this,e)}return v()(n,[{key:"passthroughAttributeKeys",value:function(){return T()(_()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["x","y","width","height","href"])}}]),n}();function dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pr=function(e){b()(n,un);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){return m()(this,n),t.call(this,fr(fr({},e),{},{name:"title"}))}return v()(n,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title;null!=t&&(this.rendererElement.innerHTML=t)}}]),n}();function hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gr=function(e){b()(n,un);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){return m()(this,n),t.call(this,mr(mr({},e),{},{name:"text"}))}return v()(n,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T()(_()(n.prototype),"update",this).call(this,e);var t=e||{},r=t.text;null!=r&&(this.rendererElement.innerHTML=r)}},{key:"passthroughAttributeKeys",value:function(){return T()(_()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["dominant-baseline","x","y","textLength"])}}]),n}();function vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var br=function(e){b()(n,Xn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){m()(this,n);var r=e.points;return t.call(this,yr(yr({},e),{},{d:Rn(r).concat("z")}))}return v()(n,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.options.points,r=n.map((function(n){return{x:n.x*e,y:n.y*t}}));return Rn(r).concat("z")}}]),n}();function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xr=function(e){b()(n,pn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),r=wr({name:"defs",matrix:null},r),(e=t.call(this,r)).isDefs=!0,e}return v()(n)}();var _r=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Er=function(e){b()(n,un);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e;return m()(this,n),(e=t.call(this,{name:"linearGradient",matrix:null})).id=Object(I.a)(),e.rendererElement.setAttribute("id",e.id),e}return v()(n,[{key:"update",value:function(e){if("string"==typeof e){var t,n,r,a,o=this.rendererElement,i=_r.exec(e),c=(n=parseFloat(i[1]),(Math.PI/180*n%(t=2*Math.PI)+t)%t),l=i[2];c>=0&&c<.5*Math.PI?(r={x:0,y:0},a={x:1,y:1}):.5*Math.PI<=c&&c<Math.PI?(r={x:1,y:0},a={x:0,y:1}):Math.PI<=c&&c<1.5*Math.PI?(r={x:1,y:1},a={x:0,y:0}):(r={x:0,y:1},a={x:1,y:0});var s=Math.tan(c),u=s*s,d=(a.x-r.x+s*(a.y-r.y))/(u+1)+r.x,f=s*(a.x-r.x+s*(a.y-r.y))/(u+1)+r.y;o.setAttribute("x1",r.x),o.setAttribute("y1",r.y),o.setAttribute("x2",d),o.setAttribute("y2",f),o.innerHTML=function(e){var t=e.match(/[\d.]+:(#[^\s]+|[^\)]+\))/gi);if(!t)return"";var n="";return t.sort((function(e,t){return e=e.split(":"),t=t.split(":"),Number(e[0])-Number(t[0])})),t.forEach((function(e){e=e.split(":"),n+='<stop offset="'.concat(e[0],'" stop-color="').concat(e[1],'"></stop>')})),n}(l)}}}]),n}();function Cr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Sr=function(e){b()(n,pn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){return m()(this,n),t.call(this,Or(Or({},e),{},{name:"marker"}))}return v()(n,[{key:"passthroughAttributeKeys",value:function(){return T()(_()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["id","markerWidth","markerHeight","viewBox","orient","refX","refY"])}}]),n}();function Rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pr=function(e){b()(n,pn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),(e=t.call(this,jr(jr({},r),{},{name:"filter"}))).children=[],e}return v()(n,[{key:"add",value:function(e){e.parent=this,this.children.push(e),this.rendererElement.appendChild(e.rendererElement)}},{key:"destroy",value:function(){this.children.forEach((function(e){return e.destroy()})),T()(_()(n.prototype),"destroy",this).call(this)}}]),n}();function Ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dr=function(e){b()(n,un);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){return m()(this,n),t.call(this,Tr(Tr({},e),{},{name:"feDropShadow"}))}return v()(n,[{key:"passthroughAttributeKeys",value:function(){return T()(_()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["dx","dy","stdDeviation","flood-color"])}}]),n}();function Mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lr=function(e){b()(n,pn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){return m()(this,n),t.call(this,Nr(Nr({},e),{},{matrix:null,name:"clipPath"}))}return v()(n,[{key:"passthroughAttributeKeys",value:function(){return T()(_()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["id","clipPathUnits"])}}]),n}(),Ir=Object.freeze({__proto__:null,Canvas:gn,Group:pn,FixedGroup:bn,Shape:kn,Path:Xn,Html:$n,Avatar:Qn,Image:tr,Defs:xr,LinearGradient:Er,Rect:ar,Ellipse:cr,Marker:Sr,Use:ur,Filter:Pr,FeDropShadow:Dr,ClipPath:Lr,Title:pr,Text:gr,Polygon:br});function Br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Br(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,e),Object.assign(this,zr({autoSelect:!0},t))}return v()(e,[{key:"execute",value:function(){}},{key:"forward",value:function(){}},{key:"backward",value:function(){}},{key:"select",value:function(e){var t=this.diagram;this.autoSelect&&(e&&e.length>0?t.selector.select(e):(t.selector.clear(),t.tryFocus()))}}]),e}();function Ur(){var e=[],t=arguments[0];Array.isArray(t)?e.push(t):e.push([t]);for(var n=1;n<arguments.length;n++)if(t=arguments[n],Array.isArray(t))e.push(t);else{for(var r=[],a=0;a<e[0].length;a++)r.push(t);e.push(r)}return e}c()(Fr,"className","Command"),c()(Fr,"isModelChange",!0),c()(Fr,"enable",(function(){return!0}));var Vr=Object.freeze({__proto__:null,convertBatch:Ur});var qr=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.model,n=void 0===t?{}:t,r=this.cellOptions,a=Ur(n,void 0===r?{}:r);a[0].forEach((function(e){e.id||(e.id=Object(I.a)())}));var o=e.add.apply(e,z()(a));o.forEach((function(t,n){Object.assign(a[1][n],e.getCellOptions(t))})),this.changeArguments=a,this.select(o)}},{key:"forward",value:function(){var e=this.diagram,t=this.changeArguments,n=e.add.apply(e,z()(t));this.select(n)}},{key:"backward",value:function(){var e=this.diagram,t=this.changeArguments,n=e.find(t[0][0].id).parent;e.remove(t[0].map((function(e){return e.id}))),this.select(n&&n.model.id)}}]),n}();c()(qr,"className","Add");var Hr=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"getCells",value:function(){var e=this.changeArguments,t=this.diagram,n=e[0].map((function(e){return t.find(e)}));if(n.some((function(e){return!e})))throw new Error("can not find the cell");return n}},{key:"execute",value:function(){var e=this.diagram,t=this.model,n=this.cellOptions,r=void 0===n?{}:n,a=this.originModels,i=this.id;Array.isArray(i)&&"object"===o()(i[0])&&(i=i.map((function(e){return e.model.id})));var c=Ur(i,t,r);this.changeArguments=c;var l=this.getCells(),u=c[1];this.originModels=a||l.map((function(e,t){var n=u[t];return Object.keys(n).reduce((function(e,r){if("children"===r)return e;var a=n[r],o=l[t].model[r];return s()(a)?e[r]=Object.keys(a).reduce((function(e,t){var n=o&&o[t];return e[t]=null==n?null:n,e}),{}):e[r]=null==o?null:o,e}),{})})),this.originCellOptions=l.map((function(t){return e.getCellOptions(t)}));for(var d=0;d<u.length;d++)st(this.originModels[d],u[d]);e.update(l,u,c[2]),this.select(l)}},{key:"forward",value:function(){var e=this.diagram,t=this.changeArguments,n=this.getCells(),r=t[1];e.update(n,r,t[2]),this.select(n)}},{key:"backward",value:function(){var e=this.diagram,t=this.originModels,n=this.originCellOptions,r=this.getCells();e.update(r,t,n),this.select(r)}}]),n}();c()(Hr,"className","Update");var Wr=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){var e=this.commands,t=e.length;e.forEach((function(e,n){e.autoSelect=n===t-1,e.execute()}))}},{key:"forward",value:function(){var e=this.commands,t=e.length;e.forEach((function(e,n){e.autoSelect=n===t-1,e.forward()}))}},{key:"backward",value:function(){for(var e=this.commands,t=e.length-1;t>=0;t--){var n=e[t];n.autoSelect=0===t,n.backward()}}}]),n}();c()(Wr,"className","Compound");var Yr=function(e){b()(n,Wr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){}}]),n}();c()(Yr,"className","NoneExecuteCompound");var Gr=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections,n=e.deduplicate(t).filter((function(e){return e.canCollapse()}));e.update(n,{collapsed:!0}),e.selector.select(n),this.cells=n.map((function(e){return e.model.id}))}},{key:"backward",value:function(){var e=this.diagram,t=this.cells;e.update(t,{collapsed:null}),e.selector.select(t)}},{key:"forward",value:function(){var e=this.diagram,t=this.cells;e.update(t,{collapsed:!0}),e.selector.select(t)}}]),n}();c()(Gr,"className","Collapse"),c()(Gr,"enable",(function(e){var t=e.selector.selections;return e.deduplicate(t).some((function(e){return e.canCollapse()}))}));var Xr=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections,n=e.deduplicate(t).filter((function(e){return e.canExpand()}));e.update(n,{collapsed:null}),e.selector.select(n),this.cells=n.map((function(e){return e.model.id}))}},{key:"backward",value:function(){var e=this.diagram,t=this.cells;e.update(t,{collapsed:!0}),e.selector.select(t)}},{key:"forward",value:function(){var e=this.diagram,t=this.cells;e.update(t,{collapsed:null}),e.selector.select(t)}}]),n}();c()(Xr,"className","Expand"),c()(Xr,"enable",(function(e){var t=e.selector.selections,n=e.deduplicate(t);return n.every((function(e){return!e.canCollapse()}))&&n.some((function(e){return e.canExpand()}))}));var Kr=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return v()(n,[{key:"execute",value:function(){this.diagram.command.undo()}}]),n}();c()(Kr,"className","Undo"),c()(Kr,"enable",(function(e){return e.command.index>=0}));var Zr=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return v()(n,[{key:"execute",value:function(){this.diagram.command.redo()}}]),n}();c()(Zr,"className","Redo"),c()(Zr,"enable",(function(e){var t=e.command;return t.index<t.commands.length-1}));var $r=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return v()(n,[{key:"execute",value:function(){var e=this.diagram.viewport;e.setViewport(e.zoom+.2)}}]),n}();c()($r,"className","ZoomIn"),c()($r,"isModelChange",!1),c()($r,"enable",(function(e){var t=e.viewport;return t.zoom+.2<=t.maxZoom}));var Qr=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return v()(n,[{key:"execute",value:function(){var e=this.diagram.viewport;e.setViewport(e.zoom-.2)}}]),n}();c()(Qr,"className","ZoomOut"),c()(Qr,"isModelChange",!1),c()(Qr,"enable",(function(e){var t=e.viewport;return t.zoom-.2>=t.minZoom}));var Jr=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;m()(this,n),r=t.call(this,e);var a=P()(r).diagram.viewport;return r.queue=!1,r.zoom=e.zoom<a.minZoom&&a.minZoom||e.zoom>a.maxZoom&&a.maxZoom||e.zoom,r}return v()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.zoom;e.viewport.setViewport(t)}}]),n}();function ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ta(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ea(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ea(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function na(e,t){t.importer.caches={};var n=t.selector.selections;if(0!==n.length){e.preventDefault();var a=t.exporter.clipboard(n);e.clipboardData.setData("text/html",a.html),e.clipboardData.setData("text/plain",a.text),r.LocalStorageUtil.setItem("lake_diagram_clipboard_data",JSON.stringify(ta(ta({},a),{},{recordTime:Date.now()})))}}c()(Jr,"className","ZoomTo"),c()(Jr,"isModelChange",!1);var ra={preventDefault:function(){},clipboardData:{setData:function(e,t){this[e]=t},getData:function(e){return this[e]},files:[]}};function aa(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!document.execCommand(e))if("paste"!==e)t.command.execute(e.charAt(0).toUpperCase()+e.slice(1),{e:ra});else{var o=r.LocalStorageUtil.getItem("lake_diagram_clipboard_data");if(o){o=JSON.parse(o);var i=R.ua.macos?"⌘+V":"Ctrl+V";a&&F.a.info($t("已粘贴当前页面复制的内容，如需粘贴页面外内容请使用 ")+i+$t(" 粘贴")),ra.clipboardData.setData("text/html",o.html),ra.clipboardData.setData("text/plain",o.text),t.command.execute("Paste",{e:ra,focusPoint:n})}}}window.__lake_diagram_board_custom_clipboard_event=ra;var oa=Object.freeze({__proto__:null,handleCopy:na,customClipboardEvent:ra,executeClipboardCommand:aa});function ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ia(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ia(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var la=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),t.call(this,ca({queue:!1},e))}return v()(n,[{key:"execute",value:function(){na(this.e,this.diagram)}}]),n}();c()(la,"className","Copy"),c()(la,"isModelChange",!1);var sa=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.e,n=this.focusPoint,r=t.clipboardData.getData("text/html"),a=t.clipboardData.getData("text/plain"),o=Array.from(t.clipboardData.files),i={text:a,html:r};o.length>0&&(""===r&&/^.+\.\w+$/.test(a)||""===a&&/^(<meta.+?>)?<img.+?>$/.test(r)||!a||!r)&&(i.files=o);var c=e.importer.clipboard(i,n);c?(this.handler=c,s()(c)&&(this.selectedCellId=e.selector.selections.map((function(e){return e.model.id})),e.destroyed||(e.signal.beforePasteSelect=!0,e.selector.select(this.handler.body.map((function(e){return e.id}))),e.signal.beforePasteSelect=!1))):this.queue=!1}},{key:"forward",value:function(){var e=this.handler,t=this.diagram;e&&(e.execute(),t.selector.select(this.handler.body.map((function(e){return e.id}))))}},{key:"backward",value:function(){var e=this.handler,t=this.diagram,n=this.selectedCellId;e&&(e.body.forEach((function(e){t.remove(e.id)})),n&&t.selector.select(n))}}]),n}();c()(sa,"className","Paste");var ua=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.call(this,{queue:!1})}return v()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections[0];e.command.execute("ZoomTo",{zoom:1}),e.viewport.focus([t.x,t.y])}}]),n}();c()(ua,"className","FocusSelection"),c()(ua,"enable",(function(e){return 1===e.selector.selections.length}));var da=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.id,n=this.endHTML,r={html:n};Array.isArray(n)&&(r=n.map((function(e){return{html:e}}))),e.update(t,r)}},{key:"forward",value:function(){var e=this.diagram,t=this.endHTML,n=this.id,r={html:t};Array.isArray(t)&&(r=t.map((function(e){return{html:e}}))),e.update(n,r),this.select(n)}},{key:"backward",value:function(){var e=this.diagram,t=this.id,n=this.startHTML,r={html:n};Array.isArray(n)&&(r=n.map((function(e){return{html:e}}))),e.update(t,r),this.select(t)}}]),n}();c()(da,"className","UpdateCellContent");var fa=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return v()(n,[{key:"execute",value:function(){var e=this.diagram,t=$t("链接"),n=window.getSelection().getRangeAt(0).commonAncestorContainer;if(e.contentEditor.dom&&n===e.contentEditor.dom){var r=n.querySelectorAll("a");if(1===r.length){var a=r[0].getAttribute("href");a&&(t=a)}}e.contentEditor.execCommand("createLink",t)}}]),n}();c()(fa,"className","CreateLink"),c()(fa,"enable",(function(e){var t=e.getCell(e.contentEditor.dom);return e.contentEditor.getRange()&&t}));var pa=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r.onBeginInsertLine=function(e){if(r.sourceCell){var t=P()(r),n=t.diagram,a=t.beginInsertEvent,o=n.viewport.invertClient([e.clientX,e.clientY]);n.emit("begininsertline",{source:{id:r.sourceCell.model.id,connection:null},target:{id:null,connection:[o[0],o[1]]}}),n.off(a,r.onBeginInsertLine)}},r}return v()(n,[{key:"bindBegineInsertEvent",value:function(){var e=this.diagram,t=this.sourceCell,n=this.beginInsertEvent;e.off(n,this.onBeginInsertLine),t&&e.on(n,this.onBeginInsertLine)}},{key:"execute",value:function(){var e=this.diagram,t=this.shape,n=this.beginInsertEvent,r=e.selector.selections;1!==r.length||r[0].isLine||r[0].isGroup||(this.sourceCell=r[0],n="mousemove"),e.selector.clear(),e.tryFocus(),e.interaction.changeMode("beginInsertLine"),e.settings.line.shape=t,this.beginInsertEvent=n,this.beginInsertEvent&&this.bindBegineInsertEvent()}}],[{key:"enable",value:function(){return!0}}]),n}();c()(pa,"className","BeginInsertLine"),c()(pa,"isModelChange",!1),Fr.Add=qr,Fr.Collapse=Gr,Fr.Compound=Wr,Fr.Expand=Xr,Fr.NoneExecuteCompound=Yr,Fr.Redo=Zr,Fr.Undo=Kr,Fr.UpdateCellContent=da,Fr.Update=Hr,Fr.ZoomIn=$r,Fr.ZoomOut=Qr,Fr.ZoomTo=Jr,Fr.CreateLink=fa,Fr.BeginInsertLine=pa;var ha=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.name,n=this.value,r=e.selector,a=e.contentEditor,o=r.selections.filter((function(e){return e.textAreaElement})),i=o.map((function(e){return e.textAreaElement.htmlContainer})),c=i.map((function(e){return e.innerHTML}));e.contentEditor.batchEdit(i,t,n);var l=i.map((function(e){return e.innerHTML})),s={html:l};Array.isArray(l)&&(s=l.map((function(e){return{html:e}}))),this.endHTML=l,this.startHTML=c,this.id=o,e.update(o,s),1!==o.length||a.isBegin||a.prepareEdit()}},{key:"forward",value:function(){var e=this.diagram,t=this.endHTML,n=this.id,r={html:t};Array.isArray(t)&&(r=t.map((function(e){return{html:e}}))),e.update(n,r),this.select(n)}},{key:"backward",value:function(){var e=this.diagram,t=this.id,n=this.startHTML,r={html:n};Array.isArray(n)&&(r=n.map((function(e){return{html:e}}))),e.update(t,r),this.select(t)}}],[{key:"enable",value:function(e){return e.selector.selections.filter((function(e){return e.textAreaElement})).length>0}}]),n}();c()(ha,"className","ContentCommand");var ma=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(e){var t=this.diagram,n=this.cells,r=n.map((function(e){return e.model.id})),a=n.map((function(e){return t.getCellOptions(e)}));n.forEach((function(t){t[e]()}));var o=n.map((function(e){return t.getCellOptions(e)}));this.beforeCellOptions=a,this.afterCellOptions=o,this.id=r,this.select(r)}},{key:"backward",value:function(){var e=this.diagram,t=this.id,n=this.beforeCellOptions;e.update(t,{},n),this.select(t)}},{key:"forward",value:function(){var e=this.diagram,t=this.id,n=this.afterCellOptions;e.update(t,{},n),this.select(t)}}]),n}();c()(ma,"className","ZIndex");var ga=function(e){b()(n,ma);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){T()(_()(n.prototype),"execute",this).call(this,"toBack")}}]),n}();c()(ga,"className","ToBack");var va=function(e){b()(n,ma);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){T()(_()(n.prototype),"execute",this).call(this,"toFront")}}]),n}();c()(va,"className","ToFront");var ya=function(e){b()(n,ma);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){T()(_()(n.prototype),"execute",this).call(this,"forward")}}]),n}();c()(ya,"className","Forward");var ba=function(e){b()(n,ma);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){T()(_()(n.prototype),"execute",this).call(this,"backward")}}]),n}();c()(ba,"className","Backward");var ka=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){this.diagram.viewport.autoFit()}}]),n}();c()(ka,"className","FitViewport"),c()(ka,"isModelChange",!1);var wa=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return v()(n,[{key:"execute",value:function(){var e=this.diagram;e.selector.select(e.getCells().filter((function(e){return e.state.visible})))}}]),n}();c()(wa,"className","SelectAll"),c()(wa,"isModelChange",!1);var xa=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return v()(n,[{key:"execute",value:function(){this.diagram.viewport.setViewport(1)}}]),n}();c()(xa,"className","ActualSize"),c()(xa,"isModelChange",!1);var _a=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return v()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections[0];e.contentEditor.prepareEdit(),e.contentEditor.beginEdit(),e.update(t,{})}}],[{key:"enable",value:function(e){var t=e.selector.selections;return 1===t.length&&t.every((function(e){return e.textAreaElement}))}}]),n}();c()(_a,"className","BeginEditContent"),c()(_a,"isModelChange",!1);var Ea=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return v()(n,[{key:"execute",value:function(){var e=this.diagram;if("dragCanvas"===e.interaction.currentMode)e.interaction.changeMode("edit");else e.highlight.clear(),e.interaction.changeMode("dragCanvas")}}]),n}();function Ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ca(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ca(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c()(Ea,"className","ButtonDragCanvas"),c()(Ea,"isModelChange",!1);var Sa=function(){function e(t){m()(this,e),this.index=-1,this.commands=[],this.diagram=t,this.commandConstructors={ToBack:ga,ToFront:va,Forward:ya,Backward:ba,Add:qr,Update:Hr,Compound:Wr,NoneExecuteCompound:Yr,Collapse:Gr,Expand:Xr,Undo:Kr,Redo:Zr,ZoomIn:$r,ZoomOut:Qr,ZoomTo:Jr,ActualSize:xa,FitViewport:ka,UpdateCellContent:da,ContentCommand:ha,FocusSelection:ua,Copy:la,Paste:sa,CreateLink:fa,BeginInsertLine:pa,SelectAll:wa,ButtonDragCanvas:Ea,BeginEditContent:_a}}return v()(e,[{key:"find",value:function(e){var t=this.diagram;return!e||t&&t.destroyed?null:"string"==typeof e?this.commandConstructors[e]:e.constructor}},{key:"enable",value:function(e){var t=this.find(e);return t&&(!t.enable||t.enable(this.diagram))||!1}},{key:"register",value:function(e){this.commandConstructors[e.className]=e}},{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new this.commandConstructors[e](Oa({diagram:this.diagram},t))}},{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.diagram;if(!n||!n.destroyed){"string"==typeof e&&(e=this.create(e,t));var r=e.constructor.className,a={commandName:r,command:e};if(n&&n.emit("beforecommandexecute",a),this.enable(e)&&!0!==a.prevent){var o=+new Date;e.execute(),!1!==e.queue&&(this.index>-1?this.commands=this.commands.slice(0,this.index+1):this.commands=[],this.commands.push(e),this.index=this.commands.indexOf(e)),a.useTime=+new Date-o,a.isModelChange=e.constructor.isModelChange,n&&n.emit("aftercommandexecute",a)}return e}}},{key:"redo",value:function(){var e=this.index,t=this.commands;e>=t.length-1||(t[++e].forward(),this.index=e)}},{key:"undo",value:function(){var e=this.index,t=this.commands;e<0||(t[e].backward(),this.index=--e)}},{key:"destroy",value:function(){this.commands=void 0}}]),e}();c()(Sa,"className","Command");var Ra=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,e),this.onKey="on",this.offKey="off",Object.assign(this,t),this.events=[]}return v()(e,[{key:"bind",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e===window||e instanceof HTMLElement||e instanceof SVGElement?"addEventListener":r.onKey)||this.onKey;e[a](t,n);var o={object:e,eventName:t,callback:n,options:r};return this.events.push(o),o}},{key:"_unbind",value:function(e){var t=e.object,n=e.eventName,r=e.callback,a=e.options;if(t[(t===window||t instanceof HTMLElement||t instanceof SVGElement?"removeEventListener":a.offKey)||this.offKey](n,r),this.events){var o=this.events.indexOf(e);-1!==o&&this.events.splice(o,1)}}},{key:"unbind",value:function(e){var t=this;e?this._unbind(e):this.events.concat([]).forEach((function(e){t._unbind(e)}))}},{key:"destroy",value:function(){this.events&&this.unbind(),this.events=void 0,this.destroyed=!0}}]),e}();function ja(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pa(e){var t=(new DOMParser).parseFromString(e,"text/html").querySelector("[data-lake_diagram_body]");return!!t&&{body:JSON.parse(t.dataset.lake_diagram_body),extraInformations:JSON.parse(t.dataset.lake_extra_informations||t.dataset.lake_computed_props_map)||{},optionsMap:{}}}function Aa(e){return e.replace(/[\u00A0-\u9999<>\&]/gim,(function(e){return"&#"+e.charCodeAt(0)+";"}))}function Ta(e){return e&&(e=tn.process(e)),"&#8203;"!==Aa(e)&&(e=e.replace(/[\u200B-\u200D\uFEFF]/g,"")),e||""}function Da(e){try{var t,n,r,a,o,i,c=e.trim().split("\n"),l=[],s=0,u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ja(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ja(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(c);try{for(u.s();!(i=u.n()).done;)if(0!==(a=i.value).trim().length){var d=(a=a.replace(decodeURI("%0D"),"")).match(/^(\s*)([\S].*)$/),f=M()(d,3),p=f[1],h=f[2];!o&&p&&t&&(o=p.length);var m=p.length/o;if(m)if(m>s)n=r,r={html:h},n.children=[r],s+=1;else if(m===s)r={html:h},n.children.push(r);else{var g=0;for(n=t;g<m-1;)n=n.children[n.children.length-1],g++;r={html:h},s=m,n.children.push(r)}else t=n=r={html:h},l.push(t)}}catch(e){u.e(e)}finally{u.f()}return l}catch(e){return null}}var Ma=Object.freeze({__proto__:null,getLakeDataByHtml:Pa,toHTMLCharacters:Aa,parseHTML:Ta,structuredPlainText:Da});function Na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function La(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Na(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ia(e,t){var n=e.endContainer,r=e.endOffset;return!!e.collapsed&&function e(t,n,r){if(t.nodeType===Node.TEXT_NODE){if(n!==t.data.length)return!1}else if(n!==t.childNodes.length)return!1;if(t===r)return!0;var a=t.parentNode;return!!a&&e(a,Array.from(a.childNodes).indexOf(t)+1,r)}(n,r,t)}function Ba(e,t){var n=e.startContainer,r=e.startOffset;return!!e.collapsed&&function e(t,n,r){if(n>0)return!1;if(t===r)return!0;var a=t.parentNode;return!!a&&e(a,Array.from(a.childNodes).indexOf(t),r)}(n,r,t)}function za(e,t){return e.nodeType===Node.ELEMENT_NODE&&(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector).call(e,t)}function Fa(e,t,n){for(;e&&n.contains(e);){if("string"==typeof t&&za(e,t)||"function"==typeof t&&t(e))return e;e=e.parentNode}return null}function Ua(e,t){var n=e.getAttribute("style");return n&&n.includes(t)}function Va(e){for(var t=e.firstChild;t;){var n=t.nextSibling;e.parentNode.insertBefore(t,e),t=n}e.parentNode.removeChild(e)}function qa(e){return!(e.altKey||e.ctrlKey||e.metaKey||["Enter","Tab","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Capslock","Esc","Home","Pause","Shift","Option","Alt","Help","Esc","Backspace","Delete","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"].includes(e.key))}function Ha(e,t){if(t&&t.childNodes[0]&&1===t.childNodes[0].nodeType){for(var n=t.childNodes[0];n&&1===n.nodeType&&n.tagName!==e&&n.tagName!==e;)n=n.childNodes[0];if(n&&n.tagName===e)return n}return e===t.tagName&&t||null}function Wa(e,t,n,r){var a=function(e,t){if(!e)return{};var n=window.getComputedStyle(e),r=n["text-align"],a=parseInt(n["font-size"]),o=n.color;return{textAlign:r,fontSize:t.fontSize?t.fontSize.value:a,color:t.foreColor?t.foreColor.value:o}}(e,n),o=function(e,t,n){if(!e)return{};var r=window.getComputedStyle(e),a=parseInt(r["font-size"]),o=r.color;return{bold:t.bold?!t.bold.cancel:!!Fa(e,(function(e){return Ua(e,"bold")}),n),italic:t.italic?!t.italic.cancel:!!Fa(e,(function(e){return Ua(e,"italic")}),n),strikethrough:t.strikethrough?!t.strikethrough.cancel:!!Fa(e,(function(e){return Ua(e,"line-through")}),n),underline:t.underline?!t.underline.cancel:!!Fa(e,(function(e){return Ua(e,"underline")}),n),fontSize:t.fontSize?t.fontSize.value:a,color:t.foreColor?t.foreColor.value:o}}(t,n,r);return La(La({bold:!1,italic:!1,strikethrough:!1,underline:!1},a),o)}function Ya(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return{};if(t){var o=t.startContainer;if(o===e)n=Ha("SPAN",e),r=Ha("DIV",e);else{var i=Fa(o,(function(e){return 1===e.nodeType}),e);n=i,r=i}}else n=Ha("SPAN",e),r=Ha("DIV",e);return Wa(r,n,a,e)}function Ga(e){if(e.preventDefault(),this.isBegin){e.stopPropagation();var t=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("text/html");if(n){var r=(new DOMParser).parseFromString(n,"text/html");if(r&&1===r.body.childNodes.length&&"A"===r.body.childNodes[0].tagName)return this.execCommand("insertHTML",r.body.childNodes[0].outerHTML);if(n.includes("lake_diagram_content_editor_data"))return this.execCommand("insertHTML",r.querySelector("[data-lake_diagram_content_editor_data]").innerHTML)}return t&&/^https?:\/\/\S+$/.test(t)?this.execCommand("insertHTML",'<a href="'.concat(t,'" target="_blank">').concat(t,"</a>")):this.execCommand("insertText",t)}}function Xa(e){return!e||e&&!e.match(/^[\x00-\x7F]/)||e.startsWith("javascript:")}function Ka(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"copy";if(this.isBegin){e.stopPropagation(),"copy"===t&&e.preventDefault();var n=this.getRange(),r=document.createElement("div"),a=n.cloneContents();r.dataset.lake_diagram_content_editor_data=!0,r.appendChild(a),e.clipboardData.setData("text/html",r.outerHTML),e.clipboardData.setData("text",r.innerText)}}function Za(e,t,n){Ue(t,(function(t){if(1===t.nodeType){var n=t.getAttribute("style");n&&n.includes("font-size: x-small;")&&(t.style["font-size"]="".concat(e,"px"))}}),(function(e){return e.childNodes}));var r=[];Ue(t,(function(e){1===e.nodeType&&"FONT"===e.tagName&&r.push(e)}),(function(e){return e.childNodes})),r.length>0&&(n&&!n.collapsed&&Ue(n.commonAncestorContainer,(function(e){1===e.nodeType&&n.isPointInRange(e,0)&&(e.style["font-size"]="")}),(function(e){return e.childNodes})),r.forEach((function(t){var n=t.parentNode,r=document.createElement("span");r.style["font-size"]="".concat(e,"px"),n.insertBefore(r,t),r.appendChild(t),Va(t);var a=r.childNodes[0];a&&"SPAN"===a.tagName&&1===r.childNodes.length&&(Object.keys(Jt).forEach((function(e){a.style[e]&&"font-size"!==e&&(r.style[e]=a.style[e])})),Va(a)),"SPAN"===n.tagName&&1===n.childNodes.length&&(Object.keys(Jt).forEach((function(e){r.style[e]&&"font-size"!==e&&(n.style[e]=r.style[e])})),Va(r))})))}function $a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$a(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ja=R.HotKeyUtils.isHotkey,eo=function(e){b()(n,C.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e;return m()(this,n),(e=t.call(this)).eventHelper=new Ra,e.isBegin=!1,e.readyCommands={},e.compositing=!1,e.eventObj={},e}return v()(n,[{key:"batchEdit",value:function(e,t,n){var r,a=this,o=window.getSelection();try{r=o.getRangeAt(0)}catch(e){}e.forEach((function(e){var r=document.createRange();r.selectNodeContents(e),o.removeAllRanges(),o.addRange(r);var i=e.getAttribute("contenteditable");e.setAttribute("contenteditable",!0),"fontSize"===t?(a._execCommand(t,1),Za(n,e,r)):a._execCommand(t,n),i||e.removeAttribute("contenteditable")})),o.removeAllRanges(),r&&o.addRange(r)}},{key:"prepareEdit",value:function(){var e=this.dom;if(e){this.updateStartContent();var t=window.getSelection(),n=document.createRange();e.focus(),n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),this.emit("prepareedit")}}},{key:"closest",value:function(e,t){return Fa(e,t,this.dom)}},{key:"getRange",value:function(){if(!this.dom)return null;var e=window.getSelection();try{var t=e.getRangeAt(0);return this.dom.contains(t.commonAncestorContainer)?t:null}catch(e){return null}}},{key:"_execCommand",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];document.execCommand("styleWithCss",!1,!0);var r=document.execCommand(e,n,t),a={name:e,showUI:n,value:t,result:r};return{result:r,eventObj:a}}},{key:"convertFontSize",value:function(e){var t=this.getRange();Za(e,this.dom,t)}},{key:"execReadyCommand",value:function(){this.readyCommands.fontSize&&this.convertFontSize(this.readyCommands.fontSize.value),this.readyCommands={}}},{key:"execCommand",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.getRange();if(r&&e){if("fontSize"===e){var a=this._execCommand(e,1,n),o=a.result,i=a.eventObj;return this.convertFontSize(t),this.afterExecCommand({name:e,value:t,result:o,eventObj:i}),o}if("createLink"===e){var c=this._execCommand(e,t,n),l=c.result,s=c.eventObj;if(l){var u=this.dom.querySelectorAll("a");r=this.getRange(),s.target=Fa(r.commonAncestorContainer,"a",this.dom)||1===r.commonAncestorContainer.nodeType&&r.commonAncestorContainer.querySelector("a");for(var d=0;d<u.length;d++){var f=u[d];f.setAttribute("target","_blank"),f.style.cursor="default",Xa(f.getAttribute("href"))&&f.setAttribute("href","")}}return this.afterExecCommand({name:e,value:t,result:l,eventObj:s}),l}var p=this._execCommand(e,t,n),h=p.result,m=p.eventObj;return this.afterExecCommand({name:e,value:t,result:h,eventObj:m}),h}}},{key:"getFirstTag",value:function(e){return Ha(e,this.dom)}},{key:"afterExecCommand",value:function(e){var t=e.name,n=e.value,r=e.result,a=e.eventObj;if(this.getRange().collapsed)if(this.readyCommands[t])Object.assign(this.readyCommands[t],{value:n,result:r,cancel:!this.readyCommands[t].cancel});else{var o=this.getRange().startContainer,i=o===this.dom?this.getFirstTag("SPAN"):this.closest(o,(function(e){return 1===e.nodeType}));this.readyCommands[t]={value:n,result:r,cancel:!!this.closest(i,(function(e){return Ua(e,"strikethrough"===t?"line-through":t)}))}}this.emit("execcommand",a),this.emitChangeEvent()}},{key:"emitChangeEvent",value:function(){this.emit("change",{dom:this.dom})}},{key:"beginEdit",value:function(){if(this.dom){this.isBegin=!0,this.emit("beginedit",this.eventObj),document.execCommand("styleWithCss",!1,!0),this.dom.classList.remove("selection-transparent");var e=escape(this.dom.innerText);this.dom.style.cursor="text",("%u200B"===e||"%u200D"===e)&&this.getRange().collapse(),this.emit("selectionchange")}}},{key:"forceEndEdit",value:function(){this.isBegin&&(this.endEdit(),this.prepareEdit())}},{key:"updateStartContent",value:function(){this.eventObj&&(this.eventObj.startHTML=Ta(this.dom.innerHTML))}},{key:"bind",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.eventHelper,a=Qa({insertParagraphKey:function(e){return(e.metaKey||e.ctrlKey||e.altKey)&&13===e.which},cancelKey:function(e){return 9===e.which||13===e.which||27===e.which}},n),o=a.insertParagraphKey,i=a.cancelKey;this.originCursor=e.style.cursor,this.dom=e,e.setAttribute("contenteditable",!0),e.setAttribute("spellcheck",!1),e.focus({preventScroll:!0}),this.eventObj={dom:e},this.updateStartContent(),r.bind(e,"contextmenu",(function(e){t.isBegin&&e.stopPropagation()})),r.bind(document,"selectionchange",(function(){t.compositing||(t.execReadyCommand(),t.emit("selectionchange"))}),{onKey:"addEventListener",offKey:"removeEventListener"}),r.bind(e,"keydown",(function(e){var n=t.dom,r=t.getRange();if(t.isBegin){if(Ja("mod+k",e))return e.preventDefault(),e.stopPropagation(),void t.execCommand("createLink",$t("链接"));if(o(e))return t.execCommand("insertParagraph"),e.stopPropagation(),void e.preventDefault();if(i(e))return e.preventDefault(),e.stopPropagation(),void t.forceEndEdit();if(Ja("mod+s",e))return;if(Ja("left",e)&&Ba(r,n))return e.preventDefault(),void e.stopPropagation();if(Ja("right",e)&&Ia(r,n))return e.preventDefault(),void e.stopPropagation();e.stopPropagation()}else{if(Ja("mod+c",e)||Ja("mod+v",e)||Ja("mod+x",e)||Ja("shift+enter",e)||Ja("space",e))return;if(Ja("mod+enter",e))return e.preventDefault(),e.stopPropagation(),void t.beginEdit();if(qa(e))return e.stopPropagation(),void t.beginEdit();e.preventDefault()}})),r.bind(e,"compositionstart",(function(){t.compositing=!0})),r.bind(e,"compositionend",(function(){t.compositing=!1})),r.bind(e,"input",(function(e){e.stopPropagation(),t.isBegin?t.emitChangeEvent():e.preventDefault()})),r.bind(e,"paste",Ga.bind(this)),r.bind(e,"copy",Ka.bind(this)),r.bind(e,"cut",(function(e){Ka.call(t,e,"cut")}))}},{key:"endEdit",value:function(){this.isBegin=!1,this.eventObj.endHTML=Ta(this.dom.innerHTML),this.dom.style.cursor=this.originCursor,this.dom.classList.add("selection-transparent"),this.emit("endedit",this.eventObj)}},{key:"unbind",value:function(){var e=this.dom,t=this.eventHelper;e&&(e.removeAttribute("contenteditable"),e.removeAttribute("spellcheck"),t.unbind(),this.endEdit(),this.dom=void 0)}},{key:"query",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dom,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getRange(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.readyCommands;return Ya(e,t,n)}},{key:"destroy",value:function(){this.unbind(),this.eventHelper=void 0}}]),n}();c()(eo,"className","ContentEditor");var to=function(){function e(t){m()(this,e),this.graphicGroup=t,this.dx=0,this.dy=0}return v()(e,[{key:"translate",value:function(e,t){this.graphicGroup.update({matrix:[1,0,0,0,1,0,e,t,1]}),this.dx=e,this.dy=t}},{key:"getBBox",value:function(){return this.graphicGroup.getBBox()}},{key:"destroy",value:function(){this.graphicGroup.destroy()}}]),e}(),no=function(){function e(t){m()(this,e),this.diagram=t,this.delegations=[]}return v()(e,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.diagram,n=new pn;"function"==typeof e?e(n):((e=e.map((function(e){return"string"==typeof e&&(e=t.find(e)),e}))).sort((function(e,t){return e.getZIndex()-t.getZIndex()})),e.forEach((function(e){var t=new Qn({element:e.graphicGroup});n.add(t)}))),t.frontRootGroup.prepend(n);var r=new to(n);return this.delegations.push(r),r}},{key:"clear",value:function(){var e=this;this.delegations.forEach((function(t){e.remove(t)}))}},{key:"remove",value:function(e){var t=this.delegations;t.splice(t.indexOf(e),1),e.destroy()}},{key:"destroy",value:function(){this.diagram=void 0,this.delegations=void 0}}]),e}();function ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ao(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ro(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oo(e){var t=new Image;return new Promise((function(n,r){t.onload=function(){n(t)},t.onerror=function(){r(new Error("unable to load url ".concat(e)))},t.crossOrigin="anonymous",t.src=e}))}function io(e,t,n,r,a,o,i,c,l,s,u){var d=document.createElement("canvas"),f=d.getContext("2d");d.width=s,d.height=u,f.drawImage(t,r,a,o,i,c,l,s,u),e.push({canvas:d,fy:a*n,fHeight:u})}function co(e){return lo.apply(this,arguments)}function lo(){return(lo=ee()(ne.a.mark((function e(t){var n,r,a,o,i,c,l,s,u,d,f,p,h,m,g,v,y,b,k,w,x,_,E=arguments;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=E.length>1&&void 0!==E[1]?E[1]:{},e.next=3,oo(t);case 3:if(r=e.sent,a=document.createElement("canvas"),o=ao({width:r.naturalWidth,height:r.naturalHeight,fLimit:1e4,ratio:1},n),i=o.width,c=o.height,l=o.fLimit,s=o.backgroundColor,u=o.ratio,d=i*u,f=c*u,a.width=d,a.height=f,p=a.getContext("2d"),s&&(p.fillStyle=s,p.fillRect(0,0,d,f)),f>l){for(h=parseInt(f/l),m=f%l,g=0,v=0,y=i,b=d,k=[],w=0,x=0,_=0;_<h;_++)io(k,r,u,g,w,y,l/u,v,x,b,l),w+=l/u;io(k,r,u,g,w,y,m/u,v,x,b,m),k.forEach((function(e){var t=e.canvas,n=e.fy,r=e.fHeight;p.drawImage(t,0,n,d,r)}))}else p.drawImage(r,0,0,d,f);return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c()(no,"className","Delegator");var so=Object.freeze({__proto__:null,loadImage:oo,loadCanvas:co});function uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uo(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function po(e){return"jpg"===e||"jpeg"===e}function ho(e){var t=(new XMLSerializer).serializeToString(e);return t=t.replace(/[\u200B-\u200D\uFEFF]/g,"").replace(/[\x00-\x1F\x7F-\x9F]/g,""),"data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent('<?xml version="1.0" encoding="utf-8"?>'+t)))}function mo(e,t){var n=t.left,r=t.top,a=t.width,o=t.height,i=t.padding;e.setAttribute("viewBox",[n-i,r-i,a+2*i,o+2*i].join(",")),e.setAttribute("width",a),e.setAttribute("height",o),e.style.width="".concat(a,"px"),e.style.height="".concat(o,"px")}function go(e,t){if(t.image&&t.image.src){var n=document.createElement("img");n.setAttribute("src",t.image.src),e.appendChild(n)}}function vo(e,t){if(t.noteContent){var n=document.createElement("p");n.textContent=t.noteContent,e.appendChild(n)}}function yo(e){var t=document.createElement("td");return e.textContent&&(t.textContent=e.textContent),go(t,e),vo(t,e),t}var bo=function(){function e(t){m()(this,e),this.diagram=t}var t,n,r;return v()(e,[{key:"_getSVG",value:function(){var e=this.diagram.getStaticSVG();return function(e){e.style.position="fixed",e.style.visibility="hidden",document.body.appendChild(e),mo(e,Object.assign(function(e){var t=1/0,n=1/0,r=-1/0,a=-1/0;return Array.from(e.childNodes).filter((function(e){return"root_group"===e.dataset.element})).forEach((function(e){if("defs"!==e.tagName.toLowerCase()){var o=e.getBBox(),i=o.x,c=o.y,l=o.width,s=o.height;i<t&&(t=i),i+l>r&&(r=i+l),c<n&&(n=c),c+s>a&&(a=c+s)}})),{left:t,top:n,width:r-t,height:a-n}}(e),{padding:2})),e.style.position="relative",e.style.visibility="visible",document.body.removeChild(e)}(e),e}},{key:"canvas",value:(r=ee()(ne.a.mark((function e(){var t,n,r,a,o,i,c,l,s,u=arguments;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},n=t.backgroundColor,r=t.paperClip,a=this.svg(),r&&(o=this.diagram.paper,i=o.size,mo(a,{left:0,top:0,width:i[0],height:i[1],padding:2})),e.next=6,Promise.all(Array.from(a.querySelectorAll("image"),function(){var e=ee()(ne.a.mark((function e(t){var n,r;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.getAttribute("href"))){e.next=6;break}return e.next=4,co(n);case 4:r=e.sent,t.setAttribute("href",r.toDataURL("image/png"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return c=t.width||parseFloat(a.getAttribute("width")),l=t.height||parseFloat(a.getAttribute("height")),s=window.devicePixelRatio>2?window.devicePixelRatio:2,e.next=11,co(ho(a),{backgroundColor:n,width:c,height:l,ratio:s});case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"json",value:function(e){var t=this.diagram,n={head:fo({},t.head),body:[]};return t.rootGroup.rendererElement.childNodes.forEach((function(e,r){var a=t.getCell(e);if(a.model.zIndex=r,a.isRoot&&!a.model.isPlaceholder){var o=d()(a.model);o.children&&0===o.children.length&&delete o.children,Ue(o,(function(){void 0!==o.html&&(o.html=Ta(o.html))})),n.body.push(o)}})),"string"===e?JSON.stringify(n):n}},{key:"svg",value:function(e){var t=this._getSVG();return"string"===e||"dom-string"===e?'<?xml version="1.0" encoding="utf-8"?>'+(new XMLSerializer).serializeToString(t):t}},{key:"image",value:function(){var e=this.svg(),t=new Image;return t.src=ho(e),t}},{key:"blob",value:(n=ee()(ne.a.mark((function e(){var t,n,r,a=arguments;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"jpeg",n=a.length>1&&void 0!==a[1]?a[1]:{},po(t)&&(n.backgroundColor="#fff"),e.next=5,this.canvas(n);case 5:return r=e.sent,e.abrupt("return",new Promise((function(e){r.toBlob(e,"image/".concat(t),"jpeg"===t?.8:1)})));case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"download",value:(t=ee()(ne.a.mark((function e(){var t,n,r,a,o,i=arguments;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:"jpeg",n=i.length>1&&void 0!==i[1]?i[1]:{},po(t)&&(n.backgroundColor="#fff"),e.next=5,this.canvas(n);case 5:r=e.sent,a=document.createElement("a"),o=n.filename||"yuque_diagram",a.download="".concat(o,".").concat(t),a.href=r.toDataURL("image/".concat(t)),a.click();case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_textContent",value:function(e){return e?function(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent}(e):""}},{key:"doc",value:function(e){var t=this,n=document.createElement("div");return e.forEach((function(e){Ue(e,(function(e){if(Qe(e.depth,[0,3])){if(e.textContent){var r=document.createElement("h".concat(e.depth+1));r.textContent=e.textContent,n.appendChild(r)}return go(n,e),void vo(n,e)}return t.list([e]).childNodes.forEach((function(e){n.appendChild(e)})),!1}))})),n}},{key:"table",value:function(e){var t=document.createElement("table");e.forEach((function(e){Ue(e,(function(e,n){if(e.parent=n,!e.children||0===e.children.length){var r=document.createElement("tr"),a=yo(e);for(r.prepend(a);n;){var o=yo(n);r.prepend(o),n=n.parent}t.appendChild(r)}}))}));var n=0;return t.childNodes.forEach((function(e){var t=e.childNodes.length;t>n&&(n=t)})),t.childNodes.forEach((function(e){for(var t=e.childNodes.length,r=0;r<n-t;r++){var a=document.createElement("td");e.appendChild(a)}})),t}},{key:"list",value:function(e){var t=document.createElement("div");return e.forEach((function(e){var n=document.createElement("ul");Ue(e,(function(e,t){e.level=t?t.level+1:1;var r=document.createElement("li");t?t.childContainer.appendChild(r):n.appendChild(r),e.textContent&&(r.textContent=e.textContent),go(r,e),vo(r,e),e.children&&e.children.length>0&&(e.childContainer=document.createElement("ul"),t?t.childContainer.appendChild(e.childContainer):n.appendChild(e.childContainer))})),t.appendChild(n)})),t}},{key:"dom",value:function(e){var t=this,n=this.diagram,r=n.settings.copyType;e||(e=n.getCells().filter((function(e){return e.isStem}))),e=n.deduplicate(e);var a=document.createElement("div"),o=document.createElement("div"),i=[];e.forEach((function(e){i=i.concat(e.getAllCells())}));var c=i.reduce((function(e,t){var n=d()(t.computedProps)||{};return n.x=t.x,n.y=t.y,n.rootType=t.stem.type,n.nth=t.getNth(),n.hasParent=!!t.parent,e[t.model.id]=n,e}),{})||{},l=e.map((function(e){return fo({},d()(e.model))}));o.dataset.lake_diagram_body=JSON.stringify(l);var s,u=JSON.stringify(c);return o.dataset.lake_extra_informations=u,a.appendChild(o),l.forEach((function(n,r){n.depth=e[r].depth,Ve(n,(function(e,t){e.depth=t.depth+1})),Ue(n,(function(e){e.textContent=t._textContent(e.html),e.note&&e.note.content&&(e.noteContent=t._textContent(e.note.content))}))})),s="doc"===r?this.doc(l):"table"===r?this.table(l):this.list(l),a.appendChild(s),a}},{key:"html",value:function(){return this.dom().outerHTML}},{key:"getText",value:function(){return this.dom().innerText}},{key:"clipboard",value:function(e){var t=this.dom(e);return{html:t.innerHTML,text:t.textContent}}},{key:"destroy",value:function(){this.diagram=void 0}}]),e}();c()(bo,"className","Exporter");var ko=function(){function e(t){m()(this,e);var n=new pn;n.css({"pointer-events":"none"}),this.diagram=t,this.group=n,this.arr=[],this.eventHelper=new Ra}return v()(e,[{key:"bind",value:function(){var e=this,t=this.diagram,n=this.eventHelper;n.unbind(),n.bind(t,"afterchange",(function(t){var n=t.action;e.arr.length>0&&("update"===n||"delete"===n)&&e.draw()}))}},{key:"show",value:function(){this.group.show()}},{key:"hide",value:function(){this.group.hide()}},{key:"select",value:function(e){var t=this.diagram.viewport.zoom;e=e.filter((function(e){return e.multiSelectHighlight&&e.state.visible})),this.render(e,(function(e){return e.isLine?{type:"outline",shapeStyle:{fill:"none",stroke:"#096DD9","stroke-width":2/t}}:{type:"rect",shapeStyle:{fill:"none",stroke:"#fff","stroke-width":1/t},shadowStyle:{fill:"none",stroke:e.locked?"#979797":"#096DD9","stroke-width":1/t}}}))}},{key:"dock",value:function(e){this.render(e,(function(){return{type:"outline",shapeStyle:{"stroke-width":1,stroke:"#096DD9",fill:"none"},shadowStyle:{"stroke-width":2.5,stroke:"#E6F0FB",fill:"none"}}}))}},{key:"render",value:function(e,t){var n=this.group,r=this.diagram;tt(e,this.arr.map((function(e){return e.cell})))||(this.clear(),e&&!e.some((function(e){return!e||!e.isCell}))&&(r.frontRootGroup.add(n),this.bind(),this.arr=e.map((function(e){var r=t(e),a=r.type,o=r.shapeStyle,i=r.shadowStyle,c={cell:e,type:"function"==typeof a?a(e):a,shape:o&&new Xn(o),shadow:i&&new Xn(i)};return c.shadow&&n.add(c.shadow),c.shape&&n.add(c.shape),c})),this.draw()))}},{key:"_updateShape",value:function(e){var t=e.cell,n=e.type,r=e.shape,a=e.shadow,o=t.getKeyShape();if(o){var i,c=o.attr("stroke-width"),l=c/2,s=t.graphicGroup.matrix.concat([]),u=o.getBBox();if(i="outline"===n?o.attr("d"):Sn(-l,-l,u.width+c,u.height+c),r.update({matrix:s,d:i}),a){var d=parseFloat(a.attr("stroke-width"))+parseFloat(r.attr("stroke-width")),f=u.width+c,p=u.height+c,h=i;t.isLine||(h=ae()(i).scale(1+d/f,1+d/p).translate(-d/2,-d/2).toString()),a.update({matrix:s,d:h})}}}},{key:"_draw",value:function(){var e=this;this.arr.forEach((function(t){e._updateShape(t)}))}},{key:"draw",value:function(){this.arr.length>0&&this._draw()}},{key:"clear",value:function(){this.destroyed||0===this.arr.length||(this.arr=[],this.group.clear(),this.group.remove(),this.eventHelper.unbind())}},{key:"destroy",value:function(){this.eventHelper.destroy(),this.group.destroy(),this.diagram=void 0,this.group=void 0,this.arr=void 0,this.destroyed=!0}}]),e}();c()(ko,"className","Highlight");var wo=function(){function e(t){m()(this,e),this.diagram=t}return v()(e,[{key:"json",value:function(e){this.diagram.add(e.body)}},{key:"clipboard",value:function(){return"clipboard"}},{key:"destroy",value:function(){this.diagram=void 0}}]),e}();c()(wo,"className","Importer");var xo=function(e){b()(n,Ra);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(){}},{key:"reset",value:function(){}},{key:"pressKey",value:function(e){var t=e.diagram,n=e.keys,r=void 0===n?[]:n,a=e.isKey,o=void 0===a?function(e){return r.includes(e.key)}:a,i=e.onPress,c=void 0===i?function(){}:i,l=e.onCancel,s=void 0===l?function(){}:l,u=t.signal.keydown;this.bind(t,"keydown",(function(e){o(e)&&!u[e.key]&&(u[e.key]=!0,c(e))})),this.bind(window,"keyup",(function(e){u[e.key]&&(u[e.key]=!1,s(e))})),this.bind(window,"blur",(function(){for(var e in u)u[e]=!1}))}}]),n}();var _o=R.HotKeyUtils.isHotkey,Eo=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){_o("mod+z",t)?(e.command.execute("Undo"),e.tryFocus()):(_o("mod+y",t)||_o("shift+mod+z",t))&&(e.command.execute("Redo"),e.tryFocus())}))}}]),n}();function Co(e){return R.ua.macos?e.metaKey:e.ctrlKey}var Oo=Object.freeze({__proto__:null,isMod:Co});var So=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){if(Co(t)&&"/"===t.key){if(e.command.enable("Collapse"))return e.command.execute("Collapse");if(e.command.enable("Expand"))return e.command.execute("Expand")}}))}}]),n}();var Ro=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){var t=e.selector;this.bind(window,"mousedown",(function(n){var r=e.selector.selections,a=e.getCell(n.target);a&&a.state.selected&&e.contentEditor.isBegin||(a?n.shiftKey||(R.ua.macos?n.metaKey:n.ctrlKey)?r.includes(a)?t.select(r.filter((function(e){return e!==a}))):t.select(r.concat([a])):r.includes(a)||t.select([a]):ot(n.target,(function(e){return e.dataset.lake_prevent_click_unselect||e.classList.contains("lake-diagram-prevent-mouse-select")}),window.document,(function(e){return e.parentNode}),(function(e){return!e}))||r.length>0&&t.clear(),a&&a.state.selected&&!e.contentEditor.isBegin&&n.preventDefault())}))}}]),n}();var jo=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"collapsedbutton:click",(function(t){var n=t.nativeEvent;if(n.stopPropagation(),n.target.closest("[data-diagram-collapsed-button=true]")){if(e.command.enable("Collapse"))return e.command.execute("Collapse");if(e.command.enable("Expand"))return e.command.execute("Expand")}}))}}]),n}();var Po=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"scroll",(function(e){(e.ctrlKey||R.ua.macos&&e.metaKey)&&(e.preventDefault(),e.stopPropagation())})),this.bind(e,"wheel",(function(t){if(t.ctrlKey||R.ua.macos&&t.metaKey){t.preventDefault(),t.stopPropagation();var n=t.wheelDelta||-t.deltaY;if(e.emit("wheelzoom"),Math.abs(n)>0){var r=e.viewport.zoom;n>0?e.viewport.setViewport(1.05*r):e.viewport.setViewport(r*(1/1.05))}}}))}}]),n}();var Ao=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"copy",(function(t){e.command.execute("Copy",{e:t})}))}}]),n}();var To=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"cut",(function(t){e.command.execute("Cut",{e:t})}))}}]),n}();var Do=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"paste",(function(t){t.preventDefault(),e.command.execute("Paste",{e:t})}))}}]),n}();var Mo=R.HotKeyUtils.isHotkey,No=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){Mo("mod+=",t)?(t.preventDefault(),e.command.execute("ZoomIn")):Mo("mod+shift+=",t)?(t.preventDefault(),e.command.execute("FitViewport")):Mo("mod+-",t)?(t.preventDefault(),e.command.execute("ZoomOut")):Mo("mod+0",t)?e.command.execute("ActualSize"):Mo("mod+8",t)&&e.command.execute("FocusSelection")}))}}]),n}();var Lo=document.createElement("div"),Io=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){var t=e.contentEditor;this.bind(t,"change",(function(t){var n=t.dom,r=e.getCell(n);!e.signal.preventUpdateCellContent&&r&&e.update(r,{html:n.innerHTML})})),this.bind(t,"beginedit",(function(t){var n=t.dom;e.signal.contentEditing=!0;var r=e.getCell(n);r&&r.beginEditContent()})),this.bind(t,"endedit",(function(t){var n=t.dom,r=t.startHTML,a=t.endHTML;e.signal.contentEditing=!1;var o=e.getCell(n);o&&(o.endEditContent(),Lo.innerHTML=a,""===Lo.textContent&&(a=-1!==a.indexOf("<br>")?a.replace("<br>","".concat("&#8203;","<br>")):"&#8203;"),r!==a&&"&#8203;"!==a?e.command.execute("UpdateCellContent",{id:o.model.id,startHTML:r,endHTML:a}):o.shouldRefreshEndEditContent()&&e.update(o))}))}}]),n}();var Bo=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){var t;this.bind(e,"mousedown",(function(n){clearTimeout(t),t=setTimeout((function(){e.getCell(n.target)?e.tryFocus():e.focus()}))}))}}]),n}();var zo=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e;return m()(this,n),(e=t.call(this)).lines=void 0,e}return v()(n,[{key:"init",value:function(e){var t=this;this.bind(e,"afterselect",(function(){var n=e.selector.selections,r=t.lines;1===n.length?(r&&r.forEach((function(e){return e.resizer.end()})),t.lines=n.filter((function(e){return e.isLine})),t.lines.forEach((function(e){return e.resizer.begin()}))):(r&&r.forEach((function(e){return e.resizer.end()})),t.lines=void 0)}))}}]),n}(),Fo=function(){function e(t){m()(this,e),this.diagram=t,this.modes={edit:[new Eo,new So,new Ro,new jo,new Po,new Ao,new To,new Do,new No,new Io,new Bo,new zo],read:[new So,new Ro,new jo,new No,new Po,new Bo,new Ao],none:[]},this.defaultCursors={read:"grab"},this.defaultCursor="default",this.currentMode=null}return v()(e,[{key:"_removeCurrentMode",value:function(){this.currentMode&&this.modes[this.currentMode].forEach((function(e){e.reset(),e.unbind()}))}},{key:"init",value:function(e){this.changeMode(e)}},{key:"addDefaultCursor",value:function(e){Object.assign(this.defaultCursors,e)}},{key:"registerMode",value:function(e,t){var n=this.modes;n[e]?n[e]=n[e].concat(t):this.modes[e]=t}},{key:"getModeCursor",value:function(){return this.defaultCursors[this.currentMode]||this.defaultCursor}},{key:"changeMode",value:function(e){var t=this,n=this.modes[e],r=this.diagram;r.emit("beforemodechange"),this._removeCurrentMode(),n.forEach((function(e){e.diagram=t.diagram,e.init(t.diagram)}));var a=this.defaultCursors[e]||this.defaultCursor;this.currentMode=e,r.emit("aftermodechange"),this.diagram.setCursor(a)}},{key:"destroy",value:function(){this._removeCurrentMode(),this.diagram=void 0,this.modes=void 0,this.currentMode=void 0}}]),e}();c()(Fo,"className","Interaction");var Uo=function(){function e(t){m()(this,e),this.diagram=t,this.fill={color:"#ffffff"}}return v()(e,[{key:"init",value:function(e){Object.assign(this,{size:[200,200]},e),this.eventHelper=new Ra,this.visible&&this.render(),this.bind()}},{key:"calculateBBox",value:function(){var e=this.diagram,t=this.size,n=e.rootGroup.getBBox(),r=e.viewport.zoom;if("auto"===t){var a={},o=e.width/r,i=e.height/r;if(n.width<o){var c=n.x+n.width/2,l=o/2;a.left=c-l,a.right=c+l}else a.left=n.x,a.right=n.x+n.width;if(n.height<i){var s=n.y+n.height/2,u=i/2;a.top=s-u,a.bottom=s+u}else a.top=n.y,a.bottom=n.y+n.height;return a}return 0===n.width&&0===n.height?Array.isArray(t)?{top:0,bottom:t[1],left:0,right:t[0]}:{top:0,bottom:e.height,left:0,right:e.width}:{top:Math.floor(n.y/t[1])*t[1],bottom:Math.ceil((n.y+n.height)/t[1])*t[1],left:Math.floor(n.x/t[0])*t[0],right:Math.ceil((n.x+n.width)/t[0])*t[0]}}},{key:"getBBox",value:function(){return this.calculateBBox()}},{key:"render",value:function(){var e=this.diagram,t=this.size,n=this.fill,r=e.defs,a=e.backRootGroup,o=Object(I.a)(),i=new Pr,c=new Dr({dx:0,dy:2,stdDeviation:8,"flood-color":"rgba(115, 115, 115, 0.08)"});i.attr({id:o}),i.add(c),r.add(i);var l=M()(t,2),s=l[0],u=l[1],d=new ar({x:0,y:0,width:s,height:u,fill:n.color});d.css({filter:"url(#".concat(o,")"),"pointer-events":"none"}),a.add(d),this.element=d}},{key:"bind",value:function(){var e=this;if(this.visible){var t=ie()((function(){e.update()}),16);this.eventHelper.bind(this.diagram,"afterviewportchange",t)}}},{key:"update",value:function(e){e&&Object.assign(this,e);var t=this.diagram,n=this.fill,r=this.size;if(this.visible){this.element||this.render();var a=M()(r,2),o=a[0],i=a[1],c=t.viewport.paperBox,l=c.left,s=c.top;this.element.update({x:l,y:s,width:o,height:i,fill:n&&n.color||"#fff"})}}},{key:"destroy",value:function(){this.element&&this.element.destroy(),this.eventHelper.destroy()}}]),e}();c()(Uo,"className","Paper");var Vo=function(){function e(t){m()(this,e),this.diagram=t}return v()(e,[{key:"init",value:function(e){var t=this;this.behaviours=[],e.forEach((function(e){t.registerPlugin(e)}))}},{key:"registerCell",value:function(e){this.diagram.Cells[e.className]=e}},{key:"registerPlugin",value:function(e){var t=this,n=this.diagram,r=e.Cells,a=e.Commands,o=e.Extends,i=e.modes,c=e.defaultCursors,l=e.dataProcessor,s=e.settings;r&&r.forEach((function(e){t.registerCell(e)})),i&&i.forEach((function(e){var r=e.mode,a=e.Behaviours.map((function(e){return new e}));n.interaction.registerMode(r,a),t.behaviours=t.behaviours.concat(a)})),a&&a.forEach((function(e){n.command.register(e)})),o&&n.addExtend(o),l&&n.addDataProcessor(l),c&&n.interaction.addDefaultCursor(c),s&&Object.assign(n.settings,s)}},{key:"destroy",value:function(){this.diagram=void 0,this.behaviours.forEach((function(e){return e.destroy()}))}}]),e}();c()(Vo,"className","Register");var qo=function(){function e(t){m()(this,e),this.diagram=t,this.selections=[]}return v()(e,[{key:"_select",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.diagram,a=r.cellMap;"string"==typeof e&&(e=[a[e]]),Array.isArray(e)&&"string"==typeof e[0]&&(e=e.map((function(e){return a[e]}))),"object"===o()(e)&&e.isCell&&(e=[e]),e.forEach((function(e){if(e.state.selected!==n){var r=t.selections.indexOf(e);n?(e.select(),-1===r&&t.selections.push(e)):(e.unSelect(),-1!==r&&t.selections.splice(r,1))}}))}},{key:"select",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Array.isArray(e)||(e=[e]);var n=this.diagram,r=this.selections,a={selections:r.concat([])},o={selections:e.concat([]).map((function(e){return n.find(e)})).filter((function(e){return e}))},i={before:a,after:o,selections:o.selections},c=tt(a.selections,o.selections);!c&&n.emit("beforeselectionchange",i),n.emit("beforeselect",i),this._select(a.selections,!1),this._select(e,t),n.emit("afterselect",i),!c&&n.emit("afterselectionchange",i)}},{key:"clear",value:function(){this.select([])}},{key:"destroy",value:function(){this.diagram=void 0,this.selectedCell=void 0}}]),e}();c()(qo,"className","Selector");var Ho=function(){function e(t){m()(this,e),this.diagram=t}return v()(e,[{key:"init",value:function(){this.focusPoint=[0,0,1],this.minZoom=.2,this.maxZoom=4,this.zoom=1,this.autoFitPadding=8,this.m=null,this.scrollBarSize=20,this.eventHelper=new Ra,this._initContainerSize(),this.setViewport(1),this._bindEvent()}},{key:"getViewportClientBox",value:function(){var e=this.diagram,t=this.scrollBarSize,n=e.viewportContainer.getBoundingClientRect(),r=n.x||n.left,a=n.y||n.top,o=n.width-t,i=n.height-t;return{minX:r,minY:a,maxX:r+o,maxY:a+i,x:r,y:a,width:o,height:i}}},{key:"getViewportCanvasBox",value:function(){var e=this.getViewportClientBox(),t=e.minX,n=e.minY,r=e.maxX,a=e.maxY,o=this.invertClient([t,n]),i=this.invertClient([r,a]);return{minX:o[0],minY:o[1],maxX:i[0],maxY:i[1],x:o[0],y:o[1],width:i[0]-o[0],height:i[1]-o[1]}}},{key:"width",get:function(){return this.diagram.width}},{key:"height",get:function(){return this.diagram.height}},{key:"_resetFocusPoint",value:function(){var e=this.focusPoint,t=this.getViewportClientBox();e[0]=t.x+t.width/2,e[1]=t.y+t.height/2}},{key:"_bindEvent",value:function(){var e=this,t=this.diagram,n=this.eventHelper,r=t.viewportContainer;n.bind(r,"scroll",ie()((function(){pt(e.scrollLeft,r.scrollLeft,1)&&pt(e.scrollTop,r.scrollTop,1)||e.moveTo(r.scrollLeft,r.scrollTop)}),16)),n.bind(t,"aftercommandexecute",(function(t){if(t.isModelChange){if(e.isPreventDefault||e.destroyed)return;e.refresh()}})),this._trackVisualFocus()}},{key:"translate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.scrollLeft,r=this.scrollTop;this.moveTo(n+e,r+t)}},{key:"preventDefault",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isPreventDefault=e}},{key:"scrollIntoView",value:function(e){var t=this.diagram,n=this.scrollBarSize,r=t.width,a=t.height,o=t.canvas.getBoundingClientRect();if(!(o.width<=r&&o.height<=a)){var i=this.convertViewport([e.x,e.y]),c=this.convertViewport([e.x+e.width,e.y+e.height]),l=this.scrollLeft,s=this.scrollTop;i[0]<0?l-=Math.abs(i[0])+20:c[0]>r-n&&(l+=c[0]-r+n+20),i[1]<0?s-=Math.abs(i[1])+20:c[1]>a-n&&(s+=c[1]-a+n+20),l===this.scrollLeft&&s===this.scrollTop||this.moveTo(l,s)}}},{key:"_trackVisualFocus",value:function(){var e=this,t=this.diagram,n=this.focusPoint,r=this.eventHelper;r.bind(t,"mousemove",(function(e){var t=e.clientX,r=e.clientY;n[0]=t,n[1]=r})),r.bind(t,"mouseleave",(function(t){t.relatedTarget&&1===t.relatedTarget.nodeType&&t.relatedTarget.closest(".lake-diagram-prevent-mouseleave-reset-focus-point")||e._resetFocusPoint()}))}},{key:"_resizeViewport",value:function(){var e=this.diagram,t=e.viewportContainer,n=e.width,r=e.height;t.style.width="".concat(n,"px"),t.style.height="".concat(r,"px"),t.style.maxWidth="".concat(n,"px"),t.style.maxHeight="".concat(r,"px")}},{key:"_initContainerSize",value:function(){this.diagram.viewportContainer.style.overflow="auto",this._resizeViewport()}},{key:"_change",value:function(){var e=this.scrollLeft,t=this.scrollTop,n=this.canvasWidth,r=this.canvasHeight,a=this.viewBox,o=this.diagram,i=o.viewportContainer,c=o.canvas;o.emit("beforeviewportchange"),this._resizeViewport(),c.rendererElement.style.display="block",c.rendererElement.style.width="".concat(n,"px"),c.rendererElement.style.height="".concat(r,"px"),c.rendererElement.setAttribute("viewBox",a.join(",")),i.scrollLeft=e,i.scrollTop=t,o.emit("afterviewportchange"),this._setMatrix(),this.viewportCanvasBox=this.getViewportCanvasBox()}},{key:"_setMatrix",value:function(){var e=this.zoom,t=this.scrollLeft,n=this.scrollTop,r=this.viewBox;this.n=[e,0,0,0,e,0,-e*r[0],-e*r[1],1],this.m=[e,0,0,0,e,0,-t-e*r[0],-n-e*r[1],1]}},{key:"isInnerCanvasPoint",value:function(e){var t=this.viewportCanvasBox,n=t.minX,r=t.maxX,a=t.minY,o=t.maxY;return!(e[0]<n||e[0]>r||e[1]<a||e[1]>o)}},{key:"focusFirstRoot",value:function(){var e=this.diagram,t=e.getCells().filter((function(e){return e.isStem}))[0];t&&(this.autoFit(),e.viewport.focus([t.x+t.width/2,t.y+t.height/2]),e.viewport.setViewport(1))}},{key:"focusGraphicCenter",value:function(){var e=this.diagram;if(e.getCells().length>0){var t=e.rootGroup.getBBox();e.viewport.focus([t.x+t.width/2,t.y+t.height/2]),e.viewport.setViewport(1)}}},{key:"moveTo",value:function(e,t){this._setScrollLeft(e),this._setScrollTop(t),this._change()}},{key:"getPadding",value:function(){var e=this.diagram;return e.options.padding||[e.height/2,e.width/2]}},{key:"_restoreCanvasTlPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zoom;this.setViewport(t);var n=this.invertViewport([0,0]);this.moveTo(this.scrollLeft+(e[0]-n[0])*t,this.scrollTop+(e[1]-n[1])*t)}},{key:"refresh",value:function(){var e=this.getViewportClientBox();this.setViewport(this.zoom,[e.x,e.y])}},{key:"_setScrollLeft",value:function(e){var t=this.diagram,n=this.canvasWidth,r=this.scrollBarSize,a=n-t.width+r,o=e;e<0&&(o=0),e>a&&(o=a),this.scrollLeft=o}},{key:"_setScrollTop",value:function(e){var t=this.diagram,n=this.canvasHeight,r=this.scrollBarSize,a=n-t.height+r,o=e;e<0&&(o=0),e>a&&(o=a),this.scrollTop=o}},{key:"setViewport",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.zoom,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.focusPoint,n=this.minZoom,r=this.maxZoom;e<n?e=n:e>r&&(e=r),this.zoom=e;var a,o,i=this.diagram,c=this.m,l=i.width,s=i.paper,u=s.getBBox(),d=this.getPadding(u,e),f=this.getViewportClientBox(),p=u.right-u.left,h=u.bottom-u.top,m=p*e+2*d[1],g=h*e+2*d[0],v=[u.left-d[1]/e,u.top-d[0]/e,m/e,g/e];if(c){var y=[t[0]-f.x,t[1]-f.y,1],b=ce.a.invert([],c),k=ce.c.transformMat3([],[y[0],y[1],1],b),w=[e,0,0,0,e,0,-e*v[0],-e*v[1],1],x=ce.c.transformMat3([],k,w);a=x[0]-y[0],o=x[1]-y[1]}else a=(m-l)/2,o=d[0]-u.top;this.paperBox=u,this.canvasWidth=m,this.canvasHeight=g,this.zoom=e,this.viewBox=v,this.containerBox=f,this._setScrollLeft(a),this._setScrollTop(o),this._change()}},{key:"convertViewport",value:function(e){var t=this.m;return ce.c.transformMat3([],[e[0],e[1],1],t)}},{key:"invertViewport",value:function(e){var t=this.m,n=ce.a.invert([],t);return ce.c.transformMat3([],[e[0],e[1],1],n)}},{key:"convertViewportAbs",value:function(e){var t=this.n;return ce.c.transformMat3([],[e[0],e[1],1],t)}},{key:"invertViewportAbs",value:function(e){var t=this.n,n=ce.a.invert([],t);return ce.c.transformMat3([],[e[0],e[1],1],n)}},{key:"convertClient",value:function(e){var t=this.m,n=this.getViewportClientBox(),r=ce.c.transformMat3([],[e[0],e[1],1],t);return[r[0]+n.x,r[1]+n.y]}},{key:"invertClient",value:function(e){var t=this.m,n=this.getViewportClientBox(),r=[e[0]-n.x,e[1]-n.y,1],a=ce.a.invert([],t),o=ce.c.transformMat3([],[r[0],r[1],1],a);return[o[0],o[1]]}},{key:"getCenter",value:function(){var e=this.getViewportClientBox();return this.invertClient([e.x+e.width/2,e.y+e.height/2])}},{key:"getFocus",value:function(){var e=this.focusPoint;return this.invertClient(e)}},{key:"toObject",value:function(){var e=this.zoom,t=this.diagram;return{zoom:e,tlCanvasPoint:this.invertViewport([0,0]),width:t.width,height:t.height}}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tlCanvasPoint||e.originCanvasTlPoint;if(t){var n=e.zoom;this._restoreCanvasTlPoint(t,n)}else"number"==typeof e.scrollLeft&&"number"==typeof e.scrollTop&&(this.setViewport(e.zoom),this.moveTo(e.scrollLeft,e.scrollTop))}},{key:"setWYSIWYG",value:function(e){var t=this.diagram,n=this.scrollBarSize;if(t.width>e.width&&t.height>e.height)this.set({zoom:e.zoom,tlCanvasPoint:e.tlCanvasPoint});else{var r=Math.min((t.width-n)/(e.width-n),(t.height-n)/(e.height-n))*e.zoom;this.set({zoom:r,tlCanvasPoint:e.tlCanvasPoint})}}},{key:"_focus",value:function(e){var t=this.m,n=this.getViewportClientBox(),r=ce.c.transformMat3([],[e[0],e[1],1],t),a=[n.width/2,n.height/2],o=a[0]-r[0],i=a[1]-r[1];this._setScrollLeft(this.scrollLeft-o),this._setScrollTop(this.scrollTop-i),this._setMatrix()}},{key:"focus",value:function(e){this._focus(e),this._change()}},{key:"autoFit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.minZoom,n=e.maxZoom,r=e.zoom,a=this.diagram,o=this.autoFitPadding,i=this.getViewportClientBox(),c=a.rootGroup,l=c.getBBox();t=t||this.minZoom,n=n||1,null==r&&(i.width-=2*o,i.height-=2*o,r=Math.min(i.width/l.width,i.height/l.height)),r<t?r=t:r>n&&(r=n),this._focus([l.x+l.width/2,l.y+l.height/2]),this._resetFocusPoint(),this.setViewport(r)}},{key:"destroy",value:function(){this.eventHelper.destroy(),this.diagram=void 0,this.destroyed=!0}}]),e}();c()(Ho,"className","Viewport");var Wo,Yo,Go,Xo=window.getSelection(),Ko=function(e){b()(n,C.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this)).diagram=e,r.eventHelper=new Ra,r.emitQueryChange=se()((function(){r.destroyed||r.emit("querychange",{query:r._getQuery()})}),32),r}return v()(n,[{key:"init",value:function(){var e=this,t=this.diagram,n=this.eventHelper,r=this.emitQueryChange;n.bind(t.contentEditor,"selectionchange",(function(){e._updateEditRange(),r()})),n.bind(t,"afterselect",(function(){e._updateEditRange(),r()}))}},{key:"_updateEditRange",value:function(){var e=this.diagram;try{var t=Xo.getRangeAt(0);e.canvasContainer.contains(t.commonAncestorContainer)&&!Go&&(Wo=t.cloneRange()),Yo=t.cloneRange()}catch(e){return}}},{key:"_setRange",value:function(e){e&&(Xo.removeAllRanges(),Xo.addRange(e))}},{key:"_getSelections",value:function(){return this.diagram.selector.selections.filter((function(e){return e.textAreaElement}))}},{key:"_getQuery",value:function(){var e,t=this.diagram,n=this._getSelections();if(n.length>1){var r=n.filter((function(e){return e.textAreaElement}));r.sort((function(e,t){return e.x-t.x}));var a=r.map((function(e){return e.textAreaElement.htmlContainer}));e=t.contentEditor.query(a[0],null)}else e=t.contentEditor.query();return e}},{key:"execCommand",value:function(e,t){var n=this.diagram,r=this.emitQueryChange;n.contentEditor.isBegin?(Wo.commonAncestorContainer!==Yo.commonAncestorContainer&&(Go=!0),Go&&this._setRange(Wo),n.contentEditor.execCommand(e,t),Wo=Xo.getRangeAt(0).cloneRange(),Go=!1):n.command.execute("ContentCommand",{name:e,value:t}),r()}},{key:"destroy",value:function(){this.eventHelper&&this.eventHelper.destroy(),this.diagram=null,this.destroyed=!0}}]),n}();c()(Ko,"className","ContentEditorPlus");var Zo=Object.freeze({__proto__:null,Command:Sa,ContentEditor:eo,Delegator:no,Exporter:bo,Highlight:ko,Importer:wo,Interaction:Fo,Paper:Uo,Register:Vo,Selector:qo,Viewport:Ho,ContentEditorPlus:Ko});function $o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Qo={find:function(e){if(null!=e){var t=this.cellMap;return"object"===o()(e)&&e.isCell?e:t[e]}},layout:function(e){var t=this.find(e);if(t&&!t.destroyed){if(!t.isStem)throw new Error("Only stem type cell can be layouted!");if(t.executeLayout){var n=this.cellMap;t.executeLayout(),this.emit("afterstemcelllayout",{stem:this}),Ue(t.model,(function(e){var r=n[e.id];r!==t&&r.drawPosition()}))}}},findByContent:function(e){return this.getCells().find((function(t){return t.html.includes(e)}))},_draw:function(e){var t=this;this.emit("beforedraw",e);var n=e.cells,r=void 0===n?[]:n,a=e.stems,o=void 0===a?[]:a,i=e.relatedLines,c=void 0===i?[]:i;o.forEach((function(e){!e.destroyed&&t.layout(e)})),r.forEach((function(e){!e.destroyed&&e.draw()})),c.forEach((function(e){!e.destroyed&&e.draw()})),this.emit("afterdraw",e)},_getStems:function(e){return et(e.map((function(e){return e.stem})))},_getRoots:function(e){return et(e.map((function(e){return e.root})))},_processSiblingSheets:function(e){var t=this.cellMap;e.sort((function(e,t){return t[3]-e[3]}));for(var n=0;n<e.length;n++){var r=e[n],a=t[r[0]],o=t[r[2]];if(a&&o){var i=r[1];"before"!==i&&"after"!==i||o.graphicGroup[i](a.graphicGroup)}}},getRelatedLines:function(e){var t=this.cellMap,n=e.reduce((function(e,t){return e[t.stem.model.id]=!0,e}),{}),r=this.getCells().filter((function(e){return e.isLine})),a=[];return r.forEach((function(e){["source","target"].some((function(r){var a=e[r].id,o=t[a];return a&&!o||o&&n[o.stem.model.id]}))&&a.push(e)})),a},_getCellConstructors:function(e){var t=this.Cells;if(!e)return[t.Cell];var n=e.charAt(0).toUpperCase()+e.substring(1),r=t[n+"Stem"],a=t[n+"Cell"];return r&&a?[r,a]:a||(a=t[n])?[a]:void 0},_getId:function(e){var t=this.cellMap;return null==e||t[e]?Object(I.a)():e},_add:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n={action:"add"};this.emit("beforechange",n);var r=this.cellMap,a=this.rootGroup,o=[],i=[];t.forEach((function(t){var n,a,c,l,s,u=t.model,d=t.options,f=[];if(d.parent){if(l=r[d.parent],a=l.stem.model,c=l.root.model,n=e._getCellConstructors(a.type),s=l,rt(l.model,u),d.nth>=0){var p=l.model.children;nt(p,p.indexOf(u),d.nth)}}else c=u;if(Ue(u,(function(t,o){o&&o.id&&(l=r[o.id]);var i=l?l.depth+1:0,s=0===i,u=!!t.type||s;u&&(a=t,n=e._getCellConstructors(t.type)),void 0!==t.html&&(t.html=Ta(t.html)),t.id=e._getId(t.id);var d=t.id,p=new(u?n[0]:n[n.length-1])({model:t,cellMap:r,parent:l,depth:i,isStem:u,isRoot:s,stem:r[a.id],root:r[c.id],diagram:e});r[d]=p,f.push(p)})),s){var h=e.find(u.id);o.push({cell:h,insertBeforeCell:s})}i=i.concat(f)})),i.sort((function(e,t){return e.zIndex-t.zIndex})),i.forEach((function(e){a.add(e.graphicGroup)})),o.forEach((function(e){var t=e.cell,n=e.insertBeforeCell;a.insertBefore(t.graphicGroup,n.graphicGroup)}));var c=[];t.forEach((function(e){var t=e.options;t.siblingSheets&&(c=c.concat(t.siblingSheets))})),this._processSiblingSheets(c);var l=t.map((function(e){return e.model})),s=this._getStems(i),u=this._getRoots(s),d=this.getRelatedLines(s);return n.models=l,n.stems=s,n.cells=i,n.roots=u,n.relatedLines=d,this._draw(n),this.emit("afterchange",n),l.map((function(e){return r[e.id]}))},add:function(e,t){var n,r={};if(Array.isArray(e))n=e.map((function(e){return{model:e}}));else{if(!s()(e))throw new Error("Params is illegal");n=[{model:e,options:t}]}return Array.isArray(t)?n.forEach((function(e,n){e.options=t[n]})):s()(t)&&n.forEach((function(e){e.options=t})),n.forEach((function(e){e.options||(e.options=r)})),this._add(d()(n))},_update:function(e){var t=this,n=this.cellMap,r=[],a={action:"update",models:[]},o=[];e=e.map((function(e){var n=t.find(e.id);return n?(e.cell=n,a.models.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$o(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:n.model.id},e.model)),e):null})).filter((function(e){return e})),this.emit("beforechange",a),e.forEach((function(e){var t=e.model,a=e.options,i=e.cell,c=n[a.parent];if(c){var l=i.parent!==c,s=c.stem.type===i.stem.type,u=c.isStem&&i.isStem;if(l&&(s||u)){if(i.parent){var d=i.parent.model.children;d.splice(d.indexOf(i.model),1)}rt(c.model,i.model),i.parent=c,i.isRoot=!1,i.stem!==i&&i.deepEach((function(e){e.stem=c.stem})),i.deepEach((function(e){e.root=c.root,e.depth=e.parent.depth+1}))}}else if(null===a.parent&&i.isStem&&i.parent){var f=i.parent.model.children;f.splice(f.indexOf(i.model),1),i.parent=null,i.isRoot=!0,i.depth=0,i.deepEachWithoutSelf((function(e){e.root=i,e.depth=e.parent.depth+1}))}var p=a.nth;if(void 0!==p&&i.parent){var h=i.parent.model.children;nt(h,h.indexOf(i.model),p)}a.siblingSheets&&(o=o.concat(a.siblingSheets)),i.updateModel(t),r.push(i),void 0!==t.collapsed&&Ue(i.model,(function(e){var t=n[e.id];t!==i&&t.drawCollapse()}))})),this._processSiblingSheets(o);var i=this._getStems(r),l=this._getRoots(i),s=this.getRelatedLines(i);a.cells=r,a.stems=i,a.roots=l,a.relatedLines=s,this._draw(a),this.emit("afterchange",a)},update:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(("string"==typeof e||"object"===o()(e)&&e.isCell)&&s()(n))t=[{id:e}];else{if(!Array.isArray(e))throw new Error("Please set id !");t=e.map((function(e){return{id:e}}))}return s()(n)?t.forEach((function(e){e.model=n})):Array.isArray(n)&&t.forEach((function(e,t){e.model=n[t]})),s()(r)?t.forEach((function(e){e.options=r})):Array.isArray(r)?t.forEach((function(e,t){e.options=r[t]})):t.forEach((function(e){e.options={}})),t.forEach((function(e){e.model=e.model||{},e.model=de()(e.model),e.options=e.options||{},e.options=de()(e.options)})),this._update(t)},_remove:function(e){var t=this,n=e.map((function(e){return t.find(e)})).filter((function(e){return e}));if(0!==n.length){n=this.deduplicate(n);var r=this.cellMap,a=n.map((function(e){return e.getAllCells()})).reduce((function(e,t){return e.concat(t)})),o=et(n.map((function(e){return e.stem}))),i=this.getRelatedLines(o),c=[],l={action:"remove",stems:o,models:c,relatedLines:i};n.forEach((function(e){c.push(e.model)})),this.emit("beforechange",l),n.forEach((function(e){if(l.models.push(e.model),e.parent){var t=e.parent.model.children;t.splice(t.indexOf(e.model),1)}})),a.forEach((function(e){e.destroy();var n=t.selector.selections.indexOf(e);-1!==n&&t.selector.selections.splice(n,1),delete r[e.model.id]})),this._draw(l),this.emit("afterchange",l)}},remove:function(e){return Array.isArray(e)||(e=[e]),this._remove(e)}},Jo={deduplicate:function(e){var t=this;if(!e||0===e.length)return e;if((e=e.concat([])).every((function(t){return t.depth===e[0].depth})))return e;e.sort((function(e,t){return e.depth-t.depth}));for(var n=0;n<e.length;n++){var r=e[n];r&&Ve(r.model,(function(n){n=t.find(n.id);var r=e.indexOf(n);-1!==r&&(e[r]=null)}))}return e.filter((function(e){return e}))},snapshot:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[t.map((function(e){return d()(e.model)})),t.map((function(t){return e.getCellOptions(t)}))]},getStaticSVG:function(){var e=this.getCells().filter((function(e){return e.state.beginEdit||e.state.selected||e.state.highlight}));e.forEach((function(e){return e.setDefault()}));var t=this.canvas.rendererElement.cloneNode(!0);return t.querySelector('[data-element="front_group"]').remove(),t.querySelector('[data-element="back_group"]').remove(),e.forEach((function(e){return e.updateState()})),t},getCell:function(e){var t=this.canvas,n=this.cellMap,r=this.domCellMap,a=this.rootGroup;if(!e||!a.rendererElement.contains(e)||t.rendererElement===e)return null;var o=r.get(e);if(o)return o;for(var i=Object.keys(n),c=0;c<i.length;c++){var l=n[i[c]];if(l.graphicGroup.rendererElement.contains(e))return r.set(e,l),l}return null},getCellOptions:function(e){var t=this,n=this.cellMap,r=[];return Ue(e.model,(function(e){var a=n[e.id],o=t.getSibling(a);o&&(o.unshift(a.model.id),o.push(a.getZIndex()),r.push(o))})),{parent:e.parent&&e.parent.model.id,nth:e.getNth(),siblingSheets:r}},getSibling:function(e){var t=e.graphicGroup.getSiblingRendererElement();return t?(t[1]=this.getCell(t[1]).model.id,t):null},getCells:function(){var e=[];return this.deepEach((function(t){e.push(t)})),e},getCellsByZIndex:function(){var e=[];return this.deepEach((function(t){e.push([t,t.getZIndex()])})),e.sort((function(e,t){var n=M()(e,2)[1],r=M()(t,2)[1];return n>r?1:n<r?-1:0})),e.map((function(e){return e[0]}))}},ei={changePaper:function(e){Object.assign(this.paper,e),this.viewport.refresh()},changeSize:function(e,t){var n=this.viewport;this.width=e,this.height=t,n.refresh()}},ti=Object.freeze({__proto__:null,Crud:Qo,Get:Jo,Change:ei});function ni(e,t,n){for(var r=e.getCellsByZIndex().filter((function(e){return!(e.isLine||e.locked||e.isGroup||n&&(t=e,r=n,a=t.getBBox(),o=r.getBBox(),mt(a,o)||mt(o,a)));var t,r,a,o})),a=r.length-1;a>=0;a--){var o=r[a],i=o.getConnection(t);if(i&&o.model.id!==(null==n?void 0:n.model.id))return i===o?{id:o.model.id,connection:null}:{id:o.model.id,connection:i}}return{id:null,connection:t}}function ri(e,t){var n=M()(t,2),r=n[0],a=n[1],o=e.createSVGPoint();return o.x=r,o.y=a,o}function ai(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ai(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ai(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ii=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(m()(this,e),!t.diagram)throw new Error("cell requires diagram!");Object.assign(this,oi({model:{},parent:null,computedProps:{},penetratedKeys:[],anchors:[],stroke:{width:1}},t)),this.stem=this.stem||this,this.root=this.root||this,this.type=this.stem.model.type,this.isCell=!0,this.matrix=[1,0,0,0,1,0,0,0,1],this.graphicGroup=new pn,this.eventHelper=new Ra,this.state={visible:!0,capture:!0,selected:!1},this.zIndex=this.model.zIndex||0,this.cache={},this.options=t,this.multiSelectHighlight=!0,this.penetratedKeys=["strokeStyle"].concat(this.penetratedKeys)}return v()(e,[{key:"canDragCanvas",value:function(){return!0}},{key:"canDelete",value:function(){return!0}},{key:"canFill",value:function(){return!0}},{key:"canStroke",value:function(){return!0}},{key:"canStrokeWidth",value:function(){return!0}},{key:"canStrokeStyle",value:function(){return!0}},{key:"canCollapse",value:function(){var e=this.model;return e.children&&e.children.length>0&&!0!==this.collapsed}},{key:"canExpand",value:function(){var e=this.model;return e.children&&e.children.length>0&&!0===this.collapsed}},{key:"convertStrokeStyle",value:function(){if("dash"===this.stroke.style){var e=this.stroke.width||1;return{"stroke-dasharray":[e,3*e].join(" ")}}return{"stroke-dasharray":"none"}}},{key:"setDefault",value:function(){}},{key:"get",value:function(e){return d()(this[e])}},{key:"getOuterWidth",value:function(){return this.model.width}},{key:"isDiscrete",value:function(){}},{key:"beginEditContent",value:function(){}},{key:"endEditContent",value:function(){}},{key:"draw",value:function(){}},{key:"shouldRefreshEndEditContent",value:function(){return!1}},{key:"isContentEmpty",value:function(){var e=this.html,t=document.createElement("div");return t.innerHTML=e,!t.textContent||"%E2%80%8B"===encodeURI(t.textContent)}},{key:"getRelativePoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.width,r=this.height,a=this.getCanvasPoint({x:e.x*(n+2*t),y:e.y*(r+2*t)},t);return a}},{key:"getCanvasPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.matrix,r=ce.c.transformMat3([],[e.x-t,e.y-t,1],n),a=M()(r,2),o=a[0],i=a[1];return{x:o,y:i}}},{key:"capture",value:function(e){var t=this.graphicGroup,n=this.state;!0===e?t.css({"pointer-events":"auto"}):!1===e&&t.css({"pointer-events":"none"}),n.capture=e}},{key:"rotateTo",value:function(e){var t=[1,0,0,0,1,0,0,0,1];ce.a.fromRotation(t,e),this.matrix[0]=t[0],this.matrix[1]=t[1],this.matrix[3]=t[3],this.matrix[4]=t[4],this.graphicGroup.update({matrix:this.matrix})}},{key:"getBBox",value:function(){var e=this.getRelativePoint({x:0,y:0}),t=this.getRelativePoint({x:1,y:0}),n=this.getRelativePoint({x:0,y:1}),r=this.getRelativePoint({x:1,y:1}),a=Math.min(e.x,t.x,n.x,r.x),o=Math.min(e.y,t.y,n.y,r.y),i=Math.max(e.x,t.x,n.x,r.x),c=Math.max(e.y,t.y,n.y,r.y);return{minX:a,minY:o,maxX:i,maxY:c,x:a,y:o,width:i-a,height:c-o}}},{key:"eventDelegation",value:function(){}},{key:"getEventObject",value:function(e){return e}},{key:"getChildren",value:function(){var e=this.cellMap;return(this.model.children||[]).map((function(t){return e[t.id]}))}},{key:"getAllChildren",value:function(){var e=[];return this.deepEachWithoutSelf((function(t){return e.push(t)})),e}},{key:"getAllCellsByZIndex",value:function(){var e=this.getAllCells();return e.sort((function(e,t){return e.getZIndex()-t.getZIndex()})),e}},{key:"getAllCells",value:function(){var e=this.cellMap,t=[];return Ue(this.model,(function(n){t.push(e[n.id])})),t}},{key:"getSiblings",value:function(){var e=this,t=this.cellMap;return this.parent.model.children.filter((function(t){return t.id!==e.model.id})).map((function(e){return t[e.id]}))}},{key:"delegateEvent",value:function(e,t,n){var r=this,a=this.eventHelper,o=this.diagram;a.bind(e,t,(function(e){return o.emit(n,r.getEventObject(e))}))}},{key:"hide",value:function(){this.graphicGroup.css({display:"none"}),this.state.visible=!1}},{key:"show",value:function(){this.graphicGroup.css({display:""}),this.state.visible=!0}},{key:"updateState",value:function(){}},{key:"select",value:function(){this.state.selected=!0,this.state.highlight=!1,this.updateState()}},{key:"unSelect",value:function(){this.state.selected=!1,this.updateState()}},{key:"highlight",value:function(){this.state.highlight=!0,this.updateState()}},{key:"unHighlight",value:function(){this.state.highlight=!1,this.updateState()}},{key:"toBack",value:function(){this.graphicGroup.toBack()}},{key:"toFront",value:function(){this.graphicGroup.toFront()}},{key:"forward",value:function(){this.graphicGroup.forward()}},{key:"backward",value:function(){this.graphicGroup.backward()}},{key:"closest",value:function(e,t){return ot(this,e,t)}},{key:"getZIndex",value:function(){return this.graphicGroup.getZIndex()}},{key:"getNth",value:function(){return this.parent?this.parent.model.children.indexOf(this.model):0}},{key:"forEach",value:function(e){var t=this.cellMap;this.model.children.forEach((function(n,r){e(t[n.id],r)}))}},{key:"deepEach",value:function(e){var t=this.cellMap;Ue(this.model,(function(n){return e(t[n.id])}))}},{key:"deepEachWithoutSelf",value:function(e){var t=this.cellMap;Ve(this.model,(function(n){return e(t[n.id])}))}},{key:"render",value:function(){}},{key:"update",value:function(e){this.updateModel(e),this.draw()}},{key:"updateModel",value:function(e){e&&(p()(this.model,e,(function(e,t){if(Array.isArray(e))return t})),this.normalize(),this.merge())}},{key:"normalize",value:function(){var e=this;Object.keys(this.model).forEach((function(t){var n=e.model[t];null==n?e.model[t]=void 0:s()(n)&&(Object.values(n).every((function(e){return null==e}))?e.model[t]=void 0:Object.keys(n).forEach((function(r){null==n[r]&&(e.model[t][r]=void 0)})))}))}},{key:"merge",value:function(){var e=this,t=this.model,n=this.penetratedKeys;Object.keys(t).filter((function(e){return n.includes(e)})).forEach((function(n){var r=t[n],a=e.default&&d()(e.default[n]);s()(r)&&a?Object.keys(r).forEach((function(t){var o=r[t];e[n][t]=null==o?a[t]:o})):e[n]=null==r?a:r}))}},{key:"isCacheStale",value:function(){for(var e=this,t=this.cache,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return r.some((function(n){var r=t[n],a=e[n];if(s()(a)&&s()(r))for(var o in a)if(a[o]!==r[o])return!0;return r!==a}))}},{key:"snapAnchor",value:function(e){var t=this,n=this.getRelativePoint({x:.5,y:.5}),r=[e.x-n.x,e.y-n.y];return this.anchors.map((function(e){var a=t.getRelativePoint(e);return oi(oi({},a),{},{rad:ce.b.angle(r,[a.x-n.x,a.y-n.y])})})).sort((function(e,t){return e.rad-t.rad}))}},{key:"getPoint",value:function(e){var t=this.anchors,n=o()(e);if("string"===n){var r=t.find((function(t){return t.name===e}));if(r)return this.getRelativePoint(r)}if("number"===n)if(e>=1&&e<t.length){var a=t[e-1];if(a)return this.getRelativePoint(a)}else if(e>=0)return this.getPointAtLength(e);if(Array.isArray(e)){var i=M()(e,2),c=i[0],l=i[1];return e.every((function(e){return e>=0&&e<=1}))?this.getRelativePoint({x:c,y:l}):{x:c,y:l}}throw new Error("unknown connection point ".concat(e))}},{key:"getKeyShape",value:function(){var e;return Ve(this.graphicGroup,(function(t){if(t.isPath)return e=t,!1})),e}},{key:"getSvgPoint",value:function(e){var t=e.x,n=e.y,r=this.diagram.canvas.rendererElement.createSVGPoint();return r.x=t,r.y=n,r}},{key:"isPointInShape",value:function(e){var t=this.matrix,n=ce.c.transformMat3([],[e.x,e.y,1],ce.a.invert([],t)),r=M()(n,2),a=r[0],o=r[1],i=this.getSvgPoint({x:a,y:o}),c=this.getKeyShape();return c.isPointInFill(i)||c.isPointInStroke(i)}},{key:"getIntersectionPoint",value:function(e){var t=this.matrix,n=[e.x,e.y,1],r=ce.c.transformMat3([],n,ce.a.invert([],t)),a=this.getRelativePoint({x:.5,y:.5}),o=ce.c.transformMat3([],[a.x,a.y,1],ce.a.invert([],t)),i=M()(o,2),c=i[0],l=i[1],s=M()(r,2),u=s[0],d=s[1],f=this.getKeyShape().getIntersectionPoint(u,d,c,l),p=this.width,h=this.height,m={x:Ge(f.x/p,0,1),y:Ge(f.y/h,0,1)};return this.getRelativePoint(m)}},{key:"getPointAtLength",value:function(e){var t=this.getKeyShape(),n=t.getTotalLength(),r=t.getPointAtLength(e*n);return this.getCanvasPoint(r)}},{key:"getConnection",value:function(e){var t=this.matrix,n=[e[0],e[1],1],r=ce.c.transformMat3([],n,ce.a.invert([],t)),a=M()(r,2),o=a[0],i=a[1],c=this.width,l=this.height;if(!(o<-8||o>c+8||i<-8||i>l+8)){for(var s=this.anchors,u=[o,i],d=0;d<s.length;d++){var f=s[d],p=[f.x*c,f.y*l];if(yt(u[0],u[1],p[0],p[1])<=8)return f.name||[f.x,f.y]}var h=this.getKeyShape(),m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=e.rendererElement.closest("svg"),a=ri(r,t),o=e.attr("stroke-width");e.attr({"stroke-width":2*n});var i=e.isPointInStroke(a);return e.attr({"stroke-width":o}),i?e.getClosestPoint(t[0],t[1]):null}(h,[o,i],8);if(m)return[Ge(m[0]/c,0,1),Ge(m[1]/l,0,1)];var g=this.getSvgPoint({x:o,y:i});return h.isPointInFill(g)?this:void 0}}},{key:"drawPosition",value:function(){}},{key:"drawCollapse",value:function(){}},{key:"drawInherit",value:function(){}},{key:"destroy",value:function(){this.diagram.cleanDomCellMap(this.graphicGroup.rendererElement),this.eventHelper.destroy(),this.graphicGroup.destroy(),this.destroyed=!0,this.diagram=void 0,this.cellMap=void 0}}]),e}();c()(ii,"className","Cell");var ci={plugins:[]},li="2.0.0";function si(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?si(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):si(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var di=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","hover","drop","dragover","contextmenu"],fi=["touchstart","touchmove","touchend"],pi=["keydown","keyup","keypress"],hi=["compositionstart","compositionend"],mi=["copy","paste","cut"],gi=["wheel","scroll"],vi=R.HotKeyUtils.isHotkey,yi=function(e){b()(n,C.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;m()(this,n),e=ui({locale:{},container:null,width:500,height:500,plugins:[],paper:null,padding:null,mode:"edit",head:{}},e),(r=t.call(this,e)).options=e,r.nativeEvents=[].concat(di,fi,pi,hi,mi,gi),r.dataProcessors=[nn],r.Cells={Cell:ii,Line:ii.Line},r.head=ui({version:"2.0.0"},e.head),r.cellMap={},r.elementMap={},r.signal={keydown:{}},r.settings={};var a=e.container,o=r._createViewportContainer(),i=r._createCanvasContainer(),c=r._createInputElement();return r.container=a,r.viewportContainer=o,r.canvasContainer=i,r.input=c,a.appendChild(o),o.appendChild(i),o.appendChild(c),r.width=e.width,r.height=e.height,r.calculatedContainer=r._appendCalculatedContainer(),r.domCellMap=new WeakMap,r._initMixin(),r._initCanvas(),r._initExtend(),r._initEvent(),r}return v()(n,[{key:"_initEvent",value:function(){var e=this,t=this.viewportContainer;this.nativeEvents.forEach((function(n){["mousedown","mouseup"].includes(n)?t.addEventListener(n,(function(t){var r=t.target,a={target:r,clientX:t.clientX,clientY:t.clientY,button:t.button,preventDefault:function(){t.preventDefault()},stopPropagation:function(){t.stopPropagation()}},o=e.getCell(r);o&&(a.cell=o,e.emit("".concat(o.type,":").concat(n),a)),e.emit(n,a)})):t.addEventListener(n,(function(t){e.emit(n,t)}))})),n._boundGlobalEvent||(window.addEventListener("mousedown",(function(e){!e.target.closest("[data-lake_prevent_click_unselect]")||e.target.matches("input")||e.target.matches("textarea")||e.preventDefault()})),n._boundGlobalEvent=!0)}},{key:"_createViewportContainer",value:function(){var e=document.createElement("div");return e.classList.add("lake-diagram-viewport-container"),e.style.position="relative",e.style.outline="none",e.style["user-select"]="text",e.setAttribute("tabindex",0),e.setAttribute("focusable",!0),e.setAttribute("dragable",!1),e.addEventListener("dragstart",(function(e){return e.preventDefault()})),e}},{key:"_createCanvasContainer",value:function(){return document.createElement("div")}},{key:"_createInputElement",value:function(){var e=this,t=document.createElement("div");return t.setAttribute("contenteditable",!0),t.style.position="fixed",t.style.top="-300px",t.style.left="-300px",t.style.right="0",t.style.bottom="0",t.style.width="100px",t.style.height="40px",t.margin="auto",t.style["z-index"]=2,t.style.outline="none",t.style.opacity=0,t.style["pointer-events"]="none",t.addEventListener("keydown",(function(t){vi("mod+v",t)||e.selector.selections.length>0&&(vi("mod+c",t)||vi("mod+x",t))})),t.addEventListener("beforeinput",(function(e){e.preventDefault()})),R.ua.mobile&&t.addEventListener("focus",(function(){t.blur()})),t}},{key:"_appendCalculatedContainer",value:function(){var e=this.options.container,t=document.createElement("div"),n=document.createElement("div");return t.appendChild(n),e.appendChild(t),t.style.opacity=0,t.style.height=0,t.style.width=0,t.style.overflow="hidden",n.style.width="10000px",n}},{key:"_initMixin",value:function(){var e=this;Object.keys(ti).forEach((function(t){var n=ti[t];Object.assign(e,n)}))}},{key:"_initExtend",value:function(){var e=this.options;this.extend={},this.addExtend(Object.keys(Zo).map((function(e){return Zo[e]}))),this.register.init(ci.plugins.concat(e.plugins)),this.paper.init(e.paper||{size:[828,1170]}),this.viewport.init(),this.interaction.init(e.mode),this.contentEditorPlus.init()}},{key:"_initCanvas",value:function(){var e=this.canvasContainer,t=this.calculatedContainer;this.canvas=new gn({container:e,calculatedContainer:t}),this.rootGroup=new pn,this.frontRootGroup=new pn,this.backRootGroup=new pn,this.rootGroup.dataset({element:"root_group"}),this.frontRootGroup.dataset({element:"front_group"}),this.backRootGroup.dataset({element:"back_group"}),this.defs=new xr,this.canvas.add(this.defs),this.canvas.add(this.backRootGroup),this.canvas.add(this.rootGroup),this.canvas.add(this.frontRootGroup)}},{key:"insertBefore",value:function(e,t){if(e.isStem&&t.isStem)for(var n=this.rootGroup,r=e.getAllCellsByZIndex(),a=t.getAllCellsByZIndex(),o=0;o<r.length;o++)n.insertBefore(r[o].graphicGroup,a[0].graphicGroup)}},{key:"cleanDomCellMap",value:function(e){var t=this.domCellMap;Ue(e,(function(e){t.delete(e)}),(function(e){return e.childNodes}))}},{key:"addExtend",value:function(e){var t=this;e.forEach((function(e){var n=e.className,r=n.charAt(0).toLowerCase()+n.substring(1),a=new e(t);t.extend[r]=a,t[r]=a}))}},{key:"addDataProcessor",value:function(e){this.dataProcessors.push(e)}},{key:"inherit",value:function(e,t){var n=this.cellMap;t||(t=this.getCells().filter((function(e){return e.isStem}))),t.forEach((function(t){Ue(t.model,(function(t,r){t=n[t.id],r=r&&n[r.id]||t.parent,t.computedProps=r?pe()({},r.computedProps,ct(t,e)):ct(t,e)}))}))}},{key:"deepEach",value:function(e){var t=this.cellMap;Object.keys(t).forEach((function(n){e(t[n])}))}},{key:"focus",value:function(){var e=this.input,t=window.getSelection(),n=document.createRange();e.innerHTML="ddd",n.setStart(e.childNodes[0],1),n.setEnd(e.childNodes[0],2),t.removeAllRanges(),t.addRange(n)}},{key:"tryFocus",value:function(){this.viewportContainer.contains(document.activeElement)||this.focus()}},{key:"clear",value:function(){this.rootGroup.clear(),this.cellMap={}}},{key:"destroy",value:function(){if(!this.destroyed){var e=this.canvas,t=this.viewportContainer,n=this.extend,r=this.calculatedContainer;this.deepEach((function(e){e.destroy()})),Object.keys(n).forEach((function(e){n[e].destroy()})),t.parentNode.removeChild(t),r.remove(),e.destroy(),this.destroyed=!0}}},{key:"export",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json",t=e.split(":");if(!this.exporter[t[0]])throw new Error("Export of ".concat(t[0]," is not supported"));return this.exporter[t[0]](t[1])}},{key:"import",value:function(e){this.dataProcessors.forEach((function(t){t(e)}));var t=this.importer.json(e);return this.viewport.refresh(),t}},{key:"setCursor",value:function(e){this.canvas.css({cursor:e})}},{key:"resetCursor",value:function(){this.setCursor(this.interaction.getModeCursor())}}]),n}(),bi=function(){function e(t){m()(this,e),this.cell=t}return v()(e,[{key:"render",value:function(){}},{key:"update",value:function(){}},{key:"draw",value:function(){}},{key:"drawInherit",value:function(){}},{key:"drawPosition",value:function(){}},{key:"setDefault",value:function(){}},{key:"updateState",value:function(){}},{key:"destroy",value:function(){this.destroyed=!0}}]),e}();var ki=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"afterselect",(function(){var t=e.selector.selections;t.length>1?e.highlight.select(t.concat([])):e.highlight.clear()}))}}]),n}();var wi=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){var t,n,r,a,o;this.bind(e,"mousedown",(function(i){var c=e.getCell(i.target);(i.target===e.canvas.rendererElement||c&&c.canDragCanvas&&c.canDragCanvas())&&0===i.button&&(t=!0,n=i.clientX,r=i.clientY,a=e.viewport.scrollLeft,o=e.viewport.scrollTop,e.input.style.display="none")})),this.bind(e,"mousemove",(function(i){if(!e.signal.draggingcanvas&&t&&Math.abs(n-i.clientX)+Math.abs(r-i.clientY)>3&&(e.signal.draggingcanvas=!0,e.setCursor("grabbing")),e.signal.draggingcanvas&&void 0!==a){var c=a-(i.clientX-n),l=o-(i.clientY-r);e.viewport.moveTo(c,l)}})),this.bind(window,"mouseup",(function(){t&&(e.signal.draggingcanvas=!1,t=void 0,n=void 0,r=void 0,a=void 0,o=void 0,e.resetCursor(),e.input.style.display="")}))}}]),n}();var xi=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.pressKey({diagram:e,keys:["Alt","Control","Meta","Shift"]})}}]),n}();var _i=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){Co(t)&&"a"===t.key&&(t.preventDefault(),t.stopPropagation(),e.command.execute("SelectAll"),e.tryFocus())}))}}]),n}();var Ei=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){function t(){"dragCanvas"===e.interaction.currentMode&&(e.interaction.changeMode("edit"),e.rootGroup.css({"pointer-events":"initial"}))}this.bind(e,"keydown",(function(t){" "!==t.key||e.signal.cellDragStart||(t.preventDefault(),t.stopPropagation(),"dragCanvas"!==e.interaction.currentMode&&(e.highlight.clear(),e.rootGroup.css({"pointer-events":"none"}),e.interaction.changeMode("dragCanvas")))})),this.bind(window,"keyup",t),this.bind(window,"blur",t)}}]),n}();function Ci(e){"flowchart"===e.type&&(e.type="geometry"),"edge"===e.type&&(e.type="line")}xo.AfterContentEditorChange=Io,xo.AfterSelectionChangeMultiSelectHighlight=ki,xo.KeyboardCollapseExpand=So,xo.KeyboardPressModifierKey=xi,xo.KeyboardSelectAll=_i,xo.KeyboardSwitchEditAndDragCanvas=Ei,xo.KeyboardUndoRedo=Eo,xo.KeyboardZoom=No,xo.MouseCollapse=jo,xo.MouseDragCanvas=wi,xo.MouseSelect=Ro,xo.MouseWheelZoom=Po,window.____lake_diagram_version="2.0.0";var Oi=function(e){b()(n,ii);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"getAlignBBox",value:function(){return this.getBBox()}},{key:"getKeyShapeBox",value:function(){var e=this.getKeyShape().getBBox(),t=this.x+e.x,n=this.y+e.y;return{x:t,y:n,width:e.width,height:e.height,minX:t,minY:n,maxX:t+e.width,maxY:n+e.height}}},{key:"getFullBBox",value:function(){var e=1/0,t=1/0,n=-1/0,r=-1/0;return this.deepEach((function(a){if(a.state.visible){var o=a.getBBox();e=Math.min(e,o.minX),t=Math.min(t,o.minY),n=Math.max(n,o.maxX),r=Math.max(r,o.maxY)}})),{x:e,y:t,width:n-e,height:r-t,minX:e,minY:t,maxX:n,maxY:r}}},{key:"toBack",value:function(){if(this.isStem){var e=this.diagram,t=e.groupManager.getStemsByZIndex(),n=t.indexOf(this);if(0!==n&&-1!==n){var r=t[0];e.insertBefore(this,r)}}}},{key:"toFront",value:function(){if(this.isStem){var e=this.diagram,t=e.groupManager.getStemsByZIndex(),n=t.indexOf(this),r=t.length;if(n!==r-1){var a=t[r-1];e.insertBefore(this,a),e.insertBefore(a,this)}}}},{key:"forward",value:function(){if(this.isStem){var e=this.diagram,t=e.groupManager.getStemsByZIndex(),n=t.indexOf(this);if(n!==t.length-1){var r=t[n+1];e.insertBefore(r,this)}}}},{key:"backward",value:function(){if(this.isStem){var e=this.diagram,t=e.groupManager.getStemsByZIndex(),n=t.indexOf(this);if(0!==n&&-1!==n){var r=t[n-1];e.insertBefore(this,r)}}}},{key:"canUseAddLineButton",value:function(){return!1}},{key:"canArrange",value:function(){return!!this.isStem}}]),n}();c()(Oi,"className","BoardCell");var Si=[{key:"standard-h",directions:[[1,0],[-1,0]]},{key:"standard-r",directions:[[1,0]]},{key:"standard-l",directions:[[-1,0]]},{key:"standard-t",directions:[[0,-1]]},{key:"standard-b",directions:[[0,1]]},{key:"indent-br",directions:[[1,1]]},{key:"indent-bl",directions:[[-1,1]]},{key:"indent-tr",directions:[[1,-1]]},{key:"indent-tl",directions:[[-1,-1]]},{key:"timeline-r",directions:[[1,0]]},{key:"timeline-l",directions:[[-1,0]]}];function Ri(e,t){if(0!==e.length){var n=[];return e.forEach((function(e){var r=t.get([e],"downDirection"),a=t.get([e],"downLayoutType"),o=t.get([e],"layoutQuadrantConstraint"),i=r.map((function(e){return Math.sign(e)})).join(","),c=(1===o.length?{"0,-1":"t","0,1":"b","-1,0":"l","1,0":"r","1,1":"br","-1,1":"bl","1,-1":"tr","-1,-1":"tl"}:{"-1,0":"h","1,0":"h","0,1":"v","0,-1":"v"})[i];n.push("".concat(a,"-").concat(c))})),n.every((function(e){return e===n[0]}))?n[0]:"multiValue"}}function ji(e){var t,n,r=e.split("-"),a=M()(r,2),o=a[0],i=a[1];return"indent"===o?(t=[1,1],n={br:[1],bl:[2],tl:[3],tr:[4]}[i]):"standard"===o?"h"===i?(t=[1,0],n=null):"v"===i?(t=[0,1],n=null):"r"===i?(t=[1,0],n=[1]):"l"===i?(t=[1,0],n=[2]):"t"===i?(t=[0,1],n=[2]):"b"===i&&(t=[0,1],n=[1]):"timeline"===o&&("r"===i?(t=[1,0],n=[1]):"l"===i&&(t=[1,0],n=[2])),{type:o,direction:t,quadrantConstraint:n}}function Pi(e,t){var n=t.some((function(t,n){return Math.sign(t)===Math.sign(e[n])})),r=t.every((function(t,n){return Math.sign(t)!==-Math.sign(e[n])||0===Math.sign(t)}));return n&&r}function Ai(e,t){return"timeline"===e&&"indent"!==t}function Ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Di(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ti(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ti(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mi(e){for(var t=[],n=1;n<e+1;n++)t.push(n);return t}function Ni(e,t,n){n=n||Mi(t);for(var r,a,o,i={},c=0;c<e.length;c++){for(a=r=e[c],o=1;!n.includes(a)&&o<100;)o%2==1?(a+=o)>t&&(a%=t):(a-=o)<1&&(a=t+a%t),o++;i[r]=a}return i}var Li=function(){function e(t){m()(this,e),Object.assign(this,Di({algorithms:{},model:{}},t))}return v()(e,[{key:"_parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.algorithms,a=Di(Di({w:10,h:10,quadrant:void 0,quadrantConstraint:void 0,direction:[1,0],collapsed:!1,layout:void 0},e),{},{origin:e,depth:n,children:[],parent:t});if(a.quadrant?a.quadrant=Number(a.quadrant):a.quadrant=1,e.children&&!e.collapsed)for(var o=0;o<e.children.length;o++){var i=e.children[o];a.children.push(this._parse.call(this,i,a,n+1))}return a.layout&&(a.algorithm=r[a.layout],this._calculateDQ(a)),a}},{key:"_beforeLayoutAdjust",value:function(){this.beforeLayoutAdjust&&this.beforeLayoutAdjust(this.tree)}},{key:"_afterLayoutAdjust",value:function(){this.afterLayoutAdjust&&this.afterLayoutAdjust(this.tree)}},{key:"_buildTree",value:function(){var e=this.model,t=this._parse(e);t.x=void 0!==e.x?e.x:0,t.y=void 0!==e.y?e.y:0,t.layout=t.layout||"standard",this.tree=t}},{key:"_splitTreeByQuadrant",value:function(e){for(var t=e.quadrants,n=e.directionAngles,r=e.directions,a=[],o=0;o<t;o++){var i=Di(Di({},e),{},{directionAngle:n[o],quadrantTreeDirection:r[o],children:[]});a.push(i)}return e.children.forEach((function(e){a[e.mergedQuadrant-1].children.push(e)})),a}},{key:"_splitSubTrees",value:function(){var e=this.tree,t=[e];Ve(e,(function(e){e.layout&&(e.isSubTree=!0,e.x=0,e.y=0,e.tx=0,e.ty=0,t.unshift(e))})),this.trees=t}},{key:"_setUp",value:function(e){e.children.forEach((function(t){Ue(t,(function(t){t.upDirection=e.quadrantTreeDirection,t.upLayoutType=e.layout,t.upSignX=Math.sign(t.upDirection[0]),t.upSignY=Math.sign(t.upDirection[1])}),(function(e){if(!e.isSubTree)return e.children}))}))}},{key:"_setDown",value:function(e){Ue(e,(function(e){e.isSubTree?(e.downDirection=e.directions[e.quadrantConstraint[0]-1],e.downLayoutType=e.layout):(e.downDirection=e.upDirection,e.downLayoutType=e.upLayoutType),e.downSignX=Math.sign(e.downDirection[0]),e.downSignY=Math.sign(e.downDirection[1])}))}},{key:"_calculateSubTreeBBox",value:function(e){if(e.collapsed)return e.tx=e.x,e.ty=e.y,e.tw=e.w,void(e.th=e.h);var t=e.x,n=e.x+e.w,r=e.y,a=e.y+e.h;Ve(e,(function(e){var o,i,c,l;e.isSubTree?(o=e.tx,i=e.ty,c=e.tx+e.tw,l=e.ty+e.th):(o=e.x,i=e.y,c=e.x+e.w,l=e.y+e.h),o<t&&(t=o),i<r&&(r=i),c>n&&(n=c),l>a&&(a=l)}),(function(t){if(!t.isSubTree||t===e)return t.children})),e.tx=t,e.ty=r,e.tw=n-t,e.th=a-r}},{key:"_setUpAndDown",value:function(){var e=this,t=this.trees,n=this.tree;n.upDirection=n.directions[n.quadrantConstraint[0]-1],n.upLayoutType=n.layout,n.upSignX=Math.sign(n.upDirection[0]),n.upSignY=Math.sign(n.upDirection[1]),t.forEach((function(t){var n=e._splitTreeByQuadrant(t);(n=n.filter((function(e){return e.children&&e.children.length>0}))).forEach((function(t){e._setUp(t)})),t.quadrantTrees=n})),this._setDown(n)}},{key:"_layout",value:function(){var e=this,t=this.trees,n=this.tree;t.forEach((function(t){var n=t.algorithm,r=[];t.quadrantTrees.forEach((function(e){n.layout(e,r)})),e._calculateSubTreeBBox(t),r.push(t),t.zNodes=r})),n.zNodes=function e(t){return t.reduce((function(t,n){return Array.isArray(n)?[].concat(z()(t),z()(e(n))):[].concat(z()(t),[n])}),[])}(n.zNodes)}},{key:"_calculateDQ",value:function(e){e.quadrants=e.algorithm.constructor.QUADRANTS,e.directionAngles=function(e,t){for(var n=[],r=2*Math.PI/t,a=Dt(e,[1,0]),o=0;o<t;o++){var i=a+r*o;i=i>=2*Math.PI?i-2*Math.PI:i,n.push(i)}return n}(e.direction,e.quadrants),e.directions=e.directionAngles.map((function(e){return[Number(Math.cos(e).toFixed(3)),Number(Math.sin(e).toFixed(3))]})),e.quadrantRange=Mi(e.quadrants),e.childQuadrantRange=et(e.children.map((function(e){return e.quadrant}))),e.quadrantConstraint=e.quadrantConstraint||e.quadrantRange}},{key:"_mergeQuadrant",value:function(e,t){var n=e.quadrantConstraint,r=e.quadrants,a=Ni(e.childQuadrantRange,r,n);e.children.forEach((function(e){e[t]=a[e.quadrant]}))}},{key:"_firstMergeQuadrant",value:function(){var e=this;this.trees.forEach((function(t){e._mergeQuadrant(t,"mergedQuadrant")}))}},{key:"_forceUseUpDirection",value:function(e,t){e.direction=t,this._calculateDQ(e)}},{key:"_fixQuadrantConflict",value:function(){var e=this;this.trees.concat([]).reverse().forEach((function(t){if(t.parent){for(var n=t.quadrants,r=function(e){if(e.parent){for(var t=e,n=t.parent;n&&!n.layout;)t=n,n=n.parent;var r=n,a=r.directions,o=r.layout;return{direction:a[t.mergedQuadrant-1],layout:o}}}(t),a=[],o=0,i=function(){var n=t.quadrantRange,i=t.directions;if(0===(a=n.filter((function(e,t){return Pi(i[t],r.direction)}))).length){var c=t.algorithm.constructor.VAILD_DIRECTION_ANGLES,l=Dt(r.direction,[1,0]);if(!c.some((function(e){return pt(e,l)})))return"break";e._forceUseUpDirection(t,r.direction)}o++};0===a.length&&o<10&&"break"!==i(););if(t.upDirection=r.direction,t.upLayoutType=r.layout,a.length>0){var c=Ni(t.quadrantConstraint,n,a);t.quadrantConstraint=Object.keys(c).map((function(e){return c[e]})),e._mergeQuadrant(t,"mergedQuadrant")}else t.layout=null,t.isSubTree=!1}}))}},{key:"_filterSimilarSubTree",value:function(){this.trees.forEach((function(e){if(!e.parent)return!0;var t=e.quadrantConstraint,n=e.upDirection,r=e.upLayoutType,a=e.directions;r===e.layout&&1===t.length&&ht(n,a[t[0]-1])&&(e.isSubTree=!1)}))}},{key:"_removeSubTree",value:function(){this.trees=this.trees.filter((function(e){return!e.parent||e.isSubTree}))}},{key:"execute",value:function(){return this._buildTree(),this._splitSubTrees(),this._firstMergeQuadrant(),this._fixQuadrantConflict(),this._filterSimilarSubTree(),this._removeSubTree(),this._setUpAndDown(),this._beforeLayoutAdjust(),this._layout(),this._afterLayoutAdjust(),this.tree}},{key:"destroy",value:function(){var e=this;this.destroyed=!0,Object.keys(this).forEach((function(t){e[t]=void 0}))}}]),e}(),Ii=Object.freeze({__proto__:null,Event:Ra,Layout:Li,Comparator:It});function Bi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bi(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fi=function(e,t){var n=["x","y"].map((function(n){return e[n]+2*(t[n]-e[n])})),r=M()(n,2);return{x:r[0],y:r[1]}},Ui=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}},Vi=function(e,t){var n=t/180*Math.PI,r=Math.sin(n),a=Math.cos(n),o=e.x,i=e.y;return{x:o*a-i*r,y:o*r+i*a}},qi=function(e,t,n){var r={x:e.x-t.x,y:e.y-t.y},a=Vi(r,n);return{x:a.x+t.x,y:a.y+t.y}},Hi=function(e){var t=e.x,n=e.y;return{x:t+e.w/2,y:n+e.h/2}},Wi=function(e){var t=e.x,n=e.y;return 180*Math.atan2(n,t)/Math.PI};var Yi=function(){function e(t){m()(this,e),this.rect=t,this._tl=null,this._tr=null,this._br=null,this._bl=null,this._tc=null,this._bc=null,this._rc=null,this._lc=null,this._center=null}return v()(e,[{key:"center",get:function(){return this._center||(this._center=Hi(this.rect)),this._center}},{key:"tl",get:function(){if(!this._tl){var e=this.rect,t=e.x,n=e.y,r=e.r;this._tl=qi({x:t,y:n},this.center,r)}return this._tl}},{key:"tr",get:function(){if(!this._tr){var e=this.rect,t=e.x,n=e.y,r=e.w,a=e.r;this._tr=qi({x:t+r,y:n},this.center,a)}return this._tr}},{key:"br",get:function(){return this._br||(this._br=Fi(this.tl,this.center)),this._br}},{key:"bl",get:function(){return this._bl||(this._bl=Fi(this.tr,this.center)),this._bl}},{key:"tc",get:function(){return this._tc||(this._tc=Ui(this.tl,this.tr)),this._tc}},{key:"bc",get:function(){return this._bc||(this._bc=Ui(this.br,this.bl)),this._bc}},{key:"rc",get:function(){return this._rc||(this._rc=Ui(this.tr,this.br)),this._rc}},{key:"lc",get:function(){return this._lc||(this._lc=Ui(this.tl,this.bl)),this._lc}}]),e}();function Gi(e,t,n,r){var a=new Yi(n),o=null,i=[],c=e;if(r){switch(t){case"tl":case"br":i=[a.tl,a.br];break;case"tr":case"bl":i=[a.tr,a.bl];break;case"tc":case"bc":i=[a.tc,a.bc],o="height";break;case"lc":case"rc":i=[a.lc,a.rc],o="width";break;default:i=[]}2===i.length&&(c=function(e,t){var n=t.x,r=t.y,a=M()(e,2),o=a[0],i=a[1];if(pt(o.x,i.x))return{x:o.x,y:r};if(pt(o.y,i.y))return{x:n,y:o.y};var c=vt(o.x,o.y,i.x,i.y),l=-1/c,s=(c*o.x+r-o.y-l*n)/(c-l);return{x:s,y:o.y-c*(o.x-s)}}(i,e))}var l=[];switch(t){case"tl":l=[a.br];break;case"tr":l=[a.bl];break;case"bl":l=[a.tr];break;case"br":l=[a.tl];break;case"bc":l=[a.tl,a.tr];break;case"tc":l=[a.bl,a.br];break;case"lc":l=[a.tr,a.br];break;case"rc":l=[a.tl,a.bl];break;default:l=[]}var s,u,d,f,p,h,m,g,v,y,b=l.length;return 1===b?(u=l[0],d=c,f=n.r,p=Ui(u,d),m=(h=qi(d,p,-f)).x,g=h.y,v=Math.abs(2*(m-p.x)),y=Math.abs(2*(g-p.y)),s={x:p.x-v/2,y:p.y-y/2,w:v,h:y,r:f}):2===b&&(s=r?function(e,t,n,r){var a,o,i=M()(e,2),c=i[0],l=i[1],s=Ui(c,l),u=t,d=Ui(s,u),f=function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}(s,u),p=n.w/n.h;return"width"===r?o=(a=f)/p:a=p*(o=f),{x:d.x-a/2,y:d.y-o/2,w:a,h:o,r:n.r}}(l,c,n,o):function(e,t,n){var r,a,o,i=e.map((function(e){return Vi(e,-n)})),c=M()(i,2),l=c[0],s=c[1],u=Vi(t,-n);pt(l.y,s.y)?(r=Math.abs(l.x-s.x),a=Math.abs(u.y-l.y),o={x:(l.x+s.x)/2,y:(l.y+u.y)/2}):pt(l.x,s.x)&&(a=Math.abs(l.y-s.y),r=Math.abs(u.x-l.x),o={x:(l.x+u.x)/2,y:(l.y+s.y)/2});var d=Vi(o,n);return{x:d.x-r/2,y:d.y-a/2,w:r,h:a,r:n}}(l,c,n.r)),s}function Xi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ki(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xi(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zi=pn,$i=bn,Qi=Xn,Ji=tr,ec={lake_prevent_click_unselect:!0,vertex_resize_controller:!0};function tc(e){var t=new $i,n=new Qi({d:Sn(-3,-3,6,6,1),stroke:"#096DD9",fill:"white"});return t.add(n),n.dataset(Ki(Ki({},ec),{},{type:"point"})),{group:t,shape:n,name:e}}function nc(e){var t=new Zi,n=new Qi({stroke:"rgba(255,255,255,0)"}),r=new Qi({stroke:"#096DD9"});return n.dataset(Ki(Ki({},ec),{},{type:"line"})),t.add(r),t.add(n),{visShape:r,shape:n,name:e,group:t}}function rc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[t.x+t.width/2,t.y+t.height/2],a=Math.cos(n),o=Math.sin(n),i=Mt(8,r,[r[0]+a,r[1]+o]);return i(e,0)||i(e,4)?"ew-resize":i(e,1)||i(e,5)?"nesw-resize":i(e,2)||i(e,6)?"ns-resize":"nwse-resize"}var ac=function(){function e(t){m()(this,e);var n=new Zi,r=t.diagram,a=nc("tc"),o=nc("bc"),i=nc("lc"),c=nc("rc"),l=tc("tl"),s=tc("tr"),u=tc("bl"),d=tc("br"),f=function(e){var t=new $i,n=new Ji({href:"https://gw.alipayobjects.com/zos/bmw-prod/e219ce81-1f30-43b8-aae6-14d41545d352.svg",x:-8,y:-8,width:16,height:16});return t.add(n),n.dataset({lake_prevent_click_unselect:!0}),t.css({cursor:"pointer"}),{group:t,shape:n,name:"rotate"}}();n.on("mousedown",(function(e){e.stopPropagation(),e.preventDefault()})),n.add(a.group),n.add(o.group),n.add(i.group),n.add(c.group),n.add(l.group),n.add(s.group),n.add(u.group),n.add(d.group),n.add(f.group),this.cell=t,this.diagram=r,this.group=n,this.tl=l,this.tr=s,this.bl=u,this.br=d,this.tc=a,this.bc=o,this.lc=i,this.rc=c,this.rotateBtn=f,this.eventHelper=new Ra}return v()(e,[{key:"update",value:function(){var e=this.cell,t=this.tl,n=this.tr,r=this.bl,a=this.br,o=this.tc,i=this.bc,c=this.lc,l=this.rc,s=this.rotateBtn,u=1/this.diagram.viewport.zoom,d=e.rotate/360*2*Math.PI,f=e.getRelativePoint({x:0,y:0}),p=e.getRelativePoint({x:1,y:0}),h=e.getRelativePoint({x:0,y:1}),m=e.getRelativePoint({x:1,y:1}),g=u,v=8*u,y=12*u+e.stroke.width/2,b=e.getCanvasPoint({x:e.width+y,y:-y});t.group.update(Ki(Ki({},f),{},{scale:u,rotate:d})),n.group.update(Ki(Ki({},p),{},{scale:u,rotate:d})),r.group.update(Ki(Ki({},h),{},{scale:u,rotate:d})),a.group.update(Ki(Ki({},m),{},{scale:u,rotate:d})),s.group.update(Ki(Ki({},b),{},{scale:u,rotate:d})),o.shape.update({d:"M".concat(f.x,",").concat(f.y," L").concat(p.x,",").concat(p.y),"stroke-width":v}),i.shape.update({d:"M".concat(h.x,",").concat(h.y," L").concat(m.x,",").concat(m.y),"stroke-width":v}),c.shape.update({d:"M".concat(f.x,",").concat(f.y," L").concat(h.x,",").concat(h.y),"stroke-width":v}),l.shape.update({d:"M".concat(p.x,",").concat(p.y," L").concat(m.x,",").concat(m.y),"stroke-width":v}),o.visShape.update({d:"M".concat(f.x,",").concat(f.y," L").concat(p.x,",").concat(p.y),"stroke-width":g}),i.visShape.update({d:"M".concat(h.x,",").concat(h.y," L").concat(m.x,",").concat(m.y),"stroke-width":g}),c.visShape.update({d:"M".concat(f.x,",").concat(f.y," L").concat(h.x,",").concat(h.y),"stroke-width":g}),l.visShape.update({d:"M".concat(p.x,",").concat(p.y," L").concat(m.x,",").concat(m.y),"stroke-width":g})}},{key:"bindEvent",value:function(){var e,t,n,r,a,o,i,c,l=this,s=this.cell,u=this.tl,d=this.tr,f=this.bl,p=this.br,h=this.tc,m=this.bc,g=this.lc,v=this.rc,y=this.rotateBtn,b=this.eventHelper,k=s.diagram,w=k.viewport.zoom;function x(){var t={x:o.x+s.stroke.width/2,y:o.y+s.stroke.width/2,width:Math.max(o.w-s.stroke.width,1),height:Math.max(o.h-s.stroke.width,1),rotate:o.r};return"lc"===e||"rc"===e?t.height=void 0:"tc"!==e&&"bc"!==e||(t.width=void 0),t}[u,d,f,p,h,m,g,v,y].forEach((function(a){var o=a.shape,l=a.name;b.bind(o,"mousedown",(function(a){k.contentEditor.unbind(),e=l,n=k.viewport.invertClient([a.clientX,a.clientY]),r={x:s.x,y:s.y,width:s.width,height:s.height,rotate:s.rotate},t={x:s.x-s.stroke.width/2,y:s.y-s.stroke.width/2,w:s.width+s.stroke.width,h:s.height+s.stroke.width,r:s.rotate},k.align.updateToAlginPoints(s),"tc"!==e&&"bc"!==e||(k.align.preventAlignX=!0),"lc"!==e&&"rc"!==e||(k.align.preventAlignY=!0),i=Rt(t.x,t.y+t.h,t.x+t.w,t.y),c=Rt(t.x,t.y,t.x+t.w,t.y+t.h)}))})),b.bind(k,"mousemove",(function(r){if(e){var u=k.viewport.invertClient([r.clientX,r.clientY]),d=k.signal.keydown.Shift||s.constraints&&s.constraints.proportion;if("rotate"===e)o=function(e,t,n,r){var a=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},a={x:n.x-e.x,y:n.y-e.y},o=Wi(r);return Wi(a)-o}(Hi(n),e,t),o=n.r+a;return o>=180&&(o-=360),o<=-180&&(o+=360),r&&(o=r*Math.round(o/r)),zi(zi({},n),{},{r:o})}({x:n[0],y:n[1]},{x:u[0],y:u[1]},t,d&&15);else{var f=("tl"===e||"br"===e)&&c||("bl"===e||"tr"===e)&&i,p=f&&f.f(u[0]);u[1]=d&&p?p:u[1];var h=k.align.alignByPoint({x:u[0],y:u[1],weight:1,box:s.getBBox()});o=Gi({x:u[0]+h.dx,y:u[1]+h.dy},e,t)}if(k.update(s,x()),l.update(),-1!==["tl","bl","tr","br"].indexOf(e)){var m=rc(k.viewport.invertClient([r.clientX,r.clientY]),s.getBBox(),Math.PI/8);k.setCursor(m)}k.emit("vertexresizestart")}else if(r.target.dataset.vertex_resize_controller){var g;if("line"===r.target.dataset.type){var v=En(r.target.getAttribute("d"));g=rc([v[1][1]-v[0][1],v[1][2]-v[0][2]],{x:-1,y:-1,width:1,height:1},Math.PI/2+.01)}else g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[t.x+t.width/2,t.y+t.height/2],a=Math.cos(n),o=Math.sin(n),i=Mt(4,r,[r[0]+a,r[1]+o]);return i(e,0)||i(e,2)?"nesw-resize":"nwse-resize"}(k.viewport.invertClient([r.clientX,r.clientY]),s.getBBox());a||(a=!0),k.setCursor(g)}else a&&(k.resetCursor(),a=void 0)})),b.bind(k,"mouseup",(function(){o&&t&&(t.x!==o.x||t.y!==o.y||t.w!==o.w||t.h!==o.h||t.r!==o.r)&&k.command.execute("Update",{id:s,model:x(),originModels:[r]}),e=void 0,t=void 0,o=void 0,n=void 0,a=void 0,r=void 0,k.align.reset()})),b.bind(k,"afterviewportchange",ie()((function(){w!==k.viewport.zoom&&(l.update(),w=k.viewport.zoom)})))}},{key:"begin",value:function(){this.cell.diagram.frontRootGroup.add(this.group),this.update(),this.bindEvent()}},{key:"end",value:function(){this.group&&this.group.remove(),this.eventHelper.unbind(),this.diagram&&this.diagram.align.reset()}},{key:"destroy",value:function(){this.diagram&&this.diagram.resetCursor(),this.eventHelper.unbind(),this.group&&this.group.clear(),this.cell=void 0,this.diagram=void 0,this.group=void 0,this.tl=void 0,this.tr=void 0,this.bl=void 0,this.br=void 0}}]),e}();function oc(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=a?a/180*Math.PI:0,c=Math.sin(i),l=Math.cos(i),s=n/2,u=r/2;return[l*o,c*o,0,-c*o,l*o,0,e+(-s*l+u*c+s),t+(-s*c-u*l+u),1]}var ic=pn,cc=Xn,lc=ar,sc=ur,uc="lock-resize-cross",dc=function(){function e(t){m()(this,e);var n=t.diagram,r=t.width,a=t.height,o=new ic,i=new lc({x:0,y:0,width:r||0,height:a||0,stroke:"#9A9A9A",fill:"none"});if(o.add(i),n.container&&!n.container.querySelector("#".concat(uc))){var c=function(){var e=new ic({id:uc}),t=new cc({d:On([["M",-3,-3],["L",3,3],["M",-3,3],["L",3,-3]]),stroke:"#FFFFFF","stroke-width":3}),n=new cc({d:On([["M",-3,-3],["L",3,3],["M",-3,3],["L",3,-3]]),stroke:"#979797","stroke-width":1});return e.add(t),e.add(n),e}();n.defs.add(c)}for(var l=[],s=0;s<4;s++){var u=new sc({href:"#".concat(uc)});o.add(u),l.push(u)}var d=l[0],f=l[1],p=l[2],h=l[3];this.group=o,this.cell=t,this.diagram=n,this.rect=i,this.tl=d,this.tr=f,this.bl=h,this.br=p}return v()(e,[{key:"update",value:function(){var e=this.cell,t=this.diagram,n=this.group,r=this.rect,a=this.tr,o=this.bl,i=this.br,c=e.x,l=e.y,s=e.rotate,u=1/t.viewport.zoom,d=e.width/u,f=e.height/u;n.update({matrix:oc(c,l,e.width,e.height,s,u)}),r.update({d:Sn(0,0,d,f)}),a.update({matrix:[1,0,0,0,1,0,d,0,1]}),o.update({matrix:[1,0,0,0,1,0,0,f,1]}),i.update({matrix:[1,0,0,0,1,0,d,f,1]})}},{key:"begin",value:function(){this.cell.diagram.frontRootGroup.add(this.group),this.update()}},{key:"end",value:function(){this.group&&this.group.remove()}}]),e}();function fc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pc(e){switch((e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fc(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({"stroke-linecap":"round","stroke-linejoin":"round"},e)).name){case"rect":return new ar(e);case"ellipse":return new cr(e);case"polygon":return new br(e);default:return new Xn(e)}}function hc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var mc=pn,gc=function(e){b()(n,bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"render",value:function(){var e=this.cell,t=new mc;this.element=t,e.graphicGroup.add(t)}},{key:"update",value:function(){var e=this.cell,t=this.element;e.isCacheStale("shape")&&(t.clear(),this.shapeElement=pc(e.stencil.outline),t.add(this.shapeElement))}},{key:"draw",value:function(){var e=this.cell,t=this.shapeElement,n=e.stroke,r=e.fill,a=e.width,o=e.height,i=e.stencil,l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hc(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.convertStrokeStyle());if(e.isCacheStale("width","height","shape"))if(i.outline.path)l.d=i.outline.path(a,o);else{var s=a/i.width,u=o/i.height;l.d=t.getPath(s,u)}e.isCacheStale("stroke")&&Object.assign(l,{stroke:n.color,"stroke-width":n.width}),e.isCacheStale("fill")&&(l.fill=r.color),t.update(l)}}]),n}();function vc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vc(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}["getTotalLength","isPointInFill","isPointInStroke"].forEach((function(e){Object.defineProperty(gc.prototype,e,{value:function(){var t;return(t=this.shapeElement)[e].apply(t,arguments)}})}));var bc=pn,kc=function(e){b()(n,bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"render",value:function(){var e=this.cell;this.element=new bc,e.graphicGroup.add(this.element)}},{key:"renderElements",value:function(){var e=this.element,t=this.cell.stencil.scene.map((function(e){return pc(e)}));t.forEach((function(t){e.add(t)})),this.elements=t}},{key:"update",value:function(){var e=this.cell,t=this.elements;e.isCacheStale("shape")&&(t&&t.forEach((function(e){return e.remove()})),this.renderElements())}},{key:"draw",value:function(){var e,t,n=this.cell,r=this.elements,a=n.stroke,o=n.fill,i={};if(n.isCacheStale("width","height")){var c=n.stencil,l=n.width,s=n.height;e=l/c.width,t=s/c.height}n.isCacheStale("stroke")&&(i.stroke=a.color,i["stroke-width"]=a.width),n.isCacheStale("fill")&&(i.fill=o.color),r.forEach((function(n){e&&t?n.update(yc(yc({},i),{},{d:n.getPath(e,t)})):n.update(i)}))}}]),n}();function wc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var xc=$n,_c=function(e){b()(n,bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"render",value:function(){var e=this.cell,t=e.graphicGroup,n=new xc({styleSheets:e.textAreaContentStyleSheets,html:e.html});n.htmlContainer.classList.add("selection-transparent"),t.add(n),this.element=n,e.textAreaElement=n,e.textArea=this,this.initCalculatedDOM(),this.update()}},{key:"initCalculatedDOM",value:function(){var e=this.cell.diagram,t=document.createElement("div");e.calculatedContainer.appendChild(t),this.calculatedDOM=t}},{key:"update",value:function(){var e=this.cell,t=this.calculatedDOM,n=e.cache,r=e.textAreaContentStyleSheets;n.html!==e.html&&(t.innerHTML=e.html),this.updateStyleSheets(),["html","width","height","image"].some((function(t){return n[t]!==e[t]}))&&(it(t,r),this._setBBox())}},{key:"updateStyleSheets",value:function(){for(var e=this.cell,t=e.textAreaContentStyleSheets,n=e.getPadding(),r=e.isDiscrete(),a=0;a<t.length;a++){var o=t[a];if("self"===o.query){var i=e.getOuterWidth();o.css.width=i&&!r?i-n[1]-n[3]+"px":""}}}},{key:"getPosition",value:function(){var e=this.cell,t=e.isDiscrete(),n=e.width,r=e.height,a=e.image,o=this.getBBox(),i=e.getPadding(),c=a&&a.height||0,l=c+o.height;return t?{x:(n-o.width)/2,y:r+8}:{x:Math.max((n-o.width)/2,i[3]),y:(r-l)/2+(c?c+2:0)}}},{key:"calculateBBox",value:function(){var e=this.calculatedDOM;e.style.display="inline-block";var t=e.getBoundingClientRect();return e.style.display="none",t}},{key:"_setBBox",value:function(){this.box=this.calculateBBox()}},{key:"getBBox",value:function(){return this.box}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=this.box,r=e.cache,a=e.textAreaContentStyleSheets,o={};r.html!==e.html&&(o.html=e.html),["html","width","height"].some((function(t){return r[t]!==e[t]}))&&(it(t.htmlContainer,a),Object.assign(o,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wc(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({width:Math.ceil(n.width),height:Math.ceil(n.height)},this.getPosition()))),Object.keys(o).length>0&&(t.update(o),"read"===e.diagram.interaction.currentMode&&t.htmlContainer.querySelectorAll("a").forEach((function(e){var t=e.href,n=window.location.origin+window.location.pathname;(t===n||t.startsWith(n+location.search+"#"))&&e.removeAttribute("target")})))}},{key:"destroy",value:function(){this.element.destroy(),this.calculatedDOM.remove()}}]),n}();function Ec(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}c()(_c,"className","TextArea"),c()(_c,"configName","textArea"),c()(_c,"zIndex",2);var Cc=function(e){b()(n,Oi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),r=$e({default:{html:"",x:0,y:0,rotate:0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],opacity:1,locked:!1},textAreaContentStyleSheets:[{query:"self",css:{outline:"none","white-space":"normal","letter-spacing":"normal","font-size":"14px","font-family":'PingFangSC-Regular, "PingFang SC", sans-serif',"min-height":"24px","min-width":"24px","line-height":"1.74","word-break":"break-word",color:"#262626"}}],penetratedKeys:["x","y","width","height","stroke","fill","rotate","html","shape","image","constraints","opacity","locked"]},r),e=t.call(this,r),Object.assign(P()(e),d()(r.default)),e.Subcells=r.Subcells||[gc,kc,_c],e.isVertex=!0,e.initRotateResize(),e.initSubcell(),e.eventDelegation(),e.render(),e}return v()(n,[{key:"canUseAddLineButton",value:function(){return!0}},{key:"getRelativePoint",value:function(e){return T()(_()(n.prototype),"getRelativePoint",this).call(this,e,this.stroke.width/2)}},{key:"initRotateResize",value:function(){this.rotateResize=new ac(this),this.lockResize=new dc(this)}},{key:"beginRotateResize",value:function(){this.locked?this.lockResize.begin():this.rotateResize.begin()}},{key:"endRotateResize",value:function(){this.rotateResize.end(),this.lockResize.end()}},{key:"initSubcell",value:function(){var e=this;this.subcells=this.Subcells.map((function(t){return new t(e)}))}},{key:"getEventObject",value:function(e){return{cell:this,nativeEvent:e}}},{key:"eventDelegation",value:function(){var e=this.graphicGroup;this.delegateEvent(e,"mouseenter","vertexcell:mouseenter"),this.delegateEvent(e,"mouseleave","vertexcell:mouseleave")}},{key:"updateStencil",value:function(){var e=this,t=this.shape,n=this.stencils,r=t||"process";if(!this.stencil||this.stencil.name!==r){var a=n.find((function(e){return e.name===r}));if(!a)throw new Error("unknown shape ".concat(r));this.stencil=a,this.updateAnchors(),["width","height"].forEach((function(t){null==e[t]&&(e[t]=a[t])})),this.cache={}}}},{key:"updateAnchors",value:function(){for(var e=this.anchors,t=this.stencil,n=function(n){var r=e[n],a=t.anchors.find((function(e){return e.name===r.name}));a&&(e[n]=a)},r=0;r<e.length;r++)n(r)}},{key:"render",value:function(){var e=this.model;this.subcells.forEach((function(e){return e.render()})),this.updateModel(e)}},{key:"updateSize",value:function(){}},{key:"updateModel",value:function(e){if(!this.locked||e.hasOwnProperty("locked")){if(this.constraints&&this.constraints.proportion){var t=this.width/this.height;e.height>0&&null==e.width?e.width=e.height*t:e.width>0&&(e.height=e.width/t)}T()(_()(n.prototype),"updateModel",this).call(this,e),this.updateStencil(),this.updateSize(),this.updateMatrix(),this.subcells.forEach((function(e){e.update()}))}}},{key:"draw",value:function(){this.subcells.forEach((function(e){return e.draw()})),this.graphicGroup.attr({opacity:this.opacity}),this.drawPosition(),this.updateCache()}},{key:"updateCache",value:function(){var e=this,t=this.cache;["x","y","width","height","rotate","shape","fill","stroke"].forEach((function(n){var r=e[n];t[n]=s()(r)?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ec(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ec(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r):r}))}},{key:"drawPosition",value:function(){if(this.isCacheStale("matrix")){var e=this.graphicGroup,t=this.matrix;e.update({matrix:t})}}},{key:"canDelete",value:function(){return!this.locked}},{key:"getPadding",value:function(){var e=this.stencil,t=this.width,n=this.height;if(e&&Array.isArray(e.padding)){var r=e.padding,a=t/e.width,o=n/e.height;return r.map((function(e,t){return e*(t%2==0?o:a)}))}return[4,4,4,4]}},{key:"isDiscrete",value:function(){var e=this.stencil;return!!e&&e.discrete}},{key:"updateMatrix",value:function(){if(this.isCacheStale("x","y","width","height","rotate")){var e=this.x,t=this.y,n=this.width,r=this.height,a=this.rotate;this.matrix=oc(e,t,n,r,a)}}},{key:"getKeyShape",value:function(){return this.subcells.find((function(e){return e instanceof gc})).shapeElement}},{key:"destroy",value:function(){this.subcells.forEach((function(e){return e.destroy()})),this.rotateResize.destroy(),T()(_()(n.prototype),"destroy",this).call(this)}}]),n}();function Oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oc(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c()(Cc,"className","VertexCell");var Rc=function(e){b()(n,Cc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),(e=t.call(this,Sc({stencils:[{name:"text",width:120,height:60,outline:{name:"rect",x:0,y:0,width:120,height:60,rx:1,ry:1},scene:[],thumb:[{d:[["M",6.4,10.5],["L",25.6,10.5],["C",25.8209139,10.5,26,10.6790861,26,10.9],["L",26,22.1],["C",26,22.3209139,25.8209139,22.5,25.6,22.5],["L",6.4,22.5],["C",6.1790861,22.5,6,22.3209139,6,22.1],["L",6,10.9],["C",6,10.6790861,6.1790861,10.5,6.4,10.5],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]}],default:{fill:{color:"rgba(255,255,255,0)"},shape:"text",stroke:{width:1}}},r))).isText=!0,e}return v()(n,[{key:"updateSize",value:function(){var e=this.subcells.find((function(e){return e instanceof _c})),t=this.getPadding();e.update();var n=e.getBBox();this.width="number"!=typeof this.model.width?n.width+t[1]+t[3]:this.width,this.height="number"!=typeof this.model.height?n.height+t[1]+t[3]:this.height}}]),n}();function jc(e,t){var n=wt(e.x,e.y,t.x,t.y);if(n>=5*Math.PI/4&&n<7*Math.PI/4)return"N";if(n>=7*Math.PI/4||n<Math.PI/4)return"E";if(n>=Math.PI/4&&n<3*Math.PI/4)return"S";if(n>=3*Math.PI/4&&n<5*Math.PI/4)return"W";throw new Error("unexpected radian ".concat(n))}function Pc(e,t){var n=M()(e,2),r=n[0],a=n[1],o=M()(t,2),i=o[0],c=o[1],l=vt(r,a,i,c);Math.abs(l)<.1&&Math.abs(c-a)<8?t[1]=a:Math.abs(l)>10&&Math.abs(i-r)<8&&(t[0]=r)}function Ac(e,t){var n=[];return"straight"===e.shape?n=function(e){var t,n=[],r=e.getPoints(),a=r.length;for(t=0;t<a-1;t++){var o=[.5*(r[t].x+r[t+1].x),.5*(r[t].y+r[t+1].y)];n.push(o)}return n}(e):"curve"===e.shape?n=function(e){var t=[],n=e.getPoints().length,r=e.wireElement;if(2===n){var a=r.getPointAtLength(.5*r.getTotalLength());t.push([a.x,a.y])}else if(3===n){var o=r.getPointAtLength(.25*r.getTotalLength()),i=r.getPointAtLength(.75*r.getTotalLength());t.push([o.x,o.y]),t.push([i.x,i.y])}else{var c,l=En(e.d);for(c=0;c<l.length-1;c++){var s=[];if("M"===l[c][0])s.push(l[c]),s.push(l[c+1]);else{var u=l[c];s.push(["M",u[u.length-2],u[u.length-1]]),s.push(l[c+1])}var d=On(s),f=new Xn({d:d}),p=f.getPointAtLength(.5*f.getTotalLength());f.destroy(),t.push([p.x,p.y])}}return t}(e):"elbow"===e.shape&&(n=function(e,t){if(e.controlPoints.length>0||e.isLoop)return function(e,t){var n=e.getPoints(),r=e.controlPoints,a=n[0],o=r[0],i=n[n.length-1],c=r[r.length-1],l=d()(Tc(e,t)),s=Tn(r,n,t);return l.length<=2&&s.length<=3||(pt(o[0],a.x)||pt(o[1],a.y)||("V"===o[o.length-1]?l.unshift([a.x,.5*(o[1]+a.y),"H"]):l.unshift([.5*(o[0]+a.x),a.y,"V"])),pt(c[0],i.x)||pt(c[1],i.y)||("V"===c[c.length-1]?l.push([i.x,.5*(c[1]+i.y),"H"]):l.push([.5*(c[0]+i.x),i.y,"V"]))),l}(e,t);var n=e.source,r=e.target,a=e.diagram,o=a.find(n.id),i=a.find(r.id),c=e.getPoints(),l=[];if(!o&&!i&&2===c.length){var s=c[0],u=c[1],f=.5*(s.x+u.x),p=.5*(s.y+u.y);return pt(s.x,u.x)||pt(s.y,u.y)?l.push([f,p,0]):(l.push([.5*(s.x+f),s.y,"V"]),l.push([f,p,"H"]),l.push([.5*(f+u.x),u.y,"V"])),l}for(var h=En(e.d),m=1;m<h.length;m++){var g=h[m-1],v=h[m];pt(g[1],v[1])?l.push([g[1],.5*(g[2]+v[2]),"H"]):pt(g[2],v[2])&&l.push([.5*(g[1]+v[1]),g[2],"V"])}return l}(e,t)),n}function Tc(e,t){for(var n=e.getPoints(),r=Tn(e.controlPoints,n,t),a=[],o=0;o<r.length-1;o++){var i=r[o],c=r[o+1],l=[.5*(i[1]+c[1]),.5*(i[2]+c[2]),pt(i[1],c[1],2)?"H":"V"];a.push(l)}return a.length>2?a.slice(1,a.length-1):a}function Dc(e){var t=e.cell,n=e.uiPoints,r=e.uiPointIndex;return"elbow"===t.shape?function(e,t,n){return t.length<=1?t:0===n?t.splice(0,t.length-1):n===t.length-1?t.splice(1):t.slice(1,t.length-1)}(0,n,r):function(e,t,n){var r=t[n],a=d()(e.controlPoints);return a.splice(n,0,r),a}(t,n,r)}function Mc(e){var t=new bn,n=new cr({cx:0,cy:0,rx:4,ry:4,stroke:"#096DD9",fill:"white"});return t.add(n),t.dataset({lake_prevent_click_unselect:!0,test_id:"line_endpoint_".concat(e)}),{group:t,shape:n,name:e}}c()(Rc,"className","TextCell");var Nc=function(e){b()(n,C.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,n),e=t.call(this),Object.assign(P()(e),r);var a=P()(e),o=a.group,i=a.cell,c=["source","target"].map((function(e){return Mc(e)}));return c.forEach((function(e){return o.add(e.group)})),e.buttons=c,e.diagram=i.diagram,e.eventHelper=new Ra,e.cacheEndpointId=null,e.cellModel=null,e}return v()(n,[{key:"update",value:function(){var e=this.buttons,t=this.cell,n=this.diagram,r=this.group;if(r&&r.parent){var a=M()(e,2),o=a[0],i=a[1],c=t.getPoints(),l=c[0],s=c[c.length-1],u=1/n.viewport.zoom;o.group.update({scale:u,x:l.x,y:l.y}),i.group.update({scale:u,x:s.x,y:s.y})}}},{key:"bindEvent",value:function(){var e,t,n,r,a=this,o=this.buttons,i=this.cell,l=this.diagram,s=this.eventHelper,u=function(){l.resetCursor(),e=void 0,t=void 0,n=void 0,r=void 0,a.cacheEndpointId&&l.highlight.clear(),a.cacheEndpointId=null};o.forEach((function(n){var a=n.name,o=n.group;s.bind(o,"mousedown",(function(){e=a,t=pe()({connection:null,id:null},ct(i.model[e],{connection:!0,id:!0})),r=d()(i.controlPoints),l.emit("endpointcontrolpointmousedown")}))})),s.bind(l,"mousemove",(function(t){if("source"===e||"target"===e){var o="source"===e?i.target:i.source,s=l.viewport.invertClient([t.clientX,t.clientY]);if(n=ni(l,s,l.find(o.id)),o.id&&n.id===o.id&&null==o.connection&&null==n.connection&&r.length>0&&(n.id=null,n.connection=s),n.connection&&!n.id){var u,d=i.getPoints(),f=d.length;u="source"===e?d[1]:d[f-2],"straight"===i.shape&&Pc([u.x,u.y],n.connection)}a.cacheEndpointId!==n.id&&(l.highlight.dock([l.find(n.id)]),a.cacheEndpointId=n.id),l.update(i,c()({},e,n)),a.update()}})),s.bind(l,"mouseup",(function(){var o,s,d;"source"!==e&&"target"!==e||("elbow"===i.shape?l.command.execute("Update",{id:i.model.id,model:(o={},c()(o,e,n),c()(o,"controlPoints",Tc(i,!0)),o),originModels:(s={},c()(s,e,t),c()(s,"controlPoints",r),s)}):l.command.execute("Update",{id:i.model.id,model:c()({},e,n),originModels:(d={},c()(d,e,t),c()(d,"controlPoints",r),d)}),a.emit("endpointControlMouseup"),u())})),s.bind(l,"keydown",(function(n){var r=a.cell,o=a.diagram;!e||"Esc"!==n.key&&"Escape"!==n.key||(o.update(r,c()({},e,t)),a.update(),u())})),s.bind(l,"afterviewportchange",ie()((function(){var e=a.buttons,t=a.cell;e&&t&&a.update()}),16))}},{key:"begin",value:function(){this.update(),this.bindEvent()}},{key:"end",value:function(){this.eventHelper.unbind()}},{key:"destroy",value:function(){this.eventHelper.unbind(),this.group&&this.group.clear(),this.group=null,this.diagram=null,this.cell=null,this.buttons=null}}]),n}();function Lc(e,t){var n=new bn,r=new cr({cx:0,cy:0,rx:4,ry:4,width:8,height:8,stroke:t?"rgba(255,255,255,0.40)":"#096DD9",strokeWidth:"2px",fill:t?"rgba(9,109,217,0.40)":"white"});return r.dataset({isControlPoint:!t,isUIPoints:t,index:e,test_id:"line-control-point_".concat(e)}),n.add(r),n.dataset({lake_prevent_click_unselect:!0,test_id:"line-control-point_".concat(e),isControlPoint:!t,isUIPoints:t,index:e}),{group:n,shape:r,index:e,isUIPoints:t,isControlPoints:!t}}var Ic=function(e){b()(n,C.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,n),e=t.call(this),Object.assign(P()(e),r);var a=P()(e),o=a.cell;return e.diagram=o.diagram,e.eventHelper=new Ra,e.onMove=!1,e}return v()(n,[{key:"_refresh",value:function(){var e=this.group,t=this.cell,n=Ac(t);e&&e.clear();var r=t.controlPoints.map((function(e,t){return Lc(t,!1)})),a=n.map((function(e,t){return Lc(t,!0)}));a.forEach((function(t){return e.add(t.group)})),r.forEach((function(t){return e.add(t.group)})),this.buttons=r,this.uiButtons=a,this.uiPoints=n}},{key:"update",value:function(){var e=this.cell;this._refresh();var t=this.buttons,n=this.diagram,r=this.group,a=this.uiButtons,o=this.uiPoints;if(r.parent)if(e.isLoop&&0===e.controlPoints.length)r.css({display:"none"});else{this.onMove?r.css({display:"none"}):r.css({display:""});var i=1/n.viewport.zoom;t.forEach((function(t){var n=t.group,r=t.index,a=e.getControlPointButtonPosition(r);n.update({scale:i,x:a[0],y:a[1]})})),a.forEach((function(e){var t=e.group,n=e.index;t.update({scale:i,x:o[n][0],y:o[n][1]})}))}}},{key:"bindEvent",value:function(){var e,t,n,r,a=this,o=this.cell,i=this.diagram,c=this.eventHelper,l=this.group,s=!1,u={},f=function(){i.resetCursor(),e=void 0,t=void 0,n=void 0,s=!1,a.onMove=!1,r=void 0,u={}};c.bind(i,"mousedown",(function(r){if("true"===(u=r.target&&r.target.dataset).isUIPoints&&"false"===u.isControlPoint){var c=Number(u.index);t=c,n={controlPoints:d()(o.controlPoints)},s=!0}if("false"===u.isUIPoints&&"true"===u.isControlPoint){var l=Number(u.index);e=l,n={controlPoints:d()(o.controlPoints)},s=!1,a.afterMove=!1}i.emit("endpointcontrolpointmousedown")})),c.bind(i,"mousemove",(function(n){if(u!=={}&&"true"===u.isUIPoints&&"false"===u.isControlPoint&&s){var r=Number(u.index);t=r;var c=Dc({cell:o,uiPoints:a.uiPoints,uiPointIndex:t});i.update(o,{controlPoints:c}),e=r,s=!1}if(void 0!==e){var l=i.viewport.invertClient([n.clientX,n.clientY]),d=o.controlPoints[e];void 0!==d&&(d[0]=l[0],d[1]=l[1]),o.draw(),a.onMove=!0}})),c.bind(i,"mouseup",(function(){if(void 0!==e)if(a.onMove){var c=d()(o.controlPoints);i.command.execute("Update",{id:o.model.id,model:{controlPoints:c},originModels:n,diagram:i}),l.css({display:""}),f()}else r=e,e=void 0;else void 0!==t&&f()})),c.bind(i,"dblclick",(function(){if(void 0!==r&&void 0===t){var e=d()(o.controlPoints);i.update(o,n),e.splice(r,1),i.command.execute("Update",{id:o.model.id,model:{controlPoints:e},diagram:i}),f()}})),c.bind(i,"keydown",(function(t){var r=a.cell,o=a.diagram;!e||"Esc"!==t.key&&"Escape"!==t.key||(o.update(r,n),a.update(),f())})),c.bind(i,"afterviewportchange",ie()((function(){var e=a.buttons,t=a.cell;e&&t&&a.update()}),16))}},{key:"begin",value:function(){this.update(),this.bindEvent()}},{key:"end",value:function(){this.eventHelper.unbind()}},{key:"destroy",value:function(){this.eventHelper.unbind(),this.group&&this.group.clear(),this.group=null,this.diagram=null,this.cell=null,this.buttons=null,this.uiButtons=null,this.uiPoints=null}}]),n}();function Bc(e,t,n){var r=new bn,a=new cr({cx:0,cy:0,rx:4,ry:4,stroke:t?"rgba(255,255,255,0.40)":"#096DD9",strokeWidth:"2px",fill:t?"rgba(9,109,217,0.40)":"white"});return a.dataset({isControlPoint:!t,isUIPoints:t,index:e}),a.css({cursor:"V"===n[n.length-1]?"row-resize":"col-resize"}),r.add(a),r.dataset({lake_prevent_click_unselect:!0,test_id:"elbow_".concat(t?"ui_point":"control_point","_").concat(e),isControlPoint:!t,isUIPoints:t,index:e}),{group:r,shape:a,index:e,isUIPoints:t,isControlPoints:!t}}var zc=function(e){b()(n,C.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,n),e=t.call(this),Object.assign(P()(e),r);var a=P()(e),o=a.cell;return e.diagram=o.diagram,e.eventHelper=new Ra,e.onMove=!1,e.mergeSig=!1,e}return v()(n,[{key:"_refresh",value:function(){var e=this.group,t=this.cell,n=Ac(t,this.mergeSig);e&&e.clear();var r=n.map((function(e,r){return 0===t.controlPoints.length||0===r||r===n.length-1?Bc(r,!0,e):Bc(r,!1,e)}));r.forEach((function(t){return e.add(t.group)})),this.uiButtons=r,this.uiPoints=n}},{key:"update",value:function(){var e=this.cell;this._refresh();var t=this.diagram,n=this.group,r=this.uiButtons,a=this.uiPoints;if(n.parent){this.onMove?n.css({display:"none"}):n.css({display:""});var o=e.getPoints(),i=o[0],c=o[o.length-1],l=1/t.viewport.zoom;r.forEach((function(e){var t=e.group,n=e.index;0===n?yt(i.x,i.y,a[n][0],a[n][1])<8.5&&t.css({display:"none"}):n===r.length-1&&yt(c.x,c.y,a[n][0],a[n][1])<8.5&&t.css({display:"none"}),t.update({scale:l,x:a[n][0],y:a[n][1]})}))}}},{key:"bindEvent",value:function(){var e,t,n,r=this,a=this.cell,o=this.diagram,i=this.eventHelper,c=this.group,l=!1,s={},u=function(){o.resetCursor(),e=void 0,t=void 0,n=void 0,l=!1,r.onMove=!1,s={},r.mergeSig=!1};i.bind(o,"mousedown",(function(i){if("true"===(s=i.target&&i.target.dataset).isUIPoints&&"false"===s.isControlPoint){var c=Number(s.index);t=c,r.uiButtons[t].shape.update({fill:"white"}),n={controlPoints:0===a.controlPoints.length?null:d()(a.controlPoints)},l=!0,t=void 0,e=c,o.setCursor(0===r.uiPoints[c][2]?"row-resize":"col-resize")}if("false"===s.isUIPoints&&"true"===s.isControlPoint){var u=Number(s.index);e=0===u?0:u===r.uiPoints.length-1?a.controlPoints.length-1:u-1,n={controlPoints:d()(a.model.controlPoints)},l=!1;var f=r.uiPoints[u];f&&o.setCursor("V"===f[f.length-1]?"row-resize":"col-resize")}o.emit("endpointcontrolpointmousedown")})),i.bind(o,"mousemove",(function(n){if(s!=={}&&"true"===s.isUIPoints&&"false"===s.isControlPoint&&l){var i=Number(s.index);t=i;var c=Dc({cell:a,uiPoints:r.uiPoints,uiPointIndex:t});o.update(a,{controlPoints:c}),e=0===i?0:i===r.uiPoints.length-1?a.controlPoints.length-1:i-1,l=!1,r.mergeSig=!0}if(void 0!==e){r.onMove=!0;var u=o.viewport.invertClient([n.clientX,n.clientY]),f=d()(a.controlPoints),p=f[e];void 0!==p&&("V"===p[p.length-1]?p[1]=u[1]:p[0]=u[0]),o.update(a,{controlPoints:f})}})),i.bind(o,"mouseup",(function(){if(void 0!==e){var t=Tc(a,!0);o.command.execute("Update",{id:a.model.id,model:{controlPoints:t},originModels:n,diagram:o}),c.css({display:""}),u()}else u()})),i.bind(o,"keydown",(function(t){var a=r.cell,o=r.diagram;!e||"Esc"!==t.key&&"Escape"!==t.key||(o.update(a,n),r.update(),u())})),i.bind(o,"afterviewportchange",ie()((function(){var e=r.uiButtons,t=r.cell;e&&t&&r.update()}),16))}},{key:"begin",value:function(){this.update(),this.bindEvent()}},{key:"end",value:function(){this.eventHelper.unbind()}},{key:"destroy",value:function(){this.eventHelper.unbind(),this.group&&this.group.clear(),this.group=null,this.diagram=null,this.cell=null,this.buttons=null,this.uiButtons=null,this.uiPoints=null}}]),n}(),Fc=function(){function e(t){m()(this,e),this.eventHelper=new Ra,this._init(t)}return v()(e,[{key:"update",value:function(){this.subResizers.forEach((function(e){return e.update()}))}},{key:"bindEvent",value:function(){var e=this,t=this.subResizers,n=this.eventHelper,r=this.diagram,a=this.cell,o=this.lineControlPointResizer;t.forEach((function(e){return e.bindEvent()})),n.bind(r,"endpointcontrolpointmousedown",(function(){"elbow"===a.shape&&(o.group.css({display:"none"}),e.lineControlPointResizer.mergeSig=!0)})),n.bind(r,"endpointControlMouseup",(function(){"elbow"===a.shape&&(o.group.css({display:""}),e.lineControlPointResizer.mergeSig=!1)}))}},{key:"begin",value:function(){var e=this.subResizers;this.diagram.frontRootGroup.prepend(this.group),e.forEach((function(e){return e.begin()})),this.isBegin=!0}},{key:"end",value:function(){var e=this.subResizers,t=this.group;e.forEach((function(e){return e.end()})),t&&t.remove(),this.isBegin=!1}},{key:"destroy",value:function(){var e=this.subResizers,t=this.group,n=this.eventHelper;t.remove(),e.forEach((function(e){return e.destroy()})),this.isBegin=!1,n.destroy()}},{key:"renew",value:function(e){this.destroy(),this._init(e),this.begin()}},{key:"_init",value:function(e){var t=new pn,n=[],r=new pn,a=new Nc({group:r,cell:e});t.add(r),n.push(a);var o,i=new pn;o="elbow"===e.shape?new zc({group:i,cell:e}):new Ic({group:i,cell:e}),t.add(i),n.push(o),this.cell=e,this.diagram=e.diagram,this.subResizers=n,this.group=t,this.lineEndpointResize=a,this.lineControlPointResizer=o}},{key:"getElbowMergeSig",value:function(){return this.lineControlPointResizer.mergeSig}}]),e}();function Uc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uc(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qc=Xn,Hc=Lr,Wc=function(e){b()(n,bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"render",value:function(){var e=this.cell,t=e.graphicGroup,n={"stroke-linejoin":"round"},r=new qc(n),a=new qc(n);t.add(r),this.element=r,this.hitElement=a,e.wireElement=r,this._createClipPath()}},{key:"_createClipPath",value:function(){var e=this.cell,t=this.element,n=e.diagram.defs,r=Object(I.a)(),a=new Hc({id:r}),o=new qc({"fill-rule":"evenodd"});a.add(o),n.add(a),this.lineTextClipPath=o,this.clipPath=a,t.update({"clip-path":"url(#".concat(r,")")})}},{key:"_drawClipPath",value:function(){var e=this.cell,t=this.lineTextClipPath,n=e.textArea,r=n.box,a=r.width,o=r.height,i=n.getPosition(),c=i.x,l=i.y,s=e.getBBox(),u=s.x,d=s.y,f=s.width,p=s.height;r.width>0?t.update({d:Fn(u-5,d-5,u+f+10,d+p+10,c,l,c+a,l+o)}):t.update({d:Sn(u-5,d-5,f+10,p+10)})}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=this.hitElement,r=e.d,a=e.stroke,o=e.graphicGroup,i={d:r};t.update(Vc(Vc({stroke:a.color,"stroke-width":a.width,fill:"none"},e.convertStrokeStyle()),i)),!n.parent&&o.insertAfter(n,t),n.update({stroke:"rgba(255,255,255,0)","stroke-width":a.width+8,fill:"none",d:i.d}),this._drawClipPath()}},{key:"destroy",value:function(){this.element.destroy(),this.hitElement.destroy(),this.lineTextClipPath.destroy(),this.clipPath.destroy(),T()(_()(n.prototype),"destroy",this).call(this)}}]),n}();var Yc=function(e){b()(n,_c);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"updateStyleSheets",value:function(){var e=this.cell,t=e.textAreaContentStyleSheets.find((function(e){return"self"===e.query}));e.diagram.contentEditor.isBegin&&e.diagram.contentEditor.dom===e.textAreaElement.htmlContainer?(t.css.padding="4px 8px",t.css["min-height"]="28px",t.css["min-width"]="54px"):(e.isContentEmpty()?t.css.padding=0:t.css.padding="4px 8px",t.css["min-height"]=0,t.css["min-width"]=0)}},{key:"getPosition",value:function(){var e=this.cell,t=this.box,n=e.getTextAreaPosition();return{x:n.x-t.width/2,y:n.y-t.height/2}}},{key:"calculateBBox",value:function(){var e=this.calculatedDOM;e.style.display="inline-block";var t=e.getBoundingClientRect();return e.style.display="none",t}}]),n}(),Gc={none:function(){return{baseOffset:0,pc:0,path:[]}},"open-triangle":function(e){return{baseOffset:0,pc:1,fill:"none",path:[["M",-1*e,-1*e*Math.sin(ft(30))],["L",0,0],["L",-1*e,e*Math.sin(ft(30))]]}},"one-side-up":function(e){return{baseOffset:0,pc:0,fill:"none",path:[["M",0,0],["L",-1*e,-1*e*Math.sin(ft(30))]]}},"one-side-down":function(e){return{baseOffset:0,pc:0,fill:"none",path:[["M",0,0],["L",-1*e,e*Math.sin(ft(30))]]}},arrow:function(e){return{baseOffset:e,pc:1,path:[["M",0,0],["L",-1*e,-1*e*Math.sin(ft(30))],["L",-1*e,e*Math.sin(ft(30))],["Z"]]}},"hollow-triangle":function(e){return{baseOffset:e,pc:1,fill:"white",path:[["M",0,0],["L",-1*e,-1*e*Math.sin(ft(30))],["L",-1*e,e*Math.sin(ft(30))],["Z"]]}},"sharp-solid-square":function(e){var t=e/=2,n=Math.tan(ft(60))*t;return{baseOffset:2*n,pc:1,path:[["M",0,0],["L",-n,-t],["L",-2*n,0],["L",-n,t],["Z"]]}},"sharp-hollow-square":function(e){var t=e/=2,n=Math.tan(ft(60))*t;return{baseOffset:2*n,pc:1,fill:"white",path:[["M",0,0],["L",-n,-t],["L",-2*n,0],["L",-n,t],["Z"]]}},"flat-solid-square":function(e){return{baseOffset:2*(e*=Math.tan(ft(30))),pc:.5,path:[["M",0,-1*e],["L",-2*e,-1*e],["L",-2*e,e],["L",0,e],["Z"]]}},"flat-hollow-square":function(e){return{baseOffset:2*(e*=Math.tan(ft(30))),pc:.5,fill:"white",path:[["M",0,-1*e],["L",-2*e,-1*e],["L",-2*e,e],["L",0,e],["Z"]]}},"solid-circle":function(e){return{baseOffset:2*(e*=Math.tan(ft(30))),pc:.5,path:Pn(-1*e,0,e)}},"hollow-circle":function(e){return{baseOffset:2*(e*=Math.tan(ft(30))),pc:.5,fill:"white",path:Pn(-e,0,e)}},"cross-circle":function(e){var t=-(e*=Math.tan(ft(30))),n=e;return{baseOffset:2*e,pc:.5,fill:"white",path:Pn(t,0,n)+On([["M",t,-n],["L",t,n],["M",-2*n,0],["L",0,0]])}},"half-open-circle":function(e){return{baseOffset:e*=Math.tan(ft(30)),pc:0,fill:"none",path:[["M",0,0],["m",0,-e],["A",e,e,0,1,0,0,e]]}},"end-vertical-line":function(e){return{baseOffset:0,pc:.5,fill:"none","stroke-linecap":"square",path:[["M",0,-(e*=Math.tan(ft(30)))],["L",0,e]]}},"middle-vertical-line":function(e){return{baseOffset:e/=1.5,pc:0,fill:"none",path:[["M",-1*e,2*-e/3],["L",-1*e,2*e/3],["M",-1*e,0],["L",0,0]]}},"double-vertical-line":function(e){var t=2*(e/=1.5)/3;return{baseOffset:2*e,pc:0,fill:"none",path:[["M",-2*e,-t],["L",-2*e,t],["M",-e,-t],["L",-e,t],["M",-2*e,0],["L",0,0]]}},"single-slash":function(e){return{baseOffset:e/=1.5,pc:0,path:[["M",0,0],["L",-e,0],["M",-(e+e*Math.cos(ft(60))),-e*Math.sin(ft(60))],["L",-(e-e*Math.cos(ft(60))),e*Math.sin(ft(60))]]}},"three-line":function(e){return{baseOffset:e,pc:0,fill:"none",path:[["M",-1*e,0],["L",0,0],["M",-1*e,0],["L",0,-1*Math.sin(ft(30))*e],["M",-1*e,0],["L",0,Math.sin(ft(30))*e]]}},"three-line-plus-vertical":function(e){var t=Math.sin(ft(30))*e;return{baseOffset:e,pc:0,fill:"none",path:[["M",-e,0],["L",0,0],["M",-e,0],["L",0,-t],["M",-e,0],["L",0,t],["M",-e,-t],["L",-e,t]]}},"three-line-plus-circle":function(e){var t=Math.sin(ft(30))*e,n=-e-t;return{baseOffset:e+2*t,pc:0,fill:"white",path:On([["M",-e,0],["L",0,0],["M",-e,0],["L",0,-t],["M",-e,0],["L",0,t]])+Pn(n,0,t)}},"circle-vertical":function(e){var t=.5*e,n=-(e+t);return{baseOffset:2*e,pc:0,fill:"white",path:On([["M",-t,-t],["L",-t,t],["M",0,0],["L",-e,-0]])+Pn(n,0,t)}}},Xc=Object.keys(Gc).map((function(e){return e}));var Kc=Xn,Zc=function(e){b()(n,bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e,r){var a;return m()(this,n),(a=t.call(this,e)).type=r,a.size=10,a}return v()(n,[{key:"render",value:function(){var e=this.cell.graphicGroup,t=new Kc({"stroke-miterlimit":"10"});this.element=t,e.add(this.element)}},{key:"update",value:function(){var e=this.cell,t=this.type;this.stencil=Gc[("tip"===t?e.target.marker:e.source.marker)||"none"](6+2*(e.stroke.width-1));var n=this.stencil,r=n.baseOffset,a=n.pc;e["".concat(t,"Offset")]=r+e.stroke.width*a}},{key:"draw",value:function(){var e,t,n,r,a=this.cell,o=this.element,i=this.type,c=this.stencil,l=a.d,s=a.stroke,u=a.shape,d=c.pc,f=En(l),p=a.getPoints();if("curve"===u)if("tail"===i)e=p[0].x,t=p[0].y,n=f[1][1],r=f[1][2];else{var h=p.length;if(e=p[h-1].x,t=p[h-1].y,2===p.length)n=f[1][3],r=f[1][4];else if(3===p.length)n=f[1][1],r=f[1][2];else{var m=p.length-1;n=f[m][3],r=f[m][4]}}else if("tail"===i)if("straight"===u)e=p[0].x,t=p[0].y,n=p[1].x,r=p[1].y;else{e=p[0].x,t=p[0].y;var g=M()(f[1],3);n=g[1],r=g[2]}else if("straight"===u){var v=p.length;e=p[v-1].x,t=p[v-1].y,n=p[v-2].x,r=p[v-2].y}else{e=p[p.length-1].x,t=p[p.length-1].y;var y=M()(f[f.length-2],3);n=y[1],r=y[2]}var b=[1,0,0,0,1,0,-1*a.stroke.width*d,0,1],k=[1,0,0,0,1,0,e,t,1],w=ce.a.rotate([],[1,0,0,0,1,0,0,0,1],wt(n,r,e,t)),x=b;if("tail"===i){var _=a.source.marker;"one-side-up"!==_&&"one-side-down"!==_&&"single-slash"!==_||ce.a.multiply(x,[1,0,0,0,-1,0,0,0,1],x)}ce.a.multiply(x,w,x),ce.a.multiply(x,k,x),o.update({d:c.path,stroke:s.color,"stroke-width":s.width,fill:c.fill||s.color,"stroke-linecap":c["stroke-linecap"]||"butt",matrix:x}),o.dataset({test_id:("tip"===i?a.target.marker:a.source.marker)||"none"})}},{key:"destroy",value:function(){this.element.destroy(),T()(_()(n.prototype),"destroy",this).call(this)}}]),n}(),$c=function(){function e(t){m()(this,e),this.line=t}return v()(e,[{key:"getFirstInsertControlPoints",value:function(){return!1}},{key:"getTextAreaPosition",value:function(){return this.line.getPointByPercent(.5)}},{key:"getControlPointButtonPosition",value:function(e){return this.line.controlPoints[e]}},{key:"updatePoints",value:function(){var e=this.line,t=e.source,n=e.target,r=e.sourceCell,a=e.targetCell,o=e.controlPoints.map((function(e){var t=M()(e,2);return{x:t[0],y:t[1]}})).filter((function(e){return!isNaN(e.x)})),i=o.length,c=e.getEndpoint(t),l=e.getEndpoint(n);if(c&&l){if(c.x===l.x&&c.y===l.y&&0===o.length)return l.x+=2,l.y+=2,void(this.points=[c,l]);"elbow"===e.shape?(r&&!t.connection&&(c=r.snapAnchor(o[0]||l)[0]),a&&!n.connection&&(l=a.snapAnchor(o[i-1]||c)[0])):(r&&!t.connection&&(c=r.getIntersectionPoint(o[0]||l)),a&&!n.connection&&(l=a.getIntersectionPoint(o[i-1]||c))),this.points=[c].concat(o).concat(l)}else this.points=[c,l]}},{key:"getPoints",value:function(){return this.points}},{key:"getPath",value:function(){return""}}]),e}();var Qc=function(e){b()(n,$c);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"getPath",value:function(){var e=this.line,t=e.getPoints(),n=e.tipOffset,r=e.tailOffset,a=t[t.length-1],o=t[t.length-2],i=bt(o.x,o.y,a.x,a.y,n),c=t[0],l=t[1],s=[bt(l.x,l.y,c.x,c.y,r)];return 0===e.controlPoints.length?s.push(i):s=s.concat(e.controlPoints.map((function(e){var t=M()(e,2);return{x:t[0],y:t[1]}})).filter((function(e){return!isNaN(e.x)})),i),Rn(s)}}]),n}();var Jc=function(e){b()(n,$c);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"getControlPointButtonPosition",value:function(e){var t=this.line,n=t.controlPoints,r=t.diagram,a=t.subcells.find((function(e){return e instanceof Yc})),o=n[e].concat([]);return t.isContentEmpty()&&!r.contentEditor.isBegin||1!==t.controlPoints.length||(o[1]+=a.box.height/2),o}},{key:"getTextAreaPosition",value:function(){var e=this.line;return 1===e.controlPoints.length?{x:e.controlPoints[0][0],y:e.controlPoints[0][1]}:e.getPointByPercent(.5)}},{key:"getPath",value:function(){var e,t=this.line,n=t.tailOffset,r=t.tipOffset,a=this.getPoints();if(2===a.length){(e=Dn(t)).unshift(["M",a[0].x,a[0].y]);var o={x:e[0][1],y:e[0][2]},i={x:e[1][1],y:e[1][2]},c={x:e[1][5],y:e[1][6]},l={x:e[1][3],y:e[1][4]};o=bt(i.x,i.y,o.x,o.y,n),c=bt(l.x,l.y,c.x,c.y,r),e[0][1]=o.x,e[0][2]=o.y,e[1][5]=c.x,e[1][6]=c.y}else if(3===a.length){var s=a[0],u=a[1],d=a[2];s=bt((u={x:(u.x-.25*d.x-.25*s.x)/.5,y:(u.y-.25*d.y-.25*s.y)/.5}).x,u.y,s.x,s.y,n),d=bt(u.x,u.y,d.x,d.y,r),u={x:(a[1].x-.25*d.x-.25*s.x)/.5,y:(a[1].y-.25*d.y-.25*s.y)/.5},e=[["M",s.x,s.y],["Q",u.x,u.y,d.x,d.y]]}else{(e=An(a)).unshift(["M",a[0].x,a[0].y]);var f=e.length-1,p={x:e[f][5],y:e[f][6]},h={x:e[f][3],y:e[f][4]},m={x:e[0][1],y:e[0][2]},g={x:e[1][1],y:e[1][2]};m=bt(g.x,g.y,m.x,m.y,n),p=bt(h.x,h.y,p.x,p.y,r),e[0][1]=m.x,e[0][2]=m.y,e[f][5]=p.x,e[f][6]=p.y}return On(e)}}]),n}();function el(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?el(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):el(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nl(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var al=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,e),Object.assign(this,tl({expandRectGap:16},t))}return v()(e,[{key:"getExpandedBBox",value:function(e){var t=this.expandRectGap;return{minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t}}},{key:"getRectLines",value:function(e){var t=500;return[{x1:e.minX,y1:e.minY-t,x2:e.minX,y2:e.maxY+t},{x1:e.minX-t,y1:e.minY,x2:e.maxX+t,y2:e.minY},{x1:e.maxX,y1:e.minY-t,x2:e.maxX,y2:e.maxY+t},{x1:e.minX-t,y1:e.maxY,x2:e.maxX+t,y2:e.maxY}]}},{key:"getVertexLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ray",r=500;return"all"===t?[{x1:e.x,y1:e.y,x2:e.x,y2:e.y-r,type:n},{x1:e.x,y1:e.y,x2:e.x-r,y2:e.y,type:n}]:"N"===t||"S"===t?["N"===t?{x1:e.x,y1:e.y,x2:e.x,y2:e.y-r,type:n}:{x1:e.x,y1:e.y,x2:e.x,y2:e.y+r,type:n}]:["W"===t?{x1:e.x,y1:e.y,x2:e.x-r,y2:e.y,type:n}:{x1:e.x,y1:e.y,x2:e.x+r,y2:e.y,type:n}]}},{key:"vMiddleLine",value:function(e,t){var n;n=Math.abs(e.minX-t.maxX)<Math.abs(e.maxX-t.minX)?(e.minX+t.maxX)/2:(e.maxX+t.minX)/2;var r=((e.minY+e.maxY)/2+(t.minY+t.maxY)/2)/2;return{x1:n,y1:r-500,x2:n,y2:r+500}}},{key:"hMiddleLine",value:function(e,t){var n;n=Math.abs(e.minY-t.maxY)<Math.abs(e.maxY-t.minY)?(e.minY+t.maxY)/2:(e.maxY+t.minY)/2;var r=((e.minX+e.maxX)/2+(t.minX+t.maxX)/2)/2;return{x1:r-500,y1:n,x2:r+500,y2:n}}},{key:"cost",value:function(e){var t,n=e.vertex,r=e.end,a=e.middleLine,o=0,i=0;return t=n.distance+Et(n.x,n.y,r.x,r.y),n.from&&n.from.from&&xt(n.x,n.y,n.from.x,n.from.y)!==xt(n.from.x,n.from.y,n.from.from.x,n.from.from.y)&&(o=-1),a&&n.from&&n.from.from&&Pt(n,a)&&!Pt(n.from.from,a)&&n.from&&n.from.from&&xt(n.x,n.y,n.from.x,n.from.y)!==xt(n.from.x,n.from.y,n.from.from.x,n.from.from.y)&&(i=2),-t+o+i}},{key:"getSide",value:function(e,t){var n=[(e.minX+e.maxX)/2,(e.minY+e.maxY)/2],r=[e.maxX,e.minY],a=[e.maxX,e.maxY],o=[r[0]-n[0],r[1]-n[1]],i=[a[0]-n[0],a[1]-n[1]],c=[t[0]-n[0],t[1]-n[1]],l=ce.b.angle(o,i),s=l/2,u=[0,s],d=[u[1],s+Math.PI-l],f=[d[1],s+Math.PI],p=[2*Math.PI-s,2*Math.PI],h=ce.b.angle(c,[1,0]);return c[1]<0&&(h=2*Math.PI-h),Qe(h,u)||Qe(h,p)?"E":Qe(h,d)?"S":Qe(h,f)?"W":"N"}},{key:"dedupePoints",value:function(e){if(e.length>=3){for(var t=[e[0]],n=1;n<e.length-1;n++){var r=e[n-1],a=e[n],o=e[n+1];pt(r.x,a.x)&&pt(o.x,a.x)||pt(r.y,a.y)&&pt(o.y,a.y)||t.push(a)}return t.push(e[e.length-1]),t}return e}},{key:"getExpandPoint",value:function(e,t,n){return"N"===n?{x:e.x,y:t.minY}:"S"===n?{x:e.x,y:t.maxY}:"W"===n?{x:t.minX,y:e.y}:"E"===n?{x:t.maxX,y:e.y}:null}},{key:"find",value:function(e,t){var n=this,r=e.cell,a=t.cell,o=r&&r.getBBox(),i=a&&a.getBBox(),c=o&&this.getExpandedBBox(o),l=i&&this.getExpandedBBox(i),s=[];s=c?s.concat(this.getRectLines(c)):s,s=l?s.concat(this.getRectLines(l)):s;var u,d,f,p=new zt("start"),h=new zt("end"),m=[e.x,e.y],g=[t.x,t.y];Object.assign(p,{x:m[0],y:m[1]}),Object.assign(h,{x:g[0],y:g[1]}),o?(d=this.getSide(o,m),s=s.concat(this.getVertexLine(p,d))):s=s.concat(this.getVertexLine(p,"all","straight")),i?(f=this.getSide(i,g),s=s.concat(this.getVertexLine(h,f))):s=s.concat(this.getVertexLine(h,"all","straight")),a&&r&&("E"===d&&"W"===f?u=r.x+r.width<a.x?this.vMiddleLine(o,i):this.hMiddleLine(o,i):"W"===d&&"E"===f?u=r.x+r.width<a.x?this.hMiddleLine(o,i):this.vMiddleLine(o,i):"S"===d&&"N"===f?u=r.y+r.height>a.y?this.vMiddleLine(o,i):this.hMiddleLine(o,i):"N"===d&&"S"===f&&(u=r.y+r.height>a.y?this.hMiddleLine(o,i):this.vMiddleLine(o,i))),e.d&&("N"===d?p.y-=e.d:"S"===d?p.y+=e.d:"E"===d?p.x+=e.d:"W"===d&&(p.x-=e.d)),t.d&&("N"===f?h.y-=t.d:"S"===f?h.y+=t.d:"E"===f?h.x+=t.d:"W"===f&&(h.x-=t.d)),u&&s.push(u);var v=Ht(s);o&&i&&!gt(c,l)&&v.getAllEdges().forEach((function(e){var t=e.startVertex,n=e.endVertex,r={x1:t.x,y1:t.y,x2:n.x,y2:n.y};(jt(r,o)||jt(r,i))&&v.deleteEdge(e)}));var y,b=this.getExpandPoint(p,c,d)||p,k=this.getExpandPoint(h,l,f)||h,w=v.snap(b),x=v.snap(k);return w.from=p,x.from=h,(y=pt(w.x,x.x)&&pt(w.y,x.y)?[]:Wt(v,w,x,(function(e,t,r){return n.cost({vertex:e,start:t,end:r,middleLine:u})}))).unshift(p),y.push(h),this.dedupePoints(y)}},{key:"destroy",value:function(){this.destroyed=!0}}]),e}()),ol=function(e){b()(n,$c);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"truncate",value:function(e){var t=this.line,n=t.tailOffset,r=t.tipOffset,a=En(e),o=a[a.length-1],i=a[a.length-2],c=a[0],l=a[1],s=bt(i[1],i[2],o[1],o[2],r),u=bt(l[1],l[2],c[1],c[2],n);return o[1]=s.x,o[2]=s.y,c[1]=u.x,c[2]=u.y,On(a)}},{key:"getPath",value:function(){return this.truncate(this._getPath())}},{key:"_getPath",value:function(){var e=this.line,t=e.source,n=e.target,r=e.diagram,a=this.getPoints();if(e.controlPoints.length>0)return On(Tn(e.controlPoints,a,e.resizer.getElbowMergeSig()));var o=r.find(t.id),i=r.find(n.id),c=e.getEndpoint(t),l=e.getEndpoint(n);if(null!=o&&o===i&&yt(c.x,c.y,l.x,l.y)<8&&0!==e.controlPoints.length)return On([["M",(c=o.getPoint([1,.5])).x,c.y-8],["l",16,0],["l",0,16],["L",c.x,c.y+8]]);if(!c||!l)return On([["M",0,0],["L",50,0],["L",50,50]]);if(!o&&!i&&0===e.controlPoints.length){var s=.5*(c.x+l.x);return"M".concat(c.x,",").concat(c.y," L").concat(s,",").concat(c.y," L").concat(s,",").concat(l.y," L").concat(l.x,",").concat(l.y)}return Rn(al.find(rl(rl({cell:o},a[0]),{},{d:0}),rl(rl({cell:i},a[1]),{},{d:0})))}}]),n}();function il(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var cl=function(e){b()(n,Oi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),r=$e({default:{textAreaContentStyleSheets:[{query:"self",css:{outline:"none","white-space":"normal","letter-spacing":"normal","font-size":"14px","font-family":'PingFangSC-Regular, "PingFang SC", sans-serif',"line-height":"1.74","word-break":"break-word","box-sizing":"border-box",padding:"4px",color:"#262626"}}],shape:"straight",stroke:{color:"#595959",width:2},html:'<div style="text-align: center;">'.concat("&#8203;","</div>"),source:{},target:{},controlPoints:[],opacity:1},penetratedKeys:["source","target","stroke","fill","html","shape","controlPoints","opacity"]},r),e=t.call(this,r),Object.assign(P()(e),d()(r.default)),e.Subcells=[Wc,Yc],e.subcells=e.Subcells.map((function(t){return new t(P()(e))})),e.subcells.push(new Zc(P()(e),"tail")),e.subcells.push(new Zc(P()(e),"tip")),e.shapes={straight:new Qc(P()(e)),curve:new Jc(P()(e)),elbow:new ol(P()(e))},e.render(),e.isLine=!0,e.isLoop=!1,e.resizer=new Fc(P()(e)),e}return v()(n,[{key:"getKeyShape",value:function(){return this.wireElement}},{key:"getKeyShapeBox",value:function(){var e=this.getKeyShape().getBBox(),t=e.x,n=e.y;return{x:t,y:n,width:e.width,height:e.height,minX:t,minY:n,maxX:t+e.width,maxY:n+e.height}}},{key:"canArrange",value:function(){var e=this;return["source","target"].every((function(t){var n=e[t];return!n.id&&Array.isArray(n.connection)}))}},{key:"isDrawable",value:function(){var e=this.diagram,t=this.target,n=this.source,r=e.find(n.id),a=n.id&&!r||r&&!1===r.state.visible,o=e.find(t.id),i=t.id&&!o||o&&!1===o.state.visible;return!(a||i)}},{key:"shouldRefreshEndEditContent",value:function(){return this.isContentEmpty()}},{key:"canFill",value:function(){return!1}},{key:"beginEditContent",value:function(){this.textAreaElement.css({outline:"1px solid #096DD9"})}},{key:"endEditContent",value:function(){this.textAreaElement.css({outline:"none"})}},{key:"getPointByPercent",value:function(e){var t=this.wireElement,n=t.getTotalLength();return t.getPointAtLength(e*n)}},{key:"getPadding",value:function(){return[0,0,0,0]}},{key:"getEndpoint",value:function(e){var t=this.diagram,n=e.id,r=e.connection,a=t.find(n);if(a)return r?a.getPoint(r):a.getPoint([.5,.5]);if(Array.isArray(r)){var o=M()(r,2);return{x:o[0],y:o[1]}}return r}},{key:"getAlignBBox",value:function(){var e=this.wireElement.rendererElement.getBBox();return{x:e.x,y:e.y,width:e.width,height:e.height,minX:e.x,minY:e.y,maxX:e.x+e.width,maxY:e.y+e.height}}},{key:"getBBox",value:function(){var e=this.graphicGroup.rendererElement.getBBox();return{x:e.x,y:e.y,width:e.width,height:e.height,minX:e.x,minY:e.y,maxX:e.x+e.width,maxY:e.y+e.height}}},{key:"getShapeObj",value:function(){var e=this.shape;return this.shapes[e]}},{key:"getFirstInsertControlPoints",value:function(){return this.getShapeObj().getFirstInsertControlPoints(this)}},{key:"getTextAreaPosition",value:function(){return this.getShapeObj().getTextAreaPosition(this)}},{key:"getControlPointButtonPosition",value:function(e){return this.getShapeObj().getControlPointButtonPosition(e)}},{key:"getPath",value:function(){var e=this.shape,t=this.sourceCell,n=this.isLoop,r=this.getShapeObj();if(n&&0===this.controlPoints.length){var a=t.getPoint([1,.5]);return On([["M",a.x,a.y-8],["l",16,-4],["l",0,24],["L",a.x,a.y+8]])}if(r)return r.getPath(this);throw new Error("unsupported line shape ".concat(e))}},{key:"updatePath",value:function(){this.isCacheStale("shape","source","target")&&(this.d=this.getPath())}},{key:"render",value:function(){var e=this.model;this.subcells.forEach((function(e){return e.render()})),this.renderModel(e)}},{key:"renderModel",value:function(e){T()(_()(n.prototype),"updateModel",this).call(this,e),this.subcells.forEach((function(e){e.update()}))}},{key:"_updateResizer",value:function(){var e=this.diagram;this.resizer&&this.resizer.update(),1===e.selector.selections.length&&e.selector.selections[0]===this||this.resizer.end()}},{key:"updateModel",value:function(e){var t=!1;void 0!==e.shape&&e.shape!==this.shape&&(e.controlPoints=null,t=!0),T()(_()(n.prototype),"updateModel",this).call(this,e),t&&(this.updatePoints(),this.resizer&&this.resizer.renew(this)),this.subcells.forEach((function(e){e.update()}))}},{key:"draw",value:function(){if(this.isDrawable()){var e=this.source,t=this.target,n=this.diagram,r=n.find(e.id),a=n.find(t.id);this.isLoop=null!=r&&r===a,this.sourceCell=r,this.targetCell=a,this.show(),this.updatePoints(),this.updatePath(),this.subcells.forEach((function(e){return e.draw()})),this.drawPosition(),this.graphicGroup.attr({opacity:this.opacity}),this._updateResizer()}else this.hide()}},{key:"updatePoints",value:function(){this.getShapeObj().updatePoints()}},{key:"updateCache",value:function(){var e=this,t=this.cache;["shape","source","target"].forEach((function(n){var r=e[n];t[n]=s()(r)?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?il(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):il(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r):r}))}},{key:"drawPosition",value:function(){if(this.isCacheStale("matrix")){var e=this.graphicGroup,t=this.matrix;e.update({matrix:t}),this.resizer.update()}}},{key:"getPoints",value:function(){return this.shapes[this.shape].getPoints()}},{key:"convertStrokeStyle",value:function(){return"dash"===this.stroke.style?{"stroke-dasharray":2*(this.stroke.width||1)}:{"stroke-dasharray":"none"}}},{key:"destroy",value:function(){this.subcells.forEach((function(e){return e.destroy()})),this.shapes=null,this.resizer.destroy(),T()(_()(n.prototype),"destroy",this).call(this)}}]),n}();c()(cl,"className","LineCell"),c()(cl,"Shapes",{});var ll=tr,sl=function(e){b()(n,bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"render",value:function(){var e=this.cell,t=new ll;this.element=t,e.graphicGroup.add(t)}},{key:"update",value:function(){var e=this.cell,t=this.element,n=e.diagram,r=e.image,a=n.imageManager;if(r&&e.isCacheStale("image","width","height")){var o=r.src,i=r.naturalWidth,c=r.naturalHeight;t.update({width:e.width,height:e.height}),a.setImageHref(t,o,i,c)}}},{key:"destroy",value:function(){this.element.destroy(),T()(_()(n.prototype),"destroy",this).call(this)}}]),n}();function ul(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ul(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ul(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fl=function(e){b()(n,Cc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),(e=t.call(this,dl(dl({stencils:[{name:"image",width:120,height:60,outline:{name:"rect",x:0,y:0,width:120,height:60,rx:1,ry:1},scene:[],thumb:[{d:[["M",6.4,10.5],["L",25.6,10.5],["C",25.8209139,10.5,26,10.6790861,26,10.9],["L",26,22.1],["C",26,22.3209139,25.8209139,22.5,25.6,22.5],["L",6.4,22.5],["C",6.1790861,22.5,6,22.3209139,6,22.1],["L",6,10.9],["C",6,10.6790861,6.1790861,10.5,6.4,10.5],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]}],default:{fill:{color:"rgba(255,255,255,0)"},image:{},shape:"image",stroke:{width:1}}},r),{},{Subcells:[gc,sl]}))).isImage=!0,e}return v()(n)}();c()(fl,"className","ImageCell");var pl=[{name:"arrow-1",width:100,height:80,outline:{name:"polygon",points:[{x:49.4351641,y:0},{x:-181188398e-21,y:40.0053069},{x:49.4351641,y:80},{x:49.4351641,y:59.6453069},{x:100,y:59.6453069},{x:100,y:20.9653069},{x:49.4351641,y:20.9653069}]},scene:[],thumb:[{name:"polygon",points:[{x:16.2620321,y:7.99867328},{x:7,y:15.9997347},{x:16.2620321,y:23.9986733},{x:16.2620321,y:19.9277347},{x:25.7357163,y:19.9277347},{x:25.7357163,y:12.1917347},{x:16.2620321,y:12.1917347}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"arrow-2",width:100,height:80,outline:{name:"polygon",points:[{x:50.5648359,y:-671073958e-22},{x:100,y:40.0053069},{x:50.5648359,y:80},{x:50.5648359,y:59.6453069},{x:0,y:59.6453069},{x:0,y:20.9653069},{x:50.5648359,y:20.9653069}]},scene:[],thumb:[{name:"polygon",points:[{x:16.4736842,y:7.99867328},{x:25.7357163,y:15.9997347},{x:16.4736842,y:23.9986733},{x:16.4736842,y:19.9277347},{x:7,y:19.9277347},{x:7,y:12.1917347},{x:16.4736842,y:12.1917347}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"arrow-3",width:138,height:80,outline:{name:"polygon",points:[{x:92.2158589,y:0},{x:137.5,y:40},{x:92.2158589,y:80},{x:92.2158589,y:55.9003245},{x:46.7965867,y:55.9003245},{x:46.7965867,y:80},{x:88817842e-23,y:40.0053069},{x:46.7965867,y:0},{x:46.7965867,y:24.6624715},{x:92.2158589,y:24.6624715}]},scene:[],thumb:[{name:"polygon",points:[{x:19.8639344,y:8},{x:27.109397,y:16},{x:19.8639344,y:24},{x:19.8639344,y:19.1800649},{x:12.5968509,y:19.1800649},{x:12.5968509,y:24},{x:5.10939702,y:16.0010614},{x:12.5968509,y:8},{x:12.5968509,y:12.9324943},{x:19.8639344,y:12.9324943}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"circle",width:100,height:100,outline:{name:"ellipse",cx:50,cy:50,rx:50,ry:50},scene:[],thumb:[{name:"ellipse",cx:16,cy:16.5333333,rx:9,ry:9}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"collate",width:42,height:36,outline:{d:[["M",40.3837262,0],["C",40.6808145,0,40.9625216,.132096,41.1525116,.3604931],["C",41.478533,.7524209,41.4542938,1.3198118,41.1146853,1.6825771],["L",41.0232331,1.7687854],["L",20.9996243,18.0064637],["L",41.0232331,34.2312146],["C",41.2190021,34.3940632,41.3440192,34.6242958,41.3757431,34.8738407],["L",41.3837518,35],["C",41.3837518,35.5128358,40.997686,35.9355072,40.5003473,35.9932723],["L",40.3837262,36],["L",1.9253140000000002,36],["C",1.6282257999999992,36,1.3465187000000007,35.867904,1.1565287000000009,35.6395069],["C",.8305071999999996,35.2475791,.8547464999999992,34.6801882,1.1943549999999998,34.317423],["L",1.2858070999999995,34.2312146],["L",20.9996243,18.0064637],["L",1.2858070999999995,1.7687854],["C",1.0900382000000004,1.6059368,.9650210999999995,1.3757042,.9332972000000002,1.1261593],["L",.9252885000000006,1],["C",.9252885000000006,.4871642,1.3113542000000002,.0644928,1.8086929000000005,.0067277],["L",1.9253140000000002,0],["L",40.3837262,0],["Z"]]},scene:[],thumb:[{d:[["M",23.6671476,9],["C",23.787916,9,23.9022194,9.0545637,23.9781629,9.1484658],["C",24.1170814,9.3202349,24.0904508,9.5720969,23.9186817,9.7110154],["L",23.9186817,9.7110154],["L",16.142839,16],["L",23.9186817,22.2889846],["C",23.9938034,22.3497394,24.0437485,22.4350446,24.0607217,22.5285699],["L",24.0671476,22.6],["C",24.0671476,22.8209139,23.8880615,23,23.6671476,23],["L",23.6671476,23],["L",8.3328524,23],["C",8.212084,23,8.0977806,22.9454363,8.0218371,22.8515342],["C",7.8829186,22.6797651,7.9095492,22.4279031,8.0813183,22.2889846],["L",8.0813183,22.2889846],["L",15.856839,16],["L",8.0813183,9.7110154],["C",8.0061966,9.6502606,7.9562515,9.5649554,7.9392783,9.4714301],["L",7.9328524,9.4],["C",7.9328524,9.1790861,8.1119385,9,8.3328524,9],["L",8.3328524,9],["Z"]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.02,name:"NW"},{x:0,y:.98,name:"SW"},{x:1,y:.02,name:"NE"},{x:1,y:.98,name:"SE"}]},{name:"comment-2",width:113,height:100,outline:{d:[["M",18.75,0],["L",93.75,0],["C",104.105339,-0,112.5,8.3946609,112.5,18.75],["L",112.5,59.4444576],["C",112.5,69.7997966,104.105339,78.1944576,93.75,78.1944576],["L",53.1187263,78.1944576],["L",53.1187263,78.1944576],["L",21.9728275,100],["L",21.9728275,78.1916318],["L",18.75,78.1916318],["C",8.3946609,78.1916318,0,69.7969708,0,59.4416318],["L",0,18.75],["C",-0,8.3946609,8.3946609,0,18.75,0],["Z"]]},scene:[],thumb:[{d:[["M",10,9],["L",22,9],["C",23.6568542,9,25,10.3431458,25,12],["L",25,18.700459],["C",25,20.3573132,23.6568542,21.700459,22,21.700459],["L",15.4989962,21.700459],["L",15.4989962,21.700459],["L",10.5156524,25.2421473],["L",10.5156524,21.7],["L",10,21.7],["C",8.3431458,21.7,7,20.3568542,7,18.7],["L",7,12],["C",7,10.3431458,8.3431458,9,10,9],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"comment",width:76,height:60,outline:{d:[["M",1,49],["C",.4477153,49,0,48.5522847,0,48],["L",0,1],["C",-0,.4477153,.4477153,0,1,0],["L",75,0],["C",75.5522847,-0,76,.4477153,76,1],["L",76,48],["C",76,48.5522847,75.5522847,49,75,49],["L",45.6,49],["L",38,60],["L",30.4,49],["L",1,49],["Z"]]},scene:[],thumb:[{d:[["M",7,22],["C",6.4477153,22,6,21.5522847,6,21],["L",6,10],["C",6,9.4477153,6.4477153,9,7,9],["L",25,9],["C",25.5522847,9,26,9.4477153,26,10],["L",26,21],["C",26,21.5522847,25.5522847,22,25,22],["L",18,22],["L",16,25],["L",14,22],["L",7,22],["Z"]]}],padding:[0,10,10,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"connector",width:44,height:44,outline:{name:"ellipse",cx:22,cy:22,rx:22,ry:22},scene:[],thumb:[{name:"ellipse",cx:16,cy:16,rx:9,ry:9}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.145,y:.145,name:"NW"},{x:.145,y:.855,name:"SW"},{x:.855,y:.145,name:"NE"},{x:.855,y:.855,name:"SE"}]},{name:"data",width:124,height:60,outline:{d:[["M",17.1403103,0],["L",122.687657,0],["C",123.239942,-0,123.687657,.4477153,123.687657,1],["C",123.687657,1.0896438,123.675604,1.1788806,123.65182,1.2653118],["L",107.823852,58.7853118],["C",107.704434,59.2192873,107.309796,59.52,106.85969,59.52],["L",1.3123427,59.52],["C",.7600579,59.52,.3123427,59.0722847,.3123427,58.52],["C",.3123427,58.4303562,.3243965,58.3411194,.34818,58.2546882],["L",16.1761477,.7346882],["C",16.2955661,.3007127,16.6902043,-0,17.1403103,0],["Z"]]},scene:[],thumb:[{d:[["M",7.6068779,10],["L",27.4750629,10],["C",27.6959768,10,27.8750629,10.1790861,27.8750629,10.4],["C",27.8750629,10.4358575,27.8702414,10.4715522,27.860728,10.5061247],["L",24.7787871,21.7061247],["C",24.7310198,21.8797149,24.5731645,22,24.3931221,22],["L",4.5249371,22],["C",4.3040232,22,4.1249371,21.8209139,4.1249371,21.6],["C",4.1249371,21.5641425,4.1297586,21.5284478,4.139272,21.4938753],["L",7.2212129,10.2938753],["C",7.2689802,10.1202851,7.4268355,10,7.6068779,10],["Z"]]}],padding:[0,12,0,12],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:.095,y:.5,name:"W"},{x:.905,y:.5,name:"E"},{x:.23,y:.02,name:"NW"},{x:.015,y:.98,name:"SW"},{x:.985,y:.02,name:"NE"},{x:.77,y:.98,name:"SE"}]},{name:"database",width:70,height:80,outline:{d:[["M",35,0],["C",53.9753466,0,69.4238162,5.273994,69.9842524,11.8539517],["L",69.995311,11.8537712],["L",69.995311,12.022052],["L",70,12.2242015],["C",70,12.2917139,69.998433,12.3590985,69.995311,12.426351],["L",69.995311,67.977948],["C",69.6862333,74.6359505,54.1366666,80,35,80],["C",16.0547001,80,.6251167,74.7426951,.0185218,68.1772958],["L",.004689,67.977948],["L",0,11.8537712],["L",.0157476,11.8539517],["C",.5761838,5.273994,16.0246534,0,35,0],["Z"]]},scene:[{d:[["M",70,13],["C",70,19.0751322,54.3299662,24,35,24],["C",15.8633334,24,.3137667,19.1731371,.004689,13.1819051],["L",0,13]]}],thumb:[{d:[["M",16,7],["C",20.337222099999998,7,23.8683009,8.1866487,23.9964006,9.6671391],["L",23.9989282,9.6670985],["L",23.9989282,9.7049617],["L",24,9.750445299999999],["C",24,9.7656356,23.9996418,9.7807972,23.9989282,9.795929000000001],["L",23.9989282,22.2950383],["C",23.9282819,23.7930889,20.3740952,25,16,25],["C",11.6696457,25,8.1428838,23.8171064,8.0042336,22.3398916],["L",8.0010718,22.2950383],["L",8,9.6670985],["L",8.0035994,9.6671391],["C",8.1316991,8.1866487,11.6627779,7,16,7],["Z"]]},{d:[["M",24,10],["C",24,11.1045695,20.418278,12,16,12],["C",11.6259048,12,8.0717181,11.1223886,8.0010718,10.0330737],["L",8,10]]}],padding:[16,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:0,y:.15,name:"NW"},{x:0,y:.85,name:"SW"},{x:1,y:.15,name:"NE"},{x:1,y:.85,name:"SE"}]},{name:"decision",width:160,height:80,outline:{d:[["M",79.8944272,.4472136],["L",157.211146,39.1055728],["C",157.705124,39.3525621,157.905348,39.9532351,157.658359,40.4472136],["C",157.561596,40.640741,157.404673,40.7976635,157.211146,40.8944272],["L",79.8944272,79.5527864],["C",79.3313722,79.8343139,78.6686278,79.8343139,78.1055728,79.5527864],["L",.7888544,40.8944272],["C",.2948759000000001,40.6474379,.09465150000000011,40.0467649,.34164079999999997,39.5527864],["C",.4384045000000001,39.359259,.5953269999999999,39.2023365,.7888544,39.1055728],["L",78.1055728,.4472136],["C",78.6686278,.1656861,79.3313722,.1656861,79.8944272,.4472136],["Z"]]},scene:[],thumb:[{d:[["M",5.5303015,15.6625354],["L",15.7852498,9.1366592],["C",15.9162764,9.0532787,16.0837236,9.0532787,16.2147502,9.1366592],["L",26.4696985,15.6625354],["C",26.656075,15.7811387,26.7110162,16.0283736,26.5924129,16.2147502],["C",26.5609814,16.2641425,26.5190908,16.3060331,26.4696985,16.3374646],["L",16.2147502,22.8633408],["C",16.0837236,22.9467213,15.9162764,22.9467213,15.7852498,22.8633408],["L",5.5303015,16.3374646],["C",5.343925,16.2188613,5.2889839,15.9716264,5.4075871,15.7852498],["C",5.4390186,15.7358575,5.4809092,15.6939669,5.5303015,15.6625354],["Z"]]}],padding:[10,24,10,24],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"delay",width:120,height:60,outline:{d:[["M",1,0],["L",90,0],["C",106.568542,-0,120,13.4314575,120,30],["C",120,46.5685425,106.568542,60,90,60],["L",1,60],["C",.4477153,60,0,59.5522847,0,59],["L",0,1],["C",-0,.4477153,.4477153,0,1,0],["Z"]]},scene:[],thumb:[{d:[["M",6.4,11.0666667],["L",20,11.0666667],["C",23.3137085,11.0666667,26,13.7529582,26,17.0666667],["C",26,20.3803752,23.3137085,23.0666667,20,23.0666667],["L",6.4,23.0666667],["C",6.1790861,23.0666667,6,22.8875806,6,22.6666667],["L",6,11.4666667],["C",6,11.2457528,6.1790861,11.0666667,6.4,11.0666667],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:.02,y:.985,name:"SW"},{x:.81,y:0,name:"NE"},{x:.81,y:1,name:"SE"}]},{name:"diamond",width:100,height:100,outline:{d:[["M",50.5029462,.2083271],["L",99.7916729,49.4970538],["C",100.069442,49.7748233,100.069442,50.2251767,99.7916729,50.5029462],["L",50.5029462,99.7916729],["C",50.2251767,100.069442,49.7748233,100.069442,49.4970538,99.7916729],["L",.2083271,50.5029462],["C",-.0694424,50.2251767,-.0694424,49.7748233,.2083271,49.4970538],["L",49.4970538,.2083271],["C",49.7748233,-.0694424,50.2251767,-.0694424,50.5029462,.2083271],["Z"]]},scene:[],thumb:[{d:[["M",16.2852309,7.0928427],["L",24.9119336,15.7195454],["C",25.0681433,15.8757552,25.0681433,16.1290212,24.9119336,16.2852309],["L",16.2852309,24.9119336],["C",16.1290212,25.0681433,15.8757552,25.0681433,15.7195454,24.9119336],["L",7.0928427,16.2852309],["C",6.936633,16.1290212,6.936633,15.8757552,7.0928427,15.7195454],["L",15.7195454,7.0928427],["C",15.8757552,6.936633,16.1290212,6.936633,16.2852309,7.0928427],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"display",width:120,height:60,outline:{d:[["M",18.559242,0],["L",108.388294,0],["C",108.593661,-124e-7,108.794047,.0632157,108.962224,.18108],["C",116.320741,5.3381999,120,15.2778399,120,30],["C",120,43.9124351,116.326183,53.8383306,108.978548,59.7776865],["C",108.800609,59.9215337,108.578719,60,108.349908,60],["L",18.559242,60],["C",18.2079174,60,17.8823628,59.8156369,17.70166,59.5143473],["L",.3084873,30.5143473],["C",.1185966,30.1977386,.1185966,29.8022614,.3084873,29.4856527],["L",17.70166,.4856527],["C",17.8823628,.1843631,18.2079174,0,18.559242,0],["Z"]]},scene:[],thumb:[{d:[["M",8.7974767,10],["L",24.1863956,10],["L",24.1863956,10],["C",25.6811795,11.0207233,26.4285714,13.0207233,26.4285714,16],["C",26.4285714,18.8174994,25.6811795,20.8174994,24.1863956,22],["L",8.7974767,22],["C",8.6564465,22,8.525838,21.9257329,8.4537242,21.8045343],["L",5.1216988,16.2045343],["C",5.0467021,16.0784903,5.0467021,15.9215097,5.1216988,15.7954657],["L",8.4537242,10.1954657],["C",8.525838,10.0742671,8.6564465,10,8.7974767,10],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.2,y:.14,name:"NW"},{x:.2,y:.86,name:"SW"},{x:.92,y:.14,name:"NE"},{x:.92,y:.86,name:"SE"}]},{name:"document",width:120,height:72,outline:{d:[["M",1,0],["L",119,0],["C",119.552285,-0,120,.4477153,120,1],["L",120,63.2943312],["C",119.999975,63.8466024,119.552271,64.2943066,119,64.2943066],["C",118.874051,64.2943066,118.749236,64.2705132,118.63212,64.2241781],["C",108.562735,60.240377,99.0186463,58.2432881,89.9998549,58.2329113],["C",75.8605271,58.216643,73.9215376,58.9595768,59.9999032,65.0379103],["C",46.0782688,71.1162438,44.1653018,71.9832913,29.9999516,72],["C",20.7325008,72.010162,10.9291929,69.6914094,.590028,65.0437423],["C",.2309588,64.882365,-0,64.5253236,0,64.1316572],["L",0,1],["C",-0,.4477153,.4477153,0,1,0],["Z"]]},scene:[],thumb:[{d:[["M",6,10],["L",26,10],["L",26,23.0414063],["C",24.237687,22.2996937,22.5710122,21.9279131,20.9999758,21.9260644],["C",18.6434212,21.9232914,18.3202563,22.0499279,15.9999839,23.0860074],["C",13.6797115,24.122087,13.3608836,24.2698792,11,24.2726331],["C",9.4260668,24.274461,7.7594002,23.864052,6,23.0414063],["L",6,10],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:.9,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:0,y:.9,name:"SW"},{x:.98,y:.015,name:"NE"},{x:1,y:.9,name:"SE"}]},{name:"internal-storage",width:80,height:80,outline:{name:"rect",x:0,y:0,width:80,height:80,rx:0,ry:0},scene:[{d:[{name:"M",x:0,y:8},{name:"L",x:80,y:8}]},{d:[{name:"M",x:8,y:0},{name:"L",x:8,y:80}]}],thumb:[{name:"rect",x:8,y:8,width:17,height:17,rx:.4,ry:.4},{d:[{name:"M",x:8.5,y:12.5},{name:"L",x:24.5,y:12.5}]},{d:[{name:"M",x:12.5,y:8.5},{name:"L",x:12.5,y:24.5}]}],padding:[10,10,0,16],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:.02,y:.985,name:"SW"},{x:.98,y:.015,name:"NE"},{x:.98,y:.985,name:"SE"}]},{name:"loop-limit",width:120,height:60,outline:{d:[["M",17.5871195,0],["L",102.429999,0],["C",102.7204,-0,102.996458,.1262398,103.186409,.3459021],["L",119.75641,19.5077312],["C",119.913532,19.6894304,120,19.9216166,120,20.1618291],["L",120,59],["C",120,59.5522847,119.552285,60,119,60],["L",1,60],["C",.4477153,60,0,59.5522847,0,59],["L",0,20.1621158],["C",0,19.92173,.0865921,19.6893882,.2439196,19.5076371],["L",16.831039,.3455213],["C",17.0209853,.1260876,17.2968941,0,17.5871195,0],["Z"]]},scene:[],thumb:[{d:[["M",9.5170283,11.0666667],["L",22.4862374,11.0666667],["C",22.6043417,11.0666667,22.7164089,11.1188597,22.7924108,11.2092607],["L",25.9061734,14.9129485],["C",25.9667743,14.9850307,26,15.0761829,26,15.1703545],["L",26,22.6666667],["C",26,22.8875806,25.8209139,23.0666667,25.6,23.0666667],["L",6.4,23.0666667],["C",6.1790861,23.0666667,6,22.8875806,6,22.6666667],["L",6,15.1704681],["C",6,15.0762275,6.0332743,14.9850132,6.0939556,14.9129087],["L",9.210984,11.2091073],["C",9.286986,11.118798,9.3989942,11.0666667,9.5170283,11.0666667],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.1,y:.15,name:"NW"},{x:.02,y:.985,name:"SW"},{x:.9,y:.15,name:"NE"},{x:.98,y:.985,name:"SE"}]},{name:"manual-input",width:118,height:60,outline:{d:[["M",.8676336,15.6420323],["L",116.867634,.1512179],["C",117.415059,.0781139,117.918097,.4626272,117.991201,1.0100523],["C",117.99706,1.0539311,118,1.0981505,118,1.1424188],["L",118,59],["C",118,59.5522847,117.552285,60,117,60],["L",1,60],["C",.4477152,60,0,59.5522847,0,59],["L",0,16.6332332],["C",0,16.1321084,.3709182,15.7083644,.8676336,15.6420323],["Z"]]},scene:[],thumb:[{d:[["M",6.3471791,12.618128],["L",25.5471791,10.0603243],["C",25.7661584,10.0311521,25.9673249,10.1850212,25.9964971,10.4040005],["C",25.9988298,10.4215108,26,10.4391564,26,10.4568214],["L",26,21.2666667],["C",26,21.4875806,25.8209139,21.6666667,25.6,21.6666667],["L",6.4,21.6666667],["C",6.1790861,21.6666667,6,21.4875806,6,21.2666667],["L",6,13.0146251],["C",6,12.8141269,6.1484367,12.6446042,6.3471791,12.618128],["Z"]]}],padding:[16,10,0,10],anchors:[{x:.5,y:.195,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.985,name:"SW"},{x:.98,y:.015,name:"NE"},{x:.98,y:.985,name:"SE"}]},{name:"manual-loop",width:120,height:60,outline:{d:[["M",1.3143594,0],["L",118.682087,0],["C",119.234371,-0,119.682087,.4477153,119.682087,1],["C",119.682087,1.0910107,119.669662,1.1815953,119.645158,1.2692451],["L",103.43015,59.2692451],["C",103.309369,59.7012703,102.915669,60,102.467078,60],["L",17.3668015,60],["C",16.917245,60,16.5229467,59.7000072,16.4030326,59.2667387],["L",.3505905,1.2667387],["C",.2032748,.7344638,.5153458,.1835468,1.0476207,.0362311],["C",1.1344943,.0121874,1.2242199,-0,1.3143594,0],["Z"]]},scene:[],thumb:[{d:[["M",6.5216709,11.0666667],["L",25.4769568,11.0666667],["C",25.6978707,11.0666667,25.8769568,11.2457528,25.8769568,11.4666667],["C",25.8769568,11.5020572,25.8722601,11.5372913,25.8629896,11.5714461],["L",22.8230148,22.7714461],["C",22.7757173,22.9457017,22.6175425,23.0666667,22.4369821,23.0666667],["L",9.5311679,23.0666667],["C",9.3502305,23.0666667,9.1918239,22.9452058,9.1448706,22.7704667],["L",6.1353736,11.5704667],["C",6.0780465,11.3571206,6.2045248,11.1376966,6.4178708,11.0803694],["C",6.451721,11.0712737,6.4866199,11.0666667,6.5216709,11.0666667],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:.1,y:.5,name:"W"},{x:.9,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:.22,y:.985,name:"SW"},{x:.98,y:.015,name:"NE"},{x:.78,y:.985,name:"SE"}]},{name:"merge",width:50,height:36,outline:{d:[["M",48.9094474,1.5703958],["L",25.82137,34.8172272],["C",25.5063491,35.2708574,24.883234299999998,35.3832223,24.4296042,35.0682014],["C",24.3316502,35.0001778,24.246653600000002,34.9151812,24.17863,34.8172272],["L",1.0905526000000005,1.5703958],["C",.7755317000000002,1.1167657,.8878967000000006,.4936509,1.3415268000000005,.17863],["C",1.5090014000000007,.0623282,1.7080259000000009,0,1.9119226000000005,0],["L",48.0880774,0],["C",48.6403621,0,49.0880774,.4477153,49.0880774,1],["C",49.0880774,1.2038967,49.0257492,1.4029212,48.9094474,1.5703958],["Z"]]},scene:[],thumb:[{d:[["M",25.5482177,9.6324953],["L",16.3254934,22.5443093],["C",16.1970898,22.7240743,15.9472698,22.765711,15.7675047,22.6373074],["C",15.7315865,22.6116515,15.7001625,22.5802275,15.6745066,22.5443093],["L",6.4517823,9.6324953],["C",6.3233787,9.4527302,6.3650154,9.2029102,6.5447805,9.0745066],["C",6.6126207,9.0260493,6.6939065,9,6.7772757,9],["L",25.2227243,9],["C",25.4436382,9,25.6227243,9.1790861,25.6227243,9.4],["C",25.6227243,9.4833692,25.596675,9.564655,25.5482177,9.6324953],["Z"]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:0,y:0,name:"NW"},{x:0,y:1,name:"SW"},{x:1,y:0,name:"NE"},{x:1,y:1,name:"SE"}]},{name:"multi-document",width:120,height:80,outline:{d:[["M",119,-0],["C",119.552285,-0,120,.4477153,120,1],["L",120,57.6634711],["C",120.00004,58.2157781,119.552307,58.6635113,119,58.6635113],["C",118.846121,58.6635113,118.694318,58.6280008,118.556406,58.5597438],["C",117.079303,57.8286782,115.893834,57.3066398,115,56.9936286],["L",114.744,56.868],["L",114.744526,63.1694166],["C",114.744553,63.7217167,114.296826,64.1694445,113.744526,64.1694445],["C",113.610972,64.1694445,113.478771,64.1426929,113.355724,64.0907684],["C",111.834645,63.4488877,110.620494,62.9604303,109.71327,62.6253962],["L",109.714286,71.1461039],["C",109.714249,71.6983687,109.26655,72.1460677,108.714286,72.1460677],["C",108.59377,72.1460677,108.474247,72.1242823,108.361482,72.0817624],["C",98.4971172,68.3622546,89.1471649,66.4976545,80.3116246,66.4879622],["C",66.4538962,66.4727606,64.5535237,67.1669765,50.9091531,72.8467226],["C",37.2647825,78.5264687,35.3899142,79.3366596,21.5066816,79.351889],["C",12.4628087,79.3615937,5.4112062,77.2136321,.351874,72.9080041],["C",.1286374,72.7179927,0,72.4396044,0,72.1464509],["L",0,11.7804604],["C",0,11.2281757,.4477153,10.7804604,1,10.7804604],["L",5.255,10.78],["L",5.2554745,6.3902302],["C",5.2554745,5.8379455,5.7031897,5.3902302,6.2554745,5.3902302],["L",10.51,5.39],["L",10.5109489,1],["C",10.5109489,.4477153,10.9586642,-0,11.5109489,-0],["L",119,-0],["Z"]]},scene:[{d:[["M",10,5.3902302],["L",113.744526,5.3902302],["C",114.29681,5.3902302,114.744526,5.8379455,114.744526,6.3902302],["L",114.744526,61.6827625],["L",114.744526,61.6827625]]},{d:[["M",3,10.7804604],["L",108.714286,10.7804604],["C",109.26657,10.7804604,109.714286,11.2281757,109.714286,11.7804604],["L",109.714286,69.602221],["L",109.714286,69.602221]]}],thumb:[{d:[["M",8.4444444,10.4296499],["L",8.4444444,8],["L",28.4444444,8],["L",28.4444444,19.5606936],["C",28.0673004,19.4077004,26.2625497,18.3360173,25.8924529,18.2092979]]},{d:[["M",6.2222222,13.090719],["L",6.2222222,10.7555556],["L",25.4444444,10.7555556],["L",25.4444444,21.8666667],["C",25.0819671,21.7196232,23.3557041,21.1217914,23,21]]},{d:[["M",4.3333333,13.5111111],["L",22.3333333,13.5111111],["L",22.3333333,23.8011738],["C",20.6331063,23.1515551,19.0251483,22.8259361,17.5094592,22.824317],["C",15.2359257,22.8218883,14.9241458,22.9328011,12.6856163,23.8402371],["C",10.4470867,24.7476731,10.1394911,24.8771148,7.8617733,24.8795322],["C",6.3432947,24.8811295,5.1671481,24.5216767,4.3333333,23.8011738],["L",4.3333333,13.5111111],["Z"]]}],padding:[16,10,16,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:.88,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.08,y:.1,name:"NW"},{x:0,y:.91,name:"SW"},{x:.98,y:.02,name:"NE"},{x:.885,y:.91,name:"SE"}]},{name:"off-page",width:38,height:38,outline:{d:[["M",.3999999999999986,0],["L",37.6,0],["C",37.8209139,0,38,.1790861,38,.4],["L",38,19.0323398],["C",38,19.1391572,37.9572763,19.2415374,37.8813478,19.3166695],["L",19.2813478,37.7216028],["C",19.125486199999997,37.8758298,18.874513800000003,37.8758298,18.7186522,37.7216028],["L",.11865219999999965,19.3166695],["C",.04272369999999981,19.2415374,0,19.1391572,0,19.0323398],["L",0,.4],["C",0,.1790861,.17908609999999925,0,.3999999999999986,0],["Z"]]},scene:[],thumb:[{d:[["M",8.4,8],["L",23.6,8],["C",23.8209139,8,24,8.1790861,24,8.4],["L",24,15.9169777],["C",24,16.0237952,23.9572763,16.1261753,23.8813478,16.2013075],["L",16.2813478,23.7216028],["C",16.1254862,23.8758298,15.8745138,23.8758298,15.7186522,23.7216028],["L",8.1186522,16.2013075],["C",8.0427237,16.1261753,8,16.0237952,8,15.9169777],["L",8,8.4],["C",8,8.1790861,8.1790861,8,8.4,8],["Z"]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:0,y:0,name:"NW"},{x:1,y:0,name:"NE"}]},{name:"or",width:44,height:44,outline:{name:"ellipse",cx:22,cy:22,rx:22,ry:22},scene:[{d:[{name:"M",x:0,y:21.5},{name:"L",x:44,y:21.5}]},{d:[{name:"M",x:21.5,y:0},{name:"L",x:21.5,y:44}]}],thumb:[{name:"ellipse",cx:16,cy:17,rx:9,ry:9},{d:[["M",7,17],["L",25,17],["M",16,8],["L",16,26]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.145,y:.145,name:"NW"},{x:.145,y:.855,name:"SW"},{x:.855,y:.145,name:"NE"},{x:.855,y:.855,name:"SE"}]},{name:"parallelogram",width:137,height:87,outline:{d:[["M",38.1579057,0],["L",135.980025,0],["C",136.53231,-0,136.980025,.4477153,136.980025,1],["C",136.980025,1.136127,136.952232,1.2708207,136.898349,1.3958294],["L",100.260418,86.3958293],["C",100.102374,86.7624912,99.7413671,87,99.3420943,87],["L",1.5199747,87],["C",.9676899,87,.5199747,86.5522847,.5199747,86],["C",.5199747,85.863873,.5477675,85.7291793,.6016506,85.6041707],["L",37.2395816,.6041707],["C",37.3976255,.2375088,37.7586329,-0,38.1579057,0],["Z"]]},scene:[],thumb:[{d:[["M",11.2637585,9],["L",26.3933844,9],["C",26.6142983,9,26.7933844,9.1790861,26.7933844,9.4],["C",26.7933844,9.4541707,26.7823813,9.507777,26.7610424,9.5575677],["L",21.1038995,22.7575677],["C",21.040868,22.9046413,20.8962528,23,20.7362415,23],["L",5.6066156,23],["C",5.3857017,23,5.2066156,22.8209139,5.2066156,22.6],["C",5.2066156,22.5458293,5.2176187,22.492223,5.2389576,22.4424323],["L",10.8961005,9.2424323],["C",10.959132,9.0953587,11.1037472,9,11.2637585,9],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"polygon",width:96,height:91,outline:{name:"polygon",points:[{x:48,y:0},{x:95.5528258,y:34.5491503},{x:77.3892626,y:90.4508497},{x:18.6107374,y:90.4508497},{x:.44717419000000014,y:34.5491503}]},scene:[],thumb:[{name:"polygon",points:[{x:16,y:7},{x:24.5595086,y:13.2188471},{x:21.2900673,y:23.2811529},{x:10.7099327,y:23.2811529},{x:7.44049135,y:13.2188471}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"preparation",width:120,height:60,outline:{d:[["M",19.9840694,0],["L",99.6873184,0],["C",100.023525,-0,100.33723,.1689467,100.522259,.4496594],["L",119.639798,29.4535248],["C",119.858585,29.7854538,119.859975,30.2154564,119.64334,30.5487937],["L",100.798808,59.5449283],["C",100.614349,59.8287556,100.298826,60,99.960325,60],["L",20.1720063,60],["C",19.83462,60,19.5199796,59.8298739,19.3352402,59.5475604],["L",.3565669,30.5448953],["C",.1398092,30.2136523,.1388534,29.7857253,.3541294,29.4535175],["L",19.1448658,.4561827],["C",19.3292042,.1717169,19.6450984,0,19.9840694,0],["Z"]]},scene:[],thumb:[{d:[["M",9.1753609,10],["L",22.7586938,10],["C",22.8919773,10,23.016505,10.0663866,23.0907953,10.1770457],["L",26.8513724,15.7786117],["C",26.9413749,15.912675,26.9419451,16.0877051,26.8528179,16.2223519],["L",23.1470284,21.8207859],["C",23.072951,21.9326965,22.9476882,22,22.8134814,22],["L",9.2130739,22],["C",9.0793157,22,8.9544098,21.9331428,8.8802274,21.8218405],["L",5.1471359,16.2207607],["C",5.057961,16.0869638,5.0575691,15.9127763,5.1461411,15.7785795],["L",8.8415196,10.1796593],["C",8.9155518,10.067492,9.0409649,10,9.1753609,10],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.26,y:.02,name:"NW"},{x:.26,y:.98,name:"SW"},{x:.74,y:.02,name:"NE"},{x:.74,y:.98,name:"SE"}]},{name:"process",width:120,height:60,outline:{name:"rect",x:0,y:0,width:120,height:60,rx:1,ry:1},scene:[],thumb:[{d:[["M",6.4,10.5],["L",25.6,10.5],["C",25.8209139,10.5,26,10.6790861,26,10.9],["L",26,22.1],["C",26,22.3209139,25.8209139,22.5,25.6,22.5],["L",6.4,22.5],["C",6.1790861,22.5,6,22.3209139,6,22.1],["L",6,10.9],["C",6,10.6790861,6.1790861,10.5,6.4,10.5],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"rect",width:100,height:100,outline:{name:"polygon",points:[{x:0,y:0},{x:100,y:0},{x:100,y:100},{x:0,y:100}]},scene:[],thumb:[{d:[["M",8.4,8],["L",23.6,8],["C",23.8209139,8,24,8.1790861,24,8.4],["L",24,23.6],["C",24,23.8209139,23.8209139,24,23.6,24],["L",8.4,24],["C",8.1790861,24,8,23.8209139,8,23.6],["L",8,8.4],["C",8,8.1790861,8.1790861,8,8.4,8],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"rounded-rect",width:100,height:100,outline:{path:function(e,t){var n=e/2,r=t/2,a=n<8?n:8,o=r<8?r:8;return[["M",+a+0,0],["l",e-2*a,0],["a",a,o,0,0,1,a,o],["l",0,t-2*o],["a",a,o,0,0,1,-a,o],["l",2*a-e,0],["a",a,o,0,0,1,-a,-o],["l",0,2*o-t],["a",a,o,0,0,1,a,-o],["z"]]}},scene:[],thumb:[{d:[["M",11,8],["L",21,8],["C",22.6568542,8,24,9.3431458,24,11],["L",24,21],["C",24,22.6568542,22.6568542,24,21,24],["L",11,24],["C",9.3431458,24,8,22.6568542,8,21],["L",8,11],["C",8,9.3431458,9.3431458,8,11,8],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"sort",width:44,height:44,outline:{d:[["M",22.707552999999997,.7084468],["L",43.2664758,21.2933397],["C",43.6564052,21.6837616,43.6564052,22.3162384,43.2664758,22.7066603],["L",22.707552999999997,43.2915532],["C",22.3172753,43.682324,21.6841104,43.6827236,21.293339699999997,43.2924459],["C",21.2930419,43.2921485,21.292744399999997,43.291851,21.292447000000003,43.2915532],["L",.7335241999999997,22.7066603],["C",.3435948,22.3162384,.3435948,21.6837616,.7335241999999997,21.2933397],["L",21.292447000000003,.7084468],["C",21.6827247,.317676,22.3158896,.3172764,22.706660300000003,.7075541],["C",22.7069581,.7078515,22.707255600000003,.708149,22.707552999999997,.7084468],["Z"]]},scene:[{d:[{name:"M",x:.1242938,y:22},{name:"L",x:43.8757062,y:22}]}],thumb:[{d:[["M",16.2830212,7.2833787],["L",24.706338,15.7173359],["C",24.8623098,15.8735046,24.8623098,16.1264954,24.706338,16.2826641],["L",16.2830212,24.7166213],["C",16.1269101,24.8729296,15.8736442,24.8730894,15.7173359,24.7169784],["C",15.7172168,24.7168594,15.7170978,24.7167404,15.7169788,24.7166213],["L",7.293662,16.2826641],["C",7.1376902,16.1264954,7.1376902,15.8735046,7.293662,15.7173359],["L",15.7169788,7.2833787],["C",15.8730899,7.1270704,16.1263558,7.1269106,16.2826641,7.2830216],["C",16.2827832,7.2831406,16.2829022,7.2832596,16.2830212,7.2833787],["Z"],["M",7.3175141,15.7333333],["L",25.2158192,15.7333333]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"star",width:96,height:91,outline:{name:"polygon",points:[{x:48,y:75},{x:18.6107374,y:90.4508497},{x:24.2235871,y:57.7254249},{x:.44717419000000014,y:34.5491503},{x:33.3053687,y:29.7745751},{x:48,y:0},{x:62.6946313,y:29.7745751},{x:95.5528258,y:34.5491503},{x:71.7764129,y:57.7254249},{x:77.3892626,y:90.4508497}]},scene:[],thumb:[{name:"polygon",points:[{x:16,y:21},{x:10.1221475,y:24.0901699},{x:11.2447174,y:17.545085},{x:6.48943484,y:12.9098301},{x:13.0610737,y:11.954915},{x:16,y:6},{x:18.9389263,y:11.954915},{x:25.5105652,y:12.9098301},{x:20.7552826,y:17.545085},{x:21.8778525,y:24.0901699}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"start-end",width:120,height:60,outline:{path:function(e,t){var n=e/2,r=t/2,a=Math.min(n,r);return[["M",+a+0,0],["l",e-2*a,0],["a",a,a,0,0,1,a,a],["l",0,t-2*a],["a",a,a,0,0,1,-a,a],["l",2*a-e,0],["a",a,a,0,0,1,-a,-a],["l",0,2*a-t],["a",a,a,0,0,1,a,-a],["z"]]}},scene:[],thumb:[{d:[["M",11,10],["L",21,10],["C",24.3137085,10,27,12.6862915,27,16],["C",27,19.3137085,24.3137085,22,21,22],["L",11,22],["C",7.6862915,22,5,19.3137085,5,16],["C",5,12.6862915,7.6862915,10,11,10],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.11,y:.11,name:"NW"},{x:.11,y:.89,name:"SW"},{x:.89,y:.11,name:"NE"},{x:.89,y:.89,name:"SE"}]},{name:"stored-data",width:120,height:60,outline:{d:[["M",13.7777709,0],["L",120,0],["C",111.115006,4.7754794,106.672509,14.7754794,106.672509,30],["C",106.672509,44.2961128,111.115006,54.2961128,120,60],["L",13.7777709,60],["C",4.2600422,53.6223342,-.3265282,43.6223342,.0180598,30],["C",.4106176,14.4813071,4.997188,4.4813072,13.7777709,0],["Z"]]},scene:[],thumb:[{d:[["M",7.7592332,10],["L",26.7592332,10],["C",24.3123052,10.9550959,23.0888412,12.9550959,23.0888412,16],["C",23.0888412,18.8592226,24.3123052,20.8592226,26.7592332,22],["L",7.7592332,22],["C",5.853146,20.7244668,4.9346072,18.7244668,5.0036168,16],["C",5.0822332,12.8962614,6.000772,10.8962614,7.7592332,10],["Z"]]}],padding:[0,20,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:.93,y:.5,name:"E"},{x:.1,y:0,name:"NW"},{x:.1,y:1,name:"SW"},{x:.995,y:.01,name:"NE"},{x:.995,y:.99,name:"SE"}]},{name:"subroutine",width:120,height:60,outline:{name:"rect",x:0,y:0,width:120,height:60,rx:1,ry:1},scene:[{d:[{name:"M",x:8,y:-0},{name:"L",x:8,y:60}]},{d:[{name:"M",x:112,y:-0},{name:"L",x:112,y:60}]}],thumb:[{d:[["M",6.4,10],["L",25.6,10],["C",25.8209139,10,26,10.1790861,26,10.4],["L",26,21.6],["C",26,21.8209139,25.8209139,22,25.6,22],["L",6.4,22],["C",6.1790861,22,6,21.8209139,6,21.6],["L",6,10.4],["C",6,10.1790861,6.1790861,10,6.4,10],["Z"],["M",10,10],["L",10,22],["M",22,10],["L",22,22]]}],padding:[0,20,0,20],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:.02,y:.985,name:"SW"},{x:.98,y:.015,name:"NE"},{x:.98,y:.985,name:"SE"}]},{name:"summing-junction",width:44,height:44,outline:{name:"ellipse",cx:22,cy:22,rx:22,ry:22},scene:[{d:[["M",6.44365,6.44365],["l",31.1127,31.1127],["m",-31.1127,0],["l",31.1127,-31.1127]]}],thumb:[{name:"ellipse",cx:16,cy:17,rx:9,ry:9},{d:[["M",9.636,10.636],["l",12.727922,12.727922],["m",0,-12.727922],["l",-12.727922,12.727922]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.145,y:.145,name:"NW"},{x:.145,y:.855,name:"SW"},{x:.855,y:.145,name:"NE"},{x:.855,y:.855,name:"SE"}]},{name:"triangle",width:100,height:87,outline:{name:"polygon",points:[{x:50,y:0},{x:100,y:87},{x:-141931921e-23,y:87}]},scene:[],thumb:[{name:"polygon",points:[{x:16,y:8},{x:25,y:24},{x:7,y:24}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]}];function hl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ml(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hl(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gl=function(e){b()(n,Cc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),(e=t.call(this,ml({default:{stencils:pl,shape:"process",stroke:{color:"#595959",width:2},fill:{color:"#ffffff"}}},r))).isGeometry=!0,e}return v()(n,[{key:"render",value:function(){T()(_()(n.prototype),"render",this).call(this);var e=this.model;e.width||(e.width=this.width),e.height||(e.height=this.height)}},{key:"getOuterWidth",value:function(){return this.width}}]),n}();c()(gl,"className","Geometry");var vl=Xn,yl=function(e){b()(n,bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).eventHelper=new Ra,r}return v()(n,[{key:"render",value:function(){var e=this.cell.graphicGroup,t=new vl;e.add(t),this.element=t,this.bindEvent()}},{key:"bindEvent",value:function(){var e=this,t=this.eventHelper,n=this.element;t.bind(n,"mouseenter",(function(){e.hover=!0,e.updateState()})),t.bind(n,"mouseleave",(function(){e.hover=!1,e.updateState()}))}},{key:"getClassNames",value:function(){return this.classNames.join(" ")}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=e.width,r=e.height;e.isCacheStale("width","height")&&t.update({d:Sn(0,0,n,r),"stroke-width":1,fill:"rgba(0, 0, 0, 0)"})}},{key:"updateState",value:function(){var e=this.cell,t=this.element,n=this.hover,r=e.diagram,a=e.state,o=a.selected,i=a.actived,c=r.signal;return o?t.update({stroke:"rgba(9, 109, 217)"}):i||n&&!c.cellDragStart?t.update({stroke:"rgba(9, 109, 217, 0.4)"}):t.update({stroke:"none"})}},{key:"destroy",value:function(){this.element.destroy(),this.eventHelper.destroy()}}]),n}();var bl=function(e){b()(n,Oi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),r=Object.assign({default:{fill:"rgba(2, 2, 2, 0.3)",x:0,y:0,width:1,height:1}},r),e=t.call(this,r),Object.assign(P()(e),d()(r.default)),e.isGroup=!0,e.Subcells=[yl],e.subcells=e.Subcells.map((function(t){return new t(P()(e))})),e.render(),e}return v()(n,[{key:"render",value:function(){var e=this.model;this.subcells.forEach((function(e){return e.render()})),this.updateModel(e)}},{key:"updateState",value:function(){this.subcells.forEach((function(e){e.updateState()}))}},{key:"_hasEntity",value:function(){var e=!1;return this.deepEach((function(t){if(!t.isGroup)return e=!0,!1})),e}},{key:"_drawInner",value:function(){var e,t,n,r,a=this.graphicGroup,o=this.getChildren();e=1/0,t=1/0,n=-1/0,r=-1/0,this.show(),o.forEach((function(a){var o;o=a.isGroup?a.getBBox():a.getFullBBox(),e=Math.min(e,o.minX),t=Math.min(t,o.minY),n=Math.max(n,o.maxX),r=Math.max(r,o.maxY)}));var i=[1,0,0,0,1,0,e,t,1];this.x=e,this.y=t,this.width=n-e,this.height=r-t,this.matrix=i,this.isCacheStale("x","y","width","height")&&(this.subcells.forEach((function(e){return e.draw()})),a.update({matrix:i})),this.cache.x=e,this.cache.y=t,this.cache.width=n-e,this.cache.height=r-t}},{key:"draw",value:function(){var e=this.diagram.interaction;return this._hasEntity()&&"edit"===e.currentMode?this._drawInner():this.hide()}}]),n}();c()(bl,"className","Group");var kl=pn,wl=Xn,xl=function(){function e(t){m()(this,e),this.diagram=t;var n=new kl;t.frontRootGroup.add(n),Object.assign(this,{style:{stroke:""},tolerance:5,bleed:20,toAlignPoints:[],refLines:[],showLine:!0,preventAlignX:!1,preventAlignY:!1,refLinesGroup:n})}return v()(e,[{key:"_getPointsByBox",value:function(e){var t={x:e.maxX,y:e.minY,weight:0,box:e};return[{x:e.minX,y:e.maxY,weight:0,box:e},t,{x:(e.minX+e.maxX)/2,y:(e.minY+e.maxY)/2,weight:1,box:e}]}},{key:"_getPointsByPoint",value:function(e){return[e]}},{key:"_getPointsByCell",value:function(e){var t=e.getBBox();return this._getPointsByBox(t)}},{key:"drawRefLines",value:function(){var e=this.refLines,t=this.refLinesGroup;t.clear(),e.forEach((function(e){var n=e.x1,r=e.y1,a=e.x2,o=e.y2;t.add(new wl({d:"M".concat(n,",").concat(r," L").concat(a,",").concat(o),stroke:"#FF4E50"}))}))}},{key:"clear",value:function(){this.refLinesGroup.clear()}},{key:"updateToAlginPoints",value:function(e){var t=this,n=this.diagram,r=n.paper,a=n.viewport,o=n.groupManager.getCells().filter((function(t){return!e||e.stem!==t.stem&&"line"!==t.model.type})),i=[];if(o.forEach((function(e){i=i.concat(t._getPointsByCell(e))})),i=i.filter((function(e){return a.isInnerCanvasPoint([e.x,e.y])})),r.visible){var c=r.getBBox();i=i.concat(this._getPointsByBox({minX:c.left,minY:c.top,maxX:c.right,maxY:c.bottom}))}this.toAlignPoints=i}},{key:"alignByPoint",value:function(e){return this._align("Point",e)}},{key:"alignByBox",value:function(e){return this._align("Box",e)}},{key:"_align",value:function(e,t){var n=this,r=this.bleed,a=this.showLine,o=this.toAlignPoints,i=this.diagram,c=this.preventAlignX,l=this.preventAlignY,s={dx:0,dy:0},u=this.tolerance/i.viewport.zoom;if(0===o.length)return s;var d=this["_getPointsBy"+e](t),f=[];return this.refLines=[],d.forEach((function(e){f=f.concat(o.map((function(t){var n=t.x-e.x,r=t.y-e.y;return{from:e,to:t,weight:e.weight+t.weight,dx:n,dy:r,hDis:Math.abs(n),vDis:Math.abs(r)}})))})),c||(f.sort((function(e,t){return e.hDis-t.hDis})),f.filter((function(e){return e.dx===f[0].dx})).forEach((function(e){e.hDis<u&&(s.dx=e.dx,n.refLines.push({x1:e.to.x,x2:e.to.x,y1:Math.min(e.to.box.minY,e.from.box.minY)-r,y2:Math.max(e.to.box.maxY,e.from.box.maxY)+r}))}))),l||(f.sort((function(e,t){return e.vDis-t.vDis})),f.filter((function(e){return e.dy===f[0].dy})).forEach((function(e){e.vDis<u&&(s.dy=e.dy,n.refLines.push({x1:Math.min(e.to.box.minX,e.from.box.minX)-r,x2:Math.max(e.to.box.maxX,e.from.box.maxX)+r,y1:e.to.y,y2:e.to.y}))}))),a&&this.drawRefLines(),s}},{key:"reset",value:function(){this.clear(),this.preventAlignX=!1,this.preventAlignY=!1}},{key:"destroy",value:function(){this.diagram=void 0}}]),e}();c()(xl,"className","Align");var _l=function(){function e(){m()(this,e),this.colors=[["#000000","#262626","#595959","#8C8C8C","#BFBFBF","#D9D9D9","#E9E9E9","#F5F5F5","#FAFAFA","#FFFFFF"],["#69B1E4","#E482D4","#77C386","#E48484","#A287E1","#DFB85D","#6EC4C4","#C28976","#6F81DB","#B1C774"],["#E6F4FC","#FAEDF6","#E9F7E9","#FCEFED","#EFE8FA","#FCF6E1","#E4F7F5","#F7EDE6","#E8EEFC","#F7FAE6"],["#C4E4F5","#F2D0E8","#CEEBD2","#FBD3D0","#DBCEF5","#F7E9BC","#C0EBE5","#EBD5CA","#C2CDF0","#E5EDCA"],["#91CAED","#EDA6D9","#9DD1A6","#EFACA9","#C0ABEB","#EBD28D","#9AD6D4","#D6AC9A","#91A2E3","#D0E09D"],["#5493C7","#BA5FA6","#579C67","#BD6468","#8169BF","#B88F44","#509FA1","#9C6657","#5461B8","#8CA357"],["#234870","#6B2D62","#244F31","#703039","#392E6E","#6B4C1D","#214D52","#4F2B24","#262A69","#415222"]]}return v()(e,[{key:"_map",value:function(){for(var e={},t=this.colors,n=0,r=t.length;n<r;n++)for(var a=0,o=t[n].length;a<o;a++)e[t[n][a]]={y:n,x:a};return e}},{key:"getStroke",value:function(e){var t=this._map[e];return t&&(2===t.y||3===t.y&&t.x>2&&t.x<5)?this.colors[4][t.x]:e}},{key:"getColors",value:function(){return this.colors}},{key:"destroy",value:function(){this.colors=void 0}}]),e}();function El(e,t){var n=[],r={};e.forEach((function(e){Ue(e,(function(e){var a=Object(I.a)();r[e.id]=a,t[a]=t[e.id],e.id=a,"line"!==e.type&&"edge"!==e.type||n.push(e)}))})),n.forEach((function(e){var n=Object(I.a)();t[n]=t[e.id],e.id=n,e.source&&e.source.id&&r[e.source.id]&&(e.source.id=r[e.source.id]),e.target&&e.target.id&&r[e.target.id]&&(e.target.id=r[e.target.id])}))}function Cl(e){var t=1/0,n=1/0,r=-1/0,a=-1/0;return e.forEach((function(e){var o,i,c,l;if("edge"===e.type){var s=[];e.source&&!e.source.id&&e.source.connection&&s.push(e.source.connection),e.target&&!e.target.id&&e.target.connection&&s.push(e.target.connection);var u=s.map((function(e){return e[0]})),d=s.map((function(e){return e[1]}));o=Math.min.apply(Math,z()(u)),i=Math.min.apply(Math,z()(d)),c=Math.max.apply(Math,z()(u)),l=Math.max.apply(Math,z()(d))}else o=e.x,i=e.y,c=e.x+(e.width||0),l=e.y+(e.height||0);o<t&&(t=o),i<n&&(n=i),c>r&&(r=c),l>a&&(a=l)})),{minX:t,minY:n,maxX:r,maxY:a}}function Ol(e,t,n){if(e&&!e.id){var r=e.connection;e.connection=[r[0]+t,r[1]+n]}}function Sl(e,t,n){"edge"===e.type?(Ol(e.source,t,n),Ol(e.target,t,n)):(e.x=(e.x||0)+t,e.y=(e.y||0)+n)}c()(_l,"className","Palette");var Rl=function(e){b()(n,wo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).caches={},r}return v()(n,[{key:"clone",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.diagram,a=this.caches,o=5;e.forEach((function(e){var n=r.find(e.id)?1:0;a[e.id]||(a[e.id]=[]),(t=a[e.id]).forEach((function(){n++})),Sl(e,o*n,o*n),t.push(e.id)}));var i=Cl(e);if(!gt(i,r.viewport.viewportCanvasBox)){var c=r.viewport.getCenter(),l=c[0]-(i.minX+i.maxX)/2,s=c[1]-(i.minY+i.maxY)/2;e.forEach((function(e){Sl(e,l,s)}))}return El(e,n),e}}]),n}(),jl=function(){function e(t){m()(this,e),this.diagram=t,this.group=null}return v()(e,[{key:"getStemsByZIndex",value:function(){var e,t=this.diagram,n=this.group;return(e=n?n.getChildren():t.getCells().filter((function(e){return e.isRoot}))).sort((function(e,t){return e.getZIndex()-t.getZIndex()})),e}},{key:"_getGroupCells",value:function(e){var t=[];return e.deepEachWithoutSelf((function(e){if(e.isGroup)return t.push(e),!1;t.push(e)})),t}},{key:"getCells",value:function(){var e=this.diagram,t=this.group;return t?this._getGroupCells(t):e.getCells().filter((function(e){return e.isRoot})).reduce((function(e,t){return t.isStem&&!t.isGroup?t.deepEach((function(t){e.push(t)})):e.push(t),e}),[])}},{key:"enter",value:function(e,t){this.group&&this.exit();var n,r=this.diagram,a=r.getCells(),o=e.getChildren();return o.forEach((function(e){if(e.isStem&&!e.isGroup)e.deepEach((function(e){if(e.isPointInShape(t))return n=e,!1}));else if(e.isPointInShape(t))return n=e,!1})),n?(a.forEach((function(e){o.includes(e.stem)?e.capture(!0):e.capture(!1)})),e.state.actived=!0,this.group=e,r.emit("afteractivedgroupchange"),n):null}},{key:"exit",value:function(){var e=this.group,t=this.diagram;if(e){for(var n=t.getCells(),r=e;r;)r.isGroup&&r.show(),r=r.parent;n.forEach((function(e){return e.capture(!0)})),e.state.actived=!1}this.group=null,t.emit("afteractivedgroupchange")}},{key:"destroy",value:function(){this.destroyed=!0,this.group=null}}]),e}();function Pl(e){var t=e.reduce((function(e,t){var n=t.getBBox(),r=[n.x,n.y],a=[[r[0],r[1]],[r[0]+n.width,r[1]+n.height]];return e.push.apply(e,a),e}),[]),n=t.reduce((function(e,t){return t[0]>e?t[0]:e}),t[0][0]),r=t.reduce((function(e,t){return t[0]<e?t[0]:e}),t[0][0]),a=t.reduce((function(e,t){return t[1]>e?t[1]:e}),t[0][1]);return{minX:r,minY:t.reduce((function(e,t){return t[1]<e?t[1]:e}),t[0][1]),maxX:n,maxY:a}}c()(jl,"className","GroupManager");var Al=Xn,Tl=pn,Dl=function(){function e(t){m()(this,e),this.diagram=t,this.eventHelper=new Ra,this.create()}return v()(e,[{key:"create",value:function(){var e=new Tl,t=new Al({stroke:"rgba(9, 109, 217, 0.4)","stroke-width":1,fill:"none"});e.css({"pointer-events":"none"}),e.add(t),this.group=e,this.shape=t}},{key:"bind",value:function(){var e=this,t=this.diagram,n=this.eventHelper;n.unbind(),n.bind(t,"afterchange",(function(t){var n=t.action;"update"!==n&&"delete"!==n||e.update()}))}},{key:"begin",value:function(){this.end();var e=this.group;this.diagram.frontRootGroup.add(e),this.update(),this.bind()}},{key:"end",value:function(){this.destroyed||(this.group.remove(),this.eventHelper.unbind())}},{key:"update",value:function(){var e=this.shape,t=this.diagram.selector.selections.filter((function(e){return e.isRoot}));if(t.length>0){var n=Pl(t),r=n.minX,a=n.minY,o=n.maxX,i=n.maxY;e.update({d:Sn(r,a,o-r,i-a)})}}},{key:"destroy",value:function(){this.eventHelper.destroy(),this.group.destroy(),this.diagram=void 0,this.group=void 0,this.destroyed=!0}}]),e}();c()(Dl,"className","GroupResizer");var Ml=function(){function e(t){m()(this,e),this.diagram=t,this.eventHelper=new Ra,this.zoom=-1/0,this.arr=[],this.maxStashes={},this.bindEvent()}return v()(e,[{key:"bindEvent",value:function(){var e=this,t=this.diagram;this.eventHelper.bind(t,"afterviewportchange",se()((function(){t.destroyed||e._update()}),100))}},{key:"setImageHref",value:function(e,t,n,r){this.arr.push({image:e,href:t,naturalWidth:n,naturalHeight:r}),this._setImageHref(e,t,n,r)}},{key:"_setImageHref",value:function(e,t,n,a){var o,i=this.diagram,c=this.maxStashes,l=i.viewport.zoom,s=Number(e.attr("width")),u=e.attr("href"),d=c[t],f=s*l;d&&d.clientWidth>f?o=d.href:(o=r.OssUtil.resizeImage({maxWidth:f,src:t,data:{width:f,originWidth:n,originHeight:a}})||t,c[t]={clientWidth:f,href:o}),u!==o&&e.update({href:o})}},{key:"_gc",value:function(){this.arr=this.arr.filter((function(e){return e&&!e.image.destroyed}))}},{key:"_refreshOssUrl",value:function(){var e=this,t=this.arr,n=this.diagram,r=this.zoom;n.viewport.zoom>r&&(t.forEach((function(t){var n=t.image,r=t.href,a=t.naturalWidth,o=t.naturalHeight;e._setImageHref(n,r,a,o)})),this.zoom=n.viewport.zoom)}},{key:"_update",value:function(){this._gc(),this._refreshOssUrl()}},{key:"destroy",value:function(){this.eventHelper.destroy(),this.diagram=void 0,this.destroyed=!0}}]),e}();c()(Ml,"className","ImageManager");var Nl=Xn,Ll=pn,Il=function(){function e(t){m()(this,e);var n=new Ll;n.css({"pointer-events":"none"}),this.diagram=t,this.group=n,this.arr=[],this.eventHelper=new Ra}return v()(e,[{key:"bind",value:function(){var e=this,t=this.diagram,n=this.eventHelper;n.unbind(),n.bind(t,"afterchange",(function(t){var n=t.action;e.arr.length>0&&("update"===n||"delete"===n)&&e.draw()}))}},{key:"show",value:function(){this.group.show()}},{key:"hide",value:function(){this.group.hide()}},{key:"select",value:function(e){e=e.filter((function(e){return!e.isGroup}));var t=this.diagram.viewport.zoom;e=e.filter((function(e){return e.multiSelectHighlight&&e.state.visible})),this.render(e,(function(e){return e.isLine?{type:"outline",shapeStyle:{fill:"none",stroke:"#096DD9","stroke-width":2/t}}:{type:"rect",shapeStyle:{fill:"none",stroke:e.locked?"#979797":"#096DD9","stroke-width":1/t}}}))}},{key:"dock",value:function(e){this.render(e,(function(){return{type:"outline",shapeStyle:{"stroke-width":1,stroke:"#096DD9",fill:"none"},shadowStyle:{"stroke-width":2.5,stroke:"#E6F0FB",fill:"none"}}}))}},{key:"render",value:function(e,t){var n=this.group,r=this.diagram;this.clear(),e&&!e.some((function(e){return!e||!e.isCell}))&&(r.frontRootGroup.add(n),this.bind(),this.arr=e.map((function(e){var r=t(e),a=r.type,o=r.shapeStyle,i=r.shadowStyle,c={cell:e,type:"function"==typeof a?a(e):a,shape:o&&new Nl(o),shadow:i&&new Nl(i)};return c.shadow&&n.add(c.shadow),c.shape&&n.add(c.shape),c})),this.draw())}},{key:"_updateShape",value:function(e){var t=e.cell,n=e.type,r=e.shape,a=e.shadow,o=t.getKeyShape();if(o){var i,c=o.attr("stroke-width"),l=c/2,s=t.graphicGroup.matrix.concat([]),u=o.getBBox();if(i="outline"===n?o.attr("d"):Sn(-l,-l,u.width+c,u.height+c),r.update({matrix:s,d:i}),a){var d=parseFloat(a.attr("stroke-width"))+parseFloat(r.attr("stroke-width")),f=u.width+c,p=u.height+c,h=i;t.isLine||(h=ae()(i).scale(1+d/f,1+d/p).translate(-d/2,-d/2).toString()),a.update({matrix:s,d:h})}}}},{key:"_draw",value:function(){var e=this;this.arr.forEach((function(t){e._updateShape(t)}))}},{key:"draw",value:function(){this.arr.length>0&&this._draw()}},{key:"clear",value:function(){this.destroyed||(this.arr=[],this.group.clear(),this.group.remove(),this.eventHelper.unbind())}},{key:"destroy",value:function(){this.eventHelper.destroy(),this.group.destroy(),this.diagram=void 0,this.group=void 0,this.arr=void 0,this.destroyed=!0}}]),e}();c()(Il,"className","Highlight");var Bl=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e;return m()(this,n),(e=t.call(this)).cell,e}return v()(n,[{key:"init",value:function(e){var t=this;this.bind(e,"afterselect",(function(){var n=e.selector.selections;if(t.cell&&(t.cell.endRotateResize(),t.cell=void 0),1===n.length){if(t.cell=n[0],!t.cell.isVertex)return void(t.cell=void 0);t.cell&&t.cell.beginRotateResize()}})),this.bind(e,"cell:dragstart",(function(){t.cell&&(t.cell.endRotateResize(),t.cell=void 0)}))}}]),n}();function zl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zl(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ul=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e;return m()(this,n),e=t.call(this),c()(P()(e),"onMouseDown",(function(t){var n=ni(P()(e).diagram,e.getPoint(t));e.source=n})),c()(P()(e),"onMouseMove",(function(t){var n=P()(e),r=n.diagram,a=n.line,o=n.source,i=ni(r,e.getPoint(t),o&&r.find(o.id));if(e.cacheEndpointId!==i.id&&(r.highlight.dock([r.find(i.id)]),e.cacheEndpointId=i.id),a){if(i.connection&&!i.id){var c=a.getEndpoint(a.source);Pc([c.x,c.y],i.connection)}r.update(a,{target:i})}else o&&function(e,t){return t.id!==e.id||(t.connection&&e.connection?yt(t.connection[0],t.connection[1],e.connection[0],e.connection[1])>8:void 0)}(o,i)&&e.beginInsertLine({source:o,target:i})})),c()(P()(e),"onMouseUp",(function(){var t=P()(e),n=t.diagram,r=t.line;e.clear(),n.interaction.changeMode("edit"),r&&n.command.execute("Add",{model:Fl(Fl({},r.model),{},{id:null})})})),e.cacheEndpointId=null,e.diagramType="board",e.cellType="line",e}return v()(n,[{key:"getSetting",value:function(){var e=this.diagram,t=this.diagramType;return e.settings[t]}},{key:"getPoint",value:function(e){return this.diagram.viewport.invertClient([e.clientX,e.clientY])}},{key:"beginInsertLine",value:function(e){var t=e.source,n=e.target,r=this.diagram,a=this.cellType,o=r.add(pe()({},r.settings.line,{type:a,source:t,target:Fl({},n)}))[0];this.line=o}},{key:"init",value:function(e){var t=this;this.diagram=e,this.bind(e,"begininsertline",(function(e){t.beginInsertLine(e)})),this.bind(e,"mousemove",this.onMouseMove),this.bind(e,"mousedown",this.onMouseDown),this.bind(e,"mouseup",this.onMouseUp),this.bind(window,"keyup",(function(n){"Esc"!==n.key&&"Escape"!==n.key||(t.clear(),e.interaction.changeMode("edit"))}))}},{key:"clear",value:function(){var e=this.line,t=this.diagram;t&&(this.cacheEndpointId&&t.highlight.clear(),this.cacheEndpointId=null,e&&t.remove(e),this.line=null,this.source=null)}},{key:"unbind",value:function(){this.clear(),T()(_()(n.prototype),"unbind",this).call(this)}}]),n}();function Vl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ql(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vl(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hl=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"onMouseMove",(function(t){e.delegation||e.initDelegation();var n=P()(e).delegation,r=e.getPoint(t),a=M()(r,2),o=a[0],i=a[1];n.translate(o,i)})),c()(P()(e),"onClick",(function(t){e.clear();var n=P()(e).diagram,r=n.settings.vertex,a=e.getPoint(t),o=M()(a,2),i=o[0],c=o[1],l=Object(I.a)();n.interaction.changeMode("edit"),n.command.execute("Add",{model:ql(ql({},r),{},{id:l,x:i,y:c})})})),e}return v()(n,[{key:"getPoint",value:function(e){return this.diagram.viewport.invertClient([e.clientX,e.clientY])}},{key:"initDelegation",value:function(){var e=this.diagram,t=e.settings.vertex,n=e.add(ql(ql({},t),{},{x:0,y:0}))[0];this.delegation=e.delegator.create([n]),this.cell=n,n.hide()}},{key:"init",value:function(e){var t=this;this.diagram=e,this.bind(e,"mousemove",this.onMouseMove),this.bind(e,"click",this.onClick),this.bind(window,"keyup",(function(n){"Esc"!==n.key&&"Escape"!==n.key||(t.clear(),e.interaction.changeMode("edit"))})),this.bind(window,"mousedown",(function(n){e.canvas.rendererElement.contains(n.target)||(t.clear(),e.interaction.changeMode("edit"))}))}},{key:"clear",value:function(){var e=this.cell,t=this.delegation,n=this.diagram;e&&!e.destroyed&&n.remove(e.model.id),t&&t.destroy(),this.cell=null,this.delegation=null}},{key:"unbind",value:function(){this.clear(),T()(_()(n.prototype),"unbind",this).call(this)}}]),n}();function Wl(e,t,n){return e.map((function(e){return function(e,t,n){if("group"===e.type)return{};if("line"===e.type){var r={};return e.target&&!e.target.id&&e.target.connection&&(r.target=d()(e.target),r.target.connection[0]+=t,r.target.connection[1]+=n),e.source&&!e.source.id&&e.source.connection&&(r.source=d()(e.source),r.source.connection[0]+=t,r.source.connection[1]+=n),r}return{x:e.x+t,y:e.y+n}}(e,t,n)}))}function Yl(e,t,n){e.forEach((function(e){Ue(e,(function(e){return function(e,t,n){return!!e.type&&("line"===e.type?(e.target&&!e.target.id&&(e.target.connection[0]+=t,e.target.connection[1]+=n),e.source&&!e.source.id&&(e.source.connection[0]+=t,e.source.connection[1]+=n),e.controlPoints&&e.controlPoints.forEach((function(e){e[0]+=t,e[1]+=n}))):"group"!==e.type&&(e.x=e.x+t,e.y=e.y+n),e)}(e,t,n)}))}))}function Gl(e){var t={stems:[],originModels:[]};return e.forEach((function(e){e.deepEach((function(e){if(!e.isStem)return!1;var n=function(e){var t,n=e.model;return e.isLine?t={type:n.type,source:d()(n.source),target:d()(n.target)}:e.isGroup||(t={type:n.type,x:e.x,y:e.y}),t}(e);n&&Object.keys(n).length>0&&(t.stems.push(e),t.originModels.push(n))}))})),t}var Xl=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e;return m()(this,n),(e=t.call(this)).default={selectedCells:void 0,dragClone:void 0,dragCells:void 0,startPoint:void 0,startBox:void 0,originModels:void 0,startClient:void 0,onMouseMoveEvent:void 0,dx:0,dy:0},Object.assign(P()(e),e.default),e}return v()(n,[{key:"reset",value:function(){var e=this.diagram;this.dragCells&&this.dragCells.length>1&&e.highlight.show(),this.onMouseMoveEvent&&this.unbind(this.onMouseMoveEvent),e.signal.cellDragStart=!1,e.align.clear(),Object.assign(this,this.default)}},{key:"initDragData",value:function(){var e=this.diagram;if(!e.contentEditor.isBegin){var t,n=e.selector.selections.filter((function(e){return!e.locked&&e})),r=n[0];if(1!==n.length||r.isLine||e.align.updateToAlginPoints(r),e.signal.keydown.Alt){var a=n.map((function(e){return d()(e.model)}));t=e.add(e.importer.clone(a)),this.dragClone=!0,this.dragCloneModels=a}else t=n;1!==t.length||r.isLine||(this.startBox=r.getBBox(),t=t.filter((function(e){return!e.isLine||["source","target"].every((function(t){return!e[t].id}))})));var o=Gl(t),i=o.stems,c=o.originModels;this.selectedCells=t,this.dragCells=i,this.originModels=c}}},{key:"init",value:function(){var e=this,t=this.diagram,n=function(){return Wl(e.originModels,e.dx,e.dy)},r=ie()((function(r){if(t.signal.cellDragStart){var a=t.viewport.invertClient([r.clientX,r.clientY]);if(e.dx=a[0]-e.startPoint[0],e.dy=a[1]-e.startPoint[1],e.startBox){var o={minX:e.startBox.minX+e.dx,maxX:e.startBox.maxX+e.dx,minY:e.startBox.minY+e.dy,maxY:e.startBox.maxY+e.dy},i=t.align.alignByBox(o);e.dx+=i.dx,e.dy+=i.dy}var c=n();t.update(e.dragCells,c)}else{if(yt(e.startClient[0],e.startClient[1],r.clientX,r.clientY)<8)return;if(e.initDragData(),!e.dragCells)return;t.signal.cellDragStart=!0,t.emit("cell:dragstart"),e.dragCells.length>1&&t.highlight.hide(),1===e.dragCells.length&&t.contentEditor&&(t.contentEditor.unbind(),t.focus())}}),16),a=function(){var a,o=e.selectedCells,i=e.originModels,c=e.dragCloneModels,l=[],s=function(){var e=o.map((function(e){return e.model.id})).map((function(e){return t.find(e)})).filter((function(e){return e}));t.selector.select(e)};e.dragClone?(t.remove(o),Yl(c,e.dx,e.dy),l.push("Add",{model:c,select:s})):l.push("Update",{id:e.dragCells.map((function(e){return e.model.id})),model:n(),select:s,originModels:i}),t.emit("cell:dragend",{cells:e.dragCells}),r.cancel(),e.reset(),(a=t.command).execute.apply(a,l)},o=function(){r.cancel(),e.reset()};this.bind(t,"mousedown",(function(n){var a=n.target,o=n.clientX,i=n.clientY,c=n.button,l=t.getCell(a);0===c&&l&&!l.locked&&l.isStem&&(e.startClient=[o,i],e.startPoint=t.viewport.invertClient([o,i]),e.onMouseMoveEvent=e.bind(t,"mousemove",r))})),this.bind(t,"mouseup",(function(){e.dragCells&&e.dragCells[0]&&t.signal.cellDragStart?a():o()})),this.bind(t,"mouseleave",(function(){e.dragCells&&e.dragCells[0]&&t.signal.cellDragStart?a():o()}))}}]),n}();function Kl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kl(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $l=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e;return m()(this,n),e=t.call(this),c()(P()(e),"updateLine",(function(t){var n=P()(e),r=n.diagram,a=n.line,o=n.origin,i=n.sourceCell,c=r.viewport.invertClient([t.clientX,t.clientY]);if(o&&!a&&i&&yt(o[0],o[1],c[0],c[1])>8){var l=r.add(e.initLine(c))[0];l.graphicGroup.css({cursor:"crosshair"}),r.setCursor("crosshair"),e.line=l,e.clearButton()}else if(a){var s=ni(r,c,i);if(e.cacheEndpointId!==s.id&&(r.highlight.dock([r.find(s.id)]),e.cacheEndpointId=s.id),!s.id){var u=i.getPoint([.5,.5]);Pc([u.x,u.y],s.connection)}r.update(a,pe()({},r.settings.line,{target:s}))}})),c()(P()(e),"commitLine",(function(t){var n=P()(e),r=n.line,a=n.diagram,o=n.origin,i=n.sourceCell;if(r||o){var c;if(r)c=r.model,a.remove(r);else if(o){e.updateCurrentDirection(t);var l=e.getTargetConnection(e.currentDirection);c=e.initLine(l)}var s=Object(I.a)();a.command.execute("Add",{model:Zl(Zl({},c),{},{id:s})}),e.clear(),null==c.target.id&&requestAnimationFrame((function(){a.emit("vertexcell:prompt",{line:a.find(s),sourceCell:i})}))}})),c()(P()(e),"revertLine",(function(t){var n=P()(e),r=n.line,a=n.diagram;r&&("Esc"!==t.key&&"Escape"!==t.key||(a.remove(r),e.clear()))})),e.cacheEndpointId=null,e}return v()(n,[{key:"_initHoverButtonDefs",value:function(){var e=this.diagram.defs,t=Object(I.a)(),n=new Xn({id:t,fill:"rgba(9, 109, 217, .6)",stroke:"rgba(0,0,0,0)","stroke-width":5,d:Pn(7.635,7.635,6)});e.add(n),this.hoverButtonDefId=t,this.hoverButtonDef=n}},{key:"_initButtonDefs",value:function(){var e=this.diagram.defs,t=Object(I.a)(),n=new Xn({id:t,fill:"rgba(9, 109, 217, .4)",stroke:"rgba(0,0,0,0)","stroke-width":5,d:Pn(7.635,7.635,3)});e.add(n),this.buttonDefId=t,this.buttonDef=n}},{key:"_initDefs",value:function(){this._initHoverButtonDefs(),this._initButtonDefs()}},{key:"_initButton",value:function(){var e=this,t=this.buttonDefId,n=this.hoverButtonDefId,r=this.diagram,a=new pn,o={};["N","E","S","W"].forEach((function(i,c){var l=new pn,s=[1,0,0,0,1,0,0,0,1];ce.a.translate(s,s,[7.635,7.635,1]),ce.a.rotate(s,s,Math.PI/2*(c-1)),ce.a.translate(s,s,[-7.635,-7.635,1]);var u=new ur({width:15.27,height:15.27,href:"#".concat(t),matrix:s}),d=new Xn({fill:"rgba(0,0,0,0)",d:Sn(0,0,15.27,15.27)});l.add(u),l.add(d),u.css("pointer-events","none"),d.dataset({testid:"add_line_button_".concat(i)}),d.on("mousedown",(function(n){var a=r.viewport.invertClient([n.clientX,n.clientY]),o=M()(a,2),c=o[0],l=o[1];e.origin=[c,l],u.update({href:"#".concat(t)}),e.updateCurrentDirection(i)})),d.on("mouseenter",(function(){u.update({href:"#".concat(n)})})),d.on("mouseleave",(function(){u.update({href:"#".concat(t)})})),a.add(l),o[i]=l})),a.css({cursor:"copy"}),a.dataset({lake_prevent_click_unselect:!0,testid:"add_line_button_group"}),this.buttonMap=o,this.buttonGroup=a}},{key:"updateButton",value:function(){var e=this.diagram,t=this.sourceCell,n=this.buttonGroup,r=this.buttonMap;if(t){var a=e.viewport,o=e.frontRootGroup,i=a.zoom,c=t.getKeyShape().getBBox(),l=c.width,s=c.height,u=1/i,d=0,f=0;o.add(n),Object.keys(r).forEach((function(e){var n=r[e],a=[1,0,0,0,1,0,0,0,1];switch(ce.a.scale(a,a,[u,u]),e){case"N":d=l/2/u-7.635,f=-23.27;break;case"E":d=l/u+8,f=s/2/u-7.635;break;case"S":d=l/2/u-7.635,f=s/u+8;break;case"W":d=-23.27,f=s/2/u-7.635}ce.a.translate(a,a,[d,f,1]),ce.a.mul(a,t.matrix,a),n.update({matrix:a})}))}}},{key:"clearButton",value:function(){var e=this.showButtonGroup;e&&(e.remove(),this.showButtonGroup=null)}},{key:"initLine",value:function(e){var t=this.sourceCell,n=this.currentDirection;return{type:"line",source:{id:t.model.id,connection:n},target:{connection:e}}}},{key:"getTargetConnection",value:function(e){var t=this.sourceCell.getPoint(e),n=t.x,r=t.y;switch(e){case"N":return[n,r-50];case"E":return[n+50,r];case"S":return[n,r+50];case"W":return[n-50,r];default:throw new Error("unexpected direction ".concat(e))}}},{key:"updateCurrentDirection",value:function(e){var t=this.diagram;if("string"==typeof e)this.currentDirection=e;else{var n=t.viewport.invertClient([e.clientX,e.clientY]),r=M()(n,2),a=r[0],o=r[1],i=this.sourceCell.getPoint([.5,.5]);yt(i.x,i.y,n[0],n[1])>16&&(this.currentDirection=jc(i,{x:a,y:o}))}}},{key:"updateBoundingRect",value:function(e){var t=e.graphicGroup.getBoundingClientRect(),n=t.x,r=t.y,a=r-15.27-8,o=n+t.width+15.27+8,i=r+t.height+15.27+8,c=n-15.27-8;this.boundingRect={top:a,right:o,bottom:i,left:c}}},{key:"update",value:function(e){e&&(this.sourceCell=e,this.showButtonGroup=this.buttonGroup,this.updateBoundingRect(e),this.updateButton())}},{key:"clear",value:function(){this.clearButton(),this.sourceCell=null,this.boundingRect=null,this.origin=null,this.line=null,this.draggingCell=!1;var e=this.diagram;e.resetCursor(),this.cacheEndpointId&&e.highlight.clear(),this.cacheEndpointId=null}},{key:"init",value:function(e){var t=this,n=e.selector;this._initDefs(),this._initButton(),this.bind(e,"afterselect",(function(){var r=n.selections,a=r[0];1!==r.length||a.isLine||!a.canUseAddLineButton()||t.line||e.signal.cellDragStart?t.clear():t.update(a)})),this.bind(e,"vertexcell:update",(function(e){e.cell===t.sourceCell&&t.updateButton()})),this.bind(e,"vertexcell:remove",(function(e){var n=e.id,r=t.sourceCell;r&&r.model.id===n&&t.clear()})),this.bind(e,"cell:dragstart",(function(){t.clear()})),this.bind(e,"mousemove",ie()((function(e){t.origin&&t.updateLine(e)}),16)),this.bind(e,"mouseup",this.commitLine),this.bind(e,"keydown",this.revertLine)}},{key:"reset",value:function(){this.hoverButtonDef&&this.hoverButtonDef.destroy(),this.buttonDef&&this.buttonDef.destroy()}}]),n}();function Ql(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ql(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ql(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var es=function(e){b()(n,pn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;m()(this,n);var a=Jl({width:32,height:32},e),o=a.width,i=a.height,c=a.noFill,l=e.matrix||[1,0,0,0,1,0,0,0,1];o>0&&(l[0]=o/32),i>0&&(l[4]=i/32),r=t.call(this,Jl(Jl({},e),{},{matrix:l}));var s=e.stencil,u=e.title,d=s.name,f=s.thumb,p=new ar({x:0,y:0,width:o,height:i,rx:2,fill:c?"none":"#ffffff",stroke:"none"});return r.add(new pr({title:u})),r.add(p),f.forEach((function(e){r.add(pc(e))})),P()(r).rendererElement.setAttribute("data-name",d),r.css({cursor:"pointer"}),r}return v()(n)}();var ts=function(e){b()(n,pn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;m()(this,n),r=t.call(this,e);var a=e.key,o=e.title,i=e.shapes,c=8,l=8;if(o){var s=new gr({text:o,matrix:[1,0,0,0,1,0,12,28,1],fill:"#262626"});r.add(s),l+=32}return i.forEach((function(e){var t=e.name,n=e.title,a=pl.find((function(e){return e.name===t}));c>=200&&(c=8,l+=32);var o=new es({stencil:a,matrix:[1,0,0,0,1,0,c,l,1],stroke:"#595959",fill:"#ffffff",title:n});r.add(o),c+=32})),r.rendererElement.setAttribute("data-group",a),r}return v()(n)}();function ns(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ns(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ns(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var as=[{name:"rect",title:$t("矩形")},{name:"rounded-rect",title:$t("圆角矩形")},{name:"circle",title:$t("圆形")},{name:"triangle",title:$t("三角形")},{name:"diamond",title:$t("菱形")},{name:"comment-2",title:$t("标注 2")},{name:"parallelogram",title:$t("平行四边形")},{name:"star",title:$t("星形")},{name:"arrow-1",title:$t("左箭头")},{name:"arrow-2",title:$t("右箭头")},{name:"arrow-3",title:$t("双向箭头")},{name:"polygon",title:$t("五边形")}],os=[{name:"process",title:$t("过程")},{name:"start-end",title:$t("起止符")},{name:"decision",title:$t("决策")},{name:"collate",title:$t("整理")},{name:"data",title:$t("数据")},{name:"database",title:$t("数据库")},{name:"delay",title:$t("延迟")},{name:"display",title:$t("显示")},{name:"document",title:$t("文档")},{name:"internal-storage",title:$t("内部存储")},{name:"loop-limit",title:$t("循环起止符")},{name:"manual-input",title:$t("手动输入")},{name:"manual-loop",title:$t("手动循环")},{name:"merge",title:$t("合并")},{name:"multi-document",title:$t("多文档")},{name:"off-page",title:$t("页外连接符")},{name:"connector",title:$t("连接器")},{name:"summing-junction",title:$t("汇总连接")},{name:"subroutine",title:$t("预定义流程")},{name:"preparation",title:$t("准备")},{name:"sort",title:$t("排序")},{name:"stored-data",title:$t("存储数据")},{name:"or",title:$t("或者")},{name:"comment",title:$t("标注")}],is={basic:{title:$t("基础图形"),shapes:as,height:100},flowchart:{title:$t("流程图图形"),shapes:os,height:178}},cs=function(e){b()(n,pn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;m()(this,n),e=rs({groups:["basic"]},e),r=t.call(this,e);var a,o=0,i=e.groups,c=i.map((function(e){var t=is[e],n=i.length>1,r=o;return o+=n?t.height:t.height-34,new ts(rs(rs({},t),{},{key:e,title:n?t.title:"",matrix:[1,0,0,0,1,0,0,r,1]}))}));return[new ar({x:0,y:0,width:208,height:o,rx:4,stroke:"#e9e9e9",fill:"#ffffff"})].concat(c).forEach((function(e){return r.add(e)})),r.height=o,r.on("mouseover",ie()((function(e){for(var t=e.target.closest("[data-name]"),n=r.rendererElement.querySelectorAll("[data-name]"),a=0;a<n.length;a++){var o=n[a],i=o.querySelector("path");i&&i.setAttribute("fill",o===t?"#f5f5f5":"#ffffff")}}),16)),r.on("mouseleave",ie()((function(){if(a){var e=a.querySelector("path");e&&e.setAttribute("fill","#ffffff")}}),16)),r.on("click",(function(e){var t=e.target.closest("[data-name]");t&&(r.emit("shape:select",{shape:t.dataset.name,group:t.closest("[data-group]").dataset.group,type:"geometry"}),a=t)})),r}return v()(n)}(),ls='<div style="text-align:center;">&nbsp;</div>';function ss(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function us(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ss(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ss(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ds=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"createPanel",value:function(){var e=this.diagram,t=e.frontRootGroup,n=e.defs,r=new cs({groups:["basic","flowchart"]}),a=Object(I.a)(),o=new Pr,i=new Dr({dx:0,dy:0,stdDeviation:4,"flood-color":"rgba(0, 0, 0, 0.08)"});return o.attr({id:a}),o.add(i),n.add(o),r.css({filter:"url(#".concat(a,")")}),r.css({visibility:"hidden"}),t.add(r),r}},{key:"initPanel",value:function(){var e=this;this.panel=this.createPanel(),this.panel.on("shape:select",(function(t){var n=t.shape,r=t.type,a=e.diagram,o=e.line,i=o.target.connection,c=e.computeInheritedStyles(n),l=e.adjustVertexPosition(i,n,c.stroke),s=M()(l,2),u=s[0],d=s[1];a.command.execute("AddVertex",{model:us({type:r,shape:n,x:u,y:d,html:ls},c),lineId:o.model.id}),e.closePanel()}))}},{key:"computeInheritedStyles",value:function(e){var t=this.sourceCell,n=t.width,r=t.height,a={stroke:t.stroke,fill:t.fill};return t.shape===e&&Object.assign(a,{width:n,height:r}),a}},{key:"closePanel",value:function(){var e=this.diagram;this.panel.css({visibility:"hidden"}),e.signal.addVertexPanelVisibility=!1,this.direction=null,this.line=null,this.sourceCell=null}},{key:"adjustPanelPosition",value:function(e){var t=this.diagram,n=this.direction,r=this.panel,a=t.viewportContainer.getBoundingClientRect(),o=r.getBBox(),i=t.viewport.invertViewport([a.width-o.width-8,a.height-o.height-8]),c=Math.min(e[0]+8,i[0]),l=Math.min(e[1]+8,i[1]);return"N"===n?c<e[0]+8&&(c=e[0]-8-o.width):"E"===n?c<e[0]+8&&l<e[1]+8&&(l=e[1]-8-o.height):"S"===n?c<e[0]+8&&l<e[1]+8&&(c=e[0]-8-o.width):"W"===n&&l<e[1]+8&&(l=e[1]-8-o.height),[c,l]}},{key:"adjustVertexPosition",value:function(e,t,n){var r,a,o=this.direction,i=this.sourceCell,c=pl.find((function(e){return e.name===t})),l=M()(e,2),s=l[0],u=l[1],d=(n.width||2)/2;switch(t===i.shape?(r=i.width,a=i.height):(r=c.width,a=c.height),o){case"N":s-=r/2,u-=a+d;break;case"E":s+=d,u-=a/2;break;case"S":u+=d,s-=r/2;break;case"W":s-=r+d,u-=a/2}return[s,u]}},{key:"getDirection",value:function(e){var t=En(e.d).slice(-2),n=t[0].slice(1),r=t[1].slice(1);return jc({x:n[0],y:n[1]},{x:r[0],y:r[1]})}},{key:"updatePanel",value:function(e){var t=this.diagram;this.panel||this.initPanel();var n=this.panel,r=e.line,a=e.sourceCell;this.line=r,this.sourceCell=a,this.direction=this.getDirection(r);var o=r.target.connection,i=this.adjustPanelPosition(o),c=M()(i,2),l=c[0],s=c[1];n.update({matrix:[1,0,0,0,1,0,l,s,1]}),n.css({visibility:""}),t.signal.addVertexPanelVisibility=!0}},{key:"init",value:function(e){var t=this;this.diagram=e,this.line=null,this.sourceCell=null,this.direction=null,this.bind(e,"vertexcell:prompt",(function(e){return t.updatePanel(e)})),this.bind(e,"mousedown",(function(e){var n=t.panel;n&&!n.rendererElement.contains(e.target)&&t.closePanel()})),this.bind(e,"keyup",(function(e){!t.panel||"Esc"!==e.key&&"Escape"!==e.key||t.closePanel()}))}}]),n}();function fs(e){var t=function(e){var t=e.type.split("/");return t[t.length-1]}(e);return r.EXTS.IMAGE_EXT.includes(t)}var ps=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"dragover",(function(e){e.preventDefault()})),this.bind(e,"drop",(function(t){t.preventDefault();var n=Array.from(t.dataTransfer.files).filter((function(e){return fs(e)}));n[0]&&e.emit("importimage",{files:n,from:"drop"})}))}}]),n}();var hs=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(){this._initEvent()}},{key:"_initEvent",value:function(){var e=this.diagram;this.bind(e,"dblclick",(function(t){var n=e.viewport.invertClient([t.clientX,t.clientY,1]),r=e.getCell(t.target);if(r&&r.isGroup){var a=e.groupManager.enter(r,{x:n[0],y:n[1]});a&&e.selector.select(a)}})),this.bind(e,"afterselect",(function(t){e.groupManager.group&&0===t.selections.length&&e.groupManager.exit()}))}}]),n}();var ms=Xn,gs=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"unbindMousemoveEvent",value:function(){this.mouseMoveEvent&&(this.unbind(this.mouseMoveEvent),this.mouseMoveEvent=void 0)}},{key:"init",value:function(e){var t,n,r,a=this;e.signal.mouseMultiSelecting=!1;var o=new ms({fill:"rgba(9, 109, 217, .05)",stroke:"#096DD9"});function i(a){if(t){e.signal.mouseMultiSelecting=!0,n=e.viewport.invertClient([a.clientX,a.clientY]);var i={minX:Math.min(t[0],n[0]),minY:Math.min(t[1],n[1]),width:Math.abs(n[0]-t[0]),height:Math.abs(n[1]-t[1])},c=Sn(i.minX,i.minY,i.width,i.height);i.maxX=i.minX+i.width,i.maxY=i.minY+i.height,o.update({d:c}),tt(r=e.groupManager.getCells().filter((function(e){if(e.state.visible&&e.state.capture){var t=e.getKeyShapeBox();if(gt(t,i)){if(e.isLine){var n=e.d;if(!mt(i,t)&&0===me()(c,n).length)return!1}return!0}}return!1})),e.selector.selections)||e.selector.select(r)}}o.dataset({testid:"mouse-drag-multi-select"}),this.selectBox=o,this.bind(e,"mousedown",(function(n){(function(t){if(t.target===e.canvas.rendererElement)return!0;var n=e.getCell(t.target);return!(!n||!n.locked)})(n)&&(a.unbindMousemoveEvent(),a.mouseMoveEvent=a.bind(window,"mousemove",ie()(i,16)),e.frontRootGroup.add(o),t=e.viewport.invertClient([n.clientX,n.clientY]))})),this.bind(window,"mouseup",(function(){t&&e.tryFocus(),e.signal.mouseMultiSelecting=!1,r&&e.selector.select(r),r=void 0,t=void 0,n=void 0,a.unbindMousemoveEvent(),o.remove(),o.update({d:""})}))}},{key:"unbind",value:function(e){!e&&this.selectBox&&(this.selectBox.remove(),this.selectBox=void 0),T()(_()(n.prototype),"unbind",this).call(this,e)}}]),n}();var vs=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"mouseenter",(function(){e.signal.mouseenter=!0})),this.bind(e,"mouseleave",(function(){e.signal.mouseenter=!1}))}}]),n}();var ys=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"updateControlPoints",value:function(e){var t=this.beforeData,n=this.afterData;e.forEach((function(e){var r=e.model,a=r.controlPoints,o=[0,0];["source","target"].forEach((function(e){var a=r[e]&&r[e].id||"".concat(r.id,"-").concat(e);if(a){var i=t[a],c=n[a];if(o&&i&&c){var l=ce.b.sub([],c.slice(0,2),i.slice(0,2));o=tt(l,[0,0])?null:ce.b.add(o,o,l)}}})),o&&!tt(o,[0,0])&&(o=o.map((function(e){return e/2})),e.update({controlPoints:a.map((function(e){return[e[0]+o[0],e[1]+o[1],e[2]]}))}))}))}},{key:"getData",value:function(e){var t={},n=this.diagram;return e.forEach((function(e){var r=e.model;["source","target"].forEach((function(e){var a=r[e]&&r[e].id;if(a){var o=n.find(a),i=o.getRelativePoint({x:.5,y:.5});t[o.model.id]=[i.x,i.y]}else r[e].connection&&(t["".concat(r.id,"-").concat(e)]=r[e].connection)}))})),t}},{key:"getLines",value:function(){return this.diagram.getCells().filter((function(e){return e.isLine})).filter((function(e){return e.isDrawable()&&e.model.controlPoints}))}},{key:"onBeforeChange",value:function(){var e=this.getLines();this.beforeData=this.getData(e)}},{key:"onAfterChange",value:function(){var e=this.getLines();this.afterData=this.getData(e),this.updateControlPoints(e)}},{key:"reset",value:function(){this.beforeData={},this.afterData={}}},{key:"init",value:function(){var e=this.diagram;this.reset(),this.bind(e,"beforechange",this.onBeforeChange.bind(this)),this.bind(e,"afterchange",this.onAfterChange.bind(this))}}]),n}();var bs=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"afterchange",(function(t){if(t){var n=t.models,r=t.action;"remove"===r?function(e,t){t.forEach((function(t){e.emit("vertexcell:remove",{id:t.id})}))}(e,n):"update"===r&&function(e,t){for(var n={},r=function(r){var a=t[r],o=e.find(a.id),i=["x","y","width","height","shape","rotate"];o.isText&&i.push("html"),o.isVertex&&i.some((function(e){return null!=a[e]}))&&(n[a.id]=!0,o.state.selected&&o.rotateResize.update(),e.emit("vertexcell:update",{cell:o}))},a=0;a<t.length;a++)r(a)}(e,n)}}))}}]),n}();var ks=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(){this._initParam(),this._initEvent()}},{key:"_initParam",value:function(){this.groups=[]}},{key:"_calculateGroups",value:function(e,t){var n=[];e.concat(t).forEach((function(e){for(var t=e.parent;t&&!n.includes(t);)t.isGroup&&n.push(t),t=t.parent})),this.groups=n.sort((function(e,t){return t.depth-e.depth}))}},{key:"_draw",value:function(){var e=this.groups,t=this.diagram,n=this.action,r=t.rootGroup;e.forEach((function(e){if("add"===n){var t=e.getAllChildren(),a=t.length;if(a>0){t.sort((function(e,t){return e.getZIndex()-t.getZIndex()}));var o=t[a-1];r.insertBefore(e.graphicGroup,o.graphicGroup),r.insertBefore(o.graphicGroup,e.graphicGroup)}}e.draw()}))}},{key:"_initEvent",value:function(){var e=this.diagram;this.bind(e,"beforechange",this._onBeforeChange.bind(this)),this.bind(e,"afterchange",this._onAfterChange.bind(this))}},{key:"_onBeforeChange",value:function(e){var t=e.stems,n=e.relatedLines,r=e.action;this.destroyed||"remove"===r&&this._calculateGroups(t,n)}},{key:"_onAfterChange",value:function(e){var t=e.stems,n=e.relatedLines,r=e.action;this.destroyed||("update"!==r&&"add"!==r||this._calculateGroups(t,n),this.action=r,this._draw(),this._initParam())}}]),n}();var ws={default:{insertParagraphKey:function(e){return 13===e.which},cancelKey:function(e){return 27===e.which}}},xs=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){var t=e.contentEditor;function n(){if(!e.signal.mouseMultiSelecting){var n=e.selector.selections,r=n[0];if(1===n.length&&r&&r.textAreaElement){var a=r.textAreaElement;if(e.destroyed)return;var o=a.htmlContainer;if(t.dom&&t.dom!==o&&t.unbind(),!t.dom&&e.viewportContainer.contains(o)){var i=ws[r.type]||ws.default;t.bind(o,i)}t.isBegin||t.prepareEdit()}else t.unbind(),e.focus()}}var r=se()(n,32);this.bind(e,"afterselect",(function(){e.signal.beforePasteSelect?r():n()})),this.bind(e,"mousedown",(function(t){var n=e.getCell(t.target);n&&n.textAreaElement&&!n.textAreaElement.htmlContainer.contains(t.target)&&t.preventDefault()})),this.bind(e,"dblclick",(function(n){var r=n.target,a=e.getCell(r);a&&a.state.selected&&a.textAreaElement&&!e.contentEditor.isBegin&&(e.selector.selections.length>1&&e.selector.select([a]),t.prepareEdit(),t.beginEdit(),e.update(a,{}))})),this.bind(e,"click",(function(t){var n=e.getCell(t.target);n&&n.textAreaElement&&n.textAreaElement.htmlContainer.contains(t.target)&&"A"===t.target.tagName&&t.preventDefault()}))}}],[{key:"registerContentEditorOptions",value:function(e,t){ws[e]=t}}]),n}();var _s=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){var t;this.bind(e,"afteractivedgroupchange",(function(){t&&(t.updateState(),t=null);var n=e.groupManager.group;n&&(n.updateState(),t=n)}))}}]),n}();var Es=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"afterselect",(function(){var t=e.selector.selections.filter((function(e){return e.isRoot}));t.length>1?(e.highlight.select(t.concat([])),e.groupResizer.begin()):(e.highlight.clear(),e.groupResizer.end())}))}}]),n}();var Cs=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){!Co(t)&&["Backspace","Delete"].includes(t.key)&&(t.preventDefault(),e.command.execute("Delete"),e.tryFocus())}))}}]),n}();var Os=[],Ss=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(){this._initParam(),this._initEvent()}},{key:"_initParam",value:function(){this.originModels=null,this.stems=null,this.dx=0,this.dy=0}},{key:"executeCommand",value:function(){var e=this.diagram,t=this.stems,n=this.dx,r=this.dy,a=this.originModels,o=this.selectionIds;!e.destroyed&&a&&(e.command.execute("Update",{id:t,model:Wl(t,n,r),originModels:a,select:function(){e.selector.select(o)}}),this._initParam())}},{key:"_initEvent",value:function(){var e=this,t=this.diagram;this.bind(t,"keydown",(function(n){var r,a=t.selector.selections,o=a.filter((function(e){return Os.every((function(t){return t(e)}))})),i=0,c=0;if(!(o.length<=0)){switch(e.selectionIds=a.map((function(e){return e.model.id})),r=n.shiftKey?10:1,n.key){case"Left":case"ArrowLeft":i=-r;break;case"Right":case"ArrowRight":i=r;break;case"Up":case"ArrowUp":c=-r;break;case"Down":case"ArrowDown":c=r;break;default:return}if(0!==i||0!==c){var l=Gl(o),s=l.stems,u=l.originModels;n.preventDefault(),t.update(s,Wl(s,i,c)),e.stems=s,e.originModels=u}}})),this.bind(t,"keyup",se()((function(){e.executeCommand()}),400))}}],[{key:"filterCell",value:function(e){Os.push(e)}}]),n}();var Rs=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){var t=this;this.bind(e,"keydown",(function(n){if(Co(n)&&"l"===n.key){var r=e.selector.selections;if(t.cell=r[0],2===r.length&&r.every((function(e){return!e.isLine&&!e.isGroup})))return e.command.execute("Add",{model:{type:"line",shape:null,source:{id:r[0].model.id},target:{id:r[1].model.id,marker:"arrow"}}});e.command.execute("BeginInsertLine",{shape:null,marker:"arrow"})}}))}}]),n}();var js=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){0!==e.selector.selections.length||"t"!==t.key||Co(t)||(t.preventDefault(),e.command.execute("BeginInsertText"))}))}}]),n}();var Ps=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){0!==e.selector.selections.length||"s"!==t.key||Co(t)||(t.preventDefault(),e.command.execute("BeginInsertGeometry"))}))}}]),n}();var As=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){e.selector.selections.some((function(e){return e.textAreaElement}))&&Co(t)&&("b"===t.key?(t.preventDefault(),e.command.execute("ContentCommand",{name:"bold"})):"i"===t.key?e.command.execute("ContentCommand",{name:"italic"}):"k"===t.key?e.command.execute("CreateLink"):"u"===t.key?e.command.execute("ContentCommand",{name:"underline"}):t.shiftKey&&"x"===t.key&&e.command.execute("ContentCommand",{name:"strikethrough"}))}))}}]),n}();var Ts=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){var n=e.selector,r=e.viewport;if(n.selections.length>0&&"d"===t.key&&Co(t)){t.preventDefault();var a=r.getFocus();aa("copy",e),aa("paste",e,a,!1)}}))}}]),n}();var Ds=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){"g"===t.key&&Co(t)&&!t.shiftKey?(t.preventDefault(),e.command.execute("Group")):("g"===t.key||"G"===t.key)&&Co(t)&&t.shiftKey&&(t.preventDefault(),e.command.execute("UnGroup"))}))}}]),n}();var Ms=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){var n=e.selector;e.groupManager.group&&"Escape"===t.key&&!Co(t)&&(t.preventDefault(),n.clear())}))}}]),n}();var Ns=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"beforecommandexecute",(function(t){var n=t.commandName,r=t.command;if("Add"===n&&"line"===r.model.type){var a={};pe()(a,e.settings.line,r.model),r.model=a}})),this.bind(e,"aftercommandexecute",(function(t){var n=t.command;if("Update"===t.commandName&&1===(null==n?void 0:n.id.length)&&n.id[0].isLine){var r,a,o=n.id[0];e.settings.line={shape:o.shape,stroke:o.stroke,target:{marker:null==o||null===(r=o.target)||void 0===r?void 0:r.marker},source:{marker:null==o||null===(a=o.source)||void 0===a?void 0:a.marker}}}}))}}]),n}(),Ls=function(){function e(t){m()(this,e),this.diagram=t}return v()(e,[{key:"reset",value:function(){this.diagram.update(this.lineCache.map((function(e){return e.id})),this.lineCache)}},{key:"pin",value:function(){var e=this.diagram;this.lineCache.map((function(t){return e.find(t.id)})).filter((function(e){return e})).forEach((function(e){var t=e.source,n=e.target,r=e.diagram,a=En(e.wireElement.attr("d")),o={};if(r.find(t.id)||(o.source={id:null,connection:[a[0][1],a[0][2]]}),!r.find(n.id)){var i=a.length-1,c=a[i].length;o.target={id:null,connection:[a[i][c-2],a[i][c-1]]}}e.update(o)}))}},{key:"cache",value:function(e){var t=this.diagram,n=e.reduce((function(e,t){return t.getAllCells().forEach((function(t){e[t.model.id]=!0})),e}),{});this.lineCache=t.getCells().filter((function(e){return e.isLine&&(n[e.model.target.id]||n[e.model.source.id])})).map((function(e){var t=e.model,n={id:t.id};return n.target=d()(t.target),n.target.connection||(n.target.connection=null),n.source=d()(t.source),n.source.connection||(n.source.connection=null),n}))}}]),e}();var Is=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).pinLine=new Ls(e.diagram),r}return v()(n,[{key:"selectParent",value:function(){var e=this.diagram,t=this.changeArguments,n=e.find(t[0][0].id).parent;this.select(n&&n.model.id)}},{key:"selectNearest",value:function(){var e=this.diagram,t=this.changeArguments,n=e.find(t[0][0].id),r=n.parent;if(t[0].length>1&&r)return this.select(r.model.id);if(1===t[0].length&&r){var a=r.getChildren().filter((function(e){return e.upSignX===n.upSignX&&e.upSignY===n.upSignY})),o=a.indexOf(n);if(r.model.children){var i=a[o-1];if(i)return this.select([i]);var c=a[o+1];if(c)return this.select([c])}return this.select(r.model.id)}return e.selector.clear()}},{key:"execute",value:function(){var e=this.diagram,t=this.id,n=this.pinLine,r=Ur(t,{}),a=r[0].map((function(t){return e.find(t)}));a.forEach((function(t,n){r[0][n]=d()(t.model),r[1][n]=e.getCellOptions(t)})),this.changeArguments=r,n.cache(a),this.forward()}},{key:"forward",value:function(){var e=this.diagram,t=this.changeArguments,n=this.pinLine;this.selectNearest(),e.remove(t[0].map((function(e){return e.id}))),e.tryFocus(),n.pin()}},{key:"backward",value:function(){var e=this.diagram,t=this.changeArguments,n=this.pinLine,r=e.add.apply(e,z()(t));n.reset(),this.select(r),e.tryFocus()}}]),n}();c()(Is,"className","Remove");var Bs=function(e){b()(n,Is);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.deduplicate(e.selector.selections);this.id=t.filter((function(e){return e.canDelete()})).map((function(e){return e.model.id})),T()(_()(n.prototype),"execute",this).call(this)}}]),n}();c()(Bs,"className","Delete"),c()(Bs,"enable",(function(e){return e.selector.selections.filter((function(e){return e.canDelete()})).length>0}));var zs=function(e){b()(n,Bs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){na(this.e,this.diagram),T()(_()(n.prototype),"execute",this).call(this)}}]),n}();c()(zs,"className","Cut"),c()(zs,"isModelChange",!0);var Fs=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){T()(_()(n.prototype),"execute",this).call(this);var e=this.diagram,t=this.lineId,r=this.model,a=e.find(t);this.originTarget=["id","connection","marker"].reduce((function(e,t){var n=a.target[t];return e[t]=null==n?null:n,e}),{}),e.update(a,{target:{id:r.id,connection:null}})}},{key:"forward",value:function(){T()(_()(n.prototype),"forward",this).call(this);var e=this.diagram,t=this.lineId,r=this.model,a=e.find(t);a&&!a.destroyed&&e.update(a,{target:{id:r.id,connection:null}})}},{key:"backward",value:function(){var e=this.diagram,t=this.lineId,n=this.originTarget,r=this.model,a=e.find(t);e.remove(r.id),a&&!a.destroyed&&e.update(a.model.id,{target:n})}}]),n}(Fr.Add);function Us(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}c()(Fs,"className","AddVertex");var Vs=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Us(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Us(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({html:ls},e))).queue=!1,r}return v()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.shape,n=this.html,r=this.fill,a=this.stroke;Object.assign(e.settings.vertex,{type:"geometry",html:n,shape:t||"rect",fill:r,stroke:a}),e.selector.clear(),e.interaction.changeMode("beginInsertVertex")}}],[{key:"enable",value:function(){return!0}}]),n}();function qs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}c()(Vs,"className","BeginInsertGeometry"),c()(Vs,"isModelChange",!1);var Hs=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qs(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({html:$t("文本")},e))).queue=!1,r}return v()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.html,n=this.stroke;Object.assign(e.settings.vertex,{type:"text",html:t,stroke:n,shape:"text"}),e.selector.clear(),e.interaction.changeMode("beginInsertVertex")}}],[{key:"enable",value:function(){return!0}}]),n}();c()(Hs,"className","BeginInsertText"),c()(Hs,"isModelChange",!1);var Ws=Fr.Update,Ys=function(e){b()(n,Ws);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"arrange",value:function(){}},{key:"getArrangeTstem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=[],r=[];return e.forEach((function(e,a){var o=Gl([e]),i=o.stems,c=o.originModels,l=t(a,e),s=l.dx,u=l.dy;r.push.apply(r,z()(i)),n.push.apply(n,z()(Wl(c,s,u)))})),{tStems:r,models:n}}},{key:"execute",value:function(){var e=this.diagram.selector.selections.concat([]),t=this.arrange(),r=t.tStems,a=t.models;this.id=r,this.model=a,this.selectedIds=e.map((function(e){return e.model.id})),T()(_()(n.prototype),"execute",this).call(this)}},{key:"select",value:function(){T()(_()(n.prototype),"select",this).call(this,this.selectedIds)}}]),n}();c()(Ys,"className","Arrange");var Gs=function(e){b()(n,Ys);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"_getAlignCells",value:function(e){return e.filter((function(e){return e.canArrange()}))}},{key:"_getAlignCellPoints",value:function(e){var t=[];return e.forEach((function(e){var n=[],r=e.getAlignBBox();n.push([r.minX,r.minY]),n.push([r.maxX,r.maxY]),n.push([(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]),t.push(n)})),t}},{key:"arrange",value:function(){var e=this.diagram.selector.selections.concat([]),t=this._getAlignCells(e),n=this._getAlignCellPoints(t);return this.align(t,n)}},{key:"align",value:function(){}}]),n}();c()(Gs,"className","Align"),c()(Gs,"enable",(function(e){return e.selector.selections.filter((function(e){return e.canArrange()})).length>1}));var Xs=function(e){b()(n,Gs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"align",value:function(e,t){var n=t.reduce((function(e,t){return e.concat(t)}),[]),r=Math.max.apply(Math,z()(n.map((function(e){return e[1]}))));return this.getArrangeTstem(e,(function(e,n){var a=t[e];return{dx:0,dy:n.isLine?r-Math.max.apply(Math,z()(a.map((function(e){return e[1]})))):r-a[1][1]}}))}}]),n}();c()(Xs,"className","AlignBottom");var Ks=function(e){b()(n,Gs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"align",value:function(e,t){var n,r=e.map((function(e){return e.getAlignBBox()})),a=Xe(r,"width");if(r.every((function(e){return e.minX>=a.minX&&e.maxX<=a.maxX})))n=a.x+a.width/2;else{var o=t.reduce((function(e,t){return e.concat([t[2]])}),[]).map((function(e){return e[0]}));n=(Math.max.apply(Math,z()(o))+Math.min.apply(Math,z()(o)))/2}return this.getArrangeTstem(e,(function(e,r){var a=t[e];return{dx:(r.isLine,n-a[2][0]),dy:0}}))}}]),n}();c()(Ks,"className","AlignHCenter");var Zs=function(e){b()(n,Gs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"align",value:function(e,t){var n=t.reduce((function(e,t){return e.concat(t)}),[]),r=Math.min.apply(Math,z()(n.map((function(e){return e[0]}))));return this.getArrangeTstem(e,(function(e,n){var a=t[e];return{dx:n.isLine?r-Math.min.apply(Math,z()(a.map((function(e){return e[0]})))):r-a[0][0],dy:0}}))}}]),n}();c()(Zs,"className","AlignLeft");var $s=function(e){b()(n,Gs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"align",value:function(e,t){var n=t.reduce((function(e,t){return e.concat(t)}),[]),r=Math.max.apply(Math,z()(n.map((function(e){return e[0]}))));return this.getArrangeTstem(e,(function(e,n){var a=t[e];return{dx:n.isLine?r-Math.max.apply(Math,z()(a.map((function(e){return e[0]})))):r-a[1][0],dy:0}}))}}]),n}();c()($s,"className","AlignRight");var Qs=function(e){b()(n,Gs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"align",value:function(e,t){var n=t.reduce((function(e,t){return e.concat(t)}),[]),r=Math.min.apply(Math,z()(n.map((function(e){return e[1]}))));return this.getArrangeTstem(e,(function(e,n){var a=t[e];return{dx:0,dy:n.isLine?r-Math.min.apply(Math,z()(a.map((function(e){return e[1]})))):r-a[0][1]}}))}}]),n}();c()(Qs,"className","AlignTop");var Js=function(e){b()(n,Gs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"align",value:function(e,t){var n,r=e.map((function(e){return e.getAlignBBox()})),a=Xe(r,"height");if(r.every((function(e){return e.minY>=a.minY&&e.maxY<=a.maxY})))n=a.y+a.height/2;else{var o=t.reduce((function(e,t){return e.concat([t[2]])}),[]).map((function(e){return e[1]}));n=(Math.max.apply(Math,z()(o))+Math.min.apply(Math,z()(o)))/2}return this.getArrangeTstem(e,(function(e,r){var a=t[e];return{dx:0,dy:(r.isLine,n-a[2][1])}}))}}]),n}();c()(Js,"className","AlignVCenter");var eu=function(e){b()(n,Ys);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"distribute",value:function(){}},{key:"arrange",value:function(){var e=this.diagram.selector.selections.filter((function(e){return e.canArrange()}));return this.distribute(e)}}]),n}();c()(eu,"enable",(function(e){return e.selector.selections.filter((function(e){return e.canArrange()})).length>2}));var tu=function(e){b()(n,eu);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"distribute",value:function(e){var t=e.length,n=e.map((function(e){return{cell:e,box:e.getAlignBBox()}}));n=n.sort((function(e,t){return e.box.minX-t.box.minX}));var r=Math.min.apply(Math,z()(n.map((function(e){return e.box.minX})))),a=(Math.max.apply(Math,z()(n.map((function(e){return e.box.maxX}))))-r-n.reduce((function(e,t){return e+t.box.width}),0))/(t-1),o=n[0].box;e=n.map((function(e){return e.cell}));var i=0;return this.getArrangeTstem(e,(function(e){var t=0;if(e>0){var r=n[e-1],c=n[e];i=i+a+r.box.width,t=o.minX+i-c.box.minX}return{dx:t,dy:0}}))}}]),n}();c()(tu,"className","DistributeHorizontally");var nu=function(e){b()(n,eu);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"distribute",value:function(e){var t=e.length,n=e.map((function(e){return{cell:e,box:e.getAlignBBox()}}));n=n.sort((function(e,t){return e.box.minY-t.box.minY}));var r=Math.min.apply(Math,z()(n.map((function(e){return e.box.minY})))),a=(Math.max.apply(Math,z()(n.map((function(e){return e.box.maxY}))))-r-n.reduce((function(e,t){return e+t.box.height}),0))/(t-1),o=n[0].box;e=n.map((function(e){return e.cell}));var i=0;return this.getArrangeTstem(e,(function(e){var t=0;if(e>0){var r=n[e-1],c=n[e];i=i+a+r.box.height,t=o.minY+i-c.box.minY}return{dx:0,dy:t}}))}}]),n}();c()(nu,"className","DistributeVertically");var ru=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this.diagram,r=n.selector.selections.filter((function(e){return e.isStem}));r.sort(t);var a=r.map((function(e){return e.model.id})),o=r.map((function(e){return n.getCellOptions(e)}));r.forEach((function(t){t[e]()}));var i=r.map((function(e){return n.getCellOptions(e)}));this.beforeCellOptions=o,this.afterCellOptions=i,this.id=a,this.select(a)}},{key:"backward",value:function(){var e=this.diagram,t=this.id,n=this.beforeCellOptions;e.update(t,{},n),this.select(t)}},{key:"forward",value:function(){var e=this.diagram,t=this.id,n=this.afterCellOptions;e.update(t,{},n),this.select(t)}}]),n}();c()(ru,"className","ZIndex");var au=function(e){b()(n,ru);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){T()(_()(n.prototype),"execute",this).call(this,"toBack",(function(e,t){return t.getZIndex()-e.getZIndex()}))}}]),n}();c()(au,"className","ToBack");var ou=function(e){b()(n,ru);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){T()(_()(n.prototype),"execute",this).call(this,"toFront",(function(e,t){return e.getZIndex()-t.getZIndex()}))}}]),n}();c()(ou,"className","ToFront");var iu=function(e){b()(n,ru);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){T()(_()(n.prototype),"execute",this).call(this,"backward",(function(e,t){return e.getZIndex()-t.getZIndex()}))}}]),n}();c()(iu,"className","Backward");var cu=function(e){b()(n,ru);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){T()(_()(n.prototype),"execute",this).call(this,"forward",(function(e,t){return t.getZIndex()-e.getZIndex()}))}}]),n}();c()(cu,"className","Forward");var lu=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){var e=this.x,t=this.y;this.model={type:"text",html:$t("文本"),x:e,y:t},T()(_()(n.prototype),"execute",this).call(this)}}]),n}(Fr.Add);c()(lu,"className","InsertText"),c()(lu,"enable",(function(e){return"edit"===e.interaction.currentMode}));var su=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){var e=this.x,t=this.y;this.model={type:"geometry",html:ls,shape:"rect",x:e,y:t},T()(_()(n.prototype),"execute",this).call(this)}}]),n}(Fr.Add);c()(su,"className","InsertGeometry"),c()(su,"enable",(function(e){return"edit"===e.interaction.currentMode}));var uu=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){var e=this.x,t=this.y,r=this.image,a=this.diagram,o=r.naturalWidth/r.naturalHeight,i=Math.min(r.naturalWidth,1e3,1e3*o),c=i/o,l=a.viewport.getCenter();this.model={type:"image",image:r,width:i,height:c,x:null==e?l[0]:e,y:null==t?l[1]:t,constraints:{proportion:!0}},T()(_()(n.prototype),"execute",this).call(this)}}]),n}(Fr.Add);c()(uu,"className","InsertImage"),c()(uu,"enable",(function(e){return"edit"===e.interaction.currentMode}));var du=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return v()(n,[{key:"execute",value:function(){this.diagram.contentEditor.execCommand("createLink",$t("链接"))}}]),n}();c()(du,"className","AttachLink"),c()(du,"enable",(function(e){var t=e.getCell(e.contentEditor.dom);return e.contentEditor.getRange()&&t}));var fu=function(e){var t=e.model,n=e.offset;t.x=(t.x||0)+n[0],t.y=(t.y||0)+n[1]},pu={text:{lake:fu,text:function(e){var t=e.text,n=e.focusPoint;return[{type:"text",html:t,x:n[0],y:n[1]}]},textIndex:1},geometry:{lake:fu},image:{lake:fu},group:{lake:function(e){var t=e.model,n=e.offset;Yl([t],n[0],n[1])}},line:{lake:function(e){var t=e.model,n=e.extraInformations,r=e.offset,a=e.diagram;t.source&&t.source.id&&!a.find(t.source.id)&&!n[t.source.id]||t.target&&t.target.id&&!a.find(t.target.id)&&!n[t.target.id]?t.shouldRemove=!0:(["source","target"].forEach((function(e){var n=t[e];!n.id&&n.connection&&(n.connection[0]+=r[0],n.connection[1]+=r[1])})),!t.controlPoints||t.source.id&&!n[t.source.id]&&t.target.id&&!n[t.target.id]||t.controlPoints.forEach((function(e){e[0]+=r[0],e[1]+=r[1]})))}}},hu=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return v()(n,[{key:"_getOptions",value:function(e){var t=this.diagram.groupManager.group;return e.map((function(e){var n=e.options||{};return delete e.options,t&&(n.parent=t.model.id),n}))}},{key:"execute",value:function(){var e,t=this.diagram,n=this.e,r=n.clipboardData.getData("text/html"),a=n.clipboardData.getData("text/plain"),o=this.focusPoint;if(n.clipboardData.files.length>0&&(""===r&&/^.+\.\w+$/.test(a)||""===a&&/^(<meta.+?>)?<img.+?>$/.test(r)||!a||!r)&&(e=Array.from(n.clipboardData.files)),o=o||t.viewport.getFocus(),e){var i=Array.from(e).filter((function(e){return fs(e)}));i[0]&&t.emit("importimage",{files:i,from:"clipboard",x:o[0],y:o[1]})}else{var c=Pa(r);if(c){var l=c.body,s=c.extraInformations,u=function(e,t){var n=[[],[]];return e.forEach((function(e){Ue(e,(function(e){var t=e.x,r=e.y,a=e.type,o=e.source,i=e.target;"line"===a?(o&&!o.id&&o.connection&&(n[0].push(o.connection[0]),n[1].push(o.connection[1])),i&&!i.id&&i.connection&&(n[0].push(i.connection[0]),n[1].push(i.connection[1]))):null!=t&&null!=r&&(n[0].push(t),n[1].push(r))}))})),n[0]=n[0].length>0&&Math.min.apply(Math,z()(n[0]))||0,n[1]=n[1].length>0&&Math.min.apply(Math,z()(n[1]))||0,[t[0]-n[0],t[1]-n[1]]}(l,o);l.sort((function(e,t){return e.zIndex-t.zIndex})),El(l,s),l.forEach((function(e){Ci(e);var n=s[e.id];e.type||(e.type=n.rootType||"text"),e.options={},Ue(e,(function(e){delete e.zIndex}));var r=pu[e.type];r&&r.lake&&r.lake({model:e,extraInformation:n,extraInformations:s,offset:u,diagram:t})}));for(var d=[],f=[],p=0;p<l.length;p++){var h=l[p];s[h.id].hasParent?d.push(h):f.push(h)}d.sort((function(e,t){var n=s[e.id],r=s[t.id];return n.nth-r.nth})),l=f.concat(d),t.command.execute("Add",{model:l,cellOptions:this._getOptions(l)})}else if(a){var m,g=Object.keys(pu),v=Da(a),y=[];g.forEach((function(e){var t=pu[e].text;t&&y.push({textProcessor:t,textIndex:pu[e].textIndex})})),y.sort((function(e,t){return t.textIndex-e.textIndex})),y=y.map((function(e){return e.textProcessor}));for(var b=0;b<y.length&&!(m=(0,y[b])({text:a,focusPoint:o,diagram:t,structuredText:v}));b++);t.command.execute("Add",{model:m,cellOptions:this._getOptions(m)}),t.emit("afterpasteplaintext",{body:m,focusPoint:o,structuredText:v})}}}}],[{key:"registerClipboardProcessor",value:function(e,t){pu[e]=t}}]),n}();function mu(e){return e.isStem}c()(hu,"className","Paste");var gu=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.groupManager.group,n=e.selector.selections.filter(mu),r={},a=Object(I.a)();t&&(r.parent=t.model.id),n.sort((function(e,t){return e.getZIndex()-t.getZIndex()}));var o={id:a,type:"group"},i={parent:a};this.beforeZIndexCache=e.getCellsByZIndex().map((function(e){return e.model.id})),this.newGroupModel=o,this.newGroupOption=r,this.selectionIds=n.map((function(e){return e.model.id})),this.updateModel={},this.updateOption=i,this.forward()}},{key:"forward",value:function(){var e=this.diagram,t=this.newGroupModel,n=this.selectionIds,r=this.newGroupOption,a=this.updateModel,o=this.updateOption,i=e.rootGroup,c=n.map((function(t){return e.find(t)})),l=t.id,s=c[c.length-1].getAllCellsByZIndex(),u=s[s.length-1];e.add(t,r),e.update(c,a,o);var d=e.find(l);i.insertBefore(d.graphicGroup,u.graphicGroup);for(var f=0;f<c.length;f++)c[f].getAllCellsByZIndex().forEach((function(e){i.insertBefore(e.graphicGroup,d.graphicGroup)}));e.selector.select(l)}},{key:"backward",value:function(){var e=this.diagram,t=this.selectionIds,n=this.newGroupModel,r=this.newGroupOption,a=this.beforeZIndexCache,o=n.id,i=e.rootGroup,c=t.map((function(t){return e.find(t)}));r.parent?e.update(c,{parent:r.parent}):e.update(c,{},{parent:null}),e.remove(o);for(var l=0;l<a.length;l++){var s=e.find(a[l]);i.append(s.graphicGroup)}e.selector.select(t)}}]),n}();c()(gu,"className","Group"),c()(gu,"enable",(function(e){var t=e.selector.selections;return(t=t.filter(mu)).length>1}));var vu=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections,n=t.map((function(e){return e.model.id})),r={};t.forEach((function(e){e.getChildren().forEach((function(t){r[t.model.id]=e.model.id}))})),this.beforeZIndexCache=e.getCellsByZIndex().map((function(e){return e.model.id})),this.selectionIds=n,this.groupMap=r,this.forward()}},{key:"forward",value:function(){var e=this.diagram,t=this.selectionIds.map((function(t){return e.find(t)})),n=[];t.forEach((function(t){var r=t.parent&&t.parent.model.id||null;t.getChildren().forEach((function(t){n.push(t),e.update(t,{},{parent:r})}))})),e.remove(t),e.selector.select(n)}},{key:"backward",value:function(){var e=this.diagram,t=this.groupMap,n=this.selectionIds,r=this.beforeZIndexCache,a=e.rootGroup;e.add(n.map((function(e){return{id:e,type:"group"}}))),Object.keys(t).forEach((function(n){e.update(n,{},{parent:t[n]})}));for(var o=0;o<r.length;o++){var i=e.find(r[o]);a.append(i.graphicGroup)}e.selector.select(n)}}]),n}();c()(vu,"className","UnGroup"),c()(vu,"enable",(function(e){return e.selector.selections.every((function(e){return e.isGroup}))}));var yu=xo.MouseDragCanvas,bu=xo.KeyboardPressModifierKey,ku=xo.KeyboardSelectAll,wu=xo.KeyboardSwitchEditAndDragCanvas,xu={Extends:[xl,_l,Rl,Il,jl,Dl,Ml],Cells:[Rc,cl,fl,gl,bl],Commands:[Is,Bs,zs,gu,vu,hu,Fs,Vs,Hs,Xs,Ks,Zs,$s,Qs,Js,tu,nu,au,ou,iu,cu,lu,su,uu,du],defaultCursors:{read:"grab",dragCanvas:"grab",beginInsertLine:"crosshair"},settings:{line:{shape:"elbow",target:{marker:"arrow"}},vertex:{}},dataProcessor:function(e){if(e&&e.body){var t=[],n=[];e.body.forEach((function(e){t.push(e),Ue(e,(function(e){e.type&&n.push(e)}))})),t.forEach((function(e){Ci(e)})),n.forEach((function(e){!function(e){"line"===e.type&&e.controlPoints&&(e.controlPoints=e.controlPoints.filter((function(e){return e&&e[0]&&e[1]})))}(e)}))}},modes:[{mode:"edit",Behaviours:[bs,ys,ks,xs,_s,Es,gs,Xl,$l,ds,Bl,ps,hs,vs,Cs,Ms,Rs,Ps,js,Ss,bu,ku,wu,As,Ts,Ds,Ns]},{mode:"read",Behaviours:[yu]},{mode:"dragCanvas",Behaviours:[wu,yu]},{mode:"beginInsertLine",Behaviours:[Ul]},{mode:"beginInsertVertex",Behaviours:[Hl]}]};hu.registerClipboardProcessor("mindmap",{lake:function(e){var t=e.model,n=e.extraInformation,r=e.extraInformations,a=e.offset,o=e.diagram.selector.selections,i=o[0];1===o.length&&i.isMindmap&&"mindmap"===n.rootType?(delete t.type,delete t.treeEdge,i.isStem&&(t.treeEdge=n.treeEdge),t.options={parent:i.model.id}):(t.x="number"==typeof t.x?t.x:n.x,t.y="number"==typeof t.y?t.y:n.y,t.x+=a[0],t.y+=a[1],t.children&&t.children.forEach((function(e){var t=r[e.id];t.treeEdge&&t.treeEdge.stroke&&(e.treeEdge?e.treeEdge.stroke||(e.treeEdge.stroke=t.treeEdge.stroke):e.treeEdge={stroke:t.treeEdge.stroke})})))},text:function(e){var t=e.structuredText,n=e.diagram.selector.selections,r=n[0];return!(1!==n.length||!r.isMindmap)&&(t.forEach((function(e){e.options={parent:r.model.id}})),t)},textIndex:2}),xs.registerContentEditorOptions("mindmap",{}),Ss.filterCell((function(e){return!e.isMindmap}));var _u=["#A287E1","#E48484","#69B1E4","#DE81C6","#77C386","#DFB85D","#8169BF"];function Eu(e){var t=e.naturalWidth/e.naturalHeight,n=e.firstInsertRatio?e.naturalWidth*e.firstInsertRatio:e.naturalWidth;return e.width=n>=480?480:n,e.height=e.width/t,e}function Cu(e){return e<=2?3:e>=2&&e<=4?2:1}function Ou(e){var t=e.radius,n=e.outer,r=e.width+2*n,a=e.height+2*n;return"capsule"===e.shape&&(t=r<a?r/2:a/2),Sn(-n,-n,r,a,t)}var Su=Xn,Ru=function(e){b()(n,bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"getSytle",value:function(){var e=this.cell,t=e.border,n=e.computedProps,r=ct(t,{fill:!0});return r.stroke=t.stroke||n.treeEdge.stroke,r["stroke-width"]=e.getBorderStrokeWidth(),"line"===t.shape&&(r.stroke="rgba(255,255,255,0)",r.fill="rgba(255,255,255,0)"),r}},{key:"render",value:function(){var e=this.cell,t=e.graphicGroup,n=new Su;t.add(n),this.element=n,e.borderElement=n}},{key:"drawInherit",value:function(){this.draw()}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=e.cache,r=e.width,a=e.height,o=e.border,i=o.outer,c=o.radius,l=o.shape,s=this.getSytle(),u=lt(s,n.borderStyle,["stroke","fill","stroke-width"]);r===n.width&&a===n.height&&ve()(o,n.border)||(u.d=Ou({radius:c,outer:i,width:r,height:a,shape:l})),Object.keys(u).length>0&&(t.update(u),n.borderStyle=s)}},{key:"destroy",value:function(){this.element.destroy()}}]),n}();c()(Ru,"className","Border"),c()(Ru,"configName","border"),c()(Ru,"zIndex",1);var ju=Xn,Pu=function(e){b()(n,bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"setDefault",value:function(){this.element.remove()}},{key:"updateState",value:function(){var e=this.element,t=this.cell,n=t.outline,r=t.graphicGroup,a=this.getSytle();a.d=this.getPath(),t.state.highlight&&Object.assign(a,n.highlight),t.state.selected&&Object.assign(a,n.selected),t.state.beginEdit&&Object.assign(a,n.beginEdit),(t.state.highlight||t.state.selected)&&(r.add(e),e.toBack(),t.treeEdgeElement&&t.treeEdgeElement.toBack()),e.update(a)}},{key:"render",value:function(){var e=this.cell,t=e.outline,n=new ju(t.default);this.element=n,e.outlineElement=n}},{key:"getSytle",value:function(){return ct(this.cell.border,{stroke:!0,fill:!0,"stroke-width":!0})}},{key:"getPath",value:function(){var e=this.cell,t=e.width,n=e.height,r=e.outline,a=e.border,o=r.radius,i=r.outer,c=a.shape;return"line"===a.shape&&(i-=2,o-=2),Ou({radius:o,outer:i,width:t,height:n,shape:c})}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=e.cache,r=e.width,a=e.height,o=lt(this.getSytle(),n.borderStyle,["stroke","fill","stroke-width"]);r===n.width&&a===n.height||(o.d=this.getPath()),Object.keys(o).length>0&&t.update(o)}},{key:"destroy",value:function(){this.element.destroy(),T()(_()(n.prototype),"destroy",this).call(this)}}]),n}();c()(Pu,"className","Outline"),c()(Pu,"configName","outline"),c()(Pu,"zIndex",3);var Au=tr,Tu=function(e){b()(n,bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"render",value:function(){var e=this.cell,t=new Au;this.element=t,e.imageElement=t}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=e.graphicGroup,r=e.image,a=e.contentBox,o=e.diagram.imageManager,i=e.getPadding();if(r.src){if(n.children.includes(t)||n.add(t),r){var c=r.src,l=r.width,s=r.height,u=r.naturalWidth,d=r.naturalHeight;t.update({x:a.x+(a.width-r.width)/2,y:i[0],width:l,height:s}),t.dataset({raw_src:r.src}),o.setImageHref(t,c,u,d)}}else t.remove()}},{key:"destroy",value:function(){this.element.destroy(),T()(_()(n.prototype),"destroy",this).call(this)}}]),n}();function Du(e){var t=be()(e).toRgb(),n=t.r,r=t.g,a=t.b;return t.a<.5||.299*n+.587*r+.114*a>=210?"#8C8C8C":"#fff"}c()(Tu,"className","ImageSubcell"),c()(Tu,"configName","image"),c()(Tu,"zIndex",2);var Mu=[];function Nu(e,t){var n=t.colors.reduce((function(e,t){return e.concat(t)}),[]);Mu.concat(n).includes(e)||(Mu.push(e),Mu.length>10&&Mu.splice(0,1))}var Lu=$n,Iu=function(e){b()(n,bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;m()(this,n),r=t.call(this,e);var a=e.note,o=a.width,i=a.height,c=a.padding;return r.size=[o+c[1]+c[3],i+c[0]+c[2]],r}return v()(n,[{key:"render",value:function(){var e=this.cell.note,t=e.width,n=e.height,r=new Lu({width:t,height:n}),a=r.htmlContainer;a.classList.add("lake-diagram-note"),a.classList.add("lake-icon"),a.classList.add("lake-icon-diagram-cell-note"),a.style.cursor="pointer",a.style["vertical-align"]="top",a.style.color="#8C8C8C",a.style["font-size"]=t+"px",a.style.width=t+"px",a.style.height=n+"px",a.style["line-height"]=t+"px",this.element=r}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=e.model,r=e.note,a=e.graphicGroup,o=e.width,i=e.height,c=e.border;n.note?(t.attr({x:o-r.width-r.padding[1],y:(i-r.height)/2}),c.fill&&(t.htmlContainer.style.color=Du(c.fill)),a.add(t)):t.remove()}}]),n}();c()(Iu,"className","Note"),c()(Iu,"zIndex",3);var Bu=function(e){b()(n,_c);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"calculateBBox",value:function(){var e=T()(_()(n.prototype),"calculateBBox",this).call(this),t=this.cell,r=this.calculatedDOM,a=t.image&&t.image.src;return r.textContent||t.state.beginEdit||!a?e:{width:e.width+1,height:0}}},{key:"calculateUnlimitBBox",value:function(){var e=this.calculatedDOM;return e.style.width="auto",e.getBoundingClientRect()}},{key:"updateStyleSheets",value:function(){for(var e=this.cell,t=e.textAreaContentStyleSheets,n=e.model,r=e.minWidth,a=e.minHeight,o=e.getPadding(),i=o[1]+o[3]+e.getNoteWidth(),c=o[0]+o[2],l=0;l<t.length;l++){var s=t[l];"self"===s.query&&(n.width?(s.css.width=n.width-i+"px",s.css["max-width"]=""):n.image&&n.image.src&&n.image.width?this.calculateBBox().width<n.image.width&&(s.css.width=n.image.width-1+"px",s.css["max-width"]=""):(s.css["max-width"]="480px",s.css.width=""),s.css["min-width"]=r-i+"px",s.css["min-height"]=a-c+"px")}}},{key:"getPosition",value:function(){var e=this.cell,t=e.image,n=e.contentBox,r=t&&t.src&&t.height+2||0;return{x:n.x,y:n.y+r}}}]),n}();c()(Bu,"className","TextArea");var zu=function(e){b()(n,Oi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),r=$e({default:{x:0,y:0,collapsed:!1,html:"&#8203;",layout:{},image:{width:0,height:0},note:{width:14,height:14,padding:[0,8,0,0]}},anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],Subcells:[Ru,Bu,Pu,Tu,Iu],penetratedKeys:["x","y","width","height","collapsed","quadrant","zIndex","html","layout","rainbow","tapered","note","treeEdge"]},r),(e=t.call(this,r)).model.children||(e.model.children=[]),e.isMindmap=!0,e.multiSelectHighlight=!1,e.penetratedKeys=e.penetratedKeys.concat(e.Subcells.map((function(e){return e.configName}))),r.Subcells.sort((function(e,t){return e.zIndex-t.zIndex})),r.Subcells.forEach((function(t){var n=t.configName;n&&(e[n]={},!e.default[n]&&(e.default[n]={}))})),Object.assign(P()(e),d()(e.default)),e.initSubcell(),e.render(),e.eventDelegation(),e}return v()(n,[{key:"minWidth",get:function(){var e=this.border;if(e){var t=e.shape;if("rect"===t)return 38;if("capsule"===t)return 42}return 32}},{key:"minHeight",get:function(){return 16}},{key:"isPlaceholder",get:function(){return this.model.isPlaceholder}},{key:"getBBox",value:function(){var e=this.graphicGroup.rendererElement.getBBox(),t=this.x+e.x,n=this.y+e.y;return{x:t,y:n,width:e.width,height:e.height,minX:t,minY:n,maxX:t+e.width,maxY:n+e.height}}},{key:"getTimelineLayoutAlign",value:function(){var e=this.getTimelineLayoutSourceCell(),t="";return[e,this].forEach((function(e){e&&"line"===e.border.shape?t+="b":t+="c"})),t}},{key:"getTimelineLayoutSourceCell",value:function(){var e=this.parent;if(this.isStem)return null;var t=this.getNth();return 0===t?e:this.getSiblings()[t-1]}},{key:"showCollapsedButton",value:function(){this.state.collapsedButtonVisible||(this.state.collapsedButtonVisible=!0,this.updateState())}},{key:"hideCollapsedButton",value:function(){this.state.collapsedButtonVisible&&(this.state.collapsedButtonVisible=!1,this.updateState())}},{key:"findSubcell",value:function(e){return this.subcells.find((function(t){return t.constructor.className===e}))}},{key:"shouldRefreshEndEditContent",value:function(){return this.isContentEmpty()&&this.image&&this.image.src}},{key:"canStroke",value:function(){return"line"!==this.border.shape}},{key:"canStrokeWidth",value:function(){return!1}},{key:"canStrokeStyle",value:function(){return!1}},{key:"canFill",value:function(){return"line"!==this.border.shape}},{key:"get",value:function(e){var t=T()(_()(n.prototype),"get",this).call(this,e);return"border"===e?(t.stroke=t.stroke||this.computedProps.treeEdge.stroke,t["stroke-width"]=this.getBorderStrokeWidth(),t):"treeEdge"===e?(t.stroke=this.computedProps.treeEdge.stroke,t["stroke-width"]=this.getTreeEdgeStrokeWidth(),t):t}},{key:"getKeyShape",value:function(){return this.borderElement}},{key:"getPadding",value:function(){return[4,8,4,8]}},{key:"getBorderStrokeWidth",value:function(){return this.border["stroke-width"]||this.getDefaultStrokeWidth()}},{key:"getTreeEdgeStrokeWidth",value:function(){return this.computedProps.treeEdge["stroke-width"]||this.getDefaultStrokeWidth()}},{key:"getDefaultStrokeWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.depth,t=this.stem,n=t.tapered;return n&&Cu(e)||3}},{key:"initSubcell",value:function(){var e=this;this.subcells=this.Subcells.map((function(t){return new t(e)}))}},{key:"eventDelegation",value:function(){var e=this.graphicGroup,t=this.imageElement;this.delegateEvent(t,"mouseenter","mindmapcellimage:mouseenter"),this.delegateEvent(t,"mouseleave","mindmapcellimage:mouseleave"),this.delegateEvent(e,"mouseenter","mindmapcell:mouseenter"),this.delegateEvent(e,"mouseleave","mindmapcell:mouseleave")}},{key:"render",value:function(){this.subcells.forEach((function(e){e.render()})),this.updateModel(this.model)}},{key:"draw",value:function(){this.drawInner(),this.updateCache(),this.updateState()}},{key:"updateModel",value:function(e){e&&""===e.html&&(e.html="&#8203;"),T()(_()(n.prototype),"updateModel",this).call(this,e),this.calculate()}},{key:"isInCollapsed",value:function(){for(var e=this.parent;e;){if(!0===e.collapsed)return!0;e=e.parent}return!1}},{key:"getCellQuadrant",value:function(){for(var e=this;1!==e.depth;)e=e.parent;return e.model.quadrant}},{key:"drawInner",value:function(){this.subcells.forEach((function(e){e.draw()})),this.drawCollapse(),this.drawPosition()}},{key:"drawInherit",value:function(){this.subcells.forEach((function(e){e.drawInherit()}))}},{key:"drawPosition",value:function(){this.subcells.forEach((function(e){e.drawPosition()}));var e=this.graphicGroup,t=this.x,n=this.y,r=this.cache;if(!r.matrix||t!==r.matrix[6]||n!==r.matrix[7]){var a=[1,0,0,0,1,0,t,n,1];e.update({matrix:a}),r.matrix=a,this.matrix=a}}},{key:"drawCollapse",value:function(){this.isInCollapsed()?this.hide():this.show()}},{key:"getNoteWidth",value:function(){return this.model.note&&this.findSubcell("Note").size[0]||0}},{key:"calculate",value:function(){this.calculateSize()}},{key:"calculateSize",value:function(){var e=this,t=this.cache,n=this.getPadding(),r={noteWidth:this.getNoteWidth(),padding:n},a=this.findSubcell("TextArea");a.update(),this.textAreaBBox=a.getBBox(),t.html&&this.html&&t.html!==this.html&&(this.model.height=null),["width","height","html","image"].some((function(n){return t[n]!==e[n]}))&&(this.calculateImageSize(r),this.contentHeight=this.getContentHeight(r),this.contentWidth=this.getContentWidth(r),this.height=this.getHeight(r),this.width=this.getWidth(r),this.contentBox=this.getContentBox(r))}},{key:"getContentBox",value:function(e){var t=e.padding,n=e.noteWidth,r=this.width,a=this.contentWidth,o=this.contentHeight;return{x:(r-a-t[1]-t[3]-n)/2+t[3],y:t[0],width:a,height:o}}},{key:"getHasModelSizeContentWidth",value:function(e,t){var n,r=this.model,a=this.border,o=e[1]+e[3]+t,i=r.width-o;return"capsule"===a.shape&&(n=r.width>r.height?r.width-r.height+o:r.width/2,i=Math.min(i,n)),i}},{key:"calculateImageSize",value:function(e){var t=e.padding,r=e.noteWidth,a=this.image,o=this.model;if(!a.height||o.height){if(!a.src)return Object.assign(a,{width:0,height:0});var i=a.naturalWidth/a.naturalHeight,c=this.getTextAreaHeight(),l=this.getHasModelSizeContentWidth(t,r),s=o.height-t[0]-t[2]-c-4,u=((s=Math.max(s>0?s:0,36))>0?l/s:i)<=i?l/i:s,d=u*i;T()(_()(n.prototype),"updateModel",this).call(this,{image:{width:d,height:u}})}}},{key:"getWidth",value:function(e){var t,n=e.padding,r=e.noteWidth,a=this.isPlaceholder,o=this.model,i=this.border,c=this.contentWidth,l=this.contentHeight;if(a)return o.width;if(o.width)t=o.width;else if(t=c+n[1]+n[3]+r,"capsule"===i.shape){var s=n[1]+n[3];l>s&&(t+=l-s)}return Ze(Math.ceil(t),this.minWidth)}},{key:"getHeight",value:function(e){var t=e.padding;return this.isPlaceholder?this.model.height:Ze(this.contentHeight+t[0]+t[2],this.minHeight)}},{key:"getContentWidth",value:function(e){var t=e.padding,n=e.noteWidth,r=this.textAreaBBox,a=this.image,o=this.model;return o.width?o.width-n-t[1]-t[3]:Math.ceil(Math.max(r.width,a.width))||100}},{key:"getTextAreaHeight",value:function(){var e=this.textAreaBBox,t=this.image,n=this.diagram;return t.src&&this.isContentEmpty()&&!n.contentEditor.isBegin?0:e.height}},{key:"getContentHeight",value:function(){var e=this.image,t=this.getTextAreaHeight();return Math.ceil(t+e.height)}},{key:"updateState",value:function(){this.setDefault(),this.subcells.forEach((function(e){e.updateState()}))}},{key:"setDefault",value:function(){this.subcells.forEach((function(e){e.setDefault()}))}},{key:"updateCache",value:function(){this.cache.width=this.width,this.cache.height=this.height,this.cache.html=this.html,this.cache.collapsed=this.collapsed}},{key:"preventDelete",value:function(){return!1}},{key:"beginEditContent",value:function(){this.state.beginEdit=!0,this.updateState()}},{key:"endEditContent",value:function(){this.state.beginEdit=!1,this.updateState()}},{key:"getEventObject",value:function(e){return{cell:this,nativeEvent:e}}},{key:"destroy",value:function(){this.subcells.forEach((function(e){e.destroy()})),T()(_()(n.prototype),"destroy",this).call(this)}}]),n}();c()(zu,"className","MindmapBase");var Fu=Xn,Uu=Lr,Vu=function(e){b()(n,bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"render",value:function(){var e=this.cell,t=e.graphicGroup,n=e.parent,r=new Fu({fill:"none","stroke-linecap":"round","stroke-linejoin":"round"});r.rendererElement.style["pointer-events"]="none",t.add(r),this.element=r,e.treeEdgeElement=r,n&&n.isStem&&this._createClipPath()}},{key:"_createClipPath",value:function(){var e=this.cell,t=this.element,n=e.parent,r=e.diagram;if(n){var a=r.defs,o=Object(I.a)(),i=new Uu({id:o}),c=new Fu({"fill-rule":"nonzero"});i.add(c),a.add(i),this.treeEdgeClipPath=c,this.clipPath=i,t.update({"clip-path":"url(#".concat(o,")")})}}},{key:"VH",value:function(e,t){return"M".concat(e[0],",").concat(e[1]," L").concat(e[0],",").concat(t[1]," L").concat(t[0],",").concat(t[1])}},{key:"curveHVH",value:function(){var e,t,n,r,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=this.cell,l=c.parent,s=.5,u=4,d=4,f=36,p="";return c.x>l.x?(t=l.isStem?[l.x-c.x+l.width-f,l.y-c.y+l.height/2]:[l.x-c.x+l.width,l.y-c.y+l.height/2+o],(n=[0,c.height/2])[1]+=i,r=[t[0]+u,t[1]],e=(a=[n[0]-d,n[1]])[0]-r[0],p+="M".concat(t[0]," ").concat(t[1]," "),p+="L".concat(r[0]," ").concat(r[1]," "),p+="C".concat(r[0]+e*(1-s)," ").concat(r[1],", ").concat(a[0]-e*s," ").concat(a[1],", ").concat(a[0]," ").concat(a[1]," "),p+="L".concat(n[0]," ").concat(n[1]),"line"===c.border.shape&&(p+="L".concat(n[0]+c.width," ").concat(n[1]))):(t=l.isStem?[l.x-c.x+f,l.y-c.y+l.height/2]:[l.x-c.x,l.y-c.y+l.height/2+o],(n=[c.width,c.height/2])[1]+=i,r=[t[0]-u,t[1]],a=[n[0]+d,n[1]],e=r[0]-a[0],p+="M".concat(t[0]," ").concat(t[1]," "),p+="L".concat(r[0]," ").concat(r[1]," "),p+="C".concat(r[0]-e*(1-s)," ").concat(r[1],", ").concat(a[0]+e*s," ").concat(a[1],", ").concat(a[0]," ").concat(a[1]," "),p+="L".concat(n[0]," ").concat(n[1]),"line"===c.border.shape&&(p+="L".concat(n[0]-c.width," ").concat(n[1]))),p}},{key:"VHV",value:function(){var e,t,n=this.cell,r=n.parent,a={x:r.x-n.x,y:r.y-n.y},o="";n.y<r.y?(e=[a.x+r.width/2,a.y],t=[n.width/2,n.height]):(e=[a.x+r.width/2,a.y+r.height],t=[n.width/2,0]);var i=(e[1]+t[1])/2;return o+="M".concat(e[0]," ").concat(e[1]," "),o+="L".concat(e[0]," ").concat(i," "),(o+="L".concat(t[0]," ").concat(i," "))+"L".concat(t[0]," ").concat(t[1])}},{key:"HVH",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this.cell,i=o.parent,c="";return o.x>i.x?(e=i.isStem?[i.x-o.x+i.width,i.y-o.y+i.height/2]:[i.x-o.x+i.width,i.y-o.y+i.height/2+r],(t=[0,o.height/2])[1]+=a,n=(i.x-o.x+i.width)/2,"line"===o.border.shape&&(t[0]+=o.width)):(e=1===o.depth?[i.x-o.x,i.y-o.y+i.height/2]:[i.x-o.x,i.y-o.y+i.height/2+r],(t=[o.width,o.height/2])[1]+=a,n=(i.x-o.x+o.width)/2,"line"===o.border.shape&&(t[0]-=o.width)),c+="M".concat(e[0]," ").concat(e[1]," "),c+="L".concat(n," ").concat(e[1]," "),(c+="L".concat(n," ").concat(t[1]," "))+"L".concat(t[0]," ").concat(t[1])}},{key:"curveVHV",value:function(){var e,t,n,r,a,o=this.cell,i=o.parent,c={x:i.x-o.x,y:i.y-o.y},l="",s=1===o.depth?0:8;return o.y<i.y?(t=[c.x+i.width/2,c.y],n=[o.width/2,o.height],r=[t[0],t[1]-s],a=[n[0],n[1]+0],e=r[1]-a[1]):(t=[c.x+i.width/2,c.y+i.height],n=[o.width/2,0],r=[t[0],t[1]+s],a=[n[0],n[1]-0],e=r[1]-a[1]),l+="M".concat(t[0]," ").concat(t[1]," "),l+="L".concat(r[0]," ").concat(r[1]," "),(l+="C".concat(r[0]," ").concat(r[1]-.5*e,", ").concat(a[0]," ").concat(a[1]+.5*e,", ").concat(a[0]," ").concat(a[1]," "))+"L".concat(n[0]," ").concat(n[1])}},{key:"getStandardLayoutPath",value:function(){var e=this.cell,t=e.parent,n=e.computedProps,r=e.upDirection,a=n.treeEdge.shape;if(0===r[0])return"polyline"===a?this.VHV():this.curveVHV();var o=0,i=0;return"line"===t.border.shape&&(o=t.height/2),"line"===e.border.shape&&(i=e.height/2),"polyline"===a?this.HVH(o,i):this.curveHVH(o,i)}},{key:"getIndentLayoutPath",value:function(){var e,t,n=this.cell,r=n.parent,a=n.computedProps,o=n.border,i=a.treeEdge.shape,c={x:r.x-n.x,y:r.y-n.y},l=r.x+r.width/2-(n.x+n.width)>0,s=r.y-n.y-n.height>0,u="";if(s?(e=[c.x+r.width/2,c.y],t=l?"line"===o.shape?[0,n.height]:[n.width,n.height/2]:"line"===o.shape?[n.width,n.height]:[0,n.height/2]):(e=[c.x+r.width/2,c.y+r.height],t=l?"line"===o.shape?[0,n.height]:[n.width,n.height/2]:"line"===o.shape?[n.width,n.height]:[0,n.height/2]),"polyline"===i)u+="M".concat(e[0],",").concat(e[1]),u+="L".concat(e[0],",").concat(t[1]),u+="L".concat(t[0],",").concat(t[1]);else{var d=16;if(u+="M".concat(e[0],",").concat(e[1]),s){var f=Math.abs(t[1]-e[1]);f<=d&&(d=f),l?(u+="L".concat(e[0],",").concat(t[1]+d),u+="A ".concat(d," ").concat(d,", 0, 0, 0, ").concat(e[0]-d,", ").concat(t[1]),u+="L".concat(t[0],",").concat(t[1])):(u+="L".concat(e[0],",").concat(t[1]+d),u+="A ".concat(d," ").concat(d,", 0, 0, 1, ").concat(e[0]+d,", ").concat(t[1]),u+="L".concat(t[0],",").concat(t[1]))}else l?(u+="L".concat(e[0],",").concat(t[1]-d),u+="A ".concat(d," ").concat(d,", 0, 0, 1, ").concat(e[0]-d,", ").concat(t[1]),u+="L".concat(t[0],",").concat(t[1])):(u+="L".concat(e[0],",").concat(t[1]-d),u+="A ".concat(d," ").concat(d,", 0, 0, 0, ").concat(e[0]+d,", ").concat(t[1]),u+="L".concat(t[0],",").concat(t[1]))}return u}},{key:"getTimelineLayoutPath",value:function(){var e,t,n=this.cell,r=n.upSignX,a=n.getTimelineLayoutAlign(),o=n.getTimelineLayoutSourceCell(),i={x:o.x-n.x,y:o.y-n.y};return 1===r?(e="b"===a[0]?[i.x+o.width,i.y+o.height]:[i.x+o.width,i.y+o.height/2],t="b"===a[1]?[n.width,n.height]:[0,n.height/2]):-1===r&&(e="b"===a[0]?[i.x,i.y+o.height]:[i.x,i.y+o.height/2],t="b"===a[1]?[0,n.height]:[n.width,n.height/2]),e&&"M".concat(e[0],",").concat(e[1]," L").concat(t[0],",").concat(t[1])}},{key:"getPath",value:function(){var e=this.cell.upLayoutType;return e?"indent"===e?this.getIndentLayoutPath():"timeline"===e?this.getTimelineLayoutPath():this.getStandardLayoutPath():""}},{key:"getSytle",value:function(){var e=this.cell;return{stroke:e.computedProps.treeEdge.stroke,"stroke-width":e.getTreeEdgeStrokeWidth()}}},{key:"drawClipPath",value:function(){var e=this.cell,t=this.treeEdgeClipPath;if(t){var n=e.parent,r={x:n.x-e.x,y:n.y-e.y},a=n.getPadding(),o=[r.x+a[3],r.y+a[0]],i=[r.x+n.width-a[1],r.y+n.height-a[2]],c=[Math.min(0,r.x)-50,Math.min(0,r.y)-50],l=[Math.max(e.width,r.x+n.width)+50,Math.max(e.height,r.y+n.height)+50];t.update({d:Fn(c[0],c[1],l[0],l[1],o[0],o[1],i[0],i[1])})}}},{key:"_drawPath",value:function(){var e=this.cell,t=this.element,n=e.cache,r=this.getPath();n.treeEdgePath!==r&&(t.update({d:r}),n.treeEdgePath=r,this.drawClipPath())}},{key:"drawPosition",value:function(){this._drawPath()}},{key:"drawInherit",value:function(){this.draw()}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=e.cache,r=this.getSytle(),a=lt(r,n.treeEdgeStyle,["stroke","stroke-width"]);this._drawPath(),Object.keys(a).length>0&&(t.update(a),n.treeEdgeStyle=d()(r))}},{key:"destroy",value:function(){this.element.destroy(),this.clipPath&&this.clipPath.destroy()}}]),n}();c()(Vu,"className","TreeEdge"),c()(Vu,"configName","treeEdge"),c()(Vu,"zIndex",1);var qu=pn,Hu=$n,Wu=Xn,Yu=gr,Gu=ar,Xu=document.createElement("span");Xu.style.visibility="hidden",Xu.style.fontSize="12px",Xu.style.fontFamily="system-ui";var Ku=function(e){b()(n,bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"render",value:function(){var e=this.cell,t=new qu;this.element=t,e.delegateEvent(t,"click","collapsedbutton:click"),e.collapsedButtonElement=t}},{key:"measureText",value:function(e){var t=this.cell.diagram.calculatedContainer;Xu.innerHTML=e,t.appendChild(Xu);var n=Xu.getBoundingClientRect().width;return Xu.remove(),n}},{key:"_drawHotArea",value:function(){var e=this.element,t=this.bbox,n=new Wu;n.update({fill:"rgba(255, 255, 255, 0)",d:Sn(-8,-8,t.width+16,t.height+16)}),e.add(n),n.toBack()}},{key:"_getCurrent",value:function(e){var t=this.cell,n=t.computedProps.treeEdge,r=t.x,a=t.y,o=t.width,i=t.height;return e+r+a+n.stroke+o+i}},{key:"_setBBox",value:function(){var e,t,n=this.direction,r=this.circleButtonWidth,a=this.circleButtonHeight;switch(n){case"top":case"bottom":e=r,t=a+8;break;default:t=a,e=r+8}this.bbox={width:e,height:t}}},{key:"drawCollapse",value:function(){var e,t=this.cell,n=this.element,r=this.direction,a=t.computedProps,o=t.diagram,i=t.graphicGroup,c=o.viewport.zoom;switch(n.clear(),i.add(n),r){case"top":e=-Math.PI/2;break;case"bottom":e=Math.PI/2;break;case"left":e=Math.PI;break;default:e=0}var l=["border-radius: 16px","width: ".concat(16,"px"),"height: ".concat(16,"px"),"cursor: pointer","background: white","border: 3px solid ".concat(a.treeEdge.stroke),"display: inline-block"];R.ua.macos||l.unshift("position: absolute");var s=[1,0,0,0,1,0,0,0,1];ce.a.translate(s,s,[8,8,1]),ce.a.rotate(s,s,e),ce.a.translate(s,s,[-8,-8,1]);var u=new Hu({html:'<span style="'.concat(l.join(";"),'" data-diagram-collapsed-button=true data-testid="diagram-collapsed-button"></span>'),x:0,y:0,width:0,height:0,matrix:s});u.css({"line-height":"normal"}),n.add(u);var d=u.htmlContainer.querySelector("span"),f=d.getBoundingClientRect(),p=f.width/c,h=f.height/c;u.update({width:p,height:h}),d.addEventListener("mouseenter",(function(){d.style.background=a.treeEdge.stroke,d.style["background-repeat"]="no-repeat",d.style["background-position"]="1px 1px",d.style["background-image"]="url(".concat("https://gw.alipayobjects.com/zos/bmw-prod/c8f8bbfd-df13-421d-85f1-e310d67c89fc.svg",")")})),d.addEventListener("mouseout",(function(){d.style.background="white",d.style["background-image"]="none"})),this.circleButtonWidth=p,this.circleButtonHeight=h,this._setBBox(),this._drawTail(),this._drawHotArea(),this._updatePosition(),this.current=this._getCurrent("collapseButton")}},{key:"drawExpand",value:function(){var e=this.cell,t=this.element,n=e.computedProps,r=e.graphicGroup,a=n.treeEdge.stroke;t.clear(),r.add(t);var o=-1;e.deepEach((function(){o++}));var i=this.measureText(String(o))+8,c=Du(a),l=new Yu({x:4,y:3,text:"".concat(o),fill:c,"dominant-baseline":"hanging"});l.dataset({diagramCollapsedButton:!0}),l.css({fontFamily:"system-ui",fontSize:"12px",cursor:"pointer"});var s=new Gu({x:0,y:0,rx:8,width:i,height:16,fill:"".concat(a)});t.add(l),l.before(s),this.circleButtonWidth=i,this.circleButtonHeight=16,this._setBBox(),this._drawTail(),this._drawHotArea(),this._updatePosition(),this.current=this._getCurrent("expandButton")}},{key:"_drawTail",value:function(){var e,t=this.element,n=this.circleButtonWidth,r=this.circleButtonHeight,a=this.direction,o=this.cell,i=o.computedProps,c={x:n/2,y:r/2};switch(a){case"top":e="M".concat(c.x," ").concat(r," L").concat(c.x," ").concat(r+8);break;case"bottom":e="M".concat(c.x," 0 L").concat(c.x," -").concat(8);break;case"left":e="M".concat(n," ").concat(c.y," L").concat(n+8," ").concat(c.y);break;default:e="M0 ".concat(c.y," L-").concat(8," ").concat(c.y)}t.add(new Wu({d:e,stroke:i.treeEdge.stroke,"stroke-width":o.getTreeEdgeStrokeWidth()}))}},{key:"_updatePosition",value:function(){var e,t,n=this.cell,r=this.element,a=this.direction,o=this.bbox,i=n.border,c=o.width,l=o.height;switch(a){case"top":e=n.width/2-c/2,t=-l;break;case"bottom":e=n.width/2-c/2,t=n.height+8;break;case"left":t="line"===i.shape?n.height-l/2:n.height/2-l/2,e=-c;break;default:t="line"===i.shape?n.height-l/2:n.height/2-l/2,e=n.width+8}r.update({matrix:[1,0,0,0,1,0,e,t,1]})}},{key:"drawPosition",value:function(){this.draw()}},{key:"updateState",value:function(){this.draw()}},{key:"_setDirection",value:function(){var e=this.cell,t=e.downLayoutType,n=e.downDirection,r=e.stem;if("standard"===t)if(0===n[0])Math.sign(-1===n[1])?this.direction="top":this.direction="bottom";else{var a=e.x+e.width/2<r.x+r.width/2;this.direction=a?"left":"right"}else"indent"===t?-1===Math.sign(n[1])?this.direction="top":this.direction="bottom":this.direction="right"}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=this.current,r=e.state;this._setDirection(),e.canExpand()?n!==this._getCurrent("expandButton")&&this.drawExpand():e.canCollapse()&&r.collapsedButtonVisible?n!==this._getCurrent("collapseButton")&&this.drawCollapse():("none"!==n&&t.remove(),this.current=this._getCurrent("none"))}},{key:"destroy",value:function(){this.element.destroy()}}]),n}();function Zu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zu(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c()(Ku,"className","CollapsedButton"),c()(Ku,"configName","bollapsedButton"),c()(Ku,"zIndex",1);var Qu=function(e){b()(n,zu);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,n);var r=14,a=1===e.depth?400:"normal",o=1===e.depth?'PingFangSC-Medium, "PingFang SC"':'PingFangSC-Regular, "PingFang SC"',i=e.model&&e.model.defaultContentStyle||{};return e=$e({default:{collapsedButton:{},border:{outer:0,radius:3,shape:"line",fill:"rgba(255,255,255,0)"},outline:{outer:3,radius:6,fill:"rgba(255,255,255,0)","stroke-width":1,highlight:{stroke:"#349BF9",fill:"rgba(255,255,255,0)","stroke-width":1},beginEdit:{stroke:"#096dd9",fill:"rgba(255,255,255,0)","stroke-width":1},selected:{stroke:"#096dd9",fill:"rgba(52, 155, 249, .15)","stroke-width":1}},treeEdge:{}},textAreaContentStyleSheets:[{query:"self",css:$u({outline:"none","white-space":"normal","letter-spacing":"0.1px","font-size":"".concat(r,"px"),"font-weight":"".concat(a),"font-family":o,"line-height":"1.74","word-break":"break-word",color:"#262626"},i)}],Subcells:[Vu,Ku]},e),t.call(this,e)}return v()(n,[{key:"getPadding",value:function(){var e,t=this.model;return e=1===this.depth?"line"===this.border.shape?[2,8,2,8]:[6,12,6,12]:this.depth>1?"line"===this.border.shape?[2,8,2,8]:[6,8,6,8]:T()(_()(n.prototype),"getPadding",this).call(this),t.note&&(e[1]/=2),e}}]),n}();c()(Qu,"className","MindmapCell");var Ju=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,e),this.options=t,Object.assign(this,t)}return v()(e,[{key:"getHGap",value:function(){return 20}},{key:"getVGap",value:function(){return 20}},{key:"beforeInsert",value:function(e){var t=this.zNodes;e.isSubTree?t.unshift(e.zNodes):t.unshift(e)}},{key:"getAxisNorm",value:function(e,t,n){var r=e.isSubTree?"t":"";return{axis:r+t,norm:r+n}}},{key:"getAxisNormValue",value:function(e,t,n){var r=e.isSubTree?"t":"",a=r+t,o=r+n;return{coord:null==e[a]?e[t]:e[a],normValue:null==e[o]?e[n]:e[o]}}},{key:"setNodeCoord",value:function(e,t,n){if(e.isSubTree){var r="t"+t,a=e[r]-n;this.deepEach(e,(function(e){e.isSubTree&&(e[r]-=a),e[t]-=a}))}else e[t]=n}},{key:"postOrder",value:function(e,t,n){var r=this;!e.children||e.isSubTree&&n||e.collapsed||e.children.forEach((function(n){r.postOrder(n,t,e)})),t(e,n)}},{key:"postOrderWithOutSelf",value:function(e,t,n){var r=this;!e.children||e.isSubTree&&n||e.collapsed||e.children.forEach((function(n){r.postOrderWithOutSelf(n,t,e),t(n,e)}))}},{key:"preOrder",value:function(e,t,n){var r=this,a=e.children;t(e,n),!a||e.isSubTree&&n||e.collapsed||e.children.forEach((function(n){r.preOrder(n,t,e)}))}},{key:"preOrderWithOutSelf",value:function(e,t,n){var r=this;!e.children||e.isSubTree&&n||e.collapsed||e.children.forEach((function(n){t(n,e),r.preOrderWithOutSelf(n,t,e)}))}},{key:"deepEach",value:function(e,t){var n=this,r=e.children;t(e),r&&e.children.forEach((function(e){n.deepEach(e,t)}))}},{key:"move",value:function(e,t,n){this.deepEach(e,(function(e){e.x+=t,e.y+=n,e.isSubTree&&(e.tx+=t,e.ty+=n)}))}},{key:"moveX",value:function(e,t){this.deepEach(e,(function(e){e.x+=t,e.isSubTree&&(e.tx+=t)}))}},{key:"moveY",value:function(e,t){this.deepEach(e,(function(e){e.y+=t,e.isSubTree&&(e.ty+=t)}))}},{key:"layout",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.constructor,r=n.VAILD_DIRECTION_ANGLES,a=e.directionAngle;this.zNodes=t,r.some((function(e){return pt(e,a)}))?(this.setKeys(e),this.normalize(e),this.setCoord(e),this.setZIndex(e)):console.warn("The layout does not support the direction")}},{key:"setKeys",value:function(){}},{key:"normalize",value:function(){}},{key:"setCoord",value:function(){}},{key:"setZIndex",value:function(){}}]),e}();c()(Ju,"VAILD_DIRECTION_ANGLES",[]);var ed=function(e){b()(n,Ju);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"_setDepth",value:function(e){var t=this,n=this.depthAxis,r=this.depthNorm,a=this.depthGap,o=this.isPositive;this.preOrderWithOutSelf(e,(function(e){var i,c=t.getAxisNorm(e,n,r).norm,l=e.parent,s=e[a];i=o?l[n]+l[r]+s:l[n]-e[c]-s,t.setNodeCoord(e,n,i)}))}},{key:"getBreadthGap",value:function(e,t){var n,r,a=this.breadthGap;if(e.parent===t.parent)return t[a];e.depth<t.depth?(n=t,r=e):(n=e,r=t);for(var o=n.depth-r.depth,i=0;i<r.ancestors.length;i++){var c=i+o;if(r.ancestors[i]===n.ancestors[c])return n.ancestors[c-1][a]}}},{key:"getBreadthByChildren",value:function(e){var t=e.children,n=e.breadthAxis,r=e.node,a=e.breadthNorm,o=t.length,i=this.getAxisNormValue(t[0],n,a),c=this.getAxisNormValue(t[o-1],n,a),l=this.getAxisNormValue(r,n,a);return(i.coord+c.coord+c.normValue-l.normValue)/2}},{key:"_setBreadth",value:function(e){var t,n=this,r=this.breadthAxis,a=this.breadthNorm,o=this.breadthGap,i=this.isVertical,c=e.x,l=e.y;this.postOrderWithOutSelf(e,(function(e,c){var l,s,u=n.getAxisNorm(e,r,a),d=u.axis,f=u.norm;if(t){var p=e.children;if(!p||0===p.length||e.collapsed||e.isSubTree){var h=n.getBreadthGap(e,t);l=t.maxBreadth+h}else{l=n.getBreadthByChildren({children:p,breadthAxis:r,node:e,breadthNorm:a,norm:f,isVertical:i}),e.minBreadth=Math.min(e.minBreadth,l);var m=c.children[c.children.indexOf(e)-1];if(m){var g=m.maxBreadth+m[o]-e.minBreadth;g>0&&(s=g)}}}else l=0;n.setNodeCoord(e,r,l),s&&(i?n.move(e,s,0):n.move(e,0,s),e.maxBreadth+=s);var v=e[d]+e[f];e.maxBreadth=Math.max(v,e.maxBreadth||0),c.maxBreadth=Math.max(v,e.maxBreadth,c.maxBreadth||0);var y=e[d];e.minBreadth=Math.min(y,e.minBreadth||1/0),c.minBreadth=Math.min(y,e.minBreadth,c.minBreadth||1/0),t=e})),e[r]=this.getBreadthByChildren({children:e.children,breadthAxis:r,node:e,breadthNorm:a,norm:a,isVertical:i}),i?this.move(e,c-e.x,0):this.move(e,0,l-e.y)}},{key:"setKeys",value:function(e){var t=e.directionAngle,n=pt(t,Math.PI/2)||pt(t,3*Math.PI/2);n?(this.breadthAxis="x",this.breadthNorm="w",this.breadthGap="hgap",this.depthAxis="y",this.depthNorm="h",this.depthGap="vgap"):(this.breadthAxis="y",this.breadthNorm="h",this.breadthGap="vgap",this.depthAxis="x",this.depthNorm="w",this.depthGap="hgap"),pt(t,0)||pt(t,Math.PI/2)?this.isPositive=!0:this.isPositive=!1,this.isVertical=n}},{key:"setZIndex",value:function(e){var t=this,n=this.breadthAxis,r=this.breadthNorm;this.preOrder(e,(function(a){var o=a.children;if(e!==a&&t.beforeInsert(a),o&&!a.collapsed){var i=a[n]+a[r]/2;o.sort((function(e,t){return Math.abs(e[n]+e[r]-i)-Math.abs(t[n]+t[r]-i)}))}}))}},{key:"normalize",value:function(e){var t=this,n=this.isVertical;this.preOrderWithOutSelf(e,(function(e,t){e.ancestors=[t].concat(t.ancestors||[])})),this.preOrder(e,(function(e){var r={node:e,isVertical:n};e.vgap=t.getVGap(r),e.hgap=t.getHGap(r)}))}},{key:"setCoord",value:function(e){this._setDepth(e),this._setBreadth(e)}}]),n}();c()(ed,"className","Standard"),c()(ed,"VAILD_DIRECTION_ANGLES",[0,Math.PI/2,Math.PI,3*Math.PI/2]),c()(ed,"QUADRANTS",2);var td=function(e){b()(n,Ju);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"setKeys",value:function(e){var t,n,r=e.directionAngle,a=this.constructor.MAIN_AXIS;pt(r,Math.PI/4)?(t=!0,n=!0):pt(r,3*Math.PI/4)?(t=!1,n=!0):pt(r,5*Math.PI/4)?(t=!1,n=!1):pt(r,7*Math.PI/4)&&(t=!0,n=!1),"x"===a?(this.mainAxis="x",this.secondaryAxis="y",this.mainNorm="w",this.secondaryNorm="h",this.mainGap="hgap",this.secondaryGap="vgap",this.isMainPositive=t,this.isSecondaryPositive=n):(this.mainAxis="y",this.secondaryAxis="x",this.mainNorm="h",this.secondaryNorm="w",this.mainGap="vgap",this.secondaryGap="hgap",this.isMainPositive=n,this.isSecondaryPositive=t)}},{key:"normalize",value:function(e){var t=this;this.preOrder(e,(function(e){var n={node:e};e.vgap=t.getVGap(n),e.hgap=t.getHGap(n)}))}},{key:"setCoord",value:function(e){this._setMainCoord(e),this._setSecondaryCoord(e)}},{key:"_setMainCoord",value:function(e){var t=this,n=this.mainAxis,r=this.mainNorm,a=this.mainGap,o=this.isMainPositive,i=e[n],c=e[r];this.preOrderWithOutSelf(e,(function(e){var l,s=t.getAxisNorm(e,n,r).norm,u=e[a],d=e[s];i=l=o?i+c+u:i-d-u,c=d,t.setNodeCoord(e,n,l)}))}},{key:"_setSecondaryCoord",value:function(e){var t=this,n=this.secondaryAxis,r=this.secondaryNorm,a=this.secondaryGap,o=this.isSecondaryPositive;this.preOrderWithOutSelf(e,(function(e){var i,c=t.getAxisNorm(e,n,r).norm,l=e.parent,s=e[a];i=o?l[n]+l[r]/2+s:l[n]+l[r]/2-e[c]-s,t.setNodeCoord(e,n,i)}))}},{key:"setZIndex",value:function(e){var t=this,n=this.mainAxis,r=this.mainNorm;this.preOrder(e,(function(a){var o=a.children;if(e!==a&&t.beforeInsert(a),o&&!a.collapsed){var i=a[n]+a[r]/2;o.sort((function(e,t){return Math.abs(e[n]+e[r]-i)-Math.abs(t[n]+t[r]-i)}))}}))}}]),n}();function nd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nd(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c()(td,"className","Indent"),c()(td,"VAILD_DIRECTION_ANGLES",[Math.PI/4,3*Math.PI/4,5*Math.PI/4,7*Math.PI/4]),c()(td,"QUADRANTS",4),c()(td,"MAIN_AXIS","y");var ad=function(e){b()(n,Ju);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),t.call(this,rd({hgap1:40,hgap2:32,vgap1:0,vgap2:0,compact:!1},e))}return v()(n,[{key:"normalize",value:function(e){var t=this;this.preOrder(e,(function(e){var n={node:e};e.align=t.getAlign(n)}))}},{key:"setKeys",value:function(e){var t=e.directionAngle;pt(t,0)?(this.mainAxis="x",this.secondaryAxis="y",this.mainNorm="w",this.secondaryNorm="h",this.mainGap="hgap",this.secondaryGap="vgap",this.secondaryDownSign="downSignY",this.isMainPositive=!0):pt(t,Math.PI)&&(this.mainAxis="x",this.secondaryAxis="y",this.mainNorm="w",this.secondaryNorm="h",this.mainGap="hgap",this.secondaryGap="vgap",this.secondaryDownSign="downSignY",this.isMainPositive=!1)}},{key:"setCoord",value:function(e){this._setMainCoord(e),this._setSecondaryCoord(e)}},{key:"_setMainCoord",value:function(e){var t=this,n=this.secondaryDownSign,r=this.mainAxis,a=this.mainNorm,o=this.mainGap,i=this.isMainPositive,c=this.compact;if(i){var l=e[r]+e[a],s=l,u=l,d=l;e.children.forEach((function(e){var i,f=t.getAxisNorm(e,r,a).norm;-1===e[n]&&c?(d>s?(i=t["".concat(o,"1")],l=d):(i=t["".concat(o,"2")],l=s),s=(l+=i)+e[f],d=l+e[a]):(d>u?(i=t["".concat(o,"1")],l=d):(i=t["".concat(o,"2")],l=u),u=(l+=i)+e[f],d=l+e[a]),t.setNodeCoord(e,r,l)}))}else{var f=e[r],p=f,h=f,m=f;e.children.forEach((function(e){var i,l=t.getAxisNorm(e,r,a).norm;-1===e[n]&&c?(m<p?(i=t["".concat(o,"1")],f=m):(i=t["".concat(o,"2")],f=p),f=f-i-e[l],p=f,m=f+(e[l]-e[a])):(m<h?(i=t["".concat(o,"1")],f=m):(i=t["".concat(o,"2")],f=h),f=f-i-e[l],h=f,m=f+(e[l]-e[a])),t.setNodeCoord(e,r,f)}))}}},{key:"_setSecondaryCoord",value:function(e){var t,n,r=this.secondaryAxis,a=this.secondaryNorm,o=e.children,i=this["move".concat(r.toUpperCase())].bind(this);o.forEach((function(c,l){var s=0===l?e:o[l-1],u=c.align;"b"===u[0]?t=s[r]+s[a]:"c"===u[0]&&(t=s[r]+s[a]/2),"c"===u[1]?n=function(e){return t-e[a]/2}:"b"===u[1]&&(n=function(e){return t-e[a]});var d=n(c)-c[r];i(c,d)}))}},{key:"setZIndex",value:function(e){var t=this,n=this.mainAxis,r=this.mainNorm;this.preOrder(e,(function(a){var o=a.children;if(e!==a&&t.beforeInsert(a),o&&!a.collapsed){var i=a[n]+a[r]/2;o.sort((function(e,t){return Math.abs(e[n]+e[r]-i)-Math.abs(t[n]+t[r]-i)}))}}))}}]),n}();function od(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function id(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?od(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):od(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cd(e,t,n){return{coord:e[t],normValue:e[n]}}c()(ad,"className","Timeline"),c()(ad,"VAILD_DIRECTION_ANGLES",[0,Math.PI]),c()(ad,"QUADRANTS",2);var ld=function(e){b()(n,zu);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,n);var a=r.model.defaultContentStyle||{};return r=$e({default:{border:{outer:0,radius:4,shape:"rect",fill:"#596086","stroke-width":2,stroke:"rgba(0, 0, 0, 0)"},outline:{outer:2,radius:6,"stroke-width":2,selected:{stroke:"#096dd9",fill:"rgba(52, 155, 249, .15)","stroke-width":1},highlight:{stroke:"#349BF9",fill:"none"},beginEdit:{stroke:"#096dd9",fill:"rgba(255,255,255,0)"}},textArea:{className:"lake-diagram-mindmap-root"},layout:{type:"standard",direction:[1,0]},treeEdge:{stroke:"#959EA6"},tapered:!1,rainbow:!0,note:{width:20,height:20,padding:[0,8,0,0]}},textAreaContentStyleSheets:[{query:"self",css:id({"letter-spacing":"normal","font-size":"18px","font-family":'PingFangSC-Medium, "PingFang SC"',"line-height":"1.74","word-break":"break-word",outline:"none",color:"white"},a)}]},r),(e=t.call(this,r)).isStem=!0,e.initLayoutEngine(),e}return v()(n,[{key:"minWidth",get:function(){return 52}},{key:"canCollapse",value:function(){return!1}},{key:"getPadding",value:function(){return[6,this.model.note?8:16,6,16]}},{key:"_createLayoutModel",value:function(){var e=this.cellMap,t=this.model,n=[],r=Ke(t,(function(t){var r=e[t.id],a={x:r.x,y:r.y,w:r.width,h:r.height,layout:r.layout.type,direction:r.layout.direction,quadrantConstraint:r.layout.quadrantConstraint,quadrant:r.layout.quadrant,collapsed:r.collapsed,border:{shape:r.border.shape},cell:r};return"timeline"===a.layout&&n.push(a),a}));return n.forEach((function(e){e.children.forEach((function(t,n){t.layout&&!Ai("timeline",t.layout)||(t.layout="indent",t.direction=[1,1],0===e.direction[1]?t.quadrantConstraint=n%2==0?[4]:[1]:t.quadrantConstraint=n%2==0?[1]:[2]),t.children&&t.children.forEach((function(t){t.layout||(t.layout="standard",t.direction=[1,0],-1===e.direction[0]?t.quadrantConstraint=[2]:t.quadrantConstraint=[1])}))}))})),r}},{key:"initLayoutEngine",value:function(){this.layoutHelper=new Li({beforeLayoutAdjust:function(e){e.needAfterAdjustedNodes=[],Ve(e,(function(t){"timeline"!==t.parent.layout&&t.collapsed&&(1===t.downSignY?t.h+=24:-1===t.downSignY?(t.h+=24,e.needAfterAdjustedNodes.push({node:t,key:"y",value:24})):1===t.downSignX?t.w+=24:-1===t.downSignX&&(t.w+=24,e.needAfterAdjustedNodes.push({node:t,key:"x",value:24})))}))},afterLayoutAdjust:function(e){e.needAfterAdjustedNodes.forEach((function(e){var t=e.node,n=e.key,r=e.value;t[n]+=r}))},algorithms:{timeline:new ad({getAlign:function(e){return e.node.cell.getTimelineLayoutAlign()}}),standard:new ed({getBreadthByChildren:function(e){var t=e.children,n=e.breadthAxis,r=e.node,a=e.breadthNorm,o=e.isVertical,i=t.length,c=cd(t[0],n,a),l=cd(t[i-1],n,a),s=cd(r,n,a);if(!o&&[c,l].every((function(e){return!e.isSubTree}))){if("line"===t[0].border.shape&&"line"===r.border.shape)return(c.coord+c.normValue+l.coord+l.normValue)/2-s.normValue;if("line"===t[0].border.shape&&"line"!==r.border.shape)return(c.coord+c.normValue+l.coord+l.normValue-s.normValue)/2;if("line"!==t[0].border.shape&&"line"===r.border.shape&&t[0]===t[i-1])return c.coord+c.normValue/2-s.normValue}return(c.coord+l.coord+l.normValue-s.normValue)/2},getHGap:function(e){var t=e.isVertical,n=e.node.depth;return t?1===n?48:24:n>1?48:64},getVGap:function(e){var t,n=e.isVertical,r=e.node,a=r.depth,o=r.border;return n?t=64:1===a?t=24:(t=2===a?10:8,"line"!==o.shape&&(t*=2)),t}}),indent:new td({getHGap:function(){return 16},getVGap:function(e){var t=e.node,n=t.parent;return n&&t===n.children[0]&&-1===t.upSignY?24:8}})}})}},{key:"_layoutPosition",value:function(e){e.forEach((function(e){var t=e.cell;t.x=e.x||0,t.y=e.y||0}))}},{key:"_layoutZIndex",value:function(e){var t=this,n=this.diagram,r=n.rootGroup;n.contentEditor.isBegin||e.forEach((function(e,n){var a=e.cell;a.zIndex=n,a!==t&&r.insertBefore(a.graphicGroup,t.graphicGroup)}))}},{key:"_layoutdrectionAngle",value:function(e){e.forEach((function(e){e.cell.upDirection=e.upDirection,e.cell.downDirection=e.downDirection,e.cell.upLayoutType=e.upLayoutType,e.cell.downLayoutType=e.downLayoutType,e.cell.layoutQuadrantConstraint=e.quadrantConstraint||[1],e.cell.downSignX=e.downSignX,e.cell.downSignY=e.downSignY,e.cell.upSignX=e.upSignX,e.cell.upSignY=e.upSignY}))}},{key:"executeLayout",value:function(){var e=this.layoutHelper,t=this._createLayoutModel();e.model=t,e.execute();var n=[],r=e.tree;Ue(r,(function(e){n.push(e)})),this._layoutPosition(n),this._layoutZIndex(r.zNodes),this._layoutdrectionAngle(n)}},{key:"destroy",value:function(){this.layoutHelper.destroy(),T()(_()(n.prototype),"destroy",this).call(this)}}]),n}();c()(ld,"className","MindmapStem");var sd={treeEdge:!0,layout:!0},ud=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"beforedraw",(function(t){t&&"remove"!==t.action&&(function(e,t){var n=e.stems.filter((function(e){return e.isMindmap}));n.length>0&&(t.inherit(sd,n),n.forEach((function(e){e.deepEach((function(t){t!==e&&t.drawInherit()}))})))}(t,e),function(e,t){if("update"===e.action){var n=e.models.filter((function(e){var n=t.find(e.id);return n&&n.isMindmap&&n.isStem}));n.length>0&&n.forEach((function(e){if(void 0!==e.tapered||void 0!==e.rainbow){var n=t.find(e.id);void 0!==e.rainbow&&(!1===e.rainbow?n.forEach((function(e){e.updateModel({treeEdge:{stroke:"#959EA6"}})})):n.forEach((function(e,t){e.updateModel({treeEdge:{stroke:_u[t%7]}})})),t.inherit(sd,[n])),n.deepEachWithoutSelf((function(e){e.drawInner()}))}}))}}(t,e))}))}}]),n}();var dd=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"afterselect",(function(){var t=e.selector.selections;if(1===t.length&&t[0].isMindmap){var n=t[0];e.viewport.scrollIntoView(n)}}))}}]),n}();var fd=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"mindmapcell:mouseenter",(function(t){var n=t.cell;!e.signal.draggingMindmapCell&&n.isMindmap&&!n.model.isPlaceholder&&n.highlight()})),this.bind(e,"mindmapcell:mouseleave",(function(e){var t=e.cell;t&&t.isMindmap&&t.unHighlight()}))}}]),n}();var pd=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){var t;function n(){t&&t.hideCollapsedButton(),t=void 0}this.bind(e,"mindmapcell:mouseenter",(function(n){var r=n.cell;!e.signal.draggingMindmapCell&&r.isMindmap&&!r.model.isPlaceholder&&r.canCollapse()&&(r.showCollapsedButton(),t=r)})),this.bind(e,"mindmapcell:mouseleave",(function(e){var t=e.cell,r=e.nativeEvent;!t||!t.isMindmap||r.relatedTarget&&r.relatedTarget.closest('[data-lake_mindmap_add_button="true"]')||n()})),this.bind(e,"addbutton:mouseleave",(function(){n()})),this.bind(e,"aftercommandexecute",(function(e){"Expand"===e.commandName&&n()}))}}]),n}();function hd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var md=function(){function e(){m()(this,e)}return v()(e,[{key:"createHotArea",value:function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hd(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({child:e.child,stem:e.stem},t)}},{key:"stem",value:function(){}},{key:"child",value:function(){}},{key:"prevSibling",value:function(){}},{key:"nextSibling",value:function(){}},{key:"betweenSibling",value:function(){}}]),e}();var gd=function(e){b()(n,md);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"stem",value:function(e){var t=e.child,n=e.hotAreas,r=e.postFix,a=t.upDirection;0===Math.sign(a[0])?(n.push(this.createHotArea(e,{minX:t.minX-50,minY:t.minY-60,maxX:t.maxX+50,maxY:(t.minY+t.maxY)/2,parent:t.id,id:t.id+"2"+r,nth:t.children.length,quadrant:2,color:"orange"})),n.push(this.createHotArea(e,{minX:t.minX-50,minY:(t.minY+t.maxY)/2,maxX:t.maxX+50,maxY:t.maxY+60,parent:t.id,id:t.id+"1"+r,nth:t.children.length,quadrant:1,color:"pink"}))):(n.push(this.createHotArea(e,{minX:t.minX-50,minY:t.minY-60,maxX:(t.minX+t.maxX)/2,maxY:t.maxY+60,parent:t.id,id:t.id+"2"+r,nth:t.children.length,quadrant:2,color:"orange"})),n.push(this.createHotArea(e,{minX:(t.minX+t.maxX)/2,minY:t.minY-60,maxX:t.maxX+50,maxY:t.maxY+60,parent:t.id,id:t.id+"1"+r,nth:t.children.length,quadrant:1,color:"pink"})))}},{key:"child",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.postFix,o=e.stem,i=n.upDirection,c=Math.sign(i[0]),l=this.createHotArea(e,{parent:n.id,id:NaN+n.id+a,nth:0,color:"green",quadrant:n.layout.quadrant,addOrder:"push",stem:o});0===c?n.minY>r.minY?Object.assign(l,{minX:n.minX,maxX:n.maxX,minY:n.maxY,maxY:n.maxY+60}):Object.assign(l,{minX:n.minX,maxX:n.maxX,minY:n.minY-60,maxY:n.minY}):n.minX>r.minX?Object.assign(l,{minX:n.maxX,minY:n.minY-0,maxX:n.maxX+100,maxY:n.maxY+0}):Object.assign(l,{minX:n.minX-100,minY:n.minY-0,maxX:n.minX,maxY:n.maxY+0}),t.push(l)}},{key:"prevSibling",value:function(e){var t,n,r=e.hotAreas,a=e.child,o=e.parent,i=e.index,c=e.postFix,l=a.upDirection,s=Math.sign(l[0]),u=this.createHotArea(e,{parent:o.id,id:void 0+a.id+o.id+c,quadrant:a.layout.quadrant,color:"yellow",nth:i});if(0===s){var d=1===a.depth&&1===a.layout.quadrant,f=1===a.depth&&2===a.layout.quadrant;Object.assign(u,{minX:(n=a.minX-16,f||d?n-50:n),minY:d?a.minY-50:a.minY,maxX:(a.minX+a.maxX)/2,maxY:f?a.maxY+50:a.maxY})}else{var p=1===a.depth&&1===a.layout.quadrant,h=1===a.depth&&2===a.layout.quadrant;Object.assign(u,{minX:p?a.minX-50:a.minX,minY:(t=a.minY-16,h||p?t-50:t),maxX:h?a.maxX+50:a.maxX,maxY:(a.minY+a.maxY)/2})}r.push(u)}},{key:"nextSibling",value:function(e){var t,n,r=e.hotAreas,a=e.child,o=e.parent,i=e.index,c=e.postFix,l=a.upDirection,s=Math.sign(l[0]),u=this.createHotArea(e,{parent:o.id,id:a.id+void 0+o.id+c,color:"red",nth:i+1,addOrder:"push",quadrant:a.layout.quadrant});if(0===s){var d=1===a.depth&&1===a.layout.quadrant,f=1===a.depth&&2===a.layout.quadrant;Object.assign(u,{minX:(a.minX+a.maxX)/2,minY:d?a.minY-50:a.minY,maxX:(n=a.maxX+16,f||d?n+50:n),maxY:f?a.maxY+50:a.maxY})}else{var p=1===a.depth&&1===a.layout.quadrant,h=1===a.depth&&2===a.layout.quadrant;Object.assign(u,{minX:p?a.minX-50:a.minX,minY:(a.minY+a.maxY)/2,maxX:h?a.maxX+50:a.maxX,maxY:(t=a.maxY+16,h||p?t+50:t)})}r.push(u)}},{key:"betweenSibling",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.index,o=e.next,i=e.postFix,c=n.upDirection,l=Math.sign(c[0]),s=this.createHotArea(e,{parent:r.id,id:n.id+(o?o.id:void 0)+r.id+i,quadrant:n.layout.quadrant,color:"blue",nth:a+1});if(0===l){var u=1===n.depth&&1===n.layout.quadrant,d=1===n.depth&&2===n.layout.quadrant;Object.assign(s,{minX:(n.minX+n.maxX)/2,minY:2===n.layout.quadrant?Math.max(n.minY,o.minY):u?n.minY-50:n.minY,maxX:(o.minX+o.maxX)/2,maxY:1===n.layout.quadrant?Math.min(n.maxY,o.maxY):d?n.maxY+50:n.maxY})}else Object.assign(s,{minX:2===n.layout.quadrant?n.minX:1===n.depth?n.minX-50:n.minX,minY:(n.minY+n.maxY)/2,maxX:1===n.layout.quadrant?n.maxX:1===n.depth?n.maxX+50:n.maxX,maxY:(o.minY+o.maxY)/2});t.push(s)}}]),n}();var vd=function(e){b()(n,md);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"stem",value:function(e){var t=e.child,n=e.hotAreas,r=e.postFix,a=t.upDirection,o=Math.sign(a[0]),i=Math.sign(a[1]),c=this.createHotArea(e,{parent:t.id,id:t.id+"1"+r,nth:0,quadrant:1,color:"pink"});1===o&&1===i?Object.assign(c,{minX:(t.minX+t.maxX)/2,minY:(t.minY+t.maxY)/2,maxX:t.maxX+50,maxY:t.maxY+30}):-1===o&&1===i?Object.assign(c,{minX:t.minX-50,minY:(t.minY+t.maxY)/2,maxX:(t.minX+t.maxX)/2,maxY:t.maxY+30}):-1===o&&-1===i?Object.assign(c,{minX:t.minX-50,minY:t.minY-30,maxX:(t.minX+t.maxX)/2,maxY:(t.minY+t.maxY)/2}):1===o&&-1===i&&Object.assign(c,{minX:(t.minX+t.maxX)/2,minY:t.minY-30,maxX:t.maxX+50,maxY:(t.minY+t.maxY)/2}),n.push(c)}},{key:"child",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.postFix,o=this.createHotArea(e,{parent:n.id,id:NaN+n.id+a,nth:0,color:"green",quadrant:n.layout.quadrant,addOrder:"push"}),i=n.downDirection,c=1===Math.sign(i[1])?32:-32;n.minX>r.minX?Object.assign(o,{minX:n.maxX,minY:n.minY-0+c,maxX:n.maxX+50,maxY:n.maxY+0+c}):Object.assign(o,{minX:n.minX-50,minY:n.minY-0+c,maxX:n.minX,maxY:n.maxY+0+c}),t.push(o)}},{key:"prevSibling",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.index,o=e.postFix,i=n.upDirection,c=Math.sign(i[1]),l=this.createHotArea(e,{parent:r.id,id:void 0+n.id+r.id+o,quadrant:n.layout.quadrant,color:"yellow",nth:a});1===c?Object.assign(l,{minX:n.minX,minY:n.minY-4,maxX:n.maxX,maxY:(n.minY+n.maxY)/2}):Object.assign(l,{minX:n.minX,minY:(n.minY+n.maxY)/2,maxX:n.maxX,maxY:n.maxY+4}),t.push(l)}},{key:"nextSibling",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.index,o=e.postFix;if(!(n.children.length>1)||n.collapsed){var i=n.upDirection,c=Math.sign(i[1]),l=this.createHotArea(e,{parent:r.id,id:n.id+void 0+r.id+o,color:"red",nth:a+1,addOrder:"push",quadrant:n.layout.quadrant});1===c?Object.assign(l,{minX:n.minX,minY:(n.minY+n.maxY)/2,maxX:n.maxX,maxY:n.maxY+16}):Object.assign(l,{minX:n.minX,minY:n.minY-16,maxX:n.maxX,maxY:(n.minY+n.maxY)/2}),t.push(l)}}},{key:"betweenSibling",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.index,o=e.next,i=e.postFix,c=e.stem,l=this.createHotArea(e,{parent:r.id,id:n.id+(o?o.id:void 0)+r.id+i,color:"blue",nth:a+1,stem:c}),s=(n.minY+n.maxY)/2,u=(o.minY+o.maxY)/2;Object.assign(l,{minX:n.minX,minY:Math.min(s,u),maxX:n.maxX,maxY:Math.max(s,u)}),t.push(l)}}]),n}();var yd=function(e){b()(n,md);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"prevSibling",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.index,o=e.postFix,i=n.upDirection,c=Math.sign(i[0]),l=this.createHotArea(e,{parent:r.id,id:void 0+n.id+r.id+o,quadrant:n.layout.quadrant,color:"yellow",nth:a});1===c?Object.assign(l,{minX:r.maxX,minY:r.minY,maxX:n.minX,maxY:r.maxY}):Object.assign(l,{minX:n.maxX,minY:r.minY,maxX:r.minX,maxY:r.maxY}),t.push(l)}},{key:"betweenSibling",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.index,o=e.next,i=e.postFix,c=e.stem;if(o){var l=n.upDirection,s=Math.sign(l[0]),u=this.createHotArea(e,{parent:r.id,id:n.id+(o?o.id:void 0)+r.id+i,color:"blue",nth:a+1,stem:c});1===s?Object.assign(u,{minX:n.maxX,minY:n.minY,maxX:o.minX,maxY:n.maxY}):Object.assign(u,{minX:o.maxX,minY:n.minY,maxX:n.minX,maxY:n.maxY}),t.push(u)}}},{key:"nextSibling",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.index,o=e.postFix,i=e.root,c=n.upDirection,l=Math.sign(c[0]),s=this.createHotArea(e,{parent:r.id,id:n.id+void 0+r.id+o,color:"red",nth:a+1,addOrder:"push",quadrant:n.layout.quadrant,root:i});1===l?Object.assign(s,{minX:n.maxX,minY:n.minY,maxX:n.maxX+32,maxY:n.maxY}):Object.assign(s,{minX:n.minX-32,minY:n.minY,maxX:n.minX,maxY:n.maxY}),t.push(s)}}]),n}(),bd=Xn,kd={standard:new gd,indent:new vd,timeline:new yd},wd=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];m()(this,e),this.diagram=t,this.drawHotArea=n,this.eventHelper=new Ra,this.hotAreas=[],this.activated=!1,this._bindEvent()}return v()(e,[{key:"turnOn",value:function(){this.update(),this.activated=!0}},{key:"turnOff",value:function(){this.activated=!1}},{key:"_bindEvent",value:function(){var e=this,t=this.diagram,n=this.drawHotArea,r=this.eventHelper,a=this.activated;r.bind(t,"afterstemcelllayout",(function(t){var n=t.stem;a&&e.update(n)})),n&&r.bind(t,"afterviewportchange",(function(){e.draw()}))}},{key:"update",value:function(e){var t,n=this.diagram,r=this.drawHotArea;if(t=e?[e]:n.getCells().filter((function(e){return e.isStem&&e.isMindmap})),0!==t.length){var a=[],o=t.map((function(e){return d()(e.model)}));o.forEach((function(e){Ue(e,(function(e){var t=n.find(e.id);e.minX=t.x,e.minY=t.y,e.maxX=t.x+t.width,e.maxY=t.y+t.height,e.depth=t.depth,e.layout=t.computedProps.layout,e.visible=t.state.visible,e.collapsed=t.collapsed,e.isStem=t.isStem,e.stem=t.stem.model.id,e.upLayoutType=t.upLayoutType,e.downLayoutType=t.downLayoutType,e.upDirection=t.upDirection,e.downDirection=t.downDirection,e.zIndex=t.zIndex,e.children=e.children&&e.children.filter((function(e){return!e.isPlaceholder}))||[]}))})),o.forEach((function(e){Ue(e,(function(e,t,n){if(!e.isPlaceholder&&e.visible){var r=e.upLayoutType,o=e.downLayoutType,i=e.children,c=t?function(e,t,n){var r=n.children,a=e;if(!n.parent)for(;r[a]&&!ht(r[a].upDirection,t.upDirection);)a++;if(r[a]&&ht(r[a].upDirection,t.upDirection))return r[a]}(n+1,e,t):null,l=t?function(e,t,n){var r=n.children,a=e;if(!n.parent)for(;r[a]&&!ht(r[a].upDirection,t.upDirection);)a--;if(r[a]&&ht(r[a].upDirection,t.upDirection))return r[a]}(n-1,e,t):null,s=kd[o],u=kd[r],d={hotAreas:a,child:e,parent:t,next:c,prev:l,index:n,stem:e.stem,postFix:"placeholder"};e.isStem?s.stem(d):(0===i.length&&s.child(d),l||u.prevSibling(d),c||u.nextSibling(d),c&&u.betweenSibling(d))}}))})),this.hotAreas=a,this.buildQuadtree(),r&&this.draw()}}},{key:"buildQuadtree",value:function(){var e=Ee(),t=this.hotAreas.map((function(e){return[e.minX,e.minY,e.maxX-e.minX,e.maxY-e.minY,e]}));e.addAll(t),this.quadtree=e,this.maxWidth=at(t,(function(e){return e[2]})),this.maxHeight=at(t,(function(e){return e[3]}))}},{key:"_search",value:function(e,t){var n=this.quadtree,r=this.maxWidth,a=this.maxHeight,o=[];return n.visit((function(n,i,c,l,s){var u=n.data;return u&&u[0]+u[2]>=e&&u[0]<e&&u[1]+u[3]>=t&&u[1]<t&&o.push(u[4]),i>=e||c>=t||l+r<e||s+a<t})),o.sort((function(e,t){return t.zIndex-e.zIndex})),o}},{key:"hit",value:function(e){return this._search(e[0],e[1])[0]}},{key:"draw",value:function(){var e=this.diagram.frontRootGroup;e.clear(),this.hotAreas.forEach((function(t){var n=t.minX,r=t.minY,a=t.maxX,o=t.maxY,i=t.color,c=new bd({d:Sn(n,r,a-n,o-r),fill:i,opacity:.5,"pointer-events":"none"});e.add(c)}))}},{key:"destroy",value:function(){this.eventHelper.destroy(),this.diagram=void 0,this.drawHotArea=void 0,this.eventHelper=void 0}}]),e}();function xd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _d=ar,Ed=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){var t,n,r,a,o,i,l,s,u,f,p,h,m=new wd(e);function g(){if(e.viewport.preventDefault(!1),n&&e.remove(n.id),n){var c=d()(r);c.forEach((function(e){Ue(e,(function(e){delete e.zIndex}))})),n.parent===n.stem&&c.forEach((function(e){var t=n.quadrant||null;e.layout?e.layout.quadrant=t:e.layout={quadrant:t}}));var f=t.map((function(e,t){return{parent:n.parent,nth:n.nth+t}})),p=e.find(n.parent);t.forEach((function(e,t){var n=c[t];1===e.depth&&p.depth>0&&n&&n.treeEdge&&n.treeEdge.stroke&&delete n.treeEdge.stroke})),p.isStem&&c.forEach((function(t,n){var r=e.query.appendChildModel(p,n);t.treeEdge?t.treeEdge.stroke||(t.treeEdge.stroke=r.treeEdge.stroke):t.treeEdge={stroke:r.treeEdge.stroke}})),e.command.execute("MindmapMoveNode",{dragCells:t,dragCellModels:r,addCellModels:c,addOptions:f,dragCellOptions:s})}else r&&e.add(r,s);u&&e.delegator.remove(u),u=void 0,t=void 0,r=void 0,n=void 0,a=void 0,o=void 0,s=void 0,i=void 0,l=void 0,h=void 0,e.signal.draggingMindmapCell=!1,m.turnOff()}this.mindmapHotAreaHelper=m,this.bind(e,"mousedown",(function(n){var r=n.target,i=n.clientX,c=n.clientY,l=n.button,s=e.getCell(r);s&&s.isMindmap&&!s.isStem&&0===l&&!e.signal.contentEditing&&(a=i,o=c,e.selector.selections.length>1&&e.selector.selections.includes(s)?(t=(t=e.selector.selections.concat([])).filter((function(e){return!e.isStem})),(t=e.deduplicate(t)).sort((function(e,t){return e.getNth()-t.getNth()})),h=!0):t=[s])})),this.bind(e,"mousemove",(function(g){if(t&&0!==t.length){if(!r&&Math.abs(a-g.clientX)+Math.abs(o-g.clientY)>10&&!e.signal.contentEditing){e.selector.clear(),r=t.map((function(e){return d()(e.model)})),s=t.map((function(t){return e.getCellOptions(t)}));var v=e.viewport.invertClient([g.clientX,g.clientY]);u=e.delegator.create((function(e){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=new _d({x:t-24.5-r,y:n-11+r,height:22,width:49,rx:4,ry:4,fill:"rgba(52, 155, 249, .2)"}),o=new _d({x:t-24.5+r,y:n-11-r,height:22,width:49,rx:4,ry:4,fill:"rgba(52, 155, 249, .2)"});e.add(a),e.add(o)}(e,v[0],v[1],h?3:0)})),e.remove(t),e.signal.draggingMindmapCell=!0,m.turnOn(),e.viewport.preventDefault(),i=g.clientX,l=g.clientY,e.emit("mindmap:afterdragchildcellstart")}if(u){var y=e.viewport.zoom;f=(g.clientX-i)/y,p=(g.clientY-l)/y,u.translate(f,p)}if(r){var b=e.viewport.invertClient([g.clientX,g.clientY]),k=m.hit(b);if(n&&(k?n.id!==k.id&&e.remove(n.id):e.remove(n.id)),k&&!e.find(k.id)){var w=e.add(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xd(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isPlaceholder:!0,width:32,height:10,border:{shape:"rect",fill:"#C5E3FF"},treeEdge:{stroke:"#C5E3FF"},layout:{quadrant:k.quadrant}},k),{parent:k.parent,nth:k.nth});M()(w,1)[0].toBack()}n=k}}})),this.bind(e,"keydown",(function(e){27===e.which&&g()})),this.bind(e,"mouseup",(function(){g()})),this.bind(e,"mouseleave",(function(){g()}))}},{key:"unbind",value:function(){this.mindmapHotAreaHelper&&(this.mindmapHotAreaHelper.destroy(),this.mindmapHotAreaHelper=void 0),T()(_()(n.prototype),"unbind",this).call(this)}}]),n}();function Cd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Od(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cd(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Sd="rgba(255, 255, 255, 0.65)";function Rd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add_button",t=new pn,n=new Xn({fill:"rgba(255,255,255,0)"}),r=new Xn({stroke:"#BFBFBF",fill:Sd}),a=new Er,o=new Xn({fill:"url(#".concat(a.id,")")});return t.dataset({lake_prevent_click_unselect:!0,lake_mindmap_add_button:!0,testid:e}),n.css({cursor:"default"}),r.css({cursor:"pointer"}),t.add(n),t.add(r),{group:t,background:n,btn:r,tail:o,gradient:a}}function jd(e){var t=e.x,n=e.y,r=e.width,a=e.height,o=e.group,i=e.background,c=e.btn,l=e.tail,s=e.gradient,u=e.zoom,d=e.verticalAlign,f=void 0===d?"center":d,p=e.tailConfig,h=9/u,m=4/u,g={x:t+r/2,y:n+a/2},v=0,y=a;"bottom"===f&&(v=a/2,y+=h),i.update({d:Sn(t,n,r,y)});var b=g.x,k=g.y+v;if(c.update({stroke:"#BFBFBF",d:Pn(b,k,h)+"M".concat(b,",").concat(k-m," L").concat(b,",").concat(k+m)+"M".concat(b+m,",").concat(k," L").concat(b-m,",").concat(k),"stroke-width":2/u}),p){var w=p.stroke,x=p.position,_=10/u,E="rgba(255,255,255,0)";o.add(l),"right"===x?(s.update("l(0) 0:".concat(w," 1:").concat(E)),l.update({d:Sn(b+h,k-p["stroke-width"]/2,_,p["stroke-width"])})):"left"===x?(s.update("l(0) 0:".concat(E," 1:").concat(w)),l.update({d:Sn(b-_-h,k-p["stroke-width"]/2,_,p["stroke-width"])})):"bottom"===x?(s.update("l(270) 0:".concat(E," 1:").concat(w)),l.update({d:Sn(b-p["stroke-width"]/2,k+h,p["stroke-width"],_)})):"top"===x&&(s.update("l(270) 0:".concat(w," 1:").concat(E)),l.update({d:Sn(b-p["stroke-width"]/2,k-_-h,p["stroke-width"],_)}))}else l.remove()}var Pd=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e;return m()(this,n),(e=t.call(this)).horizontalElements=Rd(),e.verticalElements=Rd(),e}return v()(n,[{key:"init",value:function(e){var t,n=this,r=e.frontRootGroup,a=e.defs,o=this.horizontalElements,i=this.verticalElements,c=function(){},l=function(){};function s(){o.group.remove(),i.group.remove(),c=function(){},l=function(){},t=void 0}function u(e){return o.group.rendererElement.contains(e)||i.group.rendererElement.contains(e)}a.add(o.gradient),a.add(i.gradient),this.horizontalElements=o,this.verticalElements=i,this.bind(o.btn,"click",(function(n){n.stopPropagation(),e.selector.select([t]),c(),s()})),this.bind(i.btn,"click",(function(n){n.stopPropagation(),e.selector.select([t]),l(),s()})),this.bind(e,"cell:dragstart",(function(){s()})),[o,i].forEach((function(r){var a=r.group,o=r.btn;n.bind(a,"mouseenter",(function(e){e.stopPropagation(),o.update({stroke:"#595959",fill:"white"})})),n.bind(a,"mouseleave",(function(n){n.stopPropagation(),o.update({stroke:"#BFBFBF",fill:Sd}),t&&t.graphicGroup.rendererElement.contains(n.relatedTarget)||u(n.relatedTarget)||(e.emit("addbutton:mouseleave"),s())}))})),this.bind(e,"afterchange",se()((function(){!t||e.find(t.model.id)&&!t.collapsed||s()}),16)),this.bind(e,"mindmapcell:mouseenter",(function(n){var a=n.cell;if(!e.signal.cellDragStart&&a.isMindmap&&!a.collapsed){var s=a.downSignX,u=a.downSignY,d=0!==u,f=e.viewport.zoom,p=38/f,h=a.canCollapse()?-18:0,m=(d||"line"!==a.border.shape?-1:0)/f+h,g={x:a.x+a.width-m,y:a.y,width:p,height:a.height},v={x:a.x+(a.width-p)/2,y:a.y+a.height-m,width:p,height:p};if(t=a,o.group.remove(),i.group.remove(),d)-1===u&&(v.y=a.y-p+m),g.x-=m,v.tailConfig=Od({position:1===u?"top":"bottom"},e.query.appendChildAddButtonTail(a).treeEdge),l=function(){e.command.execute("MindmapAppendChild")};else{var y=-1===s;y&&(g.x=a.x-p+m),v.height-=4*m,"line"===a.border.shape&&(g.verticalAlign="bottom"),g.tailConfig=Od({position:y?"right":"left"},e.query.appendChildAddButtonTail(a).treeEdge),c=function(){e.command.execute("MindmapAppendChild")}}d?(r.add(i.group),jd(Od(Od({},v),{},{zoom:f},i))):(r.add(o.group),jd(Od(Od({},g),{},{zoom:f},o)))}})),this.bind(e,"mindmapcell:mouseleave",(function(t){var n=t.nativeEvent;u(n.relatedTarget)||e.elementMap.fullScreenBtn.contains(n.relatedTarget)||s()})),this.bind(e.contentEditor,"beginedit",(function(){s()})),this.bind(e.contentEditor,"change",(function(){s()})),this.bind(e,"afterselect",(function(){(e.selector.selections.length>1||1===e.selector.selections.length&&e.selector.selections[0]!==t)&&s()}))}}]),n}();function Ad(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Td(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Td(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Td(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Md=Xn,Nd={"top-right":"nesw-resize","top-left":"nwse-resize","bottom-right":"nwse-resize","bottom-left":"nesw-resize"},Ld=function(){function e(){m()(this,e);var t=new Md({stroke:"white",fill:"#096dd9"});t.css({cursor:"nesw-resize"}),t.dataset({lake_prevent_click_unselect:!0}),this.element=t,this.position="top-right"}return v()(e,[{key:"contains",value:function(e){return this.element.rendererElement.contains(e)}},{key:"update",value:function(e,t){var n,r,a,o=e.upDirection,i=Math.sign(o[0]),c=Math.sign(o[1]),l=2;"line"===e.border.shape?l=1:"capsule"===e.border.shape&&(l=-(e.width>e.height?e.height:e.width)/9),-1===i?(n="top-left",r=e.x-l,a=e.y-l):1===c&&0===i?(n="bottom-right",r=e.x+e.width+l,a=e.y+e.height+l):(n="top-right",r=e.x+e.width+l,a=e.y-l);var s=4/t,u=1/t;this.position=n,this.element.update({"stroke-width":u,d:Pn(r,a,s-u)}),this.element.css({cursor:Nd[n]})}},{key:"remove",value:function(){this.element.remove()}}]),e}(),Id=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e;m()(this,n);var r=new Ld;return(e=t.call(this)).handle=r,e}return v()(n,[{key:"init",value:function(e){var t=this.handle,n=null,r=null,a=null,o=null,i=se()((function(i){if(a&&r&&n){var c=e.find(n),l=e.viewport.zoom,s=t.position,u=(i.clientX-a.x)*(["top-left"].includes(s)?-1:1),d=(i.clientY-a.y)*(["bottom-right"].includes(s)?1:-1);o={width:Ze(r.width+u*l,c.minWidth),height:Ze(r.height+d*l,c.minHeight)},e.update(c,o)}}),10);function l(t){a=null,document.body.removeEventListener("mousemove",i),e.signal.draggingMindmapCell=!1,n&&r&&o&&(t.stopPropagation(),e.update(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dd(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r.model)),e.command.execute("Update",{id:n,model:o}))}this.bind(e,"afterchange",(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.models,o=r.action;if(a&&"update"===o){var i,c=Ad(a);try{for(c.s();!(i=c.n()).done;){var l=i.value;l.id===n&&t.update(e.cellMap[l.id],e.viewport.zoom)}}catch(e){c.e(e)}finally{c.f()}}})),this.bind(e,"mousedown",(function(o){if(t.contains(o.target)){var c=n&&e.find(n);if(c&&c.isMindmap){var s=c.textAreaBBox;r={width:c.width,height:c.height,textArea:s.width*s.height,model:{width:c.model.width||null,height:c.model.height||null}},e.signal.draggingMindmapCell=!0,a={x:o.clientX,y:o.clientY},document.body.addEventListener("mousemove",i),document.body.addEventListener("click",l,{once:!0})}}})),this.bind(e,"afterselectionchange",(function(){var r=e.selector.selections;if(1===r.length){var a=r[0];if(a.isMindmap)return a.state.selected?(t.update(a,e.viewport.zoom),e.frontRootGroup.add(t.element),void(n=a.model.id)):(n=null,void t.remove())}t.remove()})),this.bind(e,"afterviewportchange",(function(){var r=n&&e.cellMap[n];r&&r.state.selected?t.update(r,e.viewport.zoom):t.remove()}))}}]),n}();var Bd=Xn,zd=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e;return m()(this,n),(e=t.call(this)).mask=new Bd({"stroke-width":1,stroke:"#1890FF",fill:"rgba(24, 144, 255, 0.15)"}),e.mask.css({"pointer-events":"none"}),e}return v()(n,[{key:"init",value:function(e){var t=this.mask;t.dataset({lake_prevent_click_unselect:!0});var n=null,r=!0;this.bind(e,"keyup",(function(r){if(n)switch(r.key){case"Delete":case"Backspace":e.command.execute("Update",{id:n,model:{width:null,height:null,image:null}}),t.remove()}})),this.bind(e,"mousedown",(function(t){var n=t.target.closest("image"),a=n&&e.getCell(n);r=!(a&&a.isMindmap&&a.state.selected)})),this.bind(e,"click",(function(a){var o=a.target.closest("image"),i=o&&e.getCell(o);i&&!r?(a.stopPropagation(),i.endEditContent(),e.selector.select([i],!1),function(e,n){var r=["x","y","width","height"].reduce((function(e,t){return e[t]=parseFloat(n.getAttribute(t)),e}),{});t.update({d:Sn(e.x+r.x-1,e.y+r.y-1,r.width+2,r.height+2,1)})}(i,o),e.frontRootGroup.add(t),n=i.model.id,e.tryFocus(),r=!0):a.target!==t.rendererElement&&(n=null,t.remove())})),this.bind(e,"afterselectionchange",(function(){n&&(n=null,t.remove())})),this.bind(e,"mindmap:afterdragchildcellstart",(function(){n&&(n=null,t.remove())}))}}]),n}();function Fd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ud(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fd(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vd=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){var t,n,r,a,o,i,c,l=!1;function s(){l?t&&e.remove(t):(c=Object(I.a)(),e.command.execute("Add",{model:Ud({id:c,x:t.x+o,y:t.y+i},e.query.insertStemModel())}),e.remove(t)),n&&n.destroy(),t=void 0,r=void 0,a=void 0,o=void 0,i=void 0,l=!1,n=void 0,e.interaction.changeMode("edit"),c&&(e.selector.clear(),e.selector.select([c]),c=void 0)}this.bind(e,"mousemove",(function(c){if(!n){var l=e.viewport.invertClient([c.clientX,c.clientY]);t=e.add(Ud({x:l[0],y:l[1]},e.query.insertStemModel()))[0],n=e.delegator.create([t]),r=c.clientX,a=c.clientY,t.hide()}n&&(o=(c.clientX-r)/e.viewport.zoom,i=(c.clientY-a)/e.viewport.zoom,n.translate(o,i))})),this.bind(window,"mouseleave",(function(){l=!0,s()})),this.bind(window,"mouseup",(function(t){n&&(e.viewportContainer.contains(t.target)||(l=!0),s())})),this.bind(e,"keydown",(function(e){27===e.which&&(l=!0,s())}))}}]),n}();var qd=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){var e;m()(this,n),e=t.call(this);var a=document.createElement("div"),o=document.createElement("span");return o.classList.add("lake-icon"),o.classList.add("lake-icon-full-screen"),o.classList.add("lake-prevent-card-activated"),a.appendChild(o),a.style["z-index"]="1033",a.style["border-radius"]="4px",a.style.position="absolute",a.style.width="".concat(20,"px"),a.style.height="".concat(20,"px"),a.style.color="#fff",a.style.cursor="pointer",a.style["box-shadow"]="0px 2px 8px 0px rgba(0, 0, 0, 0.08)",a.style["background-color"]="rgba(0, 0, 0, 0.65)",a.style["text-align"]="center",e.fullScreenBtn=a,e.imageBrowser=Object(r.getImageBrowser)(),e}return v()(n,[{key:"init",value:function(e){var t,n,r=this,a=this.fullScreenBtn,o=this.imageBrowser;e.elementMap.fullScreenBtn=a;var i=function(){a.remove(),n&&r.unbind(n),t=void 0,n=void 0};this.bind(a,"click",(function(){if(t){var e=t.image,n=t.imageElement.rendererElement;o.open([{src:n.getAttribute("data-raw_src"),msrc:n.getAttribute("href"),w:e.naturalWidth,h:e.naturalHeight}],0)}})),this.bind(a,"mouseleave",(function(e){t.imageElement.rendererElement.contains(e.relatedTarget)||i()})),this.bind(e,"mindmapcellimage:mouseenter",(function(o){var c=o.cell;if(!e.signal.cellDragStart){document.body.appendChild(a);var l=c.imageElement.getBoundingClientRect(),s=c.image;t=c,s.width>30&&s.height>30?(a.style.top="".concat(l.top+window.pageYOffset+6,"px"),a.style.left="".concat(l.right+window.pageXOffset-26,"px")):(a.style.top="".concat(l.top+window.pageYOffset-20,"px"),a.style.left="".concat(l.left+window.pageXOffset,"px")),n=r.bind(e,"afterviewportchange",(function(){i()}))}})),this.bind(e,"mindmapcellimage:mouseleave",(function(e){var t=e.nativeEvent;a.contains(t.relatedTarget)||i()})),this.bind(e,"mindmap:afterdragchildcellstart",(function(){i()})),this.bind(e,"cell:dragstart",(function(){i()}))}}]),n}();var Hd=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(window,"click",(function(t){t.target.closest(".lake-diagram-note")&&e.command.execute("MindmapAttachNote")}))}}]),n}();var Wd=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){var n=e.selector.selections[0],r="Tab",a="Enter";n&&("timeline"===n.upLayoutType||"standard"===n.upLayoutType&&0===n.upSignX)&&(r="Enter",a="Tab"),t.key===r?(t.preventDefault(),t.altKey?e.command.execute("MindmapAppendParent"):e.command.execute("MindmapAppendChild")):t.key===a&&(t.preventDefault(),t.shiftKey?e.command.execute("MindmapInsertStem"):n&&n.isStem?e.command.execute("MindmapAppendChild"):t.altKey?e.command.execute("MindmapPrependSibling"):e.command.execute("MindmapAppendSibling"))}))}}]),n}();var Yd=R.HotKeyUtils.isHotkey,Gd=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){if(37===t.which||38===t.which||39===t.which||40===t.which){t.preventDefault();var n=e.selector,r=n.selections;if(1===r.length&&r[0].isMindmap){var a,o,i,c,l=(r=r.filter((function(e){return e.isMindmap})))[r.length-1],s=e.getCells().filter((function(e){return e.state.visible&&e.isMindmap})),u=(a=l.upDirection,"0,1"===(a=String(a))||"0,-1"===a),d=!l.isStem&&"timeline"!==l.upLayoutType;if(Yd("right",t)){if(d&&l.x<l.parent.x&&!u)return void n.select([l.parent]);i="x",c=!0}else if(Yd("left",t)){if(d&&l.x>l.parent.x&&!u)return void n.select([l.parent]);i="x",c=!1}else if(Yd("up",t)){if(d&&l.y>l.parent.y&&u)return void n.select([l.parent]);i="y",c=!1}else if(Yd("down",t)){if(d&&l.y<l.parent.y&&u)return void n.select([l.parent]);i="y",c=!0}var f="x"===i?"width":"height",p="x"===i?"y":"x",h="x"===i?"height":"width",m=l[p]+l[h]/2,g=l[p]+l[h];(o=(o=(o=c?s.filter((function(e){return l[i]+l[f]<e[i]})):s.filter((function(e){return e[i]+e[f]<l[i]}))).filter((function(e){var t=e[p]+e[h],n=t<l[p],r=e[p]>g,a=e[p]<=l[p]&&t>=g;return!(n||r)||a}))).sort((function(e,t){if(c){if(e[i]!==t[i])return e[i]-t[i]}else if(e[i]+e[f]!==t[i]+t[f])return t[i]+t[f]-(e[i]+e[f]);return Math.min(Math.abs(m-e[p]),Math.abs(m-(e[p]+e[h])))-Math.min(Math.abs(m-t[p]),Math.abs(m-(t[p]+t[h])))})))[0]&&n.select([o[0]])}}}))}}]),n}();var Xd=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){Co(t)&&["Backspace","Delete"].includes(t.key)&&e.command.execute("MindmapRemoveSingleNode")}))}}]),n}();var Kd=function(e){b()(n,xo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){0!==e.selector.selections.length||"m"!==t.key||Co(t)||(t.preventDefault(),e.command.execute("MindmapBeginInsertStem"))}))}}]),n}();var Zd=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections,r=t[t.length-1];r.model.collapsed&&(e.update(r,{collapsed:!1}),this.originSelectedCollapsed=!0);var a={model:{},cellOptions:{parent:r.model.id,nth:r.model.children?r.model.children.length:0}},o=e.find(a.cellOptions.parent);pe()(a.model,e.query.appendChildModel(o)),a.model.id=this.id,Object.assign(this,a),this.selectedCellId=r.model.id,T()(_()(n.prototype),"execute",this).call(this),e.contentEditor.beginEdit()}},{key:"forward",value:function(){var e=this.selectedCellId,t=this.diagram;this.originSelectedCollapsed&&t.update(e,{collapsed:!1}),T()(_()(n.prototype),"forward",this).call(this)}},{key:"backward",value:function(){var e=this.selectedCellId,t=this.diagram;this.originSelectedCollapsed&&t.update(e,{collapsed:!0}),T()(_()(n.prototype),"backward",this).call(this),t.selector.select([e])}}]),n}(Fr.Add);c()(Zd,"className","MindmapAppendChild"),c()(Zd,"enable",(function(e){var t=e.selector.selections;return 1===t.length&&t.every((function(e){return e.isMindmap}))}));var $d=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.diagram,r=this.addType,a=t.selector.selections,o=a[a.length-1],i=o.parent,c={model:{html:"".concat($t(""))},cellOptions:{parent:i.model.id,nth:r&&"prepend"===r?o.getNth():o.getNth()+e}};i.isStem&&(c.model.layout={quadrant:o.computedProps.layout.quadrant}),pe()(c.model,t.query.appendChildModel(i)),c.model.id=this.id,Object.assign(this,c),this.selectedCellId=o.model.id,T()(_()(n.prototype),"execute",this).call(this),t.contentEditor.beginEdit()}},{key:"backward",value:function(){var e=this.selectedCellId,t=this.diagram;T()(_()(n.prototype),"backward",this).call(this),t.selector.select([e])}}]),n}(Fr.Add);c()($d,"className","MindmapAddSibling"),c()($d,"enable",(function(e){var t=e.selector.selections;return 1===t.length&&t.every((function(e){return!e.isStem&&e.isMindmap}))}));var Qd=function(e){b()(n,$d);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n)}();c()(Qd,"className","MindmapAppendSibling");var Jd=function(e){b()(n,$d);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){T()(_()(n.prototype),"execute",this).call(this,0)}}]),n}();c()(Jd,"className","MindmapPrependSibling");var ef=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){var e=this.addCellModels,t=this.addOptions;this.diagram.add(e,t),this.select(e.map((function(e){return e.id})))}},{key:"forward",value:function(){var e=this.addCellModels,t=this.addOptions,n=this.diagram;n.remove(e.map((function(e){return e.id}))),n.add(e,t),this.select(e.map((function(e){return e.id})))}},{key:"backward",value:function(){var e=this.dragCellModels,t=this.dragCellOptions,n=this.diagram;n.remove(e.map((function(e){return e.id}))),n.add(e,t),this.select(e.map((function(e){return e.id})))}}]),n}();c()(ef,"className","MindmapMoveNode");var tf=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.image,r=e.selector.selections,a=r[r.length-1],o=a.model;this.id=o.id,this.model={image:Eu(t),width:null,height:null},e.signal.preventUpdateCellContent=!0,a.textAreaElement.htmlContainer===e.contentEditor.dom&&(e.contentEditor.execCommand("justifyCenter"),e.contentEditor.updateStartContent(),this.model.html=e.contentEditor.dom.innerHTML),e.signal.preventUpdateCellContent=!1,T()(_()(n.prototype),"execute",this).call(this)}}]),n}(Fr.Update);c()(tf,"className","MindmapAttachImage"),c()(tf,"enable",(function(e){var t=e.selector.selections;return 1===t.length&&t[0].isMindmap}));var nf=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return v()(n,[{key:"execute",value:function(){var e=this.diagram;e.selector.clear(),e.interaction.changeMode("beginAddMindmapStem")}}]),n}();function rf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}c()(nf,"className","MindmapBeginInsertStem");var af=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.x,r=this.y;if(this.model=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rf(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.query.insertStemModel()),null!=t&&null!=r)Object.assign(this.model,{x:t,y:r});else{var a=e.getCells().filter((function(e){return e.isStem})),o=a[a.length-1];Object.assign(this.model,{x:o.x+20,y:o.y+o.height+20})}T()(_()(n.prototype),"execute",this).call(this)}}]),n}(Fr.Add);c()(af,"className","MindmapInsertStem");var of=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n)}(Fr.CreateLink);c()(of,"className","MindmapCreateLink");var cf=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"execute",value:function(){var e=this,t=this.diagram,r=this.image;this.model={type:"mindmap",image:Eu(r),html:""};var a=t.viewport.getCenter();this.model.x=a[0]-this.model.image.width/2,this.model.y=a[1]-this.model.image.height/2,T()(_()(n.prototype),"execute",this).call(this),se()((function(){var n=t.selector.selections;1===n.length&&n[0].model.id===e.id&&t.contentEditor.execCommand("justifyCenter")}),16)()}}]),n}(Fr.Add);c()(cf,"className","MindmapInsertImage"),c()(cf,"enable",(function(e){return 0===e.selector.selections.length}));var lf=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"processNotRoot",value:function(){}},{key:"processRoot",value:function(){}},{key:"execute",value:function(){var e=this.diagram.selector.selections.concat([]).sort((function(e,t){return e.getNth()-t.getNth()}));e[0].parent?this.processNotRoot(e):this.processRoot(e)}},{key:"forward",value:function(){var e=this.diagram,t=this.forwardRemoveId,n=this.forwardSnapshot,r=this.forwardSelections;e.remove(t),e.add.apply(e,z()(n)),e.selector.select(r)}},{key:"backward",value:function(){var e=this.diagram,t=this.backwardRemoveId,n=this.backwardSnapshot,r=this.backwardSelections;e.remove(t),e.add.apply(e,z()(n)),e.selector.select(r)}}]),n}();function sf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sf(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function df(e,t){return e=e.filter((function(e){return e.isMindmap})),t.deduplicate(e)}c()(lf,"className","Snapshot");var ff=function(e){b()(n,lf);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"processNotRoot",value:function(e){var t=this.diagram,n=(e=df(e,t))[e.length-1],r=n.getNth(),a=n.parent,o=a.model.id,i=uf(uf({},t.query.appendChildModel(a)),{},{id:Object(I.a)(),html:"",children:[]});1===n.depth&&(i.layout=uf({},n.model.layout)),this.backwardRemoveId=o,this.backwardSnapshot=t.snapshot([a]),this.backwardSelections=t.selector.selections.map((function(e){return e.model.id})),1===n.depth&&e.forEach((function(e){e.updateModel({layout:null})})),t.add(i,{parent:o,nth:r}),t.update(e,{},{parent:i.id}),t.selector.select(i.id),this.forwardRemoveId=o,this.forwardSnapshot=t.snapshot([a]),this.forwardSelections=t.selector.selections.map((function(e){return e.model.id}))}},{key:"processRoot",value:function(e){var t=this.diagram,n=(e=t.deduplicate(e))[0],r={id:Object(I.a)(),html:"",x:n.x,y:n.y,type:"mindmap",children:e.map((function(e){var t=d()(e.model);return delete t.type,delete t.x,delete t.y,delete t.layout,t}))};Ue(r,(function(e){delete e.zIndex})),this.backwardRemoveId=r.id,this.backwardSnapshot=t.snapshot(e),this.backwardSelections=t.selector.selections.map((function(e){return e.model.id})),t.remove(e),t.add(r),t.selector.select(r.id),this.forwardRemoveId=e.map((function(e){return e.model.id})),this.forwardSnapshot=t.snapshot([t.find(r.id)]),this.forwardSelections=t.selector.selections.map((function(e){return e.model.id}))}}]),n}();function pf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pf(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c()(ff,"className","MindmapAppendParent"),c()(ff,"enable",(function(e){var t=df(e.selector.selections,e);return t.length>0&&t.every((function(e){return e.isMindmap&&e.parent===t[0].parent}))}));var mf=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).pinLine=new Ls(e.diagram),r}return v()(n,[{key:"execute",value:function(){var e,t=this.diagram,n=this.pinLine,r=t.selector.selections[0],a=r.getChildren(),o=a.map((function(e){return e.model.id})),i=d()(r.model),c=r.parent&&r.parent.model.id,l=r.isStem,s=r.getNth();e=l?a.map((function(e){var t=e.model;return Object.assign(d()(t),{type:"mindmap",x:e.x,y:e.y,layout:hf(hf({},r.layout),e.layout)})})):a.map((function(e){return d()(e.model)})).reverse(),this.isStem=l,this.nth=s,this.childIds=o,this.childModels=e,this.selfId=r.model.id,this.selfModel=i,this.parentId=c,n.cache([r]),this.forward()}},{key:"forward",value:function(){var e=this.isStem,t=this.nth,n=this.childModels,r=this.parentId,a=this.diagram,o=this.selfId,i=this.childIds,c=this.pinLine,l={};a.remove(o),c.pin(),r&&(l.parent=r),e||(l.nth=t),a.add(n,l),this.select(i)}},{key:"backward",value:function(){var e=this.isStem,t=this.nth,n=this.childIds,r=this.selfModel,a=this.parentId,o=this.diagram,i=this.selfId,c=this.pinLine,l={};o.remove(n),a&&(l.parent=a),e||(l.nth=t),o.add(r,l),c.reset(),this.select(i)}}]),n}();c()(mf,"className","MindmapRemoveSingleNode"),c()(mf,"enable",(function(e){var t=e.selector.selections;return 1===t.length&&t.every((function(e){return e.isMindmap}))}));var gf=function(e){b()(n,Fr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return v()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections[0];e.emit("opennote",{cell:t})}}]),n}();function vf(e,t){return be()(e).toHex()===be()(t).toHex()}function yf(e,t){return e.reduce((function(e,t){return"object"===o()(e)?e[t]:e}),t)}function bf(e,t,n){var r=e.length;n=d()(n),e.reduce((function(e,t,a){if(a===r-1)return e[t]=n,n;if("object"===o()(e[t]))return e[t];if(void 0===e[t]){var i={};return e[t]=i,i}return{}}),t)}function kf(e,t){var n=Ya(t.find(e.id).textAreaElement.htmlContainer);return e.children&&(n.children=e.children.map((function(e){return kf(e,t)}))),n}function wf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=n.children,o=yf(t=t.split("."),n),i="none";if(a&&a.length>1)for(var c=0;c<a.length;c++){var l=a[c],s=yf(t,l);if("none"!==i){if(!ve()(s,i)){i="none";break}}else i=s}return"none"!==i?bf(t,e,i):o&&!r&&bf(t,e,o),e}c()(gf,"className","MindmapAttachNote"),c()(gf,"isModelChange",!1),c()(gf,"enable",(function(e){var t=e.selector.selections;return 1===t.length&&t.every((function(e){return e.isMindmap}))}));var xf=function(){function e(t){m()(this,e),this.diagram=t}return v()(e,[{key:"_getRainBowColors",value:function(){var e=this.diagram,t=e.palette,n=_u;if(t){var r=e.palette.colors[1];n=[r[4],r[8],r[6],r[5],r[9],r[2],r[7],r[3],r[1],r[0]]}return n}},{key:"appendChildAddButtonTail",value:function(e){var t=this._getRainBowColors(),n=e.stem.rainbow;return e.isStem?{treeEdge:{stroke:n?t[e.model.children.length%t.length]:"#959EA6","stroke-width":e.getDefaultStrokeWidth(e.depth+1)}}:{treeEdge:{stroke:e.computedProps.treeEdge.stroke,"stroke-width":e.getDefaultStrokeWidth(e.depth+1)}}}},{key:"appendChildTransitiveCommon",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];wf(e,"border.shape",t.model,n),wf(e,"border.stroke",t.model,n),wf(e,"border.fill",t.model,n),wf(e,"border.stroke-width",t.model,n),wf(e,"layout",t.model,!0),wf(e,"treeEdge.stroke-width",t.model,n)}},{key:"appendChildTransitiveTextFormat",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=kf(t.model,this.diagram),a={},o=[];wf(a,"fontSize",r,n),wf(a,"color",r,n),a.fontSize&&14!==a.fontSize&&o.push("font-size: ".concat(a.fontSize,"px")),a.color&&!vf(a.color,"#262626")&&o.push("color: ".concat(a.color)),o.length>0&&(e.html='<span style="'.concat(o.join(";"),'">').concat("&#8203;","</span>"))}},{key:"appendChildTreeEdge",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.stem,a=r.rainbow,o=this._getRainBowColors();bf(["treeEdge","stroke"],e,a?o[(t.model.children.length+n)%o.length]:"#959EA6")}},{key:"appendChildModel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={};return e.isStem?(this.appendChildTransitiveCommon(n,e,!0),this.appendChildTransitiveTextFormat(n,e,!0),this.appendChildTreeEdge(n,e,t)):(this.appendChildTransitiveCommon(n,e),this.appendChildTransitiveTextFormat(n,e)),n}},{key:"insertStemModel",value:function(){return Qt}},{key:"destroy",value:function(){this.diagram=void 0}}]),e}();c()(xf,"className","Query");var _f=function(){var e={};return Array.from(arguments).forEach((function(t){Object.keys(t).forEach((function(n){var r=t[n];s()(r)?e[n]?Object.assign(e[n],r):e[n]=Object.assign({},r):Array.isArray(r)?e[n]?e[n]=[].concat(e[n],r):e[n]=[].concat(r):e[n]=r}))})),e}(xu,{Cells:[Qu,ld],Extends:[xf],defaultCursors:{},modes:[{mode:"edit",Behaviours:[ud,dd,Ed,Pd,Id,zd,qd,Hd,pd,Wd,Gd,Xd,Kd]},{mode:"read",Behaviours:[ud,Gd,fd,qd,Hd,pd]},{mode:"beginAddMindmapStem",Behaviours:[ud,Vd]}],Commands:[Zd,Qd,ef,tf,nf,of,Jd,af,cf,ff,mf,gf]}),Ef=Object.freeze({__proto__:null,Board:_f});Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-toolbar-dropdown .ant-btn:after {\n  display: none;\n}\n.lake-diagram-toolbar-dropdown .ant-btn.ant-dropdown-trigger:hover {\n  background: #f5f5f5;\n  border-radius: 2px;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button {\n  height: 32px;\n  line-height: 32px;\n  border-radius: 2px;\n  border: 1px solid transparent;\n  display: flex;\n  align-items: center;\n  transition: border 0.3s;\n  margin-right: 4px;\n  overflow: hidden;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button:hover {\n  border-color: #e8e8e8;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button:hover .ant-btn:first-child {\n  border-color: #e8e8e8;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn {\n  border-radius: 0;\n  transition: none;\n  margin-right: 0;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn:hover {\n  background: #f5f5f5;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn:first-child {\n  border-right: 1px solid transparent;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn:first-child:hover {\n  background: #f5f5f5;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn:first-child:not(:last-child) {\n  min-width: auto;\n  width: 30px;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) {\n  min-width: auto;\n  width: 16px;\n  border: none;\n  background: none;\n  padding: 0;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  position: relative;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) .lake-icon {\n  position: absolute;\n  right: 4px;\n  top: 14px;\n  width: 8px;\n  height: 8px;\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSI1IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgb3BhY2l0eT0iLjQ1Ij48cGF0aCBkPSJNMC0yaDh2OEgweiIvPjxwYXRoIGQ9Ik0uNTk2LjU1N2wzLjE1IDMuODIxYS4zMzIuMzMyIDAgMDAuNDk1IDBMNy40MDUuNTU3YS4zMzIuMzMyIDAgMDAtLjI0Ny0uNTUzSC44NDVjLS4yODggMC0uNDQuMzM5LS4yNDkuNTUzeiIgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPg==);\n  background-repeat: no-repeat;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) .lake-icon:before {\n  content: '';\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child):hover {\n  background: #e8e8e8;\n}\n.lake-diagram-toolbar-dropdown-menu .lake-icon {\n  font-size: 16px;\n}\n");var Cf=["mode"];function Of(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Of(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Of(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rf(e){return e.overlay?e.overlay:Ae.a.createElement(U.a,{onClick:e.onSelect,className:Ne()("lake-diagram-toolbar-dropdown-menu",e.menuClassName)},e.data.map((function(e){return Ae.a.createElement(U.a.Item,{key:e.key},Ae.a.createElement("span",{className:"lake-icon lake-icon-".concat(e.icon)}))})))}function jf(e){var t=e.command,n=e.name;return Ae.a.createElement("div",{className:"lake-diagram-toolbar-command lake-diagram-toolbar-dropdown"},Ae.a.createElement(V.a,{overlay:Rf(Sf(Sf({},e),{},{onSelect:function(n){var r=n.key;e.onSelect?e.onSelect({key:r}):e.execCommand(t,{key:r})}}))},Ae.a.createElement(q.a,{"data-testid":n},Ae.a.createElement("span",{className:"lake-icon lake-icon-".concat(e.icon)}))))}function Pf(e){var t=e.name,n=e.command,r=e.defaultKey,a=e.data,o=Object(Pe.useState)(r),i=M()(o,2),c=i[0],l=i[1],s=a.find((function(e){return e.key===c}));return Ae.a.createElement("div",{className:"lake-diagram-toolbar-command lake-diagram-toolbar-dropdown"},Ae.a.createElement(V.a.Button,{onClick:function(){e.onClick?e.onClick({key:c}):e.execCommand(n,{key:c})},overlay:Rf(Sf(Sf({},e),{},{onSelect:function(t){var n=t.key;l(n),e.onSelect&&e.onSelect({key:n})}})),icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-dropdown-arrow"}),"data-testid":t},Ae.a.createElement("span",{className:"lake-icon lake-icon-".concat(e.icon||s.icon)})))}function Af(e){var t=e.mode,n=Ie()(e,Cf);return"button"===t?Ae.a.createElement(Pf,n):Ae.a.createElement(jf,n)}function Tf(e){var t=e.name,n=e.icon,r=e.accept,a=e.disabled,o=e.title,i=e.onChange,c=Object(Pe.useRef)();return Ae.a.createElement("div",{className:"lake-diagram-toolbar-command","data-testid":t},Ae.a.createElement(H.a,{disabled:a||!o,placement:"bottom",title:Ae.a.createElement("div",{className:"lake-diagram-toolbar-tooltip"},o&&Ae.a.createElement("div",{className:"lake-diagram-toolbar-tooltip-title"},o))},Ae.a.createElement(q.a,{className:"lake-diagram-toolbar-upload",onClick:function(){return c.current.click()},disabled:a},Ae.a.createElement("span",{className:"lake-icon lake-icon-".concat(n)}),Ae.a.createElement("input",{type:"file",accept:r,onChange:i,ref:c}))))}function Df(e){var t=e.name,n=e.title,r=e.hotkey,a=e.icon,o=e.label,i=e.command,c=e.disabled,l=e.active,s=Object.keys(e).reduce((function(t,n){return n.startsWith("data-")&&(t[n]=e[n]),t}),{});return Ae.a.createElement("div",je()({className:"lake-diagram-toolbar-command","data-testid":t},s),Ae.a.createElement(H.a,{disabled:c||!(n||r),placement:"bottom",title:Ae.a.createElement("div",{className:"lake-diagram-toolbar-tooltip"},n&&Ae.a.createElement("div",{className:"lake-diagram-toolbar-tooltip-title"},n),r&&Ae.a.createElement("div",{className:"lake-diagram-toolbar-tooltip-hotkey"},r))},Ae.a.createElement(q.a,{onClick:function(t){t.stopPropagation(),e.onClick?e.onClick():e.execCommand(i)},disabled:c,className:Ne()({"lake-button-active":l}),"data-testid":"".concat(t,"-button")},Ae.a.createElement("span",{className:"lake-icon lake-icon-".concat(a)}),o&&Ae.a.createElement("span",{className:"lake-diagram-toolbar-command-label"},o))))}function Mf(e){switch(e.type){case"separator":return Ae.a.createElement("div",{className:"lake-diagram-toolbar-separator"});case"dropdown":return Ae.a.createElement(Af,e);case"upload":return Ae.a.createElement(Tf,e);default:return Ae.a.createElement(Df,e)}}function Nf(e){var t=e.commands,n=e.extra,r=e.execCommand;return Ae.a.createElement("div",{className:Ne()("lake-diagram-toolbar",e.className),"data-lake_prevent_click_unselect":"true"},Ae.a.createElement("div",{className:"lake-diagram-toolbar-title"},e.title),Ae.a.createElement("div",{className:"lake-diagram-toolbar-body"},t.map((function(e,t){return Ae.a.createElement(Mf,je()({key:"".concat(e.name||e.type,"-").concat(t),execCommand:r},e))}))),Ae.a.createElement("div",{className:"lake-diagram-toolbar-extra"},n))}Rf.propTypes={data:De.a.array,overlay:De.a.node,onSelect:De.a.func,menuClassName:De.a.string},jf.propTypes={command:De.a.string,name:De.a.string,icon:De.a.string,onSelect:De.a.func,execCommand:De.a.func},Pf.propTypes={command:De.a.string,name:De.a.string,defaultKey:De.a.string,title:De.a.string,data:De.a.array,icon:De.a.string,onClick:De.a.func,onSelect:De.a.func,execCommand:De.a.func},Af.propTypes={mode:De.a.string},Fe(".lake-diagram-toolbar-upload {\n  position: relative;\n}\n.lake-diagram-toolbar-upload input {\n  position: absolute;\n  left: 0;\n  top: 0;\n  opacity: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  display: none;\n}\n"),Tf.propTypes={name:De.a.string,icon:De.a.string,accept:De.a.string,disabled:De.a.bool,title:De.a.string,onChange:De.a.func},Df.defaultProps={disabled:!0},Df.propTypes={disabled:De.a.bool,name:De.a.string,title:De.a.string,hotkey:De.a.string,type:De.a.string,icon:De.a.string,label:De.a.string,command:De.a.string,onClick:De.a.func,execCommand:De.a.func,active:De.a.bool},Mf.propTypes={type:De.a.string},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-toolbar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 38px;\n  border: solid #e8e8e8;\n  border-width: 1px 0;\n  padding-left: 16px;\n  padding-right: 12px;\n  background: #fcfcfc;\n}\n.lake-diagram-toolbar-body {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n}\n.lake-diagram-toolbar-separator {\n  width: 1px;\n  height: 100%;\n  margin: 0 4px;\n  background: #e8e8e8;\n}\n.lake-diagram-toolbar-command .ant-btn {\n  border: none;\n  background: none;\n  padding: 0 8px;\n  height: 32px;\n  min-width: 32px;\n  margin-left: 4px;\n  margin-right: 4px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  outline: none;\n}\n.lake-diagram-toolbar-command .ant-btn[disabled] {\n  color: #BFBFBF;\n  background: none;\n}\n.lake-diagram-toolbar-command .ant-btn:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-diagram-toolbar-command .ant-btn:focus {\n  color: #595959;\n}\n.lake-diagram-toolbar-command .ant-btn::after {\n  display: none;\n}\n.lake-diagram-toolbar-command .ant-btn .lake-icon {\n  margin-right: 0;\n  font-size: 16px;\n}\n.lake-diagram-toolbar-command .lake-button-active {\n  background-color: #e8e8e8;\n}\n.lake-diagram-toolbar-command-label {\n  display: inline-block;\n  margin-left: 0.25em;\n}\n.lake-diagram-toolbar-tooltip {\n  text-align: center;\n}\n.lake-diagram-toolbar-tooltip-hotkey {\n  font-size: 12px;\n  color: #BFBFBF;\n  margin-top: 4px;\n}\n.lake-diagram-toolbar-tooltip-hotkey:first-child {\n  margin-top: 0;\n}\n"),Nf.defaultProps={commands:[],toggleProperties:function(){},domContainer:null},Nf.propTypes={className:De.a.string,commands:De.a.array,domContainer:De.a.object,title:De.a.node,extra:De.a.node,execCommand:De.a.func},Nf.Control=Mf,Fe(".lake-diagram-link-editor {\n  max-width: 398px;\n  display: inline-block;\n  border: 1px solid #E8E8E8;\n  border-radius: 4px;\n  box-shadow: rgba(221, 221, 221, 0.5) 0px 1px 3px;\n  background: white;\n}\n.lake-diagram-link-editor .lake-link-invalid-link {\n  color: #CF1322;\n}\n.lake-diagram-link-editor p {\n  margin-top: 0;\n  margin-bottom: 14px;\n}\n.lake-diagram-link-editor .lake-diagram-link-editor-slash {\n  margin: 0 2px;\n}\n.lake-diagram-link-editor .lake-diagram-link-editor-slash {\n  width: 1px;\n  height: 14px;\n  border-left: 1px solid #E8E8E8;\n  margin: 0 1px;\n  margin-top: 5px;\n  vertical-align: top;\n}\n.lake-diagram-link-editor .lake-icon {\n  color: #8590A6;\n  font-size: 16px;\n}\n.lake-diagram-link-editor-preview {\n  line-height: 16px;\n  padding: 6px 8px;\n  vertical-align: middle;\n  white-space: nowrap;\n}\n.lake-diagram-link-editor-preview * {\n  display: inline-block;\n}\n.lake-diagram-link-editor-preview .lake-diagram-link-editor-button {\n  color: #595959;\n  margin: 0px 0px 0px 8px;\n  padding: 4px;\n}\n.lake-diagram-link-editor-preview .lake-diagram-link-editor-button:hover {\n  background: #F4F4F4;\n  cursor: pointer;\n}\n.lake-diagram-link-editor-preview .lake-diagram-link-editor-link-container {\n  color: #1890FF;\n  height: 16px;\n  padding: 0 6px;\n  min-width: 180px;\n  max-width: 292px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  text-decoration: none;\n  line-height: 12px;\n  font-size: 14px;\n  letter-spacing: 1.2px;\n  vertical-align: middle;\n}\n.lake-diagram-link-editor-preview .lake-diagram-link-editor-link-empty {\n  height: 16px;\n  padding: 0 6px;\n  min-width: 146px;\n  max-width: 292px;\n  line-height: 20px;\n  font-size: 14px;\n}\n.lake-diagram-link-editor-preview .lake-diagram-link-editor-link-container:hover {\n  cursor: pointer;\n}\n.lake-diagram-link-editor-edit {\n  width: 365px;\n  padding: 16px 12px;\n  padding-bottom: 4px;\n}\n");var Lf={"zh-cn":{text:"文本",link:"链接",editLink:"编辑链接",addDescription:"添加描述",linkAddress:"链接地址",deleteLink:"删除链接",confirm:"确定",pleaseInputLink:"请输入链接",emptyLink:"空链接",pleaseEnterCorrectLink:"请输入正确的链接",selectedContent:"多行文字被选中，暂不支持修改文本"},en:{text:"Text",link:"Link",editLink:"Edit link",addDescription:"Add a description",linkAddress:"Link address",deleteLink:"Delete link",confirm:"Confirm",pleaseInputLink:"Please input link address",emptyLink:"Empty link",pleaseEnterCorrectLink:"Please enter the correct link",selectedContent:"Selected in the document"}};Lf["en-us"]=Lf.en;var If=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(e){var r;m()(this,n);var a=(r=t.call(this,e)).props,o=a.lang,i=a.target;return r.locale=Lf[o],r.nativeEvents=[],r.rect=i.getBoundingClientRect(),r.link=i.getAttribute("href"),r.isMultiLink=i.length>1,r.state={invalidLink:r.isInvalidLink(r.link)},r.preventScrollCancel=!1,r}return v()(n,[{key:"adjustPosition",value:function(){var e=this.container,t=this.props.target,n=e.getBoundingClientRect(),r=e.offsetParent.getBoundingClientRect(),a=t.getBoundingClientRect(),o=window.pageYOffset+a.bottom+4-r.top,i=window.pageXOffset+a.left-r.left;o+n.height>window.innerHeight-20&&(o=window.pageYOffset+a.top-n.height-4),n.right>window.innerWidth-20?i=window.pageXOffset+window.innerWidth-n.width-4:i<20&&(i=window.pageXOffset+20),e.style.top="".concat(o,"px"),e.style.left="".concat(i,"px")}},{key:"componentDidMount",value:function(){this.bindNativeEvents(),this.adjustPosition()}},{key:"componentDidUpdate",value:function(){this.adjustPosition()}},{key:"componentWillUnmount",value:function(){this.removeNativeEvents()}},{key:"bindNativeEvents",value:function(){var e=this,t=this.container,n=!1;this.addNativeEvent(window,"scroll",(function(t){!0!==e.preventScrollCancel?t.target.className&&-1!==t.target.className.indexOf("lake-link")||e.cancel():t.preventDefault()}),!0),this.addNativeEvent(window,"resize",(function(){e.cancel()}),!0),this.addNativeEvent(window,"mousedown",(function(e){var r=e.target;t.contains(r)||(n=!0)}),!0),this.addNativeEvent(window,"mouseup",(function(r){var a=r.target;n&&!t.contains(a)&&e.cancel(),n=!1}))}},{key:"cancel",value:function(){var e=this.props,t=e.onCancel,n=e.target;t({link:n&&n.getAttribute("href")})}},{key:"addNativeEvent",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.addEventListener(t,n,r),this.nativeEvents.push({dom:e,name:t,callback:n,useCapture:r})}},{key:"removeNativeEvents",value:function(){this.nativeEvents.forEach((function(e){var t=e.dom,n=e.name,r=e.callback,a=e.useCapture;t.removeEventListener(n,r,a)})),this.nativeEvents=[]}},{key:"confirm",value:function(){var e=this.props.onConfirm,t=this.state.invalidLink,n=this.getText(),r=this.getLink();t||e(n,r)}},{key:"renderPreview",value:function(){var e,t=this.props,n=t.onDeleteLink,r=t.shouldTargetBlank,a=t.onSwitchToEdit,o=t.dataset,i=this.getLink(),c=this.locale,l=i||c.emptyLink;return e=i?r(i)?Ae.a.createElement("a",{className:"lake-diagram-link-editor-link-container",href:Kt(i),target:"_blank"},l):Ae.a.createElement("a",{className:"lake-diagram-link-editor-link-container",href:Kt(i)},l):Ae.a.createElement("span",{className:"lake-diagram-link-editor-link-empty"},l),Ae.a.createElement("div",{className:"lake-diagram-link-editor lake-diagram-link-editor-preview"},Ae.a.createElement("span",{className:"lake-icon lake-icon-link"}),e,Ae.a.createElement("span",{className:"lake-diagram-link-editor-slash"}),Ae.a.createElement(H.a,{title:c.editLink},Ae.a.createElement("a",je()({},o,{className:"lake-icon lake-icon-edit lake-diagram-link-editor-button",onClick:function(){a()}}))),Ae.a.createElement(H.a,{title:c.deleteLink},Ae.a.createElement("a",je()({},o,{className:"lake-icon lake-icon-unlink lake-diagram-link-editor-button",onClick:n}))))}},{key:"isInvalidLink",value:function(e){return function(e){return!e||e&&!e.match(/^[\x00-\x7F]/)||e.startsWith("javascript:")}(e)}},{key:"renderEditorContent",value:function(){var e=this,t=this.props.dataset,n=this.state.invalidLink,r=this.getText(),a=this.getLink(),o=this.locale;return Ae.a.createElement("div",{className:"lake-diagram-link-editor lake-diagram-link-editor-edit",onKeyDown:function(t){var n=t.which,r=e.state.invalidLink;13!==n||r||e.confirm(),27===n&&e.cancel()}},Ae.a.createElement("p",null,o.text),Ae.a.createElement("p",null,Ae.a.createElement(W.a,{className:"lake-link-text-input",defaultValue:this.isMultiLink?o.selectedContent:r,ref:function(t){e.textInputDom=t},placeholder:o.addDescription,disabled:this.isMultiLink,onChange:function(t){e.text=t.target.value}})),Ae.a.createElement("p",null,o.link),Ae.a.createElement("p",null,Ae.a.createElement(W.a,{className:"lake-link-link-input",defaultValue:a,ref:function(t){e.preventScrollCancel=!0,t&&t.focus(),e.linkInputDom=t,setTimeout((function(){e.preventScrollCancel=!1}),32)},placeholder:o.linkAddress,onChange:function(t){e.link=t.target.value,e.setState({invalidLink:e.isInvalidLink(e.link)})}})),n&&""!==a?Ae.a.createElement("p",{className:"lake-link-invalid-link"},o.pleaseEnterCorrectLink):"",Ae.a.createElement("p",null,Ae.a.createElement(q.a,je()({},t,{className:"lake-link-confirm-button",onClick:function(){e.confirm()},disabled:!this.link||n}),o.confirm)))}},{key:"getLink",value:function(){var e=this.props.getLink;return this.link&&e(this.link)||""}},{key:"getText",value:function(){var e=this.props.target;return this.isMultiLink?"":this.text||e.textContent}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.type,a=n.className,o=n.dataset;return e="edit"===r?this.renderEditorContent():this.renderPreview(),Ae.a.createElement("div",je()({},o,{className:a,ref:function(e){t.container=e},style:{top:"0px",position:"absolute",zIndex:"1400"}}),e)}}]),n}(Ae.a.Component);function Bf(e){var t=window.location,n=(t.origin+t.pathname.replace("/edit","")).replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=new RegExp("^".concat(n,"#"));return e=e.replace(r,"#").trim(),/^(\w+\.)+\w+(\/|$)/.test(e)&&(e="https://"+e),e}function zf(e){var t=e.diagram,n=Object(Pe.useState)(null),r=M()(n,2),a=r[0],o=r[1],i=Object(Pe.useState)("preview"),c=M()(i,2),l=c[0],s=c[1];return Object(Pe.useEffect)((function(){function e(e,t){o(e),s(t)}function n(t){var n=t.result,r=t.target,a=t.name;n&&"createLink"===a&&e(r,"edit")}function r(){o(null)}var a=se()((function(){var n=t.contentEditor.getRange();if(n){var r=t.contentEditor.closest(n.commonAncestorContainer,"a");r?e(r,"preview"):o(null)}}),16);return t.contentEditor.on("execcommand",n),t.contentEditor.on("endedit",r),t.contentEditor.on("selectionchange",a),function(){t.contentEditor.off("execcommand",n),t.contentEditor.off("endedit",r),t.contentEditor.off("selectionchange",a)}}),[t]),a?Ae.a.createElement(If,{dataset:{"data-lake_prevent_click_unselect":!0},target:a,type:l,lang:Zt.locale,getLink:Bf,onConfirm:function(e,n){a.textContent=e,a.setAttribute("href",n),setTimeout((function(){if(a&&t.viewportContainer.contains(a)){var e=window.getSelection(),n=document.createRange();n.selectNode(a),n.collapse(),e.removeAllRanges(),e.addRange(n)}}),16),o(null)},onSwitchToEdit:function(){s("edit")},onCancel:function(){o(null)},onDeleteLink:function(){a.removeAttribute("href"),function(e){for(var t=e.firstChild;t;){var n=t.nextSibling;e.parentNode.insertBefore(t,e),t=n}e.parentNode.removeChild(e)}(a),o(null)},shouldTargetBlank:function(){return!0}}):Ae.a.createElement("div",null)}function Ff(e){var t=Object(Pe.useRef)(),n=e.groups,r=e.shapeSelect||Object(Pe.useMemo)((function(){return new cs({groups:n})}),[n]);return Object(Pe.useEffect)((function(){t.current.appendChild(r.rendererElement),t.current.setAttribute("height",r.height)}),[r]),Object(Pe.useEffect)((function(){function t(t){var n=t.shape,r=t.group;e.onSelect&&e.onSelect({key:n,group:r})}return r.on("shape:select",t),function(){r.off("shape:select",t)}}),[e.onSelect]),Ae.a.createElement("svg",{className:Ne()(e.className,"lake-prevent-card-activated"),"data-lake_prevent_click_unselect":"true",ref:t,onClick:function(t){e.onClick&&e.onClick(t)},width:208,style:{boxShadow:"0 1px 2px -2px rgb(0 0 0 / 8%), 0 2px 6px 0 rgb(0 0 0 / 4%), 0 4px 8px 1px rgb(0 0 0 / 2%)",border:"1px solid #e9e9e9"},"data-testid":"shape-overlay"})}If.defaultProps={dataset:{},className:null,type:"preview",lang:"zh-cn",onDeleteLink:function(){},onSwitchToEdit:function(){},onConfirm:function(){},onCancel:function(){},shouldTargetBlank:function(){},getLink:function(e){return e}},If.propTypes={dataset:De.a.object,className:De.a.string,target:De.a.object,type:De.a.string,lang:De.a.string,onDeleteLink:De.a.func,onSwitchToEdit:De.a.func,onConfirm:De.a.func,onCancel:De.a.func,shouldTargetBlank:De.a.func,getLink:De.a.func},Fe(""),zf.defaultProps={diagram:null},zf.propTypes={diagram:De.a.object.isRequired},Ff.defaultProps={groups:["flowchart"],shapeSelect:null},Ff.propTypes={onClick:De.a.func,onSelect:De.a.func,className:De.a.string,shapeSelect:De.a.object,groups:De.a.arrayOf(De.a.string)},Fe(".lake-zoom-tool {\n  padding: 0 5px;\n  width: auto;\n  height: 25px;\n  border: 1px solid #E2E2E2;\n  box-shadow: 0px 2px 4px rgba(225, 225, 225, 0.5);\n  color: #EEEEEE;\n  background: #B4B4B4;\n  position: absolute;\n  top: 16px;\n  right: 28px;\n  border-radius: 6px;\n  font-size: 14px;\n  line-height: 24px;\n  letter-spacing: 0.05em;\n  outline-style: none;\n  word-wrap: break-word;\n}\n.lake-zoom-tool .ant-dropdown {\n  left: -2.5px;\n}\n.lake-zoom-tool ul {\n  list-style-type: none;\n  margin: 0;\n}\n.lake-zoom-tool ul.lake-zoom-tool-menu {\n  width: 86px;\n  background: #595959;\n}\n.lake-zoom-tool ul.lake-zoom-tool-menu li {\n  font-size: 12px;\n  margin-left: 0;\n  margin-top: 0;\n  margin-bottom: 0;\n  white-space: nowrap;\n}\n.lake-zoom-tool .ant-dropdown-menu-item:hover {\n  background: #3C3C3C;\n}\n.lake-zoom-tool .ant-dropdown-menu-item {\n  color: white;\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n.lake-zoom-tool .lake-icon {\n  margin: 3.5px;\n  margin-top: 2px;\n  font-size: 14px;\n  width: 14px;\n  height: 14px;\n}\n.lake-zoom-tool .lake-icon:hover {\n  cursor: pointer;\n}\n.lake-zoom-tool .lake-zoom-tool-precent {\n  vertical-align: top;\n  line-height: 23px;\n}\n.lake-zoom-tool span {\n  display: inline-block;\n  padding: 0;\n  font-size: 12px;\n  height: 26px;\n  text-align: center;\n  user-select: none;\n}\n.lake-zoom-tool .lake-zoom-tool-dropdown:hover {\n  cursor: pointer;\n}\n.lake-zoom-tool:hover {\n  background: #595959;\n}\n.lake-card-block-max .lake-zoom-tool {\n  margin: 8px;\n}\n");var Uf=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"_setZoom",value:function(e){var t=this.props,n=t.onChange,r=t.minZoom,a=t.maxZoom;e<r&&(e=r),e>a&&(e=a),n(e)}},{key:"_clickZoomIn",value:function(){var e=this.props,t=e.zoomStep,n=e.zoom;this._setZoom(n+t)}},{key:"_clickZoomOut",value:function(){var e=this.props,t=e.zoomStep,n=e.zoom;this._setZoom(n-t)}},{key:"render",value:function(){var e=this,t=this.props.zoom,n=Ae.a.createElement(U.a,{className:"lake-zoom-tool-menu",onClick:function(t){var n=t.item;e._setZoom(n.props.value)}},Ae.a.createElement(U.a.Item,{value:"resetView"},$t("回到中心")),Ae.a.createElement(U.a.Item,{value:.2},"20%"),Ae.a.createElement(U.a.Item,{value:.5},"50%"),Ae.a.createElement(U.a.Item,{value:1},"100%"),Ae.a.createElement(U.a.Item,{value:2},"200%"),Ae.a.createElement(U.a.Item,{value:4},"400%"),Ae.a.createElement(U.a.Item,{value:"autoFit"},$t("适应画布")));return Ae.a.createElement("div",{className:"lake-zoom-tool",ref:function(t){e.zoomToolDOM=t}},Ae.a.createElement("span",{className:"lake-icon lake-icon-zoom-out",onClick:this._clickZoomOut.bind(this)}),Ae.a.createElement(V.a,{className:"lake-zoom-tool-dropdown",overlay:n,placement:"bottomCenter",trigger:["click"],getPopupContainer:function(){return e.zoomToolDOM}},Ae.a.createElement("span",{className:"lake-zoom-tool-precent"},Math.round(100*t)+"%")),Ae.a.createElement("span",{className:"lake-icon lake-icon-zoom-in",onClick:this._clickZoomIn.bind(this)}))}}]),n}(Ae.a.Component);function Vf(e){var t=e.diagram,n=Object(Pe.useState)(null),r=M()(n,2),a=r[0],o=r[1];return Object(Pe.useEffect)((function(){if(t){o(t.viewport.zoom);var e=se()((function(){o(t.viewport.zoom)}),32);return t.on("afterviewportchange",e),function(){t.off("afterviewportchange",e)}}}),[a,t]),t?Ae.a.createElement(Uf,{zoom:a,onChange:function(e){"autoFit"===e?t.viewport.autoFit():"resetView"===e?t.viewport.focusFirstRoot():t.viewport.setViewport(e)}}):Ae.a.createElement("div",null)}function qf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qf(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Uf.defaultProps={zoom:1,onChange:function(){},minZoom:.2,maxZoom:4,zoomStep:.2},Uf.propTypes={zoom:De.a.number,onChange:De.a.func,minZoom:De.a.number,maxZoom:De.a.number,zoomStep:De.a.number},Vf.propTypes={diagram:De.a.object},Fe("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n/**\n * lake/editor 的卡片容器实现方式会导致文档样式影响卡片编辑器样式\n */\n.lake-diagram-panel-properties ~ div .ant-dropdown-menu-item {\n  margin-left: 0;\n  list-style-type: none;\n}\n.lake-diagram-panel-properties {\n  background-color: #fafafa;\n  border-left: 1px solid #e8e8e8;\n  height: 100%;\n  width: 100%;\n  min-width: 212px;\n  max-width: 286px;\n  cursor: default;\n  user-select: none;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-menu-hide-header {\n  margin-top: 8px;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-menu-hide-header .ant-collapse-header {\n  display: none;\n}\n.lake-diagram-panel-properties .lake-diagam-multi-properties-selection {\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/8c02d0c7-9749-4078-b865-6084959df78f.svg);\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body {\n  height: 100%;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs {\n  height: 100%;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs .ant-tabs-nav {\n  width: 100%;\n  margin-bottom: 0px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.09);\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs .ant-tabs-nav .ant-tabs-nav-list {\n  width: 100%;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab {\n  flex-grow: 1;\n  margin: 0 2px;\n  display: inline-block;\n  text-align: center;\n  border: none;\n  color: #8C8C8C;\n  border-radius: 0;\n  background-color: rgba(0, 0, 0, 0);\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab:hover {\n  color: #262626;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn {\n  color: #262626;\n  font-weight: 400;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs .ant-tabs-content-holder {\n  overflow: auto;\n  height: calc(100% - 38px);\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs-bar {\n  margin: 0;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse {\n  border: none;\n  background-color: rgba(0, 0, 0, 0);\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-header {\n  padding: 0 16px;\n  margin: 8px 0;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-header .anticon {\n  padding: 0;\n  margin-right: 8px;\n  top: 6px;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-item {\n  padding-top: 8px;\n  border-bottom: none;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-item .ant-collapse-content {\n  border: none;\n  background: none;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-item .ant-collapse-content .ant-collapse-content-box {\n  margin: 0px 16px;\n  padding: 0px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.09);\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-item:last-child .ant-collapse-content-box {\n  border-bottom: none;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-item:last-child {\n  border-bottom: none;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body-empty {\n  height: 100%;\n  position: relative;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body-empty .lake-diagram-background-wrapper {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  margin: auto;\n  padding-bottom: 96px;\n  width: 200px;\n  height: 140px;\n  text-align: center;\n  color: #BFBFBF;\n  line-height: 24px;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body-empty .lake-diagram-background-wrapper p {\n  margin-bottom: 0;\n}\n.lake-diagram-control {\n  margin-bottom: 8px;\n}\n.lake-diagram-control.disabled .lake-diagram-control-title {\n  color: #BFBFBF;\n}\n.lake-diagram-control.disabled .lake-diagram-control-extra {\n  border-color: #e8e8e8;\n  background: none;\n}\n.lake-diagram-control.disabled .lake-diagram-control-extra > svg {\n  display: none;\n}\n.lake-diagram-control-title {\n  color: #595959;\n  letter-spacing: 0;\n}\n.lake-diagram-control-head {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.lake-diagram-control-extra {\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  width: 92px;\n  min-height: 32px;\n  overflow: hidden;\n  background: #ffffff;\n  cursor: pointer;\n}\n.lake-diagram-control-extra > svg {\n  display: block;\n}\n.lake-diagram-control-body .ant-checkbox + span {\n  letter-spacing: 0;\n}\n.lake-diagram-panel-head {\n  border-bottom: 1px solid #e8e8e8;\n  margin-bottom: 12px;\n  padding-bottom: 4px;\n}\n.lake-diagram-panel-head-title {\n  color: #262626;\n  font-size: 14px;\n  font-weight: 500;\n}\n");var Wf=Y.a.TabPane;function Yf(e,t){var n="object"===o()(e)?e:c()({},e,t),r={},a=function(e){e.split(".").reduce((function(t,r,a,o){return t[r]=a+1===o.length?n[e]:{}}),r)};for(var i in n)a(i);return r}function Gf(e){var t,n,r,a=e.diagram,o=e.menus,i=e.tabs,c=e.emptyImg,l=e.className,s=Object(Pe.useState)(e.selections||a.selector.selections.concat([])),u=M()(s,2),d=u[0],f=u[1],p=Object(Pe.useState)(null),h=M()(p,2),m=h[0],g=h[1];function v(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;return"function"==typeof t?(t(),void f(z()(d))):e.onChange?e.onChange(Yf(t,n),r):(a.command.execute("Update",{id:r,model:Yf(t,n),autoSelect:!1}),void f(z()(d)))}return Object(Pe.useEffect)((function(){Array.isArray(e.selections)&&f(e.selections)}),[e.selections]),Object(Pe.useEffect)((function(){if(a){var e=se()((function(e){e&&g(e),f(a.selector.selections.concat([]))}),32),t=function(){e()};return a.on("afterselect",t),function(){a.off("afterselect",t)}}}),[a,m]),Ae.a.createElement("div",{className:Ne()("lake-diagram-panel lake-diagram-panel-properties",l),"data-lake_prevent_click_unselect":"true"},d.length>0?(t=function(e,t,n){var r={},a=[];return e.forEach((function(e,t){var n=e.name,a=e.key;r[a]={name:n,menus:[],index:t,key:a}})),t.forEach((function(e){n.length>0&&e.condition(n)&&(r[e.tabKey].menus.push(e),a.push(e.name))})),Object.values(r).filter((function(e){return e.menus.length>0})).sort((function(e,t){return e.index-t.index}))}(i,o,d),n=o.map((function(e){return e.name})),r=t.map((function(e){return e.key})),Ae.a.createElement("div",{className:"lake-diagram-panel-body"},Ae.a.createElement(Y.a,{type:"card",activeKey:m&&-1!==r.indexOf(m)?m:d.every((function(e){return e.isText}))?"text":t[0].key,onChange:function(e){g(e)}},t.map((function(e){var t=e.name,r=e.menus,o=e.key;return Ae.a.createElement(Wf,{tab:t,key:o},Ae.a.createElement(G.a,{defaultActiveKey:n,expandIcon:function(e){return e.isActive?Ae.a.createElement(Be.a,{style:{color:"#595959"}}):Ae.a.createElement(ze.a,{style:{color:"#595959"}})}},r.map((function(e){return Ae.a.createElement(G.a.Panel,{header:e.name,key:e.name,className:!0===e.hideHeader?"lake-diagram-panel-menu-hide-header":""},e.controls.map((function(e,t){return Ae.a.createElement(e.Control,Hf(Hf({},e.props),{},{key:t,path:e.path,title:e.title,selections:d,diagram:a,onChange:v}))})))}))))}))))):Ae.a.createElement("div",{className:"lake-diagram-panel-body lake-diagram-panel-body-empty"},Ae.a.createElement("div",{className:"lake-diagram-background-wrapper"},Ae.a.createElement("img",{src:c}),Ae.a.createElement("p",null,$t("点击选中元素")),Ae.a.createElement("p",null,$t("可设置颜色、布局、文字等样式")))))}function Xf(e){var t=e.title,n=e.extra,r=e.children,a=e.disabled,o=e.onMouseDown,i=Ne()("lake-diagram-control",e.className,{disabled:a});return Ae.a.createElement("div",{className:i,onMouseDown:o},t&&Ae.a.createElement("div",{className:"lake-diagram-control-head"},Ae.a.createElement("div",{className:"lake-diagram-control-title"},t),n&&Ae.a.createElement("div",{className:"lake-diagram-control-extra"},n)),r&&Ae.a.createElement("div",{className:"lake-diagram-control-body"},r))}function Kf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kf(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $f(e){var t=e.zoom;e=Zf(Zf({},e),{},{zoomToolDOM:null});var n=[{value:.2,title:"20%"},{value:.5,title:"50%"},{value:1,title:"100%"},{value:2,title:"200%"},{value:4,title:"400%"},{value:"autoFit",title:$t("适应画布")}],r=function(t){var n=e,r=n.onChange,a=n.minZoom,o=n.maxZoom;t<a&&(t=a),t>o&&(t=o),r(t)},a=Ae.a.createElement(U.a,{className:"lake-zoom-tool-menu",onClick:function(e){var t=e.item;r(t.props.value)}},n.map((function(e,t){return Ae.a.createElement(U.a.Item,{key:t,value:e.value},e.title)})));return Ae.a.createElement("div",{className:"lake-board-zoom-tool",ref:function(t){e.zoomToolDOM=t}},Ae.a.createElement("span",{className:"lake-icon lake-icon-board-zoom-out",onClick:function(){var t=e,n=t.zoomStep,a=t.zoom;r(a-n)}}),Ae.a.createElement(V.a,{overlayClassName:"lake-board-zoom-tool-dropdown-overlay",overlay:a,placement:"bottomCenter",trigger:["click"]},Ae.a.createElement("span",{className:"lake-zoom-tool-precent"},Math.round(100*t)+"%")),Ae.a.createElement("span",{className:"lake-icon lake-icon-board-zoom-in",onClick:function(){var t=e,n=t.zoomStep,a=t.zoom;r(a+n)}}))}function Qf(e){var t=e.diagram,n=Object(Pe.useState)(null),r=M()(n,2),a=r[0],o=r[1];return Object(Pe.useEffect)((function(){if(t){o(t.viewport.zoom);var e=se()((function(){o(t.viewport.zoom)}),32);return t.on("afterviewportchange",e),function(){t.off("afterviewportchange",e)}}}),[a,t]),t?Ae.a.createElement($f,{zoom:a,onChange:function(e){"autoFit"===e?t.viewport.autoFit():"resetView"===e?t.viewport.focusFirstRoot():t.viewport.setViewport(e)}}):Ae.a.createElement("div",null)}function Jf(e,t){var n=Array.from(e.nativeEvent.target.files).filter((function(e){return fs(e)}));n[0]&&t.emit("importimage",{files:n,from:"uploadButton"})}function ep(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ep(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ep(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function np(e){return e.overlay?e.overlay({onSelect:e.onSelect}):Ae.a.createElement(U.a,{onClick:e.onSelect,className:Ne()("lake-diagram-board-toolbar-menu",e.menuClassName)},e.data.map((function(e){return Ae.a.createElement(U.a.Item,{key:e.key,style:{marginTop:"2px"}},Ae.a.createElement("div",{className:"lake-icon lake-icon-".concat(e.icon)}))})))}function rp(e){var t=e.name,n=e.icon,r=e.tooltipPlacement,a=e.defaultKey,o=e.data,i=e.titleTag,c=Object(Pe.useState)(a),l=M()(c,2),s=l[0],u=l[1],d=o&&o.find((function(e){return e.key===s})),f=Object(Pe.useState)(!1),p=M()(f,2),h=p[0],m=p[1],g=Object(Pe.useState)(!1),v=M()(g,2),y=v[0],b=v[1];return Ae.a.createElement("div",{className:"lake-diagram-board-toolbar-command"},Ae.a.createElement(X.a,{overlayClassName:"lake-diagram-board-toolbar-popover",content:np(tp(tp({},e),{},{onSelect:function(t){var n=t.key;u(n),b(!1),e.onSelect&&e.onSelect({key:n})},setPopoverVisible:b})),trigger:"click",placement:"".concat(r,"Top"),visible:y,onVisibleChange:function(){return b(!y)}},Ae.a.createElement(H.a,{visible:h,placement:r,overlayClassName:Ne()({"lake-diagram-board-toolbar-tooltip-overlay":"right"===r}),title:i},Ae.a.createElement(q.a,{"data-testid":t,onClick:function(){m(!1),b(!y),e.onClick({key:s})},onMouseEnter:function(){return m(!0)},onMouseLeave:function(){return m(!1)}},Ae.a.createElement("span",{className:"lake-icon lake-icon-".concat(n||d.icon)})))))}function ap(e){var t=e.name,n=e.icon,r=e.accept,a=e.disabled,o=e.title,i=e.tooltipPlacement,c=e.onChange,l=e.titleTag,s=Object(Pe.useRef)();return Ae.a.createElement("div",{className:"lake-diagram-board-toolbar-command","data-testid":t},Ae.a.createElement(H.a,{disabled:a||!o,placement:i,title:l,overlayClassName:Ne()({"lake-diagram-board-toolbar-tooltip-overlay":"right"===i})},Ae.a.createElement(q.a,{className:"lake-diagram-board-toolbar-upload",onClick:function(){s.current.value="",s.current.click()},disabled:a},Ae.a.createElement("span",{className:"lake-icon lake-icon-".concat(n)}),Ae.a.createElement("input",{type:"file",accept:r,onChange:c,ref:s}))))}function op(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ip(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?op(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):op(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cp(e){var t=e.name,n=e.titleTag,r=e.title,a=e.hotkey,o=e.icon,i=e.label,c=e.tooltipPlacement,l=e.disabled,s=e.diagram,u=e.defaultKey,d=e.active,f=Object.keys(e).reduce((function(t,n){return n.startsWith("data-")&&(t[n]=e[n]),t}),{});return Ae.a.createElement("div",je()({className:"lake-diagram-board-toolbar-command","data-testid":t},f),Ae.a.createElement(H.a,{disabled:l||!(r||a),placement:c,title:n,overlayClassName:Ne()({"lake-diagram-board-toolbar-tooltip-overlay":"right"===c})},Ae.a.createElement(q.a,{onClick:function(t){t.stopPropagation(),e.onClick?e.onClick({key:u}):e.execCommand&&e.execCommand(s)},disabled:l,className:Ne()({"lake-button-active":d})},Ae.a.createElement("span",{className:"lake-icon lake-icon-".concat(o)}),i&&Ae.a.createElement("span",{className:"lake-diagram-board-toolbar-command-label"},i))))}function lp(e){var t=e.speratorAlignment,n=e.tooltipPlacement,r=e.title,a=e.hotkey,o=e.diagram,i=e.disabled,c=e.active;i="function"==typeof i?i(o):i,c="function"==typeof c?c(o):c;var l=ip(ip({},e),{},{disabled:i,active:c}),s="bottom"===n?Ae.a.createElement("div",{className:"lake-diagram-board-toolbar-tooltip"},r&&Ae.a.createElement("div",{className:"lake-diagram-board-toolbar-tooltip-title"},r),a&&Ae.a.createElement("div",{className:"lake-diagram-board-toolbar-tooltip-hotkey"},a)):Ae.a.createElement("div",{className:"lake-diagram-board-toolbar-tooltip"},r&&Ae.a.createElement("div",{className:"lake-diagram-board-toolbar-tooltip-title"},r,a&&Ae.a.createElement("span",{className:"lake-diagram-board-toolbar-popover-shortcut"},a)));switch(e.type){case"separator":return Ae.a.createElement("div",{className:"lake-diagram-board-toolbar-".concat(t,"-separator")});case"popover":return Ae.a.createElement(rp,je()({},l,{titleTag:s}));case"upload":return Ae.a.createElement(ap,je()({},l,{titleTag:s}));case"custom":return e.component;default:return Ae.a.createElement(cp,je()({},l,{titleTag:s}))}}function sp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function up(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sp(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Gf.defaultProps={diagram:null,menus:null,tabs:null,emptyImg:"",className:""},Gf.propTypes={diagram:De.a.object,menus:De.a.array,tabs:De.a.array,emptyImg:De.a.string,selections:De.a.arrayOf(De.a.object),onChange:De.a.func,className:De.a.string},Fe("/* stylelint-disable */\n.lake-diagram-control .lake-diagram-control-extra .ant-input-number {\n  border: none;\n}\n.lake-diagram-control .lake-diagram-control-extra .lake-diagram-dropdown-input {\n  border: none;\n}\n.lake-diagram-control.disabled .lake-diagram-control-extra {\n  background-color: #fafafa;\n}\n.lake-diagram-control.disabled .ant-input-number.ant-input-number-disabled {\n  background-color: #fafafa;\n}\n"),Object.assign(Xf,{get:function(e,t,n){var r=n;if(e.length>0)if((r=e.map((function(e){return t.split(".").reduce((function(e,t){return e?e.isCell&&e.get(t)||e[t]:e}),e)}))).every((function(e){return e===r[0]})))r=r[0];else{if(!r.every((function(e){return"number"==typeof e})))return"multiValue";r.sort(),r=r[r.length-1]}return r}}),Xf.propTypes={title:De.a.string,extra:De.a.object,children:De.a.node,className:De.a.string,disabled:De.a.bool,onMouseDown:De.a.func},Gf.Control=Xf,Fe(".lake-board-zoom-tool-dropdown-overlay {\n  padding-top: 6px;\n  min-width: 111px;\n}\n.lake-board-zoom-tool-dropdown-overlay ul {\n  list-style-type: none;\n  margin: 0;\n}\n.lake-board-zoom-tool-dropdown-overlay ul.lake-zoom-tool-menu {\n  width: 111px;\n}\n.lake-board-zoom-tool-dropdown-overlay ul.lake-zoom-tool-menu li {\n  font-size: 12px;\n  margin-left: 0;\n  margin-top: 0;\n  margin-bottom: 0;\n  white-space: nowrap;\n}\n.lake-board-zoom-tool-dropdown-overlay .ant-dropdown-menu {\n  box-shadow: 0 2px 4px #d8d8d8;\n  border-radius: 5px;\n}\n.lake-board-zoom-tool-dropdown-overlay .ant-dropdown-menu .ant-dropdown-menu-item {\n  color: black;\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n.lake-board-zoom-tool {\n  display: flex;\n  align-items: center;\n  height: 100%;\n}\n.lake-board-zoom-tool .lake-icon {\n  color: #262626;\n  margin-left: 10px;\n  margin-right: 10px;\n  font-size: 18px;\n  width: 18px;\n  height: 18px;\n}\n.lake-board-zoom-tool .lake-icon:hover {\n  cursor: pointer;\n}\n.lake-board-zoom-tool .lake-zoom-tool-precent {\n  vertical-align: middle;\n  width: 40px;\n  line-height: 25px;\n}\n.lake-board-zoom-tool span {\n  display: inline-block;\n  padding: 0;\n  font-size: 12px;\n  height: 26px;\n  text-align: center;\n  user-select: none;\n}\n.lake-card-block-max .lake-zoom-tool {\n  margin: 8px;\n}\n"),$f.defaultProps={zoom:1,onChange:function(){},minZoom:.2,maxZoom:4,zoomStep:.2},$f.propTypes={zoom:De.a.number,onChange:De.a.func,minZoom:De.a.number,maxZoom:De.a.number,zoomStep:De.a.number,zoomToolDOM:De.a.element},Qf.propTypes={diagram:De.a.object},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-board-toolbar-popover .ant-btn::after {\n  display: none;\n}\n.lake-diagram-board-toolbar-popover .ant-btn.ant-dropdown-trigger:hover {\n  background: #f5f5f5;\n  border-radius: 2px;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button {\n  display: flex;\n  height: 32px;\n  line-height: 32px;\n  border-radius: 2px;\n  border: 1px solid transparent;\n  align-items: center;\n  transition: border 0.3s;\n  margin-right: 4px;\n  overflow: hidden;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button:hover {\n  border-color: #e8e8e8;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button:hover .ant-btn:first-child {\n  border-color: #e8e8e8;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn {\n  border-radius: 0;\n  transition: none;\n  margin-right: 0;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn:hover {\n  background: #f5f5f5;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn:first-child {\n  border-right: 1px solid transparent;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn:first-child:hover {\n  background: #f5f5f5;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn:first-child:not(:last-child) {\n  min-width: auto;\n  width: auto;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) {\n  min-width: auto;\n  width: 16px;\n  border: none;\n  background: none;\n  padding: 0;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  position: relative;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) .lake-icon {\n  color: #262626;\n  position: absolute;\n  right: 4px;\n  top: 14px;\n  width: 8px;\n  height: 8px;\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSI1IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgb3BhY2l0eT0iLjQ1Ij48cGF0aCBkPSJNMC0yaDh2OEgweiIvPjxwYXRoIGQ9Ik0uNTk2LjU1N2wzLjE1IDMuODIxYS4zMzIuMzMyIDAgMDAuNDk1IDBMNy40MDUuNTU3YS4zMzIuMzMyIDAgMDAtLjI0Ny0uNTUzSC44NDVjLS4yODggMC0uNDQuMzM5LS4yNDkuNTUzeiIgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPg==);\n  background-repeat: no-repeat;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) .lake-icon::before {\n  content: '';\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child):hover {\n  background: #e8e8e8;\n}\n.lake-diagram-board-toolbar-popover-menu .lake-icon {\n  color: #262626;\n  font-size: 16px;\n}\n.lake-diagram-board-toolbar-popover .ant-popover-content {\n  min-width: auto;\n  width: auto;\n  border-radius: 3px;\n}\n.lake-diagram-board-toolbar-popover .ant-popover-content .ant-popover-arrow {\n  display: none;\n}\n.lake-diagram-board-toolbar-popover .ant-popover-content .ant-popover-inner {\n  background-color: inherit;\n  box-shadow: none;\n  background-clip: none;\n}\n.lake-diagram-board-toolbar-popover .ant-popover-content .ant-popover-inner .ant-popover-inner-content {\n  padding: 0;\n}\n.lake-diagram-board-toolbar-menu.ant-menu {\n  box-shadow: 0 1px 2px -2px rgba(0, 0, 0, 0.08), 0 2px 6px 0 rgba(0, 0, 0, 0.04), 0 4px 8px 1px rgba(0, 0, 0, 0.02);\n  border: 1px solid #e9e9e9;\n  width: 38px;\n  padding-top: 3px;\n  padding-bottom: 3px;\n}\n.lake-diagram-board-toolbar-menu.ant-menu .ant-menu-item {\n  padding: 0 5px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  width: 28px;\n  margin-left: 4px;\n  margin-right: 4px;\n  height: 28px;\n  line-height: 32px;\n}\n.lake-diagram-board-toolbar-menu.ant-menu .ant-menu-item .lake-icon {\n  color: #262626;\n  font-size: 18px;\n}\n.lake-diagram-board-toolbar-menu.ant-menu .ant-menu-item-selected {\n  background-color: transparent;\n}\n"),np.propTypes={data:De.a.array,overlay:De.a.node,onSelect:De.a.func,menuClassName:De.a.string},rp.propTypes={command:De.a.string,name:De.a.string,icon:De.a.string,overlay:De.a.func,onSelect:De.a.func,onClick:De.a.func,execCommand:De.a.func,defaultKey:De.a.string,data:De.a.array,tooltipPlacement:De.a.string,diagram:De.a.object,titleTag:De.a.object},Fe(".lake-diagram-board-toolbar-upload {\n  position: relative;\n}\n.lake-diagram-board-toolbar-upload input {\n  position: absolute;\n  left: 0;\n  top: 0;\n  opacity: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  display: none;\n}\n"),ap.propTypes={name:De.a.string,icon:De.a.string,accept:De.a.string,disabled:De.a.bool,title:De.a.string,onChange:De.a.func,diagram:De.a.object,tooltipPlacement:De.a.string,titleTag:De.a.object},Fe(".lake-diagram-board-toolbar-tooltip-overlay .ant-tooltip-content {\n  padding-left: 4px;\n}\n"),cp.propTypes={disabled:De.a.bool,active:De.a.bool,name:De.a.string,title:De.a.string,hotkey:De.a.string,titleTag:De.a.object,type:De.a.string,icon:De.a.string,label:De.a.string,command:De.a.string,onClick:De.a.func,execCommand:De.a.func,diagram:De.a.object,tooltipPlacement:De.a.string,defaultKey:De.a.string},lp.propTypes={type:De.a.string,component:De.a.object,speratorAlignment:De.a.string,tooltipPlacement:De.a.string,title:De.a.string,hotkey:De.a.string,disabled:De.a.oneOfType([De.a.bool,De.a.func]),active:De.a.oneOfType([De.a.bool,De.a.func]),diagram:De.a.object},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-board-side-toolbar:empty {\n  display: none;\n}\n.lake-diagram-board-top-toolbar {\n  position: absolute;\n  top: 10px;\n  left: 0;\n  right: 0;\n  z-index: 1;\n  padding-left: 8px;\n  padding-right: 16px;\n  height: 40px;\n  display: flex;\n  justify-content: space-between;\n  pointer-events: none;\n}\n.lake-diagram-board-top-toolbar > div {\n  pointer-events: auto;\n}\n.lake-diagram-board-top-toolbar-body {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-left: 8px;\n  margin-right: 8px;\n  height: 100%;\n  border-radius: 3px;\n  box-shadow: 0 1px 2px -2px rgba(0, 0, 0, 0.08), 0 2px 6px 0 rgba(0, 0, 0, 0.04), 0 4px 8px 1px rgba(0, 0, 0, 0.02);\n  border: 1px solid #e4e4e4;\n}\n.lake-diagram-board-toolbar-left {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.lake-diagram-board-toolbar-left .lake-diagram-board-top-toolbar-body {\n  background: white;\n}\n.lake-diagram-board-toolbar-right {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n}\n.lake-diagram-board-toolbar-right .lake-diagram-board-top-toolbar-body {\n  background: white;\n}\n.lake-diagram-board-side-toolbar {\n  position: absolute;\n  width: 40px;\n  left: 16px;\n  height: 100%;\n  z-index: 1;\n  display: flex;\n  align-content: center;\n  pointer-events: none;\n}\n.lake-diagram-board-side-toolbar-body {\n  display: flex;\n  align-content: center;\n  flex-flow: row wrap;\n  margin: auto;\n  background: white;\n  border-radius: 3px;\n  box-shadow: 0 1px 2px -2px rgba(0, 0, 0, 0.08), 0 2px 6px 0 rgba(0, 0, 0, 0.04), 0 4px 8px 1px rgba(0, 0, 0, 0.02);\n  border: 1px solid #e4e4e4;\n  pointer-events: initial;\n  padding: 4px 0;\n}\n.lake-diagram-board-toolbar-vertical-separator {\n  width: 1px;\n  height: 60%;\n  background: #e8e8e8;\n}\n.lake-diagram-board-toolbar-horizontal-separator {\n  height: 1px;\n  background: #e8e8e8;\n  margin-top: 4px;\n  margin-bottom: 4px;\n  width: calc(100% - 16px);\n  margin-left: 8px;\n}\n.lake-diagram-board-toolbar-command .ant-btn {\n  border: none;\n  background: none;\n  padding: 0 5px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  outline: none;\n  width: 32px;\n  margin-left: 3px;\n  margin-right: 3px;\n  color: #262626;\n}\n.lake-diagram-board-toolbar-command .ant-btn[disabled] {\n  color: #BFBFBF;\n  background: none;\n}\n.lake-diagram-board-toolbar-command .ant-btn:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-diagram-board-toolbar-command .ant-btn:focus {\n  color: #595959;\n}\n.lake-diagram-board-toolbar-command .ant-btn::after {\n  display: none;\n}\n.lake-diagram-board-toolbar-command .ant-btn .lake-icon {\n  font-size: 18px;\n  margin: 0;\n}\n.lake-diagram-board-toolbar-command .lake-button-active {\n  color: #096dd9;\n}\n.lake-diagram-board-toolbar-command-label {\n  font-size: 12px;\n  display: inline-block;\n  margin-left: 0.25em;\n}\n.lake-diagram-board-toolbar-tooltip {\n  text-align: center;\n  font-size: 12px;\n}\n.lake-diagram-board-toolbar-tooltip .lake-diagram-board-toolbar-tooltip-hotkey {\n  color: #BFBFBF;\n  margin-top: 4px;\n}\n.lake-diagram-board-toolbar-tooltip .lake-diagram-board-toolbar-tooltip-hotkey:first-child {\n  margin-top: 0;\n}\n.lake-diagram-board-toolbar-popover-shortcut {\n  font-size: 12px;\n  color: #d8d8d8;\n  padding-left: 4px;\n}\n");function dp(e){var t=e.items,n=e.tooltipPlacement,r=e.className,a=e.diagram;return Ae.a.createElement("div",{className:r},t.map((function(t,r){return Ae.a.createElement(lp,je()({key:"".concat(t.name||t.type,"-").concat(r),execCommand:t.execCommand,tooltipPlacement:n,diagram:a},t,e))})))}function fp(e){var t=e.items,n={placement:"top-left",tooltipPlacement:"bottom",speratorAlignment:"vertical",className:"lake-diagram-board-top-toolbar-body"},r=function(n){return(r=n.placement,t.reduce((function(e,t){return t.align===r&&e.push(t.subItems),e}),[])).map((function(t,r){return Ae.a.createElement(dp,{key:r,items:t,tooltipPlacement:n.tooltipPlacement,speratorAlignment:n.speratorAlignment,className:n.className,diagram:e.diagram})}));var r};return Ae.a.createElement(Ae.a.Fragment,null,Ae.a.createElement("div",{className:Ne()("lake-diagram-board-top-toolbar",e.className),"data-lake_prevent_click_unselect":"true"},Ae.a.createElement("div",{className:"lake-diagram-board-toolbar-left"},r(n)),Ae.a.createElement("div",{className:"lake-diagram-board-toolbar-right"},r(up(up({},n),{},{placement:"top-right"})))),Ae.a.createElement("div",{className:Ne()("lake-diagram-board-side-toolbar",e.className),"data-lake_prevent_click_unselect":"true"},r(up(up({},n),{},{placement:"left-middle",tooltipPlacement:"right",speratorAlignment:"horizontal",className:"lake-diagram-board-side-toolbar-body"}))))}function pp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pp(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}dp.defaultProps={items:[]},dp.propTypes={items:De.a.array,tooltipPlacement:De.a.string,className:De.a.string,diagram:De.a.object},fp.defaultProps={items:[]},fp.propTypes={className:De.a.string,items:De.a.array,execCommand:De.a.func,diagram:De.a.object},fp.Control=lp,Fe("/* stylelint-disable */\n");var mp=new cs({groups:["basic","flowchart"]});function gp(e){var t=e.diagram,n=e.mini,r=e.onProperties,a=e.showProperties,o=e.onSave,i=e.readOnly,c=e.focusMode,l=e.setFocusMode,s=Object(Pe.useState)([]),u=M()(s,2),d=u[0],f=u[1];return Object(Pe.useEffect)((function(){if(t){var e=function(){var e=function(e){var t=e.diagram,n=e.mini,r=e.onProperties,a=e.showProperties,o=e.onSave,i=e.readOnly,c=e.focusMode;return function(e){var t=e.diagram,n=e.onProperties,r=e.onSave,a=e.setFocusMode;return[{align:"top-left",subItems:[{name:"save",type:"button",title:$t("保存"),hotkey:R.ua.macos?"⌘+S":"Ctrl+S",noMini:!0,noReadOnly:!0,icon:"board-save",disabled:!1,execCommand:function(){return r&&r()}},{type:"separator",noMini:!0,noReadOnly:!0},{name:"undo",type:"button",title:$t("撤销"),hotkey:R.ua.macos?"⌘+Z":"Ctrl+Z",icon:"board-undo",noMini:!0,noReadOnly:!0,disabled:function(e){return!e.command.enable("Undo")},execCommand:function(e){return e.command.execute("Undo")}},{name:"redo",title:$t("重做"),hotkey:R.ua.macos?"⌘+Shift+Z":"Ctrl+Shift+Z",icon:"board-redo",noMini:!0,noReadOnly:!0,disabled:function(e){return!e.command.enable("Redo")},execCommand:function(e){return e.command.execute("Redo")}}],focusHidden:!0},{align:"top-right",subItems:[{name:"hand",type:"button",title:$t("拖拽"),noReadOnly:!0,hotkey:"Space",icon:"board-hand",active:function(e){return"dragCanvas"===e.interaction.currentMode},disabled:function(e){return!e.command.enable("ButtonDragCanvas")},execCommand:function(e){return e.command.execute("ButtonDragCanvas")}},{type:"separator",noReadOnly:!0},{type:"custom",component:Ae.a.createElement(Qf,{diagram:t})}],focusHidden:!0},{align:"top-right",subItems:[{name:"properties",type:"button",title:$t("打开设置"),noReadOnly:!0,icon:"board-setting",disabled:function(){return!1},execCommand:function(){n()},noMini:!0}],focusHidden:!0},{align:"top-right",subItems:[{name:"focusmode",type:"button",title:$t("隐藏工具栏"),hotkey:R.ua.macos?"⌘+.":"Ctrl+.",noMini:!1,noReadOnly:!0,icon:"board-toolbar-hide",disabled:!1,execCommand:function(){return a(!0)}}],focusHidden:!0},{align:"top-right",subItems:[{name:"focusmode",type:"button",title:$t("展开工具栏"),hotkey:R.ua.macos?"⌘+.":"Ctrl+.",noMini:!1,noReadOnly:!0,icon:"board-toolbar-show",disabled:!1,execCommand:function(){return a(!1)}}],focusHidden:!1},{align:"left-middle",subItems:[{type:"button",name:"insertText",title:$t("文本"),noReadOnly:!0,hotkey:"T",icon:"board-insert-text",disabled:function(e){return!e.command.enable("BeginInsertText")},execCommand:function(e){return e.command.execute("BeginInsertText")}},{name:"board:insertShape",title:$t("图形"),hotkey:"S",type:"popover",noReadOnly:!0,icon:"board-insert-shape",execCommand:function(e){return e.command.execute("BeginInsertGeometry")},onClick:function(e){var n=e.key;t.command.execute("BeginInsertGeometry",{shape:n})},overlay:function(e){var n=e.onSelect;return Ae.a.createElement(Ff,{onSelect:function(e){var r=e.key;n({key:r}),t.command.execute("BeginInsertGeometry",{shape:r})},shapeSelect:mp})}},{type:"popover",name:"insertEdge",title:$t("连线"),hotkey:R.ua.macos?"⌘+L":"Ctrl+L",defaultKey:"straight-line-arrow",icon:"board-straight-line-arrow",noReadOnly:!0,disabled:function(e){return!e.command.enable("BeginInsertLine")},data:[{key:"straight-line-arrow",icon:"board-straight-line-arrow"},{key:"curve-line-arrow",icon:"board-curve-line-arrow"},{key:"elbow-line-arrow",icon:"board-elbow-line-arrow"}],onClick:function(){t.selector.clear(),t.command.execute("BeginInsertLine",t.settings.line)},onSelect:function(e){var n=e.key.split("-"),r=M()(n,3),a=r[0],o=r[2];t.command.execute("BeginInsertLine",{shape:a,marker:o})}},{type:"button",name:"insertMindmap",title:$t("思维导图"),hotkey:"M",icon:"board-mind",noReadOnly:!0,disabled:function(e){return!e.command.enable("MindmapBeginInsertStem")},execCommand:function(e){return e.command.execute("MindmapBeginInsertStem")}},{type:"separator",noReadOnly:!0},{name:"insertImage",title:$t("图片"),type:"upload",icon:"board-upload-image",noReadOnly:!0,accept:R.EXTS.IMAGE_EXT.map((function(e){return"."+e})).join(","),disabled:!1,onChange:function(e){Jf(e,t)}}],focusHidden:!0}]}({diagram:t,onProperties:r,onSave:o,setFocusMode:e.setFocusMode}).map((function(e){if(c===e.focusHidden)return null;var t=e.subItems.filter((function(e){return!(n&&e.noMini||!n&&e.noMaxim||i&&e.noReadOnly||"properties"===e.name&&a)}));return t.length>0?hp(hp({},e),{},{subItems:t}):null})).filter((function(e){return e}))}({diagram:t,mini:n,onProperties:r,showProperties:a,onSave:o,readOnly:i,focusMode:c,setFocusMode:l});f(e)},s=function(t){t.isModelChange&&e()};return e(),t.on("aftercommandexecute",s),t.on("afterselect",e),t.on("aftermodechange",e),function(){t.off("aftercommandexecute",s),t.off("afterselect",e),t.off("aftermodechange",e)}}return function(){}}),[t,n,r,o]),Ae.a.createElement(fp,{diagram:t,items:d,className:"lake-diagram-board-toolbar"})}function vp(e){var t=e.icon,n=e.title,r=e.hotkey;return Ae.a.createElement("div",null,t,n,r&&Ae.a.createElement("span",{className:"lake-context-menu-hotkey"},r))}function yp(e){var t=e.title,n=e.hotkey,r=e.accept,a=e.icon,o=e.onChange,i=Object(Pe.useRef)();return Ae.a.createElement("div",{className:"lake-board-context-menu-upload-item-content",onClick:function(e){e.stopPropagation(),i.current.click()}},a,t,n&&Ae.a.createElement("span",{className:"lake-context-menu-hotkey"},n),Ae.a.createElement("input",{type:"file",accept:r,onChange:o,ref:i}))}function bp(e,t){var n=e.disabled,r=e.title,a=e.key,o=e.hotkey,i=e.type,c=e.accept,l=e.onChange;if(e.data)return Ae.a.createElement(U.a.SubMenu,{key:a,title:r,disabled:n,popupClassName:"lake-context-submenu lake-prevent-card-activated lake-diagram-dialog-popover lake-diagram-prevent-mouse-select"},e.data.map(bp));if("separator"===i)return Ae.a.createElement(U.a.Divider,{key:a+"_"+t});var s,u="string"==typeof e.icon?Ae.a.createElement("span",{className:"lake-icon lake-icon-".concat(e.icon)}):e.icon;return s="upload"===i?Ae.a.createElement(yp,{icon:u,title:r,hotkey:o,accept:c,onChange:l}):Ae.a.createElement(vp,{icon:u,title:r,hotkey:o}),Ae.a.createElement(U.a.Item,{key:a,className:"ant-menu-item",disabled:n},s)}function kp(e){var t=e.coord,n=e.overlayClassName,r=e.diagram,a=e.onClose,o=Object(Pe.useState)(null),i=M()(o,2),c=i[0],l=i[1],s=Object(Pe.useRef)();if(Object(Pe.useEffect)((function(){if(t){var e=s.current.offsetParent.getBoundingClientRect();l([t[0]-e.x,t[1]-e.y])}else l(null)}),[t]),Object(Pe.useEffect)((function(){function e(){a()}function t(t){t.target.closest(".lake-diagram-dialog-popover")||e()}function n(){e()}return window.addEventListener("mousedown",t),window.addEventListener("scroll",e,{passive:!0}),r.on("afterviewportchange",n),function(){window.removeEventListener("mousedown",t),window.removeEventListener("scroll",e),r.off("afterviewportchange",n)}}),[r,a]),c){var u="lake-diagram-dialog-popover lake-prevent-card-activated lake-diagram-prevent-mouse-select lake-diagram-prevent-mouseleave-reset-focus-point";return Ae.a.createElement(X.a,je()({},e,{getPopupContainer:function(){return e.getPopupContainer?e.getPopupContainer():document.querySelector(".yuque-sdk-extra-container")||document.body},visible:!0,overlayClassName:n?n+" "+u:u}),Ae.a.createElement("div",{ref:s,style:{position:"absolute",left:"".concat(c[0],"px"),top:"".concat(c[1],"px"),pointerEvents:"none",width:"0px",height:"0px"}}))}return Ae.a.createElement("span",{ref:s})}function wp(e){var t=e.getMenuData,n=e.diagram,r=Object(Pe.useState)(e.coord),a=M()(r,2),o=a[0],i=a[1],c=Object(Pe.useState)(t()),l=M()(c,2),s=l[0],u=l[1],d=Object.keys(e).reduce((function(t,n){return n.startsWith("data-")&&(t[n]=e[n]),t}),{});Object(Pe.useEffect)((function(){function e(e){e.preventDefault(),u(t()),i([e.clientX,e.clientY])}return n.on("contextmenu",e),function(){n.off("contextmenu",e)}}),[n]);var f=Ae.a.createElement("div",je()({},d,{className:Ne()("lake-context-menu",e.className)}),Ae.a.createElement(U.a,{className:"lake-context-submenu",onMouseDown:function(e){e.preventDefault()},onClick:function(t){var r=n.viewport.invertClient(o);e.onClick({key:t.key,canvasPoint:r}),i(null)},selectable:!1},s.map(bp)));return Ae.a.createElement(kp,{placement:"rightTop",content:f,visible:!0,overlayClassName:"lake-diagram-context-menu-popover",diagram:n,coord:o,onClose:function(){i(null)}})}function xp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xp(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}gp.defaultProps={mini:!1,readOnly:!1,diagram:null,showProperties:!0,onProperties:function(){},onSave:function(){}},gp.propTypes={mini:De.a.bool,readOnly:De.a.bool,diagram:De.a.object,showProperties:De.a.bool,onProperties:De.a.func,onSave:De.a.func,focusMode:De.a.bool,setFocusMode:De.a.func},vp.propTypes={title:De.a.string,hotkey:De.a.string,icon:De.a.oneOf([De.a.string,De.a.node])},Fe(".lake-board-context-menu-upload-item-content input {\n  display: none;\n}\n"),yp.propTypes={title:De.a.string,hotkey:De.a.string,icon:De.a.oneOf([De.a.string,De.a.node]),data:De.a.arrayOf(De.a.object),onChange:De.a.func,accept:De.a.string},bp.propTypes={title:De.a.string,key:De.a.string,hotkey:De.a.string,type:De.a.string,disabled:De.a.bool,icon:De.a.oneOf([De.a.string,De.a.node]),data:De.a.arrayOf(De.a.object),onChange:De.a.func,accept:De.a.string},Fe("/* stylelint-disable */\n.lake-diagram-dialog-popover .ant-popover-inner-content {\n  padding: 0;\n}\n"),kp.defaultProps={coord:null,diagram:null,onClose:function(){}},kp.propTypes={coord:De.a.array,diagram:De.a.object,onClose:De.a.func,overlayClassName:De.a.string,getPopupContainer:De.a.object},Fe("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-context-menu-popover {\n  z-index: 1033;\n}\n.lake-diagram-context-menu-popover .ant-popover-arrow {\n  display: none;\n}\n.lake-context-menu {\n  z-index: 13;\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.13);\n}\n.lake-context-menu,\n.lake-context-submenu {\n  list-style-type: none !important;\n}\n.lake-context-menu li,\n.lake-context-submenu li {\n  margin-left: 0 !important;\n}\n.lake-context-menu .ant-menu,\n.lake-context-submenu .ant-menu {\n  border-radius: 2px;\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n.lake-context-menu .ant-menu .ant-menu-submenu,\n.lake-context-submenu .ant-menu .ant-menu-submenu,\n.lake-context-menu .ant-menu .ant-menu-item,\n.lake-context-submenu .ant-menu .ant-menu-item {\n  height: 32px;\n  line-height: 32px;\n  min-width: 164px;\n}\n.lake-context-menu .ant-menu .ant-menu-item-active,\n.lake-context-submenu .ant-menu .ant-menu-item-active,\n.lake-context-menu .ant-menu .ant-menu-submenu-active,\n.lake-context-submenu .ant-menu .ant-menu-submenu-active {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-context-menu .ant-menu .ant-menu-submenu .ant-menu-submenu-title,\n.lake-context-submenu .ant-menu .ant-menu-submenu .ant-menu-submenu-title {\n  height: auto;\n  line-height: inherit;\n  color: #595959;\n}\n.lake-context-menu .ant-menu .ant-menu-submenu .ant-menu-submenu-arrow::before,\n.lake-context-submenu .ant-menu .ant-menu-submenu .ant-menu-submenu-arrow::before,\n.lake-context-menu .ant-menu .ant-menu-submenu .ant-menu-submenu-arrow::after,\n.lake-context-submenu .ant-menu .ant-menu-submenu .ant-menu-submenu-arrow::after {\n  width: 5px;\n  height: 1px;\n  background-image: linear-gradient(90deg, #595959, #595959);\n}\n.lake-context-menu .ant-menu.ant-menu-vertical .ant-menu-item,\n.lake-context-submenu .ant-menu.ant-menu-vertical .ant-menu-item {\n  margin-bottom: 4px;\n}\n.lake-context-menu .ant-menu.ant-menu-vertical .ant-menu-submenu,\n.lake-context-submenu .ant-menu.ant-menu-vertical .ant-menu-submenu {\n  margin-bottom: 4px;\n}\n.lake-context-menu .ant-menu.ant-menu-sub,\n.lake-context-submenu .ant-menu.ant-menu-sub {\n  width: auto;\n}\n.lake-context-menu .ant-menu.ant-menu-sub > li,\n.lake-context-submenu .ant-menu.ant-menu-sub > li {\n  width: auto;\n}\n.lake-context-menu .lake-icon,\n.lake-context-submenu .lake-icon {\n  display: inline-block;\n  margin-right: 0.25em;\n}\n.lake-context-menu-hotkey {\n  float: right;\n  color: #BFBFBF;\n  margin-left: 16px;\n}\n"),wp.defaultProps={},wp.propTypes={className:De.a.string,coord:De.a.object,data:De.a.arrayOf(De.a.object),onClick:De.a.func,diagram:De.a.object,getMenuData:De.a.func};var Ep=[{key:"Align",title:$t("对齐"),data:[{key:"AlignLeft",icon:"align-left",title:$t("左对齐")},{key:"AlignHCenter",icon:"align-h-center",title:$t("左右居中")},{key:"AlignRight",icon:"align-right",title:$t("右对齐")},{type:"separator"},{key:"AlignTop",icon:"align-top",title:$t("顶对齐")},{key:"AlignVCenter",icon:"align-v-center",title:$t("上下居中")},{key:"AlignBottom",icon:"align-bottom",title:$t("底对齐")}]},{key:"ZIndex",title:$t("层级"),data:[{key:"ToFront",title:$t("置顶")},{key:"ToBack",title:$t("置底")},{key:"Forward",title:$t("上移一层")},{key:"Backward",title:$t("下移一层")}]},{key:"AttachToVertex",title:$t("插入"),data:[{key:"AttachLink",title:$t("链接"),hotkey:"⌘+K"}]},{key:"AttachToMindmapCell",title:$t("插入"),data:[{key:"MindmapAppendChild",title:$t("子级"),hotkey:"Tab"},{key:"MindmapAppendParent",title:$t("父级"),hotkey:"Option+Tab"},{key:"MindmapAppendSibling",title:$t("同级"),hotkey:"Enter"},{key:"separator",type:"separator"},{key:"AttachLink",title:$t("链接"),hotkey:"⌘+K"},{key:"MindmapAttachImage",title:$t("图片"),type:"upload",accept:R.EXTS.IMAGE_EXT.map((function(e){return"."+e})).join(",")},{key:"MindmapAttachNote",title:$t("备注")}]},{key:"Cut",title:$t("剪切"),hotkey:"⌘+X"},{key:"Copy",title:$t("复制"),hotkey:"⌘+C"},{key:"CopyOtherFormat",title:$t("复制为其它格式"),data:[{key:"CopyDoc",title:$t("语雀文档")},{key:"CopyTable",title:$t("语雀表格")}]},{key:"Paste",title:$t("粘贴"),hotkey:"⌘+V"},{key:"Collapse",title:$t("折叠"),hotkey:"⌘+/"},{key:"Expand",title:$t("展开"),hotkey:"⌘+/"},{key:"MindmapAppendParent",title:$t("插入父级"),hotkey:"Option+Tab"},{key:"MindmapInsertStem",title:$t("添加思维导图"),hotkey:"M"},{key:"MindmapAppendSibling",title:$t("插入同级"),hotkey:"Enter"},{key:"MindmapAppendChild",title:$t("插入子级"),hotkey:"Tab"},{key:"ActualSize",title:$t("实际尺寸"),hotkey:"⌘+0"},{key:"FitViewport",title:$t("适应画布"),hotkey:"⌘+Shift+="},{key:"Delete",title:$t("删除"),hotkey:"Delete"},{key:"MindmapRemoveSingleNode",title:$t("删除单个节点"),hotkey:"⌘+Delete"},{key:"BeginInsertLine",title:$t("添加连线"),hotkey:"⌘+L"},{key:"BeginEditContent",title:$t("编辑文本")},{key:"separator",type:"separator"},{key:"InsertText",title:$t("添加文字"),hotkey:"T"},{key:"InsertGeometry",title:$t("添加图形"),hotkey:"S"},{key:"Group",title:$t("成组"),hotkey:"⌘+G"},{key:"UnGroup",title:$t("取消分组"),hotkey:"⌘+Shift+G"}];function Cp(e,t){var n=e.key;e.disabled=!!t.command.find(n)&&!t.command.enable(n),"MindmapAttachImage"===n&&(e.onChange=function(e){Jf(e,t)})}function Op(e,t){return(e=e.filter((function(e){return null!=e}))).map((function(e,n){var r=_p(_p({},d()(Ep[e])),{},{disabled:!!t.command.find(e)&&!t.command.enable(e)});return Cp(r,t),r.data&&r.data.forEach((function(e){Cp(e,t)})),"separator"===e&&(r.key=e+"-"+n),r}))}function Sp(e){return e.command.enable("Expand")?["Expand"]:["Collapse"]}function Rp(e){var t=[],n=e.filter((function(e){return e.isStem}));return n.length>1&&t.push("Align"),n.length>0&&t.push("ZIndex"),t.length>0?t.push("separator"):t=null,t}function jp(e){var t=[];return e.filter((function(e){return e.isStem})).length>1?(t.push("Group"),t.push("separator")):t=null,t}function Pp(e){try{aa("copy",e),F.a.success($t("复制成功！"))}catch(e){F.a.error($t("复制失败！"))}}function Ap(e){var t=e.diagram;return Ae.a.createElement(wp,{diagram:t,getMenuData:function(){return function(e){return"read"===e.interaction.currentMode?function(e){var t=e.selector.selections,n=["ActualSize","FitViewport"];return t.length>0&&t.every((function(e){return e.isMindmap}))&&(n=["Copy"].concat(Sp(e)).concat(["separator"]).concat(n)),Op(n,e)}(e):function(e){var t=e.selector.selections,n=[];return 0===t.length?n=["InsertText","InsertGeometry","BeginInsertLine","MindmapInsertStem","separator","Paste","separator","ActualSize","FitViewport"]:t.every((function(e){return e.isMindmap}))?(1===t.length&&(n=["AttachToMindmapCell","separator"]),n=n.concat(Sp(e)).concat(["separator","Cut","Copy","CopyOtherFormat","Paste","separator"]).concat(Rp(t)).concat(jp(t)).concat(["Delete","MindmapRemoveSingleNode"])):t.every((function(e){return e.isVertex}))?(1!==t.length||t[0].isImage||(n=["AttachToVertex","separator"]),n=n.concat(["Cut","Copy","Paste","separator"]).concat(Rp(t)).concat(jp(t)).concat(["Delete"])):n=t.every((function(e){return e.isGroup}))?n.concat(["Cut","Copy","Paste","separator"]).concat(Rp(t)).concat(jp(t)).concat(["UnGroup","separator"]).concat(["Delete"]):["Cut","Copy","Paste","separator"].concat(Rp(t)).concat(jp(t)).concat(["Delete"]),Op(n,e)}(e)}(t)},onClick:function(e){var n=e.key,r=e.canvasPoint;switch(t.tryFocus(),n){case"Cut":!function(e){try{aa("cut",e),F.a.success($t("剪切成功！"))}catch(e){F.a.error($t("剪切失败！"))}}(t);break;case"Copy":Pp(t);break;case"CopyDoc":t.settings.copyType="doc",Pp(t),t.settings.copyType="default";break;case"CopyTable":t.settings.copyType="table",Pp(t),t.settings.copyType="default";break;case"Paste":!function(e,t){try{aa("paste",e,t)}catch(e){F.a.error($t("粘贴失败！"))}}(t,r);break;case"MindmapInsertStem":t.command.execute("MindmapInsertStem",{x:r[0],y:r[1]});break;case"InsertText":t.command.execute("InsertText",{x:r[0],y:r[1]});break;case"InsertGeometry":t.command.execute("InsertGeometry",{x:r[0],y:r[1]});break;default:if(n)try{t.command.execute(n)}catch(e){throw new Error("unknown command ".concat(n))}}t.tryFocus()}})}function Tp(e){var t=e.diagram;return Ae.a.createElement("div",{className:"lake-diagram-properties-alignment"},Ae.a.createElement(K.a.Group,{onChange:function(e){t.command.execute(e.target.value)},value:null},Ae.a.createElement(K.a.Button,{value:"AlignLeft",disabled:!t.command.enable("AlignLeft")},Ae.a.createElement("span",{className:"lake-icon lake-icon-align-left"})),Ae.a.createElement(K.a.Button,{value:"AlignHCenter",disabled:!t.command.enable("AlignHCenter")},Ae.a.createElement("span",{className:"lake-icon lake-icon-align-h-center"})),Ae.a.createElement(K.a.Button,{value:"AlignRight",disabled:!t.command.enable("AlignRight")},Ae.a.createElement("span",{className:"lake-icon lake-icon-align-right"})),Ae.a.createElement(K.a.Button,{value:"AlignTop",disabled:!t.command.enable("AlignTop")},Ae.a.createElement("span",{className:"lake-icon lake-icon-align-top"})),Ae.a.createElement(K.a.Button,{value:"AlignVCenter",disabled:!t.command.enable("AlignVCenter")},Ae.a.createElement("span",{className:"lake-icon lake-icon-align-v-center"})),Ae.a.createElement(K.a.Button,{value:"AlignBottom",disabled:!t.command.enable("AlignBottom")},Ae.a.createElement("span",{className:"lake-icon lake-icon-align-bottom"}))))}function Dp(e){var t=e.selections,n=e.diagram,r=t.filter((function(e){return e.canArrange()})).length<3;return Ae.a.createElement("div",{className:"lake-diagram-properties-distribute"},Ae.a.createElement(K.a.Group,{onChange:function(e){n.command.execute(e.target.value)},value:null},Ae.a.createElement(K.a.Button,{value:"DistributeHorizontally",disabled:r},Ae.a.createElement("span",{className:"lake-icon lake-icon-horizontally"})),Ae.a.createElement(K.a.Button,{value:"DistributeVertically",disabled:r},Ae.a.createElement("span",{className:"lake-icon lake-icon-vertically"}))),Ae.a.createElement("div",{className:"lake-diagram-properties-distribute-label-group"},Ae.a.createElement("span",{className:"lake-diagram-properties-distribute-label"},$t("水平分布")),Ae.a.createElement("span",{className:"lake-diagram-properties-distribute-label"},$t("垂直分布"))))}function Mp(e){var t=e.diagram,n=e.selections,r=t.getCells(),a=n.some((function(e){return e.locked}))||1===n.length&&n[0].getZIndex()===r.length-1,o=n.some((function(e){return e.locked}))||1===n.length&&0===n[0].getZIndex();function i(r){e.onChange((function(){t.command.execute(r.target.value,{cells:n})}))}return Ae.a.createElement("div",{className:"lake-diagram-properties-z-index"},Ae.a.createElement("div",{className:"lake-diagram-properties-z-index-btn-group"},Ae.a.createElement(K.a.Group,{onChange:i,value:null},Ae.a.createElement(H.a,{title:$t("置顶")},Ae.a.createElement(K.a.Button,{value:"ToFront",disabled:a},Ae.a.createElement("span",{className:"lake-icon lake-icon-to-front"}))),Ae.a.createElement(H.a,{title:$t("置底")},Ae.a.createElement(K.a.Button,{value:"ToBack",disabled:o},Ae.a.createElement("span",{className:"lake-icon lake-icon-to-back"}))))),Ae.a.createElement("div",{className:"lake-diagram-properties-z-index-btn-group"},Ae.a.createElement(K.a.Group,{onChange:i,value:null},Ae.a.createElement(H.a,{title:$t("上移")},Ae.a.createElement(K.a.Button,{value:"Forward",disabled:a},Ae.a.createElement("span",{className:"lake-icon lake-icon-forward"}))),Ae.a.createElement(H.a,{title:$t("下移")},Ae.a.createElement(K.a.Button,{value:"Backward",disabled:o},Ae.a.createElement("span",{className:"lake-icon lake-icon-backward"}))))))}function Np(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Np(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Np(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ip(e){var t=e,n=t.onBlur,r=t.onPressEnter,a=t.onStep,o=t.value,i=Object(Pe.useState)(null),c=M()(i,2),l=c[0],s=c[1];return e=Lp(Lp({},e),{},{value:"number"==typeof l?l:o,onChange:function(e){s(e)},onBlur:function(e){s(null),n(e)},onPressEnter:function(e){s(null),r(e)},onStep:function(e){s(null),a(e)}}),Ip.propTypes={value:De.a.number,onStep:De.a.func,onBlur:De.a.func,onPressEnter:De.a.func},Ae.a.createElement(Z.a,e)}function Bp(e){var t=e.selections,n=0===t.length||t.some((function(e){return e.locked})),r={width:$t("宽"),height:$t("高")};function a(t,n){n>=1&&e.onChange(t,n)}return Ae.a.createElement(Xf,{className:"lake-diagram-size-control",disabled:n},Object.keys(r).map((function(e){return Ae.a.createElement("div",{className:"lake-diagram-size-control-".concat(e),key:e},r[e],Ae.a.createElement(Ip,{disabled:n,min:1,max:2560,value:Math.round(Xf.get(t,e)),onBlur:function(t){return a(e,parseFloat(t.target.value))},onPressEnter:function(t){return a(e,parseFloat(t.target.value))},onStep:function(t){return a(e,t)}}))})))}function zp(e){var t=e.path,n=e.selections,r=0===n.length||n.some((function(e){return e.locked}));return Ae.a.createElement(Xf,{className:"lake-diagram-ratio-control",disabled:r},Ae.a.createElement($.a,{disabled:r,checked:Xf.get(n,t),onChange:function(n){e.onChange(t,n.target.checked)}},$t("保持宽高比")))}function Fp(e){var t=e.selections,n=e.onChange,r=0===t.length||t.some((function(e){return e.locked}));return Ae.a.createElement(Xf,{className:"lake-diagram-reset-size-control",disabled:r},Ae.a.createElement(q.a,{disabled:r,onClick:function(){var e=t[0];e.isImage?n({width:e.image.naturalWidth,height:e.image.naturalHeight}):e.isVertex&&n({width:e.stencil.width,height:e.stencil.height})}},$t("原始大小")))}function Up(e){var t=e.selections,n=0===t.length||t.some((function(e){return e.locked}));function r(t,n){e.onChange(t,n)}return Ae.a.createElement(Xf,{className:"lake-diagram-position-control",disabled:n},["x","y"].map((function(e){return Ae.a.createElement("div",{className:"lake-diagram-position-control-".concat(e),key:e},e.toUpperCase(),Ae.a.createElement(Ip,{disabled:n,value:Math.round(Xf.get(t,e)),onBlur:function(t){return r(e,parseFloat(t.target.value))},onPressEnter:function(t){return r(e,parseFloat(t.target.value))},onStep:function(t){return r(e,t)}}))})))}function Vp(e){return""===e?e:"".concat(Math.round(e),"°")}function qp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.replace("°","");return""===t?t:parseInt(t,10)%360||0}function Hp(e){var t=e.selections,n=0===t.length||t.some((function(e){return null==e.rotate}))||t.some((function(e){return e.locked}));function r(t){isFinite(t)&&e.onChange("rotate",t)}function a(e){r(parseFloat(e.target.value))}return Ae.a.createElement(Xf,{className:"lake-diagram-rotate-control",disabled:n},$t("角度"),Ae.a.createElement(Ip,{disabled:n,min:0,max:360,formatter:Vp,parser:qp,value:Xf.get(t,"rotate"),onBlur:a,onPressEnter:a,onStep:r}))}Ep=Ep.reduce((function(e,t){var n;return e[t.key]=t,t.hotkey&&(t.hotkey=(n=t.hotkey,R.ua.macos?n:n.replace(/⌘/g,"Ctrl").replace(/Option/g,"Alt"))),e}),{}),Ap.propTypes={diagram:De.a.object},Fe(".lake-diagram-properties-alignment {\n  margin-top: 8px;\n  margin-bottom: 16px;\n}\n.lake-diagram-properties-alignment .ant-radio-group {\n  display: flex;\n}\n.lake-diagram-properties-alignment .ant-radio-group label {\n  flex-grow: 1;\n  padding: 0;\n  text-align: center;\n}\n"),Tp.defaultProps={},Tp.propTypes={diagram:De.a.object.isRequired,selections:De.a.arrayOf(De.a.object).isRequired},Tp.key="AlignControl",Fe(".lake-diagram-properties-distribute {\n  margin-bottom: 8px;\n}\n.lake-diagram-properties-distribute .ant-radio-group {\n  width: 100%;\n}\n.lake-diagram-properties-distribute .ant-radio-button-wrapper {\n  width: 50%;\n  text-align: center;\n}\n.lake-diagram-properties-distribute-label-group {\n  width: 100%;\n}\n.lake-diagram-properties-distribute-label {\n  display: inline-block;\n  width: 50%;\n  text-align: center;\n}\n"),Dp.propTypes={selections:De.a.arrayOf(De.a.object),diagram:De.a.object},Fe(".lake-diagram-properties-z-index {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 8px;\n}\n.lake-diagram-properties-z-index .ant-radio-button-wrapper {\n  padding: 0 14px;\n}\n.lake-diagram-properties-z-index .lake-diagram-properties-z-index-label {\n  display: inline-block;\n  width: 50%;\n  text-align: center;\n}\n.lake-diagram-properties-z-index .lake-diagram-properties-z-index-btn-group {\n  width: calc(50% - 4px);\n}\n.lake-diagram-properties-z-index .lake-diagram-properties-z-index-btn-group .ant-radio-group {\n  display: flex;\n}\n.lake-diagram-properties-z-index .lake-diagram-properties-z-index-btn-group .ant-radio-group label {\n  text-align: center;\n  flex-grow: 1;\n  flex-shrink: 1;\n}\n"),Mp.defaultProps={onChange:function(){}},Mp.propTypes={onChange:De.a.func.isRequired,diagram:De.a.object.isRequired,selections:De.a.arrayOf(De.a.object).isRequired},Mp.key="ZIndexControl",Fe(".lake-diagram-size-control .lake-diagram-control-body {\n  display: flex;\n  justify-content: space-between;\n}\n.lake-diagram-size-control-width,\n.lake-diagram-size-control-height {\n  display: flex;\n  align-items: center;\n  width: calc(50% - 8px);\n}\n.lake-diagram-size-control-width .ant-input-number,\n.lake-diagram-size-control-height .ant-input-number {\n  margin-left: 16px;\n  width: calc(100% - 32px);\n}\n"),Bp.propTypes={selections:De.a.array,onChange:De.a.func},zp.defaultProps={path:"constraints.proportion"},zp.propTypes={path:De.a.string,selections:De.a.array,onChange:De.a.func},Fe(".lake-diagram-reset-size-control .lake-diagram-control-body {\n  margin-top: 12px;\n}\n.lake-diagram-reset-size-control .ant-btn {\n  width: 100%;\n}\n"),Fp.propTypes={selections:De.a.array,onChange:De.a.func},Fe(".lake-diagram-position-control .lake-diagram-control-body {\n  display: flex;\n  justify-content: space-between;\n}\n.lake-diagram-position-control-x,\n.lake-diagram-position-control-y {\n  display: flex;\n  align-items: center;\n  width: calc(50% - 8px);\n}\n.lake-diagram-position-control-x .ant-input-number,\n.lake-diagram-position-control-y .ant-input-number {\n  margin-left: 16px;\n  width: calc(100% - 32px);\n}\n"),Up.propTypes={selections:De.a.array,onChange:De.a.func},Fe(".lake-diagram-rotate-control .lake-diagram-control-body {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n"),Hp.propTypes={selections:De.a.arrayOf(De.a.object),onChange:De.a.func};var Wp=[{name:$t("排列"),hideHeader:!0,tabKey:"arrangement",condition:function(e){return e.length>0&&e.some((function(e){return e.isStem}))},controls:[{Control:Tp},{Control:Dp},{Control:Mp}]},{name:$t("位置"),tabKey:"arrangement",condition:function(e){return e.length>0&&e.every((function(e){return e.isVertex&&e.isStem}))},controls:[{Control:Up}]},{name:$t("大小"),tabKey:"arrangement",condition:function(e){return e.length>0&&e.every((function(e){return e.isGeometry&&e.isStem}))},controls:[{Control:Bp},{Control:zp},{Control:Fp}]},{name:$t("旋转"),tabKey:"arrangement",condition:function(e){return e.length>0&&e.every((function(e){return null!=e.rotate}))},controls:[{Control:Hp}]}];function Yp(e){var t=e.color,n=e.disabled,a=e.onClear,o=e.palette,i=e.transSVG,c=Object(Pe.useState)(!1),l=M()(c,2),s=l[0],u=l[1];return Ae.a.createElement(V.a,{disabled:n,trigger:["click"],visible:s,onVisibleChange:function(e){u(e),e||Nu(t,o)},overlay:Ae.a.createElement("div",{className:"lake-diagram-color-pick-container"},Ae.a.createElement(r.ColorPicker,{className:"lake-prevent-card-activated",activeColors:[t],defaultColor:e.defaultColor,onSelect:function(t,n){e.onSelect(t,n)},onClear:a,show:s,customColors:Mu,CustomPalette:o})),placement:"bottomRight",getPopupContainer:function(){return document.querySelector(".yuque-sdk-extra-container")||document.body}},!t||function(e){return!e||"transparent"===e||"rgba(255,255,255,0)"===e.replace(/ /g,"")||"rgba(0,0,0,0)"===e.replace(/ /g,"")}(t)?i||Ae.a.createElement("svg",{width:"90",viewBox:"0 0 90 30",xmlns:"http://www.w3.org/2000/svg"},Ae.a.createElement("path",{d:"M0 30L90 0",stroke:"#D0021B",fill:"none",fillRule:"evenodd",strokeLinecap:"square"})):e.children)}function Gp(e){var t=e.path,n=e.title,r=e.diagram,a=e.selections.filter((function(e){return e.canFill()})),o=0===a.length||a.some((function(e){return e.locked})),i=Xf.get(a,t),c="multiValue"===i?"#FFFFFF":i;function l(n){e.onChange(t,n,a)}return Ae.a.createElement(Xf,{disabled:o,title:n,extra:Ae.a.createElement(Yp,{disabled:o,color:c,defaultColor:e.defaultColor,onSelect:l,onClear:function(){return l("rgba(0, 0, 0, 0)")},palette:r&&r.palette},Ae.a.createElement("div",{className:Ne()("lake-diagram-fill",{"lake-diagam-multi-properties-selection":"multiValue"===i}),style:{backgroundColor:c}}))})}function Xp(e){var t=e.path,n=e.title,r=e.diagram,a=e.selections.filter((function(e){return e.canStroke()})),o=function(e,t){return Xf.get(e,t)||(e.length>0&&!e[0].isStem?Xf.get(e,"treeEdge.stroke"):void 0)}(a,t)||"rgba(0, 0, 0, 0)",i=0===a.length||a.some((function(e){return e.locked})),c="multiValue"===o?"#FFFFFF":o;function l(n){e.onChange(t,n,a)}return Ae.a.createElement(Xf,{disabled:i,title:n||$t("颜色"),extra:Ae.a.createElement(Yp,{disabled:i,color:c,defaultColor:e.defaultColor,onSelect:l,onClear:function(){return l("rgba(0, 0, 0, 0)")},palette:r&&r.palette},Ae.a.createElement("div",{className:Ne()("lake-diagram-stroke",{"lake-diagam-multi-properties-selection":"multiValue"===o}),style:{backgroundColor:c}}))})}function Kp(e){var t=e.selections,n=e.path,r=0===t.length||t.some((function(e){return e.locked})),a=t.filter((function(e){return e.canStrokeWidth()})),o=Xf.get(a,n);function i(t){var r=Math.min(Math.max(t,1),10);r!==o&&e.onChange(n,r,a)}function c(e){i(parseFloat(e.target.value))}return Ae.a.createElement(Xf,{className:"lake-diagram-stroke-width-control",disabled:r,title:$t("粗细"),extra:Ae.a.createElement(Ip,{disabled:r,min:1,max:10,value:o,onBlur:c,onPressEnter:c,onStep:i})})}Fe(".lake-diagram-color-pick-container {\n  background: #ffffff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  padding: 5px 0;\n  min-width: 74px;\n}\n"),Yp.propTypes={color:De.a.string,defaultColor:De.a.string,children:De.a.node,disabled:De.a.bool,onClear:De.a.func,onSelect:De.a.func,palette:De.a.object,transSVG:De.a.object},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-control .lake-diagram-fill {\n  border: 4px solid #ffffff;\n  border-radius: 2px;\n  width: 100%;\n  height: 32px;\n}\n.lake-diagram-control.disabled .lake-diagram-fill {\n  display: none;\n}\n"),Gp.defaultProps={defaultColor:"transparent",title:$t("填充颜色"),onChange:function(){}},Gp.propTypes={defaultColor:De.a.string,selections:De.a.arrayOf(De.a.object).isRequired,path:De.a.string.isRequired,title:De.a.string,onChange:De.a.func.isRequired,diagram:De.a.object},Gp.key="FillControl",Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-control.disabled .lake-diagram-stroke {\n  display: none;\n}\n.lake-diagram-stroke {\n  border: 4px solid #ffffff;\n  height: 30px;\n}\n"),Xp.defaultProps={defaultColor:"transparent",onChange:function(){}},Xp.propTypes={defaultColor:De.a.string,selections:De.a.arrayOf(De.a.object).isRequired,path:De.a.string.isRequired,onChange:De.a.func.isRequired,title:De.a.string,diagram:De.a.object},Xp.key="StrokeControl",Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-stroke-width-control .ant-input-number {\n  width: 100%;\n}\n"),Kp.defaultProps={onChange:function(){}},Kp.propTypes={selections:De.a.arrayOf(De.a.object).isRequired,path:De.a.string.isRequired,onChange:De.a.func.isRequired},Kp.key="StrokeWidthControl",Fe(".lake-diagram-stroke-style-item {\n  width: 92px;\n  height: 32px;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.lake-diagram-stroke-style-selected {\n  line-height: 0;\n}\n.lake-diagram-stroke-style-selected .lake-diagram-stroke-style-selected-item {\n  width: 70px;\n  display: inline-block;\n}\n.lake-diagram-stroke-style-selected .lake-properties-stroke-style-dropdown-icon {\n  width: 10px;\n  height: 10px;\n  float: right;\n  margin-top: 11px;\n  margin-right: 10px;\n  color: #8c8c8c;\n}\n.lake-diagram-stroke-style-selected .lake-diagram-properties-stroke-style {\n  width: 100%;\n  height: 100%;\n}\n");var Zp={none:"https://gw.alipayobjects.com/zos/bmw-prod/5e3dbea7-f3c3-418f-91de-cfbcb825343c.svg",dash:"https://gw.alipayobjects.com/zos/bmw-prod/3d7118e9-1bac-465d-acb9-cc0766ece25e.svg"};function $p(e){var t=e.selections,n=e.path,r=0===t.length||t.some((function(e){return e.locked})),a=t.filter((function(e){return e.canStrokeStyle()})),o=Xf.get(a,n);return Ae.a.createElement(Xf,{className:"lake-diagram-properties-stroke-style",disabled:r,title:$t("样式"),extra:Ae.a.createElement(V.a,{disabled:r,trigger:["click"],overlay:Ae.a.createElement(U.a,{"data-lake_prevent_click_unselect":!0,onClick:function(t){var r=t.key;e.onChange(n,"none"===r?null:r,a)}},Ae.a.createElement(U.a.Item,{className:"lake-diagram-stroke-style-item","test-id":"lake-diagram-stroke-style-item-none",key:"none",style:{backgroundImage:"url(".concat(Zp.none,")")}}),Ae.a.createElement(U.a.Item,{className:"lake-diagram-stroke-style-item","test-id":"lake-diagram-stroke-style-item-dash",key:"dash",style:{backgroundImage:"url(".concat(Zp.dash,")")}})),placement:"bottomRight"},Ae.a.createElement("div",{className:"lake-diagram-stroke-style-selected"},Ae.a.createElement("span",{className:"lake-diagram-stroke-style-item lake-diagram-stroke-style-selected-item",style:{backgroundImage:"url(".concat(Zp[o||"none"],")")}}),Ae.a.createElement(Be.a,{className:"lake-properties-stroke-style-dropdown-icon",style:{color:"#8C8C8C",fontSize:"10px"}})))})}function Qp(e){return""===e?e:"".concat(Math.round(100*e),"%")}function Jp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.replace("%","");return""===t?t:Math.min(Math.max(parseFloat(t)/100||0,0),1)}function eh(e){var t=e.selections,n=0===t.length||t.some((function(e){return e.locked})),r=parseFloat(Xf.get(t,"opacity"))||1,a=ie()((function(t){isFinite(t)&&e.onChange("opacity",t)}),16);function o(e){a(Jp(e.target.value))}return Object(Pe.useEffect)((function(){return function(){return a.cancel()}})),Ae.a.createElement(Xf,{className:"lake-diagram-opacity-control",disabled:n},Ae.a.createElement(Q.a,{disabled:n,min:0,max:1,step:.01,tooltipVisible:!1,value:r,onChange:a}),Ae.a.createElement(Ip,{disabled:n,min:0,max:1,step:.01,value:r,formatter:Qp,parser:Jp,onBlur:o,onPressEnter:o,onStep:a}))}function th(e){var t=Object(Pe.useRef)(),n=e.width,r=e.height,a=e.shape,o=a&&pl.find((function(e){return e.name===a}));return Object(Pe.useEffect)((function(){if(t.current&&o){var e=new es({stencil:o,width:n,height:r-8}).rendererElement;e.setAttribute("stroke","#595959"),e.setAttribute("fill","#ffffff"),Array.from(t.current.children,(function(e){return e.remove()})),t.current.appendChild(e)}}),[t,n,r,o]),o?Ae.a.createElement("svg",{ref:t,width:n,height:r,viewBox:[0,0,n,r].join(" ")}):null}function nh(e){var t=e.selections,n=0===t.length,r=t.filter((function(e){return e.isGeometry})),a=Xf.get(r,e.path);return Ae.a.createElement(Xf,{className:"lake-diagram-geometry-shape-control",disabled:n,title:$t("形状"),extra:Ae.a.createElement(V.a,{disabled:n,overlay:Ae.a.createElement(Ff,{onSelect:function(t){var n=t.key;e.onChange(e.path,n,r)},groups:e.groups}),placement:"bottomRight",trigger:["click"]},Ae.a.createElement(q.a,null,Ae.a.createElement("div",{className:Ne()("lake-diagram-geometry-shape-current",{"multi-geometry-selection":"multiValue"===a})},Ae.a.createElement(th,{shape:a,width:40,height:40}))))})}$p.defaultProps={onChange:function(){},path:"stroke.style"},$p.propTypes={selections:De.a.arrayOf(De.a.object).isRequired,onChange:De.a.func.isRequired,path:De.a.string.isRequired},$p.key="StrokeStyleControl",Fe(".lake-diagram-opacity-control .lake-diagram-control-body {\n  display: flex;\n  justify-content: space-between;\n}\n.lake-diagram-opacity-control .lake-diagram-control-body .ant-slider {\n  flex: 1 0 auto;\n  margin-left: 0;\n  margin-right: 16px;\n}\n"),eh.propTypes={selections:De.a.arrayOf(De.a.object),onChange:De.a.func},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-geometry-shape-control .lake-diagram-control-extra {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.lake-diagram-geometry-shape-control .lake-diagram-control-extra .ant-btn {\n  background: none;\n  border: none;\n  height: 32px;\n  width: 100%;\n  padding: 0;\n}\n.lake-diagram-geometry-shape-control .multi-geometry-selection {\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/8c02d0c7-9749-4078-b865-6084959df78f.svg);\n}\n.lake-diagram-geometry-shape-control .lake-diagram-geometry-shape-current {\n  width: 100%;\n  min-height: 32px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 4px;\n}\n"),th.propTypes={width:De.a.number,height:De.a.number,shape:De.a.string},nh.defaultProps={path:"shape",groups:["basic","flowchart"],onChange:function(){}},nh.propTypes={selections:De.a.arrayOf(De.a.object).isRequired,path:De.a.string.isRequired,groups:De.a.array,onChange:De.a.func.isRequired},nh.key="GeometryShapeControl";var rh=[{name:$t("节点"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isGeometry}))},controls:[{path:"shape",Control:nh},{path:"fill.color",Control:Gp}]},{name:$t("边框"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isGeometry}))},controls:[{path:"stroke.color",Control:Xp},{path:"stroke.width",Control:Kp},{Control:$p}]},{name:$t("不透明度"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return e.isGeometry&&null!=e.opacity}))},controls:[{Control:eh}]}];function ah(e){var t=e.selections,n=e.diagram,r=t.filter((function(e){return e.isMindmap})),a=Ri(r,Xf),o=Object(Pe.useState)(!1),i=M()(o,2),c=i[0],l=i[1],s=r.map((function(e){return e.upDirection})),u=r.map((function(e){return e.upLayoutType})),d=Si.filter((function(e){if(r.every((function(e){return e.isStem})))return!0;var t=e.key.split("-")[0],n=u.some((function(e){return Ai(e,t)})),a=!e.directions.every((function(e){return s.every((function(t){return Pi(t,e)}))}));return!n&&!a}));function f(e){0!==d.length&&l(e)}return Ae.a.createElement(Xf,{className:"lake-diagram-layout-control",title:$t("结构"),disabled:0===d.length,extra:Ae.a.createElement(V.a,{overlay:Ae.a.createElement(Ae.a.Fragment,null,d.map((function(t){var o=t.key;return Ae.a.createElement("div",{key:o,"data-lake_prevent_click_unselect":"true",className:Ne()("lake-diagram-layout-thumb",o,{selected:o===a}),onClick:function(){f(!c),function(t){e.onChange("layout",ji(t),r),n&&n.selector.select(r)}(o)}})}))),overlayClassName:"lake-diagram-layout-dropdown",placement:"bottomRight",onClick:function(){f(!c)},visible:c,onVisibleChange:function(e){f(e)},trigger:["click"]},Ae.a.createElement("div",{className:Ne()("lake-diagram-layout-current",{"lake-diagam-multi-properties-selection":"multiValue"===a})},Ae.a.createElement("div",{className:"lake-diagram-layout-thumb ".concat(a)})))})}function oh(e){var t=e.selections,n=Object(Pe.useState)(!1),r=M()(n,2),a=r[0],o=r[1],i=0===t.length;return Object(Pe.useEffect)((function(){var e=Xf.get(t,"model.width");o("multiValue"===e?"multiValue":null!=e)}),[t]),Ae.a.createElement(Xf,{disabled:i},Ae.a.createElement($.a,{disabled:i,indeterminate:"multiValue"===a,checked:!!a,onChange:function(n){var r=n.target.checked?Xf.get(t,"width"):null;o(n.target.checked),e.onChange({width:r,height:null})},"data-testid":"checkbox-node-width"},$t("手动设置节点尺寸")))}Fe("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-control.lake-diagram-layout-control .lake-diagram-control-extra {\n  padding: 0;\n  justify-content: space-around;\n}\n.lake-diagram-layout-current {\n  background: #ffffff;\n  width: 100%;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  border-radius: 4px;\n}\n.lake-diagram-layout-current .lake-diagram-layout-thumb:hover {\n  background-color: transparent;\n}\n.lake-diagram-layout-dropdown {\n  width: 168px;\n  border-radius: 4px;\n  border: 1px solid #e8e8e8;\n  display: flex;\n  flex-wrap: wrap;\n  background: #ffffff;\n  justify-content: initial;\n  padding: 8px 11px;\n}\n.lake-diagram-layout-dropdown.ant-dropdown-hidden {\n  display: none;\n}\n.lake-diagram-layout-thumb {\n  width: 48px;\n  height: 32px;\n  border-radius: 2px;\n  background-position: center;\n  background-repeat: no-repeat;\n  cursor: pointer;\n}\n.lake-diagram-layout-thumb.indent-bl {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/bc67f2b4-b84a-4b09-970f-92bc893cdc1a.svg);\n}\n.lake-diagram-layout-thumb.indent-br {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/103fb753-229b-4717-9e49-356f013b3309.svg);\n}\n.lake-diagram-layout-thumb.indent-tr {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/15763057-474a-4b44-a999-3058a5328e9a.svg);\n}\n.lake-diagram-layout-thumb.indent-tl {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/44546c1d-75f7-4839-a198-6f7d4049798f.svg);\n}\n.lake-diagram-layout-thumb.standard-t {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/f2060601-21d5-4882-8159-01a1fa4c241a.svg);\n}\n.lake-diagram-layout-thumb.standard-b {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/f9e3e9f4-638c-46bb-ba35-9d9bf5a87f41.svg);\n}\n.lake-diagram-layout-thumb.standard-l {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/f7687207-ddcc-4e07-abfa-a9985f86e70a.svg);\n}\n.lake-diagram-layout-thumb.standard-r {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/af8bdfa5-f0ae-446b-836e-1d0340d2f5c6.svg);\n}\n.lake-diagram-layout-thumb.standard-h {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/069fa8cc-c99f-4d1b-98a5-371367ace0e5.svg);\n}\n.lake-diagram-layout-thumb.timeline-r {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/56c34bb7-b888-4103-bc03-3124cd7b99a3.svg);\n}\n.lake-diagram-layout-thumb.timeline-l {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/23f1801a-504c-4254-a5d2-f33fcee86de7.svg);\n}\n.lake-diagram-layout-thumb:hover,\n.lake-diagram-layout-thumb.selected {\n  background-color: #fafafa;\n}\n"),ah.defaultProps={onChange:function(){}},ah.propTypes={selections:De.a.arrayOf(De.a.object).isRequired,onChange:De.a.func.isRequired,diagram:De.a.object},ah.key="LayoutControl",oh.propTypes={selections:De.a.arrayOf(De.a.object).isRequired,onChange:De.a.func.isRequired},oh.key="NodeWidthControl",Fe("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-border-shape-item {\n  width: 92px;\n  height: 32px;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.lake-diagram-border-shape-selected {\n  line-height: 0;\n}\n.lake-diagram-border-shape-selected .lake-diagram-border-shape-selected-item {\n  width: 70px;\n  display: inline-block;\n}\n.lake-diagram-border-shape-selected .lake-properties-border-shape-dropdown-icon {\n  width: 10x;\n  height: 10px;\n  float: right;\n  margin-top: 11px;\n  margin-right: 10px;\n  color: #8C8C8C;\n}\n.lake-diagram-border-shape-selected .lake-diagram-properties-border-shape {\n  width: 100%;\n  height: 100%;\n}\n");var ih=["line","rect","capsule"],ch={none:"https://gw.alipayobjects.com/zos/bmw-prod/8c02d0c7-9749-4078-b865-6084959df78f.svg",line:"https://gw.alipayobjects.com/zos/bmw-prod/6ffe619f-04e8-48c7-af45-5f0f3cf2c4a1.svg",rect:"https://gw.alipayobjects.com/zos/bmw-prod/7b0ba540-6360-430b-a960-90c928ca037c.svg",capsule:"https://gw.alipayobjects.com/zos/bmw-prod/3818284f-32e3-44cb-875c-1b722074ddaa.svg"};function lh(e){var t=e.selections,n=Xf.get(t,"border.shape","line")||null,r=t.length>0&&t.some((function(e){return e.isStem}))?ih.filter((function(e){return"line"!==e})):ih,a=r.find((function(e){return e===n}))?n:"",o=0===t.length;return Ae.a.createElement(Xf,{className:"lake-diagram-properties-border-shape",disabled:o,title:$t("节点形状"),extra:Ae.a.createElement(V.a,{disabled:o,trigger:["click"],overlay:Ae.a.createElement(U.a,{"data-lake_prevent_click_unselect":!0,onClick:function(n){var r=n.key;e.onChange("border.shape",r,t)}},r.map((function(e){return Ae.a.createElement(U.a.Item,{className:"lake-diagram-border-shape-item","test-id":"lake-diagram-border-shape-item-".concat(e),key:e,style:{backgroundImage:"url(".concat(ch[e],")")}})}))),placement:"bottomRight",getPopupContainer:function(){return document.querySelector(".yuque-sdk-extra-container")||document.body}},Ae.a.createElement("div",{className:"lake-diagram-border-shape-selected"},Ae.a.createElement("span",{className:"lake-diagram-border-shape-item lake-diagram-border-shape-selected-item",style:{backgroundImage:"url(".concat(ch[a||"none"],")")}}),Ae.a.createElement(Be.a,{className:"lake-properties-border-shape-dropdown-icon",style:{color:"#8C8C8C",fontSize:"10px"}})))})}function sh(e){var t=e.selections.filter((function(e){return e.canStroke()&&e.isMindmap})),n=0===t.length,r=Xf.get(t,"border.stroke-width");function a(n){var a=Math.min(Math.max(n,1),10);a!==r&&e.onChange("border.stroke-width",a,t)}function o(e){a(parseFloat(e.target.value))}return Ae.a.createElement(Xf,{className:"lake-diagram-border-stroke-width-control",disabled:n,title:$t("边框粗细"),extra:Ae.a.createElement(Ip,{disabled:n,min:1,max:10,value:r,onBlur:o,onPressEnter:o,onStep:a})})}function uh(e){var t=et(e.selections.map((function(e){return e.stem}))),n=Object(Pe.useState)(!1),r=M()(n,2),a=r[0],o=r[1];return Object(Pe.useEffect)((function(){o(Xf.get(t,"rainbow"))}),[t]),Ae.a.createElement(Xf,null,Ae.a.createElement($.a,{indeterminate:"multiValue"===a,checked:!!a,onChange:function(n){var r=n.target.checked;o(r),e.onChange("rainbow",r,t)}},$t("彩虹分支")))}function dh(e){var t=et(e.selections.map((function(e){return e.stem}))),n=Xf.get(t,"tapered");return Ae.a.createElement(Xf,null,Ae.a.createElement($.a,{indeterminate:"multiValue"===n,checked:!!n,onChange:function(n){var r=n.target.checked;e.onChange("tapered",r,t)}},$t("分支线条宽度逐渐变细")))}function fh(e){var t=e.selections,n=e.onChange,r=et(t.map((function(e){return e.stem}))),a=Xf.get(r,"treeEdge.shape",null);a="multiValue"===a?null:void 0===a?"curve":a;var o=0===t.length;return Ae.a.createElement(Xf,{className:"lake-diagram-properties-edge-shape",disabled:o,title:$t("分支类型"),extra:Ae.a.createElement(K.a.Group,{disabled:o,value:a,onChange:function(e){var t="curve"===e.target.value?null:e.target.value;n("treeEdge.shape",t,r)}},Ae.a.createElement(K.a.Button,{value:"curve"},Ae.a.createElement("span",{className:"lake-icon lake-icon-mind-tree-edge-none"})),Ae.a.createElement(K.a.Button,{value:"polyline"},Ae.a.createElement("span",{className:"lake-icon lake-icon-mind-tree-edge-polyline"})))})}function ph(e){var t=e.selections,n=e.diagram,r=Xf.get(t,"treeEdge.stroke","#A287E1"),a="multiValue"===r?"#FFFFFF":r;return Ae.a.createElement(Xf,{disabled:0===t.length,title:$t("分支颜色"),extra:Ae.a.createElement(Yp,{disabled:0===t.length,color:a,onSelect:function(t){e.onChange("treeEdge.stroke",t)},palette:n&&n.palette},Ae.a.createElement("div",{className:Ne()("lake-diagram-tree-edge-stroke",{"lake-diagam-multi-properties-selection":"multiValue"===r})},Ae.a.createElement("svg",{width:"64",viewBox:"0 0 64 12",xmlns:"http://www.w3.org/2000/svg"},Ae.a.createElement("path",{d:"M64 2c-27.42 0-35.012 8-64 8",stroke:"multiValue"===r?"none":r,strokeWidth:"4",fill:"none",fillRule:"evenodd"}))))})}function hh(e){var t=e.selections.filter((function(e){return e.isMindmap&&!e.isStem})),n=0===t.length,r=Xf.get(t,"treeEdge.stroke-width");function a(n){var a=Math.min(Math.max(n,1),5);"number"==typeof a&&a!==r&&e.onChange("treeEdge.stroke-width",a,t)}function o(e){a(parseFloat(e.target.value))}return Ae.a.createElement(Xf,{className:"lake-diagram-tree-edge-stroke-width-control",disabled:n,title:$t("分支粗细"),extra:Ae.a.createElement(Ip,{disabled:n,min:1,max:5,value:r,onBlur:o,onPressEnter:o,onStep:a})})}lh.propTypes={selections:De.a.arrayOf(De.a.object).isRequired,onChange:De.a.func.isRequired},lh.key="BorderShapeControl",Fe("/* stylelint-disable */\n.lake-diagram-border-stroke-width-control .ant-input-number {\n  width: 100%;\n}\n"),sh.defaultProps={onChange:function(){}},sh.propTypes={selections:De.a.arrayOf(De.a.object).isRequired,onChange:De.a.func.isRequired},sh.key="BorderStrokeWidthControl",uh.propTypes={selections:De.a.arrayOf(De.a.object).isRequired,onChange:De.a.func},uh.key="TreeEdgeRainbowControl",dh.propTypes={selections:De.a.arrayOf(De.a.object).isRequired,onChange:De.a.func},dh.key="TreeEdgeTaperedControl",Fe(".lake-diagram-properties-edge-shape .lake-diagram-control-extra {\n  border: none;\n}\n.lake-diagram-properties-edge-shape .lake-diagram-control-extra button {\n  padding: 0 13px;\n}\n"),fh.defaultProps={onChange:function(){}},fh.propTypes={selections:De.a.arrayOf(De.a.object).isRequired,onChange:De.a.func.isRequired},fh.key="TreeEdgeShapeControl",Fe(".lake-diagram-tree-edge-stroke {\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n}\n"),ph.defaultProps={onChange:function(){}},ph.propTypes={selections:De.a.arrayOf(De.a.object).isRequired,onChange:De.a.func.isRequired,diagram:De.a.object},ph.key="TreeEdgeStrokeControl",Fe("/* stylelint-disable */\n"),hh.defaultProps={onChange:function(){}},hh.propTypes={selections:De.a.arrayOf(De.a.object).isRequired,onChange:De.a.func.isRequired},hh.key="TreeEdgeStrokeWidthControl";var mh=[{name:$t("布局"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isMindmap}))},controls:[{Control:ah}]},{name:$t("节点"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isMindmap}))},controls:[{Control:lh},{path:"border.fill",Control:Gp},{path:"border.stroke",title:$t("边框颜色"),Control:Xp},{Control:sh},{Control:oh}]},{name:$t("分支"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isMindmap&&e.isStem}))},controls:[{Control:uh},{Control:dh},{Control:fh}]},{name:$t("分支"),tabKey:"style",condition:function(e){return!e.every((function(e){return e.isStem}))&&e.every((function(e){return e.isMindmap&&!e.isStem}))},controls:[{Control:ph},{Control:hh},{Control:fh},{Control:uh},{Control:dh}]}];Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-dropdown-input {\n  position: relative;\n  overflow: hidden;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  transition: border-color 0.3s;\n}\n.lake-diagram-dropdown-input:hover {\n  border-color: #47C479;\n}\n.lake-diagram-dropdown-input-focus {\n  border-color: #47C479;\n  box-shadow: 0 0 0 2px rgba(71, 196, 121, 0.2);\n  outline: none;\n}\n.lake-diagram-dropdown-input .ant-input {\n  padding-right: 24px;\n  border: none;\n}\n.lake-diagram-dropdown-input .ant-dropdown-trigger {\n  position: absolute;\n  top: -1px;\n  right: -1px;\n  padding: 0;\n  border-width: 0 0 0 1px;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  width: 24px;\n}\n.lake-diagram-dropdown-input .ant-dropdown-trigger .lake-icon {\n  position: absolute;\n  right: 8px;\n  top: 14px;\n  width: 8px;\n  height: 8px;\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSI1IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgb3BhY2l0eT0iLjQ1Ij48cGF0aCBkPSJNMC0yaDh2OEgweiIvPjxwYXRoIGQ9Ik0uNTk2LjU1N2wzLjE1IDMuODIxYS4zMzIuMzMyIDAgMDAuNDk1IDBMNy40MDUuNTU3YS4zMzIuMzMyIDAgMDAtLjI0Ny0uNTUzSC44NDVjLS4yODggMC0uNDQuMzM5LS4yNDkuNTUzeiIgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPg==);\n  background-repeat: no-repeat;\n}\n.lake-diagram-dropdown-input .ant-dropdown-trigger .lake-icon::before {\n  content: ' ';\n}\n.lake-diagram-dropdown-input .ant-dropdown-trigger:hover {\n  background: #f5f5f5;\n  border-color: #d9d9d9;\n}\n");var gh=["disabled"];function vh(e){var t=e.disabled,n=Ie()(e,gh),r=Object(Pe.useState)(e.value),a=M()(r,2),o=a[0],i=a[1],c=Object(Pe.useState)(!1),l=M()(c,2),s=l[0],u=l[1];return Object(Pe.useEffect)((function(){i(e.value)}),[e.value]),Ae.a.createElement("div",{className:Ne()("lake-diagram-dropdown-input",{"lake-diagram-dropdown-input-focus":s})},Ae.a.createElement(W.a,{disabled:t,value:o,onFocus:function(){u(!0)},onBlur:function(t){parseInt(t.target.value,10)>0&&e.onChange(t),u(!1)},onChange:function(e){i(e.target.value)},onKeyDown:function(t){"Enter"===t.key&&parseInt(t.target.value,10)>0&&(e.onChange(t),t.target.select())}}),Ae.a.createElement(V.a,je()({disabled:t},n),Ae.a.createElement(q.a,null,Ae.a.createElement("span",{className:"lake-icon lake-icon-dropdown-arrow"}))))}function yh(e){var t=e.selections,n=e.diagram,r=0===t.length||t.some((function(e){return e.locked})),a=Object(Pe.useState)({}),o=M()(a,2),i=o[0],c=o[1],l=n.contentEditorPlus,s=i.fontSize,u=i.color,d=i.bold,f=i.italic,p=i.strikethrough,h=i.underline;return Object(Pe.useEffect)((function(){function e(e){var t=e.query;c(t)}return l.emitQueryChange(),n&&l.on("querychange",e),function(){l.off("querychange",e)}}),[n]),Ae.a.createElement(Xf,{disabled:r,className:"text-format-control"},Ae.a.createElement("div",{className:"text-format-li",style:{display:"flex",justifyContent:"space-between"}},Ae.a.createElement("span",{style:{display:"flex",flexWrap:"nowrap"}},Ae.a.createElement(q.a,{disabled:r,className:Ne()("bisu-btn",{active:d}),onClick:function(){return l.execCommand("bold")}},Ae.a.createElement("span",{className:"lake-icon lake-icon-bold"})),Ae.a.createElement(q.a,{disabled:r,className:Ne()("bisu-btn",{active:f}),onClick:function(){return l.execCommand("italic")}},Ae.a.createElement("span",{className:"lake-icon lake-icon-italic"})),Ae.a.createElement(q.a,{disabled:r,className:Ne()("bisu-btn",{active:p}),onClick:function(){return l.execCommand("strikethrough")}},Ae.a.createElement("span",{className:"lake-icon lake-icon-strikethrough"})),Ae.a.createElement(q.a,{disabled:r,className:Ne()("bisu-btn",{active:h}),onClick:function(){return l.execCommand("underline")}},Ae.a.createElement("span",{className:"lake-icon lake-icon-underline"})))),Ae.a.createElement("div",{className:"text-format-li text-format-font-color"},$t("字号"),Ae.a.createElement("div",{className:"lake-diagram-control-extra lake-diagrm-font-color-control-extra"},Ae.a.createElement(vh,{disabled:r,trigger:["click"],value:s,onChange:function(e){return l.execCommand("fontSize",parseInt(e.target.value))},overlay:Ae.a.createElement(U.a,{"data-lake_prevent_click_unselect":!0,className:"lake-user-select-none text-format-font-size-menu",selectedKeys:[s&&s.toString()],onClick:function(e){var t=e.key;return l.execCommand("fontSize",parseInt(t))}},[12,14,16,18,22,24,32,36,48,64,92].map((function(e){return Ae.a.createElement(U.a.Item,{key:e},e===s&&Ae.a.createElement("span",{className:"lake-icon lake-icon-success"}),e,"px")}))),placement:"bottomRight"}))),Ae.a.createElement("div",{className:"text-format-li text-format-font-color"},$t("文本颜色"),Ae.a.createElement("div",{className:"lake-diagram-control-extra lake-diagrm-font-color-control-extra"},Ae.a.createElement(Yp,{disabled:r,color:u,defaultColor:e.defaultColor,onSelect:se()((function(e){return l.execCommand("foreColor",e)}),16),palette:n.palette},Ae.a.createElement("div",{className:"lake-diagram-font-color",style:{backgroundColor:u}})))))}vh.propTypes={value:De.a.oneOfType([De.a.string,De.a.number]),disabled:De.a.bool,onChange:De.a.func},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.text-format-control .text-format-font-color {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.text-format-control .text-format-li {\n  margin-bottom: 16px;\n}\n.text-format-control .text-format-li:last-child {\n  margin-bottom: 0;\n}\n.text-format-control .lake-diagram-control-extra {\n  display: inline-block;\n  vertical-align: bottom;\n  margin-left: 8px;\n}\n.text-format-control .lake-diagram-font-color {\n  border: 4px solid #ffffff;\n  border-radius: 2px;\n  width: 100%;\n  height: 30px;\n}\n.text-format-control.disabled .lake-diagram-font-color {\n  display: none;\n}\n.text-format-control .control-body {\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: nowrap;\n}\n.text-format-control .bisu-btn {\n  padding: 0;\n  text-align: center;\n  width: 32px;\n  line-height: 30px;\n  margin-right: 8px;\n}\n.text-format-control .bisu-btn[disabled] {\n  border-color: #e8e8e8;\n}\n.text-format-control .bisu-btn.active {\n  border-color: #47C479;\n}\n.lake-diagram-control-extra.lake-diagrm-font-color-control-extra {\n  width: auto;\n  flex: auto;\n  max-width: 90px;\n}\n.text-format-font-size {\n  max-width: 90px;\n  display: inline-block;\n  flex: auto;\n  height: 32px;\n  line-height: 30px;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  padding: 0 8px;\n  font-size: 14px;\n  font-weight: 400;\n}\n.text-format-font-size[disabled] {\n  color: #BFBFBF;\n  cursor: not-allowed;\n  border-color: #e8e8e8;\n}\n.text-format-font-size .lake-icon-arrow-down {\n  width: 8px;\n  height: 8px;\n  float: right;\n  margin-top: 12px;\n  background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjhweCIgaGVpZ2h0PSI1cHgiIHZpZXdCb3g9IjAgMCA4IDUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA1Mi41ICg2NzQ2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPkdyb3VwIENvcHkgNjwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGcgaWQ9IlN5bWJvbHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIG9wYWNpdHk9IjAuNDUiPg0KICAgICAgICA8ZyBpZD0idG9vbGJhciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyOC4wMDAwMDAsIC0xOC4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIGlkPSJwYXJhZ3JhcGgtc3R5bGUiPg0KICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyNi4wMDAwMDAsIDQuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC1Db3B5LTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMi4wMDAwMDAsIDEyLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgeD0iMCIgeT0iMCIgd2lkdGg9IjgiIGhlaWdodD0iOCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuNTk2MDkzNzUsMi41NTcwMzEyNSBMMy43NDUzMTI1LDYuMzc4MTI1IEMzLjg3NzM0Mzc1LDYuNTI1NzgxMjUgNC4xMDg1OTM3NSw2LjUyNTc4MTI1IDQuMjQwNjI1LDYuMzc4MTI1IEw3LjQwNTQ2ODc1LDIuNTU3MDMxMjUgQzcuNTk2MDkzNzUsMi4zNDI5Njg3NSA3LjQ0NDUzMTI1LDIuMDAzOTA2MjUgNy4xNTc4MTI1LDIuMDAzOTA2MjUgTDAuODQ0NTMxMjUsMi4wMDM5MDYyNSBDMC41NTcwMzEyNSwyLjAwMzkwNjI1IDAuNDA0Njg3NSwyLjM0Mjk2ODc1IDAuNTk2MDkzNzUsMi41NTcwMzEyNSBaIiBpZD0iU2hhcGUiIGZpbGw9IiMwMDAwMDAiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+) no-repeat;\n}\n.text-format-font-size .lake-icon-arrow-down::before {\n  display: none;\n}\n.text-format-font-size-menu {\n  min-width: 104px;\n}\n.text-format-font-size-menu .ant-dropdown-menu-item {\n  text-align: center;\n  position: relative;\n}\n.text-format-font-size-menu .ant-dropdown-menu-item .lake-icon {\n  position: absolute;\n  left: 12px;\n  top: 9px;\n}\n.text-format-text-align.ant-radio-group {\n  display: flex;\n}\n.text-format-text-align.ant-radio-group .ant-radio-button-wrapper {\n  flex-grow: 1;\n  padding: 0 17.5px;\n  text-align: center;\n}\n.text-format-text-align.ant-radio-group .ant-radio-button-wrapper-disabled {\n  border-color: #e8e8e8;\n}\n.text-format-color {\n  margin-top: 8px;\n  width: 92px;\n  height: 32px;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  padding: 4px;\n}\n.text-format-color-indicator {\n  width: 100%;\n  height: 100%;\n}\n.text-format-color[disabled] {\n  cursor: not-allowed;\n  border-color: #e8e8e8;\n}\n.text-format-color[disabled]-indicator {\n  display: none;\n}\n"),yh.defaultProps={defaultColor:"#262626"},yh.propTypes={defaultColor:De.a.string,selections:De.a.arrayOf(De.a.object).isRequired,onChange:De.a.func.isRequired,diagram:De.a.object.isRequired},yh.key="TextBasicFormat";var bh={left:"justifyLeft",center:"justifyCenter",right:"justifyRight",justify:"justifyFull"};function kh(e){var t=e.selections,n=e.diagram,r=0===t.length||t.some((function(e){return e.locked})),a=Object(Pe.useState)({}),o=M()(a,2),i=o[0],c=o[1],l=n.contentEditorPlus,s=i.textAlign;return Object(Pe.useEffect)((function(){function e(e){var t=e.query;c(t)}return l.emitQueryChange(),n&&l.on("querychange",e),function(){l.off("querychange",e)}}),[n]),Ae.a.createElement(Xf,{disabled:r,className:"text-format-control"},Ae.a.createElement(K.a.Group,{className:"text-format-li text-format-text-align",disabled:r,defaultValue:bh.left,value:bh[s]},Ae.a.createElement(K.a.Button,{value:bh.left,onClick:function(){return l.execCommand(bh.left)}},Ae.a.createElement("span",{className:"lake-icon lake-icon-left"})),Ae.a.createElement(K.a.Button,{value:bh.center,onClick:function(){return l.execCommand(bh.center)}},Ae.a.createElement("span",{className:"lake-icon lake-icon-center"})),Ae.a.createElement(K.a.Button,{value:bh.right,onClick:function(){return l.execCommand(bh.right)}},Ae.a.createElement("span",{className:"lake-icon lake-icon-right"})),Ae.a.createElement(K.a.Button,{value:bh.justify,onClick:function(){return l.execCommand(bh.justify)}},Ae.a.createElement("span",{className:"lake-icon lake-icon-justify"}))))}function wh(e){var t=e.diagram;return Ae.a.createElement(q.a,{block:!0,onClick:function(){t.command.execute("AttachLink")}},$t("添加链接"))}kh.defaultProps={defaultColor:"#262626"},kh.propTypes={defaultColor:De.a.string,selections:De.a.arrayOf(De.a.object).isRequired,onChange:De.a.func.isRequired,diagram:De.a.object.isRequired},kh.key="TextAlign",wh.propTypes={diagram:De.a.object.isRequired},wh.key="TextLink";var xh=[{name:$t("基础格式"),hideHeader:!0,tabKey:"text",condition:function(e){return e.length>0&&e.every((function(e){return e.textAreaElement}))},controls:[{Control:yh}]},{name:$t("对齐方式"),tabKey:"text",condition:function(e){return e.length>0&&e.every((function(e){return e.textAreaElement}))},controls:[{Control:kh}]},{name:$t("链接"),tabKey:"text",condition:function(e){return e.length>0&&e.every((function(e){return e.textAreaElement}))},controls:[{Control:wh}]}];function _h(e){var t=e.selections,n=0===t.length,r=t.filter((function(e){return e.isLine})),a={source:$t("起点"),target:$t("终点")};return Ae.a.createElement(Xf,{className:"lake-diagram-line-arrow-control",disabled:n},Object.keys(a).map((function(t){var o,i="".concat(t,".marker"),l=Xf.get(r,i)||"none";return Ae.a.createElement("div",{className:"lake-diagram-line-arrow-control-".concat(t),key:t},a[t],Ae.a.createElement(V.a,{disabled:n,trigger:["click"],overlay:Ae.a.createElement(U.a,{"data-lake_prevent_click_unselect":!0,onClick:function(t){var n=t.key;e.onChange(i,"none"===n?null:n,r)},style:{padding:"5px",display:"grid",gridTemplateColumns:"repeat(4, 1fr)"}},Xc.map((function(e){return Ae.a.createElement(U.a.Item,{className:Ne()("lake-diagram-line-endpoint-item",{active:e===l}),"test-id":"lake-diagram-line-endpoint-item-".concat(e),key:e,style:{textAlign:"center"}},Ae.a.createElement("span",{className:Ne()("lake-icon lake-icon-contextual-".concat(e),{source:"source"===t})}))}))),placement:"bottomRight"},Ae.a.createElement("div",{className:Ne()("lake-diagram-line-arrow-selected")},Ae.a.createElement("span",{className:Ne()("lake-diagram-line-arrow-selected-item","lake-icon",(o={"lake-diagam-multi-properties-selection":"multiValue"===l},c()(o,"lake-icon-contextual-".concat(l),l),c()(o,"source","source"===t),o))}),Ae.a.createElement(Be.a,{className:"lake-properties-line-arrow-dropdown-icon",style:{color:"#8C8C8C",fontSize:"10px"}}))))})))}Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-line-arrow-control .lake-diagram-control-body {\n  display: flex;\n  justify-content: space-between;\n}\n.lake-icon.source {\n  transform: matrix(-1, 0, 0, 1, 0, 0);\n}\n.lake-diagram-line-endpoint-item:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-diagram-line-endpoint-item.active {\n  background: #e8e8e8;\n  color: #595959;\n}\n.lake-diagram-line-arrow-selected {\n  line-height: 0;\n}\n.lake-diagram-line-arrow-selected .lake-diagram-line-arrow-selected-item {\n  width: 32px;\n  height: 32px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n}\n.lake-diagram-line-arrow-selected .lake-properties-line-arrow-dropdown-icon {\n  width: 10px;\n  height: 10px;\n  float: right;\n  margin-top: 11px;\n  margin-right: 10px;\n  color: #8c8c8c;\n}\n.lake-diagram-line-arrow-selected .lake-diagram-properties-line-arrow {\n  width: 100%;\n  height: 100%;\n}\n.lake-diagram-line-arrow-control-source,\n.lake-diagram-line-arrow-control-target {\n  display: flex;\n  align-items: center;\n  width: 50%;\n}\n.lake-diagram-line-arrow-control-source .lake-diagram-line-arrow-selected,\n.lake-diagram-line-arrow-control-target .lake-diagram-line-arrow-selected {\n  margin-left: 16px;\n  width: calc(100% - 64px);\n  border: 1px solid #e8e8e8;\n  border-radius: 4px;\n}\n"),_h.defaultProps={onChange:function(){}},_h.propTypes={selections:De.a.arrayOf(De.a.object).isRequired,onChange:De.a.func.isRequired},_h.key="LineArrowControl",Fe(".lake-diagram-line-shape-item {\n  width: 92px;\n  height: 32px;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.lake-diagram-line-shape-selected {\n  line-height: 0;\n}\n.lake-diagram-line-shape-selected .lake-diagram-line-shape-selected-item {\n  width: 70px;\n  display: inline-block;\n}\n.lake-diagram-line-shape-selected .lake-properties-line-shape-dropdown-icon {\n  width: 10px;\n  height: 10px;\n  float: right;\n  margin-top: 11px;\n  margin-right: 10px;\n  color: #8c8c8c;\n}\n.lake-diagram-line-shape-selected .lake-diagram-properties-line-shape {\n  width: 100%;\n  height: 100%;\n}\n");var Eh={none:"https://gw.alipayobjects.com/zos/bmw-prod/a9d015cf-7b31-496c-b60d-e224f7f0df29.svg",straight:"https://gw.alipayobjects.com/zos/bmw-prod/a9d015cf-7b31-496c-b60d-e224f7f0df29.svg",curve:"https://gw.alipayobjects.com/zos/bmw-prod/e683ab4e-70b3-4bcf-8eb1-ad843acf2add.svg",elbow:"https://gw.alipayobjects.com/zos/bmw-prod/96671966-3f77-469f-afa7-40ff402dc773.svg"};function Ch(e){var t=e.selections,n=0===t.length,r=t.filter((function(e){return e.isLine})),a=Xf.get(r,"shape");return Ae.a.createElement(Xf,{className:"lake-diagram-properties-line-shape",disabled:n,title:$t("类型"),extra:Ae.a.createElement(V.a,{disabled:n,trigger:["click"],overlay:Ae.a.createElement(U.a,{"data-lake_prevent_click_unselect":!0,onClick:function(t){var n=t.key;e.onChange("shape","none"===n?null:n,r)}},Ae.a.createElement(U.a.Item,{className:"lake-diagram-line-shape-item","test-id":"lake-diagram-line-shape-item-none",key:"none",style:{backgroundImage:"url(".concat(Eh.none,")")}}),Ae.a.createElement(U.a.Item,{className:"lake-diagram-line-shape-item","test-id":"lake-diagram-line-shape-item-curve",key:"curve",style:{backgroundImage:"url(".concat(Eh.curve,")")}}),Ae.a.createElement(U.a.Item,{className:"lake-diagram-line-shape-item","test-id":"lake-diagram-line-shape-item-elbow",key:"elbow",style:{backgroundImage:"url(".concat(Eh.elbow,")")}})),placement:"bottomRight"},Ae.a.createElement("div",{className:"lake-diagram-line-shape-selected"},Ae.a.createElement("span",{className:"lake-diagram-line-shape-item lake-diagram-line-shape-selected-item",style:{backgroundImage:"url(".concat(Eh[a||"none"],")")}}),Ae.a.createElement(Be.a,{className:"lake-properties-line-shape-dropdown-icon",style:{color:"#8C8C8C",fontSize:"10px"}})))})}Ch.defaultProps={onChange:function(){}},Ch.propTypes={selections:De.a.arrayOf(De.a.object).isRequired,onChange:De.a.func.isRequired},Ch.key="LineShapeControl";var Oh=[{name:$t("线条"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isLine}))},controls:[{Control:Ch},{path:"stroke.color",Control:Xp},{path:"stroke.width",Control:Kp},{Control:$p}]},{name:$t("端点"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isLine}))},controls:[{Control:_h}]},{name:$t("不透明度"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isLine}))},controls:[{Control:eh}]}],Sh=[{name:$t("不透明度"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return e.isImage&&null!=e.opacity}))},controls:[{Control:eh}]}];function Rh(e){var t=e.diagram,n=e.onClose,r={tabs:[{name:$t("样式"),key:"style"},{name:$t("文本"),key:"text"},{name:$t("排列"),key:"arrangement"}],className:"lake-diagram-properties-board",menus:[].concat(Wp).concat(rh).concat(xh).concat(mh).concat(Oh).concat(Sh),diagram:t,emptyImg:"https://gw.alipayobjects.com/zos/bmw-prod/209ef531-e33b-4e55-8273-5b56b6df44be.svg"};return Ae.a.createElement("div",{className:"lake-diagram-properties-board-wrapper","data-lake_prevent_click_unselect":"true"},Ae.a.createElement("div",{className:"lake-diagram-properties-board-header"},Ae.a.createElement("span",{className:"lake-diagram-properties-board-header-title"},$t("设置")),Ae.a.createElement("span",{className:"lake-diagram-properties-board-header-close-button",onClick:n})),Ae.a.createElement("div",{className:"lake-diagram-properties-body-wrapper"},Ae.a.createElement(Gf,r)))}Fe(".lake-diagram-properties-board-wrapper {\n  height: 100%;\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-body-wrapper {\n  height: calc(100% - 40px);\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-left: 1px solid #e8e8e8;\n  border-bottom: 1px solid #e8e8e8;\n  padding: 4px 8px;\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board-header .lake-diagram-properties-board-header-title {\n  margin: 4px 8px;\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board-header .lake-diagram-properties-board-header-close-button {\n  margin-right: 8px;\n  width: 16px;\n  height: 16px;\n  display: block;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/3a5cc682-0502-44f1-80cf-4a8de2d89e1e.svg);\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board-header .lake-diagram-properties-board-header-close-button:hover {\n  cursor: pointer;\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board {\n  background-color: white;\n  top: 0;\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board .ant-radio-button-wrapper {\n  background: white;\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board .lake-diagram-panel-body .ant-tabs .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab {\n  flex-grow: inherit;\n  padding: 8px 0;\n  margin: 0 16px;\n  border-bottom: 2px solid rgba(0, 0, 0, 0);\n  animation: none;\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board .lake-diagram-panel-body .ant-tabs .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab.ant-tabs-tab-active {\n  border-bottom: 2px solid black;\n}\n"),Rh.defaultProps={diagram:null,onClose:function(){}},Rh.propTypes={diagram:De.a.object,onClose:De.a.func},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.text-msg {\n  min-width: 34px;\n  font-size: 16px;\n}\n.contextual-text-size-font-size-menu {\n  min-width: 104px;\n}\n.contextual-text-size-font-size-menu .ant-dropdown-menu-item {\n  text-align: center;\n  position: relative;\n}\n.contextual-text-size-font-size-menu .ant-dropdown-menu-item .lake-icon {\n  color: #262626;\n  position: absolute;\n  left: 12px;\n  top: 9px;\n}\n");var jh=function(e){var t=e.name,n=e.diagram,r=Object(Pe.useState)({}),a=M()(r,2),o=a[0],i=a[1],c=n.contentEditorPlus,l=o.fontSize;return Object(Pe.useEffect)((function(){function e(e){var t=e.query;i(t)}return n&&(c.on("querychange",e),c.emitQueryChange()),function(){c.off("querychange",e)}}),[n]),Ae.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Ae.a.createElement(V.a,{trigger:["click"],value:l,onChange:function(e){return c.execCommand("fontSize",parseInt(e.target.value))},overlay:Ae.a.createElement(U.a,{"data-lake_prevent_click_unselect":!0,className:"lake-user-select-none contextual-text-size-font-size-menu",selectedKeys:[l&&l.toString()],onClick:function(e){var t=e.key;return c.execCommand("fontSize",parseInt(t))}},[12,14,15,16,18,22,24,32,36,48,64,92].map((function(e){return Ae.a.createElement(U.a.Item,{key:e},e===l&&Ae.a.createElement("span",{className:"lake-icon lake-icon-success"}),e,"px")}))),placement:"bottomCenter"},Ae.a.createElement(H.a,{placement:"top",title:e.title},Ae.a.createElement(q.a,{"data-testid":t},Ae.a.createElement("span",{className:"text-msg"}," ",l?"".concat(l,"px"):e.defaultFontSize," ")))))};jh.defaultProps={defaultFontSize:"14px"},jh.propTypes={title:De.a.string,data:De.a.array,name:De.a.string,selections:De.a.array,diagram:De.a.object,defaultFontSize:De.a.string},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-align {\n  box-shadow: 0 1px 2px -2px rgba(0, 0, 0, 0.08), 0 2px 6px 0 rgba(0, 0, 0, 0.04), 0 4px 8px 1px rgba(0, 0, 0, 0.02);\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-align .lake-diagram-dropdown-item {\n  color: #262626;\n  font-size: 14px;\n  margin-left: 4px;\n  margin-right: 4px;\n  min-width: 16px;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-align .ant-menu-item {\n  height: 32px;\n  line-height: 32px;\n  padding: 0 12px;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-align .ant-menu-item[disabled] {\n  border-color: #e8e8e8;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-align .ant-menu-item.active {\n  background: #f5f5f5;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-align .ant-menu-item:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-align .ant-menu-item-selected {\n  background: none;\n  color: #595959;\n}\n.text-msg {\n  min-width: 34px;\n  font-size: 16px;\n}\n");var Ph=function(e){return Ae.a.createElement(U.a,{className:Ne()("lake-diagram-contextual-toolbar-dropdown-menu lake-diagram-contextual-toolbar-text-align",e.menuClassName),onSelect:e.onSelect,"data-lake_prevent_click_unselect":"true"},e.data.map((function(t){return Ae.a.createElement(U.a.Item,{key:t.key},Ae.a.createElement("span",{className:Ne()("lake-icon lake-diagram-dropdown-item",{"lake-icon-success":t.key===e.currIcon})}),Ae.a.createElement("span",{className:"lake-icon lake-icon-".concat(t.icon," lake-diagram-dropdown-item")}),Ae.a.createElement("span",{className:"lake-diagram-dropdown-item"},t.title))})))};Ph.propTypes={title:De.a.string,menuClassName:De.a.string,data:De.a.array,onSelect:De.a.func,currIcon:De.a.string};var Ah=function(e){var t=e.name,n=e.diagram,r=n.contentEditorPlus,a=Object(Pe.useState)({}),o=M()(a,2),i=o[0],c=o[1],l=Object(Pe.useState)(!1),s=M()(l,2),u=s[0],d=s[1],f=i.textAlign;Object(Pe.useEffect)((function(){function e(e){var t=e.query;c(t)}return n&&(r.on("querychange",e),r.emitQueryChange()),function(){r.off("querychange",e)}}),[n]);var p=function(e){if("justify"===e)r.execCommand("justifyFull");else r.execCommand("justify".concat(e&&e[0].toUpperCase()+e.slice(1)))};return Ae.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Ae.a.createElement(V.a,{onClick:function(){f&&p(f)},overlay:Ae.a.createElement(Ph,{data:[{key:"left",icon:"left",title:"左对齐"},{key:"center",icon:"center",title:"居中对齐"},{key:"right",icon:"right",title:"右对齐"},{key:"justify",icon:"justify",title:"两端对齐"}],onSelect:function(e){var t=e.key;p(t),d(!1)},currIcon:"start"===f?"left":f}),placement:"bottomCenter",trigger:"click",visible:u,onVisibleChange:function(e){d(e)}},Ae.a.createElement(H.a,{placement:"top",title:e.title},Ae.a.createElement(q.a,{"data-testid":t,onClick:function(){return d(!0)}},Ae.a.createElement("span",{className:"lake-icon lake-icon-".concat(f?"start"===f?"left":f:e.defaultAlign)})))))};Ah.defaultProps={defaultAlign:"left"},Ah.propTypes={title:De.a.string,data:De.a.array,name:De.a.string,diagram:De.a.object,defaultAlign:De.a.string},Fe(".ne-embed-icon {\n  display: inline-flex;\n  width: 16px;\n  height: 16px;\n}\n");var Th=function(e){b()(n,Pe.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return v()(n,[{key:"_isLowContrast",value:function(e){var t=be()(e).toRgb();return.3*t.r+.59*t.g+.11*t.b>=248}},{key:"_isTransparent",value:function(e){return!e||"transparent"===e||"rgba(255,255,255,0)"===e.replace(/ /g,"")||"rgba(0,0,0,0)"===e.replace(/ /g,"")}},{key:"requireStroke",value:function(e){return this._isTransparent(e)||this._isLowContrast(e)}},{key:"render",value:function(){return this._getIcon()}},{key:"_getIcon",value:function(){var e,t=this.props,n=t.type,r=t.fill,a=t.stroke;if(this._isTransparent(r))return Ae.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1"},Ae.a.createElement("defs",null,Ae.a.createElement("pattern",{id:"rect",viewBox:"0,0,8,8",width:"35%",height:"35%"},Ae.a.createElement("rect",{id:"矩形",fill:"#FAFAFA",x:"0",y:"0",width:"4",height:"4"}),Ae.a.createElement("rect",{id:"矩形备份-21",fill:"#FAFAFA",x:"4",y:"4",width:"4",height:"4"}),Ae.a.createElement("rect",{id:"矩形备份-20",fill:"#D9D9D9",x:"4",y:"0",width:"4",height:"4"}),Ae.a.createElement("rect",{id:"矩形备份-22",fill:"#D9D9D9",x:"0",y:"4",width:"4",height:"4"}))),Ae.a.createElement("circle",{cx:"8",cy:"8",r:"8",fill:"url(#rect)"}));if("stroke-color"===n&&this._isTransparent(a))return Ae.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1"},Ae.a.createElement("title",null,"透明环"),Ae.a.createElement("g",{id:"控件",stroke:"none",strokeWidth:"0.5",fill:"none",fillRule:"evenodd"},Ae.a.createElement("g",{id:"透明环",transform:"translate(-0.000000, 0.000000)"},Ae.a.createElement("path",{d:"M8,0 C12.418278,0 16,3.581722 16,8 C16,12.418278 12.418278,16 8,16 C3.581722,16 0,12.418278 0,8 C0,3.581722 3.581722,0 8,0 Z M8,3 C5.23857625,3 3,5.23857625 3,8 C3,10.7614237 5.23857625,13 8,13 C10.7614237,13 13,10.7614237 13,8 C13,5.23857625 10.7614237,3 8,3 Z",id:"形状",fill:"#FAFAFA"}),Ae.a.createElement("path",{d:"M8,13 L8,12.999 L8,16 C6.91549955,16 5.88140117,15.7842031 4.93830231,15.3932066 L6.08631593,12.6207031 C6.67578581,12.8651081 7.32214006,13 8,13 Z M11.5247537,11.5462815 L13.6458509,13.6678364 C12.905585,14.4052487 12.0216994,14.9985887 11.0398062,15.4022444 L9.89058451,12.6302127 C10.5062584,12.3785637 11.0605479,12.0076869 11.5247537,11.5462815 Z M4.48114009,11.5521301 L2.36015992,13.6738177 C1.61882513,12.9368948 1.02109994,12.0556625 0.612650477,11.075787 L3.38472128,9.92671467 C3.64106728,10.5400536 4.01611047,11.091429 4.48114009,11.5521301 Z M16,7.999 C16,9.08450045 15.7842031,10.1185988 15.3932066,11.0616977 L12.6207031,9.91368407 C12.8651081,9.32421419 13,8.67785994 13,8 L16,7.999 Z M3,8 L2.999,8 L4.45652404e-11,8 C4.45652404e-11,6.91549955 0.215796936,5.88140117 0.606793361,4.93830231 L3.37929685,6.08631593 C3.13489185,6.67578581 3,7.32214006 3,8 Z M13.6398401,2.32618229 C14.3811749,3.06310522 14.9789001,3.94433749 15.3873495,4.92421296 L12.6152787,6.07328533 C12.3589327,5.45994637 11.9838895,4.90857096 11.5188599,4.44786988 L13.6398401,2.32618229 Z M8,9.09494702e-13 C9.0848864,9.09494702e-13 10.1193348,0.215950555 11.0627045,0.607210861 L9.91368407,3.37929685 C9.32421419,3.13489185 8.67785994,3 8,3 L7.999,9.09494702e-13 L8,9.09494702e-13 Z M2.37521442,2.31125673 C2.36817981,2.31821274 2.36115804,2.32518171 2.35414914,2.33216359 C2.47280694,2.21398682 2.594547,2.10004476 2.71975554,1.98995348 L2.91043586,1.82748893 C3.08291716,1.68509277 3.26177813,1.54957175 3.44628096,1.42161318 L3.44587689,1.42189343 C3.64121394,1.28642097 3.84244471,1.15967042 4.04944431,1.04189047 L4.04893797,1.04217859 L4.35587152,0.876283146 L4.35587152,0.876283146 L4.67022901,0.723755702 L4.96019384,0.597755619 L6.10941549,3.36978734 L6.08230453,3.38096211 C6.01729624,3.40798236 5.95298109,3.43633501 5.88939319,3.46598597 L6.10941549,3.36978734 C6.00994969,3.41044274 5.91208604,3.45421002 5.81594555,3.50096817 C5.67093771,3.57146782 5.52925326,3.64913643 5.39194239,3.73324727 C5.36336599,3.75074884 5.33464738,3.76874189 5.30612657,3.78701662 C5.2498994,3.8230481 5.19464208,3.86003397 5.14017772,3.89807688 C5.13087827,3.90457251 5.12161081,3.91109266 5.11236658,3.91764341 C5.0411436,3.96811355 4.9712726,4.02042159 4.90284866,4.07448042 C4.89157281,4.08338639 4.8797933,4.09277659 4.86805733,4.10221872 C4.81544399,4.14455883 4.76415727,4.18754838 4.71376093,4.2315324 C4.69109675,4.25131063 4.66840717,4.2714759 4.64590384,4.29184316 L4.61016998,4.32449924 L4.61016998,4.32449924 L4.47532075,4.45364446 L4.47532075,4.45364446 L2.35414914,2.33216359 L2.359,2.326 L2.36467214,2.32170046 L2.361,2.325 Z",id:"形状结合",fill:"#D9D9D9"}))));var o=this._isLowContrast(a)?"#e8e8e8":a;switch(n){case"t-font-color":e=function(e){return Ae.a.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18"},Ae.a.createElement("title",null,"color-font"),Ae.a.createElement("desc",null,"Created with Sketch."),Ae.a.createElement("g",{id:"color-font",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Ae.a.createElement("rect",{fill:e,id:"Rectangle-55",stroke:"none",strokeWidth:"1",x:"2",y:"13.75",width:"12",height:"1.5",rx:"0.125"}),Ae.a.createElement("path",{d:"M5.29102819,11.25 L3.96365715,11.25 C3.87952002,11.25 3.8113134,11.1817934 3.8113134,11.0976562 C3.8113134,11.08076 3.81412419,11.0639814 3.81963067,11.0480076 L7.0756112,1.60269506 C7.09679504,1.5412426 7.15463644,1.5 7.21963767,1.5 L8.81868806,1.5 C8.883726,1.5 8.94159158,1.54128846 8.96274706,1.60278951 L12.2118,11.048102 C12.239168,11.1276636 12.1968568,11.2143472 12.1172952,11.2417152 C12.1013495,11.2472004 12.0846037,11.25 12.067741,11.25 L10.6761419,11.25 C10.6099165,11.25 10.5512771,11.2072154 10.531066,11.1441494 L9.69970662,8.55 L6.27433466,8.55 L5.43599205,11.1444975 C5.41567115,11.2073865 5.35711879,11.25 5.29102819,11.25 Z M8.02635163,3.18571429 L7.96199183,3.18571429 L6.63904023,7.30714286 L9.33500105,7.30714286 L8.02635163,3.18571429 Z",id:"A",fill:"#595959"})))}(r);break;case"t-bg-color":e=function(e,t){return Ae.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1"},Ae.a.createElement("g",{id:"控件",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Ae.a.createElement("g",{id:"Z图标/2.编辑器/2.格式/背景色",transform:"translate(-5.000000, -6.000000)"},Ae.a.createElement("g",{id:"编组-9",transform:"translate(-1.000000, 0.000000)"},Ae.a.createElement("mask",{id:"mask-2",fill:"black"},Ae.a.createElement("use",{xlinkHref:"#path-1"})),Ae.a.createElement("circle",{fill:e,stroke:t,strokeWidth:"1",cx:"14",cy:"14",r:"7.5"})))))}(r,a);break;case"stroke-color":e=function(e,t){return Ae.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1"},Ae.a.createElement("title",null,"编组 10"),Ae.a.createElement("g",{id:"控件",stroke:"none",fill:"none",fillRule:"evenodd"},Ae.a.createElement("g",{id:"Z图标/2.编辑器/2.格式/描边",transform:"translate(-6.000000, -8.000000)"},Ae.a.createElement("g",{id:"编组-10",transform:"translate(6.000000, 8.000000)"},Ae.a.createElement("circle",{id:"椭圆形",stroke:t,fill:"none",cx:"8",cy:"8",r:"6.5",strokeWidth:"3"})),Ae.a.createElement("g",{id:"编组-11",transform:"translate(6.000000, 8.000000)"},Ae.a.createElement("circle",{id:"椭圆形2",stroke:e,fill:"none",cx:"8",cy:"8",r:"6.5",strokeWidth:"1"})))))}(a,o);break;case"properties-cb-trans":e=Ae.a.createElement("svg",{width:"90",viewBox:"0 0 90 30",xmlns:"http://www.w3.org/2000/svg"},Ae.a.createElement("path",{d:"M0 30L90 0",stroke:"#D0021B",fill:"none",fillRule:"evenodd",strokeLinecap:"square"}));break;case"context-cb-trans":e=Ae.a.createElement("svg",{width:"30",viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},Ae.a.createElement("path",{d:"M0 30L30 0",stroke:"#D0021B",fill:"none",fillRule:"evenodd",strokeLinecap:"square"}));break;default:e=null}return Ae.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},onClick:this.props.onClick},e)}}]),n}();c()(Th,"propTypes",{className:De.a.string,type:De.a.string.isRequired,fill:De.a.string,stroke:De.a.string,onClick:De.a.func}),c()(Th,"defaultProps",{fill:"red"}),Fe(".lake-diagram-board-color-pick-container {\n  background: #fff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  padding: 5px 0;\n  min-width: 74px;\n}\n");var Dh=function(e){var t=e.name,n=e.diagram,a=Object(Pe.useState)({}),o=M()(a,2),i=o[0],c=o[1],l=n.contentEditorPlus,s=n&&n.palette||[];Object(Pe.useEffect)((function(){function e(e){var t=e.query;c(t)}return n&&(l.on("querychange",e),l.emitQueryChange()),function(){l.off("querychange",e)}}),[n]);var u="#"+be()(i.color).toHex().toUpperCase(),d=Object(Pe.useState)(u||"#262626"),f=M()(d,2),p=f[0],h=f[1],m=Object(Pe.useState)(!1),g=M()(m,2),v=g[0],y=g[1];function b(e){h(e),l.execCommand("foreColor",e)}var k=Ae.a.createElement("div",{className:"lake-diagram-board-color-pick-container"},Ae.a.createElement(r.ColorPicker,{className:"lake-prevent-card-activated",visible:v,activeColors:[p],defaultColor:e.defaultColor,onSelect:b,onClear:function(){return b("rgba(0, 0, 0, 0)")},show:v,customColors:Mu,CustomPalette:s}));return Ae.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Ae.a.createElement(V.a,{visible:v,onVisibleChange:function(e){y(e),h(u),e||Nu(p,s)},overlay:k,placement:"bottomCenter",trigger:"click"},Ae.a.createElement(H.a,{placement:"top",title:e.title},Ae.a.createElement(q.a,{"data-testid":t},Ae.a.createElement("span",{style:{marginTop:"5px"}},Ae.a.createElement(Th,{type:"t-font-color",fill:u}))))))};Dh.defaultProps={defaultColor:"transparent"},Dh.propTypes={title:De.a.string,name:De.a.string,diagram:De.a.object,selections:De.a.array,currColor:De.a.string,defaultColor:De.a.string};var Mh=function(e){var t=e.name,n=e.diagram,r=e.selections,a=0===r.length||r.some((function(e){return e.locked})),o=Object(Pe.useState)({}),i=M()(o,2),c=i[0],l=i[1],s=n.contentEditorPlus,u=c.bold;return Object(Pe.useEffect)((function(){function e(e){var t=e.query;l(t)}return n&&(s.on("querychange",e),s.emitQueryChange()),function(){s.off("querychange",e)}}),[n]),Ae.a.createElement("div",{className:"lake-diagram-contextual-command"},Ae.a.createElement(H.a,{disabled:a,placement:"top",title:e.title},Ae.a.createElement(q.a,{"data-testid":t,icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-bold"}),className:Ne()({active:u}),onClick:function(e){e.stopPropagation(),s.execCommand("bold")}})))};Mh.propTypes={title:De.a.string,selections:De.a.array,name:De.a.string,execCommand:De.a.func,diagram:De.a.object};var Nh=function(e){var t=e.name,n=e.diagram,r=e.title,a=e.disabled;return Ae.a.createElement("div",{className:"lake-diagram-contextual-command"},Ae.a.createElement(H.a,{disabled:a,placement:"top",title:r},Ae.a.createElement(q.a,{"data-testid":t,icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-contextual-link"}),onClick:function(e){e.preventDefault(),e.stopPropagation(),n.command.execute("CreateLink")}})))};Nh.propTypes={title:De.a.string,name:De.a.string,execCommand:De.a.func,diagram:De.a.object,disabled:De.a.oneOfType([De.a.bool,De.a.func])};var Lh=function(e){var t=e.name,n=e.onProperties,r=e.title;return Ae.a.createElement("div",{className:"lake-diagram-contextual-command"},Ae.a.createElement(H.a,{disabled:!1,placement:"top",title:r},Ae.a.createElement(q.a,{"data-testid":t,icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-board-properties"}),onClick:n})))};Lh.defaultProps={onProperties:function(){}},Lh.propTypes={title:De.a.string,name:De.a.string,diagram:De.a.object,onProperties:De.a.func},Fe(".lake-diagram-board-color-pick-container {\n  background: #fff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  padding: 5px 0;\n  min-width: 74px;\n}\n");var Ih=function(e){var t=e.name,n=e.diagram,a=e.selections,o=a.every((function(e){return e.isMindmap})),i=Object(Pe.useState)(e.defaultColor),c=M()(i,2),l=c[0],s=c[1],u=Object(Pe.useState)(!1),d=M()(u,2),f=d[0],p=d[1],h=Object(Pe.useState)(null),m=M()(h,2),g=m[0],v=m[1],y=n&&n.palette||[],b=function(e){var t=be()(e).toRgb();return.3*t.r+.59*t.g+.11*t.b>=248},k=function(t){s(t),o?e.execCommand("border.fill",t,a):e.execCommand("fill.color",t,a),b(t)?v("#e8e8e8"):v(null)};Object(Pe.useEffect)((function(){if(a&&a.length>0){var t=o?"border.fill":"fill.color",n=e.get(a,t),r="multiValue"===n?"#FFFFFF":n;s(r),b(r)?v("#e8e8e8"):v(null)}return function(){}}),[]);var w=Ae.a.createElement("div",{className:"lake-diagram-board-color-pick-container"},Ae.a.createElement(r.ColorPicker,{className:"lake-prevent-card-activated",visible:f,activeColors:[l],defaultColor:e.defaultColor,onSelect:k,onClear:function(){return k("rgba(0, 0, 0, 0)")},show:f,customColors:Mu,CustomPalette:n&&n.palette}));return Ae.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Ae.a.createElement(V.a,{visible:f,onVisibleChange:function(e){p(e),e||Nu(l,y)},overlay:w,placement:"bottomRight",trigger:"click"},Ae.a.createElement(H.a,{placement:"top",title:e.title},Ae.a.createElement(q.a,{"data-testid":t},Ae.a.createElement(Th,{type:"t-bg-color",fill:l,stroke:g})))))};function Bh(e){var t=Object(Pe.useRef)(),n=e.width,r=e.height,a=e.shape,o=a&&pl.find((function(e){return e.name===a}));return Object(Pe.useEffect)((function(){if(t.current&&o){var e=new es({stencil:o,width:n,height:r,noFill:!0}).rendererElement;e.setAttribute("stroke","#595959"),e.setAttribute("fill","#ffffff"),Array.from(t.current.children,(function(e){return e.remove()})),t.current.appendChild(e)}}),[t,n,r,o]),o?Ae.a.createElement("svg",{ref:t,width:n,height:r,viewBox:[0,0,n,r].join(" ")}):null}Ih.defaultProps={defaultColor:"transparent"},Ih.propTypes={title:De.a.string,name:De.a.string,diagram:De.a.object,selections:De.a.array,currColor:De.a.string,defaultColor:De.a.string,execCommand:De.a.func,get:De.a.func,disabled:De.a.oneOfType([De.a.bool,De.a.func])},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagam-multi-properties-selection {\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/8c02d0c7-9749-4078-b865-6084959df78f.svg);\n}\n.lake-diagram-contextual-shape-current {\n  width: 100%;\n  height: 32px;\n  min-width: 34px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  border-radius: 4px;\n}\n"),Bh.propTypes={width:De.a.number,height:De.a.number,shape:De.a.string};var zh=function(e){var t=e.name,n=e.selections,r=e.get(n,"shape");return Ae.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Ae.a.createElement(V.a,{overlay:Ae.a.createElement(Ff,{onSelect:function(t){var r=t.key;e.execCommand("shape",r,n)},groups:["basic","flowchart"]}),key:e.key,placement:"bottomCenter",trigger:"click"},Ae.a.createElement(H.a,{placement:"top",title:e.title},Ae.a.createElement(q.a,{"data-testid":t},Ae.a.createElement("div",{className:Ne()("lake-diagram-contextual-shape-current",{"lake-diagam-multi-properties-selection":"multiValue"===r})},Ae.a.createElement(Bh,{shape:r,width:30,height:30}))))))};function Fh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fh(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}zh.propTypes={title:De.a.string,command:De.a.string,name:De.a.string,onSelect:De.a.func,key:De.a.string,diagram:De.a.object,selections:De.a.array,execCommand:De.a.func,get:De.a.func},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-contextual-stroke-dropdown {\n  background: #fff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  padding: 5px 5px;\n  width: auto;\n  height: auto;\n}\n.lake-diagram-contextual-stroke-dropdown .geo-btn {\n  padding: 0;\n  width: 32px;\n  line-height: 30px;\n  margin-right: 8px;\n  border: none;\n  background: none;\n}\n.lake-diagram-contextual-stroke-dropdown .geo-btn[disabled] {\n  border-color: #e8e8e8;\n}\n.lake-diagram-contextual-stroke-dropdown .geo-btn.active {\n  background: #f5f5f5;\n}\n.lake-diagram-contextual-stroke-dropdown .geo-btn:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-diagram-contextual-stroke-dropdown .geo-btn::after {\n  display: none;\n}\n.lake-diagram-contextual-stroke-dropdown-row {\n  display: flex;\n}\n.lake-diagram-board-contextual-toolbar-separator {\n  height: 1px;\n  background: #e8e8e8;\n  width: 100%;\n  margin-top: 5px;\n  margin-bottom: 5px;\n}\n.lake-diagram-board-contextual-stroke-width-control {\n  max-width: 70px;\n  margin-right: 5px;\n}\n.lake-diagram-board-contextual-stroke-width-control .lake-diagram-board-contextual-stroke-width-inner {\n  border: none;\n}\n.lake-diagram-board-contextual-stroke-width-control .lake-diagram-board-contextual-stroke-width-inner .ant-input-number {\n  width: 100%;\n  border: 1px solid #e8e8e8;\n  border-radius: 5px;\n}\n.lake-diagram-board-contextual-stroke-width-control .lake-diagram-board-contextual-stroke-width-inner .ant-input-number-focused {\n  box-shadow: none;\n}\n.lake-diagram-board-contextual-stroke-color {\n  border: 1px solid #e8e8e8;\n  border-radius: 4px;\n  width: 32px;\n  max-height: 32px;\n  overflow: hidden;\n  background: #fff;\n  cursor: pointer;\n}\n");var Vh=function(e){var t=e.diagram,n=e.selections,r=e.strokeProps,a=e.setStrokeProps,o=Object(Pe.useState)(r.style?"dash":"none"),i=M()(o,2),c=i[0],l=i[1],s=function(t){var o=Math.min(Math.max(t,1),10);o!==r.width&&(a(Uh(Uh({},r),{},{width:o})),e.execCommand("stroke.width",o,n))},u=function(e){s(e.target.value)},d=function(t){e.onSelect&&e.onSelect(t)},f=function(t){e.execCommand("stroke.style",t,n)};return Ae.a.createElement("div",{className:Ne()("lake-diagram-contextual-stroke-dropdown",e.className),"data-lake_prevent_click_unselect":"true"},Ae.a.createElement("div",{className:"lake-diagram-contextual-stroke-dropdown-row"},Ae.a.createElement(q.a,{icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-contextual-stroke-none"}),className:Ne()("geo-btn",{active:"none"===c}),onClick:function(e){e.preventDefault(),l("none"),f(null)}}),Ae.a.createElement(q.a,{icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-contextual-stroke-dash"}),target:"dash",className:Ne()("geo-btn",{active:"dash"===c}),onClick:function(e){e.preventDefault(),l("dash"),f("dash")}})),Ae.a.createElement("div",{className:"lake-diagram-board-contextual-toolbar-separator"}),Ae.a.createElement("div",{className:"lake-diagram-contextual-stroke-dropdown-row"},Ae.a.createElement("div",{className:"lake-diagram-board-contextual-stroke-width-control"},Ae.a.createElement("div",{className:"lake-diagram-board-contextual-stroke-width-inner"},Ae.a.createElement(Ip,{min:1,max:10,value:r.width,onBlur:u,onPressEnter:u,onStep:s}))),Ae.a.createElement("div",{className:"lake-diagram-board-contextual-stroke-color"},Ae.a.createElement(Yp,{color:r.color,defaultColor:e.defaultColor,onSelect:d,onClear:function(){return d("rgba(0, 0, 0, 0)")},palette:t&&t.palette,transSVG:Ae.a.createElement(Th,{type:"context-cb-trans"})},Ae.a.createElement("div",{className:Ne()("lake-diagram-stroke"),style:{backgroundColor:r.color}})))))};Vh.propTypes={title:De.a.string,colorBadge:De.a.object,name:De.a.string,className:De.a.string,diagram:De.a.object,onSelect:De.a.func,defaultColor:De.a.string,strokeProps:De.a.object,selections:De.a.array,setStrokeProps:De.a.func,execCommand:De.a.func};var qh=function(e){var t=e.name,n=e.selections,r=Object(Pe.useState)({}),a=M()(r,2),o=a[0],i=a[1],c=Object(Pe.useState)(!1),l=M()(c,2),s=l[0],u=l[1];return Object(Pe.useEffect)((function(){return n&&n.length>0&&i(n[0].stroke),function(){}}),[]),Ae.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Ae.a.createElement(V.a,{visible:s,onVisibleChange:function(e){u(e)},overlay:Ae.a.createElement(Vh,je()({setStrokeProps:i,strokeProps:o,onSelect:function(t){i(Uh(Uh({},o),{},{color:t})),e.execCommand("stroke.color",t,n)}},e)),placement:"bottomCenter",trigger:"click"},Ae.a.createElement(H.a,{placement:"top",title:e.title},Ae.a.createElement(q.a,{"data-testid":t},Ae.a.createElement(Th,{type:"stroke-color",stroke:o.color})))))};qh.defaultProps={defaultColor:"transparent"},qh.propTypes={title:De.a.string,name:De.a.string,diagram:De.a.object,selections:De.a.array,currColor:De.a.string,defaultColor:De.a.string,execCommand:De.a.func},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-contextual-text-dropdown {\n  background: #fff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  padding: 5px 5px;\n  width: auto;\n  height: auto;\n}\n.lake-diagram-contextual-text-dropdown .ant-btn {\n  border: none;\n  background: none;\n  padding: 0 6px;\n  height: 32px;\n  min-width: 32px;\n  margin: 0 2px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  outline: none;\n}\n.lake-diagram-contextual-text-dropdown .ant-btn[disabled] {\n  color: #BFBFBF;\n  background: none;\n}\n.lake-diagram-contextual-text-dropdown .ant-btn:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-diagram-contextual-text-dropdown .ant-btn:focus {\n  color: #595959;\n}\n.lake-diagram-contextual-text-dropdown .ant-btn::after {\n  display: none;\n}\n.lake-diagram-contextual-text-dropdown .ant-btn .lake-icon {\n  color: #262626;\n  font-size: 18px;\n}\n.lake-diagram-contextual-text-dropdown .ant-btn.active {\n  background: #e8e8e8;\n  color: #595959;\n}\n.lake-diagram-contextual-text-dropdown .lake-button-active {\n  background-color: #e8e8e8;\n}\n.lake-diagram-contextual-text-dropdown-row {\n  display: flex;\n}\n");var Hh=function(e){var t=e.diagram,n=Object(Pe.useState)({}),r=M()(n,2),a=r[0],o=r[1],i=t.contentEditorPlus;Object(Pe.useEffect)((function(){function e(e){var t=e.query;o(t)}return t&&(i.on("querychange",e),i.emitQueryChange()),function(){i.off("querychange",e)}}),[t]);var c=a.bold,l=a.italic,s=a.strikethrough,u=a.underline;return Ae.a.createElement("div",{className:Ne()("lake-diagram-contextual-text-dropdown",e.className),"data-lake_prevent_click_unselect":"true"},Ae.a.createElement("div",{className:"lake-diagram-contextual-text-dropdown-row"},Ae.a.createElement(q.a,{className:Ne()({active:c}),icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-bold"}),onClick:function(){return i.execCommand("bold")}}),Ae.a.createElement(q.a,{className:Ne()({active:l}),onClick:function(){return i.execCommand("italic")},icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-italic"})}),Ae.a.createElement(q.a,{className:Ne()({active:s}),onClick:function(){return i.execCommand("strikethrough")},icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-strikethrough"})}),Ae.a.createElement(q.a,{className:Ne()({active:u}),onClick:function(){return i.execCommand("underline")},icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-underline"})})),Ae.a.createElement("div",{className:"lake-diagram-board-contextual-toolbar-separator"}),Ae.a.createElement("div",{className:"lake-diagram-contextual-text-dropdown-row"},Ae.a.createElement(jh,je()({},e,{textStyle:a,title:$t("字号")})),Ae.a.createElement(Dh,je()({},e,{textStyle:a,title:$t("字色")})),Ae.a.createElement(Ah,je()({},e,{textStyle:a,title:$t("对齐")}))))};Hh.defaultProps={defaultColor:"transparent"},Hh.propTypes={title:De.a.string,name:De.a.string,diagram:De.a.object,selections:De.a.array,className:De.a.string};var Wh=function(e){var t=e.name,n=Object(Pe.useState)(!1),r=M()(n,2),a=r[0],o=r[1];return Ae.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Ae.a.createElement(V.a,{trigger:"click",visible:a,onVisibleChange:function(e){o(e)},overlay:Ae.a.createElement(Hh,e)},Ae.a.createElement(H.a,{placement:"top",title:e.title},Ae.a.createElement(q.a,{"data-testid":t},Ae.a.createElement("span",{className:"lake-icon lake-icon-contextual-text"})))))};Wh.defaultProps={defaultColor:"transparent"},Wh.propTypes={title:De.a.string,name:De.a.string,diagram:De.a.object,selections:De.a.array},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-contextual-toolbar-dropdown .lake-icon.source {\n  transform: matrix(-1, 0, 0, 1, 0, 0);\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu {\n  box-shadow: 0 1px 2px -2px rgba(0, 0, 0, 0.08), 0 2px 6px 0 rgba(0, 0, 0, 0.04), 0 4px 8px 1px rgba(0, 0, 0, 0.02);\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu::before {\n  display: none;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu::after {\n  display: none;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .lake-diagram-dropdown-item {\n  margin-left: 4px;\n  margin-right: 4px;\n  min-width: 16px;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .ant-menu-item {\n  min-width: 32px;\n  height: 32px;\n  padding: 0 6px;\n  border-radius: 3px;\n  text-align: center;\n  line-height: 32px;\n  margin: 0 2px;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .ant-menu-item[disabled] {\n  border-color: #e8e8e8;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .ant-menu-item:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .ant-menu-item.active {\n  background: #e8e8e8;\n  color: #595959;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .lake-icon {\n  color: #262626;\n  font-size: 16px;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .lake-icon.source {\n  transform: matrix(-1, 0, 0, 1, 0, 0);\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .ant-menu-item-selected {\n  color: #595959;\n}\n.text-msg {\n  min-width: 34px;\n  font-size: 16px;\n}\n");var Yh=function(e){var t=e.onSelect,n=e.source,r=e.marker;return Ae.a.createElement(U.a,{className:Ne()("lake-diagram-contextual-toolbar-dropdown-menu"),"data-lake_prevent_click_unselect":"true",onSelect:t,style:{padding:"5px",display:"grid",gridTemplateColumns:"repeat(4, 1fr)"}},Xc.map((function(e){return Ae.a.createElement(U.a.Item,{key:e,className:Ne()({active:e===r})},Ae.a.createElement("span",{className:Ne()("lake-icon lake-icon-contextual-".concat(e," lake-diagram-dropdown-item"),{source:n})}))})))};Yh.propTypes={source:De.a.bool,title:De.a.string,className:De.a.string,diagram:De.a.object,onSelect:De.a.func,marker:De.a.string};var Gh=function(e){var t=e.name,n=e.selections,r=e.type,a=Object(Pe.useState)(null),o=M()(a,2),i=o[0],c=o[1],l=Object(Pe.useState)(e.defaultIcon),s=M()(l,2),u=s[0],d=s[1],f=Object(Pe.useState)(!1),p=M()(f,2),h=p[0],m=p[1];return Object(Pe.useEffect)((function(){if(n&&n.length>0){var e=n[0][r];e.marker?c(e.marker):c("none"),Xc.filter((function(t){return t===e.marker})).forEach((function(e){return d("contextual-".concat(e))}))}return function(){}}),[]),Ae.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Ae.a.createElement(V.a,{overlay:Ae.a.createElement(Yh,je()({onSelect:function(t){var a=t.key;e.execCommand("".concat(r,".marker"),"none"===a?null:a,n),c(a),Xc.filter((function(e){return e===a})).forEach((function(e){return d("contextual-".concat(e))})),m(!1)},marker:i,source:"source"===r,trigger:"click"},e)),placement:"bottomCenter",trigger:"click",visible:h,onVisibleChange:function(e){m(e)}},Ae.a.createElement(H.a,{placement:"top",title:e.title},Ae.a.createElement(q.a,{"data-testid":t,onClick:function(){return m(!0)}},Ae.a.createElement("span",{className:Ne()("lake-icon lake-icon-".concat(u),{source:"source"===r})})))))};function Xh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xh(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Gh.defaultProps={defaultIcon:"contextual-stroke-none"},Gh.propTypes={type:De.a.string,title:De.a.string,name:De.a.string,diagram:De.a.object,selections:De.a.array,defaultIcon:De.a.string,execCommand:De.a.func},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-contextual-line-dropdown {\n  background: #fff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  padding: 5px 5px;\n  width: auto;\n  height: auto;\n}\n.lake-diagram-contextual-line-dropdown .ant-btn {\n  border: none;\n  background: none;\n  padding: 0 6px;\n  height: 32px;\n  min-width: 32px;\n  margin: 0 2px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  outline: none;\n  color: #262626;\n}\n.lake-diagram-contextual-line-dropdown .ant-btn[disabled] {\n  color: #BFBFBF;\n  background: none;\n}\n.lake-diagram-contextual-line-dropdown .ant-btn:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-diagram-contextual-line-dropdown .ant-btn:focus {\n  color: #595959;\n}\n.lake-diagram-contextual-line-dropdown .ant-btn::after {\n  display: none;\n}\n.lake-diagram-contextual-line-dropdown .ant-btn .lake-icon {\n  font-size: 18px;\n}\n.lake-diagram-contextual-line-dropdown .ant-btn.active {\n  background: #e8e8e8;\n  color: #595959;\n}\n.lake-diagram-contextual-line-dropdown-row {\n  display: flex;\n}\n.lake-diagram-board-contextual-toolbar-separator {\n  height: 1px;\n  background: #e8e8e8;\n  width: 100%;\n  margin-top: 5px;\n  margin-bottom: 5px;\n}\n.lake-diagram-board-contextual-line-width-control {\n  max-width: 70px;\n  margin-right: 5px;\n}\n.lake-diagram-board-contextual-line-width-control .lake-diagram-board-contextual-line-width-inner {\n  border: none;\n}\n.lake-diagram-board-contextual-line-width-control .ant-input-number {\n  width: 100%;\n  border: 1px solid #e8e8e8;\n  border-radius: 5px;\n}\n.lake-diagram-board-contextual-line-color {\n  border: 1px solid #e8e8e8;\n  border-radius: 4px;\n  width: 32px;\n  min-height: 32px;\n  overflow: hidden;\n  background: #fff;\n  cursor: pointer;\n}\n");var Zh=function(e){var t=e.diagram,n=e.selections,r=e.strokeProps,a=e.setStrokeProps,o=Object(Pe.useState)(r.style?"dash":"none"),i=M()(o,2),c=i[0],l=i[1],s=function(t){var o=Math.min(Math.max(t,1),10);o!==r.width&&(a(Kh(Kh({},r),{},{width:o})),e.execCommand("stroke.width",o,n))},u=function(e){s(e.target.value)},d=function(t){e.onSelect&&e.onSelect(t)},f=function(t){e.execCommand("stroke.style",t,n)},p=function(t){e.execCommand("shape",t,n)};return Ae.a.createElement("div",{className:Ne()("lake-diagram-contextual-line-dropdown",e.className),"data-lake_prevent_click_unselect":"true"},Ae.a.createElement("div",{className:"lake-diagram-contextual-line-dropdown-row"},Ae.a.createElement(q.a,{icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-contextual-straight-line"}),className:Ne()({active:"straight"===e.currShape}),onClick:function(t){t.preventDefault(),p("straight"),e.setCurrShape("straight")}}),Ae.a.createElement(q.a,{icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-contextual-curve-line"}),target:"dash",className:Ne()({active:"curve"===e.currShape}),onClick:function(t){t.preventDefault(),p("curve"),e.setCurrShape("curve")}}),Ae.a.createElement(q.a,{icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-contextual-elbow-line"}),target:"dash",className:Ne()({active:"elbow"===e.currShape}),onClick:function(t){t.preventDefault(),p("elbow"),e.setCurrShape("elbow")}})),Ae.a.createElement("div",{className:"lake-diagram-board-contextual-toolbar-separator"}),Ae.a.createElement("div",{className:"lake-diagram-contextual-line-dropdown-row"},Ae.a.createElement(q.a,{icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-contextual-stroke-none"}),className:Ne()({active:"none"===c}),onClick:function(e){e.preventDefault(),l("none"),f(null)}}),Ae.a.createElement(q.a,{icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-contextual-stroke-dash"}),target:"dash",className:Ne()({active:"dash"===c}),onClick:function(e){e.preventDefault(),l("dash"),f("dash")}})),Ae.a.createElement("div",{className:"lake-diagram-board-contextual-toolbar-separator"}),Ae.a.createElement("div",{className:"lake-diagram-contextual-line-dropdown-row"},Ae.a.createElement("div",{className:"lake-diagram-board-contextual-line-width-control"},Ae.a.createElement("div",{className:"lake-diagram-board-contextual-line-width-inner"},Ae.a.createElement(Ip,{min:1,max:10,value:r.width,onBlur:u,onPressEnter:u,onStep:s}))),Ae.a.createElement("div",{className:"lake-diagram-board-contextual-line-color"},Ae.a.createElement(Yp,{color:r.color,defaultColor:e.defaultColor,onSelect:d,onClear:function(){return d("rgba(0, 0, 0, 0)")},palette:t&&t.palette,transSVG:Ae.a.createElement(Th,{type:"context-cb-trans"})},Ae.a.createElement("div",{className:Ne()("lake-diagram-stroke"),style:{backgroundColor:r.color}})))))};Zh.propTypes={title:De.a.string,colorBadge:De.a.object,name:De.a.string,className:De.a.string,diagram:De.a.object,onSelect:De.a.func,defaultColor:De.a.string,strokeProps:De.a.object,selections:De.a.array,setStrokeProps:De.a.func,currShape:De.a.string,setCurrShape:De.a.func,execCommand:De.a.func};var $h=function(e){var t=e.name,n=e.selections,r=Object(Pe.useState)({}),a=M()(r,2),o=a[0],i=a[1],c=Object(Pe.useState)(e.defaultShape),l=M()(c,2),s=l[0],u=l[1];return Object(Pe.useEffect)((function(){return n&&n.length>0&&(i(n[0].stroke),u(n[0].shape)),function(){}}),[]),Ae.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Ae.a.createElement(V.a,{overlay:Ae.a.createElement(Zh,je()({setStrokeProps:i,strokeProps:o,onSelect:function(t){i(Kh(Kh({},o),{},{color:t})),e.execCommand("stroke.color",t,n)},currShape:s,setCurrShape:u},e)),placement:"bottomCenter",trigger:"click"},Ae.a.createElement(H.a,{placement:"top",title:e.title},Ae.a.createElement(q.a,{"data-testid":t},Ae.a.createElement("span",{className:"lake-icon lake-icon-contextual-".concat(s,"-line")})))))};$h.defaultProps={defaultShape:"straight"},$h.propTypes={title:De.a.string,name:De.a.string,diagram:De.a.object,selections:De.a.array,defaultShape:De.a.string,execCommand:De.a.func},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-contextual-layout-current {\n  width: 100%;\n  height: 30px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  border-radius: 4px;\n}\n.lake-diagram-contextual-layout-current .lake-diagram-layout-thumb:hover {\n  background-color: #f5f5f5;\n}\n.lake-diagram-contextual-command {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.lake-diagram-contextual-command > * {\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n}\n.lake-diagam-multi-properties-selection {\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/8c02d0c7-9749-4078-b865-6084959df78f.svg);\n}\n.lake-diagram-contextual-mindmap-dropdown {\n  background: #fff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  padding: 5px 5px;\n  width: auto;\n  height: auto;\n}\n.lake-diagram-contextual-mindmap-dropdown .mindmap-btn {\n  padding: 0;\n  width: 32px;\n  line-height: 30px;\n  margin-left: 3px;\n  margin-right: 3px;\n  border: none;\n  background: none;\n}\n.lake-diagram-contextual-mindmap-dropdown .mindmap-btn[disabled] {\n  border-color: #e8e8e8;\n}\n.lake-diagram-contextual-mindmap-dropdown .mindmap-btn.active {\n  background: #f5f5f5;\n}\n.lake-diagram-contextual-mindmap-dropdown .mindmap-btn:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-diagram-contextual-mindmap-dropdown .mindmap-btn::after {\n  display: none;\n}\n.lake-diagram-contextual-mindmap-dropdown .lake-diagram-contextual-mindmap-dropdown-row {\n  display: flex;\n}\n.lake-diagram-board-contextual-mindmap-width-control {\n  max-width: 70px;\n  margin-right: 5px;\n}\n.lake-diagram-board-contextual-mindmap-width-control .lake-diagram-board-contextual-mindmap-width-inner {\n  border: none;\n}\n.lake-diagram-board-contextual-mindmap-width-control .lake-diagram-board-contextual-mindmap-width-inner .ant-input-number {\n  width: 100%;\n  border: 1px solid #e8e8e8;\n  border-radius: 5px;\n}\n.lake-diagram-board-contextual-mindmap-width-control .lake-diagram-board-contextual-mindmap-width-inner .ant-input-number-focused {\n  box-shadow: none;\n}\n.lake-diagram-board-contextual-mindmap-color {\n  border: 1px solid #e8e8e8;\n  border-radius: 4px;\n  width: 32px;\n  max-height: 32px;\n  overflow: hidden;\n  background: #fff;\n  cursor: pointer;\n}\n");var Qh=function(e){var t=e.layouts,n=e.selectedKey,r=e.setVisible,a=e.visible;return Ae.a.createElement("div",{className:"lake-diagram-layout-dropdown","data-lake_prevent_click_unselect":"true"},t.map((function(t){var o=t.key;return Ae.a.createElement("div",{key:o,"data-lake_prevent_click_unselect":"true",className:Ne()("lake-diagram-layout-thumb",o,{selected:o===n}),onClick:function(){r(!a),e.onSelect(o)}})})))};Qh.propTypes={title:De.a.string,diagram:De.a.object,layouts:De.a.array,selectedKey:De.a.string,setVisible:De.a.func,onSelect:De.a.func,visible:De.a.bool};var Jh=function(e){var t=e.name,n=e.selections.filter((function(e){return e.isMindmap})),r=Ri(n,Xf),a=n.map((function(e){return e.upDirection})),o=n.map((function(e){return e.upLayoutType})),i=Object(Pe.useState)(!1),c=M()(i,2),l=c[0],s=c[1],u=Si.filter((function(e){if(n.every((function(e){return e.isStem})))return!0;var t=e.key.split("-")[0],r=o.some((function(e){return Ai(e,t)})),i=!e.directions.every((function(e){return a.every((function(t){return Pi(t,e)}))}));return!r&&!i}));function d(e){0!==u.length&&s(e)}return Ae.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Ae.a.createElement(V.a,{overlay:Ae.a.createElement(Qh,je()({setVisible:d,selectedKey:r,layouts:u,onSelect:function(t){e.execCommand("layout",ji(t),n)},visible:l},e)),placement:"bottomCenter",onClick:function(){return d(!l)},visible:l,onVisibleChange:function(e){return d(e)},trigger:"click"},Ae.a.createElement(H.a,{placement:"top",title:e.title},Ae.a.createElement("div",{className:Ne()("lake-diagram-contextual-layout-current"),"data-testid":t},Ae.a.createElement("div",{className:Ne()("lake-diagram-layout-thumb ".concat(r),{"lake-diagam-multi-properties-selection":"multiValue"===r})})))))};function em(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?em(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):em(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Jh.defaultProps={selections:[]},Jh.propTypes={title:De.a.string,className:De.a.string,diagram:De.a.object,selections:De.a.array,execCommand:De.a.func,name:De.a.string};var nm=function(e){var t=e.diagram,n=e.selections,r=e.treeEdgeProps,a=e.setTreeEdgeProps,o=e.containRoot,i=et(n.map((function(e){return e.stem}))),c=Object(Pe.useState)(""),l=M()(c,2),s=l[0],u=l[1],d=function(t){var o=Math.min(Math.max(t,1),5);o!==r.width&&(a(tm(tm({},r),{},{"stroke-width":o})),e.execCommand("treeEdge.stroke-width",o,n))},f=function(e){d(e.target.value)},p=function(t){e.onSelect&&e.onSelect(t)},h=function(t){e.execCommand("treeEdge.shape",t,i),e.setTreeRootProps({shape:t?"polyline":"none"})};return Object(Pe.useEffect)((function(){return i.length>0&&u(i[0].treeEdge.shape||"none"),function(){}}),[]),Ae.a.createElement("div",{className:Ne()("lake-diagram-contextual-mindmap-dropdown",e.className),"data-lake_prevent_click_unselect":"true"},Ae.a.createElement("div",{className:"lake-diagram-contextual-mindmap-dropdown-row"},Ae.a.createElement(q.a,{icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-mind-tree-edge-none"}),className:Ne()("mindmap-btn",{active:"none"===s}),onClick:function(e){e.preventDefault(),u("none"),h(null)}}),Ae.a.createElement(q.a,{icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-mind-tree-edge-polyline"}),target:"dash",className:Ne()("mindmap-btn",{active:"polyline"===s}),onClick:function(e){e.preventDefault(),u("polyline"),h("polyline")}})),!o&&Ae.a.createElement(Ae.a.Fragment,null,Ae.a.createElement("div",{className:"lake-diagram-board-contextual-toolbar-separator"}),Ae.a.createElement("div",{className:"lake-diagram-contextual-mindmap-dropdown-row"},Ae.a.createElement("div",{className:"lake-diagram-board-contextual-mindmap-width-control"},Ae.a.createElement("div",{className:"lake-diagram-board-contextual-mindmap-width-inner"},Ae.a.createElement(Ip,{min:1,max:5,value:r["stroke-width"]||e.defaultStrokeWidth,onBlur:f,onPressEnter:f,onStep:d}))),Ae.a.createElement("div",{className:"lake-diagram-board-contextual-mindmap-color"},Ae.a.createElement(Yp,{color:r.stroke,defaultColor:e.defaultColor,onSelect:p,onClear:function(){return p("rgba(0, 0, 0, 0)")},palette:t&&t.palette,transSVG:Ae.a.createElement(Th,{type:"context-cb-trans"})},Ae.a.createElement("div",{className:Ne()("lake-diagram-stroke"),style:{backgroundColor:r.stroke}}))))))};nm.defaultProps={defaultStrokeWidth:3},nm.propTypes={title:De.a.string,colorBadge:De.a.object,containRoot:De.a.bool,name:De.a.string,className:De.a.string,diagram:De.a.object,onSelect:De.a.func,defaultColor:De.a.string,treeEdgeProps:De.a.object,selections:De.a.array,setTreeEdgeProps:De.a.func,defaultStrokeWidth:De.a.number,execCommand:De.a.func,setTreeRootProps:De.a.func};var rm=function(e){var t=e.name,n=e.selections,r=Object(Pe.useState)({}),a=M()(r,2),o=a[0],i=a[1],c=Object(Pe.useState)({}),l=M()(c,2),s=l[0],u=l[1],d=Object(Pe.useState)(!1),f=M()(d,2),p=f[0],h=f[1],m=n.some((function(e){return e.isStem}));return Object(Pe.useEffect)((function(){if(n&&n.length>0){var e=n[0];i(e.treeEdge),u(e.stem.treeEdge)}return function(){}}),[]),Ae.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Ae.a.createElement(V.a,{visible:p,onVisibleChange:function(e){h(e)},overlay:Ae.a.createElement(nm,je()({setTreeEdgeProps:i,setTreeRootProps:u,treeEdgeProps:o,onSelect:function(t){i(tm(tm({},o),{},{stroke:t})),e.execCommand("treeEdge.stroke",t,n)},containRoot:m},e)),placement:"bottomCenter",trigger:"click"},Ae.a.createElement(H.a,{placement:"top",title:e.title},Ae.a.createElement(q.a,{"data-testid":t},Ae.a.createElement("span",{className:"lake-icon lake-icon-mind-tree-edge-".concat(s.shape?s.shape:"none")})))))};rm.defaultProps={defaultColor:"transparent"},rm.propTypes={title:De.a.string,name:De.a.string,diagram:De.a.object,selections:De.a.array,currColor:De.a.string,defaultColor:De.a.string,execCommand:De.a.func};var am=function(e){var t=function(t){e.execCommand("border.shape",t,e.selections),e.setShape(t)};return Ae.a.createElement("div",{className:Ne()("lake-diagram-contextual-mindmap-dropdown",e.className),"data-lake_prevent_click_unselect":"true"},Ae.a.createElement("div",{className:"lake-diagram-contextual-mindmap-dropdown-row"},Ae.a.createElement(q.a,{icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-mindmap-line"}),className:Ne()("mindmap-btn",{active:"line"===e.shape}),onClick:function(e){e.preventDefault(),t("line")}}),Ae.a.createElement(q.a,{icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-mindmap-rect"}),className:Ne()("mindmap-btn",{active:"rect"===e.shape}),onClick:function(e){e.preventDefault(),t("rect")}}),Ae.a.createElement(q.a,{icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-mindmap-capsule"}),className:Ne()("mindmap-btn",{active:"capsule"===e.shape}),onClick:function(e){e.preventDefault(),t("capsule")}})))};am.propTypes={title:De.a.string,className:De.a.string,borderProps:De.a.object,selections:De.a.array,execCommand:De.a.func,shape:De.a.string,setShape:De.a.func,isLine:De.a.bool};var om=function(e){var t=e.name,n=e.selections,r=Object(Pe.useState)(e.get(n,"border.shape","line")||null),a=M()(r,2),o=a[0],i=a[1];return Ae.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Ae.a.createElement(V.a,{overlay:Ae.a.createElement(am,je()({shape:o,isLine:"line"===o,setShape:i},e)),placement:"bottomCenter",trigger:"click"},Ae.a.createElement(H.a,{placement:"top",title:e.title},Ae.a.createElement(q.a,{"data-testid":t},Ae.a.createElement("div",{className:Ne()("lake-diagram-contextual-layout-current",{"lake-diagam-multi-properties-selection":"multiValue"===o})},Ae.a.createElement("span",{className:"lake-icon lake-icon-mindmap-".concat(o)}))))))};function im(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?im(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):im(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}om.propTypes={title:De.a.string,name:De.a.string,diagram:De.a.object,selections:De.a.array,defaultShape:De.a.string,get:De.a.func};var lm=function(e){var t=e.diagram,n=e.selections,r=e.strokeProps,a=e.setStrokeProps,o=function(t){var o=Math.min(Math.max(t,1),10);o!==r.strokeWidth&&(a(cm(cm({},r),{},{strokeWidth:o})),e.execCommand("border.stroke-width",o,n))},i=function(e){o(e.target.value)},c=function(t){e.onSelect&&e.onSelect(t)};return Ae.a.createElement("div",{className:Ne()("lake-diagram-contextual-mindmap-dropdown",e.className),"data-lake_prevent_click_unselect":"true"},Ae.a.createElement("div",{className:"lake-diagram-contextual-mindmap-dropdown-row"},Ae.a.createElement("div",{className:"lake-diagram-board-contextual-mindmap-width-control"},Ae.a.createElement("div",{className:"lake-diagram-board-contextual-mindmap-width-inner"},Ae.a.createElement(Ip,{min:1,max:10,value:r.strokeWidth,onBlur:i,onPressEnter:i,onStep:o}))),Ae.a.createElement("div",{className:"lake-diagram-board-contextual-mindmap-color"},Ae.a.createElement(Yp,{color:r.strokeColor,defaultColor:e.defaultColor,onSelect:c,onClear:function(){return c("rgba(0, 0, 0, 0)")},palette:t&&t.palette,transSVG:Ae.a.createElement(Th,{type:"context-cb-trans"})},Ae.a.createElement(H.a,{placement:"top",title:$t("边框颜色")},Ae.a.createElement("div",{className:Ne()("lake-diagram-stroke"),style:{backgroundColor:r.strokeColor}}))))))};lm.propTypes={title:De.a.string,colorBadge:De.a.object,name:De.a.string,className:De.a.string,diagram:De.a.object,onSelect:De.a.func,defaultColor:De.a.string,strokeProps:De.a.object,selections:De.a.array,setStrokeProps:De.a.func,execCommand:De.a.func};var sm=function(e){var t=e.name,n=e.selections,r=Object(Pe.useState)({}),a=M()(r,2),o=a[0],i=a[1],c=Object(Pe.useState)(!1),l=M()(c,2),s=l[0],u=l[1],d=Object(Pe.useState)(!0),f=M()(d,2),p=f[0],h=f[1];return Object(Pe.useEffect)((function(){if(n&&n.length>0){var t=n.filter((function(e){return e.canStroke()&&e.isMindmap})),r=e.get(t,"border.stroke-width"),a=e.get(n,"border.shape","line")||null,o=e.get(n,"border.stroke","transparent")||null;i({strokeWidth:r,shape:a,strokeColor:o}),h("line"===a)}return function(){}}),[]),Ae.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Ae.a.createElement(V.a,{visible:s,onVisibleChange:function(e){u(e)},overlay:Ae.a.createElement(lm,je()({setStrokeProps:i,strokeProps:o,onSelect:function(t){i(cm(cm({},o),{},{strokeColor:t})),e.execCommand("border.stroke",t,n)},isLine:p},e)),placement:"bottomCenter",trigger:"click"},Ae.a.createElement(H.a,{placement:"top",title:e.title},Ae.a.createElement(q.a,{"data-testid":t},Ae.a.createElement(Th,{type:"stroke-color",stroke:o.strokeColor})))))};sm.defaultProps={defaultColor:"transparent"},sm.propTypes={title:De.a.string,name:De.a.string,diagram:De.a.object,selections:De.a.array,currColor:De.a.string,defaultColor:De.a.string,get:De.a.func,execCommand:De.a.func};var um=function(e){var t=e.name,n=e.diagram,r=e.title,a=e.disabled;return Ae.a.createElement("div",{className:"lake-diagram-contextual-command"},Ae.a.createElement(H.a,{disabled:a,placement:"top",title:r},Ae.a.createElement(q.a,{"data-testid":t,icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-contextual-group"}),onClick:function(e){e.preventDefault(),e.stopPropagation(),n.command.execute("Group")}})))};um.propTypes={title:De.a.string,name:De.a.string,execCommand:De.a.func,diagram:De.a.object,disabled:De.a.oneOfType([De.a.bool,De.a.func])};var dm=function(e){var t=e.name,n=e.diagram,r=e.title,a=e.disabled;return Ae.a.createElement("div",{className:"lake-diagram-contextual-command"},Ae.a.createElement(H.a,{disabled:a,placement:"top",title:r},Ae.a.createElement(q.a,{"data-testid":t,icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-contextual-ungroup"}),onClick:function(e){e.preventDefault(),e.stopPropagation(),n.command.execute("UnGroup")}})))};dm.propTypes={title:De.a.string,name:De.a.string,execCommand:De.a.func,diagram:De.a.object,disabled:De.a.oneOfType([De.a.bool,De.a.func])},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-contextual-align-dropdown {\n  background: #fff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  padding: 5px 5px;\n  width: auto;\n  height: auto;\n}\n.lake-diagram-contextual-align-dropdown .ant-btn {\n  border: none;\n  background: none;\n  padding: 0 6px;\n  height: 32px;\n  min-width: 32px;\n  margin: 0 2px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  outline: none;\n}\n.lake-diagram-contextual-align-dropdown .ant-btn[disabled] {\n  color: #BFBFBF;\n  background: none;\n}\n.lake-diagram-contextual-align-dropdown .ant-btn:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-diagram-contextual-align-dropdown .ant-btn:focus {\n  color: #595959;\n}\n.lake-diagram-contextual-align-dropdown .ant-btn::after {\n  display: none;\n}\n.lake-diagram-contextual-align-dropdown .ant-btn .lake-icon {\n  color: #262626;\n  font-size: 18px;\n}\n.lake-diagram-contextual-align-dropdown .ant-btn.active {\n  background: #e8e8e8;\n  color: #595959;\n}\n.lake-diagram-contextual-align-dropdown .lake-button-active {\n  background-color: #e8e8e8;\n}\n.lake-diagram-contextual-align-dropdown p {\n  margin-bottom: 0;\n}\n");var fm=function(e){var t=e.diagram;return Ae.a.createElement("div",{className:"lake-diagram-contextual-align-dropdown","data-lake_prevent_click_unselect":"true"},Ae.a.createElement("p",null,t.command.enable("AlignLeft")&&Ae.a.createElement(q.a,{icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-align-left"}),onClick:function(){return t.command.execute("AlignLeft")}}),t.command.enable("AlignHCenter")&&Ae.a.createElement(q.a,{icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-align-h-center"}),onClick:function(){return t.command.execute("AlignHCenter")}}),t.command.enable("AlignRight")&&Ae.a.createElement(q.a,{icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-align-right"}),onClick:function(){return t.command.execute("AlignRight")}}),t.command.enable("DistributeHorizontally")&&Ae.a.createElement(q.a,{icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-distribute-horizontally"}),onClick:function(){return t.command.execute("DistributeHorizontally")}})),Ae.a.createElement("p",null,t.command.enable("AlignTop")&&Ae.a.createElement(q.a,{icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-align-top"}),onClick:function(){return t.command.execute("AlignTop")}}),t.command.enable("AlignVCenter")&&Ae.a.createElement(q.a,{icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-align-v-center"}),onClick:function(){return t.command.execute("AlignVCenter")}}),t.command.enable("AlignBottom")&&Ae.a.createElement(q.a,{icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-align-bottom"}),onClick:function(){return t.command.execute("AlignBottom")}}),t.command.enable("DistributeVertically")&&Ae.a.createElement(q.a,{icon:Ae.a.createElement("span",{className:"lake-icon lake-icon-distribute-vertically"}),onClick:function(){return t.command.execute("DistributeVertically")}})))};fm.defaultProps={diagram:null},fm.propTypes={diagram:De.a.object};var pm=function(e){var t=e.name,n=Object(Pe.useState)(!1),r=M()(n,2),a=r[0],o=r[1];return Ae.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},Ae.a.createElement(V.a,{trigger:"click",visible:a,onVisibleChange:function(e){o(e)},overlay:Ae.a.createElement(fm,e)},Ae.a.createElement(H.a,{placement:"top",title:e.title},Ae.a.createElement(q.a,{"data-testid":t},Ae.a.createElement("span",{className:"lake-icon lake-icon-contextual-align"})))))};function hm(e){var t=e.coord,n=e.overlayClassName,r=Object(Pe.useRef)();if(t){var a="lake-prevent-card-activated lake-diagram-prevent-mouse-select lake-diagram-prevent-mouseleave-reset-focus-point";return Ae.a.createElement(X.a,je()({},e,{getPopupContainer:function(){return e.getPopupContainer?e.getPopupContainer():document.querySelector(".yuque-sdk-extra-container")||e.diagram.container},visible:!0,overlayClassName:n?"".concat(n," ").concat(a):a,"data-lake_prevent_click_unselect":!0}),Ae.a.createElement("div",{ref:r,"data-lake_prevent_click_unselect":"true",style:{position:"absolute",left:"".concat(t[0],"px"),top:"".concat(t[1]-16,"px"),pointerEvents:"none",width:"".concat(e.width,"px"),height:"".concat(e.height+32,"px")}}))}return Ae.a.createElement("span",{ref:r})}function mm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mm(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vm(e){var t=e.diagram;switch(e.type){case"separator":default:return Ae.a.createElement("div",{className:"lake-diagram-board-contextual-vertical-separator"});case"custom":return Ae.a.createElement(e.custom,gm(gm({},e),{},{execCommand:function(e,n,r){t.command.execute("Update",{id:r,model:ut(e,n),autoSelect:!1})},get:function(e,t,n){var r=n;if(e.length>0)if((r=e.map((function(e){return t.split(".").reduce((function(e,t){return e?e.isCell&&e.get(t)||e[t]:e}),e)}))).every((function(e){return e===r[0]})))r=r[0];else{if(!r.every((function(e){return"number"==typeof e})))return"multiValue";r.sort(),r=r[r.length-1]}return r}}))}}function ym(e){var t=e.diagram,n=e.onProperties,r=e.mini,a=Object(Pe.useState)(null),o=M()(a,2),i=o[0],c=o[1],l=Object(Pe.useState)(null),s=M()(l,2),u=s[0],d=s[1],f=Object(Pe.useState)(null),p=M()(f,2),h=p[0],m=p[1],g=Object(Pe.useState)(0),v=M()(g,2),y=v[0],b=v[1],k=Object(Pe.useState)(0),w=M()(k,2),x=w[0],_=w[1];function E(){return function(e,t,n){var r=e.length,a=[];if(0===r)return[];if(function(e){return e.every((function(e){return e.isMindmap}))||e.every((function(e){return e.isGeometry}))||e.every((function(e){return e.isText}))||e.every((function(e){return e.isLine}))||e.every((function(e){return e.isGroup}))}(e))switch(e[0].type){case"line":a=[{name:"contextual-line-style",type:"custom",title:$t("线条样式"),custom:$h},{type:"separator"},{name:"contextual-line-source",type:"custom",title:$t("起点"),custom:function(e){return Ae.a.createElement(Gh,je()({},e,{type:"source"}))}},{name:"contextual-line-target",type:"custom",title:$t("终点"),custom:function(e){return Ae.a.createElement(Gh,je()({},e,{type:"target"}))}},{type:"separator"},{name:"font-style",type:"custom",title:$t("文字样式"),custom:Wh},{type:"separator",noMini:!0},{name:"properties",type:"custom",custom:Lh,title:$t("打开设置"),noMini:!0}];break;case"mindmap":a=[{name:"contextual-mindmap-layout",type:"custom",title:$t("结构"),custom:Jh,disabled:!1},{name:"contextual-mindmap-tree-edge",type:"custom",title:$t("分支"),custom:rm,disabled:!1},{type:"separator"},{name:"contextual-mindmap-shape",type:"custom",title:$t("节点形状"),custom:om,disabled:!1},{name:"contextual-mindmap-fill",type:"custom",title:$t("节点填充"),custom:Ih,disabled:function(e){var t=e.selector.selections.filter((function(e){return e.canFill()}));return 0===t.length||t.some((function(e){return e.locked}))}},{name:"contextual-mindmap-stroke",type:"custom",title:$t("节点描边"),custom:sm,disabled:function(e){var t=e.selector.selections.filter((function(e){return e.canStroke()}));return 0===t.length||t.some((function(e){return e.locked}))}},{type:"separator"},{name:"font-style",type:"custom",title:$t("文字样式"),custom:Wh,disabled:!1},{name:"add-link",type:"custom",custom:Nh,title:$t("插入链接"),disabled:!1},{type:"separator",noMini:!0},{name:"properties",type:"custom",custom:Lh,title:$t("打开设置"),noMini:!0}];break;case"text":a=[{name:"contextual-text-size",type:"custom",custom:jh,title:$t("字号"),disabled:!1},{type:"separator"},{name:"contextual-text-color",type:"custom",title:$t("字色"),disabled:!1,custom:Dh},{name:"contextual-text-alignment",title:$t("对齐"),type:"custom",custom:Ah,disabled:!1},{name:"contextual-text-bold",type:"custom",custom:Mh,title:$t("加粗"),disabled:!1},{name:"add-link",type:"separator"},{name:"add-link",type:"custom",custom:Nh,title:$t("插入链接"),hotkey:R.ua.macos?"⌘+K":"Ctrl+K"},{type:"separator",noMini:!0},{name:"properties",type:"custom",custom:Lh,title:$t("打开设置"),noMini:!0}];break;case"geometry":a=[{name:"contextual-geometry-shape",type:"custom",custom:zh,title:$t("图形"),disabled:!1},{type:"separator"},{name:"contextual-geometry-fill-color",type:"custom",title:$t("填充"),custom:Ih,disabled:function(e){var t=e.selector.selections.filter((function(e){return e.canFill()}));return 0===t.length||t.some((function(e){return e.locked}))}},{name:"contextual-geometry-stroke-color",type:"custom",title:$t("描边"),disabled:!1,custom:qh},{type:"separator"},{name:"font-style",type:"custom",title:$t("文字样式"),custom:Wh,disabled:!1},{name:"add-link",type:"custom",custom:Nh,title:$t("插入链接"),hotkey:R.ua.macos?"⌘+K":"Ctrl+K"},{type:"separator",noMini:!0},{name:"properties",type:"custom",custom:Lh,title:$t("打开设置"),noMini:!0}];break;case"group":a=1===e.length?[{name:"ungroup",type:"custom",custom:dm,title:$t("取消成组")},{type:"separator",noMini:!0},{name:"properties",type:"custom",custom:Lh,title:$t("打开设置"),noMini:!0}]:[];break;default:a=[]}if(e.filter((function(e){return e.isStem})).length>1){var o,i=0===a.length?[{name:"arrangement",type:"custom",custom:pm,title:$t("排列")},{name:"group",type:"custom",custom:um,title:$t("成组")},{type:"separator",noMini:!0},{name:"properties",type:"custom",custom:Lh,title:$t("打开设置"),noMini:!0}]:[{name:"arrangement",type:"custom",custom:pm,title:$t("排列")},{name:"group",type:"custom",custom:um,title:$t("成组")},{type:"separator",noMini:!0}];(o=a).splice.apply(o,[a.length-1,0].concat(z()(i)))}return r>1&&(a=a.filter((function(e){return"add-link"!==e.name}))),(a=a.filter((function(t){return!(n&&t.noMini||("function"==typeof t.disabled?t.disabled(e[0].diagram):t.disabled))}))).forEach((function(e){"properties"===e.name&&(e.onProperties=t)})),a}(t.selector.selections,n,r)}Object(Pe.useEffect)((function(){return m(t.viewport.invertViewport([0,0])),function(){}}),[]),Object(Pe.useEffect)((function(){m(t.viewport.invertViewport([0,0]));var e=se()((function(){if(t.signal.addVertexPanelVisibility)return c(null),void d(null);var e=t.selector.selections,n=E();e&&c(n),1===n.length||n.length>1&&!t.signal.mouseMultiSelecting?function(e){d(null);var n=function(e,t){var n=Pl(e),r=n.minX,a=n.minY,o=n.maxX,i=n.maxY,c=t.viewport.convertViewport([r,a]),l=t.viewport.convertViewport([o,i]),s=l[0]-c[0],u=l[1]-c[1];return{minX:c[0],minY:c[1],width:s,height:u}}(e,t),r=n.minX,a=n.minY,o=n.width,i=n.height;b(i),_(o),d([r,a])}(e):d(null)}),20),n=function(){c(null),d(null)},r=se()((function(){var e=E();c(e)}),16),a=function(){var n=t.viewport.invertViewport([0,0]);h&&pt(h[0],n[0],.001)&&pt(h[1],n[1],.001)||(c(null),d(null),e())},o=function(e){e.isModelChange&&r()};return t.on("afterselect",e),t.on("cell:dragstart",n),t.on("vertexresizestart",n),t.on("endpointcontrolpointmousedown",n),t.on("aftercommandexecute",o),t.on("afterviewportchange",a),function(){t.off("afterselect",e),t.off("cell:dragstart",n),t.off("vertexresizestart",n),t.off("endpointcontrolpointmousedown",n),t.off("aftercommandexecute",o),t.off("afterviewportchange",a)}}),[t,i]);var C=Ae.a.createElement("div",{className:"lake-diagram-board-contextual-toolbar"},i&&i.map((function(e,n){return Ae.a.createElement(vm,je()({key:n,diagram:t,selections:t.selector.selections},e))})));return Ae.a.createElement("div",{"data-testid":"board-contextual-toolbar"},Ae.a.createElement(hm,{height:y,width:x,content:C,visible:!0,overlayClassName:"lake-diagram-board-contextual-toolbar-popover",diagram:t,coord:u}))}pm.defaultProps={title:"",name:"",diagram:null},pm.propTypes={title:De.a.string,name:De.a.string,diagram:De.a.object},hm.defaultProps={coord:null,diagram:null,onClose:function(){}},hm.propTypes={coord:De.a.array,diagram:De.a.object,onClose:De.a.func,overlayClassName:De.a.string,getPopupContainer:De.a.object,height:De.a.number,width:De.a.number},Fe("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-board-contextual-toolbar {\n  display: flex;\n  height: 40px;\n  flex-direction: row;\n  background: white;\n  box-shadow: 0 1px 2px -2px rgba(0, 0, 0, 0.08), 0 2px 6px 0 rgba(0, 0, 0, 0.04), 0 4px 8px 1px rgba(0, 0, 0, 0.02);\n  border: 1px solid #e9e9e9;\n  justify-content: center;\n  align-items: center;\n  padding: 0 6px;\n}\n.lake-diagram-board-contextual-toolbar-body {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-left: 4px;\n  margin-right: 4px;\n  height: 100%;\n  border-radius: 5px;\n}\n.lake-diagram-board-contextual-toolbar-popover .ant-popover-content {\n  min-width: auto;\n  width: auto;\n}\n.lake-diagram-board-contextual-toolbar-popover .ant-popover-content .ant-popover-arrow {\n  display: none;\n}\n.lake-diagram-board-contextual-toolbar-popover .ant-popover-content .ant-popover-inner {\n  background-color: inherit;\n  box-shadow: none;\n  border-radius: 0;\n  background-clip: none;\n}\n.lake-diagram-board-contextual-toolbar-popover .ant-popover-content .ant-popover-inner .ant-popover-inner-content {\n  padding: 0;\n}\n.lake-diagram-board-contextual-toolbar-popover .ant-btn::after {\n  display: none;\n}\n.lake-diagram-board-contextual-toolbar-popover .ant-btn.ant-dropdown-trigger:hover {\n  background: #f5f5f5;\n  border-radius: 2px;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button {\n  display: flex;\n  height: 32px;\n  line-height: 32px;\n  border-radius: 2px;\n  border: 1px solid transparent;\n  align-items: center;\n  transition: border 0.3s;\n  margin-right: 4px;\n  overflow: hidden;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button:hover {\n  border-color: #e8e8e8;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button:hover .ant-btn:first-child {\n  border-color: #e8e8e8;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn {\n  border-radius: 0;\n  transition: none;\n  margin-right: 0;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn:hover {\n  background: #f5f5f5;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn:first-child {\n  border-right: 1px solid transparent;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn:first-child:hover {\n  background: #f5f5f5;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn:first-child:not(:last-child) {\n  min-width: auto;\n  width: auto;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) {\n  min-width: auto;\n  width: 16px;\n  border: none;\n  background: none;\n  padding: 0;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  position: relative;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) .lake-icon {\n  color: #262626;\n  position: absolute;\n  right: 4px;\n  top: 14px;\n  width: 8px;\n  height: 8px;\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSI1IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgb3BhY2l0eT0iLjQ1Ij48cGF0aCBkPSJNMC0yaDh2OEgweiIvPjxwYXRoIGQ9Ik0uNTk2LjU1N2wzLjE1IDMuODIxYS4zMzIuMzMyIDAgMDAuNDk1IDBMNy40MDUuNTU3YS4zMzIuMzMyIDAgMDAtLjI0Ny0uNTUzSC44NDVjLS4yODggMC0uNDQuMzM5LS4yNDkuNTUzeiIgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPg==);\n  background-repeat: no-repeat;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) .lake-icon::before {\n  content: '';\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child):hover {\n  background: #e8e8e8;\n}\n.lake-diagram-contextual-command .ant-btn {\n  border: none;\n  background: none;\n  padding: 0 6px;\n  height: 32px;\n  min-width: 32px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  outline: none;\n  color: #262626;\n}\n.lake-diagram-contextual-command .ant-btn[disabled] {\n  color: #BFBFBF;\n  background: none;\n}\n.lake-diagram-contextual-command .ant-btn:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-diagram-contextual-command .ant-btn:focus {\n  color: #595959;\n}\n.lake-diagram-contextual-command .ant-btn::after {\n  display: none;\n}\n.lake-diagram-contextual-command .ant-btn .lake-icon {\n  margin-right: 0;\n  font-size: 18px;\n}\n.lake-diagram-contextual-command .ant-btn.active {\n  background: #e8e8e8;\n  color: #595959;\n}\n.lake-diagram-contextual-command .lake-button-active {\n  background-color: #e8e8e8;\n}\n.lake-diagram-contextual-button-popover {\n  padding-top: 0;\n}\n.lake-diagram-contextual-button-popover .ant-popover-content {\n  min-width: auto;\n  width: auto;\n}\n.lake-diagram-contextual-button-popover .ant-popover-content .ant-popover-arrow {\n  display: none;\n}\n.lake-diagram-contextual-button-popover .ant-popover-content .ant-popover-inner {\n  background-color: inherit;\n  box-shadow: none;\n  border-radius: 0;\n  background-clip: none;\n}\n.lake-diagram-contextual-button-popover .ant-popover-content .ant-popover-inner .ant-popover-inner-content {\n  padding: 0;\n  stroke: \"#e9e9e9\";\n  box-shadow: rgba(0, 0, 0, 0.08) 0 0 4px;\n}\n.lake-diagram-board-contextual-vertical-separator {\n  width: 1px;\n  height: 60%;\n  margin: 0 6px;\n  background: #e8e8e8;\n}\n"),vm.propTypes={type:De.a.string,curr:De.a.string,custom:De.a.func,diagram:De.a.object},ym.propTypes={className:De.a.string,position:De.a.string,items:De.a.array,domContainer:De.a.object,title:De.a.node,extra:De.a.node,execCommand:De.a.func,diagram:De.a.object,onProperties:De.a.func,mini:De.a.bool};var bm=Object.freeze({__proto__:null,ZoomTool:Qf,Toolbar:gp,ContextMenu:Ap,Properties:Rh,ContextualMenu:ym}),km=Object.freeze({__proto__:null});function wm(e){var t,n=e.diagram,r=e.readonly,a=Object(Pe.useState)(null),o=M()(a,2),i=o[0],c=o[1],l=Object(Pe.useState)(""),s=M()(l,2),u=s[0],d=s[1],f=Object(Pe.useState)(null),p=M()(f,2),h=p[0],m=p[1],g=Object(Pe.useRef)();return Object(Pe.useEffect)((function(){function e(e){var t=e.cell,n=t.getKeyShape().getBoundingClientRect();c(null),c([n.x+n.width,n.y+n.height/2]),m(t),d(t.note.content)}return n.on("opennote",e),function(){n.off("opennote",e)}}),[n,i,c,m,u]),Object(Pe.useEffect)((function(){setTimeout((function(){var e=document.querySelector("textarea.lake-diagram-note-area");if(e){var t=e.value.length;e.focus(),e.setSelectionRange(t,t)}}),16)}),[i,g.current,h]),t=r?Ae.a.createElement("div",{className:"lake-diagram-note-area"},u):Ae.a.createElement("textarea",{className:"lake-diagram-note-area",value:u,onChange:function(e){var t=e.target.value;d(t)},ref:g}),Ae.a.createElement(kp,{placement:"right",content:t,visible:!0,overlayClassName:"lake-diagram-note-popover",diagram:n,coord:i,onClose:function(){i&&h&&(m(null),c(null),h.note.content!==u&&n.command.execute("Update",{id:h,model:{note:u?{content:u}:null}}))}})}function xm(e){return Ae.a.createElement(wm,e)}function _m(e){return Ae.a.createElement(wm,je()({},e,{readonly:!0}))}Fe("/* stylelint-disable */\n.lake-diagram-note-popover {\n  z-index: 1033;\n}\n.lake-diagram-note-popover .lake-diagram-note-area {\n  font-size: 12px;\n  border: none;\n  resize: none;\n  outline: none;\n  box-shadow: none;\n  width: 294px;\n  height: 128px;\n  padding: 16px 18px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  word-break: break-word;\n  white-space: pre-wrap;\n}\n"),wm.defaultProps={diagram:null,readonly:!1},wm.propTypes={diagram:De.a.object,readonly:De.a.bool},xm.defaultProps={diagram:null},xm.propTypes={diagram:De.a.object},_m.defaultProps={diagram:null},_m.propTypes={diagram:De.a.object};var Em=Object.freeze({__proto__:null,Editor:xm,Reader:_m}),Cm=Object.freeze({__proto__:null,Properties:Gf,Note:Em,Toolbar:Nf,LinkEditor:zf,ShapeOverlay:Ff,Dropdown:Af,ZoomTool:Vf,ContextMenu:km,Board:bm}),Om={};function Sm(e,t){Om[e]=t}function Rm(e){return Om[e]}function jm(e){return Pm.apply(this,arguments)}function Pm(){return(Pm=ee()(ne.a.mark((function e(t){var n,r,a,o,i,c,l;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.arrayBuffer();case 3:return n=e.sent,e.next=6,crypto.subtle.digest("SHA-256",n);case 6:return r=e.sent,a=Array.from(new Uint8Array(r)),o=a.map((function(e){return e.toString(16).padStart(2,"0")})).join(""),e.abrupt("return",o);case 12:return e.prev=12,e.t0=e.catch(0),e.next=16,t.arrayBuffer();case 16:return i=e.sent,c=Array.from(new Uint8Array(i)),l=c.map((function(e){return e.toString(16).padStart(2,"0")})).join(""),e.abrupt("return",l.length>100&&l.substring(0,100));case 20:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function Am(e){return Tm.apply(this,arguments)}function Tm(){return(Tm=ee()(ne.a.mark((function e(t){var n,a,o,i,c,l,s,u,d,f;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.file,a=t.uploader,o=t.enable,i=t.callback,n){e.next=3;break}return e.abrupt("return");case 3:if(!n.type){e.next=7;break}if(c=n.type.split("/").pop(),r.EXTS.IMAGE_EXT.includes(c)){e.next=7;break}return e.abrupt("return");case 7:if(!o||o()){e.next=9;break}return e.abrupt("return");case 9:return l=URL.createObjectURL(n),e.next=12,jm(n);case 12:return s=e.sent,u=new Image,d={src:l,naturalWidth:void 0,naturalHeight:void 0,uploadInfo:{hash:s,fileName:n.name,fileType:n.type,fileSize:n.size,localTempSrc:l,state:0}},u.onload=function(){Object.assign(d,{naturalWidth:u.naturalWidth,naturalHeight:u.naturalHeight}),i&&i(d)},u.src=l,e.next=19,a.image(n);case 19:if(f=e.sent){e.next=23;break}return d.uploadInfo.state=-1,e.abrupt("return",d);case 23:return Sm(s,f),e.abrupt("return",d);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dm(e){if(e.image&&e.image.uploadInfo&&e.image.uploadInfo.hash){var t=Rm(e.image.uploadInfo.hash);t?(e.image.src=t,e.image.uploadInfo.state=2):e.image.uploadInfo.state=-2}}function Mm(e){e.body.forEach((function(e){Ue(e,(function(e){Dm(e)}))}))}function Nm(e){return Lm.apply(this,arguments)}function Lm(){return(Lm=ee()(ne.a.mark((function e(t){var n,r,a,o,i,c,l,s,u,d,f,p;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.model,r=t.diagram,a=t.uploader,n){e.next=3;break}return e.abrupt("return");case 3:if((o=n.image||n.sourceImage)&&o.src){e.next=6;break}return e.abrupt("return");case 6:if(i=n.id,c=o.src,l=o.uploadInfo,!c.startsWith("blob:")){e.next=24;break}return e.prev=10,e.next=13,fetch(c).then((function(e){return e.blob()}));case 13:return s=e.sent,u=new File([s],l&&"".concat(o.uploadInfo.fileName)),e.next=17,Am({file:u,uploader:a});case 17:d=e.sent,r&&!r.destroyed&&(f=r.find(i))&&f.updateModel({image:d}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(10),r&&!r.destroyed&&(p=r.find(i))&&p.model.image.src===c&&r.update(p,{image:null,sourceImage:n.image});case 24:case"end":return e.stop()}}),e,null,[[10,21]])})))).apply(this,arguments)}function Im(e){return e.command.enable("Collapse")?e.command.execute("Collapse"):e.command.enable("Expand")?e.command.execute("Expand"):void 0}function Bm(e){return e.command.enable("Collapse")||e.command.enable("Expand")}function zm(e){return e.command.enable("Expand")}function Fm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"curve-arrow",n=t.split("-"),r=M()(n,2),a=r[0],o=r[1],i=e.selector.selections;if(2===i.length&&i.every((function(e){return e.isMindmap}))){var c=e.add([{type:"line",source:{id:i[0].model.id},target:{id:i[1].model.id}}]),l=c[0].getPointAtLength(.5);return e.remove(c),e.command.execute("Add",{model:{type:"line",shape:a,source:{id:i[0].model.id},target:{id:i[1].model.id,marker:o},controlPoints:[[l.x,l.y]]}})}e.command.execute("BeginInsertLine",{shape:a,marker:o})}window.___lakeDiagramUplaodFileHashMap=Om;var Um=[{name:"save",title:$t("保存"),hotkey:R.ua.macos?"⌘+S":"Ctrl+S",icon:"save",disabled:!1,execCommand:function(){}},{name:"undo",title:$t("撤销"),hotkey:R.ua.macos?"⌘+Z":"Ctrl+Z",icon:"undo",disabled:function(e){return!e.command.enable("Undo")},execCommand:function(e){return e.command.execute("Undo")}},{name:"redo",title:$t("重做"),hotkey:R.ua.macos?"⌘+Shift+Z":"Ctrl+Shift+Z",icon:"redo",disabled:function(e){return!e.command.enable("Redo")},execCommand:function(e){return e.command.execute("Redo")}},{type:"separator"},{name:"beginInsertRoot",title:$t("插入主节点"),hotkey:(R.ua.macos,"Shift+Enter"),icon:"insert-root",disabled:function(e){return!e.command.enable("MindmapBeginInsertStem")},execCommand:function(e){return e.command.execute("MindmapBeginInsertStem")}},{name:"append",title:$t("插入同级"),hotkey:"Enter",icon:"insert-sibling",disabled:function(e){return!e.command.enable("MindmapAppendSibling")},execCommand:function(e){return e.command.execute("MindmapAppendSibling")}},{name:"appendChild",title:$t("插入子级"),hotkey:"Tab",icon:"insert-child",disabled:function(e){return!e.command.enable("MindmapAppendChild")},execCommand:function(e){return e.command.execute("MindmapAppendChild")}},{name:"insertLine",title:$t("线条"),hotkey:R.ua.macos?"⌘+L":"Ctrl+L",type:"dropdown",mode:"button",defaultKey:"curve-arrow",data:[{key:"curve",icon:"line-curve"},{key:"curve-arrow",icon:"line-curve-arrow"}],execCommand:function(e,t){return Fm(e,t)}},{name:"insertNote",title:$t("备注"),icon:"diagram-toolbar-note",disabled:function(e){return!e.command.enable("MindmapOpenNote")},execCommand:function(e){return e.command.execute("MindmapOpenNote")}},{name:"createLink",title:$t("插入链接"),hotkey:R.ua.macos?"⌘+K":"Ctrl+K",icon:"link",disabled:function(e){return!e.command.enable("CreateLink")},execCommand:function(e){return e.command.execute("CreateLink")}},{name:"insertImage",title:$t("插入图片"),type:"upload",icon:"image",accept:R.EXTS.IMAGE_EXT.map((function(e){return"."+e})).join(","),disabled:function(e){return!e.command.enable("MindmapAttachImage")&&!e.command.enable("MindmapInsertImage")},onChange:function(){}},{type:"separator"},{name:"collapseExpand",title:$t("折叠"),hotkey:R.ua.macos?"⌘+/":"Ctrl+/",icon:"collapse-node",disabled:function(e){return!Bm(e)},active:function(e){return zm(e)},execCommand:function(e){return Im(e)}}],Vm=Object.freeze({__proto__:null,uploadImage:Am,onBeforeSave:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(r){if(e.destroyed)r();else if(t.isCompleted())r();else{var a,o=Date.now();!n&&F.a.warning($t("图片上传中，请稍候")),Promise.resolve().then((function e(){t.isCompleted()||Date.now()-o>=72e4?(a&&clearTimeout(a),r()):a=setTimeout(e,6e3)}))}}))},processImageModel:Dm,processExportData:Mm,exportData:function(e){var t=e.export();return Mm(t),t},tryTransferBlobUrl:Nm,importData:function(e){var t=e.diagram,n=e.data,r=e.uploader;if(n&&n.body&&t){if(t.import(n),r&&"edit"===t.interaction.currentMode){var a=[];return n.body.forEach((function(e){Ue(e,(function(e){a.push(Nm({model:e,diagram:t,uploader:r}))}))})),a}return[]}},map:Om,addHashCdn:Sm,getHashCdn:Rm,generateHash:jm,executeCollapseExpand:Im,enableCollapseExpand:Bm,collapseActive:zm,mindmapInsertLine:Fm,mindToolbarConfigs:Um,uploadMindmapImage:function(e){var t=e.file,n=e.uploader,r=e.diagram,a=e.from;return new Promise((function(e){Am({file:t,uploader:n,enable:function(){return r.command.enable("MindmapAttachImage")||r.command.enable("MindmapInsertImage")},callback:function(t){"clipboard"===a&&(t.firstInsertRatio=1/window.devicePixelRatio),0===r.selector.selections.length||"drop"===a?r.command.execute("MindmapInsertImage",{image:t}):1===r.selector.selections.length&&r.command.execute("MindmapAttachImage",{image:t}),e(t)}})}))}})},284:function(e,t,n){"use strict";n(589);var r=n(330);n(502);t.a=r.a},2894:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(1),i=n.n(o),c=n(79),l=n(56),s=n(2762),u=n(646),d=n(3974),f=n(3986),p=n(8),h=n.n(p),m=n(71),g=n.n(m),v=n(1557),y=n(113),b=n(99),k=n(2816),w=n(2118),x=n(219),_=n(2771),E=n(2748),C=n(2121),O=n(2277),S=n(2784),R=n(1552),j=n(3841),P="SheetReader-module_wrapper_P6Ioz",A="SheetReader-module_content_BhpjY",T="SheetReader-module_draft_78IYK",D="SheetReader-module_sheetViewer_zdxVX",M="SheetReader-module_infobar_AXygs";function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e){var t=e.book,n=e.doc;return Object(C.a)(t,n),a.a.createElement("div",{"data-testid":""})}var B=Object(c.c)((function(e){return{doc:e.doc}}))((function(e){var t=N(Object(r.useState)(document.body.clientHeight),2),n=t[0],o=t[1],i=e.group,c=e.book,l=e.doc,s=e.history,u=e.isShare,d=e.match,f=function(){o(document.body.clientHeight)};Object(r.useEffect)((function(){return window.addEventListener("resize",f,!1),function(){window.removeEventListener("resize",f,!1)}}),[]);var p=Object(r.useMemo)((function(){return new R.a}),[]);if(!l.loaded)return null;if(l.loaded&&"lakesheet_html"===l.format){var h=Object(S.a)(l.content);l.content=h.value,l.format="lakesheet"}var m="doc_embed"===s.location.query.view,g=m?32:60;0===l.status&&l.abilities.update&&(g+=42);var y=98===l.read_status||99===l.read_status||100===l.read_status;y&&(g+=42);var b=n-g;return m?a.a.createElement(j.a,{doc:l,sheetHeight:b,match:d,hasReadAuditTip:y,showHeader:p.showHeader}):a.a.createElement("div",{className:P},a.a.createElement(I,{book:c,doc:l}),a.a.createElement("div",{className:A},a.a.createElement(x.a.DraftTip,{doc:l,className:T}),y&&a.a.createElement(O.a,{key:"audits",doc:l,type:"Doc"}),a.a.createElement("div",{className:D,style:{width:"100%",height:b,overflow:"hidden"}},a.a.createElement(w.a,{docId:l.id,type:l.type,abilities:l.abilities,content:l.content,format:l.format,geSheetStyle:{width:"100%",height:b-40},onLoad:function(e){var t=v.a.getSheetStoredPosition(l.id);t&&e.setPosition(t)}}))),a.a.createElement(_.a,{className:M,group:i,doc:l,isShare:u,onCreateComment:function(){e.dispatch({type:"doc/addCommentCount"})}}),a.a.createElement(E.a,{type:"Doc",targetId:l.id,likeStatus:l.like.actioned,likeCount:l.like.count,size:"bubble",bubblePopover:!0}))})),z=n(2129),F=n(3842),U="TableReader-module_wrapper_yMo2k",V="TableReader-module_content_OzRcy",q="TableReader-module_draft_71gPA",H="TableReader-module_tableViewer_jLv2P",W="TableReader-module_infobar_W5Xvg";function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(e){var t=e.book,n=e.doc;return Object(C.a)(t,n),a.a.createElement("div",{"data-testid":""})}var K=Object(c.c)((function(e){return{doc:e.doc}}))((function(e){var t=Y(Object(r.useState)(document.body.clientHeight),2),n=t[0],o=t[1],i=e.group,c=e.book,l=e.doc,s=e.history,u=e.isShare,d=e.match,f=function(){o(document.body.clientHeight)};Object(r.useEffect)((function(){return window.addEventListener("resize",f,!1),function(){window.removeEventListener("resize",f,!1)}}),[]);var p=Object(r.useMemo)((function(){return new R.a}),[]);if(!l.loaded)return null;var h="doc_embed"===s.location.query.view,m=h?32:60;0===l.status&&l.abilities.update&&(m+=42);var g=98===l.read_status||99===l.read_status||100===l.read_status;g&&(m+=42);var y=n-m;return h?a.a.createElement(F.a,{doc:l,tableHeight:y,match:d,hasReadAuditTip:g,showHeader:p.showHeader}):a.a.createElement("div",{className:U},a.a.createElement(X,{book:c,doc:l}),a.a.createElement("div",{className:V},a.a.createElement(x.a.DraftTip,{doc:l,className:q}),g&&a.a.createElement(O.a,{key:"audits",doc:l,type:"Doc"}),a.a.createElement("div",{className:H,style:{width:"100%",height:y,overflow:"hidden"}},a.a.createElement(z.a,{docId:l.id,type:l.type,abilities:l.abilities,content:l.content,format:l.format,geSheetStyle:{width:"100%",height:y-40},onLoad:function(e){var t=v.a.getSheetStoredPosition(l.id);t&&e.setPosition(t)}}))),a.a.createElement(_.a,{className:W,group:i,doc:l,isShare:u,onCreateComment:function(){e.dispatch({type:"doc/addCommentCount"})}}),a.a.createElement(E.a,{type:"Doc",targetId:l.id,likeStatus:l.like.actioned,likeCount:l.like.count,size:"bubble",bubblePopover:!0}))})),Z=(n(126),n(55)),$=(n(136),n(36)),Q=n(17);const J=850;var ee=n(78),te=n.n(ee),ne=n(917),re=n(1759),ae=n(258),oe=480,ie=236,ce=n(266),le=n(1750),se=n(2227),ue=n(163),de=n(1749),fe=n(846);function pe(e){var t=e.format,n=e.html,o=Object(r.useRef)(null);return Object(r.useEffect)((function(){e.onReady(o.current)}),[n]),a.a.createElement("div",{key:e.id,ref:o,className:"yuque-doc-content typo ".concat("asl"===t?"typo-bi":""),"data-df":"html",style:{position:"relative"},dangerouslySetInnerHTML:{__html:n}})}pe.defaultProps={onReady:function(){}},pe.propTypes={id:i.a.oneOfType([i.a.string,i.a.number]),html:i.a.string.isRequired,format:i.a.string.isRequired,onReady:i.a.func};var he=pe,me=function(e,t){var n=document.querySelector(t);if(n)return Array.prototype.indexOf.call(n.children,e)>-1},ge=function(e){var t=e.child,n=e.blockquote,r={child:t,selector:e.selector,container:n||null};return function(e){for(var t=e.child,n=e.container,r=e.selector,a=t,o=["P","H1","H2","H3","H4","H5","H6","NE-P","NE-H1","NE-H2","NE-H3","NE-H4","NE-H5","NE-H6"];-1===o.indexOf(a.nodeName)&&(a=a.parentElement);)if(a.hasAttribute("data-lake-card"))return null;return me(n||a,r)?a:null}(r)||function(e){for(var t=e.child,n=e.container,r=e.selector,a=t,o=["OL","UL","NE-OLI","NE-ULI","NE-TLI"];a.parentElement&&-1===o.indexOf(a.parentElement.nodeName)&&(a=a.parentElement).parentElement;)if(a.hasAttribute("data-lake-card"))return null;return me(n||a.parentElement,r)?a:null}(r)},ve=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!t)return null;void 0===r&&(r=t.childNodes.length-1);var a=t.childNodes[r];if(!a)return null;for(;3!==a.nodeType&&(a=a.lastChild););return!a&&n?e(t,n,r-1):a},ye=function(e){for(var t=e.parentElement;t;){if(t.hasAttribute("data-lake-card"))return!0;if(!t)break;t=t.parentElement}return!1};function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ke(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return we(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xe=function e(t){var n=[];if(!t)return n;var r,a=ke(t.childNodes);try{for(a.s();!(r=a.n()).done;){var o=r.value,i=o.nodeType;3===i?!ye(o)&&o.nodeValue&&n.push(o):[1,9,11].includes(i)&&(n=n.concat(e(o)))}}catch(e){a.e(e)}finally{a.f()}return n},_e=function(){function e(t){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a=function(e){return document.querySelector('[data-lake-id="'.concat(e,'"]'))},(r="findParagraphById")in(n=this)?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a;var o=t.paragraph_id,i=t.text,c=t.text_offset,l=t.id;this.paragraph_id=o,this.text=i,this.text_offset=Number(c),this.id=l,this.$paragraph=this.findParagraphById(o),this._$eles=document.querySelectorAll('[data-selection-id="'.concat(l,'"]'))}var t,n,r;return t=e,(n=[{key:"mark",value:function(){var e=this.text,t=this.text_offset,n=this.id;if(this.$paragraph&&this.$paragraph.textContent.slice(t,t+e.length)===e){var r=function(e,t){var n=t.text,r=t.text_offset;try{for(var a=[],o=function(e,t){for(var n,r,a=0,o=0;o<e.length;o++){var i=e[o].nodeValue;if(t>=a&&t<a+i.length){n=o,r=t-a;break}a+=i.length}return{index:n,offset:r}}(e,r),i=o.index,c=o.offset,l=n.length,s=i;s<e.length;s++){var u=e[s],d=u.nodeValue.length,f=document.createRange();if(f.setStart(u,c),d-c>=l?(f.setEnd(u,c+l),l=0):(f.setEnd(u,d),l-=d-c),c=0,a.push(f),l<=0)break}return a}catch(e){console.log(e.stack)}}(xe(this.$paragraph),{text:e,text_offset:t});r.forEach((function(e){var t=document.createElement("span");t.dataset.selectionId=n,t.appendChild(document.createTextNode(e.toString())),e.deleteContents(),e.insertNode(t),t.parentNode.dataset.selectionId||(t.style.backgroundColor="rgb(223, 184, 93, 0.15)",t.dataset.color=t.style.backgroundColor)}))}}},{key:"delete",value:function(){this._$eles.forEach((function(e){e.parentNode.replaceChild(document.createTextNode(e.innerText),e)}))}},{key:"highlight",value:function(){this._$eles.forEach((function(e){e.style.backgroundColor="rgb(223, 184, 93, 0.35)"}))}},{key:"darken",value:function(){this._$eles.forEach((function(e){e.querySelectorAll("[data-selection-id]").forEach((function(e){e.style.backgroundColor=e.dataset.color||null})),e.style.backgroundColor=e.dataset.color||null}))}}])&&be(t.prototype,n),r&&be(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ee=function(e){return new _e(e)},Ce=function(e){var t=function(e){if(e&&e.dataset&&e.dataset.selectionId){var t=Number(e.dataset.selectionId);return Number.isNaN(t)?null:t}}(e);if(t)return new _e({id:t,paragraph_id:e.closest("[data-lake-id]").getAttribute("data-lake-id")})};function Oe(e){return function(e){if(Array.isArray(e))return Se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Se(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Re,je="",Pe=function(){if(je)return je;var e="#content .lake-engine-view";if(document.querySelector(e))return je=e;var t="#content .ne-viewer-body";return document.querySelector(t)?je=t:void 0},Ae=[],Te=function(){Ae=[]},De=function(){return Re||((Re=document.createElement("div")).style.position="absolute",Re.style.top="0",Re.style.left="0",Re.style.width="100%",document.body.appendChild(Re),Re)},Me=function(){return 0===document.body.scrollTop?document.documentElement.scrollTop:document.body.scrollTop},Ne=function(e){return document.querySelector('[data-lake-id="'.concat(e,'"]'))},Le=function(e){var t=function(e){var t={};return e.forEach((function(e){var n=e.paragraph_id,r=e.text,a=e.text_offset,o=e.closed_at,i=e.id;t[n]=t[n]||[],o||t[n].filter((function(e){return e.id===i})).length||t[n].push({text:r,text_offset:a,id:i,key:"".concat(i,"_").concat(a,"_").concat(r),paragraph_id:n})})),t}(e),n=function(e,t){var n={};return Object.keys(e).forEach((function(r){t[r]?e[r].map((function(e){return e.key})).sort().join("|")!==t[r].map((function(e){return e.key})).sort().join("|")&&(n[r]=e[r]):n[r]=e[r]})),Object.keys(t).forEach((function(t){e[t]||(n[t]=null)})),n}(t,Ae);Object.keys(n).forEach((function(e){document.querySelectorAll('[data-lake-id="'.concat(e,'"] [data-selection-id]')).forEach((function(e){e.parentNode.replaceChild(document.createTextNode(e.innerText),e)})),n[e]&&n[e].forEach((function(e){Ee(e).mark()}))})),Ae=t},Ie=n(33),Be=n.n(Ie),ze=n(34),Fe="index-module_toolTipContainer_aDZ1G",Ue="index-module_toolTipContent_sjO2l",Ve="index-module_icon_eyeAq",qe="index-module_creatorContainer_A3Jyj",He=(n(57),n(23)),We=n(291),Ye=n.n(We),Ge=n(69),Xe=n.n(Ge),Ke=n(215),Ze=n(31),$e=function(e,t){var n=e.doc_id,r=e.paragraph_id,a=Object(Ke.a)(Ze.a.docSelections.update).request;return{openSelection:function(e){return a({doc_id:n,paragraph_id:r,visible:!0}).then((function(){t({type:"litecomment/openSelections",payload:{paragraph_id:r,doc_id:n}}),e&&e()}))},closeSelection:function(e,o){return a({doc_id:n,paragraph_id:r,visible:!1}).then((function(){t({type:"litecomment/closeSelections",payload:{paragraph_id:r,doc_id:n}}),o&&o()}))}}};function Qe(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}var Je=function(e){var t=function(){var t,n=(t=regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({type:"proxy.web/comments.create",payload:{data:n}});case 2:if((r=t.sent).id){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e({type:"litecomment/create",payload:{data:r,showEditorAtBottom:!0}});case 7:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){Qe(o,r,a,i,c,"next",e)}function c(e){Qe(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}();return{createComment:t,updateComment:function(t,n){return e({type:"proxy.web/comments.update",payload:{data:t,reducer:"litecomment/updateOne"}}).then((function(){n&&n()}))},deleteComment:function(t,n){return e({type:"proxy.web/comments.destroy",payload:{data:{id:t},reducer:"litecomment/remove"}}).then((function(){n&&n()}))}}},et=(n(196),n(95)),tt=n(243),nt=n.n(tt),rt=n(355),at=n(140),ot=n(110),it=(n(45),n(18)),ct=n(1736),lt=n(1740),st={createContainer:"index-module_createContainer_72s-6",editorContainer:"index-module_editorContainer_PsFku",actions:"index-module_actions_LIRSS",listContainer:"index-module_listContainer_fbAWj",header:"index-module_header_F23YY",title:"index-module_title_0kpVX",action:"index-module_action_5gxc9",itemContainerActive:"index-module_itemContainerActive_UjbVt",itemContainer:"index-module_itemContainer_utZ1E",avatar:"index-module_avatar_x-urH",main:"index-module_main_MKnS+",name:"index-module_name_4X8-m",time:"index-module_time_+qIAT",content:"index-module_content_OlAeP",moreAction:"index-module_moreAction_hQJcI",actionItem:"index-module_actionItem_3uFaf",actionReplyItem:"index-module_actionReplyItem_1W+5e",editorViewContainer:"index-module_editorViewContainer_J3kFP",cancel:"index-module_cancel_wHyQL",replyCreatorContainer:"index-module_replyCreatorContainer_tvQlD",replyingInfo:"index-module_replyingInfo_lHs4Y",wrapper:"index-module_wrapper_Gk6ku",replyContainer:"index-module_replyContainer_U2GyE",editContainer:"index-module_editContainer_XzayG",fadein:"index-module_fadein_Ku5u3",flash:"index-module_flash_fv+uQ"};function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ft={};function pt(e){var t=ft.useViewModel(e),n=t.state;return a.a.createElement("div",{className:st.editorViewContainer},a.a.createElement("div",{className:st.editorWrapper},a.a.createElement(lt.a,{editor:t.editor,onChange:t.onContentChange,onSubmit:t.update})),a.a.createElement("div",{className:st.actions},a.a.createElement("div",{className:st.actionItem},a.a.createElement(it.a,{"data-testid":"comment-edit-submit",disabled:n.isEmpty||n.loading,onClick:t.update},__("确定"))),a.a.createElement("div",{className:st.actionItem},a.a.createElement("span",{className:st.cancel,onClick:t.cancelEdit},__("取消")))))}ft.useViewModel=function(e){var t=e.comment,n=e.cancelEdit,a=e.updateComment,o=e.doc,i=ut(Object(r.useState)(!1),2),c=i[0],l=i[1],s=ut(Object(r.useState)(!1),2),u=s[0],d=s[1],f=Object(r.useMemo)((function(){return new ct.j({target:t,belong:o})}),[o.id]);return{state:{doc:o,comment:t,isEmpty:c,loading:u},update:function(){d(!0),f.contentReady().then((function(){a({id:t.id,body_asl:f.getValue(),body:f.getHtml(),format:te.a.FORMAT.LAKE})}))},onContentChange:function(){l(f.isEmpty())},cancelEdit:n,editor:f}},pt.propTypes={comment:i.a.object,cancelEdit:i.a.func,updateComment:i.a.func};var ht=pt;function mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vt={useViewModel:function(e){var t=e.comment,n=e.deleteComment,a=e.updateComment,o=e.parent,i=e.me,c=e.doc,l=e.index,s=e.reply,u=e.isActive,d=e.ignoreScroll,f=mt(Object(r.useState)("view"),2),p=f[0],h=f[1],m=mt(Object(r.useState)(!1),2),g=m[0],v=m[1],y=!(!i||!i.id),b=t&&t.selection||{},k=Ee(b);return{state:{doc:c,me:i,comment:t,mode:p,parent:o,parentVisiable:g,hasLogin:y,index:l,isActive:u,ignoreScroll:d},highlight:function(){k.highlight()},darken:function(){k.darken()},deleteComment:function(){n(t.id)},update:function(e){a(e),h("view")},edit:function(){h("edit")},cancelEdit:function(){h("view")},replyTo:function(){return s(t)},showParent:function(){t.parent_id&&v(!0)},canDelete:function(){return!!i&&(i.id===t.user_id||c.abilities&&c.abilities.destroy_comment)},canEdit:function(){return i&&i.id===t.user_id},copyLink:function(e){try{nt()(e),He.a.success(__("评论链接已复制"))}catch(e){}}}}},yt=function(e){var t=vt.useViewModel(e),n=t.state,o=n.index,i=n.comment,c=n.mode,l=n.parent,s=n.parentVisiable,u=n.hasLogin,d=n.doc,f=n.isActive,p=n.ignoreScroll,m=i.user,g=a.a.createRef();if(Object(r.useEffect)((function(){f&&g.current&&!p&&g.current.scrollIntoView({block:"center"})}),[f,p]),"view"===c){var v=rt.a.getAnchorId(i.id,"Doc"),y=window.location,b=y.protocol,k=y.host,w=y.pathname,x="".concat(b,"//").concat(k).concat(w,"#").concat(v),_=h()("comment-item-".concat(o),st.itemContainer,f?st.itemContainerActive:"");return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:_,"data-testid":"comment-item",onMouseOver:t.highlight,onMouseLeave:t.darken,ref:g},a.a.createElement("div",{className:st.avatar},a.a.createElement(ot.a,{src:m&&m.avatar_url,size:24,name:m.name})),a.a.createElement("div",{className:st.main},a.a.createElement("div",{className:st.info},a.a.createElement("span",{className:st.name},m.name),a.a.createElement("span",{className:st.time,onClick:function(){t.copyLink(x)}},a.a.createElement(at.a,{time:i.created_at}))),i.parent_id&&a.a.createElement("div",{className:st.replyContainer,onClick:t.showParent,"data-testid":"comment-parent-item"},l?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,__("回复")," @",l&&l.user&&l.user.name),s&&a.a.createElement("div",{className:st.editContainer},a.a.createElement(fe.b,{id:l.id,content:l.body_asl,genOutline:!1,genAnchor:!1,simpleUI:!0}))):__("该评论已删除")),a.a.createElement("div",{className:st.content},a.a.createElement(fe.b,{id:i.id,content:i.body_asl,genOutline:!1,genAnchor:!1,simpleUI:!0})),u&&a.a.createElement("div",{className:st.actions},a.a.createElement("span",{className:h()(st.actionItem,st.actionReplyItem),onClick:t.replyTo},__("回复")),a.a.createElement("span",{className:st.moreAction},t.canEdit()&&a.a.createElement("span",{className:h()(st.actionItem,st.actionReplyItem),onClick:t.edit},__("编辑")),t.canDelete()&&a.a.createElement(et.a,{title:__("确认删除该评论么？"),onConfirm:t.deleteComment},a.a.createElement("span",{className:st.actionItem},__("删除"))))))))}return a.a.createElement("div",{style:{paddingLeft:16,paddingRight:16}},a.a.createElement(ht,{doc:d,comment:i,cancelEdit:t.cancelEdit,updateComment:t.update}))};yt.propTypes={index:i.a.number,comment:i.a.object,me:i.a.object,doc:i.a.object,parent:i.a.object,deleteComment:i.a.func,updateComment:i.a.func,highlight:i.a.func,reply:i.a.func};var bt=yt,kt=n(844);function wt(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _t(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Et(e){var t=e.doc,n=e.createComment,a=e.replyingTo,o=e.parent_id,i=e.cancelReply,c=xt(Object(r.useState)(!0),2),l=c[0],s=c[1],u=xt(Object(r.useState)(!1),2),d=u[0],f=u[1],p=Object(r.useMemo)((function(){return new ct.j({belong:t})}),[t.id]),h=function(){var e,r=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,p.contentReady();case 3:return e.next=5,n({commentable_type:"Doc",commentable_id:t.id,type:Ye.a.TYPE.WORDING_COMMENT,body_asl:p.getValue(),body:p.getHtml(),format:te.a.FORMAT.LAKE,parent_id:o});case 5:p.clearCache();case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){wt(o,r,a,i,c,"next",e)}function c(e){wt(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return{state:{doc:t,isEmpty:l,replyingTo:a,loading:d},onContentChange:function(){s(p.isEmpty())},createReply:h,editorOnload:function(){p.focus(!0)},cancelReply:i,editor:p}}function Ct(e){var t=Et(e),n=t.state,r=Object(kt.b)(e.doc);return a.a.createElement("div",{className:st.replyCreatorContainer,"data-testid":"select-word-comment"},a.a.createElement("div",{className:st.editorContainer},a.a.createElement(lt.a,{editor:t.editor,onChange:t.onContentChange,onSubmit:t.createReply,onLoad:t.editorOnload})),a.a.createElement("div",{className:st.actions},a.a.createElement("div",{className:st.actionItem},a.a.createElement(it.a,{disabled:n.isEmpty||n.loading||r,onClick:t.createReply},__("回复"))),a.a.createElement("div",{className:st.actionItem},a.a.createElement("span",{className:st.cancel,onClick:t.cancelReply},__("取消"))),a.a.createElement("div",{className:st.replyingInfo},a.a.createElement("div",{className:st.wrapper},a.a.createElement("span",null,__("回复")," "),a.a.createElement("span",{className:st.name},"@",n.replyingTo&&n.replyingTo.name)))),r&&a.a.createElement(kt.a,null))}Ct.propTypes={doc:i.a.object,selectedInfo:i.a.object,createComment:i.a.func,replyingTo:i.a.object,parent_id:i.a.number,cancelReply:i.a.func};var Ot=Ct;function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(Object(n),!0).forEach((function(t){jt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pt(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Dt=function(e,t){return e?t.find((function(t){return t.id===e})):null},Mt=a.a.forwardRef((function(e,t){var n=e.comments,o=e.deleteComment,i=e.updateComment,c=e.createReply,l=e.closeSelection,s=e.activeSeletionId,u=e.ignoreScroll,d=e.doc,f=e.me,p=d&&d.abilities&&d.abilities.update,h=n[0].selection_id,m=At(Object(r.useState)(null),2),g=m[0],v=m[1],y=function(e){v(e)},b=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return");case 2:return n=g.selection,e.next=5,c(Rt(Rt({},t),{},{selection:{paragraph_id:n.paragraph_id,range_rect:n.range_rect,text_offset:n.text_offset,text:n.text}}));case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Pt(o,r,a,i,c,"next",e)}function c(e){Pt(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return a.a.createElement("div",{className:st.listContainer,ref:t},a.a.createElement("div",{className:st.header},a.a.createElement("div",{className:st.title},__("{count} 条评论",{count:n.length})),p&&a.a.createElement("div",{className:st.action,onClick:function(){l(h)}},a.a.createElement(ze.a,{name:"comment-hide",width:20,height:20}))),n.map((function(e,t){return a.a.createElement(bt,{doc:d,me:f,key:e.id,comment:e,parent:Dt(e.parent_id,n),deleteComment:o,updateComment:i,isActive:e.selection_id===s,ignoreScroll:u,index:t,reply:y})})),g&&a.a.createElement(Ot,{doc:d,me:f,replyingTo:g.user,createComment:b,parent_id:g.id,cancelReply:function(){v(null)}}))}));Mt.propTypes={doc:i.a.object,me:i.a.object,comments:i.a.array,deleteComment:i.a.func,updateComment:i.a.func,createReply:i.a.func,closeSelection:i.a.func,activeSeletionId:i.a.number,ignoreScroll:i.a.bool};var Nt=Mt,Lt="SideComments-module_container_-9iHb",It="SideComments-module_popover_KaqWm",Bt="SideComments-module_paragraphIcon_O0DY3",zt="SideComments-module_selectionInfo_VDDjz",Ft="SideComments-module_text_OFrNA",Ut="SideComments-module_action_8ftVM";function Vt(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ht(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wt(e){var t,n,o=e.id,i=e.showList,c=e.isListing,l=e.selectedInfo,s=e.litecomment,u=e.dispatch,d=e.doc,f=e.me,p=e.activeSeletionId,h=e.ignoreScroll,m=e.engine,g=Object(r.useRef)(null),v=s.comments,y=qt(Object(r.useState)(null),2),b=y[0],k=y[1],w=qt(Object(r.useState)(),2)[1],x=$e({doc_id:d.id,paragraph_id:o},u),_=x.openSelection,E=x.closeSelection,C=Je(u),O=C.createComment,S=C.updateComment,R=C.deleteComment,j=Object(r.useCallback)((function(){return w({})}),[]),P=function(){return(v||[]).filter((function(e){return e.type===Ye.a.TYPE.WORDING_COMMENT&&(e.selection&&e.selection.paragraph_id===o)}))},A=function(){return _((function(){k(!0),i(null,-1),He.a.destroy()}))},T=Xe()((function(){j()}),50),D=P();return Object(r.useEffect)((function(){return window.addEventListener("resize",T),m.on("viewportLayoutChange",T),m.on("foldingStatusChange",T),function(){window.removeEventListener("resize",T),m.off("viewportLayoutChange",T),m.off("foldingStatusChange",T)}}),[]),{state:{id:o,isListing:c,selectedInfo:l,activeSeletionId:p,ignoreScroll:h,visible:b,listRef:g,paragraphComments:D,doc:d,me:f},showList:function(){i(o,0)},getParagraphComment:P,createComment:(t=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t);case 2:k(!0),i(o,D.length-1),setTimeout((function(){g.current&&(g.current.scrollTop=g.current.scrollHeight)}),500);case 5:case"end":return e.stop()}}),e)})),n=function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){Vt(o,r,a,i,c,"next",e)}function c(e){Vt(o,r,a,i,c,"throw",e)}i(void 0)}))},function(e){return n.apply(this,arguments)}),updateComment:function(e){return S(e,(function(){i(o,-1)}))},deleteComment:function(e){return R(e,(function(){He.a.success(__("操作成功"),3),setTimeout((function(){i(o,-1)}),200)}))},closeSelection:function(e){return E(e,(function(){k(!1),i(null,-1),He.a.warn(a.a.createElement("div",{className:zt},a.a.createElement("span",{className:Ft},__("不再显示此处的划词评论，但仍将在下方评论处展示")),a.a.createElement("span",{onClick:A,className:Ut},__("撤销"))),3)}))},getItemContainerStyle:function(e){var t=Ne(o);if(!t)return null;["NE-TLI-C","NE-OLI-C","NE-ULI-C"].includes(t.nodeName)&&(t=t.parentElement);var n=t.getBoundingClientRect(),r=n.right,a=n.top,i=r+6;return!e&&window.innerWidth-i<=310&&(i=window.innerWidth-320),{top:"".concat(a+Me()+2,"px"),left:"".concat(i,"px")}}}}var Yt=a.a.memo((function(e){var t=Wt(e),n=t.state,r=n.paragraphComments,o=null!==n.visible?!n.visible:r[0]&&r[0].selection&&r[0].selection.closed_at,i=!1,c=null;r.length&&!o&&(n.isListing?c=a.a.createElement(Nt,{doc:n.doc,me:n.me,comments:r,deleteComment:t.deleteComment,updateComment:t.updateComment,createReply:t.createComment,closeSelection:t.closeSelection,activeSeletionId:n.activeSeletionId,ignoreScroll:n.ignoreScroll,ref:n.listRef}):(i=!0,c=a.a.createElement("div",{className:Bt,onClick:t.showList},a.a.createElement(ze.a,{name:"comments_para",width:16,height:16}))));var l,s,u,d=h()(Lt,(l={},s=It,u=n.isListing,s in l?Object.defineProperty(l,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):l[s]=u,l)),f=t.getItemContainerStyle(i);return f?a.a.createElement("div",{"data-testid":"side-comments",key:n.id,className:d,style:f},c):null}));Yt.propTypes={activeSeletionId:i.a.number,ignoreScroll:i.a.bool,id:i.a.string,showList:i.a.func,isListing:i.a.bool,selectedInfo:i.a.object,dispatch:i.a.func,engine:i.a.object};var Gt=Yt,Xt=function(e){var t=e.paragraphListShowId,n=e.selectedInfo,r=e.showList,o=e.getEngine,i=e.activeSeletionId,c=e.ignoreScroll,l=e.doc,s=e.me,u=e.litecomment,d=e.dispatch,f=o(),p={};return!f?null:(u.comments.forEach((function(e){e.selection&&!e.selection.closed_at&&(p[e.selection.paragraph_id]=e)})),a.a.createElement(a.a.Fragment,null,Object.keys(p).map((function(e){return a.a.createElement(Gt,{key:e,id:e,engine:f,selectedInfo:n,isListing:e===t,activeSeletionId:i,ignoreScroll:c,showList:r,doc:l,me:s,litecomment:u,dispatch:d})}))))};Xt.propTypes={activeSeletionId:i.a.number,ignoreScroll:i.a.bool,showList:i.a.func,paragraphListShowId:i.a.string,selectedInfo:i.a.object,doc:i.a.object,me:i.a.object,litecomment:i.a.object,dispatch:i.a.func};var Kt=Xt,Zt=n(42);function $t(e,t,n){try{return window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.currentStyle[t]}catch(e){return null!=n?n:null}}var Qt={fill:"rgba(223, 184, 93, 0.2)"};function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function en(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach((function(t){tn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var rn=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ranges=n,this.highlightStyle=Qt,this._initTarget(t),this._createCanvas()}var t,n,r;return t=e,n=[{key:"paint",value:function(){var e=this,t=this.ranges;try{this._resizeCanvas(),t.forEach((function(t){e._highlightRange(t)}))}catch(e){console.log(e.stack)}}},{key:"clear",value:function(){var e=this.canvas,t=this.container;e&&e.clear(),t&&t.remove()}},{key:"_createCanvas",value:function(){var e=this.target,t=document.createElement("div");t.style.position="absolute",t.style.top=0,t.style.left=0,t.style["pointer-events"]="none",e.appendChild(t),this.container=t,this.canvas=new Zt.TinyCanvas({container:t})}},{key:"_cacheRange",value:function(e){return{startOffset:e.startOffset,endOffset:e.endOffset,startContainer:e.startContainer,endContainer:e.endContainer,commonAncestorContainer:e.commonAncestorContainer}}},{key:"_isRangeWrap",value:function(e){var t=this._cacheRange(e);e.setEnd(t.startContainer,t.startOffset+1);var n=e.getBoundingClientRect();e.setEnd(t.startContainer,t.endOffset-1),e.setStart(t.endContainer,t.endOffset);var r=e.getBoundingClientRect();return e.setStart(t.startContainer,t.startOffset),e.setEnd(t.endContainer,t.endOffset),n.bottom!==r.bottom}},{key:"_highlightRange",value:function(e){var t=this.highlightStyle,n=this.canvas;if(this._isRangeWrap(e))return this._drawOneByOne(e,t);var r=this._getRelativeRect(e);n.clearRect(r),n.draw("Rect",en(en({},r),t))}},{key:"_drawOneByOne",value:function(e,t){for(var n=this._cacheRange(e),r=this.canvas,a=n.startOffset;a<n.endOffset;){e.setStart(n.commonAncestorContainer,a),e.setEnd(n.commonAncestorContainer,a+1);var o=this._getRelativeRect(e);r.clearRect(o),r.draw("Rect",en(en({},o),t)),a++}e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset)}},{key:"_getRelativeRect",value:function(e){var t=this.container,n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return{x:n.left-r.left,y:n.top-r.top,width:n.right-n.left,height:n.bottom-n.top}}},{key:"_resizeCanvas",value:function(){var e=this.target,t=this.canvas,n=function(e,t){var n=$t(e,"width",t);return"auto"===n&&(n=e.offsetWidth),parseFloat(n)}(e),r=function(e,t){var n=$t(e,"height",t);return"auto"===n&&(n=e.offsetHeight),parseFloat(n)}(e);t.resize(n,r)}},{key:"_initTarget",value:function(e){this.target=e,"static"===$t(e,"position")&&(e.style.position="relative")}}],n&&nn(t.prototype,n),r&&nn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),an=rn;function on(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var sn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.textNodes=null,this.ranges=null,this.painter=null,this.paragraph=null}var t,n,r;return t=e,r=[{key:"getTextOffset",value:function(t){for(var n=t.paragraph,r=t.range,a=(new e)._getElementTextNode(n),o=0,i=0;i<a.length;i++){var c=a[i],l=c.nodeValue;if(c===r.startContainer)return o+r.startOffset;o+=l.length}return null}},{key:"scrollAndDraw",value:function(t){var n=t.paragraph,r=t.text,a=t.text_offset;if(!n)return null;var o=new e;if(!o._match(n,{text:r,text_offset:a}))return null;o.paragraph=n,o._genTextNodes(),o._genRanges({text:r,text_offset:a});var i=o.ranges&&o.ranges[0];if(!i)return null;var c=Me()+i.getBoundingClientRect().top-120;return window.scrollTo({top:c,left:0,behavior:"smooth"}),o.draw(n,{text:r,text_offset:a}),o}}],(n=[{key:"draw",value:function(e,t){e&&t&&this._match(e,t)&&(this.paragraph=e,this._genTextNodes(),this._genRanges(t),this._genPainer(),this.painter.paint())}},{key:"clear",value:function(){this.textNodes=null,this.ranges=null,this.paragraph=null,this.painter&&(this.painter.clear(),this.painter=null)}},{key:"_genPainer",value:function(){this.painter||(this.painter=new an(window.h5?document.querySelector(".m-doc-article"):document.getElementById("ReactApp"),this.ranges))}},{key:"_genRanges",value:function(e){if(!this.ranges)try{for(var t=this.textNodes,n=e.text,r=e.text_offset,a=[],o=this._getStartTextNodeInfo(r),i=o.index,c=o.offset,l=n.length,s=i;s<t.length;s++){var u=t[s],d=u.nodeValue.length,f=document.createRange();if(f.setStart(u,c),d-c>=l?(f.setEnd(u,c+l),l=0):(f.setEnd(u,d),l-=d-c),c=0,a.push(f),l<=0)break}this.ranges=a}catch(e){console.log(e.stack)}}},{key:"_getFirstTextNode",value:function(e){for(var t,n=this.textNodes,r=0,a=0;a<n.length;a++){var o=n[a].nodeValue;if(e>=r&&e<r+o.length){t=a;break}r+=o.length}return n[t]}},{key:"_getStartTextNodeInfo",value:function(e){for(var t,n,r=this.textNodes,a=0,o=0;o<r.length;o++){var i=r[o].nodeValue;if(e>=a&&e<a+i.length){t=o,n=e-a;break}a+=i.length}return{index:t,offset:n}}},{key:"_genTextNodes",value:function(){if(!this.textNodes)try{this.textNodes=this._getElementTextNode(this.paragraph)}catch(e){console.log(e.stack)}}},{key:"_getElementTextNode",value:function(e){var t=[];if(!e)return t;var n,r=on(e.childNodes);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=a.nodeType;3===o?ye(a)||t.push(a):[1,9,11].includes(o)&&(t=t.concat(this._getElementTextNode(a)))}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"_match",value:function(e,t){var n=e.textContent,r=t.text,a=t.text_offset;return n.substr(a,r.length)===r}}])&&ln(t.prototype,n),r&&ln(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function un(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(n),!0).forEach((function(t){hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mn=function(){return window.getSelection?window.getSelection():document.selection.createRange()},gn=function(e,t){var n=t.type,r=t.payload;switch(n){case"select":return pn(pn({},e),r);case"reset":return{text:"",paragraphId:null,textOffset:null,selectedRangeRect:null}}},vn=function(e,t){var n=mn();if(n.isCollapsed)return t&&t();if(n.toString().trim()){var r=function(e){var t={paragraph:null,range:null},n=e.getRangeAt(0);if(!n)return t;var r=n.startContainer,a=n.endContainer,o=n.startOffset,i=!(r===e.focusNode&&o===e.focusOffset),c=function(e){for(var t=e;"BLOCKQUOTE"!==t.nodeName&&"NE-QUOTE"!==t.nodeName&&(t=t.parentElement););return t}(e.anchorNode);if(r===a)return{paragraph:ge({child:e.anchorNode,blockquote:c,selector:Pe()}),range:n};var l=ge({child:r,blockquote:c,selector:Pe()}),s=ge({child:a,blockquote:c,selector:Pe()});if(l===s)return{paragraph:l,range:n};if(l!==s){var u=ge({child:e.anchorNode,blockquote:c,selector:Pe()}),d=document.createRange();if(i){var f=ve(u,!0);if(!f||r&&r.hasAttribute&&r.hasAttribute("ne-filter"))return t;d.setStart(r,n.startOffset),d.setEnd(f,f.textContent.length)}else{var p=function(e){if(!e)return null;for(var t=e.firstChild;3!==t.nodeType&&(t=t.firstChild););return t}(u);if(!p)return t;d.setStart(p,0),d.setEnd(a,n.endOffset)}return{paragraph:u,range:d}}if(!l.textContent.trim())return t;if(0!==n.endOffset)return t;var h=document.createRange();h.setStart(r,n.startOffset);var m=ve(l);return m?(h.setEnd(m,m.textContent.length),t={paragraph:l,range:h}):t}(n),a=r.paragraph,o=r.range;if(a&&o){var i=sn.getTextOffset({paragraph:a,range:o});e({range:o,text:o.toString().trim(),offset:i,paragraphElement:a})}}},yn=function(){var e=mn();e&&e.empty()};function bn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wn(Object(n),!0).forEach((function(t){_n(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function En(e,t){var n=t.type,r=t.payload,a=void 0===r?{}:r,o=a.id,i=a.selection_id,c=a.ignoreScroll;switch(n){case"hideCreator":return xn(xn({},e),{},{tooltipVisiable:!1,creatorVisiable:!1});case"showCreator":return xn(xn({},e),{},{creatorVisiable:!0,tooltipVisiable:!1});case"hideTooltip":return xn(xn({},e),{},{tooltipVisiable:!1});case"showTooltip":return xn(xn({},e),{},{tooltipVisiable:!0});case"createComment":return xn(xn({},{showingId:null,creatingId:null,tooltipVisiable:!1,creatorVisiable:!1,activeSeletionId:0,ignoreScroll:!1}),{},{creatingId:o});case"showComments":return xn(xn({},{showingId:null,creatingId:null,tooltipVisiable:!1,creatorVisiable:!1,activeSeletionId:0,ignoreScroll:!1}),{},{showingId:o,activeSeletionId:i,ignoreScroll:c});case"reset":return{showingId:null,creatingId:null,tooltipVisiable:!1,creatorVisiable:!1,activeSeletionId:0,ignoreScroll:!1}}}var Cn=function(){var e=bn(Object(r.useReducer)(En,{showingId:null,creatingId:null,tooltipVisiable:!1,creatorVisiable:!1,activeSeletionId:0,ignoreScroll:!1}),2),t=e[0],n=e[1];return{sideCommentState:t,dispatch:n,getTooltipStyles:function(e){return t.tooltipVisiable&&e?{position:"absolute",top:"".concat(e.top-9,"px"),left:"".concat((e.left+e.right)/2,"px")}:{display:"none"}},getCreatorStyles:function(e){if(!t.creatorVisiable||!e)return{display:"none"};var n=document.querySelector(".yuque-doc-content").getBoundingClientRect().right+6;return window.innerWidth-n<=310&&(n=window.innerWidth-350),{position:"absolute",top:"".concat(e.top,"px"),left:"".concat(n,"px")}}}};function On(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}var Sn=function(e){var t,n=e.doc,a=e.me,o=e.getEngine,i=e.book,c=e.litecomment,l=e.dispatch,s=Object(r.useRef)(null),u=Je(l).createComment,d=n&&"lake"===n.format,f=a&&a.id,p=!!new URL(document.location).searchParams.get("translate"),h={selectedInfo:(t=un(Object(r.useReducer)(gn,{text:"",paragraphId:null,textOffset:null,selectedRangeRect:null}),2))[0],dispatch:t[1]},m=h.selectedInfo,v=h.dispatch,y=Cn(),b=y.sideCommentState,k=y.dispatch,w=y.getTooltipStyles,x=y.getCreatorStyles,_=Xe()((function(e){if(e&&3!==e.which&&!e.shiftKey)try{vn((function(e){var t=e.range,n=e.text,r=e.offset,a=e.paragraphElement,o=t.getBoundingClientRect();v({type:"select",payload:{selectedRangeRect:{left:o.left,top:o.top+Me(),right:o.right},text:n,paragraphId:a.getAttribute("data-lake-id"),textOffset:r}}),k({type:"showTooltip"})}),(function(){var t=Ce(e.target),n=!1,r=e.target.closest("a");if(r&&r.href){var a=new URL(r.href,window.location.href),o=new URL(window.location.href),i=a.hash;a.hash="",o.hash="",i&&a.toString()===o.toString()&&(n=!0)}t&&k({type:"showComments",payload:{id:t.paragraph_id,selection_id:t.id,ignoreScroll:n}})}))}catch(e){console.log(e.stack)}}),200),E=g()((function(e){var t=Ce(e.target);t&&t.highlight()}),16),C=g()((function(e){var t=Ce(e.target);t&&t.darken()}),16);function O(){v({type:"reset"}),k({type:"reset"}),s.current&&s.current.clear()}function S(e){if(e&&3!==e.which&&!e.shiftKey&&!(function(e,t){for(var n=e;n;){if(n===t)return!0;n=n.parentElement}return!!e.closest(".lake-prevent-card-activated")||!!e.closest(".ant-popover-placement-top")}(e.target,De())||e.target&&e.target.closest(".lake-editor"))){if(e.target.closest("a.wording-comment-link")){var t=e.target.closest("a").href;if(t)return window.open(t)}O()}}Object(r.useEffect)((function(){var e=Xe()(O,50);return d&&i&&i.enable_comment&&(s.current=new sn,window.addEventListener("mouseover",E),window.addEventListener("mouseout",C),window.addEventListener("mousedown",S),f&&window.addEventListener("mouseup",_),window.addEventListener("resize",e)),function(){window.removeEventListener("mouseover",E),window.removeEventListener("mouseout",C),window.removeEventListener("mousedown",S),f&&window.removeEventListener("mouseup",_),window.removeEventListener("resize",e)}}),[d,f]);var R,j,P=c.comments.filter((function(e){return e.type===Ye.a.TYPE.WORDING_COMMENT})).map((function(e){return e.selection}));return Object(r.useEffect)((function(){Le(P)}),[P]),{state:{isTranslating:p,isLake:d,selectedInfo:m,tooltipStyles:w(m.selectedRangeRect),creatorStyles:x(m.selectedRangeRect),creatingCommentParagraphId:b.creatingId,paragraphListShowId:b.showingId,activeSeletionId:b.activeSeletionId,ignoreScroll:b.ignoreScroll,doc:n,me:a,litecomment:c},getEngine:o,creatingComment:function(){var e,t,n,r;yn(),e={text:m.text,offset:m.textOffset,pele:Ne(m.paragraphId)},t=e.text,n=e.offset,r=e.pele,s.current&&(s.current.clear(),s.current.draw(r,{text:t,text_offset:n})),k({type:"showCreator"})},createComment:(R=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t);case 2:k({type:"hideCreator"});case 3:case"end":return e.stop()}}),e)})),j=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=R.apply(e,t);function o(e){On(a,n,r,o,i,"next",e)}function i(e){On(a,n,r,o,i,"throw",e)}o(void 0)}))},function(e){return j.apply(this,arguments)}),showList:function(e){O(),yn(),k({type:"showComments",payload:{id:e}})}}};function Rn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pn={};function An(e){var t=Pn.useViewModel(e),n=t.state,r=Object(kt.b)(e.doc);return a.a.createElement("div",{className:st.createContainer,"data-testid":"comment-creator"},a.a.createElement("div",{className:st.editorContainer},a.a.createElement(lt.a,{editor:t.editor,onChange:t.onContentChange,onSubmit:t.createReply,onLoad:t.onLoad})),a.a.createElement("div",{className:st.actions},a.a.createElement(it.a,{disabled:n.isEmpty||n.loading||r,onClick:t.createReply},__("评论"))),r&&a.a.createElement(kt.a,null))}Pn.useViewModel=function(e){var t=e.doc,n=e.selectedInfo,a=e.createComment,o=Rn(Object(r.useState)(!0),2),i=o[0],c=o[1],l=Rn(Object(r.useState)(!1),2),s=l[0],u=l[1],d=Object(r.useMemo)((function(){return new ct.j({belong:t})}),[t.id]);return{state:{doc:t,isEmpty:i,loading:s},onContentChange:function(){c(d.isEmpty())},onLoad:function(){c(d.isEmpty()),d.focus(!1)},createReply:function(){u(!0),d.contentReady().then((function(){a({commentable_type:"Doc",commentable_id:t.id,type:Ye.a.TYPE.WORDING_COMMENT,body_asl:d.getValue(),body:d.getHtml(),format:te.a.FORMAT.LAKE,selection:{paragraph_id:n.paragraphId,text_offset:n.textOffset,text:n.text}}),d.reset(),u(!1)}))},editor:d}},An.propTypes={doc:i.a.object,selectedInfo:i.a.object,createComment:i.a.func};var Tn=An;var Dn=Object(c.c)((function(e){return{me:e.me,doc:e.doc,book:e.book,litecomment:e.litecomment}}))((function(e){var t=Sn(e),n=t.state;return!n.isLake||n.isTranslating?null:Be.a.createPortal(a.a.createElement(a.a.Fragment,null,"none"!==n.creatorStyles.display?a.a.createElement("div",{className:qe,style:n.creatorStyles},a.a.createElement(Tn,{doc:n.doc,selectedInfo:n.selectedInfo,createComment:t.createComment})):null,a.a.createElement("div",{className:Fe,style:n.tooltipStyles,onClick:t.creatingComment},a.a.createElement("div",{className:Ue},a.a.createElement(ze.a,{className:Ve,name:"comments",width:16,height:16}))),a.a.createElement(Kt,{showList:t.showList,activeSeletionId:n.activeSeletionId,ignoreScroll:n.ignoreScroll,paragraphListShowId:n.paragraphListShowId,selectedInfo:n.selectedInfo,doc:n.doc,me:n.me,litecomment:n.litecomment,dispatch:e.dispatch,getEngine:t.getEngine})),De())})),Mn=n(351),Nn=n(2110),Ln=function(e){var t=e.doc,n=e.book,a=e.group,o=e.showHeaderMeta,i=e.initContents,c=e.onViewportLayoutChange,l=e.review,s=e.getTOCContainer,u=Object(r.useRef)(null),d=Object(r.useRef)(null),f=Object(r.useRef)(null),p=Object(r.useRef)(null),h=Object(r.useRef)(null),m=function(){h.current&&h.current.clear()};return Object(r.useEffect)((function(){return p.current=Object(Nn.b)(),p.current.on(Nn.a.SCROLL,(function(e){var t=e.paragraph_id,n=e.text,r=e.text_offset;if(t&&f.current){var a=f.current.findElementById(t);try{h.current=sn.scrollAndDraw({paragraph:a,text:n,text_offset:r}),h.current||He.a.warn(__("内容有更新，选区已丢失"))}catch(e){console.log(e.message)}}})),window.addEventListener("click",m,!0),function(){window.removeEventListener("click",m),p.current&&p.current.removeAllListeners()}}),[]),{state:{doc:t,book:n,group:a,showHeaderMeta:o,headerRef:u,contentRef:d,review:l},initContents:i,transformFormat:function(e){if("html"===e.format&&e.content)try{var t=Object(Mn.k)(e.content).value;e.content=t,e.format="lake"}catch(e){}},getEditorMeta:function(e){var t="";return t=e.abilities&&e.abilities.update?"OWNER":e.is_paid?"PAID":"UNPAID",{premium:{price:e.premium_price,daysCount:e.premium_days_count,role:t,expired:e.premium_expired},skylark:{docID:e.id}}},initEngine:function(e){f.current=e},getEngine:function(){return f.current},onViewportLayoutChange:c,getTOCContainer:s}},In=n(3921);function Bn(e){var t,n=Ln(e),o=n.state,i=o.doc,c=o.book,l=o.group,s=o.headerRef,u=o.contentRef,d=window.appData,f=d.settings,p=void 0===f?{}:f,m=d.isPublicCloud,g=d.isAlipayApp,k=d.isDesktopApp,w=d.isDingTalkApp,x=d.isDingTalkMiniApp,_=d.organization;n.transformFormat(i),Object(r.useEffect)((function(){return Object(le.a)(["#main",In.a.content],!0),function(){}}),[i.content,i.content_html]),Object(r.useEffect)((function(){var e=g||k||w||x,t=_&&_.id;if(p.enable_link_interception&&m&&!e&&!t){var n=document.getElementById("content");return n&&n.addEventListener("click",se.a),function(){n&&n.removeEventListener("click",se.a)}}}),[]);var C=window.appData&&window.appData.matchCondition&&window.appData.matchCondition.useLakex;if(!i.loaded)return a.a.createElement("article",{id:"content"},a.a.createElement("div",{className:"typo"},a.a.createElement("div",{className:In.a.loading},a.a.createElement(ce.a,null))));i.audits=i.audits||(null===(t=window.appData.doc)||void 0===t?void 0:t.audits);var O="lake"===i.format&&C?null:In.a.lakeFallback;return a.a.createElement("article",{id:"content",className:h()("article-content",O),tabIndex:0,style:{outlineStyle:"none"}},a.a.createElement("div",{ref:u,className:"ne-doc-major-viewer"},"lake"===i.format&&C&&a.a.createElement(a.a.Fragment,null,a.a.createElement(fe.b,{key:"doc-".concat(i.id),id:"doc-".concat(i.id),content:i.content,genAnchor:!0,genOutline:!0,header:function(){return s.current},onReady:function(t){window.__engine=t,ue.a.initScrollbarPosition({top:60}),window.location.hash||v.a.letReaderFocusToMemorizedPosition(i.id),Te(),n.initContents(t.getRenderDOMNode(),t.getViewerContext()),n.initEngine(t),e.onReady(t)},onViewportLayoutChange:n.onViewportLayoutChange,doc:i,book:c,group:l,scene:e.scene,headingFolding:e.headingFolding,tileRendering:!0,meta:n.getEditorMeta(i),theme:y.a.getTheme(i,c),getTOCContainer:n.getTOCContainer,imageLazyLoad:!0,optimizeGlobalViewerCopy:!0,viewResizeObserver:!0,enableTOC:!0,boundaryTopOffset:60,fallbackLake:!0,enableDynamicTaskList:!0}),a.a.createElement(b.a,{noMessage:!0},a.a.createElement(Dn,{getEngine:n.getEngine}))),"lake"===i.format&&!C&&a.a.createElement(a.a.Fragment,null,a.a.createElement(de.a,{key:"doc-".concat(i.id),id:"doc-".concat(i.id),content:i.content,genAnchor:!0,genOutline:!0,onReady:function(e,t,r){window.__engine=r,ue.a.initScrollbarPosition({top:60}),window.location.hash||v.a.letReaderFocusToMemorizedPosition(i.id),Te(),function(e){var t=[];[Pe(),"".concat(Pe()," > BLOCKQUOTE")].forEach((function(e){["> p","> ul > li","> ol > li","> h1","> h2","> h3","> h4","> h5","> h6"].forEach((function(n){t.push("".concat(e," ").concat(n))}))}));var n=Oe(document.querySelectorAll(t.join(",")));n.forEach((function(t){t.innerText&&t.innerText.trim()&&(t.dataset.wording="true",(!t.hasAttribute("data-lake-id")||t.getAttribute("data-lake-id").indexOf("_p_0")>1)&&t.setAttribute("data-lake-id",e.generateElementID(t)))}))}(r),n.initContents(e,t),n.initEngine(r)},doc:i,book:c,group:l,scene:e.scene,enableDeferredRendering:!0,meta:n.getEditorMeta(i),theme:y.a.getTheme(i,c)}),a.a.createElement(b.a,{noMessage:!0},a.a.createElement(Dn,{getEngine:n.getEngine}))),"lake"!==i.format&&a.a.createElement(he,{html:i.content_html,format:i.format,key:"doc-".concat(i.id),id:"doc-".concat(i.id),onReady:function(e){n.initContents(e)}})),a.a.createElement(re.a,{className:h()("article-content-reward",In.a.reward)},a.a.createElement(E.a,{type:"Doc",targetId:i.id,likeStatus:i.like.actioned,likeCount:i.like.count,size:"defaultWithBubble"})))}Bn.defaultProps={initContents:function(){},onReady:function(){},scene:"other"},Bn.propTypes={showHeaderMeta:i.a.bool,doc:i.a.object.isRequired,book:i.a.object.isRequired,review:i.a.object,group:i.a.object,initContents:i.a.func,scene:i.a.oneOf(["doc","other"]),onViewportLayoutChange:i.a.func,getTOCContainer:i.a.func,headingFolding:i.a.bool,onReady:i.a.func};var zn=Object(b.b)(Bn,!0),Fn=(n(101),n(26)),Un=n(27),Vn=n.n(Un),qn=n(1760),Hn=n(562),Wn={wrapper:"ReaderMeta-module_wrapper_GsEmw",reportBtn:"ReaderMeta-module_reportBtn_aC9km",readers:"ReaderMeta-module_readers_LNdps",fadein:"ReaderMeta-module_fadein_8SWCC",flash:"ReaderMeta-module_flash_nVAvN"};function Yn(e){return Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yn(e)}function Gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xn(e,t){return Xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Xn(e,t)}function Kn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qn(e);if(t){var a=Qn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Zn(this,n)}}function Zn(e,t){if(t&&("object"===Yn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $n(e)}function $n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qn(e){return Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Qn(e)}function Jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var er=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&Xn(e,t)}(i,e);var t,n,r,o=Kn(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Jn($n(t=o.call(this,e)),"loadReaders",(function(){var e=t.props,n=e.doc,r=e.book;t.state.readersLoaded||t.props.dispatch({type:"proxy.web/docs.readers",payload:{data:{slug:n.slug,book_id:r.id}}}).then((function(e){t.setState({readers:e,readersLoaded:!0})}))})),Jn($n(t),"renderReadCountTip",(function(){var e=t.props.doc.hits||0,n=__("文档浏览次数：{num}",{num:e});return t.showReaders?a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,n),t.renderReaders()):a.a.createElement("p",null,n)})),Jn($n(t),"showReportEntry",(function(){var e=t.props,n=e.doc,r=e.book,a=e.group,o=e.me;return window.appData.isPublicCloud&&n.user_id!==o.id&&(Object(Hn.a)(a,r,n)||Object(Hn.b)(window.appData.share,r,n))})),t.state={readers:[],readersLoaded:!1};var n=e.pageType,r=e.doc;return t.showReaders=y.a.canViewReaders(n,{doc:r,group:window.appData.group}),t}return t=i,(n=[{key:"renderReaders",value:function(){var e=this.state.readers;return 0===e.length?null:a.a.createElement("div",{className:Wn.readers},e.map((function(e,t){return t<=30?a.a.createElement("span",{key:e.id,className:Wn.user},t>0&&__("、")," ",e.name):null})),a.a.createElement("span",null," ",__("已读")))}},{key:"render",value:function(){var e=this,t=this.props,n=t.doc,r=t.book,o=t.showUpdateTime,i=this.props.showAuthor;return a.a.createElement("div",{className:"".concat(Wn.wrapper)},a.a.createElement("div",{className:"meta-left"},a.a.createElement(x.a.Contributors,{doc:n,showAuthor:i,showType:"doc"}),o&&a.a.createElement("div",{className:"meta-item"},a.a.createElement(Fn.a,{title:__("更新于 {time}",{time:Vn()(new Date(n.content_updated_at)).format("YYYY-MM-DD HH:mm:ss")}),placement:"topLeft"},a.a.createElement("span",{className:"larkicon larkicon-clock"}),a.a.createElement("span",{className:"item-text"},a.a.createElement(at.a,{time:n.content_updated_at})))),a.a.createElement("div",{className:"meta-item"},a.a.createElement(Fn.a,{title:this.renderReadCountTip(),placement:"topLeft",onVisibleChange:function(t){!0===t&&e.showReaders&&e.loadReaders()}},a.a.createElement("span",{className:"larkicon larkicon-read"}),a.a.createElement("span",{className:"item-text"},n.hits||0))),r.enable_comment&&a.a.createElement("div",{className:"meta-item"},a.a.createElement(Fn.a,{title:__("共有 {num} 条评论",{num:n.comments_count||0}),placement:"topLeft"},a.a.createElement("span",{className:"larkicon larkicon-comments"}),a.a.createElement("span",{className:"item-text"},n.comments_count||0))),this.showReportEntry()&&a.a.createElement(qn.a,{targetId:n.id,targetType:"Doc"},(function(e){return a.a.createElement("div",{className:h()("meta-item",Wn.reportBtn),style:{marginLeft:12},onClick:e.onShowPanel},a.a.createElement("span",null,__("投诉")))}))))}}])&&Gn(t.prototype,n),r&&Gn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.PureComponent);er.defaultProps={showAuthor:!0,showUpdateTime:!0,pageType:"read"},er.propTypes={doc:i.a.object,book:i.a.object,me:i.a.object,group:i.a.object,showAuthor:i.a.bool,showUpdateTime:i.a.bool,pageType:i.a.oneOf(["read","share"])};var tr=Object(b.b)(Object(c.c)((function(e){return e}))(Object(re.b)(er))),nr=n(516),rr=n(251),ar="ReaderPager-module_wrapper_+AO4o",or="ReaderPager-module_pager_nf+xn",ir="ReaderPager-module_prev_y8tja",cr="ReaderPager-module_label_iB2NP",lr="ReaderPager-module_labelIcon_7qX8p",sr="ReaderPager-module_next_ywuMj",ur="ReaderPager-module_title_K0oRy";function dr(e){var t=e.book,n=e.doc.pager||{},r=n.prev,o=n.next;if(!r&&!o)return null;var i=null,c=null;return r&&(i=r.slug?"/".concat(t.namespace,"/").concat(r.slug):r.url),o&&(c=o.slug?"/".concat(t.namespace,"/").concat(o.slug):o.url),a.a.createElement("div",{className:ar},r&&a.a.createElement("a",{href:i,rel:r.slug?null:"noreferrer noopener",draggable:!1,className:h()(or,ir),"data-testid":"pager-prev"},a.a.createElement("div",{className:cr},a.a.createElement(nr.a,{className:lr}),__("上一篇")),a.a.createElement("h6",{className:ur},r.title))||a.a.createElement("div",null),o&&a.a.createElement("a",{href:c,rel:o.slug?null:"noreferrer noopener",draggable:!1,className:h()(or,sr),"data-testid":"pager-next"},a.a.createElement("div",{className:cr},__("下一篇"),a.a.createElement(rr.a,{className:lr})),a.a.createElement("h6",{className:ur},o.title)))}dr.propTypes={doc:i.a.object.isRequired,book:i.a.object.isRequired};var fr=dr,pr=n(3818),hr=n(3843),mr=n(3844),gr=n(2287),vr=n(290),yr=n(3554),br="ReaderSignupGuide-module_topOnboardingBanner_M3UfI",kr="ReaderSignupGuide-module_larkLogo_BYTUf",wr="ReaderSignupGuide-module_leftSection_qHweR",xr="ReaderSignupGuide-module_rightSection_at9Jp",_r="ReaderSignupGuide-module_closeButton_TKgxp";function Er(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Cr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Or(e){var t=e.user,n=Er(Object(r.useState)(!0),2),o=n[0],i=n[1],c=window.appData.group.isPaid,l=Object(yr.b)("doc_reader_top_onboarding"),s=!t.id&&!l;if(!o||c||!s||window.appData.forbidLoginCard)return null;var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"register",t=arguments.length>1?arguments[1]:void 0;Object(vr.a)("c66252.".concat(t)),window.location.href="/".concat(e,"?goto=").concat(encodeURIComponent(window.location.href),"&source=topBanner")};return a.a.createElement(gr.a,{onChange:function(e){e&&Object(vr.b)("c66252")}},a.a.createElement("div",{className:br},a.a.createElement("div",{className:wr},a.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/XuVpGqBFxXplzvLjJBZB.svg",alt:"语雀",className:kr}),a.a.createElement("div",null,a.a.createElement("h5",null,__("加入语雀，获得更好的阅读体验")),a.a.createElement("p",null,__("{register} 或 {login} 后可以收藏本文随时阅读，还可以关注作者获得最新文章推送",{register:a.a.createElement(it.a,{className:"readerSignupGuideRegister",type:"link",onClick:function(){u("register","d136310")}},__("注册")),login:a.a.createElement(it.a,{className:"readerSignupGuideLogin",type:"link",onClick:function(){u("login","d136311")}},__("登录"))})))),a.a.createElement("div",{className:xr},a.a.createElement(it.a,{type:"primary",onClick:function(){u("login","d136314")}},__("立即加入"))),a.a.createElement("div",{className:_r,onClick:function(){i(!1),Object(yr.a)("doc_reader_top_onboarding")}},a.a.createElement("span",{className:"larkicon larkicon-close"}))))}Or.propTypes={user:i.a.object};var Sr=a.a.memo(Or),Rr="ReaderTitleMeta-module_meta_Ky4MP",jr="ReaderTitleMeta-module_metaTime_k+mKU",Pr=function(e){var t=e.doc,n=y.a.getDocContributors(t);return a.a.createElement("div",{className:Rr,key:"meta"},a.a.createElement(x.a.Contributors,{doc:t,showAuthor:!0}),n.length>0&&a.a.createElement("span",null," · "),a.a.createElement("span",{className:jr},a.a.createElement(at.a,{time:t.published_at})))};Pr.propTypes={doc:i.a.object.isRequired};var Ar=Pr,Tr={wrapper:"DocReader-module_wrapper_t3Z8X",header:"DocReader-module_header_xAOtU",comment:"DocReader-module_comment_eDglS",info:"DocReader-module_info_yXA4e",title:"DocReader-module_title_fXOQi",content:"DocReader-module_content_AcIMy",selectedBadge:"DocReader-module_selectedBadge_C3ECZ",meta:"DocReader-module_meta_gZvM4",blockUserSelect:"DocReader-module_blockUserSelect_JTiem",tipWrap:"DocReader-module_tipWrap_j06P3",premiumInfoContainer:"DocReader-module_premiumInfoContainer_kQ+sl",action:"DocReader-module_action_amsPU",premiumInfo:"DocReader-module_premiumInfo_iTn7c",iconContainer:"DocReader-module_iconContainer_9OojK",reward:"DocReader-module_reward_CmZHM",fadein:"DocReader-module_fadein_6PJBc",flash:"DocReader-module_flash_XFTDl"};function Dr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Nr=Q.ua.macos,Lr=Object(r.lazy)((function(){return Promise.resolve().then(n.bind(null,3776))})),Ir=function(e){var t=e.group,n=e.book,o=e.doc,i=e.isShare,c=e.shouldRenderPager,l=void 0===c||c,s=e.shouldRenderComments,u=e.scene,d=e.headingFolding,f=Dr(Object(r.useState)(!1),2),p=f[0],m=f[1],v=Dr(Object(r.useState)(!1),2),b=v[0],k=v[1],w=Dr(Object(r.useState)((function(){return y.a.getTheme(o,n).viewport||te.a.VIEWPORT.fixed})),2),_=w[0],E=w[1],C=Dr(Object(r.useState)(!1),2),S=C[0],R=C[1],j=Dr(Object(r.useState)(!1),2),P=j[0],A=j[1],T=Object(r.useRef)(null),D=Object(r.useRef)(null),M=Object(r.useRef)(null),N=Object(r.useRef)();N.current=function(){return S};var L=Object(r.useRef)();L.current=function(){return _};var I=Object(r.useRef)();I.current=function(){return P};var B,z,F,U=Object(r.useCallback)((function(){m(b||!1)}),[b]),V=Object(r.useCallback)((function(){m(!1),k(!1)}),[]),q=Object(r.useCallback)((function(){m(!0),k(!0)})),H=function(e,t){if(!e||!t){var n=M.current.getBoundingClientRect();e=e||n.width,t=t||n.left}var r=document.documentElement,a=function(e,t){var n=0;N.current()&&(n=280),I.current()&&(n=305);var r=n?"".concat(n,"px"):"auto";if(L.current()===te.a.VIEWPORT.fixed){var a=window.innerWidth,o=(a-J)/2,i=Math.max(n,o);o>=oe?r="calc((100vw - ".concat(J,"px) / 2)"):a>=991&&(e>=J+i?r="".concat(i,"px"):e>=J&&(r="".concat(Math.max(n,e-J),"px")))}var c="center";return t>n?c="right":t<n&&(c="left"),{viewerCenterAlignRight:r,sideDir:c,rightOffset:n,maxSideOffset:Math.max(t,n)}}(e,t),o=a.viewerCenterAlignRight,i=a.sideDir,c=a.maxSideOffset,l=a.rightOffset;r.style.setProperty("--viewer-center-align-right",o),r.style.setProperty("--viewer-center-align-value","auto"===o?"0px":o),r.style.setProperty("--viewer-center-table-placeholder-left-flex","left"===i?"1":"0"),r.style.setProperty("--viewer-center-left-max-offset","left"===i?"".concat(c,"px"):"0"),r.style.setProperty("--viewer-center-table-placeholder-right-flex","right"===i?"1":"0"),r.style.setProperty("--viewer-center-right-max-offset","right"===i?"".concat(c-l,"px"):"0")},W=Object(r.useCallback)((function(e){var t=e.layout,n=e.isTOCOpened,r=e.isTOCPinned,a=n&&r;E(t),R(a)}),[]);return Object(r.useEffect)((function(){var e=function(e){var t=e.detail.visible;A(t)};return window.addEventListener("contentSidebarVisibleChange",e),function(){window.removeEventListener("contentSidebarVisibleChange",e)}}),[]),Object(r.useEffect)((function(){var e=new ResizeObserver(g()((function(e){var t=e[0];t&&H(t.contentRect.width,t.contentRect.left)}),400));return e.observe(M.current),H(),function(){e.disconnect()}}),[]),Object(r.useEffect)((function(){H()}),[_,S,P]),a.a.createElement("div",{className:Tr.wrapper,onClick:function(e){var t=e.target.closest("a"),n=Nr?e.metaKey:e.ctrlKey;if(t&&t.href&&!n){var r=new URL(t.href,window.location.href),a=new URL(window.location.href),o=r.hash;if(r.hash="",a.hash="",o&&r.toString()===a.toString()){e.preventDefault();var i,c=o.slice(1);try{i=document.querySelector("[id='".concat(decodeURIComponent(c),"']"))}catch(e){console.log(e)}if(i){window.location.hash=o,i.scrollIntoView();var l=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;window.scrollTo(0,l-59)}}}},onMouseLeave:U,onMouseUp:V,"data-doc-layout":_,"data-doc-toc":S,"data-doc-sidebar":P,ref:M},a.a.createElement("div",{className:h()(Tr.main)},a.a.createElement("div",{className:Tr.content},a.a.createElement("div",{className:Tr.header},a.a.createElement(mr.a,{showClose:!0}),a.a.createElement("div",{className:Tr.tipWrap},a.a.createElement(x.a.DraftTip,{doc:o}),a.a.createElement(O.a,{key:"audits",doc:o,type:"Doc"})),a.a.createElement("div",null,a.a.createElement(Sr,{user:window.appData.me}),!!o.premium_paid_user_count&&a.a.createElement(Z.a,{className:Tr.premiumInfoContainer},a.a.createElement($.a,{span:20},a.a.createElement("div",{className:Tr.premiumInfo},a.a.createElement(ae.a.PremiumIcon,{width:18,height:18}),__("有 {premium_paid_user_count} 人付费阅读了全文，共获得 {premium_income} 元创收。",{premium_paid_user_count:o.premium_paid_user_count,premium_income:o.premium_income}))),a.a.createElement($.a,{className:Tr.action,span:4},a.a.createElement("a",{href:"/settings/order",target:"_blank"},__("查看详情")))),a.a.createElement("div",{className:Tr.title},a.a.createElement(x.a.ArticleTitle,{title:o.title,key:"title"}),o.selected_at&&a.a.createElement("span",{className:Tr.selectedBadge,"data-text":"语雀精选"})),e.showHeaderMeta&&a.a.createElement(Ar,{key:"doc-".concat(o.id,"-meta"),doc:o}))),a.a.createElement("div",{onMouseDown:q},a.a.createElement(zn,{doc:o,book:n,group:t,onReady:function(e){D.current=e},scene:u,headingFolding:d,getTOCContainer:function(){return T&&T.current},showHeaderMeta:e.showHeaderMeta,initContents:e.initContents,onViewportLayoutChange:W})),a.a.createElement("div",{className:h()(Tr.info)},a.a.createElement("div",{className:Tr.meta},a.a.createElement(tr,{doc:o,book:n,pageType:i?"share":"read"})),a.a.createElement(re.a,null,a.a.createElement(pr.a,{book:n,group:t,doc:o})),l&&a.a.createElement("div",{className:h()((B={},z=Tr.blockUserSelect,F=p,z in B?Object.defineProperty(B,z,{value:F,enumerable:!0,configurable:!0,writable:!0}):B[z]=F,B))},a.a.createElement(fr,{doc:o,book:n})))),a.a.createElement("div",{ref:T}),s&&a.a.createElement("div",{className:h()(Tr.comment)},a.a.createElement(re.a,null,a.a.createElement(r.Suspense,{fallback:a.a.createElement("div",null)},a.a.createElement(Lr,{key:o.id,target:o,targetType:"Doc",book:n,group:t,isShare:i,getViewEngine:function(){return D.current},onCreateComment:e.onCreateComment,withCornerBubble:!0}))))),a.a.createElement(hr.a,null),o.loaded&&a.a.createElement(ne.a,{center:!0,className:Tr.footer}))};Ir.propTypes={initContents:i.a.func,group:i.a.object.isRequired,book:i.a.object.isRequired,doc:i.a.object.isRequired,isShare:i.a.bool,showHeaderMeta:i.a.bool,shouldRenderPager:i.a.bool.isRequired,shouldRenderComments:i.a.bool.isRequired,onCreateComment:i.a.func,scene:i.a.oneOf(["doc","other"]),headingFolding:i.a.bool};var Br=a.a.memo(Ir),zr=n(3827),Fr=n(3826),Ur=n(3834),Vr=n(3835);function qr(e){var t=e.className,n=void 0===t?"":t,r=e.doc,o=e.group,i=e.book,c=e.isShare,l=e.showHeaderMeta,s=e.review,u=e.shouldRenderPager,d=e.shouldRenderComments,f=e.asideWrapperWidth,p=e.headingFolding;return r.loaded?r.error?a.a.createElement(zr.a,{error:r.error,asideWidth:f}):["Doc","Sheet","Table","Mind","Board","Show"].includes(r.type)?a.a.createElement("div",{className:n},"Doc"===r.type&&a.a.createElement(Br,{key:"doc-content-".concat(r.id),group:o,book:i,doc:r,review:s,scene:"doc",isShare:c,showHeaderMeta:l,shouldRenderPager:u,shouldRenderComments:d,headingFolding:p,onCreateComment:function(){e.dispatch({type:"doc/addCommentCount"})}}),"Sheet"===r.type&&a.a.createElement(B,{key:"doc-content-".concat(r.id),history:e.history,match:e.match,group:o,book:i,doc:r,isShare:c}),"Table"===r.type&&a.a.createElement(K,{key:"doc-content-".concat(r.id),history:e.history,match:e.match,group:o,book:i,doc:r,isShare:c}),("Mind"===r.type||"Board"===r.type)&&a.a.createElement(Ur.a,{key:"doc-content-".concat(r.id),group:o,book:i,doc:r,isShare:c,dispatch:e.dispatch}),"Show"===r.type&&a.a.createElement(Vr.a,{group:o,book:i,doc:r,isShare:c,dispatch:e.dispatch}),a.a.createElement(k.a,{mark:"finish-doc-render"})):a.a.createElement(a.a.Fragment,null,r.content):a.a.createElement(Fr.a,null)}qr.propTypes={className:i.a.string,group:i.a.object.isRequired,book:i.a.object.isRequired,doc:i.a.object.isRequired,review:i.a.object,layout:i.a.oneOf(["center","adapt"]),isShare:i.a.bool,asideWrapperWidth:i.a.number,showHeaderMeta:i.a.bool,shouldRenderPager:i.a.bool,shouldRenderComments:i.a.bool,history:i.a.object,match:i.a.object,dispatch:i.a.func,headingFolding:i.a.bool};var Hr=Object(b.b)(Object(l.withRouter)(Object(c.c)((function(e){return{review:e.review}}))(qr)),!0),Wr="BookReader-module_wrapper_s6Jdt",Yr="BookReader-module_docTypographyClassic_tUB5r",Gr="BookReader-module_content_BGKYX",Xr="BookReader-module_docContainer_mQ3Tk",Kr="BookReader-module_sheetContainer_WtnSp";function Zr(e){return Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zr(e)}function $r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jr(e,t){return Jr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Jr(e,t)}function ea(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ra(e);if(t){var a=ra(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ta(this,n)}}function ta(e,t){if(t&&("object"===Zr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return na(e)}function na(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ra(e){return ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ra(e)}function aa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&Jr(e,t)}(i,e);var t,n,r,o=ea(i);function i(){var e;$r(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return aa(na(e=o.call.apply(o,[this].concat(n))),"handlePageScroll",g()((function(t){3!==t.eventPhase&&v.a.saveReadPosition(e.props.doc.id)}),300)),e}return t=i,(n=[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handlePageScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handlePageScroll)}},{key:"render",value:function(){var e=this.props,t=e.group,n=e.book,r=e.doc,o=e.history,i=e.isShare,c=e.shouldRenderPager,l=void 0===c||c,s=e.scene,u="classic"===y.a.getTheme(r,n).typography,d={Doc:Xr,Sheet:Kr,Mind:Kr,Show:Kr,Table:Kr};return a.a.createElement("div",{className:h()([Wr],aa({},Yr,u)),"data-testid":"content"},a.a.createElement("div",{className:Gr,id:"main"},a.a.createElement(Hr,{key:r.slug,className:d[r.type],doc:r,group:t,headingFolding:!0,book:n,isShare:i,history:o,scene:s,showHeaderMeta:this.props.showHeaderMeta,shouldRenderPager:l,shouldRenderComments:this.props.shouldRenderComments,dispatch:this.props.dispatch})))}}])&&Qr(t.prototype,n),r&&Qr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component);oa.propTypes={history:i.a.object.isRequired,group:i.a.object.isRequired,book:i.a.object.isRequired,doc:i.a.object.isRequired,isShare:i.a.bool,showHeaderMeta:i.a.bool,shouldRenderPager:i.a.bool.isRequired,shouldRenderComments:i.a.bool.isRequired,scene:i.a.oneOf(["doc","other"]),dispatch:i.a.func};var ia=oa,ca="ShareReader-module_wrapper_1mMxn",la=function(e){var t=e.group,n=e.book,o=e.doc,i=e.isShare,c=e.history,l=e.dispatch,s=e.showHeaderMeta;return Object(r.useEffect)((function(){Object(le.a)(["#main-shared"],!0)}),[]),a.a.createElement("div",{className:ca,id:"main-shared"},a.a.createElement(Hr,{key:"doc-content-".concat(o.id),doc:o,group:t,book:n,isShare:i,history:c,headingFolding:!0,showHeaderMeta:s,shouldRenderPager:!1,shouldRenderComments:n.enable_comment,dispatch:l}))};la.propTypes={group:i.a.object.isRequired,book:i.a.object.isRequired,doc:i.a.object.isRequired,showHeaderMeta:i.a.bool,isShare:i.a.bool,history:i.a.object,dispatch:i.a.func};var sa=la,ua=(n(195),n(121)),da=n(156),fa=n(283),pa=n(2084),ha=n.n(pa),ma=n(224),ga=n.n(ma),va=n(84),ya=n.n(va),ba=n(2799),ka=n(15),wa=n(350),xa=n(944),_a=n(2226),Ea=(n(179),n(98)),Ca=(n(394),n(257)),Oa=n(181),Sa=n(3146),Ra=n(2822),ja=n(553),Pa=n(285),Aa=(n(2708),n(2275)),Ta=(n(73),n(38)),Da=n(104),Ma=n.n(Da),Na=n(119),La={item:"CardItem-module_item_rmABT",moreBtnWrapper:"CardItem-module_moreBtnWrapper_5fnuy",moreBtnVisible:"CardItem-module_moreBtnVisible_Jx9MM",content:"CardItem-module_content_x2RrQ",cover:"CardItem-module_cover_BYt95",title:"CardItem-module_title_idAHm",fadein:"CardItem-module_fadein_oYHJH",flash:"CardItem-module_flash_4rdfS"};function Ia(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ba(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ba(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var za=function(e){var t,n,o,i=e.url,c=e.doc,s=e.book,u=e.highlighted,d=Ia(Object(r.useState)(!1),2),f=d[0],p=d[1],m=Ia(Object(r.useState)(!1),2),g=m[0],v=m[1],b=y.a.moreActionsInReadPageListTocItem(s),k=s.abilities&&s.abilities.create_doc,w=a.a.createElement(ua.a,{type:"menu",visible:f,onVisibleChange:function(e){p(e),v(e)},overlayStyle:{minWidth:126},trigger:["click"],placement:"bottomLeft",align:{offset:[-22,0]},arrowPointAtCenter:!0,hideWhenInactive:!0,content:a.a.createElement("div",{onClick:function(e){return e.stopPropagation()}},a.a.createElement(xa.a,{book:s,doc:c,commands:b,commandParams:{doc:c},onSelect:function(){p(!1),v(!1)},onCommandsExecuted:function(t){var n=t.cmd;n===ka.a.DOC.edit_meta.cmd&&e.showDocMetaEditor(c),n===ka.a.DOC.copy.cmd&&e.showDocCopier(c),n===ka.a.DOC.move.cmd&&e.showDocMover(c),n===ka.a.DOC.delete_with_toc.cmd&&e.showDocDelete(c),n===ka.a.CATALOG.remove.cmd&&e.showCatalogRemove(c)}}))},a.a.createElement("div",{className:h()(La.moreBtnWrapper,(t={},n=La.moreBtnVisible,o=g,n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t)),onClick:function(e){return e.stopPropagation()}},a.a.createElement(ze.a,{className:h()(La.moreBtn),name:"catalog-more",width:16})));return a.a.createElement("div",{className:h()(La.item,"sortable-item",{"list-catalog-active-item":u}),draggable:k&&!window.h5},a.a.createElement(l.NavLink,{to:i,draggable:!1},a.a.createElement("div",{className:La.content},a.a.createElement("div",{style:{backgroundImage:"url('".concat(c.cover||"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*4fEHR5S2oaQAAAAAAAAAAAAAARQnAQ","')")},className:La.cover,draggable:"false"}),a.a.createElement("div",{className:La.title},a.a.createElement(x.a.Title,{doc:c,hasDraftSign:s.abilities.create_doc})),k&&w)))};za.propTypes={url:i.a.string,doc:i.a.object,book:i.a.object,highlighted:i.a.bool,showDocMetaEditor:i.a.func,showDocCopier:i.a.func,showDocMover:i.a.func,showDocDelete:i.a.func,showCatalogRemove:i.a.func};var Fa=za,Ua=n(3825),Va=n(96),qa=n(1778),Ha=n(1974),Wa="BookCatalogList-module_wrapper_fKT2E",Ya="BookCatalogList-module_centerList_Yh1Bq",Ga="BookCatalogList-module_modalTitleDesc_j9F1A",Xa="BookCatalogList-module_modalTitle_g9zkc",Ka="BookCatalogList-module_fullBleedHeight_94otx";function Za(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function $a(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Za(o,r,a,i,c,"next",e)}function c(e){Za(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Qa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ja(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ja(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ja(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function to(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var no=Ta.a.confirm,ro=new Ma.a("bookCatalogList:error"),ao=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),to(this,"_commands",Object.create(null))}var t,n,r;return t=e,n=[{key:"dipose",value:function(){this._commands=Object.create(null)}},{key:"registerCommand",value:function(e,t){var n=this;return this._commands[e]=t,function(){delete n._commands[e]}}},{key:"executeCommand",value:function(e){var t=this._commands[e];"function"!=typeof t&&ro("Invalid command with:",e);for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return t.apply(void 0,r)}}],n&&eo(t.prototype,n),r&&eo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var oo=a.a.forwardRef((function(e,t){var n=e.book,o=e.group,i=e.currentDocSlug,c=e.centerItems,l=n.toc,s=n.docs,u=function(e,t){var n=e.book,o=e.currentDocSlug,i=e.dispatch,c=e.onMoveToStagingBox,l=n.docs,s=n.toc,u=Qa(Object(r.useState)(!1),2),d=u[0],f=u[1],p=Qa(Object(r.useState)(null),2),h=p[0],m=p[1],g=Qa(Object(r.useState)(""),2),v=g[0],b=g[1],k=Object(r.useRef)(new ao),w=k.current.registerCommand.bind(k.current),x=k.current.executeCommand.bind(k.current),_=Object(r.useMemo)((function(){return l.reduce((function(e,t){return e[t.id]=t,e}),{})}),[l]),E=Object(r.useMemo)((function(){return l.reduce((function(e,t){return e[t.slug]=t,e}),{})}),[l]);function C(e){return e?s.find((function(t){return t.doc_id===e.id})):null}var O=Object(r.useMemo)((function(){return C(h)}),[s,h]);function S(){return(S=$a(regeneratorRuntime.mark((function e(t,r){var a,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.index,r!==a){e.next=3;break}return e.abrupt("return");case 3:return o=s[a].uuid,c=s[r].uuid,e.next=7,Va.webProxy.catalogNodes.update({action:r<a?Oa.ACTIONS.moveBefore:Oa.ACTIONS.moveAfter,book_id:n.id,format:"list",node_uuid:o,target_uuid:c});case 7:l=e.sent,i({type:"book/updateToc",payload:l});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){var e=document.querySelector(".list-catalog-active-item");e&&(e.scrollIntoView(),f(!0))}function j(e){var t=e===s.length-1?s[e-1]:s[e+1],n=new URL(window.location.href);n.pathname=n.pathname.replace(o,t.url),window.location.href=n.toString()}function P(){return(P=$a(regeneratorRuntime.mark((function e(t){var r,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.updateDocMeta(t,h);case 2:r=e.sent,b(""),(a=n.docs.findIndex((function(e){return e.id===r.id})))>-1&&((c=n.docs.slice()).splice(a,1,r),i({type:"book/updateDocs",payload:c})),o===r.slug&&i({type:"doc/update",payload:r});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=$a(regeneratorRuntime.mark((function e(){var t,r,a,c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=C(h)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,wa.a.updateNode(n,{node_uuid:t.uuid,action:"destroy"});case 5:r=e.sent,a=r.toc,c=r.deletedDocIds,l=s,(u=c[0])&&i({type:"book/updateDocs",payload:n.docs.filter((function(e){return e.id!==u}))}),i({type:"book/updateToc",payload:a}),o===t.url&&j(l.findIndex((function(e){return e.uuid===t.uuid})));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return T=$a(regeneratorRuntime.mark((function e(){var t,r,c,l,s,u,d,f,p,g,v=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v.length>0&&void 0!==v[0]?v[0]:{},r=C(h)){e.next=4;break}return e.abrupt("return");case 4:return c=t.targetGroup,l=t.targetBook,s="/".concat(c.login,"/").concat(l.slug),e.prev=6,e.next=9,Va.webProxy.catalogNodes.move({book_id:n.id,node_uuid:r.uuid,target_uuid:t.target_uuid,action:t.action,target_book_id:t.targetBook.id,with_children:!1,insert_to_catalog:t.insert_to_catalog,doc_id:r.doc_id},{useOriginResp:!0,ignoreGlobalMessage:!0});case 9:u=e.sent,d=n.toc,f=u.data,p=l.id===n.id,i({type:"book/updateToc",payload:f}),p||(g=u.meta.docIds[0])&&i({type:"book/updateDocs",payload:n.docs.filter((function(e){return e.id!==g}))}),p?He.a.success(__("移动成功")):He.a.success(__("已移动到：{target}",{target:a.a.createElement("a",{href:s,target:"_blank"},l.name)}),3),p||o!==r.url||j(d.findIndex((function(e){return e.uuid===r.uuid}))),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),ro("book catalog list move error",e.t0),He.a.error(__("出错了，可尝试在 {targetBookNode} 找到文档",{targetBookNode:a.a.createElement("a",{href:"/g".concat(s,"/toc?tempStore=1"),target:"_blank"},__("暂存箱"))}));case 23:return e.prev=23,m(null),b(""),e.finish(23);case 27:case"end":return e.stop()}}),e,null,[[6,19,23,27]])}))),T.apply(this,arguments)}function D(){return D=$a(regeneratorRuntime.mark((function e(){var t,r,o,c,l,s,u,d,f,p,g=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g.length>0&&void 0!==g[0]?g[0]:{},r=C(h)){e.next=4;break}return e.abrupt("return");case 4:return o=t.targetBook,c=t.targetGroup,l="/".concat(c.login,"/").concat(o.slug),e.prev=6,e.next=9,Va.webProxy.catalogNodes.copy({book_id:n.id,node_uuid:r.uuid,target_uuid:t.target_uuid,action:t.action,target_book_id:t.targetBook.id,with_children:!1,insert_to_catalog:t.insert_to_catalog,doc_id:r.doc_id},{useOriginResp:!0});case 9:if(s=e.sent,!(u=o.id===n.id)){e.next=20;break}if(!(d=s.meta.docIds[0])){e.next=18;break}return e.next=16,Va.webProxy.docs.findOne({id:d,book_id:n.id});case 16:(f=e.sent)&&i({type:"book/updateDocs",payload:[f].concat(n.docs)});case 18:p=s.data,i({type:"book/updateToc",payload:p});case 20:u?He.a.success(__("复制成功")):He.a.success(__("已复制到：{target}",{target:a.a.createElement("a",{href:"/".concat(l),target:"_blank"},o.name)}),3),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(6),ro("book catalog list copy error",e.t0),He.a.error(__("出错了，可尝试在 {targetBookNode} 找到文档",{targetBookNode:a.a.createElement("a",{href:"/g".concat(l,"/toc?tempStore=1"),target:"_blank"},__("暂存箱"))}));case 27:return e.prev=27,m(null),b(""),e.finish(27);case 31:case"end":return e.stop()}}),e,null,[[6,23,27,31]])}))),D.apply(this,arguments)}return w("changeMeta:start",(function(e){m(e),b("changeMeta")})),w("move:start",(function(e){m(e),b("move")})),w("copy:start",(function(e){m(e),b("copy")})),w("delete:start",(function(e){m(e);var t=C(e);t&&no({width:437,centered:!0,title:__("确认删除 {name} 吗？",{name:t.title}),onOk:function(){x("delete:submit")},okText:__("确认"),cancelText:__("取消")})})),w("remove:start",(function(e){m(e);var t,r=C(e);r&&no({width:437,centered:!0,title:__("确认要移动至 暂存箱 吗？"),onOk:(t=$a(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wa.a.updateNode(n,{node_uuid:r.uuid,action:"remove"});case 2:t=e.sent,a=t.toc,i({type:"book/updateToc",payload:a}),"function"==typeof c&&c(r);case 6:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),okText:__("确认"),cancelText:__("取消")})})),w("changeMeta:submit",(function(e){return P.apply(this,arguments)})),w("delete:submit",(function(){return A.apply(this,arguments)})),w("move:submit",(function(){return T.apply(this,arguments)})),w("copy:submit",(function(){return D.apply(this,arguments)})),w("move:cancel",(function(){m(null),b("")})),w("copy:cancel",(function(){m(null),b("")})),w("changeMeta:cancel",(function(){m(null),b("")})),Object(r.useEffect)((function(){d||R()}),[l]),Object(r.useImperativeHandle)(t,(function(){return{scrollToCurrent:R}})),{state:{docIdMap:_,docSlugMap:E,actionModalType:v,selectedDoc:h,selectedTocItem:O},handleSortCatalog:function(e,t){return S.apply(this,arguments)},executeCommand:x}}(e,t),d=u.handleSortCatalog,f=u.executeCommand,p=u.state,m=p.docSlugMap,g=p.selectedDoc,v=p.selectedTocItem,b=p.actionModalType;if(!s.length)return null;var k="changeMeta"===b,w="move"===b,x="copy"===b,_=y.a.moreActionsInReadPageListTocItem(n);return a.a.createElement("div",{className:Wa},l.length>0&&a.a.createElement(Aa.a,{className:h()(Ka,to({},Ya,c)),"data-testid":"lite-doc-list",onSort:d},n.layout===Na.BOOK_LAYOUT.Card&&l.map((function(e){var t=m[e.url];if(!t)return null;var r="/".concat(n.namespace,"/").concat(e.url);return a.a.createElement(Fa,{key:e.id,url:r,doc:t,book:n,group:o,highlighted:i===e.url,showDocMetaEditor:function(e){f("changeMeta:start",e)},showDocCopier:function(e){f("copy:start",e)},showDocMover:function(e){f("move:start",e)},showDocDelete:function(e){f("delete:start",e)},showCatalogRemove:function(e){f("remove:start",e)}})})),n.layout===Na.BOOK_LAYOUT.Column&&l.map((function(e){var t=m[e.url];return t?a.a.createElement(Ua.a,{key:e.id,actions:_,book:n,doc:t,highlighted:i===e.url,useMiniLayout:!0,showDocMetaEditor:function(e){f("changeMeta:start",e)},showDocCopier:function(e){f("copy:start",e)},showDocMover:function(e){f("move:start",e)},showDocDelete:function(e){f("delete:start",e)},showCatalogRemove:function(e){f("remove:start",e)}}):null}))),k&&a.a.createElement(Ta.a,{width:514,visible:!0,title:__("文档设置"),footer:null,onCancel:function(){return f("changeMeta:cancel")},bodyStyle:{maxHeight:"90vh",overflow:"auto",paddingTop:16}},a.a.createElement(qa.a,{doc:g,book:n,group:o,save:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.apply(void 0,["changeMeta:submit"].concat(t))},hideMoreInfo:!0})),x&&a.a.createElement(Ta.a,{width:600,visible:!0,footer:null,onCancel:function(){return f("copy:cancel")}},a.a.createElement("h4",{className:Xa},__("复制到...")),a.a.createElement("p",{className:Ga},__("可复制到有创建文档权限的知识库")),a.a.createElement(Ha.a,{currentGroup:o,currentBook:n,showRepoSelector:!0,items:null!=v&&v.uuid?[{uuid:v.uuid}]:[],submitType:"copy",mode:"doc",onSubmit:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.apply(void 0,["copy:submit"].concat(t))},onCancel:function(){return f("copy:cancel")}})),w&&a.a.createElement(Ta.a,{width:600,visible:!0,footer:null,onCancel:function(){return f("move:cancel")}},a.a.createElement("h4",{className:Xa},__("移动到...")),a.a.createElement("p",{className:Ga},__("可移动到有创建文档权限的知识库，移动后原文档链接会失效")),a.a.createElement(Ha.a,{currentGroup:o,currentBook:n,showRepoSelector:!0,items:null!=v&&v.uuid?[{uuid:v.uuid}]:[],submitType:"move",mode:"doc",onSubmit:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.apply(void 0,["move:submit"].concat(t))},onCancel:function(){return f("move:cancel")}})))}));oo.propTypes={book:i.a.object.isRequired,group:i.a.object,currentDocSlug:i.a.string.isRequired,centerItems:i.a.bool,onMoveToStagingBox:i.a.func},oo.displayName="BookCatalogList";var io=Object(c.c)(null,null,null,{forwardRef:!0})(oo),co="CatalogTreeCollapseTrigger-module_actionItem_ym+tH";function lo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return so(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return so(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function so(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uo(e){var t=function(e){var t=lo(Object(r.useState)(!1),2),n=t[0],a=t[1];return{state:{isFolded:n},handleFoldAll:function(){a(!0),e.onFoldAll()},handleUnfoldAll:function(){a(!1),e.onUnfoldAll()}}}(e);return a.a.createElement(a.a.Fragment,null,t.state.isFolded?a.a.createElement(Fn.a,{title:__("全部展开"),getPopupContainer:function(e){return e}},a.a.createElement("span",{className:co,onClick:t.handleUnfoldAll},a.a.createElement(ze.a,{name:"catalog-expand",width:16}))):a.a.createElement(Fn.a,{title:__("全部折叠"),getPopupContainer:function(e){return e}},a.a.createElement("span",{className:co,onClick:t.handleFoldAll},a.a.createElement(ze.a,{name:"catalog-fold",width:16}))))}function fo(){}uo.defaultProps={onFoldAll:fo,onUnfoldAll:fo},uo.propTypes={onFoldAll:i.a.func,onUnfoldAll:i.a.func};var po=uo,ho=(n(144),n(37)),mo="SearchTrigger-module_actionItem_tXVzI",go="SearchTrigger-module_searchContainer_f3aHf",vo="SearchTrigger-module_searchInput_Di+kJ",yo="SearchTrigger-module_prefixIconWrapper_T2pJ8";function bo(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function ko(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xo(e){var t=e.book,n=e.loadData,a=e.history,o=e.onSearchSelect,i=ko(Object(r.useState)(!1),2),c=i[0],l=i[1],s=ko(Object(r.useState)(!1),2),u=s[0],d=s[1],f=Object(r.useMemo)((function(){var e=ja.a.shouldShowTempStoreBox(t);return t.docs.filter((function(n){return!!e||!Object(Sa.isDocInTempStore)(n,t.toc)})).map((function(e){return{label:e.title,value:e.id}}))}),[t.docs]),p=Object(r.useMemo)((function(){return t.docs.reduce((function(e,t){return e[t.id]=t,e}),{})}),[t.docs]),h=function(){var e,r=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.docs.length){e.next=13;break}return e.prev=1,d(!0),e.next=5,n();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),He.a.error(e.t0.message);case 10:return e.prev=10,d(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){bo(o,r,a,i,c,"next",e)}function c(e){bo(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return{state:{inputVisible:c,searchOptions:f,isLoading:u},handleTriggerClick:function(){l(!0)},handleBlur:function(){l(!1)},handleFocus:h,handleOptionSelect:function(e){var n=p[e],r="/".concat(t.namespace,"/").concat(n.slug);a.push(r),"function"==typeof o&&o(n),l(!1)}}}function _o(e){var t=xo(e),n=t.state,r=n.inputVisible,o=n.searchOptions,i=n.isLoading,c=t.handleTriggerClick,l=t.handleBlur,s=t.handleFocus,u=t.handleOptionSelect;return a.a.createElement(a.a.Fragment,null,r?a.a.createElement("div",{className:go},a.a.createElement(ho.a,{className:vo,notFoundContent:i?a.a.createElement(Ea.a,{size:"small",delay:100}):null,showArrow:!1,autoFocus:!0,allowClear:!0,showSearch:!0,optionFilterProp:"label",options:o,placeholder:__("搜索"),onFocus:s,onBlur:l,onChange:u}),a.a.createElement("span",{className:yo},a.a.createElement(ze.a,{name:"nav-search",width:16}))):a.a.createElement(Fn.a,{title:__("搜索标题"),getPopupContainer:function(e){return e}},a.a.createElement("span",{className:mo,onClick:c},a.a.createElement(ze.a,{name:"nav-search",width:16}))))}var Eo=_o;_o.propTypes={book:i.a.object.isRequired,history:i.a.object.isRequired,loadData:i.a.func.isRequired,onSearchSelect:i.a.func};var Co=n(843),Oo=n(3207);function So(e){var t=e.activeModalType,n=e.group,r=e.book,o=e.candidateDocIds,i=e.singleCandidateDoc,c=e.onAddSubmitSuccess,l=e.onCopyDocsSuccess,s=e.onMoveDocsSuccess,u=e.onCancel;return a.a.createElement(a.a.Fragment,null,ka.a.CATALOG.add.cmd===t&&a.a.createElement(Oo.a,{silentOperation:!0,docIds:o,group:n,book:r,submitType:"add",hide:u,onSubmit:c}),ka.a.DOC.move.cmd===t&&a.a.createElement(Oo.a,{docIds:o,group:n,book:r,submitType:"move",hide:u,onSubmit:s}),ka.a.DOC.copy.cmd===t&&a.a.createElement(Oo.a,{docIds:o,group:n,book:r,submitType:"copy",hide:u,onSubmit:l}),ka.a.DOC.export_doc.cmd===t&&a.a.createElement(Co.a,{visible:!0,doc:i,bookId:r.id,onCancel:u}))}So.propTypes={activeModalType:i.a.oneOf([ka.a.CATALOG.add.cmd,ka.a.DOC.move.cmd,ka.a.DOC.copy.cmd,ka.a.DOC.export_doc.cmd,null]),book:i.a.object.isRequired,candidateDocIds:i.a.arrayOf(i.a.number).isRequired,singleCandidateDoc:i.a.object,group:i.a.object.isRequired,onCancel:i.a.func.isRequired,onAddSubmitSuccess:i.a.func.isRequired,onCopyDocsSuccess:i.a.func.isRequired,onMoveDocsSuccess:i.a.func.isRequired};var Ro=So,jo=n(221);function Po(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ao(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Po(Object(n),!0).forEach((function(t){To(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Po(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function To(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Do(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Mo(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Do(o,r,a,i,c,"next",e)}function c(e){Do(o,r,a,i,c,"throw",e)}i(void 0)}))}}function No(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Lo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Io(){}function Bo(e){var t=e.group,n=e.book,a=e.docs,o=e.updateDocs,i=void 0===o?Io:o,c=e.updateToc,l=void 0===c?Io:c,s=e.updateDoc,u=void 0===s?Io:s,d=e.onAddToCatalogSuccess,f=void 0===d?Io:d,p=No(Object(r.useState)(null),2),h=p[0],m=p[1],g=No(Object(r.useState)([]),2),v=g[0],y=g[1],b=v[0]&&a.find((function(e){return e.id===v[0]})),k=No(Object(r.useState)(null),2),w=k[0],_=k[1],E=function(){y([])},C=function(e){m(e)},O=function(){m(null)};var S=function(e){t.abilities.update?(y(e.map((function(e){return e.id}))),C(ka.a.DOC.move.cmd)):function(e){Ta.a.warning({title:__("非法操作"),content:__("仅管理员可转移{type}到其它知识库",{type:x.a.getTypeText(e)})})}(e[0].type)},R=function(){var e=Mo(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.docId,r=t.title,e.prev=1,e.next=4,Ze.a.docs.updateMeta({id:n,title:r});case 4:o=a.map((function(e){return n===e.id?Ao(Ao({},e),{},{title:r}):e})),u({docId:n,title:r}),i(o),_(null),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),He.a.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Mo(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.targetBook,l(n.toc),E(),O(),f(b);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Mo(regeneratorRuntime.mark((function e(t){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=t.targetBook).id===n.id?l(r.toc):(o=a.filter((function(e){return!v.includes(e.id)})),i(o)),E(),O();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Mo(regeneratorRuntime.mark((function e(t){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.targetBook,o=t.docs,n.id===r.id&&(i(a.concat(o)),l(r.toc)),E(),O();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{state:{activeModalType:h,candidateDocIds:v,singleCandidateDoc:b,editingDocId:w},showModalByType:C,setCandidateDocIds:y,clearEditing:function(){_(null)},actionExecutor:function(e,r){var o,c,l,s,u,d=r.docs;switch(e){case ka.a.CATALOG.add.cmd:u=d,C(ka.a.CATALOG.add.cmd),y(u.map((function(e){return e.id})));break;case ka.a.DOC.copy.cmd:y(d.map((function(e){return e.id}))),C(ka.a.DOC.copy.cmd);break;case ka.a.DOC.move.cmd:S(d);break;case ka.a.DOC.export_doc.cmd:s=d[0],y([s.id]),C(ka.a.DOC.export_doc.cmd);break;case ka.a.DOC.unshare.cmd:!function(e){y(e.map((function(e){return e.id})));var t=e.filter((function(e){return e.share&&e.share.status===jo.STATUS.active})).map((function(e){return{target_type:"Doc",target_id:e.id}}));if(t.length){var n,r=__("确认关闭这 {count} 个文档的分享吗？",{count:t.length});Ta.a.confirm({title:r,onOk:(n=Mo(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze.a.shares.batchUpdate({targets:t,status:jo.STATUS.inactive});case 2:He.a.success(__("关闭分享成功")),E();case 4:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})})}else He.a.warn(__("请选择开启了分享的文档"))}(d);break;case ka.a.DOC.delete.cmd:c=d.map((function(e){return e.id})),l=__("确认删除这 {count} 个文档？",{count:c.length}),Ta.a.confirm({title:l,content:__("删除后可在知识库回收站中恢复"),onOk:(o=Mo(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze.a.docs.destroyMulti({ids:c,book_id:n.id});case 2:t=a.filter((function(e){return!c.includes(e.id)})),i(t);case 4:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})});break;case ka.a.CATALOG.rename.cmd:!function(e){_(e.id)}(d[0]);break;case ka.a.DOC.edit.cmd:!function(e){Object(Pa.b)("/".concat(t.login,"/").concat(n.slug,"/").concat(e.slug,"/edit"))}(d[0])}},handleCancel:function(){E(),O()},handleAddSubmitSuccess:j,handleCopyDocsSuccess:A,handleMoveDocsSuccess:P,handleEditTitleEnd:R}}Bo.propTypes={group:i.a.object.isRequired,book:i.a.object.isRequired,docs:i.a.arrayOf(i.a.object).isRequired,updateDocs:i.a.func,updateToc:i.a.func,updateDoc:i.a.func};var zo=Bo;function Fo(e){var t=e.children,n=e.group,r=e.book,o=e.docs,i=e.toc,c=e.updateDocs,l=e.updateToc,s=e.updateDoc,u=e.onAddToCatalogSuccess,d=zo({group:n,book:r,docs:o,toc:i,updateDocs:c,updateToc:l,updateDoc:s,onAddToCatalogSuccess:u}),f=d.state,p=f.activeModalType,h=f.candidateDocIds,m=f.singleCandidateDoc,g=f.editingDocId,v=d.actionExecutor,y=d.handleCancel,b=d.clearEditing,k=d.handleAddSubmitSuccess,w=d.handleCopyDocsSuccess,x=d.handleMoveDocsSuccess,_=d.handleEditTitleEnd;return a.a.createElement(a.a.Fragment,null,t({actionExecutor:v,editingDocId:g,clearEditing:b,handleEditTitleEnd:_}),a.a.createElement(Ro,{activeModalType:p,group:n,book:r,candidateDocIds:h,singleCandidateDoc:m,onCancel:y,onAddSubmitSuccess:k,onCopyDocsSuccess:w,onMoveDocsSuccess:x}))}Fo.propTypes={group:i.a.object.isRequired,book:i.a.object.isRequired,docs:i.a.arrayOf(i.a.object).isRequired,toc:i.a.arrayOf(i.a.object).isRequired,updateDocs:i.a.func.isRequired,updateToc:i.a.func.isRequired,updateDoc:i.a.func.isRequired};var Uo=Fo,Vo=(n(151),n(35));function qo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ho(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ho(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ho(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wo(e){var t=e.children,n=e.book,o=e.doc,i=e.actionExecutor,c=e.onVisibleChange,l=qo(Object(r.useState)(!1),2),s=l[0],u=l[1],d=y.a.adminActions(n,o,!0);return a.a.createElement(ua.a,{type:"menu",overlayStyle:{minWidth:126},trigger:["click"],arrowPointAtCenter:!0,hideWhenInactive:!0,visible:s,onVisibleChange:function(e){u(e),"function"==typeof c&&c(e)},content:a.a.createElement(Vo.a,{onClick:function(e){e.domEvent.preventDefault(),e.domEvent.stopPropagation(),u(!1),e.key!==ka.a.DOC.divide&&i(e.key,{docs:[o]})}},d.map((function(e){return e.cmd===ka.a.DOC.divide.cmd?null:a.a.createElement(Vo.a.Item,{key:e.cmd},e.title)})))},t)}Wo.propTypes={book:i.a.object.isRequired,doc:i.a.object.isRequired,actionExecutor:i.a.func.isRequired,onVisibleChange:i.a.func};var Yo=Wo,Go=(n(75),n(25));function Xo(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Ko(e){var t=e.isEditing,n=e.clearEditing,a=e.onEditEnd,o=e.title,i=e.docId,c=Object(r.useRef)(null),l=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=t.target.value)!==o){e.next=4;break}return n(),e.abrupt("return");case 4:if(r){e.next=9;break}return He.a.error(__("名称不能为空")),c.current.focus(),n(),e.abrupt("return");case 9:return e.next=11,a({docId:i,title:r});case 11:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Xo(o,r,a,i,c,"next",e)}function c(e){Xo(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return{inputRef:c,handleKeyUp:function(e){"Escape"!==e.key&&27!==e.keyCode||l(e)},handleEditEnd:l,handleFocus:function(e){t&&e.target.select()}}}function Zo(e){var t=e.doc,n=e.url,r=e.isEditing,o=e.onEditEnd,i=e.clearEditing,c=Ko({docId:t.id,title:t.title,clearEditing:i,onEditEnd:o}),s=c.inputRef,u=c.handleFocus,d=c.handleKeyUp,f=c.handleEditEnd;return r?a.a.createElement(Go.a,{ref:s,autoFocus:!0,defaultValue:t.title,onPressEnter:f,onKeyUp:d,onBlur:f,onFocus:u}):a.a.createElement(l.NavLink,{to:n,draggable:!1,onClick:function(e){if(e.metaKey){e.preventDefault();var t=document.createElement("a");t.setAttribute("target","_blank"),t.setAttribute("href",n),t.click()}}},t.title)}Zo.defaultProps={onEditEnd:function(){}},Zo.propTypes={url:i.a.string.isRequired,doc:i.a.object.isRequired,isEditing:i.a.bool.isRequired,clearEditing:i.a.func.isRequired,onEditEnd:i.a.func};var $o=Zo,Qo="TempStoreListItem-module_listItem_kaDsW",Jo="TempStoreListItem-module_title_LDRmX",ei="TempStoreListItem-module_actionsCont_7LItv",ti="TempStoreListItem-module_addTrigger_JcMKO",ni="TempStoreListItem-module_menuTrigger_hp1Y0",ri="TempStoreListItem-module_slugActive_bMYvP",ai="TempStoreListItem-module_actionsContFocus_WgqJa";function oi(e){return a.a.createElement(Fn.a,{placement:"top",mouseEnterDelay:1,title:__("添加到目录")},a.a.createElement("a",{onClick:e.onAddToCatalog,className:ti},a.a.createElement(ze.a,{name:"add-to-catalog",width:14,height:14})))}oi.propTypes={onAddToCatalog:i.a.func.isRequired};var ii=oi;function ci(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function li(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return si(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return si(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function si(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ui(e){var t,n=e.book,o=e.doc,i=e.actionExecutor,c=e.isEditing,l=e.isSlugActive,s=e.clearEditing,u=e.onEditEnd,d=function(e){var t=e.book,n=e.doc,a=e.actionExecutor,o=y.a.adminActions(t,n,!0),i="/".concat(t.namespace,"/").concat(n.slug),c=o.length>0,l=li(Object(r.useState)(!1),2),s=l[0],u=l[1];return{state:{url:i,actionsVisible:c,focused:s,actions:o},handleAddToCatalog:function(){return a(ka.a.CATALOG.add.cmd,{docs:[n]})},handleMenuVisibleChange:function(e){u(e)}}}(e),f=d.state,p=f.url,m=f.focused,g=f.actionsVisible,v=d.handleMenuVisibleChange,b=d.handleAddToCatalog;return a.a.createElement("div",{className:h()(Qo,(t={},ci(t,ri,l),ci(t,"tempstore-list-active-item",l),t))},a.a.createElement("div",{className:Jo},a.a.createElement($o,{isEditing:c,url:p,doc:o,clearEditing:s,onEditEnd:u})),a.a.createElement("div",{className:h()(ei,ci({},ai,m))},a.a.createElement(ii,{onAddToCatalog:b}),g&&a.a.createElement(Yo,{book:n,doc:o,actionExecutor:i,onVisibleChange:v},a.a.createElement("span",{className:ni},a.a.createElement(ze.a,{name:"catalog-more",width:16})))))}ui.defaultProps={onEditEnd:function(){}},ui.propTypes={actionExecutor:i.a.func.isRequired,book:i.a.object.isRequired,doc:i.a.object.isRequired,isSlugActive:i.a.bool.isRequired,isEditing:i.a.bool.isRequired,clearEditing:i.a.func.isRequired,onEditEnd:i.a.func};var di=a.a.memo(ui),fi="TempStoreList-module_tempStoreList_aWKoy";function pi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mi=a.a.forwardRef((function(e,t){var n=e.group,o=e.book,i=e.currentDocSlug,c=e.onAddToCatalogSuccess,l=function(e,t){var n=e.book,a=e.dispatch,o=e.currentDocSlug,i=n.docs||[],c=n.toc||[],l=pi(Object(r.useState)(!1),2),s=l[0],u=l[1],d=Object(r.useMemo)((function(){return Object(Sa.tempStoreDocsOrderByDefault)(i.filter((function(e){return Object(Sa.isDocInTempStore)(e,c)})))}),[c,i]);function f(){var e=document.querySelector(".tempstore-list-active-item");e&&(e.scrollIntoView(),u(!0))}return Object(r.useEffect)((function(){s||f()}),[d]),Object(r.useImperativeHandle)(t,(function(){return{scrollToCurrent:f}})),{state:{docs:i,tempStoreDocs:d,toc:c},upateDocs:function(e){a({type:"book/updateDocs",payload:e})},updateToc:function(e){a({type:"book/updateToc",payload:e})},updateDoc:function(e){var t=e.docId,n=e.title,r=i.find((function(e){return e.id===t}));r&&r.slug===o&&a({type:"doc/update",payload:{title:n}})}}}(e,t),s=l.state,u=l.upateDocs,d=l.updateToc,f=l.updateDoc;return a.a.createElement("div",{className:fi},s.tempStoreDocs.map((function(e){return a.a.createElement(Uo,{key:e.id,group:n,book:o,docs:o.docs,toc:o.toc,updateDocs:u,updateToc:d,updateDoc:f,onAddToCatalogSuccess:c},(function(t){var n=t.actionExecutor,r=t.editingDocId,c=t.handleEditTitleEnd,l=t.clearEditing,s=r===e.id,u=e.slug===i;return a.a.createElement(di,{isSlugActive:u,isEditing:s,book:o,doc:e,actionExecutor:n,onEditEnd:c,clearEditing:l})}))})))}));mi.propTypes={group:i.a.object.isRequired,book:i.a.object.isRequired,currentDocSlug:i.a.string.isRequired,onAddToCatalogSuccess:i.a.func},mi.displayName="TempStoreList";var gi=Object(c.c)(null,null,null,{forwardRef:!0})(mi),vi={asiderTab:"BookCatalog-module_asiderTab_0aJLs",asideActionsCont:"BookCatalog-module_asideActionsCont_31lvb",asideActions:"BookCatalog-module_asideActions_NXLy1",actionItem:"BookCatalog-module_actionItem_gOq-V",asideCatalog:"BookCatalog-module_asideCatalog_Kjk-Z",asideCatalogTree:"BookCatalog-module_asideCatalogTree_+5n8X",asideDocList:"BookCatalog-module_asideDocList_2Y9wm",columnToc:"BookCatalog-module_columnToc_sdd8H",cardToc:"BookCatalog-module_cardToc_BHHq5",fullBleedHeight:"BookCatalog-module_fullBleedHeight_ZJ7FZ",fadein:"BookCatalog-module_fadein_gHXtk",flash:"BookCatalog-module_flash_F6yhA"};function yi(e){return yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yi(e)}function bi(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function ki(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){bi(o,r,a,i,c,"next",e)}function c(e){bi(o,r,a,i,c,"throw",e)}i(void 0)}))}}function wi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xi(e,t){return xi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xi(e,t)}function _i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oi(e);if(t){var a=Oi(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ei(this,n)}}function Ei(e,t){if(t&&("object"===yi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ci(e)}function Ci(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oi(e){return Oi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Oi(e)}function Si(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ri=Ca.a.TabPane,ji="catalog",Pi="tempStore",Ai=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&xi(e,t)}(c,e);var t,n,r,o,i=_i(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),Si(Ci(t=i.call(this,e)),"getTempStoreDocs",ki(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props.book,e.next=3,Ze.a.docs.find({book_id:n.id,only_order_by_id:!0});case 3:return r=e.sent,a=r.filter((function(e){return Object(Sa.isDocInTempStore)(e,n.toc)})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))),Si(Ci(t),"getBookDocs",function(){var e=ki(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.props.book,n){e.next=6;break}return e.next=4,Ze.a.docs.find({book_id:t.props.book.id,only_order_by_id:!0,include_user:wa.a.shouldShowColumnToc(r)});case 4:n=e.sent,t.props.dispatch({type:"book/updateDocs",payload:n});case 6:return t.setState({bookDocs:n}),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Si(Ci(t),"getSlugFromUrl",(function(e){var n=t.props.book,r=3;n.namespace&&n.namespace.startsWith("books/share/")&&(r=4);var a=e.pathname.split("/")[r];if(a&&a.trim())return a=a.trim()})),Si(Ci(t),"handleFoldAll",(function(){t.catalogViewer&&t.catalogViewer.foldAll()})),Si(Ci(t),"handleUnfoldAll",(function(){t.catalogViewer&&t.catalogViewer.unfoldAll()})),Si(Ci(t),"handleTabChange",function(){var e=ki(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.setState({activeTabKey:n}),n!==Pi||t.props.book.docs.length){e.next=13;break}return t.setState({isTempStoreLoading:!0}),e.prev=3,e.next=6,t.getBookDocs();case 6:t.setState({isTempStoreLoading:!1}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),He.a.error(e.t0.msg),t.setState({isTempStoreLoading:!1});case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()),Si(Ci(t),"handleOtherCmd",(function(e){var n=e.key,r=t.props,a=r.book,o=r.doc;if(n===ka.a.BOOK.bookSettings.cmd){var i=encodeURIComponent("/".concat(a.namespace,"/").concat(o.slug));Object(Pa.b)("/".concat(a.namespace,"/settings/basic?fromUrl=").concat(i))}})),Si(Ci(t),"handleCatalogScrollToTop",(function(){var e=t.props.book;if(wa.a.shouldShowToc(e))var n=setTimeout((function(){var e;null===(e=t.catalogViewer)||void 0===e||e.scrollToTop(),clearTimeout(n)}),300)})),Si(Ci(t),"handleCatalogScrollToCurrent",(function(){var e,n=t.props.book;if(wa.a.shouldShowToc(n))var r=setTimeout((function(){var e;null===(e=t.catalogViewer)||void 0===e||e._scrollToCurrentNode(),clearTimeout(r)}),300);else null===(e=t.bookCatalogList)||void 0===e||e.scrollToCurrent()})),Si(Ci(t),"handleTempStoreScrollToCurrent",(function(){var e;if(0!==t.props.book.docs.length)null===(e=t.tempStoreList)||void 0===e||e.scrollToCurrent();else var n=setTimeout((function(){var e;null===(e=t.tempStoreList)||void 0===e||e.scrollToCurrent(),clearTimeout(n)}),200)})),Si(Ci(t),"revealDoc",(function(e){Object(Sa.isDocInTempStore)(e,t.props.book.toc)&&ja.a.shouldShowTempStoreBox(t.props.book)?t.state.activeTabKey!==Pi?t.setState({activeTabKey:Pi},(function(){t.handleTempStoreScrollToCurrent()})):t.handleTempStoreScrollToCurrent():t.state.activeTabKey!==ji?t.setState({activeTabKey:ji},(function(){t.handleCatalogScrollToCurrent()})):t.handleCatalogScrollToCurrent()})),Si(Ci(t),"handleSearchSelect",(function(e){t.revealDoc(e)})),Si(Ci(t),"handleAddToCatalogSuccess",(function(e){He.a.success(__("已成功添加到目录"));var n="/".concat(t.props.book.namespace,"/").concat(e.slug);t.props.history.push(n)})),Si(Ci(t),"handleMoveToStagingBoxSuccess",(function(e){if("DOC"===e.type&&t.state.currentDocSlug===e.url){var n="/".concat(t.props.book.namespace,"/").concat(t.state.currentDocSlug);t.props.history.push(n)}})),t.state={currentDocSlug:e.currentDocSlug,bookDocs:e.book.docs,activeTabKey:null,isTempStoreLoading:!1},t}return t=c,n=[{key:"componentDidMount",value:(o=ki(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.book,r=t.history,a=t.doc,(o=Object(Sa.isDocInTempStore)(a,n.toc))&&ja.a.shouldShowTempStoreBox(n)?(this.setState({activeTabKey:Pi}),this.props.onTabChange(Pi)):(this.setState({activeTabKey:ji}),this.props.onTabChange(ji)),!wa.a.shouldShowToc(n)){e.next=9;break}if(!o){e.next=7;break}return e.next=7,this.getBookDocs();case 7:e.next=11;break;case 9:return e.next=11,this.getBookDocs();case 11:r.listen(function(){var e=ki(regeneratorRuntime.mark((function e(t,n){var r,a,o,c,l,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.pathname&&n){e.next=2;break}return e.abrupt("return");case 2:if(r=i.getSlugFromUrl(t),i.setState({currentDocSlug:r}),a=i.props.book.toc.find((function(e){return e.url===r})),!(o=!!a)||i.state.activeTabKey===ji){e.next=11;break}c={id:a.doc_id},i.revealDoc(c),e.next=22;break;case 11:if(o||i.state.activeTabKey===Pi){e.next=22;break}if(i.props.book.docs.length){e.next=20;break}return e.next=15,i.getBookDocs();case 15:l=e.sent,s=l.find((function(e){return e.slug===r})),i.revealDoc(s),e.next=22;break;case 20:u=i.props.book.docs.find((function(e){return e.slug===r})),i.revealDoc(u);case 22:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.props.onReady&&this.props.onReady(this);case 13:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"componentDidUpdate",value:function(e,t){var n=this.props.book,r=e.book.docs,a=void 0===r?[]:r,o=this.props.book.docs,i=void 0===o?[]:o;wa.a.shouldShowToc(n)||a.length===i.length||this.getBookDocs(i),t.activeTabKey!==this.state.activeTabKey&&this.props.onTabChange(this.state.activeTabKey)}},{key:"createTitle",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.activeCatalogTab;null===(e=this.catalogViewer)||void 0===e||e.onAction({target_uuid:null,action:Oa.ACTIONS.insert,type:Oa.TYPES.title}),r&&this.setState({activeTabKey:ji},(function(){t.handleCatalogScrollToTop()}))}},{key:"createLink",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.activeCatalogTab;null===(e=this.catalogViewer)||void 0===e||e.showCatalogLinkForm({target_uuid:null,action:Oa.ACTIONS.insert,type:Oa.TYPES.title,onSubmit:function(){r&&t.setState({activeTabKey:ji},(function(){t.handleCatalogScrollToTop()}))}})}},{key:"renderTempStoreTabName",value:function(){return a.a.createElement(Fn.a,{placement:"topLeft",mouseEnterDelay:1,title:__("仅成员可见，存放不在目录上的文档")},__("暂存箱"))}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.book,o=n.group,i=n.doc,c=n.history,l=y.a.asideMoreActionsInReadPage(r),s=wa.a.shouldShowToc(r),u=wa.a.shouldShowColumnToc(r),d=ja.a.shouldShowTempStoreBox(r),f=this.state.currentDocSlug,p=this.state.activeTabKey===ji;return a.a.createElement(re.a,{className:vi.fullBleedHeight},a.a.createElement(Ca.a,{className:vi.asiderTab,activeKey:this.state.activeTabKey,onChange:this.handleTabChange,tabBarExtraContent:a.a.createElement("div",{className:vi.tabBarExtraContent},a.a.createElement("div",{className:vi.asideActionsCont},s&&p&&a.a.createElement(po,{onFoldAll:this.handleFoldAll,onUnfoldAll:this.handleUnfoldAll}),a.a.createElement(Eo,{group:o,book:r,history:c,loadData:this.getBookDocs,onSearchSelect:this.handleSearchSelect}),r.abilities&&r.abilities.create_doc&&a.a.createElement("div",{className:vi.asideActions},l.length>0&&a.a.createElement(ua.a,{type:"menu",overlayStyle:{minWidth:126},trigger:["click"],placement:"bottomLeft",align:{offset:[-22,-3]},arrowPointAtCenter:!0,hideWhenInactive:!0,content:a.a.createElement(xa.a,{book:r,doc:i,commands:l,commandParams:{can_export_multiple:!0},onSelect:this.handleOtherCmd})},a.a.createElement("span",{className:vi.actionItem},a.a.createElement(ze.a,{name:"catalog-more",width:16}))))))},a.a.createElement(Ri,{tab:__("目录"),key:ji},a.a.createElement("div",{id:"aside-list-wrapper",className:h()(vi.asideCatalog,(e={},Si(e,vi.asideCatalogTree,s),Si(e,vi.asideDocList,!s),Si(e,vi.columnToc,u),Si(e,vi.cardToc,!s&&!u),e))},s?a.a.createElement(Ra.a,{ref:function(e){t.catalogViewer=e},className:"catalog",book:r,activeNodeSlug:f,mode:"doc",dispatch:this.props.dispatch,onMoveToStagingBox:this.handleMoveToStagingBoxSuccess}):a.a.createElement(io,{ref:function(e){t.bookCatalogList=e},book:r,docs:this.state.bookDocs,currentDocSlug:f,group:o,centerItems:this.props.centerItems,onMoveToStagingBox:this.handleMoveToStagingBoxSuccess}))),d?a.a.createElement(Ri,{tab:this.renderTempStoreTabName(),key:Pi},a.a.createElement("div",{style:{minHeight:100,paddingTop:8}},a.a.createElement(Ea.a,{delay:100,spinning:this.state.isTempStoreLoading},a.a.createElement(gi,{ref:function(e){t.tempStoreList=e},currentDocSlug:f,group:o,book:r,onAddToCatalogSuccess:this.handleAddToCatalogSuccess})))):null))}}],n&&wi(t.prototype,n),r&&wi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.PureComponent);Ai.defaultProps={onTabChange:function(){}},Ai.propTypes={doc:i.a.object.isRequired,group:i.a.object.isRequired,book:i.a.object.isRequired,history:i.a.object.isRequired,currentDocSlug:i.a.string.isRequired,centerItems:i.a.bool,dispatch:i.a.func,onTabChange:i.a.func};var Ti=Object(c.c)((function(e){return{book:e.book}}))(Object(b.b)(Ai,!0)),Di=n(3915),Mi={wrapper:"ReaderLayout-module_wrapper_l-8F+",higherBackTop:"ReaderLayout-module_higherBackTop_RpYEv",cornerBubble:"ReaderLayout-module_cornerBubble_NhEGn",commentBubble:"ReaderLayout-module_commentBubble_ku3YV",asidePinned:"ReaderLayout-module_asidePinned_owRmW",crumb:"ReaderLayout-module_crumb_wF-5C",crumbName:"ReaderLayout-module_crumbName_miOH9",bookName:"ReaderLayout-module_bookName_7LuCC",groupName:"ReaderLayout-module_groupName_aJtI8",privateIcon:"ReaderLayout-module_privateIcon_zehlB",asideWrapper:"ReaderLayout-module_asideWrapper_+Fdu8",aside:"ReaderLayout-module_aside_WX6k7",asideHead:"ReaderLayout-module_asideHead_dVgz0",asideAdd:"ReaderLayout-module_asideAdd_3Ioni",asideNav:"ReaderLayout-module_asideNav_-Kxml",pinTip:"ReaderLayout-module_pinTip_w+Yhb",pinWrapper:"ReaderLayout-module_pinWrapper_8A7Ri",pinIcon:"ReaderLayout-module_pinIcon_GcQnM",pinIconTrigger:"ReaderLayout-module_pinIconTrigger_Qbpyt",dragbar:"ReaderLayout-module_dragbar_NUlrA",dragging:"ReaderLayout-module_dragging_gY9-f",fadein:"ReaderLayout-module_fadein_Kfqwx",flash:"ReaderLayout-module_flash_ogEp2"};function Ni(e){return Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ni(e)}function Li(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ii(e,t){return Ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ii(e,t)}function Bi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ui(e);if(t){var a=Ui(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return zi(this,n)}}function zi(e,t){if(t&&("object"===Ni(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fi(e)}function Fi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ui(e){return Ui=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ui(e)}function Vi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&Ii(e,t)}(i,e);var t,n,r,o=Bi(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Vi(Fi(t=o.call(this,e)),"initHotKeys",(function(){t.state.asideWidth&&ya()(ga.a.windows?"ctrl+alt+,":"⌘+option+,",(function(e){e.preventDefault(),t.togglePin()}))})),Vi(Fi(t),"getAsideResizable",(function(){return window.innerWidth>991})),Vi(Fi(t),"handleContentSidebarVisibleChange",(function(e){var n=e.detail.visible;t.setState({contentSidebarVisible:n})})),Vi(Fi(t),"handleResize",g()((function(){t.asideResizable=t.getAsideResizable(),t.asideResizable||t.state.asidePinned||t.togglePin(),!t.asideResizable||t.asideResized||t.state.asidePinned||t.setState({asideWidth:t.getAsideWidth(),asideWrapperWidth:t.getAsideWidth()})}),300)),Vi(Fi(t),"handleMouseOverPinIcon",(function(e){t.state.asidePinned&&(e.stopPropagation(),e.preventDefault())})),Vi(Fi(t),"handleMouseDown",(function(){!0!==t.state.asideResizing&&t.setState({asideResizing:!0})})),Vi(Fi(t),"handleMouseUp",(function(){!1!==t.state.asideResizing&&t.setState({asideResizing:!1})})),Vi(Fi(t),"handleMouseMove",(function(e){t.state.asideResizing&&(t.asideResized=!0,t.setAsideWidth(e),window.dispatchEvent(new Event("resize")))})),Vi(Fi(t),"recalculateHeaderStyle",(function(){t.state.asidePinned&&t.forceUpdate()})),Vi(Fi(t),"getCrumbSpace",(function(){return t.crumbRef?t.crumbRef.getBoundingClientRect().width:0})),Vi(Fi(t),"setAsideWidth",(function(e){if(t.asideResizable&&t.asideRef&&!t.state.asidePinned){var n=t.asideRef.getBoundingClientRect(),r=n.width,a=e.clientX-n.left;r>=oe&&e.clientX>n.right?a=oe:r<=ie&&e.clientX<n.right&&(a=ie),t.setState({asidePinned:!1,asideWidth:a,asideWrapperWidth:a})}})),Vi(Fi(t),"togglePin",(function(e){e&&(e.preventDefault(),e.stopPropagation()),t.setState((function(e){var n=e.asideWidth;return e.asidePinned?{asideWrapperWidth:t.asideResizable?n:ie,asidePinned:!1}:{asideWrapperWidth:0,asidePinned:!0}}),(function(){setTimeout((function(){t.recalculateHeaderStyle()}),100)}))})),Vi(Fi(t),"handlePinnedAsideClick",(function(){t.state.asidePinned&&t.togglePin()})),Vi(Fi(t),"onCommandsExecuted",(function(e){e===ka.a.CATALOG.create_title.cmd&&t.bookCatalogRef&&t.bookCatalogRef.createTitle({activeCatalogTab:!0}),e===ka.a.CATALOG.create_link.cmd&&t.bookCatalogRef&&t.bookCatalogRef.createLink({activeCatalogTab:!0})})),Vi(Fi(t),"renderAside",(function(){var e,n=t.props,r=n.group,o=n.book,i=n.doc,c=n.history,l={willChange:"width",transition:"width 200ms cubic-bezier(0.1, 0, 0, 1) 0s",width:t.state.asideWidth,maxWidth:oe,minWidth:ie},s={willChange:"width",transition:"width 200ms cubic-bezier(0.1, 0, 0, 1) 0s",width:t.state.asideWrapperWidth},u=ga.a.windows?"Ctrl+Alt+,":"⌘+Option+,",d=wa.a.shouldShowToc(o);return a.a.createElement("div",{className:h()((e={},Vi(e,Mi.asideWrapper,!0),Vi(e,Mi.asidePinned,t.state.asidePinned),e)),"data-testid":"aside"},t.renderAsideCrumb(),a.a.createElement("div",{className:Mi.aside,style:s},a.a.createElement("div",{className:Mi.asideHead},o.abilities.create_doc&&a.a.createElement(ua.a,{type:"menu",getPopupContainer:function(e){return e.parentNode},visible:t.state.createMenuVisible,onVisibleChange:function(e){return t.setCreateMenuVisible(e)},trigger:["click"],placement:"bottomLeft",align:{offset:[-21,8]},arrowPointAtCenter:!0,hideWhenInactive:!0,content:a.a.createElement(xa.a,{book:o,doc:i,commands:y.a.additionalActionsForNewDoc({canImport:!0,canExport:o.abilities&&o.abilities.export,canCreateCatalogGroup:d,canCreateCatalogLink:d}),commandParams:{insert_to_catalog:!0,action:"prependChild"},onSelect:function(){t.setCreateMenuVisible(!1)},onCommandsExecuted:function(e){var n=e.cmd;t.onCommandsExecuted(n)}})},a.a.createElement("div",{className:Mi.asideAdd},a.a.createElement(fa.a,{style:{color:"#262626"}})))),a.a.createElement("nav",{className:Mi.asideNav,style:l,id:"navBox",ref:function(e){t.asideRef=e}},a.a.createElement(Ti,{doc:i,group:r,book:o,history:c,currentDocSlug:i.slug,centerItems:!wa.a.shouldShowToc(o),onReady:function(e){t.bookCatalogRef=e}}))),a.a.createElement("div",{className:h()([Mi.dragbar],Vi({},Mi.dragging,t.state.asideResizing)),onClick:t.handlePinnedAsideClick,onMouseDown:t.handleMouseDown,onContextMenu:function(e){e.preventDefault()}}),a.a.createElement("div",{className:Mi.pinWrapper},a.a.createElement(Fn.a,{placement:"right",title:t.state.asidePinned?a.a.createElement("span",{className:Mi.pinTip},__("展开"),a.a.createElement("br",null),u):a.a.createElement("span",{className:Mi.pinTip},__("收起"),a.a.createElement("br",null),u)},a.a.createElement("span",{className:h()([Mi.pinIcon]),onMouseOver:t.handleMouseOverPinIcon,onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},onClick:t.togglePin},a.a.createElement("span",{className:h()([Mi.pinIconTrigger])},a.a.createElement(ze.a,{name:"double-arrow-down",width:16}))))))})),t.state={historyView:!1,asideWidth:t.getAsideWidth(),asideWrapperWidth:t.getAsideWidth(),asideResizing:!1,asidePinned:!t.getAsideResizable(),createMenuVisible:!1,contentSidebarVisible:!1},t.lastScrollTop=0,t.delta=5,t.asideResized=!1,t.asideResizable=t.getAsideResizable(),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.initHotKeys(),window.addEventListener("resize",this.handleResize),window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("contentSidebarVisibleChange",this.handleContentSidebarVisibleChange),document.body.classList.add(Mi.higherBackTop),document.body.classList.add("with-miniapp-code")}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("contentSidebarVisibleChange",this.handleContentSidebarVisibleChange),document.body.classList.remove(Mi.higherBackTop)}},{key:"getAsideWidth",value:function(){if(!this.props.withAside)return 0;var e=window.innerWidth;if(e<=991)return 0;var t=Math.max(Math.min(Math.floor(.197*e),oe),ie);return e-t<=1130?ie:t}},{key:"render",value:function(){var e=this,t=this.props,n=t.book,r=t.doc,o=t.space,i=t.children,c=t.withAside,l=this.state,s=l.asidePinned,u=l.asideWrapperWidth,d=l.historyView,f=l.contentSidebarVisible,p=h()(Vi({"doc-head":!0,"doc-type-head":"Doc"===r.type&&!f},Mi.asidePinned,s));return a.a.createElement(ha.a,{title:"".concat(r.title," · ").concat(o.name)},a.a.createElement("div",{className:"lark","data-testid":"reader-main"},a.a.createElement("div",{className:"main-wrapper"},a.a.createElement("div",{className:Mi.wrapper,style:{paddingLeft:s||u}},a.a.createElement(ba.a,{className:p,me:this.props.me,group:this.props.group,book:this.props.book,doc:this.props.doc,key:"doc-header-".concat(r.id),showHistory:function(){e.setState({historyView:!0})},shouldHideLogo:c,shouldShowSeparator:s,style:{left:s?this.getCrumbSpace():u}}),i),d&&a.a.createElement(Di.a,{doc:r,docDomain:"Doc",onCancel:function(){e.setState({historyView:!1})},onReverted:function(){He.a.success(__("恢复成功，正在跳转至编辑页，你可以在确认内容无误后更新文档"),3,(function(){window.location.href="/".concat(n.namespace,"/").concat(r.slug,"/edit")}))}}),c&&this.renderAside())))}},{key:"renderAsideCrumb",value:function(){var e=this,t=this.props,n=t.doc,r=t.group,o=t.book,i=window.appData,c=i.organization,l=i.me,s=this.state,u=s.asidePinned,d=s.asideWrapperWidth,f=o?o.namespace||"".concat(r.login,"/").concat(o.slug):null,p=!(r.abilities&&r.abilities.read),h=(u?oe:d)-(o.public?48:70);return a.a.createElement("div",{className:Mi.crumb,style:{maxWidth:h,borderColor:u&&"Doc"!==n.type&&"#F5F5F5"},ref:function(t){e.crumbRef=t}},a.a.createElement("div",{className:Mi.crumbIcon},a.a.createElement(_a.a,{book:o,doc:n,group:r,organization:c,size:"large"})),a.a.createElement("div",{className:Mi.crumbName},a.a.createElement("div",{className:Mi.bookName},a.a.createElement("a",{href:"/".concat(f)},o.name),(null==l?void 0:l.isAdmin)&&-1===o.status&&a.a.createElement(ze.a,{name:"doc-has-content-risk",width:15,style:{opacity:.375,marginLeft:8}}),a.a.createElement("div",{className:Mi.privateIcon},a.a.createElement(ae.a.AccessScope,{public:o.public,size:14,placement:"bottom"}))),!p&&r&&a.a.createElement("div",{className:Mi.groupName},a.a.createElement("a",{href:"/".concat(r.login)},r.name),(null==l?void 0:l.isAdmin)&&[da.STATUS.banned,da.STATUS.blocked].includes(r.status)&&a.a.createElement(ze.a,{name:"doc-has-content-risk",width:13,style:{opacity:.375,marginLeft:4}}))))}},{key:"setCreateMenuVisible",value:function(e){this.setState({createMenuVisible:e})}}])&&Li(t.prototype,n),r&&Li(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component);qi.propTypes={history:i.a.object,group:i.a.object,book:i.a.object,doc:i.a.object,space:i.a.object,me:i.a.object,children:i.a.node,withAside:i.a.bool};var Hi=Object(c.c)((function(e){return{group:e.group,book:e.book,doc:e.doc,space:e.space,me:e.me}}))(Object(l.withRouter)(qi)),Wi=n(3823),Yi=n(3816);function Gi(){return Gi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gi.apply(this,arguments)}var Xi=function(e){var t=e.book,n=e.location,r=e.doc,o=e.match.params,i=window.appData.sharePage,c=i?"doc_slug":"doc",l=Object(f.a)({book:t,doc:r,query:n.query,slug:o[c],appData:window.appData,dispatch:e.dispatch}),s=l.getQuery();return l.isDocInner()?a.a.createElement(Wi.a,Gi({},e,{docLoaded:r.loaded,scene:"doc"})):l.isDocEmbed()?a.a.createElement(Yi.a,{doc:r,book:e.book,group:e.group,isShare:i,match:e.match,from:s.from}):a.a.createElement(Hi,{withAside:!l.isRenderSingleDoc()},l.isRenderSingleDoc()?a.a.createElement(sa,Gi({shouldRenderComments:l.needRenderComments(),shouldRenderPager:l.needRenderPager(),isShare:i},e)):a.a.createElement(ia,Gi({},e,{scene:"doc",shouldRenderComments:l.needRenderComments(),shouldRenderPager:l.needRenderPager(),isShare:i})))};Xi.propTypes={group:i.a.object.isRequired,book:i.a.object.isRequired,doc:i.a.object.isRequired,location:i.a.object,match:i.a.object,history:i.a.object,dispatch:i.a.func};var Ki=Object(c.c)((function(e){return{group:e.group,book:e.book,doc:e.doc}}))(Object(l.withRouter)(Xi)),Zi=n(3925);function $i(){return $i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$i.apply(this,arguments)}var Qi=new Ma.a("doc:share");function Ji(e){var t=e.group,n=e.book,r=e.doc,o=e.location,i=e.history,c=e.dispatch,l=e.match,s=Object(Zi.a)({share:window.appData.share,doc:r,query:o.query,dispatch:c}),u=s.getQuery();return r.loaded?(Qi("render",u),s.isDocInner()?a.a.createElement(Wi.a,$i({},e,{docLoaded:!0})):s.isDocEmbed()?a.a.createElement(Yi.a,{doc:r,book:n,group:t,match:l,isShare:!0,from:u.from}):a.a.createElement(Hi,{withAside:!1},a.a.createElement(sa,{group:t,book:n,doc:r,history:i,dispatch:c}))):null}Ji.propTypes={group:i.a.object,book:i.a.object,doc:i.a.object,history:i.a.object,location:i.a.object,match:i.a.object,dispatch:i.a.func};var ec=Object(c.c)((function(e){return{group:e.group,book:e.book,doc:e.doc}}))(Object(l.withRouter)(Ji));n(3922);function tc(e){var t=e.history,n=e.doc.type||"Doc";Object(s.a)("pagename","".concat(n.toLowerCase(),"_read"));return a.a.createElement(u.a,{history:t,headless:!0,showSiteTip:!1},a.a.createElement(l.Switch,null,a.a.createElement(l.Route,{exact:!0,path:"/docs/:id/html2lake",component:d.a}),a.a.createElement(l.Route,{exact:!0,path:"/docs/share/:token",component:ec}),a.a.createElement(l.Route,{exact:!0,path:["/__workers/r/online_viewer/preview_doc","/__workers/:group/:book/:doc","/:group/:book/:doc","/books/share/:token/:doc_slug"],component:Ki})))}tc.propTypes={history:i.a.object,doc:i.a.object};t.default=Object(c.c)((function(e){return{doc:e.doc}}))(tc)},2929:function(e,t){e.exports=function(e){return null==e?"":""+e}},293:function(e,t,n){},2932:function(e,t,n){var r=n(2929),a=n(2938),o=String.prototype.trim;e.exports=function(e,t){return e=r(e),!t&&o?o.call(e):(t=a(t),e.replace(new RegExp("^"+t+"+|"+t+"+$","g"),""))}},2933:function(e,t){e.exports={WORKFLOW_EVENT:{error:"error",message:"message",change:"change",saveTitle:"saveTitle",miniExpand:"miniExpand",editableChange:"editableChange",collabUsersChange:"collabUsersChange",editModeChange:"editModeChange",docStatusChange:"docStatusChange",afterSaveSuccess:"afterSaveSuccess",afterPublishSuccess:"afterPublishSuccess",started:"started",afterEditorActive:"afterEditorActive",onPublishSuccess:"onPublishSuccess"},ACTION:{save:"save",publish:"publish"},SAVE_TYPE:{FORCE:1,AUTO:2,USER_SAVE:3,USER_PUBLISH:4,USER_SAVE_AS_VERSION:5,USER_SAVE_AS_TEMPLATE:6},ERROR_CODE:{INIT_FAILED:"INIT_FAILED",SAVE_FAILED:"SAVE_FAILED",PUBLISH_FAILED:"PUBLISH_FAILED",DOC_DELETED:"DOC_DELETED",DOC_NOT_EXIST:"DOC_NOT_EXIST",DOC_SAVE_CONFLICT:"DOC_SAVE_CONFLICT",CACHE_FAILED:"CACHE_FAILED",RENDER_FAILED:"RENDER_FAILED",DISCONNECTED:"DISCONNECTED",CONNECT_COLLAB_SERVER_FAILED:"CONNECT_COLLAB_SERVER_FAILED",LOCK_FAILED:"LOCK_FAILED",LOCKED_BY_COLLAB:"LOCKED_BY_COLLAB",LOCKED_BY_SELF_COLLAB:"LOCKED_BY_SELF_COLLAB",LOCKED_BY_DESKTOP:"LOCKED_BY_DESKTOP",LOCKED_BY_OTHER:"LOCKED_BY_OTHER",LOCKED_BY_VERSIONCONFLICT:"LOCKED_BY_VERSIONCONFLICT",SWITCH_TO_LAKEX:"SWITCH_TO_LAKEX",DATA_ERROR:"DATA_ERROR",COMMAND_ERROR:"COMMAND_ERROR"},MESSAGE:{DOC_PUBLISHED:"DOC_PUBLISHED",DOC_DELETED:"DOC_DELETED",DOC_CACHE_SAVED:"DOC_CACHE_SAVED",SAVE_FAILED:"SAVE_FAILED",SAVING:"SAVING",PUBLISHING:"PUBLISHING",DISCONNECT:"DISCONNECT",UNREADY:"UNREADY",CACHE_FAILED:"CACHE_FAILED",RENDER_BIG_DOCUMENT:"RENDER_BIG_DOCUMENT",BUZY:"BUZY",CLEAR:"CLEAR",EDIT_DISABLE:"EDIT_DISABLE"},DOC_STATUS:{loading:"loading",loaded:"loaded",saving:"saving",saved:"saved",publishing:"publishing",published:"published",changed:"changed",deleted:"deleted"},NET_STATUS:{connecting:"connecting",offline:"offline",connected:"connected"},DOC_DOMAIN:{DOCLET:"Doclet",DOC:"Doc"},DOC_VERSION:{ORIGIN:{manual:1,cache:2}},DOCLET_CATEGORY:{BOOK_INDEX_PAGE:"book_index_page",NOTE:"note",ORG_BOARD:"org_board"},SUMMARY_NODES_COUNT:50,BIG_DOCUMENT_BLOCK_COUNT:200,EDIT_MODE:{LOCK:"lock",COLLAB:"collab",OFFLINE:"offline"},EDIT_SCENE:{NOTE:"note",DESKTOP:"desktop",WEB:"web"}}},2935:function(e,t,n){var r=n(2929),a=n(2954);e.exports=function(e,t,n,o){e=r(e),t=~~t;var i=0;switch(n?n.length>1&&(n=n.charAt(0)):n=" ",o){case"right":return i=t-e.length,e+a(n,i);case"both":return i=t-e.length,a(n,Math.ceil(i/2))+e+a(n,Math.floor(i/2));default:return i=t-e.length,a(n,i)+e}}},2937:function(e,t,n){var r=n(2929);e.exports=function(e,t){e=r(e);var n=t?e.slice(1).toLowerCase():e.slice(1);return e.charAt(0).toUpperCase()+n}},2938:function(e,t,n){var r=n(2946);e.exports=function(e){return null==e?"\\s":e.source?e.source:"["+r(e)+"]"}},2939:function(e,t,n){var r=n(2929);e.exports=function(e){return r(e).split("")}},294:function(e,t,n){},2940:function(e,t,n){var r=n(2929),a=n(2938),o=String.prototype.trimRight;e.exports=function(e,t){return e=r(e),!t&&o?o.call(e):(t=a(t),e.replace(new RegExp(t+"+$"),""))}},2944:function(e,t,n){var r=n(2929);e.exports=function(e){return/^\s*$/.test(r(e))}},2945:function(e,t,n){var r=n(2929);e.exports=function(e){return(e=r(e)).charAt(0).toLowerCase()+e.slice(1)}},2946:function(e,t,n){var r=n(2929);e.exports=function(e){return r(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}},2947:function(e,t,n){var r=n(2929),a="ąàáäâãåæăćčĉęèéëêĝĥìíïîĵłľńňòóöőôõðøśșşšŝťțţŭùúüűûñÿýçżźž",o="aaaaaaaaaccceeeeeghiiiijllnnoooooooossssstttuuuuuunyyczzz";a+=a.toUpperCase(),o=(o+=o.toUpperCase()).split(""),a+="ß",o.push("ss"),e.exports=function(e){return r(e).replace(/.{1}/g,(function(e){var t=a.indexOf(e);return-1===t?e:o[t]}))}},2948:function(e,t,n){var r=n(2939);e.exports=function(e,t,n,a){var o=r(e);return o.splice(~~t,~~n,a),o.join("")}},2949:function(e,t){e.exports=function(e){return e<0?0:+e||0}},295:function(e,t,n){"use strict";n(2070);var r=n(555),a=n(0),o=n.n(a),i=n(1),c=n.n(i),l=n(8),s=n.n(l),u=n(63),d=n.n(u),f=n(209),p=n(98),h=(n(498),["className","emptyView","onLoadMore","dataSource","renderItem","loading","showLoadingMore","pagination","children","justify","customItem","loadMoreText"]);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}function b(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var k=o.a.forwardRef((function(e,t){var n=e.className,a=e.emptyView,i=e.onLoadMore,c=e.dataSource,l=e.renderItem,u=e.loading,d=e.showLoadingMore,m=e.pagination,v=e.children,k=e.justify,w=e.customItem,x=e.loadMoreText,_=void 0===x?Object(f.a)("查看更多"):x,E=b(e,h),C=u;"boolean"==typeof C&&(C={spinning:C});var O=C&&C.spinning,S=c.length&&d?o.a.createElement("div",{className:"larkui-list-block-more"},O&&o.a.createElement(p.a,y({justify:"block"},C)),!O&&o.a.createElement("a",{className:"larkui-list-block-more-btn",onClick:function(e){e.preventDefault(),i&&i()}},_)):null;if(O&&!S)return o.a.createElement("div",{className:s()("larkui-list","larkui-list-loading")},o.a.createElement(p.a,y({justify:"block"},C)));var R=m;return R&&(R=m.total<=m.pageSize?null:g({showSizeChanger:!1},R)),o.a.createElement(r.b,y({ref:t,className:s()(n,"larkui-list",{"larkui-list-justify-block":"block"===k}),loading:!1,loadMore:S,pagination:R,dataSource:c.length>0?c:e.emptyView?["empty"]:[],renderItem:function(e,t){if("empty"===e)return o.a.createElement("div",{className:"blankslate"},a);var n=l(e,t);return n?w?n:o.a.createElement(r.b.Item,{key:e.id},n):o.a.createElement("div",null)}},E),v)}));k.defaultProps={dataSource:[],loading:!1,showLoadingMore:!1,justify:"flex"},k.propTypes=g(g({},r.b.ListProps),{},{className:c.a.string,emptyView:c.a.node,onLoadMore:c.a.func,dataSource:c.a.array,renderItem:c.a.func,loading:c.a.oneOfType([c.a.bool,c.a.object]),showLoadingMore:c.a.bool,pagination:c.a.object,children:c.a.node,justify:c.a.oneOf(["block","flex"]),customItem:c.a.bool}),d()(k,r.b),t.a=k},2950:function(e,t,n){var r=n(2929);e.exports=function(e,t){return 0===(e=r(e)).length?"":e.slice(0,-1)+String.fromCharCode(e.charCodeAt(e.length-1)+t)}},2951:function(e,t,n){var r=n(2932),a=n(2945);e.exports=function(e,t){return e=r(e).replace(/[-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""})),!0===t?a(e):e}},2952:function(e,t,n){var r=n(2932);e.exports=function(e){return r(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()}},2953:function(e,t,n){var r=n(2932);e.exports=function(e){return r(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()}},2954:function(e,t){e.exports=function(e,t){if(t<1)return"";for(var n="";t>0;)1&t&&(n+=e),t>>=1,e+=e;return n}},2955:function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(109))},2956:function(e,t,n){var r;!function(){"use strict";var a={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(e){return c(s(e),arguments)}function i(e,t){return o.apply(null,[e].concat(t||[]))}function c(e,t){var n,r,i,c,l,s,u,d,f,p=1,h=e.length,m="";for(r=0;r<h;r++)if("string"==typeof e[r])m+=e[r];else if("object"==typeof e[r]){if((c=e[r]).keys)for(n=t[p],i=0;i<c.keys.length;i++){if(null==n)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',c.keys[i],c.keys[i-1]));n=n[c.keys[i]]}else n=c.param_no?t[c.param_no]:t[p++];if(a.not_type.test(c.type)&&a.not_primitive.test(c.type)&&n instanceof Function&&(n=n()),a.numeric_arg.test(c.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(o("[sprintf] expecting number but found %T",n));switch(a.number.test(c.type)&&(d=n>=0),c.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,c.width?parseInt(c.width):0);break;case"e":n=c.precision?parseFloat(n).toExponential(c.precision):parseFloat(n).toExponential();break;case"f":n=c.precision?parseFloat(n).toFixed(c.precision):parseFloat(n);break;case"g":n=c.precision?String(Number(n.toPrecision(c.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=c.precision?n.substring(0,c.precision):n;break;case"t":n=String(!!n),n=c.precision?n.substring(0,c.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=c.precision?n.substring(0,c.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=c.precision?n.substring(0,c.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}a.json.test(c.type)?m+=n:(!a.number.test(c.type)||d&&!c.sign?f="":(f=d?"+":"-",n=n.toString().replace(a.sign,"")),s=c.pad_char?"0"===c.pad_char?"0":c.pad_char.charAt(1):" ",u=c.width-(f+n).length,l=c.width&&u>0?s.repeat(u):"",m+=c.align?f+n+l:"0"===s?f+l+n:l+f+n)}return m}var l=Object.create(null);function s(e){if(l[e])return l[e];for(var t,n=e,r=[],o=0;n;){if(null!==(t=a.text.exec(n)))r.push(t[0]);else if(null!==(t=a.modulo.exec(n)))r.push("%");else{if(null===(t=a.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){o|=1;var i=[],c=t[2],s=[];if(null===(s=a.key.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(i.push(s[1]);""!==(c=c.substring(s[0].length));)if(null!==(s=a.key_access.exec(c)))i.push(s[1]);else{if(null===(s=a.index_access.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");i.push(s[1])}t[2]=i}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}n=n.substring(t[0].length)}return l[e]=r}t.sprintf=o,t.vsprintf=i,"undefined"!=typeof window&&(window.sprintf=o,window.vsprintf=i,void 0===(r=function(){return{sprintf:o,vsprintf:i}}.call(t,n,t,e))||(e.exports=r))}()},2957:function(e,t,n){var r=n(2940);e.exports=function(e,t,n,a){t=t||", ",n=n||" and ";var o=e.slice(),i=o.pop();return e.length>2&&a&&(n=r(t)+n),o.length?o.join(t)+n+i:i}},2958:function(e,t){e.exports=function(e,t){return[t,e,t].join("")}},2959:function(e,t,n){"use strict";var r,a=SyntaxError,o=Function,i=TypeError,c=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(e){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(e){l=null}var s=function(){throw new i},u=l?function(){try{return s}catch(e){try{return l(arguments,"callee").get}catch(e){return s}}}():s,d=n(3034)(),f=Object.getPrototypeOf||function(e){return e.__proto__},p={},h="undefined"==typeof Uint8Array?r:f(Uint8Array),m={"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":d?f([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":p,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d?f(f([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&d?f((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&d?f((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d?f(""[Symbol.iterator]()):r,"%Symbol%":d?Symbol:r,"%SyntaxError%":a,"%ThrowTypeError%":u,"%TypedArray%":h,"%TypeError%":i,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet},g=function e(t){var n;if("%AsyncFunction%"===t)n=c("async function () {}");else if("%GeneratorFunction%"===t)n=c("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=c("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var a=e("%AsyncGenerator%");a&&(n=f(a.prototype))}return m[t]=n,n},v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=n(2960),b=n(3037),k=y.call(Function.call,Array.prototype.concat),w=y.call(Function.apply,Array.prototype.splice),x=y.call(Function.call,String.prototype.replace),_=y.call(Function.call,String.prototype.slice),E=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,C=/\\(\\)?/g,O=function(e){var t=_(e,0,1),n=_(e,-1);if("%"===t&&"%"!==n)throw new a("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new a("invalid intrinsic syntax, expected opening `%`");var r=[];return x(e,E,(function(e,t,n,a){r[r.length]=n?x(a,C,"$1"):t||e})),r},S=function(e,t){var n,r=e;if(b(v,r)&&(r="%"+(n=v[r])[0]+"%"),b(m,r)){var o=m[r];if(o===p&&(o=g(r)),void 0===o&&!t)throw new i("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new a("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new i("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new i('"allowMissing" argument must be a boolean');var n=O(e),r=n.length>0?n[0]:"",o=S("%"+r+"%",t),c=o.name,s=o.value,u=!1,d=o.alias;d&&(r=d[0],w(n,k([0,1],d)));for(var f=1,p=!0;f<n.length;f+=1){var h=n[f],g=_(h,0,1),v=_(h,-1);if(('"'===g||"'"===g||"`"===g||'"'===v||"'"===v||"`"===v)&&g!==v)throw new a("property names with quotes must have matching quotes");if("constructor"!==h&&p||(u=!0),b(m,c="%"+(r+="."+h)+"%"))s=m[c];else if(null!=s){if(!(h in s)){if(!t)throw new i("base intrinsic for "+e+" exists, but the property is not available.");return}if(l&&f+1>=n.length){var y=l(s,h);s=(p=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:s[h]}else p=b(s,h),s=s[h];p&&!u&&(m[c]=s)}}return s}},296:function(e,t,n){"use strict";var r={};(0,n(244).assign)(r,n(1577),n(1580),n(634)),e.exports=r},2960:function(e,t,n){"use strict";var r=n(3036);e.exports=Function.prototype.bind||r},2961:function(e,t,n){"use strict";var r=String.prototype.replace,a=/%20/g,o="RFC1738",i="RFC3986";e.exports={default:i,formatters:{RFC1738:function(e){return r.call(e,a,"+")},RFC3986:function(e){return String(e)}},RFC1738:o,RFC3986:i}},2964:function(e,t,n){"use strict";var r=n(2961),a=Object.prototype.hasOwnProperty,o=Array.isArray,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),c=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n};e.exports={arrayToObject:c,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var a=t[r],i=a.obj[a.prop],c=Object.keys(i),l=0;l<c.length;++l){var s=c[l],u=i[s];"object"==typeof u&&null!==u&&-1===n.indexOf(u)&&(t.push({obj:i,prop:s}),n.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(o(n)){for(var r=[],a=0;a<n.length;++a)void 0!==n[a]&&r.push(n[a]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(e){return r}},encode:function(e,t,n,a,o){if(0===e.length)return e;var c=e;if("symbol"==typeof e?c=Symbol.prototype.toString.call(e):"string"!=typeof e&&(c=String(e)),"iso-8859-1"===n)return escape(c).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var l="",s=0;s<c.length;++s){var u=c.charCodeAt(s);45===u||46===u||95===u||126===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||o===r.RFC1738&&(40===u||41===u)?l+=c.charAt(s):u<128?l+=i[u]:u<2048?l+=i[192|u>>6]+i[128|63&u]:u<55296||u>=57344?l+=i[224|u>>12]+i[128|u>>6&63]+i[128|63&u]:(s+=1,u=65536+((1023&u)<<10|1023&c.charCodeAt(s)),l+=i[240|u>>18]+i[128|u>>12&63]+i[128|u>>6&63]+i[128|63&u])}return l},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(o(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},merge:function e(t,n,r){if(!n)return t;if("object"!=typeof n){if(o(t))t.push(n);else{if(!t||"object"!=typeof t)return[t,n];(r&&(r.plainObjects||r.allowPrototypes)||!a.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(n);var i=t;return o(t)&&!o(n)&&(i=c(t,r)),o(t)&&o(n)?(n.forEach((function(n,o){if(a.call(t,o)){var i=t[o];i&&"object"==typeof i&&n&&"object"==typeof n?t[o]=e(i,n,r):t.push(n)}else t[o]=n})),t):Object.keys(n).reduce((function(t,o){var i=n[o];return a.call(t,o)?t[o]=e(t[o],i,r):t[o]=i,t}),i)}}},2965:function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this._wrapped=e}function a(e,t){"function"==typeof t&&(r.prototype[e]=function(){var e=[this._wrapped].concat(Array.prototype.slice.call(arguments)),n=t.apply(null,e);return"string"==typeof n?new r(n):n})}for(var o in r.VERSION="3.3.4",r.isBlank=n(2944),r.stripTags=n(2966),r.capitalize=n(2937),r.decapitalize=n(2945),r.chop=n(2967),r.trim=n(2932),r.clean=n(2968),r.cleanDiacritics=n(2947),r.count=n(2969),r.chars=n(2939),r.swapCase=n(2970),r.escapeHTML=n(2971),r.unescapeHTML=n(2973),r.splice=n(2948),r.insert=n(2975),r.replaceAll=n(2976),r.include=n(2977),r.join=n(2978),r.lines=n(2979),r.dedent=n(2980),r.reverse=n(2981),r.startsWith=n(2982),r.endsWith=n(2983),r.pred=n(2984),r.succ=n(2985),r.titleize=n(2986),r.camelize=n(2951),r.underscored=n(2952),r.dasherize=n(2953),r.classify=n(2987),r.humanize=n(2988),r.ltrim=n(2989),r.rtrim=n(2940),r.truncate=n(2990),r.prune=n(2991),r.words=n(2992),r.pad=n(2935),r.lpad=n(2993),r.rpad=n(2994),r.lrpad=n(2995),r.sprintf=n(2996),r.vsprintf=n(2997),r.toNumber=n(2998),r.numberFormat=n(2999),r.strRight=n(3e3),r.strRightBack=n(3001),r.strLeft=n(3002),r.strLeftBack=n(3003),r.toSentence=n(2957),r.toSentenceSerial=n(3004),r.slugify=n(3005),r.surround=n(2958),r.quote=n(3006),r.unquote=n(3007),r.repeat=n(3008),r.naturalCmp=n(3009),r.levenshtein=n(3010),r.toBoolean=n(3011),r.exports=n(3012),r.escapeRegExp=n(2946),r.wrap=n(3013),r.map=n(3014),r.strip=r.trim,r.lstrip=r.ltrim,r.rstrip=r.rtrim,r.center=r.lrpad,r.rjust=r.lpad,r.ljust=r.rpad,r.contains=r.include,r.q=r.quote,r.toBool=r.toBoolean,r.camelcase=r.camelize,r.mapChars=r.map,r.prototype={value:function(){return this._wrapped}},r)a(o,r[o]);function i(e){a(e,(function(t){var n=Array.prototype.slice.call(arguments,1);return String.prototype[e].apply(t,n)}))}a("tap",(function(e,t){return t(e)}));var c=["toUpperCase","toLowerCase","split","replace","slice","substring","substr","concat"];for(var l in c)i(c[l]);e.exports=r},2966:function(e,t,n){var r=n(2929);e.exports=function(e){return r(e).replace(/<\/?[^>]+>/g,"")}},2967:function(e,t){e.exports=function(e,t){return null==e?[]:(e=String(e),(t=~~t)>0?e.match(new RegExp(".{1,"+t+"}","g")):[e])}},2968:function(e,t,n){var r=n(2932);e.exports=function(e){return r(e).replace(/\s\s+/g," ")}},2969:function(e,t,n){var r=n(2929);e.exports=function(e,t){return e=r(e),t=r(t),0===e.length||0===t.length?0:e.split(t).length-1}},2970:function(e,t,n){var r=n(2929);e.exports=function(e){return r(e).replace(/\S/g,(function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()}))}},2971:function(e,t,n){var r=n(2929),a=n(2972),o="[";for(var i in a)o+=i;o+="]";var c=new RegExp(o,"g");e.exports=function(e){return r(e).replace(c,(function(e){return"&"+a[e]+";"}))}},2972:function(e,t){e.exports={"¢":"cent","£":"pound","¥":"yen","€":"euro","©":"copy","®":"reg","<":"lt",">":"gt",'"':"quot","&":"amp","'":"#39"}},2973:function(e,t,n){var r=n(2929),a=n(2974);e.exports=function(e){return r(e).replace(/\&([^;]{1,10});/g,(function(e,t){var n;return t in a?a[t]:(n=t.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(n[1],16)):(n=t.match(/^#(\d+)$/))?String.fromCharCode(~~n[1]):e}))}},2974:function(e,t){e.exports={nbsp:" ",cent:"¢",pound:"£",yen:"¥",euro:"€",copy:"©",reg:"®",lt:"<",gt:">",quot:'"',amp:"&",apos:"'"}},2975:function(e,t,n){var r=n(2948);e.exports=function(e,t,n){return r(e,t,0,n)}},2976:function(e,t,n){var r=n(2929);e.exports=function(e,t,n,a){var o=new RegExp(t,!0===a?"gi":"g");return r(e).replace(o,n)}},2977:function(e,t,n){var r=n(2929);e.exports=function(e,t){return""===t||-1!==r(e).indexOf(t)}},2978:function(e,t,n){var r=n(2929),a=[].slice;e.exports=function(){var e=a.call(arguments),t=e.shift();return e.join(r(t))}},2979:function(e,t){e.exports=function(e){return null==e?[]:String(e).split(/\r\n?|\n/)}},298:function(e,t,n){(function(r){var a;!function(o){var i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};function c(){this._events={},this._conf&&l.call(this,this._conf)}function l(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=e.maxListeners!==o?e.maxListeners:10,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=10}function s(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),void 0!==r&&r.emitWarning){var a=new Error(n);a.name="MaxListenersExceededWarning",a.emitter=this,a.count=e,r.emitWarning(a)}else console.error(n),console.trace&&console.trace()}function u(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,l.call(this,e)}function d(e,t,n,r){if(!n)return[];var a,o,i,c,l,s,u,f=[],p=t.length,h=t[r],m=t[r+1];if(r===p&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(a=0,o=n._listeners.length;a<o;a++)e&&e.push(n._listeners[a]);return[n]}if("*"===h||"**"===h||n[h]){if("*"===h){for(i in n)"_listeners"!==i&&n.hasOwnProperty(i)&&(f=f.concat(d(e,t,n[i],r+1)));return f}if("**"===h){for(i in(u=r+1===p||r+2===p&&"*"===m)&&n._listeners&&(f=f.concat(d(e,t,n,p))),n)"_listeners"!==i&&n.hasOwnProperty(i)&&("*"===i||"**"===i?(n[i]._listeners&&!u&&(f=f.concat(d(e,t,n[i],p))),f=f.concat(d(e,t,n[i],r))):f=i===m?f.concat(d(e,t,n[i],r+2)):f.concat(d(e,t,n[i],r)));return f}f=f.concat(d(e,t,n[h],r+1))}if((c=n["*"])&&d(e,t,c,r+1),l=n["**"])if(r<p)for(i in l._listeners&&d(e,t,l,p),l)"_listeners"!==i&&l.hasOwnProperty(i)&&(i===m?d(e,t,l[i],r+2):i===h?d(e,t,l[i],r+1):((s={})[i]=l[i],d(e,t,{"**":s},r+1)));else l._listeners?d(e,t,l,p):l["*"]&&l["*"]._listeners&&d(e,t,l["*"],p);return f}function f(e,t){for(var n=0,r=(e="string"==typeof e?e.split(this.delimiter):e.slice()).length;n+1<r;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var a=this.listenerTree,i=e.shift();i!==o;){if(a[i]||(a[i]={}),a=a[i],0===e.length)return a._listeners?("function"==typeof a._listeners&&(a._listeners=[a._listeners]),a._listeners.push(t),!a._listeners.warned&&this._maxListeners>0&&a._listeners.length>this._maxListeners&&(a._listeners.warned=!0,s.call(this,a._listeners.length,i))):a._listeners=t,!0;i=e.shift()}return!0}u.EventEmitter2=u,u.prototype.delimiter=".",u.prototype.setMaxListeners=function(e){e!==o&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},u.prototype.event="",u.prototype.once=function(e,t){return this._once(e,t,!1)},u.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},u.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},u.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},u.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},u.prototype._many=function(e,t,n,r){var a=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function o(){return 0==--t&&a.off(e,o),n.apply(this,arguments)}return o._origin=n,this._on(e,o,r),a},u.prototype.emit=function(){this._events||c.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return!1;var t,n,r,a,o,i=arguments.length;if(this._all&&this._all.length){if(o=this._all.slice(),i>3)for(t=new Array(i),a=0;a<i;a++)t[a]=arguments[a];for(r=0,n=o.length;r<n;r++)switch(this.event=e,i){case 1:o[r].call(this,e);break;case 2:o[r].call(this,e,arguments[1]);break;case 3:o[r].call(this,e,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}}if(this.wildcard){o=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();d.call(this,o,l,this.listenerTree,0)}else{if("function"==typeof(o=this._events[e])){switch(this.event=e,i){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(i-1),a=1;a<i;a++)t[a-1]=arguments[a];o.apply(this,t)}return!0}o&&(o=o.slice())}if(o&&o.length){if(i>3)for(t=new Array(i-1),a=1;a<i;a++)t[a-1]=arguments[a];for(r=0,n=o.length;r<n;r++)switch(this.event=e,i){case 1:o[r].call(this);break;case 2:o[r].call(this,arguments[1]);break;case 3:o[r].call(this,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},u.prototype.emitAsync=function(){this._events||c.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,n,r,a,o,i=[],l=arguments.length;if(this._all){if(l>3)for(t=new Array(l),a=1;a<l;a++)t[a]=arguments[a];for(r=0,n=this._all.length;r<n;r++)switch(this.event=e,l){case 1:i.push(this._all[r].call(this,e));break;case 2:i.push(this._all[r].call(this,e,arguments[1]));break;case 3:i.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:i.push(this._all[r].apply(this,t))}}if(this.wildcard){o=[];var s="string"==typeof e?e.split(this.delimiter):e.slice();d.call(this,o,s,this.listenerTree,0)}else o=this._events[e];if("function"==typeof o)switch(this.event=e,l){case 1:i.push(o.call(this));break;case 2:i.push(o.call(this,arguments[1]));break;case 3:i.push(o.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(l-1),a=1;a<l;a++)t[a-1]=arguments[a];i.push(o.apply(this,t))}else if(o&&o.length){if(o=o.slice(),l>3)for(t=new Array(l-1),a=1;a<l;a++)t[a-1]=arguments[a];for(r=0,n=o.length;r<n;r++)switch(this.event=e,l){case 1:i.push(o[r].call(this));break;case 2:i.push(o[r].call(this,arguments[1]));break;case 3:i.push(o[r].call(this,arguments[1],arguments[2]));break;default:i.push(o[r].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(i)},u.prototype.on=function(e,t){return this._on(e,t,!1)},u.prototype.prependListener=function(e,t){return this._on(e,t,!0)},u.prototype.onAny=function(e){return this._onAny(e,!1)},u.prototype.prependAny=function(e){return this._onAny(e,!0)},u.prototype.addListener=u.prototype.on,u.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},u.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||c.call(this),this._newListener&&this.emit("newListener",e,t),this.wildcard?(f.call(this,e,t),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,s.call(this,this._events[e].length,e))):this._events[e]=t,this)},u.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var a="string"==typeof e?e.split(this.delimiter):e.slice();r=d.call(this,null,a,this.listenerTree,0)}else{if(!this._events[e])return this;n=this._events[e],r.push({_listeners:n})}for(var c=0;c<r.length;c++){var l=r[c];if(n=l._listeners,i(n)){for(var s=-1,u=0,f=n.length;u<f;u++)if(n[u]===t||n[u].listener&&n[u].listener===t||n[u]._origin&&n[u]._origin===t){s=u;break}if(s<0)continue;return this.wildcard?l._listeners.splice(s,1):this._events[e].splice(s,1),0===n.length&&(this.wildcard?delete l._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete l._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return function e(t){if(t!==o){var n=Object.keys(t);for(var r in n){var a=n[r],i=t[a];i instanceof Function||"object"!=typeof i||null===i||(Object.keys(i).length>0&&e(t[a]),0===Object.keys(i).length&&delete t[a])}}}(this.listenerTree),this},u.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},u.prototype.removeListener=u.prototype.off,u.prototype.removeAllListeners=function(e){if(e===o)return!this._events||c.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),n=d.call(this,null,t,this.listenerTree,0),r=0;r<n.length;r++){n[r]._listeners=null}else this._events&&(this._events[e]=null);return this},u.prototype.listeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return d.call(this,t,n,this.listenerTree,0),t}return this._events||c.call(this),this._events[e]||(this._events[e]=[]),i(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},u.prototype.eventNames=function(){return Object.keys(this._events)},u.prototype.listenerCount=function(e){return this.listeners(e).length},u.prototype.listenersAny=function(){return this._all?this._all:[]},(a=function(){return u}.call(t,n,t,e))===o||(e.exports=a)}()}).call(this,n(223))},2980:function(e,t,n){var r=n(2929);e.exports=function(e,t){var n,a=function(e){for(var t=e.match(/^[\s\\t]*/gm),n=t[0].length,r=1;r<t.length;r++)n=Math.min(t[r].length,n);return n}(e=r(e));return 0===a?e:(n="string"==typeof t?new RegExp("^"+t,"gm"):new RegExp("^[ \\t]{"+a+"}","gm"),e.replace(n,""))}},2981:function(e,t,n){var r=n(2939);e.exports=function(e){return r(e).reverse().join("")}},2982:function(e,t,n){var r=n(2929),a=n(2949);e.exports=function(e,t,n){return e=r(e),t=""+t,n=null==n?0:Math.min(a(n),e.length),e.lastIndexOf(t,n)===n}},2983:function(e,t,n){var r=n(2929),a=n(2949);e.exports=function(e,t,n){return e=r(e),t=""+t,(n=void 0===n?e.length-t.length:Math.min(a(n),e.length)-t.length)>=0&&e.indexOf(t,n)===n}},2984:function(e,t,n){var r=n(2950);e.exports=function(e){return r(e,-1)}},2985:function(e,t,n){var r=n(2950);e.exports=function(e){return r(e,1)}},2986:function(e,t,n){var r=n(2929);e.exports=function(e){return r(e).toLowerCase().replace(/(?:^|\s|-)\S/g,(function(e){return e.toUpperCase()}))}},2987:function(e,t,n){var r=n(2937),a=n(2951),o=n(2929);e.exports=function(e){return e=o(e),r(a(e.replace(/[\W_]/g," ")).replace(/\s/g,""))}},2988:function(e,t,n){var r=n(2937),a=n(2952),o=n(2932);e.exports=function(e){return r(o(a(e).replace(/_id$/,"").replace(/_/g," ")))}},2989:function(e,t,n){var r=n(2929),a=n(2938),o=String.prototype.trimLeft;e.exports=function(e,t){return e=r(e),!t&&o?o.call(e):(t=a(t),e.replace(new RegExp("^"+t+"+"),""))}},299:function(e,t){e.exports=["cursor","anchor","focus",{card:{type:/^[\w\-]+$/,name:/^[\w\-]+$/,value:"*"}},{span:{class:/^lake-fontsize-\d+$|lake\-card\-[\w\-]{1,100}/,style:{color:"@color","background-color":"@color"}}},"strong","em","del","u",{h1:{id:/^[\w\.\-]+$/}},{h2:{id:/^[\w\.\-]+$/}},{h3:{id:/^[\w\.\-]+$/}},{h4:{id:/^[\w\.\-]+$/}},{h5:{id:/^[\w\.\-]+$/}},{h6:{id:/^[\w\.\-]+$/}},{p:{class:/^lake-lineheight-\d+$/,"data-lake-id":"*"}},"hr","code","mark",{pre:{"data-lang":/^[\w\.\-]+$/}},{blockquote:{class:["lake-alert","lake-alert-info","lake-alert-warning","lake-alert-danger","lake-alert-success","lake-alert-tips"]}},"sub","sup","br",{img:{src:"@url",width:"@number",height:"@number",style:{"max-width":"@length","max-height":"@length",width:"@length",height:"@length"},alt:"*",title:"*","data-size":"@number","data-width":"@number","data-height":"@number"}},{image:{src:"@url",width:"@number",height:"@number",style:{"max-width":"@length",width:"@length",height:"@length"},alt:"*",title:"*","data-size":"@number","data-width":"@number","data-height":"@number"}},{a:{name:"*",href:"@url",target:["_blank","_parent","_top"],ref:"*",class:["lake-video-link"]}},{ul:{class:["lake-list"],"data-lake-indent":"@number"}},{ol:{start:"@number","data-lake-indent":"@number"}},{li:{class:["lake-list-node","lake-list-task"]}},{table:{class:["lake-table","lake-no-border"],style:{width:"@length",height:"@length"}}},"colgroup",{col:{width:"@length"}},"tbody","th","tr",{td:{rowspan:"@number",colspan:"@number"}},{block:{style:{"text-align":["left","center","right","justify"],"text-indent":"@length","padding-left":"@length","background-color":"@color"}}},{input:{type:["checkbox"],checked:"checked",$allow:{type:["checkbox"]}}},{video:{src:"@url","data-size":"@number","data-type":/^\w{1,100}\/\w{1,100}$/,"data-name":"*",controls:!0}},{iframe:{src:/^https?:\/\/(?:riddle\.alibaba\-inc\.com|\w{0,100}\.youku\.com|\w{0,100}\.bilibili\.com)\//,height:"@number",frameborder:["yes","no"],allowtransparency:["true","false"],allowfullscreen:["true","false"]}}]},2990:function(e,t,n){var r=n(2929);e.exports=function(e,t,n){return n=n||"...",t=~~t,(e=r(e)).length>t?e.slice(0,t)+n:e}},2991:function(e,t,n){var r=n(2929),a=n(2940);e.exports=function(e,t,n){if(e=r(e),t=~~t,n=null!=n?String(n):"...",e.length<=t)return e;var o=e.slice(0,t+1).replace(/.(?=\W*\w*$)/g,(function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "}));return((o=o.slice(o.length-2).match(/\w\w/)?o.replace(/\s*\S+$/,""):a(o.slice(0,o.length-1)))+n).length>e.length?e:e.slice(0,o.length)+n}},2992:function(e,t,n){var r=n(2944),a=n(2932);e.exports=function(e,t){return r(e)?[]:a(e,t).split(t||/\s+/)}},2993:function(e,t,n){var r=n(2935);e.exports=function(e,t,n){return r(e,t,n)}},2994:function(e,t,n){var r=n(2935);e.exports=function(e,t,n){return r(e,t,n,"right")}},2995:function(e,t,n){var r=n(2935);e.exports=function(e,t,n){return r(e,t,n,"both")}},2996:function(e,t,n){var r=n(2955);e.exports=r(n(2956).sprintf,"sprintf() will be removed in the next major release, use the sprintf-js package instead.")},2997:function(e,t,n){var r=n(2955);e.exports=r(n(2956).vsprintf,"vsprintf() will be removed in the next major release, use the sprintf-js package instead.")},2998:function(e,t){e.exports=function(e,t){if(null==e)return 0;var n=Math.pow(10,isFinite(t)?t:0);return Math.round(e*n)/n}},2999:function(e,t){e.exports=function(e,t,n,r){if(isNaN(e)||null==e)return"";r="string"==typeof r?r:",";var a=(e=e.toFixed(~~t)).split("."),o=a[0],i=a[1]?(n||".")+a[1]:"";return o.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+i}},3e3:function(e,t,n){var r=n(2929);e.exports=function(e,t){e=r(e);var n=(t=r(t))?e.indexOf(t):-1;return~n?e.slice(n+t.length,e.length):e}},3001:function(e,t,n){var r=n(2929);e.exports=function(e,t){e=r(e);var n=(t=r(t))?e.lastIndexOf(t):-1;return~n?e.slice(n+t.length,e.length):e}},3002:function(e,t,n){var r=n(2929);e.exports=function(e,t){e=r(e);var n=(t=r(t))?e.indexOf(t):-1;return~n?e.slice(0,n):e}},3003:function(e,t,n){var r=n(2929);e.exports=function(e,t){e=r(e),t=r(t);var n=e.lastIndexOf(t);return~n?e.slice(0,n):e}},3004:function(e,t,n){var r=n(2957);e.exports=function(e,t,n){return r(e,t,n,!0)}},3005:function(e,t,n){var r=n(2932),a=n(2953),o=n(2947);e.exports=function(e){return r(a(o(e).replace(/[^\w\s-]/g,"-").toLowerCase()),"-")}},3006:function(e,t,n){var r=n(2958);e.exports=function(e,t){return r(e,t||'"')}},3007:function(e,t){e.exports=function(e,t){return t=t||'"',e[0]===t&&e[e.length-1]===t?e.slice(1,e.length-1):e}},3008:function(e,t,n){var r=n(2929),a=n(2954);e.exports=function(e,t,n){if(e=r(e),t=~~t,null==n)return a(e,t);for(var o=[];t>0;o[--t]=e);return o.join(n)}},3009:function(e,t){e.exports=function(e,t){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var n=/(\.\d+|\d+|\D+)/g,r=String(e).match(n),a=String(t).match(n),o=Math.min(r.length,a.length),i=0;i<o;i++){var c=r[i],l=a[i];if(c!==l){var s=+c,u=+l;return s==s&&u==u?s>u?1:-1:c<l?-1:1}}return r.length!=a.length?r.length-a.length:e<t?-1:1}},3010:function(e,t,n){var r=n(2929);e.exports=function(e,t){"use strict";if((e=r(e))===(t=r(t)))return 0;if(!e||!t)return Math.max(e.length,t.length);for(var n=new Array(t.length+1),a=0;a<n.length;++a)n[a]=a;for(a=0;a<e.length;++a){for(var o=a+1,i=0;i<t.length;++i){var c=o,l=c+1;(o=n[i]+(e.charAt(a)===t.charAt(i)?0:1))>l&&(o=l),o>(l=n[i+1]+1)&&(o=l),n[i]=c}n[i]=o}return o}},3011:function(e,t,n){var r=n(2932);function a(e,t){var n,r,a=e.toLowerCase();for(t=[].concat(t),n=0;n<t.length;n+=1)if(r=t[n]){if(r.test&&r.test(e))return!0;if(r.toLowerCase()===a)return!0}}e.exports=function(e,t,n){return"number"==typeof e&&(e=""+e),"string"!=typeof e?!!e:!!a(e=r(e),t||["true","1"])||!a(e,n||["false","0"])&&void 0}},3012:function(e,t){e.exports=function(){var e={};for(var t in this)this.hasOwnProperty(t)&&!t.match(/^(?:include|contains|reverse|join|map|wrap)$/)&&(e[t]=this[t]);return e}},3013:function(e,t,n){var r=n(2929);e.exports=function(e,t){e=r(e);var n,a=(t=t||{}).width||75,o=t.seperator||"\n",i=t.cut||!1,c=t.preserveSpaces||!1,l=t.trailingSpaces||!1;if(a<=0)return e;if(i){var s=0;for(n="";s<e.length;)s%a==0&&s>0&&(n+=o),n+=e.charAt(s),s++;if(l)for(;s%a>0;)n+=" ",s++;return n}var u=e.split(" "),d=0;for(n="";u.length>0;){if(1+u[0].length+d>a&&d>0){if(c)n+=" ",d++;else if(l)for(;d<a;)n+=" ",d++;n+=o,d=0}d>0&&(n+=" ",d++),n+=u[0],d+=u[0].length,u.shift()}if(l)for(;d<a;)n+=" ",d++;return n}},3014:function(e,t,n){var r=n(2929);e.exports=function(e,t){return 0===(e=r(e)).length||"function"!=typeof t?e:e.replace(/./g,t)}},3016:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(3017),i=n.n(o),c=n(3027),l=n.n(c),s=n(2262),u=n(3019),d=n(1714),f=n(42),p=n(1557);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var a=x(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){return void 0===e?t:e}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&y(e,t)}(c,e);var t,n,r,o=b(c);function c(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),_(w(r=o.call(this,e,t)),"setContent",(function(e){for(var t=e,n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];if(e){if(e.startsWith("<")){var i;t={type:"lake",value:e},(i=r.engine).setDocument.apply(i,[t].concat(a))}else if("string"==typeof e){var c;t={type:"json",value:JSON.parse(e)},(c=r.engine).setDocument.apply(c,[t].concat(a))}}else r.engine.setDocument()})),_(w(r),"appendContent",(function(e){})),_(w(r),"getValue",(function(){return r.engine.getContent()})),_(w(r),"getPureContent",(function(){return r.getValue()})),_(w(r),"hasUserChanged",(function(){})),_(w(r),"resetUserChange",(function(){})),_(w(r),"insertContent",(function(e){})),_(w(r),"getEditorContent",(function(e){e=e||{};var t,n,a,o,i=w(r).engine,c=e.fullHTML;return i.queryCommandValue("cardIsExist","premium")?(t=i.getPublicPureContent(),n=c?i.getFullPublicPureHtml():i.getPublicPureHtml(),a=i.getPureContent(),o=c?i.getFullPureHtml():i.getPureHtml()):(t=i.getPureContent(),n=c?i.getFullPureHtml():i.getPureHtml()),{content:t,html:n,premium:a,premiumHtml:o}})),_(w(r),"getDocMeta",(function(e){var t=(e=e||{}).themeMetas||[],n=w(r).doc,a=Object(f.getDocMeta)(r.engine.getPureContent());if(!a)return null;var o={},i=n.editor_meta_draft||n.editor_meta;return i&&(o=JSON.parse(i)),["viewport","typography"].forEach((function(e){o[e]||t.includes(e)||delete a[e]})),a})),_(w(r),"getPremium",(function(){return r.engine.queryCommandValue("getPremium")})),_(w(r),"getWordCount",(function(e){var t=r.engine.wordCount();if(!e)return t;e(t)})),_(w(r),"getSummary",(function(e){var t=r.engine.getPureHtml();e({summary:l.a.extractSummary(t),cover:l.a.extractFirstImage(t)})})),_(w(r),"isEmpty",(function(){return r.engine.isEmpty()})),_(w(r),"onBeforeSave",(function(){var e=0;return new Promise((function t(n,a){r.engine.canGetDocument()?n():e>10?a():(e++,setTimeout((function(){t(n,a)}),1e3))}))})),_(w(r),"reset",(function(e){r.engine.reset(e)})),_(w(r),"readonly",(function(e){})),_(w(r),"focus",(function(e){})),_(w(r),"focusToEnd",(function(){r.engine.focus(!1)})),_(w(r),"isFocus",(function(){return r.engine.isFocus()})),r.emitter=n,r.lakex=!0,r.reportedStacks={},r}return t=c,n=[{key:"init",value:function(e){for(var t=this,n=e.content,r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];this.setContent.apply(this,[n].concat(a)),setTimeout((function(){try{p.a.letEditorFocusToReadPosition(t.doc.id)}catch(e){console.log("focus to read pos fail",e)}}),200)}},{key:"initCollabDoc",value:function(e){this.emitter&&this.emitter.emit("docReady",e,this.currentMember)}},{key:"setCurrentMember",value:function(e){this.currentMember=e}},{key:"removeCollabMember",value:function(e){this.emitter.emit("memberLeave",e)}},{key:"onCommandError",value:function(e){var t=this;this.engine.on("commandExecuteError",(function(n){var r,a=null==n||null===(r=n.error)||void 0===r?void 0:r.stack;t.reportedStacks[a]||(t.reportedStacks[a]=!0,e(n))}))}},{key:"onCommandEnd",value:function(e){this.engine.on("commandEnd",(function(t){var n=t.commandName,r=t.useTime;e("lakex",n,r)}))}},{key:"getReportValue",value:function(){return this.engine.getDocumentData()}}],r=[{key:"buildOptions",value:function(e){var t=c._buildBaseOptions(e);return c._repairPrivateCloudOptions(t),c._repairDesktopOptions(t,e),c._repairMobileOptions(t,e),t}},{key:"_buildBaseOptions",value:function(e){var t,n,r,o,c,l,f,p,h,m,v,y,b,k,w,x,_,C,O,S,R,j,P,A,T,D=e.apiHost,M=void 0===D?"":D,N=e.target_id,L=e.target_type,I=void 0===L?"Doc":L,B="".concat(M,"/api"),z={attachable_type:I,attachable_id:N},F={target_id:N,target_type:I},U={layout:e.layout,typography:e.typography,image:{uploadFileURL:(null===(t=e.image)||void 0===t?void 0:t.uploadFileURL)||"".concat(B,"/upload/attach?").concat(i.a.stringify(g(g({},z),{},{type:"image"}))),onBeforeRenderImage:null===(n=e.image)||void 0===n?void 0:n.onBeforeRenderImage,accept:Object(s.getImageAcceptArr)()},file:g(g({uploadFileURL:(null===(r=e.file)||void 0===r?void 0:r.uploadFileURL)||"".concat(B,"/upload/attach?").concat(i.a.stringify(g(g({},z),{},{type:"attachment"}))),quickUploadUrl:"".concat(B,"/upload/upload_by_digset?").concat(i.a.stringify(g(g({},z),{},{type:"attachment"}))),endpointAfterUpload:(null===(o=e.file)||void 0===o?void 0:o.endpointAfterUpload)||"".concat(B,"/attachment/after_upload?").concat(i.a.stringify(g({},z)))},z),{},{useMultipart:E(null===(c=e.file)||void 0===c?void 0:c.useMultipart,!0),accept:Object(s.getFileAcceptArr)()}),localdoc:{uploadFileURL:(null===(l=e.localdoc)||void 0===l?void 0:l.uploadFileURL)||"".concat(B,"/upload/attach?").concat(i.a.stringify(g(g({},z),{},{type:"attachment"}))),accept:Object(s.getLocalDocAcceptArr)()},audio:{uploadFileURL:(null===(f=e.audio)||void 0===f?void 0:f.uploadFileURL)||"".concat(B,"/video?").concat(i.a.stringify(g(g({},z),{},{type:"audio"}))),queryURL:"".concat(B,"/video?").concat(i.a.stringify(g(g({},z),{},{type:"audio"}))),allowAudioPlayer:E(null===(p=e.audio)||void 0===p?void 0:p.allowAudioPlayer,!0),addsOnParams:g(g({},z),{},{format:"audio"}),accept:Object(s.getAudioAcceptArr)()},video:g(g({uploadAction:(null===(h=e.video)||void 0===h?void 0:h.uploadAction)||"".concat(B,"/video?").concat(i.a.stringify(g(g({},z),{},{type:"video"}))),queryAction:"".concat(B,"/video?").concat(i.a.stringify(g(g({},z),{},{type:"video"}))),endpointAfterUpload:(null===(m=e.video)||void 0===m?void 0:m.endpointAfterUpload)||"".concat(B,"/video/after_upload?").concat(i.a.stringify(g({},z)))},z),{},{useMultipart:E(null===(v=e.video)||void 0===v?void 0:v.useMultipart,!0),accept:Object(s.getVideoAcceptArr)()}),mention:{mentionURL:(null===(y=e.mention)||void 0===y?void 0:y.mentionURL)||"".concat(B,"/users/complete?").concat(i.a.stringify(g(g({},F),{},{group_id:null===(b=e.group)||void 0===b?void 0:b.id}))),defaultList:null===(k=e.mention)||void 0===k?void 0:k.defaultList,tipHTML:null===(w=e.mention)||void 0===w?void 0:w.tipHTML},lockedtext:{action:(null===(x=e.lockedtext)||void 0===x?void 0:x.action)||"".concat(B,"/services/crypto")},materialLibrary:{component:(null===(_=e.materialLibrary)||void 0===_?void 0:_.component)||a.a.createElement(u.a,{storage:null===(C=e.materialLibrary)||void 0===C?void 0:C.storage,webProxy:null===(O=e.materialLibrary)||void 0===O?void 0:O.webProxy}),repository:{requestBooksURL:(null===(S=e.repository)||void 0===S?void 0:S.requestBooksURL)||"".concat(B,"/mine/books?").concat(i.a.stringify(g({},F))),requestResourceURL:(null===(R=e.repository)||void 0===R?void 0:R.requestResourceURL)||"".concat(B,"/resources"),searchURL:(null===(j=e.repository)||void 0===j?void 0:j.searchURL)||"".concat(B,"/resources/search"),imagePreviewURLPrefix:"".concat(window.location.origin,"/preview"),createRepositoryHandler:function(){window.open("/new?scene=resource")}}},vote:{queryDetailUrl:(null===(P=e.vote)||void 0===P?void 0:P.queryDetailUrl)||"".concat(B,"/votes"),voteUrl:(null===(A=e.vote)||void 0===A?void 0:A.voteUrl)||"".concat(B,"/votes"),allowVote:E(null===(T=e.vote)||void 0===T?void 0:T.allowVote,!0)},transfer:{transferFilesURL:"".concat(B,"/upload/copy?").concat(i.a.stringify(g(g({},z),{},{type:"attachment"})))},markdownPasteParse:{convertAction:"".concat(B,"/docs/convert")},yuque:{linkDetailAction:"".concat(B,"/editor/link_detail"),recentAction:"".concat(B,"/editor/recent"),searchAction:"".concat(B,"/editor/search")},header:e.header||[],disabledPlugins:e.disabledPlugins||[],placeholder:e.placeholder,tileRendering:!!e.tileRendering,isDesktop:e.isDesktop,list:e.list,dynamicData:g({docId:N,docType:I,webProxy:{datasheetRecord:d.a.datasheetRecord}},e.dynamicData),bookmark:{detailAction:"".concat(B,"/editor/link_detail")}};return e.collab?(U.disabledPlugins.push("history"),U.collaboration={collab:e.collab}):U.disabledPlugins.push("collaboration"),e.premium&&(U.premium=e.premium),e.isPremiumBook||U.disabledPlugins.push("premium"),e.toc&&(U.toc=e.toc),U}},{key:"_repairPrivateCloudOptions",value:function(e){var t=window.appData,n=t.isPrivateCloud,r=t.supportOnlineViewer;n&&(e.disabledPlugins.push("translate"),e.disabledPlugins.push("repository"),e.disabledPlugins.push("video"),e.disabledPlugins.push("audio"),r||(e.disabledPlugins.push("localDoc"),e.disabledPlugins.push("lakeDiagram"),e.disabledPlugins.push("math")),e.file.isCanPreview=function(e){var t=e.fileExt,n=e.fileUtils;return n.isImage(t)||n.isTextFile(t)||["mp3","wav","mp4","pdf"].includes(t)})}},{key:"_repairMobileOptions",value:function(e,t){t.isMobile&&(e.video.useMultipart=!1,e.file.useMultipart=!1)}},{key:"_repairDesktopOptions",value:function(e,t){var n,r,a,o,i;t.isDesktop&&(e.video.downloadVideoHandler=null===(n=t.video)||void 0===n?void 0:n.downloadVideoHandler,e.video.useMultipart=!1,e.file.useMultipart=!1,e.file.downloadFileHandler=null===(r=t.file)||void 0===r?void 0:r.downloadFileHandler,e.file.previewFileHandler=null===(a=t.file)||void 0===a?void 0:a.previewFileHandler,e.localdoc.previewFileHandler=null===(o=t.localdoc)||void 0===o?void 0:o.previewFileHandler,e.localdoc.origin=(null===(i=t.localdoc)||void 0===i?void 0:i.origin)||t.apiHost)}}],n&&v(t.prototype,n),r&&v(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(n(1558).a);t.a=C},3017:function(e,t,n){"use strict";var r=n(3032),a=n(3042),o=n(2961);e.exports={formats:o,parse:a,stringify:r}},3019:function(e,t,n){"use strict";n.d(t,"a",(function(){return dt}));n(394);var r=n(257),a=n(0),o=n.n(a),i=n(1),c=n.n(i),l=(n(619),n(339)),s=(n(75),n(25)),u=n(17);var d={"file-keynote":"https://gw.alipayobjects.com/zos/bmw-prod/e2f81017-69d7-4895-8cb5-c8a39e317167.svg","file-ppt":"https://gw.alipayobjects.com/zos/bmw-prod/372c66d0-bca3-4dd1-a31a-1db1c8910c0e.svg","file-image":"https://gw.alipayobjects.com/zos/bmw-prod/7fca62b7-35cb-4e93-8c8e-2f94864febd9.svg","file-audio":"https://gw.alipayobjects.com/zos/bmw-prod/69a72e59-be80-46d7-be6d-489c59be8f8b.svg","file-cloud":"https://gw.alipayobjects.com/zos/bmw-prod/8f63aff1-136a-4274-a8bd-c239e2505a8a.svg","file-excel":"https://gw.alipayobjects.com/zos/bmw-prod/61a03229-95ca-4090-bfb2-fd3958243743.svg","file-sheet":"https://gw.alipayobjects.com/zos/bmw-prod/f4fd100f-98c3-4909-9069-30fe0be95dda.svg","file-txt":"https://gw.alipayobjects.com/zos/bmw-prod/7208d0e6-6014-4f5f-82f2-0dc0e4796545.svg","file-numbers":"https://gw.alipayobjects.com/zos/bmw-prod/37746e40-64d2-47bb-9568-e88b6b57273f.svg","file-ai":"https://gw.alipayobjects.com/zos/bmw-prod/384eebe1-3619-4b2f-b079-830821ad1b23.svg","file-folder":"https://gw.alipayobjects.com/zos/bmw-prod/e3fa528a-53ed-454c-b5ba-6ca2938c5709.svg","file-graffle":"https://gw.alipayobjects.com/zos/bmw-prod/e4cc1cf3-1a8c-4475-a902-dd2aea702096.svg","file-word":"https://gw.alipayobjects.com/zos/bmw-prod/3d6f9b51-deea-4423-a263-dc77ab01ebfd.svg","file-sketch":"https://gw.alipayobjects.com/zos/bmw-prod/2d8a39fd-6d8a-45cd-bdfc-39adea54e069.svg","file-rar":"https://gw.alipayobjects.com/zos/bmw-prod/b41d1b6b-6531-454d-a306-6ee862929ceb.svg","file-mindmap":"https://gw.alipayobjects.com/zos/bmw-prod/265d3e31-dd73-4a32-98e8-3743ffa310a1.svg","file-psd":"https://gw.alipayobjects.com/zos/bmw-prod/892951a9-98e0-49b4-ba5f-19d95fddd3dd.svg","file-axure":"https://gw.alipayobjects.com/zos/bmw-prod/d202c669-dca3-4028-b363-62dedf1d84b7.svg","file-doc":"https://gw.alipayobjects.com/zos/bmw-prod/392975b8-8e30-4f82-a897-09af4175c32e.svg","file-pdf":"https://gw.alipayobjects.com/zos/bmw-prod/ffedd70b-2c84-4839-b5f5-a6410e8390e1.svg","file-default":"https://gw.alipayobjects.com/zos/bmw-prod/acd55c7a-0193-4eab-b0a1-12ebab2f1993.svg","file-mindnode":"https://gw.alipayobjects.com/zos/bmw-prod/989c47ac-1dbe-448d-a388-ea0782425eb5.svg","file-video":"https://gw.alipayobjects.com/zos/bmw-prod/b67d7c3f-6097-4c78-990b-6eefc5cdde9e.svg","file-xmind":"https://gw.alipayobjects.com/zos/bmw-prod/f6d58906-cbfa-4bb8-98b8-ac40e02ff538.svg",search:"https://gw.alipayobjects.com/zos/bmw-prod/1473f37f-0254-4542-b000-d5af6aee9ea6.svg",close:"https://gw.alipayobjects.com/zos/bmw-prod/87b8606c-ed7f-4364-8730-aa07ff5d83fd.svg","repo-resource":"https://gw.alipayobjects.com/zos/bmw-prod/78b438b4-7df8-499d-b6af-ecc3de8e1767.svg",loading:"https://gw.alipayobjects.com/zos/bmw-prod/3d243100-7e89-4637-9874-e65fc609dcec.svg"};function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&m(e,t)}(i,e);var t,n,r,a=g(i);function i(){return p(this,i),a.apply(this,arguments)}return t=i,n=[{key:"render",value:function(){var e=this.props,t=e.type,n=e.size,r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e&&!!e.trim()})).join(" ")}(this.props.className,"editor-icon","editor-icon-".concat(t)),a={};n&&(a.width=n,a.height=n);var i=d[t];return o.a.createElement("div",{className:r,style:a,"data-name":t},o.a.createElement("img",{src:i}))}}],n&&h(t.prototype,n),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.Component);b.propTypes={className:c.a.string,type:c.a.string,size:c.a.number};var k=function(e,t){return Array.isArray(e)?e.includes(t):e===t};var w="loading",x="Resource",_="folder",E="file";function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var a=P(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function A(e){if("folder"===e.type)return"file-folder";var t,n=(null==e?void 0:e.ext)||"";return(t=n)?u.FileUtils.isImage(t)?"file-image":u.FileUtils.isVideo(t)?"file-video":u.FileUtils.isAudio(t)?"file-audio":k(["doc","docx","dot","dotx"],t)?"file-word":u.FileUtils.isPdf(t)?"file-pdf":k("txt",t)?"file-txt":k(["pages","md","markdown","rtf"],t)?"file-doc":k("numbers",t)?"file-numbers":k(["xls","xlsx","xlsm","xltx","xlt"],t)?"file-excel":u.FileUtils.isSheet(t)?"file-sheet":u.FileUtils.isPresentation(t)?"file-ppt":k(["xmind","xmind.zip"],t)?"file-xmind":k(["mindnode","mindnode.zip"],t)?"file-mindnode":k("mmp",t)?"file-mindmap":k("sketch",t)?"file-sketch":k("rp",t)?"file-axure":k("psd",t)?"file-psd":k("ai",t)?"file-ai":k("graffle",t)?"file-graffle":k("zip",t)?"file-rar":k("lake",t)?"doc-type-default":k("lakesheet",t)?"doc-type-sheet":"file-default":"file-default"}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&S(e,t)}(i,e);var t,n,r,a=R(i);function i(e){var t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=a.call(this);var r=(null===(t=e.item)||void 0===t?void 0:t.ext)||"";return n.state={ext:r,iconType:A(e.item)},n}return t=i,r=[{key:"getDerivedStateFromProps",value:function(e,t){var n,r=(null===(n=e.item)||void 0===n?void 0:n.ext)||"";return r!==(t.ext||"")?{ext:r,iconType:A(e.item)}:null}}],(n=[{key:"render",value:function(){var e=this.state.iconType;return o.a.createElement(b,{type:e,size:this.props.size})}}])&&O(t.prototype,n),r&&O(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.Component);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},L(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=F(e);if(t){var a=F(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return B(this,n)}}function B(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return z(e)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}T.propTypes={item:c.a.object.isRequired,size:c.a.number};var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&L(e,t)}(i,e);var t,n,r,a=I(i);function i(){var e;M(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return U(z(e=a.call.apply(a,[this].concat(n))),"state",{canPreview:!0,url:""}),U(z(e),"getImageUrl",(function(){var t=e.props.item,n=t.filekey,r=t.ext,a=e.props.getImageUrl(n);return"svg"!==r&&(a=e.props.getCompressImageUrl(a,{height:2*e.props.size,width:2*e.props.size,fill:!0})),a})),U(z(e),"loadImageUrl",(function(){var t=new Image,n=e.getImageUrl();t.src=n,t.onload=function(){e.setState({url:n,canPreview:!0})},t.onerror=function(){e.setState({canPreview:!1})}})),e}return t=i,(n=[{key:"componentDidMount",value:function(){this.loadImageUrl()}},{key:"render",value:function(){var e={};return this.state.url&&(e.backgroundImage="url(".concat(this.state.url,")"),e.width=this.props.size,e.height=this.props.size),this.state.canPreview?o.a.createElement("div",{className:"material-library-repository-image-thumbnail",style:e}):o.a.createElement(T,{item:this.props.item,size:this.props.size})}}])&&N(t.prototype,n),r&&N(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.Component);function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function H(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},G(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$(e);if(t){var a=$(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return K(this,n)}}function K(e,t){if(t&&("object"===q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Z(e)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}V.propTypes={item:c.a.object.isRequired,size:c.a.number,getImageUrl:c.a.func,getCompressImageUrl:c.a.func};var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&G(e,t)}(i,e);var t,n,r,a=X(i);function i(){var e,t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Q(Z(e=a.call(this)),"searchInputRef",o.a.createRef()),Q(Z(e),"getClassName",(t="material-library-repository",function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t:n.map((function(e){return"".concat(t).concat("-"!==e.charAt(0)?"-":"").concat(e)})).join(" ")})),Q(Z(e),"handleClearSearch",(function(){e.setState({breads:[],searchText:"",isSearched:!1,selectedBook:null}),e.props.onGotoRoot()})),Q(Z(e),"handleChangeSearchText",(function(t){e.setState({searchText:t.target.value})})),Q(Z(e),"handleSearch",(function(){if(e.state.searchText){var t="";e.props.books&&(t=e.props.books.map((function(e){return e.id})).join(",")),e.setState({breads:[],isSearched:!0}),e.props.onSearch({bookIds:t,searchText:e.state.searchText})}else e.handleClearSearch()})),Q(Z(e),"handleGotoRoot",(function(){e.props.onQueryBooks(),e.setState({breads:[],selectedBook:null})})),Q(Z(e),"handleBackToSearchResult",(function(){e.setState({breads:[]}),e.props.onBackToSearchResult()})),Q(Z(e),"handleSelectItem",(function(t){return function(){if(t.type===x)return e.setState({breads:[t],selectedBook:t}),void e.props.onSelectFolder({book:t});if(t.type!==E){if(t.type===_){var n=e.state.breads.findIndex((function(e){return e.id===t.id})),r=[];r=n>=0?e.state.breads.slice(0,n+1):[].concat(H(e.state.breads),[t]),e.setState({breads:r}),e.props.onSelectFolder({book:e.state.selectedBook,folder:t})}}else e.props.onSelectFile(t)}})),Q(Z(e),"renderHeader",(function(){return o.a.createElement("div",{className:e.getClassName("header")},o.a.createElement("div",{className:e.getClassName("header-search")},o.a.createElement(s.a.Search,{className:e.getClassName("header-search-input"),ref:e.searchInputRef,placeholder:__("搜资源"),prefix:o.a.createElement(b,{type:"search"}),value:e.state.searchText,onSearch:e.handleSearch,onChange:e.handleChangeSearchText,onClear:e.handleClearSearch,allowClear:!0})))})),Q(Z(e),"renderBreadcrumb",(function(){var t=e.props,n=t.searchResult,r=t.breadsLevel,a=e.state.breads;return o.a.createElement(l.a,{className:e.getClassName("content-breadcrumb")},n?o.a.createElement(l.a.Item,{onClick:e.handleBackToSearchResult},o.a.createElement("span",null,__("搜索结果"))):o.a.createElement(l.a.Item,{onClick:e.handleGotoRoot},o.a.createElement("span",null,__("所有资源知识库"))),(null==a?void 0:a.length)>r&&o.a.createElement(l.a.Item,{className:e.getClassName("content-breadcrumb-split")},"..."),(null==a?void 0:a.length)>0&&a.slice(-r).map((function(t){return o.a.createElement(l.a.Item,{key:"".concat(t.id,"-").concat(t.filename||t.name),onClick:e.handleSelectItem(t)},o.a.createElement("span",{title:t.filename||t.name},t.filename||t.name))})))})),Q(Z(e),"renderBookItem",(function(t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:e.getClassName("content-list-item-icon")},o.a.createElement(b,{type:"repo-resource",size:20})),o.a.createElement("div",{className:e.getClassName("content-list-item-name")},o.a.createElement("span",{className:e.getClassName("content-list-item-name-part"),title:"".concat(t.user.name,"/").concat(t.name)},t.user.name),o.a.createElement("span",{className:e.getClassName("content-list-item-name-split")},"/"),o.a.createElement("span",{className:e.getClassName("content-list-item-name-part"),title:t.name},t.name)))})),Q(Z(e),"renderFileIcon",(function(t){var n=t.ext;return u.FileUtils.isImage(n)&&t.filekey&&!t.filekey.endsWith("?x-oss-process=image/auto-orient,1")?o.a.createElement(V,{item:t,size:20,getImageUrl:e.props.getImageUrl,getCompressImageUrl:e.props.getCompressImageUrl}):o.a.createElement(T,{item:t,size:20})})),Q(Z(e),"renderFileItem",(function(t){var n=t.type===_,r=n?"":".".concat(t.ext);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:e.getClassName("content-list-item-icon")},e.renderFileIcon(t)),o.a.createElement("div",{className:e.getClassName("content-list-item-name")},o.a.createElement("span",{title:"".concat(t.filename).concat(r)},t.filename,r)),!n&&o.a.createElement("div",{className:e.getClassName("content-list-item-tip")},__("插入")))})),Q(Z(e),"renderList",(function(){var t;if(e.props.loadingStatus===w)return null;var n=e.props,r=n.books,a=n.files,i=n.searchResult,c=e.state,l=c.isSearched,s=c.selectedBook,u=null,d=!1;return l?(u=a||i,d=!0):s?(d=!0,u=a):(d=!1,u=r),null!==(t=u)&&void 0!==t&&t.length?o.a.createElement("div",{className:e.getClassName("content-list")},(u||[]).map((function(t){return o.a.createElement("div",{className:e.getClassName("content-list-item"),key:t.id||t.uid,onClick:e.handleSelectItem(t)},d?e.renderFileItem(t):e.renderBookItem(t))}))):o.a.createElement("div",{className:e.getClassName("content-list-empty")},o.a.createElement("div",{className:e.getClassName("content-list-empty-icon")}),o.a.createElement("div",{className:e.getClassName("content-list-empty-title")},(null==r?void 0:r.length)>0?__("没有资源"):o.a.createElement("span",null,__("无资源知识库，立刻"),o.a.createElement("a",{onClick:function(t){t.preventDefault(),e.props.onCreateRepository()}},__("创建")))))})),Q(Z(e),"renderLoading",(function(){return e.props.loadingStatus===w?o.a.createElement("div",{className:e.getClassName("content-loading-mask")},o.a.createElement(b,{type:"loading"}),__("加载中"),"..."):null})),e.state={isSearched:!1,searchText:"",breads:[],selectedBook:null},e}return t=i,(n=[{key:"render",value:function(){return o.a.createElement("div",{className:this.getClassName()},this.renderHeader(),o.a.createElement("div",{className:this.getClassName("content")},this.renderBreadcrumb(),this.renderList(),this.renderLoading()))}}])&&Y(t.prototype,n),r&&Y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.Component);J.propTypes={breadsLevel:c.a.number,books:c.a.array,files:c.a.array,searchResult:c.a.array,onSearch:c.a.func,onSelectFile:c.a.func,onSelectFolder:c.a.func,onQueryBooks:c.a.func,onBackToSearchResult:c.a.func,onGotoRoot:c.a.func,getImageUrl:c.a.func,getCompressImageUrl:c.a.func,loadingStatus:c.a.string,loadingAction:c.a.string,loadingError:c.a.any,onCreateRepository:c.a.func};n(57);var ee=n(23),te=(n(179),n(98)),ne=n(8),re=n.n(ne),ae=n(505),oe=n.n(ae),ie=n(2273),ce=n(2274),le=n(2272),se="sidebar-toolbar-module_wrapper_oE4lW",ue="sidebar-toolbar-module_insertBtn_RY-1c",de=re()(se,"note-list-toolbar"),fe=function(e){Promise.all([n.e(1),n.e(299)]).then(n.bind(null,4308));var t=e.item,r=e.onInsertToLakeEditor;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:de,"data-testid":"note-list-toolbar"},o.a.createElement("span",{className:ue,onClick:function(){return r(t)}},o.a.createElement("svg",{style:{width:14,height:14}},o.a.createElement("use",{xlinkHref:"#insert-doc"})),__("插入文档"))))};fe.defaultProps={onInsertToLakeEditor:function(){}},fe.propTypes={item:c.a.object,onInsertToLakeEditor:c.a.func};var pe=fe,he=n(1726),me=n(252),ge=n(27),ve=n.n(ge),ye=n(89),be=n(1939),ke=n(146);function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ee(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Ce(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ee(o,r,a,i,c,"next",e)}function c(e){Ee(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Re=me.myNotesConsts.NOTE_LATEST_UPDATED_STORAGE_KEY,je=me.myNotesConsts.NOTE_QUERY_STATUS_INTERVAL,Pe=me.myNotesConsts.NOTE_ORDER_BY_STORAGE_KEY,Ae=me.myNotesConsts.NOTE_ALLOW_PAGEPATH_LIST,Te=!1,De=[],Me=null,Ne=!1,Le=window.appData.isAlipayWebApp||window.appData.isDingTalkMiniApp,Ie=ke.ORDER_BY.content_updated_at,Be=ke.FILTER_TYPES.all,ze=null,Fe=null,Ue=function(e){var t=e.isMobile,n=e.isAlipayWebApp,r=e.webProxy,o=Oe(Object(a.useState)([]),2),i=o[0],c=o[1],l=Oe(Object(a.useState)(!1),2),s=l[0],u=l[1],d=Oe(Object(a.useState)(ke.ORDER_BY.content_updated_at),1)[0],f=Oe(Object(a.useState)(!0),2),p=f[0],h=f[1],m=Oe(Object(a.useState)({}),2),g=m[0],v=m[1],y=Oe(Object(a.useState)(null),2),b=y[0],k=y[1],w=Oe(Object(a.useState)(t),2),x=w[0],_=w[1],E=Oe(Object(a.useState)(null),2),C=E[0],O=E[1],S=Oe(Object(a.useState)([]),2),R=S[0],j=S[1],P=Oe(Object(a.useState)(null),2),A=P[0],T=P[1],D=function(e){var t=ke.ORDER_BY.first_published_at,n=ve()(e[t]).format("YYYY-MM-DD HH:mm:ss"),r="".concat(e.id,"-").concat(n);if(ye.default.set(Re,r),me.isDev){var a=document.getElementById("note-lasted-updated");a&&(a.innerText=r)}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.noLoading||u(!0);var t={offset:De.length,q:Me,filter_type:Be,tag:Fe,include_doc_dynamic_data:!0};Me||(t.order=Ie),ke.DEFAULT_TYPE.includes(Be)||(t.include_body=!0,t.order=ke.ORDER_BY.first_published_at),r.notes.find(t,{useOriginResp:!0}).then((function(n){var r=n.data,a=n.meta;e.fromInitial&&(Ne=!0);var o=a.hasMore,l=a.mirror,s=void 0===l?{}:l;if(Me||e.fromQuery||v(s),h(o),0===t.offset){if(!Me){var u=r[0];u&&D(u)}r=r.map((function(e){var t=De.find((function(t){return t.id===e.id&&t.content_updated_at===e.content_updated_at}));return t||e})),c(r)}else{var d=i.concat(r);d=d.map((function(e){var t=De.find((function(t){return t.id===e.id&&t.content_updated_at===e.content_updated_at}));return t||e})),c(d)}})).finally((function(){return u(!1)}))};function N(){return L.apply(this,arguments)}function L(){return(L=Ce(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.tagMaps.count({target_type:be.TARGET_TYPE.Note,target_status:ke.STATUS.unarchived});case 2:(t=e.sent)&&(j(t),A&&!t.some((function(e){return e.tag_meta.id===A}))&&T(null));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I,B=function e(){var t=Ie;r.notes.getStatus({order:t,filter_type:Be},{ignoreGlobalMessage:!0}).then((function(e){var t=e.latestNote;if(Te&&ze&&t&&t.id!==ze.id){var n=!function(e){var t=ke.ORDER_BY.first_published_at,n=ve()(e[t]).format("YYYY-MM-DD HH:mm:ss"),r="".concat(e.id,"-").concat(n);return ye.default.get(Re)===r}(t);n&&(c([]),setTimeout((function(){return M({fromQuery:!0})}),16))}})).finally((function(){return setTimeout(e,je)}))},z=function(){Ne||(De.length&&c([]),setTimeout((function(){return M({fromInitial:!0})}),16))},F=function(){Ae.includes(window.location.pathname)&&"visible"===document.visibilityState&&z()},U=function(){z(),window.addEventListener("visibilitychange",F),N(),n||setTimeout(B,je)};function V(){return(V=Ce(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t[0].isIntersecting&&M();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){De=[],Fe=A,c([]),setTimeout(M,16)}),[A]),Object(a.useEffect)((function(){return U(),function(){Ne=!1}}),[]),Object(a.useEffect)((function(){Te=!b&&!i.some((function(e){return e.editing}))&&!A}),[i,b,A]),Object(a.useEffect)((function(){ze=g}),[g]),Object(a.useEffect)((function(){Me=b}),[b]),Object(a.useEffect)((function(){De=i,Object(he.fixListContainerHeight)()}),[i]),Object(a.useEffect)((function(){Ie!==d&&(Ie=d,ye.default.set(Pe,d),c([]),setTimeout(M,16))}),[d]),window.IntersectionObserver&&(I=new IntersectionObserver((function(e){return V.apply(this,arguments)}),{threshold:.1})),Object(a.useEffect)((function(){if(C&&I)return I.observe(C),function(){I.unobserve(C)}}),[C,i]),{state:{listData:i,listLoading:s,orderBy:d,hasMore:p,note:g,searchValue:b,searchActive:x,noteTags:R,currentTagId:A,isWebAppMiniApp:Le,filterTab:Be},getNotes:M,getNoteTags:N,setSearchActive:_,setLoadRef:O,onLoadNote:function(e){var t=e.id,n=i.slice(),a=n.findIndex((function(e){return e.id===t}));n[a].loading=!0,c(n),r.notes.findOne({id:t}).then((function(e){var t=i.slice();t[a]=xe(xe({},e),{},{expanded_at:new Date}),c(t)})).catch((function(){var e=i.slice();n[a].loading=!1,c(e),ee.a.error(__("获取内容失败，请再试一次"))}))},onLoadNotes:function(e){var t=[];return e.forEach((function(e){return t.push(function(e){return r.notes.findOne({id:e})}(e))})),Promise.all(t).then((function(e){return e})).catch((function(){ee.a.error(__("获取小记内容失败，请稍后尝试"))}))},onCollapseNote:function(e){var t=e.id,n=i.slice(),r=n.findIndex((function(e){return e.id===t}));delete n[r].expanded_at,delete n[r].loaded_at,delete n[r].doclet,c(n)},onSearchNote:function(e){k(e),c([]),setTimeout(M,16)},onSearchReset:function(){b&&(k(null),c([]),setTimeout(M,16))},onFinishLoadNote:function(e){var t=e.id,n=i.slice(),r=n.findIndex((function(e){return e.id===t}));n[r].loaded_at=new Date,c(n)},onSelectTag:function(e){if(e===A)return T(null);T(e)}}},Ve={wrapper:"index-module_wrapper_kkqhF",tagContainer:"index-module_tagContainer_TFFU4",show:"index-module_show_oAR0z",tagContainerExpand:"index-module_tagContainerExpand_7mxch",tagTipBar:"index-module_tagTipBar_g7usD",icon:"index-module_icon_nCjEV"};function qe(){return qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qe.apply(this,arguments)}function He(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ye(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ge=me.myNotesConsts.NOTE_LIST_VIEW_MODES,Xe=function(e){var t;Promise.all([n.e(1),n.e(292)]).then(n.bind(null,4297));var r=Ue(e),i=e.storage,c=e.webProxy,l=We(Object(a.useState)(!1),2),s=l[0],u=l[1],d=r.state,f=d.listLoading,p=d.noteTags,h=d.currentTagId,m=r.onSelectTag,g=r.getNoteTags,v=r.setSearchActive,y=r.onSearchReset,b=r.onSearchNote;Object(a.useEffect)((function(){Object(he.fixListContainerHeight)()}),[s]);var k=!oe()(p);return o.a.createElement("div",{"data-testid":"mynote-list-container",id:"mynote-container",className:Ve.wrapper},o.a.createElement(le.a,{searchValue:r.state.searchValue,searchActive:r.state.searchActive,setSearchActive:v,onSearchReset:y,onSearchNote:b,activeMode:!0,isDesktopApp:me.isDesktopApp}),o.a.createElement("div",{className:re()(Ve.tagContainer,(t={},He(t,Ve.tagContainerExpand,s),He(t,Ve.show,k),t),"note-tag-container")},o.a.createElement("div",{onClick:function(){return u(!s)},className:Ve.tagTipBar},o.a.createElement("span",null,s?__("收起所有标签"):__("展开所有标签")),o.a.createElement("svg",{className:Ve.icon,style:{width:16,height:16}},o.a.createElement("use",{xlinkHref:"#arrow-down"}))),o.a.createElement(ce.a,{onRefreshData:g,data:p,currentTagId:h,onSelect:function(e){return m(e)},viewMode:e.listViewMode,storage:i,webProxy:c})),o.a.createElement(te.a,{spinning:f},o.a.createElement("div",{className:re()(Ve.notesList,"note-list-container")},o.a.createElement(ie.a,qe({},r,{isMobile:!0,viewMode:"lite",renderToolBar:function(t){return o.a.createElement(pe,{item:t,showFeather:!r.state.searchValue,onInsertToLakeEditor:e.onInsertToLakeEditor})}})))))};Xe.fetchData=function(e,t){return t.webProxy.notes.findOne({id:e.id})},Xe.defaultProps={onInsertToLakeEditor:function(){},listViewMode:Ge.lite},Xe.propTypes={webProxy:i.PropTypes.object,storage:i.PropTypes.object,onInsertToLakeEditor:i.PropTypes.func,listViewMode:i.PropTypes.oneOf(Object.values(Ge))};var Ke=Xe;function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function $e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e,t){return Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Je(e,t)}function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rt(e);if(t){var a=rt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return tt(this,n)}}function tt(e,t){if(t&&("object"===Ze(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nt(e)}function nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rt(e){return rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},rt(e)}function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&Je(e,t)}(i,e);var t,n,r,a=et(i);function i(){var e;$e(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return at(nt(e=a.call.apply(a,[this].concat(n))),"onInsertToLakeEditor",(function(t){var n=e.props.webProxy;Ke.fetchData(t,{webProxy:n}).then((function(t){e.props.onInsertDocument("text/lake",t.doclet.body_draft_asl)})).catch((function(){ee.a.error(__("小记插入失败"))}))})),e}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.webProxy,n=e.storage;return o.a.createElement("div",{className:"material-library-note"},o.a.createElement(Ke,{webProxy:t,storage:n,onInsertToLakeEditor:this.onInsertToLakeEditor}))}}])&&Qe(t.prototype,n),r&&Qe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.Component);function it(){return it=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},it.apply(this,arguments)}ot.propTypes={webProxy:c.a.object,storage:c.a.object,onInsertDocument:c.a.func};var ct=r.a.TabPane,lt="storage/sidebar-tab-key",st="note",ut="repository";function dt(e){var t=function(e){var t=e.storage;return{tabKey:t.get(lt)||st,onTabChange:function(e){t.set(lt,e)}}}(e),n=e.storage,a=e.webProxy;return o.a.createElement("div",{className:"material-library-view"},o.a.createElement(r.a,{defaultActiveKey:t.tabKey,onChange:t.onTabChange},o.a.createElement(ct,{tab:__("插入小记"),key:st},o.a.createElement(ot,it({},e.note,{storage:n,webProxy:a}))),o.a.createElement(ct,{tab:__("插入资源"),key:ut},o.a.createElement(J,e.repository))))}dt.propTypes={storage:c.a.object,webProxy:c.a.object,repository:c.a.object,note:c.a.object}},3027:function(e,t,n){e.exports=n(2261)},3028:function(e,t,n){"use strict";n(195);var r=n(121),a=(n(73),n(38)),o=(n(151),n(35)),i=(n(196),n(95)),c=(n(101),n(26)),l=n(0),s=n.n(l),u=n(1),d=n.n(u),f=n(8),p=n.n(f),h=n(71),m=n.n(h),g=n(1966),v=n(283),y=n(1945),b={inputContainer:"index-module_inputContainer_70R9O",wrapper:"index-module_wrapper_IBQqe",errMsg:"index-module_errMsg_hnO+g",input:"index-module_input_0Twm5",checkIcon:"index-module_checkIcon_hlhJ4",clear:"index-module_clear_u2AsH",noEdit:"index-module_noEdit_+6Z1f",title:"index-module_title_gVQpd",suggestData:"index-module_suggestData_LJOLd",tip:"index-module_tip_Ok7iJ",list:"index-module_list_rtxFr",editable:"index-module_editable_MAaew",item:"index-module_item_F3ic8",isPinned:"index-module_isPinned_LDBb5",pinBtn:"index-module_pinBtn_cgoNd",operateBtn:"index-module_operateBtn_gyG+e",fixPadding:"index-module_fixPadding_kmbIj",create:"index-module_create_4kNoI",icon:"index-module_icon_wy8u2",isEditing:"index-module_isEditing_AtnWV",editTag:"index-module_editTag_bCoa1",name:"index-module_name_+nkQF",selectedIcon:"index-module_selectedIcon_oqbu5",operate:"index-module_operate_sEi7o",operateBtnspan:"index-module_operateBtnspan_tDS-8",modalWrapper:"index-module_modalWrapper_IbrD8",modalBody:"index-module_modalBody_uyLyP"};function k(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){k(o,r,a,i,c,"next",e)}function c(e){k(o,r,a,i,c,"throw",e)}i(void 0)}))}}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((function(e,t){return e.pinned_at||t.pinned_at?e.pinned_at&&!t.pinned_at?-1:!e.pinned_at&&t.pinned_at?1:new Date(t.pinned_at).getTime()-new Date(e.pinned_at).getTime():new Date(t.created_at).getTime()-new Date(e.created_at).getTime()}))}function R(e){var t=e.tagProxy,n=e.onSelect,r=e.onDestroy,a=e.onCreate,o=e.hideAfterCreate,i=e.currentData,c=C(Object(l.useState)(null),2),s=c[0],u=c[1],d=C(Object(l.useState)([]),2),f=d[0],p=d[1],h=C(Object(l.useState)([]),2),m=h[0],g=h[1],v=C(Object(l.useState)(""),2),b=v[0],k=v[1],x=C(Object(l.useState)(""),2),E=x[0],O=x[1],R=C(Object(l.useState)(!1),2),j=R[0],P=R[1];function A(e){if(!e)return[];var t=[],n=[];e.forEach((function(e){i&&i.some((function(t){var n;return(null==t||null===(n=t.tag_meta)||void 0===n?void 0:n.id)===e.id}))?n.push(_(_({},e),{},{selected:!0})):t.push(e)}));var r=[].concat(t,n);g(r)}var T=function(){var e=w(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.find({target_type:y.TARGET_TYPE.Note});case 2:n=e.sent,p(S(n)),A(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=w(regeneratorRuntime.mark((function e(r){var i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:if(i=f.find((function(e){return e.name===r.trim()})),!i){e.next=9;break}if(!n){e.next=8;break}return e.next=7,n(i);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",__("标签已存在"));case 9:return e.next=11,t.create({target_type:y.TARGET_TYPE.Note,name:r});case 11:return(c=e.sent)&&(o||(k(""),T()),n&&n(c),a()),e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=w(regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.destroy({id:n.id});case 2:e.sent&&(a=f.filter((function(e){return e.id!==n.id})),p(a),r());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=w(regeneratorRuntime.mark((function e(n){var r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",__("标签不能为空"));case 2:if(r=f.find((function(e){return e.name===n.trim()})),!r){e.next=8;break}if(r.id!==s.id){e.next=7;break}return u(null),e.abrupt("return",!0);case 7:return e.abrupt("return",__("标签已存在"));case 8:return a=s.id,e.next=11,t.update({id:a,name:n});case 11:return o=f.map((function(e){return e.id===s.id?_(_({},e),{},{name:n}):e})),p(o),u(null),e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=w(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:13===(t.keyCode||t.which)&&(t.preventDefault(),t.stopPropagation(),N(t.target.value));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function I(){return I=w(regeneratorRuntime.mark((function e(n){var r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!!n.pinned_at,e.next=3,t.pin({id:n.id,pin:r});case 3:(a=e.sent)&&(o=f.map((function(e){return e.id===a.id?a:e})),p(S(o)));case 5:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}return Object(l.useEffect)((function(){T()}),[]),Object(l.useEffect)((function(){b?A(f?f.filter((function(e){return e.name.includes(b)})):[]):A(f)}),[f,b]),{state:{tagList:f,suggestData:m,inputValue:b,currentEdit:s,currentEditValue:E,visible:j},getData:T,changeValue:function(e){k(e)},onCreateTag:D,setCurrentEditOne:function(e){u(e),O(e?e.name:"")},setCurrentEditValue:O,onDestroyTag:M,handleKeydown:L,onUpdateTag:N,setVisible:P,pinTag:function(e){return I.apply(this,arguments)}}}function j(e){var t=e.onConfirm,n=e.onChange,r=e.value,a=e.autoFocus,o=e.showCreate,i=e.onFocus,c=e.visible,u=e.onBlur,d=e.confirmOnBlur,f=C(Object(l.useState)(null),2),h=f[0],g=f[1],v=Object(l.useRef)();Object(l.useEffect)((function(){a&&c&&setTimeout((function(){v.current&&(v.current.focus(),v.current.select())}),100)}),[c,v]);var k=Object(l.useMemo)((function(){return m()(function(){var e=w(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(n&&n.trim()){e.next=4;break}return e.abrupt("return",g(__("请输入标签")));case 4:return e.next=6,t(n);case 6:return!0!==(r=e.sent)&&g(r),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),300)}),[]);function x(){return(x=w(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!0,!d){e.next=5;break}return e.next=4,k(t.target.value);case 4:n=e.sent;case 5:u&&!0===n&&u();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return s.a.createElement("div",{className:p()(b.inputContainer,E({},b.hasError,!!h))},s.a.createElement("div",{className:b.wrapper},s.a.createElement("input",{ref:v,placeholder:__("输入标签名..."),className:b.input,type:"text",value:r,onKeyDown:function(e){var t=e.keyCode||e.which;("Escape"===e.key||"Esc"===e.key||27===t)&&u&&u(),37!==t&&39!==t||e.stopPropagation(),13===t&&(e.preventDefault(),e.stopPropagation(),k(e.target.value))},onBlur:function(e){return x.apply(this,arguments)},onFocus:i||null,onInput:function(e){g(null),n(e.target.value)},maxLength:y.MAX_LENGTH}),t&&o&&s.a.createElement("span",{onMouseDown:function(e){e.preventDefault()},className:p()(b.checkIcon),onClick:function(){k(r)}},s.a.createElement("svg",{style:{width:16,height:16}},s.a.createElement("use",{xlinkHref:"#check-outlined"})))),h&&s.a.createElement("p",{className:b.errMsg},h))}function P(e){var t;Promise.all([n.e(1),n.e(295)]).then(n.bind(null,4304)),Promise.all([n.e(1),n.e(304)]).then(n.bind(null,4305)),Promise.all([n.e(1),n.e(303)]).then(n.bind(null,4306)),Promise.all([n.e(1),n.e(293)]).then(n.bind(null,4307));var u=e.onSelect,d=e.editable,f=e.placement,h=e.getPopupContainer,m=e.overlayStyle,y=e.onUpdate,k=R(e),w=Object(l.useRef)(),x=C(Object(l.useState)(f||"bottomLeft"),2),_=x[0],O=x[1],S=k.state,P=S.suggestData,A=S.inputValue,T=S.currentEdit,D=P&&!!P.length,M=!D&&A,N=!M&&!D,L=s.a.createElement("div",{className:p()(b.wrapper,(t={},E(t,b.fixPadding,N),E(t,b.editable,d),E(t,b.noEdit,!d),t)),"data-testid":"add-tag-wrapper"},s.a.createElement("p",{className:p()(b.title,"note-tag-menu-tip")},d?__("标签管理"):__("为小记添加标签")),s.a.createElement(j,{visible:k.state.visible,key:k.state.visible,value:k.state.inputValue,onChange:k.changeValue,showCreate:!!k.state.inputValue,onConfirm:k.onCreateTag,tagList:k.state.tagList,onFocus:function(){k.setCurrentEditOne(null)},autoFocus:!0}),M&&s.a.createElement("div",{className:b.create,onClick:function(){return k.onCreateTag(A)}},s.a.createElement(v.a,{className:b.icon}),__("创建标签 “{name}”",{name:A})),D&&s.a.createElement("div",{className:b.suggestData},s.a.createElement("p",{className:p()(b.tip,"note-tag-menu-tip")},__("共{num}个标签",{num:P.length})),s.a.createElement(o.a,{className:p()(b.list,"note-tag-menu-list")},P.map((function(e){var t,n=e.selected,r=e.pinned_at,a=T&&T.id===e.id;return s.a.createElement(o.a.Item,{className:p()(b.item,(t={},E(t,b.isEditing,a),E(t,b.isPinned,!!r),t)),disabled:n,onClick:function(){u&&u(e)},key:e.id},a?s.a.createElement(j,{autoFocus:!0,visible:!0,confirmOnBlur:!0,value:k.state.currentEditValue,onChange:k.setCurrentEditValue,onConfirm:k.onUpdateTag,tagList:k.state.tagList,onBlur:function(){k.setCurrentEditOne(null)}}):s.a.createElement("span",{className:b.name},e.name),s.a.createElement("div",{className:b.operate},d&&!a&&s.a.createElement(s.a.Fragment,null,s.a.createElement(c.a,{title:r?__("取消置顶"):__("置顶")},s.a.createElement("span",{onClick:function(){return k.pinTag(e)},className:b.operateBtn},s.a.createElement("svg",{className:b.pinBtn,style:{width:16,height:16}},s.a.createElement("use",{xlinkHref:"#pinned"})))),s.a.createElement(g.a,{width:"16px",height:"16px",onClick:function(){return k.setCurrentEditOne(e)},className:b.operateBtn}),s.a.createElement(i.a,{overlayClassName:"note-tag-destroy-popover",title:__("删除标签将解除相关小记间的关联"),onConfirm:function(){return k.onDestroyTag(e)},okText:__("删除"),cancelText:__("取消"),placement:"bottomRight",arrowPointAtCenter:!0},s.a.createElement("span",{className:b.operateBtn},s.a.createElement("svg",{style:{width:16,height:16}},s.a.createElement("use",{xlinkHref:"#delete"}))))),n&&s.a.createElement("svg",{className:b.selectedIcon,style:{width:16,height:16}},s.a.createElement("use",{xlinkHref:"#check-outlined"})),!!e.pinned_at&&s.a.createElement("svg",{style:{width:8,height:8,position:"absolute",left:0,top:0}},s.a.createElement("use",{xlinkHref:"#tag-pinned"}))))})))));return d?s.a.createElement("div",null,s.a.createElement(c.a,{title:__("标签管理")},s.a.createElement("div",{onClick:function(){k.setVisible(!0),k.getData()},className:b.modalWrapper},s.a.createElement("svg",{style:{width:16,height:16,marginTop:2}},s.a.createElement("use",{xlinkHref:"#tag"})))),s.a.createElement(a.a,{className:b.modalBody,centered:!0,onCancel:function(){y(),k.setVisible(!1)},visible:k.state.visible,footer:null,bodyStyle:{padding:0,width:458,height:390}},L)):s.a.createElement(r.a,{arrowPointAtCenter:!0,autoAdjustOverflow:!1,overlayStyle:m,overlayClassName:"note-tag-popover",content:L,trigger:"click",placement:_,onVisibleChange:function(e){if(k.setVisible(e),e){if(k.getData(),!f){var t,n,r=null==w||null===(t=w.current)||void 0===t||null===(n=t.triggerRef)||void 0===n?void 0:n.current;if(r){var a=document.documentElement.clientHeight,o=r.getBoundingClientRect(),i=o.top,c=o.bottom;O(a-i<380&&c>440?"topLeft":"bottomLeft")}}}else k.setCurrentEditValue(null),k.setCurrentEditOne(null),k.changeValue(null)},getPopupContainer:h,ref:w},e.children)}j.defaultProps={showCreate:!0},j.propTypes={onConfirm:d.a.func,showCreate:d.a.bool,onChange:d.a.func,onFocus:d.a.func,onBlur:d.a.func},P.useViewModel=R,P.defaultProps={onCreate:function(){},onDestroy:function(){},getPopupContainer:function(){return document.body},overlayStyle:{}},P.propTypes={tagProxy:d.a.object,editable:d.a.bool,onSelect:d.a.func,onCreate:d.a.func,currentData:d.a.Array,onDestroy:d.a.func,onUpdate:d.a.func,placement:d.a.string,getPopupContainer:d.a.func,hideAfterCreate:d.a.bool,overlayStyle:d.a.object};t.a=P},3031:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),c=n(175),l=n(3016),s=n(591),u=n(78),d=n.n(u);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){p(o,r,a,i,c,"next",e)}function c(e){p(o,r,a,i,c,"throw",e)}i(void 0)}))}}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var a=b(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&g(e,t)}(f,e);var t,n,r,o,i,u=v(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=u.call(this,e)).viewerRef=a.a.createRef(),t}return t=f,n=[{key:"componentDidMount",value:function(){this.renderView()}},{key:"hijackNeLink",value:function(e){var t,n;if(window.appData.isDesktopApp&&window.openExternalLink){var r=e.target;if("A"===(null==r||null===(t=r.parentNode)||void 0===t?void 0:t.nodeName)&&"ne-link"===(null==r||null===(n=r.parentNode)||void 0===n?void 0:n.className)){if(e.defaultPrevented)return;e.preventDefault(),window.openExternalLink(r.parentNode.href,!0)}}}},{key:"renderView",value:(i=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.createDocViewer();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),c.a.logViewerError(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return i.apply(this,arguments)})},{key:"createDocViewer",value:(o=h(regeneratorRuntime.mark((function e(){var t,n,r,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.time("LakexNoteViewer"),e.next=3,s.a.getLakexEditor();case 3:t=e.sent,n=t.createDocViewer,(r=n(this.viewerRef.current,this.buildOptions())).on("ready",(function(){console.timeEnd("LakexNoteViewer"),a.props.onReady&&a.props.onReady(a.viewerRef.current)})),r.on("dynamicDataChange",(function(e){a.props.onDynamicDataChange&&a.props.onDynamicDataChange(e)})),r.setDocument({type:"lake",value:this.props.content},{dynamicData:this.props.dynamicData});case 9:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"buildOptions",value:function(){var e=this,t=this.props,n=t.docId,r=l.a.buildOptions({isDesktop:window.appData.isDesktopApp,target_id:n,target_type:"Doclet",layout:d.a.VIEWPORT.adapt,typography:d.a.TYPOGRAPHY.traditional,file:{downloadFileHandler:t.downloadFileHandler,previewFileHandler:function(e){window.appData.isDesktopApp&&window.openExternalLink?window.openExternalLink(e,!0):window.open(e)}},list:{enableDynamic:t.enableDynamicTaskList}});return r.scrollNode=function(){var t;return null===(t=e.viewerRef)||void 0===t?void 0:t.current},r}},{key:"render",value:function(){return a.a.createElement("div",{className:"yuque-doc-content","data-df":"lake",style:{position:"relative"},onClick:this.hijackNeLink},a.a.createElement("div",{ref:this.viewerRef}))}}],n&&m(t.prototype,n),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),f}(r.PureComponent);k.defaultProps={enableDynamicTaskList:!1},k.propTypes={id:i.a.oneOfType([i.a.string,i.a.number]),content:i.a.string,onReady:i.a.func,onDynamicDataChange:i.a.func,downloadFileHandler:i.a.func,dynamicData:i.a.array,enableDynamicTaskList:i.a.bool},t.a=k},3032:function(e,t,n){"use strict";var r=n(3033),a=n(2964),o=n(2961),i=Object.prototype.hasOwnProperty,c={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Array.isArray,s=String.prototype.split,u=Array.prototype.push,d=function(e,t){u.apply(e,l(t)?t:[t])},f=Date.prototype.toISOString,p=o.default,h={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:a.encode,encodeValuesOnly:!1,format:p,formatter:o.formatters[p],indices:!1,serializeDate:function(e){return f.call(e)},skipNulls:!1,strictNullHandling:!1},m={},g=function e(t,n,o,i,c,u,f,p,g,v,y,b,k,w,x){for(var _,E=t,C=x,O=0,S=!1;void 0!==(C=C.get(m))&&!S;){var R=C.get(t);if(O+=1,void 0!==R){if(R===O)throw new RangeError("Cyclic object value");S=!0}void 0===C.get(m)&&(O=0)}if("function"==typeof f?E=f(n,E):E instanceof Date?E=v(E):"comma"===o&&l(E)&&(E=a.maybeMap(E,(function(e){return e instanceof Date?v(e):e}))),null===E){if(i)return u&&!k?u(n,h.encoder,w,"key",y):n;E=""}if("string"==typeof(_=E)||"number"==typeof _||"boolean"==typeof _||"symbol"==typeof _||"bigint"==typeof _||a.isBuffer(E)){if(u){var j=k?n:u(n,h.encoder,w,"key",y);if("comma"===o&&k){for(var P=s.call(String(E),","),A="",T=0;T<P.length;++T)A+=(0===T?"":",")+b(u(P[T],h.encoder,w,"value",y));return[b(j)+"="+A]}return[b(j)+"="+b(u(E,h.encoder,w,"value",y))]}return[b(n)+"="+b(String(E))]}var D,M=[];if(void 0===E)return M;if("comma"===o&&l(E))D=[{value:E.length>0?E.join(",")||null:void 0}];else if(l(f))D=f;else{var N=Object.keys(E);D=p?N.sort(p):N}for(var L=0;L<D.length;++L){var I=D[L],B="object"==typeof I&&void 0!==I.value?I.value:E[I];if(!c||null!==B){var z=l(E)?"function"==typeof o?o(n,I):n:n+(g?"."+I:"["+I+"]");x.set(t,O);var F=r();F.set(m,x),d(M,e(B,z,o,i,c,u,f,p,g,v,y,b,k,w,F))}}return M};e.exports=function(e,t){var n,a=e,s=function(e){if(!e)return h;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||h.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=o.default;if(void 0!==e.format){if(!i.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=o.formatters[n],a=h.filter;return("function"==typeof e.filter||l(e.filter))&&(a=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:h.addQueryPrefix,allowDots:void 0===e.allowDots?h.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:h.charsetSentinel,delimiter:void 0===e.delimiter?h.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:h.encode,encoder:"function"==typeof e.encoder?e.encoder:h.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:h.encodeValuesOnly,filter:a,format:n,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:h.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:h.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:h.strictNullHandling}}(t);"function"==typeof s.filter?a=(0,s.filter)("",a):l(s.filter)&&(n=s.filter);var u,f=[];if("object"!=typeof a||null===a)return"";u=t&&t.arrayFormat in c?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var p=c[u];n||(n=Object.keys(a)),s.sort&&n.sort(s.sort);for(var m=r(),v=0;v<n.length;++v){var y=n[v];s.skipNulls&&null===a[y]||d(f,g(a[y],y,p,s.strictNullHandling,s.skipNulls,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,m))}var b=f.join(s.delimiter),k=!0===s.addQueryPrefix?"?":"";return s.charsetSentinel&&("iso-8859-1"===s.charset?k+="utf8=%26%2310003%3B&":k+="utf8=%E2%9C%93&"),b.length>0?k+b:""}},3033:function(e,t,n){"use strict";var r=n(2959),a=n(3038),o=n(3040),i=r("%TypeError%"),c=r("%WeakMap%",!0),l=r("%Map%",!0),s=a("WeakMap.prototype.get",!0),u=a("WeakMap.prototype.set",!0),d=a("WeakMap.prototype.has",!0),f=a("Map.prototype.get",!0),p=a("Map.prototype.set",!0),h=a("Map.prototype.has",!0),m=function(e,t){for(var n,r=e;null!==(n=r.next);r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n};e.exports=function(){var e,t,n,r={assert:function(e){if(!r.has(e))throw new i("Side channel does not contain "+o(e))},get:function(r){if(c&&r&&("object"==typeof r||"function"==typeof r)){if(e)return s(e,r)}else if(l){if(t)return f(t,r)}else if(n)return function(e,t){var n=m(e,t);return n&&n.value}(n,r)},has:function(r){if(c&&r&&("object"==typeof r||"function"==typeof r)){if(e)return d(e,r)}else if(l){if(t)return h(t,r)}else if(n)return function(e,t){return!!m(e,t)}(n,r);return!1},set:function(r,a){c&&r&&("object"==typeof r||"function"==typeof r)?(e||(e=new c),u(e,r,a)):l?(t||(t=new l),p(t,r,a)):(n||(n={key:{},next:null}),function(e,t,n){var r=m(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}}(n,r,a))}};return r}},3034:function(e,t,n){"use strict";var r="undefined"!=typeof Symbol&&Symbol,a=n(3035);e.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&a())))}},3035:function(e,t,n){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var a=Object.getOwnPropertyDescriptor(e,t);if(42!==a.value||!0!==a.enumerable)return!1}return!0}},3036:function(e,t,n){"use strict";var r="Function.prototype.bind called on incompatible ",a=Array.prototype.slice,o=Object.prototype.toString,i="[object Function]";e.exports=function(e){var t=this;if("function"!=typeof t||o.call(t)!==i)throw new TypeError(r+t);for(var n,c=a.call(arguments,1),l=function(){if(this instanceof n){var r=t.apply(this,c.concat(a.call(arguments)));return Object(r)===r?r:this}return t.apply(e,c.concat(a.call(arguments)))},s=Math.max(0,t.length-c.length),u=[],d=0;d<s;d++)u.push("$"+d);if(n=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(l),t.prototype){var f=function(){};f.prototype=t.prototype,n.prototype=new f,f.prototype=null}return n}},3037:function(e,t,n){"use strict";var r=n(2960);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},3038:function(e,t,n){"use strict";var r=n(2959),a=n(3039),o=a(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&o(e,".prototype.")>-1?a(n):n}},3039:function(e,t,n){"use strict";var r=n(2960),a=n(2959),o=a("%Function.prototype.apply%"),i=a("%Function.prototype.call%"),c=a("%Reflect.apply%",!0)||r.call(i,o),l=a("%Object.getOwnPropertyDescriptor%",!0),s=a("%Object.defineProperty%",!0),u=a("%Math.max%");if(s)try{s({},"a",{value:1})}catch(e){s=null}e.exports=function(e){var t=c(r,i,arguments);if(l&&s){var n=l(t,"length");n.configurable&&s(t,"length",{value:1+u(0,e.length-(arguments.length-1))})}return t};var d=function(){return c(r,o,arguments)};s?s(e.exports,"apply",{value:d}):e.exports.apply=d},3040:function(e,t,n){var r="function"==typeof Map&&Map.prototype,a=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=r&&a&&"function"==typeof a.get?a.get:null,i=r&&Map.prototype.forEach,c="function"==typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&c?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,s=c&&l&&"function"==typeof l.get?l.get:null,u=c&&Set.prototype.forEach,d="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,f="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,h=Boolean.prototype.valueOf,m=Object.prototype.toString,g=Function.prototype.toString,v=String.prototype.match,y=String.prototype.slice,b=String.prototype.replace,k=String.prototype.toUpperCase,w=String.prototype.toLowerCase,x=RegExp.prototype.test,_=Array.prototype.concat,E=Array.prototype.join,C=Array.prototype.slice,O=Math.floor,S="function"==typeof BigInt?BigInt.prototype.valueOf:null,R=Object.getOwnPropertySymbols,j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,P="function"==typeof Symbol&&"object"==typeof Symbol.iterator,A="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===P||"symbol")?Symbol.toStringTag:null,T=Object.prototype.propertyIsEnumerable,D=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function M(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||x.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var r=e<0?-O(-e):O(e);if(r!==e){var a=String(r),o=y.call(t,a.length+1);return b.call(a,n,"$&_")+"."+b.call(b.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(t,n,"$&_")}var N=n(3041).custom,L=N&&F(N)?N:null;function I(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r}function B(e){return b.call(String(e),/"/g,"&quot;")}function z(e){return!("[object Array]"!==q(e)||A&&"object"==typeof e&&A in e)}function F(e){if(P)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!j)return!1;try{return j.call(e),!0}catch(e){}return!1}e.exports=function e(t,n,r,a){var c=n||{};if(V(c,"quoteStyle")&&"single"!==c.quoteStyle&&"double"!==c.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(V(c,"maxStringLength")&&("number"==typeof c.maxStringLength?c.maxStringLength<0&&c.maxStringLength!==1/0:null!==c.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var l=!V(c,"customInspect")||c.customInspect;if("boolean"!=typeof l&&"symbol"!==l)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(V(c,"indent")&&null!==c.indent&&"\t"!==c.indent&&!(parseInt(c.indent,10)===c.indent&&c.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(V(c,"numericSeparator")&&"boolean"!=typeof c.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var m=c.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return W(t,c);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var k=String(t);return m?M(t,k):k}if("bigint"==typeof t){var x=String(t)+"n";return m?M(t,x):x}var O=void 0===c.depth?5:c.depth;if(void 0===r&&(r=0),r>=O&&O>0&&"object"==typeof t)return z(t)?"[Array]":"[Object]";var R=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;n=E.call(Array(e.indent+1)," ")}return{base:n,prev:E.call(Array(t+1),n)}}(c,r);if(void 0===a)a=[];else if(H(a,t)>=0)return"[Circular]";function N(t,n,o){if(n&&(a=C.call(a)).push(n),o){var i={depth:c.depth};return V(c,"quoteStyle")&&(i.quoteStyle=c.quoteStyle),e(t,i,r+1,a)}return e(t,c,r+1,a)}if("function"==typeof t){var U=function(e){if(e.name)return e.name;var t=v.call(g.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),Y=$(t,N);return"[Function"+(U?": "+U:" (anonymous)")+"]"+(Y.length>0?" { "+E.call(Y,", ")+" }":"")}if(F(t)){var Q=P?b.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):j.call(t);return"object"!=typeof t||P?Q:G(Q)}if(function(e){if(!e||"object"!=typeof e)return!1;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"==typeof e.nodeName&&"function"==typeof e.getAttribute}(t)){for(var J="<"+w.call(String(t.nodeName)),ee=t.attributes||[],te=0;te<ee.length;te++)J+=" "+ee[te].name+"="+I(B(ee[te].value),"double",c);return J+=">",t.childNodes&&t.childNodes.length&&(J+="..."),J+="</"+w.call(String(t.nodeName))+">"}if(z(t)){if(0===t.length)return"[]";var ne=$(t,N);return R&&!function(e){for(var t=0;t<e.length;t++)if(H(e[t],"\n")>=0)return!1;return!0}(ne)?"["+Z(ne,R)+"]":"[ "+E.call(ne,", ")+" ]"}if(function(e){return!("[object Error]"!==q(e)||A&&"object"==typeof e&&A in e)}(t)){var re=$(t,N);return"cause"in t&&!T.call(t,"cause")?"{ ["+String(t)+"] "+E.call(_.call("[cause]: "+N(t.cause),re),", ")+" }":0===re.length?"["+String(t)+"]":"{ ["+String(t)+"] "+E.call(re,", ")+" }"}if("object"==typeof t&&l){if(L&&"function"==typeof t[L])return t[L]();if("symbol"!==l&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!o||!e||"object"!=typeof e)return!1;try{o.call(e);try{s.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var ae=[];return i.call(t,(function(e,n){ae.push(N(n,t,!0)+" => "+N(e,t))})),K("Map",o.call(t),ae,R)}if(function(e){if(!s||!e||"object"!=typeof e)return!1;try{s.call(e);try{o.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var oe=[];return u.call(t,(function(e){oe.push(N(e,t))})),K("Set",s.call(t),oe,R)}if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{f.call(e,f)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return X("WeakMap");if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{f.call(e,f);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return X("WeakSet");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{return p.call(e),!0}catch(e){}return!1}(t))return X("WeakRef");if(function(e){return!("[object Number]"!==q(e)||A&&"object"==typeof e&&A in e)}(t))return G(N(Number(t)));if(function(e){if(!e||"object"!=typeof e||!S)return!1;try{return S.call(e),!0}catch(e){}return!1}(t))return G(N(S.call(t)));if(function(e){return!("[object Boolean]"!==q(e)||A&&"object"==typeof e&&A in e)}(t))return G(h.call(t));if(function(e){return!("[object String]"!==q(e)||A&&"object"==typeof e&&A in e)}(t))return G(N(String(t)));if(!function(e){return!("[object Date]"!==q(e)||A&&"object"==typeof e&&A in e)}(t)&&!function(e){return!("[object RegExp]"!==q(e)||A&&"object"==typeof e&&A in e)}(t)){var ie=$(t,N),ce=D?D(t)===Object.prototype:t instanceof Object||t.constructor===Object,le=t instanceof Object?"":"null prototype",se=!ce&&A&&Object(t)===t&&A in t?y.call(q(t),8,-1):le?"Object":"",ue=(ce||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(se||le?"["+E.call(_.call([],se||[],le||[]),": ")+"] ":"");return 0===ie.length?ue+"{}":R?ue+"{"+Z(ie,R)+"}":ue+"{ "+E.call(ie,", ")+" }"}return String(t)};var U=Object.prototype.hasOwnProperty||function(e){return e in this};function V(e,t){return U.call(e,t)}function q(e){return m.call(e)}function H(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function W(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return W(y.call(e,0,t.maxStringLength),t)+r}return I(b.call(b.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Y),"single",t)}function Y(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+k.call(t.toString(16))}function G(e){return"Object("+e+")"}function X(e){return e+" { ? }"}function K(e,t,n,r){return e+" ("+t+") {"+(r?Z(n,r):E.call(n,", "))+"}"}function Z(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+E.call(e,","+n)+"\n"+t.prev}function $(e,t){var n=z(e),r=[];if(n){r.length=e.length;for(var a=0;a<e.length;a++)r[a]=V(e,a)?t(e[a],e):""}var o,i="function"==typeof R?R(e):[];if(P){o={};for(var c=0;c<i.length;c++)o["$"+i[c]]=i[c]}for(var l in e)V(e,l)&&(n&&String(Number(l))===l&&l<e.length||P&&o["$"+l]instanceof Symbol||(x.call(/[^\w$]/,l)?r.push(t(l,e)+": "+t(e[l],e)):r.push(l+": "+t(e[l],e))));if("function"==typeof R)for(var s=0;s<i.length;s++)T.call(e,i[s])&&r.push("["+t(i[s])+"]: "+t(e[i[s]],e));return r}},3041:function(e,t){},3042:function(e,t,n){"use strict";var r=n(2964),a=Object.prototype.hasOwnProperty,o=Array.isArray,i={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},c=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},l=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},s=function(e,t,n,r){if(e){var o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,c=n.depth>0&&/(\[[^[\]]*])/.exec(o),s=c?o.slice(0,c.index):o,u=[];if(s){if(!n.plainObjects&&a.call(Object.prototype,s)&&!n.allowPrototypes)return;u.push(s)}for(var d=0;n.depth>0&&null!==(c=i.exec(o))&&d<n.depth;){if(d+=1,!n.plainObjects&&a.call(Object.prototype,c[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(c[1])}return c&&u.push("["+o.slice(c.index)+"]"),function(e,t,n,r){for(var a=r?t:l(t,n),o=e.length-1;o>=0;--o){var i,c=e[o];if("[]"===c&&n.parseArrays)i=[].concat(a);else{i=n.plainObjects?Object.create(null):{};var s="["===c.charAt(0)&&"]"===c.charAt(c.length-1)?c.slice(1,-1):c,u=parseInt(s,10);n.parseArrays||""!==s?!isNaN(u)&&c!==s&&String(u)===s&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(i=[])[u]=a:i[s]=a:i={0:a}}a=i}return a}(u,t,n,r)}};e.exports=function(e,t){var n=function(e){if(!e)return i;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?i.charset:e.charset;return{allowDots:void 0===e.allowDots?i.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:i.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:i.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:i.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:i.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:i.comma,decoder:"function"==typeof e.decoder?e.decoder:i.decoder,delimiter:"string"==typeof e.delimiter||r.isRegExp(e.delimiter)?e.delimiter:i.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:i.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:i.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:i.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:i.strictNullHandling}}(t);if(""===e||null==e)return n.plainObjects?Object.create(null):{};for(var u="string"==typeof e?function(e,t){var n,s={},u=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,d=t.parameterLimit===1/0?void 0:t.parameterLimit,f=u.split(t.delimiter,d),p=-1,h=t.charset;if(t.charsetSentinel)for(n=0;n<f.length;++n)0===f[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===f[n]?h="utf-8":"utf8=%26%2310003%3B"===f[n]&&(h="iso-8859-1"),p=n,n=f.length);for(n=0;n<f.length;++n)if(n!==p){var m,g,v=f[n],y=v.indexOf("]="),b=-1===y?v.indexOf("="):y+1;-1===b?(m=t.decoder(v,i.decoder,h,"key"),g=t.strictNullHandling?null:""):(m=t.decoder(v.slice(0,b),i.decoder,h,"key"),g=r.maybeMap(l(v.slice(b+1),t),(function(e){return t.decoder(e,i.decoder,h,"value")}))),g&&t.interpretNumericEntities&&"iso-8859-1"===h&&(g=c(g)),v.indexOf("[]=")>-1&&(g=o(g)?[g]:g),a.call(s,m)?s[m]=r.combine(s[m],g):s[m]=g}return s}(e,n):e,d=n.plainObjects?Object.create(null):{},f=Object.keys(u),p=0;p<f.length;++p){var h=f[p],m=s(h,u[h],n,"string"==typeof e);d=r.merge(d,m,n)}return!0===n.allowSparse?d:r.compact(d)}},3043:function(e,t,n){e.exports=n(146)},3044:function(e,t,n){"use strict";n.r(t);var r=n(2714),a=n.n(r),o=n(939);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.storageKey={morning:"note/placeholder/morning",evening:"note/placeholder/evening"}}var t,n,r;return t=e,(n=[{key:"getPlaceHolder",value:function(){return this._isMorning()?this._getMorningPlaceholder():this._isEvening()?this._getEveningPlaceholder():this._getDefaultPlaceholder()}},{key:"setPlaceholderStorage",value:function(){var e=this._getDate().date;this._isMorning()&&o.a.set(this.storageKey.morning,e),this._isEvening()&&o.a.set(this.storageKey.evening,e)}},{key:"_isMorning",value:function(){var e=this._getDate(),t=e.hour,n=e.date;return t>=6&&t<10&&o.a.get(this.storageKey.morning)!==n}},{key:"_isEvening",value:function(){var e=this._getDate(),t=e.hour,n=e.date;return t>=19&&t<24&&o.a.get(this.storageKey.evening)!==n}},{key:"_getDate",value:function(){var e=new Date;return{date:"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate()),hour:e.getHours()}}},{key:"_getDefaultPlaceholder",value:function(){return __("此刻的想法是")}},{key:"_getMorningPlaceholder",value:function(){return __("今天的计划是")}},{key:"_getEveningPlaceholder",value:function(){var e=a()(0,2);return[__("今天我做了"),__("今天完成了"),__("今天值得记录的一件小事是")][e]}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=c},3048:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));n(45);var r=n(18),a=(n(73),n(38)),o=(n(75),n(25)),i=(n(293),n(80)),c=n(0),l=n.n(c),s=n(1),u=n.n(s),d=n(99),f="SaveAsVersion-module_nameVersion_VphI2";function p(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){var t=e.version,n=h(i.a.useForm(),1)[0],r=function(){var r,a=(r=regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.validateFields();case 3:return a=r.sent,r.next=6,e.docVersionProxy.name({id:t.id,name:a.name});case 6:o=r.sent,e.onCreated(o),e.onCancel(),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),console.log(r.t0);case 14:case"end":return r.stop()}}),r,null,[[0,11]])})),function(){var e=this,t=arguments;return new Promise((function(n,a){var o=r.apply(e,t);function i(e){p(o,n,a,i,c,"next",e)}function c(e){p(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(){return a.apply(this,arguments)}}();return l.a.createElement(a.a,{"data-testid":"history-name-model",closable:!1,maskClosable:!1,onClose:e.onCancel,onCancel:e.onCancel,onOk:r,title:__("保存为版本"),visible:!0},l.a.createElement(i.a,{"data-testid":"history-name-form",className:f,form:n,layout:"vertical"},l.a.createElement(i.a.Item,{label:__("版本名称"),name:"name",rules:[{required:!0,message:__("请输入版本名称")},{max:40,message:__("最多 40 个字符")}]},l.a.createElement(o.a,{placeholder:__("最多 40 个字符"),"data-testid":"version-name-input"}))))}function v(e){var t=h(Object(c.useState)(!1),2),n=t[0],a=t[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(r.a,{"data-testid":"save-as-version",onClick:function(){a(!0)}},__("保存为版本")),n&&l.a.createElement(g,{version:e.version,onCreated:e.onCreated,docVersionProxy:e.docVersionProxy,onCancel:function(){a(!1)}}))}g.propTypes={version:u.a.object.isRequired,onCreated:u.a.func.isRequired,onCancel:u.a.func.isRequired,docVersionProxy:u.a.object.isRequired},v.propTypes={version:u.a.object.isRequired,onCreated:u.a.func.isRequired,docVersionProxy:u.a.object.isRequired};t.b=Object(d.b)(g,!1)},3052:function(e,t,n){"use strict";n.d(t,"g",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"f",(function(){return m})),n.d(t,"b",(function(){return g})),n.d(t,"h",(function(){return v})),n.d(t,"a",(function(){return y}));var r=n(247),a=n.n(r),o=n(27),i=n.n(o),c=n(89);function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.search;if(t){var n=a.a.parse(t);return n[e]||""}return""}var s=window.self!==window.top;function u(){var e=l("mode"),t=c.default.get("topicsPageMode");return"clean"===e?(c.default.set("topicsPageMode","clean"),"clean"):"normal"===e?(c.default.remove("topicsPageMode"),"normal"):t&&"clean"===t&&s?"clean":"normal"}var d=function(){return{assignee_id:l("assignee_id"),label_ids:l("label_ids"),kanban_id:l("kanban_id"),user_id:l("user_id"),privacy:l("privacy"),state:l("state")||"open",q:l("q")}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=e.assignee_id,r=e.label_ids,a=e.kanban_id,o=e.user_id,i=e.privacy,c=e.q,l=d(),s=t||""===t?t:l.state,u=n||""===n?n:l.assignee_id,f=r||""===r?r:l.label_ids,p=a||""===a?a:l.kanban_id,h=o||""===o?o:l.user_id,m=i||""===i?i:l.privacy,g=c||""===c?c:l.q;return{assignee_id:u,label_ids:f,kanban_id:p,user_id:h,privacy:m,state:s,q:g}};function p(e){return"none"===e?-1:e}var h=function(){var e=d();return{assignee_id:p(e.assignee_id),label_ids:p(e.label_ids),kanban_id:p(e.kanban_id),user_id:e.user_id,privacy:e.privacy,state:e.state,q:e.q}};function m(e){return a.a.stringify(e)}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";return i()(new Date(e)).format(t)}function v(e){return i()().isAfter(i()(e).format("YYYY-MM-DD"),"day")}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=/^S[0-9]{7,}$/;return!t.test(e.name)}},3060:function(e,t,n){"use strict";var r=n(104),a=n.n(r),o=n(89),i=n(2261),c=n.n(i);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=a()("editor:cache"),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.key=t}var t,n,r;return t=e,(n=[{key:"retrieve",value:function(){var e={format:null,value:null};s("[retrieve]key: ",this.key);var t=o.default.get(this.key);if(!t)return null;s("[retrieve]find text: ",t);var n=c.a.guessFormat(t);return e.format=n,e.value=t,s("[retrieve]doc: ",e),e}},{key:"put",value:function(e,t){s("[put]content cached: ","".concat(this.key," -> ").concat(e)),o.default.set(this.key,e)}},{key:"clear",value:function(){o.default.remove(this.key)}}])&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=u},3065:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=n(558);function a(e,t){return!(!e||!t)&&(e.uid&&t.uid?e.uid===t.uid:e.login&&t.login?e.login===t.login:!(!t.provider_userid||!e.provider_userid)&&(e.provider_userid===t.provider_userid&&e.provider_type===t.provider_type))}function o(e){var t=e.members||e.collaborators||e.collaborations;return t?Object(r.format)(t.map((function(e){return e.user}))):[]}},3072:function(e,t,n){},3081:function(e,t,n){},3084:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=(r=n(68))&&"object"==typeof r&&"default"in r?r.default:r;function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var u={PUBLISH:"yuque_sdk_publish",PUBLISH_CALLBACK:"yuque_sdk_publish_callback",RESIZE_CALLBACK:"yuque_sdk_resize_callback",CONNECT:"yuque_sdk_connect",DISCONNECT:"yuque_sdk_disconnect",FULLSCREEN_CALLBACK:"yuque_sdk_fullscreen_callback",SAVE_CALLBACK:"yuque_sdk_save_callback",SET_VALUE:"yuque_sdk_set_value",GET_VALUE:"yuque_sdk_get_value",GET_VALUE_CALLBACK:"yuque_sdk_get_value_callback",INSERT_VALUE:"yuque_sdk_insert_value",CHANGE_CALLBACK:"yuque_sdk_change_callback",SET_TITLE_VALUE:"yuque_sdk_set_title_value",GET_TITLE_VALUE:"yuque_sdk_get_title_value",GET_TITLE_VALUE_CALLBACK:"yuque_sdk_get_title_value_callback",SAVE_TITLE_CALLBACK:"yuque_sdk_save_title_callback",TITLE_CHANGE_CALLBACK:"yuque_sdk_title_change_callback",SCROLL_TO:"yuque_sdk_scroll_to",DOC_LOADED_CALLBACK:"yuque_sdk_doc_loaded_callback",UNLOCK:"yuque_sdk_unlock",UNLOCK_CALLBACK:"yuque_sdk_unlock_callback",RESET:"yuque_sdk_reset",RESET_CALLBACK:"yuque_sdk_reset_callback",LOAD_CALLBACK:"yuque_sdk_load_callback"},d=0,f=function(e){o(n,a);var t=function(e){return function(){var t,n=i(e);if(l()){var r=i(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)}}(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this)).init=function(t){e.url=location.href,e.target=t,e._postMessageToParent({type:u.CONNECT,url:e.url}),window.addEventListener("message",(function t(n){("string"==typeof n.data?JSON.parse(n.data):n.data).type===u.CONNECT&&(e._postMessageToParent({type:u.CONNECT,url:e.url}),window.removeEventListener("message",t,!1))}),!1),window.addEventListener("unload",(function(){e._postMessageToParent({type:u.DISCONNECT,url:e.url})}))},e._postMessageToParent=function(t){e.target&&e.target.postMessage(JSON.stringify(t),"*")},e.postMessage=function(t,n){var r={type:t,message:n,messageId:++d,url:e.url};e._postMessageToParent(r)},e.handleMessage=function(t){return e.emit("message",t)},e.ready=!1,e}return n}(),p=new f,h=function(e){try{var t="string"==typeof e.data?JSON.parse(e.data):e.data;p.handleMessage(t)}catch(e){console&&console.error(e)}};window&&window.parent&&window.self!==window.top&&(p.init(window.parent),window.addEventListener("message",h));t.MESSAGE_TYPES=u,t.eventHandler=h,t.handler=p,t.onMessage=function(e){return p.on("message",e)},t.postMessage=function(e,t){return p.postMessage(e,t)}},3086:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="StarFilled";t.a=a.forwardRef(c)},3087:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return e?(e=e.toLowerCase(),{organization:__("空间"),group:__("团队"),book:__("知识库"),doc:__("文档"),thread:__("话题"),sheet:__("表格"),resource:__("资源知识库"),design:__("图集"),column:__("专栏")}[e]||__("文档")):""}},3092:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(3093))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},3093:function(e,t,n){"use strict";var r=n(152),a=n(111);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(128)),i=r(n(0)),c=a(n(3094)),l=a(n(218)),s=function(e,t){return i.createElement(l.default,(0,o.default)((0,o.default)({},e),{},{ref:t,icon:c.default}))};s.displayName="LeftOutlined";var u=i.forwardRef(s);t.default=u},3094:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"}},3095:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(3096))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},3096:function(e,t,n){"use strict";var r=n(152),a=n(111);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(128)),i=r(n(0)),c=a(n(3097)),l=a(n(218)),s=function(e,t){return i.createElement(l.default,(0,o.default)((0,o.default)({},e),{},{ref:t,icon:c.default}))};s.displayName="MehOutlined";var u=i.forwardRef(s);t.default=u},3097:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 565H360c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h304c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"meh",theme:"outlined"}},3098:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(3099))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},3099:function(e,t,n){"use strict";var r=n(152),a=n(111);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(128)),i=r(n(0)),c=a(n(3100)),l=a(n(218)),s=function(e,t){return i.createElement(l.default,(0,o.default)((0,o.default)({},e),{},{ref:t,icon:c.default}))};s.displayName="SyncOutlined";var u=i.forwardRef(s);t.default=u},3100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"}},3101:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(3102))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},3102:function(e,t,n){"use strict";var r=n(152),a=n(111);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(128)),i=r(n(0)),c=a(n(3103)),l=a(n(218)),s=function(e,t){return i.createElement(l.default,(0,o.default)((0,o.default)({},e),{},{ref:t,icon:c.default}))};s.displayName="UploadOutlined";var u=i.forwardRef(s);t.default=u},3103:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"}},3124:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="StarOutlined";t.a=a.forwardRef(c)},3130:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"c",(function(){return _}));n(57);var r=n(23),a=n(0),o=n.n(a),i=n(1),c=n.n(i),l=n(69),s=n.n(l),u=n(1936),d=n.n(u),f=n(3084),p=n(113),h=n(510);function m(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=new(n(1552).a),x=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b(this,e),this.doc=n.doc,this.getContent=n.getContent,this.workflow=n.workflow,this.engine=n.workflow?n.workflow.engine:n.engine,this._title=this.doc&&this.doc.title,this.getTitle=function(){return t._title},w.saveToServer||(this.getTitle=n.getTitle||function(){return this.doc?this.doc.title:null}),this.change=s()(this.change,300),this.onMessage=f.onMessage,this.MESSAGE_TYPES=f.MESSAGE_TYPES,"off"===w.extraConfig.message&&r.a.config({top:-9999})}var t,n,a,o,i;return t=e,n=[{key:"_postContentMessage",value:function(e,t){if(t||(t={status:"success",message:"ok"}),t.id=this.doc.slug,"success"===t.status)return this._getEmbedData().then((function(n){t.data=v(v({},n),t.data||{}),Object(f.postMessage)(e,t)}));Object(f.postMessage)(e,t)}},{key:"_getEmbedData",value:(o=regeneratorRuntime.mark((function e(){var t,n,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.engine){e.next=3;break}return e.next=3,this.engine.onBeforeSave();case 3:return t=this.getContent({fullHTML:w.fullHTML}),n=t.content,r=t.html,a=t.thumbnail,o=this.getTitle(),i={id:this.doc.slug,slug:this.doc.slug,title:o},"Sheet"===this.doc.type||"Table"===this.doc.type?(i.thumbnail=a,i.lakesheet=n):(i.lake=n,i.html=r),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=o.apply(e,t);function i(e){m(a,n,r,i,c,"next",e)}function c(e){m(a,n,r,i,c,"throw",e)}i(void 0)}))},function(){return i.apply(this,arguments)})},{key:"publish",value:function(e){this._postContentMessage(f.MESSAGE_TYPES.PUBLISH_CALLBACK,e)}},{key:"save",value:function(e){this._postContentMessage(f.MESSAGE_TYPES.SAVE_CALLBACK,e)}},{key:"saveTitle",value:function(e){this._title=e,this._postContentMessage(f.MESSAGE_TYPES.SAVE_TITLE_CALLBACK,{data:{data:e},status:"success"})}},{key:"changeTitle",value:function(e,t){this._title=e,t&&this._postContentMessage(f.MESSAGE_TYPES.TITLE_CHANGE_CALLBACK,{data:{data:e},status:"success"})}},{key:"loadCallback",value:function(){Object(f.postMessage)(f.MESSAGE_TYPES.LOAD_CALLBACK)}},{key:"getValueCallback",value:function(){this._postContentMessage(f.MESSAGE_TYPES.GET_VALUE_CALLBACK)}},{key:"unlockCallback",value:function(){this._postContentMessage(f.MESSAGE_TYPES.UNLOCK_CALLBACK)}},{key:"resetCallback",value:function(){this._postContentMessage(f.MESSAGE_TYPES.RESET_CALLBACK)}},{key:"change",value:function(){this._postContentMessage(f.MESSAGE_TYPES.CHANGE_CALLBACK)}},{key:"fullScreen",value:function(e){Object(f.postMessage)(f.MESSAGE_TYPES.FULLSCREEN_CALLBACK,e)}},{key:"resize",value:function(e){Object(f.postMessage)(f.MESSAGE_TYPES.RESIZE_CALLBACK,e)}},{key:"onDocLoaded",value:function(e){Object(f.postMessage)(f.MESSAGE_TYPES.DOC_LOADED_CALLBACK,e)}},{key:"connect",value:function(e){var t=this;e.on(h.h.error,(function(e){t.onError(e)})),e.on(h.h.docStatusChange,(function(e){t.onDocStatusChanged(e)})),e.on(h.h.saveTitle,(function(e){t.saveTitle({data:e,state:"success",message:"ok"})})),e.on(h.h.change,(function(){w.onchange&&t.change()})),e.on(h.h.miniExpand,(function(e){t.fullScreen(e)}))}},{key:"onDocStatusChanged",value:function(e){e===h.a.saved?this.save({status:"success",message:"ok",data:{save_type:"user"}}):e===h.a.published?this.publish():e===h.a.loaded&&this.onDocLoaded()}},{key:"onError",value:function(e){e&&e.code===h.d.PUBLISH_FAILED&&this.publish({status:"error",message:e.message})}}],n&&k(t.prototype,n),a&&k(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e){var t=e.backgroundColor,n=e.autoHeight,r=e.bodyBackgroundColor,o=e.toolbarBackgroundColor;Object(a.useEffect)((function(){var e="";if(r&&(e+="\n        .lake-max-editor-wrapper-content .lake-max-editor-content {\n          background-color: ".concat(d()(r),";\n        }\n        .lake-max-editor-wrapper-content .lake-content-editor {\n          border: 0 none;\n          box-shadow: none;\n        }\n      ")),o&&(e+="\n        .lake-toolbar {\n          background-color: ".concat(d()(o),";\n        }\n      ")),t&&(e+="\n        #content,\n        .lake-content-editor,\n        .lake-title-editor .ant-input {\n          background-color: ".concat(d()(t),"\n        }\n      ")),n||(e+="\n        .lake-mini-editor .lake-content-editor-core {\n          height: calc(100vh - 40px);\n          min-height: calc(100vh - 40px);\n          overflow-y: auto;\n        }\n      "),e){var a=document.createElement("style");document.head.appendChild(a),a.type="text/css",a.appendChild(document.createTextNode(e))}}),[])}function E(e){var t=e.doc,n=e.publish,i=e.setContent,c=e.getContent,l=e.insertContent,s=e.getTitle,u=e.getContainer,d=e.autoHeight,h=(e.fullScreen,e.onLoad),m=e.workflow,g=e.engine,v=e.backgroundColor,y=e.bodyBackgroundColor,b=e.toolbarBackgroundColor,k=Object(a.useRef)(null),w=u(),E=Object(a.useRef)(null),C=Object(a.useMemo)((function(){return new x({doc:t,getContent:c,getTitle:s})}),[t,c,s]);return _({autoHeight:d,backgroundColor:v,bodyBackgroundColor:y,toolbarBackgroundColor:b}),Object(a.useEffect)((function(){Object(f.onMessage)((function(e){var t=e.type,a=e.message,o=e.options,c=void 0===o?{}:o;if(t===f.MESSAGE_TYPES.PUBLISH)n();else if(t===f.MESSAGE_TYPES.GET_VALUE)C.getValueCallback();else if(t===f.MESSAGE_TYPES.SET_VALUE)if("markdown"===c.format)try{p.a.convertMarkdownToLake(a).then((function(e){return i(e)}))}catch(e){r.a.error(__("初始化 Markdown 格式失败"))}else i(a);else if(t===f.MESSAGE_TYPES.SCROLL_TO){var s=document.querySelector(".lake-editor-scroll-container")||document.querySelector(".lake-content-editor-core");s?s.scrollTop=a:window.scrollTo(0,a)}else if(t===f.MESSAGE_TYPES.INSERT_VALUE)l(a);else if(t===f.MESSAGE_TYPES.UNLOCK)m&&m.exit({unlock:!0}).then((function(){C.unlockCallback()}));else if(t===f.MESSAGE_TYPES.RESET&&(g||m)){var u=(g||m).reset,d=function(e){u(e),C.resetCallback()};if("markdown"===c.format)try{p.a.convertMarkdownToLake(a).then((function(e){d(e)}))}catch(e){r.a.error(__("重置 Markdown 格式失败"))}else d(a)}})),C.loadCallback(),h(C),m&&C.connect(m)}),[]),Object(a.useEffect)((function(){if(w&&d){!function e(){k.current||(k.current=setTimeout((function(){k.current=null;var t=w.querySelector?w:w.current,n=t.querySelector(".lake-max-editor-content");if(n||(n=t.querySelector(".lake-content-editor")),n){var r=n.scrollHeight,a=document.querySelector(".lake-toolbar"),o=a?a.offsetHeight:0,i=document.querySelector(".lark-editor-header"),c=i?i.offsetHeight:0;E.current!==r&&(C.resize({height:o+c+r+60}),E.current=r)}e()}),300))}()}return function(){clearTimeout(k.current),k.current=null}}),[w,d]),o.a.createElement("span",null)}E.defaultProps={onLoad:function(){}},E.propTypes={doc:c.a.object,getContainer:c.a.func.isRequired,getContent:c.a.func.isRequired,getTitle:c.a.func,publish:c.a.func.isRequired,setContent:c.a.func.isRequired,autoHeight:c.a.bool,onLoad:c.a.func,insertContent:c.a.func.isRequired,engine:c.a.func.object},t.b=E},3135:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=c(a),i=c(n(1));function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.scrollListener=n.scrollListener.bind(n),n.eventListenerOptions=n.eventListenerOptions.bind(n),n.mousewheelListener=n.mousewheelListener.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){if(this.props.isReverse&&this.loadMore){var e=this.getParentElement(this.scrollComponent);e.scrollTop=e.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"isPassiveSupported",value:function(){var e=!1,t={get passive(){e=!0}};try{document.addEventListener("test",null,t),document.removeEventListener("test",null,t)}catch(e){}return e}},{key:"eventListenerOptions",value:function(){var e=this.props.useCapture;return this.isPassiveSupported()&&(e={useCapture:this.props.useCapture,passive:!0}),e}},{key:"setDefaultLoader",value:function(e){this.defaultLoader=e}},{key:"detachMousewheelListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}},{key:"detachScrollListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.getParentElement(this.scrollComponent)),e.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),e.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}},{key:"getParentElement",value:function(e){var t=this.props.getScrollParent&&this.props.getScrollParent();return null!=t?t:e&&e.parentNode}},{key:"filterProps",value:function(e){return e}},{key:"attachScrollListener",value:function(){var e=this.getParentElement(this.scrollComponent);if(this.props.hasMore&&e){var t=window;!1===this.props.useWindow&&(t=e),t.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),t.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),t.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"mousewheelListener",value:function(e){1!==e.deltaY||this.isPassiveSupported()||e.preventDefault()}},{key:"scrollListener",value:function(){var e=this.scrollComponent,t=window,n=this.getParentElement(e),r=void 0;if(this.props.useWindow){var a=document.documentElement||document.body.parentNode||document.body,o=void 0!==t.pageYOffset?t.pageYOffset:a.scrollTop;r=this.props.isReverse?o:this.calculateOffset(e,o)}else r=this.props.isReverse?n.scrollTop:e.scrollHeight-n.scrollTop-n.clientHeight;r<Number(this.props.threshold)&&e&&null!==e.offsetParent&&(this.detachScrollListener(),this.beforeScrollHeight=n.scrollHeight,this.beforeScrollTop=n.scrollTop,"function"==typeof this.props.loadMore&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}},{key:"calculateOffset",value:function(e,t){return e?this.calculateTopPosition(e)+(e.offsetHeight-t-window.innerHeight):0}},{key:"calculateTopPosition",value:function(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}},{key:"render",value:function(){var e=this,t=this.filterProps(this.props),n=t.children,r=t.element,a=t.hasMore,i=(t.initialLoad,t.isReverse),c=t.loader,l=(t.loadMore,t.pageStart,t.ref),s=(t.threshold,t.useCapture,t.useWindow,t.getScrollParent,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow","getScrollParent"]));s.ref=function(t){e.scrollComponent=t,l&&l(t)};var u=[n];return a&&(c?i?u.unshift(c):u.push(c):this.defaultLoader&&(i?u.unshift(this.defaultLoader):u.push(this.defaultLoader))),o.default.createElement(r,s,u)}}]),t}(a.Component);l.propTypes={children:i.default.node.isRequired,element:i.default.node,hasMore:i.default.bool,initialLoad:i.default.bool,isReverse:i.default.bool,loader:i.default.node,loadMore:i.default.func.isRequired,pageStart:i.default.number,ref:i.default.func,getScrollParent:i.default.func,threshold:i.default.number,useCapture:i.default.bool,useWindow:i.default.bool},l.defaultProps={element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null},t.default=l,e.exports=t.default},3146:function(e,t,n){"use strict";function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){return"DOC"===e.type}e.exports={getTempStoreDocs:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[],o=r(n);try{for(o.s();!(e=o.n()).done;){var i=e.value;"DOC"===i.type&&i.url&&a.push(i.url)}}catch(e){o.e(e)}finally{o.f()}return t.filter((function(e){return!a.includes(e.slug)}))},isDocInTempStore:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=r(n);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(o(i)&&(e.id===i.doc_id||e.slug===i.url))return!1}}catch(e){a.e(e)}finally{a.f()}return!0},isDocInToc:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=r(n);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(o(i)&&e.slug===i.url)return!0}}catch(e){a.e(e)}finally{a.f()}return!1},tempStoreDocsOrderByDefault:function(e){return e.sort((function(e,t){return new Date(t.content_updated_at)-new Date(e.content_updated_at)}))}}},3178:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="SyncOutlined";t.a=a.forwardRef(c)},3206:function(e,t,n){"use strict";var r=n(11),a=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832.6 191.4c-84.6-84.6-221.5-84.6-306 0l-96.9 96.9 51 51 96.9-96.9c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204l-96.9 96.9 51.1 51.1 96.9-96.9c84.4-84.6 84.4-221.5-.1-306.1zM446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l96.9-96.9-51.1-51.1-96.9 96.9c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l96.9-96.9-51-51-96.8 97zM260.3 209.4a8.03 8.03 0 00-11.3 0L209.4 249a8.03 8.03 0 000 11.3l554.4 554.4c3.1 3.1 8.2 3.1 11.3 0l39.6-39.6c3.1-3.1 3.1-8.2 0-11.3L260.3 209.4z"}}]},name:"disconnect",theme:"outlined"},i=n(22),c=function(e,t){return a.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};c.displayName="DisconnectOutlined";t.a=a.forwardRef(c)},3207:function(e,t,n){"use strict";n(73);var r=n(38),a=(n(57),n(23)),o=n(0),i=n.n(o),c=n(1),l=n.n(c),s=n(89),u=n(31),d=n(1974),f="TransferDoc-module_wrapper_+Jtte",p="TransferDoc-module_tip_lNpqo";function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){v(o,r,a,i,c,"next",e)}function c(e){v(o,r,a,i,c,"throw",e)}i(void 0)}))}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=window.appData.isDesktopApp,x=function(e){var t,n=e.docIds,c=e.book,l=e.submitType,h=e.container,g=e.silentOperation,v=b(Object(o.useState)(!0),2),k=v[0],x=v[1],_=function(){x(!1),e.hide()},E=function(e){var t="highlightBookImport_".concat(e.slug,"_").concat(e.id);s.default.set(t,e.last_toc?e.last_toc.uuid:"_")},C=function(){var t=y(regeneratorRuntime.mark((function t(r){var o,l,s,d,f,p,h,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.targetGroup,l=r.targetBook,s=r.target_uuid,d=r.action,f=r.insert_to_catalog,t.next=3,u.a.docs.copy({ids:n,book_id:c.id,target_book_id:l.id,target_node_uuid:s,action:d,insert_to_catalog:f});case 3:p=t.sent,h=p.docs,v=p.toc,e.onSubmit({targetBook:m(m({},l),{},{toc:v}),docs:h}),g||a.a.success(i.a.createElement("span",null,w?__("已复制"):i.a.createElement(i.a.Fragment,null,__("已复制到："),i.a.createElement("a",{href:"/".concat(o.login,"/").concat(l.slug,"/toc?tempStore=1"),target:"_blank"},l.name))),3),_();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var t=y(regeneratorRuntime.mark((function t(r){var o,l,s,d,f,p,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.targetGroup,l=void 0===o?{}:o,s=r.targetBook,d=void 0===s?{}:s,f=r.target_uuid,p=r.action,t.next=3,u.a.docs.addToCatalog({ids:n,book_id:c.id,target_node_uuid:f,action:p});case 3:return h=t.sent,t.next=6,e.onSubmit({targetBook:m(m({},d),{},{toc:h})});case 6:g||a.a.success(i.a.createElement(i.a.Fragment,null,__("已成功添加到目录")," ",!w&&i.a.createElement("a",{href:"/".concat(l.login,"/").concat(d.slug),target:"_blank"},__("查看"))),3),_();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=function(){var t=y(regeneratorRuntime.mark((function t(r){var o,l,s,d,f,p,h,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r.targetGroup,l=void 0===o?{}:o,s=r.targetBook,d=void 0===s?{}:s,f=r.target_uuid,p=r.action,h=r.insert_to_catalog,d.id!==c.id){t.next=3;break}return t.abrupt("return",O(r));case 3:return t.next=5,u.a.docs.move({ids:n,book_id:c.id,target_book_id:d.id,target_node_uuid:f,action:p,insert_to_catalog:h});case 5:(m=t.sent).targetBook&&E(m.targetBook),e.onSubmit({docIds:n,targetBook:d}),g||(a.a.success(i.a.createElement("span",null,__("已移动到："),i.a.createElement("a",{href:"/".concat(l.login,"/").concat(d.slug),target:"_blank"},d.name)),3),_());case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),R="move"===l,j="add"===l;return t=j?__("添加到目录"):__("{submitType}到...",{submitType:R?__("移动"):__("复制")}),i.a.createElement(r.a,{className:f,title:t,visible:k,width:"600px",footer:null,onCancel:_,getContainer:h},j?null:i.a.createElement("div",{className:p},__("可{submitType}到有创建权限的知识库：",{submitType:R?__("移动"):__("复制")})),i.a.createElement(d.a,{items:n.map((function(e){return{doc_id:e.id}})),currentGroup:e.group,currentBook:e.book,disableSelectorBooks:R?[e.book]:[],submitType:l,mode:"doc",onSubmit:function(e){return j?O(e):R?S(e):C(e)},onCancel:_,showRepoSelector:!j}))};x.defaultProps={onSubmit:function(){},silentOperation:!1},x.propTypes={docIds:l.a.array.isRequired,group:l.a.object.isRequired,book:l.a.object.isRequired,hide:l.a.func.isRequired,onSubmit:l.a.func,submitType:l.a.oneOf(["move","copy","add"]).isRequired,silentOperation:l.a.bool},x.displayName="TransferDoc";t.a=x},321:function(e,t,n){},3211:function(e,t,n){var r;(function(){"use strict";function n(e){return">"===e}function a(e){return"<"===e}function o(e){return/^\s+$/.test(e)}function i(e){var t=e.match(/^\s*<([^!>][^>]*)>\s*$/);return!!t&&t[1].trim().split(" ")[0]}function c(e){return/--\>$/.test(e)}var l,s=new RegExp("^<(iframe|object|math|svg|script|video|head|style)");function u(e){var t=l.exec(e);return t&&t[1]}function d(e,t){return e.substring(e.length-t.length-2)==="</"+t}function f(e){return/^\s*<[^>]+\/>\s*$/.test(e)}function p(e){return/^<img[\s>]/.test(e)||function(e){return!i(e)}(e)||u(e)||f(e)}function h(e){return{string:e,key:v(e)}}function m(e,t,n,r){this.segment=r,this.length=n,this.startInBefore=e+r.beforeIndex,this.startInAfter=t+r.afterIndex,this.endInBefore=this.startInBefore+this.length-1,this.endInAfter=this.startInAfter+this.length-1,this.segmentStartInBefore=e,this.segmentStartInAfter=t,this.segmentEndInBefore=this.segmentStartInBefore+this.length-1,this.segmentEndInAfter=this.segmentStartInAfter+this.length-1}function g(e){for(var t="char",r="",i="",l=[],s=0;s<e.length;s++){var f=e[s];switch(t){case"tag":var p=u(r);p?(t="atomic_tag",i=p,r+=f):/^<!--/.test(r)?(t="html_comment",r+=f):n(f)?(r+=">",l.push(h(r)),r="",t=o(f)?"whitespace":"char"):r+=f;break;case"atomic_tag":n(f)&&d(r,i)?(r+=">",l.push(h(r)),r="",i="",t="char"):r+=f;break;case"html_comment":c(r+=f)&&(r="",t="char");break;case"char":a(f)?(r&&l.push(h(r)),r="<",t="tag"):/\s/.test(f)?(r&&l.push(h(r)),r=f,t="whitespace"):/[\w\d\#@]/.test(f)?r+=f:/&/.test(f)?(r&&l.push(h(r)),r=f):(r+=f,l.push(h(r)),r="");break;case"whitespace":a(f)?(r&&l.push(h(r)),r="<",t="tag"):o(f)?r+=f:(r&&l.push(h(r)),r=f,t="char");break;default:throw new Error("Unknown mode "+t)}}return r&&l.push(h(r)),l}function v(e){var t=/^<img.*src=['"]([^"']*)['"].*>$/.exec(e);if(t)return'<img src="'+t[1]+'">';var n=/^<object.*data=['"]([^"']*)['"]/.exec(e);if(n)return'<object src="'+n[1]+'"></object>';if(/^<(svg|math|video)[\s>]/.test(e)){var r=e.indexOf('data-uuid="');return-1!==r?e.slice(0,r)+e.slice(r+44):e}var a=/^<iframe.*src=['"]([^"']*)['"].*>/.exec(e);if(a)return'<iframe src="'+a[1]+'"></iframe>';var o=/<([^\s>]+)[\s>]/.exec(e);return o?"<"+o[1].toLowerCase()+">":e?e.replace(/(\s+|&nbsp;|&#160;)/g," "):e}function y(e){return e.reduce((function(e,t,n){return e[t.key]?e[t.key].push(n):e[t.key]=[n],e}),Object.create(null))}function b(){this._root=null}function k(e){for(var t=e.beforeTokens,n=e.afterMap,r=null,a=null,o=0;o<t.length;o++){var i=!1,c=t.length-o;if(a&&c<a.length)break;var l=t[o];if(" "!==l.key){r===o-1&&(i=!0);var s=n[l.key];s&&s.forEach((function(t){var n=a?a.length:0,r=w(e,o,t,n,i);r&&r.length>n&&(a=r)}))}else r=o}return a}function w(e,t,n,r,a){var o=e.beforeTokens,i=e.afterTokens,c=t+r,l=n+r;if(!(c>=o.length||l>=i.length)){if(r)if(o[c].key!==i[l].key)return;for(var s=!0,u=1,d=t+u,f=n+u;s&&d<o.length&&f<i.length;){o[d].key===i[f].key?(d=t+ ++u,f=n+u):s=!1}if(a&&t>0&&n>0){var p=o[t-1].key,h=i[n-1].key;" "===p&&" "===h&&(t--,n--,u++)}return new m(t,n,u,e)}}function x(e,t,n,r){return{beforeTokens:e,afterTokens:t,beforeMap:y(e),afterMap:y(t),beforeIndex:n,afterIndex:r}}function _(e){for(var t,n=new b,r=[e];r.length;)if((t=k(e=r.pop()))&&t.length){if(t.segmentStartInBefore>0&&t.segmentStartInAfter>0){var a=e.beforeTokens.slice(0,t.segmentStartInBefore),o=e.afterTokens.slice(0,t.segmentStartInAfter);r.push(x(a,o,e.beforeIndex,e.afterIndex))}var i=e.beforeTokens.slice(t.segmentEndInBefore+1),c=e.afterTokens.slice(t.segmentEndInAfter+1),l=e.beforeIndex+t.segmentEndInBefore+1,s=e.afterIndex+t.segmentEndInAfter+1;i.length&&c.length&&r.push(x(i,c,l,s)),n.add(t)}return n.toArray()}function E(e,t){if(!e)throw new Error("Missing beforeTokens");if(!t)throw new Error("Missing afterTokens");var n=0,r=0,a=[],o=x(e,t,0,0),i=_(o);i.push(new m(e.length,t.length,0,o));for(var c=0;c<i.length;c++){var l=i[c],s="none";n===l.startInBefore?r!==l.startInAfter&&(s="insert"):(s="delete",r!==l.startInAfter&&(s="replace")),"none"!==s&&a.push({action:s,startInBefore:n,endInBefore:"insert"!==s?l.startInBefore-1:null,startInAfter:r,endInAfter:"delete"!==s?l.startInAfter-1:null}),0!==l.length&&a.push({action:"equal",startInBefore:l.startInBefore,endInBefore:l.endInBefore,startInAfter:l.startInAfter,endInAfter:l.endInAfter}),n=l.endInBefore+1,r=l.endInAfter+1}var u=[],d={action:"none"};function f(t){return"equal"===t.action&&(t.endInBefore-t.startInBefore==0&&/^\s$/.test(e.slice(t.startInBefore,t.endInBefore+1)))}for(var p=0;p<a.length;p++){var h=a[p];f(h)&&"replace"===d.action||"replace"===h.action&&"replace"===d.action?(d.endInBefore=h.endInBefore,d.endInAfter=h.endInAfter):(u.push(h),d=h)}return u}function C(e){this.tokens=e,this.notes=e.reduce((function(e,t,n){e.notes.push({isWrappable:p(t),insertedTag:!1});var r=!f(t)&&i(t),a=e.tagStack[e.tagStack.length-1];return r&&(a&&"/"+a.tag===r?(e.notes[a.position].insertedTag=!0,e.tagStack.pop()):e.tagStack.push({tag:r,position:n})),e}),{notes:[],tagStack:[]}).notes}function O(e,t,n,r,a){var o=new C(t),i=" data-"+(r=r?r+"-":"")+'operation-index="'+n+'"';return a&&(i+=' class="'+a+'"'),o.combine((function(t){if(!t.isWrappable)return t.tokens.join("");var n=t.tokens.join("");return n.trim()?"<"+e+i+">"+n+"</"+e+">":""}),(function(t){var a=' data-diff-node="'+e+'"';return a+=" data-"+r+'operation-index="'+n+'"',t.replace(/>\s*$/,a+"$&")}))}b.prototype={add:function(e){var t,n,r={value:e,left:null,right:null},a=this._root;if(a)for(;;){var o=(t=a.value,(n=e).endInBefore<t.startInBefore&&n.endInAfter<t.startInAfter?-1:n.startInBefore>t.endInBefore&&n.startInAfter>t.endInAfter?1:0);if(-1===o){if(!a.left){a.left=r;break}a=a.left}else{if(1!==o)break;if(!a.right){a.right=r;break}a=a.right}}else this._root=r},toArray:function(){return function e(t,n){return t&&(e(t.left,n),n.push(t.value),e(t.right,n)),n}(this._root,[])}},C.prototype.combine=function(e,t){var n=this.notes,r=this.tokens.slice();return r.reduce((function(e,a,o){n[o].insertedTag&&(r[o]=t(r[o])),null===e.status&&(e.status=n[o].isWrappable);var i=n[o].isWrappable;return i!==e.status&&(e.list.push({isWrappable:e.status,tokens:r.slice(e.lastIndex,o)}),e.lastIndex=o,e.status=i),o===r.length-1&&e.list.push({isWrappable:e.status,tokens:r.slice(e.lastIndex,o+1)}),e}),{list:[],status:null,lastIndex:0}).list.map(e).join("")};var S={equal:function(e,t,n,r,a,o){return n.slice(e.startInAfter,e.endInAfter+1).reduce((function(e,t){return e+t.string}),"")},insert:function(e,t,n,r,a,o){return O("ins",n.slice(e.startInAfter,e.endInAfter+1).map((function(e){return e.string})),r,a,o)},delete:function(e,t,n,r,a,o){return O("del",t.slice(e.startInBefore,e.endInBefore+1).map((function(e){return e.string})),r,a,o)},replace:function(){return S.delete.apply(null,arguments)+S.insert.apply(null,arguments)}};function R(e,t,n,r,a){return n.reduce((function(n,o,i){return n+S[o.action](o,e,t,i,r,a)}),"")}function j(e,t,n,r,a){return e===t?e:(l=a?new RegExp("^<("+a.replace(/\s*/g,"").replace(/,/g,"|")+")"):s,R(e=g(e),t=g(t),E(e,t),r,n))}j.htmlToTokens=g,j.findMatchingBlocks=_,_.findBestMatch=k,_.createMap=y,_.createToken=h,_.createSegment=x,_.getKeyForToken=v,j.calculateOperations=E,j.renderOperations=R,void 0===(r=function(){return j}.apply(t,[]))||(e.exports=r)}).call(this)},339:function(e,t,n){"use strict";n(1960);var r=n(482),a=n(0),o=n.n(a),i=n(1),c=n.n(i),l=n(8),s=n.n(l),u=n(63),d=n.n(u),f=(n(619),["className"]);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}function v(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var y=o.a.forwardRef((function(e,t){var n=e.className,a=v(e,f);return o.a.createElement(r.a,g({className:s()("larkui-breadcrumb",n),ref:t},a))}));y.propTypes=h(h({},r.a.BreadcrumbProps),{},{className:c.a.string}),d()(y,r.a),t.a=y},340:function(e,t,n){e.exports={type:n(1565)}},341:function(e,t){var n=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},r=-1;n.Diff=function(e,t){return[e,t]},n.prototype.diff_main=function(e,t,r,a){void 0===a&&(a=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=a;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[new n.Diff(0,e)]:[];void 0===r&&(r=!0);var i=r,c=this.diff_commonPrefix(e,t),l=e.substring(0,c);e=e.substring(c),t=t.substring(c),c=this.diff_commonSuffix(e,t);var s=e.substring(e.length-c);e=e.substring(0,e.length-c),t=t.substring(0,t.length-c);var u=this.diff_compute_(e,t,i,o);return l&&u.unshift(new n.Diff(0,l)),s&&u.push(new n.Diff(0,s)),this.diff_cleanupMerge(u),u},n.prototype.diff_compute_=function(e,t,a,o){var i;if(!e)return[new n.Diff(1,t)];if(!t)return[new n.Diff(r,e)];var c=e.length>t.length?e:t,l=e.length>t.length?t:e,s=c.indexOf(l);if(-1!=s)return i=[new n.Diff(1,c.substring(0,s)),new n.Diff(0,l),new n.Diff(1,c.substring(s+l.length))],e.length>t.length&&(i[0][0]=i[2][0]=r),i;if(1==l.length)return[new n.Diff(r,e),new n.Diff(1,t)];var u=this.diff_halfMatch_(e,t);if(u){var d=u[0],f=u[1],p=u[2],h=u[3],m=u[4],g=this.diff_main(d,p,a,o),v=this.diff_main(f,h,a,o);return g.concat([new n.Diff(0,m)],v)}return a&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,o):this.diff_bisect_(e,t,o)},n.prototype.diff_lineMode_=function(e,t,a){var o=this.diff_linesToChars_(e,t);e=o.chars1,t=o.chars2;var i=o.lineArray,c=this.diff_main(e,t,!1,a);this.diff_charsToLines_(c,i),this.diff_cleanupSemantic(c),c.push(new n.Diff(0,""));for(var l=0,s=0,u=0,d="",f="";l<c.length;){switch(c[l][0]){case 1:u++,f+=c[l][1];break;case r:s++,d+=c[l][1];break;case 0:if(s>=1&&u>=1){c.splice(l-s-u,s+u),l=l-s-u;for(var p=this.diff_main(d,f,!1,a),h=p.length-1;h>=0;h--)c.splice(l,0,p[h]);l+=p.length}u=0,s=0,d="",f=""}l++}return c.pop(),c},n.prototype.diff_bisect_=function(e,t,a){for(var o=e.length,i=t.length,c=Math.ceil((o+i)/2),l=c,s=2*c,u=new Array(s),d=new Array(s),f=0;f<s;f++)u[f]=-1,d[f]=-1;u[l+1]=0,d[l+1]=0;for(var p=o-i,h=p%2!=0,m=0,g=0,v=0,y=0,b=0;b<c&&!((new Date).getTime()>a);b++){for(var k=-b+m;k<=b-g;k+=2){for(var w=l+k,x=(S=k==-b||k!=b&&u[w-1]<u[w+1]?u[w+1]:u[w-1]+1)-k;S<o&&x<i&&e.charAt(S)==t.charAt(x);)S++,x++;if(u[w]=S,S>o)g+=2;else if(x>i)m+=2;else if(h){if((C=l+p-k)>=0&&C<s&&-1!=d[C])if(S>=(E=o-d[C]))return this.diff_bisectSplit_(e,t,S,x,a)}}for(var _=-b+v;_<=b-y;_+=2){for(var E,C=l+_,O=(E=_==-b||_!=b&&d[C-1]<d[C+1]?d[C+1]:d[C-1]+1)-_;E<o&&O<i&&e.charAt(o-E-1)==t.charAt(i-O-1);)E++,O++;if(d[C]=E,E>o)y+=2;else if(O>i)v+=2;else if(!h){if((w=l+p-_)>=0&&w<s&&-1!=u[w]){var S;x=l+(S=u[w])-w;if(S>=(E=o-E))return this.diff_bisectSplit_(e,t,S,x,a)}}}}return[new n.Diff(r,e),new n.Diff(1,t)]},n.prototype.diff_bisectSplit_=function(e,t,n,r,a){var o=e.substring(0,n),i=t.substring(0,r),c=e.substring(n),l=t.substring(r),s=this.diff_main(o,i,!1,a),u=this.diff_main(c,l,!1,a);return s.concat(u)},n.prototype.diff_linesToChars_=function(e,t){var n=[],r={};function a(e){for(var t="",a=0,i=-1,c=n.length;i<e.length-1;){-1==(i=e.indexOf("\n",a))&&(i=e.length-1);var l=e.substring(a,i+1);(r.hasOwnProperty?r.hasOwnProperty(l):void 0!==r[l])?t+=String.fromCharCode(r[l]):(c==o&&(l=e.substring(a),i=e.length),t+=String.fromCharCode(c),r[l]=c,n[c++]=l),a=i+1}return t}n[0]="";var o=4e4,i=a(e);return o=65535,{chars1:i,chars2:a(t),lineArray:n}},n.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var r=e[n][1],a=[],o=0;o<r.length;o++)a[o]=t[r.charCodeAt(o)];e[n][1]=a.join("")}},n.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),a=r,o=0;n<a;)e.substring(o,a)==t.substring(o,a)?o=n=a:r=a,a=Math.floor((r-n)/2+n);return a},n.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),a=r,o=0;n<a;)e.substring(e.length-a,e.length-o)==t.substring(t.length-a,t.length-o)?o=n=a:r=a,a=Math.floor((r-n)/2+n);return a},n.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(0==n||0==r)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));var a=Math.min(n,r);if(e==t)return a;for(var o=0,i=1;;){var c=e.substring(a-i),l=t.indexOf(c);if(-1==l)return o;i+=l,0!=l&&e.substring(a-i)!=t.substring(0,i)||(o=i,i++)}},n.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||2*r.length<n.length)return null;var a=this;function o(e,t,n){for(var r,o,i,c,l=e.substring(n,n+Math.floor(e.length/4)),s=-1,u="";-1!=(s=t.indexOf(l,s+1));){var d=a.diff_commonPrefix(e.substring(n),t.substring(s)),f=a.diff_commonSuffix(e.substring(0,n),t.substring(0,s));u.length<f+d&&(u=t.substring(s-f,s)+t.substring(s,s+d),r=e.substring(0,n-f),o=e.substring(n+d),i=t.substring(0,s-f),c=t.substring(s+d))}return 2*u.length>=e.length?[r,o,i,c,u]:null}var i,c,l,s,u,d=o(n,r,Math.ceil(n.length/4)),f=o(n,r,Math.ceil(n.length/2));return d||f?(i=f?d&&d[4].length>f[4].length?d:f:d,e.length>t.length?(c=i[0],l=i[1],s=i[2],u=i[3]):(s=i[0],u=i[1],c=i[2],l=i[3]),[c,l,s,u,i[4]]):null},n.prototype.diff_cleanupSemantic=function(e){for(var t=!1,a=[],o=0,i=null,c=0,l=0,s=0,u=0,d=0;c<e.length;)0==e[c][0]?(a[o++]=c,l=u,s=d,u=0,d=0,i=e[c][1]):(1==e[c][0]?u+=e[c][1].length:d+=e[c][1].length,i&&i.length<=Math.max(l,s)&&i.length<=Math.max(u,d)&&(e.splice(a[o-1],0,new n.Diff(r,i)),e[a[o-1]+1][0]=1,o--,c=--o>0?a[o-1]:-1,l=0,s=0,u=0,d=0,i=null,t=!0)),c++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),c=1;c<e.length;){if(e[c-1][0]==r&&1==e[c][0]){var f=e[c-1][1],p=e[c][1],h=this.diff_commonOverlap_(f,p),m=this.diff_commonOverlap_(p,f);h>=m?(h>=f.length/2||h>=p.length/2)&&(e.splice(c,0,new n.Diff(0,p.substring(0,h))),e[c-1][1]=f.substring(0,f.length-h),e[c+1][1]=p.substring(h),c++):(m>=f.length/2||m>=p.length/2)&&(e.splice(c,0,new n.Diff(0,f.substring(0,m))),e[c-1][0]=1,e[c-1][1]=p.substring(0,p.length-m),e[c+1][0]=r,e[c+1][1]=f.substring(m),c++),c++}c++}},n.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var r=e.charAt(e.length-1),a=t.charAt(0),o=r.match(n.nonAlphaNumericRegex_),i=a.match(n.nonAlphaNumericRegex_),c=o&&r.match(n.whitespaceRegex_),l=i&&a.match(n.whitespaceRegex_),s=c&&r.match(n.linebreakRegex_),u=l&&a.match(n.linebreakRegex_),d=s&&e.match(n.blanklineEndRegex_),f=u&&t.match(n.blanklineStartRegex_);return d||f?5:s||u?4:o&&!c&&l?3:c||l?2:o||i?1:0}for(var r=1;r<e.length-1;){if(0==e[r-1][0]&&0==e[r+1][0]){var a=e[r-1][1],o=e[r][1],i=e[r+1][1],c=this.diff_commonSuffix(a,o);if(c){var l=o.substring(o.length-c);a=a.substring(0,a.length-c),o=l+o.substring(0,o.length-c),i=l+i}for(var s=a,u=o,d=i,f=t(a,o)+t(o,i);o.charAt(0)===i.charAt(0);){a+=o.charAt(0),o=o.substring(1)+i.charAt(0),i=i.substring(1);var p=t(a,o)+t(o,i);p>=f&&(f=p,s=a,u=o,d=i)}e[r-1][1]!=s&&(s?e[r-1][1]=s:(e.splice(r-1,1),r--),e[r][1]=u,d?e[r+1][1]=d:(e.splice(r+1,1),r--))}r++}},n.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,n.whitespaceRegex_=/\s/,n.linebreakRegex_=/[\r\n]/,n.blanklineEndRegex_=/\n\r?\n$/,n.blanklineStartRegex_=/^\r?\n\r?\n/,n.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,a=[],o=0,i=null,c=0,l=!1,s=!1,u=!1,d=!1;c<e.length;)0==e[c][0]?(e[c][1].length<this.Diff_EditCost&&(u||d)?(a[o++]=c,l=u,s=d,i=e[c][1]):(o=0,i=null),u=d=!1):(e[c][0]==r?d=!0:u=!0,i&&(l&&s&&u&&d||i.length<this.Diff_EditCost/2&&l+s+u+d==3)&&(e.splice(a[o-1],0,new n.Diff(r,i)),e[a[o-1]+1][0]=1,o--,i=null,l&&s?(u=d=!0,o=0):(c=--o>0?a[o-1]:-1,u=d=!1),t=!0)),c++;t&&this.diff_cleanupMerge(e)},n.prototype.diff_cleanupMerge=function(e){e.push(new n.Diff(0,""));for(var t,a=0,o=0,i=0,c="",l="";a<e.length;)switch(e[a][0]){case 1:i++,l+=e[a][1],a++;break;case r:o++,c+=e[a][1],a++;break;case 0:o+i>1?(0!==o&&0!==i&&(0!==(t=this.diff_commonPrefix(l,c))&&(a-o-i>0&&0==e[a-o-i-1][0]?e[a-o-i-1][1]+=l.substring(0,t):(e.splice(0,0,new n.Diff(0,l.substring(0,t))),a++),l=l.substring(t),c=c.substring(t)),0!==(t=this.diff_commonSuffix(l,c))&&(e[a][1]=l.substring(l.length-t)+e[a][1],l=l.substring(0,l.length-t),c=c.substring(0,c.length-t))),a-=o+i,e.splice(a,o+i),c.length&&(e.splice(a,0,new n.Diff(r,c)),a++),l.length&&(e.splice(a,0,new n.Diff(1,l)),a++),a++):0!==a&&0==e[a-1][0]?(e[a-1][1]+=e[a][1],e.splice(a,1)):a++,i=0,o=0,c="",l=""}""===e[e.length-1][1]&&e.pop();var s=!1;for(a=1;a<e.length-1;)0==e[a-1][0]&&0==e[a+1][0]&&(e[a][1].substring(e[a][1].length-e[a-1][1].length)==e[a-1][1]?(e[a][1]=e[a-1][1]+e[a][1].substring(0,e[a][1].length-e[a-1][1].length),e[a+1][1]=e[a-1][1]+e[a+1][1],e.splice(a-1,1),s=!0):e[a][1].substring(0,e[a+1][1].length)==e[a+1][1]&&(e[a-1][1]+=e[a+1][1],e[a][1]=e[a][1].substring(e[a+1][1].length)+e[a+1][1],e.splice(a+1,1),s=!0)),a++;s&&this.diff_cleanupMerge(e)},n.prototype.diff_xIndex=function(e,t){var n,a=0,o=0,i=0,c=0;for(n=0;n<e.length&&(1!==e[n][0]&&(a+=e[n][1].length),e[n][0]!==r&&(o+=e[n][1].length),!(a>t));n++)i=a,c=o;return e.length!=n&&e[n][0]===r?c:c+(t-i)},n.prototype.diff_prettyHtml=function(e){for(var t=[],n=/&/g,a=/</g,o=/>/g,i=/\n/g,c=0;c<e.length;c++){var l=e[c][0],s=e[c][1].replace(n,"&amp;").replace(a,"&lt;").replace(o,"&gt;").replace(i,"&para;<br>");switch(l){case 1:t[c]='<ins style="background:#e6ffe6;">'+s+"</ins>";break;case r:t[c]='<del style="background:#ffe6e6;">'+s+"</del>";break;case 0:t[c]="<span>"+s+"</span>"}}return t.join("")},n.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},n.prototype.diff_text2=function(e){for(var t=[],n=0;n<e.length;n++)e[n][0]!==r&&(t[n]=e[n][1]);return t.join("")},n.prototype.diff_levenshtein=function(e){for(var t=0,n=0,a=0,o=0;o<e.length;o++){var i=e[o][0],c=e[o][1];switch(i){case 1:n+=c.length;break;case r:a+=c.length;break;case 0:t+=Math.max(n,a),n=0,a=0}}return t+=Math.max(n,a)},n.prototype.diff_toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case 1:t[n]="+"+encodeURI(e[n][1]);break;case r:t[n]="-"+e[n][1].length;break;case 0:t[n]="="+e[n][1].length}return t.join("\t").replace(/%20/g," ")},n.prototype.diff_fromDelta=function(e,t){for(var a=[],o=0,i=0,c=t.split(/\t/g),l=0;l<c.length;l++){var s=c[l].substring(1);switch(c[l].charAt(0)){case"+":try{a[o++]=new n.Diff(1,decodeURI(s))}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+s)}break;case"-":case"=":var u=parseInt(s,10);if(isNaN(u)||u<0)throw new Error("Invalid number in diff_fromDelta: "+s);var d=e.substring(i,i+=u);"="==c[l].charAt(0)?a[o++]=new n.Diff(0,d):a[o++]=new n.Diff(r,d);break;default:if(c[l])throw new Error("Invalid diff operation in diff_fromDelta: "+c[l])}}if(i!=e.length)throw new Error("Delta length ("+i+") does not equal source text length ("+e.length+").");return a},n.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},n.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(t),a=this;function o(e,r){var o=e/t.length,i=Math.abs(n-r);return a.Match_Distance?o+i/a.Match_Distance:i?1:o}var i=this.Match_Threshold,c=e.indexOf(t,n);-1!=c&&(i=Math.min(o(0,c),i),-1!=(c=e.lastIndexOf(t,n+t.length))&&(i=Math.min(o(0,c),i)));var l,s,u=1<<t.length-1;c=-1;for(var d,f=t.length+e.length,p=0;p<t.length;p++){for(l=0,s=f;l<s;)o(p,n+s)<=i?l=s:f=s,s=Math.floor((f-l)/2+l);f=s;var h=Math.max(1,n-s+1),m=Math.min(n+s,e.length)+t.length,g=Array(m+2);g[m+1]=(1<<p)-1;for(var v=m;v>=h;v--){var y=r[e.charAt(v-1)];if(g[v]=0===p?(g[v+1]<<1|1)&y:(g[v+1]<<1|1)&y|(d[v+1]|d[v])<<1|1|d[v+1],g[v]&u){var b=o(p,v-1);if(b<=i){if(i=b,!((c=v-1)>n))break;h=Math.max(1,2*n-c)}}}if(o(p+1,n)>i)break;d=g}return c},n.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},n.prototype.patch_addContext_=function(e,t){if(0!=t.length){if(null===e.start2)throw Error("patch not initialized");for(var r=t.substring(e.start2,e.start2+e.length1),a=0;t.indexOf(r)!=t.lastIndexOf(r)&&r.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)a+=this.Patch_Margin,r=t.substring(e.start2-a,e.start2+e.length1+a);a+=this.Patch_Margin;var o=t.substring(e.start2-a,e.start2);o&&e.diffs.unshift(new n.Diff(0,o));var i=t.substring(e.start2+e.length1,e.start2+e.length1+a);i&&e.diffs.push(new n.Diff(0,i)),e.start1-=o.length,e.start2-=o.length,e.length1+=o.length+i.length,e.length2+=o.length+i.length}},n.prototype.patch_make=function(e,t,a){var o,i;if("string"==typeof e&&"string"==typeof t&&void 0===a)o=e,(i=this.diff_main(o,t,!0)).length>2&&(this.diff_cleanupSemantic(i),this.diff_cleanupEfficiency(i));else if(e&&"object"==typeof e&&void 0===t&&void 0===a)i=e,o=this.diff_text1(i);else if("string"==typeof e&&t&&"object"==typeof t&&void 0===a)o=e,i=t;else{if("string"!=typeof e||"string"!=typeof t||!a||"object"!=typeof a)throw new Error("Unknown call format to patch_make.");o=e,i=a}if(0===i.length)return[];for(var c=[],l=new n.patch_obj,s=0,u=0,d=0,f=o,p=o,h=0;h<i.length;h++){var m=i[h][0],g=i[h][1];switch(s||0===m||(l.start1=u,l.start2=d),m){case 1:l.diffs[s++]=i[h],l.length2+=g.length,p=p.substring(0,d)+g+p.substring(d);break;case r:l.length1+=g.length,l.diffs[s++]=i[h],p=p.substring(0,d)+p.substring(d+g.length);break;case 0:g.length<=2*this.Patch_Margin&&s&&i.length!=h+1?(l.diffs[s++]=i[h],l.length1+=g.length,l.length2+=g.length):g.length>=2*this.Patch_Margin&&s&&(this.patch_addContext_(l,f),c.push(l),l=new n.patch_obj,s=0,f=p,u=d)}1!==m&&(u+=g.length),m!==r&&(d+=g.length)}return s&&(this.patch_addContext_(l,f),c.push(l)),c},n.prototype.patch_deepCopy=function(e){for(var t=[],r=0;r<e.length;r++){var a=e[r],o=new n.patch_obj;o.diffs=[];for(var i=0;i<a.diffs.length;i++)o.diffs[i]=new n.Diff(a.diffs[i][0],a.diffs[i][1]);o.start1=a.start1,o.start2=a.start2,o.length1=a.length1,o.length2=a.length2,t[r]=o}return t},n.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);for(var a=0,o=[],i=0;i<e.length;i++){var c,l,s=e[i].start2+a,u=this.diff_text1(e[i].diffs),d=-1;if(u.length>this.Match_MaxBits?-1!=(c=this.match_main(t,u.substring(0,this.Match_MaxBits),s))&&(-1==(d=this.match_main(t,u.substring(u.length-this.Match_MaxBits),s+u.length-this.Match_MaxBits))||c>=d)&&(c=-1):c=this.match_main(t,u,s),-1==c)o[i]=!1,a-=e[i].length2-e[i].length1;else if(o[i]=!0,a=c-s,u==(l=-1==d?t.substring(c,c+u.length):t.substring(c,d+this.Match_MaxBits)))t=t.substring(0,c)+this.diff_text2(e[i].diffs)+t.substring(c+u.length);else{var f=this.diff_main(u,l,!1);if(u.length>this.Match_MaxBits&&this.diff_levenshtein(f)/u.length>this.Patch_DeleteThreshold)o[i]=!1;else{this.diff_cleanupSemanticLossless(f);for(var p,h=0,m=0;m<e[i].diffs.length;m++){var g=e[i].diffs[m];0!==g[0]&&(p=this.diff_xIndex(f,h)),1===g[0]?t=t.substring(0,c+p)+g[1]+t.substring(c+p):g[0]===r&&(t=t.substring(0,c+p)+t.substring(c+this.diff_xIndex(f,h+g[1].length))),g[0]!==r&&(h+=g[1].length)}}}}return[t=t.substring(n.length,t.length-n.length),o]},n.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,r="",a=1;a<=t;a++)r+=String.fromCharCode(a);for(a=0;a<e.length;a++)e[a].start1+=t,e[a].start2+=t;var o=e[0],i=o.diffs;if(0==i.length||0!=i[0][0])i.unshift(new n.Diff(0,r)),o.start1-=t,o.start2-=t,o.length1+=t,o.length2+=t;else if(t>i[0][1].length){var c=t-i[0][1].length;i[0][1]=r.substring(i[0][1].length)+i[0][1],o.start1-=c,o.start2-=c,o.length1+=c,o.length2+=c}if(0==(i=(o=e[e.length-1]).diffs).length||0!=i[i.length-1][0])i.push(new n.Diff(0,r)),o.length1+=t,o.length2+=t;else if(t>i[i.length-1][1].length){c=t-i[i.length-1][1].length;i[i.length-1][1]+=r.substring(0,c),o.length1+=c,o.length2+=c}return r},n.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,a=0;a<e.length;a++)if(!(e[a].length1<=t)){var o=e[a];e.splice(a--,1);for(var i=o.start1,c=o.start2,l="";0!==o.diffs.length;){var s=new n.patch_obj,u=!0;for(s.start1=i-l.length,s.start2=c-l.length,""!==l&&(s.length1=s.length2=l.length,s.diffs.push(new n.Diff(0,l)));0!==o.diffs.length&&s.length1<t-this.Patch_Margin;){var d=o.diffs[0][0],f=o.diffs[0][1];1===d?(s.length2+=f.length,c+=f.length,s.diffs.push(o.diffs.shift()),u=!1):d===r&&1==s.diffs.length&&0==s.diffs[0][0]&&f.length>2*t?(s.length1+=f.length,i+=f.length,u=!1,s.diffs.push(new n.Diff(d,f)),o.diffs.shift()):(f=f.substring(0,t-s.length1-this.Patch_Margin),s.length1+=f.length,i+=f.length,0===d?(s.length2+=f.length,c+=f.length):u=!1,s.diffs.push(new n.Diff(d,f)),f==o.diffs[0][1]?o.diffs.shift():o.diffs[0][1]=o.diffs[0][1].substring(f.length))}l=(l=this.diff_text2(s.diffs)).substring(l.length-this.Patch_Margin);var p=this.diff_text1(o.diffs).substring(0,this.Patch_Margin);""!==p&&(s.length1+=p.length,s.length2+=p.length,0!==s.diffs.length&&0===s.diffs[s.diffs.length-1][0]?s.diffs[s.diffs.length-1][1]+=p:s.diffs.push(new n.Diff(0,p))),u||e.splice(++a,0,s)}}},n.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},n.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var a=e.split("\n"),o=0,i=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;o<a.length;){var c=a[o].match(i);if(!c)throw new Error("Invalid patch string: "+a[o]);var l=new n.patch_obj;for(t.push(l),l.start1=parseInt(c[1],10),""===c[2]?(l.start1--,l.length1=1):"0"==c[2]?l.length1=0:(l.start1--,l.length1=parseInt(c[2],10)),l.start2=parseInt(c[3],10),""===c[4]?(l.start2--,l.length2=1):"0"==c[4]?l.length2=0:(l.start2--,l.length2=parseInt(c[4],10)),o++;o<a.length;){var s=a[o].charAt(0);try{var u=decodeURI(a[o].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+u)}if("-"==s)l.diffs.push(new n.Diff(r,u));else if("+"==s)l.diffs.push(new n.Diff(1,u));else if(" "==s)l.diffs.push(new n.Diff(0,u));else{if("@"==s)break;if(""!==s)throw new Error('Invalid patch mode "'+s+'" in: '+u)}o++}}return t},(n.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:e="+";break;case r:e="-";break;case 0:e=" "}t[n+1]=e+encodeURI(this.diffs[n][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=n,e.exports.diff_match_patch=n,e.exports.DIFF_DELETE=r,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0},348:function(e,t,n){"use strict";n(1729);var r=n(70);t.a=r.b},35:function(e,t,n){"use strict";n(1551);var r=n(256);n(151);t.a=r.a},350:function(e,t,n){"use strict";var r=n(271),a=n(848),o=n(181),i=n(119),c=n(221),l=n(96),s=n(15);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){p(o,r,a,i,c,"next",e)}function c(e){p(o,r,a,i,c,"throw",e)}i(void 0)}))}}function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v={isDocInToc:function(e,t){return!(!e||!Array.isArray(e))&&!!e.find((function(e){return e.url===t.slug||e.id===t.id}))},limitExceeded:function(e){return e&&e.length>=o.MAX_NODES_COUNT},shouldPublishToCatalog:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=!n.published_at;return!this.limitExceeded(e)&&"Book"===t.layout&&this.isDocInToc(e,n)&&a&&r},shouldShowToc:function(e){return!!e&&["Book","Custom"].includes(e.layout)},shouldShowColumnToc:function(e){return!!e&&"Column"===e.layout},parseCatalogVersions:function(e){if(!e)return[];var t,n=[],a=m(e);try{for(a.s();!(t=a.n()).done;){var o=t.value,i=o.item.toc_yml;if(i)try{var c=Object(r.ymlToToc)(i),l=c[0];l&&l.published&&(o.meta=c[0],o.toc=c.slice(1),o.catalog_tree=Object(r.generateTreeFromYml)(i),n.push(o))}catch(e){}}}catch(e){a.e(e)}finally{a.f()}return n},parseVersion:function(e){if(e){try{var t,n=e.item.toc_yml,a=Object(r.ymlToToc)(n),o=m(a);try{for(o.s();!(t=o.n()).done;){var i=t.value;i.key=i.uuid}}catch(e){o.e(e)}finally{o.f()}var c=a[0];c?(e.meta=c,e.toc=a.slice(1)):e.toc=a,e.catalog_tree=Object(r.generateTreeByTocItems)(e.toc)}catch(e){console.error(e)}return e}},updateNode:function(e){var t=arguments,n=this;return h(regeneratorRuntime.mark((function a(){var i,c,s;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i=t.length>1&&void 0!==t[1]?t[1]:{},c=t.length>2&&void 0!==t[2]?t[2]:{catalog_tree:!0},e){a.next=4;break}return a.abrupt("return");case 4:if(!e.should_manually_create_uid){a.next=8;break}return a.next=7,l.webProxy.catalogNodes.ensureUpdateTocYml({book_id:e.id,toc_yml:Object(r.tocToYml)(e.toc)});case 7:e.should_manually_create_uid=!1;case 8:return a.prev=8,a.next=11,l.webProxy.catalogNodes.update(d({book_id:e.id,format:"list"},i),{ignoreGlobalMessage:!0,useOriginResp:!0});case 11:s=a.sent,a.next=18;break;case 14:throw a.prev=14,a.t0=a.catch(8),"limit_exceeded"===a.t0.code&&(a.t0.message=__("目录节点数超过最大限制 {MAX_NODES_COUNT}，无法新增",{MAX_NODES_COUNT:o.MAX_NODES_COUNT})),a.t0;case 18:return a.abrupt("return",n._returnWithCatalogTree(d(d({},s.meta),{},{toc:s.data}),c));case 19:case"end":return a.stop()}}),a,null,[[8,14]])})))()},_returnWithCatalogTree:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.catalog_tree&&e.toc&&(e.catalog_tree=Object(r.generateTreeByTocItems)(e.toc)),e},getCatalogNodes:function(e){var t=arguments;return h(regeneratorRuntime.mark((function n(){var a,o,i,c,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.length>1&&void 0!==t[1]?t[1]:{},e){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,l.webProxy.catalogNodes.find(d({book_id:e},a),{useOriginResp:!0});case 5:o=n.sent,i=m(o.data);try{for(i.s();!(c=i.n()).done;)(s=c.value).key=s.uuid}catch(e){i.e(e)}finally{i.f()}return n.abrupt("return",d({catalog_tree:Object(r.generateTreeByTocItems)(o.data),toc:o.data},o.meta));case 9:case"end":return n.stop()}}),n)})))()},actionsForEdit:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[];return"desktop"===t?(r.push(s.a.CATALOG.move),r.push(s.a.CATALOG.remove),r):(e.type===o.TYPES.link?r.push(s.a.CATALOG.edit_link):r.push(s.a.CATALOG.rename),"lite"===t&&(n.create_doc&&(e.type===o.TYPES.doc&&r.push(s.a.DOC.edit),r.push(s.a.CATALOG.copy),r.push(s.a.CATALOG.move)),n.export&&e.type===o.TYPES.doc&&r.push(s.a.CATALOG.export),n.create_doc&&(r.push(s.a.DOC.divide),r.push(s.a.CATALOG.remove)),n.create_doc&&r.push(s.a.CATALOG.destroy)),"full"===t&&(e.type===o.TYPES.doc&&(r.push(s.a.CATALOG.view_doc),r.push(s.a.DOC.edit)),r.push(s.a.CATALOG.copy),r.push(s.a.CATALOG.move),n.export&&e.type===o.TYPES.doc&&r.push(s.a.CATALOG.export),e.share&&e.share.status===c.STATUS.active&&(r.push(s.a.DOC.divide),r.push(s.a.DOC.unshare)),r.push(s.a.DOC.divide),r.push(s.a.CATALOG.remove),r.push(s.a.CATALOG.destroy)),r)},formatNode:function(e){return{type:e.type||i.TOC_TYPES.DOC,title:e.title,uuid:e.uuid||Object(a.nanoid)(16),url:e.url||null,prev_uuid:e.prev_uuid||null,sibling_uuid:e.sibling_uuid||null,child_uuid:e.child_uuid||null,parent_uuid:e.parent_uuid||null,doc_id:e.doc_id||null,level:e.level||0,id:e.doc_id||null,open_window:0===e.open_window?0:1,visible:0===e.visible?0:1}},insertNodeToCatalog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{catalog_tree:!0},r=v.formatNode(t),a=t.target_uuid,o=t.action,i=e.findIndex((function(e){return e.uuid===a}));if(i>=0){var c=e[i];r.level="insertSibling"===o?c.level:c.level+1,e.splice(i+1,0,r)}else e.unshift(r);return this._returnWithCatalogTree({toc:e,node_uuid:r.uuid},n)},getRedirectURL:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.group,a=n.book,o=n.currentItem,i=e.filter((function(e){return"DOC"===e.type&&e.id}));if(!o)return i&&i[0]?"/".concat(r.login,"/").concat(a.slug,"/").concat(i[0].url):"";var c,l=i.findIndex((function(e){return e.url&&e.url===o.url}));return i=t.filter((function(e){return"DOC"===e.type&&e.id})),l<0?c=i[0]:(c=i[l]||null)||(c=i[l-1]||null),c?"/".concat(r.login,"/").concat(a.slug,"/").concat(c.url):""},sortListCatalog:function(e){return h(regeneratorRuntime.mark((function t(){var n,r,a,i,c,s,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.sourceIdx,r=e.targetIdx,a=e.sortedDocs,i=e.bookId,r!==n){t.next=3;break}return t.abrupt("return",a);case 3:return c=a[n].catalog_uuid,r>=a.length&&(r=a.length-1),s=a[r].catalog_uuid,t.next=8,l.webProxy.catalogNodes.update({action:r<n?o.ACTIONS.moveBefore:o.ACTIONS.moveAfter,book_id:i,format:"list",node_uuid:c,target_uuid:s});case 8:return u=a.splice(n,1)[0],a.splice(r,0,u),t.abrupt("return",a);case 11:case"end":return t.stop()}}),t)})))()}};t.a=v},351:function(e,t,n){"use strict";n.d(t,"d",(function(){return Ei})),n.d(t,"a",(function(){return Ox})),n.d(t,"b",(function(){return Ax})),n.d(t,"c",(function(){return gx})),n.d(t,"e",(function(){return Kw})),n.d(t,"f",(function(){return Dx})),n.d(t,"g",(function(){return yx})),n.d(t,"h",(function(){return jx})),n.d(t,"i",(function(){return Px})),n.d(t,"j",(function(){return vw})),n.d(t,"k",(function(){return Tx}));var r=n(42),a=n(17),o=n(51),i=n.n(o),c=n(6),l=n.n(c),s=n(7),u=n.n(s),d=n(261),f=n.n(d),p=n(19),h=n.n(p),m=n(3),g=n.n(m),v=n(125),y=n.n(v),b=n(243),k=n.n(b),w=n(29),x=n.n(w),_=n(340),E=n.n(_),C=n(120),O=n.n(C),S=n(41),R=n.n(S),j=n(651),P=n.n(j),A=n(652),T=n.n(A),D=n(653),M=n.n(D),N=n(654),L=n.n(N),I=n(655),B=n.n(I),z=n(656),F=n.n(z),U=n(657),V=n.n(U),q=n(658),H=n.n(q),W=n(659),Y=n.n(W),G=n(298),X=n(44),K=n.n(X),Z=n(71),$=n.n(Z),Q=n(69),J=n.n(Q),ee=n(563),te=n.n(ee),ne=n(164),re=n.n(ne),ae=n(9),oe=n.n(ae),ie=n(10),ce=n.n(ie),le=n(4),se=n.n(le),ue=n(5),de=n.n(ue),fe=n(341),pe=n.n(fe),he=n(81),me=n.n(he);!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}('.lake-ui-button {\n  line-height: 1.499;\n  display: inline-block;\n  font-weight: 400;\n  text-align: center;\n  cursor: pointer;\n  border: 1px solid transparent;\n  white-space: nowrap;\n  padding: 0 15px;\n  font-size: 14px;\n  border-radius: 4px;\n  height: 30px;\n  user-select: none;\n  transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n  position: relative;\n  box-shadow: 0 2px 0 rgba(0, 0, 0, 0.015);\n  color: rgba(0, 0, 0, 0.65);\n  background-color: #fff;\n  border-color: #d9d9d9;\n  color: #fff;\n  background-color: #25b864;\n  border-color: #25b864;\n  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.12);\n  outline: 0;\n}\n.lake-ui-button:hover {\n  background-color: #47c479;\n  border-color: #47c479;\n}\n.lake-card-dnd {\n  position: absolute;\n  top: 0;\n  left: -21px;\n  right: auto;\n  bottom: auto;\n  width: 18px;\n  height: 24px;\n  line-height: 24px;\n  font-size: 14px;\n  font-weight: normal;\n  display: none;\n  opacity: 0;\n  transition: all 0.3s ease-in-out;\n  background: rgba(255, 255, 255, 0.9);\n}\n.lake-card-dnd-trigger {\n  width: 18px;\n  height: 24px;\n  text-align: center;\n  color: #BFBFBF;\n  font-size: 16px;\n  border-radius: 2px 2px;\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.lake-card-dnd-trigger-isdraging {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}\n.lake-card-dnd:hover {\n  background: #f4f4f4;\n  color: #595959;\n}\n.lake-card-dnd-active {\n  display: block;\n  opacity: 1;\n  cursor: pointer;\n}\n.lake-tooltip {\n  font-size: 14px;\n  font-variant: tabular-nums;\n  line-height: 1.5;\n  color: rgba(0, 0, 0, 0.65);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  position: absolute;\n  z-index: 1060;\n  display: block;\n  visibility: visible;\n  max-width: 250px;\n  white-space: nowrap;\n}\n.lake-tooltip-hidden {\n  display: none;\n}\n.lake-tooltip-placement-top,\n.lake-tooltip-placement-topLeft,\n.lake-tooltip-placement-topRight {\n  padding-bottom: 8px;\n}\n.lake-tooltip-placement-right,\n.lake-tooltip-placement-rightTop,\n.lake-tooltip-placement-rightBottom {\n  padding-left: 8px;\n}\n.lake-tooltip-placement-bottom,\n.lake-tooltip-placement-bottomLeft,\n.lake-tooltip-placement-bottomRight {\n  padding-top: 8px;\n}\n.lake-tooltip-placement-left,\n.lake-tooltip-placement-leftTop,\n.lake-tooltip-placement-leftBottom {\n  padding-right: 8px;\n}\n.lake-tooltip-inner {\n  padding: 6px 8px;\n  color: #fff;\n  text-align: left;\n  text-decoration: none;\n  background-color: rgba(0, 0, 0, 0.75);\n  border-radius: 4px;\n  -webkit-box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n  min-height: 32px;\n  word-wrap: break-word;\n}\n.lake-tooltip-arrow {\n  position: absolute;\n  width: 0;\n  height: 0;\n  border-color: transparent;\n  border-style: solid;\n}\n.lake-tooltip-placement-top .lake-tooltip-arrow,\n.lake-tooltip-placement-topLeft .lake-tooltip-arrow,\n.lake-tooltip-placement-topRight .lake-tooltip-arrow {\n  bottom: 3px;\n  border-width: 5px 5px 0;\n  border-top-color: rgba(0, 0, 0, 0.75);\n}\n.lake-tooltip-placement-top .lake-tooltip-arrow {\n  left: 50%;\n  margin-left: -5px;\n}\n.lake-tooltip-placement-topLeft .lake-tooltip-arrow {\n  left: 16px;\n}\n.lake-tooltip-placement-topRight .lake-tooltip-arrow {\n  right: 16px;\n}\n.lake-tooltip-placement-right .lake-tooltip-arrow,\n.lake-tooltip-placement-rightTop .lake-tooltip-arrow,\n.lake-tooltip-placement-rightBottom .lake-tooltip-arrow {\n  left: 3px;\n  border-width: 5px 5px 5px 0;\n  border-right-color: rgba(0, 0, 0, 0.75);\n}\n.lake-tooltip-placement-right .lake-tooltip-arrow {\n  top: 50%;\n  margin-top: -5px;\n}\n.lake-tooltip-placement-rightTop .lake-tooltip-arrow {\n  top: 8px;\n}\n.lake-tooltip-placement-rightBottom .lake-tooltip-arrow {\n  bottom: 8px;\n}\n.lake-tooltip-placement-left .lake-tooltip-arrow,\n.lake-tooltip-placement-leftTop .lake-tooltip-arrow,\n.lake-tooltip-placement-leftBottom .lake-tooltip-arrow {\n  right: 3px;\n  border-width: 5px 0 5px 5px;\n  border-left-color: rgba(0, 0, 0, 0.75);\n}\n.lake-tooltip-placement-left .lake-tooltip-arrow {\n  top: 50%;\n  margin-top: -5px;\n}\n.lake-tooltip-placement-leftTop .lake-tooltip-arrow {\n  top: 8px;\n}\n.lake-tooltip-placement-leftBottom .lake-tooltip-arrow {\n  bottom: 8px;\n}\n.lake-tooltip-placement-bottom .lake-tooltip-arrow,\n.lake-tooltip-placement-bottomLeft .lake-tooltip-arrow,\n.lake-tooltip-placement-bottomRight .lake-tooltip-arrow {\n  top: 3px;\n  border-width: 0 5px 5px;\n  border-bottom-color: rgba(0, 0, 0, 0.75);\n}\n.lake-tooltip-placement-bottom .lake-tooltip-arrow {\n  left: 50%;\n  margin-left: -5px;\n}\n.lake-tooltip-placement-bottomLeft .lake-tooltip-arrow {\n  left: 16px;\n}\n.lake-tooltip-placement-bottomRight .lake-tooltip-arrow {\n  right: 16px;\n}\n.lake-embed-tooltip {\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.3s ease-in-out;\n}\n.lake-embed-tooltip.lake-embed-tooltip-active {\n  opacity: 1;\n  visibility: visible;\n}\n.lake-engine-view .lake-embed-toolbar-active {\n  min-width: 200px;\n}\n.lake-card-toolbar.lake-embed-toolbar-block {\n  top: -48px;\n  bottom: auto;\n  display: none;\n}\n.lake-card-toolbar.lake-card-toolbar-active {\n  display: block;\n}\n.lake-card-toolbar.lake-embed-toolbar-active {\n  display: block;\n  height: 48px;\n}\n.lake-embed-toolbar-wrapper {\n  position: absolute;\n}\n.lake-embed-toolbar {\n  position: absolute;\n  opacity: 0;\n  visibility: hidden;\n  width: auto;\n  line-height: 28px;\n  display: flex;\n  flex-direction: row;\n  font-size: 14px;\n  font-weight: normal;\n  text-indent: 0;\n  -webkit-user-select: none;\n  user-select: none;\n}\n.lake-embed-toolbar .lake-input {\n  font-variant: tabular-nums;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  position: relative;\n  display: inline-block;\n  padding: 4px 11px;\n  width: 100%;\n  height: 32px;\n  font-size: 14px;\n  line-height: 1.5;\n  color: rgba(0, 0, 0, 0.65);\n  background-color: #fff;\n  background-image: none;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  -webkit-transition: all 0.3s;\n  transition: all 0.3s;\n}\n.lake-embed-toolbar .lake-input::-moz-placeholder {\n  color: #bfbfbf;\n  opacity: 1;\n}\n.lake-embed-toolbar .lake-input:-ms-input-placeholder {\n  color: #bfbfbf;\n}\n.lake-embed-toolbar .lake-input::-webkit-input-placeholder {\n  color: #bfbfbf;\n}\n.lake-embed-toolbar .lake-input:hover {\n  border-color: #47c479;\n  border-right-width: 1px !important;\n}\n.lake-embed-toolbar .lake-input:focus {\n  border-color: #47c479;\n  outline: 0;\n  -webkit-box-shadow: 0 0 0 2px rgba(37, 184, 100, 0.2);\n  box-shadow: 0 0 0 2px rgba(37, 184, 100, 0.2);\n  border-right-width: 1px !important;\n}\n.lake-embed-toolbar .lake-input-disabled {\n  background-color: #f5f5f5;\n  opacity: 1;\n  cursor: not-allowed;\n  color: rgba(0, 0, 0, 0.25);\n}\n.lake-embed-toolbar .lake-input-disabled:hover {\n  border-color: #e6d8d8;\n  border-right-width: 1px !important;\n}\n.lake-embed-toolbar .lake-input-sm {\n  padding: 1px 7px;\n  height: 24px;\n}\n.lake-embed-toolbar .lake-embed-toolbar-numberinput {\n  line-height: 24px;\n  display: inline-block;\n  width: 46px;\n}\n.lake-embed-toolbar .lake-embed-toolbar-btn .lake-icon {\n  transform: translateY(1px);\n}\n.lake-embed-toolbar .lake-embed-toolbar-btn.with-text {\n  display: inline-flex;\n  align-items: center;\n}\n.lake-embed-toolbar .lake-embed-toolbar-btn.with-text .lake-embed-toolbar-btn-text {\n  color: #262626;\n  font-size: 12px;\n  margin-left: 4px;\n}\n.lake-embed-toolbar-active {\n  opacity: 1;\n  visibility: visible;\n}\n.lake-embed-toolbar-inline {\n  top: 50%;\n  margin-top: -14px;\n  bottom: auto;\n  left: auto;\n  right: 12px;\n}\n.lake-embed-toolbar-block {\n  top: auto;\n  bottom: -46px;\n  left: -1px;\n  right: auto;\n  height: 40px;\n  z-index: 125;\n}\n.lake-embed-toolbar-second-block {\n  bottom: -92px;\n}\n.lake-embed-toolbar-right {\n  left: auto;\n  right: -1px;\n}\n.lake-embed-toolbar-center {\n  left: 50%;\n  transform: translateX(-50%);\n}\n.lake-embed-toolbar-inlink {\n  bottom: -90px;\n}\n.lake-embed-toolbar-memtion {\n  padding: 0 0;\n  min-width: 280px;\n  height: auto;\n  bottom: auto;\n  z-index: 1031;\n}\n.lake-embed-toolbar .lake-icon-arrow {\n  position: absolute;\n  right: 8px;\n  top: 50%;\n  width: 0;\n  height: 0;\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-top: 5px solid #BFBFBF;\n  margin-top: -3px;\n  transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\n}\n.lake-embed-toolbar-btn {\n  line-height: 28px;\n  padding: 0 3px;\n  min-width: 28px;\n  display: inline-block;\n  text-align: center;\n  color: #595959;\n  border-radius: 2px 2px;\n  transition: background-color 0.3s ease-in-out;\n  cursor: pointer;\n}\n.lake-embed-toolbar-btn .text,\n.lake-embed-toolbar-btn .lake-icon {\n  font-size: 16px;\n  color: #595959;\n}\n.lake-embed-toolbar-btn .text {\n  font-size: 12px;\n  display: inline-block;\n  padding: 0 4px;\n}\n.lake-embed-toolbar-btn:hover {\n  background-color: #f4f4f4;\n}\n.lake-embed-toolbar-btn-disabled,\n.lake-embed-toolbar-btn-disabled:hover {\n  background-color: transparent;\n  box-shadow: none;\n  cursor: not-allowed;\n}\n.lake-embed-toolbar-btn-disabled .text,\n.lake-embed-toolbar-btn-disabled:hover .text,\n.lake-embed-toolbar-btn-disabled .lake-icon,\n.lake-embed-toolbar-btn-disabled:hover .lake-icon {\n  color: #BFBFBF;\n}\n.lake-embed-toolbar-text {\n  line-height: 24px;\n  padding: 0 5px;\n  display: inline-block;\n  color: #595959;\n}\n.lake-embed-toolbar-text .lake-icon.lake-icon-connect {\n  width: 18px;\n  transform: scale(0.6);\n}\n.lake-embed-toolbar-text-link {\n  min-width: 200px;\n  max-width: 250px;\n  line-height: 28px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.lake-embed-toolbar-linkinput {\n  line-height: 24px;\n  padding: 0 3px;\n  display: inline-block;\n  border: 1px solid transparent;\n  outline: 0;\n  width: 200px;\n  letter-spacing: 0.05em;\n}\n.lake-embed-toolbar-group {\n  border: 1px solid rgba(226, 226, 226, 0.84);\n  border-radius: 2px;\n  box-shadow: 0px 2px 4px 0px rgba(225, 225, 225, 0.5);\n  background: #fff;\n  position: relative;\n  display: inline-flex;\n  padding: 5px 3px;\n}\n.lake-embed-toolbar-item {\n  position: relative;\n  display: inline-block;\n  line-height: 28px;\n  margin: 0 3px;\n  text-align: left;\n  color: #595959;\n  flex: 0 0 auto;\n}\n.lake-embed-toolbar-item[disabled] {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.lake-embed-toolbar-item-split {\n  width: 1px;\n  height: 16px;\n  line-height: 16px;\n  margin: 6px 4px;\n  border-left: 1px solid #e8e8e8;\n  display: inline-block;\n}\n.lake-embed-toolbar-item-trigger {\n  position: relative;\n  padding-left: 3px;\n  padding-right: 16px;\n  cursor: pointer;\n  border-radius: 2px 2px;\n  transition: background-color 0.3s ease-in-out;\n}\n.lake-embed-toolbar-item-trigger:hover {\n  background: #f4f4f4;\n}\n.lake-embed-toolbar-item-trigger-active {\n  background: #f4f4f4;\n}\n.lake-embed-toolbar-item-trigger-active .lake-icon-arrow {\n  transform: rotate(-180deg);\n}\n.lake-embed-toolbar-item-dropdown {\n  position: absolute;\n  top: 38px;\n  left: -7px;\n  padding: 5px 0;\n  border-radius: 2px 2px;\n  background: #fff;\n  border: 1px solid #d9d9d9;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  min-width: 128px;\n  height: auto;\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\n  transform: translateY(-10px);\n}\n.lake-embed-toolbar-item-dropdown:before {\n  content: \' \';\n  position: absolute;\n  top: -6px;\n  left: 15px;\n  width: 0;\n  height: 0;\n  border-left: 7px solid transparent;\n  border-right: 7px solid transparent;\n  border-bottom: 6px solid #d9d9d9;\n}\n.lake-embed-toolbar-item-dropdown:after {\n  content: \' \';\n  position: absolute;\n  top: -4px;\n  left: 15px;\n  width: 0;\n  height: 0;\n  border-left: 7px solid transparent;\n  border-right: 7px solid transparent;\n  border-bottom: 6px solid #fff;\n}\n.lake-embed-toolbar-item-dropdown-active {\n  opacity: 1;\n  visibility: visible;\n  transform: translateY(0px);\n}\n.lake-embed-toolbar-item-dropdown-item {\n  display: block;\n  padding: 4px 10px;\n  line-height: 24px;\n  color: #595959;\n  transition: background 0.3s ease-in-out;\n  white-space: nowrap;\n}\n.lake-embed-toolbar-item-dropdown-item .lake-embed-toolbar-btn:hover {\n  background: #e8e8e8;\n}\n.lake-embed-toolbar-item-dropdown-item:hover {\n  background: #e8e8e8;\n}\n.lake-embed-toolbar-item-dropdown-item.active,\n.lake-embed-toolbar-item-dropdown-item.active:hover {\n  background: #f4f4f4;\n}\n.lake-embed-toolbar-item-dropdown-item.active .lake-embed-toolbar-btn:hover,\n.lake-embed-toolbar-item-dropdown-item.active:hover .lake-embed-toolbar-btn:hover {\n  background: #f4f4f4;\n}\n.lake-embed-toolbar-item-input {\n  display: flex;\n  padding: 2px 0;\n}\n.lake-embed-toolbar-item-text {\n  padding: 0 5px;\n}\n.lake-embed-toolbar-flex {\n  position: relative;\n  opacity: 1;\n  visibility: visible;\n  padding: 6px 6px;\n  display: flex;\n}\n.lake-embed-toolbar-flex .lake-embed-toolbar-item {\n  padding: 0 0;\n}\n.lake-embed-toolbar-flex .lake-embed-toolbar-btn {\n  padding: 0 6px;\n  line-height: 28px;\n}\n.lake-embed-toolbar-flex .lake-embed-toolbar-btn .lake-icon {\n  vertical-align: middle;\n}\n.lake-embed-toolbar-flex .lake-embed-toolbar-item-trigger-active {\n  background: #e8e8e8;\n}\n.lake-embed-toolbar-flex .lake-embed-toolbar-item-trigger-active .lake-embed-toolbar-btn:hover {\n  background: #e8e8e8;\n}\n.lake-embed-toolbar-flex .lake-embed-toolbar-item-dropdown {\n  border-radius: 3px 3px;\n  top: 32px;\n  left: -1px;\n}\n.lake-embed-toolbar-flex .lake-embed-toolbar-item-dropdown:before {\n  content: \'\';\n  display: none;\n}\n.lake-embed-toolbar-flex .lake-embed-toolbar-item-dropdown:after {\n  content: \'\';\n  display: none;\n}\n.lake-embed-toolbar-dropdown .dropdown-container {\n  display: none;\n  position: absolute;\n  padding: 8px 0;\n  top: 100%;\n  margin-top: 9px;\n  border-radius: 4px;\n  background-color: #fff;\n  box-shadow: 0 1px 4px -2px rgba(0, 0, 0, 0.13), 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 8px 16px 4px rgba(0, 0, 0, 0.04);\n}\n.lake-embed-toolbar-dropdown .dropdown-container.show {\n  display: block;\n}\n.lake-embed-toolbar-dropdown-item {\n  width: 218px;\n  padding: 8px 16px;\n  margin: 0;\n  white-space: nowrap;\n  font-size: 15px;\n  line-height: 26px;\n  color: #404040;\n  cursor: pointer;\n}\n.lake-embed-toolbar-dropdown-item:HOVER {\n  background-color: #f5f5f5;\n}\n.lake-embed-toolbar-dropdown-switch {\n  display: flex;\n  align-items: center;\n}\n.lake-embed-toolbar-dropdown-switch .text-content {\n  flex: 1;\n}\n@-webkit-keyframes lakeCheckboxEffect {\n  0% {\n    -webkit-transform: scale(1);\n    transform: scale(1);\n    opacity: 0.5;\n  }\n  100% {\n    -webkit-transform: scale(1.6);\n    transform: scale(1.6);\n    opacity: 0;\n  }\n}\n@keyframes lakeCheckboxEffect {\n  0% {\n    -webkit-transform: scale(1);\n    transform: scale(1);\n    opacity: 0.5;\n  }\n  100% {\n    -webkit-transform: scale(1.6);\n    transform: scale(1.6);\n    opacity: 0;\n  }\n}\n.lake-checkbox {\n  font-size: 14px;\n  font-variant: tabular-nums;\n  color: rgba(0, 0, 0, 0.65);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  white-space: nowrap;\n  cursor: pointer;\n  outline: none;\n  display: inline-block;\n  line-height: 1;\n  position: relative;\n  vertical-align: middle;\n  top: -0.09em;\n}\n.lake-checkbox-wrapper:hover .lake-checkbox-inner,\n.lake-checkbox:hover .lake-checkbox-inner,\n.lake-checkbox-input:focus + .lake-checkbox-inner {\n  border-color: #25b864;\n}\n.lake-checkbox-checked:after {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  border-radius: 2px;\n  border: 1px solid #25b864;\n  content: "";\n  -webkit-animation: lakeCheckboxEffect 0.36s ease-in-out;\n  animation: lakeCheckboxEffect 0.36s ease-in-out;\n  -webkit-animation-fill-mode: both;\n  animation-fill-mode: both;\n  visibility: hidden;\n}\n.lake-checkbox:hover:after,\n.lake-checkbox-wrapper:hover .lake-checkbox:after {\n  visibility: visible;\n}\n.lake-checkbox-inner {\n  position: relative;\n  top: 0;\n  left: 0;\n  display: block;\n  width: 16px;\n  height: 16px;\n  border: 1px solid #d9d9d9;\n  border-radius: 2px;\n  background-color: #fff;\n  -webkit-transition: all 0.3s;\n  transition: all 0.3s;\n  border-collapse: separate;\n}\n.lake-checkbox-inner:after {\n  -webkit-transform: rotate(45deg) scale(0);\n  -ms-transform: rotate(45deg) scale(0);\n  transform: rotate(45deg) scale(0);\n  position: absolute;\n  left: 4.57142857px;\n  top: 1.14285714px;\n  display: table;\n  width: 5.71428571px;\n  height: 9.14285714px;\n  border: 2px solid #fff;\n  border-top: 0;\n  border-left: 0;\n  content: \' \';\n  -webkit-transition: all 0.1s cubic-bezier(0.71, -0.46, 0.88, 0.6), opacity 0.1s;\n  transition: all 0.1s cubic-bezier(0.71, -0.46, 0.88, 0.6), opacity 0.1s;\n  opacity: 0;\n}\n.lake-checkbox-input {\n  position: absolute;\n  left: 0;\n  z-index: 1;\n  cursor: pointer;\n  opacity: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n}\n.lake-checkbox-checked .lake-checkbox-inner:after {\n  -webkit-transform: rotate(45deg) scale(1);\n  -ms-transform: rotate(45deg) scale(1);\n  transform: rotate(45deg) scale(1);\n  position: absolute;\n  display: table;\n  border: 2px solid #fff;\n  border-top: 0;\n  border-left: 0;\n  content: \' \';\n  -webkit-transition: all 0.2s cubic-bezier(0.12, 0.4, 0.29, 1.46) 0.1s;\n  transition: all 0.2s cubic-bezier(0.12, 0.4, 0.29, 1.46) 0.1s;\n  opacity: 1;\n}\n.lake-checkbox-checked .lake-checkbox-inner {\n  background-color: #25b864;\n  border-color: #25b864;\n}\n.lake-checkbox-disabled {\n  cursor: not-allowed;\n}\n.lake-checkbox-disabled.lake-checkbox-checked .lake-checkbox-inner:after {\n  -webkit-animation-name: none;\n  animation-name: none;\n  border-color: rgba(0, 0, 0, 0.25);\n}\n.lake-checkbox-disabled .lake-checkbox-input {\n  cursor: not-allowed;\n}\n.lake-checkbox-disabled .lake-checkbox-inner {\n  border-color: #d9d9d9 !important;\n  background-color: #f5f5f5;\n}\n.lake-checkbox-disabled .lake-checkbox-inner:after {\n  -webkit-animation-name: none;\n  animation-name: none;\n  border-color: #f5f5f5;\n  border-collapse: separate;\n}\n.lake-checkbox-disabled + span {\n  color: rgba(0, 0, 0, 0.25);\n  cursor: not-allowed;\n}\n.lake-checkbox-wrapper {\n  font-size: 14px;\n  font-variant: tabular-nums;\n  line-height: 1.5;\n  color: rgba(0, 0, 0, 0.65);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  line-height: unset;\n  cursor: pointer;\n  display: inline-block;\n}\n.lake-checkbox-wrapper + .lake-checkbox-wrapper {\n  margin-left: 8px;\n}\n.lake-checkbox-wrapper + span,\n.lake-checkbox + span {\n  padding-left: 8px;\n  padding-right: 8px;\n}\n.lake-checkbox-group {\n  font-size: 14px;\n  font-variant: tabular-nums;\n  line-height: 1.5;\n  color: rgba(0, 0, 0, 0.65);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  display: inline-block;\n}\n.lake-checkbox-group-item {\n  display: inline-block;\n  margin-right: 8px;\n}\n.lake-checkbox-group-item:last-child {\n  margin-right: 0;\n}\n.lake-checkbox-group-item + .lake-checkbox-group-item {\n  margin-left: 0;\n}\n.lake-checkbox-indeterminate .lake-checkbox-inner {\n  background-color: #fff;\n  border-color: #d9d9d9;\n}\n.lake-checkbox-indeterminate .lake-checkbox-inner:after {\n  content: \' \';\n  -webkit-transform: translate(-50%, -50%) scale(1);\n  -ms-transform: translate(-50%, -50%) scale(1);\n  transform: translate(-50%, -50%) scale(1);\n  border: 0;\n  left: 50%;\n  top: 50%;\n  width: 8px;\n  height: 8px;\n  background-color: #25b864;\n  opacity: 1;\n}\n.lake-checkbox-indeterminate.lake-checkbox-disabled .lake-checkbox-inner:after {\n  border-color: rgba(0, 0, 0, 0.25);\n  background-color: rgba(0, 0, 0, 0.25);\n}\n.lake-engine .lake-list,\n.lake-engine-view .lake-list {\n  color: #262626;\n  text-indent: 0;\n}\n.lake-engine .lake-list-node,\n.lake-engine-view .lake-list-node {\n  line-height: inherit;\n}\n.lake-engine .lake-list-node [data-lake-card="checkbox"],\n.lake-engine-view .lake-list-node [data-lake-card="checkbox"] {\n  margin-left: 0;\n  margin-right: 5px;\n}\n.lake-engine .lake-list-task,\n.lake-engine-view .lake-list-task {\n  position: relative;\n  list-style: none;\n  text-indent: 0;\n}\n.lake-engine .lake-list-task-active,\n.lake-engine-view .lake-list-task-active {\n  background: #f4f4f4;\n  border-radius: 3px 3px;\n}\n.lake-engine .lake-list-task [data-lake-card="checkbox"],\n.lake-engine-view .lake-list-task [data-lake-card="checkbox"] {\n  padding-right: 6px;\n  vertical-align: middle;\n  line-height: 16px;\n  position: absolute;\n  margin-left: -20px;\n  top: 4px;\n}\n.lake-engine .lake-list-task [data-lake-card="checkbox"] .ant-checkbox-inner,\n.lake-engine-view .lake-list-task [data-lake-card="checkbox"] .ant-checkbox-inner {\n  border-color: #BFBFBF;\n}\n.lake-engine .lake-list-task [data-lake-card="checkbox"] .ant-checkbox-checked .ant-checkbox-inner,\n.lake-engine-view .lake-list-task [data-lake-card="checkbox"] .ant-checkbox-checked .ant-checkbox-inner {\n  background-color: #47C479;\n  border-color: #25b864;\n}\n.lake-engine li span[data-lake-card="image"],\n.lake-engine-view li span[data-lake-card="image"] {\n  vertical-align: top;\n}\n.lake-engine li span[data-lake-card="image"] [data-card-element="left"],\n.lake-engine-view li span[data-lake-card="image"] [data-card-element="left"],\n.lake-engine li span[data-lake-card="image"] [data-card-element="right"],\n.lake-engine-view li span[data-lake-card="image"] [data-card-element="right"] {\n  vertical-align: top;\n}\n.lake-engine-view .lake-list .lake-checkbox-input {\n  cursor: default;\n}\n.lake-link {\n  position: relative;\n}\n.lake-link-content {\n  position: relative;\n  color: #096DD9;\n}\n.lake-embed-toolbar-block.lake-link-toolbar-in-max {\n  z-index: 1032;\n}\n.lake-drop-cursor {\n  position: absolute;\n  width: 2px;\n  background-color: #16914F;\n}\ndiv.lake-drag-image {\n  background-color: #f9f9f9;\n}\n.lake-user-cursor {\n  position: absolute;\n  z-index: 10;\n  width: 2px;\n}\n.lake-user-cursor-trigger {\n  position: absolute;\n  top: -5px;\n  left: -2px;\n  border-radius: 100%;\n  color: #ffffff;\n  width: 6px;\n  height: 6px;\n  font-size: 0;\n  overflow: hidden;\n  transition: all 0.1s linear;\n}\n.lake-user-cursor-trigger-active {\n  top: -17px;\n  border-radius: 2px;\n  color: #ffffff;\n  font-size: 10px;\n  line-height: 18px;\n  height: 18px;\n  width: auto;\n  padding: 0 3px;\n  white-space: nowrap;\n}\n.lake-card-mask {\n  position: absolute;\n  z-index: 10;\n  background: transparent;\n  cursor: not-allowed;\n}\n.lake-user-cursor-card {\n  position: absolute;\n}\n.lake-user-cursor-card .lake-user-cursor-trigger {\n  display: none;\n}\n.lake-user-cursor-card .lake-user-cursor-trigger-active {\n  position: absolute;\n  display: block;\n  top: -19px;\n  left: 0;\n  border-radius: 2px;\n  color: #ffffff;\n  font-size: 10px;\n  line-height: 18px;\n  height: 18px;\n  width: auto;\n  padding: 0 3px;\n  white-space: nowrap;\n}\n.lake-engine,\n.lake-engine-view {\n  font-family: \'Chinese Quote\', \'Segoe UI\', Roboto, \'PingFang SC\', \'Hiragino Sans GB\', \'Microsoft YaHei\', \'Helvetica Neue\', Helvetica, Arial, sans-serif, \'Apple Color Emoji\';\n  word-wrap: break-word;\n  outline-style: none;\n  white-space: pre-wrap;\n  -webkit-user-select: auto;\n  /* pt / px 换算表：https://websemantics.uk/articles/font-size-conversion/ */\n}\n.lake-engine > *:first-child,\n.lake-engine-view > *:first-child {\n  margin-top: 0 !important;\n}\n.lake-engine [data-card-type],\n.lake-engine-view [data-card-type] {\n  white-space: normal;\n}\n.lake-engine .selection-transparent::selection,\n.lake-engine-view .selection-transparent::selection {\n  background: transparent;\n}\n.lake-engine.lake-paintformat-mode,\n.lake-engine-view.lake-paintformat-mode {\n  cursor: text;\n  cursor: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAUCAYAAACTQC2+AAAABGdBTUEAALGPC/xhBQAAATtJREFUSA3dlTFLA0EQhU+jlSkEG63EYGdlZZFG7QUbSyG/QP/C/Q0rqzQWQX+BwUKwtrexEFRQtFSI35NZWDa3soOHhQ8eM/v2zWw2N9xVVVUdwXUYoFxaq5il2wa8hvtG5dJaxYx16xFvLN8i3lmehiFC6Y94wbsTGsxZosajKA/7aewjrKZiyTocJO9DSYHT82r+YXyQs0eRfYBrD/Y1DB58OMyfeM/hrWq8N9qlZkmFBXiPPd6D7ikWUxwjrKWirTeJkzDeNYttKIxhDUuxiFGjfAnfMkUX3hs19emYqFt9P48mU6zVLEQPFjCfwgk8gyuwEd6pS5t0EQYmHhCXLZ8Kvz1oqmFO+H8HxVOXfZC5vwNd46y3xbx5ni1mQ4+dJ6NyDw4xX0GN9484YfcRhg+fcmmt408+5V99wSyVTWN94gAAAABJRU5ErkJggg==) 5 10, text;\n}\n.lake-engine [contenteditable="true"],\n.lake-engine-view [contenteditable="true"] {\n  outline-style: none;\n}\n.lake-engine a,\n.lake-engine-view a,\n.lake-engine a:active,\n.lake-engine-view a:active {\n  word-wrap: break-word;\n  color: #096DD9;\n}\n.lake-engine a:hover,\n.lake-engine-view a:hover {\n  color: #1890FF;\n}\n.lake-engine img,\n.lake-engine-view img {\n  max-width: 100%;\n}\n.lake-engine mark,\n.lake-engine-view mark {\n  padding: 0;\n  background: #ff0;\n}\n.lake-engine sup,\n.lake-engine-view sup {\n  top: -0.5em;\n}\n.lake-engine sub,\n.lake-engine-view sub {\n  bottom: -0.25em;\n}\n.lake-engine sub,\n.lake-engine-view sub,\n.lake-engine sup,\n.lake-engine-view sup {\n  position: relative;\n  font-size: 75%;\n  line-height: 0;\n  vertical-align: baseline;\n}\n.lake-engine blockquote,\n.lake-engine-view blockquote {\n  margin-top: 5px;\n  margin-bottom: 5px;\n  padding-left: 1em;\n  margin-left: 0px;\n  border-left: 3px solid #eee;\n  color: #8C8C8C;\n}\n.lake-engine blockquote + blockquote,\n.lake-engine-view blockquote + blockquote {\n  margin-top: -5px;\n}\n.lake-engine code,\n.lake-engine-view code {\n  font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;\n  font-size: inherit;\n  background-color: rgba(0, 0, 0, 0.06);\n  padding: 0 2px;\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  border-radius: 2px 2px;\n  line-height: inherit;\n  word-wrap: break-word;\n  text-indent: 0;\n}\n.lake-engine .lake-fontsize-9,\n.lake-engine-view .lake-fontsize-9 {\n  font-size: 12px;\n}\n.lake-engine .lake-fontsize-10,\n.lake-engine-view .lake-fontsize-10 {\n  font-size: 13px;\n}\n.lake-engine .lake-fontsize-11,\n.lake-engine-view .lake-fontsize-11 {\n  font-size: 14px;\n}\n.lake-engine .lake-fontsize-1515,\n.lake-engine-view .lake-fontsize-1515 {\n  font-size: 15px;\n}\n.lake-engine .lake-fontsize-12,\n.lake-engine-view .lake-fontsize-12 {\n  font-size: 16px;\n}\n.lake-engine .lake-fontsize-14,\n.lake-engine-view .lake-fontsize-14 {\n  font-size: 19px;\n}\n.lake-engine .lake-fontsize-16,\n.lake-engine-view .lake-fontsize-16 {\n  font-size: 22px;\n}\n.lake-engine .lake-fontsize-18,\n.lake-engine-view .lake-fontsize-18 {\n  font-size: 24px;\n}\n.lake-engine .lake-fontsize-22,\n.lake-engine-view .lake-fontsize-22 {\n  font-size: 29px;\n}\n.lake-engine .lake-fontsize-24,\n.lake-engine-view .lake-fontsize-24 {\n  font-size: 32px;\n}\n.lake-engine .lake-fontsize-30,\n.lake-engine-view .lake-fontsize-30 {\n  font-size: 40px;\n}\n.lake-engine .lake-fontsize-36,\n.lake-engine-view .lake-fontsize-36 {\n  font-size: 48px;\n}\n.lake-engine span,\n.lake-engine-view span {\n  font-size: inherit;\n}\n.lake-engine pre,\n.lake-engine-view pre {\n  overflow: visible;\n  margin-top: 5px;\n  margin-bottom: 5px;\n}\n.lake-engine pre code,\n.lake-engine-view pre code {\n  display: inline;\n  max-width: initial;\n  padding: 0;\n  margin: 0;\n  overflow: initial;\n  line-height: inherit;\n  vertical-align: inherit;\n  white-space: pre;\n  background: 0 0;\n  font-size: inherit;\n}\n.lake-engine ol,\n.lake-engine-view ol,\n.lake-engine ul,\n.lake-engine-view ul {\n  margin: 0 0 0 3px;\n  padding: 0;\n}\n.lake-engine ol ul,\n.lake-engine-view ol ul,\n.lake-engine ul ul,\n.lake-engine-view ul ul,\n.lake-engine ol ol,\n.lake-engine-view ol ol,\n.lake-engine ul ol,\n.lake-engine-view ul ol {\n  margin-left: 0;\n}\n.lake-engine ol ul li,\n.lake-engine-view ol ul li,\n.lake-engine ul ul li,\n.lake-engine-view ul ul li,\n.lake-engine ol ol li,\n.lake-engine-view ol ol li,\n.lake-engine ul ol li,\n.lake-engine-view ul ol li {\n  margin-left: 2em;\n}\n.lake-engine ol ol[data-lake-indent-new="0"],\n.lake-engine-view ol ol[data-lake-indent-new="0"],\n.lake-engine ul ol[data-lake-indent-new="0"],\n.lake-engine-view ul ol[data-lake-indent-new="0"],\n.lake-engine ol ol[data-lake-indent-new="3"],\n.lake-engine-view ol ol[data-lake-indent-new="3"],\n.lake-engine ul ol[data-lake-indent-new="3"],\n.lake-engine-view ul ol[data-lake-indent-new="3"],\n.lake-engine ol ol[data-lake-indent-new="6"],\n.lake-engine-view ol ol[data-lake-indent-new="6"],\n.lake-engine ul ol[data-lake-indent-new="6"],\n.lake-engine-view ul ol[data-lake-indent-new="6"] {\n  list-style-type: decimal;\n}\n.lake-engine ol ol[data-lake-indent-new="1"],\n.lake-engine-view ol ol[data-lake-indent-new="1"],\n.lake-engine ul ol[data-lake-indent-new="1"],\n.lake-engine-view ul ol[data-lake-indent-new="1"],\n.lake-engine ol ol[data-lake-indent-new="4"],\n.lake-engine-view ol ol[data-lake-indent-new="4"],\n.lake-engine ul ol[data-lake-indent-new="4"],\n.lake-engine-view ul ol[data-lake-indent-new="4"],\n.lake-engine ol ol[data-lake-indent-new="7"],\n.lake-engine-view ol ol[data-lake-indent-new="7"],\n.lake-engine ul ol[data-lake-indent-new="7"],\n.lake-engine-view ul ol[data-lake-indent-new="7"] {\n  list-style-type: lower-alpha;\n}\n.lake-engine ol ol[data-lake-indent-new="2"],\n.lake-engine-view ol ol[data-lake-indent-new="2"],\n.lake-engine ul ol[data-lake-indent-new="2"],\n.lake-engine-view ul ol[data-lake-indent-new="2"],\n.lake-engine ol ol[data-lake-indent-new="5"],\n.lake-engine-view ol ol[data-lake-indent-new="5"],\n.lake-engine ul ol[data-lake-indent-new="5"],\n.lake-engine-view ul ol[data-lake-indent-new="5"],\n.lake-engine ol ol[data-lake-indent-new="8"],\n.lake-engine-view ol ol[data-lake-indent-new="8"],\n.lake-engine ul ol[data-lake-indent-new="8"],\n.lake-engine-view ul ol[data-lake-indent-new="8"] {\n  list-style-type: lower-roman;\n}\n.lake-engine ol ul[data-lake-indent-new="3"],\n.lake-engine-view ol ul[data-lake-indent-new="3"],\n.lake-engine ul ul[data-lake-indent-new="3"],\n.lake-engine-view ul ul[data-lake-indent-new="3"],\n.lake-engine ol ul[data-lake-indent-new="6"],\n.lake-engine-view ol ul[data-lake-indent-new="6"],\n.lake-engine ul ul[data-lake-indent-new="6"],\n.lake-engine-view ul ul[data-lake-indent-new="6"] {\n  list-style-type: disc;\n}\n.lake-engine ol ul[data-lake-indent-new="1"],\n.lake-engine-view ol ul[data-lake-indent-new="1"],\n.lake-engine ul ul[data-lake-indent-new="1"],\n.lake-engine-view ul ul[data-lake-indent-new="1"],\n.lake-engine ol ul[data-lake-indent-new="4"],\n.lake-engine-view ol ul[data-lake-indent-new="4"],\n.lake-engine ul ul[data-lake-indent-new="4"],\n.lake-engine-view ul ul[data-lake-indent-new="4"],\n.lake-engine ol ul[data-lake-indent-new="7"],\n.lake-engine-view ol ul[data-lake-indent-new="7"],\n.lake-engine ul ul[data-lake-indent-new="7"],\n.lake-engine-view ul ul[data-lake-indent-new="7"] {\n  list-style-type: circle;\n}\n.lake-engine ol ul[data-lake-indent-new="2"],\n.lake-engine-view ol ul[data-lake-indent-new="2"],\n.lake-engine ul ul[data-lake-indent-new="2"],\n.lake-engine-view ul ul[data-lake-indent-new="2"],\n.lake-engine ol ul[data-lake-indent-new="5"],\n.lake-engine-view ol ul[data-lake-indent-new="5"],\n.lake-engine ul ul[data-lake-indent-new="5"],\n.lake-engine-view ul ul[data-lake-indent-new="5"],\n.lake-engine ol ul[data-lake-indent-new="8"],\n.lake-engine-view ol ul[data-lake-indent-new="8"],\n.lake-engine ul ul[data-lake-indent-new="8"],\n.lake-engine-view ul ul[data-lake-indent-new="8"] {\n  list-style-type: square;\n}\n.lake-engine li,\n.lake-engine-view li {\n  margin-left: 23px;\n}\n.lake-engine ol,\n.lake-engine-view ol,\n.lake-engine ol[data-lake-indent="3"],\n.lake-engine-view ol[data-lake-indent="3"],\n.lake-engine ol[data-lake-indent="6"],\n.lake-engine-view ol[data-lake-indent="6"] {\n  list-style-type: decimal;\n}\n.lake-engine ol[data-lake-indent="1"],\n.lake-engine-view ol[data-lake-indent="1"],\n.lake-engine ol[data-lake-indent="4"],\n.lake-engine-view ol[data-lake-indent="4"],\n.lake-engine ol[data-lake-indent="7"],\n.lake-engine-view ol[data-lake-indent="7"] {\n  list-style-type: lower-alpha;\n}\n.lake-engine ol[data-lake-indent="2"],\n.lake-engine-view ol[data-lake-indent="2"],\n.lake-engine ol[data-lake-indent="5"],\n.lake-engine-view ol[data-lake-indent="5"],\n.lake-engine ol[data-lake-indent="8"],\n.lake-engine-view ol[data-lake-indent="8"] {\n  list-style-type: lower-roman;\n}\n.lake-engine ul,\n.lake-engine-view ul,\n.lake-engine ul[data-lake-indent="3"],\n.lake-engine-view ul[data-lake-indent="3"],\n.lake-engine ul[data-lake-indent="6"],\n.lake-engine-view ul[data-lake-indent="6"] {\n  list-style-type: disc;\n}\n.lake-engine ul[data-lake-indent="1"],\n.lake-engine-view ul[data-lake-indent="1"],\n.lake-engine ul[data-lake-indent="4"],\n.lake-engine-view ul[data-lake-indent="4"],\n.lake-engine ul[data-lake-indent="7"],\n.lake-engine-view ul[data-lake-indent="7"] {\n  list-style-type: circle;\n}\n.lake-engine ul[data-lake-indent="2"],\n.lake-engine-view ul[data-lake-indent="2"],\n.lake-engine ul[data-lake-indent="5"],\n.lake-engine-view ul[data-lake-indent="5"],\n.lake-engine ul[data-lake-indent="8"],\n.lake-engine-view ul[data-lake-indent="8"] {\n  list-style-type: square;\n}\n.lake-engine ol[data-lake-indent="1"],\n.lake-engine-view ol[data-lake-indent="1"],\n.lake-engine ul[data-lake-indent="1"],\n.lake-engine-view ul[data-lake-indent="1"] {\n  padding-left: 2em;\n}\n.lake-engine ol[data-lake-indent="2"],\n.lake-engine-view ol[data-lake-indent="2"],\n.lake-engine ul[data-lake-indent="2"],\n.lake-engine-view ul[data-lake-indent="2"] {\n  padding-left: 4em;\n}\n.lake-engine ol[data-lake-indent="3"],\n.lake-engine-view ol[data-lake-indent="3"],\n.lake-engine ul[data-lake-indent="3"],\n.lake-engine-view ul[data-lake-indent="3"] {\n  padding-left: 6em;\n}\n.lake-engine ol[data-lake-indent="4"],\n.lake-engine-view ol[data-lake-indent="4"],\n.lake-engine ul[data-lake-indent="4"],\n.lake-engine-view ul[data-lake-indent="4"] {\n  padding-left: 8em;\n}\n.lake-engine ol[data-lake-indent="5"],\n.lake-engine-view ol[data-lake-indent="5"],\n.lake-engine ul[data-lake-indent="5"],\n.lake-engine-view ul[data-lake-indent="5"] {\n  padding-left: 10em;\n}\n.lake-engine ol[data-lake-indent="6"],\n.lake-engine-view ol[data-lake-indent="6"],\n.lake-engine ul[data-lake-indent="6"],\n.lake-engine-view ul[data-lake-indent="6"] {\n  padding-left: 12em;\n}\n.lake-engine ol[data-lake-indent="7"],\n.lake-engine-view ol[data-lake-indent="7"],\n.lake-engine ul[data-lake-indent="7"],\n.lake-engine-view ul[data-lake-indent="7"] {\n  padding-left: 14em;\n}\n.lake-engine ol[data-lake-indent="8"],\n.lake-engine-view ol[data-lake-indent="8"],\n.lake-engine ul[data-lake-indent="8"],\n.lake-engine-view ul[data-lake-indent="8"] {\n  padding-left: 16em;\n}\n.lake-engine span[data-card-type="inline"],\n.lake-engine-view span[data-card-type="inline"] {\n  display: inline-block;\n  text-indent: 0;\n  vertical-align: baseline;\n  white-space: initial;\n}\n.lake-engine span[data-card-type="inline"] span[data-card-element],\n.lake-engine-view span[data-card-type="inline"] span[data-card-element] {\n  display: inline-block;\n}\n.lake-engine span[data-card-type="inline"] span[data-card-element="center"],\n.lake-engine-view span[data-card-type="inline"] span[data-card-element="center"] {\n  vertical-align: bottom;\n}\n.lake-engine span[data-card-type="inline"] span[data-card-element="left"],\n.lake-engine-view span[data-card-type="inline"] span[data-card-element="left"],\n.lake-engine span[data-card-type="inline"] span[data-card-element="right"],\n.lake-engine-view span[data-card-type="inline"] span[data-card-element="right"] {\n  min-width: 1px;\n  text-align: left;\n  -webkit-user-select: text;\n  user-select: text;\n}\n.lake-engine div[data-card-type="block"],\n.lake-engine-view div[data-card-type="block"],\n.lake-engine span[data-card-type="inline"].lake-card-block,\n.lake-engine-view span[data-card-type="inline"].lake-card-block {\n  display: block;\n}\n.lake-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],\n.lake-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],\n.lake-engine span[data-card-type="inline"].lake-card-block > div[data-card-element="body"] > span[data-card-element="left"],\n.lake-engine-view span[data-card-type="inline"].lake-card-block > div[data-card-element="body"] > span[data-card-element="left"],\n.lake-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],\n.lake-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],\n.lake-engine span[data-card-type="inline"].lake-card-block > div[data-card-element="body"] > span[data-card-element="right"],\n.lake-engine-view span[data-card-type="inline"].lake-card-block > div[data-card-element="body"] > span[data-card-element="right"] {\n  bottom: 0;\n  position: absolute;\n  width: 2px;\n  overflow: hidden;\n  outline: none;\n  text-align: left;\n  text-indent: 0;\n  -webkit-box-flex: 0;\n  flex: 0 0 auto;\n  -webkit-user-select: text;\n  user-select: text;\n}\n.lake-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],\n.lake-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],\n.lake-engine span[data-card-type="inline"].lake-card-block > div[data-card-element="body"] > span[data-card-element="left"],\n.lake-engine-view span[data-card-type="inline"].lake-card-block > div[data-card-element="body"] > span[data-card-element="left"] {\n  left: -2px;\n  text-align: left;\n}\n.lake-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],\n.lake-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],\n.lake-engine span[data-card-type="inline"].lake-card-block > div[data-card-element="body"] > span[data-card-element="right"],\n.lake-engine-view span[data-card-type="inline"].lake-card-block > div[data-card-element="body"] > span[data-card-element="right"] {\n  right: -2px;\n  text-align: right;\n}\n.lake-engine p,\n.lake-engine-view p {\n  min-height: 24px;\n}\n.lake-engine span[data-card-element="body"],\n.lake-engine-view span[data-card-element="body"],\n.lake-engine div[data-card-element="body"],\n.lake-engine-view div[data-card-element="body"] {\n  position: relative;\n}\n.lake-engine span[data-card-element="body"] [data-card-element="center"],\n.lake-engine-view span[data-card-element="body"] [data-card-element="center"],\n.lake-engine div[data-card-element="body"] [data-card-element="center"],\n.lake-engine-view div[data-card-element="body"] [data-card-element="center"] {\n  -webkit-user-select: text;\n  user-select: text;\n}\n.lake-engine div[data-lake-card="hr"] div[data-card-element="center"],\n.lake-engine-view div[data-lake-card="hr"] div[data-card-element="center"] {\n  border: 1px solid transparent;\n  padding: 18px 0;\n  border-radius: 2px 2px;\n}\n.lake-engine div[data-lake-card="hr"] div[data-card-element="center"] hr,\n.lake-engine-view div[data-lake-card="hr"] div[data-card-element="center"] hr {\n  box-sizing: border-box;\n  position: absolute;\n  top: 50%;\n  left: 0;\n  margin-top: -2px;\n  width: 100%;\n  height: 2px;\n  background-color: #e8e8e8;\n  padding: 0;\n  border: 1px solid transparent;\n}\n.lake-engine {\n  position: relative;\n  background-color: #FFFFFF;\n}\n.lake-engine div[data-lake-card="hr"] div[data-card-element="center"]:hover,\n.lake-engine div[data-lake-card="hr"] div[data-card-element="center"].lake-hr-active {\n  background-color: #f4f4f4;\n}\n.lake-engine div[data-lake-card="hr"] div[data-card-element="center"]:hover hr,\n.lake-engine div[data-lake-card="hr"] div[data-card-element="center"].lake-hr-active hr {\n  background-color: #d9d9d9;\n}\n[data-lake-card="hr"] .lake-hr-select {\n  background-color: rgba(27, 162, 227, 0.2);\n}\n[data-lake-card="hr"] .lake-hr-select hr {\n  background-color: rgba(27, 162, 227, 0.2);\n}\n.lake-anchor-button {\n  position: absolute;\n  width: 24px;\n  height: 24px;\n  line-height: 24px;\n  text-align: center;\n  font-size: 14px;\n  display: block;\n  background: rgba(255, 255, 255, 0.9);\n  color: #BFBFBF;\n  border-radius: 2px 2px;\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  opacity: 0;\n  visibility: hidden;\n  -webkit-transition: opacity 0.3s ease-in-out;\n  transition: opacity 0.3s ease-in-out;\n}\n.lake-anchor-button.lake-anchor-button-active {\n  opacity: 1;\n  visibility: visible;\n}\n.lake-anchor-button .lake-icon {\n  width: 18px;\n}\n.lake-anchor-button:hover {\n  background: #f4f4f4;\n  color: #595959;\n}\n.lake-card-block-max > [data-card-element="body"] {\n  overflow: hidden;\n}\n.lake-card-block-max > [data-card-element="body"] > .lake-card-toolbar {\n  display: none;\n}\n.lake-card-block-max > [data-card-element="body"] > [data-card-element="center"] {\n  background: #FAFAFA;\n  position: fixed !important;\n  top: 56px;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1032;\n  overflow: auto;\n}\n.lake-card-block-max > [data-card-element="body"] > [data-card-element="center"].edit {\n  top: 96px;\n}\n.lake-card-block-max .header {\n  position: fixed !important;\n  top: 0;\n  right: 0;\n  left: 0;\n  z-index: 1032;\n  height: 56px;\n  background: #fff;\n  border-bottom: 1px solid #e8e8e8;\n}\n.lake-card-block-max .header .header-crumb {\n  float: left;\n  line-height: 32px;\n  display: flex;\n  height: 100%;\n  align-items: center;\n}\n.lake-card-block-max .header .header-crumb a {\n  color: #595959;\n}\n.lake-card-block-max .header .header-crumb a:hover {\n  color: #595959;\n  cursor: pointer;\n}\n.lake-card-block-max .header .header-crumb .split {\n  display: inline-block;\n  vertical-align: middle;\n  padding: 0 15px;\n  font-size: 20px;\n  padding-right: 8px;\n  font-weight: 200;\n}\n.lake-card-block-max .header .header-crumb .split + a {\n  display: inline-block;\n  vertical-align: middle;\n}\n.lake-card-block-max .header .header-crumb .split + a:hover {\n  color: #8C8C8C;\n}\nblockquote.lake-alert {\n  margin: 0;\n  padding: 10px;\n  border: 1px solid #abd2da;\n  background-color: #e8f7ff;\n  border-radius: 3px;\n  color: #262626;\n  opacity: 1;\n}\nblockquote.lake-alert-info {\n  border: 1px solid #abd2da;\n  background-color: #e8f7ff;\n}\nblockquote.lake-alert-warning {\n  border: 1px solid #e0d1b1;\n  background-color: #fffbe6;\n}\nblockquote.lake-alert-danger {\n  border: 1px solid #deb8be;\n  background-color: #fff3f3;\n}\nblockquote.lake-alert-success {\n  border: 1px solid #c2d2b5;\n  background-color: #edf9e8;\n}\nblockquote.lake-alert-tips {\n  border: 1px solid #c3c3c3;\n  background-color: #fff6b6;\n}\n.lake-typography-traditional {\n  line-height: 1.74;\n  font-size: 14px;\n  color: #262626;\n  letter-spacing: 0.05em;\n}\n.lake-typography-traditional p {\n  margin: 0;\n}\n.lake-typography-traditional h1,\n.lake-typography-traditional h2,\n.lake-typography-traditional h3,\n.lake-typography-traditional h4,\n.lake-typography-traditional h5,\n.lake-typography-traditional h6 {\n  margin-top: 0;\n  margin-bottom: 0;\n  word-spacing: 1px;\n  color: #262626;\n  font-weight: bold;\n  padding: 0;\n}\n.lake-typography-traditional h1 {\n  font-size: 28px;\n  line-height: 36px;\n  padding: 7px 0;\n}\n.lake-typography-traditional h2 {\n  font-size: 24px;\n  line-height: 32px;\n  padding: 7px 0;\n}\n.lake-typography-traditional h3 {\n  font-size: 20px;\n  line-height: 28px;\n  padding: 7px 0;\n}\n.lake-typography-traditional h4 {\n  font-size: 16px;\n  line-height: 24px;\n  padding: 7px 0;\n}\n.lake-typography-traditional h5 {\n  font-size: 14px;\n  line-height: 24px;\n  padding: 7px 0;\n}\n.lake-typography-traditional h6 {\n  font-size: 14px;\n  line-height: 24px;\n  padding: 7px 0;\n  font-weight: normal;\n}\n.lake-typography-classic {\n  line-height: 1.74;\n  font-size: 15px;\n  color: #404040;\n  letter-spacing: 0.008em;\n}\n.lake-typography-classic p {\n  margin: 0;\n}\n.lake-typography-classic h1,\n.lake-typography-classic h2,\n.lake-typography-classic h3,\n.lake-typography-classic h4,\n.lake-typography-classic h5,\n.lake-typography-classic h6 {\n  margin-top: 0;\n  margin-bottom: 0;\n  word-spacing: 1px;\n  color: #262626;\n  font-weight: bold;\n  padding: 0;\n}\n.lake-typography-classic h1 {\n  font-size: 28px;\n  line-height: 36px;\n  margin: 26px 0 10px 0;\n}\n.lake-typography-classic h2 {\n  font-size: 24px;\n  line-height: 32px;\n  margin: 21px 0 5px 0;\n}\n.lake-typography-classic h3 {\n  font-size: 20px;\n  line-height: 28px;\n  margin: 16px 0 5px 0;\n}\n.lake-typography-classic h4 {\n  font-size: 16px;\n  line-height: 24px;\n  margin: 10px 0 5px 0;\n}\n.lake-typography-classic h5 {\n  font-size: 15px;\n  line-height: 24px;\n  margin: 8px 0 5px 0;\n}\n.lake-typography-classic h6 {\n  font-size: 15px;\n  line-height: 24px;\n  font-weight: normal;\n  margin: 8px 0 5px 0;\n}\n.lake-lineheight-1 {\n  line-height: 1;\n}\n.lake-lineheight-115 {\n  line-height: 1.15;\n}\n.lake-lineheight-15 {\n  line-height: 1.5;\n}\n.lake-lineheight-17 {\n  line-height: 1.74;\n}\n.lake-lineheight-2 {\n  line-height: 2;\n}\n.lake-lineheight-25 {\n  line-height: 2.5;\n}\n.lake-lineheight-3 {\n  line-height: 3;\n}\n.lake-selected .lake-block-fallback {\n  border-color: #1890FF;\n}\n.lake-block-fallback-crown-icon {\n  width: 32px;\n  height: 32px;\n}\n.lake-block-fallback {\n  cursor: default;\n  padding: 32px;\n  background: #fafafa;\n  border: 1px solid #d8d8d8;\n  border-radius: 4px;\n}\n.lake-block-fallback .inner-content {\n  display: flex;\n  align-items: center;\n}\n.lake-block-fallback .inner-tips {\n  margin-left: 20px;\n  color: #8c8c8c;\n}\n.lake-block-fallback .main-tip {\n  font-size: 14px;\n  line-height: 20px;\n  margin-bottom: 4px;\n}\n.lake-block-fallback .sub-tip {\n  font-size: 12px;\n  line-height: 17px;\n}\n.lake-inline-fallback {\n  display: inline-flex;\n  vertical-align: middle;\n  align-items: center;\n  cursor: default;\n  font-size: 14px;\n  line-height: 14px;\n  color: #8c8c8c;\n  padding: 0 8px;\n  position: relative;\n}\n.lake-inline-fallback.show .fallback-tooltip {\n  left: -4px;\n  opacity: 1;\n  transition: opacity 0.1s 0.3s ease-in;\n}\n.lake-inline-fallback .lake-inline-fallback-icon {\n  width: 16px;\n  height: 16px;\n  margin-right: 6px;\n}\n.lake-inline-fallback .fallback-tooltip {\n  position: absolute;\n  top: 100%;\n  left: -9999994px;\n  max-width: unset!important;\n  background-color: #fff;\n  user-select: none;\n  opacity: 0;\n}\n.lake-inline-fallback .fallback-tooltip .ant-tooltip-inner {\n  background-color: #fff;\n  color: #8c8c8c;\n  font-size: 14px;\n  line-height: 20px;\n  white-space: nowrap;\n}\n.lake-inline-fallback .fallback-tooltip .ant-tooltip-arrow:before {\n  background-color: #fff;\n}\n');var ge="data-lake-element",ve="anchor",ye="focus",be="cursor",ke="span[".concat(ge,"=").concat(ve,"]"),we="span[".concat(ge,"=").concat(ye,"]"),xe="span[".concat(ge,"=").concat(be,"]"),_e="data-lake-card",Ee="data-ready-card",Ce="data-card-type",Oe="data-card-element",Se="div[".concat(_e,"],span[").concat(_e,"]"),Re="div[".concat(Ee,"],span[").concat(Ee,"]"),je="span[".concat(Oe,"=left]"),Pe="div[".concat(Oe,"=center],span[").concat(Oe,"=center]"),Ae="span[".concat(Oe,"=right]"),Te=["http:","https:","data:","dingtalk:","ftp:","mailto:","fleamarket:","alipays:"];function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;("number"!=typeof e||e<5)&&(e=5);for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function Me(e,t){t=void 0===t?",":t;var n,r={},a=Array.isArray(e)?e:e.split(t);return Object.keys(a).forEach((function(e){var t=a[e];if(n=/^(\d+)\.\.(\d+)$/.exec(t))for(var o=parseInt(n[1],10);o<=parseInt(n[2],10);o++)r[o.toString()]=!0;else r[t]=!0})),r}function Ne(e){return e.split("-").map((function(e,t){return t>0?e.charAt(0).toUpperCase()+e.substr(1):e})).join("")}function Le(e){var t=function(e){var t=parseInt(e,10).toString(16).toUpperCase();return t.length>1?t:"0"+t};return e.replace(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/gi,(function(e,n,r,a){return"#"+t(n)+t(r)+t(a)}))}function Ie(e){return"string"!=typeof e?e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function Be(e){return"string"!=typeof e?e:e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")}function ze(e){return"string"==typeof e&&!(e=e.toLowerCase()).startsWith("data:text/html")&&(!!Te.some((function(t){return e.startsWith(t)}))||!(!e.startsWith("./")&&!e.startsWith("/"))||e.indexOf(":")<0)}function Fe(e){var t;return e&&(t=/^(-?\d+)/.exec(e))?parseInt(t[1],10):0}function Ue(e){for(var t,n={},r=/\s+(?:([\w\-:]+)|(?:([\w\-:]+)=([^\s"'<>]+))|(?:([\w\-:"]+)="([^"]*)")|(?:([\w\-:"]+)='([^']*)'))(?=(?:\s|\/|>)+)/g;t=r.exec(e);){var a=(t[1]||t[2]||t[4]||t[6]).toLowerCase(),o=(t[2]?t[3]:t[4]?t[5]:t[7])||"";n[a]=o}return n}function Ve(e){e=e.replace(/&quot;/g,'"');for(var t,n={},r=/\s*([\w\-]+)\s*:([^;]*)(;|$)/g;t=r.exec(e);){var a=t[1].toLowerCase().trim(),o=Le(t[2]).trim();n[a]=o}return n}function qe(e){return e.replace(/<anchor\s*\/>/gi,"<span ".concat(ge,'="').concat(ve,'"></span>')).replace(/<focus\s*\/>/gi,"<span ".concat(ge,'="').concat(ye,'"></span>')).replace(/<cursor\s*\/>/gi,"<span ".concat(ge,'="').concat(be,'"></span>')).replace(/(<card\s+[^>]+>).*?<\/card>/gi,(function(e,t){var n=Ue(t),r=n.type,a=n.name,o=n.value,i="inline"===n.type?"span":"div",c=["<".concat(i)];return c.push(" ".concat(Ce,'="').concat(r,'"')),c.push(" ".concat(Ee,'="').concat(a,'"')),void 0!==o&&c.push(" ".concat("data-card-value",'="').concat(o,'"')),c.push("></".concat(i,">")),c.join("")}))}function He(e,t){var n=e.replace(/#.*$/,"").replace(/\/edit$/,"");return"".concat(n,"#").concat(t)}function We(e){if(!e)return e;var t=e.replace(/<(anchor|focus|cursor)[^>]*?\/>/gi,"");return/^<p(\s[^>]*?)><br \/><\/p>$/i.test(t)?e.replace(RegExp.$1,""):e}function Ye(e){try{e=encodeURIComponent(JSON.stringify(e))}catch(t){e=""}return"data:".concat(e)}function Ge(e){try{e.startsWith("data:")?(e=e.substr(5),e=JSON.parse(decodeURIComponent(e))):e=JSON.parse(e)}catch(t){e={}}return e}var Xe={md5:function(e){return f()(e)},toMap:Me,toCamel:Ne,toHex:Le,escape:Ie,unescape:Be,escapeDots:function(e){return"string"!=typeof e?e:e.replace(/\./g,"&dot;")},unescapeDots:function(e){return"string"!=typeof e?e:e.replace(/&dot;/g,".")},validUrl:ze,sanitizeUrl:function(e){return ze(e)?e:""},addUnit:function(e,t){return t=t||"px",e&&/^-?\d+(?:\.\d+)?$/.test(e)?e+t:e},removeUnit:Fe,getAttrMap:Ue,getCssMap:Ve,removeBookmarkTags:function(e){return e.replace(/<anchor\s*\/>/gi,"").replace(/<focus\s*\/>/gi,"").replace(/<cursor\s*\/>/gi,"")},transformCustomTags:qe,getAnchorUrl:He,isCurrentPageUrl:function(e,t){if(t.startsWith("#"))return!0;var n=e.replace(/#.*$/,"").replace(/\/edit$/,"");return!!t.startsWith(n)&&(""===(t=t.substr(n.length))||t.startsWith("#"))},encodeCardValue:Ye,decodeCardValue:Ge,escapeRegExp:function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},protocols:Te,randomId:De,formatEngineValue:We},Ke=Me("html,head,body,h1,h2,h3,h4,h5,h6,p,div,pre,blockquote,hr,ul,ol,li,table,thead,tbody,colgroup,col,tr,td,th,video,iframe"),Ze=Me("a,br,img"),$e=Me("b,strong,i,em,u,del,s,strike,code,mark,span,sub,sup"),Qe=Me("br,hr,img,col,anchor,focus,cursor"),Je=Me("table,thead,tbody,colgroup,col,tr,td,th,ul,ol,li"),et=Me("h1,h2,h3,h4,h5,h6,p"),tt=Me("h1,h2,h3,h4,h5,h6"),nt=Me("h1,h2,h3,h4,h5,h6,p,blockquote,ul,ol"),rt=Me("table,thead,tbody,tr,td,th"),at="data-lake-element",ot="[".concat(at,"=").concat("root","]"),it=function(){function e(t){l()(this,e),this.engine=t,this.listeners={}}return u()(e,[{key:"on",value:function(e,t,n){this.listeners[e]&&!n||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"off",value:function(e,t){var n=this.listeners[e];if(n)for(var r=0;r<n.length;r++)if(n[r]===t){n.splice(r,1);break}}},{key:"trigger",value:function(){var e=Array.prototype.slice.call(arguments),t=e.shift(),n=this.listeners[t];if(n){for(var r,a=0;a<n.length&&!1!==(r=n[a].apply(this.engine,e));a++);return r}}}]),e}(),ct={p:!0,ol:!0,ul:!0,li:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0};function lt(e,t){var n=t.nodeName,r=t.getAttribute("data-lake-id");if(r)return r;for(var a=e.querySelectorAll(n),o=0,i=a.length;o<i;o++)if(a[o]===t)return pt(t,o);return null}function st(e){Object.keys(ct).forEach((function(t){for(var n=e.querySelectorAll(t),r=0,a=n.length;r<a;r++){var o=n[r];o.getAttribute("data-lake-id")||pt(o,r)}}))}function ut(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t){var n=e.getAttribute("data-lake-id");if(n)return n}var r=f()("".concat(Math.random(),"_").concat(Date.now()));return e.setAttribute("data-lake-id",r),r}function dt(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.nodeType!==Node.ELEMENT_NODE&&e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE||Object.keys(ct).forEach((function(n){for(var r=e.querySelectorAll(n),a=0,o=r.length;a<o;a++)ut(r[a],t)}))}function ft(e){return!!ct[e.toLowerCase()]}function pt(e,t){var n=e.nodeName.toLowerCase(),r=f()("".concat(n,"_").concat(t,"_").concat(e.innerText))+"_"+n+"_"+t;return e.setAttribute("data-lake-id",r),r}var ht={generateElementID:lt,generateElementIDForDescendant:st,generateRandomID:ut,needMarkElementID:ft,generateRandomIDForDescendant:dt};function mt(e){return e?e.ownerDocument||e.document||e:document}function gt(e){if(!e)return window;var t=mt(e);return t.parentWindow||t.defaultView||window}function vt(e,t){return e.nodeType===Node.ELEMENT_NODE&&(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector).call(e,t)}var yt=function(){function e(t,n){l()(this,e),t.nodeType&&(t=[t]),this.events=[];for(var r=0;r<t.length;r++)this[r]=t[r],this.events[r]=new it;this.length=t.length,this.length>0&&(this.doc=mt(n),this.root=n,this.name="string"==typeof this[0].nodeName?this[0].nodeName.toLowerCase():"",this.type=this.length>0?this[0].nodeType:null,this.win=gt(this[0]))}return u()(e,[{key:"toArray",value:function(){var e=[];return this.each((function(t){e.push(t)})),e}},{key:"removeFontSize",value:function(){var e=this.attr("class");e&&this.attr("class",e.replace(/lake-fontsize-[\d]{1,2}/,""))}},{key:"isElement",value:function(){return this.type===Node.ELEMENT_NODE}},{key:"isText",value:function(){return this.type===Node.TEXT_NODE}},{key:"isBlock",value:function(){return"inline"!==this.attr(Ce)&&!!Ke[this.name]}},{key:"isInline",value:function(){return!!Ze[this.name]}},{key:"isRootBlock",value:function(){return!!nt[this.name]}},{key:"isSimpleBlock",value:function(){if(!this.isBlock())return!1;for(var e=this.first();e;){if(e.isBlock())return!1;e=e.next()}return!0}},{key:"isMark",value:function(){return!!$e[this.name]}},{key:"isCard",value:function(){return!!this.attr(Ce)}},{key:"isBlockCard",value:function(){return"block"===this.attr(Ce)}},{key:"isVoid",value:function(){return!!Qe[this.name]}},{key:"isSolid",value:function(){return!!Je[this.name]}},{key:"isHeading",value:function(){return!!et[this.name]}},{key:"isTitle",value:function(){return!!tt[this.name]}},{key:"isTable",value:function(){return!!rt[this.name]}},{key:"isRoot",value:function(){return"root"===this.attr(at)}},{key:"isEditable",value:function(){return!this.isRoot()&&this.closest(ot).length>0}},{key:"each",value:function(e){for(var t=0;t<this.length&&!1!==e(this[t],t);t++);return this}},{key:"eq",value:function(t){return this[t]?new e(this[t]):void 0}},{key:"index",value:function(){for(var e=this[0].previousSibling,t=0;e&&e.nodeType===Node.ELEMENT_NODE;)t++,e=e.previousSibling;return t}},{key:"parent",value:function(){var t=this[0].parentNode;return t?new e(t):void 0}},{key:"children",value:function(t){if(0===this.length)return new e([]);var n=this[0].childNodes;if(t){for(var r=[],a=0;a<n.length;a++){var o=n[a];vt(o,t)&&r.push(o)}return new e(r)}return new e(n)}},{key:"first",value:function(){if(0!==this.length){var t=this[0].firstChild;return t?new e(t):void 0}}},{key:"last",value:function(){if(0!==this.length){var t=this[0].lastChild;return t?new e(t):void 0}}},{key:"prev",value:function(){if(0!==this.length){var t=this[0].previousSibling;return t?new e(t):void 0}}},{key:"next",value:function(){if(0!==this.length){var t=this[0].nextSibling;return t?new e(t):void 0}}},{key:"prevElement",value:function(){if(0!==this.length){var t=this[0].previousElementSibling;return t?new e(t):void 0}}},{key:"nextElement",value:function(){if(0!==this.length){var t=this[0].nextElementSibling;return t?new e(t):null}}},{key:"contains",value:function(e){if(0!==this.length)return function(e,t){if(9===e.nodeType&&9!==t.nodeType)return!0;for(;t=t.parentNode;)if(t===e)return!0;return!1}(this[0],e[0]?e[0]:e)}},{key:"find",value:function(t){var n=[];return this[0]&&this.isElement()&&(n=this[0].querySelectorAll(t)),new e(n)}},{key:"closest",value:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e.parentNode},r=[],a=this[0];a;){if(vt(a,t))return r.push(a),new e(r);a=n(a)}return new e(r)}},{key:"on",value:function(e,t,n){var r=this;return this.each((function(a,o){a.addEventListener(e,t,n||!1),r.events[o].on(e,t)})),this}},{key:"getBoundingClientRect",value:function(e){var t=this[0];if(t&&t.getBoundingClientRect){var n=t.getBoundingClientRect(),r=document.documentElement.clientTop,a=document.documentElement.clientLeft;return{top:n.top-r,bottom:n.bottom-r,left:n.left-a,right:n.right-a}}return e||null}},{key:"off",value:function(e,t){var n=this;return this.each((function(r,a){r.removeEventListener(e,t,!1),n.events[a].off(e,t)})),this}},{key:"removeAllEvents",value:function(){var e=this;return this.each((function(t,n){e.events[n]&&Object.keys(e.events[n].listeners).forEach((function(r){for(var a=e.events[n].listeners[r],o=0;o<a.length;o++)t.removeEventListener(r,a[o],!1)}))})),this.events=[],this}},{key:"offset",value:function(){var e=this[0].getBoundingClientRect();return{top:e.top,left:e.left}}},{key:"attr",value:function(e,t){var n=this;return void 0===e?Ue(this[0].cloneNode(!1).outerHTML):"object"===i()(e)?(Object.keys(e).forEach((function(t){var r=e[t];n.attr(t,r)})),this):void 0===t?this.length>0&&this.isElement()?this[0].getAttribute(e):"":(this.each((function(n){n.setAttribute(e,t)})),this)}},{key:"removeAttr",value:function(e){return this.each((function(t){t.removeAttribute(e)})),this}},{key:"hasClass",value:function(e){if(this[0]&&this[0].classList)for(var t=0;t<this[0].classList.length;t++)if(this[0].classList[t]===e)return!0;return!1}},{key:"addClass",value:function(e){return this.each((function(t){t.classList.add(e)})),this}},{key:"removeClass",value:function(e){return this.each((function(t){t.classList.remove(e)})),this}},{key:"css",value:function(e,t){var n=this;return void 0===e?Ve(this.attr("style")||""):"object"===i()(e)?(Object.keys(e).forEach((function(t){var r=e[t];n.css(t,r)})),this):void 0===t?0===this.length||this.isText()?"":this[0].style[Ne(e)]||function(e,t){var n=gt(e),r=Ne(t);return n.getComputedStyle(e,null)[r]}(this[0],e)||"":(this.each((function(n){n.style[Ne(e)]=t})),this)}},{key:"width",value:function(){var e=this.css("width");return"auto"===e&&(e=this[0].offsetWidth),parseFloat(e)||0}},{key:"height",value:function(){var e=this.css("height");return"auto"===e&&(e=this[0].offsetHeight),parseFloat(e)||0}},{key:"html",value:function(e){return void 0===e?this.length>0?this[0].innerHTML:"":(this.each((function(t){t.innerHTML=e,dt(t)})),this)}},{key:"htmlKeepID",value:function(e){return void 0===e?this.length>0?this[0].innerHTML:"":(this.each((function(t){t.innerHTML=e})),this)}},{key:"text",value:function(e){return void 0===e?this.length>0?this[0].textContent:"":(this.each((function(t){t.textContent=e})),this)}},{key:"show",value:function(e){return void 0===e&&(e=this._originDisplay||""),"none"===e&&(e=""),"none"!==this.css("display")?this:this.css("display",e)}},{key:"hide",value:function(){return this[0]?(this._originDisplay=this[0].style.display,this.css("display","none")):self}},{key:"remove",value:function(){var e=this;return this.each((function(t,n){t.parentNode&&(t.parentNode.removeChild(t),delete e[n])})),this.length=0,this}},{key:"empty",value:function(){return this.each((function(e){for(var t=e.firstChild;t;){if(!e.parentNode)return;var n=t.nextSibling;t.parentNode.removeChild(t),t=n}})),this}},{key:"clone",value:function(t){var n=this[0].cloneNode(t);return dt(n,!0),ft(n.nodeName)&&ut(n,!0),new e(n)}},{key:"cloneKeepID",value:function(t){return new e(this[0].cloneNode(t))}},{key:"prepend",value:function(e){var t=this;return this.each((function(n){var r=bt(e,t.root);n.firstChild?n.insertBefore(r[0],n.firstChild):n.appendChild(r[0])})),this}},{key:"append",value:function(e){var t=this;return this.each((function(n){for(var r=bt(e,t.root),a=0;a<r.length;a++){var o=r[a];"string"==typeof e?n.appendChild(o.cloneNode(!0)):n.appendChild(o)}})),this}},{key:"before",value:function(e){var t=this;return this.each((function(n){var r=bt(e,t.root);n.parentNode.insertBefore(r[0],n)})),this}},{key:"after",value:function(e){var t=this;return this.each((function(n){var r=bt(e,t.root);n.nextSibling?n.parentNode.insertBefore(r[0],n.nextSibling):n.parentNode.appendChild(r[0])})),this}},{key:"replaceWith",value:function(t){var n=this,r=[];return this.each((function(e){var a=bt(t,n.root)[0];e.parentNode.replaceChild(a,e),r.push(a)})),new e(r)}}]),e}();function bt(e,t){if(t=t||document,!e)return[];if(e===window)return[e];if("string"==typeof e){var n=e.length;if("@"===e.charAt(0)&&(e=e.substr(1)),e.length!==n||/<.+>/.test(e)){var r=0===e.indexOf("<tr"),a=0===e.indexOf("<td");e=(e=e.trim()).replace(/<!--[^>]*-->/g,""),r&&(e="<table><tbody>".concat(e,"</tbody></table>")),a&&(e="<table><tbody><tr>".concat(e,"</tr></tbody></table>"));var o=document.createElement("div");return o.innerHTML=e,dt(o),r?o.querySelector("tbody").childNodes:a?o.querySelector("tr").childNodes:o.childNodes}return t.querySelectorAll(e)}if(e.constructor===NodeList)return e;if(void 0!==e.length&&e.each){var i=[];return e.each((function(e){i.push(e)})),i}if(Array.isArray(e))return e;if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE){for(var c=[],l=e.firstChild;l;)c.push(l),l=l.nextSibling;return c}return[e]}function kt(e,t){var n=bt(e,t);return new yt(n,t)}var wt=function(e,t){e=kt(e),t=kt(t).clone(!1);for(var n=e.first();n;){var r=n.next();t.append(n),n=r}return e.replaceWith(t)},xt="data-lake-indent",_t={blockquote:3,h1:2,h2:2,h3:2,h4:2,h5:2,h6:2,ul:2,ol:2,li:2,p:1};function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ot(e){return e?e.ownerDocument||e.document||e:document}function St(e){if(!e)return window;var t=Ot(e);return t.parentWindow||t.defaultView||window}function Rt(e,t,n){e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(e=kt(e)[0]),n=void 0===n||n,t(e),function e(r){for(var a=n?r.firstChild:r.lastChild;a;){var o=n?a.nextSibling:a.previousSibling,i=t(a);if(!1===i)return;kt(a).attr(_e)||kt(a).attr(Ee)||!0===i||e(a),a=o}}(e)}function jt(e){var t=[];return Rt(e,(function(e){return t.push(e)})),t.shift(),t}function Pt(e,t){return e?t?e.trim().replace(/\blake-fontsize-\d+/g,"lake-fontsize").split(/\s+/):e.trim().split(/\s+/):[]}function At(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e=kt(e),t=kt(t),e.name!==t.name)return!1;var r=e.attr();delete r.style;var a=t.attr();delete a.style;var o=e.css(),i=t.css();delete r.class;var c=Pt(e[0].className,!n);delete a.class;var l=Pt(t[0].className,!n);return 0===Object.keys(r).length&&0===Object.keys(a).length&&0===Object.keys(o).length&&0===Object.keys(i).length&&0===c.length&&0===l.length||Object.keys(r).length===Object.keys(a).length&&Object.keys(o).length===Object.keys(i).length&&c.length===l.length&&!!Object.keys(r).every((function(e){return a[e]}))&&!!Object.keys(o).every((function(e){return n?i[e]===o[e]:i[e]}))&&c.every((function(e){return-1!==l.indexOf(e)}))}function Tt(e,t){if((e=kt(e)).isElement()){if(e.attr(_e)||e.find(Se).length>0)return!1;if(e.attr(Ee)||e.find(Re).length>0)return!1;if("br"!==e.name&&e.isVoid())return!1;if(e.find("hr,img,table").length>0)return!1;if(e.find("br").length>1)return!1}var n=e.isText()?e[0].nodeValue:e.text();return n=(n=n.replace(/\u200B/g,"")).replace(/\r\n|\n/,""),t&&(n=n.trim()),""===n}function Dt(e){var t=e.childNodes;if(0===t.length)return!0;for(var n=0,r=t.length;n<r;n++){var a=t[n];if(a.nodeType===Node.TEXT_NODE){if(""!==a.data.replace(/\u200b/g,""))return!1}else if(a.nodeType===Node.ELEMENT_NODE){if(a.hasAttribute(_e))return!1;if(!Dt(a))return!1}}return!0}function Mt(e){return Tt(e,!0)}function Nt(e){Rt(e,(function(e){if(e.nodeType===Node.TEXT_NODE){var t=e.nodeValue;if(2===t.length&&!(8203===t.charCodeAt(1)&&e.nextSibling&&e.nextSibling.nodeType===Node.ELEMENT_NODE&&[ve,ye,be].indexOf(e.nextSibling.getAttribute(ge))>=0)&&8203===t.charCodeAt(0)){var n=e.splitText(1);n.parentNode.removeChild(n.previousSibling)}}}))}function Lt(e){var t=e.first();t&&"br"===t.name&&e.children().length>1&&t.remove();var n=e.last();n&&"br"===n.name&&e.children().length>1&&n.remove()}function It(e){e.normalize()}function Bt(e){return!(!e||!e[0])&&e.isCard()&&("checkbox"===e.attr("data-lake-card")||"checkbox"===e.attr("data-ready-card"))}function zt(e){switch(e.name){case"li":return Bt(e.first())||e.hasClass("lake-list-task");case"ul":return e.hasClass("lake-list");default:return!1}}function Ft(e,t){return e.name===t.name&&zt(e)===zt(t)&&(parseInt(e.attr(xt),10)||0)===(parseInt(t.attr(xt),10)||0)}function Ut(e,t){if(!_t[e.name]||!_t[t.name])return t;if(_t[e.name]>_t[t.name])return e;if(["ul","ol"].includes(e.name)&&["ul","ol"].includes(t.name)){var n=parseInt(t.attr(xt),10)||0,r=parseInt(e.attr(xt),10)||0,a=r?r+1:n+1;t.attr(xt,a)}return t}function Vt(e,t){for(var n,r,a,o,i=e[0].parentNode;i!==t;){if(i=kt(i),e.isCard())i.before(e);else if(n=i.name,r=e.name,["ol","ul"].includes(n)&&"li"===r||"blockquote"===n&&nt[r]&&"blockquote"!==r){var c=i.clone(!1);c.append(e),e=c,i.before(e)}else{var l=Ut(i,e);e=wt(e,l.clone(!1)),i.before(e)}i.first()||i.remove(),i=e[0].parentNode}"pre"===e.name&&(o=(a=e).first())&&"code"!==o.name&&(a.html().split(/\r?\n/).forEach((function(e){""===(e=e.replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;").trim())&&(e="<br />"),a.before("<p>".concat(e,"</p>"))})),a.remove())}function qt(e,t){t=t||e;for(var n=(e.type||e.nodeType)===Node.DOCUMENT_FRAGMENT_NODE,r=n?kt(e.firstChild):e.first(),a=n?kt("<p />"):e.clone(!1);r;){var o=r.next();if(r.isBlockCard()||r.isTable()||r.isSimpleBlock())Vt(r,t);else if(r.isBlock())qt(r,t);else{var i=a.clone(!1),c="li"===i.name;for(r.before(i);r;){o=r.next();var l="br"===r.name&&!c;if(i.append(r),l||!o||o.isBlock())break;r=o}Lt(i),Vt(i,t)}r=o}(e.first?e.first():e.firstChild)||e.remove()}function Ht(e,t){for(var n=t.first();n;){var r=n.next();e.append(n),n=r}t.remove()}function Wt(e){for(var t=e.firstChild;t;){for(var n=(t=kt(t)).next();n&&t.name===n.name&&("blockquote"===t.name||["ul","ol"].includes(t.name)&&Ft(t,n));){var r=n.next();Ht(t,n),Wt(t[0]),n=r}t=n}}function Yt(e,t){for(var n=e.parentNode;n;){if(n===t)return!0;n=n.parentNode}return!1}function Gt(e){var t=0;if(e){var n=e.parentNode;Array.from(n.childNodes).forEach((function(n,r){n===e&&(t=r)}))}return t}function Xt(e,t){for(var n=0,r=e;void 0!==t[n]&&r.childNodes[t[n]];)r=r.childNodes[t[n]],n++;return r}function Kt(e,t){if(!e||!e.parentNode)return null;for(;e.parentNode!==t;){if(!e.parentNode)return null;e=e.parentNode}return e}var Zt={getDocument:Ot,getWindow:St,walkTree:Rt,fetchAllChildren:jt,equalNode:At,isEmptyNode:Tt,isEmptyNodeWithTrim:Mt,isLikeEmptyNode:Dt,removeZeroWidthSpace:Nt,removeSideBr:Lt,isCheckbox:Bt,isTaskListBlock:zt,isSameList:Ft,flatten:qt,join:Wt,normalize:function(e){qt(e),Wt(e)},removeMinusStyle:function(e,t){e.isBlock()&&(parseInt(e.css(t),10)||0)<0&&e.css(t,"")},inside:Yt,getIndex:Gt,getParentInContainer:Kt,combinTextNode:It,getChildByPath:Xt},$t=y()("engine:common"),Qt={log:function(){var e=Array.prototype.slice.call(arguments);if(e[0]&&e[0].editArea){var t=e.shift(),n=t.editArea.closest("[data-lake-card]").length>0?"sub engine":"main engine";e.unshift(n)}$t.apply(this,e)}},Jt=a.ua.edge,en=a.ua.safari;function tn(e){return!(!e||"[object Function]"!==Object.prototype.toString.call(e))}function nn(e){return"inline"===e.attr(Ce)&&"block"===e.css("display")}function rn(e){var t=e.getClientRects().item(0);return t||(t=e.getBoundingClientRect()),t}function an(e){var t=function(t,n,r){3===t.nodeType&&(0===n?r?e.setStartBefore(t):e.setEndBefore(t):n===t.nodeValue.length&&(r?e.setStartAfter(t):e.setEndAfter(t)))};t(e.startContainer,e.startOffset,!0),t(e.endContainer,e.endOffset,!1)}function on(e){var t=function(t,n,r){if(1===t.nodeType){var a,o,i,c,l=t.childNodes;0!==l.length&&(n>0&&(a=l[n-1]),n<l.length&&(o=l[n]),a&&3===a.nodeType&&(c=(i=a).nodeValue.length),o&&3===o.nodeType&&(i=o,c=0),i&&(r?e.setStart(i,c):e.setEnd(i,c)))}};t(e.startContainer,e.startOffset,!0),t(e.endContainer,e.endOffset,!1)}function cn(e,t){an(e);var n=function(n,r,a){var o;if(!((n=kt(n)).type===Node.TEXT_NODE||n.isSolid()||!t&&n.isBlock()||n.isRoot()))if(0===r){for(;!n.prev()&&(o=n.parent())&&!o.isSolid()&&(t||!o.isBlock())&&o.isEditable();)n=o;a?e.setStartBefore(n[0]):e.setEndBefore(n[0])}else if(r===n.children().length){for(;!n.next()&&(o=n.parent())&&!o.isSolid()&&(t||!o.isBlock())&&o.isEditable();)n=o;a?e.setStartAfter(n[0]):e.setEndAfter(n[0])}};n(e.startContainer,e.startOffset,!0),n(e.endContainer,e.endOffset,!1)}function ln(e){for(var t;e.startContainer.nodeType===Node.ELEMENT_NODE&&(t=e.startContainer.childNodes[e.startOffset])&&t.nodeType===Node.ELEMENT_NODE&&!kt(t).isVoid()&&!kt(t).attr(_e)&&!kt(t).attr(Ee);)e.setStart(t,0);for(;e.endContainer.nodeType===Node.ELEMENT_NODE&&e.endOffset>0&&(t=e.endContainer.childNodes[e.endOffset-1])&&t.nodeType===Node.ELEMENT_NODE&&!kt(t).isVoid()&&!kt(t).attr(_e)&&!kt(t).attr(Ee);)e.setEnd(t,t.childNodes.length)}function sn(e){var t=kt(e.commonAncestorContainer);if(t.isRoot()||t.isEditable()){var n=t.doc,r=t.closest(ot);r.find(ke).remove(),r.find(we).remove(),r.find(xe).remove();var a=kt(e.startContainer).closest(Se);if(a.length>0&&!nn(a)&&(kt(e.startContainer).closest(je).length>0&&e.setStartBefore(a[0]),kt(e.startContainer).closest(Ae).length>0&&e.setStartAfter(a[0])),e.startContainer!==e.endContainer){var o=kt(e.endContainer).closest(Se);o.length>0&&!nn(o)&&(kt(e.endContainer).closest(je).length>0&&e.setEndBefore(o[0]),kt(e.endContainer).closest(Ae).length>0&&e.setEndAfter(o[0]))}if(e.collapsed){var i=n.createElement("span");return kt(i).attr(ge,be),e.insertNode(i),Qt.log("createBookmark",!0),{anchor:i,focus:i}}var c=e.cloneRange();c.collapse(!0);var l=n.createElement("span");kt(l).attr(ge,ve),c.insertNode(l),e.setStartAfter(l);var s=e.cloneRange();s.collapse(!1);var u=n.createElement("span");return kt(u).attr(ge,ye),s.insertNode(u),Qt.log("createBookmark",!1),{anchor:l,focus:u}}}function un(e,t){if(t){if(Qt.log("moveToBookmark",t.anchor===t.focus),t.anchor===t.focus){var n=kt(t.anchor),r=n.parent();Nt(r),r[0].normalize();var a=!1,o=n.prev(),i=n.next();if(o&&o.isCard()&&!nn(o)){var c=o.find(Ae);c.length>0&&(e.selectNodeContents(c[0]),e.collapse(!1),a=!0)}else if(i&&i.isCard()&&!nn(i)){var l=i.find(je);l.length>0&&(e.selectNodeContents(l[0]),e.collapse(!1),a=!0)}a||(e.setStartBefore(n[0]),e.collapse(!0)),Jt?(r[0].normalize(),n.remove()):(n.remove(),r[0].normalize())}else{var s=kt(t.anchor),u=s.parent();Nt(u),e.setStartBefore(s[0]),s.remove(),u[0].normalize();var d=kt(t.focus);Nt(u=d.parent()),e.setEndBefore(d[0]),d.remove(),u[0].normalize()}if(en){var f=window.getSelection();f.removeAllRanges(),f.addRange(e)}}}function dn(e){an(e);var t=kt(e.startContainer),n=e.startOffset;if(!t.isText()){var r=t.children();if(0!==r.length)return r.eq(n-1)}}function fn(e){an(e);var t=kt(e.endContainer),n=e.endOffset;if(!t.isText()){var r=t.children();if(0!==r.length)return r.eq(n)}}function pn(e){if(e.collapsed||e.extractContents(),!kt(e.startContainer).isRoot()){var t=kt(e.startContainer);if(!t.isRoot()){for(var n=t.parent();!n.isRoot();)t=n,n=n.parent();e.setEndAfter(t[0]);var r=e.extractContents();e.insertNode(r),e.collapse(!0)}}}function hn(e){var t=kt(e.startContainer);if(t.isRoot())return kt(t.children()[e.startOffset]);for(var n=t;!n.parent().isRoot();)n=n.parent();return n}function mn(e){a.ua.mobile&&e&&e.endContainer.scrollIntoView&&e.endContainer.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}function gn(e,t,n){if(e.collapsed)kn(t,n,vn(e.endContainer,e.endOffset));else{var r=vn(e.startContainer,e.startOffset),a=vn(e.endContainer,e.endOffset);kn(t,n,r),bn(t,n,a)||kn(t,n,a)}}function vn(e,t){return e.nodeType===Node.ELEMENT_NODE&&(e.childNodes[t]||e.childNodes[t-1])||e}function yn(e,t){var n=St(e),r=n.innerHeight,a=n.innerWidth,o={},i=o.top,c=o.left,l=o.bottom,s=o.right;if(t){var u=t.getBoundingClientRect();i=u.top,c=u.left,l=u.bottom,s=u.right}else{var d=e.getBoundingClientRect();i=d.top,c=d.left,l=d.bottom,s=d.right}return{top:i,left:c,bottom:Math.min(l,r),right:Math.min(s,a)}}function bn(e,t,n){var r;n.nodeType!==Node.ELEMENT_NODE&&(r=Ot(n).createElement("span"),n.nextSibling?n.parentNode.insertBefore(r,n.nextSibling):n.parentNode.appendChild(r),n=r);var a=n.getBoundingClientRect(),o=a.top,i=a.left,c=a.right,l=a.bottom,s=yn(e,t);return r&&r.parentNode.removeChild(r),!(o<s.top||l>s.bottom||i<s.left||c>s.right)}function kn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"nearest";if(tn(Ot(n).body.scrollIntoView)){var a=null;n.nodeType===Node.ELEMENT_NODE&&"BR"!==n.nodeName||((a=Ot(n).createElement("span")).innerHTML="&nbsp;",n.parentNode.insertBefore(a,n),n=a),bn(e,t,n)||n.scrollIntoView({block:r,inline:r}),a&&a.parentNode.removeChild(a)}}function wn(e){var t=e.startContainer,n=e.endContainer,r=e.collapsed,a=[];if(t!==n||!0===r||t.nodeType===Node.TEXT_NODE)return a;for(var o=t.childNodes,i=e.startOffset,c=e.endOffset,l=i;l<c;l++)a.push(o[l]);return a}function xn(e){var t=kt(e.startContainer).closest("[data-lake-card]");return!(!t||!t[0])}function _n(e,t){return!(!e||!t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}var En={getClientRect:rn,upRange:an,downRange:on,enlargeRange:cn,shrinkRange:ln,createBookmark:sn,moveToBookmark:un,getPrevNode:dn,getNextNode:fn,deepCut:pn,getRootBlock:hn,scrollIntoView:mn,findElementsInSimpleRange:wn,getSubRanges:function(e){var t=[];return Rt(e.commonAncestorContainer,(function(n){if(n.nodeType===Node.TEXT_NODE){var r=n.nodeValue.length,a=e.comparePoint(n,0),o=e.comparePoint(n,r),i=document.createRange();if(a<0){if(o<0)return;0===o?(i.setStart(n,e.startOffset),i.setEnd(n,r)):(i.setStart(n,e.startOffset),i.setEnd(n,e.endOffset))}else{if(0!==a)return;if(o<0)return;0===o?(i.setStart(n,0),i.setEnd(n,r)):(i.setStart(n,0),i.setEnd(n,e.endOffset))}t.push(i)}})),t},isInViewport:bn,getViewPort:yn,scrollIntoViewIfNeeded:gn,isFunction:tn,isInCard:xn,isSameRange:_n,scrollRangeIntoView:function(e){var t=vn(e.endContainer,e.endOffset),n=t.nodeType===Node.TEXT_NODE?t.parentNode:t,r=e.collapsed?n.getBoundingClientRect():rn(e),a=window.innerHeight;r.bottom<a&&r.bottom>0||n.scrollIntoView({block:"center"})}};function Cn(e){for(var t=e=kt(e);e;){if(e.isRoot()||e.isBlock())return e;e=e.parent()}return t}function On(e,t){var n=kt(e["".concat(t,"Container")]),r=e["".concat(t,"Offset")],a=e.cloneRange(),o=Cn(n);a.selectNodeContents(o[0]),a.setEnd(n[0],r);var i=a.cloneContents();if(!i.firstChild)return!0;if(1===i.childNodes.length&&"br"===kt(i.firstChild).name)return!0;var c=kt("<div />");return c.append(i),!!Tt(c[0])}function Sn(e,t){var n=kt(e["".concat(t,"Container")]),r=e["".concat(t,"Offset")],a=e.cloneRange(),o=Cn(n);a.selectNodeContents(o[0]),a.setStart(n[0],r);var i=a.cloneContents();if(!i.firstChild)return!0;var c=kt("<div />");return c.append(i),!(c.find("br").length>0||!Tt(c[0]))}function Rn(e){var t=e.cloneRange();ln(t),on(t);var n=Cn(t.startContainer),r=Cn(t.endContainer),a=Cn(t.commonAncestorContainer),o=[],i=!1;return Rt(a[0],(function(e){if((e=kt(e))[0]===n[0]&&(i=!0),i&&e.isBlock()&&!e.isCard()&&e.isEditable()&&o.push(e),e[0]===r[0])return i=!1,!1})),o.length>1&&On(t,"end")&&o.pop(),o}function jn(e){var t=e.block,n=e.range,r=e.isLeft,a=e.clone,o=e.keepID,i=(t=kt(t)).doc.createRange();r?(i.selectNodeContents(t[0]),i.setEnd(n.startContainer,n.startOffset)):(i.selectNodeContents(t[0]),i.setStart(n.endContainer,n.endOffset));var c=a?i.cloneContents():i.extractContents(),l=o?t.cloneKeepID(!1):t.clone(!1);return l.append(c),a&&l.find(Se).each((function(e){var t=(e=kt(e)).attr(_e);e.attr(Ee,t),e.removeAttr(_e)})),l}function Pn(e,t){var n=Cn(e.commonAncestorContainer);n.find("br").each((function(e){if((!(e=kt(e)).prev()||"checkbox"===e.prev().attr(_e))&&e.next()&&"br"!==e.next().name&&!["cursor","anchor","focus"].includes(e.next().attr(ge))||!e.next()&&e.prev()&&"br"!==e.prev().name){if("left"===t&&e.prev()&&"checkbox"!==e.prev().attr(_e))return;e.remove()}})),!n.first()||1===n.children().length&&"checkbox"===n.first().attr(_e)?n.append("<br />"):2===n.children().length&&"checkbox"===n.first().attr(_e)&&["cursor","anchor","focus"].includes(n.last().attr(ge))&&n.first().after("<br />")}function An(e){var t;if(["ol","ul"].includes(e.name))t=e;else{var n=Rn(e);if(0===n.length)return e;if(!(t=n[0].closest("ul,ol"))[0])return e}for(var r=[],a=parseInt(t.attr(xt),10)||0,o=t.prev();o&&["ol","ul"].includes(o.name);){if("ol"===o.name){var i=parseInt(o.attr(xt),10)||0,c=parseInt(o.attr("start"),10)||1,l=o.find("li").length;if(0===i){r[i]=c+l;break}i<=a&&(a=i,r[i]=r[i]||c+l)}else a=parseInt(o.attr(xt),10)||0;o=o.prev()}for(var s=t;s;){if(["ol","ul"].includes(s.name)){var u=parseInt(s.attr(xt),10)||0,d=parseInt(s.attr("start"),10),f=s.find("li").length;if("ol"===s.name){var p=r[u];u>0?((p=p||1)>1?s.attr("start",p):s.removeAttr("start"),r[u]=p+f):p&&p!==d?(p>1?s.attr("start",p):s.removeAttr("start"),r[u]=p+f):r[u]=(d||1)+f,r=r.slice(0,u+1)}}else r=[];s=s.next()}}var Tn=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e=kt(e),(t=kt(t)).isText())e.append(t);else{var r=t,a=["ul","ol"].includes(e.name),o=["ul","ol"].includes(t.name);if(a&&!o){var i=e.find("li");if(0===i.length)return;e=kt(i[i.length-1])}if(!a&&o){var c=t.find("li");c.length>0&&(t=kt(c[0])),c[1]&&(r=kt(c[0]))}for(var l=e.last(),s=t.first();s;){var u=s.next();e.isTitle()&&s.removeFontSize(),e.append(s),s=u}if(n&&r.remove(),l&&"br"===l.name)for(var d=l.next();d;){if(-1===[ve,ye,be].indexOf(d.attr(ge))){l.remove();break}d=d.next()}}},Dn=function(e){for(var t=(e=kt(e)[0]).firstChild;t;){var n=t.nextSibling;e.parentNode.insertBefore(t,e),t=n}e.parentNode.removeChild(e)};function Mn(e){for(e=kt(e);e&&(e.isMark()||e.isText())&&!e.isRoot();)e=e.parent();return e}function Nn(e){var t=kt(e);if(!t.length)return null;for(;t&&!t.isRoot();)t=t.parent();return t}function Ln(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.collapsed){var r=t.startContainer,a=t.startOffset,o=Nn(r);if(o){var i=t.cloneRange();if(i.selectNodeContents(o[0]),n){i.setEnd(r,a),an(i),cn(i,!0);var c=i.endContainer,l=i.endOffset;if(!e&&c.nodeType===Node.ELEMENT_NODE&&c.childNodes[l]&&kt(c.childNodes[l]).isBlock()&&(r.nodeType!==Node.ELEMENT_NODE||!kt(r.childNodes[a]||r.childNodes[a-1]).isBlock()))return;i.selectNodeContents(o[0]),i.setStart(c,l),ln(i),on(i),t.setStart(i.startContainer,i.startOffset),t.collapse(!0)}else{i.setStart(r,a),an(i),cn(i,!0);var s=i.startContainer,u=i.startOffset;if(!e&&s.nodeType===Node.ELEMENT_NODE&&s.childNodes[u]&&kt(s.childNodes[u]).isBlock()&&(r.nodeType!==Node.ELEMENT_NODE||!kt(r.childNodes[a]||r.childNodes[a-1]).isBlock()))return;i.selectNodeContents(o[0]),i.setEnd(s,u),ln(i),on(i),t.setEnd(i.endContainer,i.endOffset),t.collapse(!1)}}}}function In(e){var t=function(e){if(!e.collapsed){var t=e.cloneRange(),n=e.cloneRange();t.collapse(!0),n.collapse(!1),Ln(!0,t,!0),Ln(!0,n),e.setStart(t.startContainer,t.startOffset),e.setEnd(n.startContainer,n.startOffset)}return Ln(!1,e),e}(e.cloneRange()),n=t.startContainer,r=t.startOffset,a=t.endContainer,o=t.endOffset,i=n,c=a;n.nodeType===Node.ELEMENT_NODE&&n.childNodes[r]&&(i=n.childNodes[r]||n),a.nodeType===Node.ELEMENT_NODE&&o>0&&a.childNodes[o-1]&&(c=a.childNodes[o-1]||n),e.collapsed&&(i=c);var l=function(e){e=kt(e);for(var t=[];e&&(e.type!==Node.ELEMENT_NODE||"root"!==e.attr(at));)!e.isMark()||e.attr(_e)||e.attr(Oe)||t.push(e),e=e.parent();return t},s=l(i);return e.collapsed||(s=[].concat(x()(s),x()(l(c)),x()(function(e,t,n){var r=!1,a=!1,o=[];return t===n||Rt(e,(function(e){if(a)return!1;if(e!==t){if(r){if(e===n)return a=!0,!1;var i=kt(e);!i.isMark()||i.attr(_e)||i.attr(Oe)||o.push(i)}}else r=!0})),o}(e.commonAncestorContainer,i,c))).filter((function(e){return!e[0].finded&&(e[0].finded=!0,!0)})).map((function(e){return delete e[0].finded,e}))),s}function Bn(e,t){if(!e||!e.length)return t;var n=kt(t)[0];return e.forEach((function(e){(e=kt(e)[0].cloneNode(!1)).appendChild(n),n=e})),n.outerHTML}function zn(e,t){jt(e).forEach((function(e){Tt(e)&&kt(e).isMark()&&(!t||t(e))&&Dn(e)}))}function Fn(e,t){if(e.isCard())return!1;if(!t)return!0;var n=Un(e[0]);return Un(kt(t)[0])===n&&At(e,t)}function Un(e){return!(!e.className||-1===e.className.indexOf("lake-fontsize-"))}function Vn(e,t){if(e.collapsed)return e;var n=e.cloneRange();n.collapse(!0);var r=In(n);cn(e);var a=Cn(e.startContainer);if(!a.isRoot()&&!a.isEditable())return e;e.extractContents(),e.collapse(!0);var o=kt(e.startContainer),i=e.startOffset;if(o.isText())return e;var c=o[0].childNodes[i-1],l=o[0].childNodes[i],s=0===o[0].childNodes.length;if(!s){var u=o[0].firstChild;1===o[0].childNodes.length&&u.nodeType===Node.ELEMENT_NODE&&"LI"===o[0].nodeName&&"checkbox"===u.getAttribute("data-lake-card")&&(s=!0)}if(s&&o.isBlock()){var d=Bn(r,"<br />");return o.isRoot()&&(d="<p>".concat(d,"</p>")),o.append(d),e.selectNode(o.find("br")[0]),e.collapse(!1),e}return c&&l&&kt(c).isBlock()&&kt(l).isBlock()&&!t&&function e(t,n,r,a){if(n.isBlock()&&!n.isVoid()&&!n.isCard()){t.selectNodeContents(n[0]),t.collapse(!1);var o=sn(t);Tn(n,r),un(t,o),n=dn(t),r=fn(t);var i=kt(t.startContainer);n||r||!i.isBlock()||(i.append(Bn(a,"<br />")),t.selectNodeContents(i.find("br")[0]),t.collapse(!1)),n&&r&&!n.isCard()&&!r.isCard()&&e(t,n,r,a)}}(e,kt(c),kt(l),r),o.children().each((function(e){(e=kt(e)).isVoid()||e.isElement()&&""===e.html()&&e.remove()})),e}var qn=function(e,t){return Vn(e,t)};function Hn(e,t,n){if("class"===t){var r=e[t].split(" "),a=[];return r.forEach((function(e){n(e)&&a.push(e)})),void(a.length>0?e[t]=a.join(" "):delete e[t])}}function Wn(e,t,n){if(t[n]){if("string"==typeof t[n]&&"@"===t[n].charAt(0))switch(t[n]){case"@number":t[n]=/^-?\d+(\.\d+)?$/;break;case"@length":t[n]=/^-?\d+(\.\d+)?(\w*|%)$/;break;case"@color":t[n]=/^(rgb(.+?)|#\w{3,6}|\w+)$/i;break;case"@url":t[n]=ze}if("string"==typeof t[n]){if("*"===t[n])return;return"class"===n?void Hn(e,n,(function(e){return t[n]===e})):void(t[n]!==e[n]&&delete e[n])}return Array.isArray(t[n])?"class"===n?void Hn(e,n,(function(e){return t[n].indexOf(e)>=0})):void(t[n].indexOf(e[n])<0&&delete e[n]):"object"===i()(t[n])&&"function"==typeof t[n].test?"class"===n?void Hn(e,n,(function(e){return t[n].test(e)})):void(t[n].test(e[n])||delete e[n]):void("function"!=typeof t[n]||t[n](e[n])||delete e[n])}delete e[n]}var Yn=function(e,t,n,r){if(!e)return!1;if(["anchor","focus","cursor","card"].indexOf(t)>=0)return!1;if(!e[t])return!0;if(!n)return!1;Object.keys(n).forEach((function(r){Wn(n,e[t],r)}));var a=e[t].style||{};return Object.keys(r).forEach((function(e){Wn(r,a,e)})),!1},Gn=function(e,t,n,r,a){if("div"===t&&(t="p"),!e)return t;if("card"===t||a)return t;for(var o=0;o<e.length;o++){var c=e[o],l=c[0],s=c[1];if("string"==typeof l&&t===l)return s;if("object"===i()(l)){var u=Object.keys(l)[0];if(t!==u)continue;for(var d=l[u],f=Object.keys(n),p=0;p<f.length;p++){var h=f[p];if(d[h]){if("string"==typeof d[h]&&d[h]===n[h])return delete n[h],s;if(Array.isArray(d[h])&&d[h].indexOf(n[h])>=0)return delete n[h],s}}for(var m=d.style||{},g=Object.keys(r),v=0;v<g.length;v++){var y=g[v];if(m[y]){if("string"==typeof m[y]&&m[y]===r[y])return delete r[y],s;if(Array.isArray(m[y])&&m[y].indexOf(r[y])>=0)return delete r[y],s}}}}return t},Xn=/[\u00a0 ]+/g,Kn="a".charCodeAt(0)-1;function Zn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(t=+t))return"•";switch(e.toLowerCase()){case"disc":return"•";case"circle":return"◦";case"square":return"◼";case"lower-alpha":return String.fromCharCode(Kn+t);case"lower-roman":return String.fromCharCode(8559+t);default:return t}}function $n(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=e.first();o;){if(o.isElement()){var i=o.name,c=o.attr(),l=o.css();if(delete c.style,c[ge]&&(i=c[ge].toLowerCase(),c={},l={}),["left","right"].indexOf(c[Oe])>=0){o=o.next();continue}if(c[_e]||c[Ee]){i="card";var s=c["data-card-value"],u=c["data-card-alias"];c={type:c[Ce],name:(c[_e]||c[Ee]).toLowerCase()},u&&(c.alias=u),void 0!==s&&(c.value=s),l={}}i=Gn(t,i,c,l,r),"center"!==c[Oe]&&(n.onOpenTag&&n.onOpenTag(i,c,l),n.onOpenNode&&n.onOpenNode(o)),("card"!==i||a)&&$n(o,t,n,r,a),"center"===c[Oe]||Qe[i]||(n.onCloseTag&&n.onCloseTag(i,c,l),n.onCloseNode&&n.onCloseNode(o))}if(o.isText()){var d=Ie(o[0].nodeValue);""===d.trim()&&o.parent().isBlock()&&(o.prev()||(d=d.replace(/^[ \n]+/,"")),o.next()||(d=d.replace(/[ \n]+$/,""))),o.prev()&&o.prev().isBlock()&&o.next()&&o.next().isBlock()&&""===d.trim()&&(d=d.trim()),d=d.replace(/\u200B/g,""),n.onText&&n.onText(d),n.onTextNode&&n.onTextNode(o)}o=o.next()}}function Qn(e){var t="";return Object.keys(e).forEach((function(n){if("style"!==n){var r=e[n].replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");t+=" ".concat(n,'="').concat(r,'"')}})),t.trim()}function Jn(e){var t="";return Object.keys(e).forEach((function(n){var r=Ie(e[n]);/^(padding|margin|text-indent)/.test(n)&&0===Fe(r)||(/[^a-z]color$/.test(n)&&(r=Le(r)),t+=" ".concat(n,": ").concat(r,";"))})),t.trim()}var er=function(){function e(t,n,r,a){if(l()(this,e),this.schemaRules=n?n.getValue():null,this.conversionRules=r?r.getValue():null,"string"==typeof t){t=(t=(t=t.replace(/<a\s{0,1000}\/>/gi,"<a></a>")).replace(/<a(\s[^>]+?)\/>/gi,(function(e,t){return"<a".concat(t,"></a>")}))).replace(/<p(>|\s+[^>]*>)/gi,"<div$1").replace(/<\/p>/gi,"</div>"),this.source=qe(t);var o=(new DOMParser).parseFromString(this.source,"text/html");this.root=kt(o.body)}else this.root=kt(t);a&&a(this.root)}return u()(e,[{key:"toValue",value:function(){return this._toValue(!1)}},{key:"_toValue",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=[],r=0;return $n(this.root,this.conversionRules,{onOpenTag:function(t,a,o){if(!Yn(e.schemaRules,t,a,o)){if("pre"===t&&r++,n.push("<"),n.push(t),Object.keys(a).length>0&&n.push(" "+Qn(a)),Object.keys(o).length>0){var i=Jn(o);""!==i&&(n.push(' style="'),n.push(i),n.push('"'))}Qe[t]?n.push(" />"):n.push(">")}},onText:function(e){0===r&&(e=(e=e.replace(/^\n|\n$/g,"")).replace(/\n+/g," ")),t&&e.length>1&&(e=e.replace(Xn,(function(e){for(var t=[],n=0,r=(e=e.replace(/\u00a0/g," ")).length;n<r;n++)t[n]=n%2==0?e[n]:" ";return t.join("")}))),n.push(e)},onCloseTag:function(t,a,o){Yn(e.schemaRules,t,a,o)||("pre"===t&&--r<0&&(r=0),n.push("</".concat(t,">")))}}),n.join("")}},{key:"toDOM",value:function(){for(var e=qe(this.toValue()),t=(new DOMParser).parseFromString(e,"text/html"),n=t.createDocumentFragment(),r=t.body.childNodes;r.length>0;)n.appendChild(r[0]);return n}},{key:"toLowerValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return qe(this._toValue(e))}},{key:"toText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.includeCard,n=[];return $n(this.root,this.conversionRules,{onOpenTag:function(e){"br"===e&&n.push("\n")},onText:function(e){e=(e=Be(e)).replace(/\u00a0/g," "),n.push(e)},onOpenNode:function(e){var t=e[0];if("li"===e.name){if(e.hasClass("lake-list-task"))return;var r=e.parent(),a=r.css("listStyleType");if("ol"===r.name){for(var o=r[0].start,i=void 0===o?1:o,c=r[0].childNodes,l=-1,s=0,u=c.length;s<u&&("LI"===c[s].nodeName&&l++,c[s]!==t);s++);n.push("".concat(Zn(a,i+l),". "))}else"ul"===r.name&&n.push(Zn(a)+" ")}},onCloseNode:function(e){e.isBlock()&&n.push("\n")}},!1,t),n.join("").replace(/\n{2,}/g,"\n").trim()}}]),e}();function tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rr=/(?:^|\s)lake-lineheight-(\d+)(?:\s|$)/,ar={"lake-lineheight-1":1,"lake-lineheight-115":1.15,"lake-lineheight-15":1.5,"lake-lineheight-17":1.74,"lake-lineheight-2":2,"lake-lineheight-25":2.5,"lake-lineheight-3":3},or=function(){function e(t){l()(this,e),this.options=nr({callback:function(){},cards:null,typography:null},t),this.initCardParses()}return u()(e,[{key:"before",value:function(){}},{key:"after",value:function(){}},{key:"getDefaultCardParsers",value:function(){return{hr:function(e){var t=e.find("hr");t.css({"background-color":"#e8e8e8",border:"1px solid transparent",margin:"18px 0"}),e.empty(),e.append(t)},checkbox:function(e){var t="checked"===e.find("input").attr("checked"),n=kt("<span>".concat(t?"✅":"🔲","<span/>"));n.css({margin:"3px 0.5ex","vertical-align":"middle",width:"16px",height:"16px",color:"color: rgba(0, 0, 0, 0.65)"}),e.empty(),e.append(n)}}}},{key:"initCardParses",value:function(){this.cardParsers=this.getDefaultCardParsers(),this.options.cards&&(this.cardParsers=nr(nr({},this.cardParsers),this.options.cards))}},{key:"transAttrsToStyle",value:function(e){e.find("h1,h2,h3,h4,h5,h6").css({padding:"7px 0",margin:"0","font-weight":"700"}).each((function(e){"H1"===e.tagName?(e.style["font-size"]="28px",e.style["line-height"]="36px"):"H2"===e.tagName?(e.style["font-size"]="24px",e.style["line-height"]="32px"):"H3"===e.tagName?(e.style["font-size"]="20px",e.style["line-height"]="28px"):"H4"===e.tagName?(e.style["font-size"]="16px",e.style["line-height"]="24px"):"H5"===e.tagName?(e.style["font-size"]="14px",e.style["line-height"]="24px"):"H6"===e.tagName&&(e.style["font-size"]="14px",e.style["line-height"]="24px",e.style["font-weight"]="400")})),e.find(".lake-fontsize-9").css({"font-size":"12px"}).attr("data-mce-style","font-size: 9px"),e.find(".lake-fontsize-10").css({"font-size":"13px"}).attr("data-mce-style","font-size: 10px"),e.find(".lake-fontsize-11").css({"font-size":"14px"}).attr("data-mce-style","font-size: 11px"),e.find(".lake-fontsize-1515").css({"font-size":"15px"}).attr("data-mce-style","font-size: 15px"),e.find(".lake-fontsize-12").css({"font-size":"16px"}).attr("data-mce-style","font-size: 12px"),e.find(".lake-fontsize-14").css({"font-size":"19px"}).attr("data-mce-style","font-size: 14px"),e.find(".lake-fontsize-16").css({"font-size":"22px"}).attr("data-mce-style","font-size: 16px"),e.find(".lake-fontsize-18").css({"font-size":"24px"}).attr("data-mce-style","font-size: 18px"),e.find(".lake-fontsize-22").css({"font-size":"29px"}).attr("data-mce-style","font-size: 22px"),e.find(".lake-fontsize-24").css({"font-size":"32px"}).attr("data-mce-style","font-size: 24px"),e.find(".lake-fontsize-30").css({"font-size":"40px"}).attr("data-mce-style","font-size: 30px"),e.find(".lake-fontsize-36").css({"font-size":"48px"}).attr("data-mce-style","font-size: 36px"),e.find("p").each((function(e){e.style.lineHeight=function(e){var t=rr.exec(e.className);return t&&ar[t[0]]||1.74}(e),e.style.margin=0})),e.find(".lake-list-task").css({"list-style":"none"}),e.find("#article-title").css({"font-size":"36px","line-height":"1.389","font-weight":"700",color:"#262626"}),e.find("blockquote").each((function(e){(e=kt(e)).css({"margin-top":"5px","margin-bottom":"5px","padding-left":"1em","margin-left":"0px","border-left":"3px solid #eee",opacity:"0.6"}),e.hasClass("lake-alert")&&(e.css({margin:0,padding:"10px","border-radius":"3px",color:"#262626",opacity:1}),e.hasClass("lake-alert-info")?e.css({border:"1px solid #abd2da","background-color":"#e8f7ff"}):e.hasClass("lake-alert-warning")?e.css({border:"1px solid #e0d1b1","background-color":"#fffbe6"}):e.hasClass("lake-alert-danger")?e.css({border:"1px solid #deb8be","background-color":"#fff3f3"}):e.hasClass("lake-alert-success")?e.css({border:"1px solid #c2d2b5","background-color":"#edf9e8"}):e.hasClass("lake-alert-tips")&&e.css({border:"1px solid #c3c3c3","background-color":"#fff6b6"}))})),e.find("code").css({"font-family":"monospace","font-size":"inherit","background-color":"rgba(0,0,0,.06)",padding:"0 2px",border:"1px solid rgba(0,0,0,.08)","border-radius":"2px 2px","line-height":"inherit","overflow-wrap":"break-word","text-indent":"0"})}},{key:"parseCard",value:function(e){var t=this.cardParsers;e.find("[data-lake-card]").each((function(e){var n=(e=kt(e)).attr("data-lake-card"),r=t[n];r?r(e):e.empty()}))}},{key:"parseLink",value:function(e){e.find("a").each((function(e){e.setAttribute("href",e.href)}))}},{key:"parseLists",value:function(e,t){e.find("ul,ol").each((function(e){e=kt(e);var n,r=parseInt(e.attr("data-lake-indent"),10)||0,a=e.name,o={ul:["disc","circle","square"],ol:["decimal","lower-alpha","lower-roman"]}[a];e[0].removeAttribute("data-lake-indent");for(var i=0;i<=r;i++){if(0===i)n=e,e.css({"list-style-type":o[r%3]});else{var c=kt("<".concat(a,"></").concat(a,">"));n.before(c),c.append(n),(n=c).css({"list-style-type":"none"})}n.attr("lake-indent",i),n.css({margin:0,"padding-left":"23px"}),i===r&&n.css(t)}}))}},{key:"standardizeDel",value:function(e){e.find("del").each((function(e){var t=document.createElement("span");t.style["text-decoration"]="line-through",e.parentNode.insertBefore(t,e),t.innerHTML=e.innerHTML,e.parentNode.removeChild(e)}))}},{key:"standardizeTaskList",value:function(e){e.find(".lake-list-task").each((function(e){var t=(e=kt(e))[0].childNodes,n=t[0];if(0===t.length||1===t.length&&n.nodeType===Node.ELEMENT_NODE&&"checkbox"===n.getAttribute("data-lake-card"))e.append(kt("<br/>"));else{var r=e.find('[data-lake-card="checkbox"]');if(r.length>1)for(var a=1;a<r.length;a++)r[a].remove();if(0===r.length){var o="true"===e.attr("data-lake-checked")?"true":"false";e.prepend('\n        <span data-card-type="inline" data-lake-card="checkbox" contenteditable="false" data-card-value="data:'.concat(o,'">\n          <span data-card-element="body">\n            <span data-card-element="center">\n              <span class="lake-checkbox">\n                <input type="checkbox" class="lake-checkbox-input" value="" ').concat("true"===o?'checked="checked"':"",'>\n                <span class="lake-checkbox-inner"></span>\n              </span>\n            </span>\n          </span>\n        </span>\n      '))}}}))}},{key:"filter",value:function(e){Rt(e,(function(e){e&&e.nodeType===Node.ELEMENT_NODE&&"none"===e.style["user-select"]&&e.parentNode&&e.parentNode.removeChild(e)}))}},{key:"isClassicTypography",value:function(e){return this.options.typography?"classic"===this.options.typography:kt(e).hasClass("lake-typography-classic")}},{key:"parse",value:function(e,t,n){var r=this.options.callback,a=kt(document.createElement("div")),o=this.isClassicTypography(),i={"font-size":o?"15px":"14px",color:o?"#404040":"#262626","line-height":"1.74","letter-spacing":o?"0.008em":".05em","outline-style":"none","overflow-wrap":"break-word"};return t?(t.appendChild(e),kt(t).css(i),a.append(n)):a.append(e),this.before(a),this.filter(a),this.standardizeTaskList(a),this.standardizeDel(a),this.parseLists(a,i),this.parseCard(a),this.parseLink(a),a.find("p").css(i),this.transAttrsToStyle(a),this.after(a),r(a),{html:a.html(),text:new er(a).toText({includeCard:!0})}}}]),e}();function ir(e){var t=e.cloneRange();if(!e.collapsed){var n=e.cloneRange();ln(n),t.setEnd(n.endContainer,n.endOffset)}var r=t.startContainer,a=t.startOffset,o=t.endContainer,i=t.endOffset,c=r,l=o;r.nodeType===Node.ELEMENT_NODE&&r.childNodes[a]&&(c=r.childNodes[a]||r),o.nodeType===Node.ELEMENT_NODE&&i>0&&o.childNodes[i-1]&&(l=o.childNodes[i-1]||r),e.collapsed&&(c=l);var s=function(e){e=kt(e);for(var t=[];e&&!e.isRoot();)e.isInline()&&t.push(e),e=e.parent();return t},u=s(c);return e.collapsed||(u=[].concat(x()(u),x()(s(l)),x()(function(e,t,n){var r=!1,a=!1,o=[];return t===n||Rt(e,(function(e){if(a)return!1;if(e!==t){if(r){if(e===n)return a=!0,!1;var i=kt(e);i.isInline()&&o.push(i)}}else r=!0})),o}(e.commonAncestorContainer,c,l))).filter((function(e){return!e[0].finded&&(e[0].finded=!0,!0)})).map((function(e){return delete e[0].finded,e}))),u}var cr=function(e,t){if(e=kt(e),t=(t=kt(t)).clone(!1),e.isText())return t.append(e.clone(!1)),e.replaceWith(t);if(t.isMark()){var n;if("span"===e.name&&"span"===t.name){var r=t.attr();delete r.style,Object.keys(r).forEach((function(t){e.attr(t,r[t])}));var a=t.css();Object.keys(a).forEach((function(t){e.css(t,a[t])})),n=e}else n=function(e,t){return t.append(e.clone(!0)),jt(t).forEach((function(e){(e=kt(e)).isMark()&&At(e,t)&&Dn(e)})),e.replaceWith(t)}(e,t);return function(e){return jt(e).forEach((function(t){if((t=kt(t)).isMark()){var n=function(e,t){var n=e.css(),r=t.css(),a=e.attr("class"),o=t.attr("class"),i={},c={};return Object.keys(n).length<Object.keys(r).length?Object.keys(n).forEach((function(e){r[e]&&(i[e]=!0)})):Object.keys(r).forEach((function(e){n[e]&&(i[e]=!0)})),a&&o&&a.indexOf("lake-fontsize-")>-1&&o.indexOf("lake-fontsize-")>-1&&(c["font-size"]=!0),Ct(Ct({},i),c)}(t,e);Object.keys(n).forEach((function(e){!function(e,t){if("font-size"!==t)e[0].style[t]="";else{var n=e.attr("class");e.attr("class",n.replace(/lake-fontsize-[0-9]{1,5}/,""))}}(t,e)}))}})),e}(n)}var o=e.clone(!1);return e.after(o),t.append(e),o.replaceWith(t)},lr=function(e,t){e=kt(e);var n=t||{},r=n.style||{};return Object.keys(n).forEach((function(t){var r=n[t];"style"!==t&&e.attr(t,r)})),Object.keys(r).forEach((function(t){var n=r[t];/^0(px|em)?$/.test(n)&&(n=""),e.css(t,n)})),e},sr={getClosest:Mn,getActiveMarks:In,removeEmptyMarks:zn,canRemoveMark:Fn,removeEmptyMarksAndAddBr:function e(t,n){if(t&&!t.isRoot()&&!t.isCard()&&!t.attr(ge)&&!t.attr(ge)){var r=t.parent();if(1===t.children().length&&t.first().attr(ge))return void(t.isMark()?(t.before(t.first()),t.remove(),e(r,!0)):n&&t.isBlock()&&t.prepend("<br />"));var a=t.html();""!==a&&"​"!==a||(t.isMark()?(t.remove(),e(r,!0)):n&&t.isBlock()&&t.html("<br />"))}},getActiveInlines:ir,getClosestBlock:Cn,getRangeBlocks:Rn,getActiveBlocks:function(e){ln(e=e.cloneRange());var t=e.startContainer,n=e.startOffset,r=e.endContainer,a=e.endOffset,o=t,i=r;t.nodeType===Node.ELEMENT_NODE&&t.childNodes[n]&&(o=t.childNodes[n]||t),r.nodeType===Node.ELEMENT_NODE&&a>0&&r.childNodes[a-1]&&(i=r.childNodes[a-1]||t),e.collapsed&&(o=i);var c=function(e,t,n){e.some((function(e){return e[0]===t[0]}))||(n?e.unshift(t):e.push(t))},l=function(e){e=kt(e);for(var t=[];e&&!e.isRoot();)e.isBlock()&&t.push(e),e=e.parent();return t},s=Rn(e);return l(o).forEach((function(e){return c(s,e,!0)})),e.collapsed||l(i).forEach((function(e){return c(s,e)})),s},isBlockFirstOffset:On,isBlockLastOffset:Sn,getBlockLeftText:function(e,t){return jn({block:e,range:t,isLeft:!0,clone:!0}).text().trim()},removeBlockLeftText:function(e,t){e=kt(e),sn(t);var n=e.find(xe),r=!1;Rt(e[0],(function(e){if((e=kt(e))[0]===n[0])return n.remove(),void(r=!0);r&&e.isText()&&e.remove()}),!1)},addOrRemoveBr:Pn,addListStartNumber:An,brToParagraph:function(e){if(e.first()&&1!==e.children().length&&!e.isTable()&&"li"!==e.name&&(2!==e.children().length||"cursor"!==e.first().attr(ge))&&"cursor"!==e.last().attr(ge)){for(var t,n,r=e.first();r;){var a=r.next();t&&"br"!==r.name||(n=t,t=e.clone(!1),e.before(t)),"br"!==r.name&&t.append(r),"br"!==r.name&&a||!n||n.first()||n.append("<br />"),r=a}t&&!t.first()&&t.remove(),e.remove()}},wrapNode:cr,unwrapNode:Dn,setNode:wt,setNodeProps:lr,mergeNode:Tn},ur=Zt.isCheckbox,dr={orderedlist:"ol",unorderedlist:"ul",tasklist:"ul"},fr={ol:"orderedlist",ul:"unorderedlist"};function pr(e,t){return Zt.isSameList(e,t)}function hr(e,t){var n=dr[t],r=!0;return e.forEach((function(e){switch(e.name){case"li":r="tasklist"===t?r&&vr(e):r&&!vr(e);break;case"p":e.parent()&&"li"!==e.parent().name&&(r=!1);break;case n:case"blockquote":break;default:r=!1}})),r}function mr(e){var t=e.name;return vr(e)?"tasklist":("li"===t&&e.parent()&&(t=e.parent().name),fr[t]||"")}function gr(e){for(var t="",n=0;n<e.length;n++){var r=e[n].name,a=e[n].parent(),o=void 0;switch(r){case"li":case"ul":case"ol":o=mr(e[n]);break;case"p":if(!a||"li"!==a.name)return"";o=mr(a);break;case"blockquote":break;default:return""}if(t&&o&&t!==o)return"";t=o}return t}function vr(e){return Zt.isTaskListBlock(e)}function yr(e){var t=0,n=kt("<p />");e.forEach((function(e){if(xr(e),["ul","ol"].includes(e.name)&&(t=parseInt(e.attr(xt),10)||0,sr.unwrapNode(e)),"li"===e.name){var r=n.clone(!1);0!==t&&r.css("padding-left",2*t+"em"),sr.setNode(e,r)}}))}function br(e,t,n){e.forEach((function(e){!function(e,t,n){var r,a=dr[t];xr(e);var o=kt("<".concat(a," />")),i=kt("<li />");switch(e.name){case"li":case a:return e;case"ol":case"ul":return o.attr(e.attr()),sr.setNode(e,o);case"p":return"li"===e.parent().name?void(e=sr.unwrapNode(e,"<p />")):(r=Xe.removeUnit(e.css("padding-left"))/2,e=sr.setNode(e,i),r&&o.attr(xt,r),n&&o.attr("start",n),e=sr.wrapNode(e,o));case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":e=sr.setNode(e,i),sr.wrapNode(e,o)}}(e,t,n)}))}function kr(e,t){var n=this;e.forEach((function(e){vr(e)||wr.call(n,e,t)}))}function wr(e,t){var n,r=kt('<ul class="lake-list"/>'),a=kt('<li class="lake-list-node lake-list-task"/>');switch(e.name){case"li":return e.addClass("lake-list-node"),e.addClass("lake-list-task"),_r.call(this,e,t),e;case"ul":return e.addClass("lake-list"),e;case"ol":return r.attr(e.attr()),sr.setNode(e,r);case"p":return n=Xe.removeUnit(e.css("padding-left"))/2,e=sr.setNode(e,a),_r.call(this,e,t),n&&r.attr(xt,n),sr.wrapNode(e,r);case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return e=sr.setNode(e,a),_r.call(this,e,t),sr.wrapNode(e,r);default:return e}}function xr(e){switch(e.name){case"li":return e.removeClass("lake-list-node"),e.removeClass("lake-list-task"),(t=e).find("[data-lake-card=checkbox]").remove(),t.find("[data-ready-card=checkbox]").remove(),e;case"ul":return e.removeClass("lake-list"),e;default:return e}var t}function _r(e,t){if(e=kt(e),!ur(e.first())){var n=this.card.createComponent({name:"checkbox",value:!!t,engine:this}),r=document.createRange();r.selectNodeContents(e[0]),r.collapse(!0),this.card.insertNode(r,n)}}function Er(e,t){if(e&&"li"===e.name)if(t&&_r.call(this,e),e.first()){var n=e.first();if(ur(n)){var r=n.next();r&&""!==r[0].nodeValue||e.append("<br />")}}else e.append("<br />")}function Cr(e){var t=kt(e.startContainer),n=e.startOffset,r=e.cloneRange(),a="li"===t.name?t:t.closest("li");if(!a[0])return!1;r.selectNodeContents(a[0]),r.setEnd(t[0],n);var o=r.cloneContents();if(!o.firstChild)return!0;if(1===o.childNodes.length&&"br"===kt(o.firstChild).name)return!0;if(1===o.childNodes.length&&ur(kt(o.firstChild)))return!0;if(2===o.childNodes.length&&ur(kt(o.firstChild))&&Zt.isEmptyNode(o.lastChild))return!0;var i=kt("<div />");return i.append(o),!!Zt.isEmptyNode(i[0])}var Or={exportParser:new or};function Sr(e,t){var n,r=window.getSelection(),a=(n=r.rangeCount>0?r.getRangeAt(0):document.createRange()).cloneRange(),o=kt('<div class="lake-engine-view">&#8203;</div>');o.css({position:"fixed",top:0,clip:"rect(0, 0, 0, 0)"}),o.on("copy",(function(e){jr(e)})),kt(document.body).append(o),o.append(kt(e).clone(!0)),t&&Zt.fetchAllChildren(o).forEach((function(e){e=kt(e),t.trigger("copy:each",e)})),o.append("@&#8203;"),n.selectNodeContents(o[0]),r.removeAllRanges(),r.addRange(n);var i=!1;try{if(!(i=document.execCommand("copy")))throw"copy command was unsuccessful"}catch(e){Qt.log("unable to copy using execCommand: ",e)}finally{o.remove(),r.removeAllRanges(),r.addRange(a)}return i}function Rr(e){var t=e.dataTransfer||e.clipboardData,n=t.getData("text/html"),r=t.getData("text"),a=[];try{t.items&&t.items.length>0?a=Array.from(t.items).map((function(e){var t="file"===e.kind?e.getAsFile():null;return null!==t&&(t.type&&t.type.indexOf("image/png")>-1&&!t.lastModified&&(t=new File([t],"image.png",{type:t.type})),t.ext=r.split(".").pop()),t})).filter((function(e){return e})):t.files&&t.files.length>0&&(a=Array.from(t.files))}catch(e){Qt.log(e),t.files&&t.files.length>0&&(a=Array.from(t.files))}return""===n&&/^.+\.\w+$/.test(r)&&a.length>0?r="":""===r&&/^(<meta.+?>)?<img.+?>$/.test(n)&&a.length>0?n="":(n||r)&&a.length&&(n.startsWith("<img")||!n&&/^http(s)?:/.test(r)||(a=[])),{html:n,text:r,files:a}}function jr(e,t,n){if(void 0===t&&(t=Or.exportParser),null!==t){var r=window.getSelection().getRangeAt(0);if(Or.preventCopySwitch&&Or.preventCopyContainer&&(Or.preventCopyContainer.contains(r.startContainer)||Or.preventCopyContainer.contains(r.endContainer)||r.commonAncestorContainer.contains(Or.preventCopyContainer)))return Or.preventCopyMessage(),void e.preventDefault();var a=kt((r=r.cloneRange()).startContainer).closest("[data-lake-card]",(function(e){return kt(e).isRoot()?null:e.parentNode}));if(a.length&&!r.collapsed&&0===r.endOffset&&(r.endContainer.previousSibling&&r.setEndAfter(r.endContainer.previousSibling),!r.collapsed&&r.endOffset>0&&r.endContainer.childNodes[r.endOffset-1]===a[0])){var o=kt(r.startContainer).closest('[data-card-element="center"]',(function(e){return kt(e).isRoot()?null:e.parentNode}));o.length?r.setEnd(o[0],o[0].childNodes.length):r.setEnd(a[0],a[0].childNodes.length)}var i=kt(r.commonAncestorContainer),c=i.closest("[data-lake-card]",(function(e){return kt(e).isRoot()?null:e.parentNode}));c.length&&(i.closest('[data-card-element="center"]',(function(e){return kt(e).isRoot()?null:e.parentNode})).length||(r.selectNode(c[0]),i=kt(r.commonAncestorContainer)));var l="#text"===i.name?[document.createElement("span")]:[],s=i.closest("[data-lake-card]",(function(e){return kt(e).isRoot()?null:(e.nodeType===Node.ELEMENT_NODE&&"inline"===window.getComputedStyle(e).getPropertyValue("display")&&l.push(e.cloneNode()),e.parentNode)})),u=i.find(".lake-engine-view").length>0||i.find(".lake-engine").length>0,d=i.closest(".lake-engine-view").length>0||i.closest(".lake-engine").length>0;if(!(s.length>0||!u&&!d)){if(d&&!i.isRoot()){var f=Cn(i),p=f.name;["h1","h2","h3","h4","h5","h6"].indexOf(p)>-1&&l.push(f[0].cloneNode())}if(e.preventDefault(),r.collapsed)e.clipboardData.setData("text/html",""),e.clipboardData.setData("text","");else{var h=r.cloneContents(),m=function(e){if(0===e.length)return{};for(var t=e.length-1;t>0;t--)e[t].appendChild(e[t-1]);return{inner:e[0],outter:e[e.length-1]}}(l),g=((k=(b=kt(r.commonAncestorContainer)).closest(".lake-engine")).length||(k=b.closest(".lake-engine-view")),k.length||(k=b.find(".lake-engine")),k.length||(k=b.find(".lake-engine-view")),k.length?kt(k).hasClass("lake-typography-classic")?"classic":"traditional":"classic"),v=t.options.typography;t.options.typography=g;var y=t.parse(h,m.inner,m.outter);t.options.typography=v,function(e,t){var n=function(e){var t=e.commonAncestorContainer;t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);var n=t.closest(".lake-engine,.lake-engine-view",document.body);if(!n)return null;var r=n._lakeContentView||n._lakeEngine;return r?r.schema:null}(t);if(n){var r=t.cloneContents();try{var a=document.createElement("div");a.appendChild(r),e.lake=new er(a,n).toValue()}catch(e){console.warn("failed to lake",e)}}}(y,r),y.html&&(y.html='<meta name="source" content="lake"/>'+y.html),n&&n(),y.lake&&e.clipboardData.setData("text/lake",y.lake),e.clipboardData.setData("text/html",y.html),e.clipboardData.setData("text",y.text)}var b,k}}}function Pr(){kt(document).on("copy",(function(e){jr(e)}))}Or.writeClipboard=jr,Or.customClipboard=Pr,Or.copyText=function(e){return k()(e)},Or.copyNode=Sr,Or.getClipboardData=Rr,Or.preventCopySwitch=!1,Or.preventCopyContainer=null,Or.preventCopyMessage=function(){console.log("禁止复制")},window.hasRegisterLakeDocClipboard||(Pr(),window.hasRegisterLakeDocClipboard=!0);var Ar={dataURIToFile:function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],r=new Uint8Array(t.length),a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return new Blob([r],{type:n})}};function Tr(e){if(!e)return 0;var t=parseInt(e.percent,10);return 100===t&&(t=99),t}function Dr(e,t,n){e.history.hold(),e.change.updateCard(t,n)}function Mr(e,t,n,r){var a=new Image;a.src=n.src,a.onload=function(){Dr(e,t,n)},a.onerror=function(){r<=3?setTimeout((function(){r++,Mr(e,t,n,r)}),500*r):Dr(e,t,n)}}var Nr={getUploadPercent:Tr,insertCard:function(e,t,n){return t.indexOf(":")>=0&&(t=t.split(":")[1]),"image"!==t&&(n.src=""),n.status="uploading",n.percent=Tr(n.progress),e.change.insertCard(t,n)},updateCardProgress:function(e,t){t.status="uploading";var n=Tr(t.progress);e.find("[data-role=percent]").html("".concat(n,"%"))},updateCard:function(e,t,n){var r=t.attr("data-lake-card");if("done"===n.status){var a=e.card.getValue(t);return a.status="done",a.src=n.src,a.message=n.message,a.size=a.size||0,void("image"===r?(a.ocrLocations=n.ocrLocations,Mr(e,t,a,0)):Dr(e,t,a))}if("error"===n.status){var o=e.card.getValue(t);o.status="error",o.src="",o.message=n.message,o.size=o.size||0,e.history.hold(),e.change.updateCard(t,o)}},updateImage:Mr};function Lr(e,t){return Math.floor(e+Math.random()*(t-e))}function Ir(e){if((e=kt(e)).isElement()){if(["cursor","anchor","focus"].includes(e.attr("data-lake-element")))return!0;if(e.attr("data-transient"))return!0;if(!e.isCard()&&e.closest(Se).length>0)return!0;if(e.isCard()&&e.parent()&&e.parent().closest(Se).length>0)return!0}return!1}function Br(e,t){return!(!(e=kt(e)).isRoot()||/^data-selection-/.test(t))||!(!e.isCard()||!["id","class","style"].includes(t))}function zr(e){return Fr(e.cloneRange())}function Fr(e){var t=kt(e.commonAncestorContainer);if(!t.isRoot()&&!t.isEditable())return[];En.downRange(e);var n=function(e,t){for(var n=e,r=[];n&&!kt(n).isRoot();){for(var a=n.previousSibling,o=0;a;)kt(a).attr("data-transient")||o++,a=a.previousSibling;r.unshift(o),n=n.parentNode}return r.push(t),r};return[n(e.startContainer,e.startOffset),n(e.endContainer,e.endOffset)]}function Ur(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];qr(r,e[n+1])?n++:t.push(r)}return t}function Vr(e){return(e.oi||e.od)&&e.p&&2===e.p.length&&1===e.p[0]&&e.p[1].startsWith("data-selection-")}function qr(e,t){return!!(e&&t&&(e.li&&t.ld&&O()(e.li,t.ld)&&(O()(e.p,t.p)||Hr(e.p,t.p)||Hr(t.p,e.p))||e.ld&&t.li&&O()(e.ld,t.li)&&O()(e.p,t.p)||e.si&&t.sd&&O()(e.si,t.sd)&&(O()(e.p,t.p)||Hr(e.p,t.p,e.si.length)||Hr(t.p,e.p,e.si.length))||e.sd&&t.si&&O()(e.sd,t.si)&&O()(e.p,t.p)))}function Hr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e.length!==t.length)return!1;var r=t.slice();return r[r.length-1]-=n,O()(e,r)}function Wr(e,t){var n=[];return t.forEach((function(e){n.push(e.ops)})),n.forEach((function(t){e=E.a.type.transform(e,t,"left")})),e}function Yr(e,t){if(Xr(t.p,e))if("li"in t)e[t.p.length-1]+=1;else if("ld"in t)e[t.p.length-1]-=1;else if("si"in t)e[t.p.length-1]+=t.si.length;else if("sd"in t){var n=t.p.length;e[n-1]-=t.sd.length,e[n-1]=Math.max(t.p[n-1],e[n-1])}return e}function Gr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=h()(e,2),r=n[0],a=n[1];if(!r||!a)return e;var o=r.map((function(e){return e+2})),i=a.map((function(e){return e+2})),c=[];return t.forEach((function(e){c=c.concat(e.ops)})),c.forEach((function(e){Yr(o,e),Yr(i,e)})),[o.map((function(e){return e-2})),i.map((function(e){return e-2}))]}function Xr(e,t){for(var n=0;void 0!==e[n];){if(!t[n])return!1;if(e[n]===t[n])n++;else{if(e[n]>t[n])return!1;if(e[n]<t[n])return void 0===e[n+1]}}return!0}function Kr(e,t){var n=e;return t.forEach((function(t){t.p[t.p.length-1]-2<=e&&("li"in t?n-=1:"ld"in t&&(n+=1))})),n}var Zr={random:Lr,randomString:function(){for(var e=8,t="23456789abcdefghijkmnpqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",n=t.length,r="";e--;)r+=t[Lr(0,n)];return r},isTransientElement:Ir,isTransientAttribute:Br,toPath:Fr,fromPath:function(e,t){var n=t[0].pop(),r=t[1].pop(),a=function(t){for(var n=kt(e)[0],r=0;r<t.length;r++){var a=t[r];a<0&&(a=0);for(var o=void 0,i=n.firstChild,c=0;i;)if(kt(i).attr("data-transient"))i=i.nextSibling;else{if(c===a||!i.nextSibling){o=i;break}c++,i=i.nextSibling}if(!o)break;n=o}return n},o=function(e,t,n,r){n&&(r<0&&(r=0),n.nodeType===Node.ELEMENT_NODE&&r>n.childNodes.length&&(r=n.childNodes.length),n.nodeType===Node.TEXT_NODE&&r>n.nodeValue.length&&(r=n.nodeValue.length),t[e](n,r))},i=a(t[0]),c=a(t[1]),l=document.createRange();return o("setStart",l,i,n),o("setEnd",l,c,r),l},reduceOperations:Ur,isCursorOp:Vr,isReverseOp:qr,transformOp:Wr,transformPath:Gr,affectPath:Xr,getRangePath:zr,getOldIndex:Kr};function $r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$r(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jr=function(){function e(t){if(l()(this,e),!t.container)throw new Error("please set a dom cantainer!");this.options=Qr({container:null,limitHeight:5e3,canvasCache:[],canvasCount:0},t),t.container.style["line-height"]="0px"}return u()(e,[{key:"_removeCanvas",value:function(){var e=this.options;e.canvasCache.forEach((function(e){e.parentElement.removeChild(e)})),e.canvasCache=[]}},{key:"_getCanvas",value:function(e){return e=e>0?e-1:e,this.options.canvasCache[e]}},{key:"resize",value:function(e,t){var n=this.options,r=n.limitHeight,a=n.canvasCount,o=n.container,i=Math.ceil(t/r),c=n.canvasCache;if(i!==a){this._removeCanvas(),c=[];for(var l=0;l<i;l++){var s=document.createElement("canvas");s.style["vertical-align"]="bottom",s.setAttribute("width",e),l===i-1?s.setAttribute("height",t%r):s.setAttribute("height",r),o.appendChild(s),c.push(s)}n.canvasCache=c}else{var u=this._getCanvas(i);c.forEach((function(t){t.setAttribute("width",e)})),u&&u.setAttribute("height",t%r)}}},{key:"_handleSingleRect",value:function(e){var t=e.x,n=e.y,r=e.index,a=e.width,o=e.height,i=e.callback,c=this.options.limitHeight,l=this._getCanvas(r);l&&i({x:t,y:n-c*(r-1),width:a,height:o,context:l.getContext("2d")})}},{key:"_drawRect",value:function(e){var t=e.x,n=e.y,r=e.width,a=e.height,o=e.fill,i=void 0===o?"#FFEC3D":o,c=e.stroke,l=void 0===c?"#FFEC3D":c;this._handleRect({x:t,y:n,width:r,height:a,callback:function(e){var t=e.x,n=e.y,r=e.width,a=e.height,o=e.context;o.fillStyle=i,o.strokeStyle=l,o.fillRect(t,n,r,a)}})}},{key:"_handleRect",value:function(e){var t=e.x,n=e.y,r=e.width,a=e.height,o=e.callback,i=this.options.limitHeight,c={x:t,y:n},l=n+a,s=Math.ceil(c.y/i),u=Math.ceil(l/i);s===u?this._handleSingleRect(Qr(Qr({},c),{},{index:s,width:r,height:a,callback:o})):(this._handleSingleRect(Qr(Qr({},c),{},{index:s,width:r,height:a,callback:o})),this._handleSingleRect(Qr(Qr({},c),{},{index:u,width:r,height:a,callback:o})))}},{key:"getImageData",value:function(e){var t=e.x,n=e.y,r=e.width,a=e.height,o=this.options.limitHeight,i=Math.ceil(n/o);return this._getCanvas(i).getContext("2d").getImageData(t,n,r,a)}},{key:"draw",value:function(e,t){this["_draw"+e](t)}},{key:"clearRect",value:function(e){var t=e.x,n=e.y,r=e.width,a=e.height;this._handleRect({x:t,y:n,width:r,height:a,callback:function(e){var t=e.x,n=e.y,r=e.width,a=e.height;e.context.clearRect(t,n,r,a)}})}},{key:"clear",value:function(){this.options.canvasCache.forEach((function(e){var t=e.getContext("2d"),n=Number(e.getAttribute("width")),r=Number(e.getAttribute("height"));t.clearRect(0,0,n,r)}))}},{key:"destroy",value:function(){this._removeCanvas()}}]),e}();function ea(e,t){Object.keys(t).forEach((function(n){"style"!==n&&(e[n]=t[n])})),t.style&&(e.style||(e.style={}),Object.keys(t.style).forEach((function(n){e.style[n]=t.style[n]})))}var ta=function(){function e(){l()(this,e),this.data={blocks:[],inlines:[],marks:[],globals:{}}}return u()(e,[{key:"add",value:function(e){var t=this;e=R()(e),Array.isArray(e)||(e=[e]),e.forEach((function(e){return function(e,t){var n;if("string"==typeof t?(n=t,(t={})[n]={}):n=Object.keys(t)[0],"div"===n)throw"setting div is not allowed";Ke[n]?e.blocks.push(t):Ze[n]?e.inlines.push(t):($e[n]&&e.marks.push(t),["block","inline","mark"].indexOf(n)>=0&&(e.globals[n]||(e.globals[n]={}),ea(e.globals[n],t[n])))}(t.data,e)}))}},{key:"clone",value:function(){var t=R()(this.data),n=new e;return n.data=t,n}},{key:"getValue",value:function(){var e=this;Object.keys(this.data.globals).forEach((function(t){var n=e.data.globals[t];e.data[t+"s"].forEach((function(e){ea(e[Object.keys(e)[0]],n)}))}));var t={};return Object.keys(this.data).forEach((function(n){"globals"!==n&&e.data[n].forEach((function(e){var n=Object.keys(e)[0],r=e[n];t[n]?ea(t[n],r):t[n]=r}))})),t}}]),e}(),na=function(){function e(t){l()(this,e),this.source=t}return u()(e,[{key:"toHTML",value:function(){var e=Ie(this.source);return(e=e.replace(/\n/g,"</p><p>").replace(/<p><\/p>/g,"<p><br /></p>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).indexOf("</p><p>")>=0&&(e="<p>".concat(e,"</p>")),e}}]),e}(),ra={text:"plain",sh:"bash",ts:"typescript",js:"javascript",py:"python",puml:"plantuml",vb:"basic"},aa=function(e){e.renderer.rules.fence=function(t,n){var r=t[n],a=r.info?e.utils.unescapeAll(r.info).trim():"",o="";return"mermaid"===a?'<div class="mermaid" data-source="'.concat(encodeURIComponent(r.content),'"></div>\n'):"flow"===a?'<div class="flowchart" data-source="'.concat(encodeURIComponent(r.content),'"></div>\n'):"graphviz"===a?'<div class="graphviz" data-source="'.concat(encodeURIComponent(r.content),'"></div>\n'):"plantuml"===a?'<p><img src="https://g.yuque.com/g?'.concat(encodeURIComponent(r.content),'"></p>'):(a&&(o=a.split(/\s+/g)[0]).replace(/=$|=\d+$|=\+$|!$|=!$/,""),'<pre data-syntax="'.concat(o=ra[o]||o,'"><code>').concat(r.content,"</code></pre>"))}},oa=function(){function e(){l()(this,e);var t=this.md=new P.a({html:!0,linkify:!0,breaks:!0});t.use(T.a),t.use(M.a),t.use(L.a),t.use(B.a),t.use(F.a),t.use(V.a),t.use(H.a),t.use(Y.a),t.use(aa)}return u()(e,[{key:"toHTML",value:function(e){return this.md.render(e)}}]),e}(),ia=function(e,t){return t=kt(t),e.insertNode(t[0]),e.selectNodeContents(t[0]),ln(e),e.collapse(!1),e};function ca(e,t){for(var n=[],r=t.first();r;){var a=r.next();n.push(r),e.append(r),r=a}return n}function la(e,t,n){var r=e.clone(!0),a=kt("[".concat(ge,"=").concat(t,"]"),r[0]),o=!1;return Rt(r[0],(function(e){if((e=kt(e))[0]===a[0])return a.remove(),void(o=!0);o&&e.remove()}),n),r}function sa(e,t){an(e);var n=kt(e.startContainer),r=n.isCard()?n:n.closest(Se);if(!(r.length>0&&"inline"===r.attr(Ce))&&(n.isMark()||n.parent().isMark())){var a=Mn(n);sn(e);var o=la(a.clone(!0),"cursor",!0),i=la(a.clone(!0),"cursor",!1);zn(o[0]),zn(i[0],(function(e){return e=kt(e),!t||Fn(e,t)})),a.empty();var c=ca(a,o),l=ca(a,i),s=kt("@​");if(l.length>0){var u=l[0];if(Tt(u[0])){for(;u.first()&&!u.first().isText();)u=u.first();u.isText()?u.before(s):u.prepend(s)}else u.before(s);e.selectNode(s[0]),e.collapse(!1)}else c.length>0?(c[c.length-1].after(s),e.selectNode(s[0]),e.collapse(!1)):(e.selectNodeContents(a[0]),e.collapse(!0));var d=!1;a.children().each((function(e){var t=kt(e);if(t.isText()){var n=e.textContent,r=n.replace(/\u200b+/g,"​");r!==n&&(e.textContent=r),d&&(r.startsWith("​")?(r=r.substring(1))?e.textContent=r:t.remove():d=!1),r.endsWith("​")&&(d=!0)}else d=!1})),s[0].parentNode&&function(e){if(e.nodeType===Node.TEXT_NODE){var t=e.textContent,n=t.length;r(e.previousSibling,!0),r(e.nextSibling,!1)}function r(r,a){function o(e){return a?e.previousSibling:e.nextSibling}for(;r;){if(r.nodeType!==e.nodeType)return;if(r.textContent===t){var i=o(r);r.parentNode.removeChild(r),r=i}else{if(a)for(;r.textContent.endsWith(t);)r.textContent=r.textContent.substring(0,r.textContent.length-n);else for(;r.textContent.startsWith(t);)r.textContent=r.textContent.substring(t.length);if(0!==r.textContent.length)return;var c=o(r);r.parentNode.removeChild(r),r=c}}}}(s[0])}}var ua=function(e,t){var n=Ot(e.startContainer);return"string"==typeof t&&(t=kt(t,n)),e.collapsed?(sa(e,t),e):(function(e,t){cn(e);var n=kt(e.startContainer),r=kt(e.endContainer),a=n.isCard()?n:n.closest(Se),o=r.isCard()?r:r.closest(Se);if(!(a.length>0&&"inline"===a.attr(Ce)||o.length>0&&"inline"===o.attr(Ce))){if(Mn(n)[0]!==Mn(r)[0]){var i=e.cloneRange();i.collapse(!0),sa(i,t),e.setStart(i.startContainer,i.startOffset);var c=e.cloneRange();return c.collapse(!1),sa(c,t),void e.setEnd(c.startContainer,c.startOffset)}var l=n.isMark()||n.parent().isMark(),s=r.isMark()||r.parent().isMark();if(l||s){var u=kt(e.commonAncestorContainer);u.isText()&&(u=u.parent());var d=Mn(u);sn(e);var f=la(d.clone(!0),"anchor",!0),p=function(e){var t=e.clone(!0),n=kt(ke,t[0]),r=kt(we,t[0]),a=!1;return Rt(t[0],(function(e){if((e=kt(e))[0]===r[0])return r.remove(),void(a=!0);a&&e.remove()}),!0),a=!1,Rt(t[0],(function(e){if((e=kt(e))[0]===n[0])return n.remove(),void(a=!0);a&&e.remove()}),!1),t}(d.clone(!0)),h=la(d.clone(!0),"focus",!1);zn(f[0]),zn(h[0]),d.empty(),ca(d,f);var m=ca(d,p);ca(d,h),e.setStartBefore(m[0][0]),e.setEndAfter(m[m.length-1][0])}}}(e,t),e)};function da(e,t){e=kt(e)[0],t&&e&&e.parentNode&&kt(e).before(t.cloneNode(!0)).after(t.cloneNode(!0))}var fa=function(e){var t=In(e);if(0===t.length)return e;var n=[t[0]];return t.length>1&&n.push(t.pop()),n.forEach((function(t){var n=t.prev(),r=t.next();if(n&&At(n[0],t[0],!0)){ln(e);var a=sn(e);Tn(n,t),un(e,a),t=n}if(r&&At(r[0],t[0],!0)){ln(e);var o=sn(e);Tn(t,r),un(e,o)}})),Pn(e),e},pa=function(e,t){var n=Ot(e.startContainer);return"string"==typeof t&&(t=kt(t,n)),e.collapsed||qn(e),ia(e,t),e.selectNode(t[0]),e.collapse(!1),"br"!==t.name&&Pn(e),e};function ha(e){return e=kt(e)[0],!!ct[e.nodeName.toLowerCase()]&&(0===e.childNodes.length||""===e.innerText)}var ma=function(e,t,n){var r=Ot(e.startContainer);"string"==typeof t&&(t=kt(t,r)),e.collapsed||qn(e);var a=Cn(e.startContainer);if(!a.isRoot()&&!a.isEditable())return e;if(a.isRoot())return(e=ia(e,t)).collapse(!1),e;1===a.children().length&&"br"===a.first().name&&(e.selectNodeContents(a[0]),e.collapse(!1)),cn(e);var o=sn(e);if(!o)return e;for(var i=a.clone(!1),c=a.first(),l=!0;c;){var s=c.next();c[0]!==o.anchor?(l||i.append(c),c=s):(l=!1,c=s)}return Tt(i[0])||a.after(i),un(e,o),e.setStartAfter(a[0]),e.collapse(!0),!Tt(a[0])||a.isTitle()||n||a.remove(),ia(e,t),e};function ga(e,t){for(var n=Cn(e);n;){var r=n.parent();if(!r)break;if(!n.isEditable())break;if(n.text().trim()!==r.text().trim())break;if(r.name===t)break;n=r}return n}var va=function(e,t){var n=Ot(e.startContainer);"string"==typeof t&&(t=kt(t,n));var r=function(e,t){for(var n=[],r=ga(e.startContainer,t.name),a=ga(e.endContainer,t.name),o="left",i=r.parent().first();i;){if(!(i=kt(i)).isBlock())return n;if(!i.isEditable())return n;i[0]===r[0]&&(o="center"),n.push({status:o,node:i}),i[0]===a[0]&&(o="right"),i=i.next()}return n}(e,t);if(0===r.length)return e;var a=r[0].node.parent();if(!a.isEditable())return e;if(a.isTable())return e;var o,i,c=r.some((function(e){return"left"===e.status})),l=r.some((function(e){return"right"===e.status}));if(c){var s=a;o=s.clone(!1),s.before(o)}if(l){var u=r[r.length-1].node.parent();i=u.clone(!1),u.after(i)}var d=sn(e);return r.forEach((function(e){var n=e.status,r=e.node,a=r.parent();"left"===n&&o.append(r),"center"===n&&a.name===t.name&&a.isEditable()&&Dn(a),"right"===n&&i.append(r)})),o&&"ol"===o.name&&i&&"ol"===i.name&&i.attr("start",(parseInt(o.attr("start"),10)||1)+o.find("li").length),un(e,d),e},ya=function(e){var t=Rn(e);return 0===t.length||(t.forEach((function(t){if("ol"===(t=t.closest("ul,ol")).name||"ul"===t.name){var n=t.prev(),r=t.next();if(n&&pr(n,t)){var a=sn(e);Tn(n,t),un(e,a),t=n}if(r&&pr(r,t)){var o=sn(e);Tn(t,r),un(e,o)}}})),An(e)),e},ba=function(e){var t=Rn(e);if(0===t.length)return e;var n=t[0].closest(".lake-engine").find("blockquote");if(n[0]){for(var r=sn(e),a=kt(n[0]).next();a;){var o=a.prev();"blockquote"===a.name&&a.name===o.name&&a.attr("class")===o.attr("class")&&Tn(o,a),a=a.next()}return un(e,r),e}};function ka(e){var t=e.firstChild;if(!kt(t).isBlock())return e;for(;["blockquote","ul","ol"].includes(kt(t).name);)t=t.firstChild;return t}function wa(e){var t=e.lastChild;if(!kt(t).isBlock())return e;for(;["blockquote","ul","ol"].includes(kt(t).name);)t=t.lastChild;return t}function xa(e,t){return"p"===t.name||e.name===t.name&&!("li"===e.name&&!pr(e.parent(),t.parent()))}function _a(e){for(e=kt(e);!e.isRoot();){var t=e.parent();if(e.remove(),!Tt(t))break;e=t}}var Ea={insertText:function(e,t){var n=Ot(e.startContainer);e.collapsed||qn(e);var r=n.createTextNode(t);return Pn(e=ia(e,r)),e},addMark:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=Ot(e.startContainer);if("string"==typeof t&&(t=kt(t,r)),e.collapsed){var a=r.createTextNode("​");return t.append(a),ia(e,t[0]),da(t[0],n),Pn(e),e}ua(e);var o=e.commonAncestorContainer;o.nodeType===Node.TEXT_NODE&&(o=o.parentNode);var i=sn(e);if(!i)return e;var c=!1;return Rt(o,(function(e){if((e=kt(e))[0]!==i.anchor){if(c){if(e[0]===i.focus)return c=!1,!1;if(e.isMark()&&!e.isCard()){if(!Tt(e[0]))return da(cr(e,t),n),!0;e.name!==t.name&&e.remove()}if(e.isText()&&!Tt(e[0])&&da(cr(e,t),n),e.isBlock()&&!e.isTable()&&Tt(e[0])){e.find("br").remove();var a=t.clone(),o=r.createTextNode("​");a.prepend(o),e.append(a),da(a,n)}}}else c=!0})),un(e,i),e},splitMark:ua,removeMark:function(e,t){var n=Ot(e.startContainer);if(t&&"string"==typeof t&&(t=kt(t,n)),ua(e,t),e.collapsed)return e;var r=e.commonAncestorContainer;r.nodeType===Node.TEXT_NODE&&(r=r.parentNode);var a=sn(e);if(!a)return e;var o=[],i=!1;return Rt(r,(function(t){if((t=kt(t))[0]!==a.anchor){if(i)return t[0]!==a.focus&&void(t.isMark()&&!t.isCard()&&e.isPointInRange(t[0],0)&&o.push(t))}else i=!0})),o.forEach((function(e){var n,r;if(Fn(e,t))Dn(e[0]);else if(t){var a=t.css();Object.keys(a).forEach((function(t){e.css(t,"")})),-1!==t[0].className.indexOf("lake-fontsize")&&(r=(n=e)[0].className.split(/\s+/).filter((function(e){return-1===e.indexOf("lake-fontsize")})),n[0].className=r.join(" "))}else e.removeAttr("class"),e.removeAttr("style")})),un(e,a),fa(e),e},insertMark:function(e,t){var n=Ot(e.startContainer);return"string"==typeof t&&(t=kt(t,n)),e.collapsed||qn(e),ia(e,t),Pn(e),e.selectNode(t[0]),e.collapse(!1),e},mergeMark:fa,insertInline:pa,wrapInline:function(e,t){if(!t)return e;if(e.collapsed)return e;t=kt(t,Ot(e.startContainer)),ua(e);var n=e.commonAncestorContainer;n.nodeType===Node.TEXT_NODE&&(n=n.parentNode);var r=sn(e);if(!r)return e;var a=!1,o=t.clone(!1);Rt(n,(function(e){if((e=kt(e))[0]!==r.anchor){if(a)return e[0]===r.focus?(a=!1,!1):e.isMark()&&!e.isCard()||e.isText()?Tt(e[0])?(e.remove(),!0):(o.parent()||e.before(o),o.append(e),!0):void(0!==o[0].childNodes.length&&(o=o.clone(!1)))}else a=!0}));var i=kt(r.anchor);!i.parent().isHeading()||i.prev()||i.next()||i.after("<br />");var c=kt(r.focus);return i[0]!==c[0]&&(!c.parent().isHeading()||c.prev()||c.next()||c.before("<br />")),un(e,r),e},unwrapInline:function(e){ua(e);var t=ir(e),n=sn(e);return t.forEach((function(e){Dn(e[0])})),un(e,n),fa(e),e},setBlocks:function(e,t){var n,r=Ot(e.startContainer);"object"===i()(t)?(n=t,t=null):(t=kt(t,r),(n=t.attr()).style=t.css());var a=Rn(e),o=kt(e.startContainer);if(o.isRoot()&&0===a.length){var c=t||kt("<p></p>");lr(c,n);var l=sn(e);return o.children().each((function(e){c.append(e)})),o.append(c),un(e,l),e}var s=sn(e);return a.forEach((function(e){e.attr(_e)||(t&&e.name!==t.name?wt(e,t):lr(e,n))})),un(e,s),e},splitBlock:function(e){e.collapsed||qn(e);var t=Cn(e.startContainer);if(!t.isRoot()&&!t.isEditable())return e;if(t.isRoot()){var n=e.startContainer.childNodes[e.startOffset];return n&&(e.selectNodeContents(n),ln(e),e.collapse(!0)),e}var r=e.cloneRange();ln(r),on(r),r.collapse(!0);var a=In(r),o=jn({block:t,range:e,isLeft:!1,keepID:!0});return Rt(o[0],(function(e){!(e=kt(e)).isVoid()&&(e.isInline()||e.isMark())&&Tt(e[0])&&e.remove()}),!0),ha(t)&&!ha(o)?ut(t[0],!0):ut(o[0],!0),t.after(o),Tt(t[0])&&t.html(Bn(a,"<br />")),Tt(o[0])&&o.html(Bn(a,"<br />")),e.selectNodeContents(o[0]),ln(e),1===o.children().length&&"br"===o.first().name?e.collapse(!1):e.collapse(!0),e},insertBlock:ma,wrapBlock:function(e,t){var n=Ot(e.startContainer);"string"==typeof t&&(t=kt(t,n));var r=Rn(e),a=[];if(0===(r=r.map((function(e){var t=e.parent();return"li"===e.name&&t&&["ol","ul"].indexOf(t.name)>=0?function(e,t){for(var n=0;n<e.length;n++)if(e[n][0]===t[0])return!0;return!1}(a,t)?null:(a.push(t),t):e})).filter((function(e){return e}))).length||r[0].isTable()){var o=Cn(e.startContainer),i=sn(e);return o.children().each((function(e){t.append(e)})),o.append(t),un(e,i),e}var c=sn(e);return r[0].before(t),r.forEach((function(e){t.append(e)})),un(e,c),e},unwrapBlock:va,insertFragment:function(e,t,n,r){var a=Cn(e.startContainer),o=Cn(e.endContainer)[0]===a[0],i=Sn(e,"end"),c=a.closest("blockquote"),l=e.collapsed,s=n.childNodes,u=kt(n.firstChild);if(l||qn(e,o||!i),!u[0])return e;if(!u.isBlock()&&!u.isCard())return ln(e),e.insertNode(n),e.collapse(!1),e;pn(e);var d,f=e.startContainer.childNodes[e.startOffset-1],p=e.startContainer.childNodes[e.startOffset];if(c[0]&&s.forEach((function(e){"blockquote"!==kt(e).name&&cr(kt(e),c.clone(!1))})),function(e,t,n){if(0!==t.length){var r=Ot(e.startContainer),a=kt(t[t.length-1]);"br"===a.name&&(a.remove(),a=kt(t[t.length-1]));for(var o=r.createDocumentFragment(),i=t[0];i;){i=kt(i),Zt.removeSideBr(i);var c=i.next();c||(a=i),o.appendChild(i[0]),i=c}e.insertNode(o),ln(e),e.collapse(!1),function(e,t){var n=t.closest(e.startContainer);n&&t&&t.focus(e,n,!1)}(e,n)}}(e,s,t),f){var h=kt(ka(f.nextSibling)),m=kt(wa(f));xa(m,h)?(function(e,t){if(e.name===t.name&&"p"===e.name){var n=t.attr();n.hasOwnProperty("data-lake-id")&&delete n["data-lake-id"],e.attr(n)}Dt(e[0])&&!Dt(t[0])&&(e[0].innerHTML=""),vr(e)===vr(t)&&xr(t)}(m,h),Tn(m,h,!1),_a(h)):(Tt(m)||"li"===(d=m).name&&(Zt.isEmptyNode(d)||(1===d.children().length?ur(d.first())||"br"===d.first().name:2===d.children().length&&ur(d.first())&&"br"===d.last().name)))&&_a(m)}if(p){var g=kt(wa(p.previousSibling)),v=kt(ka(p));e.selectNodeContents(g[0]),ln(e),e.collapse(!1),Tt(v)?_a(v):xa(g,v)&&(Tn(g,v,!1),_a(v))}return ba(e),ya(e),r&&r(e),e},deleteContent:qn,mergeAdjacentList:ya,mergeAdjacentBlockquote:ba,separateBlocks:function(e){var t=sr.getRangeBlocks(e);if(0===t.length)return e;var n,r,a,o,i=sn(e),c=(t=function(e,t){var n=[];e.forEach((function(e,t){var r=e.parent();if("p"===e.name){if("li"===r.name)return 0===t&&n.push(r),void sr.unwrapNode(e,"<p />");if(["ul","ol"].includes(r.name))return e=sr.setNode(e,"<li />"),void n.push(e)}if("li"===e.name&&"li"===r.name)return 0===t&&n.push(r),void sr.unwrapNode(e,"<li />");["ul","ol"].includes(e.name)&&"li"===r.name?sr.unwrapNode(e,"<".concat(e.name," />")):n.push(e)}));var r=kt(t.endContainer).closest("li");return n.some((function(e){return e[0]===r[0]}))||n.push(r),n}(t,e))[0],l=t[t.length-1],s=[],u=[];if("li"===c.name&&c.prev()){n=c.parent();for(var d=0;t[d]&&"li"===t[d].name;)s.push(t[d]),d+=1}if("li"===l.name&&l.next()){r=l.parent();for(var f=l.next();f&&"li"===f.name;)u.push(f),f=f.next()}if(u.length>0&&(a=r.clone(!1),u.forEach((function(e){a.append(e[0])})),r.after(a)),s.length>0&&(o=n.clone(!1),s.forEach((function(e){o.append(e[0])})),n.after(o)),n&&r&&r[0]===n[0]&&"ol"===n.name){var p=(parseInt(n.attr("start"),10)||1)+n.find("li").length;a.attr("start",p)}return un(e,i),e}},Ca={show:function(e,t,n){n=n||{placement:"top"},this.hide();var r=kt(function(e){return'\n  <div data-lake-element="embed-tooltip" class="lake-tooltip lake-tooltip-placement-'.concat(e.placement,' lake-embed-tooltip" style="transform-origin: 50% 45px 0px;">\n    <div class="lake-tooltip-content">\n      <div class="lake-tooltip-arrow"></div>\n      <div class="lake-tooltip-inner" data-role="tooltip"></div>\n    </div>\n  </div>\n  ')}(n));t=Ie(t),r.find("[data-role=tooltip]").html(t),kt(document.body).append(r);var a=r[0].clientWidth,o=r[0].clientHeight,i=e[0].clientWidth,c=e.offset(),l=Math.round(window.pageXOffset+c.left+i/2-a/2),s=Math.round(window.pageYOffset+c.top-o-2);r.css({left:l+"px",top:s+"px"}),r.addClass("lake-embed-tooltip-active")},hide:function(){kt("div[data-lake-element=embed-tooltip]").remove()}},Oa=function(){function e(t){l()(this,e),this.config=t,this.root=kt(function(e){var t="lake-embed-toolbar-btn ".concat(e.text?"with-text":"");return'\n  <span class="lake-embed-toolbar-item lake-embed-toolbar-item-'.concat(Ie(e.iconName),'" ').concat(e.disabled?'disabled="disabled"':"",'>\n    <a class="').concat(t,'" data-aspm-click="').concat(e.name||"unknown",'" data-aspm-param="').concat(e.cardName||"unknown",'" ').concat(e.disabled?'disabled="disabled"':""," ").concat(e.link?'href="'.concat(encodeURI(e.link),'" target="_blank"'):"",'>\n      <span class="lake-icon lake-icon-').concat(Ie(e.iconName),'"></span>\n      ').concat(e.text?'<span class="lake-embed-toolbar-btn-text">'.concat(Ie(e.text),"</span>"):"","\n    </a>\n  </span>\n  ")}(t))}return u()(e,[{key:"render",value:function(e){var t=this,n=this.config;e.append(this.root),n.title&&(this.root.on("mouseenter",(function(){Ca.show(t.root,n.title)})),this.root.on("mouseleave",(function(){Ca.hide()})),this.root.on("mousedown",(function(){Ca.hide()}))),!0!==n.disabled&&this.root.find("a").on("click",(function(e){e.stopPropagation(),n.onClick&&(e.preventDefault(),n.onClick())}))}}]),e}(),Sa=a.HotKeyUtils.isHotkey,Ra=function(){function e(t){var n;l()(this,e),this.config=t,this.root=kt('\n  <span class="lake-embed-toolbar-item lake-embed-toolbar-item-input">\n    <input data-role="input" placeholder="'.concat(Ie((n=t).placeholder),'" class="lake-embed-toolbar-linkinput" type="input" value="').concat(Ie(n.url),'" />\n  </span>\n  ')),this.onEnter=t.onEnter||function(){},this.onInput=t.onInput||function(){},this.onChange=t.onChange||function(){}}return u()(e,[{key:"find",value:function(e){var t="[data-role=".concat(e,"]");return this.root.find(t)}},{key:"render",value:function(e){var t=this,n=this.config,r=this.find("input");r[0].value=void 0!==n.url?n.url:"",r.on("keydown",(function(e){e.stopPropagation(),Sa("enter",e)&&(e.preventDefault(),r[0].blur(),t.onEnter(r[0].value))})),r.on("input",(function(){t.onInput(r[0].value)})),r.on("change",(function(){setTimeout((function(){t.onChange(r[0].value)}),10)})),e.append(this.root)}}]),e}(),ja=function(){function e(t){l()(this,e),g()(this,"config",null),g()(this,"$rootNode",null),g()(this,"$switch",null),this.config=t}return u()(e,[{key:"renderTo",value:function(e){var t,n,r=this;return this.$rootNode=kt((n=!!(t=this.config).checked,"function"==typeof t.getState&&(n=t.getState()),'\n    <div class="lake-embed-toolbar-item lake-embed-toolbar-dropdown-item lake-embed-toolbar-dropdown-switch" data-aspm-click="'.concat(t.name||"unknown",'" data-aspm-param="').concat(t.cardName||"unknown",'" accessbilityid="').concat(t.name,'">\n        <span class="text-content">').concat(Ie(t.title||""),'</span>\n        <button type="button" role="switch" aria-checked="true" class="ant-switch ant-switch-small ').concat(n?"ant-switch-checked":"",'"><div class="ant-switch-handle"></div><span class="ant-switch-inner"></span></button>\n    </div>\n  '))),this.$switch=this.$rootNode.find(".ant-switch"),e.append(this.$rootNode),this.$rootNode.on("mousedown",(function(e){e.preventDefault()})),this.$rootNode.on("click",(function(e){e.stopPropagation(),r.config.onClick&&(r.config.onClick(),r.updateSwitch())})),this}},{key:"updateSwitch",value:function(){"function"==typeof this.config.getState&&(this.config.getState()?this.$switch.addClass("ant-switch-checked"):this.$switch.removeClass("ant-switch-checked"))}}]),e}(),Pa=function(){function e(t){l()(this,e),g()(this,"config",null),g()(this,"$rootNode",null),this.config=t}return u()(e,[{key:"renderTo",value:function(e){var t,n=this;return this.$rootNode=kt((t=this.config,'<div class="lake-embed-toolbar-item lake-embed-toolbar-dropdown-item lake-embed-toolbar-dropdown-btn" accessbilityid="'.concat(t.name,'" data-aspm-click="').concat(t.name||"unknown",'" data-aspm-param="').concat(t.cardName||"unknown",'">\n    <span class="lake-embed-toolbar-btn-text">').concat(Ie(t.title),"</span>\n  </div>"))),e.append(this.$rootNode),this.config.onClick&&this.$rootNode.on("click",(function(){n.config.onClick()})),this}}]),e}(),Aa=function(){function e(t){var n=this;l()(this,e),g()(this,"$rootNode",null),g()(this,"$dropdown",null),g()(this,"documentMouseDown",(function(e){n.$rootNode[0].contains(e.target)||n.$dropdown.hasClass("show")&&n.hideDropdown()})),this.config=t}return u()(e,[{key:"render",value:function(e){var t,n;this.$rootNode=kt((t=this.config,n="lake-embed-toolbar-btn lake-embed-toolbar-dropdown-btn ".concat(t.text?"with-text":""),'\n  <span class="lake-embed-toolbar-item lake-embed-toolbar-dropdown">\n    <a class="'.concat(n,'" data-aspm-click="').concat(t.name||"unknown",'" data-aspm-param="').concat(t.cardName||"unknown",'">\n      <span class="lake-icon lake-icon-').concat(Ie(t.iconName),'"></span>\n      ').concat(t.text?'<span class="lake-embed-toolbar-btn-text">'.concat(Ie(t.text),"</span>"):"",'\n    </a>\n    <div class="dropdown-container"></div>\n  </span>\n  '))),e.append(this.$rootNode),this.initToggleEvent(),this.renderTooltip(),this.renderDropdown(e)}},{key:"destroy",value:function(){document.removeEventListener("mousedown",this.documentMouseDown,!0)}},{key:"initToggleEvent",value:function(){var e=this,t=this.$rootNode.find(".lake-embed-toolbar-dropdown-btn");t.on("mousedown",(function(e){e.preventDefault(),e.stopPropagation()})),t.on("click",(function(t){t.stopPropagation(),e.toggleDropdown()})),document.addEventListener("mousedown",this.documentMouseDown,!0)}},{key:"renderTooltip",value:function(){var e=this,t=this.config;if(t.title){var n=this.$rootNode;n.on("mouseenter",(function(){Ca.show(e.$rootNode,t.title)})),n.on("mouseleave",(function(){Ca.hide()})),n.on("mousedown",(function(){Ca.hide()}))}}},{key:"renderDropdown",value:function(e){var t=this,n=this.config;this.$dropdown=e.find(".dropdown-container"),n.items.forEach((function(e){return"switch"===e.type?new ja(e).renderTo(t.$dropdown):new Pa(e).renderTo(t.$dropdown)})),this.$dropdown.on("click",(function(e){e.stopPropagation(),t.hideDropdown()}))}},{key:"toggleDropdown",value:function(){this.$dropdown.hasClass("show")?this.hideDropdown():this.showDropdown()}},{key:"showDropdown",value:function(){this.$dropdown.addClass("show")}},{key:"hideDropdown",value:function(){this.$dropdown.removeClass("show")}}]),e}(),Ta=function(){function e(t){var n=this;l()(this,e),g()(this,"items",[]),g()(this,"addItems",(function(e){n.config.list.forEach((function(t){var r=null;"button"===t.type&&(r=new Oa(t)).render(e),"url"===t.type&&(r=new Ra(t)).render(e),"dropdown"===t.type&&(r=new Aa(t)).render(e),"node"===t.type&&(r=t.node,e.append(r)),r&&n.items.push(r)}))})),g()(this,"setPosition",(function(){var e=n.config.range;if(e){var t=e.getBoundingClientRect(),r=Math.round(window.pageXOffset+t.left),a=Math.round(window.pageYOffset+t.top+t.height)+5,o=n.root[0].clientWidth,i=document.body.clientWidth;r+o>i-10&&(r=i-o-10),n.root.css({left:r+"px",top:a+"px"})}})),this.config=t,this.root=kt('<div class="lake-embed-toolbar lake-embed-toolbar-active" contenteditable="false"></div>'),this.image=this.find("image")}return u()(e,[{key:"find",value:function(e){var t="[data-role=".concat(e,"]");return this.root.find(t)}},{key:"destroy",value:function(){this.root.remove(),this.items.forEach((function(e){e.destroy&&e.destroy()}))}},{key:"hide",value:function(){this.root.removeClass("lake-embed-toolbar-active")}},{key:"show",value:function(){this.root.addClass("lake-embed-toolbar-active"),this.config&&this.config.automaticPositioning&&this._autoPositioning()}},{key:"_autoPositioning",value:function(){if(this.config.scrollNode){var e=this.root.closest("[data-lake-card]");if(e&&e.length){var t=e.getBoundingClientRect(),n=this.config.scrollNode.getBoundingClientRect(),r=this.root[0].getBoundingClientRect(),a=Math.min(n.bottom,window.innerHeight||n.bottom);t.top-10-r.height<=n.top&&t.bottom+10+r.height<=a?this.root.css({top:"100%",marginTop:"10px"}):this.root.css({top:"",marginTop:""})}}}},{key:"render",value:function(e){e.find(".lake-embed-toolbar").remove();var t=this.config,n=kt('<div class="lake-embed-toolbar-group" data-aspm="card-toolbar"></div>');this.root.append(n),this.addItems(n),e.append(this.root),this.setPosition(),"inline"===t.type?this.root.addClass("lake-embed-toolbar-inline"):this.root.addClass("lake-embed-toolbar-block"),["center","right"].indexOf(t.align)>=0&&this.root.addClass("lake-embed-toolbar-".concat(t.align)),this.root.on("click",(function(e){e.preventDefault(),e.stopPropagation()}))}}]),e}();Ta.Button=Oa,Ta.InputUrl=Ra;var Da=["p","br",{img:{src:"@url",width:"@number",height:"@number",style:{width:"@length",height:"@length"}}},{a:{href:"@url",target:["_blank","_parent","_top"]}}],Ma=[["b","strong"],[{span:{style:{"font-weight":["bold","700"]}}},"strong"],["i","em"],[{span:{style:{"font-style":"italic"}}},"em"],[{span:{style:{"text-decoration":"underline"}}},"u"],["s","del"],["strike","del"],[{span:{style:{"text-decoration":"line-through"}}},"del"],["th","td"]],Na=function(){function e(){l()(this,e),this.data=Ma}return u()(e,[{key:"getValue",value:function(){return this.data}},{key:"clone",value:function(){var t=R()(this.data),n=new e;return n.data=t,n}}]),e}(),La=function(){function e(t){l()(this,e),this.change=t,this.engine=t.engine,this.doc=this.change.doc,this.data={}}return u()(e,[{key:"add",value:function(e,t){this.data[e]=t}},{key:"queryEnabled",value:function(e){return!!this.data[e]}}]),e}();function Ia(e){for(e=kt(e);e;){if(e.isRoot())return;if(e.attr(_e))return e;e=e.parent()}}function Ba(e){return e.engine||e.contentView}function za(e){return!!(e&&(e.engine||e.contentView)&&e.cardRoot&&e.cardRoot[0]&&e.cardRoot[0].parentNode)}["queryState","execute"].forEach((function(e){La.prototype[e]=function(){var t=Array.prototype.slice.call(arguments),n=t[0];if(n&&this.data[n]&&this.data[n][e]){t.shift();var r=t.slice(1);"execute"===e&&(this.change.cacheRangeBeforeCommand(),this.engine.event.trigger("beforeCommandExecute",n,r));try{var a=this.data[n][e].apply(this,t);return"execute"===e&&(["undo","redo"].includes(n)||this.change.combinTextNode(),this.change.onSelect(),this.engine.event.trigger("afterCommandExecute",n,r)),a}catch(e){console.log(e)}}}}));var Fa=function(){function e(t,n,r){var a,o=this;l()(this,e),g()(this,"cardManager",null),g()(this,"record",null),g()(this,"engineContentView",null),g()(this,"screenHeight",0),g()(this,"_disabled",!1),this.engineContentView=t,this.cardManager=n,this.record=r,this.screenHeight=(window.screen&&(a=window.screen.height),"number"==typeof a?a:Math.max(document.documentElement.clientHeight,document.body.clientHeight));var i=this.tryRender;this.tryRender=$()((function(){i.call(o)}),32)}return u()(e,[{key:"start",value:function(){var e=this;this.render(),requestAnimationFrame((function(){var t=e.engineContentView,n=t.getScrollNode,r=t.scrollNode,a=t.editArea,o=r||(n?n(a[0]):document.body),i=$()((function(){e.render()}),32);kt(o).on("scroll",i,{passive:!0}),e.cancelListenHandler=function(){kt(o).off("scroll",i,{passive:!0})},e.render()}))}},{key:"disable",value:function(){this._disabled||(this._disabled=!0,this.cancelListenHandler&&this.cancelListenHandler(),this._forceRender())}},{key:"isDisabled",value:function(){return this._disabled}},{key:"render",value:function(){for(var e=this.record.queue;e[this.record.index];){var t=this.record.index,n=e[t],r=n.cardRoot;if(this.isOutOfScreen(r,2))return!0;this.record.index++,za(n)&&this.eat(n,t)}return!1}},{key:"tryRender",value:function(){this.render()}},{key:"_forceRender",value:function(){for(var e=this.record.queue;e[this.record.index];){var t=this.record.index,n=e[t];this.record.index++,za(n)&&this.eat(n,t)}}},{key:"isOutOfScreen",value:function(e,t){if(!e||!e[0])return!1;var n=e.getBoundingClientRect().top;if(n<this.screenHeight*t)return!1;var r=window.location.hash;if(!r)return!0;try{var a=kt('[id="'.concat(r.substring(1),'"]'))[0];return!a||n>a.getBoundingClientRect().bottom}catch(e){return console.warn(e),!0}}},{key:"eat",value:function(e,t){var n=this.record.operations[t],r=Ba(e);n&&r&&(this.cardManager.render(e.container,e),n.inserted&&e.didInsert&&e.didInsert(e.value),n.updated&&e.didUpdate&&e.didUpdate(e.value))}}]),e}(),Ua=function(){function e(t){l()(this,e),g()(this,"cardManager",null),g()(this,"rootNode",null),g()(this,"consumer",null),g()(this,"refs",new WeakMap),this.cardManager=t}return u()(e,[{key:"insert",value:function(e,t){if(!this.allowDeferredRendering(t))return this.cardManager.render(t.container,t),void(t.didInsert&&t.didInsert(t.value));za(t)&&this.recordComponentOperation(t,"inserted")}},{key:"update",value:function(e,t){if(!this.allowDeferredRendering(t))return this.cardManager.render(e,t),void(t.didUpdate&&t.didUpdate(t.value));za(t)&&this.recordComponentOperation(t,"updated")}},{key:"run",value:function(e){if(e){var t=this.getRecord(e);t.running||0===t.queue.length||(t.running=!0,t.consumer=new Fa(e,this.cardManager,t),t.consumer.start())}}},{key:"disable",value:function(e){if(e){var t=this.getRecord(e);t.consumer&&t.consumer.disable()}}},{key:"allowDeferredRendering",value:function(e){var t=Ba(e);if(!t)return!1;if(!t.isDeferredRendering()||!this._allowCard(e.name))return!1;var n=this.getRecord(t);return!n.running||!n.consumer.isDisabled()}},{key:"getRecord",value:function(e){return this.refs.has(e)||this.refs.set(e,{running:!1,queue:[],rootNodes:[],operations:{},index:0}),this.refs.get(e)}},{key:"recordComponentOperation",value:function(e,t){var n=Ba(e),r=this.getRecord(n),a=r.rootNodes.indexOf(e.cardRoot[0]);-1===a?(r.rootNodes.push(e.cardRoot[0]),a=r.rootNodes.length-1,r.queue.push(e),r.operations[a]={}):(r.queue[a]=e,r.operations[a]={}),r.operations[a][t]=!0,r.running&&r.consumer.tryRender()}},{key:"_allowCard",value:function(e){var t=K()(window,"appData.settings.enable_lazyload_card","").split(",");return!t.length&&a.ua.desktop&&(t=["codeblock","image","table"]),-1!==t.indexOf(e)}}]),e}(),Va=window.location.search.indexOf("view=doc_embed")>0;function qa(e){return kt(e)[0].getAttribute("data-lake-card")||"unknown"}var Ha=!0;function Wa(e,t,n,r,a){var o=this;if("separator"===e.type)return{type:"node",node:kt('<span class="lake-embed-toolbar-item-split"></span>')};var i=qa(r);return"copy"===e.type?{type:"button",name:"copy",cardName:i,iconName:"copy",title:a.copy.tips,onClick:function(){Sr(r,t.event)?t.messageSuccess(a.copy.success):t.messageError(a.copy.error)}}:"delete"===e.type?{type:"button",cardName:i,name:"delete",iconName:"delete",title:e.title||t.lang.delete.tips,onClick:function(){t.change.removeCard(r)}}:"maximize"===e.type?{type:"button",cardName:i,name:"maximize",iconName:"maximize",title:t.lang.maximize.tips,onClick:function(){o.maximize({cardRoot:r,engine:t,contentView:n})}}:"collapse"===e.type?{type:"button",cardName:i,name:"collapse",iconName:"compact-display",title:t.lang.collapse.tips,onClick:function(){o.collapse({cardRoot:r,engine:t,contentView:n})}}:"expand"===e.type?{type:"button",name:"expand",cardName:i,iconName:"embedded-preview",title:t.lang.expand.tips,onClick:function(){o.expand({cardRoot:r,engine:t,contentView:n})}}:"preferences"===e.type?{type:"button",name:"preferences",cardName:i,iconName:"preferences",title:t.lang.preferences.tips,onClick:function(){e.onClick&&e.onClick()}}:"download"===e.type?{type:"button",name:"download",cardName:i,iconName:"download",title:t.lang.download.tips,onClick:function(){e.onClick&&e.onClick()}}:"copyCardLink"===e.type?{type:"button",name:"copyCardLink",cardName:i,iconName:"link",title:t.lang.copyCardLink.tips,onClick:function(){e.onClick&&e.onClick()}}:"gotolink"===e.type?{type:"button",name:"gotolink",cardName:i,iconName:"gotolink",title:e.title||t.lang.gotoLink.tips,link:e.link,onClick:e.onClick}:"preview"===e.type?{type:"button",name:"preview",cardName:i,iconName:"preview",title:t.lang.preview.tips,onClick:function(){e.onClick&&e.onClick()}}:"doc-title"===e.type?{type:"button",name:"docTitle",cardName:i,iconName:"doc-title",title:e.title||t.lang.docTitle.tips,text:e.text,onClick:function(){e.onClick&&e.onClick()}}:"doc-card"===e.type?{type:"button",name:"docCard",cardName:i,iconName:"doc-card",title:t.lang.docCard.tips,onClick:function(){e.onClick&&e.onClick()}}:"doc-embed"===e.type?{type:"button",name:"docEmbed",cardName:i,iconName:"doc-embed",title:t.lang.docEmbed.tips,onClick:function(){e.onClick&&e.onClick()}}:"more"===e.type?{type:"dropdown",name:"more",cardName:i,iconName:"more",title:e.title||a.more.tips,items:e.items.map((function(e){return Wa.call(o,e,t,n,r,a)}))}:"height-mode-default"===e.type?{type:"button",name:"heightModeDefault",cardName:i,iconName:"height-mode-default",title:t.lang.heightMode.default,disabled:e.disabled,onClick:function(){e.onClick&&e.onClick()}}:"height-mode-adaptive"===e.type?{type:"button",name:"heightModeAdaptive",cardName:i,iconName:"height-mode-adaptive",title:t.lang.heightMode.adaptive,disabled:e.disabled,onClick:function(){e.onClick&&e.onClick()}}:(e.cardName=i,e)}var Ya=function(){function e(){l()(this,e),this.componentClasses={},this.components=[],this.idCache={},this.renderController=new Ua(this)}return u()(e,[{key:"openId",value:function(e){Ha=e}},{key:"getLang",value:function(e){var t=e.engine,n=e.contentView;return t&&t.lang||n&&n.lang}},{key:"getEditArea",value:function(e){var t=e.engine,n=e.contentView;return t&&t.editArea||n&&n.editArea}},{key:"add",value:function(e,t){this.componentClasses[e]=t}},{key:"getId",value:function(e,t){var n=this.idCache;for(e||(e=De());n[e]&&n[e].component!==t;)e=De();return e}},{key:"setId",value:function(e){var t=e.value;if(t&&"object"===i()(t)){var n=this.getId(t.id,e),r=this.idCache;t.id=n,r[n]={component:e}}}},{key:"create",value:function(e){var t=e.component,n=e.engine,r=e.contentView,a=e.cardRoot,o=t.type,i=t.name,c=t.value,l=t.container,s=t.state.readonly,u=void 0===t.hasFocus?!s:t.hasFocus;if(["inline","block"].indexOf(o)<0)throw"".concat(i,': the type of card must be "inline", "block"');var d="inline"===o?"span":"div";a?a.empty():a=kt("<".concat(d," />")),this.components.push({node:a,component:t}),a.attr(Ce,o),a.attr(_e,i),u?l.attr("contenteditable","false"):a.attr("contenteditable","false"),this.setValue(a,c);var f=kt("<".concat(d," ").concat(Oe,'="body" />'));if(u){var p=kt("<span ".concat(Oe,'="left">&#8203;</span>')),h=kt("<span ".concat(Oe,'="right">&#8203;</span>'));f.append(p),f.append(l),f.append(h)}else f.append(l);return a.append(f),t.embedToolbar&&this.setToolbar({cardRoot:a,component:t,engine:n,contentView:r}),t.cardRoot=a,a}},{key:"showToolbar",value:function(e,t){this.find(e,".lake-card-dnd").addClass("lake-card-dnd-active"),t?this.showCardToolbar(e,t.clientX):this.showCardToolbar(e)}},{key:"getComponentsByName",value:function(e){return this.gc(),this.components.filter((function(t){return t.component.name===e})).map((function(e){return e.component}))}},{key:"getCardRootByName",value:function(e){return this.components.filter((function(t){return t.component.name===e})).map((function(e){return e.node[0]}))}},{key:"showCardToolbar",value:function(e,t){var n=kt(e),r=this.find(e,".lake-card-toolbar");if(r.length&&(r[0].style.left="0px",n.addClass("lake-card-embed-toolbar-active"),r[0]._toolbar&&r[0]._toolbar.show(),r.addClass("lake-embed-toolbar-active"),0===t||t)){var a=r[0].firstChild;if(a){var o=n[0].getBoundingClientRect();if(!(t<o.left||t>o.right)){var i=a.getBoundingClientRect(),c=o.width-i.width;if(!(c<=0)){var l=t-o.left-i.width/2;r[0].style.left=Math.max(Math.min(l,c),0)+"px"}}}}}},{key:"hideToolbar",value:function(e){this.find(e,".lake-card-dnd").removeClass("lake-card-dnd-active"),this.hideCardToolbar(e)}},{key:"hideCardToolbar",value:function(e){this.find(e,".lake-card-toolbar").removeClass("lake-embed-toolbar-active"),e.removeClass("lake-card-embed-toolbar-active")}},{key:"setToolbar",value:function(e){var t=this,n=e.cardRoot,r=e.component,o=e.engine,i=e.contentView,c=r.embedToolbar();if(Array.isArray(c)){var l=n.first(),s=this.getLang({engine:o,contentView:i}),u=this.getEditArea({engine:o,contentView:i});if(o){if(c.find((function(e){return"dnd"===e.type}))){var d=kt(function(e){var t=qa(e);return'\n    <div class="lake-card-dnd" draggable="true" contenteditable="false">\n      <div class="lake-card-dnd-trigger" data-aspm-click="dnd" data-aspm-param="'.concat(t,'">\n        <span class="lake-icon lake-icon-drag"></span>\n      </div>\n    </div>\n  ')}(n));d.on("mouseenter",(function(){Ca.show(d,s.dnd.tips)})),d.on("mouseleave",(function(){Ca.hide()})),d.on("mousedown",(function(e){e.stopPropagation(),Ca.hide(),t.hideCardToolbar(n)})),d.on("mouseup",(function(){t.showCardToolbar(n)})),l.append(d),c=c.filter((function(e){return"dnd"!==e.type}))}if((c=c.map((function(e){return Wa.call(t,e,o,i,n,s)}))).length){var f=new Ta({scrollNode:o?K()(o,"options.scrollNode"):null,automaticPositioning:K()(o,"options.automaticPositioning"),list:c});f.root.addClass("lake-card-toolbar"),f.root[0]._toolbar=f,f.render(l),f.hide(),r&&(r.embedToolbarInstance=f)}}else{if(Va||!u||0!==u.closest(Se).length)return;var p=["maximize","copyContent","download","copyCardLink","button"],h=c.filter((function(e){return-1!==p.indexOf(e.type)})).map((function(e){var r=e.type;if("button"===r)return e;var a={type:"button",name:r,iconName:r,title:e.tips||s[e.type].tips,onClick:function(){e.onClick?e.onClick():t[r]&&(t[r]({cardRoot:n,engine:o,contentView:i}),t.hideCardToolbar(n))}};return"copyCardLink"===r&&(a.iconName="link"),a}));if(h&&h.length>0){var m=new Ta({automaticPositioning:K()(o,"options.automaticPositioning"),list:h});m.root.addClass("lake-card-toolbar"),m.root[0]._toolbar=m,m.render(l),a.ua.mobile?n.on("mousedown",(function(){m.show()})):n.on("mouseenter",(function(){m.show()})),n.on("mouseleave",(function(){m.hide()})),m.hide()}}}}},{key:"updateToolbar",value:function(e){this.setToolbar({cardRoot:e.cardRoot,component:e,engine:e.engine,contentView:e.contentView})}},{key:"copyContent",value:function(e){var t=e.cardRoot,n=this.getComponent(t);n.copyContent&&n.copyContent()}},{key:"getOptions",value:function(e){var t=e.engine,n=e.contentView;return t?t.options:n?n.options:void 0}},{key:"collapse",value:function(e){var t=e.cardRoot,n=this.getComponent(t);!1===n.state.collapsed&&(n.state.collapsed=!0,n.collapse&&n.collapse())}},{key:"expand",value:function(e){var t=e.cardRoot,n=this.getComponent(t);!0===n.state.collapsed&&(n.state.collapsed=!1,n.expand&&n.expand())}},{key:"defalutMaximize",value:function(e){var t,n=this,r=e.cardRoot,a=e.engine,o=e.contentView,i=this.getLang({engine:a,contentView:o}),c=this.getComponent(r),l=this.findByKey(r,"body"),s=kt((t=i.maximize.back,'\n    <div class="header clearfix" data-transient="true">\n      <div class="header-crumb header-crumb-sm">\n        <a class="split">\n          <span class="lake-icon lake-icon-arrow-left"></span>\n        </a>\n        <a>'.concat(t,"</a>\n      </div>\n    </div>\n  "))),u=s.find(".header-crumb");s.on("click",(function(e){return e.stopPropagation()})),r.addClass("lake-card-block-max"),u.on("click",(function(){n.restore({cardRoot:r,engine:a,contentView:o})})),l.prepend(s),a&&(this.findByKey(r,"center").addClass("edit"),a.event.trigger("maximizecard"),a.history.reset()),c.maximize&&c.maximize()}},{key:"maximize",value:function(e){var t=this,n=e.cardRoot,r=e.engine,a=e.contentView,o=this.getComponent(n),i=this.getOptions({engine:r,contentView:a}).customMaximize,c=function(){t.defalutMaximize({cardRoot:n,engine:r,contentView:a})};o.state.maximize=!0,i&&"function"==typeof i?i({cardRoot:n,engine:r,contentView:a,defalutMaximize:c}):c()}},{key:"defalutRestore",value:function(e){var t=e.cardRoot,n=e.engine,r=this.getComponent(t);t.removeClass("lake-card-block-max"),t.find(".header").remove(),r.state.maximize=!1,r.restore&&r.restore(),n&&(this.findByKey(t,"center").removeClass("edit"),n.event.trigger("restorecard"),n.history.reset())}},{key:"restore",value:function(e){var t=this,n=e.cardRoot,r=e.engine,a=e.contentView,o=this.getOptions({engine:r,contentView:a}).customMaximizeRestore,i=function(){t.defalutRestore({cardRoot:n,engine:r,contentView:a})};o&&"function"==typeof o?o({cardRoot:n,engine:r,contentView:a,defalutRestore:i}):i()}},{key:"closest",value:function(e){return Ia(e)}},{key:"getBlockCardRoot",value:function(e){if(e=kt(e),!kt(e)[0])return null;var t=e[0].parentNode;if(!t)return null;var n=this.closest(t);return n?this.isBlock(n)?n:this.getBlockCardRoot(n):null}},{key:"isInline",value:function(e){return!(!e||0===e.length)&&"inline"===e.attr(Ce)}},{key:"isBlock",value:function(e){return!(!e||0===e.length)&&"block"===e.attr(Ce)}},{key:"getName",value:function(e){return e&&0!==e.length&&e.attr(_e)||""}},{key:"getCenter",value:function(e){return e.find(Pe)}},{key:"isCenter",value:function(e){return"center"===e.attr(Oe)}},{key:"isCursor",value:function(e){return this.isLeftCursor(e)||this.isRightCursor(e)}},{key:"isLeftCursor",value:function(e){return kt(e).closest(je).length>0}},{key:"isRightCursor",value:function(e){return kt(e).closest(Ae).length>0}},{key:"getComponent",value:function(e){var t=this.components.filter((function(t){return t.node[0]===e[0]}));if(0!==t.length)return t[0].component}},{key:"removeComponent",value:function(e){var t=this;this.components.forEach((function(n,r){if(n.node[0]===e[0])return t.components.splice(r,1),!1}))}},{key:"find",value:function(e,t){var n=this,r=e.find(t),a=[];return r.each((function(t){var r=n.closest(t);r&&r[0]===e[0]&&a.push(t)})),kt(a)}},{key:"findByKey",value:function(e,t){return this.find(e,"[".concat(Oe,"=").concat(t,"]"))}},{key:"getSingleCardRoot",value:function(e){var t=this.closest(e.commonAncestorContainer);return t||(t=this.getSingleSelectedCard(e))||null}},{key:"getSingleSelectedCard",value:function(e){var t=wn(e),n=t[0];return!(1!==t.length||!n||!(n=kt(n)).isCard())&&n}},{key:"focus",value:function(e,t,n){var r=this.findByKey(t,"left"),a=this.findByKey(t,"right");0!==r.length&&0!==a.length&&(e.selectNodeContents(n?r[0]:a[0]),e.collapse(!1))}},{key:"setValue",value:function(e,t){if(null!=t){var n=this.getComponent(e);if(n){var r=n.constructor,a=n.value;"object"===i()(a)&&a.id&&(t.id=a.id),r.uid&&Ha&&this.setId(n),n.value=t}if(t=Ye(t),e.attr("data-card-value")!==t)return e.attr("data-card-value",t),!0}}},{key:"getValue",value:function(e){var t=e.attr("data-card-value");if(t)return Ge(t)}},{key:"focusPrevBlock",value:function(e,t,n){var r;if("inline"===t.attr(Ce)){var a=Cn(t);r=a.isRoot()?t.prevElement():a.prevElement()}else r=t.prevElement();if(n){if(!r||r.attr(_e)){var o=kt("<p><br /></p>");return t.before(o),e.selectNodeContents(o[0]),void e.collapse(!1)}}else{if(!r)return;if(r.attr(_e))return void this.focus(e,r,!1)}e.selectNodeContents(r[0]),ln(e),e.collapse(!1)}},{key:"focusNextBlock",value:function(e,t,n){var r;if("inline"===t.attr(Ce)){var a=Cn(t);r=a.isRoot()?t.nextElement():a.nextElement()}else r=t.nextElement();if(n){if(!r||r.attr(_e)){var o=kt("<p><br /></p>");return t.after(o),e.selectNodeContents(o[0]),void e.collapse(!1)}}else{if(!r)return;if(r.attr(_e))return void this.focus(e,r,!1)}e.selectNodeContents(r[0]),ln(e),e.collapse(!0)}},{key:"insertNode",value:function(e,t,n){var r="inline"===t.type;e.collapsed||qn(e),this.gc();var a=this.create({component:t,engine:n});return r?pa(e,a):ma(e,a),this.focus(e,a),["ol","ul","blockquote"].indexOf(a.parent().name)>=0&&va(e,a.parent()),this.renderController.insert(t.container,t),a}},{key:"removeNode",value:function(e,t){var n=this.getComponent(e);n&&(this.destroyComponent(n),"block"===n.type&&t&&t.readonly(!1),this.removeComponent(e),e.remove())}},{key:"destroyComponent",value:function(e){e.destroy&&e.destroy(),e.embedToolbarInstance&&e.embedToolbarInstance.destroy();var t=e.value;if(t&&"object"===i()(t)){var n=t.id,r=this.idCache;n&&r[n]&&delete r[n]}}},{key:"updateNode",value:function(e,t){var n=t.value;this.destroyComponent(t),this.findByKey(e,"center").empty(),this.setValue(e,n),this.renderController.update(t.container,t)}},{key:"replaceNode",value:function(e,t,n){var r=this.componentClasses[t].type,a=kt(qe('<card type="'.concat(r,'" name="').concat(t,'"></card>')));this.setValue(a,n),e.before(a),a.append(e)}},{key:"gc",value:function(){for(var e=0;e<this.components.length;e++){var t=this.components[e].node,n=this.components[e].component;t[0]&&t.closest("body").length>0||(this.destroyComponent(n),this.components.splice(e,1),e--)}}},{key:"render",value:function(e,t){try{var n=t.value,r=t.cardRoot;n&&"object"===i()(n)&&n.id&&r.attr("id",n.id),t.render(e,t.value)}catch(e){console.error("render error: ",e)}}},{key:"createComponent",value:function(e){var t=this.componentClasses[e.name];return this._createComponentByClass(t,e)}},{key:"createFallbackComponent",value:function(e,t){var n=this.getFallbackClass(e);return this._createComponentByClass(n,t)}},{key:"_createComponentByClass",value:function(e,t){var n=t.name,r=t.engine,a=t.contentView,o=t.value;if("block"===e.type&&Ha&&(e.uid=!0),e){var i=new e(r,a);i.engine=r,i.contentView=a,i.state={readonly:!r,collapsed:!1},i.type=e.type,i.name=n,i.value=o;var c=kt("inline"===i.type?"<span />":"<div />");return c.attr(Oe,"center"),i.container=c,"function"==typeof i.init&&i.init(),i}return null}},{key:"reRenderAll",value:function(e,t,n){var r=this,o=(e=kt(e)).isCard()?e:e.find(Se);this.gc(),o.each((function(e){var o=kt(e),i=o.attr(_e),c=r.componentClasses[i];if(c||a.ua.desktop){var l=r.getComponent(o);l&&r.destroyComponent(l),r.removeComponent(o);var s=r.getValue(o);l=c?r.createComponent({name:i,engine:t,contentView:n,value:s}):r.createFallbackComponent(o,{name:i,engine:t,contentView:n,value:s}),r.create({component:l,engine:t,cardRoot:o}),r.renderController.insert(l.container,l)}}))}},{key:"renderAll",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=(e=kt(e)).find(Re);this.gc(),i.each((function(e){var i=(e=kt(e)).attr(Ee),c=r.componentClasses[i],l=r.getValue(e);o&&"lockedtext"===i&&l.originData&&l.cryptoData&&delete l.originData;var s=null;if(c)s=r.createComponent({name:i,engine:t,contentView:n,value:l});else{if(!a.ua.desktop)return;s=r.createFallbackComponent(e,{name:i,engine:t,contentView:n,value:l})}var u=r.create({component:s,engine:t,contentView:n});e.replaceWith(u),r.renderController.insert(s.container,s)}))}},{key:"getFallbackClass",value:function(e){return"block"===e.attr(Ce)?this.componentClasses.blockfallback:this.componentClasses.inlinefallback}}]),e}(),Ga=["undo","paste","drop","selectall"],Xa=function(){function e(){l()(this,e),this.data={}}return u()(e,[{key:"add",value:function(e,t){var n=this;this.data[e]={},Object.keys(t).forEach((function(r){n.data[e][r]=t[r]}))}},{key:"execute",value:function(){var e=this,t=Array.prototype.slice.call(arguments),n=t.shift(),r=t.shift();Object.keys(this.data).forEach((function(a){if(!(Ga.indexOf(a)<0&&n.options.plugins&&n.options.plugins.indexOf(a)<0)&&!1!==n.options[a])return e.data[a][r]?(Qt.log("".concat(r," ").concat(a," plugin")),e.data[a][r].apply(n,t)):void 0}))}},{key:"executePluginMethod",value:function(e,t,n){if(!1!==e.options[t]&&this.data[t]&&this.data[t][n]){for(var r=arguments.length,a=new Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];return this.data[t][n].apply(e,a)}}}]),e}(),Ka=function(){function e(t){var n=this;l()(this,e),this.change=t,this.engine=t.engine,this.reset(),this.lazySaveOp=J()((function(){n.saveOp()}),200)}return u()(e,[{key:"reset",value:function(){this.totalOps=[],this.actionOps=[],this.currentAction={},this.currentActionIndex=0}},{key:"hasUndo",value:function(){return!!this.getUndoOp()}},{key:"hasRedo",value:function(){return!!this.getRedoOp()}},{key:"undo",value:function(){this.saveOp();var e=this.getUndoOp();if(e){var t;this.engine.ot.stopMutation();try{this.engine.ot.submitOps(e.ops),this.engine.ot.applier.applySelfOperations(e.ops);var n=this.totalOps[this.totalOps.length-1];n&&n.uid===e.uid&&"undo"!==n.status?this.totalOps.pop():this.totalOps.push(e),this.currentActionIndex--,t=!0}catch(e){this.reset(),console.log(e)}this.engine.ot.startMutation(),t&&(this.engine.ot.applier.setRangeByPath(e.startRangePath),this.change.change())}}},{key:"redo",value:function(){this.saveOp();var e=this.getRedoOp();if(e){var t;this.engine.ot.stopMutation();try{this.engine.ot.submitOps(e.ops),this.engine.ot.applier.applySelfOperations(e.ops);var n=this.totalOps[this.totalOps.length-1];n&&n.uid===e.uid&&"undo"===n.status?this.totalOps.pop():this.totalOps.push(e),this.currentActionIndex++,t=!0}catch(e){this.reset(),console.log(e)}this.engine.ot.startMutation(),t&&(this.engine.ot.applier.setRangeByPath(e.rangePath),this.change.change())}}},{key:"hold",value:function(){var e=this;this.holded=!0,this.holdTimer&&clearTimeout(this.holdTimer),this.holdTimer=setTimeout((function(){e.release()}),10)}},{key:"release",value:function(){this.holded=!1}},{key:"clear",value:function(){var e=this;setTimeout((function(){e.reset()}),10)}},{key:"saveOp",value:function(){this.currentAction&&this.currentAction.ops&&this.currentAction.ops.length>0&&(this.totalOps.push(this.currentAction),this.currentAction.self&&(this.currentAction.rangePath=this.getCurrentRangePath(),this.currentAction.uid=De(8),this.actionOps.splice(this.currentActionIndex),this.actionOps.push(this.currentAction),this.currentActionIndex=this.actionOps.length,this.change.change()),this.currentAction={})}},{key:"collectSelfOps",value:function(e){var t=this;this.currentAction.self||this.saveOp();var n=!1;e.forEach((function(e){if(!Vr(e))if(n=!0,t.holded&&t.actionOps.length>0&&!t.currentAction.ops)t.actionOps[t.actionOps.length-1].ops.push(e);else{t.currentAction.self=!0,t.currentAction.ops||(t.currentAction.ops=[]),t.currentAction.startRangePath||(t.currentAction.startRangePath=t.getRangePathBeforeCommand());var r=t.currentAction.ops[t.currentAction.ops.length-1];r&&qr(e,r)?t.currentAction.ops.pop():t.currentAction.ops.push(e)}})),n&&this.lazySaveOp()}},{key:"collectRemoteOps",value:function(e){var t=this;this.currentAction.self&&this.saveOp(),e.forEach((function(e){if(!Vr(e)){t.currentAction.ops||(t.currentAction.ops=[]);var n=t.currentAction.ops[t.currentAction.ops.length-1];n&&qr(e,n)?t.currentAction.ops.pop():t.currentAction.ops.push(e)}}))}},{key:"getUndoOp",value:function(){var e=this.currentActionIndex-1;if(this.actionOps[e]){var t=R()(this.actionOps[e]),n=te()(this.totalOps,(function(e){return e.uid===t.uid}));-1!==n?t=this.totalOps[n]:n=e;var r=E.a.type.invert(t.ops),a=this.totalOps.slice(n+1);try{var o=Wr(r,a);if(0===o.length)return;return{self:!0,ops:o,uid:t.uid,status:"undo",rangePath:Gr(t.rangePath,a),startRangePath:Gr(t.startRangePath,a)}}catch(e){console.log(e)}}}},{key:"getRedoOp",value:function(){var e=this.currentActionIndex;if(this.actionOps[e]){var t=R()(this.actionOps[e]),n=te()(this.totalOps,(function(e){return e.uid===t.uid}));-1!==n?t=this.totalOps[n]:n=e;var r="undo"===t.status?E.a.type.invert(t.ops):t.ops,a=this.totalOps.slice(n+1);try{var o=Wr(r,a);if(0===o.length)return;return{self:!0,ops:o,status:"redo",uid:t.uid,rangePath:Gr(t.rangePath,a),startRangePath:Gr(t.startRangePath,a)}}catch(e){console.log(e)}}}},{key:"getCurrentRangePath",value:function(){var e=this.engine.ot.selectionData.currentRangePath;return 0!==e.length?e:zr(this.engine.change.getRange())}},{key:"getRangePathBeforeCommand",value:function(){return this.engine.change.getRangePathBeforeCommand()||this.getCurrentRangePath()}}]),e}(),Za=function(){function e(){l()(this,e)}return u()(e,[{key:"_getCurrentCardRoot",value:function(){return Ia(this.target)}},{key:"_getCaretRange",value:function(){var e=this.doc,t=this.x,n=this.y;if(e.caretRangeFromPoint&&e.caretRangeFromPoint(t,n))return e.caretRangeFromPoint(t,n);if(event.rangeParent){var r=e.createRange();return r.setStart(event.rangeParent,event.rangeOffset),r.collapse(!0),r}}},{key:"_getCardRoot",value:function(){return this.currentCardRoot?this.currentCardRoot:this.caretCardRoot}},{key:"parseEvent",value:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="move",this.rangeParent=e.rangeParent,this.rangeOffset=e.rangeOffset,this.x=e.clientX,this.y=e.clientY,this.target=e.target,this.doc=Ot(e.target),this.currentCardRoot=this._getCurrentCardRoot(),this.caretRange=this._getCaretRange(),this.caretCardRoot=Ia(this.caretRange.commonAncestorContainer)}},{key:"getRange",value:function(){var e,t=this.caretRange,n=this.doc,r=this.x,a=this._getCardRoot();if(a){e=n.createRange();var o=a.getBoundingClientRect(),i=(o.left+o.right)/2;e.selectNode(a[0]),i<r?(e.collapse(!1),this.isCardLeftRange=!1):(e.collapse(!0),this.isCardLeftRange=!0)}return this.range=e||t,this.range}},{key:"getCursor",value:function(){var e=this.isCardLeftRange,t=this.range;if(this._getCardRoot()&&t){if(e){t.setEnd(t.commonAncestorContainer,t.endOffset+1);var n=t.getBoundingClientRect();return t.setEnd(t.commonAncestorContainer,t.endOffset-1),{x:n.left-2,y:n.top,height:n.bottom-n.top}}t.setStart(t.commonAncestorContainer,t.startOffset-1);var r=t.getBoundingClientRect();return t.setStart(t.commonAncestorContainer,t.startOffset+1),{x:r.right-2,y:r.top,height:r.bottom-r.top}}var a=this.range.getBoundingClientRect();return 0===a.height&&(a=this.range.startContainer.getBoundingClientRect()),{x:a.left,y:a.top,height:a.bottom-a.top}}}]),e}(),$a=a.HotKeyUtils.isHotkey,Qa=function(){function e(t){l()(this,e),this.data=[],this.change=t,this.engine=t.engine,this.editArea=t.editArea,this.card=t.card,this.isComposing=!1,this.isSelecting=!1,this.dragoverHelper=new Za}return u()(e,[{key:"isCardInput",value:function(e){for(var t=kt(e.target);t;){if(t.isRoot())return!1;if("center"===t.attr(Oe))return!0;if(t.hasClass("lake-embed-toolbar"))return!0;t=t.parent()}return!1}},{key:"onInput",value:function(e){var t=this;this.editArea.on("compositionstart",(function(){t.engine&&t.engine.isReadonly||(Qt.log(t.engine,"compositionstart"),t.isComposing=!0)})),this.editArea.on("compositionend",(function(){t.engine&&t.engine.isReadonly||(Qt.log(t.engine,"compositionend"),t.isComposing=!1)})),this.editArea.on("input",(function(n){t.engine&&t.engine.isReadonly||t.isCardInput(n)||window.setTimeout((function(){!t.isComposing&&e(n)}),10)}))}},{key:"onSelect",value:function(e){var t=this;this.editArea.on("mousedown",(function(e){e.target.isConnected&&!t.isCardInput(e)&&(Qt.log(t.engine,"mousedown: selection start"),t.isSelecting=!0)})),this.onDocument("mouseup",(function(n){t.isSelecting&&(Qt.log(t.engine,"mouseup: selection end"),t.isSelecting=!1,window.setTimeout((function(){return e(n)}),10))})),this.editArea.on("keydown",(function(){var e=window.getSelection();e.rangeCount>0&&(t.keydownRange=e.getRangeAt(0))})),this.editArea.on("keyup",(function(n){if((!t.engine||!t.engine.isReadonly)&&!t.isCardInput(n)&&($a("left",n)||$a("right",n)||$a("up",n)||$a("down",n)||"Meta"===n.key||$a("shift+left",n)||$a("shift+right",n)||$a("shift+up",n)||$a("shift+down",n)||$a("ctrl+b",n)||$a("ctrl+f",n)||$a("ctrl+n",n)||$a("ctrl+p",n)||$a("ctrl+a",n)||$a("ctrl+e",n)||$a("home",n)||$a("end",n))){var r=window.getSelection();if(r.rangeCount>0){var a=r.getRangeAt(0);if(t.keydownRange&&_n(a,t.keydownRange))return}if(t.isComposing)return;e(n)}}))}},{key:"onPaste",value:function(e){var t=this,n=!1;this.editArea.on("keydown",(function(e){t.engine&&t.engine.isReadonly||($a("mod",e)&&$a("shift",e)&&$a("v",e)||(n=!1),($a("mod+shift+v",e)||$a("mod+alt+shift+v",e))&&(n=!0))})),this.editArea.on("paste",(function(r){if(!(t.engine&&t.engine.isReadonly||t.isCardInput(r))){r.preventDefault();var a=Rr(r);a.isPasteText=n,n=!1,e(a)}}))}},{key:"onDrop",value:function(e){var t=this;if(!this.engine||!this.engine.isSub()){var n,r,a,o=function(){kt("body > div.lake-drop-cursor").remove()},i=function(){o();var e=kt('<div class="lake-drop-cursor" />');kt(document.body).append(e)};this.editArea.on("dragstart",(function(e){i(),(n=t.card.closest(e.target))&&(Qt.log("drag card"),t.card.hideCardToolbar(n),(r=n.find("img.lake-drag-image")).length>0?r=r.clone():(r=kt('<div class="lake-drag-image" />')).css({width:n[0].clientWidth+"px",height:n[0].clientHeight+"px"}),r.css({position:"absolute",top:"-10000px",right:"-10000px"}),kt(document.body).append(r),e.dataTransfer.setDragImage(r[0],0,0))})),this.editArea.on("dragover",(function(e){var n=t.dragoverHelper,r=kt("body > div.lake-drop-cursor");if(0!==r.length){n.parseEvent(e),a=n.getRange();var o=n.getCursor();r.css({height:o.height+"px",top:Math.round(window.pageYOffset+o.y)+"px",left:Math.round(window.pageXOffset+o.x)+"px"})}else i()})),this.editArea.on("dragleave",(function(){o()})),this.editArea.on("dragend",(function(){o(),r&&(r.remove(),r=void 0)})),this.editArea.on("drop",(function(i){i.preventDefault(),n&&t.card.showCardToolbar(n),o(),r&&(r.remove(),r=void 0);var c=i.dataTransfer,l=[];try{c.items&&c.items.length>0?l=Array.from(c.items).map((function(e){return"file"===e.kind?e.getAsFile():null})).filter((function(e){return e})):c.files&&c.files.length>0&&(l=Array.from(c.files))}catch(e){c.files&&c.files.length>0&&(l=Array.from(c.files))}e({e:i,dropRange:a,cardRoot:n,files:l}),n=void 0}))}}},{key:"onDocument",value:function(e,t,n){n=void 0!==n&&n,document.addEventListener(e,t,n),this.data.push({type:"document",eventType:e,listener:t,useCapture:n})}},{key:"onWindow",value:function(e,t,n){n=void 0!==n&&n,window.addEventListener(e,t,n),this.data.push({type:"window",eventType:e,listener:t,useCapture:n})}},{key:"destroy",value:function(){this.data.forEach((function(e){"window"===e.type&&window.removeEventListener(e.eventType,e.listener,e.useCapture),"document"===e.type&&document.removeEventListener(e.eventType,e.listener,e.useCapture)}))}}]),e}(),Ja={orderedlist:"ol",unorderedlist:"ul",tasklist:"ul"};function eo(e){e=kt(e);var t=kt("<span />");e.prepend(t),this.card.replaceNode(t,"checkbox",!1)}function to(e){if(e.collapsed){var t=kt(e.startContainer).closest("ul");if(!vr(t))return;no(t[0])}else{var n=kt(e.startContainer).closest("ul"),r=kt(e.startContainer).closest("ul");if(!vr(n)&&!vr(r))return;no(n[0]),n[0]!==r[0]&&no(r[0])}}function no(e){kt(e).find("ul>li").each((function(e){for(var t=e.lastChild;t;){var n=kt(t);if(Zt.isCheckbox(n))return void kt(e).append("<br />");if(t.nodeType===Node.TEXT_NODE){if(""!==t.textContent)return;t=t.previousSibling}else if(t.nodeType===Node.ELEMENT_NODE){if(!n.isMark()||""!==t.textContent)return;t=t.previousSibling}else t=t.previousSibling}}))}function ro(e){var t=this.change.getRange();ln(t);var n=sr.getClosestBlock(t.startContainer),r=sr.getClosestBlock(t.endContainer);if("li"===n.name||"li"===r.name){if(!t.collapsed){var a=n.name!==r.name;ao.call(this,e,a),t=this.change.getRange()}if(e.preventDefault(),function(e){var t=kt(e.endContainer),n=e.endOffset,r=e.cloneRange(),a="li"===t.name?t:t.closest("li");if(!a[0])return!1;r.selectNodeContents(a[0]),r.setStart(t[0],n);var o=r.cloneContents();if(!o.firstChild)return!0;if(1===o.childNodes.length&&"br"===kt(o.firstChild).name)return!0;var i=kt("<div />");return i.append(o),!!Zt.isEmptyNode(i[0])}(t)&&Cr(t)){var o=gr(sr.getActiveBlocks(t));this.command.execute("tasklist",o)}else{var i=vr(n);this.change.splitBlock();var c=sn(t=this.change.getRange()),l=sr.getClosestBlock(t.endContainer),s=l.prev(),u=l.next();Er.call(this,s,i),Er.call(this,l,i),Er.call(this,u,i),un(t,c),t.collapse(!1),this.change.select(t),this.change.mergeAdjacentList(),i&&to(this.change.getRange())}return mn(t),!1}}function ao(e,t){var n=this.change.getRange();if(n.collapsed){if("li"===sr.getClosestBlock(n.startContainer).name&&Cr(n)){if(e.preventDefault(),this.command.queryState("indent"))return this.command.execute("outdent"),!1;var r=gr(sr.getActiveBlocks(n));if(r)return this.command.execute("tasklist",r),!1}}else{var a=sr.getClosestBlock(n.startContainer),o=sr.getClosestBlock(n.endContainer);if("li"===a.name||"li"===o.name){e.preventDefault();var i=n.cloneRange();return this.change.deleteContent(t),Er(a),Er(o),n.setStart(i.startContainer,i.startOffset),n.collapse(!0),this.change.mergeAdjacentList(),this.change.select(n),!1}}}function oo(e){var t=this.change.getRange();if(t.collapsed&&Cr(t))return e.preventDefault(),this.command.execute("indent"),!1}var io={initialize:function(){var e,t=this;this.schema.add([{ul:{class:["lake-list"]}},{li:{class:["lake-list-node","lake-list-task"]}}]),this.command.add("tasklist",{sideEffect:!0,queryState:function(){return gr(t.change.blocks)},execute:function(e,n){if(Ja[e])if("tasklist"===e){t.change.separateBlocks();var r=t.change.getRange(),a=sr.getActiveBlocks(r);if(a){var o=sn(r);if(hr(a,e)?yr(a):kr.call(t,a,n),un(r,o),r.collapsed&&r.startContainer.nodeType===Node.ELEMENT_NODE&&0===r.startContainer.childNodes.length&&r.startContainer.parentNode){var i=document.createElement("br");kt(r.startContainer).before(i),r.startContainer.parentNode.removeChild(r.startContainer),r.selectNode(i),r.collapse(!1)}t.change.select(r),t.change.mergeAdjacentList()}}else t.command.execute("list",e,n)}}),this.on("keydown:enter",(function(e){return ro.call(t,e)})),this.on("keydown:backspace",(function(e){return ao.call(t,e)})),this.on("keydown:tab",(function(e){return oo.call(t,e)})),this.on("paste:before",(function(n){var r=Zt.fetchAllChildren(n);r.forEach((function(e){"li"===(e=kt(e)).name&&e.hasClass("lake-list-task")&&(e.closest("ul").addClass("lake-list"),0===e.find("[data-ready-card=checkbox]").length&&eo.call(t,e))})),e=r.some((function(e){return"li"===e.name}))})),this.on("paste:insert",(function(){var e=hn(t.change.getRange()).next();e&&e.find("li.lake-list-task").length>0&&e.find("li.lake-list-task").each((function(e){0===(e=kt(e)).find("[data-lake-card=checkbox],[data-ready-card=checkbox]").length&&eo.call(t,e)}))})),this.on("paste:after",(function(){e&&t.change.mergeAdjacentList()})),this.hotkey.set("mod+opt+t","tasklist","tasklist")},repairTaskList:function(e){to(e)}};function co(e){var t=kt(e.startContainer),n=e.startOffset,r=this.card.closest(t);if(r){var a=r.find(Pe)[0];if(a&&(!t.isElement()||t[0].parentNode!==r[0]||t.attr(Oe))){var o=function(){var e=document.createRange();return e.selectNodeContents(a),e.comparePoint(t[0],n)<0};if("inline"===r.attr(Ce))return e.selectNode(r[0]),void e.collapse(o());o()?this.card.focusPrevBlock(e,r,!0):this.card.focusNextBlock(e,r,!0)}}}function lo(e){var t=kt(e.commonAncestorContainer);t.isRoot()||t.isEditable()||(e.selectNodeContents(this.editArea[0]),ln(e),e.collapse(!1));var n=e.cloneRange();if(n.collapse(!0),co.call(this,n),e.setStart(n.startContainer,n.startOffset),(n=e.cloneRange()).collapse(!1),co.call(this,n),e.setEnd(n.endContainer,n.endOffset),e.collapsed){an(n=e.cloneRange());var r=kt(n.startContainer),a=n.startOffset;"a"===r.name&&0===a&&e.setStartBefore(r[0]),"a"===r.name&&a===r[0].childNodes.length&&e.setStartAfter(r[0]),e.collapse(!0)}}function so(e){var t=kt(e.commonAncestorContainer),n=this.card.closest(t);if(n&&"inline"===n.attr(Ce))if(this.card.isLeftCursor(t)){var r=t.closest(je),a=r.text().replace(/\u200B/g,"");if(a)return a=Ie(a),e.setStartBefore(n[0]),e.collapse(!0),this.select(e),r.html("&#8203;"),this.insertMark("<span>".concat(a,"</span>")),void this.mergeMark()}else if(this.card.isRightCursor(t)){var o=t.closest(Ae),i=o.text().replace(/\u200B/g,"");if(i)return i=Ie(i),e.setEndAfter(n[0]),e.collapse(!1),this.select(e),o.html("&#8203;"),this.insertMark("<span>".concat(i,"</span>")),void this.mergeMark()}else lo.call(this,e),this.select(e)}function uo(e,t){e&&e.state.readonly||e.state.activatedByOther||(t?e.state.selected||(e.cardRoot.addClass("lake-selected"),e.select&&e.select(),e.state.selected=t):e.state.selected&&(e.cardRoot.removeClass("lake-selected"),e.unselect&&e.unselect(),e.state.selected=t))}function fo(){var e=this;this.editArea.on("keydown",(function(t){e.engine.isReadonly||e.card.closest(t.target)})),this.domEvent.onInput((function(t){Qt.log("input",t.data);var n=e.getRange();so.call(e,n),e.onSelect(),e.change()})),this.domEvent.onDocument("selectionchange",(function(){var t=e.win.getSelection(),n=e.card.components;if(t.anchorNode){for(var r=t.getRangeAt(0),a=0;a<n.length;a++){var o=n[a],i=o.component,c=o.node.find(Pe)[0];c&&i&&(t.containsNode(c)?uo(i,!0):uo(i,!1))}var l=e.card.getSingleSelectedCard(r);if(l){var s=e.card.getComponent(l);s&&uo(s,!0)}}else n.forEach((function(e){uo(e.component,!1)}))})),this.domEvent.onSelect((function(){var t=e.getRange();(function(e){return!e.collapsed&&(3!==e.commonAncestorContainer.nodeType&&kt(e.commonAncestorContainer).find(Se).length>0||kt(e.commonAncestorContainer).closest(Se).length>0)})(t)&&lo.call(e,t),e.select(t),e.activateCard(t.commonAncestorContainer,"custom_select"),e.onSelect()})),0===this.editArea.closest(Se).length&&this.domEvent.onWindow("beforeunload",(function(){e.engine&&e.engine.event.trigger("save:before")})),this.domEvent.onDocument("click",(function(t){var n=e.card.closest(t.target);if(n){var r=e.card.getComponent(n);r&&"inline"===r.type&&(r.allowToolbarFollowUser?e.activateCard(t.target,"click",t):e.activateCard(t.target,"click"))}})),this.domEvent.onDocument("mousedown",(function(t){var n=kt(t.target),r=e.card.closest(t.target);if(r){var a=e.card.getComponent(r);if(a&&"inline"===a.type)return}if(0!==n.closest("body").length&&!(n.closest(".lake-engine-view").length>0)){for(var o=n;o;){var i=o.attr(ge);if(i&&"root"!==i)return;o=o.parent()}n.closest("[data-lake_prevent_click_unselect]").length>0||e.activateCard(t.target,"mousedown")}}))}var po=function(){function e(t,n){var r=this;l()(this,e),g()(this,"_backupRange",null),n=n||{},this.editArea=kt(t),this.engine=n.engine,this.schema=n.schema,this.conversion=n.conversion,this.card=n.card||new Ya,this.domEvent=new Qa(this),this.onChange=n.onChange||function(){},this.onSelect=n.onSelect||function(){},this.onSetValue=n.onSetValue||function(){},this.win=St(this.editArea[0]),this.doc=this.win.document,this.value="",this.marks=[],this.blocks=[],this.cache={},this.history=new Ka(this),this.change=function(){r.clearChangeTimer(),r.changeTimer=setTimeout((function(){r._change()}),200)},fo.call(this)}return u()(e,[{key:"_change",value:function(){this.card.gc(),this.onChange(),this.engine&&this.engine.setUserChanged()}},{key:"clearChangeTimer",value:function(){this.changeTimer&&clearTimeout(this.changeTimer)}},{key:"getSelectionRange",value:function(){var e,t=this.win.getSelection();return t.rangeCount>0?e=t.getRangeAt(0):((e=this.doc.createRange()).selectNodeContents(this.editArea[0]),ln(e),e.collapse(!1)),e}},{key:"getRange",value:function(){return this.getSelectionRange()}},{key:"cacheRangeBeforeCommand",value:function(){this.rangePathBeforeCommand=zr(this.getSelectionRange())}},{key:"getRangePathBeforeCommand",value:function(){var e=this.rangePathBeforeCommand;return this.rangePathBeforeCommand=null,e}},{key:"select",value:function(e){var t=this.win.getSelection();return _n(e=function(e){if(!e.collapsed)return e;var t=e.startContainer,n=e.startOffset;return t.nodeType===Node.ELEMENT_NODE&&1===n&&1===t.childNodes.length&&"BR"===t.firstChild.nodeName&&(e.setStart(t,0),e.collapse(!0)),e}(e),t.rangeCount>0&&t.getRangeAt(0))&&!e.collapsed||(t.removeAllRanges(),t.addRange(e)),this.marks=sr.getActiveMarks(e),this.blocks=sr.getActiveBlocks(e),this}},{key:"activateCard",value:function(e,t,n){if(!((e=kt(e)).closest(".lake-prevent-card-activated").length>0)){var r=e.closest(ot);if(!r[0]||this.editArea[0]===r[0]){var a=this.card.closest(e),o=this.card.getBlockCardRoot(a);o&&(a=o),(this.card.isLeftCursor(e)||this.card.isRightCursor(e))&&(a=void 0);var i=a&&this.activeCard&&a[0]===this.activeCard[0];if(["updateCard"].indexOf(t)>=0&&(i=!1),this.activeCard&&!i){this.card.hideToolbar(this.activeCard);var c=this.card.getComponent(this.activeCard);c&&(c.unactivate&&(c.cardRoot.removeClass("lake-activated"),c.unactivate(this.activeCard),c.state.activated=!1),"block"===c.type&&this.engine.readonly(!1))}if(a){var l=this.card.getComponent(a);if(l){if(l.state.activatedByOther)return;if(!i){this.card.showToolbar(a,n);var s=l.constructor.autoSelected;"inline"===l.type&&!1!==s&&("click"!==t||l.state&&!l.state.readonly)&&this.selectCard(a),l.activate&&(l.cardRoot.addClass("lake-activated"),l.activate(a),l.state.activated=!0)}"block"===l.type&&(uo(l,!1),this.engine.readonly(!0)),i||"mousedown"===t&&this.engine.event.trigger("focus")}}this.activeCard=a,a&&this.onSelect()}}}},{key:"selectCard",value:function(e){var t=this.card.getComponent(e);if(!1!==t.constructor.singleSelectable&&("block"!==t.type||!t.state.activated)&&(e=e[0])){var n=this.getRange(),r=e.parentNode,a=Array.prototype.slice.call(r.childNodes).indexOf(e);n.setStart(r,a),n.setEnd(r,a+1),this.select(n)}}},{key:"focusCard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getRange();this.card.focus(n,e,t),this.select(n),this.engine.readonly(!1),this.activateCard(kt(n.startContainer),"mousedown"),this.onSelect(),gn(this.getRange(),this.editArea[0],this.engine.scrollNode)}},{key:"focus",value:function(){var e=this.getRange();return this.select(e),this.editArea[0].focus(),this}},{key:"focusToStart",value:function(){var e=this.getRange();return e.selectNodeContents(this.editArea[0]),ln(e),e.collapse(!0),this.select(e),this.editArea[0].focus(),this}},{key:"focusToEnd",value:function(){var e=this.getRange();return e.selectNodeContents(this.editArea[0]),ln(e),e.collapse(!1),this.select(e),this.editArea[0].focus(),this}},{key:"clearBackupRange",value:function(){this._backupRange=null}},{key:"blur",value:function(){return this.editArea[0].blur(),this}},{key:"setValue",value:function(e,t){var n,r='change.setValue("'.concat((e=e||"").length,' chars")'),a=this.getRange();if(""===e)a.setStart(this.editArea[0],0),a.collapse(!0),this.select(a);else{var o=new er(e,this.schema,this.conversion,(function(e){jt(e).forEach((function(e){"A"===e.tagName&&function(e){e&&e.parentNode&&0===e.childNodes.length&&e.parentNode.removeChild(e)}(e),sr.removeEmptyMarksAndAddBr(kt(e)),t&&t(e)}))}));this.editArea.htmlKeepID(o.toLowerValue()),(n=this.engine)&&st(n.editArea[0]),this.card.renderAll(this.editArea,this.engine,null,!0);var i,c=this.editArea.find(xe);c.length>0&&(i={anchor:c[0],focus:c[0]});var l=this.editArea.find(ke),s=this.editArea.find(we);l.length>0&&s.length>0&&(i={anchor:l[0],focus:s[0]}),i&&(un(a,i),this.select(a),this.onSelect())}this.onSetValue(),this.history&&this.history.clear(),Qt.log(r)}},{key:"getOriginValue",value:function(){return new er(this.editArea[0],this.schema).toValue()}},{key:"combinTextNode",value:function(){It(this.editArea[0])}},{key:"getValue",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.ignoreCursor||this.domEvent.isComposing)e=this.getOriginValue();else{var n,r=this.getRange();xn(r)||(n=sn(r)),e=this.getOriginValue(),n&&un(r,n)}return We(e)}},{key:"isEmpty",value:function(){return Mt(this.editArea[0])}},{key:"restoreRange",value:function(){!this.engine.isFocus()&&this._backupRange&&this.select(this._backupRange)}},{key:"insertCard",value:function(e,t){this.restoreRange(),Qt.log("change.insertCard()");var n=this.card.createComponent({name:e,value:t,engine:this.engine}),r=n.constructor,a=this.getRange();lo.call(this,a);var o=this.card.insertNode(a,n,this.engine);return"inline"===n.type&&this.card.focus(a,o,!1),this.select(a),"block"===n.type&&!1!==r.autoActivate&&this.activateCard(o,"insertCard"),this.change(),o}},{key:"updateCard",value:function(e,t){Qt.log("change.updateCard()");var n=this.card.getComponent(e);n&&(n.value=t,this.card.updateNode(e,n)),this.change()}},{key:"removeCard",value:function(e){Qt.log("change.removeCard()");var t=this.getRange(),n=t.cloneRange();this.card.isInline(e)?(t.setEndAfter(e[0]),t.collapse(!1)):this.card.focusPrevBlock(t,e,!0);var r=e.parent();this.card.removeNode(e,this.engine),to(n),Tt(r)&&(r.isRoot()?(r.html("<p><br /></p>"),t.selectNodeContents(r[0]),ln(t),t.collapse(!1)):(r.html("<br />"),t.selectNodeContents(r[0]),t.collapse(!1))),this.select(t),this.change()}}]),e}();Object.keys(Ea).forEach((function(e){po.prototype[e]=function(){Qt.log("change.".concat(e,"()"));var t=Array.prototype.slice.call(arguments),n=this.getRange();return lo.call(this,n),["insertFragment"].includes(e)&&t.unshift(this.card),t.unshift(n),["splitBlock"].includes(e)&&t.push(this.engine),Ea[e]&&(n=Ea[e].apply(Ea,t),this.combinTextNode(),this.select(n),this.change()),this}}));var ho=a.HotKeyUtils.isHotkey,mo=function(){function e(t){var n=this;l()(this,e),g()(this,"handleKeydown",(function(e){for(var t=Object.keys(n.data),r=0,a=t.length;r<a;r++){var o=t[r],i=n.data[o];if(ho(o,e))return e.preventDefault(),void(n.disabled||i&&i())}})),this.data={},this.command=t,this.editArea=t.change.editArea,this.disabled=!1,this.editArea.on("keydown",this.handleKeydown)}return u()(e,[{key:"set",value:function(){var e=this,t=Array.prototype.slice.call(arguments),n=t.shift();this.data[n]=function(){e.command.execute.apply(e.command,t)}}},{key:"enable",value:function(){this.disabled=!1,Qt.log("enable hotkey")}},{key:"disable",value:function(){this.disabled=!0,Qt.log("disable hotkey")}},{key:"destroy",value:function(){this.editArea.off("keydown",this.handleKeydown)}}]),e}();function go(e,t){t=kt(t);var n=this.change.blocks||[],r=this.change.marks||[];if(this.change.insertBlock(t,!0),n[0]){var a=n[0].css();t.css(a)}var o=t.find("br");r.forEach((function(e){"code"!==e.name&&(e=e.clone(),o.before(e),e.append(o),o=e)})),e.selectNode(t.find("br")[0]),e.collapse(!1),En.scrollIntoView(e),this.change.select(e)}function vo(e,t,n){e.selectNode(t[0]),e.collapse(!!n),this.change.select(e);var r=kt("<p><br /></p>");this.change.insertBlock(r,!0),n?this.card.focus(e,t,!0):(e.selectNodeContents(r[0]),e.collapse(!1)),this.change.select(e)}function yo(e,t,n){if("inline"===n.attr(Ce))kt(t.startContainer).closest(je).length>0&&(t.selectNode(n[0]),t.collapse(!0),this.change.select(t)),kt(t.startContainer).closest(Ae).length>0&&(t.selectNode(n[0]),t.collapse(!1),this.change.select(t));else{if(kt(t.startContainer).closest(je).length>0)return e.preventDefault(),vo.call(this,t,n,!0),!1;if(kt(t.startContainer).closest(Ae).length>0)return e.preventDefault(),vo.call(this,t,n,!1),!1}}function bo(e,t){var n=e.cloneRange();an(n),sr.isBlockLastOffset(e,"end")||n.endContainer.nodeType===Node.ELEMENT_NODE&&t.children().length>0&&n.endContainer.childNodes[n.endOffset]===t.last()[0]&&"br"===t.last().name?"p"===t.name&&t[0].className?go.call(this,e,'<p class="'.concat(t[0].className,'"><br /></p>')):go.call(this,e,"<p><br /></p>"):this.change.splitBlock()}function ko(e){var t=this.change.getRange(),n=this.card.closest(t.startContainer);if(n&&!1===yo.call(this,e,t,n))return!1;var r=sr.getClosestBlock(t.endContainer);(r.isRoot()||r.isTable())&&(this.change.wrapBlock("<p />"),r=sr.getClosestBlock(t.endContainer));var a=r.parent();if(a&&a.isEditable()&&a.isBlock()){if("blockquote"===a.name&&"p"===r.name&&r.nextElement())return e.preventDefault(),bo.call(this,t,r),!1;if("li"===a.name&&"p"===r.name){1===r.children().length&&"br"===r.first().name&&r.first().remove();var o=En.createBookmark(t);sr.unwrapNode(r),En.moveToBookmark(t,o),r=sr.getClosestBlock(t.endContainer)}if(t.collapsed&&(1===t.startContainer.childNodes.length&&"BR"===t.startContainer.firstChild.nodeName||sr.isBlockLastOffset(t,"end")&&sr.isBlockFirstOffset(t,"end")))return e.preventDefault(),["li","td","th"].indexOf(a.name)>=0?(this.change.unwrapBlock("<".concat(a.name," />")),this.change.setBlocks("<".concat(a.name," />"))):(this.change.unwrapBlock("<".concat(a.name," />")),this.change.setBlocks("<p />")),!1}if(r.isHeading())return e.preventDefault(),bo.call(this,t,r),!1;if("li"===r.name){if(r.find("[data-lake-card=checkbox]").length>0)return;if(e.preventDefault(),sr.isBlockLastOffset(t,"end"))if(t.collapsed&&sr.isBlockFirstOffset(t,"end")){var i=r.closest("ul,ol");this.change.unwrapBlock("<".concat(i.name," />")),this.change.setBlocks("<p />")}else{var c=kt("<li><br /></li>");c.attr(r.attr()),go.call(this,t,c)}else this.change.splitBlock();return this.change.mergeAdjacentList(),En.scrollIntoView(t),!1}}function wo(e){e.preventDefault();var t=this.change.getRange(),n=kt("<br />");this.change.insertInline(n),sr.isBlockLastOffset(t,"end")&&(n.next()&&"br"===n.next().name||n.after("<br />"))}var xo=/^<p(\s[^>]*?)?><br><\/p>$/i;function _o(e,t){var n=t.parent();t.remove(),Tt(n)&&(n.isRoot()?(n.html("<p><br /></p>"),e.selectNodeContents(n[0]),ln(e),e.collapse(!1)):(n.html("<br />"),e.selectNodeContents(n[0]),e.collapse(!1)),this.change.select(e))}function Eo(e,t){if(t.isEditable()&&!t.isTable()){var n=sn(e);sr.unwrapNode(t),un(e,n),this.change.select(e)}}function Co(e,t){if(t.children().length>1&&"br"===t.first().name)return t.first().remove(),!1;var n,r=t.prev();if(!r)return t.parent().isTable()&&(n=t.parent(),xo.test(n.html().trim()))||t.parent().isEditable()&&Eo.call(this,e,t),!1;if(r.attr(_e))return this.card.focus(e,r),this.change.select(e),!1;if(r.isVoid())return r.remove(),!1;if(r.isHeading()&&Tt(r))return r.remove(),!1;if(r.isText()){var a=kt("<p />");r.before(a),a.append(r),r=a}if(["ol","ul"].indexOf(r.name)>=0&&(r=r.last()),1===t.children().length&&"br"===t.first().name?t.first().remove():r&&1===r.children().length&&"br"===r.first().name&&r.first().remove(),!r||r.isText())Eo.call(this,e,t);else{var o=sn(e);sr.mergeNode(r,t),un(e,o),this.change.select(e),this.change.mergeMark(),this.change.mergeAdjacentList()}return!1}function Oo(e,t,n){var r=t.prev();r&&(r.attr(_e)?this.card.focus(e,r):(["ol","ul"].indexOf(r.name)>=0&&(r=r.last()),r&&(n&&Mt(r[0])?r.remove():(e.selectNodeContents(r[0]),e.collapse(!1),this.change.select(e)))))}function So(e,t,n){if("inline"===n.attr(Ce)){if(kt(t.startContainer).closest(je).length>0&&(t.selectNode(n[0]),t.collapse(!0),this.change.select(t)),kt(t.startContainer).closest(Ae).length>0)return e.preventDefault(),this.change.removeCard(n),sr.addOrRemoveBr(t),!1}else{if(kt(t.startContainer).closest(je).length>0)return e.preventDefault(),n.parent().isEditable()?Eo.call(this,t,n.parent()):Oo.call(this,t,n,!0),!1;if(kt(t.startContainer).closest(Ae).length>0)return e.preventDefault(),Oo.call(this,t,n,!1),this.change.removeCard(n),!1}}function Ro(e){var t=this.change.getRange(),n=this.card.closest(t.startContainer);if(n){if(!1===So.call(this,e,t,n))return!1;if(!1===this.event.trigger("keydown:backspace",e))return}if(this.change.isEmpty())return e.preventDefault(),this.change.setValue("<p><br /><cursor /></p>"),!1;var r=sr.getClosestBlock(t.startContainer);if(r.isTable()&&Mt(r))return e.preventDefault(),r.html("<p><br /></p>"),t.selectNode(r[0]),ln(t),t.collapse(!1),this.change.select(t),!1;if(!t.collapsed)return e.preventDefault(),this.change.deleteContent(),!1;var a=dn(t);if(a&&a.attr(_e)&&"checkbox"!==a.attr(_e))return e.preventDefault(),this.change.removeCard(a),!1;if(a&&a.isBlock()&&Mt(a))return e.preventDefault(),_o.call(this,t,a),!1;if(!sr.isBlockFirstOffset(t,"start")){var o=t.cloneRange();return ln(o),on(o),void(o.startContainer.nodeType===Node.TEXT_NODE&&function(e){var t=e.commonAncestorContainer;return!(!e.collapsed||1!==e.startOffset||e.startContainer!==t||t.nodeType!==Node.TEXT_NODE||(e=e.cloneRange(),t.parentNode.childNodes.length>1||1!==t.textContent.length||(e.selectNodeContents(t),Vn(e,!1),0)))}(o)&&e.preventDefault())}var i=kt(t.startContainer),c=t.startOffset;if(i.isRoot()){var l=i[0].childNodes[c-1];if(l&&"br"===kt(l).name)return e.preventDefault(),kt(l).remove(),!1}var s=this.command.queryState("alignment");if("center"===s)return e.preventDefault(),this.command.execute("alignment","left"),!1;if("right"===s)return e.preventDefault(),this.command.execute("alignment","center"),!1;if(this.command.queryState("indent"))return e.preventDefault(),this.command.execute("outdent"),!1;if(["ol","ul"].indexOf(r.name)>=0){var u=r.first();if(!u||u.isText())return e.preventDefault(),Co.call(this,t,r);r=u,t.setStart(r[0],0),t.collapse(!0),this.change.select(t)}if("li"===r.name){if(r.find("[data-lake-card=checkbox]").length>0)return;e.preventDefault();var d=r.closest("ul,ol");return r.parent().isRoot()?Co.call(this,t,r):(d.length>0?this.command.execute("list","ol"===d.name?"orderedlist":"unorderedlist"):Eo.call(this,t,r),!1)}var f=r.parent();return f&&"blockquote"===f.name&&r.isHeading()?(e.preventDefault(),r.prevElement()?Co.call(this,t,r):(this.change.unwrapBlock("<blockquote />"),!1)):r.isTitle()&&Mt(r)?(e.preventDefault(),this.change.setBlocks("<p />"),!1):r.isHeading()?(e.preventDefault(),Co.call(this,t,r)):["li","td","th"].indexOf(r.name)<0?(e.preventDefault(),this.change.setBlocks("<p />"),!1):void 0}function jo(e,t){if(e){var n=this.change.getRange();if(n.collapsed){var r=this.card.closest(n.startContainer);r&&So.call(this,t,n,r)}}}function Po(e){var t=this.change.getRange();return!t.collapsed||sr.isBlockFirstOffset(t,"start")?(e.preventDefault(),this.command.execute("indent",!0),!1):(e.preventDefault(),this.change.insertText("    "),!1)}var Ao=a.HotKeyUtils.isHotkey;function To(e,t){var n=this.change.getRange(),r=this.card.getComponent(e);if(r){var a=r.constructor.singleSelectable;if(Ao("up",t)||Ao("ctrl+p",t))return t.preventDefault(),this.card.focusPrevBlock(n,e,!1),this.change.select(n),!1;if(Ao("down",t)||Ao("ctrl+n",t))return t.preventDefault(),this.card.focusNextBlock(n,e,!1),this.change.select(n),!1;if(kt(n.commonAncestorContainer).closest(je).length>0)return Ao("right",t)||Ao("ctrl+e",t)||Ao("ctrl+f",t)?(t.preventDefault(),!1!==a?this.change.selectCard(e):(this.card.focus(n,e,!1),this.change.select(n)),!1):void((Ao("left",t)||Ao("ctrl+a",t)||Ao("ctrl+b",t))&&(n.setStartBefore(e[0]),n.collapse(!0),this.change.select(n)));if(kt(n.commonAncestorContainer).closest(Ae).length>0){if(Ao("left",t)||Ao("ctrl+a",t)||Ao("ctrl+b",t))return t.preventDefault(),!1!==a?this.change.selectCard(e):(this.card.focus(n,e,!0),this.change.select(n)),!1;if(Ao("right",t)||Ao("ctrl+e",t)||Ao("ctrl+f",t))return e.next()&&e.next().isCard()?(t.preventDefault(),this.change.selectCard(e.next()),!1):(n.setEndAfter(e[0]),n.collapse(!1),void this.change.select(n))}}}var Do=a.HotKeyUtils.isHotkey;function Mo(e,t){var n=this.change.getRange();if(Do("up",t)||Do("ctrl+p",t))return t.preventDefault(),this.card.focusPrevBlock(n,e,!1),this.change.select(n),!1;if(Do("down",t)||Do("ctrl+n",t))return t.preventDefault(),this.card.focusNextBlock(n,e,!1),this.change.select(n),!1;if(kt(n.commonAncestorContainer).closest(je).length>0)return Do("left",t)||Do("ctrl+a",t)||Do("ctrl+b",t)?(t.preventDefault(),this.card.focusPrevBlock(n,e,!1),this.change.select(n),!1):Do("right",t)||Do("ctrl+e",t)||Do("ctrl+f",t)?(t.preventDefault(),this.change.selectCard(e),!1):void(t.metaKey||t.ctrlKey||(this.card.focusPrevBlock(n,e,!0),this.change.select(n)));if(kt(n.commonAncestorContainer).closest(Ae).length>0){if(Do("left",t)||Do("ctrl+a",t)||Do("ctrl+b",t))return t.preventDefault(),this.change.selectCard(e),!1;if(Do("right",t)||Do("ctrl+e",t)||Do("ctrl+f",t))return t.preventDefault(),this.card.focusNextBlock(n,e,!1),this.change.select(n),!1;t.metaKey||t.ctrlKey||(this.card.focusNextBlock(n,e,!0),this.change.select(n))}if(this.card.getSingleSelectedCard(n)){if(Do("left",t)||Do("ctrl+a",t)||Do("ctrl+b",t))return t.preventDefault(),this.card.focus(n,e,!0),this.change.select(n),!1;if(Do("right",t)||Do("ctrl+e",t)||Do("ctrl+f",t))return t.preventDefault(),this.card.focus(n,e,!1),this.change.select(n),!1}}function No(e){return e.preventDefault(),this.command.execute("outdent"),!1}function Lo(e){var t=this.change.getRange();if(!t.collapsed)return e.preventDefault(),void this.change.deleteContent();var n=!1,r=this.card.closest(t.startContainer),a=null;if(r){if(Io(t.startContainer,"left"))return e.preventDefault(),this.change.selectCard(r),void this.change.deleteContent();if(!Io(t.startContainer,"right"))return;a=r[0]}else if(t.endContainer.nodeType===Node.TEXT_NODE){if(t.endContainer.data.length>t.endOffset){e.preventDefault();var o=t.cloneRange();return o.setEnd(t.endContainer,t.endOffset+1),this.change.select(o),void this.change.deleteContent()}a=t.endContainer}else{if(t.endContainer.nodeType!==Node.ELEMENT_NODE)return;0===t.endContainer.childNodes.length?a=t.endContainer:0===t.endOffset?(1===t.endContainer.childNodes.length&&"BR"===t.endContainer.firstChild.nodeName||(n=!0),a=t.endContainer.childNodes[t.endOffset]):a=t.endContainer.childNodes[t.endOffset-1]}var i=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(kt(t).isRoot())return null;if(n||(t=Bo(t)),!t)return null;for(;t;){if(kt(t).attr(_e)){var r=t.ownerDocument.createRange();return r.setStartAfter(t),r.collapse(!0),r}if(kt(t).isBlock()){var a=t.ownerDocument.createRange();return a.selectNodeContents(t),a.collapse(!0),a}if("BR"===t.nodeName){if(1===t.parentNode.childNodes.length)return null;var o=t.ownerDocument.createRange();return o.setStartAfter(t),o.collapse(!0),o}if(t.nodeType===Node.TEXT_NODE){if(0===t.data.length)return e(t);var i=t.ownerDocument.createRange();return i.setStart(t,1),i.collapse(!0),i}if(0===t.childNodes.length)return e(t);t=t.childNodes[0]}}(a,n);if(i){e.preventDefault();var c=t.startOffset;1===c&&1===t.startContainer.childNodes.length&&"BR"===t.startContainer.childNodes[0].nodeName&&(c=0),i.setStart(t.startContainer,c),this.change.select(i),this.change.deleteContent()}}function Io(e,t){return kt(e).closest('[data-card-element="'.concat(t,'"]'),(function(e){return kt(e).isRoot()?null:e.parentNode})).length>0}function Bo(e){return kt(e).isRoot()?null:e.nextSibling?e.nextSibling:Bo(e.parentNode)}var zo=a.HotKeyUtils.isHotkey;function Fo(e){if(this.isReadonly)zo("mod+a",e)&&e.preventDefault();else if(!this.card.closest(e.target)){if(zo("enter",e))return!1!==this.event.trigger("keydown:enter",e)&&ko.call(this,e),void gn(this.change.getRange(),this.editArea[0],this.scrollNode);if(zo("shift+enter",e))return wo.call(this,e),void gn(this.change.getRange(),this.editArea[0],this.scrollNode);if(zo("backspace",e))!1!==this.event.trigger("keydown:backspace",e)&&Ro.call(this,e);else if(zo("delete",e))!1!==this.event.trigger("keydown:delete",e)&&Lo.call(this,e);else if(zo("mod+backspace",e))jo.call(this,a.ua.safari,e);else if(zo("tab",e))!1!==this.event.trigger("keydown:tab",e)&&Po.call(this,e);else if(zo("shift+tab",e))No.call(this,e);else{var t=this.change.getRange(),n=this.card.getSingleCardRoot(t);if(n&&!1===("inline"===n.attr(Ce)?To.call(this,n,e):Mo.call(this,n,e)))return;" "!==e.key?"@"===e.key||e.shiftKey&&229===e.keyCode&&"Digit2"===e.code?this.event.trigger("keydown:at",e):"/"===e.key||zo("/",e)||229===e.keyCode&&"Slash"===e.code?this.event.trigger("keydown:slash",e):zo("mod+a",e)&&this.event.trigger("keydown:selectall",e):this.event.trigger("keydown:space",e)}}}var Uo=a.HotKeyUtils.isHotkey;function Vo(e){this.isReadonly||this.card.closest(e.target)||(Uo("enter",e)?this.event.trigger("keyup:enter",e):Uo("backspace",e)?this.event.trigger("keyup:backspace",e):Uo("tab",e)?this.event.trigger("keyup:tab",e):Uo("space",e)&&this.event.trigger("keyup:space",e))}var qo={toDOM:function e(t){var n,r,a=document.createDocumentFragment(),o=0,i=null;for("string"==typeof t[0]&&(i=t[0],o=1);o<t.length;o++)if(Array.isArray(t[o]))a.appendChild(e(t[o]));else if(r=t[o],"[object Object]"===Object.prototype.toString.call(r)){if(i)for(var c in n=document.createElement(i),t[o]){var l=Xe.unescapeDots(c),s=Xe.unescape(t[o][c]);n.setAttribute(l,s)}}else if("number"==typeof t[o]||"string"==typeof t[o]){var u=document.createTextNode(t[o]);a.appendChild(u)}return!n&&i&&(n=document.createElement(i)),n?(n.appendChild(a),n):a.childNodes},fromDOM:function e(t){if(!Zr.isTransientElement(t)){var n;if(t.nodeType===Node.ELEMENT_NODE){n=[t.nodeName.toLowerCase()];for(var r=t.attributes,a={},o=0;r&&o<r.length;o++){var i=r[o].name;r[o].specified&&!Zr.isTransientAttribute(t,i)&&("style"===i?a.style=Xe.toHex(t.style.cssText||r[o].value):"string"==typeof r[o].value&&(a[i]=r[o].value))}return n.push(a),function(t,n){var r=t.childNodes;if(0!==r.length)for(var a=0;a<r.length;a++){var o=e(r[a]);o&&n.push(o)}}(t,n),n}return t.nodeType===Node.TEXT_NODE?String(t.nodeValue):void 0}},removePath:function(e,t){if(0!==t.length){for(var n=0,r=e;n<t.length-1;)r=r[t[n]],n++;re()(r)?r.splice(t[n],1):delete r[t[n]]}},setPathValue:function(e,t,n){if(0!==t.length){for(var r=0,a=e;r<t.length-1;)a=a[t[r]],r++;re()(a)?a.splice(t[r],1,n):a[t[r]]=n}},addPathValue:function(e,t,n){if(0!==t.length){for(var r=0,a=e;r<t.length-1;)a=a[t[r]],r++;re()(a)&&a.splice(t[r],0,n)}},getPathValue:function(e,t){if(0===t.length)return e;for(var n=0,r=e;n<t.length&&void 0!==r;)r=r[t[n]],n++;return r},pushAndRepair:function(e,t){e.forEach((function(e){var n=t.newPath[t.newPath.length-1],r=e.newPath[e.newPath.length-1];t.ld&&("ld"in e&&(r<=n?t.oldPath[t.oldPath.length-1]+=1:(e.oldPath[e.oldPath.length-1]+=1,e.p[e.p.length-1]+=1)),"li"in e&&(r>=n?e.p[e.p.length-1]+=1:t.oldPath[t.oldPath.length-1]-=1)),t.li&&("ld"in e&&r>n&&(e.oldPath[e.oldPath.length-1]-=1,e.p[e.p.length-1]-=1),"li"in e&&r>n&&(e.p[e.p.length-1]-=1))})),e.push(t)}};var Ho=function(e){oe()(n,G.EventEmitter2);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e,r){var a;return l()(this,n),a=t.call(this),g()(de()(a),"patchesToOps",(function(e,t,n){var r=[],o=a.dmp.patch_make(t,n);return Object.keys(o).forEach((function(t){var n=o[t],a=n.start1;n.diffs.forEach((function(t){var n=h()(t,2),o=n[0],i=n[1];o!==pe.a.DIFF_DELETE?o!==pe.a.DIFF_INSERT?o!==pe.a.DIFF_EQUAL||(a+=i.length):r.push({si:i,p:[].concat(x()(e),[a])}):r.push({sd:i,p:[].concat(x()(e),[a])})}))})),r})),g()(de()(a),"cacheAddedNode",(function(e){a.addedNodes.push(e)})),g()(de()(a),"clearAddedNodeCache",(function(){a.addedNodes=[]})),g()(de()(a),"inAddedCache",(function(e){return a.addedNodes.find((function(t){return Yt(e,t)||e===t}))})),g()(de()(a),"isTransientMutation",(function(e){var t=e.addedNodes,n=e.removedNodes,r=e.target,a=e.type,o=e.attributeName;if("childList"===a){if(t[0]&&Ir(t[0]))return!0;if(n[0]&&Ir(n[0]))return!0;if(Ir(r))return!0}return!("attributes"!==a||!Ir(r)&&!Br(r,o))||!("characterData"!==a||!Ir(r))})),g()(de()(a),"makeOpsFromMutations",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0;r=r||a.engine.editArea[0];for(var o=[],i=[],c=0,l=[],s=[],u=[],d=function(e,t){null==e||l.includes(e)||(u.includes(e)||u.push(e),e.mutations=e.mutations||[],e.mutations.push(t))},f=!1,p=function(){var u=e[c],p=u.target,h=u.addedNodes,m=u.removedNodes,g=u.type;if(a.inAddedCache(p))return c++,"continue";if("childList"===g)if(p===r){if(m[0]){var v=a.getRemoveNodeIndex(u,e);Array.from(m).forEach((function(e){if(!s.find((function(t){return t===e}))){var r=[].concat(x()(t),[v+2]),a=[].concat(x()(n),[v+2]),i={ld:!0,p:r,newPath:r.slice(),oldPath:a};qo.pushAndRepair(o,i)}}))}h[0]&&Array.from(h).forEach((function(e){var n=qo.fromDOM(e);if(e.parentNode===r){var i=[].concat(x()(t),[Gt(e)+2]),c={li:n,p:i,newPath:i.slice()};qo.pushAndRepair(o,c),l.push(e),a.cacheAddedNode(e)}else if(null!==e.parentNode){var f=Kt(e,r);d(f,u),s.push(e)}else s.push(e)}))}else{var y=Kt(p,r);d(y,u)}else if("characterData"===g)if(p===r)f||("string"==typeof qo.getPathValue(a.doc.data,t)&&i.push({path:t,newValue:p.data}),f=!0);else{var b=Kt(p,r);d(b,u)}else if("attributes"===g)if(p===r){var k=u.oldValue,w=Xe.escape(p.getAttribute(u.attributeName));if(k!==w){var _={};k&&(_.od=k),w&&(_.oi=w),_.p=[].concat(x()(t),[1,Xe.escapeDots(u.attributeName)]),i.push(_)}}else{var E=Kt(p,r);d(E,u)}c++};e[c];)p();var h=[];return o.forEach((function(e){if(e.ld){var t=qo.getPathValue(a.doc.data,e.oldPath);void 0!==t&&h.push({ld:t,p:e.p})}"li"in e&&h.push({li:e.li,p:e.p})})),h=h.concat(i),u.forEach((function(e){var r=e.mutations;if(delete e.mutations,null!=e){var i=Gt(e),c=Kr(i,o);h=h.concat(a.makeOpsFromMutations(r,[].concat(x()(t),[i+2]),[].concat(x()(n),[c+2]),e))}})),h})),g()(de()(a),"getRemoveNodeIndex",(function(e,t){var n,r=e.target,o=e.nextSibling,i=e.previousSibling,c=e.addedNodes,l=Array.from(r.childNodes).indexOf(c[0]),s=Array.from(r.childNodes).indexOf(i),u=Array.from(r.childNodes).indexOf(o);return-1!==s?n=s+1:-1!==u?n=u:-1!==l?n=l:i?o?i&&(n=a.getRemoveNodeIndexFromMutation(i,r,t)):n=r.childNodes.length:n=0,void 0!==n?n:0})),g()(de()(a),"getRemoveNodeIndexFromMutation",(function(e,t,n){var r=n.find((function(n){return n.target===t&&n.removedNodes[0]===e}));if(r)return a.getRemoveNodeIndex(r,n)})),g()(de()(a),"handleMutations",(function(e){e=e.filter((function(e){return!a.isTransientMutation(e)})),a.clearAddedNodeCache();var t=a.makeOpsFromMutations(e);0!==(t=Ur(t)).length&&a.normalizeOps(t)})),g()(de()(a),"normalizeOps",(function(e){if(a.engine.domEvent.isComposing){if(2===e.length&&e[1].ld&&"br"===e[1].ld[0]&&e[0].li&&"string"==typeof e[0].li)return a.lineStart=!0,e[0].li="",void a.readyToEmitOps(e);if(1===e.length&&Zr.isCursorOp(e[0]))return;return 2===e.length&&e[0].si&&O()(e[0],e[1])&&e.splice(1,1),a.laterOps=e,a.timer&&clearTimeout(a.timer),void(a.timer=setTimeout((function(){a.engine.domEvent.isComposing||(a.lineStart&&(a.engine.history.hold(),a.lineStart=!1),a.laterOps&&(a.readyToEmitOps(a.laterOps),a.laterOps=null),a.timer=null)}),0))}if(a.laterOps){var t=O()(a.laterOps,e);if(a.readyToEmitOps(a.laterOps),a.laterOps=null,t)return}a.readyToEmitOps(e)})),a.engine=e,a.doc=r.doc,a.dmp=new pe.a,a}return u()(n,[{key:"setDoc",value:function(e){this.doc=e}},{key:"readyToEmitOps",value:function(e){var t=this,n=[];e.forEach((function(e){if(e.path&&void 0!==e.newValue){var r=qo.getPathValue(t.doc.data,e.path);n=n.concat(t.patchesToOps(x()(e.path),r,e.newValue))}else 0!==e.p.length&&n.push(e)})),0!==n.length&&this.emit("ops",n)}}]),n}();var Wo={childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},Yo=function(e){oe()(n,G.EventEmitter2);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e,r){var a;l()(this,n),a=t.call(this);var o=r.engine,i=r.doc;return a.engine=o,a.doc=i,a.node=kt(e),a.isStopped=!0,a.creator=new Ho(o,{doc:i}),a.observer=new MutationObserver((function(e){a.isStopped||a.creator.handleMutations(e)})),a.creator.on("ops",(function(e){a.onOpsReady(e)})),a}return u()(n,[{key:"setDoc",value:function(e){this.doc=e,this.creator.setDoc(e)}},{key:"start",value:function(){this.isStopped&&(this.observer.observe(this.node[0],Wo),this.isStopped=!1)}},{key:"stop",value:function(){this.isStopped||(this.observer.disconnect(),this.isStopped=!0)}},{key:"onOpsReady",value:function(e){this.isStopped||this.emit("ops",e)}}]),n}();function Go(e,t){var n=t[0];if(1===n)return[e,void 0,e,n];var r=n-2,a=e.childNodes[r],o=t[1];return 1===t.length||0===o||1===o||a.nodeType===Node.TEXT_NODE?[a,r,e,o]:Go(a,t.slice(1))}function Xo(e,t){var n=kt(e).closest("[data-lake-id]");if(n[0]){var r=n.attr("data-lake-id"),a=document.createRange(),o=document.createRange();return a.setStart(n[0],0),a.setEnd(e,t),o.setStart(e,t),o.setEnd(n[0],n[0].childNodes.length),{lakeId:r,leftText:a.toString(),rightText:o.toString()}}}function Ko(e){if(e){var t=e.lakeId,n=e.leftText,r=e.rightText,a=kt('[data-lake-id="'.concat(t,'"]'));if(a[0]){var o=(a=a[0]).textContent;if(""===o)return{container:a,offset:0};if(o.startsWith(n)){for(var i=n.length,c=a.firstChild;3!==c.nodeType||c.textContent.length<i;)c.textContent.length<i?(i-=c.textContent.length,c=c.nextSibling):c=c.firstChild;return{container:c,offset:i}}if(o.endsWith(r)){for(var l=r.length,s=a.lastChild;3!==s.nodeType||s.textContent.length<l;)s.textContent.length<l?(l-=s.textContent.length,s=s.previousSibling):s=s.lastChild;return{container:s,offset:s.textContent.length-l}}for(var u=0;o[u]===n[u];)u++;for(var d=a.firstChild;3!==d.nodeType||d.textContent.length<u;)d.textContent.length<u?(u-=d.textContent.length,d=d.nextSibling):d=d.firstChild;return{container:d,offset:u}}}}var Zo=function(){function e(t,n){l()(this,e),this.engine=t,this.editArea=t.editArea,this.options=n}return u()(e,[{key:"setAttribute",value:function(e,t,n){var r=this.engine,a=Go(this.editArea[0],e),o=h()(a,1)[0];o&&(kt(o).isRoot()&&!/^data-selection-/.test(t)||(t=Xe.unescapeDots(t),n=Xe.unescape(n),o.setAttribute(t,n),kt(o).isCard()&&r.card.reRenderAll(o,r)))}},{key:"removeAttribute",value:function(e,t){var n=Go(this.editArea[0],e),r=h()(n,1)[0];r&&(kt(r).isRoot()&&!/^data-selection-/.test(t)||r.removeAttribute(t))}},{key:"insertNode",value:function(e,t){var n=this.engine,r=Go(this.editArea[0],e),a=h()(r,3),o=a[0],i=a[2];if(i&&!kt(o).isRoot()){var c="string"==typeof t?document.createTextNode(t):qo.toDOM(t);o&&o.parentNode?i.insertBefore(c,o):i.insertBefore(c,null),n.card.reRenderAll(c,n)}}},{key:"deleteNode",value:function(e){var t=Go(this.editArea[0],e),n=h()(t,1)[0];n&&!kt(n).isRoot()&&n.remove()}},{key:"insertInText",value:function(e,t,n){var r=Go(this.editArea[0],e),a=h()(r,4),o=a[0],i=a[2];switch(a[3]){case 0:throw Error("Unsupported indexType JSONML.TAG_NAME_INDEX (0)");case 1:throw Error("Unsupported indexType JSONML.ATTRIBUTE_INDEX (1)");default:if(o&&!kt(o).isText())return;var c=o?o.nodeValue:"",l=c.substring(0,t)+n+c.substring(t);if(o&&o.parentNode===i)o.nodeValue=l;else{var s=document.createTextNode(l);i.insertBefore(s,i.firstChild)}}}},{key:"deleteInText",value:function(e,t,n){var r=Go(this.editArea[0],e),a=h()(r,4),o=a[0],i=a[2];switch(a[3]){case 0:throw Error("Unsupported indexType JSONML.TAG_NAME_INDEX (0)");case 1:throw Error("Unsupported indexType JSONML.ATTRIBUTE_INDEX (1)");default:if(!kt(i=o).isText())return;var c=i.nodeValue,l=c.substring(0,t)+c.substring(t+n.length);i.nodeValue=l}}},{key:"applyOperation",value:function(e){var t,n,r=e.p;0!==r.length&&(("si"in e||"sd"in e)&&(t=r[r.length-1],r=r.slice(0,-1)),("oi"in e||"od"in e)&&(n=r[r.length-1],r=r.slice(0,-1)),"od"in e&&this.removeAttribute(r,n),"oi"in e&&this.setAttribute(r,n,e.oi),"sd"in e&&this.deleteInText(r,t,e.sd),"si"in e&&this.insertInText(r,t,e.si),"ld"in e&&this.deleteNode(r),"li"in e&&this.insertNode(r,e.li))}},{key:"applyRemoteOperations",value:function(e){var t=this;try{var n=this.getRangeLakePath();e.forEach((function(e){t.applyOperation(e)})),this.setRangeByLakePath(n),this.engine.change.change()}catch(e){console.log(e)}}},{key:"applySelfOperations",value:function(e){var t=this;e.forEach((function(e){t.applyOperation(e)})),this.engine.change.change()}},{key:"setRangeAfterOp",value:function(e){var t,n=e.p,r=this.editArea;("si"in e||"sd"in e)&&(t=n[n.length-1],n=n.slice(0,-1)),("oi"in e||"od"in e)&&(n=n.slice(0,-1));var a=Go(r[0],n),o=h()(a,3),i=o[0],c=o[2],l=document.createRange();if("si"in e||"sd"in e){var s=""===i.data?c:i;return l.setStart(s,t+(e.si?e.si.length:0)),l.setEnd(s,t+(e.si?e.si.length:0)),void this.engine.change.select(l)}l.selectNodeContents(i||c.lastChild||c),En.shrinkRange(l),l.collapse(!1),this.engine.change.select(l)}},{key:"getRangeLakePath",value:function(){try{if(0===window.getSelection().rangeCount)return;var e=window.getSelection().getRangeAt(0);if(En.isInCard(e))return;return function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,a=e.endOffset;return{start:Xo(t,n),end:Xo(r,a)}}(e)}catch(e){return console.log(e),null}}},{key:"setRangeByLakePath",value:function(e){var t,n,r,a,o;if(e)try{var i=window.getSelection(),c=i.getRangeAt(0).cloneRange(),l=(n=(t=e).start,r=t.end,a=Ko(n),o=Ko(r),{startContainer:a&&a.container,startOffset:a&&a.offset,endContainer:o&&o.container,endOffset:o&&o.offset});l.startContainer&&c.setStart(l.startContainer,l.startOffset),l.endContainer&&c.setEnd(l.endContainer,l.endOffset),i.removeAllRanges(),this.engine.change.select(c)}catch(e){console.log(e)}}},{key:"setRangeByPath",value:function(e){if(e){var t=h()(e,2),n=t[0],r=t[1];if(n&&r){var a=n[n.length-1],o=r[r.length-1],i=n.slice(),c=r.slice();i.pop(),c.pop();var l=Xt(this.engine.editArea[0],i),s=Xt(this.engine.editArea[0],c);try{var u=this.engine.change.getRange();u.setStart(l,a),u.setEnd(s,o),this.engine.change.select(u),En.scrollRangeIntoView(u)}catch(e){console.log(e)}}}}}]),e}(),$o=function(){function e(t){l()(this,e),this.engine=t,this.editArea=t.editArea}return u()(e,[{key:"getAll",value:function(){for(var e=[],t=this.editArea[0].attributes,n=0;n<t.length;n++){var r=t.item(n),a=r.nodeName,o=r.nodeValue;if(/^data-selection-/.test(a)&&o){var i=JSON.parse(decodeURIComponent(o));i&&e.push(i)}}return e}},{key:"setAll",value:function(e){var t=this.editArea,n={};e.forEach((function(e){if(e){var r="data-selection-".concat(e.uuid);n[r]=!0;var a=t.attr(r),o=encodeURIComponent(JSON.stringify(e));a!==o&&t.attr(r,o)}}));for(var r=t[0].attributes,a=0;a<r.length;a++){var o=r.item(a).nodeName;/^data-selection-/.test(o)&&!n[o]&&t.removeAttr(o)}}},{key:"remove",value:function(e){var t=this.editArea,n="data-selection-".concat(e);t.removeAttr(n)}},{key:"updateAll",value:function(e,t){var n=this.engine,r=n.card,a=n.change,o=a.getSelectionRange().cloneRange(),i=a.activeCard;if(i&&i.closest("body").length>0){var c=r.getCenter(i);c[0]&&c[0].nodeType&&o.selectNodeContents(c[0])}var l=Zr.toPath(o);this.currentRangePath=l;var s=JSON.stringify(l),u=this.getAll(),d=!1,f=!1;return u=(u=u.map((function(n){return n?n.uuid===e.uuid?(d=!0,s===JSON.stringify(n.path)||(f=!0,n.path=l,n.active=!0),n):t.find((function(e){return e.uuid===n.uuid}))?(n.active=!1,n):(f=!0,null):(f=!0,null)}))).filter((function(e){return!!e})),d||(f=!0,u.push({path:l,uuid:e.uuid,active:!0})),f&&this.setAll(u),{data:u,range:o}}}]),e}();function Qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qo(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ei=y()("engine:ot"),ti=function(){function e(t,n){var r=this;l()(this,e),this.engine=t,this.editArea=t.editArea,this.lang=t.lang,this.card=t.card,this.parentNode=n.parentNode,this.hideCursorInfoTimeoutIdMap={},this.updateBackgroundPosition=J()((function(){r._updateBackgroundPosition()}),50)}return u()(e,[{key:"destroy",value:function(){var e=this.parentNode;e.children(".lake-user-background").remove(),e.children(".lake-user-cursor").remove(),e.children(".lake-card-mask").remove()}},{key:"getRelativeRect",value:function(e,t){var n=En.getClientRect(t),r=e[0].getBoundingClientRect();return{x:n.left-r.left,y:n.top-r.top,width:n.right-n.left,height:n.bottom-n.top}}},{key:"cacheRange",value:function(e){return{startOffset:e.startOffset,endOffset:e.endOffset,startContainer:e.startContainer,endContainer:e.endContainer,commonAncestorContainer:e.commonAncestorContainer}}},{key:"isRangeWrap",value:function(e){var t=e.cloneRange();t.collapse(!0);var n=En.getClientRect(t),r=e.cloneRange();r.collapse(!1);var a=En.getClientRect(r);return n.bottom!==a.bottom}},{key:"drawOneByOne",value:function(e,t,n,r){for(var a=this.cacheRange(n),o=a.startOffset;o<a.endOffset;){n.setStart(a.commonAncestorContainer,o),n.setEnd(a.commonAncestorContainer,o+1);var i=this.getRelativeRect(e,n);t.clearRect(i),t.draw("Rect",Jo(Jo({},i),r)),o++}n.setStart(a.startContainer,a.startOffset),n.setEnd(a.endContainer,a.endOffset)}},{key:"drawBackground",value:function(e,t){var n=this,r=this.parentNode,a=t.uuid,o=t.color,i=me()(o);i.setAlpha(.3);var c,l={fill:i.toRgbString()},s=r.children('.lake-user-background[data-uuid="'.concat(a,'"]'));s.length>0?(s.attr("data-color",o),(c=s[0].__targetCanvas).clear()):((s=kt('<div class="lake-user-background" data-uuid="'.concat(a,'" data-color="').concat(o,'" />'))).css({position:"absolute",top:0,left:0,"pointer-events":"none"}),r.append(s),c=new Jr({container:s[0]}),s[0].__targetCanvas=c),s[0].__targetRange=e;var u=r.width(),d=r.height();c.resize(u,d);var f=En.getSubRanges(e);return f.forEach((function(e){if(n.isRangeWrap(e))n.drawOneByOne(s,c,e,l);else{var t=n.getRelativeRect(s,e);c.clearRect(t),c.draw("Rect",Jo(Jo({},t),l))}})),f}},{key:"getNodeRect",value:function(e,t){if((e=kt(e)).isCard()&&"checkbox"===e.attr("data-lake-card")&&e.next()&&(e=e.next()),e.isElement()&&(t=e[0].getBoundingClientRect()),e.isText()){var n=document.createRange();n.selectNodeContents(e[0]),t=En.getClientRect(n)}return t}},{key:"getCursorRect",value:function(e){var t=this.parentNode[0].getBoundingClientRect();if(e.startContainer){var n=e;En.shrinkRange(n);var r=En.getClientRect(n),a=kt(n.startContainer);if(a.isElement()&&0===r.height){var o=a[0].childNodes[n.startOffset];(o||(o=a.first()))&&(r=this.getNodeRect(o,r))}var i=r.top-t.top,c=r.left-t.left-2,l=r.height;return{left:c+"px",top:i+"px",height:l>0?l+"px":-1}}var s=e,u=Xe.removeUnit(s.css("outline-width")),d=s[0].getBoundingClientRect(),f=d.top-t.top-1,p=d.left-t.left;return u&&(f-=u+1,p-=2),{left:p+"px",top:f+"px",height:0}}},{key:"setCursorRect",value:function(e,t){if(-1!==t.height){if(0===t.height)return e.css(t),void e.addClass("lake-user-cursor-card");e.css(t),e.removeClass("lake-user-cursor-card")}else e.remove()}},{key:"showCursorInfo",value:function(e,t){var n=t.uuid,r=t.color;this.hideCursorInfoTimeoutIdMap[n]&&window.clearTimeout(this.hideCursorInfoTimeoutIdMap[n]);var a=e.find(".lake-user-cursor-trigger"),o=e.css("background-color");e.attr("data-old-background-color",o),a.addClass("lake-user-cursor-trigger-active"),e.css("background-color",r),a.css("background-color",r)}},{key:"hideCursorInfo",value:function(e){var t=e.find(".lake-user-cursor-trigger"),n=e.attr("data-old-background-color");t.removeClass("lake-user-cursor-trigger-active"),e.css("background-color",n),t.css("background-color",n)}},{key:"drawCursor",value:function(e,t){var n=this,r=this.parentNode,a=t.uuid,o=t.name,i=t.color,c=Xe.escape,l=this.getCursorRect(e),s=r.children('.lake-user-cursor[data-uuid="'.concat(a,'"]'));if(s.length>0)this.setCursorRect(s,l);else{var u='\n      <div class="lake-user-cursor" data-uuid="'.concat(a,'">\n        <div class="lake-user-cursor-trigger">').concat(c(o),"</div>\n      </div>\n      "),d=(s=kt(u)).find(".lake-user-cursor-trigger");this.setCursorRect(s,l),s.on("mouseenter",(function(){return n.showCursorInfo(s,t)}));var f=!0;s.on("transitionstart",(function(){f=!1})),s.on("transitionend",(function(){f=!0})),s.on("mouseleave",(function(){f&&n.hideCursorInfo(s)})),s.css("background-color",i),d.css("background-color",i),this.parentNode.append(s)}if(s[0])return s[0].__target=e,this.showCursorInfo(s,t),this.hideCursorInfoTimeoutIdMap[a]&&window.clearTimeout(this.hideCursorInfoTimeoutIdMap[a]),this.hideCursorInfoTimeoutIdMap[a]=window.setTimeout((function(){n.hideCursorInfo(s)}),2e3),s}},{key:"drawCardMask",value:function(e,t,n){var r=this,a=this.lang,o=this.parentNode,i=n.uuid,c=o[0].getBoundingClientRect(),l=e[0].getBoundingClientRect(),s=o.children('.lake-card-mask[data-uuid="'.concat(i,'"]'));if(s.length>0)return s[0].__targetNode=e[0],void s.css({left:l.left-c.left+"px",top:l.top-c.top+"px"});(s=kt('<div class="lake-card-mask" data-uuid="'.concat(i,'" />')))[0].__targetNode=e[0],s.css({left:l.left-c.left+"px",top:l.top-c.top+"px",width:l.width+"px",height:l.height+"px"}),s.on("mouseenter",(function(){r.showCursorInfo(t,n),Ca.show(s,a.card.lockAlert,{placement:"bottomLeft"})})),s.on("mousemove",(function(e){var t=kt("div[data-lake-element=embed-tooltip]"),n=e.pageX-16,r=e.pageY+32;t.css({left:n+"px",top:r+"px"})})),s.on("mouseleave",(function(){r.hideCursorInfo(t),Ca.hide()})),s.on("click",(function(e){e.preventDefault(),e.stopPropagation()})),s.on("mousedown",(function(e){e.preventDefault(),e.stopPropagation()})),o.append(s)}},{key:"setCardSelectedByOther",value:function(e,t){var n=t.uuid,r=t.color;if(r){var a=me()(r);a.setAlpha(.3);var o,i=a.toRgbString();return e.selectByOther&&!e.state.selectedByOther&&(o=e.selectByOther(r,i)),e.state.selectedByOther=n,o}e.unselectByOther&&e.state.selectedByOther&&e.unselectByOther(),e.state.selectedByOther=!1}},{key:"setCardActivatedByOther",value:function(e,t){var n=t.uuid,r=t.color;if(r){var a=me()(r);a.setAlpha(.3);var o,i=a.toRgbString();return e.activateByOther&&!e.state.activatedByOther&&(o=e.activateByOther(r,i)),e.state.activatedByOther=n,o}e.unactivateByOther&&e.state.activatedByOther&&e.unactivateByOther(),e.state.activatedByOther=!1}},{key:"drawRange",value:function(e,t){var n,r=this.card,a=this.parentNode,o=t.uuid,i=kt(e.commonAncestorContainer),c=r.components;if(r.isCenter(i)){var l=r.closest(i),s=r.getComponent(l);if(!s)return;n={cardRoot:l,component:s}}for(var u=0;u<c.length;u++){var d=c[u];n&&d.node[0]===n.cardRoot[0]||(d.component.state.activatedByOther===o&&this.setCardActivatedByOther(d.component,!1),a.children('.lake-card-mask[data-uuid="'.concat(o,'"]')).remove())}if(n){var f=n,p=f.cardRoot,h=f.component,m=this.setCardActivatedByOther(h,t)||p,g=this.drawCursor(m,t);!h.constructor.canCollab&&g&&this.drawCardMask(m,g,t)}else{for(var v=0;v<c.length;v++){var y=c[v],b=y.component,k=r.getCenter(y.node)[0];k&&b&&(e.isPointInRange(k,0)?this.setCardSelectedByOther(b,t):b.state.selectedByOther===o&&this.setCardSelectedByOther(b,!1))}var w=r.getSingleSelectedCard(e);if(w){var x=r.getComponent(w);if(x){var _=this.setCardSelectedByOther(x,t)||w;this.drawCursor(_,t)}}else{En.shrinkRange(e);var E=this.drawBackground(e,t);e.collapsed||(E.forEach((function(t){t.collapsed||(e=t)})),En.shrinkRange(e),e.collapse(!1)),this.drawCursor(e,t)}}}},{key:"_updateBackgroundPosition",value:function(){var e=this;ei("rangeColoring.updateBackgroundPosition"),this.parentNode.children(".lake-user-background").each((function(t){var n=kt(t),r=t.__targetRange,a=n.attr("data-uuid"),o=n.attr("data-color");e.drawBackground(r,{uuid:a,color:o})}))}},{key:"updateCursorPosition",value:function(){var e=this;ei("rangeColoring.updateCursorPosition"),this.parentNode.children(".lake-user-cursor").each((function(t){var n=kt(t),r=t.__target;if(r.startContainer||0!==kt(r).closest("body").length){var a=e.getCursorRect(r);e.setCursorRect(n,a)}else n.remove()}))}},{key:"updateCardMaskPosition",value:function(){ei("rangeColoring.updateCardMaskPosition");var e=this.parentNode,t=e[0].getBoundingClientRect();e.children(".lake-card-mask").each((function(e){var n=kt(e),r=e.__targetNode;if(0!==kt(r).closest("body").length){var a=r.getBoundingClientRect();n.css({left:a.left-t.left+"px",top:a.top-t.top+"px"})}else n.remove()}))}},{key:"updatePosition",value:function(){this.updateBackgroundPosition(),this.updateCursorPosition(),this.updateCardMaskPosition()}},{key:"updateBackgroundAlpha",value:function(e){var t=this.getCursorRect(e);this.parentNode.children(".lake-user-cursor").each((function(e){var n=kt(e),r=n.find(".lake-user-cursor-trigger"),a=n.css("left"),o=n.css("top"),i=me()(n.css("background-color"));t.left===a&&t.top===o?i.setAlpha(.3):i.setAlpha(1),n.css("background-color",i.toRgbString()),r.css("background-color",i.toRgbString())}))}},{key:"render",value:function(e,t,n){var r=this,a=this.editArea,o=this.parentNode,i=this.card,c={};e.forEach((function(e){var o=e.path,i=e.uuid,l=e.active,s=t.find((function(e){return e.uuid===i}));if(s&&(n||l))if(0!==o.length){var u=Zr.fromPath(a,o);r.drawRange(u,s)}else c[i]=!0})),o.children("[data-uuid]").each((function(e){var n=(e=kt(e)).attr("data-uuid");if(!t.find((function(e){return e.uuid===n}))||c[n]){if(e.hasClass("lake-card-mask")){var a=kt(e[0].__targetNode),o=i.getComponent(a);o&&o.state.activatedByOther===n&&r.setCardActivatedByOther(o,!1)}e.remove()}}));for(var l=i.components,s=function(e){var n=l[e].component;if(n){var a=t.find((function(e){return e.uuid===n.state.selectedByOther}));a&&!c[a.uuid]||r.setCardSelectedByOther(n,!1)}},u=0;u<l.length;u++)s(u)}}]),e}();var ni=function(e){oe()(n,G.EventEmitter2);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e,r){var a;return l()(this,n),(a=t.call(this)).engine=e,a.editArea=r,a.mode="lock",a.version=0,a.create(),a}return u()(n,[{key:"destroy",value:function(){delete this.data}},{key:"create",value:function(){this.data=qo.fromDOM(this.editArea[0])}},{key:"apply",value:function(e){if(e.length)try{this.data=E.a.type.apply(this.data,e)}catch(e){console.log(e)}}},{key:"submitOp",value:function(e){this.apply(e)}}]),n}();function ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ai=y()("engine:ot"),oi=["#597EF7","#73D13D","#FF4D4F","#9254DE","#36CFC9","#FFA940","#F759AB","#40A9FF"],ii=function(e){oe()(n,G.EventEmitter2);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;l()(this,n);var a=e.editArea,o=e.parentNode;return(r=t.call(this)).engine=e,r.editArea=a,r.members=[],r.currentMember={},r.selectionData=new $o(e),r.rangeColoring=new ti(e,{parentNode:o}),r.applier=new Zo(e),r.mutation=new Yo(a,{engine:e}),r.mutation.on("ops",(function(e){r.handleOps(e)})),r.updateRangeColoringPosition=J()((function(){r.updateSelectionData(),r.rangeColoring.updatePosition()}),100),r.clientId=Zr.randomString(),r.waitingOps=[],r.applyWaitingOps=J()((function(){var e=Zr.reduceOperations(r.waitingOps);if(e.length>0){r.waitingOps=[],r.applyAll(e),r.engine.history.collectRemoteOps(e);var t=r.selectionData.getAll();r.doRangeColoring(t)}}),0),e.on("select",(function(){r.updateSelectionData()})),r}return u()(n,[{key:"destroy",value:function(){this.doc&&this.doc.destroy(),this.stopMutation(),this.rangeColoring.destroy(),this.mutation=null}},{key:"initLockMode",value:function(){this.stopMutation();var e=this.engine,t=this.editArea;this.doc=new ni(e,t),this.mutation.setDoc(this.doc),this.startMutation()}},{key:"init",value:function(e){var t=this,n=!this.doc||"lock"===this.doc.mode;this.stopMutation(),n||this.doc.destroy(),this.doc=e,this.mutation.setDoc(e),this.syncData(),e.on("op",(function(e,n){t.clientId!==n&&(t.checkLakexOp(e),t.waitingOps=t.waitingOps.concat(e),t.applyWaitingOps())})),this.initSelection(),this.startMutation(),n&&this.emit("load")}},{key:"checkLakexOp",value:function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ri(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ri(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(0===r.p.length&&r.oi&&r.oi.content||"content"===r.p[0]){this.emit("lakexOp");break}}}catch(e){n.e(e)}finally{n.f()}}},{key:"handleOps",value:function(e){var t=this.doc;this.submitOps(e),this.engine.history.collectSelfOps(e),"lock"!==t.mode&&this.updateRangeColoringPosition()}},{key:"submitOps",value:function(e){this.doc.submitOp(e,{source:this.clientId})}},{key:"applyAll",value:function(e){this.stopMutation(),ai("applyAll",JSON.stringify(e)),this.applier.applyRemoteOperations(e),this.startMutation()}},{key:"syncData",value:function(){var e=this.editArea,t=this.doc;if(t.data&&t.data.content)return ai("meet lakex",JSON.stringify(t.data)),void this.emit("lakexOp");if(Array.isArray(t.data)&&t.data.length>0&&"lock"!==t.mode)return ai("syncData:setJsonValue",JSON.stringify(t.data)),void this.setData(t.data);ai("doc.version=".concat(t.version));var n=qo.fromDOM(e[0]);t.data?(ai("syncData:submitOp",JSON.stringify(n)),t.submitOp([{p:[],oi:n}],{source:this.clientId})):(ai("syncData:create",JSON.stringify(n)),t.create(n,"json0",{source:this.clientId}))}},{key:"setData",value:function(e){this.engine.setJsonValue(e)}},{key:"startMutation",value:function(){this.mutation&&(ai("startMutation"),this.mutation.start())}},{key:"stopMutation",value:function(){this.mutation&&(ai("stopMutation"),this.mutation.stop())}},{key:"setMemberIdToUuid",value:function(e){e.__uuid=e.uuid,e.uuid=String(e.id).toLowerCase()}},{key:"setMemberUuidToId",value:function(e){e.uuid=e.__uuid,delete e.__uuid}},{key:"setMemberColor",value:function(e){var t=((e.iid||1)-1)%oi.length;e.color=oi[t]}},{key:"getMembers",value:function(){var e=this,t=R()(this.members);return t.forEach((function(t){e.setMemberUuidToId(t)})),ai("getMembers",t),t}},{key:"setMembers",value:function(e){var t=this;(e=R()(e)).forEach((function(e){t.setMemberIdToUuid(e),t.setMemberColor(e)})),this.members=e,ai("setMembers",e)}},{key:"addMember",value:function(e){e=R()(e),this.setMemberIdToUuid(e),this.setMemberColor(e),this.members.find((function(t){return t.uuid===e.uuid}))||(this.members.push(e),ai("addMember",e))}},{key:"removeMember",value:function(e){e=R()(e),this.setMemberIdToUuid(e),this.members=this.members.filter((function(t){return t.uuid!==e.uuid})),this.selectionData.remove(e.uuid);var t=this.selectionData.getAll();this.doRangeColoring(t),ai("removeMember",e)}},{key:"setCurrentMember",value:function(e){e=R()(e),this.setMemberIdToUuid(e),this.setMemberColor(e),e=this.members.find((function(t){return t.uuid===e.uuid})),this.currentMember=e,ai("setCurrentMember",e)}},{key:"doRangeColoring",value:function(e,t){var n=this.members,r=this.currentMember;e=e.filter((function(e){return e.uuid!==r.uuid})),this.rangeColoring.render(e,n,t),this.rangeColoring.updatePosition()}},{key:"updateSelectionData",value:function(){if(!this.engine.domEvent.isComposing){var e=this.selectionData.updateAll(this.currentMember,this.members).range;this.rangeColoring.updateBackgroundAlpha(e)}}},{key:"initSelection",value:function(){var e=this.selectionData.updateAll(this.currentMember,this.members).data;this.doRangeColoring(e,!0)}}]),n}(),ci={dnd:{tips:"Drag to reposition"},copy:{tips:"Copy",success:"Copied successfully",error:"Copy error"},delete:{tips:"Delete"},copyAnchor:{tips:"Copy paragraph link"},link:{linkPlaceholder:"Please enter a link or anchor and press Enter to confirm",linkSave:"Apply",linkEdit:"Change",linkDelete:"Remove link",linkOpen:"Open link",linkText:"link"},copyContent:{tips:"Copy content"},maximize:{tips:"Maximize",back:"Back to document"},expand:{tips:"Embedded preview"},collapse:{tips:"Compact display"},card:{lockAlert:"Please wait for the other user to finish editing"},preferences:{tips:"Preferences"},download:{tips:"Download"},copyCardLink:{tips:"Copy card link"},preview:{tips:"Preview"},gotoLink:{tips:"Open in new tab"},docTitle:{tips:"Title"},docCard:{tips:"Card"},docEmbed:{tips:"Embed"},more:{tips:"More"},heightMode:{default:"Default Height",adaptive:"Adaptive Height"},blockFallback:{mainTip:"Card cannot be displayed",subTip:'Please visit <a href="%s" target="_blank">Yuque</a> to see the effect'},inlineFallback:{tip:"Card cannot be displayed",tooltip:'Please visit <a href="%s" target="_blank">Yuque</a> to see the effect'}},li={dnd:{tips:"拖动调整位置"},copy:{tips:"复制",success:"复制成功",error:"复制失败"},delete:{tips:"删除"},copyAnchor:{tips:"复制段落链接"},link:{linkPlaceholder:"请输入链接或锚点，回车确认",linkSave:"保存",linkEdit:"编辑",linkDelete:"取消链接",linkOpen:"打开链接",linkText:"链接"},copyContent:{tips:"复制内容"},maximize:{tips:"最大化",back:"返回文档"},expand:{tips:"嵌入预览"},collapse:{tips:"紧凑展示"},card:{lockAlert:"请等待对方编辑完毕后，再进入编辑"},preferences:{tips:"设置"},download:{tips:"下载"},copyCardLink:{tips:"复制卡片链接"},preview:{tips:"预览"},gotoLink:{tips:"在新标签页中打开"},docTitle:{tips:"标题"},docCard:{tips:"卡片"},docEmbed:{tips:"嵌入"},more:{tips:"更多"},heightMode:{default:"默认高度",adaptive:"自适应高度"},blockFallback:{mainTip:"该卡片在客户端暂时无法显示",subTip:'客户端暂未支持该类型卡片，可打开 <a href="%s" target="_blank">语雀网页版</a> 查看'},inlineFallback:{tip:"该卡片在客户端暂时无法显示",tooltip:'客户端暂未支持该类型卡片，可打开 <a href="%s" target="_blank">语雀网页版</a> 查看'}},si=["yuque.com"],ui=["lark.alipay.com","yuque.antfin-inc.com","yuque.antfin.com","yuque.alibaba-inc.com"];function di(e,t){var n=t?"https://www.yuque.com":"https://yuque.antfin.com",r=t?si:ui;try{var a=new URL(e,n);for(var o in r)if(a&&a.hostname.endsWith(r[o]))return!0;return!1}catch(e){return!1}}var fi=function(){function e(t){l()(this,e),g()(this,"__engine",null),g()(this,"__providers",{}),this.__engine=t}return u()(e,[{key:"getMeta",value:function(e,t){return this.__verifyProvider(e),this.__providers[e].getMeta(t)}},{key:"hasMeta",value:function(e,t){return this.__verifyProvider(e),this.__providers[e].hasMeta(t)}},{key:"getRawMeta",value:function(e){return this.__verifyProvider(e),this.__providers[e].getRawMeta()}},{key:"setMeta",value:function(e,t){this.__verifyProvider(e),this.__providers[e].setRawMeta(t)}},{key:"registerProvider",value:function(e,t){this.__providers[e]=t}},{key:"__verifyProvider",value:function(e){if(!this.__providers[e])throw new Error('named "'.concat(e,'" meta provider is not found'))}}]),e}(),pi=u()((function e(){var t=this;l()(this,e),g()(this,"cache",{}),g()(this,"get",(function(e){return t.cache[e]})),g()(this,"set",(function(e,n){t.cache[e]=n}))})),hi={en:ci,"zh-cn":li},mi=new Ya,gi=new Xa;function vi(){var e,t,n,r,a=kt("<p />"),o=this.change.getRange(),i=sn(o);i&&(e=kt(i.anchor).next(),t=kt(i.focus).prev(),n=kt(i.anchor).parent(),r=kt(i.focus).parent()),e&&i.anchor.remove(),t&&i.focus.remove(),this.editArea.children().each((function(e){(e=kt(e)).isBlock()?a.children().length>0&&(e.before(a),a=kt("<p />")):a.append(e)})),a.children().length>0&&this.editArea.append(a),e&&e.before(i.anchor),t&&t.after(i.focus),!i||e||t||(n.isRoot()&&a.append(i.anchor),r.isRoot()&&a.append(i.focus),a.children().length>0&&this.editArea.append(a)),this.editArea.children().each((function(e){if(e=kt(e),Zt.removeMinusStyle(e,"text-indent"),e.isHeading()){var t=e.children().length;if(0!==t){var n=e.first();1===t&&"span"===n.name&&function(e){return[be,ve,ye].indexOf(e.attr(ge))>=0}(n)&&e.prepend("<br />")}else e.remove()}})),un(o,i)}function yi(){var e=this.editArea,t=this.options;e.attr(at,"root"),e.attr({contenteditable:"true",role:"textbox",autocorrect:"en"===this.options.lang?"on":"off",autocomplete:"off",spellcheck:"en"===this.options.lang?"true":"false","data-gramm":"false"}),e.hasClass("lake-engine")||e.addClass("lake-engine"),void 0!==t.tabIndex&&e.attr("tabindex",t.tabIndex),void 0!==t.className&&e.addClass(t.className)}function bi(){var e=this.editArea,t=this.options;e.removeAttr(at),e.removeAttr("contenteditable"),e.removeAttr("role"),e.removeAttr("autocorrect"),e.removeAttr("autocomplete"),e.removeAttr("spellcheck"),e.removeAttr("data-gramm"),e.removeAttr("tabindex"),e.removeClass(t.className),this.card.closest(e)&&e.removeClass("lake-engine")}function ki(){gi.execute(this,"initialize"),gi.execute(this,"bothInit")}function wi(){var e=this,t=this.options.meta;t&&Object.keys(t).forEach((function(n){e.metaManager.setMeta(n,t[n])}))}function xi(e){if(kt(e.target).isRoot()){var t=this.editArea.last();if(t){if(!t.isCard()&&"blockquote"!==t.name)return;if(t[0].offsetTop+t[0].clientHeight>e.offsetY)return}var n=kt("<p><br /></p>");this.editArea.append(n);var r=this.change.getRange();r.selectNodeContents(n[0]),r.collapse(!1),this.change.select(r)}}function _i(){var e=this;this.editArea.on("input",(function(t){if(!e.isReadonly&&!e.card.closest(t.target)){var n=e.change.getRange();sr.addOrRemoveBr(n,"left"),e.change.change()}})),this.editArea.on("click",(function(t){return xi.call(e,t)})),this.editArea.on("keydown",(function(t){return Fo.call(e,t)})),this.editArea.on("keyup",(function(t){return Vo.call(e,t)})),this.editArea.on("focus",(function(){e._isFocused=!0,e.change.clearBackupRange(),e.parentEngine&&e.parentEngine.change.clearBackupRange(),e.event.trigger("focus")})),this.editArea.on("blur",(function(){e._isFocused=!1,e.change._backupRange=e.change.getRange().cloneRange(),e.event.trigger("blur")}))}var Ei=function(){function e(t,n){var r=this;l()(this,e),g()(this,"_forceRendering",!1),g()(this,"toolbar",{set:function(){},updateState:function(){},restore:function(){},disable:function(){}}),g()(this,"sidebar",{set:function(){},close:function(){},restore:function(){}}),this.id="engine-".concat(De()),this.editArea=kt(t),this.editArea[0]._lakeEngine=this,this.options=n||{enableDeferredRendering:!1},this.globalData=new pi,yi.call(this),this.parentNode=kt(this.options.parentNode||document.body),this.parentEngine=this.options.parentEngine,this.scrollNode=this.options.scrollNode,this.lang=hi[this.currentLanguage()],this._userChanged=!1,this.deferredRendering=!1,this.schema=new ta,this.schema.add(Da),this.conversion=new Na,this.metaManager=new fi(this),this.change=new po(this.editArea,{engine:this,schema:this.schema,conversion:this.conversion,card:mi,onChange:function(){return r.event.trigger("change")},onSelect:function(){return r.event.trigger("select")},onSetValue:function(){return r.event.trigger("setvalue")}}),this.doc=this.change.doc,this.history=this.change.history,this.domEvent=this.change.domEvent,this.event=new it(this),this.asyncEvent=new G.EventEmitter2({wildcard:!0,delimiter:":",newListener:!1,maxListeners:100}),this.command=new La(this.change),this.hotkey=new mo(this.command),this.card=mi,this.ot=new ii(this),this.isReadonly=!1,this.isDestroyed=!1,this._isFocused=document.activeElement===this.editArea[0],this.setTypography("classic"===this.options.typography),this.typography=this.options.typography||"traditional",ki.call(this),_i.call(this),wi.call(this),this.initCut();var a=location.search||"";this._forceRendering=-1!==a.indexOf("forceRendering")||-1!==a.indexOf("export_type"),this.ot.on("lakexOp",(function(){r.event.trigger("useLakex")}))}return u()(e,[{key:"currentLanguage",value:function(){return this.options.lang||"zh-cn"}},{key:"setMeta",value:function(e,t){return this.metaManager.setMeta(e,t),this}},{key:"getMeta",value:function(e,t){return this.metaManager.getMeta(e,t)}},{key:"hasMeta",value:function(e,t){return this.metaManager.hasMeta(e,t)}},{key:"restoreRange",value:function(){this.change.restoreRange()}},{key:"hasUserChanged",value:function(){return this._userChanged}},{key:"resetUserChange",value:function(){this._userChanged=!1}},{key:"setUserChanged",value:function(){this._userChanged=!0,this.event.trigger("userchanged")}},{key:"getHtml",value:function(e){return Ci(this.editArea[0].cloneNode(!0),e)}},{key:"getHtmlWithStopNode",value:function(e,t){return Ci(function e(t,n){if(!n||t===n)return t.cloneNode(!0);for(var r=t.cloneNode(!1),a=n;a&&a.parentNode!==t;)a=a.parentNode;if(!a)return r;for(var o=a.previousSibling;o;)r.insertBefore(o.cloneNode(!0),r.firstChild),o=o.previousSibling;var i=e(a,n);return i&&r.appendChild(i),r}(this.editArea[0],t),e)}},{key:"setTypography",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?"classic":"traditional",n=this.typography;this.typography=t,e?(this.editArea.addClass("lake-typography-classic"),this.editArea.removeClass("lake-typography-traditional")):(this.editArea.addClass("lake-typography-traditional"),this.editArea.removeClass("lake-typography-classic")),this.typography!==n&&(this.event.trigger("typographychange",this.typography,n),this.event.trigger("select"))}},{key:"getTypography",value:function(){return this.typography}},{key:"initCut",value:function(){var e=this;this.editArea.on("cut",(function(t){t.stopPropagation(),jr(t,void 0,(function(){(function(){var e,t=window.getSelection().getRangeAt(0),n=kt(t.commonAncestorContainer);qn(t),e=-1!==["ul","ol"].indexOf(n.name)?n:n.find("ul,ol");for(var r=0;r<e.length;r++){var o=kt(e[r]);o.find("li").each((function(e){(""===e.innerText||a.ua.safari&&"\n"===e.innerText)&&e.parentNode.removeChild(e)})),0===o.children().length&&o.remove()}if(n[0].isConnected){var i=n.closest("li.lake-list-task");i.length&&function(e){for(var t=(e=kt(e)[0]).childNodes.length-1;t>=0;t--){var n=e.childNodes[t];if(n.nodeType!==Node.TEXT_NODE||""!==n.textContent)break;e.removeChild(n)}if(1===e.childNodes.length){var r=kt(e.firstChild);r.isCard()&&"checkbox"===r.attr(_e)&&r.after("<br/>")}}(i)}})(),e.change.change()}))}))}},{key:"getGlobalData",value:function(e){return this.globalData.get(e)}},{key:"setGlobalData",value:function(e,t){return this.globalData.set(e,t)}},{key:"destroy",value:function(){this.event.trigger("beforedestory"),bi.call(this),this.editArea.removeAllEvents(),this.domEvent.destroy(),this.hotkey.destroy(),this.card.gc(),this.ot&&this.ot.destroy(),this.change.clearChangeTimer(),this.isDestroyed=!0}},{key:"isSub",value:function(){return this.editArea.closest(Se).length>0}},{key:"readonly",value:function(e){this.isReadonly!==e&&(e?(this.hotkey.disable(),this.editArea.attr("contenteditable","false")):(this.hotkey.enable(),this.editArea.attr("contenteditable","true")),this.event.trigger("readonly",e),this.isReadonly=e,Qt.log("engine.readonly(".concat(e,")")))}},{key:"isDeferredRendering",value:function(){return this.options.enableDeferredRendering&&this.deferredRendering&&!this._forceRendering}},{key:"startDeferredRendering",value:function(){this.deferredRendering=!0}},{key:"stopDeferredRendering",value:function(){this.deferredRendering=!1}},{key:"on",value:function(e,t,n){return this.event.on(e,t,n),this}},{key:"off",value:function(e,t){return this.event.off(e,t),this}},{key:"setValue",value:function(e,t){return this.readonly(!1),this.startDeferredRendering(),this.event.trigger("beforesetvalue"),this.change.setValue(e,t),vi.call(this),this.stopDeferredRendering(),this.card.renderController.run(this),this}},{key:"setJsonValue",value:function(e){for(var t=kt(qo.toDOM(e)),n=t[0].attributes,r=0;r<n.length;r++){var a=n.item(r),o=a.nodeName,i=a.nodeValue;/^data-selection-/.test(o)&&"null"!==i&&this.editArea.attr(o,i)}var c=t.html();this.change.setValue(c);var l=this.change.getRange();return ln(l),this.change.select(l),vi.call(this),this}},{key:"setDefaultValue",value:function(e){this.setValue(e)}},{key:"openLinkByNode",value:function(e){(e=kt(e)[0])&&"A"===e.nodeName&&e.hasAttribute("href")&&this.openLink(e.href,e.getAttribute("href"),e.hasAttribute("target"))}},{key:"openLink",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("boolean"==typeof t?(n=t,t=e):t||(t=e),window.appData&&(window.appData.isAlipayWebApp||window.appData.isDingTalkMiniApp)&&!di(e)){if(window.yqWebApp&&window.yqWebApp.openExternalLink)return void window.yqWebApp.openExternalLink(e);if(window.openExternalLinkInWebApp)return void window.openExternalLinkInWebApp(e)}n?window.open(e):location.href=e}},{key:"getValue",value:function(){return this.change.getValue()}},{key:"getPureValue",value:function(){return this.change.getValue({ignoreCursor:!0})}},{key:"isFocus",value:function(){return this._isFocused}},{key:"generateElementID",value:function(e){return lt(this.editArea[0],e)}},{key:"focus",value:function(){return this.change.focus()}},{key:"focusToStart",value:function(){return this.change.focusToStart()}},{key:"focusToEnd",value:function(){return this.change.focusToEnd()}},{key:"blur",value:function(){return this.change.blur()}},{key:"messageSuccess",value:function(e){console.log("messageSuccess: ",e)}},{key:"messageError",value:function(e){console.error("messageError: ",e)}},{key:"reset",value:function(e){var t=this;e&&this.setDefaultValue(e),this.history.reset(),this.resetUserChange(),setTimeout((function(){t.focusToStart()}),64)}}]),e}();function Ci(e,t){if(!t)throw"Need to pass in a parser";return e.removeAttribute("contenteditable"),e.removeAttribute("tabindex"),e.removeAttribute("autocorrect"),e.removeAttribute("autocomplete"),e.removeAttribute("spellcheck"),e.removeAttribute("data-gramm"),e.removeAttribute("role"),t.parse(e).html}Ei.create=function(e,t){return new Ei(e,t)},Ei.card=mi,Ei.plugin=gi;var Oi=function(){function e(t){l()(this,e),g()(this,"_pendingCount",0),g()(this,"_eventEmitter",null),g()(this,"_waiting",new Set),this._eventEmitter=t}return u()(e,[{key:"isReady",value:function(){return 0===this._pendingCount}},{key:"waitReady",value:function(){var e=this,t=new Promise((function(n){0===e._pendingCount?n():e._waiting.add({promise:t,resolve:n})}));return t}},{key:"add",value:function(){var e=this,t=!1;return this._pendingCount++,function(){t||(t=!0,e._pendingCount--,e._check())}}},{key:"_check",value:function(){0===this._pendingCount&&(this._waiting.forEach((function(e){(0,e.resolve)()})),this._waiting.clear())}}]),e}(),Si={en:ci,"zh-cn":li};function Ri(){var e=this,t=this.options.meta;t&&Object.keys(t).forEach((function(n){e.metaManager.setMeta(n,t[n])}))}var ji=function(){function e(t,n){l()(this,e),g()(this,"_allowDeferredRendering",!1),g()(this,"readyStateManager",null),console.time("contentView"),this.id="contentView-".concat(De()),this.editArea=t,(this.editArea[0]||this.editArea)._lakeContentView=this,this.options=n||{},this.lang=Si[this.options.lang||"zh-cn"],this.card=this.options.card,this.getScrollNode=this.options.getScrollNode,this.metaManager=new fi(this),this.plugin=this.options.plugin,this.schema=new ta,this.schema.add(Da),this.conversion=new Na,this.event=new it(this),this.isReadonly=!0,this.globalData=new pi,this.readyStateManager=new Oi,this.setTypography("classic"===this.options.typography),this.typography=this.options.typography||"traditional",this.plugin.execute(this,"bothInit"),Ri.call(this);var r=location.search||"",a=-1!==r.indexOf("forceRendering")||-1!==r.indexOf("export_type");this._allowDeferredRendering=this.getScrollNode&&this.options.enableDeferredRendering&&!a&&!function(){try{return"doc_embed"===new URL(location.href).searchParams.get("view")}catch(e){return!0}}(),console.timeEnd("contentView")}return u()(e,[{key:"isDeferredRendering",value:function(){return this._allowDeferredRendering}},{key:"isReady",value:function(){return this.readyStateManager.isReady()}},{key:"waitReady",value:function(){return this.readyStateManager.waitReady()}},{key:"setMeta",value:function(e,t){return this.metaManager.setMeta(e,t),this}},{key:"getMeta",value:function(e,t){return this.metaManager.getMeta(e,t)}},{key:"hasMeta",value:function(e,t){return this.metaManager.hasMeta(e,t)}},{key:"on",value:function(e,t,n){return this.event.on(e,t,n),this}},{key:"off",value:function(e,t){return this.event.off(e,t),this}},{key:"setTypography",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?"classic":"traditional",n=this.typography;this.typography=t,e?(this.editArea.addClass("lake-typography-classic"),this.editArea.removeClass("lake-typography-traditional")):(this.editArea.addClass("lake-typography-traditional"),this.editArea.removeClass("lake-typography-classic")),this.typography!==n&&this.event.trigger("typographychange",this.typography,n)}},{key:"getTypography",value:function(){return this.typography}},{key:"openLinkByNode",value:function(e){(e=kt(e)[0])&&"A"===e.nodeName&&e.hasAttribute("href")&&this.openLink(e.href,e.getAttribute("href"),e.hasAttribute("target"))}},{key:"openLink",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("boolean"==typeof t?(n=t,t=e):t||(t=e),window.appData&&(window.appData.isAlipayWebApp||window.appData.isDingTalkMiniApp)&&!di(e,window.appData.isYuque)){if(window.yqWebApp&&window.yqWebApp.openExternalLink)return void window.yqWebApp.openExternalLink(e);if(window.openExternalLinkInWebApp)return void window.openExternalLinkInWebApp(e)}n?window.open(e):location.href=e}},{key:"generateElementID",value:function(e){return lt(this.editArea[0],e)}},{key:"findElementById",value:function(e){return function(e,t){if(t.nodeType!==Node.ELEMENT_NODE)return null;var n=t.querySelector("[".concat("data-lake-id",'="').concat(e,'"]'));if(n)return n;if(-1===e.indexOf("_"))return null;var r=e.split("_"),a=h()(r,3),o=a[1],i=a[2];if(!o||!i)return console.warn("invalid element id"),null;var c=t.querySelectorAll(o),l=c.length;if(0===l)return null;if(c[i].getAttribute("data-lake-id")===e)return c[i];var s=i,u=-1;do{var d=c[s];if(d){if(d.hasAttribute("data-lake-id")){if(d.getAttribute("data-lake-id")===e)return d}else if(pt(d,s)===e)return d;s+=u,u=u>0?-(u+1):-u,(s<0||s>=l)&&(s+=u,u=u>0?-(u+1):-u)}}while(s>=0&&s<l);return null}(e,this.editArea[0])}},{key:"getGlobalData",value:function(e){return this.globalData.get(e)}},{key:"setGlobalData",value:function(e,t){return this.globalData.set(e,t)}}]),e}(),Pi={create:function(e,t){return new ji(e,t)}},Ai=function(){function e(t){var n=this;l()(this,e),g()(this,"hasFocus",!1),g()(this,"onClick",(function(e){if(n.card){var t=e.hasClass("lake-checkbox-checked");t?(e.removeClass("lake-checkbox-checked"),n.cardRoot.find(".lake-checkbox-input").removeAttr("checked")):(e.addClass("lake-checkbox-checked"),n.cardRoot.find(".lake-checkbox-input").attr("checked","checked")),n.value=!t,n.card.setValue(n.cardRoot,n.value),n.setListChecked(n.value)}})),t&&(this.engine=t,this.card=t.card)}return u()(e,[{key:"setListChecked",value:function(e){var t=Cn(this.cardRoot);t.hasClass("lake-list-task")&&t.attr("data-lake-checked",!!e)}},{key:"render",value:function(e,t){var n=this,r=kt('\n    <span class="lake-checkbox">\n      <input type="checkbox" class="lake-checkbox-input" value="">\n      <span class="lake-checkbox-inner"></span>\n    </span>\n    ');t&&(r.addClass("lake-checkbox-checked"),r.find(".lake-checkbox-input").attr("checked","checked")),e.append(r),this.setListChecked(t),this.engine&&r.on("click",(function(){return n.onClick(r)}))}}]),e}();g()(Ai,"type","inline"),g()(Ai,"singleSelectable",!1),g()(Ai,"canCollab",!0);var Ti=function(){function e(t){l()(this,e),t&&(this.engine=t,this.card=t.card)}return u()(e,[{key:"embedToolbar",value:function(){return[{type:"dnd"},{type:"copy"},{type:"separator"},{type:"delete"}]}},{key:"select",value:function(){this.cardRoot.find('[data-card-element="center"]').addClass("lake-hr-select")}},{key:"unselect",value:function(){this.cardRoot.find('[data-card-element="center"]').removeClass("lake-hr-select")}},{key:"activate",value:function(){this.cardRoot.find('[data-card-element="center"]').addClass("lake-hr-active")}},{key:"unactivate",value:function(){this.cardRoot.find('[data-card-element="center"]').removeClass("lake-hr-active")}},{key:"selectByOther",value:function(e,t){var n=this.cardRoot.find('[data-card-element="center"]');n.css("background-color",t),n.find("hr").css("background-color",t)}},{key:"unselectByOther",value:function(){var e=this.cardRoot.find('[data-card-element="center"]');e.css("background-color",""),e.find("hr").css("background-color","")}},{key:"activateByOther",value:function(e,t){this.selectByOther(e,t)}},{key:"unactivateByOther",value:function(){this.unselectByOther()}},{key:"render",value:function(e){e.append("<hr />")}}]),e}();g()(Ti,"type","block"),g()(Ti,"autoActivate",!1);var Di=function(){function e(){var t=this;l()(this,e),g()(this,"_onClick",(function(e){e.stopPropagation();var n=e.target;n.nodeName===Node.TEXT_NODE&&(n=n.parentNode),"A"===n.nodeName&&(e.preventDefault(),(t.engine||t.contentView).openLinkByNode(n))}))}return u()(e,[{key:"embedToolbar",value:function(){return[{type:"delete"}]}},{key:"didInsert",value:function(){this.container.on("click",this._onClick,!1)}},{key:"destroy",value:function(){this.container.off("click",this._onClick,!1)}},{key:"render",value:function(e){var t="zh-cn"===((this.engine||this.contentView).options.lang||"zh-cn")?li:ci;e.empty(),e.append(function(e){var t=K()(window,"appData.isYuque")?"https://www.yuque.com/":"https://yuque.antfin-inc.com/",n=e.blockFallback.subTip.replace("%s",encodeURI(t));return'\n    <div class="lake-block-fallback">\n      <div class="inner-content">\n        <img src="https://gw.alipayobjects.com/zos/bmw-prod/dc01c10b-e433-4bb3-bf7e-8b679725b823.svg" class="lake-block-fallback-crown-icon">\n        <div class="inner-tips">\n          <div class="main-tip">'.concat(Ie(e.blockFallback.mainTip),'</div>\n          <div class="sub-tip">').concat(n,"</div>\n        </div>\n      </div>\n    </div>\n  ")}(t))}}]),e}();g()(Di,"type","block"),g()(Di,"autoActivate",!1);var Mi=function(){function e(){var t=this;l()(this,e),g()(this,"$rootNode",null),g()(this,"_onMouseDown",(function(e){e.preventDefault()})),g()(this,"_onMouseEnter",(function(){t.$rootNode&&t.$rootNode.addClass("show")})),g()(this,"_onMouseLeave",(function(){t.$rootNode&&t.$rootNode.removeClass("show")})),g()(this,"_onClick",(function(e){e.stopPropagation();var n=e.target;n.nodeName===Node.TEXT_NODE&&(n=n.parentNode),"A"===n.nodeName&&(e.preventDefault(),t.$rootNode&&t.$rootNode.removeClass("show"),(t.engine||t.contentView).openLinkByNode(n))}))}return u()(e,[{key:"destroy",value:function(){this._unbindEvent()}},{key:"_bindEvent",value:function(){this.$rootNode&&(this.$rootNode.on("mousedown",this._onMouseDown,!1),this.$rootNode.on("mouseenter",this._onMouseEnter,!1),this.$rootNode.on("mouseleave",this._onMouseLeave,!1),this.$rootNode.on("click",this._onClick,!1))}},{key:"_unbindEvent",value:function(){this.$rootNode&&(this.$rootNode.off("mousedown",this._onMouseDown,!1),this.$rootNode.off("mouseenter",this._onMouseEnter,!1),this.$rootNode.off("mouseleave",this._onMouseLeave,!1),this.$rootNode.off("click",this._onClick,!1))}},{key:"render",value:function(e){var t="zh-cn"===((this.engine||this.contentView).options.lang||"zh-cn")?li:ci;this._unbindEvent(),e.empty(),this.$rootNode=kt(function(e){var t=K()(window,"appData.isYuque")?"https://www.yuque.com/":"https://yuque.antfin-inc.com/",n=e.inlineFallback.tooltip.replace("%s",encodeURI(t));return'\n    <div class="lake-inline-fallback">\n      <img src="https://gw.alipayobjects.com/zos/bmw-prod/1a587ec9-10ac-4204-96f4-f259c5f6c2c7.svg" class="lake-inline-fallback-icon">\n      <div class="inner-tips">'.concat(Ie(e.inlineFallback.tip),'</div>\n\n      <div class="fallback-tooltip ant-tooltip ant-tooltip-placement-bottomLeft">\n        <div class="ant-tooltip-content">\n          <div class="ant-tooltip-arrow"></div>\n          <div class="ant-tooltip-inner" role="tooltip">\n            <span>').concat(n,"</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  ")}(t)),e.append(this.$rootNode),this._bindEvent()}}]),e}();g()(Mi,"type","inline");var Ni=/(?:[\u0100-\uffff\s]|^)https?:\/\/(?:[^\/.]+?\.)+?[^\/.]+?(?:\/\S*?)?(?:(?=[\u0100-\uffff\s])|$)/g;function Li(){var e=[{color:me()(this.editArea.css("color")).toHex()},{"background-color":me()("white").toHex()},{"font-size":this.editArea.css("font-size")}],t=this.editArea.closest(Se);if(t.length>0){var n=t.closest(ot);e.push({color:me()(n.css("color")).toHex()}),e.push({"background-color":me()(n.css("background-color")).toHex()})}return e}function Ii(e){var t=this,n=Li.call(this),r=Zt.fetchAllChildren(e);r.forEach((function(e){(e=kt(e)).isCard()||(e.isElement()&&n.forEach((function(t){var n=Object.keys(t)[0],r=t[n],a=e[0].style[n];a&&(/color$/.test(n)&&(a=me()(a).toHex()),a===r&&e.css(n,""))})),Zt.removeMinusStyle(e,"text-indent"),"span"===e.name&&"table"===t.domEvent.copySource&&e.css("background-color",""),["ol","ul"].includes(e.name)&&e.css("padding-left",""),e.isElement()&&(e.attr("style")||e.removeAttr("style")),"span"===e.name&&0===Object.keys(e.attr()).length&&0===Object.keys(e.css()).length&&(""===e.text().trim()||e.first()&&(e.first().isMark()||e.first().isBlock()))?sr.unwrapNode(e):e.isBlock()&&sr.brToParagraph(e))})),(r=Zt.fetchAllChildren(e)).forEach((function(e){if((e=kt(e)).parent())if(/^docs-internal-guid-/.test(e.attr("id")))sr.unwrapNode(e);else if(!e.attr(Ee))if(!e.isBlock()||"p"===e.attr("data-type")||e.isVoid()||e.isSolid()||""!==e.html()){if("p"===e.attr("data-type")&&e.removeAttr("data-type"),"li"===e.name&&["ol","ul"].indexOf(e.parent().name)<0){var t=kt("<ul />");return e.before(t),void t.append(e)}if(["ol","ul"].indexOf(e.name)>=0&&["ol","ul"].indexOf(e.parent().name)>=0){var n=kt("<li />");return e.before(n),void n.append(e)}if(["ol","ul"].indexOf(e.name)>=0&&"li"===e.parent().name&&(e.prev()||e.next())){var r,a=e.parent(),o=a.parent().hasClass("lake-list");return a.children().each((function(e){if(e=kt(e),!Zt.isEmptyNodeWithTrim(e)){var t=["ol","ul"].indexOf(e.name)>=0;r&&!t||(r=kt(o?'<li class="lake-list-node lake-list-task" />':"<li />"),a.before(r)),r.append(e),t&&(r=null)}})),void a.remove()}if(!("p"===e.name&&["ol","ul"].indexOf(e.parent().name)>=0))return e.isBlock()&&!e.isVoid()&&""===e.html().trim()&&(e.isHeading()||"li"===e.name)&&e.html("<br />"),e.isHeading()&&"li"===e.parent().name?(1===e.children().length&&"br"===e.first().name||e.after("<br />"),void sr.unwrapNode(e)):void 0;sr.setNode(e,"<li />")}else e.remove()}))}function Bi(e){Zt.fetchAllChildren(e).forEach((function(e){(e=kt(e)).isElement()&&sr.unwrapNode(e)}))}function zi(e){var t=this;Ii.call(this,e);var n=this.change.getRange(),r=kt(n.commonAncestorContainer);if(r.closest("code").length>0)Bi.call(this,e);else{if(r.isText()&&n.startContainer===n.endContainer){var a=r[0].nodeValue,o=a.substr(0,n.startOffset),i=a.substr(n.endOffset);if(/\[.*?\]\($/.test(o)&&/^\)/.test(i))return void Bi.call(this,e)}var c=Zt.fetchAllChildren(e);c.forEach((function(e){e=kt(e),t.event.trigger("paste:each",e)})),(c=Zt.fetchAllChildren(e)).forEach((function(e){"pre"===(e=kt(e)).name&&e.find(Re).length>0&&sr.unwrapNode(e)})),Zt.normalize(e),e.normalize&&e.normalize(),(c=Zt.fetchAllChildren(e)).forEach((function(e){e=kt(e),["ol","ul"].includes(e.name)&&sr.addListStartNumber(e),function(e){var t=e[0].nodeValue;if(e.isText()&&t.length>0&&" "===t.charAt(0)&&e.prev()&&(e.prev().isMark()||e.prev().isInline())){if(1===t.length)e[0].nodeValue=" ";else if(" "!==t.charAt(1)){var n=e[0].splitText(1);n.previousSibling.nodeValue=" ",e=kt(n)}t=e[0].nodeValue}e.isText()&&t.length>0&&" "===t.charAt(t.length-1)&&e.next()&&(e.next().isMark()||e.next().isInline())&&(1===t.length?e[0].nodeValue=" ":" "!==t.charAt(t.length-2)&&(e[0].splitText(t.length-1).nodeValue=" "))}(e),function(e){if(e.nodeType===Node.TEXT_NODE&&!function(e){for(;e;){if("A"===e.nodeName)return!0;e=e.parentNode}return!1}(e)){var t=e.data,n=[],r=/\s/;if(t.toLowerCase().replace(Ni,(function(e,t){"h"!==e[0]&&(e=e.substring(1),t+=1),r.test(e[e.length-1])&&(e=e.substring(0,e.length-1)),n.push({offset:t,length:e.length})})),n.length){var a=[],o=0;n.forEach((function(e){var n=e.offset,r=e.length,i=t.substring(o,n);i&&a.push(document.createTextNode(i));var c=document.createElement("a"),l=t.substring(n,n+r);c.href=encodeURI(l),c.target="_blank",c.innerText=l,a.push(c),o=n+l.length}));var i=t.substring(o);i&&a.push(document.createTextNode(i));var c=e.parentNode;a.forEach((function(t){c.insertBefore(t,e)})),c.removeChild(e)}}}(e[0])}))}}function Fi(e){if(e.files.length>0)this.event.trigger("paste:files",e.files);else{var t="";if(e.isPasteText){var n="";e.text?n=e.text:e.html&&(n=new er(e.html).toText()),t=new na(n).toHTML()}else{var r=e.text;e.html&&-1!==e.html.indexOf('<meta name="source" content="lake"/>')?t=e.html:r&&/^https?:\/\/\S+$/.test(r)?(r=Xe.escape(r),t='<a href="'.concat(r,'" target="_blank">').concat(r,"</a>")):e.html?t=e.html:r&&(t=new na(r).toHTML())}var a=this.change.getValue();this.event.trigger("paste:string",e,a),this.command.execute("paste",t)}}var Ui={initialize:function(){var e=this;this.command.add("paste",{sideEffect:!0,execute:function(t){var n=e.schema.clone(),r=e.conversion.clone();n.add(["pre",{span:{"data-type":"*",style:{"font-size":"@length"}}},{p:{"data-type":"*"}},{mark:{id:"*"}},{block:{id:"*"}}]),e.event.trigger("paste:schema",n);var a=new er(t,n,r,(function(t){t.find("em").each((function(e){"normal"===e.style["font-style"]&&Dn(e)})),e.event.trigger("paste:origin",t)})).toDOM();zi.call(e,a),dt(a,!0),e.event.trigger("paste:before",a),e.change.insertFragment(a,(function(t){e.event.trigger("paste:insert");var n=En.createBookmark(t);e.card.renderAll(e.editArea,e),En.moveToBookmark(t,n),En.scrollRangeIntoView(t)})),e.event.trigger("paste:after")}}),this.domEvent.onPaste((function(t){return Fi.call(e,t)}))}},Vi={ol:"orderedlist",ul:"unorderedlist"};function qi(e){var t=this;e.forEach((function(e){t.change.addMark(e.clone())}))}function Hi(e,t){var n=this;t.forEach((function(t){t.name!==e.name&&(t.isHeading()&&"p"!==t.name&&n.command.execute("heading",t.name),Vi[t.name]&&n.command.execute("list",Vi[t.name]));var r=t.css();Object.keys(r).length>0&&n.change.setBlocks({style:r})}))}function Wi(e,t){var n=this,r=this.change.getRange();if(r.collapsed){var a=kt('<img style="display: none;" />');r.insertNode(a[0]);var o=sr.getClosestBlock(r.startContainer);r.selectNodeContents(o[0]),this.change.select(r),this.command.execute("removeformat"),qi.call(this,e),Hi.call(this,o,t),r.selectNode(a[0]),r.collapse(!0),a.remove(),this.change.select(r)}else this.command.execute("removeformat"),qi.call(this,e),sr.getRangeBlocks(r).forEach((function(e){Hi.call(n,e,t)}))}var Yi={initialize:function(){var e,t,n=this,r="single",a=null,o=!1,i=function(r){n.editArea.removeClass("lake-paintformat-mode"),e=void 0,t=void 0,a&&(kt(r).off("keydown",a),a=null),n.event.trigger("select")};function c(e){var t=e.ownerDocument,n=function e(n){n.metaKey||n.ctrlKey||n.shiftKey||(a=null,"Escape"!==n.key&&27!==n.keyCode||(kt(t).off("keydown",e),i(t)))};kt(t).on("keydown",n),a=n}this.on("beforeCommandExecute",(function(e){"paintformat"!==e&&!o&&a&&i(n.editArea[0].ownerDocument)})),this.command.add("paintformat",{sideEffect:!0,queryState:function(){return!!e},execute:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"single";if(e)i(n.editArea[0]);else{r=a,c(n.editArea[0]);var o=n.change.getRange();e=sr.getActiveMarks(o),t=sr.getActiveBlocks(o),n.event.trigger("select"),n.editArea.addClass("lake-paintformat-mode")}}}),this.editArea.on("mouseup",(function(a){e&&(n.card.closest(a.target)?i(n.editArea[0].ownerDocument):(o=!0,Wi.call(n,e,t),o=!1,"single"===r&&i(n.editArea[0].ownerDocument)))}))}},Gi={initialize:function(){var e=this;this.command.add("removeformat",{sideEffect:!0,execute:function(){var t=e.change.getRange();sr.getRangeBlocks(t).forEach((function(e){e.removeAttr("style")})),e.change.removeMark()}}),this.hotkey.set("mod+\\","removeformat")}},Xi=Object.keys(et),Ki=!1;function Zi(){var e={};this.editArea.find("h1,h2,h3,h4,h5,h6").each((function(t){if((t=kt(t)).parent().isRoot()){var n=t.attr("id");if(n||(n=De(),t.attr("id",n)),e[n]){for(;e[n];)n=De();t.attr("id",n)}e[n]=!0}else t.removeAttr("id")}))}function $i(){var e=kt(".lake-anchor-button");if(0!==e.length){var t=kt(this.change.getRange().startContainer).closest("h1,h2,h3,h4,h5,h6");if(0!==t.length){var n=this.parentNode[0].getBoundingClientRect(),r=t[0].getBoundingClientRect(),a=Math.round(r.left-n.left-e[0].clientWidth-9),o=Math.round(r.top-n.top+r.height/2-e[0].clientHeight/2);e.css({top:"".concat(o,"px"),left:"".concat(a,"px")})}else e.remove()}}function Qi(){var e=this,t=this.change.getRange(),n=kt(".lake-anchor-button"),r=kt(t.startContainer).closest("h1,h2,h3,h4,h5,h6");if((0===r.length||n.length>0&&0===n.find(".lake-icon-".concat(r.name)).length)&&(n.remove(),Ca.hide()),0!==r.length&&r.parent().isRoot())if(n.find(".lake-icon-".concat(r.name)).length>0)$i.call(this);else{n=kt('<span class="lake-anchor-button"><span class="lake-icon lake-icon-'.concat(r.name,'"></span></span>')),this.parentNode.append(n);var a=this.parentNode[0].getBoundingClientRect(),o=r[0].getBoundingClientRect(),i=Math.round(o.left-a.left-n[0].clientWidth-9),c=Math.round(o.top-a.top+o.height/2-n[0].clientHeight/2);n.css({top:"".concat(c,"px"),left:"".concat(i,"px")}),n.addClass("lake-anchor-button-active"),n.on("mouseenter",(function(){Ca.show(n,e.lang.copyAnchor.tips)})),n.on("mouseleave",(function(){Ca.hide()})),n.on("mousedown",(function(){Ca.hide()})),n.on("click",(function(t){t.preventDefault(),t.stopPropagation();var n=He(Or.exportParser&&Or.exportParser.getDocUrl()||location.href,r.attr("id"));Or.copyText(n)?e.messageSuccess(e.lang.copy.success):e.messageError(e.lang.copy.error)}))}}function Ji(){var e=this.change.getRange(),t=sr.getRangeBlocks(e),n=En.createBookmark(e);t.forEach((function(e){if("p"===e.name){var t=e.parent();if(t.isHeading()){for(var n=e[0].childNodes,r=n.length-1;r>=0;r--)t[0].insertBefore(n[r],e[0]);e.remove()}}})),n&&En.moveToBookmark(e,n)}function ec(){Ji.call(this);var e,t=this.change.getRange(),n=sr.getRangeBlocks(t),r=En.createBookmark(t);if(r)return n.forEach((function(t){var n=t.parent(),r=t.first();[be,ve].includes(r.attr(ge))&&(r=r.next()),"li"===t.name&&n&&"ol"===n.name&&r&&r.isText()&&(e=parseInt(n.attr("start"),10)||1,r[0].nodeValue="".concat(e,". ")+r[0].nodeValue),sr.brToParagraph(t)})),En.moveToBookmark(t,r),e}function tc(e){var t=this.change.getRange(),n=sr.getRangeBlocks(t),r=En.createBookmark(t);r&&(n.forEach((function(t){Zt.fetchAllChildren(t).forEach((function(e){if("strong"===(e=kt(e)).name||"span"===e.name&&/^lake-fontsize-\d+$/.test(e[0].className))sr.unwrapNode(e[0]);else if("span"===e.name){var t=/(?:^|\b)(lake-fontsize-\d+)(?:$|\b)/.exec(e[0].className);t&&e.removeClass(t[1])}}));var n=t.parent();if(e){var r=n.next();r&&"ol"===r.name&&r.attr("start")&&r.attr("start",e+1)}n&&["ul","ol"].includes(n.name)&&(n.find("[data-lake-card=checkbox]").remove(),sr.unwrapNode(n[0]))})),En.moveToBookmark(t,r))}var nc,rc={initialize:function(){var e=this,t=this.options.heading||{showAnchor:!0};this.schema.add(Xi.map((function(e){var t={};return t[e]={id:/^[\w\.\-]+$/},t}))),this.schema.add([{p:{"data-lake-id":"*"}}]),this.command.add("heading",{sideEffect:!0,queryState:function(){var t=e.change.blocks;return 0===t.length?"":Xi.indexOf(t[0].name)>=0?t[0].name:""},execute:function(t){var n=ec.call(e);e.change.separateBlocks(),e.change.setBlocks("<".concat(t," />")),tc.call(e,n)}}),this.hotkey.set("mod+opt+1","heading","h1"),this.hotkey.set("mod+opt+2","heading","h2"),this.hotkey.set("mod+opt+3","heading","h3"),this.hotkey.set("mod+opt+4","heading","h4"),this.hotkey.set("mod+opt+5","heading","h5"),this.hotkey.set("mod+opt+6","heading","h6"),t.showAnchor&&(this.on("setvalue",(function(){Zi.call(e)})),this.on("change",(function(){Zi.call(e),Qi.call(e)})),this.on("select",(function(){Qi.call(e)})),this.on("typographychange",(function(){Qi.call(e)})),Ki||(Ki=!0,window.addEventListener("resize",(function(){$i.call(e)}),!1)))}},ac={initialize:function(){var e=this;this.schema.add("code"),this.command.add("code",{sideEffect:!0,queryState:function(){return e.change.marks.some((function(e){return"code"===e.name}))},execute:function(){var t="<".concat("code"," />");e.command.queryState("code")?e.change.removeMark(t):e.change.addMark(t,document.createTextNode("​"))}}),this.hotkey.set("mod+e","code")}},oc=(g()(nc={9:12,10:13},"11",14),g()(nc,"1515",15),g()(nc,12,16),g()(nc,14,19),g()(nc,16,22),g()(nc,18,24),g()(nc,22,29),g()(nc,24,32),g()(nc,30,40),g()(nc,36,48),nc),ic=Object.keys(oc).map((function(e){return parseInt(e,10)}));function cc(e){var t=/([\d\.]+)(pt|px)$/i.exec(e=e||"");if(t){var n=t[2];if("pt"===n)return t[1];if("px"===n){for(var r=0;r<ic.length;r++)if(Math.round(t[1])===oc[ic[r]])return String(ic[r]);return String(Math.round(72*t[1]/96))}}return""}function lc(e){return"classic"===e?"1515":"11"}var sc={initialize:function(){var e=this;this.schema.add({span:{class:/^lake-fontsize-\d+$/}}),this.command.add("fontsize",{sideEffect:!0,queryState:function(){var t=e.change.marks.map((function(e){var t="";return"span"===e.name&&(t=cc(e.css("font-size"))),t})).filter((function(e){return e}));return t.length>0?t[0]:lc(e.typography)},execute:function(t,n){void 0===n&&(n=lc(e.typography));var r='<span class="lake-fontsize-'.concat(t,'" />');t!==n?e.change.addMark(r):e.change.removeMark(r)}}),this.on("paste:each",(function(e){if("span"===(e=kt(e)).name){var t=parseInt(cc(e[0].style.fontSize),10);ic.indexOf(t)>=0&&e.addClass("lake-fontsize-".concat(t)),e.css("font-size","")}}))}},uc={initialize:function(){var e=this;this.schema.add({span:{style:{color:"@color"}}}),this.command.add("fontcolor",{sideEffect:!0,queryState:function(){var t=e.change.marks.map((function(e){var t="";return"span"===e.name&&(t=Xe.toHex(e.css("color")||"")),t})).filter((function(e){return e}));return t.length>0?t[0]:""},execute:function(t,n){var r='<span style="color: '.concat(t,';" />');void 0===n||t!==n?e.change.addMark(r):e.change.removeMark(r)}})}},dc={initialize:function(){var e=this;this.schema.add({span:{style:{"background-color":"@color"}}}),this.command.add("backcolor",{sideEffect:!0,queryState:function(){var t=e.change.marks.map((function(e){var t="";return"span"===e.name&&(t=Xe.toHex(e.css("background-color")||"")),t})).filter((function(e){return e}));return t.length>0?t[0]:""},execute:function(t,n){var r='<span style="background-color: '.concat(t,';" />');void 0===n||t!==n?e.change.addMark(r):e.change.removeMark(r)}})}},fc={orderedlist:"ol",unorderedlist:"ul"},pc="orderedlist",hc={initialize:function(){var e=this;this.schema.add(["li",{ul:{"data-lake-indent":"@number"}},{ol:{start:"@number","data-lake-indent":"@number"}}]),this.command.add("list",{sideEffect:!0,queryState:function(){return gr(e.change.blocks)},execute:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=fc[t];if(r){e.change.separateBlocks();var a=e.change.getRange(),o=sr.getActiveBlocks(a);if(o){t===pc&&(n=parseInt(n,10)||1);var i=sn(a),c=hr(o,t);c?yr(o):br(o,t,n),un(a,i),e.change.select(a),e.change.mergeAdjacentList()}}}}),this.hotkey.set("mod+shift+7","list","orderedlist"),this.hotkey.set("mod+shift+8","list","unorderedlist")}};function mc(e,t,n,r){if(["ul","ol"].includes(e.name)){var a=(parseInt(e.attr(xt),10)||0)+(t<0?-1:1);return a>8&&(a=8),void(a<1?e.removeAttr(xt):e.attr(xt,a))}e.isHeading()&&function(e,t,n,r){if(t>0)if(Xe.removeUnit(e.css("text-indent"))||void 0===n){var a=e.css("padding-left"),o=Xe.removeUnit(a)+t;o=Math.min(o,r),sr.setNodeProps(e,{style:{"padding-left":Xe.addUnit(o>0?o:0,"em")}})}else sr.setNodeProps(e,{style:{"text-indent":"2em"}});else if(Xe.removeUnit(e.css("text-indent")))sr.setNodeProps(e,{style:{"text-indent":""}});else{var i=e.css("padding-left"),c=Xe.removeUnit(i)+t;sr.setNodeProps(e,{style:{"padding-left":Xe.addUnit(c>0?c:0,"em")}})}}(e,t,n,r)}var gc={initialize:function(){var e=this;Object.keys(et).forEach((function(t){var n={};n[t]={style:{"text-indent":"@length","padding-left":"@length"}},e.schema.add(n)})),this.command.add("indent",{sideEffect:!0,queryState:function(){var t=e.change.getRange(),n=sr.getClosestBlock(t.startContainer);if("li"===n.name)return parseInt(n.closest("ul,ol").attr(xt),10)||0;if(n.isHeading()){var r=Xe.removeUnit(n.css("padding-left")),a=Xe.removeUnit(n[0].style.textIndent);return r||a}return 0},execute:function(t){e.change.separateBlocks();var n=e.change.getRange(),r=sr.getActiveBlocks(n);if(r){var a=e.options.maxPadding||50;r.forEach((function(e){mc(e,2,t,a)})),e.change.mergeAdjacentList()}}}),this.command.add("outdent",{sideEffect:!0,execute:function(){e.change.separateBlocks();var t=e.change.getRange(),n=sr.getActiveBlocks(t);n&&(n.forEach((function(e){mc(e,-2,void 0,50)})),e.change.mergeAdjacentList())}}),this.hotkey.set("mod+]","indent"),this.hotkey.set("mod+[","outdent")}},vc={initialize:function(){var e=this;this.schema.add("blockquote"),this.command.add("quote",{sideEffect:!0,queryState:function(){var t=e.change.blocks;if(0===t.length)return!1;var n=t[0].closest("blockquote");return n.length>0&&""===n[0].className},execute:function(){if(e.command.queryState("quote")){var t=e.change.getRange(),n=e.change.blocks[0].closest("blockquote"),r=En.createBookmark(t);return sr.unwrapNode(n),En.moveToBookmark(t,r),void e.change.select(t)}e.change.wrapBlock("<".concat("blockquote"," />"))}}),this.hotkey.set("mod+shift+u","quote")}},yc={initialize:function(){var e=this;this.schema.add("hr"),this.command.add("hr",{sideEffect:!0,execute:function(){e.change.insertCard("hr")}}),this.hotkey.set("mod+opt+s","hr"),this.on("keydown:enter",(function(t){var n=e.change.getRange();if(n.collapsed){var r=sr.getClosestBlock(n.startContainer);if(r.isHeading()){var a=sr.getBlockLeftText(r,n);return/^---$/.exec(a)?(t.preventDefault(),sr.removeBlockLeftText(r,n),e.command.execute("hr"),!1):void 0}}})),this.on("paste:each",(function(t){"hr"===t.name&&e.card.replaceNode(t,"hr")}))}},bc={orderedlist:"ol",unorderedlist:"ul"},kc={"`":"code","==":"mark","**":"bold","~~":"strikethrough",_:"italic","^":"sup","~":"sub"},wc=/[`=*+-_^~\]#>)]$/;function xc(e,t){sr.removeBlockLeftText(e,t),Zt.isEmptyNode(e)&&(e.empty(),e.append("<br />"))}function _c(e,t){var n=En.createBookmark(t);if(n){var r=kt(n.anchor).prev(),a=r&&r.isText()?r[0].nodeValue:"";En.moveToBookmark(t,n);for(var o=Object.keys(kc),i=0;i<o.length;i++){var c=o[i],l=c.replace(/(\*|\^)/g,"\\$1"),s=new RegExp("^(.*)".concat(l,"(.+?)").concat(l,"$")).exec(a);if(s){var u=s[1]&&/\S$/.test(s[1]),d=s[2],f=kc[c];if(""===f||!this.command.queryEnabled(f))return;e.preventDefault();var p=a.substr(0,a.length-d.length-2*c.length);return r[0].splitText((p+d).length+2*c.length),u&&(p+=" "),r[0].nodeValue=p+d,t.setStart(r[0],p.length),t.setEnd(r[0],(p+d).length),this.change.select(t),this.command.execute(f),(t=this.change.getRange()).collapse(!1),this.change.select(t),this.change.insertText(" "),!1}}}}function Ec(e,t){var n=En.createBookmark(t);if(n){var r=kt(n.anchor).prev(),a=r&&r.isText()?r[0].nodeValue:"";En.moveToBookmark(t,n);var o=/\[(.+?)\]\(([\S]+?)\)$/.exec(a);if(o){e.preventDefault();var i=o[1],c=o[2],l=Xe.isCurrentPageUrl(location.href,c)?"":' target="_blank"',s=kt('<a href="'.concat(Xe.sanitizeUrl(c),'"').concat(l,">").concat(i,"</a>")),u=r[0].splitText(a.length-o[0].length);return u.splitText(o[0].length),kt(u).remove(),this.change.insertInline(s),this.change.insertText(" "),!1}}}function Cc(e){var t=this.change.getRange();if(t.collapsed){var n,r=t.startContainer,a=t.startOffset;if((!(n=r.nodeType===Node.TEXT_NODE?r.textContent.substr(0,a):r.childNodes[a-1]&&r.childNodes[a-1].textContent)||n.match(wc))&&!1!==_c.call(this,e,t)&&!1!==Ec.call(this,e,t)){var o=sr.getClosestBlock(t.startContainer);if(o.isHeading()){var i=sr.getBlockLeftText(o,t),c=function(e){if(/^\d{1,9}\.$/.test(e))return"orderedlist";switch(e){case"*":case"-":case"+":return"unorderedlist";case"[]":case"[ ]":return"tasklist";case"[x]":return"checkedtasklist";case"#":return"h1";case"##":return"h2";case"###":return"h3";case"####":return"h4";case"#####":return"h5";case"######":return"h6";case">":return"quote";default:return""}}(i);if(/^h\d$/i.test(c)&&this.command.queryEnabled("heading"))return e.preventDefault(),xc(o,t),void this.command.execute("heading",c);if(!/^h\d$/i.test(o.name))return bc[c]&&this.command.queryEnabled("list")?(e.preventDefault(),xc(o,t),void this.command.execute("list",c,i)):["tasklist","checkedtasklist"].indexOf(c)>=0&&this.command.queryEnabled("tasklist")?(e.preventDefault(),xc(o,t),void this.command.execute("tasklist","tasklist","tasklist"!==c)):"quote"===c&&this.command.queryEnabled(c)?(e.preventDefault(),xc(o,t),void this.command.execute(c)):void 0}}}}var Oc={initialize:function(){var e=this;this.on("keydown:space",(function(t){e.change.domEvent.isComposing||Cc.call(e,t)}))}},Sc=["info","warning","danger","success","tips"],Rc={initialize:function(){var e=this;this.schema.add({blockquote:{class:["lake-alert","lake-alert-info","lake-alert-warning","lake-alert-danger","lake-alert-success","lake-alert-tips"]}}),this.command.add("alert",{sideEffect:!0,queryState:function(){var t=e.change.blocks;return 0!==t.length&&t[0].closest(".lake-alert").length>0},execute:function(t){if(Sc.indexOf(t)<0&&(t="info"),e.command.queryState("alert")){var n=e.change.getRange(),r=e.change.blocks[0].closest(".lake-alert"),a=En.createBookmark(n);return sr.unwrapNode(r),void En.moveToBookmark(n,a)}e.change.wrapBlock('<blockquote class="lake-alert lake-alert-'.concat(t,'" />'))}}),this.on("keydown:enter",(function(t){var n=e.change.getRange();if(n.collapsed){var r=sr.getClosestBlock(n.startContainer);if("p"===r.name){var a=sr.getBlockLeftText(r,n),o=/^:::(\w*)$/.exec(a);if(o){t.preventDefault(),sr.removeBlockLeftText(r,n),Dt(r[0])&&(r[0].innerHTML="<br>");var i=o[1].toLowerCase();return e.command.execute("alert",i),!1}}}}))}},jc=/(?:^|\s)lake-lineheight-(\d+)(?:\s|$)/g;function Pc(e,t){if(e===t)return!0;var n=e.compareDocumentPosition(t);return!!(n&Node.DOCUMENT_POSITION_CONTAINED_BY)||!!(n&Node.DOCUMENT_POSITION_PRECEDING)||!!(n&Node.DOCUMENT_POSITION_CONTAINS)}function Ac(e,t){if(e===t)return!0;var n=e.compareDocumentPosition(t);return!!(n&Node.DOCUMENT_POSITION_CONTAINED_BY)||!!(n&Node.DOCUMENT_POSITION_FOLLOWING)||!!(n&Node.DOCUMENT_POSITION_CONTAINS)}function Tc(e){return kt(e).closest("p",(function(e){return kt(e).isRoot()?null:e.parentNode}))[0]||null}var Dc={bothInit:function(){this.schema.add({p:{class:/^lake-lineheight-\d+$/}})},initialize:function(){var e=this;this.command.add("lineheight",{sideEffect:!0,queryState:function(){var t=function(e){var t=Tc(e.startContainer);if(t||e.collapsed)return t;var n=kt(e.commonAncestorContainer).find("p"),r=e.startContainer,a=e.endContainer;e.startContainer.nodeType===Node.ELEMENT_NODE&&(r=e.startContainer.childNodes[e.startOffset]||e.startContainer),e.endContainer.nodeType===Node.ELEMENT_NODE&&(a=e.endContainer.childNodes[e.endOffset]||e.endContainer);for(var o=0,i=n.length;o<i;o++){var c=n[o],l=kt(c).closest("[".concat(_e,"]"));if((!l.length||"table"===l.attr(_e))&&Pc(c,r)&&Ac(c,a))return c}return null}(e.change.getRange());if(!t)return null;var n=t.className,r=jc.exec(n);return r?r[1]:"17"},execute:function(t){if(e.command.queryState("lineheight")){var n=function(e){var t=[];if(e.collapsed){var n=Tc(e.startContainer);n&&t.push(n)}else{var r=e.commonAncestorContainer,a=sn(e),o=a.anchor,i=a.focus;kt(r).find("p").each((function(e){Pc(e,o)&&Ac(e,i)&&t.push(e)}));var c=Tc(r);c&&-1===t.indexOf(c)&&Pc(c,o)&&Ac(c,i)&&t.push(c),un(e,{anchor:o,focus:i})}return t.filter((function(e){var t=kt(e).closest("[".concat(_e,"]"));return!t.length||"table"===t.attr(_e)}))}(e.change.getRange());if(0!==n.length){var r=null;"17"!==t&&(r="lake-lineheight-"+t),n.forEach((function(e){!function(e){var t=e.className;t&&(t=t.replace(jc,(function(){return""})).replace(/\s+/g," "),e.className=t)}(e),r&&kt(e).addClass(r)}))}}}})}},Mc=a.HotKeyUtils.isHotkey;Ei.card.add("checkbox",Ai),Ei.card.add("hr",Ti),Ei.card.add("blockfallback",Di),Ei.card.add("inlinefallback",Mi),Ei.plugin.add("paste",Ui),Ei.plugin.add("drop",{initialize:function(){var e=this,t=function(t){return!t||e.card.closest(t.commonAncestorContainer)};this.domEvent.onDrop((function(n){var r=n.e,a=n.dropRange,o=n.cardRoot,i=n.files;if(o){if(r.preventDefault(),t(a))return;var c=e.card.getComponent(o);return e.change.removeCard(o),e.change.select(a),void e.change.insertCard(c.name,c.value)}if(i.length>0){if(r.preventDefault(),t(a))return;e.change.select(a),e.event.trigger("drop:files",i)}}))}}),Ei.plugin.add("undo",{initialize:function(){var e=this;this.command.add("undo",{sideEffect:!0,queryState:function(){return e.history.hasUndo()},execute:function(){e.readonly(!1),e.history.undo()}}),this.command.add("redo",{sideEffect:!0,queryState:function(){return e.history.hasRedo()},execute:function(){e.readonly(!1),e.history.redo()}}),this.hotkey.set("mod+z","undo"),this.hotkey.set("mod+y","redo"),this.hotkey.set("shift+mod+z","redo")}}),Ei.plugin.add("selectall",{initialize:function(){var e=this;this.command.add("selectall",{execute:function(){e.card.renderController.disable(e);var t=e.change.getRange();t.selectNodeContents(e.editArea[0]),e.change.select(t),e.event.trigger("select")}}),this.on("keydown:selectall",(function(t){t.preventDefault(),e.command.execute("selectall")}))}}),Ei.plugin.add("paintformat",Yi),Ei.plugin.add("removeformat",Gi),Ei.plugin.add("heading",rc),Ei.plugin.add("bold",{initialize:function(){var e=this;this.schema.add("strong"),this.command.add("bold",{sideEffect:!0,queryState:function(){return e.change.marks.some((function(e){return"strong"===e.name}))},execute:function(){var t="<".concat("strong"," />");e.command.queryState("bold")?e.change.removeMark(t):e.change.addMark(t)}}),this.hotkey.set("mod+b","bold")}}),Ei.plugin.add("italic",{initialize:function(){var e=this;this.schema.add("em"),this.command.add("italic",{sideEffect:!0,queryState:function(){return e.change.marks.some((function(e){return"em"===e.name}))},execute:function(){var t="<".concat("em"," />");e.command.queryState("italic")?e.change.removeMark(t):e.change.addMark(t)}}),this.hotkey.set("mod+i","italic")}}),Ei.plugin.add("underline",{initialize:function(){var e=this;this.schema.add("u"),this.command.add("underline",{sideEffect:!0,queryState:function(){return e.change.marks.some((function(e){return"u"===e.name}))},execute:function(){var t="<".concat("u"," />");e.command.queryState("underline")?e.change.removeMark(t):e.change.addMark(t)}}),this.hotkey.set("mod+u","underline")}}),Ei.plugin.add("strikethrough",{initialize:function(){var e=this;this.schema.add("del"),this.command.add("strikethrough",{sideEffect:!0,queryState:function(){return e.change.marks.some((function(e){return"del"===e.name}))},execute:function(){var t="<".concat("del"," />");e.command.queryState("strikethrough")?e.change.removeMark(t):e.change.addMark(t)}}),this.hotkey.set("mod+shift+x","strikethrough")}}),Ei.plugin.add("code",ac),Ei.plugin.add("mark",{initialize:function(){var e=this;this.schema.add("mark"),this.command.add("mark",{sideEffect:!0,queryState:function(){return e.change.marks.some((function(e){return"mark"===e.name}))},execute:function(){var t="<".concat("mark"," />");e.command.queryState("mark")?e.change.removeMark(t):e.change.addMark(t)}})}}),Ei.plugin.add("sup",{initialize:function(){var e=this;this.schema.add("sup"),this.command.add("sup",{sideEffect:!0,queryState:function(){return e.change.marks.some((function(e){return"sup"===e.name}))},execute:function(){var t="<".concat("sup"," />");e.command.queryState("sup")?e.change.removeMark(t):e.change.addMark(t)}}),this.hotkey.set("mod+shift+.","sup")}}),Ei.plugin.add("sub",{initialize:function(){var e=this;this.schema.add("sub"),this.command.add("sub",{sideEffect:!0,queryState:function(){return e.change.marks.some((function(e){return"sub"===e.name}))},execute:function(){var t="<".concat("sub"," />");e.command.queryState("sub")?e.change.removeMark(t):e.change.addMark(t)}}),this.hotkey.set("mod+shift+,","sub")}}),Ei.plugin.add("fontsize",sc),Ei.plugin.add("fontcolor",uc),Ei.plugin.add("backcolor",dc),Ei.plugin.add("alignment",{initialize:function(){var e=this;this.schema.add({block:{style:{"text-align":["left","center","right","justify"]}}}),this.command.add("alignment",{sideEffect:!0,queryState:function(){var t=e.change.blocks;if(0!==t.length){var n=t[0];["ul","ol","blockquote"].includes(n.name)&&(n=t[1]||n.first()||n);var r=n.css("text-align");return"start"===r&&(r="left"),"end"===r&&(r="right"),r}},execute:function(t){e.change.setBlocks({style:{"text-align":t}}),function(e,t){e&&0!==e.length&&e.forEach((function(e){"li"===e.name&&("left"===t?e.css("list-style-position","outside"):e.css("list-style-position","inside"))}))}(e.change.blocks,t)}}),this.hotkey.set("mod+shift+l","alignment","left"),this.hotkey.set("mod+shift+c","alignment","center"),this.hotkey.set("mod+shift+r","alignment","right"),this.hotkey.set("mod+shift+j","alignment","justify")}}),Ei.plugin.add("list",hc),Ei.plugin.add("indent",gc),Ei.plugin.add("quote",vc),Ei.plugin.add("hr",yc),Ei.plugin.add("tasklist",io),Ei.plugin.add("markdown",Oc),Ei.plugin.add("alert",Rc),Ei.plugin.add("lineheight",Dc),Ei.EXTS=a.EXTS,Ei.ua=a.ua,Ei.FileUtils=a.FileUtils,Ei.isHotkey=Mc,Ei.$=kt,Ei.StringUtils=Xe,Ei.NodeUtils=Zt,Ei.ElementIDUtils=ht,Ei.RangeUtils=En,Ei.ClipboardUtils=Or,Ei.ImageUtils=Ar,Ei.UploadUtils=Nr,Ei.ChangeUtils=sr,Ei.OTUtils=Zr,Ei.TinyCanvas=Jr,Ei.Schema=ta,Ei.HTMLParser=er,Ei.ExportParser=or,Ei.TextParser=na,Ei.MarkdownParser=oa,Ei.debug=Qt,Ei.changes=Ea,Ei.EmbedToolbar=Ta,Ei.ContentView=Pi,Ei.registerClipboardExportParser=function(e){Or.exportParser=e},Ei.registerClipboard=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(Or,e)};var Nc=n(68),Lc=n.n(Nc),Ic=n(24),Bc=n.n(Ic),zc=n(0),Fc=n.n(zc),Uc=n(33),Vc=n.n(Uc),qc=n(1),Hc=n.n(qc),Wc=n(26),Yc=n(23),Gc=n(937),Xc=n(121),Kc=n(37),Zc=n(176),$c=n(35),Qc=n(275),Jc=n(277),el=n(25),tl=n(18),nl=n(192),rl=n(95),al=n(348),ol=n(47),il=n(74),cl=n(2082),ll=n(2096),sl=n(339),ul=n(98),dl=n(257),fl=n(84),pl=n.n(fl),hl=n(30),ml=n.n(hl),gl=n(8),vl=n.n(gl),yl=n(54),bl=n.n(yl),kl=n(20),wl=n.n(kl),xl=n(28),_l=n(296),El=n.n(_l),Cl=n(517),Ol=n.n(Cl),Sl=n(326),Rl=n(11),jl={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v68c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-68c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zm-40 376H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"unlock",theme:"outlined"},Pl=n(22),Al=function(e,t){return zc.createElement(Pl.a,Object(Rl.a)(Object(Rl.a)({},e),{},{ref:t,icon:jl}))};Al.displayName="UnlockOutlined";var Tl=zc.forwardRef(Al),Dl=n(283),Ml=n(204),Nl=n(266),Ll=n(2091),Il=n(572),Bl=n(282),zl=n(299),Fl=n.n(zl),Ul=n(593),Vl=n.n(Ul),ql=n(278),Hl=n.n(ql),Wl=n(519),Yl=n.n(Wl),Gl=n(398),Xl=n.n(Gl),Kl=n(254),Zl=n.n(Kl),$l=n(2095),Ql=n(27),Jl=n.n(Ql),es=n(12),ts=n(106),ns=n.n(ts),rs=n(213),as=n.n(rs),os=n(485),is=n.n(os),cs=n(226);n(617);function ls(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}ls('.card-resize-button-ud {\n  position: absolute;\n  bottom: -3px;\n  right: 0px;\n  left: 0px;\n  margin: 0 auto;\n  z-index: 12;\n  border-radius: 6px;\n}\n.card-resize-button-ud:hover {\n  cursor: row-resize;\n}\n[data-lake-card].lake-card-margin {\n  margin: 16px 0;\n}\n[data-lake-card].lake-card-margin-top {\n  margin-top: 16px;\n}\n[data-lake-card].lake-card-margin-bottom {\n  margin-bottom: 16px;\n}\n.lake-scrollable::-webkit-scrollbar {\n  display: none;\n}\n.lake-scrollable.scroll-x {\n  padding-bottom: 10px;\n  overflow-x: hidden;\n}\n.lake-scrollable.scroll-x:hover {\n  overflow-x: auto;\n}\n.lake-scrollable.scroll-y {\n  padding-right: 10px;\n  overflow-y: hidden;\n}\n.lake-scrollable.scroll-y:hover {\n  overflow-y: auto;\n}\n.lake-scrollable:hover .lake-scrollbar {\n  display: block;\n}\n.lake-scrollable.scrolling {\n  user-select: none;\n}\n.lake-scrollable.scrolling .lake-scrollbar {\n  display: block;\n}\n.lake-scrollable .lake-scrollbar {\n  display: none;\n  position: absolute;\n  cursor: default;\n  transition: opacity 0.3s ease-in-out;\n}\n.lake-scrollable .lake-scrollbar .lake-scrollbar-trigger {\n  position: absolute;\n  background: #c1c1c1;\n  border-radius: 10px;\n  cursor: pointer;\n}\n.lake-scrollable .lake-scrollbar .lake-scrollbar-trigger:hover {\n  background: #888;\n}\n.lake-scrollable .lake-scrollbar.lake-scrollbar-x {\n  width: 100%;\n  height: 8px;\n  bottom: 0px;\n}\n.lake-scrollable .lake-scrollbar.lake-scrollbar-x .lake-scrollbar-trigger {\n  height: 8px;\n  min-width: 60px;\n}\n.lake-scrollable .lake-scrollbar.lake-scrollbar-y {\n  top: 0;\n  width: 8px;\n  height: 100%;\n  right: 0px;\n}\n.lake-scrollable .lake-scrollbar.lake-scrollbar-y .lake-scrollbar-trigger {\n  width: 8px;\n  min-height: 60px;\n}\n.lake-scrollable .scrollbar-shadow-left {\n  position: absolute;\n  z-index: 10;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 4px;\n  opacity: 0.5;\n  background: linear-gradient(270deg, rgba(99, 114, 130, 0) 0, rgba(99, 114, 130, 0.16));\n  background: -webkit-linear-gradient(right, rgba(99, 114, 130, 0), rgba(99, 114, 130, 0.16));\n  pointer-events: none;\n}\n.lake-scrollable .scrollbar-shadow-right {\n  position: absolute;\n  z-index: 10;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 4px;\n  opacity: 0.5;\n  background: linear-gradient(90deg, rgba(99, 114, 130, 0) 0, rgba(99, 114, 130, 0.16));\n  background: -webkit-linear-gradient(left, rgba(99, 114, 130, 0), rgba(99, 114, 130, 0.16));\n  pointer-events: none;\n}\n.lake-alert {\n  font-variant: tabular-nums;\n  line-height: 1.5;\n  color: rgba(0, 0, 0, 0.65);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  position: relative;\n  padding: 8px 15px 8px 37px;\n  border-radius: 4px;\n}\n.lake-alert.lake-alert-no-icon {\n  padding: 8px 15px;\n}\n.lake-alert-icon {\n  top: 11.5px;\n  left: 16px;\n  position: absolute;\n}\n.lake-alert-description {\n  font-size: 14px;\n  line-height: 22px;\n  display: none;\n}\n.lake-alert-success {\n  border: 1px solid #b7eb8f;\n  background-color: #f6ffed;\n}\n.lake-alert-success .lake-alert-icon {\n  color: #52c41a;\n}\n.lake-alert-info {\n  border: 1px solid #91d5ff;\n  background-color: #e6f7ff;\n}\n.lake-alert-info .lake-alert-icon {\n  color: #1890ff;\n}\n.lake-alert-warning {\n  border: 1px solid #ffe58f;\n  background-color: #fffbe6;\n}\n.lake-alert-warning .lake-alert-icon {\n  color: #faad14;\n}\n.lake-alert-error {\n  border: 1px solid #ffa39e;\n  background-color: #fff1f0;\n}\n.lake-alert-error .lake-alert-icon {\n  color: #f5222d;\n}\n.lake-alert-close-icon {\n  font-size: 12px;\n  position: absolute;\n  right: 16px;\n  top: 8px;\n  line-height: 22px;\n  overflow: hidden;\n  cursor: pointer;\n}\n.lake-alert-close-icon .anticon-close {\n  color: rgba(0, 0, 0, 0.45);\n  -webkit-transition: color 0.3s;\n  transition: color 0.3s;\n}\n.lake-alert-close-icon .anticon-close:hover {\n  color: #404040;\n}\n.lake-alert-close-text {\n  position: absolute;\n  right: 16px;\n}\n.lake-alert-with-description {\n  padding: 15px 15px 15px 64px;\n  position: relative;\n  border-radius: 4px;\n  color: rgba(0, 0, 0, 0.65);\n  line-height: 1.5;\n}\n.lake-alert-with-description.lake-alert-no-icon {\n  padding: 15px;\n}\n.lake-alert-with-description .lake-alert-icon {\n  position: absolute;\n  top: 16px;\n  left: 24px;\n  font-size: 24px;\n}\n.lake-alert-with-description .lake-alert-close-icon {\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  cursor: pointer;\n  font-size: 14px;\n}\n.lake-alert-with-description .lake-alert-message {\n  font-size: 16px;\n  color: rgba(0, 0, 0, 0.85);\n  display: block;\n  margin-bottom: 4px;\n}\n.lake-alert-with-description .lake-alert-description {\n  display: block;\n}\n.lake-alert.lake-alert-close {\n  height: 0 !important;\n  margin: 0;\n  padding-top: 0;\n  padding-bottom: 0;\n  -webkit-transition: all 0.3s cubic-bezier(0.78, 0.14, 0.15, 0.86);\n  transition: all 0.3s cubic-bezier(0.78, 0.14, 0.15, 0.86);\n  -webkit-transform-origin: 50% 0;\n  -ms-transform-origin: 50% 0;\n  transform-origin: 50% 0;\n}\n.lake-max-editor .lake-toolbar-content {\n  margin: 0 auto;\n}\n.lake-max-editor .lake-toolbar .lake-button-fontsize {\n  font-weight: bold;\n  width: 58px;\n  padding-right: 20px;\n}\n.lake-mini-editor .lake-toolbar {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: initial;\n  padding: 0;\n  border-radius: 0 0 3px 3px;\n  border-top: 1px dashed #d9d9d9;\n  border-bottom: 0;\n  height: 40px;\n  min-width: 200px;\n  /* 最左侧一组 toolbar + ... */\n}\n.lake-mini-editor .lake-toolbar-content {\n  text-align: left;\n  height: 40px;\n}\n.lake-mini-editor .lake-toolbar-content-plugins {\n  white-space: nowrap;\n  width: 100%;\n}\n.lake-mini-editor .lake-toolbar .lake-button-set-list-emoji-mini {\n  transform: translateY(2px);\n  white-space: normal;\n}\n.lake-mini-editor .lake-toolbar .lake-toolbar-area {\n  padding: 3px 0 3px 4px;\n}\n.lake-mini-editor .lake-toolbar .lake-button-set-list-to-top {\n  top: auto;\n  bottom: 100%;\n}\n.lake-toolbar {\n  position: relative;\n  width: 100%;\n  height: 40px;\n  padding: 0;\n  line-height: 1.5;\n  background: #fcfcfc;\n  border-bottom: 1px solid #e8e8e8;\n  transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\n  z-index: 200;\n  -webkit-user-select: none;\n  user-select: none;\n}\n.lake-toolbar-content {\n  position: relative;\n  flex-direction: row;\n  background: transparent;\n  display: none;\n  text-align: center;\n  width: 100%;\n  height: 39px;\n}\n.lake-toolbar-content-active {\n  display: block;\n}\n.lake-toolbar-plugins-hide {\n  display: none;\n}\n.lake-toolbar-content-extras {\n  position: absolute;\n  right: 0;\n  border-left: 1px solid #e8e8e8;\n}\n.lake-toolbar-area {\n  padding: 4px 8px 3px;\n  height: 39px;\n  width: auto;\n  display: inline-block;\n  border-left: 1px solid #e8e8e8;\n}\n.lake-toolbar-area-hide {\n  display: none;\n}\n.lake-toolbar-area-first-group {\n  border-left: none;\n}\n.lake-toolbar-area:nth-child(1) {\n  border-left: none;\n}\n.lake-toolbar-active {\n  background-color: #f9f9f9;\n  border-bottom: 1px solid #d9d9d9;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);\n}\n.lake-toolbar-split {\n  width: 0;\n  border-right: 1px solid #d9d9d9;\n  margin: 0 6px 0 6px;\n}\n.lake-mobile-toolbar {\n  position: fixed;\n  top: -100px;\n  left: 0;\n  width: 100%;\n  border-bottom: 0;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\n  transition: none;\n}\n.lake-mobile-toolbar .lake-button-set-trigger .lake-button {\n  padding-right: 8px;\n}\n.lake-mobile-toolbar .lake-button-set-trigger .lake-button .lake-icon-arrow {\n  display: none;\n}\n.lake-mobile-toolbar .lake-button-icon-list > span > .lake-icon {\n  margin-right: 0;\n}\n.lake-mobile-toolbar .lake-toolbar-area {\n  padding-left: 0;\n  border-left: 0;\n}\n.lake-mobile-toolbar .lake-button {\n  min-width: 32px;\n}\n.lake-mobile-toolbar .lake-button.toolbar-icon-action,\n.lake-mobile-toolbar .lake-button.toolbar-icon-action-default {\n  background: #f0f0f0;\n  font-size: 14px;\n  margin: 3px 5px;\n  line-height: 16px;\n  padding: 0 8px;\n  height: 26px;\n}\n.lake-mobile-toolbar .lake-button.toolbar-icon-action {\n  background: #25b864;\n  color: #fff;\n}\n.lake-mobile-toolbar .lake-button[accessbilityid="main-mobile:confirm-button"] {\n  color: #25b864;\n}\n.lake-mobile-toolbar .lake-button-set-list {\n  bottom: 32px;\n  top: auto;\n}\n.lake-editor.lake-maximize-card .lake-toolbar {\n  position: fixed;\n  top: 56px;\n  left: 0;\n  min-width: 1280px;\n  z-index: 1033;\n}\n.lake-editor.lake-toolbar-hidden .lake-toolbar,\n.lake-mini-editor.lake-maximize-card .lake-toolbar {\n  display: none;\n}\n.lake-editor.lake-toolbar-hidden .lake-card-block-max > [data-card-element="body"] > [data-card-element="center"].edit,\n.lake-mini-editor.lake-maximize-card .lake-card-block-max > [data-card-element="body"] > [data-card-element="center"].edit {\n  top: 56px;\n}\n.lake-sidebar {\n  position: absolute;\n  top: 40px;\n  padding-top: 16px;\n  overflow: hidden;\n  display: none;\n  min-width: 220px;\n  max-width: 480px;\n}\n.lake-sidebar .lake-sidebar-close {\n  position: absolute;\n  top: 0;\n  right: 0;\n  cursor: pointer;\n}\n.lake-sidebar-active {\n  display: block;\n}\n.lake-sidebar-title {\n  position: relative;\n  margin-bottom: 10px;\n  font-size: 14px;\n  font-weight: bold;\n  padding: 0 2px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid #e8e8e8;\n}\n.lake-common-sidebar {\n  width: calc(50% - 454px);\n  left: calc(50% + 436px);\n  padding-left: 28px;\n  /* ---  新增一个样式组，用于支持付费阅读的 sidebar 样式 --- */\n}\n.lake-common-sidebar .lake-sidebar-content {\n  padding: 0 2px;\n  overflow: hidden;\n  position: relative;\n}\n.lake-common-sidebar .lake-sidebar-group {\n  margin-bottom: 16px;\n  padding-bottom: 12px;\n  border-bottom: 1px solid #e8e8e8;\n}\n.lake-common-sidebar .lake-sidebar-group:last-child:not(:first-child) {\n  border-bottom: 0;\n}\n.lake-common-sidebar .lake-sidebar-group-title {\n  font-size: 14px;\n  color: #595959;\n  margin-bottom: 12px;\n}\n.lake-common-sidebar .lake-sidebar-group-item {\n  font-size: 14px;\n  color: #595959;\n  margin-bottom: 16px;\n}\n.lake-common-sidebar .lake-sidebar-group-item .lake-icon {\n  font-size: 16px;\n}\n.lake-common-sidebar .lake-sidebar-group-item:last-child:not(:first-child) {\n  margin-bottom: 0;\n}\n.lake-common-sidebar .lake-image-sidebar-group {\n  border-bottom: none;\n}\n.lake-common-sidebar .lake-image-sidebar-group button.active {\n  color: #47C479;\n  border-color: #47C479;\n}\n.lake-common-sidebar .lake-sidebar-image-style .ant-btn-group,\n.lake-common-sidebar .lake-sidebar-image-percent .ant-btn-group {\n  display: flex;\n}\n.lake-common-sidebar .lake-sidebar-image-style .ant-btn-group .ant-btn-sm,\n.lake-common-sidebar .lake-sidebar-image-percent .ant-btn-group .ant-btn-sm {\n  flex: auto;\n  line-height: 1;\n  padding: 0 7px;\n}\n.lake-common-sidebar .lake-sidebar-image-spacing .ant-checkbox-group {\n  display: flex;\n  flex-direction: column;\n}\n.lake-common-sidebar .lake-sidebar-image-spacing .ant-checkbox-group label {\n  margin-bottom: 8px;\n}\n.lake-common-sidebar .lake-sidebar-image-spacing .ant-checkbox-group label:last-child {\n  margin-bottom: 0;\n}\n.lake-common-sidebar .lake-sidebar-size-input,\n.lake-common-sidebar .lake-sidebar-size-title {\n  padding-top: 2px;\n  display: flex;\n}\n.lake-common-sidebar .lake-sidebar-width,\n.lake-common-sidebar .lake-sidebar-height,\n.lake-common-sidebar .lake-sidebar-width-title,\n.lake-common-sidebar .lake-sidebar-height-title {\n  flex: auto;\n}\n.lake-common-sidebar .lake-sidebar-lock {\n  display: inline-block;\n  width: 20px;\n  text-align: center;\n}\n.lake-common-sidebar .lake-sidebar-width-title,\n.lake-common-sidebar .lake-sidebar-height-title {\n  font-size: 12px;\n  display: inline-block;\n  text-align: center;\n}\n.lake-common-sidebar .lake-sidebar-noborder-group {\n  font-size: 12px;\n  margin-bottom: 24px;\n}\n.lake-common-sidebar .lake-sidebar-noborder-group-title {\n  font-size: 14px;\n  line-height: 22px;\n  font-weight: bold;\n  display: flex;\n  flex-direction: row;\n  align-items: baseline;\n}\n.lake-common-sidebar .lake-sidebar-noborder-group-title a {\n  color: #096DD9;\n  font-weight: normal;\n  font-size: 12px;\n  flex: auto;\n  text-align: right;\n}\n.lake-common-sidebar .lake-sidebar-noborder-group-title,\n.lake-common-sidebar .lake-sidebar-noborder-group-item {\n  margin-bottom: 8px;\n}\n.lake-common-sidebar .lake-sidebar-noborder-group .lake-sidebar-desc {\n  font-size: 12px;\n}\n.lake-common-sidebar .lake-sidebar-noborder-group .lake-sidebar-desc a {\n  color: #096DD9;\n}\n.lake-repository-sidebar {\n  height: calc(100% - 24px);\n  top: 24px;\n}\n.lake-repository-sidebar .lake-sidebar-content {\n  height: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  padding: 0;\n  background-color: #fff;\n  border-left: 1px solid #e9e9e9;\n  border-right: 1px solid #e9e9e9;\n}\n@media screen and (max-width: 1330px) {\n  .lake-sidebar {\n    padding-right: 26px;\n  }\n  .lake-adaptive-width .lake-sidebar {\n    padding-right: unset;\n  }\n}\n.lake-button {\n  display: inline-block;\n  height: 32px;\n  width: auto;\n  min-width: 32px;\n  margin: 0;\n  text-align: center;\n  padding: 0 7px;\n  background-color: transparent;\n  border: 1px solid transparent;\n  border-radius: 3px 3px;\n  font-size: 16px;\n  cursor: pointer;\n  color: #595959;\n  outline: none;\n  line-height: 32px;\n}\n.lake-button:hover {\n  border: 1px solid transparent;\n  background-color: #f5f5f5;\n}\n.lake-button:active,\n.lake-button-active,\n.lake-button-active:hover {\n  background-color: #e8e8e8;\n  border: 1px solid transparent;\n}\n.lake-button-disabled,\n.lake-button-disabled:hover {\n  background-color: transparent;\n  border: 1px solid transparent;\n  box-shadow: none;\n  color: #000;\n  opacity: 0.25;\n  cursor: not-allowed;\n}\n.lake-button-save {\n  position: relative;\n}\n.lake-button-save::after {\n  content: \' \';\n  visibility: hidden;\n  opacity: 0;\n  width: 6px;\n  height: 6px;\n  border-radius: 6px 6px;\n  background: #25b864;\n  position: absolute;\n  top: 6px;\n  right: 6px;\n  transition: all 0.3s linear;\n}\n.lake-button-save-active::after {\n  opacity: 1;\n  visibility: visible;\n}\n.lake-button-heading {\n  font-weight: bold;\n  min-width: 73px;\n}\n.lake-button-inner-text {\n  font-size: 12px;\n  margin-left: 2px;\n  vertical-align: top;\n}\n.lake-button-hotkey {\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.85);\n}\n.lake-button-group {\n  position: relative;\n  display: inline-block;\n  width: auto;\n}\n.lake-button-set {\n  position: relative;\n  display: inline-block;\n  z-index: 10;\n}\n.lake-button-set-trigger {\n  display: inline-block;\n}\n.lake-button-set-trigger .lake-button {\n  padding: 0 12px 0 7px;\n}\n.lake-button-set-trigger .lake-button.lark-button-more {\n  padding: 0 7px;\n}\n.lake-button-set-trigger .lake-icon-arrow {\n  position: absolute;\n  right: 6px;\n  top: 14px;\n  width: 8px;\n  height: 8px;\n  background-image: url(\'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjhweCIgaGVpZ2h0PSI1cHgiIHZpZXdCb3g9IjAgMCA4IDUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA1Mi41ICg2NzQ2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPkdyb3VwIENvcHkgNjwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGcgaWQ9IlN5bWJvbHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIG9wYWNpdHk9IjAuNDUiPg0KICAgICAgICA8ZyBpZD0idG9vbGJhciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyOC4wMDAwMDAsIC0xOC4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIGlkPSJwYXJhZ3JhcGgtc3R5bGUiPg0KICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyNi4wMDAwMDAsIDQuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC1Db3B5LTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMi4wMDAwMDAsIDEyLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgeD0iMCIgeT0iMCIgd2lkdGg9IjgiIGhlaWdodD0iOCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuNTk2MDkzNzUsMi41NTcwMzEyNSBMMy43NDUzMTI1LDYuMzc4MTI1IEMzLjg3NzM0Mzc1LDYuNTI1NzgxMjUgNC4xMDg1OTM3NSw2LjUyNTc4MTI1IDQuMjQwNjI1LDYuMzc4MTI1IEw3LjQwNTQ2ODc1LDIuNTU3MDMxMjUgQzcuNTk2MDkzNzUsMi4zNDI5Njg3NSA3LjQ0NDUzMTI1LDIuMDAzOTA2MjUgNy4xNTc4MTI1LDIuMDAzOTA2MjUgTDAuODQ0NTMxMjUsMi4wMDM5MDYyNSBDMC41NTcwMzEyNSwyLjAwMzkwNjI1IDAuNDA0Njg3NSwyLjM0Mjk2ODc1IDAuNTk2MDkzNzUsMi41NTcwMzEyNSBaIiBpZD0iU2hhcGUiIGZpbGw9IiMwMDAwMDAiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+\');\n  background-repeat: no-repeat;\n  transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\n}\n.lake-button-set-trigger-double {\n  padding: 0 2px;\n}\n.lake-button-set-trigger-double .lake-button {\n  padding: 0;\n}\n.lake-button-set-trigger-double .lake-button:first-child {\n  width: 26px;\n}\n.lake-button-set-trigger-double .lake-button-current {\n  margin-right: 0;\n  min-width: 26px;\n  border-radius: 3px 0 0 3px;\n}\n.lake-button-set-trigger-double .lake-button-current:active {\n  background-color: #e8e8e8;\n}\n.lake-button-set-trigger-double .lake-button-dropdown {\n  margin-left: -1px;\n  min-width: 17px;\n  text-align: center;\n  padding: 0 0;\n  border-radius: 0 3px 3px 0;\n}\n.lake-button-set-trigger-double .lake-button-dropdown .lake-icon-arrow {\n  right: 7px;\n}\n.lake-button-set-trigger-double .lake-button-dropdown:hover,\n.lake-button-set-trigger-double .lake-button-dropdown:active {\n  background-color: #e8e8e8;\n}\n.lake-button-set-trigger-double:hover .lake-button {\n  border: 1px solid #e8e8e8;\n}\n.lake-button-set-trigger-double-active .lake-button,\n.lake-button-set-trigger-double-active:hover .lake-button {\n  border: 1px solid #e8e8e8;\n}\n.lake-button-set-list {\n  position: absolute;\n  top: 32px;\n  left: 0;\n  min-width: 104px;\n  font-size: 12px;\n  background: #ffffff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  padding: 5px 0;\n  height: auto;\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\n  z-index: 999;\n  transform: translateY(-10px);\n}\n.lake-button-set-list-active {\n  opacity: 1;\n  visibility: visible;\n  transform: translateY(0);\n}\n.lake-button-set-list-item {\n  display: block;\n  padding: 2px 16px 2px 16px;\n  line-height: 30px;\n  color: #595959;\n  text-align: left;\n  position: relative;\n  white-space: nowrap;\n}\n.lake-button-set-list-item-split {\n  display: block;\n  margin: 5px 0;\n  border-bottom: 1px solid #d9d9d9;\n}\n.lake-button-set-list-item span {\n  display: inline-block;\n}\n.lake-button-set-list-item .lake-icon {\n  margin-right: 8px;\n  color: #BFBFBF;\n  vertical-align: -0.15em;\n}\n.lake-button-set-list-item .lake-icon-dot {\n  position: absolute;\n  top: 50%;\n  left: 8px;\n  margin-top: -7px;\n  width: 14px;\n  height: 14px;\n  display: block;\n  background-image: url(\'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjQgKDY3Mzc4KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5VbnRpdGxlZDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIG9wYWNpdHk9IjAuNDUiPgogICAgICAgIDxnIGlkPSJjaGVjayIgZmlsbD0iIzAwMDAwMCI+CiAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUiIG9wYWNpdHk9IjAiIHg9IjAiIHk9IjAiIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCI+PC9yZWN0PgogICAgICAgICAgICA8cGF0aCBkPSJNMTIuNDY4NzUsMi41OTc2NTYyNSBMMTEuNTEzMDg1OSwyLjU5NzY1NjI1IEMxMS4zNzkxMDE2LDIuNTk3NjU2MjUgMTEuMjUxOTUzMSwyLjY1OTE3OTY5IDExLjE2OTkyMTksMi43NjQ0NTMxMiBMNS41MzMwMDc4MSw5LjkwNTI3MzQ0IEwyLjgzMDA3ODEyLDYuNDgwNDY4NzUgQzIuNzQ2Njc5NjksNi4zNzUxOTUzMSAyLjYyMDg5ODQ0LDYuMzEzNjcxODcgMi40ODY5MTQwNiw2LjMxMzY3MTg3IEwxLjUzMTI1LDYuMzEzNjcxODcgQzEuNDM5NjQ4NDQsNi4zMTM2NzE4NyAxLjM4OTA2MjUsNi40MTg5NDUzMSAxLjQ0NTExNzE5LDYuNDkwMDM5MDYgTDUuMTg5ODQzNzUsMTEuMjM0MTc5NyBDNS4zNjQ4NDM3NSwxMS40NTU2NjQxIDUuNzAxMTcxODcsMTEuNDU1NjY0MSA1Ljg3NzUzOTA2LDExLjIzNDE3OTcgTDEyLjU1NDg4MjgsMi43NzI2NTYyNSBDMTIuNjEwOTM3NSwyLjcwMjkyOTY5IDEyLjU2MDM1MTYsMi41OTc2NTYyNSAxMi40Njg3NSwyLjU5NzY1NjI1IFoiIGlkPSJQYXRoIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=\');\n  background-repeat: no-repeat;\n}\n.lake-button-set-list-item .lake-icon-check {\n  position: absolute;\n  right: 6px;\n  top: 11px;\n  text-align: right;\n  color: #52c41a;\n}\n.lake-button-set-list-item-heading1,\n.lake-button-set-list-item-heading2,\n.lake-button-set-list-item-heading3,\n.lake-button-set-list-item-heading4 {\n  line-height: 1.6;\n  font-weight: bold;\n  color: #262626;\n}\n.lake-button-set-list-item-heading1 {\n  font-size: 28px;\n}\n.lake-button-set-list-item-heading2 {\n  font-size: 24px;\n}\n.lake-button-set-list-item-heading3 {\n  font-size: 20px;\n}\n.lake-button-set-list-item-heading4 {\n  font-size: 16px;\n}\n.lake-button-set-list-item:hover {\n  color: #262626;\n  background-color: #f5f5f5;\n}\n.lake-button-set-list-item-icon .lake-icon {\n  color: #595959;\n  font-size: 16px;\n}\n.lake-button-set-list-hoz {\n  padding: 0 0;\n  right: 0;\n  left: auto;\n  height: 40px;\n  white-space: nowrap;\n}\n.lake-button-set-list-with-dot .lake-button-set-list-item {\n  padding-left: 30px;\n  padding-right: 16px;\n  white-space: nowrap;\n}\n.lake-button-set-list-colorboard {\n  left: 2px;\n}\n.lake-button-set-emode {\n  text-align: left;\n}\n.lake-button-set-emode .lake-button-set-list {\n  width: 240px;\n  left: 50%;\n  margin-left: -120px;\n  padding: 12px 12px;\n}\n.lake-button-set-emode .button-set-list-item {\n  display: block;\n  padding: 8px 12px 8px 48px;\n  border: 1px solid transparent;\n  position: relative;\n  margin-bottom: 8px;\n  border-radius: 3px 3px;\n}\n.lake-button-set-emode .button-set-list-item:last-child {\n  margin-bottom: 0;\n}\n.lake-button-set-emode .button-set-list-item .icon {\n  position: absolute;\n  width: 24px;\n  height: 24px;\n  line-height: 24px;\n  display: block;\n  top: 16px;\n  left: 17px;\n  text-align: center;\n  color: #ddd;\n}\n.lake-button-set-emode .button-set-list-item .title {\n  display: block;\n  font-size: 14px;\n  color: #666;\n}\n.lake-button-set-emode .button-set-list-item .desc {\n  display: block;\n  font-size: 12px;\n  color: #999;\n}\n.lake-button-set-emode .button-set-list-item:hover {\n  border: 1px solid #e8e8e8;\n  background: #f8f8f8;\n}\n.lake-button-set-emode .button-set-list-item-active .icon,\n.lake-button-set-emode .button-set-list-item-active:hover .icon {\n  color: #25b864;\n}\n.lake-button-emoji-popover .ant-popover-inner-content {\n  padding: 0;\n}\n.lake-button-emoji-popover .lake-button-emoji-panel {\n  width: 224px;\n  padding: 4px 4px;\n  transition: none;\n}\n.lake-button-emoji-popover .lake-button-emoji-panel .lake-button-set-list-item {\n  width: 72px;\n  height: 96px;\n  padding: 4px 4px;\n  display: inline-block;\n  line-height: unset;\n  text-align: center;\n}\n.lake-button-emoji-popover .lake-button-emoji-panel .lake-button-set-list-item img {\n  margin: 0 auto;\n  height: 64px;\n  width: 64px;\n}\n.lake-button-emoji-popover .lake-button-emoji-panel .lake-button-set-list-item .lake-emoji-title {\n  font-size: 12px;\n  color: #8C8C8C;\n  line-height: 24px;\n}\n.lake-mini-editor .lake-button-set-list {\n  transition: none;\n}\n.lake-toolbar-more .lake-button-set {\n  z-index: 9;\n}\n.lake-button-icon-list > span > .lake-icon {\n  margin-right: 5px;\n}\n.lake-icon-svgs svg {\n  margin-bottom: -2px;\n}\n.lake-colorboard-group {\n  display: flex;\n  width: 100%;\n  height: auto;\n  position: relative;\n}\n.lake-colorboard-group:first-child {\n  margin-bottom: 10px;\n}\n.lake-colorboard-group:nth-child(2) {\n  margin-bottom: 6px;\n}\n.lake-colorboard-group:last-child {\n  margin-bottom: 0px;\n}\n.lake-colorboard-group-item {\n  width: 24px;\n  height: 24px;\n  padding: 2px 2px;\n  display: inline-block;\n  border-radius: 3px 3px;\n  border: 1px solid transparent;\n  flex: 0 0 auto;\n  cursor: pointer;\n  background-color: #fff;\n}\n.lake-colorboard-group-item > span {\n  position: relative;\n  width: 18px;\n  height: 18px;\n  display: block;\n  border-radius: 2px 2px;\n  border: 1px solid transparent;\n}\n.lake-colorboard-group-item > span svg {\n  position: absolute;\n  top: -1px;\n  left: 1px;\n  width: 12px;\n  height: 12px;\n}\n.lake-colorboard-group-item-border > span {\n  border: 1px solid #e8e8e8;\n}\n.lake-colorboard-group-item-special {\n  position: relative;\n}\n.lake-colorboard-group-item-special:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: 10px;\n  left: 0px;\n  z-index: 1;\n  width: 22px;\n  height: 0;\n  border-bottom: 2px solid #ff5151;\n  transform: rotate(45deg);\n}\n.lake-colorboard-group-item-special svg {\n  z-index: 2;\n}\n.lake-colorboard-group-item:hover {\n  border: 1px solid #d9d9d9;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.12);\n}\n.lake-collapse-button .lake-button {\n  padding: 0 6px;\n}\n.lake-toolbar-collapse {\n  min-width: 200px;\n  font-weight: normal;\n  max-height: calc(90vh - 120px);\n  overflow-y: auto;\n}\n.lake-toolbar-collapse .lake-sub-new-tag {\n  display: inline-block;\n  position: relative;\n  height: 12px;\n  background: #25B864;\n  color: white;\n  border-radius: 1px;\n  margin-left: 12px;\n  margin-top: 5px;\n  padding-left: 6px;\n  padding-right: 2px;\n  line-height: 11px;\n  font-size: 10px;\n  outline: 1px solid #25B864;\n}\n.lake-toolbar-collapse .lake-collapse-item-sub-title {\n  display: block;\n  font-size: 12px;\n  margin-top: 6px;\n  white-space: nowrap;\n  color: rgba(0, 0, 0, 0.45);\n}\n.lake-toolbar-collapse .lake-sub-new-tag::before {\n  content: \' \';\n  width: 6px;\n  height: 6px;\n  background: #25B864;\n  transform: rotate(45deg);\n  position: absolute;\n  left: -4px;\n  top: 3px;\n  border-radius: 1px;\n}\n.lake-toolbar-collapse.lake-scrollable.scroll-y {\n  padding-right: 0;\n}\n.lake-toolbar-collapse.ant-collapse {\n  background-color: #fff;\n  border: 0;\n  line-height: 1.5;\n}\n.lake-toolbar-collapse.ant-collapse > .ant-collapse-item {\n  border: 0;\n}\n.lake-toolbar-collapse.ant-collapse > .ant-collapse-item > .ant-collapse-header {\n  padding: 2px 16px;\n  text-align: left;\n  color: #8C8C8C;\n  font-weight: bold;\n  font-size: 12px;\n  line-height: 24px;\n}\n.lake-toolbar-collapse.ant-collapse .ant-collapse-item-disabled > .ant-collapse-header {\n  color: rgba(0, 0, 0, 0.45);\n  cursor: default;\n}\n.lake-toolbar-collapse .ant-collapse-content {\n  border: 0;\n}\n.lake-toolbar-collapse .ant-collapse-content > .ant-collapse-content-box {\n  padding: 0;\n}\n.lake-toolbar-collapse .ant-upload.ant-upload-select {\n  display: block;\n}\n.lake-toolbar-collapse .lake-collapse-list-item {\n  display: flex;\n  padding: 16px;\n  padding-top: 6px;\n  padding-bottom: 4px;\n  height: 36px;\n  overflow: hidden;\n  min-width: 200px;\n  cursor: pointer;\n}\n.lake-toolbar-collapse .lake-collapse-list-item.disable {\n  cursor: not-allowed;\n}\n.lake-toolbar-collapse .lake-collapse-list-item.disable > div {\n  opacity: 0.3;\n}\n.lake-toolbar-collapse .lake-collapse-list-item .lake-collapse-item-icon {\n  display: block;\n  line-height: 12px;\n  color: #ffffff;\n  background: #ffffff;\n  border: 1px solid #e8e8e8;\n  border-radius: 2px;\n  width: 24px;\n  height: 24px;\n}\n.lake-toolbar-collapse .lake-collapse-list-item .lake-collapse-item-icon .lake-svg-icon {\n  width: 22px;\n  height: 22px;\n}\n.lake-toolbar-collapse .lake-collapse-list-item .lake-collapse-item-text {\n  display: block;\n  text-align: left;\n  margin-left: 8px;\n  font-size: 14px;\n}\n.lake-toolbar-collapse .lake-collapse-list-item .lake-collapse-item-text .lake-collapse-item-title {\n  display: block;\n  color: #595959;\n  line-height: 24px;\n}\n.lake-toolbar-collapse .lake-collapse-list-item .lake-collapse-item-text .lake-collapse-item-description {\n  display: block;\n  color: #8C8C8C;\n  font-size: 12px;\n}\n.lake-toolbar-collapse .lake-collapse-list-item .uploader {\n  display: none;\n}\n.lake-toolbar-collapse .lake-collapse-list-item-active {\n  background-color: #f4f4f4;\n}\n.lake-toolbar-collapse-description {\n  color: #8C8C8C;\n  padding: 4px 16px 0 16px;\n}\n.lake-toolbar-collapse-description .description {\n  font-size: 12px;\n  line-height: 20px;\n  text-align: left;\n  padding-bottom: 8px;\n  margin-bottom: 6px;\n  border-bottom: 1px solid #e8e8e8;\n}\n.lake-toolbar-collapse-description .description code {\n  background-color: #F5F5F5;\n  border-radius: 4px;\n  padding: 2px;\n  border: 1px solid #D9D9D9;\n}\n.lake-toolbar-collapse-no-header .ant-collapse-header,\n.lake-button-set-list-search .ant-collapse-header {\n  display: none;\n}\n.lake-cardselect-list .lake-toolbar-collapse {\n  min-width: 200px;\n  max-height: 450px;\n}\n.lake-cardselect-list .lake-toolbar-collapse .lake-collapse-list-item {\n  min-width: 200px;\n}\n.lake-cardselect-list .lake-toolbar-collapse .ant-collapse-item {\n  padding: 16px 0 0 0;\n}\n.lake-cardselect-list .lake-toolbar-collapse .ant-collapse-item:last-child {\n  padding-bottom: 16px;\n}\n.lake-cardselect-list .lake-toolbar-collapse .ant-collapse-item .ant-collapse-header {\n  font-size: 12px!important;\n  line-height: 12px!important;\n  padding-top: 0!important;\n  padding-bottom: 0!important;\n  margin-bottom: 12px!important;\n  color: rgba(0, 0, 0, 0.25) !important;\n  font-weight: normal!important;\n}\n.lake-cardselect-list .lake-toolbar-collapse .ant-collapse-item .ant-collapse-content {\n  border-radius: unset!important;\n}\n.lake-cardselect-list .lake-toolbar-collapse .ant-collapse-item .ant-collapse-content .lake-collapse-list-item {\n  padding-top: 6px;\n  padding-bottom: 6px;\n}\n.lake-cardselect-list .lake-toolbar-collapse .ant-collapse-item .ant-collapse-content .lake-collapse-list-item.no-border {\n  padding-top: 8px;\n  padding-bottom: 8px;\n}\n.lake-cardselect-list .lake-toolbar-collapse .ant-collapse-item .ant-collapse-content .lake-collapse-list-item.no-border .lake-collapse-item-icon {\n  border: none;\n}\n.lake-cardselect-list .lake-toolbar-collapse .ant-collapse-item .ant-collapse-content .lake-collapse-list-item.no-border .lake-collapse-item-icon .lake-svg-icon {\n  width: 24px;\n  height: 24px;\n  background-size: 24px 24px;\n}\n.lake-cardselect-list .lake-button-set-list {\n  margin-left: 1px;\n  padding: 0;\n}\n.lake-cardselect-list .lake-button-set-list.lake-button-set-list-to-top {\n  top: auto;\n  bottom: 100%;\n}\n.lake-toolbar-collapse-hot-key-tips {\n  color: rgba(0, 0, 0, 0.65);\n  border-bottom: 1px solid #E8E8E8;\n  margin: 2px 16px;\n  padding-top: 2px;\n  padding-bottom: 6px;\n}\n.lake-upload-panel-popover.ant-popover-placement-rightBottom {\n  padding-left: 5px;\n}\n.lake-upload-panel-popover .ant-popover-arrow {\n  display: none;\n}\n.lake-upload-panel-popover .ant-popover-inner-content {\n  padding: 0;\n}\n.lake-upload-panel-main-btns {\n  font-size: 14px;\n  line-height: 18px;\n  color: rgba(0, 0, 0, 0.65);\n  padding: 14px 20px;\n  cursor: pointer;\n}\n.lake-upload-panel-main-btns:HOVER {\n  color: rgba(0, 0, 0, 0.85);\n  background-color: #F4F4F4;\n}\n.lake-upload-panel-main-btns .lake-svg-icon {\n  width: 16px;\n  height: 16px;\n  margin: 0 16px 0 4px;\n  transform: translateY(0.5px);\n}\n.lake-upload-panel-item-box {\n  border-top: 1px solid #EBEBEB;\n  padding: 12px 0;\n}\n.lake-upload-panel-item {\n  display: flex;\n  cursor: pointer;\n  padding: 6px 20px;\n  user-select: none;\n}\n.lake-upload-panel-item:HOVER {\n  color: rgba(0, 0, 0, 0.85);\n  background-color: #F4F4F4;\n}\n.lake-upload-panel-item-title {\n  font-size: 14px;\n  line-height: 18px;\n  color: rgba(0, 0, 0, 0.65);\n}\n.lake-upload-panel-item-title:last-child {\n  line-height: 24px;\n}\n.lake-upload-panel-item-subtitle {\n  font-size: 12px;\n  line-height: 12px;\n  margin-top: 8px;\n  color: rgba(0, 0, 0, 0.35);\n}\n.lake-upload-panel-item-icon {\n  width: 24px;\n  height: 24px;\n  margin-right: 12px;\n}\n.lake-upload-panel-item-icon .lake-svg-icon {\n  width: 24px;\n  height: 24px;\n  background-size: 24px 24px;\n}\n.lake-upload-panel-group-title {\n  padding: 4px 20px;\n  margin-bottom: 2px;\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.25);\n}\n.lake-upload-panel-localdoc {\n  min-width: 273px;\n}\n.lake-upload-panel-thirdparty {\n  min-width: 169px;\n}\n.lake-zoom {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 1033;\n  width: 100%;\n  height: 100vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n.lake-zoom-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.9);\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.1s;\n  cursor: zoom-out;\n}\n.lake-zoom-overlay-active {\n  opacity: 1;\n  visibility: visible;\n}\n.lake-zoom-toolbar {\n  position: absolute;\n  width: 100%;\n  height: 40px;\n  background: rgba(0, 0, 0, 0.5);\n  top: 0;\n  left: 0;\n  right: 0;\n  display: block;\n  z-index: 1100;\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.1s;\n}\n.lake-zoom-toolbar .text {\n  display: inline-block;\n  padding: 0 5px;\n}\n.lake-zoom-toolbar-active {\n  opacity: 1;\n  visibility: visible;\n}\n.lake-zoom-toolbar-item {\n  float: right;\n  display: block;\n  width: 40px;\n  height: 40px;\n  line-height: 40px;\n  font-size: 16px;\n  color: rgba(255, 255, 255, 0.8);\n  text-align: center;\n}\n.lake-zoom-toolbar-item:hover {\n  color: rgba(255, 255, 255, 0.96);\n}\n.lake-zoom-toolbar-item-left {\n  float: left;\n  width: auto;\n  padding: 0 16px;\n}\n.lake-zoom-center {\n  position: relative;\n  width: 1px;\n  height: 1px;\n  display: flex;\n  justify-content: center;\n  flex-shrink: 0;\n  transition: transform 0.1s, top 0.1s, left 0.1s, opacity 0.1s;\n  cursor: pointer;\n}\n.lake-zoom-center-canzoom {\n  cursor: zoom-in;\n}\n.lake-zoom-center img {\n  background: #fff;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n  border-radius: 2px 2px;\n}\n.lake-zoom-center-iszooming {\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: -o-grab;\n  cursor: -ms-grab;\n  cursor: grab;\n}\n.lake-zoom-center-isdraging {\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing;\n  cursor: -o-grabbing;\n  cursor: -ms-grabbing;\n  cursor: grabbing;\n}\n.lake-zoom-content {\n  transition: transform 0.1s, top 0.1s, left 0.1s;\n}\n.lake-zoom-content-iswheeling,\n.lake-zoom-content-isdraging {\n  transition: none;\n}\n.lake-zoom-next,\n.lake-zoom-prev {\n  position: absolute;\n  width: 48px;\n  height: 48px;\n  display: block;\n  top: 50%;\n  margin-top: -24px;\n  background: rgba(0, 0, 0, 0.8);\n  z-index: 1100;\n  text-align: center;\n  line-height: 48px;\n  cursor: pointer;\n}\n.lake-zoom-next:hover,\n.lake-zoom-prev:hover {\n  color: #f9f9f9;\n  background: rgba(0, 0, 0, 0.9);\n}\n.lake-zoom-prev {\n  left: 0;\n}\n.lake-zoom-next {\n  right: 0;\n}\n.lake-engine [data-card-type][data-lake-card="emoji"] *::selection {\n  background: rgba(27, 162, 227, 0.2) !important;\n}\n.lake-emoji {\n  display: inline-block;\n  width: 18px;\n  height: 18px;\n  line-height: inherit;\n  vertical-align: middle;\n  background-size: contain;\n  background-position: 0 0;\n  background-repeat: no-repeat;\n  margin-top: -3px;\n  margin-left: 1px;\n  margin-right: 1px;\n}\n.lake-emoji-portal {\n  position: absolute;\n  background: #ffffff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  height: auto;\n  width: 175px;\n  padding: 5px 5px;\n  z-index: 1;\n}\n.lake-emoji-portal-list-item {\n  width: 30px;\n  height: 30px;\n  padding: 5px 5px;\n  display: inline-block;\n  vertical-align: middle;\n  margin: 0 1px;\n}\n.lake-emoji-portal-list-item img {\n  display: block;\n  margin: 0 auto;\n  height: 20px;\n  width: 20px;\n}\n.lake-emoji-portal-list-item:hover,\n.lake-emoji-portal-list-item-active {\n  background: #f5f5f5;\n  cursor: pointer;\n}\n.lake-emoji-que {\n  width: 64px;\n  height: 64px;\n}\n@keyframes lake-plugin-loading {\n  0% {\n    opacity: 0.5;\n    transform: translate3d(0, -40%, 0) scale(0.6);\n  }\n  30% {\n    opacity: 1;\n  }\n  70% {\n    opacity: 1;\n    transform: translate3d(0, -40%, 0) scale(1);\n  }\n  100% {\n    opacity: 0;\n    transform: translate3d(0, -160%, 0) scale(1);\n  }\n}\n.lake-plugin-loading {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-top: -3px;\n  margin-left: -12px;\n  display: inline-block;\n  width: 24px;\n  height: 6px;\n}\n.lake-plugin-loading span,\n.lake-plugin-loading:before,\n.lake-plugin-loading:after {\n  display: block;\n  position: absolute;\n  width: 6px;\n  height: 6px;\n  border-radius: 3px 3px;\n  background: rgba(0, 0, 0, 0.2);\n}\n.lake-plugin-loading:before {\n  content: " ";\n  left: 0px;\n  animation: lake-plugin-loading 0.8s infinite;\n}\n.lake-plugin-loading span {\n  left: 50%;\n  margin-left: -3px;\n  animation: lake-plugin-loading 0.8s infinite 0.1s;\n}\n.lake-plugin-loading:after {\n  content: " ";\n  right: 0px;\n  animation: lake-plugin-loading 0.8s infinite 0.2s;\n}\n.lake-anticon {\n  display: inline-block;\n  font-style: normal;\n  vertical-align: -0.125em;\n  text-align: center;\n  text-transform: none;\n  line-height: 0;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n}\n.lake-anticon svg {\n  display: inline-block;\n}\n.lake-anticon .lake-anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n.lake-anticon > * {\n  line-height: 1;\n}\nspan[data-lake-card="image"].lake-card-block.lake-image-left,\nspan[data-lake-card="image"].lake-card-block.lake-image-center,\nspan[data-lake-card="image"].lake-card-block.lake-image-right {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: flex-start;\n}\nspan[data-lake-card="image"].lake-card-block.lake-image-right {\n  text-align: right;\n  justify-content: flex-end;\n}\nspan[data-lake-card="image"].lake-card-block.lake-image-left {\n  text-align: left;\n  justify-content: flex-start;\n}\nspan[data-lake-card="image"].lake-card-block.lake-image-center {\n  text-align: center;\n  justify-content: center;\n}\n.lake-image-meta {\n  position: relative;\n  color: #595959;\n  line-height: 0;\n}\n.lake-image-meta::before {\n  content: \' \';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 1;\n  pointer-events: none;\n}\n.lake-image-meta.border::before {\n  border: 1px solid #e5e5e5;\n}\n.lake-image-meta.shadow::before {\n  box-shadow: 0 3px 6px 0 rgba(0, 0, 0, 0.15);\n}\n.lake-image-meta-loading {\n  background: #f5f5f5;\n}\n.lake-image-meta-isgif .gif {\n  position: absolute;\n  top: 4px;\n  right: 10px;\n  width: 24px;\n  height: 24px;\n  background: url(\'https://gw.alipayobjects.com/zos/rmsportal/TIlWxRwDPKtkAhmXUmVV.png\') no-repeat 0 0;\n  background-size: cover;\n  display: inline-block;\n  opacity: 1;\n  visibility: visible;\n  transition: all 0.3s ease-in-out;\n}\n.lake-image-meta-isgif .gif-active {\n  opacity: 0;\n  visibility: hidden;\n}\n.lake-image-meta .desc {\n  color: #8C8C8C;\n}\n.lake-image-meta .title {\n  line-height: 24px;\n  font-size: 14px;\n  display: inline-block;\n  color: #262626;\n  font-weight: 400;\n}\n.lake-image-meta .size {\n  color: #8C8C8C;\n}\n.lake-image-meta .progress {\n  padding-left: 8px;\n  color: rgba(255, 255, 255, 0.9);\n}\n.lake-image-meta .progress .anticon {\n  color: rgba(255, 255, 255, 0.9);\n  line-height: 24px;\n  margin-right: 10px;\n}\n.lake-image-meta .lake-image-warning {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-top: -12px;\n  margin-left: -12px;\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  font-size: 24px;\n  color: #faad14;\n  cursor: pointer;\n}\n.lake-image-content {\n  position: relative;\n  border-radius: 3px 3px;\n  background: #f5f5f5;\n}\n.lake-image-content .lake-void-first {\n  left: -3px;\n}\n.lake-image-content .lake-void-last {\n  right: -3px;\n}\n.lake-image-content-isover,\n.lake-image-content-issuccess {\n  border: 1px solid #b7eb8f;\n  background: #f6ffed;\n}\n.lake-image-content-isfail:not(.lake-image-content-isover) {\n  border: 0;\n  background: #f5f5f5;\n}\n.lake-image-content-istmp,\n.lake-image-content-isvalid {\n  display: inline-block;\n  border-radius: 0 0;\n  padding: 0 0;\n  background: transparent;\n  border-color: transparent;\n}\n.lake-image-content-istmp .lake-image-meta,\n.lake-image-content-isvalid .lake-image-meta {\n  display: inline-block;\n}\n.lake-image-content-istmp .lake-image-meta .image,\n.lake-image-content-isvalid .lake-image-meta .image {\n  display: inline-block;\n  width: 100%;\n  opacity: 0.6;\n  text-align: left;\n  cursor: pointer;\n  transition: opacity 0.3s ease-in-out, box-shadow 0.3s ease-in-out;\n  -webkit-user-select: none;\n  user-select: none;\n}\n.lake-image-content-istmp .lake-image-meta .progress,\n.lake-image-content-isvalid .lake-image-meta .progress {\n  font-family: \'Lucida Console\', Consolas, Monaco, \'Andale Mono\', \'Ubuntu Mono\', monospace;\n  position: absolute;\n  bottom: 8px;\n  right: 8px;\n  font-size: 12px;\n  line-height: 24px;\n  color: rgba(255, 255, 255, 0.9);\n  padding: 0 6px;\n  border-radius: 2px 2px;\n  background: rgba(0, 0, 0, 0.8);\n  white-space: nowrap;\n}\n.lake-image-content-isvalid .lake-image-meta .image {\n  opacity: 1;\n}\n.lake-image-editor {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  z-index: 1;\n}\n.lake-image-editor-holder {\n  position: absolute;\n  width: 12px;\n  height: 12px;\n  border: 2px solid #fff;\n  background: #1890ff;\n  display: inline-block;\n}\n.lake-image-editor-holder-45 {\n  top: -6px;\n  right: -6px;\n  cursor: nesw-resize;\n}\n.lake-image-editor-holder-135 {\n  bottom: -6px;\n  right: -6px;\n  cursor: nwse-resize;\n}\n.lake-image-editor-holder-225 {\n  bottom: -6px;\n  left: -6px;\n  cursor: nesw-resize;\n}\n.lake-image-editor-holder-315 {\n  left: -6px;\n  top: -6px;\n  cursor: nwse-resize;\n}\n.lake-image-editor-bg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  cursor: pointer;\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n}\n.lake-image-editor-bg-active {\n  opacity: 0.3;\n}\n.lake-image-editor-number {\n  position: absolute;\n  display: inline-block;\n  line-height: 24px;\n  padding: 0 4px;\n  font-size: 12px;\n  border-radius: 3px 3px;\n  background: rgba(0, 0, 0, 0.86);\n  color: rgba(255, 255, 255, 0.96);\n  font-family: \'Lucida Console\', Consolas, Monaco, \'Andale Mono\', \'Ubuntu Mono\', monospace;\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.3s ease-in-out;\n  transform: scale(0.8);\n}\n.lake-image-editor-number-45 {\n  top: 0;\n  right: -6px;\n  transform: translateX(100%) scale(0.8);\n}\n.lake-image-editor-number-135 {\n  right: -6px;\n  bottom: 0;\n  transform: translateX(100%) scale(0.8);\n}\n.lake-image-editor-number-225 {\n  left: -6px;\n  bottom: 0;\n  transform: translateX(-100%) scale(0.8);\n}\n.lake-image-editor-number-315 {\n  left: -6px;\n  top: 0;\n  transform: translateX(-100%) scale(0.8);\n}\n.lake-image-editor-number-active {\n  opacity: 1;\n  visibility: visible;\n}\n.lake-image-editor-maximize {\n  position: absolute;\n  z-index: 2;\n  right: 10px;\n  top: 10px;\n  background-color: rgba(0, 0, 0, 0.65);\n  width: 20px;\n  height: 20px;\n  text-align: center;\n  font-size: 16px;\n  color: #fff;\n  line-height: 20px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.08);\n  cursor: pointer;\n}\n.lake-image-editor-maximize .lake-icon-full-screen {\n  margin-left: 1px;\n}\n.lake-image {\n  position: relative;\n  display: inline-block;\n  font-size: 14px;\n  text-align: left;\n  border-radius: 3px 3px;\n  line-height: 24px;\n  text-indent: 0;\n  -webkit-user-select: none;\n  user-select: none;\n}\n.lake-image .ant-upload-drag-container {\n  position: relative;\n}\n.lake-image-block {\n  display: block;\n}\n.lake-image:hover .lake-image-content:not(.lake-image-content-isover):not(.lake-image-content-isfail):not(.lake-image-content-isvalid):not(.lake-image-content-istmp),\n.lake-image-active .lake-image-content:not(.lake-image-content-isover):not(.lake-image-content-isfail):not(.lake-image-content-isvalid):not(.lake-image-content-istmp) {\n  border-color: #f5f5f5;\n  background: #f5f5f5;\n}\n.lake-image:hover .lake-embed-toolbar-inline {\n  opacity: 1;\n  visibility: visible;\n}\n.lake-image .ant-upload.ant-upload-drag {\n  padding: 0;\n  border: none;\n  text-align: left;\n}\n.lake-image .ant-upload.ant-upload-drag.ant-upload-drag-hover:not(.ant-upload-disabled) {\n  border: none;\n}\n.lake-image .lake-embed-toolbar-item-input {\n  padding-left: 10px;\n  padding-right: 10px;\n}\n.lake-engine-view .lake-image-content-isvalid .lake-image-meta > .image {\n  cursor: zoom-in;\n  user-select: auto;\n}\n.lake-engine-view a .lake-image-content-isvalid .lake-image-meta > .image {\n  cursor: pointer;\n}\n.lake-image.doc-embed-view .lake-image-content-isvalid .lake-image-meta > .image {\n  cursor: default;\n}\n.lake-image.doc-embed-view .lake-image-editor-maximize {\n  display: none;\n}\n.lake-image-mask {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  overflow: hidden;\n}\n.lake-image-mask-point {\n  position: absolute;\n  display: inline-block;\n  color: transparent !important;\n  pointer-events: none;\n  min-height: auto !important;\n  line-height: 1 !important;\n  text-shadow: none !important;\n  white-space: nowrap;\n  word-break: break-all;\n}\n[data-lake-card="file"] {\n  background: transparent;\n}\n[data-lake-card="file"] .lake-card-toolbar.lake-embed-toolbar-block {\n  top: -40px;\n  min-width: unset;\n}\n.lake-engine [data-lake-card="file"] {\n  border: none;\n}\n.lake-engine-view .lake-card-embed-toolbar-active .lake-file-done {\n  background-color: #f5f5f5;\n}\n@media only screen and (max-width: 960px) {\n  .lake-engine-view .lake-card-embed-toolbar-active .lake-file-done {\n    background-color: rgba(27, 162, 227, 0.2);\n  }\n}\n.lake-file {\n  display: flex;\n  height: 24px;\n  line-height: 24px;\n  cursor: pointer;\n  white-space: nowrap;\n}\n.lake-file .lake-file-icon {\n  flex: auto;\n  width: 24px;\n  height: 24px;\n  font-size: 16px;\n  text-align: center;\n  margin-right: 4px;\n}\n.lake-file .lake-file-title {\n  flex: auto;\n  font-size: 14px;\n  margin-right: 8px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.lake-file .lake-file-size {\n  flex: auto;\n  font-size: 12px;\n}\n.lake-file-done {\n  color: #096DD9;\n}\n.lake-file-transfering {\n  color: #999;\n}\n.lake-file-uploading,\n.lake-file-error {\n  color: #595959;\n}\n.lake-file-uploading .lake-file-size,\n.lake-file-error .lake-file-size {\n  color: #8C8C8C;\n}\n.lake-toc-sidebar .lake-sidebar-content {\n  overflow: auto;\n  height: calc(100vh - 164px);\n  margin-left: -30px;\n}\n.lake-sidebar.lake-toc-sidebar {\n  overflow: visible;\n}\n.lake-card-cover-mask {\n  position: absolute;\n  opacity: 0;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 3;\n}\n.lake-engine::selection {\n  background: rgba(27, 162, 227, 0.2);\n  color: inherit;\n}\n.lake-engine ::selection {\n  background: rgba(27, 162, 227, 0.2);\n  color: inherit;\n}\n.lake-engine [data-lake-card]::selection {\n  background: transparent;\n}\n.lake-engine [data-lake-card="codeblock"] *::selection,\n.lake-engine [data-lake-card="diagram"] *::selection {\n  background: transparent !important;\n}\n.lake-engine [data-lake-card] *::selection {\n  background: transparent;\n}\n.lake-engine [data-card-type="block"].lake-activated *::selection {\n  background: rgba(27, 162, 227, 0.2);\n}\n.lake-engine [data-card-type].lake-activated input::selection {\n  background: rgba(27, 162, 227, 0.2);\n}\n.lake-engine [data-card-type].lake-activated textarea::selection {\n  background: rgba(27, 162, 227, 0.2);\n}\n.lake-engine [data-lake-card].lake-selected [data-card-element="center"].lake-selected-background {\n  background: rgba(27, 162, 227, 0.2);\n}\n.lake-engine [data-lake-card].lake-selected [data-card-element="center"].lake-selected-outline {\n  outline: 2px solid #1890ff;\n}\n.lake-engine.show-placeholder::before {\n  display: block;\n}\n.lake-engine::before {\n  display: none;\n  position: absolute;\n  content: attr(data-placeholder);\n  color: #bfbfbf;\n}\n*,\n*::before,\n*::after {\n  box-sizing: border-box;\n}\n.lake-toolbar-tooltip.ant-tooltip {\n  white-space: nowrap;\n}\n.lake-max-editor {\n  position: relative;\n  width: 100%;\n  min-width: 1440px;\n  height: calc(100vh - 56px);\n}\n.lake-max-editor-wrapper {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  background-color: #f9f9f9;\n  transition: height 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\n}\n.lake-max-editor-wrapper-content {\n  width: 100%;\n  height: calc(100% - 40px);\n  overflow: auto;\n}\n.lake-max-editor-wrapper-content .lake-max-editor-content {\n  width: 100%;\n  margin: 0 auto;\n  background-color: #f9f9f9;\n  padding: 16px 0 64px 0;\n}\n.lake-max-editor-wrapper-content .lake-content-editor {\n  border: 1px solid #e8e8e8;\n  box-shadow: 0 2px 8px rgba(115, 115, 115, 0.08);\n}\n.lake-max-editor-wrapper-content .lake-content-editor-extra {\n  position: relative;\n  padding: 32px 60px 0 60px;\n}\n.lake-max-editor-wrapper-content .lake-content-editor-extra .lake-meta {\n  padding-bottom: 32px;\n  border-bottom: 1px solid #e8e8e8;\n}\n.lake-max-editor-wrapper-content .lake-content-editor-core {\n  position: relative;\n  background-color: transparent;\n  min-height: 1024px;\n  padding: 20px 60px 90px 60px;\n}\n.lake-mini-editor {\n  position: relative;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  padding-bottom: 40px;\n}\n.lake-mini-editor .lake-content-editor {\n  padding: 0;\n  width: 100%;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  border-radius: 3px 3px;\n}\n.lake-mini-editor .lake-content-editor-core {\n  min-height: 180px;\n  padding: 8px;\n}\n.lake-mini-editor .lake-engine {\n  padding-bottom: 40px;\n}\n.lake-content-editor {\n  position: relative;\n  margin: 0 auto;\n  background: #ffffff;\n  width: 874px;\n  font-family: \'Tahoma For Number\', \'Chinese Quote\', -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, \'PingFang SC\', \'Hiragino Sans GB\', \'Microsoft YaHei\', \'Helvetica Neue\', Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  color: #262626;\n  cursor: text;\n  white-space: normal;\n}\n.lake-mobile-editor {\n  position: relative;\n  min-height: 100vh;\n  overflow: auto;\n}\n.lake-mobile-editor .lake-content-editor {\n  width: 100%;\n  min-height: 100%;\n  overflow: auto;\n}\n.lake-mobile-editor .lake-content-editor .lake-content-editor-core {\n  min-height: calc(100vh - 110px);\n  padding: 10px 16px 100px 16px;\n}\n.lake-mobile-editor .lake-content-editor .lake-content-editor-extra {\n  margin: 0 16px;\n  padding-top: 16px;\n}\n.lake-mobile-editor .lake-content-editor .lake-content-editor-extra .bi-meta-title {\n  padding-bottom: 0;\n}\n.lake-mobile-editor .lake-content-editor .lake-content-editor-extra .bi-meta-title-input {\n  font-size: 24px;\n}\n@media only screen and (max-width: 1440px) {\n  .lake-max-editor {\n    min-width: 1280px;\n  }\n}\n@media only screen and (min-width: 1884px) {\n  .lake-common-sidebar {\n    right: calc(50% - 480px - 436px + 12px);\n  }\n}\n.lake-max-editor.lake-adaptive-width {\n  min-width: 646px;\n}\n.lake-max-editor.lake-adaptive-width .lake-toolbar-content-plugins.lake-toolbar-content-plugins-hide {\n  height: 39px;\n  overflow: hidden;\n}\n.lake-max-editor.lake-adaptive-width .lake-content-editor {\n  width: calc(100% - 32px);\n}\n.lake-max-editor.lake-adaptive-width .lake-toolbar-content {\n  padding-left: 72px;\n  text-align: left;\n  white-space: nowrap;\n}\n.lake-max-editor.lake-adaptive-width .lake-common-sidebar {\n  left: 80%;\n  width: calc(20% - 24px);\n}\n.lake-max-editor.lake-adaptive-width .lake-common-sidebar.lake-toc-sidebar {\n  left: 80.7%;\n  width: calc(19.3% - 24px);\n}\n.lake-max-editor.lake-adaptive-width .lake-no-paper .lake-content-editor {\n  width: calc(100%);\n}\n.lake-max-editor.lake-adaptive-width.lake-has-sidebar .lake-content-editor {\n  margin-right: calc(19.7% - 8px);\n  width: calc(80.3% - 8px);\n}\n.lake-max-editor.lake-adaptive-width.lake-has-sidebar .lake-max-editor-wrapper-content.lake-has-scroll-bar .lake-content-editor {\n  width: calc(80.3% + 8px);\n  margin-right: calc(19.7% - 22px);\n}\n.lake-max-editor.lake-adaptive-width.lake-no-paper .lake-content-editor {\n  width: calc(100%);\n  border: none;\n  box-shadow: none;\n}\n.lake-max-editor.lake-adaptive-width.lake-no-paper .lake-toolbar-content {\n  padding-left: 56px;\n}\n.lake-max-editor.lake-adaptive-width.lake-no-paper .lake-max-editor-wrapper-content .lake-max-editor-content {\n  padding: 0;\n  background-color: white;\n}\n.lake-max-editor.lake-adaptive-width.lake-no-paper .lake-sidebar {\n  padding-top: 44px;\n  background: white;\n}\n.lake-max-editor.lake-adaptive-width.lake-has-sidebar.lake-no-paper .lake-content-editor {\n  margin-right: calc(19.7% + 8px + 8px);\n  width: calc(80.3% - 8px - 8px);\n}\n.lake-max-editor.lake-adaptive-width.lake-has-sidebar.lake-no-paper .lake-max-editor-wrapper-content.lake-has-scroll-bar .lake-content-editor {\n  width: calc(80.3% + 8px - 8px);\n  margin-right: calc(19.7% - 8px + 8px);\n}\n.lake-max-editor.lake-adaptive-width.lake-no-paper.lake-has-sidebar .lake-content-editor-core {\n  padding-right: 8px;\n}\n.lake-max-editor.lake-adaptive-width.lake-no-paper.lake-has-sidebar .lake-content-editor-extra {\n  padding-right: 8px;\n}\n@media only screen and (max-width: 1351px) {\n  .lake-max-editor.lake-adaptive-width .lake-content-editor {\n    width: calc(100% - 32px);\n  }\n  .lake-max-editor.lake-adaptive-width .lake-common-sidebar {\n    padding-left: 0;\n  }\n  .lake-max-editor.lake-adaptive-width.lake-has-sidebar .lake-content-editor {\n    margin-right: 252px;\n    width: calc(100% - 252px - 2 * 8px);\n  }\n  .lake-max-editor.lake-adaptive-width.lake-has-sidebar .lake-common-sidebar {\n    left: calc(100% - 252px + 2 * 8px);\n    width: 220px;\n  }\n  .lake-max-editor.lake-adaptive-width.lake-has-sidebar .lake-common-sidebar.lake-toc-sidebar {\n    left: calc(100% - 252px + 3.5 * 8px);\n    width: 220px;\n  }\n  .lake-max-editor.lake-adaptive-width.lake-has-sidebar .lake-max-editor-wrapper-content.lake-has-scroll-bar .lake-content-editor {\n    margin-right: 252px;\n    width: calc(100% - 252px - 2 * 8px);\n  }\n  .lake-max-editor.lake-adaptive-width.lake-has-sidebar .lake-max-editor-wrapper-content.lake-has-scroll-bar .lake-common-sidebar {\n    left: calc(100% - 252px + 2 * 8px - 14px);\n    width: 220px;\n  }\n  .lake-max-editor.lake-adaptive-width.lake-no-paper .lake-common-sidebar {\n    left: calc(80.3% - 16px - 8px);\n    width: 19.7%;\n  }\n  .lake-max-editor.lake-adaptive-width.lake-has-sidebar.lake-no-paper .lake-content-editor {\n    margin-right: 252px;\n    width: calc(100% - 252px);\n  }\n  .lake-max-editor.lake-adaptive-width.lake-has-sidebar.lake-no-paper .lake-common-sidebar {\n    left: calc(100% - 252px + 2 * 8px);\n    width: 220px;\n  }\n  .lake-max-editor.lake-adaptive-width.lake-has-sidebar.lake-no-paper .lake-max-editor-wrapper-content.lake-has-scroll-bar .lake-content-editor {\n    margin-right: 252px;\n    width: calc(100% - 252px);\n  }\n  .lake-max-editor.lake-adaptive-width.lake-has-sidebar.lake-no-paper .lake-max-editor-wrapper-content.lake-has-scroll-bar .lake-common-sidebar {\n    left: calc(100% - 252px + 2 * 8px - 14px + 4px);\n    width: 220px;\n  }\n}\n.lake-anchor-button.lake-icon {\n  position: absolute;\n  width: 24px;\n  height: 24px;\n  line-height: 24px;\n  text-align: center;\n  font-size: 14px;\n  display: block;\n  background: rgba(255, 255, 255, 0.9);\n  color: #BFBFBF;\n  border-radius: 2px 2px;\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  opacity: 0;\n  visibility: hidden;\n  -webkit-transition: opacity 0.3s ease-in-out;\n  transition: opacity 0.3s ease-in-out;\n}\n.lake-anchor-button.lake-icon.lake-anchor-button-active {\n  opacity: 1;\n  visibility: visible;\n}\n.lake-anchor-button.lake-icon .lake-icon {\n  width: 18px;\n}\n.lake-anchor-button.lake-icon:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-engine-view h1,\n.lake-engine-view h2,\n.lake-engine-view h3,\n.lake-engine-view h4,\n.lake-engine-view h5,\n.lake-engine-view h6 {\n  position: relative;\n}\n.lake-engine-view h1 .lake-anchor,\n.lake-engine-view h2 .lake-anchor,\n.lake-engine-view h3 .lake-anchor,\n.lake-engine-view h4 .lake-anchor,\n.lake-engine-view h5 .lake-anchor,\n.lake-engine-view h6 .lake-anchor {\n  position: absolute;\n  left: -30px;\n  display: none;\n  width: 30px;\n}\n.lake-engine-view h1 .lake-anchor .lake-anchor-button,\n.lake-engine-view h2 .lake-anchor .lake-anchor-button,\n.lake-engine-view h3 .lake-anchor .lake-anchor-button,\n.lake-engine-view h4 .lake-anchor .lake-anchor-button,\n.lake-engine-view h5 .lake-anchor .lake-anchor-button,\n.lake-engine-view h6 .lake-anchor .lake-anchor-button {\n  position: relative;\n  visibility: visible;\n  opacity: 1;\n  text-align: center;\n}\n.lake-engine-view h1:hover,\n.lake-engine-view h2:hover,\n.lake-engine-view h3:hover,\n.lake-engine-view h4:hover,\n.lake-engine-view h5:hover,\n.lake-engine-view h6:hover {\n  position: relative;\n}\n.lake-engine-view h1:hover .lake-anchor,\n.lake-engine-view h2:hover .lake-anchor,\n.lake-engine-view h3:hover .lake-anchor,\n.lake-engine-view h4:hover .lake-anchor,\n.lake-engine-view h5:hover .lake-anchor,\n.lake-engine-view h6:hover .lake-anchor {\n  display: inline-block;\n}\n.lake-engine-view h1:target,\n.lake-engine-view h2:target,\n.lake-engine-view h3:target,\n.lake-engine-view h4:target,\n.lake-engine-view h5:target,\n.lake-engine-view h6:target {\n  position: relative;\n}\n.lake-engine-view h1:target .lake-anchor,\n.lake-engine-view h2:target .lake-anchor,\n.lake-engine-view h3:target .lake-anchor,\n.lake-engine-view h4:target .lake-anchor,\n.lake-engine-view h5:target .lake-anchor,\n.lake-engine-view h6:target .lake-anchor {\n  display: inline-block;\n  color: #51b063;\n}\n.lake-table-selected {\n  outline: 2px solid #1890FF;\n}\n.lake-table {\n  position: relative;\n  table-layout: fixed;\n  border-collapse: collapse;\n  border-spacing: 0;\n  word-wrap: break-word;\n  word-break: normal;\n  margin: 0;\n  font-weight: 400;\n  box-sizing: border-box;\n  border: 1px solid #d9d9d9;\n  cursor: default;\n  width: 96%;\n}\n.lake-table [data-lake-card="image"] {\n  margin: 0!important;\n}\n.lake-table.lake-no-border {\n  border: 1px solid transparent;\n}\n.lake-table.lake-no-border td {\n  border: 1px solid transparent;\n}\n.lake-table.drag-select {\n  cursor: nwse-resize;\n}\n.lake-table.drag-select.drag_n {\n  cursor: ns-resize;\n}\n.lake-table.drag-select.drag_s {\n  cursor: ns-resize;\n}\n.lake-table.drag-select.drag_w {\n  cursor: ew-resize;\n}\n.lake-table.drag-select.drag_e {\n  cursor: ew-resize;\n}\n.lake-table.drag-select.drag_nw {\n  cursor: nwse-resize;\n}\n.lake-table.drag-select.drag_se {\n  cursor: nwse-resize;\n}\n.lake-table.drag-select.drag_n td {\n  cursor: ns-resize;\n}\n.lake-table.drag-select.drag_s td {\n  cursor: ns-resize;\n}\n.lake-table.drag-select.drag_w td {\n  cursor: ew-resize;\n}\n.lake-table.drag-select.drag_e td {\n  cursor: ew-resize;\n}\n.lake-table.drag-select.drag_nw td {\n  cursor: nwse-resize;\n}\n.lake-table.drag-select.drag_se td {\n  cursor: nwse-resize;\n}\n.lake-table tbody,\n.lake-table tr,\n.lake-table th,\n.lake-table td {\n  margin: 0;\n  font-weight: 400;\n  box-sizing: border-box;\n}\n.lake-table tr {\n  height: 33px;\n}\n.lake-table tr th,\n.lake-table tr td {\n  min-width: 90px;\n  white-space: normal;\n  word-wrap: break-word;\n  border: 1px solid #d9d9d9;\n  vertical-align: top;\n  padding: 4px 8px;\n  cursor: default;\n}\n.lake-table .CodeMirror {\n  padding: 16px;\n}\n.table-wrapper {\n  position: relative;\n  cursor: default;\n}\n.table-wrapper.editing .table-header {\n  visibility: visible;\n}\n.table-wrapper.editing .table-cols-header {\n  visibility: visible;\n}\n.table-wrapper.editing .table-rows-header {\n  visibility: visible;\n}\n.table-wrapper.editing .rows-addition {\n  display: block;\n}\n.table-wrapper.editing .table-viewport {\n  margin-bottom: 0;\n  padding-bottom: 8px;\n}\n.table-wrapper .table-textarea {\n  position: fixed;\n  opacity: 0;\n  overflow: hidden;\n  width: 100px;\n  height: 0;\n  padding: 0;\n  border: 0;\n  resize: none;\n  left: 0;\n  top: 0;\n}\n.table-wrapper .multi-addition {\n  display: none;\n  position: absolute;\n  width: 60px;\n  height: 34px;\n  z-index: 10;\n  bottom: 0;\n}\n.table-wrapper .multi-addition .ant-input-number {\n  width: 60px;\n}\n.table-wrapper .multi-addition .ant-input-number:hover {\n  border-color: #008dff;\n}\n.table-wrapper .multi-addition .ant-input-number .ant-input-number-handler:hover {\n  color: #008dff;\n}\n.table-wrapper .multi-addition .ant-input-number-focused {\n  border-color: #008dff;\n  box-shadow: 0 0 0 2px rgba(112, 183, 243, 0.2);\n}\n.table-wrapper .multi-addition .up {\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 16px;\n  height: 16px;\n  text-align: center;\n  font-size: 12px;\n  line-height: 16px;\n  border-bottom: 1px solid #e8e8e8;\n}\n.table-wrapper .multi-addition .down {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  width: 16px;\n  height: 16px;\n  text-align: center;\n  font-size: 12px;\n  line-height: 16px;\n}\n.table-wrapper .multi-addition .number {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 37px;\n  height: 32px;\n  border-right: 1px solid #e8e8e8;\n  text-align: center;\n  font-size: 14px;\n  line-height: 32px;\n}\n.table-wrapper .table-header {\n  position: absolute;\n  visibility: hidden;\n  left: -16px;\n  top: 24px;\n  width: 12px;\n  height: 12px;\n  background: #fff;\n  border: 1px solid #e8e8e8;\n  border-top-left-radius: 2px;\n  cursor: pointer;\n}\n.table-wrapper .table-header.selected {\n  background: #4daaff;\n  border: 1px solid #008dff;\n}\n.table-wrapper .table-cols-header {\n  position: relative;\n  height: 40px;\n  padding-top: 24px;\n  display: none;\n  width: 100%;\n  cursor: default;\n}\n.table-wrapper .table-cols-header .table-cols-header-item {\n  position: relative;\n  height: 12px;\n  width: auto;\n  border: 1px solid #E8E8E8;\n  border-right-width: 0;\n  overflow: visible;\n  background: #fff;\n  cursor: pointer;\n}\n.table-wrapper .table-cols-header .table-cols-header-item:last-child {\n  border-top-right-radius: 2px;\n  border-right-width: 1px;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.active {\n  background: #f5f5f5;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.selected {\n  background: #fff;\n  border-color: #fff;\n  z-index: 1;\n  border-radius: 0;\n  height: 16px;\n  border-bottom: 0;\n  cursor: move;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.selected .table-col-header-btns {\n  display: flex;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.selected.multi-selected .table-col-header-btns {\n  display: none;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.selected .col-dragger {\n  display: block;\n  position: absolute;\n  left: -1px;\n  top: -1px;\n  right: -1px;\n  bottom: 3px;\n  background: #4daaff;\n  border: 1px solid #008dff;\n  border-radius: 0;\n  z-index: 1;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.selected .col-dragger .drag-info {\n  display: none;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.no-dragger .table-col-header-btns {\n  display: none;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.no-dragger .table-row-header-btns {\n  display: none;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.no-dragger .col-dragger .lake-icon {\n  display: none;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.dragging .table-col-header-btns {\n  display: none;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.dragging .col-dragger {\n  height: 46px;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.dragging .col-dragger .drag-info {\n  margin-top: -16px;\n  height: 34px;\n  line-height: 34px;\n  display: block;\n  background: #fff;\n}\n.table-wrapper .table-cols-header .table-cols-header-item .cols-trigger {\n  position: absolute;\n  right: -4px;\n  top: -1px;\n  width: 7px;\n  height: 16px;\n  z-index: 10;\n  cursor: col-resize;\n}\n.table-wrapper .table-cols-header .table-cols-header-item .cols-trigger:hover {\n  background: #0589f3;\n}\n.table-wrapper .table-cols-header .table-cols-header-item .cols-trigger.dragging {\n  width: 2px;\n  background: #0589f3;\n  right: -1px;\n}\n.table-wrapper .table-cols-header .table-cols-header-item .col-dragger {\n  text-align: center;\n  display: none;\n}\n.table-wrapper .table-cols-header .table-cols-header-item .col-dragger .lake-icon-drag {\n  transform: rotate(90deg);\n  font-size: 10px;\n  color: #fff;\n  position: relative;\n  top: -8px;\n}\n.table-wrapper .table-cols-header.dragging .table-cols-header-item .cols-trigger {\n  display: none;\n}\n.table-wrapper .table-cols-header.resize .table-cols-header-item {\n  cursor: col-resize;\n}\n.table-wrapper .table-cols-header .cols-addition-header {\n  position: absolute;\n  right: -31px;\n  width: 32px;\n  background: #fff;\n  text-align: center;\n  z-index: 1;\n  color: #aaa;\n  padding: 0;\n  border: 0;\n  cursor: pointer;\n}\n.table-wrapper .table-cols-header .cols-addition-header .multi-trigger {\n  width: 32px;\n  height: 16px;\n  background: #fff;\n  border: 1px solid #e8e8e8;\n  display: flex;\n}\n.table-wrapper .table-cols-header .cols-addition-header .cols-addition {\n  position: absolute;\n  top: 24px;\n  width: 32px;\n  height: 34px;\n  line-height: 30px;\n  font-size: 20px;\n  font-weight: 300;\n  background: #ffff;\n  border: 1px solid #e8e8e8;\n}\n.table-wrapper .table-cols-header .cols-addition-header .cols-addition:hover {\n  background: #f6f6f6;\n}\n.table-wrapper .table-rows-header {\n  position: absolute;\n  left: -16px;\n  top: 40px;\n  width: 12px;\n  z-index: 1;\n  visibility: hidden;\n}\n.table-wrapper .table-rows-header .table-rows-header-item {\n  position: relative;\n  height: 32px;\n  width: 12px;\n  border: 1px solid #e8e8e8;\n  border-bottom-width: 0;\n  background: #fff;\n  cursor: pointer;\n}\n.table-wrapper .table-rows-header .table-rows-header-item:last-child {\n  border-top-left-radius: 2px;\n  border-bottom-width: 1px;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.active {\n  background: #f5f5f5;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.selected {\n  width: 16px;\n  background: #fff;\n  border-color: #fff;\n  cursor: move;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.selected .row-dragger {\n  display: flex;\n  position: absolute;\n  align-items: center;\n  text-align: left;\n  white-space: nowrap;\n  content: \' \';\n  left: -1px;\n  top: -1px;\n  bottom: -1px;\n  right: 3px;\n  background: #4daaff;\n  border: 1px solid #008dff;\n  border-radius: 0;\n  z-index: 1;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.selected .row-dragger .drag-info {\n  display: none;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.selected .table-row-header-btns {\n  display: flex;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.selected.multi-selected .table-row-header-btns {\n  display: none;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.no-dragger .row-dragger .lake-icon {\n  display: none;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.dragging .table-row-header-btns {\n  display: none;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.dragging .row-dragger {\n  width: 150px;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.dragging .row-dragger .drag-info {\n  width: 137px;\n  display: flex;\n  padding: 10px;\n  background: #fff;\n}\n.table-wrapper .table-rows-header .table-rows-header-item .rows-trigger {\n  position: absolute;\n  bottom: -4px;\n  height: 7px;\n  width: 16px;\n  left: -1px;\n  z-index: 10;\n  cursor: row-resize;\n}\n.table-wrapper .table-rows-header .table-rows-header-item .rows-trigger:hover {\n  background: #0589f3;\n}\n.table-wrapper .table-rows-header .table-rows-header-item .rows-trigger.dragging {\n  height: 2px;\n  background: #0589f3;\n  bottom: -1px;\n}\n.table-wrapper .table-rows-header .table-rows-header-item .row-dragger {\n  display: none;\n}\n.table-wrapper .table-rows-header .table-rows-header-item .row-dragger .lake-icon-drag {\n  font-size: 10px;\n  color: #fff;\n  margin-left: -1px;\n}\n.table-wrapper .table-rows-header .table-rows-header-item .row-dragger .drag-info {\n  height: 100%;\n  display: flex;\n  align-items: center;\n}\n.table-wrapper .table-rows-header.dragging .table-rows-header-item .rows-trigger {\n  display: none;\n}\n.table-wrapper .table-rows-header.resize .table-rows-header-item {\n  cursor: row-resize;\n}\n.table-wrapper .table-rows-header .rows-addition-header {\n  position: relative;\n  height: 33px;\n  border: 1px solid #e8e8e8;\n}\n.table-wrapper .table-rows-header .rows-addition-header .multi-trigger {\n  height: 33px;\n  width: 100%;\n}\n.table-wrapper .table-viewport {\n  position: relative;\n  overflow: hidden;\n  overflow-y: hidden;\n  padding: 0 3px;\n  margin-left: -3px;\n  margin-right: -3px;\n}\n.table-wrapper .table-viewport:hover {\n  overflow-x: auto;\n}\n.table-wrapper .table-viewport .scrollbar-shadow-left {\n  top: 24px;\n  bottom: 34px;\n}\n.table-wrapper .table-viewport .scrollbar-shadow-right {\n  top: 24px;\n  bottom: 34px;\n}\n.table-wrapper .lake-table-inner {\n  position: relative;\n}\n.table-wrapper .table-active-td {\n  position: absolute;\n  width: 0;\n  height: 0;\n  z-index: 3;\n  display: none;\n}\n.table-wrapper .table-active-td .l {\n  position: absolute;\n  left: 0;\n  height: 100%;\n  width: 1px;\n  background: #0589f3;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .r {\n  position: absolute;\n  right: 0;\n  height: 100%;\n  width: 1px;\n  background: #0589f3;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .t {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 1px;\n  background: #0589f3;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .b {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 1px;\n  background: #0589f3;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .mask {\n  position: absolute;\n  display: none;\n  width: 100%;\n  height: 100%;\n  background: #0589f3;\n  opacity: 0.1;\n  cursor: default;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .mask.drag_n {\n  cursor: ns-resize;\n}\n.table-wrapper .table-active-td .mask.drag_s {\n  cursor: ns-resize;\n}\n.table-wrapper .table-active-td .mask.drag_w {\n  cursor: ew-resize;\n}\n.table-wrapper .table-active-td .mask.drag_e {\n  cursor: ew-resize;\n}\n.table-wrapper .table-active-td .mask.drag_nw {\n  cursor: nwse-resize;\n}\n.table-wrapper .table-active-td .mask.drag_se {\n  cursor: nwse-resize;\n}\n.table-wrapper .table-active-td .mask-row,\n.table-wrapper .table-active-td .mask-col {\n  position: absolute;\n  background: #f15a5a;\n  border: 1px solid #fff;\n  display: none;\n  opacity: 0.1;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .table-active-td-trigger {\n  position: absolute;\n  height: 8px;\n  width: 8px;\n  border: 1px solid #fff;\n  background: #0589f3;\n  border-radius: 11px;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .nw {\n  cursor: nwse-resize;\n  left: -4px;\n  top: -4px;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .se {\n  cursor: nwse-resize;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .n {\n  cursor: ns-resize;\n  display: none;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .s {\n  cursor: ns-resize;\n  display: none;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .w {\n  cursor: ew-resize;\n  display: none;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .e {\n  cursor: ew-resize;\n  display: none;\n  z-index: 1;\n}\n.table-wrapper .table-active-td.col .n,\n.table-wrapper .table-active-td.col .s,\n.table-wrapper .table-active-td.col .nw,\n.table-wrapper .table-active-td.col .se {\n  display: none;\n}\n.table-wrapper .table-active-td.col .w,\n.table-wrapper .table-active-td.col .e {\n  display: block;\n}\n.table-wrapper .table-active-td.col .mask {\n  display: block;\n}\n.table-wrapper .table-active-td.row .e,\n.table-wrapper .table-active-td.row .w,\n.table-wrapper .table-active-td.row .nw,\n.table-wrapper .table-active-td.row .se {\n  display: none;\n}\n.table-wrapper .table-active-td.row .n,\n.table-wrapper .table-active-td.row .s {\n  display: block;\n}\n.table-wrapper .table-active-td.row .mask {\n  display: block;\n}\n.table-wrapper .table-active-td.total .mask {\n  display: block;\n}\n.table-wrapper .table-active-td .sub-editor {\n  position: absolute;\n  background: #fff;\n  top: 1px;\n  left: 1px;\n  width: 100px;\n  display: none;\n  cursor: text;\n}\n.table-wrapper .table-active-td .sub-editor .sub-editor-content {\n  display: table-cell;\n  padding: 4px 8px;\n  white-space: normal;\n  word-wrap: break-word;\n}\n.table-wrapper .table-active-td .sub-editor .sub-editor-content pre {\n  padding-top: 5px;\n}\n.table-wrapper .table-active-td.editing .l,\n.table-wrapper .table-active-td.editing .r {\n  width: 2px;\n}\n.table-wrapper .table-active-td.editing .t,\n.table-wrapper .table-active-td.editing .b {\n  height: 2px;\n}\n.table-wrapper .table-active-td.editing .b {\n  margin-top: -1px;\n}\n.table-wrapper .table-active-td.editing .r {\n  margin-left: -1px;\n}\n.table-wrapper .table-active-td.preview-mask-row .mask-row {\n  display: block;\n}\n.table-wrapper .table-active-td.preview-mask-col .mask-col {\n  display: block;\n}\n.table-wrapper .table-placeholder {\n  position: absolute;\n  border: 1px solid #008dff;\n  background: #008dff;\n  display: none;\n}\n.table-wrapper .table-menubar {\n  position: fixed;\n  display: none;\n  padding: 4px 0;\n  border-radius: 4px;\n  border: 1px solid #e9e9e9;\n  box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.08);\n  background: #fff;\n  /* 代码块的 codemirror 默认给每行代码的 pre 设置了 z-index 2, 如果表格在代码块前面，造成右键菜单无法点击 */\n  z-index: 10;\n  min-width: 200px;\n}\n.table-wrapper .table-menubar .table-menubar-item {\n  padding: 6px 16px;\n  cursor: default;\n}\n.table-wrapper .table-menubar .table-menubar-item:hover {\n  background: #f0f0f0;\n}\n.table-wrapper .table-menubar .table-menubar-item.disabled {\n  color: #aaa;\n  display: none;\n}\n.table-wrapper .table-menubar .split {\n  height: 0;\n  border-top: 1px solid #e8e8e8;\n  margin: 2px 0;\n}\n.table-wrapper .table-menubar .split.disabled {\n  display: none;\n}\n.table-wrapper .rows-addition {\n  border: 0;\n  position: relative;\n  display: none;\n  line-height: 32px;\n  height: 32px;\n  color: #aaa;\n  background: #fff;\n  cursor: pointer;\n}\n.table-wrapper .rows-addition:hover {\n  background: #fff;\n}\n.table-wrapper .rows-addition .plus {\n  position: absolute;\n  text-align: left;\n  padding-left: 10px;\n  left: 0;\n  right: 0;\n  border: 1px solid #e8e8e8;\n  border-top: 0;\n  background: #fff;\n  height: 32px;\n  font-size: 20px;\n  font-weight: 300;\n  line-height: 30px;\n  border-radius: 0;\n}\n.table-wrapper .rows-addition .plus:hover {\n  background: #f0f0f0;\n}\n.table-wrapper .table-indicator {\n  position: absolute;\n  display: none;\n  background-color: #0589f3;\n  margin-left: 3px;\n}\n.table-wrapper .table-indicator.col-line {\n  width: 2px;\n  top: 0;\n  left: 0;\n  bottom: 8px;\n  display: block;\n}\n.table-wrapper .table-indicator.row-line {\n  height: 2px;\n  margin-top: 40px;\n  top: 0;\n  left: 0;\n  display: block;\n}\n.table-wrapper .table-col-header-btns {\n  position: absolute;\n  top: -24px;\n  right: 0;\n  height: 20px;\n  display: none;\n}\n.table-wrapper .table-col-header-btns .table-control-icon-btn {\n  border-right-width: 0;\n}\n.table-wrapper .table-col-header-btns .table-control-icon-btn:first-child {\n  border-radius: 2px 0 0 2px;\n}\n.table-wrapper .table-col-header-btns .table-control-icon-btn:last-child {\n  border-right-width: 1px;\n  border-radius: 0 2px 2px 0;\n}\n.table-wrapper .table-row-header-btns {\n  position: absolute;\n  left: -24px;\n  bottom: 0;\n  width: 20px;\n  display: none;\n  flex-direction: column;\n}\n.table-wrapper .table-row-header-btns .table-control-icon-btn {\n  border-bottom-width: 0;\n}\n.table-wrapper .table-row-header-btns .table-control-icon-btn:first-child {\n  border-radius: 2px 2px 0 0;\n}\n.table-wrapper .table-row-header-btns .table-control-icon-btn:last-child {\n  border-bottom-width: 1px;\n  border-radius: 0 0 2px 2px;\n}\n.table-wrapper .table-control-icon-btn {\n  width: 20px;\n  height: 20px;\n  font-size: 12px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #595959;\n  background-color: #fff;\n  border: 1px solid #D9D9D9;\n  position: relative;\n}\n.table-wrapper .table-control-icon-btn:after {\n  content: \' \';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n.table-wrapper .table-control-icon-btn:HOVER {\n  background-color: #f5f5f5;\n}\n.lake-engine div[data-lake-card="table"] > div[data-card-element="body"] > .lake-card-dnd {\n  left: -38px;\n  top: -4px;\n}\n.lake-engine div[data-lake-card="table"] > div[data-card-element="body"] > .lake-embed-toolbar {\n  z-index: 99;\n}\n.lake-toolbar-table-selector .lake-toolbar-table-selector-tr {\n  display: flex;\n  flex-wrap: nowrap;\n}\n.lake-toolbar-table-selector .lake-toolbar-table-selector-tr .lake-toolbar-table-selector-td {\n  width: 20px;\n  height: 16px;\n  border: 1px solid #d9d9d9;\n  margin-right: -1px;\n  margin-bottom: -1px;\n  cursor: pointer;\n}\n.lake-toolbar-table-selector .lake-toolbar-table-selector-tr .lake-toolbar-table-selector-td.actived {\n  background: #ddefff;\n}\n.lake-toolbar-table-selector .lake-toolbar-table-selector-info {\n  text-align: center;\n}\n.lake-card-block-max[data-lake-card="table"] .lake-table {\n  background: #fff;\n}\n.lake-card-block-max[data-lake-card="table"] div[data-card-element="center"] {\n  padding: 20px;\n  min-height: auto !important;\n}\n.lake-card-block-max[data-lake-card="table"] .lake-table-reader {\n  margin-top: 0;\n}\n.lake-card-block-max[data-lake-card="table"] .table-wrapper {\n  margin-left: 20px;\n  z-index: 130;\n}\n.lake-table-reader {\n  padding-right: 20px;\n  overflow: auto;\n  padding-bottom: 0px !important;\n}\n.lake-table-reader tr:first-child [data-lake-card="file"] .lake-embed-toolbar-block {\n  top: 24px;\n}\n.lake-table-reader + .lake-scrollbar.lake-scrollbar-x {\n  bottom: 22px;\n}\n.lake-table-reader .scrollbar-shadow-left {\n  bottom: 10px;\n}\n.lake-table-reader .scrollbar-shadow-right {\n  bottom: 10px;\n}\n.tmp-table {\n  position: absolute;\n  left: -9999px;\n}\n.lake-mobile-editor .table-wrapper .table-rows-header {\n  visibility: hidden;\n}\n.lake-mobile-editor .table-wrapper .table-header {\n  visibility: hidden;\n}\n.lake-mobile-editor [data-lake-card="table"] .lake-card-toolbar.lake-embed-toolbar-block {\n  top: -17px;\n}\n[data-lake-card="table"] > [data-card-element="body"] > [data-card-element="center"] {\n  z-index: 98;\n}\n[data-lake-card="table"] [data-card-element="center"] {\n  overflow: hidden;\n}\n[data-lake-card="table"] .lake-file {\n  display: inline-block;\n  white-space: normal;\n}\n[data-lake-card="table"] span[data-card-type="inline"] span[data-card-element="left"],\n[data-lake-card="table"] span[data-card-type="inline"] span[data-card-element="right"] {\n  display: inline;\n}\n.lake-engine [data-lake-card="table"] .lake-embed-toolbar {\n  top: -64px;\n}\n[data-lake-card="table"].lake-activated:not(.lake-card-block-max) [data-card-element="center"] {\n  position: relative;\n  overflow: initial;\n}\n[data-lake-card="table"].lake-activated:not(.lake-card-block-max) .table-wrapper {\n  position: absolute;\n  top: -40px;\n  width: 100%;\n  z-index: 130;\n}\n[data-lake-card="table"].lake-activated .table-cols-header {\n  display: flex;\n}\n[data-lake-card="table"].lake-activated .lake-table.lake-no-border {\n  border: 1px dashed #d9d9d9;\n}\n[data-lake-card="table"].lake-activated .lake-table.lake-no-border td {\n  border: 1px dashed #d9d9d9;\n}\n@keyframes rotateLoading {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n[data-lake-card="video"] [data-lake-card="table"] {\n  outline: 1px solid #ddd;\n}\n.lake-video-content {\n  position: relative;\n  height: 420px;\n  background: #f7f7f7;\n}\n.lake-video-content video {\n  width: 100%;\n  max-height: 450px;\n  outline: none;\n}\n@media screen and (max-width: 750px) {\n  .lake-video-content {\n    height: 240px;\n  }\n  video {\n    max-height: 200px !important;\n  }\n}\n.lake-video-uploading,\n.lake-video-uploaded,\n.lake-video-error {\n  border: 1px solid #e6e6e6;\n  background: #f6f6f6;\n}\n.lake-video-done {\n  position: relative;\n  height: auto;\n  border: none;\n  background: none;\n  line-height: 0;\n}\n.lake-video-content-active {\n  outline: 1px solid #d9d9d9;\n}\n.lake-video-center {\n  position: absolute;\n  top: 50%;\n  margin-top: -48px;\n  width: 100%;\n  height: 96px;\n}\n.lake-video-center .lake-video-icon,\n.lake-video-center .lake-video-name,\n.lake-video-center .lake-video-message,\n.lake-video-center .lake-video-progress,\n.lake-video-center .lake-video-converting {\n  text-align: center;\n}\n.lake-video-center .lake-video-icon {\n  font-size: 24px;\n  color: #BFBFBF;\n  margin-bottom: 12px;\n}\n.lake-video-center .lake-video-name {\n  color: #595959;\n  margin-bottom: 12px;\n}\n.lake-video-center .lake-video-message {\n  color: #595959;\n}\n.lake-video-center .lake-video-anticon {\n  display: inline-block;\n  font-style: normal;\n  vertical-align: -0.125em;\n  text-align: center;\n  text-transform: none;\n  line-height: 0;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  margin-right: 5px;\n}\n.lake-video-center .lake-video-anticon .lake-video-anticon-spin {\n  display: inline-block;\n  -webkit-animation: rotateLoading 1s infinite linear;\n  animation: rotateLoading 1s infinite linear;\n}\n.lake-video-center .lake-error-icon {\n  width: 16px;\n  height: 16px;\n  display: inline-block;\n  background: #F5222D;\n  text-align: center;\n  font-size: 12px;\n  color: #ffffff;\n  padding: 1px 0 0 0;\n  line-height: 16px;\n  border-radius: 100%;\n  vertical-align: middle;\n  margin: -2px 5px 0 0;\n}\n[data-card-type][data-lake-card="math"].lake-activated textarea::selection {\n  background: transparent !important;\n}\n[data-card-type][data-lake-card="math"] {\n  vertical-align: middle !important;\n}\n[data-card-type][data-lake-card="math"] [data-card-element="center"] {\n  vertical-align: middle !important;\n  min-height: 28px;\n}\n[data-card-type][data-lake-card="math"] .textarea-focus textarea::selection {\n  background: rgba(27, 162, 227, 0.2) !important;\n}\n.lake-engine .lake-math-content-tmp,\n.lake-engine-view .lake-math-content-tmp {\n  line-height: 32px;\n  padding: 0 6px;\n  border-radius: 3px 3px;\n  height: 100%;\n  color: rgba(0, 0, 0, 0.25);\n  display: inline-block;\n}\n.lake-engine span[data-lake-card="math"]:not(.lake-selected) .lake-math-content-tmp {\n  background: #f5f5f5;\n}\n.lake-engine-view span[data-lake-card="math"] .lake-math-content-tmp {\n  background: #f5f5f5;\n}\n.lake-engine span[data-lake-card="math"] .lake-math-container {\n  display: inline-block;\n}\n.lake-engine span[data-lake-card="math"] .lake-card-math-editor {\n  outline: none;\n  width: 420px;\n  border-radius: 3px 3px;\n  position: fixed;\n  border: 1px solid #e8e8e8;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);\n  z-index: 20;\n  text-indent: 0;\n}\n.lake-engine span[data-lake-card="math"] textarea {\n  width: 100%;\n  border: none;\n  min-width: 400px;\n  min-height: 88px;\n  padding: 6px 6px;\n  line-height: 24px;\n  color: #595959;\n  outline: none;\n  font-family: \'Lucida Console\', Consolas, Monaco, \'Andale Mono\', \'Ubuntu Mono\', monospace;\n  vertical-align: bottom;\n  font-size: 14px;\n  font-weight: 400;\n}\n.lake-engine span[data-lake-card="math"] .lake-math-editor-toolbar {\n  position: relative;\n  height: 40px;\n  background: #f9f9f9;\n  border-top: 1px solid #e8e8e8;\n  line-height: 24px;\n  padding: 8px 8px;\n  text-align: left;\n  text-indent: 0;\n}\n.lake-engine span[data-lake-card="math"] .lake-math-editor-toolbar .lake-icon-question {\n  vertical-align: middle;\n}\n.lake-engine span[data-lake-card="math"] .lake-math-editor-toolbar .lake-math-editor-toolbar-tips {\n  font-size: 12px;\n  color: #8C8C8C;\n}\n.lake-engine span[data-lake-card="math"] .lake-math-editor-toolbar .lake-math-editor-toolbar-tips .text {\n  color: #8C8C8C;\n  padding-left: 4px;\n}\n.lake-engine span[data-lake-card="math"] .lake-math-editor-toolbar .lake-math-editor-toolbar-tips .lake-embed-toolbar-btn {\n  width: 48px;\n  margin-left: 10px;\n  font-size: 14px;\n}\n.lake-engine div[data-lake-card="riddle"],\n.lake-engine-view div[data-lake-card="riddle"] {\n  background: transparent;\n}\n@keyframes loadingRiddle {\n  0% {\n    transform: scale(1);\n  }\n  20% {\n    transform: scale(1.1);\n  }\n  50% {\n    transform: scale(1);\n  }\n}\n.lake-riddle {\n  position: relative;\n  width: 100%;\n}\n.lake-riddle-content {\n  position: relative;\n  height: 360px;\n  border: 1px solid #e6e6e6;\n  background: #f6f6f6;\n}\n.lake-riddle-content-active {\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n}\n.lake-riddle-content-frame {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  transition: all 0.3s linear;\n}\n.lake-riddle-content-frame-loaded {\n  opacity: 1;\n  visibility: visible;\n  z-index: 2;\n  background: #fff;\n}\n.lake-riddle-tips {\n  position: relative;\n  background: #fff;\n  border: 1px solid #d9d9d9;\n  height: 50px;\n  border-radius: 2px 2px;\n  padding: 0;\n  padding-left: 18px;\n}\n.lake-riddle-input {\n  width: calc(100% - 150px);\n  border: 0;\n  height: 40px;\n  line-height: 40px;\n  margin: 4px 0;\n  font-size: 14px;\n  outline: none;\n}\n.lake-riddle-input::placeholder {\n  color: #8C8C8C;\n}\n.lake-riddle-input:focus {\n  outline: none;\n}\n.lake-riddle-button {\n  position: absolute;\n  top: 9px;\n  right: 12px;\n}\n.lake-riddle:hover .lake-plugin-toolbar-inline {\n  opacity: 1;\n  visibility: visible;\n}\n.lake-mention-list {\n  position: absolute;\n  top: 24px;\n  left: 0;\n  width: 280px;\n  max-height: 300px;\n  overflow-y: auto;\n  padding: 0;\n  margin: 0;\n  list-style-type: none;\n  min-width: 280px;\n  height: auto;\n  bottom: auto;\n  z-index: 1031;\n  font-size: 14px;\n  font-weight: normal;\n  background: #fff;\n  border-radius: 2px 2px;\n  border: 1px solid #d9d9d9;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  -webkit-user-select: none;\n  user-select: none;\n}\n.lake-mention-active {\n  display: block;\n}\n.lake-mention-item {\n  display: flex;\n  padding: 6px 8px;\n  cursor: pointer;\n}\n.lake-mention-item .match {\n  font-weight: bold;\n  color: #262626;\n}\n.lake-mention-item-avatar {\n  width: 36px;\n  height: 36px;\n  display: block;\n  padding: 3px 3px;\n}\n.lake-mention-item-avatar img {\n  width: 100%;\n  height: 100%;\n  border-radius: 28px;\n}\n.lake-mention-item-text {\n  display: block;\n  padding-left: 8px;\n}\n.lake-mention-item-text-item {\n  width: 200px;\n  display: block;\n  line-height: 18px;\n  word-break: break-all;\n}\n.lake-mention-item-name {\n  color: #595959;\n}\n.lake-mention-item-dep,\n.lake-mention-item-id {\n  color: #8C8C8C;\n}\n.lake-mention-item-selected {\n  background: #f4f4f4;\n}\n.lake-mention-at {\n  position: relative;\n  text-decoration: none;\n  font-size: 14px;\n}\na.lake-mention-at {\n  color: #096DD9;\n}\n.lake-mention-tips {\n  color: #BFBFBF;\n  padding: 0 10px;\n}\n.lake-dialog {\n  position: fixed;\n  top: 92px;\n  right: 32px;\n  z-index: 1034;\n  background: #fff;\n  border-radius: 6px;\n  padding: 16px;\n  padding-top: 0px;\n  box-shadow: 0px 2px 4px 0px rgba(225, 225, 225);\n}\n.lake-search input {\n  width: 325px;\n  height: 49;\n}\n.lake-search button {\n  margin-left: 8px;\n}\n.lake-search .lake-icon-close:hover {\n  cursor: pointer;\n}\n.lake-search p {\n  margin-bottom: 8px;\n}\n.lake-search .count {\n  color: #d9d9d9;\n}\n.lake-translate-sidebar .lake-sidebar-content {\n  overflow: auto;\n  height: calc(100vh - 164px);\n}\n.lake-translate-sidebar .lake-translate-panel {\n  margin-right: 20px;\n}\n.lake-translate-sidebar pre {\n  width: 100%;\n  height: 361px;\n  border: 1px solid #D9D9D9;\n  background: white;\n  border-radius: 4px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  padding: 8px;\n  margin-bottom: 8px;\n}\n.lake-translate-sidebar pre:hover {\n  cursor: text;\n}\n.lake-embed-outline ul {\n  list-style: square;\n}\n.lake-embed-outline li {\n  margin: 0;\n}\n.lake-embed-outline .lake-embed-outline-1 {\n  margin-left: 1em;\n}\n.lake-embed-outline .lake-embed-outline-2 {\n  margin-left: 2em;\n}\n.lake-embed-outline .lake-embed-outline-3 {\n  margin-left: 3em;\n}\n.lake-embed-outline .lake-embed-outline-4 {\n  margin-left: 4em;\n}\n@keyframes loading {\n  0% {\n    transform: rotate(0);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.lake-embed-form {\n  position: relative;\n  border-radius: 2px;\n}\n.lake-embed-icon {\n  margin-left: 12px;\n}\n.lake-embed-editor {\n  margin-left: 10px;\n}\n.lake-embed-input {\n  width: calc(100% - 200px);\n  border: 0;\n  height: 40px;\n  line-height: 40px;\n  margin: 4px 0;\n  font-size: 14px;\n  outline: none;\n}\n.lake-embed-input::placeholder {\n  color: rgba(0, 0, 0, 0.25);\n}\n.lake-embed .lake-embed-example-button,\n.lake-embed .lake-embed-help-button {\n  border: 0;\n  padding: 0;\n  background: none;\n  cursor: pointer;\n  outline: none;\n  color: #595959;\n  margin-right: 16px;\n  letter-spacing: unset;\n}\n.lake-embed .lake-embed-help-button:hover {\n  color: #595959;\n}\n.lake-embed-button {\n  position: absolute;\n  top: 9px;\n  right: 12px;\n}\n.lake-embed .card-resize-button-ud {\n  position: absolute;\n  bottom: -3px;\n  right: 0px;\n  left: 0px;\n  margin: 0 auto;\n  z-index: 12;\n}\n.lake-embed .card-resize-button-ud:hover {\n  cursor: row-resize;\n}\n.lake-embed .lake-embed-mask {\n  opacity: 0;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: 100%;\n  z-index: 3;\n  display: block;\n  transition: all 0.3s cubic-bezier(0.3, 1.2, 0.2, 1);\n}\n.lake-embed .lake-embed-mask:hover {\n  cursor: pointer;\n}\n.lake-embed-content {\n  background: #f6f6f6;\n  line-height: 0px;\n}\n.lake-embed-content-bg {\n  width: 80px;\n  height: 80px;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-top: -40px;\n  margin-left: -40px;\n  text-align: center;\n  line-height: 80px;\n  color: #666;\n  font-size: 36px;\n  z-index: 1;\n  visibility: visible;\n  opacity: 1;\n  transition: all 0.3s linear;\n  animation: loading 0.8s linear infinite;\n}\n.lake-embed-content-active {\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n}\n.lake-embed-content-frame {\n  position: relative;\n  width: 100%;\n  top: 0;\n  left: 0;\n  background: transparent;\n  opacity: 0;\n  visibility: hidden;\n}\n.lake-embed-content-frame-loaded {\n  opacity: 1;\n  visibility: visible;\n  z-index: 2;\n  background: #fff;\n}\n.lake-embed-upload {\n  border-radius: 2px;\n  background: #FAFAFA;\n  padding-top: 8px;\n}\n.lake-embed-upload .lake-embed-upload-file-name,\n.lake-embed-upload .lake-embed-upload-collapse-name {\n  text-overflow: ellipsis;\n  overflow: hidden;\n  display: inline-block;\n  white-space: nowrap;\n  max-width: 500px;\n}\n.lake-embed-upload a {\n  color: rgba(0, 0, 0, 0.65);\n}\n.lake-embed-upload a {\n  color: rgba(0, 0, 0, 0.65);\n}\n.lake-embed-upload .lake-embed-upload-body {\n  line-height: 0px;\n  position: relative;\n  user-select: none;\n}\n.lake-embed-upload .lake-embed-upload-body iframe {\n  padding: 0;\n  margin: 0;\n  width: 100%;\n  position: relative;\n  border-top: 1px solid #d9d9d9;\n  z-index: 2;\n}\n.lake-embed-upload .lake-embed-upload-header {\n  color: rgba(0, 0, 0, 0.65);\n  height: 18px;\n  margin-bottom: 8px;\n  line-height: 16px;\n  font-size: 12px;\n  padding: 0px 12px;\n}\n.lake-embed-upload .lake-embed-upload-header span {\n  vertical-align: middle;\n}\n.lake-embed-upload .lake-svg-icon-preview {\n  width: 16px;\n  height: 10px;\n  background-size: 16px 10px;\n  float: right;\n  margin-top: 4px;\n  color: rgba(0, 0, 0, 0.45);\n}\n.lake-embed-upload .lake-svg-icon-preview:hover {\n  color: rgba(0, 0, 0, 0.45);\n}\n.lake-embed-upload .lake-embed-upload-icon {\n  display: inline-block;\n  border: none;\n}\n.lake-embed-upload .lake-embed-upload-file-icon {\n  float: left;\n  margin-top: 2px;\n  margin-right: 6px;\n  width: 12.6px;\n  height: 13.5px;\n  background-size: 12.6px 13.5px;\n}\n.lake-embed-upload-collapse {\n  height: 48px;\n  border-radius: 2px;\n  padding: 0px;\n  background: white;\n}\n.lake-embed-upload-collapse .lake-embed-upload-collapse-body {\n  line-height: 22px;\n  margin-top: 12px;\n  float: left;\n}\n.lake-embed-upload-collapse .lake-embed-upload-collapse-body .lake-embed-upload-collapse-name {\n  color: #4E4C4C;\n}\n.lake-embed-upload-collapse .lake-embed-upload-collapse-body .lake-embed-upload-collapse-file-size {\n  margin-left: 8px;\n  color: rgba(0, 0, 0, 0.25);\n}\n.lake-embed-upload-collapse .lake-embed-upload-file-icon {\n  margin: 13px 12px;\n  width: 20px;\n  height: 20px;\n  float: left;\n  background-size: 20px 20px;\n}\n.lake-embed-upload-collapse .lake-svg-icon-preview {\n  float: right;\n  margin: 19px 12px;\n}\n.lake-third-party-card-error {\n  display: flex;\n  height: 50px;\n  align-items: center;\n  justify-content: center;\n}\n[data-lake-card="thirdparty"] [data-card-element="center"],\n[data-lake-card="yuque"] [data-card-element="center"],\n[data-lake-card="youku"] [data-card-element="center"] {\n  border-radius: 2px;\n}\n.lake-third-party-xiami-error {\n  background: #f6f6f6;\n  border: 1px solid #d8d8d8;\n  border-radius: 4px;\n  font-size: 14px;\n  color: #bfbfbf;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 88px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.lake-third-party-xiami-error > .lake-svg-icon {\n  width: 28px;\n  height: 28px;\n  margin-right: 16px;\n}\n[data-card-type][data-lake-card="label"].lake-activated input::selection {\n  background: transparent !important;\n}\n[data-card-type][data-lake-card="label"] {\n  display: initial !important;\n}\n[data-card-type][data-lake-card="label"] .input-focus input::selection {\n  background: rgba(27, 162, 227, 0.2) !important;\n}\n.lake-engine span[data-lake-card="label"] .lake-card-label-editor,\n.lake-engine-view span[data-lake-card="label"] .lake-card-label-editor {\n  outline: none;\n  position: fixed;\n  top: 36px;\n  left: -8px;\n  z-index: 20;\n  background: white;\n  border: 1px solid rgba(226, 226, 226, 0.84);\n  width: 162px;\n  padding: 8px;\n  border-radius: 3px;\n  box-shadow: 0px 2px 4px rgba(225, 225, 225, 0.5);\n}\n.lake-engine span[data-lake-card="label"] .lake-card-label-editor .lake-colorboard,\n.lake-engine-view span[data-lake-card="label"] .lake-card-label-editor .lake-colorboard {\n  margin-top: 8px;\n}\n.lake-engine span[data-lake-card="label"] .lake-card-label-editor .lake-colorboard-group,\n.lake-engine-view span[data-lake-card="label"] .lake-card-label-editor .lake-colorboard-group {\n  margin-bottom: 4px;\n  padding: 0;\n}\n.lake-engine span[data-lake-card="label"] .lake-card-label-container,\n.lake-engine-view span[data-lake-card="label"] .lake-card-label-container {\n  font-weight: 400;\n  font-size: 12px;\n  overflow: hidden;\n  max-width: 200px;\n  display: inline-block;\n  white-space: nowrap;\n  margin-bottom: -4px;\n  border-radius: 4px;\n  border: 2px solid rgba(0, 0, 0, 0);\n  padding: 0px 3px;\n  text-overflow: ellipsis;\n  line-height: 14px;\n}\n.lake-engine span[data-lake-card="label"] .lake-card-label-container.lake-label-selected,\n.lake-engine-view span[data-lake-card="label"] .lake-card-label-container.lake-label-selected {\n  border: 2px solid rgba(24, 144, 255);\n}\n.lake-lockedtext {\n  border: 1px solid #d9d9d9;\n  border-radius: 2px;\n  position: relative;\n}\n.lake-lockedtext .lake-lockedtext-header {\n  height: 40px;\n  position: relative;\n  background: #f9f9f9;\n  line-height: 40px;\n  border-bottom: 1px solid #d9d9d9;\n}\n.lake-lockedtext .lake-lockedtext-header h5 {\n  font-size: 14px;\n  padding: 0 10px;\n  margin: 0;\n  line-height: 40px;\n}\n.lake-lockedtext .lake-lockedtext-header h5 .title-desc {\n  font-weight: 400;\n  color: #595959;\n  margin-left: 20px;\n}\n.lake-lockedtext .lake-lockedtext-header .lockstatus {\n  position: absolute;\n  color: #BFBFBF;\n  font-size: 12px;\n  right: 120px;\n  top: 0;\n}\n.lake-lockedtext .lake-lockedtext-header .locktrigger {\n  position: absolute;\n  cursor: pointer;\n  color: #595959;\n  right: 10px;\n  top: 8px;\n  border: 1px solid #d9d9d9;\n  line-height: 1.2;\n  padding: 3px 6px;\n  border-radius: 3px;\n}\n.lake-lockedtext .lake-lockedtext-content .lockedtext {\n  border: 0;\n  width: 100%;\n  height: 200px;\n  outline: none;\n  resize: none;\n  padding: 8px;\n}\n.lake-lockedtext .lock-panel {\n  position: absolute;\n  padding: 20px;\n  padding-top: 50px;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: #fafafa;\n}\n.lake-lockedtext .lock-panel .lock-title {\n  color: #595959;\n}\n.lake-lockedtext .lock-panel .lock-icon {\n  width: 180px;\n  height: 150px;\n  background: transparent url(https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*VhgARpqXhsYAAAAAAAAAAABjARQnAQ) no-repeat;\n  background-size: contain;\n  position: absolute;\n  left: 100px;\n  top: 60px;\n}\n.lake-lockedtext .lock-panel p {\n  margin: 8px 0;\n  margin-left: 50%;\n  width: 40%;\n}\n.lake-lockedtext .lock-panel .ant-btn {\n  margin-right: 8px;\n}\n.lake-lockedtext .unlock-panel {\n  position: absolute;\n  padding: 20px;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: #fafafa;\n}\n.lake-lockedtext .unlock-panel p {\n  margin: 5px auto;\n  width: 50%;\n}\n.lake-lockedtext .unlock-panel .error-info,\n.lake-lockedtext .unlock-panel .lock-info {\n  display: none;\n  color: #f5222d;\n  text-align: center;\n}\n.lake-lockedtext .unlock-panel .lock-icon {\n  width: 180px;\n  height: 110px;\n  background: transparent url(https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*VhgARpqXhsYAAAAAAAAAAABjARQnAQ) no-repeat;\n  background-size: contain;\n  margin: 20px auto;\n}\n.lake-lockedtext .unlock-panel .ant-input-group-addon {\n  cursor: pointer;\n}\n.lake-lockedtext .unlock-panel .ant-input-group-addon .anticon {\n  margin-right: 8px;\n}\n.lake-lockedtext .unlock-container.reading .unlock-panel {\n  padding: 0;\n}\n.lake-lockedtext .unlock-container.reading .unlock-panel .lock-icon {\n  height: 100px;\n}\n.lake-lockedtext .unlock-container.error .ant-input,\n.lake-lockedtext .unlock-container.error .ant-input-group-addon {\n  border-color: #f00;\n}\n.lake-lockedtext .unlock-container.error .ant-input-group {\n  border-radius: 3px;\n  box-shadow: 0 0 0 3px #fdd;\n}\n.lake-lockedtext .unlock-container.error .unlock-panel .error-info {\n  display: block;\n}\n.lake-lockedtext .unlock-container.locked .unlock-panel .lock-info {\n  display: block;\n}\n.lake-lockedtext .unlock-container.locked .unlock-panel .error-info {\n  display: none;\n}\n.lake-engine div[data-lake-card="youku"],\n.lake-engine-view div[data-lake-card="youku"] {\n  background: transparent;\n}\n.lake-engine div[data-lake-card="youku"] [data-card-element="center"],\n.lake-engine-view div[data-lake-card="youku"] [data-card-element="center"] {\n  border: 1px solid rgba(0, 0, 0, 0);\n}\n.lake-engine div[data-lake-card="youku"] .youku-error,\n.lake-engine-view div[data-lake-card="youku"] .youku-error {\n  text-align: center;\n  padding: 70px 20px;\n  background: rgba(0, 0, 0, 0.45);\n  font-weight: 400;\n  color: #ddd;\n  line-height: 3;\n}\n.lake-engine div[data-lake-card="youku"] .youku-error .lake-icon-warning,\n.lake-engine-view div[data-lake-card="youku"] .youku-error .lake-icon-warning {\n  font-size: 30px;\n}\n[data-lake-card="premium"].lake-activated .lake-premium-view {\n  background-color: #FAFAFA;\n}\n[data-lake-card="premium"] .lake-card-dnd {\n  margin-top: 8px;\n}\n.lake-engine .lake-premium-view:hover {\n  background-color: #FAFAFA;\n}\n.lake-premium-view {\n  position: relative;\n  z-index: 1;\n  height: 40px;\n}\n.lake-premium-view-tip {\n  display: flex;\n  flex-direction: row;\n  height: 100%;\n  align-items: center;\n}\n.lake-premium-view-tip:before,\n.lake-premium-view-tip:after {\n  content: \' \';\n  height: 1px;\n  flex: auto;\n}\n.lake-premium-view-tip-content {\n  padding: 0 10px;\n}\n.lake-premium-view-tip-content .lake-icon {\n  margin-right: 9px;\n}\n.lake-premium-view .lake-premium-shadow-mask {\n  display: none;\n}\n.lake-premium-view .lake-premium-view-tip {\n  color: #F5BC57;\n  font-size: 12px;\n}\n.lake-premium-view .lake-premium-view-tip:before,\n.lake-premium-view .lake-premium-view-tip:after {\n  background: #F5BC57;\n}\n.lake-premium-view.expired .lake-premium-view-tip {\n  color: rgba(0, 0, 0, 0.25);\n}\n.lake-premium-view.expired .lake-premium-view-tip:before,\n.lake-premium-view.expired .lake-premium-view-tip:after {\n  background: rgba(0, 0, 0, 0.25);\n}\n.lake-premium-view.expired .lake-premium-view-tip.paid {\n  color: #F5BC57;\n}\n.lake-premium-view.expired .lake-premium-view-tip.paid:before,\n.lake-premium-view.expired .lake-premium-view-tip.paid:after {\n  background: #F5BC57;\n}\n.lake-mobile-editor .lake-premium-view-tip-content {\n  max-width: 190px;\n  display: flex;\n  align-items: center;\n}\n/* --- 阅读视图 --- */\n.lake-engine-view.expired .lake-premium-shadow-mask {\n  display: none;\n}\n.lake-engine-view .lake-premium-shadow-mask {\n  display: block;\n  position: absolute;\n  top: -60px;\n  width: 100%;\n  height: 60px;\n  background: linear-gradient(0deg, #fff, rgba(255, 255, 255, 0.8) 80%, rgba(255, 255, 255, 0));\n}\n/* ---- sidebar ---- */\n.lake-premium-sidebar .lake-sidebar-content {\n  overflow: auto;\n  height: calc(100vh - 134px);\n}\n.lake-premium-sidebar .lake-sidebar-input-group-item {\n  line-height: 0;\n  margin-bottom: 0;\n}\n.lake-premium-sidebar .ant-form-explain {\n  padding: 5px 0;\n}\n.lake-premium-sidebar .lake-sidebar-premium {\n  padding-right: 10px;\n}\n.lake-premium-sidebar .lake-sidebar-premium-input {\n  width: 97px;\n  height: 32px;\n}\n.lake-premium-sidebar .lake-sidebar-premium-textarea {\n  width: 216px;\n  line-height: 22px;\n  resize: none;\n  margin: 0;\n}\n.lake-editor-traditional .lake-toc .lake-toc-item {\n  font-size: 12px;\n}\n.lake-editor-classic .lake-toc .lake-toc-item {\n  font-size: 14px;\n}\n.lake-doc-recommend-panel {\n  position: absolute;\n  top: 100%;\n  left: -1px;\n  z-index: 9999;\n  margin-top: 6px;\n  width: 310px;\n  height: 330px;\n  border-radius: 4px;\n  border: 1px solid #E9E9E9;\n  box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.08);\n  background-color: #fff;\n}\n.lake-doc-recommend-panel.focused .lake-doc-recommend-panel-item:HOVER {\n  background-color: #fff;\n}\n.lake-doc-recommend-panel-header {\n  height: 32px;\n  padding: 0 16px;\n  color: #8C8C8C;\n  font-size: 12px;\n  line-height: 32px;\n}\n.lake-doc-recommend-panel-body {\n  height: 262px;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.lake-doc-recommend-panel-loading,\n.lake-doc-recommend-panel-error {\n  height: 100%;\n  color: #8C8C8C;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.lake-doc-recommend-panel-item {\n  padding: 12px 16px;\n  height: 58px;\n  cursor: pointer;\n  display: flex;\n}\n.lake-doc-recommend-panel-item:HOVER {\n  background-color: #F5F5F5;\n}\n.lake-doc-recommend-panel-item.selected {\n  background-color: #F5F5F5 !important;\n}\n.lake-doc-recommend-panel-item .lake-svg-icon {\n  margin-right: 12px;\n}\n.lake-doc-recommend-panel-item-content {\n  width: 234px;\n}\n.lake-doc-recommend-panel-item-content dt {\n  color: #262626;\n  font-size: 14px;\n  font-weight: normal;\n  line-height: 14px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.lake-doc-recommend-panel-item-content dd {\n  color: #8C8C8C;\n  font-size: 12px;\n  line-height: 14px;\n  margin-top: 6px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.lake-doc-recommend-panel-footer {\n  font-size: 12px;\n  height: 36px;\n  line-height: 34px;\n  border-top: 1px solid #e8e8e8;\n  color: #8C8C8C;\n  padding: 0 16px;\n}\n.lake-doc-search-panel {\n  position: absolute;\n  top: 100%;\n  left: -1px;\n  z-index: 9999;\n  margin-top: 6px;\n  width: 310px;\n  height: 330px;\n  border-radius: 4px;\n  border: 1px solid #E9E9E9;\n  box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.08);\n  background-color: #fff;\n}\n.lake-doc-search-panel.focused .lake-doc-search-panel-item {\n  background-color: #fff;\n}\n.lake-doc-search-panel-body {\n  height: 294px;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.lake-doc-search-panel-item {\n  padding: 12px 16px;\n  height: 58px;\n  cursor: pointer;\n  display: flex;\n}\n.lake-doc-search-panel-item:HOVER {\n  background-color: #F5F5F5;\n}\n.lake-doc-search-panel-item.selected {\n  background-color: #F5F5F5 !important;\n}\n.lake-doc-search-panel-item em {\n  color: #25b864;\n  font-style: normal;\n}\n.lake-doc-search-panel-item .lake-svg-icon {\n  margin-right: 12px;\n}\n.lake-doc-search-panel-item-content {\n  width: 234px;\n}\n.lake-doc-search-panel-item-content dt {\n  color: #262626;\n  font-size: 14px;\n  font-weight: normal;\n  line-height: 14px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.lake-doc-search-panel-item-content dd {\n  color: #8C8C8C;\n  font-size: 12px;\n  line-height: 14px;\n  margin-top: 6px;\n}\n.lake-doc-search-panel-footer {\n  font-size: 12px;\n  height: 36px;\n  line-height: 34px;\n  border-top: 1px solid #e8e8e8;\n  color: #8C8C8C;\n  padding: 0 16px;\n}\n.lake-doc-search-panel-tip {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n.lake-doc-search-panel-tip .lake-svg-icon-search {\n  width: 28px;\n  height: 28px;\n}\n.lake-doc-search-panel-tip-content {\n  text-align: center;\n  font-size: 14px;\n  line-height: 22px;\n  color: #595959;\n  margin-top: 10px;\n}\n.lake-doc-search-panel-waiting,\n.lake-doc-search-panel-error {\n  height: 100%;\n  color: #8C8C8C;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.lake-doc-card-view {\n  width: 100%;\n  cursor: pointer;\n  user-select: none;\n  position: relative;\n}\n.lake-doc-card-view .lake-group-avatar {\n  border-radius: 100%;\n  transform: none;\n}\n.lake-doc-card-view-loading,\n.lake-doc-card-view-error {\n  width: 100%;\n  height: 98px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: 14px;\n  color: #A6A6A6;\n  background-color: #f5f5f5;\n}\n.lake-doc-card-view-error-tip {\n  max-width: 100%;\n  padding: 0 20px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  user-select: text;\n}\n.lake-doc-card-view-box {\n  width: 100%;\n  height: 100%;\n  padding: 20px;\n  background-color: #fff;\n  cursor: pointer;\n  display: flex;\n}\n.lake-doc-card-view-box .lake-svg-icon {\n  width: 24px;\n  height: 24px;\n}\n.lake-doc-card-view-content {\n  width: calc(100% - 50px);\n  margin-left: 12px;\n}\n.lake-doc-card-view-content.has-cover {\n  padding-right: 186px;\n}\n.lake-doc-card-view-title {\n  font-size: 14px;\n  line-height: 14px;\n  color: #262626;\n  font-weight: bold;\n}\n.lake-doc-card-view-desc {\n  font-size: 12px;\n  line-height: 12px;\n  color: #8C8C8C;\n  margin-top: 10px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.lake-doc-card-view-belong {\n  font-size: 12px;\n  line-height: 12px;\n  color: #595959;\n  margin-top: 10px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.lake-doc-unsupported-view {\n  width: 100%;\n  cursor: pointer;\n  user-select: none;\n  line-height: 98px;\n  text-align: center;\n  font-size: 14px;\n  color: #A6A6A6;\n  background-color: #f5f5f5;\n}\n[data-lake-card="yuque"] [data-card-element="body"] > .lake-embed-toolbar {\n  z-index: 9999;\n}\n[data-lake-card="yuqueinline"] ::selection {\n  background-color: transparent!important;\n}\n.le-card-yuque-inline {\n  line-height: 20px;\n}\n.le-card-yuque-inline .lake-svg-icon {\n  width: 20px;\n  height: 20px;\n  display: inline-block !important;\n  transform: translateY(2px);\n  margin-right: 10px;\n}\n.le-card-yuque-inline .lake-group-avatar {\n  margin-right: 10px;\n}\n.le-card-yuque-inline-content {\n  color: #096DD9;\n}\n.doc-article-content .le-card-yuque-inline .lake-svg-icon-yuque-doc {\n  width: 36px;\n  height: 36px;\n}\n.lake-svg-icon-yuque-doc,\n.lake-svg-icon-yuque-book,\n.lake-svg-icon-yuque-sheet,\n.lake-svg-icon-yuque-table,\n.lake-svg-icon-yuque-repo-thread,\n.lake-svg-icon-yuque-mind,\n.lake-svg-icon-yuque-show {\n  background-size: contain;\n}\n.lake-group-avatar {\n  width: 20px;\n  height: 20px;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  transform: translateY(5px);\n  color: #fff;\n  border-radius: 100%;\n  overflow: hidden;\n}\n.lake-group-avatar.lake-group-text-avatar {\n  transform: translateY(-2px);\n}\n.lake-group-avatar img {\n  width: 100%;\n  height: 100%;\n}\n.lake-group-avatar span {\n  font-size: 10px;\n}\n.lake-bookmark-link {\n  width: 100%;\n  height: 98px;\n  cursor: pointer;\n  border: 1px solid #D8D8D8;\n  border-radius: 2px;\n  user-select: none;\n  position: relative;\n  overflow: hidden;\n}\n.lake-bookmark-link-loading,\n.lake-bookmark-link-error {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  font-size: 14px;\n  color: #A6A6A6;\n  background-color: #f5f5f5;\n}\n.lake-bookmark-link-error-tip {\n  max-width: 100%;\n  padding: 0 20px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  user-select: text;\n}\n.lake-bookmark-link-content {\n  width: 100%;\n  height: 100%;\n  padding: 20px;\n  background-color: #fff;\n  cursor: pointer;\n}\n.lake-bookmark-link-content.has-cover {\n  padding-right: 186px;\n}\n.lake-bookmark-link-content .lake-svg-icon {\n  width: 24px;\n  height: 24px;\n}\n.lake-bookmark-link-cover {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 166px;\n  height: 96px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: right;\n}\n.lake-bookmark-link-title {\n  font-size: 14px;\n  line-height: 14px;\n  color: #262626;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.lake-bookmark-link-desc {\n  font-size: 12px;\n  line-height: 12px;\n  color: #8C8C8C;\n  margin-top: 10px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.lake-bookmark-link-belong {\n  font-size: 12px;\n  line-height: 12px;\n  color: #595959;\n  margin-top: 10px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: flex;\n  align-items: center;\n}\n.lake-bookmark-link-belong img.favicon {\n  width: 12px;\n  height: 12px;\n  margin-right: 5px;\n}\n[data-lake-card="cardselect"] .lake-cardselect-placeholder {\n  width: 4em!important;\n}\n.lake-cardselect-list .lake-button-set-list {\n  top: 100%;\n}\n.lake-cardselect-list .lake-button-set-list.lake-button-set-list-to-top {\n  top: 100%;\n  bottom: auto;\n}\n.lake-cardselect-list-mask {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 1;\n}\n.lake-diagram-wrapper {\n  background-color: white;\n}\n.lake-diagram-wrapper.lake-diagram-hide-scroll {\n  overflow: hidden;\n}\n[data-lake-card="mindmap"] [data-card-element="center"] {\n  border: 1px solid rgba(0, 0, 0, 0);\n}\n.lake-editor-card-diagram-properties-container .lake-diagram-panel-properties {\n  background-color: rgba(0, 0, 0, 0);\n}\n.lake-editor-card-diagram-properties-container .text-format-text-align.ant-radio-group .ant-radio-button-wrapper {\n  padding: 0 17.2px;\n}\n.lake-diagram-sidebar .lake-diagram-panel-properties {\n  border-left: none;\n  padding: 0;\n}\n.lake-diagram-sidebar .lake-diagram-panel-head {\n  display: none;\n}\n.lake-diagram-sidebar .lake-sidebar-content {\n  overflow: auto;\n  height: calc(100vh - 164px);\n}\n.lake-toolbar-content .lake-diagram-toolbar-dropdown button {\n  height: 32px;\n  line-height: 34px;\n  display: inline-block;\n  border-radius: 3px 3px;\n  vertical-align: inherit;\n}\n');var ss=function(e){oe()(n,Lc.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e,r,o,i){var c;return l()(this,n),c=t.call(this),g()(de()(c),"scrollX",(function(e){if(c.slideX.dragging){var t=e.clientX-c.slideX.startX,n=c.slideX.startScrollLeft+t;n=Math.max(0,Math.min(n,c.oWidth-c.xWidth)),c.slideX.css("left",n+"px");var r=n/(c.oWidth-c.xWidth);r=Math.min(1,r);var a=(c.sWidth-c.oWidth)*r;c.container[0].scrollLeft=a}})),g()(de()(c),"scrollY",(function(e){if(c.slideY.dragging){var t=e.clientY-c.slideY.startY,n=c.slideY.startScrollTop+t;n=Math.max(0,Math.min(n,c.oHeight-c.yHeight)),c.slideY.css("top",n+"px");var r=n/(c.oHeight-c.yHeight);r=Math.min(1,r);var a=(c.sHeight-c.oHeight)*r;c.container[0].scrollTop=a}})),g()(de()(c),"scrollXEnd",(function(){c.slideX.dragging=!1,document.body.removeEventListener("mousemove",c.scrollX),document.body.removeEventListener("mouseup",c.scrollXEnd),c.container.removeClass("scrolling")})),g()(de()(c),"scrollYEnd",(function(){c.slideY.dragging=!1,document.body.removeEventListener("mousemove",c.scrollY),document.body.removeEventListener("mouseup",c.scrollYEnd),c.container.removeClass("scrolling")})),g()(de()(c),"bindXScrollEvent",(function(){c.option.x&&c.slideX.on("mousedown",c._handleXScroll,!1)})),g()(de()(c),"unbindXScrollEvent",(function(){c.slideX&&c.slideX.off("mousedown",c._handleXScroll,!1)})),g()(de()(c),"_handleXScroll",(function(e){c.container.addClass("scrolling"),c.slideX.dragging=!0,c.slideX.startX=e.clientX,c.slideX.startScrollLeft=parseInt(c.slideX.css("left")),document.body.addEventListener("mousemove",c.scrollX),document.body.addEventListener("mouseup",c.scrollXEnd)})),g()(de()(c),"bindYScrollEvent",(function(){c.option.y&&c.slideY&&c.slideY.on("mousedown",c._handleYScroll,!1)})),g()(de()(c),"unbindYScrollEvent",(function(){c.slideY&&c.slideY.off("mousedown",c._handleYScroll,!1)})),g()(de()(c),"_handleYScroll",(function(e){c.container.addClass("scrolling"),c.slideY.dragging=!0,c.slideY.startY=e.clientY,c.slideY.startScrollTop=parseInt(c.slideY.css("top")),document.body.addEventListener("mousemove",c.scrollY),document.body.addEventListener("mouseup",c.scrollYEnd)})),g()(de()(c),"reRenderShadow",(function(e){c.option.needShadow&&(c.shadowLeft.css("left",e+"px"),c.shadowRight.css("left",e+c.oWidth-4+"px"),c.shadowLeft.css("display","none"),c.shadowRight.css("display","none"),c.shadowTimer&&clearTimeout(c.shadowTimer),c.shadowTimer=setTimeout((function(){0!==e&&c.shadowLeft.css("display","block"),e!==c.maxScrollLeft&&c.shadowRight.css("display","block")}),100))})),g()(de()(c),"reRenderX",(function(e){if(c.option.x){c.scrollBarX.css("left",e+"px");var t=e/(c.sWidth-c.oWidth);t=Math.min(1,t);var n=(c.oWidth-c.xWidth)*t;c.slideX.css("left",n+"px"),c.reRenderShadow(e)}})),g()(de()(c),"reRenderY",(function(e){if(c.option.y){c.scrollBarY.css("top",e+"px");var t=e/(c.sHeight-c.oHeight);t=Math.min(1,t);var n=(c.oHeight-c.yHeight)*t;c.slideY.css("top",n+"px")}})),g()(de()(c),"bindEvents",(function(){c.container.on("scroll",c._handleScroll,{passive:!0}),kt(window).on("resize",c.refresh,!1),c.bindXScrollEvent(),c.bindYScrollEvent()})),g()(de()(c),"unbindEvents",(function(){c.container.off("scroll",c._handleScroll,{passive:!0}),kt(window).off("resize",c.refresh,!1),c.unbindXScrollEvent(),c.unbindYScrollEvent()})),g()(de()(c),"_handleScroll",(function(e){var t=e.target,n=t.scrollLeft,r=t.scrollTop;c.reRenderX(n),c.reRenderY(r)})),g()(de()(c),"refresh",(function(){if(!a.ua.firefox&&!a.ua.mobile){var e=c.container[0],t=e.offsetWidth,n=e.offsetHeight,r=e.scrollWidth,o=e.scrollHeight,i=e.scrollLeft,l=e.scrollTop;c.oWidth=t,c.oHeight=n,c.sWidth=r,c.sHeight=o,c.xWidth=Math.floor(t*t/r),c.yHeight=Math.floor(n*n/o),c.maxScrollLeft=r-t,c.option.x&&(c.slideX.css("width",c.xWidth+"px"),c.oWidth===c.sWidth?c.slideX.css("display","none"):c.slideX.css("display","block")),c.option.y&&(c.slideY.css("height",c.yHeight+"px"),c.oHeight===c.sHeight?c.slideY.css("display","none"):c.slideY.css("display","block")),c.reRenderX(i),c.reRenderY(l)}})),c.container=kt(e),c.option={x:r,y:o,needShadow:i},c.init(),c}return u()(n,[{key:"init",value:function(){var e=this;if(!a.ua.firefox&&!a.ua.mobile){var t=this.container.children(),n=!1;t.each((function(e){kt(e).hasClass("lake-scrollbar")&&(n=!0)})),n||(this.container.css("position","relative"),this.container.addClass("lake-scrollable"),this.option.x&&(this.scrollBarX=kt('<div class="lake-scrollbar lake-scrollbar-x "><div class="lake-scrollbar-trigger"></div></div>'),this.slideX=this.scrollBarX.find(".lake-scrollbar-trigger"),this.container.append(this.scrollBarX),this.container.addClass("scroll-x")),this.option.y&&(this.scrollBarY=kt('<div class="lake-scrollbar lake-scrollbar-y "><div class="lake-scrollbar-trigger"></div></div>'),this.slideY=this.scrollBarY.find(".lake-scrollbar-trigger"),this.container.append(this.scrollBarY),this.container.addClass("scroll-y")),this.option.needShadow&&(this.shadowLeft=kt('<div class="scrollbar-shadow-left"></div>'),this.shadowRight=kt('<div class="scrollbar-shadow-right"></div>'),this.container.append(this.shadowLeft),this.container.append(this.shadowRight)),requestAnimationFrame((function(){return e.refresh()})),this.bindEvents())}}},{key:"destroy",value:function(){this.unbindEvents(),this.scrollBarX&&this.scrollBarX.remove(),this.scrollBarY&&this.scrollBarY.remove(),this.shadowLeft&&this.shadowLeft.remove(),this.shadowRight&&this.shadowRight.remove()}}]),n}();var us=Xe.escape,ds=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"render",value:function(){var e=this.props,t=e.code,n=e.locale,r=e.onFocus,a=e.onChange,o=e.onBlur;return Fc.a.createElement("div",null,Fc.a.createElement("textarea",{onFocus:r,onBlur:o,defaultValue:t,onChange:function(e){var t=e.target;a(t.value)}}),Fc.a.createElement("div",{className:"lake-math-editor-toolbar"},Fc.a.createElement("div",{className:"lake-math-editor-toolbar-tips"},Fc.a.createElement("a",{className:"text",href:"https://www.yuque.com/yuque/gpvawt/math",target:"_blank"},Fc.a.createElement("span",{className:"lake-icon lake-icon-question"}),us(n.help))),Fc.a.createElement("div",{className:"lake-embed-toolbar lake-embed-toolbar-inline lake-embed-toolbar-active"},Fc.a.createElement(Wc.a,{title:n.enterTooltips},Fc.a.createElement("a",{className:"lake-embed-toolbar-btn","data-role":"save"},Fc.a.createElement("span",{className:"text"},us(n.save)))))))}}]),n}(Fc.a.Component);g()(ds,"propTypes",{code:Hc.a.string,locale:Hc.a.object,onFocus:Hc.a.func,onBlur:Hc.a.func,onChange:Hc.a.func});var fs={}.toString,ps=function(e,t){return fs.call(e)==="[object "+t+"]"};function hs(e){return null==e}function ms(e,t,n){try{return window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.currentStyle[t]}catch(e){return hs(n)?null:n}}function gs(e,t){var n=ms(e,"width",t);return n&&"auto"!==n||(n=e.offsetWidth),parseFloat(n)}function vs(e,t){var n=ms(e,"height",t);return n&&"auto"!==n||(n=e.offsetHeight),parseFloat(n)}function ys(e,t){var n=[];if(e){if(t&&!t(e))return n;for(var r=e.childNodes,a=0;a<r.length;a++){var o=r[a],i=o.nodeType;3===i?n.push(o):1!==i&&9!==i&&11!==i||(n=n.concat(ys(o,t)))}}return n}function bs(e,t){var n=window.appData;return n&&void 0!==n[e]?n[e]:t}var ks={locale:bs("locale","zh-cn"),isYuque:bs("isYuque",!1),isEnterprise:bs("isEnterprise",!1),isPrivateCloud:bs("isPrivateCloud",!1),supportOnlineViewer:bs("supportOnlineViewer",!1),isPublicCloud:bs("isPublicCloud",!1),imageServiceDomains:bs("imageServiceDomains",[]),isYqWebApp:function(){return!!window.yqWebApp},isWechatMiniApp:bs("isWechatMiniApp",!1),docId:K()(window.appData||{},"doc.id")},ws=[/^https?:\/\/\w+\.(nlark|alipay|alipayobjects|alibaba-inc|antfin-inc)\.com\//];function xs(){var e=window.location,t=e.origin,n=e.pathname,r=window.appData&&window.appData.docUrl,a=n.replace(/\/edit$/,"");if(!r)return t+a;var o=null;try{o=new URL(r)}catch(e){return t+a}return o.origin===t&&o.pathname!==n?t+a:r}function _s(e){return(e||"").replace(/<card\s+([^>]+)>/g,(function(e,t){var n=Xe.getAttrMap(e),r=n.name,a=n.value;if("mention"===r&&a){a=Xe.unescape(a);var o=Xe.decodeCardValue(a),i=o.login,c=o.name;if(i&&c)return i=Xe.escape(i),c=Xe.escape(c),'<card data-login="'.concat(i,'" data-name="').concat(c,'" ').concat(t,">")}return e}))}function Es(e,t,n){n=n||window.location.href;var r=e.replace(/^https?:\/\/[^\/]+/,"").replace(/^\/attachments\//,"");return"/"===r.charAt(0)&&(r=r.substr(1)),t=t||"",a.FileUtils.isOffice(r)||a.FileUtils.isMacOffice(r)||"pdf"===a.FileUtils.getFileExtname(e)?"".concat(t,"/office/").concat(r,"?from=").concat(encodeURIComponent(n)):"".concat(t,"/preview/").concat(r,"?from=").concat(encodeURIComponent(n))}function Cs(e){return/^data:image\//i.test(e||"")}function Os(e,t){if("string"==typeof e&&(t=e,e=null),t=t||"",ks.isYuque&&t.startsWith("https://intranetproxy.alipay.com/skylark/"))return!0;for(var n=0;n<ks.imageServiceDomains.length;n++){var r=ks.imageServiceDomains[n];if(t.startsWith("http://".concat(r))||t.startsWith("https://".concat(r)))return!1}if(!t.startsWith("http://")&&!t.startsWith("https://"))return!1;var a=null;try{a=new URL(t).host}catch(e){}if(!a)return!1;if(window.location.host===a)return!0;if(e){var o=(e.options||{}).localImageHostList;if(o)for(var i=0,c=o.length;i<c;i++){var l=o[i];if("string"==typeof l){if(l===a)return!1}else if(l.test&&l.test(a))return!1}return!0}for(var s=0;s<ws.length;s++)if(ws[s].test(t))return!1;return!0}function Ss(e){return(e=e||"").indexOf(":")>=0&&(e=e.split(":")[1]),e}function Rs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{docVerstion:1,viewport:"fixed",typography:"classic"};e=_s(e);var n=t.viewport,r=t.typography;return"fixed"!==n&&"adapt"!==n&&(n="fixed"),"classic"!==r&&"traditional"!==r&&(r="classic"),'<!doctype lake><meta name="doc-version" content="'.concat(t.docVerstion,'" /><meta name="viewport" content="').concat(n,'" /><meta name="typography" content="').concat(r,'" />').concat(e)}function js(e){return e?Xe.escape(e):e}function Ps(e){var t=window.location,n=new URL(e,t.origin);return/^yuque\.(antfin|antfin-inc|alibaba-inc)\.com$/.test(n.hostname)&&n.host!==t.host&&(n.host=t.host),n.searchParams.set("from",t.href),Xe.sanitizeUrl(n.href)}function As(e,t){if(!e||!t||"object"!==i()(t))return e;try{var n=new URL(e,location.origin);Object.keys(t).forEach((function(e){n.searchParams.append(e,t[e])}));var r=n.search;return e.split("?")[0]+r}catch(t){return console.warn(t),e}}var Ts={"zh-cn":{copySuccess:"复制成功!"},en:{copySuccess:"Copy Success!"}},Ds=function(){function e(){var t=this;l()(this,e),g()(this,"onBeforeRenderImage",(function(e){return(0,t.getOptions().onBeforeRenderImage)(e)})),this.events=[],this.bodyOverflow=document.body.style.overflow}return u()(e,[{key:"embedToolbar",value:function(){}},{key:"toolbar",value:function(){}},{key:"maximize",value:function(){document.body.style.overflow="hidden"}},{key:"restore",value:function(){document.body.style.overflow=this.bodyOverflow}},{key:"render",value:function(){}},{key:"activate",value:function(){}},{key:"unactivate",value:function(){}},{key:"saveValue",value:function(){}},{key:"copyCardEmbedLink",value:function(){var e=this.value.id;if(e){var t=this.getLang(),n=Or.exportParser&&Or.exportParser.getDocUrl()||xs();Or.copyText("".concat(n,"?inner=").concat(e)),Yc.a.success(Ts[t].copySuccess)}}},{key:"select",value:function(){var e=this.container,t=this.constructor.selectStyleType;e[0].childNodes.length>0&&("background"===t?e.addClass("lake-selected-background"):e.addClass("lake-selected-outline"))}},{key:"unselect",value:function(){var e=this.container,t=this.constructor.selectStyleType;e[0].childNodes.length>0&&("background"===t?e.removeClass("lake-selected-background"):e.removeClass("lake-selected-outline"))}},{key:"selectByOther",value:function(e,t){var n=this.container,r=this.constructor.selectStyleType;n[0].childNodes.length>0&&("background"===r?n.css("background",t):n.css("outline","2px solid "+e))}},{key:"unselectByOther",value:function(){var e=this.container,t=this.constructor.selectStyleType;e[0].childNodes.length>0&&("background"===t?e.css("background",""):e.css("outline",""))}},{key:"activateByOther",value:function(e,t){return this.selectByOther(e,t)}},{key:"unactivateByOther",value:function(){this.unselectByOther()}},{key:"getContainerWidth",value:function(){return gs(this.container[0])}},{key:"getContainerHeight",value:function(){return vs(this.container[0])}},{key:"hideMask",value:function(){this.mask&&(this.mask.hide(),this.isMaskShow=!1)}},{key:"showMask",value:function(){this.mask&&(this.mask.show(),this.isMaskShow=!0)}},{key:"preventMask",value:function(){return!1}},{key:"createMask",value:function(){var e=this,t=this.container,n=kt('<div class="lake-card-cover-mask"></div>');t.css({position:"relative"}),t.append(n),this.isMaskShow=!0,n.on("click",(function(){e.isMaskShow&&e.hideMask()})),kt(document).on("click",(function(n){e.isMaskShow||t[0].contains(n.target)||e.preventMask(n)||e.showMask()})),this.mask=n}},{key:"showRisizeController",value:function(){this.resizeController&&this.resizeController.show()}},{key:"hideRisizeController",value:function(){this.resizeController&&this.resizeController.hide()}},{key:"createResizeController",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.onResizing,a=n.onDragstart,o=n.onDragmove,i=n.onDragend,c=n.maxHeight;e=kt(e);var l,s,u,d=80;this.resizeController=this._createResizeController({container:this.container,dragstart:a||function(){l=vs(e[0]),s=!0},dragmove:o||function(t){s&&(u=(u=l+t)>=d?u:d,c&&u>c&&(u=c),e.css("height",u+"px"),e.addClass("manual-height"),r&&r(u))},dragend:i||function(){s&&(t.setValue({height:vs(e[0])}),s=!1)}}),this.resizeController.hide()}},{key:"_createResizeController",value:function(e){var t,n=e.container,r=e.dragstart,a=e.dragmove,o=e.dragend,i=kt('<img class="card-resize-button-ud" draggable="true" src="https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*vl1iS57KtIoAAAAAAAAAAABjAQAAAQ/original" />');return n.append(i),this.bindEvent(i,"dragstart",(function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0,t={x:e.clientX,y:e.clientY},r(t)})),this.bindEvent(kt(document),"mousemove",(function(e){if(t){var n=e.clientY-t.y;a(n)}})),this.bindEvent(kt(document),"mouseup",(function(){t=void 0,o()})),i.on("click",(function(e){e.stopPropagation()})),i}},{key:"destroy",value:function(){this.destroyed=!0,this.removeEvent()}},{key:"removeEvent",value:function(){this.events.forEach((function(e){var t=e.element,n=e.type,r=e.callback;t.off(n,r)})),this.events=[]}},{key:"getViewEngine",value:function(){return this.engine||this.contentView}},{key:"getTopEngine",value:function(){var e=this.engine||this.contentView;if(!e)return null;for(;e.parentEngine;)e=e.parentEngine;return e}},{key:"bindEvent",value:function(e,t,n){e.on(t,n),this.events.push({element:e,callback:n,type:t})}},{key:"getOptions",value:function(){return this.state.readonly?this.contentView.options:this.engine.options}},{key:"getLang",value:function(){return this.getOptions().lang}},{key:"setValue",value:function(e){var t=this.cardRoot;if(!this.state.readonly&&e){var n=this.engine,r=n.card,a=n.change;r.setValue(t,Object.assign(this.value,e))&&a.change()}}},{key:"remove",value:function(){!this.state.readonly&&this.engine.change.removeCard(this.cardRoot)}},{key:"getMargin",value:function(){var e=(this.value||{}).margin;return void 0!==e&&e}},{key:"toggleMargin",value:function(){var e=this.getMargin();this.cardRoot.removeClass("lake-card-margin"),this.cardRoot.removeClass("lake-card-margin-top"),this.cardRoot.removeClass("lake-card-margin-bottom"),!0===e?this.cardRoot.addClass("lake-card-margin"):!1===e||"object"===i()(e)&&(e.top&&this.cardRoot.addClass("lake-card-margin-top"),e.bottom&&this.cardRoot.addClass("lake-card-margin-bottom"))}},{key:"getMoreEmbedToolbarConfig",value:function(){var e=this;if(!this.engine)return[];var t=this.engine.locale;return[{type:"more",items:[{type:"switch",name:"margin",title:t.embedToolbar.toggleMargin,getState:function(){return!!e.getMargin()},onClick:function(){var t=(e.value||{}).margin,n=void 0!==t&&t;e.setValue({margin:!n}),e.toggleMargin()}},{type:"delete",title:t.embedToolbar.deleteCard}]}]}},{key:"refreshToolbar",value:function(){this.cardRoot&&(this.getViewEngine().card.updateToolbar(this),this.cardRoot.hasClass("lake-activated")&&this.getViewEngine().card.showToolbar(this.cardRoot))}},{key:"setToolbar",value:function(){this.embedToolbar&&!this.toolbarRendered&&(this.engine.card.setToolbar({cardRoot:this.cardRoot,component:this,engine:this.engine,contentView:this.contentView}),this.toolbarRendered=!0)}}]),e}();function Ms(e){var t=a.ua.desktop&&window.appData&&window.appData.space&&window.appData.space.host||"";return!a.ua.desktop&&e&&(t=e),window&&window.____lakeEditorTestMockiMageGenerator||{generate:"".concat(t,"/api/services/graph/generate/"),generateRender:"".concat(t,"/api/services/graph/generate_redirect/"),preview:"".concat(t,"/api/services/graph/preview/")}}function Ns(e,t,n,a){var o=Ms(),i=K()(a||{},"options.imageGenerator.getGenerateUrl"),c="".concat(o.generate).concat(e);return i&&(c=i(e)),Object(r.ajax)({method:"post",url:c,data:{content:t,from:ks.isYuque?"yuque":"skylark",user_id:ks&&ks.me&&ks.me.id}}).promise.catch((function(n){console&&console.error("generate ".concat(e," error: ").concat(n));var r=K()(a||{},"options.imageGenerator.getGenerateRenderUrl"),i="".concat(o.generateRender).concat(e,"?").concat(encodeURIComponent(t));return r&&(i=r(e,t)),{url:i}}))}function Ls(e,t,n,a){var o=Ms(),i=K()(a||{},"options.imageGenerator.getPreviewUrl"),c="".concat(o.preview).concat(e);return i&&(c=i(e)),Object(r.ajax)({method:"post",url:c,data:{content:t,from:ks.isYuque?"yuque":"skylark",user_id:ks&&ks.me&&ks.me.id}}).promise}function Is(e){var t=function(){e.updateEditorPosition()};e.scrollAndResizeCallback=t,window.addEventListener("scroll",t,!0),window.addEventListener("resize",t,!0)}function Bs(e){var t=e.scrollAndResizeCallback;window.removeEventListener("scroll",t,!0),window.removeEventListener("resize",t,!0)}function zs(e){e.css("cursor","pointer"),e.attr("draggable",!0),e.css("user-select","none")}function Fs(e){var t=e.editorContainer,n=e.engine,r=e.cardRoot,a=e.callback,o=void 0===a?function(e){return-1!==[13,27].indexOf(e.keyCode)}:a;t.attr("tabIndex",0),t.on("keydown",(function(e){n&&o(e)&&(e.preventDefault(),n.change.activateCard(document.body,"manual"),n.change.focusCard(r))})),t.hide()}function Us(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Us(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Us(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}g()(Ds,"canSearch",!1),Ms();var qs=a.ua.chrome?14/17.4:1,Hs=function(e){oe()(n,Ds);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){var e;return l()(this,n),(e=t.call(this)).renderMath=J()((function(t){e._renderMath(t)}),300),e}return u()(n,[{key:"renderImage",value:function(e){var t=this.getMaxWidth(),n=e[0],r=n.naturalWidth,a=n.naturalHeight,o=parseInt(qs*r),i=parseInt(qs*a);e.css("width","".concat(o,"px")),e.css("height","".concat(i,"px")),e.css("max-width","".concat(t,"px")),this.value=Object.assign(this.value,{width:o,height:i})}},{key:"_renderMath",value:function(e){var t=this;if(e){var n=this.getTopEngine();Ls("latex",e,n.options.previewOrigin,n).then((function(n){var r=n.success,a=n.svg;if(t.hasSave=!1,r&&a){var o="data:image/svg+xml,"+encodeURIComponent(a).replace(/'/g,"%27").replace(/"/g,"%22"),i=new Image;i.src=o,i.onload=function(){t.renderImage(kt(i)),t.viewContainer.empty(),t.viewContainer.append(i),t.updateEditorPosition()},t.svg=a}else t.renderPureText(e),t.svg=void 0,t.value=Object.assign(t.value,{code:e,src:null})}))}}},{key:"getMaxWidth",value:function(){var e=this.getViewEngine(),t=window.getComputedStyle(e.editArea[0]),n=parseInt(t.width)-parseInt(t["padding-left"])-parseInt(t["padding-right"]);return this.state.readonly?n:n-2}},{key:"renderPureText",value:function(e){var t=this.getMaxWidth();this.viewContainer.html('<span class="lake-math-content-tmp" style="max-width: '.concat(t,'px">').concat(Xe.escape(e),"</span>")),this.updateEditorPosition()}},{key:"focusTextarea",value:function(){this.editorContainer.find("textarea")[0].focus()}},{key:"unactivate",value:function(){this.state.readonly||(this.engine.readonly(!1),this.editorContainer.hide(),Bs(this))}},{key:"updateEditorPosition",value:function(){if(this.editorContainer){var e=this.viewContainer.getBoundingClientRect();this.editorContainer.css("left","".concat(e.left,"px")),this.editorContainer.css("top","".concat(e.bottom+8,"px"))}}},{key:"activate",value:function(){this.state.readonly||(this.editorContainer.show(),this.updateEditorPosition(),Is(this))}},{key:"renderView",value:function(){var e=this,t=this.value,n=this.container,r=this.locale,a=t.src,o=t.code,i=t.width,c=t.height,l=kt('<span class="lake-math-container"></span>');if(n.append(l),this.viewContainer=l,a){var s=kt('<img src="'.concat(Xe.escape(a),'" />'));l.append(s),i&&s.css("wdith","".concat(i,"px")),c&&s.css("height","".concat(c,"px")),this.img=s,s[0].onload=function(){e.renderImage(s)},s[0].onerror=function(){e._renderMath(o)}}else o?this._renderMath(o):this.renderPureText(r.placeholder);!this.state.readonly&&zs(l)}},{key:"onChange",value:function(e){this.value=Object.assign(this.value,{code:e,src:null}),this.code=e,this.renderMath(e)}},{key:"onConfirm",value:function(){this.value&&this.setValue(this.value)}},{key:"renderEditor",value:function(){var e=this,t=this.container,n=this.value,r=this.engine,a=this.cardRoot,o=this.locale,i=kt('<div class="lake-card-math-editor"></div>');this.editorContainer=i,t.append(i),Fs({editorContainer:i,engine:r,cardRoot:a,callback:function(e){return 27===e.keyCode||13===e.keyCode&&(e.ctrlKey||e.metaKey)}}),Vc.a.render(Fc.a.createElement(ds,{code:n.code,locale:o,onFocus:function(){i.addClass("textarea-focus"),e.engine.readonly(!0)},onBlur:function(){e.onConfirm(),i.removeClass("textarea-focus")},onChange:function(t){e.onChange(t)}}),i[0],(function(){i.find('[data-role="save"]').on("click",(function(e){e.stopPropagation(),e.preventDefault(),r.change.activateCard(document.body,"manual"),r.change.focusCard(a)}));var e=i.find("textarea");e.on("mousedown",(function(){e[0].focus()}))})),this.bindEvent(r.asyncEvent,"save:before",(function(){if(!1===e.hasSave)return Ns("latex",e.code).then((function(t){var n=t.url;e.hasSave=!0,e.setValue({src:n},!1)}))}))}},{key:"getDefaultValue",value:function(){return{src:null,code:""}}},{key:"render",value:function(){var e=this.getViewEngine().locale.math,t=this.getDefaultValue();this.locale=e,this.value=this.value||{},this.value=Vs(Vs({},t),this.value),this.defaultValue=t,this.value.code?this.code=this.value.code:this.value.src=null,this.renderView(),this.state.readonly||this.renderEditor()}},{key:"destroy",value:function(){Bc()(se()(n.prototype),"destroy",this).call(this),Bs(this)}}]),n}();g()(Hs,"type","inline"),g()(Hs,"selectStyleType","background");var Ws=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"render",value:function(){var e,t=this,n=this.props,r=n.onBeforeUpload,a=n.onAfterUpload,o=n.onBeforeInsertCard,i=n.uploader,c=this.props,l=c.engine,s=c.getEngine,u=Ss(this.props.name);return(l=s()||l).uploader&&(e=l.uploader.getAccept(u)),Fc.a.createElement("span",{onClick:function(){return t.fileInput.click()},"data-lake_prevent_click_unselect":null!=i},Fc.a.createElement("input",{type:"file",accept:e,ref:function(e){t.fileInput=e},onChange:function(e){for(var n=t.fileInput.files,c=[],s=0,d=n.length;s<d;s++)c.push(n[s]);i?i.post(u,c):l.uploader.post(u,c,{onBeforeUpload:r,onAfterUpload:a,onBeforeInsertCard:o}),e.target.value=null},style:{display:"none"},multiple:"multiple"}),this.props.children)}}]),n}(Fc.a.Component);g()(Ws,"propTypes",{name:Hc.a.string,engine:Hc.a.object,getEngine:Hc.a.func,children:Hc.a.object,onBeforeUpload:Hc.a.func,onAfterUpload:Hc.a.func,onBeforeInsertCard:Hc.a.func,uploader:Hc.a.object});var Ys=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"onSelect",(function(e,t,n){r.props.onSelect(e,t+1,n+1)})),g()(de()(r),"onHover",(function(e,t){var n=Math.max(r.state.minRows,Math.min(r.state.maxRows,e+2)),a=Math.max(r.state.minCols,Math.min(r.state.maxCols,t+2));r.setState({currentRows:n,currentCols:a,selectedRows:e+1,selectedCols:t+1})})),g()(de()(r),"renderTr",(function(e,t){for(var n=r.state,a=n.selectedRows,o=n.selectedCols,i=[],c=function(t){var n=vl()({"lake-toolbar-table-selector-td":!0,actived:e<a&&t<o});i.push(Fc.a.createElement("div",{className:n,key:t,onMouseDown:function(n){return r.onSelect(n,e,t)},onMouseOver:function(){return r.onHover(e,t)}}))},l=0;l<t;l++)c(l);return i})),g()(de()(r),"renderTable",(function(e,t){for(var n=[],a=0;a<e;a++)n.push(Fc.a.createElement("div",{className:"lake-toolbar-table-selector-tr",key:a},r.renderTr(a,t)));return n})),r.state={maxRows:10,maxCols:10,minRows:4,minCols:4,currentCols:4,currentRows:4,selectedCols:0,selectedRows:0},r}return u()(n,[{key:"render",value:function(){var e=this.state,t=e.currentCols,n=e.currentRows,r=e.selectedRows,a=void 0===r?0:r,o=e.selectedCols,i=void 0===o?0:o;return Fc.a.createElement("div",{className:"lake-toolbar-table-selector","data-lake-element":"table-selector"},this.renderTable(n,t),Fc.a.createElement("div",{className:"lake-toolbar-table-selector-info"},a," x ",i))}}]),n}(Fc.a.Component);g()(Ys,"propTypes",{className:Hc.a.string,onSelect:Hc.a.func}),ls(".lake-card-tooltip-container .lake-card-tooltip-content-container {\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.65);\n  max-width: 354px;\n}\n.lake-card-tooltip-container .lake-card-tooltip-content-container p {\n  margin-bottom: 8px;\n}\n.lake-card-tooltip-container .lake-card-tooltip-content-container .lake-svg-icon {\n  background-size: 24px 24px;\n  width: 24px;\n  height: 24px;\n  margin-right: 14px;\n}\n.lake-card-tooltip-container .lake-card-tooltip-content-container .lake-card-tooltip-title {\n  font-weight: bold;\n  font-size: 14px;\n  margin-bottom: 12px;\n}\n.lake-card-tooltip-container .lake-card-tooltip-content-container .lake-card-tooltip-flat-cell {\n  display: inline-block;\n  margin-right: 12px;\n}\n.lake-card-tooltip-container .lake-card-tooltip-content-container .lake-card-tooltip-flat-cell .lake-svg-icon {\n  margin-top: 10px;\n}\n.lake-card-tooltip-container .lake-card-tooltip-content-container .lake-svg-icon-helper-tips {\n  width: 12px;\n  height: 12px;\n  background-size: 12px 12px;\n  vertical-align: middle;\n  margin-top: -3px;\n}\n.lake-card-tooltip-container .lake-card-tooltip-content-container .lake-card-tooltip-gif-title {\n  max-width: 205px;\n}\n.lake-card-tooltip-container .lake-card-tooltip-content-container .lake-card-tooltip-gif-img {\n  margin-top: 8px;\n}\n.lake-card-tooltip-container .lake-card-tooltip-content-container .lake-card-tooltip-hierarchy-cell .lake-card-tooltip-hierarchy-name-container {\n  margin-bottom: 8px;\n}\n.lake-card-tooltip-container .lake-card-tooltip-content-container .lake-card-tooltip-hierarchy-cell .lake-card-tooltip-hierarchy-name-container .lake-card-tooltip-hierarchy-name {\n  font-size: 14px;\n}\n.lake-card-tooltip-container .lake-card-tooltip-content-container .lake-card-tooltip-hierarchy-cell .lake-card-tooltip-hierarchy-name-container .lake-card-tooltip-hierarchy-sub-name {\n  color: rgba(0, 0, 0, 0.45);\n}\n.lake-card-tooltip-container .ant-tooltip {\n  max-width: 390px;\n}\n.lake-card-tooltip-container .ant-tooltip .ant-tooltip-inner {\n  background-color: white;\n  padding: 14px;\n  display: inline-block;\n}\n.lake-card-tooltip-container .ant-tooltip .ant-tooltip-arrow {\n  border-bottom-color: white;\n  border-left-color: white;\n}\n.lake-card-tooltip-container .ant-tooltip .ant-tooltip-arrow::before {\n  background-color: white;\n}\n");var Gs={"zh-cn":{supportFollowingExts:"支持以下格式"},en:{supportFollowingExts:"The following file formats are supported"}}[window.appData&&"zh-cn"!==window.appData.locale?"en":"zh-cn"],Xs=document.createElement("div");Xs.setAttribute("class","yuquesdk lake-card-tooltip-container lake-prevent-card-activated"),Xs.addEventListener("click",(function(e){e.stopPropagation()})),document.body.appendChild(Xs);var Ks=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"renderSubTitle",value:function(e){return e.map((function(e,t){var n=e.children.map((function(e,n){return Fc.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-".concat(e.icon),key:"".concat(t).concat(n)})}));return Fc.a.createElement("div",{key:"".concat(t),className:"lake-card-tooltip-hierarchy-cell"},Fc.a.createElement("p",{className:"lake-card-tooltip-hierarchy-name-container"},Fc.a.createElement("span",{className:"lake-card-tooltip-hierarchy-name"},e.name)," ",Fc.a.createElement("span",{className:"lake-card-tooltip-hierarchy-sub-name"},e.subName)),Fc.a.createElement("p",null,n))}))}},{key:"renderCommon",value:function(e){return e.map((function(e,t){return Fc.a.createElement("div",{key:"0".concat(t),className:"lake-card-tooltip-flat-cell"},Fc.a.createElement("span",null,e.name),Fc.a.createElement("br",null),Fc.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-".concat(e.icon)}))}))}},{key:"renderGif",value:function(e){return Fc.a.createElement("img",{className:"lake-card-tooltip-gif-img",src:e,height:132})}},{key:"renderHelperTips",value:function(e){return Fc.a.createElement("a",{href:e,target:"_blank",className:"lake-svg-icon lake-svg-icon-helper-tips"})}},{key:"getTitle",value:function(){var e=this.props.data;if(!e||null===e.title)return"";var t="lake-card-tooltip-title lake-card-tooltip-".concat(e.type,"-title"),n=e.title?e.title:Gs.supportFollowingExts;return e.helperTipsLink?Fc.a.createElement("p",{className:t},n," ",this.renderHelperTips(e.helperTipsLink)):Fc.a.createElement("p",{className:t},n)}},{key:"renderTooltip",value:function(){var e,t=this.props.data,n=this.getTitle();return t&&("subTitle"===t.type?e=this.renderSubTitle(t.content):"common"===t.type?e=this.renderCommon(t.content):"gif"===t.type&&(e=t.src?this.renderGif(t.src):"")),Fc.a.createElement("div",{className:"lake-card-tooltip-content-container"},n,e)}},{key:"render",value:function(){var e=this.props,t=e.children;return e.data?Fc.a.createElement(Wc.a,{title:this.renderTooltip(),placement:"right",getPopupContainer:function(){return Xs}},t):Fc.a.createElement("div",null,t)}}]),n}(Fc.a.Component);Ks.defaultProps={data:null},Ks.propTypes={data:Hc.a.object,children:Hc.a.object};var Zs=function(){function e(){l()(this,e)}return u()(e,null,[{key:"check",value:function(e,t){if(!window.__member_message_ref)return null;var n;switch(e){case"image":n="max_single_image_size";break;case"video":n="max_single_video_size";break;default:n="max_single_file_size"}try{var r=window.__member_message_ref.current.getMessageWithFile({filesize:t},n)||null;if(r)return{level:r.level||"error",msg:r.msg||"unknown error",alwaysOpen:!!r.alwaysOpen,callback:r.callback||function(){},result:r}}catch(e){return console.log(e),null}return null}},{key:"getMessageByCode",value:function(e,t){if(!window.__member_message_ref)return null;try{var n=window.__member_message_ref.current.getMessage(e,{},t)||null;if(n)return{level:n.level||"error",msg:n.msg||"unknown error",alwaysOpen:!!n.alwaysOpen,callback:n.callback||function(){}}}catch(e){return console.log(e),null}return null}}]),e}();function $s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$s(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Js=a.ua.macos?"⌘":"Ctrl",eu={fontColor:"Text color",bgColor:"Highlight color",moreColor:"More"},tu={layout:"Layout",layoutBlock:"Break text",layoutInline:"In line"},nu={alignment:"Align",alignLeft:"Left align",alignCenter:"Centre align",alignRight:"Right align"},ru={uploadFailed:"Failed to upload the file, please retry",notSupportExt:"This file type is not supported"},au={dndTips:"<span>Drag to reposition<br />Click for more options </span>",dndInsert:"Insert newline",dndClone:"Clone",dndCopy:"Copy anchor",dndCopySuccess:"Copied successfully",dndEdit:"Edit anchor",dndDelete:"Delete"},ou={linkPlaceholder:"Please input a link or an anchor",linkSave:"Apply",linkEdit:"Change",linkDelete:"Remove",linkOpen:"Open"},iu={editorModalClose:"Discard",editorModalPopupTips:"Are you sure?",editorModalPopupCancel:"Cancel",editorModalPopupConfirm:"Discard",editorModalSave:"Apply",editorModalConfirm:"Do you want to discard changes?",editorModalDiscardAndExit:"Discard and exit",editorModalCancel:"Cancel",editorModalSaveAndExit:"Save and exit"},cu={edit:"Change",delete:"Delete",save:"Save Draft",help:"Help",undo:"Undo",redo:"Redo",insertSibling:"Sibling Topic",insertChild:"Sub Topic",insertRoot:"Main Topic",createLink:"Create link",attachImage:"Attach image",collapse:"Fold subtopics",expand:"Unfold subtopics",autoAdjust:"Auto",properties:"Settings panel",insertRootAfterMaximize:"Add main node after maximizing",propertiesAfterMaximize:"Set styling after maximizing",downloadImage:"Download Image",style:"Style"},lu={pure:{support:"support"},editor:{save:"Save draft",print:"Print",file:"File",edit:"Edit",view:"View",insert:"Insert",format:"Format",lab:"Lab",version:"Version",help:"Help"},alignment:{buttonTitle:"Align",alignLeft:"Left align",alignCenter:"Centre align",alignRight:"Right align",alignJustify:"Justify"},background:eu,blockquote:{buttonTitle:"Quotation",menuTitle:"Quotation"},bold:{macTitle:"Bold ⌘+B",winTitle:"Bold Ctrl+B",text:"Bold"},paintformat:{buttonTitle:"Paint format"},clearFormat:{buttonTitle:"Clear formatting"},code:{macTitle:"Inline code",winTitle:"Inline code",text:"Inline code"},codeBlock:Qs(Qs({},au),{},{buttonTitle:"Code block",menuTitle:"Code block",preview:"Preview",delete:"Delete",copyCode:"Copy Code",copySuccess:"Successful copy!",autoWrap:"Auto wrap"}),color:eu,emoji:{buttonTitle:"Moods"},localdoc:Qs(Qs({},ru),{},{formatError:"The file embed preview is not supported",allowDownload:"Allow downloading of files under the reading page",items:{office:"Windows office suite",officeDesc:"Supported Word, Excel, PPT",mac:"Mac office suite",macDesc:"Supported Pages, Numbers, Keynote",design:"Design files",designDesc:"Supported Axure, Photoshop, Sketch",mind:"Mind map file",mindDesc:"Supported MindManager, XMind, MindNote",pdf:"PDF",video:"Local video",localFile:"Local file",audio:"Local audio"}}),preview:{office:"Office preview, upload file size is limited to 100 MB",macOffice:"The local file preview, file size is limited to 200 MB",pdf:"PDF preview, upload file size is limited to 100 MB"},premium:{sidebar:{title:"Paid Reading",moreLink:"Learn More",desc:'By paying for reading, original content can be valued to generate income. Please abide by <a href="https://www.yuque.com/terms/pay_to_read" target="_blank">the service agreement of paying for reading</a>.',price:{title:"Pricing",desc:"Pricing can only be set once and cannot be modified after release.",unit:"YUAN",error:{required:"please set the pricing",invalid:"invalid input",range:"beyond legal scope"}},daysCount:{title:"Duration",desc:"Pay for reading days, you need to pay for reading. After paying for the number of reading days, the document is automatically set to read the full text for free. <strong>The duration can only be set once and cannot be modified after publishing.</strong>",unit:"Day",error:{required:"please set the duration",invalid:"invalid input",range:"beyond legal scope"}},tip:{title:"Custom split line copy",error:{length:"copywriting supports up to 20 words"}}},defaultTip:"Pay for the following content",paidTip:"Paid, the following is the paid content",expiredTip:"The payment time has been exceeded, and the document has been automatically published for free."},file:Qs(Qs(Qs({},ru),au),{},{buttonTitle:"Attachment",menuTitle:"Attachment",stillUploading:"Some files are still in the process of uploading",stillTransfering:"Some files are still transfering",formatError:"Unsupported file format, please compress it to ZIP before uploading",sizeError:"Failed to upload for the file size is larger than 500M",placeholder:"Upload an attachment(maximum file size: 500M)",preview:"Preview",replace:"Replace",download:"Download",delete:"Delete",transfering:"Transferring...",invalid:"Attachment invalid",failReadFile:"File read failed, please re-upload"}),heading:Qs(Qs({},au),{},{buttonTitle:"Heading and text",normal:"Normal",heading_1:"Heading 1",heading_2:"Heading 2",heading_3:"Heading 3",heading_4:"Heading 4",heading_5:"Heading 5",heading_6:"Heading 6"}),fontsize:{buttonTitle:"Font size"},history:{undo:"Undo",redo:"Redo"},hr:Qs(Qs({},au),{},{buttonTitle:"Horizontal line",menuTitle:"Horizontal line"}),image:Qs(Qs(Qs(Qs(Qs(Qs({},ru),tu),nu),au),ou),{},{buttonTitle:"Image",menuTitle:"Image",sizeError:"Failed to upload the image (maximum image size: 10M)",uploadFailed:"Failed to upload the image, please retry",stillUploading:"Some images are still in the process of uploading",uploadTips:"Drag an image here or click to choose one to upload (maximum image size: 10M)",copyFailed:"Failed to copy the image",copyFailedTips:"Image does not support copy, please copy and upload separately",loadFailed:"Network error, can't display image",placeholder:"Upload an image (maximum image size: 10M)",sizeTitle:"Size",width:"Width",formatError:"This file type is not supported",height:"Height",originSize:"Original size",linkTitle:"Link",linkPlaceholder:"Link address",linkTargetTips:"Open on current page",replace:"Replace",delete:"Delete",preferences:"Preferences",style:"Style",none:"None",stroke:"Stroke",shadow:"Shadow",spacing:"Spacing",topSpacingTips:"Add top margin to picture",bottomSpacingTips:"Add bottom margin to picture"}),indent:{buttonTitle:"Indent",decrease:"Decrease indent",increase:"Increase indent"},lineHeight:{buttonTitle:"Line Height",defaultTitle:"Default"},italic:{macTitle:"Italic ⌘+I",winTitle:"Italic Ctrl+I",text:"Italic"},link:Qs(Qs({},ou),{},{buttonTitle:"Link",menuTitle:"Link"}),linkCard:{buttonTitle:"Bookmark Link",title:"Bookmark Link"},list:{buttonTitle:"List",orderedList:"Numbered list",unorderedList:"Bulleted list",taskList:"To-Do list"},mark:{macTitle:"Highlight text",winTitle:"Highlight text",text:"Highlight text"},math:Qs(Qs(Qs(Qs(Qs({},tu),nu),au),ou),{},{buttonTitle:"Equation",menuTitle:"Equation",success:"Copied successfully",placeholder:"New equation",edit:"Change",copy:"Copy source code",delete:"Delete",cancel:"Cancel",save:"Apply",sourceCodeRequired:"Please input source code",syntaxInvalid:"Syntax error",help:"Help",enterTooltips:"".concat(Js," + Enter")}),flowchart:Qs(Qs(Qs(Qs(Qs({},nu),au),iu),cu),{},{insertText:"Insert Text",insertShape:"Insert Shape",InsertEdge:"Insert Edge"}),mindmap:Qs(Qs(Qs(Qs(Qs({},nu),au),iu),cu),{},{defaultRootText:"Mind Map",newNode:"New Node",menuTitle:"Mind Map",buttonTitle:"Mind Map",editorTitle:"Mind Map",line:"Line"}),moremark:{buttonTitle:"More text styles"},paste:{copy:"Copy",cut:"Cut",paste:"Paste",pastePlainText:"Paste plain text",pasteMarkdown:"Paste Markdown",selectAll:"Select all"},textDiagram:Qs(Qs(Qs(Qs({},nu),au),iu),{},{edit:"Edit",save:"Save",preview:"Preview",template:"Template",help:"Help",winPreviewTooltip:"Ctrl+Shift+P",macPreviewTooltip:"⌘+Shift+P"}),riddle:Qs(Qs({},au),{},{buttonTitle:"Riddle",menuTitle:"Riddle",active:"Click to active",replace:"Replace",delete:"Delete",addressInvalid:"Invalid hyperlink",placeholder:"Please input link to your riddle and then enter to insert it"}),strikethrough:{macTitle:"Strike-through ⌘+Shift+X",winTitle:"Strike-through Ctrl+Shift+X",text:"Strike-through"},sub:{macTitle:"Subscript",winTitle:"Subscript",text:"Subscript"},sup:{macTitle:"Superscript",winTitle:"Superscript",text:"Superscript"},table:{buttonTitle:"Table",menuTitle:"Table",copy:"Copy",cut:"Cut",merge:"Merge cells",unmerge:"Unmerge cells",clear:"Clear content",deleteColumn:"Delete selected column(s)",deleteRow:"Delete selected row(s)",deleteTable:"Delete table"},underline:{macTitle:"Underline ⌘+U",winTitle:"Underline Ctrl+U",text:"Underline"},video:Qs(Qs(Qs({},ru),au),{},{buttonTitle:"Video",menuTitle:"Video",play:"Play",replace:"Replace",download:"Download",delete:"Delete",sizeError:"Failed to upload the video"}),toc:{title:"TOC",open:"Open TOC",close:"Close TOC"},card:{mindmapFile:"MindMap File",designingFile:"Designing File",officeFile:"Office File",localdocSubTitle:"Support Office, XMind, Sketch, etc.",label:"Label",labelDescription:"simple label tag",localdoc:"Local File",localdocDescription:"Support Office, XMind, Sketch, etc.",iframeOverLimit:"Documents support up to ${limit} embedded cards",sizeOverLimit:"File support up to ${sizeLimit} to preview",placeholder:"card name",embed:"embed",common:"common",yuque:"Yuque content",yuqueSubTitle:"Support for repository, whole or partial snippet documents",yuqueTooltipTitle:"Copy links to the repository, documents, paragraphs, etc., and embed them in this document",yuqueDescription:"Supports embedded text documents, tables, brain maps",buttonTitle:"Insert image, table,<br />attachment, codeblock, etc.",miniButtonTitle:"Insert image, label,<br />Yuque doc, etc.",normal:" ",media:"Media",engineering:"Engineering",description:"Enter  <code>".concat(Js,"</code> + <code>/</code>  quickly insert a card"),table:"Table",tableDescription:"Insert online table",image:"Image",imageDescription:"Upload one or more images",video:"Local video",videoDescription:"Upload local video",youku:"Online video",youkuName:"Youku",youkuDescription:"Youku, Bilibili, Taobao video",youkuSubTitle:"Youku, Bilibli, Taobao Video",youkuTooltipTitle:"Supports the following websites",youkuSiteDesc:"Youku, Bilibli, Taobao Video",thirdparty:"Third party Service",internalThirdpartySubTitle:"Xiami, Riddle, Deepinsight, etc.",thirdpartySubTitle:"MoDao, ProcessOn, Codepen, etc.",thirdpartyTooltipTitle:"Supports the following services",processonName:"ProcessOn",modaoName:"Mockingbot",music:"music",gaodeDesc:"Amap",toolsDesc:"Coding",designDesc:"Design",designSubDesc:"（Mockingbot，ProcessOn，Figma）",internalGaodeDesc:"Amap",internalToolDesc:"Coding",internalChartDesc:"Data",bilibili:"bilibili",bilibiliName:"Bilibili",bilibiliDescription:"Insert Bilibili video",codeblock:"Code block",codeblockDescription:"Enter code snippet",file:"Attachment",fileDescription:"Upload one or more files",math:"Formula",mathDescription:"Enter Latex formula",calendar:"Calendar",calendarDescription:"Insert calendar",riddle:"Riddle",riddleDescription:"Insert Riddle code snippet",mindmap:"Mind map",mindmapDescription:"Draw a simple mind map",flowchart:"Flowchart",flowchartDescription:"Draw a Flowchart diagram",puml:"PlantUML",pumlDescription:"Draw a PlantUML diagram",mermaid:"Mermaid",mermaidDescription:"Draw a Mermaid diagram",graphviz:"Graphviz",graphvizDescription:"Draw a Graphviz diagram",diagram:"Text diagram",diagramDescription:"Draw text based diagram",diagramSubTitle:"PlantUML, Mermaid, etc.",lockedtextTitle:"LockedText",lockedtextDescription:"Locked text",premium:"Paid reading",premiumDescription:"You need to pay to view",vote:"Vote"},embedCardMenu:{embed:"embed",introduction:"introduction"},thirdparty:{tip:"Paste a link from site %s, eg.:%s",defaultTip:"Paste a link",placeholders:{modao:"Paste embed code from Modao, eg.: <iframe src=…"},names:{amap:"AMap",codepen:"CodePen",deepinsight:"DeepInsight",figma:"Figma",herbox:"Herbox",processon:"ProcessOn",modao:"Mockingbot",riddle:"Riddle",ali:"Internal tools",music163:"163 Music",xiami:"XiaMi Music",ximalaya:"Himalaya",youtube:"YouTube",youku:"Youku",bilibili:"Bilibili",taobao:"TaoBao Video",canva:"Canva",jinshuju:"JinShuJu"},category:{map:"Map",media:"Media",development:"Development",form:"Form",data:"Data",design:"Design"}},mention:{text:"Mention"},markdown:{pasteTitle:"Do you need to do a style conversion?",pasteContent:"It is detected that the paste content conforms to the Markdown syntax. Do you need to do style conversion?",pasteButton:"Convert now"},search:{searchAndReplace:"Search & Replace",search:"search",replace:"replace",replaceAll:"replace all",replaceTo:"replace to",pleaseEnter:"please enter",next:"next",previous:"prevs"},translate:{title:"Translate",subTitle:"source & target",automaticDetection:"automatic detection",zh:"chinese",en:"english",translation:"translation",insertDoc:"Insert document",placeholder:"please select what needs to be translated in the document."},repository:{title:"Resource"},calendar:{format:"MMM YYYY",weekdays:["Su","Mo","Tu","We","Th","Fr","Sa"],today:"Today",tip:{title:"Untitled",desc:"Add a description",error:"failed to render calendar"},lang:"en"},bookmarkLink:{untitled:"Untitled",toLink:"Convert to link",loading:"Loading ...",loadingError:"Failed to load"},yuque:{untitled:"Untitled",unsupportedThread:"Does not support displaying thread",recently:"Recently Used",recommendTip:"Paste links to quickly associate content",searchRange:"Search range: ",loading:"Loading ...",loadingError:"Failed to load",searching:"Searching ...",searchError:"Failed to search",emptySearchTip:"No content found",emptySearchSubTip:"Try to paste the link directly"},audio:{transcodeError:"Transcode failed",failedToQuery:"Query failed",uploadError:"Upload failed",invalidAudio:"Invalid audio, please upload again",copyright:"Due to copyright protection, local audio files do not support direct playback in publicly shared documents",notSupport:"Audio playback is not supported here",cantPlay:"Audio file cannot be played",query:"Query audio information...",linkTip:"Click to open"},ui:{subPanel:{uploadBtn:"Upload"}},embedToolbar:{toggleMargin:"Add spacing to card",deleteCard:"Delete card",saveToResource:"Save to resource"},errorMessage:{currentDOCURL:"Does not support embedding the current document",notSupportURL:"Does not support embedding the link"},repositorySidebar:{title:"Resource",searchTip:"Search",searchResultTip:"Result",topLevelBreadcrumbName:"All Resource",emptySearchTip:"No matching results",noResourceBook:"No resource repository, immediately ",create:"create",error:"Can't fetch resource"},copyParagraphLink:"Copy paragraph link",copySuccess:"Copy success!",note:{image:"Image",todo:"TODO list",link:"Link card",localFile:"Local file"}};function su(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?su(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):su(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var du=a.ua.macos?"⌘":"Ctrl",fu={fontColor:"字体颜色",bgColor:"背景颜色",moreColor:"更多颜色"},pu={layout:"布局方式",layoutBlock:"独占一行",layoutInline:"嵌入行内"},hu={alignment:"对齐方式",alignLeft:"靠左对齐",alignCenter:"居中对齐",alignRight:"靠右对齐"},mu={uploadFailed:"文件上传失败，请重试",notSupportExt:"不支持该文件类型"},gu={dndTips:"<span>拖动 调整位置<br />点击 打开更多菜单</span>",dndInsert:"插入空行",dndClone:"克隆",dndCopy:"拷贝锚点",dndCopySuccess:"已拷贝到粘贴板",dndEdit:"编辑锚点",dndDelete:"删除"},vu={linkPlaceholder:"请输入链接地址或者锚点",linkSave:"保存",linkEdit:"编辑",linkDelete:"取消链接",linkOpen:"打开链接"},yu={editorModalClose:"关闭",editorModalPopupTips:"确认要放弃刚才编辑的草稿吗？",editorModalPopupCancel:"返回编辑",editorModalPopupConfirm:"确认",editorModalSave:"保存并插入",editorModalConfirm:"要在退出前保存本次修改吗？",editorModalDiscardAndExit:"放弃编辑并退出",editorModalCancel:"取消",editorModalSaveAndExit:"保存并退出"},bu={edit:"编辑",delete:"删除",save:"保存草稿",help:"帮助",undo:"撤销",redo:"重做",insertSibling:"插入同级",insertChild:"插入子级",insertRoot:"插入主节点",createLink:"插入链接",attachImage:"插入图片",collapse:"折叠",expand:"展开",autoAdjust:"适应画布",properties:"设置面板",insertRootAfterMaximize:"最大化后添加主节点",propertiesAfterMaximize:"最大化后进行样式设置",downloadImage:"下载图片",style:"样式"},ku={pure:{support:"支持"},editor:{save:"保存草稿",print:"打印",file:"文档",edit:"编辑",view:"视图",insert:"插入",format:"格式",lab:"实验室",version:"历史",help:"帮助",publish:"发布更新"},alignment:{buttonTitle:"对齐方式",alignLeft:"左对齐",alignCenter:"居中对齐",alignRight:"右对齐",alignJustify:"两端对齐"},background:fu,blockquote:{buttonTitle:"插入引用",menuTitle:"引用"},bold:{macTitle:"粗体 ⌘+B",winTitle:"粗体 Ctrl+B",text:"粗体"},paintformat:{buttonTitle:"格式刷"},clearFormat:{buttonTitle:"清除格式"},code:{macTitle:"行内代码",winTitle:"行内代码",text:"行内代码"},codeBlock:uu(uu({},gu),{},{buttonTitle:"插入代码块",menuTitle:"代码块",preview:"预览",delete:"删除",copyCode:"复制代码",copySuccess:"复制成功！",autoWrap:"自动换行"}),color:fu,emoji:{buttonTitle:"表情"},localdoc:uu(uu({},mu),{},{formatError:"不支持该文件嵌入预览",allowDownload:"允许在阅读页下载文件",items:{office:"Office 文件",officeDesc:"支持 Word，Excel，PPT",mac:"Mac 办公套件",macDesc:"支持 Pages，Numbers，Keynote",design:"设计文件",designDesc:"支持 Axure, Photoshop, Sketch",mind:"思维导图文件",mindDesc:"支持 MindManager, XMind, MindNote",pdf:"PDF 文件",video:"本地视频",localFile:"本地文件",audio:"本地音频"}}),preview:{office:"Office 预览，上传文件大小限制为 100 MB",macOffice:"本地文件预览，文件大小限制为 200 MB",pdf:"PDF 预览，上传文件大小限制为 100 MB"},premium:{sidebar:{title:"付费阅读",moreLink:"了解更多",desc:'通过付费阅读，可以让原创内容得到价值创收，请遵守<a href="https://www.yuque.com/terms/pay_to_read" target="_blank">《语雀付费阅读服务协议》</a>。',price:{title:"付费定价",desc:"定价只能设置一次，发布后不可修改",unit:"元",error:{required:"请设置定价",invalid:"无效的输入",range:"超出合法范围"}},daysCount:{title:"付费时长",desc:"付费阅读天数内，需付费才能阅读。付费阅读天数后，文档会自动设置为免费就可阅读全文。<strong>时长只能设置一次，发布后不可修改</strong>",unit:"天",error:{required:"请设置时长",invalid:"无效的输入",range:"超出合法范围"}},tip:{title:"自定义分割线文案",error:{length:"文案最多支持 20 字"}}},defaultTip:"以下内容需付费阅读",paidTip:"已付费，以下为付费内容",expiredTip:"已超过付费时长，文档已自动免费公开"},file:uu(uu(uu({},mu),gu),{},{buttonTitle:"上传附件",menuTitle:"附件",stillUploading:"有文件还在上传中",stillTransfering:"有文件还在转存中",formatError:"该类型文件请压缩为 ZIP 文件上传",sizeError:"上传失败，附件大小限制为 500M",placeholder:"上传附件，限制 500M",preview:"预览",replace:"替换",download:"下载",delete:"删除",transfering:"转存中…",invalid:"附件已失效",failReadFile:"文件读取失败，请重新上传"}),heading:uu(uu({},gu),{},{buttonTitle:"正文与标题",normal:"正文",heading_1:"标题 1",heading_2:"标题 2",heading_3:"标题 3",heading_4:"标题 4",heading_5:"标题 5",heading_6:"标题 6"}),fontsize:{buttonTitle:"字号"},history:{undo:"撤销",redo:"重做"},hr:uu(uu({},gu),{},{buttonTitle:"插入分割线",menuTitle:"分割线"}),image:uu(uu(uu(uu(uu(uu({},mu),pu),hu),gu),vu),{},{buttonTitle:"插入图片",menuTitle:"图片",sizeError:"上传图片失败：图片大小超过 10M",uploadFailed:"上传图片失败，请重试",stillUploading:"有图片还在上传中",uploadTips:"将图片拖至此处或点击选择一个上传，大小限制为 10M",copyFailed:"复制图片失败",copyFailedTips:"图片不支持拷贝复制，请单独复制上传",loadFailed:"网络异常，图片无法展示",placeholder:"上传图片，限制 10M",sizeTitle:"大小",formatError:"不支持该文件类型",width:"宽度",height:"高度",originSize:"原始大小",linkTitle:"链接",linkPlaceholder:"目标链接",linkTargetTips:"在当前页面打开",replace:"替换",delete:"删除",preferences:"图片设置",style:"样式",none:"无",stroke:"描边",shadow:"阴影",spacing:"间距",topSpacingTips:"为图片添加上间距",bottomSpacingTips:"为图片添加下间距"}),indent:{buttonTitle:"缩进",decrease:"减少缩进",increase:"增加缩进"},lineHeight:{buttonTitle:"行高",defaultTitle:"默认"},italic:{macTitle:"斜体 ⌘+I",winTitle:"斜体 Ctrl+I",text:"斜体"},link:uu(uu({},vu),{},{buttonTitle:"插入链接",menuTitle:"链接"}),linkCard:{buttonTitle:"插入链接卡片",title:"插入链接卡片"},list:{buttonTitle:"列表",orderedList:"有序列表",unorderedList:"无序列表",taskList:"任务列表"},mark:{macTitle:"高亮文字",winTitle:"高亮文字",text:"高亮文字"},math:uu(uu(uu(uu(uu({},pu),hu),gu),vu),{},{buttonTitle:"公式",menuTitle:"公式",success:"操作成功",placeholder:"添加 Tex 公式",edit:"编辑",copy:"拷贝源码",delete:"删除",cancel:"取消",save:"确定",sourceCodeRequired:"请输入源码",syntaxInvalid:"输入公式不合法",help:"了解 LaTeX 语法",enterTooltips:"".concat(du," + Enter")}),flowchart:uu(uu(uu(uu(uu({},hu),gu),yu),bu),{},{insertText:"插入文本",insertShape:"插入形状",InsertEdge:"插入连线"}),mindmap:uu(uu(uu(uu(uu({},hu),gu),yu),bu),{},{defaultRootText:"思维导图",newNode:"新建节点",menuTitle:"思维导图",buttonTitle:"思维导图",editorTitle:"思维导图",line:"线条"}),moremark:{buttonTitle:"更多文本样式"},paste:{copy:"复制",cut:"剪切",paste:"粘贴",pastePlainText:"粘贴纯文本",pasteMarkdown:"粘贴 Markdown",selectAll:"全选"},textDiagram:uu(uu(uu(uu({},hu),gu),yu),{},{edit:"编辑",save:"保存",preview:"预览",template:"模板",help:"帮助",genImageError:"生成预览失败，请修改内容",winPreviewTooltip:"Ctrl+Shift+P",macPreviewTooltip:"⌘+Shift+P"}),riddle:uu(uu({},gu),{},{buttonTitle:"Riddle",menuTitle:"Riddle",active:"Click to active",replace:"替换",delete:"删除",addressInvalid:"请输入正确的链接地址",placeholder:"输入 Riddle 地址，按 Enter 生成"}),strikethrough:{macTitle:"删除线 ⌘+Shift+X",winTitle:"删除线 Ctrl+Shift+X",text:"删除线"},sub:{macTitle:"下标",winTitle:"下标",text:"下标"},sup:{macTitle:"上标",winTitle:"上标",text:"上标"},table:{buttonTitle:"插入表格",menuTitle:"表格",copy:"复制",cut:"剪切",merge:"合并单元格",unmerge:"拆分单元格",clear:"清空选中区域",deleteColumn:"删除选中列",deleteRow:"删除选中行",deleteTable:"删除表格"},underline:{macTitle:"下划线 ⌘+U",winTitle:"下划线 Ctrl+U",text:"下划线"},video:uu(uu(uu({},mu),gu),{},{buttonTitle:"插入视频",menuTitle:"视频",play:"播放",replace:"替换",download:"下载",delete:"删除",sizeError:"上传失败"}),toc:{title:"大纲",open:"打开大纲",close:"关闭大纲"},card:{mindmapFile:"思维导图",designingFile:"设计文件",officeFile:"办公文件",localdocSubTitle:"支持 Office、XMind、Sketch 等",label:"标签",labelDescription:"简易文本标签",localdoc:"本地文件",localdocDescription:"支持 Office、XMind、Sketch 等",iframeOverLimit:"文档最多支持 ${limit} 张嵌入卡片",sizeOverLimit:"该本地文件卡片限制预览大小为 ${sizeLimit}，可选择上传附件",placeholder:"卡片名",embed:"引入",common:"常用",yuque:"语雀内容",yuqueSubTitle:"支持知识库、文档、文档片段等",yuqueTooltipTitle:"复制语雀知识库、文档、段落等内容链接，嵌入到本文档中",yuqueDescription:"支持嵌入语雀文档、表格、思维导图",buttonTitle:"插入图片、表格、<br />附件、代码块等卡片",miniButtonTitle:"插入图片、标签、<br/>语雀文档等",normal:" ",media:"媒体",engineering:"工程",description:"输入  <code>".concat(du,"</code> + <code>/</code>  快速插入卡片"),table:"表格",tableDescription:"插入在线表格",image:"图片",imageDescription:"上传一张或多张图片",video:"本地视频",videoDescription:"上传一个本地视频",youku:"在线视频",youkuName:"优酷",youkuDescription:"插入在线视频",youkuSubTitle:"支持优酷、哔哩哔哩、淘宝视频",youkuTooltipTitle:"支持以下网站",youkuSiteDesc:"优酷、哔哩哔哩、淘宝视频",thirdparty:"第三方服务",music:"音乐",internalThirdpartySubTitle:"支持虾米、Riddle、DeepInsight 等",thirdpartySubTitle:"支持墨刀，ProcessOn，CodePen 等",thirdpartyTooltipTitle:"支持以下服务",processonName:"ProcessOn",modaoName:"墨刀",gaodeDesc:"地图",toolsDesc:"开发",designDesc:"设计",designSubDesc:"（墨刀，ProcessOn，Figma）",internalGaodeDesc:"地图",internalToolDesc:"开发",internalChartDesc:"数据",bilibili:"bilibili",bilibiliName:"哔哩哔哩",bilibiliDescription:"插入哔哩哔哩视频",codeblock:"代码块",codeblockDescription:"输入代码片段",file:"附件",fileDescription:"上传单个或多个附件",math:"公式",mathDescription:"输入 Latex 公式",calendar:"日历",calendarDescription:"插入日历",riddle:"代码演示（Riddle）",riddleDescription:"插入 Riddle 代码片段",mindmap:"思维导图",mindmapDescription:"绘制简易思维导图",puml:"PlantUML",pumlDescription:"绘制 PlantUML 图",flowchart:"流程图",flowchartDescription:"绘制 Flowchart 图",mermaid:"Mermaid",mermaidDescription:"绘制 Mermaid 图",diagram:"文本绘图",diagramDescription:"通过代码绘图",diagramSubTitle:"支持PlantUML、Mermaid 等",graphviz:"Graphviz",graphvizDescription:"绘制 Graphviz 图",lockedtextTitle:"加密文本",lockedtextDescription:"需要密码才可查看",premium:"付费阅读",premiumDescription:"需要付费才能查看",vote:"投票"},embedCardMenu:{embed:"嵌入",introduction:"引入"},thirdparty:{tip:"粘贴%s链接，如%s",defaultTip:"粘贴第三方服务的链接到此处",placeholders:{modao:"粘贴墨刀分享中的嵌入代码，如 <iframe src=…"},names:{amap:"高德地图",codepen:"CodePen",deepinsight:"DeepInsight",figma:"Figma",herbox:"Herbox",processon:"ProcessOn",modao:"墨刀",riddle:"Riddle",ali:"内部三方工具",music163:"网易云音乐",xiami:"虾米",ximalaya:"喜马拉雅",youtube:"YouTube",youku:"优酷",bilibili:"哔哩哔哩",taobao:"淘宝视频",canva:"Canva",jinshuju:"金数据"},category:{map:"地图",media:"媒体",development:"开发",form:"表单",data:"数据",design:"设计"}},mention:{text:"提及"},markdown:{pasteTitle:"是否需要做样式转换？",pasteContent:"检测到粘贴内容符合 Markdown 语法，是否需要做样式转换？",pasteButton:"立即转换"},search:{searchAndReplace:"查找并替换",search:"查找",replace:"替换",replaceAll:"替换全部",replaceTo:"替换为",pleaseEnter:"请输入",next:"下一个",previous:"上一个"},translate:{title:"翻译",subTitle:"源 & 目标",automaticDetection:"自动检测",zh:"中文",en:"英文",translation:"译文",insertDoc:"插入文档",placeholder:"请在文档中选择需要翻译的内容"},repository:{title:"插入资源"},calendar:{format:"YYYY 年 M 月",weekdays:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],today:"今天",tip:{title:"添加日程标题",desc:"添加说明",error:"日历渲染出错"},lang:"zh"},importDoc:{addressInvalid:"请输入正确的链接地址"},bookmarkLink:{untitled:"无标题",toLink:"转为链接",loading:"内容加载中 ...",loadingError:"获取内容失败"},yuque:{untitled:"无标题",unsupportedThread:"暂不支持显示话题",recently:"最近使用",recommendTip:"在文档中贴入链接可快速关联内容",searchRange:"搜索范围：",loading:"内容加载中 ...",loadingError:"获取内容失败",searching:"搜索中 ...",searchError:"搜索失败",emptySearchTip:"搜索不到结果",emptySearchSubTip:"可以尝试贴入链接引入"},audio:{transcodeError:"转码失败",failedToQuery:"查询失败",uploadError:"上传失败",invalidAudio:"无效音频，请重新上传",copyright:"由于版权保护，不支持在公开文档中直接播放该音频，可点击文件名播放",notSupport:"此处不支持播放音频，可点击文件名播放",cantPlay:"音频文件不能播放",query:"查询音频信息中...",linkTip:"点击打开"},ui:{subPanel:{uploadBtn:"上传文件"}},embedToolbar:{toggleMargin:"为卡片添加间距",deleteCard:"删除卡片",saveToResource:"保存到资源知识库"},errorMessage:{currentDOCURL:"不支持嵌入当前文档",notSupportURL:"不支持嵌入该链接"},repositorySidebar:{title:"插入资源",searchTip:"输入资源名称",searchResultTip:"搜索结果",topLevelBreadcrumbName:"所有资源知识库",emptySearchTip:"没有资源",noResourceBook:"无资源知识库，立刻",create:"创建",error:"不能获取资源文件"},copyParagraphLink:"复制段落链接",copySuccess:"复制成功！",note:{image:"插入图片",todo:"插入待办",link:"插入书签",localFile:"插入附件"}};function wu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wu(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _u={en:lu,"zh-cn":ku},Eu=y()("editor:toolbar:uploader"),Cu=K()(window,"AliyunUpload.Vod"),Ou=function(){function e(t){l()(this,e),this.trigger=t.trigger,this.engine=t.engine,this.onToolBarClick=t.onToolBarClick,this.onToolBarError=t.onToolBarError,this.cardRoot=null,this.selectedFile=null,this.data={},this.initUploader()}return u()(e,[{key:"getLang",value:function(){return this.engine&&this.engine.options.lang||"zh-cn"}},{key:"getErrorMessageByCode",value:function(e){var t=_u[this.getLang()].video;return(void 0===t?{}:t)[e]}},{key:"initUploader",value:function(){var e=this;if(Cu&&this.trigger){var t=new Cu({timeout:6e4,partSize:1048576,parallel:5,retryCount:3,retryDuration:2,region:"",userId:"1057412961847317",addFileSuccess:function(n){e.onToolBarClick();var r=n.file;e.insertCard(r);var a=Zs.check("video",r.size);null===a?(Eu("上传:文件选择: %j",r),e.selectedFile=r,t.startUpload()):e.setCardError(e.getErrorMessageByCode("sizeError"),a)},onUploadFailed:function(t,n,r){e.setCardError(r||e.getErrorMessageByCode("uploadFailed"))},onUploadstarted:function(n){var a=n.file,o=a.name,i=a.size,c=window.appData.doc,l=c.id,s=c.type;Object(r.ajax)({method:"post",url:K()(e.engine,"options.video.uploadInfoAction")||"/api/video/upload_info",dataType:"json",data:{filename:o,filesize:i,attachable_id:l,attachable_type:s},success:function(e){var r=e.data,a=r.UploadAuth,o=r.UploadAddress,i=r.VideoId;t.setUploadAuthAndAddress(n,a,o,i)},error:function(t){try{var n=JSON.parse(t.xhr.response);if(n&&400===n.status&&n.code){var r=Zs.getMessageByCode(n.code,n);r&&e.setCardError(e.getErrorMessageByCode("uploadFailed"),r)}}catch(t){console.log(t)}e.onToolBarError({code:-100})},processData:!0})},onUploadSucceed:function(t){var n=t.videoId,a=t.file,o=a.name,i=a.size,c=a.type,l=window.appData.doc,s=l.id,u=l.type,d=o.split(".").pop();d&&(d=".".concat(d)),Object(r.ajax)({method:"post",url:K()(e.engine,"options.video.videoInfoAction")||"/api/video/video_info",dataType:"json",data:{filename:o,filesize:i,type:c||d||"unknow",attachable_id:s,attachable_type:u,video_id:n},success:function(){e.updateCard({status:"uploaded",videoId:n}),Eu("上传:成功: videoId %s",n)},error:function(){e.onToolBarError({code:-100}),e.setCardError(e.getErrorMessageByCode("uploadFailed"))},processData:!0})},onUploadTokenExpired:function(){e.setCardError(e.getErrorMessageByCode("uploadFailed"))},onUploadProgress:function(t,n,r){var a=Math.ceil(100*r);Eu("上传:进度: %j",a),a>98||e.updatePercent({percent:a})}});this.trigger.addEventListener("change",(function(n){var r=n.target.files[0];t.addFile(r,null,null,null,null),e.trigger.value=""}),!1),window.uploader=t}}},{key:"insertCard",value:function(e){var t=this.engine;return this.data={status:"uploading",name:e.name,size:e.size,percent:0},this.cardRoot=t.change.insertCard("video",xu(xu({},this.data),{},{margin:!0})),this.cardRoot}},{key:"updatePercent",value:function(e){this.cardRoot.find("[data-role=percent]").html("".concat(js(e.percent),"%"))}},{key:"setCardError",value:function(e,t){t?t.callback(Yc.a[t.level](t.msg,t.alwaysOpen?0:void 0)):Yc.a.error(e),this.cardRoot&&Nr.updateCard(this.engine,this.cardRoot,xu(xu({},this.data),{},{message:e,status:"error"}))}},{key:"updateCard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.engine;this.data=Object.assign(this.data,e),t.history.hold(),t.change.updateCard(this.cardRoot,this.data)}}]),e}();var Su=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),(r=t.call(this,e)).state={activated:!1},r.videoTrigger=null,r.videoUploader=null,r}return u()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.onToolBarClick,n=e.engine;this.videoUploader=new Ou({trigger:this.videoTrigger,engine:n,onToolBarClick:t,onToolBarError:this.videoError})}},{key:"videoError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.code;-100===t&&Yc.a.error("网络异常：Failed to fetch")}},{key:"handleMouseEnter",value:function(){this.setState({activated:!0})}},{key:"handleMouseLeave",value:function(){this.setState({activated:!1})}},{key:"renderCommon",value:function(){var e=this.props,t=e.item,n=e.index,r=e.itemOnClick,a=this.state.activated?" lake-collapse-list-item-active":"",o=!(!t.isDisable||!t.isDisable()),i=o?" disable":"",c=t.subTitle?{height:"auto"}:{};return Fc.a.createElement("div",{"data-aspm-click":"".concat(t.name),"data-card-category":t.category||t.name,accessbilityid:"".concat(t.name,"-card-button"),className:"lake-collapse-list-item".concat(a).concat(i).concat(t.noBorder?" no-border":""),key:n,"data-index":n,onClick:o?null:r,onMouseEnter:this.handleMouseEnter.bind(this),onMouseLeave:this.handleMouseLeave.bind(this),style:c},Fc.a.createElement("div",{className:"lake-collapse-item-icon",dangerouslySetInnerHTML:{__html:t.icon}}),Fc.a.createElement("div",{className:"lake-collapse-item-text"},Fc.a.createElement("div",{className:"lake-collapse-item-title"},t.title,t.subTitle&&Fc.a.createElement("span",{className:"lake-collapse-item-sub-title"},t.subTitle),t.subNew&&Fc.a.createElement("span",{className:"lake-sub-new-tag"},t.subNew),t.isNew?Fc.a.createElement("span",{className:"lake-svg-icon-new-card"}):"")))}},{key:"formatAcceptExts",value:function(){return[".3gp",".asf",".avi",".dv",".flv",".f4v",".gif",".m2t",".m4v",".mj2",".mjpeg",".mkv",".mov",".mp4",".mpg",".mpeg",".mts",".ogg",".rm",".rmvb",".swf",".ts",".vob",".wmv",".webm"].join(",")}},{key:"renderVideo",value:function(){var e=this,t=this.props,n=t.item,r=t.index,a=this.state.activated?" lake-collapse-list-item-active":"";return Fc.a.createElement("div",{"data-aspm-click":"".concat(n.name),"data-card-category":n.category||n.name,className:"lake-collapse-list-item".concat(a),key:r,"data-index":r,onMouseEnter:this.handleMouseEnter.bind(this),onMouseLeave:this.handleMouseLeave.bind(this),onClick:function(){e.videoTrigger.click()}},Fc.a.createElement("div",{className:"lake-collapse-item-icon",dangerouslySetInnerHTML:{__html:n.icon}}),Fc.a.createElement("div",{className:"lake-collapse-item-text"},Fc.a.createElement("div",{className:"lake-collapse-item-title"},n.title)),Fc.a.createElement("input",{ref:function(t){return e.videoTrigger=t},type:"file",accept:this.formatAcceptExts(),className:"uploader"}))}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.item,r="video"===t?this.renderVideo():this.renderCommon();return Fc.a.createElement(Ks,{data:n.tooltip},r)}}]),n}(Fc.a.PureComponent);Su.propTypes={engine:Hc.a.object,type:Hc.a.string,item:Hc.a.object,index:Hc.a.number,itemOnClick:Hc.a.func,onToolBarClick:Hc.a.func};var Ru=[".3gp",".asf",".avi",".dv",".flv",".f4v",".gif",".m2t",".m4v",".mj2",".mjpeg",".mkv",".mov",".mp4",".mpg",".mpeg",".mts",".ogg",".rm",".rmvb",".swf",".ts",".vob",".wmv",".webm"],ju=Ru.join(","),Pu=a.EXTS.AUDIO_EXT.map((function(e){return".".concat(e)})).join(",");function Au(e){return"msOffice"===e?a.EXTS.DOC_MS_OFFICE_STR:"macOffice"===e?a.EXTS.DOC_MAC_OFFICE_STR:"design"===e?a.EXTS.DOC_DESIGN_STR:"mind"===e?a.EXTS.DOC_MIND_STR:"pdf"===e?".pdf":"video"===e?ju:"audio"===e?Pu:"localdoc"===e?a.EXTS.OFFICE_EXT_STR+", "+a.EXTS.MAC_OFFICE_STR:a.EXTS.OFFICE_EXT_STR+", "+a.EXTS.MAC_OFFICE_STR+", "+ju}function Tu(e,t){if(1===e.name.split(".").length)return null;var n=e.name.toLowerCase();if(t&&!(t=t.split(/\s*,\s*/)).some((function(e){return n.endsWith(e)})))return null;var r=Ru.some((function(e){return n.endsWith(e)})),o=a.EXTS.AUDIO_EXT.some((function(e){return n.endsWith(e)}));return{isVideo:r,isAudio:o,isDoc:!r&&!o,file:e}}var Du=function(e){oe()(r,Lc.a);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(r);function r(){return l()(this,r),n.apply(this,arguments)}return u()(r,[{key:"run",value:(t=bl()(wl.a.mark((function e(){return wl.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),r}();var Mu=function(e){oe()(a,Du);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(a);function a(e,t,r,o){var i;return l()(this,a),i=n.call(this),g()(de()(i),"id",-1),g()(de()(i),"_engine",null),g()(de()(i),"_file",null),g()(de()(i),"_url",null),g()(de()(i),"_params",null),i.id=Xe.randomId(12),i._engine=e,i._file=t,i._url=r,i._params=o,i}return u()(a,[{key:"run",value:(t=bl()(wl.a.mark((function e(){var t=this;return wl.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=new FormData,a=new URL(t._url,location.href);t._params&&Object.keys(t._params).forEach((function(e){a.searchParams.append(e,t._params[e])})),n.append("multipart",t._file),Object(r.ajax)({method:"post",url:a.href,dataType:"json",data:n,processData:!0,xhr:function(){t.emit("start");var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){t.emit("progress",e)}),!1),e},success:function(n){t._handleSuccess(n),e({success:!0,res:n})},error:function(n){t._handleError(n),e({success:!1,error:n})}})})));case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"_handleSuccess",value:function(e){this.emit("success",e)}},{key:"_handleError",value:function(e){this.emit("error",e)}}]),a}();var Nu=r.MultiPartUploadUtil.getOssClient,Lu=r.MultiPartUploadUtil.multipartUpload,Iu=function(e){oe()(a,Du);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(a);function a(e,t,r,o){var i;return l()(this,a),i=n.call(this),g()(de()(i),"id",-1),g()(de()(i),"_engine",null),g()(de()(i),"_file",null),g()(de()(i),"_url",null),g()(de()(i),"_params",null),i.id=Xe.randomId(12),i._engine=e,i._file=t,i._url=r,i._params=o,i}return u()(a,[{key:"run",value:(t=bl()(wl.a.mark((function e(){var t,n,a,o,i,c,l,s,u,d,f=this;return wl.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URL(this._url,location.href),n=t.searchParams.get("attachable_id"),a=t.searchParams.get("attachable_type"),n||a||(o=new URL(K()(this._engine,"options.video.uploadAction"),location.href),n=o.searchParams.get("attachable_id"),a=o.searchParams.get("attachable_type")),e.prev=5,this.emit("start"),e.next=9,Nu(this._file,n,a,"video");case 9:return i=e.sent,c=i.ossClient,l=i.filekey,s=i.filekey_digest,u=function(e){f.emit("progress",{loaded:e,total:1,lengthComputable:!0})},e.next=16,Lu(this._file,c,l,u);case 16:return d=e.sent,e.abrupt("return",new Promise((function(e){var t={filename:f._file.name,attachable_type:a,attachable_id:n,filekey:d.name,filekey_digest:s};Object(r.ajax)({method:"post",url:"/api/video/after_upload",dataType:"json",data:t,processData:!0,xhr:function(){f.emit("start");var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){f.emit("progress",e)}),!1),e},success:function(t){f._handleSuccess(t),e({success:!0,res:t})},error:function(t){f._handleError(t),e({success:!1,error:t})}})})));case 20:return e.prev=20,e.t0=e.catch(5),this._handleError(e.t0),e.abrupt("return",{success:!1,error:e.t0});case 24:case"end":return e.stop()}}),e,this,[[5,20]])}))),function(){return t.apply(this,arguments)})},{key:"_handleSuccess",value:function(e){this.emit("success",e)}},{key:"_handleError",value:function(e){this.emit("error",e)}}]),a}();function Bu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bu(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fu=function(){function e(){l()(this,e)}return u()(e,null,[{key:"hasTask",value:function(e,t){return!(!e.uploadManager||!e.uploadManager.hasTask(t))}},{key:"checkStatus",value:function(e,t){var n=!0;return{cancel:function(){n=!1},promise:Uu(e,t,(function(){return n}))}}},{key:"uploadVideo",value:function(e,t){var n,r=e.uploadManager,o=K()(e||{},"options.localVideo.uploadAction")||"/api/video",i=K()(e||{},"options.localVideo.disableMultiPartUpload"),c={format:"video"};n=a.ua.desktop||i?new Mu(e,t,o,c):new Iu(e,t,o,c);var l=function(e,t,n){return e.change.insertCard("video",{status:"pending",name:t.name,size:t.size,percent:0,taskId:n,margin:!0})}(e,t,n.id),s=Zs.check("video",t.size);null===s?(r.addTask(n),n.on("start",(function(){Yu(e,l,{status:"uploading",percent:0})})),n.on("progress",(function(t){if(t.lengthComputable){var n=parseInt(t.loaded/t.total*100,10);Yu(e,l,{status:"uploading",percent:n})}})),n.on("success",(function(t){n instanceof Iu&&e.event.trigger("multipartUploadSuccess"),Yu(e,l,{status:"uploaded",videoId:t.data.video_id})})),n.on("error",(function(t){n instanceof Iu&&e.event.trigger("multipartUploadError");var r={};try{r=JSON.parse(t.xhr.response)}catch(e){r={}}var a=r&&r.code?Zs.getMessageByCode(r.code,r):null;Gu(e,l,Wu(e,"uploadFailed")+(r.message||""),a)}))):Gu(e,l,Wu(e,"sizeError"),s)}},{key:"uploadAudio",value:function(e,t){var n=e.uploadManager,r=K()(e||{},"options.localVideo.uploadAction")||"/api/video",a=new Mu(e,t,r,{format:"audio"}),o=function(e,t,n){return e.change.insertCard("audio",{status:"pending",fileName:t.name,fileSize:t.size,percent:0,taskId:n,margin:!0})}(e,t,a.id);n.addTask(a),a.on("start",(function(){Yu(e,o,{status:"uploading",percent:0})})),a.on("progress",(function(t){if(t.lengthComputable){var n=parseInt(t.loaded/t.total*100,10);Yu(e,o,{status:"uploading",percent:n})}})),a.on("success",(function(t){var n=t.data;Yu(e,o,{status:"uploaded",fileSize:n.filesize,fileName:n.filename,audioId:n.video_id})})),a.on("error",(function(t){Gu(e,o,Wu(e,"uploadFailed")+(t.message||""))}))}}]),e}();function Uu(e,t,n){return Vu.apply(this,arguments)}function Vu(){return(Vu=bl()(wl.a.mark((function e(t,n,r){return wl.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=bl()(wl.a.mark((function e(a,o){var i;return wl.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qu(t,n);case 2:if(i=e.sent,r()){e.next=5;break}return e.abrupt("return");case 5:if(!i){e.next=10;break}if(i.success){e.next=9;break}return o(new Error("query failed")),e.abrupt("return");case 9:return e.abrupt("return",a(i));case 10:setTimeout((function(){r()&&a(Uu(t,n,r))}),3e3);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qu(e,t){return Hu.apply(this,arguments)}function Hu(){return(Hu=bl()(wl.a.mark((function e(t,n){var a;return wl.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var a=K()(t||{},"options.localVideo.queryAction")||"/api/video";Object(r.ajax)({method:"get",url:a,data:{video_id:n},success:function(t){"success"===t.data.status?e({done:!0,data:t.data.info}):"fail"===t.data.status?e({error:!0}):"transcoding"===t.data.status&&e({done:!1})},error:function(t){console.error(t),e({error:!0})}})}));case 2:if(!(a=e.sent).error){e.next=5;break}return e.abrupt("return",{success:!1});case 5:if(!a.done){e.next=7;break}return e.abrupt("return",{success:!0,data:a.data});case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wu(e,t){var n=(e.locale||{}).video;return(void 0===n?{}:n)[t]}function Yu(e,t,n){Xu(e,t,n)}function Gu(e,t,n,r){r?r.callback(Yc.a[r.level](r.msg,r.alwaysOpen?0:void 0)):Yc.a.error(n),Xu(e,t,{status:"error",message:n})}function Xu(e,t,n){var r=e.card.getValue(t),a=e.card.getComponent(t);a&&a.setValue&&(e.history.hold(),a.setValue(zu(zu({},r),n)),a.rerender())}var Ku=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.engine,r=t.getEngine;n=r()||n;var a=this.getAccept();return Fc.a.createElement("span",{onClick:function(){return e.fileInput.click()}},Fc.a.createElement("input",{type:"file",accept:a,ref:function(t){e.fileInput=t},onChange:function(t){for(var r=e.fileInput.files,o=[],i=0,c=r.length;i<c;i++){var l=Tu(r[i],a);l&&o.push(l)}0!==o.length?(e.onChange(o),t.target.value=null):Yc.a.error(n.locale.localdoc.notSupportExt)},style:{display:"none"},multiple:"multiple"}),this.props.children)}},{key:"getAccept",value:function(){var e=this.props,t=e.engine,n=e.getEngine,r=e.accept;if(t=n()||t,r)return"function"==typeof r?r(t):r;var a=Ss(this.props.name);return t.uploader&&t.uploader.getAccept?t.uploader.getAccept(a):void 0}},{key:"onChange",value:function(e){var t=this.props,n=t.onBeforeUpload,r=t.onAfterUpload,a=t.onBeforeInsertCard,o=this.props,i=o.engine;i=(0,o.getEngine)()||i;var c=[],l=[],s=[];if(e.forEach((function(e){e.isDoc?c.push(e.file):e.isVideo?l.push(e.file):s.push(e.file)})),!c.length)return l.length?(this.props.onClick&&this.props.onClick(),void Fu.uploadVideo(i,l[0])):s.length?(this.props.onClick&&this.props.onClick(),void Fu.uploadAudio(i,s[0])):void 0;i.uploader.post("localdoc",c,{onBeforeUpload:n,onAfterUpload:r,onBeforeInsertCard:a})}}]),n}(Fc.a.Component);g()(Ku,"propTypes",{name:Hc.a.string,engine:Hc.a.object,getEngine:Hc.a.func,children:Hc.a.object,onBeforeUpload:Hc.a.func,onAfterUpload:Hc.a.func,onBeforeInsertCard:Hc.a.func,onClick:Hc.a.func,accept:Hc.a.oneOfType([Hc.a.string,Hc.a.func])}),g()(Ku,"defaultProps",{onClick:function(){}});var Zu=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"render",value:function(){var e="lake-upload-panel ".concat(this.props.className||"");return Fc.a.createElement("div",{className:e,onClick:function(e){var t=new MouseEvent("mouseout");t.initEvent("mouseout",!0,!0),e.currentTarget.dispatchEvent(t)}},this.renderMainButtons(),Fc.a.createElement("div",{className:"lake-upload-panel-item-box"},this.renderItems()))}},{key:"renderMainButtons",value:function(){var e=this.props.data.items.filter((function(e){return e.mainButton}));if(!e.length)return null;var t=e[0];return Fc.a.createElement("div",{className:"lake-upload-panel-main-btns"},Fc.a.createElement(Ku,ml()({},this.props,{accept:t.accept}),Fc.a.createElement("div",{className:"lake-upload-panel-btn"},Fc.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-".concat(t.icon)}),t.title)))}},{key:"renderItems",value:function(){var e=this,t=this.props.data;return t.items?t.items.map((function(t,n){return t.mainButton?null:e.renderItem(t,n)})):null}},{key:"renderItem",value:function(e,t){return"newupload"===e.type?this.renderUpload(e,t):"button"===e.type?this.renderButton(e,t):"group"===e.type?this.renderGroup(e,t):null}},{key:"renderGroup",value:function(e,t){var n=this;return Fc.a.createElement("div",{className:"lake-upload-panel-group",key:e.title+""+t},Fc.a.createElement("div",{className:"lake-upload-panel-group-title"},e.title),Fc.a.createElement("div",{className:"lake-upload-panel-group-items"},e.items.map((function(e,t){return n.renderItem(e,t)}))))}},{key:"renderUpload",value:function(e,t){var n=null;return e.icon&&(n=e.icon.startsWith("<")?Fc.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.icon}}):Fc.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-".concat(e.icon)})),Fc.a.createElement(Ku,ml()({},this.props,{accept:e.accept,name:e.name,key:e.name+""+t}),Fc.a.createElement("div",{className:"lake-upload-panel-item","data-aspm-click":e.name,"data-card-category":e.category||e.name,accessbilityid:"".concat(e.name,"-card-button")},Fc.a.createElement("div",{className:"lake-upload-panel-item-icon"},n),Fc.a.createElement("div",{className:"lake-upload-panel-item-text"},Fc.a.createElement("div",{className:"lake-upload-panel-item-title"},e.title),e.desc?Fc.a.createElement("div",{className:"lake-upload-panel-item-subtitle"},e.desc):null)))}},{key:"renderButton",value:function(e,t){var n=this;return Fc.a.createElement("div",{"data-aspm-click":e.name,"data-card-category":e.category||e.name,accessbilityid:"".concat(e.name,"-card-button"),className:"lake-upload-panel-item",key:t,onClick:function(t){n.props.onClick(t),e.onClick&&e.onClick(t)}},Fc.a.createElement("div",{className:"lake-upload-panel-item-icon"},Fc.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-".concat(e.icon)})),Fc.a.createElement("div",{className:"lake-upload-panel-item-text"},Fc.a.createElement("div",{className:"lake-upload-panel-item-title"},e.title),e.desc?Fc.a.createElement("div",{className:"lake-upload-panel-item-subtitle"},e.desc):null))}}]),n}(Fc.a.Component);function $u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}g()(Zu,"propTypes",{showAllUploadBtn:Hc.a.bool,data:Hc.a.object,engine:Hc.a.object,getEngine:Hc.a.func,className:Hc.a.string,onClick:Hc.a.func}),g()(Zu,"defaultProps",{showAllUploadBtn:!0,onClick:function(){}});var Qu=Gc.a.Panel,Ju=document.createElement("div");Ju.className="yuquesdk lake-prevent-card-activated",document.body.appendChild(Ju);var ed=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"handleClick",(function(e,t,n){e.preventDefault(),e.stopPropagation(),r.props.disableClick||(r.props.onClick(),t.onClick(n))})),r.listNode=Fc.a.createRef(),r.engine=e.engine,r}return u()(n,[{key:"renderItem",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){};return r||"upload"===e.type||"newupload"===e.type||(a=function(t){return n.handleClick(t,e)}),Fc.a.createElement(Su,{item:e,index:t,itemOnClick:a,key:"collapseItem".concat(t),engine:this.engine})}},{key:"renderVideo",value:function(e,t){return Fc.a.createElement(Su,{item:e,index:t,type:"video",key:"collapseItem".concat(t),onToolBarClick:this.props.onClick,engine:this.engine})}},{key:"renderTable",value:function(e,t){var n=this;return e.disableSelector?this.renderItem(e,t):Fc.a.createElement(Xc.a,{key:t,content:Fc.a.createElement(Ys,{onSelect:function(t,r,a){n.handleClick(t,e,{rows:r,cols:a})}}),placement:"rightTop"},Fc.a.createElement("div",null,this.renderItem(e,t)))}},{key:"renderLocalDoc",value:function(e,t){var n=this;return Fc.a.createElement(Xc.a,{key:t,overlayClassName:"lake-upload-panel-popover",placement:"rightTop",getPopupContainer:function(){return Ju},content:Fc.a.createElement(Zu,ml()({},this.props,{className:"lake-upload-panel-localdoc",data:e,getEngine:function(){return n.props.engine}}))},Fc.a.createElement("div",null,this.renderItem(e,t,!0)))}},{key:"renderThirdparty",value:function(e,t){var n=this;return Fc.a.createElement(Xc.a,{key:t,overlayClassName:"lake-upload-panel-popover",placement:"rightTop",getPopupContainer:function(){return Ju},content:Fc.a.createElement(Zu,{className:"lake-upload-panel-thirdparty",data:e,engine:this.props.engine,getEngine:function(){return n.props.engine},onClick:this.props.onClick,showAllUploadBtn:!1})},Fc.a.createElement("div",null,this.renderItem(e,t,!0)))}},{key:"componentDidMount",value:function(){this.resetPosition()}},{key:"componentDidUpdate",value:function(){this.resetPosition()}},{key:"resetPosition",value:function(){var e=this.listNode.current;if(e&&this.props.active){var t=e.parentNode;if(t){var n=t.getBoundingClientRect();window.innerHeight-n.bottom<n.top?e.classList.add("lake-button-set-list-to-top"):e.classList.remove("lake-button-set-list-to-top")}}}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.data,a=t.description,o=t.active,i=t.activeKeys,c="";return a&&(c=Fc.a.createElement("div",{className:"lake-toolbar-collapse-description"},Fc.a.createElement("div",{className:"description",dangerouslySetInnerHTML:{__html:a}}))),Fc.a.createElement("div",{className:vl()("lake-button-set-list",n,{"lake-toolbar-collapse-no-header":r.length<=1,"lake-button-set-list-active":o}),ref:this.listNode,"data-aspm":"card_selector"},c,Fc.a.createElement(Gc.a,{className:"lake-toolbar-collapse",defaultActiveKey:i},r.map((function(t,n){return Fc.a.createElement(Qu,{showArrow:!1,header:t.title,disabled:!0,key:n},t.items.map((function(t,n){if("upload"===t.type){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$u(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.props);return r.name=t.name,r.getEngine=t.getEngine,r.getEngine||(r.getEngine=function(){return r.engine}),Fc.a.createElement(Ws,ml()({key:n},r),e.renderItem(t,n))}return"newupload"===t.type?Fc.a.createElement(Ku,ml()({},e.props,{accept:t.accept,name:t.name,key:"NewUpload_".concat(t.name,"_").concat(n),getEngine:function(){return e.props.engine}}),e.renderItem(t,n)):"table"===t.name?e.renderTable(t,n):"localdoc"===t.name?e.renderLocalDoc(t,n):"thirdparty"===t.name?e.renderThirdparty(t,n):"video"===t.name?e.renderVideo(t,n):e.renderItem(t,n)})))}))))}}]),n}(Fc.a.Component);g()(ed,"propTypes",{className:Hc.a.string,data:Hc.a.array,active:Hc.a.bool,activeKeys:Hc.a.array,onClick:Hc.a.func,description:Hc.a.string,engine:Hc.a.object,disableClick:Hc.a.bool}),g()(ed,"defaultProps",{disableClick:!1});var td=[{id:"good",package:"que",title:{"zh-cn":"棒","en-us":"Good"},url:"https://gw.alipayobjects.com/mdn/rms_15e52e/afts/img/A*UHsnTpLQ48gAAAAAAAAAAAAAARQnAQ"},{id:"fighting",package:"que",title:{"zh-cn":"加油","en-us":"Fighting"},url:"https://gw.alipayobjects.com/mdn/rms_15e52e/afts/img/A*pm-hQY3BLV8AAAAAAAAAAAAAARQnAQ"},{id:"hooray",package:"que",title:{"zh-cn":"撒花","en-us":"Hooray"},url:"https://gw.alipayobjects.com/mdn/rms_15e52e/afts/img/A*9T62QYqFFhYAAAAAAAAAAAAAARQnAQ"},{id:"humble",package:"que",title:{"zh-cn":"卑微","en-us":"Humble"},url:"https://gw.alipayobjects.com/mdn/rms_15e52e/afts/img/A*BHK1RpChRAwAAAAAAAAAAAAAARQnAQ"},{id:"pat",package:"que",title:{"zh-cn":"摸头","en-us":"Pat"},url:"https://gw.alipayobjects.com/mdn/rms_15e52e/afts/img/A*2eERTp0nd5IAAAAAAAAAAAAAARQnAQ"},{id:"angry",package:"que",title:{"zh-cn":"生气","en-us":"Angry"},url:"https://gw.alipayobjects.com/mdn/rms_15e52e/afts/img/A*b8hcRpIQ-QUAAAAAAAAAAAAAARQnAQ"},{id:"pensive",package:"que",title:{"zh-cn":"思考","en-us":"Pensive"},url:"https://gw.alipayobjects.com/mdn/rms_15e52e/afts/img/A*TJ7dTIRWjVoAAAAAAAAAAAAAARQnAQ"},{id:"xiaoku",package:"que",title:{"zh-cn":"笑哭","en-us":"XiaoKu"},url:"https://gw.alipayobjects.com/mdn/rms_15e52e/afts/img/A*qOVbRIyytEIAAAAAAAAAAAAAARQnAQ"},{id:"yes",package:"que",title:{"zh-cn":"击掌","en-us":"Yes"},url:"https://gw.alipayobjects.com/mdn/rms_15e52e/afts/img/A*uJPyRLbsRS4AAAAAAAAAAAAAARQnAQ"}];function nd(e){try{return localStorage.getItem(e)}catch(e){console.warn(e)}return null}function rd(e,t){try{return localStorage.setItem(e,t)}catch(e){console.warn(e)}}function ad(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e.command.add(t,{autoSave:function(){return a},queryState:function(){return!!e[r]&&("sidebar"===r?e[r].activate===t:e[r].storeConfig&&nd("lake-"+r)===t)},execute:function(a){if(!0!==a&&e.command.queryState(t))e[r].close();else{var o=n.call(e);e[r].set(o)}}})}function od(e,t,n){ad(e,t,n,"sidebar")}function id(e,t,n){var r=e.locale,a=e.iframeHelper;if(e.iframeHelper.canAdd())e.command.execute(t,n);else{var o=a.options.limit;e.messageError(r.card.iframeOverLimit.replace("${limit}",o))}}var cd=["youku","bilibili","taobao","xiami","music163","amap","ali"],ld=["youku","bilibili","taobao","xiami","music163","amap","modao","figma","canva","processon","codepen","jinshuju"],sd=["riddle","herbox","deepinsight"];function ud(){return!(!ks||ks.isYuque)}function dd(e){var t=ud();return Array.isArray(e)&&(e=(e=e.map((function(e){return sd.includes(e)?"ali":e}))).filter((function(e){return-1!==cd.indexOf(e)||-1!==ld.indexOf(e)}))).length?e:t?cd.slice():ld.slice()}var fd=function(e,t){var n,r=e.locale,a={name:"video",type:"newupload",title:r.localdoc.items.video,pinyin:"视频,sp,shipin,video,mp4,avi",icon:'<span class="lake-svg-icon lake-svg-icon-video" />',accept:Au("video")},o=[{name:"webappImage",icon:'<span class="lake-svg-icon lake-svg-icon-insert-image" />',title:r.card.image,description:r.card.imageDescription,onClick:(n=bl()(wl.a.mark((function t(){var n,r,a;return wl.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a="",null==e||null===(n=e.options)||void 0===n||null===(r=n.webappCustomImage)||void 0===r||!r.onUpload){t.next=11;break}return t.prev=2,t.next=5,e.options.webappCustomImage.onUpload(e);case 5:a=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.warn("webapp-custom-image upload error",t.t0);case 11:a&&e.change.insertCard("image",{status:"done",src:a});case 12:case"end":return t.stop()}}),t,null,[[2,8]])}))),function(){return n.apply(this,arguments)})}],i=[{name:"image",type:"upload",icon:'<span class="lake-svg-icon lake-svg-icon-insert-image" />',title:r.card.image,pinyin:"图片,tp,tupian,image",description:r.card.imageDescription},{name:"table",icon:'<span class="lake-svg-icon lake-svg-icon-insert-table" />',title:r.card.table,pinyin:"表格,bg,biaoge,table",description:r.card.tableDescription,onClick:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{rows:3,cols:3};e.command.execute("table",t)}},{name:"yuque",icon:'<span class="lake-svg-icon lake-svg-icon-insert-yuque" />',title:r.card.yuque,pinyin:"语雀,yqwd,yuquewendang,yuquedoc",description:r.card.yuqueDescription,onClick:function(){id(e,"yuque")}},{name:"thirdparty",icon:'<span class="lake-svg-icon lake-svg-icon-insert-thirdparty" />',title:r.card.thirdparty,description:r.card.thirdpartyDescription,items:pd(e)},{name:"codeblock",icon:'<span class="lake-svg-icon lake-svg-icon-insert-codeblock" />',title:r.card.codeblock,pinyin:"代码块,dmk,daimakuai,code",description:r.card.codeblockDescription,onClick:function(){e.command.execute("codeblock","")}},{name:"file",type:"upload",icon:'<span class="lake-svg-icon lake-svg-icon-insert-file" />',title:r.card.file,pinyin:"附件,fj,fujian,file,attachment",description:r.card.fileDescription},{name:"math",icon:'<span class="lake-svg-icon lake-svg-icon-insert-math" />',title:r.card.math,pinyin:"数学公式,sxgs,公式,gs,gongshi,formula,math,latex",description:r.card.mathDescription,onClick:function(){e.command.execute("math")}},{name:"calendar",icon:'<span class="lake-svg-icon lake-svg-icon-insert-calendar" />',title:r.card.calendar,pinyin:"日历,rl,rili,calendar",description:r.card.calendarDescription,onClick:function(){e.command.execute("calendar")}},{name:"mindmap",icon:'<span class="lake-svg-icon lake-svg-icon-insert-mindmap" />',title:r.card.mindmap,pinyin:"nt,dt,swnt,siweinaotu,siweidaotu,swdt,mindmap,脑图,思维导图",description:r.card.mindmapDescription,onClick:function(){e.command.execute("mindmap")}},{name:"flowchart",icon:'<span class="lake-svg-icon lake-svg-icon-insert-flowchart" />',title:r.card.flowchart,pinyin:"lct,liuchengtu,flowchart,流程图",description:r.card.flowchartDescription,onClick:function(){e.command.execute("flowchart")}},{name:"diagram",icon:'<span class="lake-svg-icon lake-svg-icon-insert-puml" />',title:r.card.diagram,pinyin:"文本绘图,wbht,ht,huitu,wenbenhuitu,puml,graphviz,mermaid,flowchart,plantuml",description:r.card.diagramDescription,onClick:function(){e.command.execute("diagram")}},{name:"lockedtext",icon:'<span class="lake-svg-icon lake-svg-icon-insert-lockedtext" />',title:r.card.lockedtextTitle,pinyin:"加密文本,jmwb,jiamiwenben,lockedtext",description:r.card.lockedtextDescription,onClick:function(){e.command.execute("lockedtext")}},{name:"localdoc",type:"uploadPanel",icon:'<span class="lake-svg-icon lake-svg-icon-insert-local-doc" />',title:r.card.localdoc,pinyin:"本地文档,bdwd,bendiwendang,localdocument,pdf,word,excel,ppt,powerpoint,keynote,pages,numbers,mindnode,mindmanager,mmap,axure,psd,sketch",items:[{name:"uploadbtn",category:"localdoc",type:"newupload",mainButton:!0,title:r.ui.subPanel.uploadBtn,icon:"plus",accept:function(e){return e.options.allCardNames&&!e.options.allCardNames.video?Au("localdoc"):Au("localdoc_video")}},{name:"msOffice",category:"localdoc",type:"newupload",title:r.localdoc.items.office,desc:r.localdoc.items.officeDesc,pinyin:"word,excel,ppt,powerpoint,office",icon:"doc",accept:Au("msOffice")},{name:"macOffice",category:"localdoc",type:"newupload",title:r.localdoc.items.mac,desc:r.localdoc.items.macDesc,pinyin:"keynote,pages,numbers",icon:"keynote",accept:Au("macOffice")},{name:"mind",category:"localdoc",type:"newupload",title:r.localdoc.items.mind,desc:r.localdoc.items.mindDesc,pinyin:"mindnode,mindmanager,mmap",icon:"mindnode",accept:Au("mind")},{name:"design",category:"localdoc",type:"newupload",title:r.localdoc.items.design,desc:r.localdoc.items.designDesc,pinyin:"axure,psd,sketch",icon:"sketch",accept:Au("design")},{name:"pdf",category:"localdoc",type:"newupload",title:r.localdoc.items.pdf,pinyin:"pdf",icon:"pdf",accept:".pdf"},a,{name:"audio",type:"newupload",title:r.localdoc.items.audio,pinyin:"音频,本地音频,yp,yinpin,bdyp,bendiyinpin,audio,mp3,sound,music,flac",icon:'<span class="lake-svg-icon lake-svg-icon-audio" />',accept:Au("audio")}]},{name:"label",icon:'<span class="lake-svg-icon lake-svg-icon-label" />',title:r.card.label,pinyin:"标签,bq,biaoqian,label",description:r.card.labelDescription,onClick:function(){e.command.execute("label")}},{name:"vote",icon:'<span class="lake-svg-icon lake-svg-icon-vote" />',title:r.card.vote,pinyin:"toupiao,tp,vote,投票",onClick:function(){e.command.execute("vote")}},{name:"premium",icon:'<span class="lake-svg-icon lake-svg-insert-yuan" />',title:r.card.premium,pinyin:"付费阅读,ffyd,fufeiyuedu,premium,reading",description:r.card.premiumDescription,isDisable:function(){return e.card.getComponentsByName("premium").length>0},onClick:function(){e.command.execute("premium")}}].concat(o);return t&&t.includes("video")&&!t.includes("localdoc")&&i.push(a),i};function pd(e){var t=e.locale,n=[{type:"group",category:"thirdparty",title:t.thirdparty.category.media,items:[{type:"button",name:"youku",category:"thirdparty",icon:"youku",title:t.thirdparty.names.youku,keywords:["优酷","yk","youku"],onClick:function(){id(e,"thirdparty",{entrance:"youku"})}},{type:"button",category:"thirdparty",name:"bilibili",icon:"bilibili",keywords:["bilibili"],title:t.thirdparty.names.bilibili,onClick:function(){id(e,"thirdparty",{entrance:"bilibili"})}},{type:"button",category:"thirdparty",name:"taobao",icon:"taobao",title:t.thirdparty.names.taobao,keywords:["淘宝","tb","taobao"],onClick:function(){id(e,"thirdparty",{entrance:"taobao"})}},{type:"button",category:"thirdparty",name:"music163",icon:"music163",title:t.thirdparty.names.music163,keywords:["网易云音乐","music163","wangyiyunyinyue","wy"],onClick:function(){id(e,"thirdparty",{entrance:"music163"})}}]},{type:"group",category:"thirdparty",title:t.thirdparty.category.map,items:[{type:"button",category:"thirdparty",name:"amap",icon:"gaode",keywords:["gaode","ditu","amap","高德","gd"],title:t.thirdparty.names.amap,pinyin:"gaode,ditu,ampa",onClick:function(){id(e,"thirdparty",{entrance:"amap"})}}]},{type:"group",category:"thirdparty",title:t.thirdparty.category.design,items:[{type:"button",category:"thirdparty",name:"modao",icon:"modao",title:t.thirdparty.names.modao,keywords:["modao","md","墨刀"],onClick:function(){id(e,"thirdparty",{entrance:"modao"})}},{type:"button",category:"thirdparty",name:"figma",icon:"figma",title:t.thirdparty.names.figma,keywords:["figma"],onClick:function(){id(e,"thirdparty",{entrance:"figma"})}},{type:"button",category:"thirdparty",name:"canva",icon:"canva",title:t.thirdparty.names.canva,keywords:["canva"],onClick:function(){id(e,"thirdparty",{entrance:"canva"})}},{type:"button",category:"thirdparty",name:"processon",icon:"processon",title:t.thirdparty.names.processon,keywords:["processon"],onClick:function(){id(e,"thirdparty",{entrance:"processon"})}}]},{type:"group",category:"thirdparty",title:t.thirdparty.category.development,items:[{type:"button",category:"thirdparty",name:"codepen",icon:"codepen",title:t.thirdparty.names.codepen,keywords:["codepen"],onClick:function(){id(e,"thirdparty",{entrance:"codepen"})}},{type:"button",name:"ali",icon:"ali",title:t.thirdparty.names.ali,keywords:["riddle","herbox","deepinsight","anymock"],onClick:function(){id(e,"thirdparty",{entrance:"ali"})}}]},{type:"group",category:"thirdparty",title:t.thirdparty.category.form,items:[{type:"button",category:"thirdparty",name:"jinshuju",icon:"jinshuju",title:t.thirdparty.names.jinshuju,keywords:["jinshuju","jsj","金数据"],onClick:function(){id(e,"thirdparty",{entrance:"jinshuju"})}}]}],r=dd(e.options.thirdPartyService);return n.forEach((function(e){e.items=e.items.filter((function(e){return e.keywords&&(e.pinyin=e.keywords.join(",")),-1!==r.indexOf(e.name)}))})),n.filter((function(e){return e.items.length>0}))}var hd={"en-us":lu,"zh-cn":ku},md=function(e){return[{name:"bold",text:(e=e||hd[ks.locale]).bold.text,keys:["Command","+","B"]},{name:"italic",text:e.italic.text,keys:["Command","+","I"]},{name:"strikethrough",text:e.strikethrough.text,keys:["Command","+","Shift","+","X"]},{name:"underline",text:e.underline.text,keys:["Command","+","U"]},{name:"sup",text:e.sup.text,keys:["Command","+","Shift","+","."]},{name:"sub",text:e.sub.text,keys:["Command","+","Shift","+",","]},{name:"link",text:e.link.buttonTitle,keys:["Command","+","K"]},{name:"mention",text:e.mention.text,keys:["@"]},{name:"card",text:e.card.buttonTitle,keys:["Command","+","/"]},{name:"print",text:e.editor.print,keys:["Command","+","P"]},{name:"alignleft",text:e.alignment.alignLeft,keys:["Command","+","Shift","+","L"]},{name:"aligncenter",text:e.alignment.alignCenter,keys:["Command","+","Shift","+","C"]},{name:"alignright",text:e.alignment.alignRight,keys:["Command","+","Shift","+","R"]},{name:"alignjustify",text:e.alignment.alignJustify,keys:["Command","+","Shift","+","J"]},{name:"orderedlist",text:e.list.orderedList,keys:["Command","+","Shift","+","7"]},{name:"unorderedlist",text:e.list.unorderedList,keys:["Command","+","Shift","+","8"]},{name:"tasklist",text:e.list.taskList,keys:["Command","+","Option","+","T"]},{name:"indent",text:e.indent.increase,keys:["Command","+","]"]},{name:"outdent",text:e.indent.decrease,keys:["Command","+","["]},{name:"save",text:e.editor.save,keys:["Command","+","S"]},{name:"undo",text:e.history.undo,keys:["Command","+","Z"]},{name:"redo",text:e.history.redo,keys:["Command","+","Shift","+","Z"]},{name:"paste",text:e.paste.paste,keys:["Command","+","V"]},{name:"pasteplaintext",text:e.paste.pastePlainText,keys:a.ua.safari?["Command","+","Option","+","Shift","+","V"]:["Command","+","Shift","+","V"]},{name:"findandreplace",text:e.search.searchAndReplace,keys:["Command","+","Shift","+","G"]},{name:"inlinecode",text:e.code.text,keys:["Command","+","E"]},{name:"clearformat",text:e.clearFormat.buttonTitle,keys:["Command","+","\\"]}]},gd=a.ua.macos?"⌘":"Ctrl";function vd(e,t){return e&&e.length>0?t.filter((function(t){return t.items&&(t.items=vd(e,t.items)),e.includes(t.category||t.name)})):t}function yd(e,t){return e&&e.length>0?t.filter((function(t){return t.items&&(t.items=yd(e,t.items)),!e.includes(t.category||t.name)})):t}function bd(e){return"classic"===e.getTypography()?"1515":"11"}var kd={ICON:32,DROPDOWN:42,SPLIT_BUTTON:42,FONTSIZE:58,HEADING:a.ua.mobile?42:73},wd=function(e){var t=e.locale,n={};md(t).forEach((function(e){e.keyText=e.keys.map((function(e){return"command"===e.toLowerCase()&&(e=a.ua.macos?"⌘":"Ctrl"),"option"===e.toLowerCase()&&(e=a.ua.macos?e:"Alt"),e})).join(""),n[e.name]=e}));var r={p:t.heading.normal,h1:t.heading.heading_1,h2:t.heading.heading_2,h3:t.heading.heading_3,h4:t.heading.heading_4,h5:t.heading.heading_5,h6:t.heading.heading_6},o=[{key:"9",value:"12px"},{key:"10",value:"13px"},{key:"11",value:"14px"},{key:"1515",value:"15px"},{key:"12",value:"16px"},{key:"14",value:"19px"},{key:"16",value:"22px"},{key:"18",value:"24px"},{key:"22",value:"29px"},{key:"24",value:"32px"},{key:"30",value:"40px"},{key:"36",value:"48px"}],i={};o.forEach((function(e){var t=e.key,n=e.value;i[t]=n}));var c,l=function(e){var t=e.locale,n=e.options,r=n.cardWhitelist,a=n.cardBlacklist,o={};fd(e,r).forEach((function(e){o[e.name]=e}));var i=[],c=[o.image,o.table,o.file,o.calendar,o.premium,o.codeblock,o.math,o.mindmap,o.flowchart,o.diagram,o.lockedtext,o.label,o.vote];o.video&&c.push(o.video),c=yd(a,c=vd(r,c)),ks.isYqWebApp()&&c.includes(o.image)&&c.splice(c.indexOf(o.image),1,o.webappImage),i.push({title:t.card.normal,items:c});var l=[o.yuque,o.localdoc,o.thirdparty];(l=yd(a,l=vd(r,l))).length>0&&i.push({title:t.card.embed,items:l});var s={};return function e(t,n){n&&n.length&&n.forEach((function(n){n.items&&e(t,n.items);var r=n.category||n.name;r&&(t[r]=!0)}))}(s,i),e.options.allCardNames=s,i}(e),s=[{name:"note-image",type:"note-upload-button",title:a.ua.mobile?"":t.note.image,icon:'<span class="lake-svg-icon lake-svg-icon-note-image" />',size:kd.ICON,className:"lake-button-icon-note-wrapper"},{name:"note-file",type:"note-upload-button",title:a.ua.mobile?"":t.note.localFile,icon:'<span class="lake-svg-icon lake-svg-icon-note-file" />',size:kd.ICON,className:"lake-button-icon-note-wrapper"},{name:"note-tasklist",title:a.ua.mobile?"":t.note.todo,hotkey:a.ua.mobile?"":n.tasklist.keyText,icon:'<span class="lake-svg-icon lake-svg-icon-note-tasklist" />',size:kd.ICON,className:"lake-button-icon-note-wrapper",getActive:function(){return"tasklist"===e.command.queryState("tasklist")},onClick:function(){e.command.execute("tasklist","tasklist")}},{name:"note-link",title:a.ua.mobile?"":t.note.link,icon:'<span class="lake-svg-icon lake-svg-icon-note-link" />',size:kd.ICON,className:"lake-button-icon-note-wrapper",onClick:function(){e.command.execute("linkCard")}}],u=[{name:"webapp-custom-image",title:a.ua.mobile?"":t.image.buttonTitle,icon:'<span class="'.concat(K()(e,"options.webappCustomImage.iconName")||"lake-icon lake-icon-image",'" />'),type:"button",onClick:(c=bl()(wl.a.mark((function t(){var n,r,a;return wl.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a="",null==e||null===(n=e.options)||void 0===n||null===(r=n.webappCustomImage)||void 0===r||!r.onUpload){t.next=11;break}return t.prev=2,t.next=5,e.options.webappCustomImage.onUpload(e);case 5:a=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.warn("webapp-custom-image upload error",t.t0);case 11:a&&e.change.insertCard("image",{status:"done",src:a});case 12:case"end":return t.stop()}}),t,null,[[2,8]])}))),function(){return c.apply(this,arguments)})}];return[{name:"card",title:Fc.a.createElement("span",{dangerouslySetInnerHTML:{__html:"mini"===e.options.editorType?xd(e.lang,e.options.allCardNames):t.card.buttonTitle}}),type:"collapse",icon:'<span class="lake-svg-icon lake-svg-icon-insert" />',size:kd.ICON,data:l,description:t.card.description,onClick:function(t){e.command.execute(t)}},{name:"save",title:t.editor.save,hotkey:n.save.keyText,icon:'<span class="lake-icon lake-icon-save" />',size:kd.ICON,onClick:function(){e.command.execute("save")}},{name:"undo",title:t.history.undo,hotkey:n.undo.keyText,icon:'<span class="lake-icon lake-icon-undo" />',size:kd.ICON,getDisabled:function(){return!e.command.queryState("undo")},onClick:function(){e.command.execute("undo")}},{name:"redo",title:t.history.redo,hotkey:n.redo.keyText,icon:'<span class="lake-icon lake-icon-redo" />',size:kd.ICON,getDisabled:function(){return!e.command.queryState("redo")},onClick:function(){e.command.execute("redo")}},{name:"paintformat",title:t.paintformat.buttonTitle,icon:'<span class="lake-icon lake-icon-paintformat" />',size:kd.ICON,getActive:function(){return e.command.queryState("paintformat")},onClick:function(){e.command.execute("paintformat")},onDblClick:function(){e.command.execute("paintformat","repeat")}},{name:"removeformat",title:t.clearFormat.buttonTitle,icon:'<span class="lake-icon lake-icon-clean" />',size:kd.ICON,hotkey:n.clearformat.keyText,onClick:function(){e.command.execute("removeformat")}},{name:"emoji",type:"emoji",title:t.emoji.buttonTitle,icon:'<span class="lake-svg-icon lake-svg-icon-emoji" />',size:kd.ICON,data:td,onClick:function(t){e.command.execute("emoji",t)}},{name:"heading",type:"dropdown",size:kd.HEADING,title:t.heading.buttonTitle,className:"lake-button-heading",data:[{key:"p",value:r.p,className:""},{key:"h1",value:r.h1,className:"lake-button-set-list-item-heading1"},{key:"h2",value:r.h2,className:"lake-button-set-list-item-heading2"},{key:"h3",value:r.h3,className:"lake-button-set-list-item-heading3"},{key:"h4",value:r.h4,className:"lake-button-set-list-item-heading4"}],getActive:function(){return e.command.queryState("heading")||"p"},getCurrentText:function(e){return r[e]||t.heading.normal},onClick:function(t){e.command.execute("heading",t)}},{name:"bold",title:t.bold.text,hotkey:n.bold.keyText,icon:'<span class="lake-icon lake-icon-bold" />',size:kd.ICON,getActive:function(){return e.command.queryState("bold")},getDisabled:function(){var t=e.command.queryState("heading")||"p";return/^h\d$/.test(t)},onClick:function(){e.command.execute("bold")}},{name:"italic",title:t.italic.text,hotkey:n.italic.keyText,icon:'<span class="lake-icon lake-icon-italic" />',size:kd.ICON,getActive:function(){return e.command.queryState("italic")},onClick:function(){e.command.execute("italic")}},{name:"strikethrough",title:t.strikethrough.text,hotkey:n.strikethrough.keyText,icon:'<span class="lake-icon lake-icon-strikethrough" />',size:kd.ICON,getActive:function(){return e.command.queryState("strikethrough")},onClick:function(){e.command.execute("strikethrough")}},{name:"underline",title:t.underline.text,hotkey:n.underline.keyText,icon:'<span class="lake-icon lake-icon-underline" />',size:kd.ICON,getActive:function(){return e.command.queryState("underline")},onClick:function(){e.command.execute("underline")}},{name:"fontsize",type:"dropdown",title:t.fontsize.buttonTitle,className:"lake-button-fontsize",size:kd.FONTSIZE,data:o,getActive:function(){return e.command.queryState("fontsize")||bd(e)},getDisabled:function(){var t=e.command.queryState("heading")||"p";return/^h\d$/.test(t)},getCurrentText:function(t){return i[t]||i[bd(e)]},onClick:function(t){e.command.execute("fontsize",t)}},{name:"fontcolor",type:"color",title:t.color.fontColor,moreTitle:t.color.moreColor,defaultColor:"#262626",currentColor:"#F5222D",size:kd.SPLIT_BUTTON+4,getActive:function(){return e.command.queryState("fontcolor")||""},onClick:function(t){e.restoreRange(),e.command.execute("fontcolor",t,"#262626")}},{name:"highlight",type:"color",title:t.color.bgColor,moreTitle:t.color.moreColor,defaultColor:"transparent",currentColor:"#FADB14",size:kd.SPLIT_BUTTON+4,getActive:function(){return e.command.queryState("backcolor")||""},onClick:function(t){e.command.queryState("backcolor")===t&&(t="#FFFFFF"),e.restoreRange(),e.command.execute("backcolor",t,"#FFFFFF")}},{name:"moremark",type:"dropdown",title:t.moremark.buttonTitle,icon:'<span class="lake-icon lake-icon-moremark" />',size:kd.DROPDOWN,className:"lake-button-icon-list",data:[{key:"sup",icon:'<span class="lake-icon lake-icon-sup" />',title:t.sup.text,className:"lake-button-set-list-item-icon",shortcut:"".concat(gd,"+shift+.")},{key:"sub",icon:'<span class="lake-icon lake-icon-sub" />',title:t.sub.text,className:"lake-button-set-list-item-icon",shortcut:"".concat(gd,"+shift+,")},{key:"code",icon:'<span class="lake-icon lake-icon-code" />',title:t.code.text,className:"lake-button-set-list-item-icon",shortcut:"".concat(gd,"+E")}],getActive:function(){return e.command.queryState("moremark")},onClick:function(t){e.command.execute("moremark",t)}},{name:"alignment",type:"dropdown",title:t.alignment.buttonTitle,icon:'<span class="lake-icon lake-icon-left" />',size:kd.DROPDOWN,className:"lake-button-icon-list",data:[{key:"left",icon:'<span class="lake-icon lake-icon-left" />',title:t.alignment.alignLeft,className:"lake-button-set-list-item-icon",shortcut:"".concat(gd,"+Shift+L")},{key:"center",icon:'<span class="lake-icon lake-icon-center" />',title:t.alignment.alignCenter,className:"lake-button-set-list-item-icon",shortcut:"".concat(gd,"+Shift+C")},{key:"right",icon:'<span class="lake-icon lake-icon-right" />',title:t.alignment.alignRight,className:"lake-button-set-list-item-icon",shortcut:"".concat(gd,"+Shift+R")},{key:"justify",icon:'<span class="lake-icon lake-icon-justify" />',title:t.alignment.alignJustify,className:"lake-button-set-list-item-icon",shortcut:"".concat(gd,"+Shift+J")}],getActive:function(){return e.command.queryState("alignment")},onClick:function(t){e.command.execute("alignment",t)}},{name:"list",type:"dropdown",title:t.list.buttonTitle,icon:'<span class="lake-icon lake-icon-oList" />',size:kd.DROPDOWN,className:"lake-button-icon-list",data:[{key:"orderedlist",icon:'<span class="lake-icon lake-icon-oList" />',title:t.list.orderedList,className:"lake-button-set-list-item-icon"},{key:"unorderedlist",icon:'<span class="lake-icon lake-icon-uList" />',title:t.list.unorderedList,className:"lake-button-set-list-item-icon"}],getActive:function(){return e.command.queryState("tasklist")},onClick:function(t){e.command.execute("tasklist",t)}},{name:"orderedlist",title:t.list.orderedList,hotkey:n.orderedlist.keyText,icon:'<span class="lake-icon lake-icon-oList" />',size:kd.ICON,getActive:function(){return"orderedlist"===e.command.queryState("tasklist")},onClick:function(){e.command.execute("tasklist","orderedlist")}},{name:"unorderedlist",title:t.list.unorderedList,hotkey:n.unorderedlist.keyText,icon:'<span class="lake-icon lake-icon-uList" />',size:kd.ICON,getActive:function(){return"unorderedlist"===e.command.queryState("tasklist")},onClick:function(){e.command.execute("tasklist","unorderedlist")}},{name:"indent",type:"dropdown",title:t.indent.buttonTitle,icon:'<span class="lake-icon lake-icon-indent-right" />',size:kd.DROPDOWN,className:"lake-button-icon-list",data:[{key:"indent",icon:'<span class="lake-icon lake-icon-indent-right" />',title:t.indent.increase,className:"lake-button-set-list-item-icon",shortcut:"".concat(gd,"+]")},{key:"outdent",icon:'<span class="lake-icon lake-icon-indent-left" />',title:t.indent.decrease,className:"lake-button-set-list-item-icon",shortcut:"".concat(gd,"+[")}],onClick:function(t){e.command.execute(t)}},{name:"lineheight",type:"dropdown",title:t.lineHeight.buttonTitle,icon:'<span class="lake-icon lake-icon-line-height" />',size:kd.DROPDOWN,className:"lake-button-icon-list",data:[{key:"17",title:t.lineHeight.defaultTitle},{key:"1",title:"1"},{key:"115",title:"1.15"},{key:"15",title:"1.5"},{key:"2",title:"2"},{key:"25",title:"2.5"},{key:"3",title:"3"}],getDisabled:function(){return!e.command.queryState("lineheight")},getActive:function(){return e.command.queryState("lineheight")},onClick:function(t){e.command.execute("lineheight",t)}},{name:"tasklist",title:t.list.taskList,hotkey:n.tasklist.keyText,icon:'<span class="lake-icon lake-icon-tList" />',size:kd.ICON,getActive:function(){return"tasklist"===e.command.queryState("tasklist")},onClick:function(){e.command.execute("tasklist","tasklist")}},{name:"link",title:t.link.buttonTitle,className:"lake-button-link",hotkey:n.link.keyText,icon:'<span class="lake-icon lake-icon-link" />',size:kd.ICON,onClick:function(){e.command.execute("link")}},{name:"link-card",title:t.linkCard.buttonTitle,className:"lake-button-link-card",icon:'<span class="lake-icon lake-icon-link" />',size:kd.ICON,onClick:function(){e.command.execute("linkCard")}},{name:"image",type:"upload",title:t.image.buttonTitle,icon:'<span class="lake-icon lake-icon-image" />',size:kd.ICON},{name:"file",type:"upload",title:t.file.buttonTitle,icon:'<span class="lake-icon lake-icon-attachment" />',size:kd.ICON},{name:"quote",title:t.blockquote.buttonTitle,icon:'<span class="lake-icon lake-icon-quote" />',size:kd.ICON,getActive:function(){return e.command.queryState("quote")},onClick:function(){e.command.execute("quote")}},{name:"hr",title:t.hr.buttonTitle,icon:'<span class="lake-icon lake-icon-hr" />',size:kd.ICON,onClick:function(){e.command.execute("hr")}},{name:"toc",title:t.toc.title,icon:'<span class="lake-icon lake-icon-toc" accessbilityid="toc-button" />',size:kd.ICON,getActive:function(){return e.command.queryState("toc")},onClick:function(){e.command.execute("toc")}},{name:"search",title:t.search.searchAndReplace,icon:'<span class="lake-icon lake-icon-searchreplace" accessbilityid="searchreplace-button" />',size:kd.ICON,getActive:function(){return e.command.queryState("search")},onClick:function(){e.command.execute("search")}},{name:"translate",title:t.translate.title,icon:'<span class="lake-icon lake-icon-translate" accessbilityid="translate-button" />',size:kd.ICON,getActive:function(){return e.command.queryState("translate")},onClick:function(){e.command.execute("translate")}},{name:"repository",title:t.repository.title,icon:'<span class="lake-svg-icon lake-svg-icon-folder" accessbilityid="repository-button" />',size:kd.ICON,getActive:function(){return e.command.queryState("repository")},onClick:function(){e.command.execute("repository")}}].concat(s,u)};function xd(e,t){e="en"===e?"en":"zh";var n=[{name:"image",en:"image",zh:"图片"},{name:"label",en:"label",zh:"标签"},{name:"yuque",en:"Yuque doc",zh:"语雀文档"}].filter((function(e){return t[e.name]}));if(0===n.length)return"en"===e?"Insert card":"插入卡片";var r=n.map((function(t){return t[e]})).join("en"===e?",":"、"),a="";return n.length>1&&(a="en"===e?", etc.":" 等"),"en"===e?"Insert ".concat(r).concat(a):"插入 ".concat(r).concat(a)}function _d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ed(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_d(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cd(e){return e?e.startsWith("<")?e:'<span class="lake-svg-icon lake-svg-icon-'.concat(e,'" />'):e}function Od(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Sd="lake-plugin-cardselect",Rd=function(e){oe()(n,Ds);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;if(l()(this,n),r=t.call(this),g()(de()(r),"showMask",(function(){r.lastX=null,r.lastY=null,r.$listMask.css("display","block")})),g()(de()(r),"hideMask",(function(e){if(!r.lastX)return r.lastX=e.clientX,void(r.lastY=e.clientY);(Math.abs(e.clientX-r.lastX)>5||Math.abs(e.clientY-r.lastY)>5)&&(r.container.find(".lake-collapse-list-item-active").removeClass("lake-collapse-list-item-active"),r.$listMask.css("display","none"),r.lastX=null,r.lastY=null)})),g()(de()(r),"handlePreventDefault",(function(e){if(0!==r.cardRoot.closest("body").length)return e.preventDefault(),!1})),g()(de()(r),"getClickNode",(function(e){var t=e.find(".lake-collapse-list-item-active"),n=t.closest("div.ant-upload-select");return n.length>0&&(t=n.parent()),t})),g()(de()(r),"scrollItem",(function(e){var t=r.container.find(".lake-toolbar-collapse"),n=t.find(".lake-collapse-list-item"),a=t.find(".lake-collapse-list-item-active");r.showMask();var o=0;n.each((function(e,t){e===a[0]&&(o=t)}));var i="up"===e?n.eq(o-1):n.eq(o+1);if(i&&(r.selectItem(i),a.length)){var c=t.find(".ant-collapse-header")[0].clientHeight,l=i.closest(".ant-collapse-item");l.parent().find(".ant-collapse-item").each((function(e){if(e===l[0])return!1;c+=e.clientHeight})),c+=a[0].clientHeight*i.attr("data-index"),t[0].scrollTop=c-t[0].clientHeight/2}})),g()(de()(r),"selectItem",(function(e){r.container.find(".lake-toolbar-collapse").find(".lake-collapse-list-item-active").removeClass("lake-collapse-list-item-active"),e.addClass("lake-collapse-list-item-active");var t=r.engine;if(t.scrollNode){var n=e.getBoundingClientRect(),a=window.innerHeight||Math.max(document.documentElement.clientHeight,document.body.clientHeight);if(n.bottom>a){var o=n.bottom-a+20;t.scrollNode.scrollTop+=o}}})),g()(de()(r),"searchData",(function(e){var t=[];"string"==typeof e&&(e=e.toLowerCase()),r.data.forEach((function(n){n.items.forEach((function(n){"string"==typeof n.pinyin&&(n.pinyin=n.pinyin.trim().split(/\s*,\s*/)),Array.isArray(n.pinyin)&&n.pinyin.some((function(r){return!!r.startsWith(e)&&(t.find((function(e){return e.name===n.name}))||t.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Od(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Od(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n)),!0)}))}))}));var n=[];return t.length>0&&n.push({title:"",items:t}),n})),g()(de()(r),"handleInput",(function(){var e=r.engine;if(!e.domEvent.isComposing){var t=r.keywordNode[0].innerText;if(""===t)return r.removeCardSelect(),void e.change.removeCard(r.cardRoot);var n=t.substr(1);if(""!==n){var a=r.searchData(n);a.length>0?r.renderCardSelect(a):r.changeToText()}else r.renderCardSelect(r.data)}})),g()(de()(r),"removeCardSelect",(function(){var e=r.container.find(".lake-cardselect-list");e.length>0&&(Vc.a.unmountComponentAtNode(e[0]),e.remove())})),g()(de()(r),"removeCard",(function(){r.removeCardSelect(),r.engine.change.removeCard(r.cardRoot)})),g()(de()(r),"changeToText",(function(){if(r.cardRoot.isEditable()){var e=r.keywordNode[0].innerText;r.removeCard(),r.engine.change.insertText(e)}})),g()(de()(r),"handleClick",(function(){r.removeCardSelect(),r.engine.change.removeCard(r.cardRoot)})),g()(de()(r),"onBeforeInsertCard",(function(){r.unbindEvents(),r.removeCardSelect(),r.cardRoot.remove()})),g()(de()(r),"handleBeforeUpload",(function(){r.cardRoot.hide(),kt(document.body).append(r.cardRoot),r.unbindEvents()})),g()(de()(r),"handleAfterUpload",(function(){r.removeCardSelect(),r.cardRoot.remove()})),g()(de()(r),"renderCardSelect",(function(e){r.unbindEvents();var t=r.engine;r.removeCardSelect();var n=kt('<div class="lake-cardselect-list" />');r.container.append(n);var a=[],o=r.cardRoot.offset(),i=kt(".lark-editor-header"),c=0;if(i.length>0){var l=t.editArea.closest(".lake-editor").find(".lake-toolbar");l.length>0&&(c=i[0].clientHeight+l[0].clientHeight)}o.top-c>482&&a.push("lake-button-set-list-to-top"),""===e[0].title&&a.push("lake-button-set-list-search");var s={className:a.length>0?a.join(" "):void 0,active:!0,engine:t,locale:t.locale,data:e,activeKeys:e.map((function(e,t){return String(t)})),onClick:r.handleClick,onBeforeUpload:r.handleBeforeUpload,onAfterUpload:r.handleAfterUpload,onBeforeInsertCard:r.onBeforeInsertCard};Vc.a.render(Fc.a.createElement(ed,s),n[0]);var u=n.find(".lake-collapse-list-item");u.length>0&&r.selectItem(u.eq(0)),r.bindEvents(),r.initListMask()})),r.engine=e,r.readonly=!e,r.readonly)return ce()(r);var a=wd(e).find((function(e){return"card"===e.name}));return"max"===e.options.editorType?r.data=function(e,t,n){if(!n||!n.length)return n;var r=null,a=null,o=null,i=null,c=null;return n.forEach((function(n){n.items.forEach((function(n){"localdoc"===n.name?o=function(e,t,n){var r=[];return n.items.forEach((function(e){e.mainButton||r.push(Ed(Ed({},e),{},{noBorder:!0,icon:Cd(e.icon)}))})),r.push({name:"localdoc_video",type:"newupload",title:t.localdoc.items.localFile,pinyin:"file,bendi,wenjian,local",noBorder:!0,accept:e.video?Au("localdoc_video"):Au("localdoc"),icon:'<span class="lake-svg-icon lake-svg-icon-file-for-embed" />'}),r}(e,t,n):"yuque"===n.name?c={name:n.name,title:n.title,icon:'<span class="lake-svg-icon lake-svg-icon-yuque-for-embed"></span>',noBorder:!0,onClick:n.onClick,pinyin:n.pinyin}:"thirdparty"===n.name?i=function(e,t){var n=[];return t.items.forEach((function(e){e.items.forEach((function(e){n.push(Ed(Ed({},e),{},{noBorder:!0,icon:Cd(e.icon)}))}))})),{name:t.name+"_for_embed",title:e.embedCardMenu.introduction,items:n}}(t,n):(delete(n=Ed({},n)).tooltip,delete n.subTitle,"table"===n.name&&(n.disableSelector=!0),r||(r={name:"generic",title:t.card.common,items:[]}),r.items.push(n))}))})),(o||c)&&(a={name:"localdoc_for_embed",title:t.embedCardMenu.embed,items:[c].concat(x()(o||[])).filter(Boolean)}),[r,a,i].filter(Boolean)}(e.options.allCardNames||{},e.locale,a.data):r.data=a.data,r}return u()(n,[{key:"destroy",value:function(){this.unbindEvents(),this.removeCardSelect()}},{key:"unactivate",value:function(){this.unbindEvents(),this.changeToText()}},{key:"unbindEvents",value:function(){pl.a.deleteScope(Sd),pl.a.unbind("enter",Sd),pl.a.unbind("up",Sd),pl.a.unbind("down",Sd),pl.a.unbind("esc",Sd),this.engine&&this.engine.off("keydown:enter",this.handlePreventDefault)}},{key:"bindEvents",value:function(){var e=this;this.unbindEvents(),pl.a.setScope(Sd),pl()("enter",Sd,(function(t){if(0!==e.cardRoot.closest("body").length){t.preventDefault();var n=e.container.find(".lake-toolbar-collapse"),r=e.getClickNode(n),a=r.find("input[type=file]");a.length>0?a[0].click():r[0].click()}})),pl()("up",Sd,(function(t){0!==e.cardRoot.closest("body").length&&(t.preventDefault(),e.scrollItem("up"))})),pl()("down",Sd,(function(t){0!==e.cardRoot.closest("body").length&&(t.preventDefault(),e.scrollItem("down"))})),pl()("esc",Sd,(function(t){t.preventDefault(),e.unbindEvents(),e.changeToText()})),this.engine.on("keydown:enter",this.handlePreventDefault)}},{key:"initListMask",value:function(){var e=this.container.find(".lake-button-set-list");if(this.$buttonList)e.append(this.$listMask),this.showMask();else{var t=kt('<div class="lake-cardselect-list-mask"></div>');e.append(t),this.$listMask=t,t.on("mousemove",this.hideMask,!1)}}},{key:"resetPlaceHolder",value:function(){"/"===this.keywordNode[0].innerText?this.placeholder.show():this.placeholder.hide()}},{key:"render",value:function(e){var t=this;if(!this.readonly){this.cardRoot.attr("data-transient","true"),this.cardRoot.attr("contenteditable",!1),e.append('\n      <span class="lake-cardselect-keyword" contenteditable="true">/</span>\n      <span class="lake-cardselect-placeholder" style="\n        color: rgba(0,0,0,0.25);\n        pointer-events: none;\n        position: absolute;\n        width: 76px;\n        left: 7px;\n      ">'.concat(this.engine.locale.card.placeholder,"</span>\n    "));var n=e.find(".lake-cardselect-keyword");this.keywordNode=n,this.placeholder=e.find(".lake-cardselect-placeholder"),n.on("keydown",(function(e){Mc("enter",e)&&e.preventDefault()}));var r=Date.now();n.on("input",(function(){if(t.resetPlaceHolder(),Date.now()-r<100){var e=n.first();if(e&&e.isText()&&"/、"===e[0].nodeValue||"//"===e[0].nodeValue)kt(e[0].splitText(1)).remove()}setTimeout((function(){t.handleInput()}),10)})),setTimeout((function(){var e=t.engine.change.getRange();e&&n[0]&&(n[0].contains(e.startContainer)||n[0].contains(e.endContainer))&&(t.renderCardSelect(t.data),n[0].focus())}),10)}}}]),n}();g()(Rd,"type","inline"),g()(Rd,"singleSelectable",!1);var jd=function(e){oe()(n,Ds);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this),g()(de()(r),"handleClick",(function(){var e=r.cardRoot;r.engine.change.focusCard(e)})),r.engine=e,r.readonly=!e,r}return u()(n,[{key:"select",value:function(){}},{key:"normalizeValue",value:function(e){return"string"==typeof e&&(e={src:e,package:"default"}),e.src=Xe.sanitizeUrl(e.src),e}},{key:"render",value:function(e,t){t=this.normalizeValue(t);var n='<img class="lake-emoji lake-emoji-'.concat(t.package,'" src="').concat(Xe.escape(t.src),'" />');e.append(n),this.readonly||this.container.on("click",this.handleClick)}}]),n}();function Pd(e){return new Promise((function(t,n){var r=new Image;r.src=e,r.crossOrigin="Anonymous",r.onload=function(){return t(r)},r.onerror=n}))}g()(jd,"type","inline"),g()(jd,"selectStyleType","background"),g()(jd,"singleSelectable",!1),g()(jd,"canCollab",!0);var Ad=Math.ceil(window.devicePixelRatio||1);function Td(e){if(!e||"string"!=typeof e)return e;try{var t=new URL(e),n=t.searchParams.get("x-oss-process");if(!n)return e;var r=function(e){if(!e.startsWith("image/"))return null;var t=(e=e.substring("image".length)).split("/");if(""!==t[0])return null;var n={};return t.slice(1).forEach((function(e){var t=e.split(",");n[t[0]]=t.slice(1).join(",")})),n}(n);if(!r)return e;r.watermark&&delete r.watermark;var a=function(e){var t=Object.keys(e).map((function(t){return"".concat(t,",").concat(e[t])})).join("/");return t?"image/"+t:""}(r);return a?t.searchParams.set("x-oss-process",a):t.searchParams.delete("x-oss-process"),t.toString()}catch(e){console.warn(e)}return e}var Dd=function(){function e(t){var n=this;l()(this,e),g()(this,"onMouseDown",(function(e,t){e.preventDefault(),e.stopPropagation(),n.root.css("top",45===t||315===t?"auto":0),n.root.css("left",225===t||315===t?"auto":0),n.root.css("bottom",225===t||135===t?"auto":0),n.root.css("right",45===t||135===t?"auto":0);var r=e.clientX,o=e.clientY;a.ua.mobile&&(r=e.changedTouches[0].clientX,o=e.changedTouches[0].clientY),n.mouse={x:r,y:o},n.angle=t,n.resizing=!0,n.find("number")[0].className="lake-image-editor-number lake-image-editor-number-".concat(t," lake-image-editor-number-active"),n.image.show(),a.ua.mobile?(document.addEventListener("touchmove",n.onMouseMove,{passive:!1}),document.addEventListener("touchend",n.onMouseUp,{passive:!1})):(document.addEventListener("mousemove",n.onMouseMove),document.addEventListener("mouseup",n.onMouseUp))})),g()(this,"onMouseMove",(function(e){e.preventDefault(),e.stopPropagation();var t=e.clientX,r=e.clientY;if(a.ua.mobile&&(t=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY),t!==n.mouse.x||r!==n.mouse.y){var o=n.mouse.x-t,i=n.mouse.y-r;n.updateImageSize(o,i)}n.resizing=!0})),g()(this,"onMouseUp",(function(e){e.preventDefault(),e.stopPropagation(),n.width=n.root[0].clientWidth,n.height=n.root[0].clientHeight,n.angle=0,n.resizing=!1,n.find("number")[0].className="lake-image-editor-number",a.ua.mobile?(document.removeEventListener("touchmove",n.onMouseMove),document.removeEventListener("touchend",n.onMouseUp)):(document.removeEventListener("mousemove",n.onMouseMove),document.removeEventListener("mouseup",n.onMouseUp)),n.config.onChange(n.width,n.height),n.image.hide()})),g()(this,"updateImageSize",(function(e){var t;(t=n.angle<180?n.width-e:n.width+e)<24&&(t=24),t>n.maxWidth&&(t=n.maxWidth);var r=t*n.config.rate;r<24&&(t=(r=24)/n.config.rate),t=Math.round(t),r=Math.round(r),n.setSize(t,r)})),g()(this,"setSize",(function(e,t){n.root.css({width:e+"px",height:t+"px"}),n.find("number").html("".concat(js(e),"·").concat(js(t)))})),g()(this,"closeZoom",(function(){var e=kt("#lake-image-zoom-container");e[0]&&Vc.a.unmountComponentAtNode(e[0]),e.remove(),n.config.onClose()})),this.config=t,this.root=kt('\n  <div class="lake-image-editor" draggable="true">\n    <img data-role="image-bg" class="lake-image-editor-bg lake-image-editor-bg-active" src="'.concat(js(t.src),'">\n    <div data-role="holder-45" class="lake-image-editor-holder lake-image-editor-holder-45"></div>\n    <div data-role="holder-135" class="lake-image-editor-holder lake-image-editor-holder-135"></div>\n    <div data-role="holder-225" class="lake-image-editor-holder lake-image-editor-holder-225"></div>\n    <div data-role="holder-315" class="lake-image-editor-holder lake-image-editor-holder-315"></div>\n    <span data-role="number" class="lake-image-editor-number"></span>\n  </div>\n  ')),this.image=this.find("image-bg"),this.resizing=!1,this.width=t.width,this.height=t.height,this.maxWidth=t.maxWidth,this.openZoom=t.openZoom}return u()(e,[{key:"find",value:function(e){var t="[data-role=".concat(e,"]");return this.root.find(t)}},{key:"destroy",value:function(){this.root.remove(),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)}},{key:"render",value:function(e){var t=this,n=this.config,r=n.width,o=n.height;this.root.css({width:"".concat(r,"px"),height:"".concat(o,"px")}),e.append(this.root),this.image.on("dblclick",this.openZoom),this.image.hide(),a.ua.mobile?(this.find("holder-45").on("touchstart",(function(e){return t.onMouseDown(e,45)}),{passive:!1}),this.find("holder-135").on("touchstart",(function(e){return t.onMouseDown(e,135)}),{passive:!1}),this.find("holder-225").on("touchstart",(function(e){return t.onMouseDown(e,225)}),{passive:!1}),this.find("holder-315").on("touchstart",(function(e){return t.onMouseDown(e,315)}),{passive:!1})):(this.find("holder-45").on("mousedown",(function(e){return t.onMouseDown(e,45)})),this.find("holder-135").on("mousedown",(function(e){return t.onMouseDown(e,135)})),this.find("holder-225").on("mousedown",(function(e){return t.onMouseDown(e,225)})),this.find("holder-315").on("mousedown",(function(e){return t.onMouseDown(e,315)})))}}]),e}();ls(".lake-error-tips {\n  padding: 6px 8px 6px 20px;\n  background: #f5f5f5;\n  display: inline-block;\n  border-radius: 2px;\n}\n.lake-error-tips .lake-error-tips-card-icon {\n  display: inline-block;\n  margin-right: 4px;\n}\n.lake-error-tips .lake-error-tips-card-icon span {\n  vertical-align: middle;\n}\n.lake-error-tips .lake-error-tips-info {\n  display: inline-block;\n}\n.lake-error-tips .lake-error-tips-info span {\n  vertical-align: top;\n}\n.lake-error-tips .lake-error-tips-variable-content {\n  display: inline-block;\n  max-width: 200px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.lake-error-tips .lake-svg-icon-alert {\n  width: 16px;\n  height: 16px;\n  background-image: url(https://gw.alipayobjects.com/zos/basement_prod/be5b1e2a-b47e-479c-9217-430229bef84e.svg);\n  vertical-align: middle;\n  display: inline-block;\n}\n.lake-error-tips .lake-svg-icon-alert:hover {\n  cursor: pointer;\n}\n.lake-error-tips .lake-error-tips-slash {\n  color: #e8e8e8;\n  margin: 0 6px;\n}\n");var Md={"zh-cn":{copyMessage:"复制错误信息",copySuccess:"复制成功！"},en:{copyMessage:"Copy error information",copySuccess:"Successful copy!"}}[window.appData&&"zh-cn"!==window.appData.locale?"en":"zh-cn"],Nd=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"render",value:function(){var e=this.props,t=e.cardIcon,n=e.variableContent,r=e.fixedContent,a=e.message,o=e.block,i=e.docWidth;return Fc.a.createElement("div",{className:"lake-error-tips",style:{width:o?"100%":"auto"}},Fc.a.createElement("div",{className:"lake-error-tips-card-icon",dangerouslySetInnerHTML:{__html:t}}),Fc.a.createElement("div",{className:"lake-error-tips-info"},Fc.a.createElement("span",{className:"lake-error-tips-variable-content",style:{maxWidth:o?"".concat(i-200,"px"):"220px"}},n),Fc.a.createElement("span",{className:"lake-error-tips-fixed-content"},r)),a?Fc.a.createElement(Wc.a,{title:Md.copyMessage,placement:"bottom"},Fc.a.createElement("span",{className:"lake-error-tips-slash"},"|"),Fc.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-alert",onClick:function(){Or.copyText(JSON.stringify(a,null,"  ")),Yc.a.success(Md.copySuccess)}})," "):"")}}]),n}(Fc.a.Component);function Ld(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Id(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ld(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ld(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Nd.propTypes={cardIcon:Hc.a.string,variableContent:Hc.a.string,fixedContent:Hc.a.string,message:Hc.a.object,block:Hc.a.bool,docWidth:Hc.a.number};var Bd,zd=Object(r.getImageBrowser)(),Fd=Xe.escape,Ud=Xe.sanitizeUrl,Vd=!(!(Bd=document.createElement("canvas")).getContext||!Bd.getContext("2d"))&&(a.ua.chrome||a.ua.firefox||0===Bd.toDataURL("image/webp").indexOf("data:image/webp"));function qd(e,t,n,a){return e=t(e,n&&n(e)),r.OssUtil.tryAddWebpFormat(e,Vd,a)}function Hd(e){var t=e.data,n=e.readonly,o=e.maxWidth,i=e.onBeforeRenderImage,c=e.isRemoteImage,l=e.src,s=e.ossProcessDomains;if("error"===t.status)return function(e){var t=Fd(e.message),n=document.createElement("div");return Vc.a.render(Fc.a.createElement(Nd,{cardIcon:'<span class="lake-svg-icon lake-svg-icon-error-image"></span>',variableContent:t,message:e}),n),n}(t);var u,d='\n  <span data-role="progress" class="progress">\n    <i class="lake-anticon lake-anticon-loading">\n      <svg viewBox="0 0 1024 1024" class="lake-anticon-spin" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true">\n        <path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path>\n      </svg>\n    </i>\n    <span data-role="percent" class="percent">'.concat(Fd(t.percent||0),"%</span>\n  </span>\n  "),f=l;if("uploading"!==t.status&&l&&(l=qd(l,i,c,s)),n){var p=r.OssUtil.resizeImage({maxWidth:o,src:l,data:t,ossProcessDomains:s});p&&(f=l,l=p)}var h=t.name?Fd(t.name):"",m=h?' alt="'.concat(h,'" title="').concat(h,'"'):"";if(t.link&&n){var g="";""!==t.linkTarget&&(g=' target="_blank"'),u='<a href="'.concat(Fd(Ud(t.link)),'"').concat(g,'><img data-role="image" src="').concat(Fd(Ud(l)),'" data-raw-src="').concat(Fd(Ud(f)),'" class="image lake-drag-image"').concat(m," /></a>")}else u='<img data-role="image" src="'.concat(Fd(Ud(l)),'" data-raw-src="').concat(Fd(Ud(f)),'" class="image lake-drag-image"').concat(m," />");var v='<span data-role="maximize" class="lake-image-editor-maximize" style="display: none;"><span class="lake-icon lake-icon-full-screen"></span></span>';(!t.width&&t.originWidth<100||"number"==typeof t.width&&t.width<100||a.ua.mobile)&&(v="");var y="";if(!a.ua.mobile&&t.ocrLocations){var b=Math.min(o,t.width)/t.originWidth;y+='<div class="lake-image-mask">',t.ocrLocations.forEach((function(e){e.height>e.width&&(e.height=e.width);var n=Math.min(e.height*b,50),r="font-size: ".concat(n,"px;left: ").concat(e.x/t.originWidth*100,"%;top: ").concat(e.y/t.originHeight*100,"%;");y+='<p class="lake-image-mask-point" style="'.concat(Fd(r),'">').concat(Fd(e.text),"</p>")})),y+="</div>"}return'\n  <span class="lake-image">\n    <span class="lake-image-content lake-image-content-istmp">\n      <span data-role="detail" class="lake-image-detail">\n        <span class="lake-image-meta">\n          <span class="lake-image-warning" style="display: none;">\n            <i class="anticon anticon-exclamation-circle">\n              <svg viewBox="64 64 896 896" class="" data-icon="exclamation-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true">\n                <path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path><path d="M464 688a48 48 0 1 0 96 0 48 48 0 1 0-96 0zM488 576h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"></path>\n              </svg>\n            </i>\n          </span>\n          '.concat(u,"\n          ").concat(d,"\n          ").concat(v,"\n          ").concat(y,"\n        </span>\n      </span>\n    </span>\n  </span>\n  ")}var Wd=function(){function e(t,n){var o=this;l()(this,e),g()(this,"destroy",(function(){window.removeEventListener("resize",o.onWindowResize),o.closeZoom()})),g()(this,"focus",(function(){o.readonly||(o.root.addClass("lake-image-active"),"done"===o.status&&(o.destroyEditor(),o.renderEditor()))})),g()(this,"blur",(function(){o.readonly||(o.root.removeClass("lake-image-active"),"done"===o.status&&o.destroyEditor(),kt("div[data-lake-element=embed-tooltip]").remove())})),g()(this,"getMaxWidth",(function(e){return sr.getClosestBlock(e)[0].clientWidth-6})),g()(this,"isSvg",(function(){return o.src.endsWith(".svg")||o.src.startsWith("data:image/svg+xml")})),g()(this,"getValue",(function(){var e,t=o.config.value,n={src:o.src,originWidth:o.originWidth,originHeight:o.originHeight,name:t.name,size:t.size,display:o.display,align:o.align,angle:o.angle,link:o.link,linkTarget:o.linkTarget,status:o.status,ocrLocations:t.ocrLocations,style:o.style,search:(e=t.ocrLocations,e?e.map((function(e){return e.text})).join(" "):""),margin:o.margin};return Cs(n.src)&&delete n.src,o.width&&(n.width=o.width),o.height&&(n.height=o.height),"uploading"===o.status&&o.uid&&(n.uid=o.uid),n})),g()(this,"onWindowResize",(function(){var e=o.card.closest(o.root);if(e){o.maxWidth=o.getMaxWidth(e),o.resetImageSize();var t=o.image[0].clientWidth,n=o.image[0].clientHeight;o.resizer&&(o.resizer.maxWidth=o.maxWidth,o.resizer.setSize(t,n))}})),g()(this,"handleChangeSize",(function(e,t){var n=o.card.closest(o.root);if(n){o.changeSize(e,t);var r=o.getValue();o.card.setValue(n,r),"image"===o.engine.sidebar.activate&&o.setSidebar()}})),g()(this,"setSidebar",(function(){var e=o.getValue();o.engine.sidebar.set({name:"image",title:o.locale.preferences,className:"lake-image-sidebar",data:e})})),g()(this,"changeSize",(function(e,t){e<24&&(t=(e=24)*o.rate);var n=o.config.value.originWidth||o.maxWidth;e>n&&(t=(e=n)*o.rate),t<24&&(e=(t=24)/o.rate),e=Math.round(e),t=Math.round(t),o.width=e,o.height=t,o.image.css({width:"".concat(e,"px"),height:"".concat(Math.round(Math.min(o.maxWidth,e)*o.rate),"px")}),o.destroyEditor(),o.renderEditor()})),g()(this,"changeLink",(function(e,t){o.link=e,o.linkTarget=t})),g()(this,"openZoom",(function(e){if(!o.config.docEmbedView){e.preventDefault(),e.stopPropagation();var t=o.config.engine||o.config.contentView,n=t.options.onBeforeRenderImage,i=[],c=o.cardRoot,l=0;t.editArea.find('[data-lake-card="image"]').toArray().filter((function(e){return(e=kt(e)).find('[data-role="image"]').length>0})).forEach((function(e,o){var s=(e=kt(e)).find('[data-role="image"]'),u=t.card.getValue(e),d=parseInt(s.css("width")),f=parseInt(s.css("height")),p=u.width||d,h=u.height||f,m=u.originWidth||d*Ad,g=u.originHeight||f*Ad,v=a.ua.mobile?1e3:4e3,y=t.options.ossProcessDomains,b=qd(u.src,n,t.isRemoteImage,y),k=r.OssUtil.resizeImage({maxWidth:v,src:b,data:{width:m,originWidth:m,originHeight:g,ossProcessDomains:y}}),w=s.attr("src"),x=s.attr("data-override-src");x?i.push({src:x,msrc:x,w:m,h:g}):k?i.push({src:k,msrc:w,w:v,h:h/p*v}):i.push({src:b,msrc:w,w:m,h:g}),e[0]===c[0]&&(l=o)})),zd.open(i,l)}})),g()(this,"closeZoom",(function(){zd.close()})),g()(this,"resetImageSize",(function(){o.detailInner.css({"background-color":"",width:"",height:""}),o.image.css({width:"",height:""});var e=o.image[0],t=o.width,n=o.height;"number"!=typeof t||n?t||"number"!=typeof n?"number"==typeof t&&"number"==typeof n?(n=Math.round(o.rate*t),o.height=n):(t=e.clientWidth,n=e.clientHeight,o.isSvg()&&o.originWidth&&o.originHeight&&(t=o.originWidth,n=o.originHeight)):t=Math.round(n/o.rate):n=Math.round(o.rate*t),t>o.maxWidth&&(t=o.maxWidth,n=Math.round(t*o.rate)),o.image.css("width","".concat(t,"px")),o.image.css("height","".concat(n,"px"))})),g()(this,"addToolbarDelete",(function(e){var t=o.config.locale;e.push({type:"button",name:"delete",iconName:"delete",title:t.delete,onClick:o.config.onRemove})})),g()(this,"onLoad",(function(){var e=o.card.closest(o.root);if(e){"done"===o.status&&(o.root.find(".lake-image-content").addClass("lake-image-content-isvalid"),o.root.find(".lake-image-content").removeClass("lake-image-content-istmp"));var t=o.image[0],n=t.naturalWidth,r=t.naturalHeight;if(o.rate=r/n,o.originWidth=n,o.originHeight=r,o.scaleByPixelRatio&&(o.width=n/Ad,o.height=r/Ad),o.resetImageSize(),o.image.css("visibility","visible"),o.image.css("background-color",""),o.image.css("background-repeat",""),o.image.css("background-position",""),o.image.css("background-image",""),o.width||(o.width=n),o.height||(o.height=r),!o.readonly||!o.viewEngine.isReadonly&&"uploading"===o.status){var a=o.getValue();o.card.setValue(e,a)}window.removeEventListener("resize",o.onWindowResize),window.addEventListener("resize",o.onWindowResize),o.resizer&&o.resizer.setSize(t.clientWidth,t.clientHeight)}})),g()(this,"onError",(function(){o.container.empty();var e=kt(Hd({data:Id(Id({},o.config.value),{},{status:"error",message:o.locale.loadFailed})}));o.container.append(e)})),this.component=t,this.config=n,this.readonly=!n.engine,this.locale=n.locale,this.uid=n.uid;var i=n[n.engine?"engine":"contentView"],c=i.options.onBeforeRenderImage;this.maxWidth=this.getMaxWidth(n.cardRoot),this.viewEngine=i;var s=!1;try{new URL(location.href).searchParams.has("export_type")&&(s=!0)}catch(e){console.warn(e)}this.src=this.readonly&&s?Td(n.src):n.src,this.root=kt(Hd({data:n.value,src:this.src,locale:this.locale,readonly:this.readonly,maxWidth:this.maxWidth,onBeforeRenderImage:c,isRemoteImage:i.isRemoteImage,ossProcessDomains:i.options.ossProcessDomains})),n.docEmbedView&&this.root.addClass("doc-embed-view"),this.image=this.find("image"),this.detail=this.find("detail"),this.detailInner=this.detail.find(".lake-image-meta"),this.engine=n.engine,this.card=n.card,n.engine&&(this.options=n.engine.options.image||{}),this.status=n.value.status,this.width=n.value.width,this.height=n.value.height,this.scaleByPixelRatio=n.value.scaleByPixelRatio,this.display=n.value.display,this.align=n.value.align,this.link=n.value.link,this.linkTarget=n.value.linkTarget,this.margin=n.value.margin||{top:!1,bottom:!1},this.style=n.value.style||"none"}return u()(e,[{key:"find",value:function(e){var t="[data-role=".concat(e,"]");return this.root.find(t)}},{key:"changeStyle",value:function(e){var t=!1,n=!1;switch(e){case"stroke":t=!0;break;case"shadow":n=!0;break;default:e="none"}this.style=e,t?this.detailInner.addClass("border"):this.detailInner.removeClass("border"),n?this.detailInner.addClass("shadow"):this.detailInner.removeClass("shadow")}},{key:"changeMargin",value:function(e){this.margin=e}},{key:"destroyEditor",value:function(){this.resizer&&this.resizer.destroy()}},{key:"renderEditor",value:function(){var e=this,t=this.image[0].offsetWidth,n=this.image[0].offsetHeight;if(t&&n){var r=this.card.closest(this.root),a=new Dd({src:this.src,width:t,height:n,rate:this.rate,angle:this.angle,maxWidth:this.maxWidth,onChange:this.handleChangeSize,openZoom:this.openZoom,onClose:function(){e.engine.change.focus();var t=e.engine.change.getRange();e.card.focus(t,r,!1)}});a.render(this.detail),this.resizer=a}}},{key:"render",value:function(e){var t=this;if(this.cardRoot=this.card.closest(e),this.container=e,this.readonly){if("error"===this.status)return;this.viewEngine.isReadonly&&"uploading"===this.status&&(this.status="done")}if("error"!==this.status){if("uploading"===this.status?this.find("progress").show():this.find("progress").remove(),this.readonly){if(this.width&&this.height){var n=this.width,r=this.height;this.maxWidth<n&&(n=this.maxWidth,r=Math.round(n*this.height/this.width)),this.image.css("width",n+"px"),this.image.css("height",r+"px"),this.image.css("background-color","#FAFAFA"),this.image.css("background-repeat","no-repeat"),this.image.css("background-position","center"),this.image.css("background-image","url(https://gw.alipayobjects.com/zos/basement_prod/b665217b-bdc4-464d-ad47-d2a8fc938552.svg)")}}else this.image.css("visibility","hidden");this.changeStyle(this.style);var a=null;if(this.viewEngine&&this.viewEngine.readyStateManager&&(a=this.viewEngine.readyStateManager.add()),this.image.on("load",(function(){a&&a(),t.onLoad(),setTimeout((function(){t.image.src=t.image.src}),100)})),this.image.on("error",(function(){a&&a(),t.onError()})),e.append(this.root),!("done"!==this.status||this.readonly&&this.image.isEditable())){var o=this.find("maximize");this.root.on("mouseenter",(function(){return o.show()})),this.root.on("mouseleave",(function(){return o.hide()})),this.readonly&&0===this.image.closest("a").length&&this.image.on("click",this.openZoom),this.image.on("dblclick",this.openZoom),o.on("click",this.openZoom)}if(!Cs(this.src)&&("uploading"===this.status||"done"===this.status)){var i=!!this.image[0].clientHeight;if("uploading"!==this.status||i||this.detailInner.css("background-color","#F5F5F5"),"number"==typeof this.width&&this.width>this.maxWidth){var c=this.maxWidth;this.detailInner.css("width","".concat(c,"px"))}else{if(this.width){var l=this.width;l="number"==typeof l?"".concat(l,"px"):l,this.detailInner.css("width",l)}else!i&&this.detailInner.css("width","300px");if(this.height){var s=this.height;s="number"==typeof s?"".concat(s,"px"):s,this.detailInner.css("height",s)}else!i&&this.detailInner.css("height","200px")}}this.readonly}else e.append(this.root)}}]),e}();function Yd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yd(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xd=function(e){oe()(n,Ds);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e,r){var a;return l()(this,n),a=t.call(this),g()(de()(a),"onRemove",(function(){a.imageNode.blur();var e=a.cardRoot;a.engine.change.removeCard(e)})),g()(de()(a),"onSaveBefore",(function(){return new Promise((function(e,t){"uploading"!==a.value.status?e():t(a.locale.stillUploading)}))})),g()(de()(a),"saveCardValue",(function(){var e=a.cardRoot,t=a.imageNode.getValue();a.card.setValue(e,t)})),a.card=Ei.card,a.engine=e,a.contentView=r,a.docEmbedView=window.location.search.indexOf("view=doc_embed")>0,a}return u()(n,[{key:"embedToolbar",value:function(){var e=this;if(this.engine){var t=[];return this.value&&"done"===this.value.status&&(t.push({type:"copy"}),t.push({type:"separator"}),this.engine&&this.value&&!1!==this.engine.options.allowResource&&!1!==this.engine.options.allowSaveToResource&&"done"===this.value.status&&t.push({type:"button",name:"saveToResource",iconName:"save-folder",title:this.engine.locale.embedToolbar.saveToResource,onClick:function(){var t=e.getTopEngine();t&&t.event.trigger("saveToResource",{name:"image",data:Gd({},e.value)})}})),t.push({type:"delete"}),t}}},{key:"destroy",value:function(){this.imageNode&&this.imageNode.destroy();var e=this.getTopEngine();e&&e.asyncEvent&&e.asyncEvent.off("save:before",this.onSaveBefore),this.restoreSideBar()}},{key:"didInsert",value:function(e){if("uploading"===e.status){var t=this.getTopEngine();e.uid&&t.uploader&&t.uploader.uploadingFiles[e.uid]&&t&&t.asyncEvent&&t.asyncEvent.on("save:before",this.onSaveBefore)}}},{key:"activate",value:function(){this.unselect(),this.imageNode.focus(),this.openSidebar()}},{key:"select",value:function(){this.state.activated||Bc()(se()(n.prototype),"select",this).call(this)}},{key:"openSidebar",value:function(){var e=this.engine;e&&(this.openPreferences||e.sidebar.disable||function(e){var t=kt(e);if(!t)return!1;for(;t&&!t.isRoot();)t=t.parent();return!!t&&t.closest("[data-lake-card]").length>0}(this.cardRoot)||this.value&&"done"===this.value.status&&(this.imageNode.setSidebar(),this.openPreferences=!0))}},{key:"restoreSideBar",value:function(){this.engine&&this.openPreferences&&(this.engine.sidebar.restore("image"),this.openPreferences=!1)}},{key:"unactivate",value:function(){this.engine&&Bc()(se()(n.prototype),"unselect",this).call(this),this.restoreSideBar(),this.imageNode.blur()}},{key:"changeSize",value:function(e,t){this.imageNode.changeSize(e,t),this.saveCardValue()}},{key:"changeStyle",value:function(e){this.imageNode.changeStyle(e),this.saveCardValue()}},{key:"changeMargin",value:function(e){this.imageNode.changeMargin(e),this.saveCardValue(),this.toggleMargin()}},{key:"changeLink",value:function(e,t){this.imageNode.changeLink(e,t),this.saveCardValue()}},{key:"getSrc",value:function(){if(this.value.src)return this.value.src;var e=this.getViewEngine();if(e&&e.uploader){var t=e.uploader;if(t&&this.value.uid){var n=t.uploadingFiles[this.value.uid];if(n)return n.src}}return""}},{key:"render",value:function(e,t){var n=!this.engine,r=n?this.contentView.locale.image:this.engine.locale.image;t=t||{},this.value=t,this.locale=r;var a=this.card,o=this.getSrc();this.fixImageStatus(),t.status=t.status||"done",t.align=t.align||"left",t.linkTarget=void 0===t.linkTarget?"_blank":t.linkTarget,t.display=n&&t.display||"inline",t.src&&Cs(t.src)&&(t.src="",this.card.setValue(this.cardRoot,t)),t.message=t.message||r.uploadFailed;var i=this.card.closest(e);"block"===t.display&&i.addClass("lake-card-block"),"block"===t.display&&t.align&&i.addClass("lake-image-".concat(t.align));var c=new Wd(this,{uid:t.uid,locale:r,engine:this.engine,contentView:this.contentView,card:a,src:o,value:t,cardRoot:i,onChange:this.onChange,onRemove:this.onRemove,docEmbedView:this.docEmbedView});c.render(e),this.imageNode=c,this.card.setToolbar({cardRoot:i,engine:this.engine,component:this}),this.toggleMargin()}},{key:"fixImageStatus",value:function(){this.value&&"error"===this.value.status&&this.value.src&&this.value.src.startsWith("https://cdn.nlark.com/")&&(this.value.status="done")}}]),n}();function Kd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kd(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}g()(Xd,"type","inline");var $d=Xe.escape,Qd=Xe.sanitizeUrl;var Jd=function(e){oe()(n,Ds);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e,r){var a;return l()(this,n),a=t.call(this,e),g()(de()(a),"allowToolbarFollowUser",!0),g()(de()(a),"destroy",(function(){window.removeEventListener("resize",a.onWindowResize);var e=a.getTopEngine();e&&e.asyncEvent&&e.asyncEvent.off("save:before",a.onSaveBefore)})),g()(de()(a),"getMaxWidth",(function(){return sr.getClosestBlock(a.cardRoot)[0].clientWidth-6})),g()(de()(a),"onWindowResize",(function(){a.maxWidth=a.getMaxWidth(),a.updateMaxWidth()})),g()(de()(a),"onSaveBefore",(function(){return new Promise((function(e,t){"uploading"!==a.value.status?"transfering"!==a.value.status?e():t(a.locale.stillTransfering):t(a.locale.stillUploading)}))})),g()(de()(a),"updateMaxWidth",(function(){a.cardRoot.find(".lake-file-title").css("max-width",a.maxWidth-100+"px")})),g()(de()(a),"focusCard",(function(){a.engine.change.focusCard(a.cardRoot)})),g()(de()(a),"previewFile",(function(){var e=Es(a.value.src),t=a.getTopEngine();t&&t.options&&t.options.previewFileHandler?t.options.previewFileHandler(Qd(e),a.value.src):window.open(Qd(e))})),g()(de()(a),"downloadFile",(function(){var e=a.value,t=e.src,n=e.name;if(t){var r=a.getTopEngine();r.options&&r.options.downloadFileHandler?r.options.downloadFileHandler(t,n):window.open(Ps(t))}})),a.card=Ei.card,a.engine=e,a.contentView=r,a.isEditMode=!!e,a.maxWidth=752,a}return u()(n,[{key:"getToolbarConfig",value:function(){var e=this,t=[];return"done"===this.value.status&&(function(e,t,n){if(ks.isPrivateCloud)return a.FileUtils.isImage(e)||a.FileUtils.isTextFile(e)||["mp3","wav","mp4","pdf"].includes(e);t=t||0;var r=function(e,t){var n;return a.FileUtils.isOffice("a.".concat(e))?n="previewOffice":a.FileUtils.isMacOffice("a.".concat(e))&&(n="previewMacOffice"),!!n&&a.FileUtils.isSizeLimit(n,t)}(e=String(e||""),t),o=a.EXTS.MAC_OFFICE_EXT.concat(a.EXTS.OFFICE_EXT);return!!(a.FileUtils.isImage(e)||a.FileUtils.isTextFile(e)||["mp3","wav"].indexOf(e)>=0||o.indexOf(e)>=0&&r||a.FileUtils.isMMap(e)&&r)}(this.value.ext,this.value.size,this.value)&&t.push({type:"button",name:"preview",iconName:"preview",title:this.locale.preview,onClick:this.previewFile}),t.push({type:"button",name:"download",iconName:"download",title:this.locale.download,onClick:this.downloadFile}),this.isEditMode&&(this.engine&&!1!==this.engine.options.allowResource&&!1!==this.engine.options.allowSaveToResource&&t.push({type:"button",name:"saveToResource",iconName:"save-folder",title:this.getTopEngine().locale.embedToolbar.saveToResource,onClick:function(){var t=e.getTopEngine();t&&t.event.trigger("saveToResource",{name:"file",data:Zd({},e.value)})}}),t.push({type:"copy"}),t.push({type:"separator"}),t.push({type:"delete"}))),t}},{key:"didInsert",value:function(e){if("uploading"===e.status||"transfering"===e.status){var t=this.getTopEngine();if(!e.uid||!t.uploader||!t.uploader.uploadingFiles[e.uid])return;t&&t.asyncEvent&&t.asyncEvent.on("save:before",this.onSaveBefore)}}},{key:"activate",value:function(){this.container.find("lake-file").addClass("lake-file-active")}},{key:"unactivate",value:function(){this.container.find("lake-file").removeClass("lake-file-active")}},{key:"updateProgress",value:function(e){this.value.progress&&(this.value.progress.percent=e),this.card.setValue(this.cardRoot,this.value)}},{key:"renderViewMode",value:function(){var e=this;this.cardRoot.on("click",this.downloadFile);var t=this.getToolbarConfig(),n=new Ta({list:t});n.root.addClass("lake-card-toolbar"),n.render(this.cardRoot.first());var r=!0;this.cardRoot.on("mouseenter",(function(t){r=!1,e.contentView.editArea.find('[data-lake-card="file"]').each((function(t){e.card.hideCardToolbar(kt(t))})),e.card.showCardToolbar(e.cardRoot,t.clientX)})),this.cardRoot.on("mouseleave",(function(){r=!0,window.setTimeout((function(){r&&e.card.hideCardToolbar(e.cardRoot)}),300)})),n.hide()}},{key:"renderEditMode",value:function(){var e=this;this.embedToolbar=function(){return e.getToolbarConfig()},this.card.setToolbar({cardRoot:this.cardRoot,engine:this.engine,component:this})}},{key:"render",value:function(e,t){this.locale=this.engine?this.engine.locale.file:this.contentView.locale.file,this.maxWidth=this.getMaxWidth(),t=t||{},this.value=t,t.status=t.status||"done",!t.ext&&t.src&&(t.ext=a.FileUtils.getFileExtname(t.src));var n=kt(function(e,t){if("error"===e.status){var n=document.createElement("div");return Vc.a.render(Fc.a.createElement(Nd,{cardIcon:'<span class="lake-svg-icon lake-svg-icon-error-file"></span>',variableContent:e.message?e.message:t.invalid,fixedContent:e.name?e.name:"",message:e}),n),n}var r='<span class="lake-icon lake-icon-attachment"></span>';"uploading"!==e.status&&"transfering"!==e.status||(r='\n    <i class="lake-anticon lake-anticon-loading">\n      <svg viewBox="0 0 1024 1024" class="lake-anticon-spin" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true">\n        <path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path>\n      </svg>\n    </i>\n    ');var o="",i=e.size&&a.FileUtils.getFileSize(e.size);i&&(o='\n    <span class="lake-file-size">('.concat($d(i),")</span>\n    "));var c="";return"uploading"===e.status?c='<span data-role="percent">'.concat(e.progress&&void 0!==e.progress.percent?$d(e.progress.percent)+"%":"","</span> &nbsp;"):"transfering"===e.status&&(c="<span></span> &nbsp;"),'\n  <span class="lake-file lake-file-'.concat($d(e.status),'">\n    <span class="lake-file-icon">').concat(r,"</span>\n    ").concat(c,'\n    <span class="lake-file-title">').concat($d(e.name),"</span>").concat(o,"\n  </span>\n  ")}(t,this.locale));!this.state.readonly&&n.attr("draggable",!0),e.append(n),this.updateMaxWidth(),window.removeEventListener("resize",this.onWindowResize),window.addEventListener("resize",this.onWindowResize),this.engine?this.renderEditMode():this.renderViewMode()}}]),n}();function ef(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ef(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ef(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nf(e){return El.a.deflate(JSON.stringify({body:[{id:"4a749c6b",html:e.defaultRootText,type:"mindmap",children:[{id:"8308b1b9",html:e.newNode,treeEdge:{stroke:"#A287E1"}},{id:"06492f3c",html:e.newNode,treeEdge:{stroke:"#E48484"}},{id:"fc4c524c",html:e.newNode,treeEdge:{stroke:"#69B1E4"}}]}]}),{to:"string"})}g()(Jd,"type","inline"),g()(Jd,"selectStyleType","background"),g()(Jd,"uid",!0);var rf={initialize:function(){var e=this;this.command.add("mindmap",{sideEffect:!0,execute:function(){var t={diagramData:nf(e.locale.mindmap)},n=e.change.insertCard("mindmap",tf(tf({},t),{},{margin:!0})),r=e.card.getComponent(n);r.onFirstRendering=function(){var e=r.diagram;r.diagram.selector.select(e.getCells().find((function(e){return e.isRoot})))}}})}};var af=xl.d.exportData,of=xl.i.LinkEditor,cf=xl.i.ZoomTool,lf=function(e){oe()(n,Ds);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l()(this,n),(e=t.call(this)).zoomStep=.1,e.currentZoom=1,e.minHeight=460,e.plugins=[],e.head={},e.scrollBarSize=18,e.updateToolbarState=J()((function(){e.engine.toolbar.updateState()}),16),e.isModelChange=!0,Object.assign(de()(e),r),e}return u()(n,[{key:"getChangeDataCommandNames",value:function(){}},{key:"embedToolbar",value:function(){var e=this,t=a.ua.mobile?[{type:"copy"},{type:"delete"}]:[{type:"dnd"},{type:"maximize"},{type:"separator"},{type:"copy"},{type:"copyCardLink",onClick:function(){return e.copyCardEmbedLink()}},{type:"button",name:"download",iconName:"download",title:this.locale.downloadImage,onClick:function(){e.diagram.exporter.download("jpg")}},{type:"separator"}].concat(x()(this.getMoreEmbedToolbarConfig()));return this.state.readonly&&(t=[{type:"maximize"},{type:"copyCardLink",onClick:function(){return e.copyCardEmbedLink()}},{type:"button",name:"download",iconName:"download",title:this.locale.downloadImage,onClick:function(){e.diagram.exporter.download("jpg")}}]),t}},{key:"activate",value:function(){var e=this;this.engine&&(this.setTopToolbar(),this.showRisizeController(),this.container.css("border","1px solid #D9D9D9"),this.showProperties(),this.hideMask(),setTimeout((function(){e.diagram.viewportContainer.contains(document.activeElement)||e.diagram&&e.diagram.focus()}),16))}},{key:"unactivate",value:function(){!1===this.state.activated||this.destroyed||this.engine&&(this.container.css("border","1px solid rgba(0,0,0,0)"),this.restoreSidebar(),this.hideProperties(),this.engine.toolbar.restore(),this.hideRisizeController())}},{key:"restoreSidebar",value:function(){this.engine&&this.isSetPropertiesSidebar&&(this.engine.sidebar.restore("diagram"),this.isSetPropertiesSidebar=!1)}},{key:"showZoomTool",value:function(){this.zoomContainer&&this.zoomContainer.show()}},{key:"hideZoomTool",value:function(){this.zoomContainer&&this.zoomContainer.hide()}},{key:"createZoomController",value:function(){var e=this,t=this.scrollWrapper,n=this.container;t=kt(t);var r=kt("<div></div>");t.append(r),this.zoomContainer=r,this.renderZoomController(),this.hideZoomTool();var a=!1;n.on("click",(function(){a||(e.showZoomTool(),a=!0,e.container.css("border","1px solid #D9D9D9"))})),this.bindEvent(kt(window),"click",(function(t){!a||n[0].contains(t.target)||n[0]===t.target||t.target.closest(".lake-toolbar")||e.engine&&e.state.activated||(e.hideZoomTool(),a=!1,e.container.css("border","1px solid rgba(0,0,0,0)"))}))}},{key:"getPropertiesActivated",value:function(){return this.propertiesContainer&&this.container[0].contains(this.propertiesContainer)}},{key:"showProperties",value:function(){this.engine&&this.propertiesContainer&&(this.state.maximize?this.showMaximizeProperties():(this.restoreSidebar(),this.showDocEmbedProperties()),this.isPropertiesShow=!0)}},{key:"hideProperties",value:function(){this.engine&&this.propertiesContainer&&(this.state.maximize?kt(this.propertiesContainer).remove():this.restoreSidebar(),this.isPropertiesShow=!1)}},{key:"showMaximizeProperties",value:function(){this.propertiesContainer.style.top="".concat(this.container.getBoundingClientRect().top,"px"),this.propertiesContainer.style.width="".concat(286,"px"),this.propertiesContainer.style["z-index"]="1033",document.body.appendChild(this.propertiesContainer)}},{key:"showDocEmbedProperties",value:function(){var e=this;this.propertiesContainer.style.top="0px",this.propertiesContainer.style.width="100%",this.propertiesContainer.style["z-index"]="1",this.engine.sidebar.set({name:"diagram",title:null,className:"lake-diagram-sidebar",onClose:function(){e.hideProperties(),e.updateToolbarState()},data:{element:this.propertiesContainer,preventAppend:function(){return e.state.maximize}}}),this.isSetPropertiesSidebar=!0}},{key:"switchProperties",value:function(){this.propertiesContainer&&(this.isPropertiesShow?this.hideProperties():this.showProperties(),this.changeSize()),this.updateToolbarState()}},{key:"topToolbar",value:function(){var e=this;return[{type:"separator"},{name:"mindmap:properties",title:this.locale.properties,getActive:function(){return e.isPropertiesShow},hotkey:a.ua.macos?"⌘+I":"Ctrl+I",icon:'<span class="lake-icon lake-icon-properties" />',onClick:function(t){t.stopPropagation(),e.switchProperties()}}]}},{key:"setTopToolbar",value:function(){this.engine&&this.engine.toolbar.set(this.topToolbar())}},{key:"renderZoomController",value:function(){var e=this.zoomContainer,t=this.diagram;Vc.a.render(Fc.a.createElement(cf,{diagram:t}),e[0])}},{key:"getWidth",value:function(){return this.propertiesContainer&&document.body.contains(this.propertiesContainer)&&this.state.maximize?this.getContainerWidth()-286:this.getContainerWidth()}},{key:"preventMask",value:function(e){return this.state.maximize||e.target.closest(".lake-toolbar")||e.target.closest(".lake-diagram-panel-body")}},{key:"getHeight",value:function(){var e=this.value;return this.state.maximize?this.getContainerHeight():e.height||this.minHeight}},{key:"changeSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getWidth(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getHeight(),n=this.diagram,r=this.scrollWrapper,a=this.scrollBarSize;if(!n.destroyed&&e&&t){r.style.width="".concat(e,"px"),r.style.height="".concat(t,"px");var o=this.state.maximize?e:e+a,i=this.state.maximize?t:t+a;n.changeSize(o,i)}}},{key:"createScrollWrapper",value:function(){var e=this.container,t=this.getWidth(),n=this.getHeight(),r=document.createElement("div");r.className="lake-diagram-wrapper lake-diagram-hide-scroll",r.style.width="".concat(t,"px"),r.style.height="".concat(n,"px"),r.style["max-width"]="100%",r.style.position="relative",e[0].appendChild(r),this.scrollWrapper=r}},{key:"processSaveModel",value:function(){}},{key:"saveValue",value:function(){var e=this.diagram;this.setValue({viewportSetting:e.viewport.toObject(),diagramData:El.a.deflate(JSON.stringify(af(e)),{to:"string"})},!0)}},{key:"renderProperties",value:function(){var e=this.Properties,t=this.diagram,n=document.createElement("div");n.dataset.lake_prevent_click_unselect=!0,n.className="lake-editor-card-diagram-properties-container lake-prevent-card-activated yuquesdk",n.style.cursor="default",n.style.position="absolute",n.style.top="0px",n.style.right="0",n.style.bottom="0",n.style.width="".concat(286,"px"),n.style.overflow="auto",this.propertiesContainer=n,Vc.a.render(Fc.a.createElement(e,{diagram:t,domContainer:n}),n)}},{key:"renderLinkEditor",value:function(){var e=this.diagram,t=document.createElement("div");this.linkEditorContainer=t,t.className="yuquesdk lake-prevent-card-activated",document.body.appendChild(t),Vc.a.render(Fc.a.createElement(of,{diagram:e}),t)}},{key:"renderContextMenu",value:function(){}},{key:"importData",value:function(){var e=this.diagram,t=this.value;e.import(t.diagramData)}},{key:"renderInner",value:function(){var e=this,t=this.diagram,n=this.value;this.importData(),this.renderContextMenu(),this.state.readonly?n.viewportSetting&&n.viewportSetting.width?t.viewport.setWYSIWYG(n.viewportSetting):t.viewport.autoFit():(this.renderProperties(),this.renderLinkEditor(),n.viewportSetting?t.viewport.set(n.viewportSetting):t.viewport.focusFirstRoot(),t.on("afterselectionchange",(function(){e.updateToolbarState()})),t.contentEditor.on("selectionchange",(function(){e.updateToolbarState()})),t.on("keydown",(function(t){Mc("mod+i",t)&&e.switchProperties()})),t.on("aftercommandexecute",J()((function(n){n.isModelChange&&!t.destroyed&&e.saveValue()}),300)),t.on("aftercommandexecute",(function(t){t.isModelChange&&(e.isModelChange=!0)})),this.bindEvent(this.engine.asyncEvent,"save:before",bl()(wl.a.mark((function n(){var a,o;return wl.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.cardRoot.attr("data-cell_count",t.getCells().length),e.saveValue(),!e.isModelChange){n.next=12;break}return e.isModelChange=!1,n.next=6,t.exporter.blob();case 6:if(a=n.sent){n.next=9;break}return n.abrupt("return");case 9:return(o=new FormData).append("file",a,"lake_card_mindmap.jpeg"),n.abrupt("return",Object(r.ajax)({method:"post",url:e.engine.options.image.uploadAction,data:o,success:function(n){var r=n.data.url,a=t.getCells().map((function(e){return e.textAreaElement&&e.textAreaElement.htmlContainer.innerText})).join(" ");e.setValue({src:r,search:a},!1)}}).promise);case 12:case"end":return n.stop()}}),n)}))))),this.onFirstRendering&&this.onFirstRendering()}},{key:"createDiagram",value:function(){var e=this,t=this.plugins,n=this.scrollBarSize,r=this.scrollWrapper,a=this.head,o=this.getWidth(),i=this.getHeight(),c=new xl.l({container:r,width:o+n,height:i+n,head:a,plugins:t,paper:{size:"auto"},mode:this.state.readonly?"read":"edit"});this.diagram=c;var l=Ol()(r,{loaded:function(){e.renderInner()}});return this.bindEvent(kt(window),"resize",(function(){e.changeSize()})),l.observe(),c}},{key:"createResizeController",value:function(){var e=this,t=this.scrollWrapper;Bc()(se()(n.prototype),"createResizeController",this).call(this,t,{onResizing:function(t){var n=e.getWidth();e.changeSize(n,t)}})}},{key:"focusMainRoot",value:function(){this.diagram.viewport.autoFit();var e=this.diagram.getCells().filter((function(e){return e.isRoot}))[0];e&&(this.diagram.viewport.focus([e.x+e.width/2,e.y+e.height/2]),this.diagram.viewport.setViewport(1))}},{key:"maximize",value:function(){var e=this.diagram;Bc()(se()(n.prototype),"maximize",this).call(this),this.restoreViewportSetting=e.viewport.toObject(),this.showProperties(),this.changeSize(),this.hideRisizeController(),this.container.css({overflow:"hidden"}),this.maximizeViewportSetting?this.diagram.viewport.set(this.maximizeViewportSetting):this.focusMainRoot(),this.renderZoomController(),this.setTopToolbar()}},{key:"restore",value:function(){var e=this.diagram;Bc()(se()(n.prototype),"restore",this).call(this),this.maximizeViewportSetting=e.viewport.toObject(),this.showProperties(),this.changeSize(),this.container.css({overflow:"initial"}),this.restoreViewportSetting?this.diagram.viewport.set(this.restoreViewportSetting):this.focusMainRoot(),this.renderZoomController(),this.state.readonly||this.showRisizeController(),this.setTopToolbar()}},{key:"destroyDiagram",value:function(){var e=this.diagram;e&&e.destroy()}},{key:"normalizeValue",value:function(){var e=this.value;if(e.diagramData&&"string"==typeof e.diagramData){var t=El.a.inflate(e.diagramData,{to:"string"});e.diagramData=JSON.parse(t)}}},{key:"render",value:function(){this.normalizeValue(),this.createScrollWrapper(),this.createDiagram(),this.createZoomController(),this.createResizeController(),this.createMask(),this.toggleMargin(),this.container.css("border","1px solid rgba(0,0,0,0)")}},{key:"destroy",value:function(){this.destroyDiagram(),Bc()(se()(n.prototype),"destroy",this).call(this),this.restoreSidebar(),this.engine&&this.engine.toolbar.restore()}}]),n}();g()(lf,"type","block"),g()(lf,"uid",!0);var sf=xl.t.Mindmap,uf=xl.a.deepTreeTraversal,df=xl.i.Properties,ff=xl.i.Dropdown,pf=xl.i.Note,hf=xl.i.ContextMenu,mf=xl.d.uploadMindmapImage,gf=xl.d.onBeforeSave,vf=xl.d.mindmapInsertLine,yf=xl.d.collapseActive,bf=xl.d.enableCollapseExpand,kf=xl.d.executeCollapseExpand,wf=xl.d.importData,xf=function(e){oe()(n,lf);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e,a){var o;if(l()(this,n),(o=t.call(this,{plugins:[sf],head:{type:"mindmap"},Properties:df.Mindmap})).locale=(e||a).locale.mindmap,e){var i=e.options.docId||"unknow",c=new r.Uploader({docId:i,imageAction:e.options.image.uploadAction});o.uploader=c,o.bindEvent(e.asyncEvent,"save:before",(function(){o.onBeforeSave()}))}return o}return u()(n,[{key:"importData",value:function(){var e=this.diagram,t=this.value,n=this.uploader;wf({data:t.diagramData,diagram:e,uploader:n})}},{key:"renderContextMenu",value:function(){var e=this.diagram,t=this.container,n=document.createElement("div");this.contextMenuContainer=n,n.className="lake-prevent-card-activated",t.append(n),Vc.a.render(Fc.a.createElement(hf.Mind,{diagram:e}),n)}},{key:"renderNote",value:function(){var e=this.diagram,t=this.container,n=document.createElement("div");t.append(n),this.noteContainer=n,this.state.readonly?Vc.a.render(Fc.a.createElement(pf.Reader,{diagram:e}),n):Vc.a.render(Fc.a.createElement(pf.Editor,{diagram:e}),n)}},{key:"renderInner",value:function(){this.renderNote(),Bc()(se()(n.prototype),"renderInner",this).call(this)}},{key:"onBeforeSave",value:function(){return gf(this,this.uploader)}},{key:"createDiagram",value:function(){var e=this;Bc()(se()(n.prototype),"createDiagram",this).call(this),this.diagram.on("importimage",(function(t){var n=e.uploader,r=e.diagram;mf({file:t.files[0],uploader:n,diagram:r,from:"clipboard"})}))}},{key:"topToolbar",value:function(){var e=this,t=this.engine,r=this.locale,o=this.diagram,i=Bc()(se()(n.prototype),"topToolbar",this).call(this);return[{name:"save",title:r.save,hotkey:a.ua.macos?"⌘+S":"Ctrl+S",icon:'<span class="lake-icon lake-icon-save" />',onClick:function(e){e.stopPropagation(),t.command.execute("save")}},{name:"mindmap:undo",title:r.undo,hotkey:a.ua.macos?"⌘+Z":"Ctrl+Z",icon:'<span class="lake-icon lake-icon-undo" />',getDisabled:function(){return!o.command.enable("Undo")},onClick:function(e){e.stopPropagation(),o.command.execute("Undo")}},{name:"mindmap:redo",title:r.redo,hotkey:a.ua.macos?"⌘+Shift+Z":"Ctrl+Shift+Z",icon:'<span class="lake-icon lake-icon-redo" />',getDisabled:function(){return!o.command.enable("Redo")},onClick:function(e){e.stopPropagation(),o.command.execute("Redo")}},{type:"separator"},{name:"mindmap:beginInsertRoot",title:r.insertRoot,icon:'<span class="lake-icon lake-icon-insert-root" />',onClick:function(e){e.stopPropagation(),o.selector.clear(),o.command.execute("MindmapBeginInsertRoot")}},{name:"mindmap:append",title:r.insertSibling,hotkey:"Enter",icon:'<span class="lake-icon lake-icon-insert-sibling" />',getDisabled:function(){return!o.command.enable("MindmapAppendSibling")},onClick:function(e){e.stopPropagation(),o.command.execute("MindmapAppendSibling")}},{name:"mindmap:appendChild",title:r.insertChild,hotkey:"Tab",icon:'<span class="lake-icon lake-icon-insert-child" />',getDisabled:function(){return!o.command.enable("MindmapAppendChild")},onClick:function(e){e.stopPropagation(),o.command.execute("MindmapAppendChild")}},{type:"separator"},{name:"mindmap:insertLine",type:"custom",hotkey:a.ua.macos?"⌘+L":"Ctrl+L",CustomButton:Fc.a.createElement(ff,{title:r.line,mode:"button",defaultKey:"curve-arrow",menuClassName:"lake-prevent-card-activated lake-diagram-dropdown-menu",data:[{key:"curve",icon:"line-curve"},{key:"curve-arrow",icon:"line-curve-arrow"}],onClick:function(e){var t=e.key;vf(o,t)},onSelect:function(e){var t=e.key;vf(o,t)}})},{name:"mindmap:insertNote",title:"备注",icon:'<span class="lake-icon lake-icon-diagram-toolbar-note" />',getDisabled:function(){return!o.command.enable("MindmapOpenNote")},onClick:function(){o.command.execute("MindmapOpenNote")}},{name:"mindmap:image",title:r.attachImage,type:"upload",icon:'<span class="lake-icon lake-icon-image" />',getDisabled:function(){return!o.command.enable("MindmapAttachImage")},uploader:{post:function(t,n){var r=e.uploader,a=e.diagram;mf({file:n[0],uploader:r,diagram:a,from:"button"})}}},{name:"mindmap:createLink",title:r.createLink,hotkey:a.ua.macos?"⌘+K":"Ctrl+K",icon:'<span class="lake-icon lake-icon-link" />',getDisabled:function(){return!o.command.enable("MindmapCreateLink")},onClick:function(e){e.stopPropagation(),o.command.execute("MindmapCreateLink")}},{type:"separator"},{name:"mindmap:collapse-expand",title:r.collapse,hotkey:a.ua.macos?"⌘+/":"Ctrl+/",icon:'<span class="lake-icon lake-icon-collapse-node" />',getActive:function(){return yf(o)},getDisabled:function(){return!bf(o)},onClick:function(e){e.stopPropagation(),kf(o)}}].concat(i)}},{key:"preventMask",value:function(e){return Bc()(se()(n.prototype),"preventMask",this).call(this,e)||e.target.closest(".lake-diagram-dropdown-menu")||e.target.closest(".lake-prevent-card-activated")}},{key:"normalizeValue",value:function(){var e=this.value;if(e.width&&(e.width=Number(e.width)),e.height&&(e.height=Number(e.height)),e.graphData&&e.graphData.roots&&(e.graphData.roots.forEach((function(e){e.type="mindmap",uf(e,(function(t,n){n!==e&&delete t.side,t.label&&(t.html="".concat(t.label)),delete t.width,delete t.height,delete t.label}))})),e.diagramData={head:{version:"1.0.0"},body:e.graphData.roots},delete e.graphData),e.diagramData||(e.diagramData=nf(this.locale)),e.diagramData&&"string"==typeof e.diagramData){var t=El.a.inflate(e.diagramData,{to:"string"});e.diagramData=JSON.parse(t)}!e.diagramData.head||"1.0.0"!==e.diagramData.head.version&&"1.0.0"!==e.diagramData.head.verstion||"2.0.0"!==xl.v||e.diagramData.body.forEach((function(e){e.border={fill:"#577DF9"},e.rainbow=!1,e.tapered=!0,uf(e,(function(e){"left"===e.side&&(e.layout={quadrant:2})}))}))}}]),n}();function _f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ef(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_f(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cf=xl.t.Flowchart,Of=xl.i.ShapeOverlay,Sf=xl.i.Dropdown,Rf=xl.i.Properties,jf=function(e){oe()(n,lf);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e,r){var a;return l()(this,n),(a=t.call(this,{plugins:[Cf],head:{type:"flowchart"},Properties:Rf.Flowchart})).locale=(e||r).locale.flowchart,a}return u()(n,[{key:"topToolbar",value:function(){var e=this.engine,t=this.locale,r=this.diagram,o=Bc()(se()(n.prototype),"topToolbar",this).call(this);return[{name:"save",title:t.save,hotkey:a.ua.macos?"⌘+S":"Ctrl+S",icon:'<span class="lake-icon lake-icon-save" />',onClick:function(t){t.stopPropagation(),e.command.execute("save")}},{name:"flowchart:undo",title:t.undo,hotkey:a.ua.macos?"⌘+Z":"Ctrl+Z",icon:'<span class="lake-icon lake-icon-undo" />',getDisabled:function(){return!r.destroyed&&!r.command.enable("Undo")},onClick:function(e){e.stopPropagation(),r.command.execute("Undo")}},{name:"flowchart:redo",title:t.redo,hotkey:a.ua.macos?"⌘+Shift+Z":"Ctrl+Shift+Z",icon:'<span class="lake-icon lake-icon-redo" />',getDisabled:function(){return!r.destroyed&&!r.command.enable("Redo")},onClick:function(e){e.stopPropagation(),r.command.execute("Redo")}},{type:"separator"},{name:"flowchart:insertText",title:t.insertText,icon:'<span class="lake-icon lake-icon-insert-text" />',onClick:function(e){e.stopPropagation(),r.command.execute("FlowchartBeginInsertText")}},{name:"flowchart:insertShape",type:"custom",CustomButton:Fc.a.createElement(Sf,{diagram:r,icon:"insert-shape",title:t.insertShape,overlay:Fc.a.createElement(Of,{className:"lake-prevent-card-activated lake-diagram-shape-overlay",onSelect:function(e){var t=e.key;r.command.execute("FlowchartBeginInsertShape",{shape:t})}})})},{name:"flowchart:insertEdge",type:"custom",CustomButton:Fc.a.createElement(Sf,{title:t.insertShape,mode:"button",defaultKey:"elbow-line-arrow",menuClassName:"lake-prevent-card-activated lake-diagram-dropdown-menu",data:[{key:"straight-line",icon:"straight-line"},{key:"straight-line-arrow",icon:"straight-line-arrow"},{key:"elbow-line",icon:"elbow-line"},{key:"elbow-line-arrow",icon:"elbow-line-arrow"}],onClick:function(e){var t=e.key.split("-"),n=h()(t,3),a=n[0],o=n[2];r.command.execute("FlowchartBeginInsertEdge",{shape:a,marker:o})},onSelect:function(e){var t=e.key.split("-"),n=h()(t,3),a=n[0],o=n[2];r.settings.flowchart=Ef(Ef({},r.settings.flowchart),{},{edge:{shape:a,marker:o}}),r.command.execute("FlowchartBeginInsertEdge",{shape:a,marker:o})}})},{name:"flowchart:createLink",title:t.createLink,hotkey:a.ua.macos?"⌘+K":"Ctrl+K",icon:'<span class="lake-icon lake-icon-link" />',getDisabled:function(){return!r.command.enable("CreateLink")},onClick:function(e){e.stopPropagation(),r.command.execute("CreateLink")}}].concat(o)}},{key:"preventMask",value:function(e){return Bc()(se()(n.prototype),"preventMask",this).call(this,e)||e.target.closest(".lake-diagram-shape-overlay, .lake-diagram-dropdown-menu")}},{key:"normalizeValue",value:function(){Bc()(se()(n.prototype),"normalizeValue",this).call(this);var e=this.value.diagramData;function t(t){if(!t)return!1;var n=t.id,r=t.connection;return!(null==n&&null==r||null!=n&&!e.body.find((function(e){return e.id===n})))}if(Array.isArray(e.body))for(var r=e.body,a=r.length-1;a>=0;a--){var o=r[a];"edge"===o.type&&(t(o.source)&&t(o.target)||r.splice(a,1))}}}]),n}(),Pf={puml:{sequence:{id:"sequence",name:"时序图 (Sequence)",text:'@startuml\n\nautonumber\n\nactor "用户" as User\nparticipant "浏览器" as Browser\nparticipant "服务端" as Server #orange\n\nactivate User\n\nUser -> Browser: 输入 URL\nactivate Browser\n\nBrowser -> Server: 请求服务器\nactivate Server\n\nServer -> Server: 模板渲染\nnote right of Server: 这是一个注释\n\nServer -> Browser: 返回 HTML\ndeactivate Server\n\nBrowser --\x3e User\n\n@enduml',src:"https://cdn.nlark.com/__puml/b11b6192390c95750c4b71c2580ff529.svg"},"use-case":{id:"use-case",name:"用例图 (Use Case)",text:"@startuml\n\nactor A\nactor B\n\nA -up-> (up)\nA -right-> (center)\nA -down-> (down)\nA -left-> (left)\n\nB -up-> (up)\nB -left-> (center)\nB -right-> (right)\nB -down-> (down)\n\n@enduml",src:"https://lark-assets-prod.oss-cn-hangzhou.aliyuncs.com/__puml/a7908b49c22b05104624bebc463cd25d.svg"},class:{id:"class",name:"类图 (Class)",text:"@startuml\n\nclass Car {\n  color\n  model\n  +start()\n  #run()\n  #stop()\n}\n\nCar <|- Bus\nCar *-down- Tire\nCar *-down- Engine\nBus o-down- Driver\n\n@enduml",src:"https://lark-assets-prod.oss-cn-hangzhou.aliyuncs.com/__puml/e9cf4eba3cdaf0cf1bc68065406d9d43.svg"},flowchart:{id:"flowchart",name:"流程图 (Flow)",text:"@startuml\n\nstart\n\n:step 1;\n\nif (try) then (true)\n  :step 2;\n  :step 3;\nelse (false)\n  :error;\n  end\nendif\n\nstop\n\n@enduml",src:"https://lark-assets-prod.oss-cn-hangzhou.aliyuncs.com/__puml/48a1408972f20bc1f4837aa807254692.svg"},activity:{id:"activity",name:"活动图 (Activity)",text:"@startuml\n\n|A Section|\nstart\n:step1;\n|#AntiqueWhite|B Section|\n:step2;\n:step3;\n|A Section|\n:step4;\n|B Section|\n:step5;\nstop\n\n@enduml",src:"https://lark-assets-prod.oss-cn-hangzhou.aliyuncs.com/__puml/2aa76dcc256f08335083bd039b5b4e49.svg"},component:{id:"component",name:"组件图 (Component)",text:"@startuml\n\nDataAccess - [First Component]\n[First Component] ..> HTTP : use\n\n@enduml",src:"https://lark-assets-prod.oss-cn-hangzhou.aliyuncs.com/__puml/6b9de2b03b69402b018655ed491fcd34.svg"},state:{id:"state",name:"状态图 (State)",text:"@startuml\n\n[*] --\x3e State1\nState1 --\x3e [*]\nState1 : this is a string\nState1 : this is another string\n\nState1 -> State2\nState2 --\x3e [*]\n\n@enduml",src:"https://lark-assets-prod.oss-cn-hangzhou.aliyuncs.com/__puml/0d1c26fb399ed9669a2e1a29e98b4de4.svg"},object:{id:"object",name:"对象图 (Object)",text:"@startuml\n\nobject Car\nobject Bus\nobject Tire\nobject Engine\nobject Driver\n\nCar <|- Bus\nCar *-down- Tire\nCar *-down- Engine\nBus o-down- Driver\n\n@enduml",src:"https://lark-assets-prod.oss-cn-hangzhou.aliyuncs.com/__puml/1af2d7ebc3e554c752289bcce7679cdb.svg"}}},Af=function(e){return Pf[e]||null},Tf={TEXT_DIAGRAM_TYPES:{PUML:"puml",MERMAID:"mermaid",GRAPHVIZ:"graphviz",FLOWCHART:"flowchart"},TEXT_DIAGRAMS:[{type:"puml",name:"PlantUML"},{type:"mermaid",name:"Mermaid"},{type:"flowchart",name:"Flowchart"},{type:"graphviz",name:"Graphviz"}],TEXT_DIAGRAM_GUIDES:{puml:"https://www.yuque.com/yuque/gpvawt/editor-puml",flowchart:"https://www.yuque.com/yuque/gpvawt/flowchart",graphviz:"https://www.yuque.com/yuque/gpvawt/graphviz",mermaid:"https://www.yuque.com/yuque/gpvawt/mermaid"},TEXT_DIAGRAM_SYNTAX:{puml:"plantuml"},EDITOR_MODE:{CODE:"code",PREVIEW:"preview"},EDITOR_LAYOUT:{DEFAULT:"default",TWO_COLUMN:"two-column"}},Df={};Df.Preview=function(){return Fc.a.createElement("svg",{className:"preview-icon",width:"14px",height:"14px",viewBox:"0 0 14 14",version:"1.1"},Fc.a.createElement("g",{id:"Editor-Interface",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Fc.a.createElement("g",{id:"16-PlantUML---编辑",transform:"translate(-1001.000000, -372.000000)",fill:"#25B864",fillRule:"nonzero"},Fc.a.createElement("g",{id:"Group-4",transform:"translate(1001.000000, 368.000000)"},Fc.a.createElement("path",{d:"M7,4 C3.134375,4 0,7.134375 0,11 C0,14.865625 3.134375,18 7,18 C10.865625,18 14,14.865625 14,11 C14,7.134375 10.865625,4 7,4 Z M9.2515625,11.1078125 L5.8390625,13.590625 C5.8171875,13.60625 5.7921875,13.6140625 5.765625,13.6140625 C5.696875,13.6140625 5.640625,13.5578125 5.640625,13.4890625 L5.640625,8.5265625 C5.640625,8.5 5.6484375,8.475 5.6640625,8.453125 C5.7046875,8.396875 5.7828125,8.384375 5.8390625,8.425 L9.2515625,10.90625 C9.2625,10.9140625 9.271875,10.9234375 9.2796875,10.934375 C9.3203125,10.9890625 9.3078125,11.0671875 9.2515625,11.1078125 Z",id:"Shape"})))))};var Mf=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"onImgLoad",(function(){"function"==typeof r.props.onLoad&&r.props.onLoad()})),r.state={url:e.url,error:null},r}return u()(n,[{key:"componentDidMount",value:function(){!this.state.url&&this.props.code&&this.genImg()}},{key:"componentDidUpdate",value:function(e){this.props.code!==e.code&&this.genImg()}},{key:"genImg",value:function(){var e=this;Ls(this.props.type,this.props.code,this.props.origin,this.props.engine).then((function(t){var n;t.success?e.setState({url:(n=t.svg,"data:image/svg+xml;utf8,".concat(encodeURIComponent(n))),error:null}):e.setState({error:t.message})})).catch((function(t){e.setState({error:t.message})}))}},{key:"render",value:function(){var e,t=this.props,n=t.type,r=t.className,a=void 0===r?"":r,o=this.state,i=o.url,c=o.error;return i=this.props.onBeforeRenderImage(i),e=null!==c?Fc.a.createElement("pre",null,c):i?Fc.a.createElement("img",{src:i,onLoad:this.onImgLoad,onDragStart:function(e){e.preventDefault(),e.stopPropagation()}}):Fc.a.createElement("span",{className:"lake-icon lake-icon-loading"}),Fc.a.createElement("div",{className:"lake-text-diagram-viewer lake-text-diagram-".concat(n," ").concat(a)},e)}}]),n}(Fc.a.PureComponent);Mf.propTypes={className:Hc.a.string,type:Hc.a.string.isRequired,code:Hc.a.string.isRequired,url:Hc.a.string,onBeforeRenderImage:Hc.a.func.isRequired,onLoad:Hc.a.func},ls(".lake-card-block-max .lake-text-diagram {\n  height: 100%;\n  background: #fff;\n}\n.lake-card-block-max .lake-text-diagram .diagram-preview {\n  display: none;\n}\n.lake-text-diagram-stage {\n  position: relative;\n  border-radius: 2px;\n  font-size: 14px;\n  border: 1px solid #e8e8e8;\n}\n.lake-text-diagram-stage ul.ant-dropdown-menu {\n  list-style: none;\n  margin: 0;\n}\n.lake-text-diagram-stage ul.ant-dropdown-menu li {\n  margin: 0;\n}\n.lake-text-diagram-nav {\n  border-bottom: 1px solid #e8e8e8;\n  line-height: 24px;\n  height: 32px;\n  padding: 4px 12px;\n  font-size: 14px;\n  color: #595959;\n}\n.lake-text-diagram-nav a,\n.lake-text-diagram-nav a:hover {\n  color: #595959;\n}\n.lake-text-diagram-nav .diagram-name {\n  font-weight: bold;\n}\n.lake-text-diagram-nav .diagram-template-selector,\n.lake-text-diagram-nav .diagram-help {\n  margin-right: 24px;\n}\n.lake-text-diagram-nav .lake-diagram-select {\n  position: absolute;\n}\n.lake-text-diagram-nav .diagram-actions {\n  float: right;\n}\n.lake-text-diagram-nav .diagram-actions .diagram-preview {\n  background: none;\n  border: 1px solid #fff;\n  height: 24px;\n  cursor: pointer;\n  line-height: 22px;\n}\n.lake-text-diagram-nav .diagram-actions .diagram-preview .anticon {\n  margin-right: 4px;\n}\n.lake-text-diagram-nav .diagram-actions .diagram-preview:focus {\n  outline: none;\n}\n.lake-text-diagram-nav .diagram-actions .diagram-preview-active {\n  border: 1px solid #e8e8e8;\n  border-radius: 2px;\n  background: #f5f5f5;\n}\n.lake-text-diagram-editor {\n  overflow: auto;\n  font-size: 12px;\n  background-color: #f9f9f9;\n}\n.lake-text-diagram-layout-default .lake-text-diagram-editor-wrap {\n  position: relative;\n  max-height: 480px;\n}\n.lake-text-diagram-layout-default .lake-text-diagram-preview {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  overflow: auto;\n  top: 0;\n  background-color: #fff;\n  z-index: 10;\n}\n.lake-text-diagram-layout-default .lake-text-diagram-editor {\n  /* 文本图默认 3 行 */\n  min-height: 80px;\n  /* 最大 480 像素，保证多数图不需要滚动条即可预览 */\n  max-height: 480px;\n}\n.lake-text-diagram-preview {\n  position: relative;\n}\n.lake-text-diagram-preview pre {\n  margin: 16px;\n}\n.lake-text-diagram-preview .lake-icon-loading {\n  width: 36px;\n  height: 36px;\n  position: absolute;\n  top: calc(50% - 22px);\n  left: 50%;\n  text-align: center;\n  color: #666;\n  font-size: 36px;\n  z-index: 1;\n  visibility: visible;\n  opacity: 1;\n  transition: all 0.3s linear;\n  animation: loading 0.8s linear infinite;\n}\n.lake-text-diagram-layout-two-column {\n  height: 100%;\n  border-radius: 0;\n  border: 0;\n  border-bottom: 1px solid #e8e8e8;\n}\n.lake-text-diagram-layout-two-column .lake-text-diagram-nav {\n  position: absolute;\n  padding-left: 18px;\n  top: 0;\n  width: 100%;\n}\n.lake-text-diagram-layout-two-column .lake-text-diagram-editor-wrap {\n  width: 100%;\n  height: 100%;\n  padding-top: 33px;\n  overflow: auto;\n  display: flex;\n}\n.lake-text-diagram-layout-two-column .lake-text-diagram-editor {\n  height: 100% !important;\n  max-height: unset;\n  width: 50%;\n}\n.lake-text-diagram-layout-two-column .lake-text-diagram-preview {\n  height: 100%;\n  width: 50%;\n  overflow: auto;\n  border-left: 1px solid #e8e8e8;\n  padding: 12px;\n}\n");var Nf=y()("lake:text-diagram"),Lf=Tf.EDITOR_MODE,If=Tf.EDITOR_LAYOUT,Bf=Tf.TEXT_DIAGRAM_TYPES,zf=function(e){oe()(o,e);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(o);function o(e){var t;return l()(this,o),t=n.call(this,e),g()(de()(t),"focusCM",(function(){t.instance.focus()})),g()(de()(t),"switchType",(function(e){if(e!==t.state.type){var n=t.getCodeMirrorMode(e);Nf("switch diagram type",{type:e,syntax:n}),t.setState({type:e,mode:Lf.CODE,codeForPreview:null}),t.instance.codeMirror.setOption("mode",n),t.props.onDiagramTypeChange(e)}})),g()(de()(t),"switchLayout",(function(e){t.setState({layout:e,mode:Lf.CODE}),t.instance&&t.instance.focus(),e===If.TWO_COLUMN&&(t.bodyRef.current.style.height="100%")})),g()(de()(t),"switchTemplate",(function(e){var n=Af(t.state.type);if(n){var r=n[e];t.instance.codeMirror.setValue(r.text)}})),g()(de()(t),"switchView",(function(e){var n=t.instance.getValue();t.setState({mode:e,codeForPreview:e===Lf.PREVIEW?n:null},(function(){e===Lf.CODE&&t.fixEditorBodySize()}))})),g()(de()(t),"doPreview",(function(){var e=t.instance.getValue();Nf("preview",e),t.setState({codeForPreview:e})})),g()(de()(t),"getHelpUrl",(function(){return Tf.TEXT_DIAGRAM_GUIDES[t.state.type]})),g()(de()(t),"getRootDom",(function(){return t.rootRef.current})),g()(de()(t),"onPreviewDone",(function(){t.fixEditorBodySize()})),g()(de()(t),"handlePreviewButtonClick",(function(){var e=t.state,n=e.mode;e.layout!==If.TWO_COLUMN?n!==Lf.PREVIEW?n===Lf.CODE&&t.switchView(Lf.PREVIEW):t.switchView(Lf.CODE):t.doPreview()})),g()(de()(t),"needShowPreviewPanel",(function(){return t.state.layout===If.TWO_COLUMN||t.state.mode===Lf.PREVIEW})),g()(de()(t),"renderPreview",(function(){var e=t.state,n=e.mode,r=e.layout,a=e.codeForPreview;return r===If.DEFAULT&&n===Lf.CODE?null:a?Fc.a.createElement(Mf,{type:t.state.type,code:a,engine:t.props.engine,origin:t.props.origin,onBeforeRenderImage:t.props.onBeforeRenderImage,onLoad:t.onPreviewDone}):null})),g()(de()(t),"renderDiagramSelect",(function(){return Fc.a.createElement(Kc.a,{className:"lake-diagram-select",defaultValue:t.props.type,size:"small",style:{width:128},getPopupContainer:t.getRootDom,onSelect:function(e){t.switchType(e)}},Tf.TEXT_DIAGRAMS.map((function(e){return Fc.a.createElement(Kc.a.Option,{name:e.name.toLowerCase(),value:e.type,key:e.name},e.name)})))})),t.state={mode:Lf.CODE,type:e.type||Bf.PUML,layout:If.DEFAULT,codeForPreview:null},t.rootRef=Fc.a.createRef(),t.editorRef=Fc.a.createRef(),t.bodyRef=Fc.a.createRef(),t.templates=Af(e.type),t.instance=null,t}return u()(o,[{key:"componentDidMount",value:function(){this.initEditor()}},{key:"initEditor",value:(t=bl()(wl.a.mark((function e(){var t,n,a,o,i,c,l=this;return wl.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.editorRef.current,n=this.props.type,a=this.getOptions(n),o=this.props.isMaximize,i=J()((function(){l.doPreview()}),300),window.CodeMirror){e.next=8;break}return e.next=8,Object(r.loadModule)("codemirror");case 8:(c=window.CodeMirror.default.fromTextArea(t,a)).on("change",(function(){var e=c.getValue();"function"==typeof l.props.onChange&&l.props.onChange(e),o()&&i()})),c.on("focus",(function(){"function"==typeof l.props.onFocus&&l.props.onFocus()})),c.on("blur",(function(){if("function"==typeof l.props.onBlur){var e=c.getValue();l.props.onBlur(e)}})),this.instance={codeMirror:c,switchLayout:this.switchLayout,focus:function(){c.focus()},getValue:function(){return c.getValue()},doPreview:function(){l.doPreview()}},"function"==typeof this.props.onLoad&&this.props.onLoad({editor:this.instance});case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getCodeMirrorMode",value:function(e){return Tf.TEXT_DIAGRAM_SYNTAX[e]||"simplemode"}},{key:"getDiagramName",value:function(e){var t=Tf.TEXT_DIAGRAMS.find((function(t){return t.type===e}));return t?t.name:""}},{key:"getOptions",value:function(e){return{tabSize:2,mode:this.getCodeMirrorMode(e),lineNumbers:!0,lineWrapping:!1,indentWithTabs:!0,styleActiveLine:!1,matchBrackets:!0,autofocus:!1,dragDrop:!1,readOnly:!1,scrollbarStyle:"null",viewportMargin:1/0}}},{key:"fixEditorBodySize",value:function(){var e=this.state,t=e.mode;if(e.layout===If.DEFAULT){var n=this.bodyRef.current,r=null;t===Lf.PREVIEW?(r=n.querySelector(".lake-text-diagram-preview").scrollHeight,n.style.height=r+"px"):n.style.height="auto"}}},{key:"renderTemplates",value:function(){var e=this,t=this.props.locale,n=Af(this.state.type);return n?Fc.a.createElement(Zc.a,{trigger:["click"],getPopupContainer:this.getRootDom,disabled:this.state.mode!==Lf.CODE,placement:"bottomLeft",overlay:Fc.a.createElement($c.a,{onClick:function(t){var n=t.key;t.domEvent.stopPropagation(),e.switchTemplate(n)}},Object.values(n).map((function(e){return Fc.a.createElement($c.a.Item,{key:e.id},e.name)})))},Fc.a.createElement("a",{className:"diagram-template-selector"},t.template," ",Fc.a.createElement(Sl.a,null))):null}},{key:"render",value:function(){var e=this,t=this.props.locale,n=this.state,r=n.mode,o=n.layout;return Fc.a.createElement("div",{className:vl()(["lake-text-diagram-stage","lake-text-diagram-layout-".concat(o)]),onKeyDown:function(t){(t.metaKey||t.ctrlKey)&&80===t.keyCode&&(t.preventDefault(),e.handlePreviewButtonClick())},ref:this.rootRef},Fc.a.createElement("div",{className:"lake-text-diagram-nav"},this.props.canChangeType?this.renderDiagramSelect():Fc.a.createElement("span",{className:"diagram-name"},this.getDiagramName(this.props.type)),Fc.a.createElement("div",{className:"diagram-actions"},this.renderTemplates(),Fc.a.createElement("a",{className:"diagram-help",href:this.getHelpUrl(),target:"_blank"},t.help),Fc.a.createElement(Wc.a,{title:a.ua.macos?t.macPreviewTooltip:t.winPreviewTooltip},Fc.a.createElement("button",{size:"small",className:vl()({"diagram-preview":!0,"diagram-preview-active":r===Lf.PREVIEW}),onClick:this.handlePreviewButtonClick},Fc.a.createElement("span",{role:"img",className:"anticon"},Fc.a.createElement(Df.Preview,null)),t.preview)))),Fc.a.createElement("div",{className:"lake-text-diagram-editor-wrap",ref:this.bodyRef,onClick:this.focusCM},Fc.a.createElement("div",{className:"lake-text-diagram-editor"},Fc.a.createElement("textarea",{value:this.props.code,ref:this.editorRef,autoComplete:"off",tabIndex:"1",readOnly:!0})),Fc.a.createElement("div",{className:"lake-text-diagram-preview",style:{display:this.needShowPreviewPanel()?"block":"none"}},this.renderPreview())))}}]),o}(Fc.a.PureComponent);zf.propTypes={canChangeType:Hc.a.bool.isRequired,type:Hc.a.oneOf(Object.values(Tf.TEXT_DIAGRAM_TYPES)),code:Hc.a.string.isRequired,locale:Hc.a.object.isRequired,engine:Hc.a.object,onChange:Hc.a.func,onDiagramTypeChange:Hc.a.func.isRequired,onBlur:Hc.a.func.isRequired,onFocus:Hc.a.func.isRequired,onBeforeRenderImage:Hc.a.func.isRequired,onLoad:Hc.a.func,isMaximize:Hc.a.func,origin:Hc.a.func};var Ff=y()("lake:text-diagram"),Uf=Tf.EDITOR_LAYOUT,Vf=Tf.TEXT_DIAGRAM_TYPES,qf=function(e){oe()(n,Ds);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e,r){var a;return l()(this,n),a=t.call(this),g()(de()(a),"focusToCodeEditor",(function(){a.editor&&a.editor.focus()})),g()(de()(a),"onEditorChange",(function(e){e!==a.value.code&&(a.value.code=e,a.value.url=null),a.engine&&a.engine.change.change()})),g()(de()(a),"changeDiagramType",(function(e){a.diagramType=e,a.prevValue={url:null,code:null}})),g()(de()(a),"onEditorBlur",(function(){Ff("editor blur"),a.engine.toolbar.disable(!1),a.saveDiagram()})),g()(de()(a),"onEditorFocus",(function(){Ff("editor focus"),a.engine.toolbar.disable(!0)})),g()(de()(a),"needConvertToImage",(function(){return a.value.code?!a.value.url:a.prevValue.code&&!a.prevValue.url})),g()(de()(a),"saveDiagram",(function(){if(a.value&&null!==a.value.code){var e={code:a.value.code,url:a.value.url,type:a.diagramType};Ff("save diagram",e),a.setValue(e)}})),g()(de()(a),"genImage",(function(e){var t=a.getTopEngine();return Ns(a.diagramType,e,t.options.previewOrigin,t).then((function(e){e.url&&(a.value.url=e.url),a.engine.history.hold(),a.saveDiagram(),a.prevValue=a.value}))})),g()(de()(a),"onBeforeSave",(function(){return a.value.code&&!a.value.url?a.genImage(a.value.code):null})),g()(de()(a),"getDiagramType",(function(e){return"diagram"===a.name?e.type||Vf.PUML:a.name})),a.engine=e,a.contentView=r,a.value={url:null,code:null},a.prevValue={url:null,code:null},a.root=null,a.diagramType=null,a.editor=null,a}return u()(n,[{key:"embedToolbar",value:function(){var e=this,t=[{type:"dnd"},{type:"maximize"},{type:"separator"},{type:"copy"},{type:"copyCardLink",onClick:function(){return e.copyCardEmbedLink()}},{type:"separator"}].concat(x()(this.getMoreEmbedToolbarConfig()));return this.state.readonly&&(t=[{type:"maximize"},{type:"copyCardLink",onClick:function(){return e.copyCardEmbedLink()}}]),t}},{key:"destroy",value:function(){this.engine&&this.engine.asyncEvent.off("save:before",this.onBeforeSave)}},{key:"maximize",value:function(){Bc()(se()(n.prototype),"maximize",this).call(this),this.state.readonly||(this.editor.switchLayout(Uf.TWO_COLUMN),this.editor.doPreview(),this.engine.toolbar.hide())}},{key:"restore",value:function(){Bc()(se()(n.prototype),"restore",this).call(this),this.state.readonly||(this.editor.switchLayout(Uf.DEFAULT),this.engine.toolbar.show())}},{key:"activate",value:function(){this.state.readonly||this.resizeController&&this.resizeController.show()}},{key:"unactivate",value:function(){Ff("[puml]card blur"),this.saveDiagram(),this.needConvertToImage()&&(Ff("[puml]card blur, gen image"),this.genImage(this.value.code)),this.state.readonly||this.resizeController&&this.resizeController.hide()}},{key:"renderEditor",value:function(e){var t=this;Ff("render editor"),Vc.a.render(Fc.a.createElement(zf,{canChangeType:"diagram"===this.name,type:this.diagramType,code:e.code||"",onFocus:this.onEditorFocus,onBlur:this.onEditorBlur,onChange:this.onEditorChange,onDiagramTypeChange:this.changeDiagramType,onBeforeRenderImage:this.onBeforeRenderImage,isMaximize:function(){return t.state.maximize},engine:this.getTopEngine(),origin:this.getTopEngine().options.previewOrigin,onLoad:function(e){var n=e.editor;t.editor=n},locale:this.locale}),this.root[0],(function(){var e=t.root.find(".lake-text-diagram-editor"),n=t.value.height;t.createResizeController(e),n&&e.css("height",n+"px")}))}},{key:"renderViewer",value:function(e){Ff("render puml code."),Vc.a.render(Fc.a.createElement("div",{className:"lake-text-diagram-viewer"},Fc.a.createElement(Mf,{type:this.diagramType,code:e.code,origin:this.getTopEngine().options.previewOrigin,onBeforeRenderImage:this.onBeforeRenderImage,url:e.url})),this.root[0])}},{key:"render",value:function(e,t){Ff("init card use:",t),t&&(this.prevValue=t),e.append('<div class="lake-text-diagram lake-text-diagram-root"></div>'),this.root=this.container.find(".lake-text-diagram-root"),this.diagramType=this.getDiagramType(t),this.engine?(this.locale=this.engine.locale.textDiagram,this.engine.on("save:before",this.saveDiagram),this.engine.asyncEvent.on("save:before",this.onBeforeSave),this.renderEditor(this.prevValue)):this.renderViewer(this.prevValue),this.toggleMargin()}}]),n}();g()(qf,"type","block"),g()(qf,"uid",!0);var Hf=[{value:"plain",syntax:"simplemode",name:"Plain Text"},{value:"bash",syntax:"shell",name:"Bash"},{value:"basic",syntax:"vbscript",name:"Basic"},{value:"c",syntax:"text/x-csrc",name:"C"},{value:"cpp",syntax:"text/x-c++src",name:"C++"},{value:"csharp",syntax:"text/x-csharp",name:"C#"},{value:"css",syntax:"css",name:"CSS"},{value:"dart",syntax:"dart",name:"Dart"},{value:"diff",syntax:"diff",name:"Diff"},{value:"dockerfile",syntax:"dockerfile",name:"Dockerfile"},{value:"erlang",syntax:"erlang",name:"Erlang"},{value:"git",syntax:"shell",name:"Git"},{value:"go",syntax:"go",name:"Go"},{value:"graphql",syntax:"simplemode",name:"GraphQL"},{value:"groovy",syntax:"groovy",name:"Groovy"},{value:"html",syntax:"htmlmixed",name:"HTML"},{value:"http",syntax:"http",name:"HTTP"},{value:"java",syntax:"text/x-java",name:"Java"},{value:"javascript",syntax:"text/javascript",name:"JavaScript"},{value:"json",syntax:"application/json",name:"JSON"},{value:"jsx",syntax:"jsx",name:"JSX"},{value:"katex",syntax:"simplemode",name:"KaTeX"},{value:"kotlin",syntax:"text/x-kotlin",name:"Kotlin"},{value:"less",syntax:"css",name:"Less"},{value:"makefile",syntax:"cmake",name:"Makefile"},{value:"markdown",syntax:"markdown",name:"Markdown"},{value:"matlab",syntax:"octave",name:"MATLAB"},{value:"nginx",syntax:"nginx",name:"Nginx"},{value:"objectivec",syntax:"text/x-objectivec",name:"Objective-C"},{value:"pascal",syntax:"pascal",name:"Pascal"},{value:"perl",syntax:"perl",name:"Perl"},{value:"php",syntax:"php",name:"PHP"},{value:"powershell",syntax:"powershell",name:"PowerShell"},{value:"protobuf",syntax:"protobuf",name:"Protobuf"},{value:"python",syntax:"python",name:"Python"},{value:"r",syntax:"r",name:"R"},{value:"ruby",syntax:"ruby",name:"Ruby"},{value:"rust",syntax:"rust",name:"Rust"},{value:"scala",syntax:"text/x-scala",name:"Scala"},{value:"shell",syntax:"shell",name:"Shell"},{value:"sql",syntax:"text/x-sql",name:"SQL"},{value:"plsql",syntax:"text/x-plsql",name:"PL/SQL"},{value:"swift",syntax:"swift",name:"Swift"},{value:"typescript",syntax:"text/typescript",name:"TypeScript"},{value:"vbnet",syntax:"vb",name:"VB.net"},{value:"velocity",syntax:"velocity",name:"Velocity"},{value:"xml",syntax:"xml",name:"XML"},{value:"yaml",syntax:"yaml",name:"YAML"},{value:"stex",syntax:"text/x-stex",name:"sTeX"},{value:"latex",syntax:"text/x-latex",name:"LaTeX"},{value:"systemverilog",syntax:"text/x-systemverilog",name:"SystemVerilog"},{value:"tcl",syntax:"text/x-tcl",name:"Tcl"},{value:"verilog",syntax:"text/x-verilog",name:"Verilog"},{value:"vue",syntax:"text/x-vue",name:"Vue"},{value:"lua",syntax:"text/x-lua",name:"Lua"}],Wf=function(e,t,n,r,a){var o,i=a.getMode(a.defaults,t),c=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<9),l=n;if(n.appendChild){var s=r&&r.tabSize||a.defaults.tabSize;o=document.createDocumentFragment();var u,d=0,f=1;n=function(e,t,n){var r=(e+"").length-(f+"").length;if(!u){var a=document.createElement("span");a.className="lake-preview-line",a.innerHTML='<span class="lake-preview-line-number lake-lm-pad-level-'.concat(r,'"></span><span class="lake-preview-codeblock-content"></span>'),u=a.lastChild,o.appendChild(a)}if("\n"===t)return u.appendChild(document.createTextNode(c?"\r":t)),u=null,d=0,void f++;for(var i="",l=0;;){var p=t.indexOf("\t",l);if(-1===p){i+=t.slice(l),d+=t.length-l;break}d+=p-l,i+=t.slice(l,p);var h=s-d%s;d+=h;for(var m=0;m<h;++m)i+=" ";l=p+1}if(n){var g=u.appendChild(document.createElement("span"));g.className="cm-"+n.replace(/ +/g," cm-"),g.appendChild(document.createTextNode(i))}else u.appendChild(document.createTextNode(i))}}for(var p=a.splitLines(e),h=r&&r.state||a.startState(i),m=0,g=p.length;m<g;++m){m&&n(g,"\n");var v=new a.StringStream(p[m]);for(!v.string&&i.blankLine&&i.blankLine(h);!v.eol();){var y=i.token(v,h);n(g,v.current(),y,m,v.start,h),v.start=v.pos}}l.appendChild&&o&&l.appendChild(o)};ls('/* stylelint-disable */\n.lake-codeblock {\n  position: relative;\n  padding: 0;\n  overflow: visible;\n  border: 1px solid #e8e8e8;\n  border-radius: 2px 2px;\n  text-indent: 0;\n}\n.lake-codeblock .lake-embed-toolbar-item {\n  float: right;\n  line-height: 32px;\n}\n.lake-codeblock-header {\n  user-select: none;\n  padding: 4px 12px;\n  color: #595959;\n  border-bottom: 1px solid #e8e8e8;\n  display: flex;\n  justify-content: space-between;\n  /* AntD 组件中用了 ul 需要覆盖默认定义的文档中的 UL 的样式 */\n}\n.lake-codeblock-header ul {\n  margin: 0;\n  padding: 0;\n}\n.lake-codeblock-header li {\n  margin: 0;\n}\n.lake-codeblock-header .lake-codeblock-text {\n  margin-right: 8px;\n  color: #595959;\n  font-size: 14px;\n}\n.lake-codeblock-content {\n  background: #f9f9f9;\n  overflow: auto;\n  counter-reset: codeblock-lm;\n}\n.lake-codeblock-content .lake-preview-line-number::after {\n  counter-increment: codeblock-lm;\n  content: counter(codeblock-lm);\n}\n/* --- 预设行号pad - start ---- */\n.lake-lm-pad-level-1::before {\n  content: " ";\n}\n.lake-lm-pad-level-2::before {\n  content: "  ";\n}\n.lake-lm-pad-level-3::before {\n  content: "   ";\n}\n.lake-lm-pad-level-4::before {\n  content: "    ";\n}\n.lake-lm-pad-level-5 {\n  content: "     ";\n}\n.lake-lm-pad-level-6::before {\n  content: "      ";\n}\n.lake-lm-pad-level-7::before {\n  content: "       ";\n}\n.lake-lm-pad-level-8::before {\n  content: "        ";\n}\n.lake-lm-pad-level-9::before {\n  content: "         ";\n}\n.lake-lm-pad-level-10::before {\n  content: "          ";\n}\n/* --- 预设行号pad - end ---- */\n.lake-engine,\n.lake-engine-view {\n  /* BASICS */\n  /* PADDING */\n  /* GUTTER */\n  /* CURSOR */\n  /* Shown when moving in bi-directional text */\n  /* DEFAULT THEME */\n  /* 以 codemirror 默认为蓝本，部分颜色用 github 及 prism.js */\n  /* use github */\n  /* false null 等常量，use prism.js */\n  /* use github */\n  /* use github */\n  /* use github 蓝色 */\n  /* use github 绿色 */\n  /* use github */\n  /* 单行字符串，用 prism 颜色 origin #a11; */\n  /* 多行字符串，用 prism 颜色 origin #a11; */\n  /* c #include、java annotation 等，采用 vscode default light+ 颜色 */\n  /* use github */\n  /* html tag 名，use github */\n  /* html tag 属性名，use github */\n  /* md 语法 */\n  /* md 语法 */\n  /* 用 github 颜色 */\n  /* 用 github 蓝色，和 cm-def 一致 */\n  /* Default styles for common addons */\n  /* STOP */\n  /* The rest of this file contains styles related to the mechanics of\n    the editor. You probably shouldn\'t touch them. */\n  /* The fake, visible scrollbars. Used to force redraw during scrolling\n    before actual scrolling happens, thus preventing shaking and\n    flickering artifacts. */\n  /* Force content-box sizing for the elements where we expect it */\n  /* Used to force a border model for a node */\n  /* See issue #2901 */\n  /* Help users use markselection to safely style text background */\n}\n.lake-engine .CodeMirror,\n.lake-engine-view .CodeMirror {\n  /* 字体参照 github，考虑和 14px 文字在一起排版，字号用 13px */\n  font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;\n  font-size: 13px;\n  line-height: 21px;\n  color: #595959;\n  direction: ltr;\n}\n.lake-engine .CodeMirror-lines,\n.lake-engine-view .CodeMirror-lines {\n  padding: 8px 0;\n  /* Vertical padding around content */\n}\n.lake-engine .CodeMirror-scrollbar-filler,\n.lake-engine-view .CodeMirror-scrollbar-filler,\n.lake-engine .CodeMirror-gutter-filler,\n.lake-engine-view .CodeMirror-gutter-filler {\n  background-color: white;\n  /* The little square between H and V scrollbars */\n}\n.lake-engine .CodeMirror-gutters,\n.lake-engine-view .CodeMirror-gutters {\n  border: 0;\n  white-space: nowrap;\n  padding: 0 8px;\n  background-color: unset;\n}\n.lake-engine .CodeMirror-linenumber,\n.lake-engine-view .CodeMirror-linenumber {\n  padding: 0;\n  min-width: 20px;\n  text-align: right;\n  color: #BFBFBF;\n  white-space: nowrap;\n}\n.lake-engine .CodeMirror-guttermarker,\n.lake-engine-view .CodeMirror-guttermarker {\n  color: black;\n}\n.lake-engine .CodeMirror-guttermarker-subtle,\n.lake-engine-view .CodeMirror-guttermarker-subtle {\n  color: #999;\n}\n.lake-engine .CodeMirror-cursor,\n.lake-engine-view .CodeMirror-cursor {\n  border-left: 1px solid black;\n  border-right: none;\n  width: 0;\n}\n.lake-engine .CodeMirror div.CodeMirror-secondarycursor,\n.lake-engine-view .CodeMirror div.CodeMirror-secondarycursor {\n  border-left: 1px solid silver;\n}\n.lake-engine .cm-fat-cursor .CodeMirror-cursor,\n.lake-engine-view .cm-fat-cursor .CodeMirror-cursor {\n  width: auto;\n  border: 0 !important;\n  background: #7e7;\n}\n.lake-engine .cm-fat-cursor div.CodeMirror-cursors,\n.lake-engine-view .cm-fat-cursor div.CodeMirror-cursors {\n  z-index: 1;\n}\n.lake-engine .cm-fat-cursor-mark,\n.lake-engine-view .cm-fat-cursor-mark {\n  background-color: rgba(20, 255, 20, 0.5);\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n}\n.lake-engine .cm-animate-fat-cursor,\n.lake-engine-view .cm-animate-fat-cursor {\n  width: auto;\n  border: 0;\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n  background-color: #7e7;\n}\n@-moz-keyframes blink {\n  50% {\n    background-color: transparent;\n  }\n}\n@-webkit-keyframes blink {\n  50% {\n    background-color: transparent;\n  }\n}\n@keyframes blink {\n  50% {\n    background-color: transparent;\n  }\n}\n.lake-engine .cm-tab,\n.lake-engine-view .cm-tab {\n  display: inline-block;\n  text-decoration: inherit;\n}\n.lake-engine .CodeMirror-rulers,\n.lake-engine-view .CodeMirror-rulers {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: -50px;\n  bottom: -20px;\n  overflow: hidden;\n}\n.lake-engine .CodeMirror-ruler,\n.lake-engine-view .CodeMirror-ruler {\n  border-left: 1px solid #ccc;\n  top: 0;\n  bottom: 0;\n  position: absolute;\n}\n.lake-engine .cm-s-default .cm-header,\n.lake-engine-view .cm-s-default .cm-header {\n  color: blue;\n}\n.lake-engine .cm-s-default .cm-quote,\n.lake-engine-view .cm-s-default .cm-quote {\n  color: #090;\n}\n.lake-engine .cm-negative,\n.lake-engine-view .cm-negative {\n  color: #d44;\n}\n.lake-engine .cm-positive,\n.lake-engine-view .cm-positive {\n  color: #292;\n}\n.lake-engine .cm-header,\n.lake-engine-view .cm-header,\n.lake-engine .cm-strong,\n.lake-engine-view .cm-strong {\n  font-weight: bold;\n}\n.lake-engine .cm-em,\n.lake-engine-view .cm-em {\n  font-style: italic;\n}\n.lake-engine .cm-link,\n.lake-engine-view .cm-link {\n  text-decoration: underline;\n}\n.lake-engine .cm-strikethrough,\n.lake-engine-view .cm-strikethrough {\n  text-decoration: line-through;\n}\n.lake-engine .cm-s-default .cm-keyword,\n.lake-engine-view .cm-s-default .cm-keyword {\n  color: #d73a49;\n}\n.lake-engine .cm-s-default .cm-atom,\n.lake-engine-view .cm-s-default .cm-atom {\n  color: #905;\n}\n.lake-engine .cm-s-default .cm-number,\n.lake-engine-view .cm-s-default .cm-number {\n  color: #005cc5;\n}\n.lake-engine .cm-s-default .cm-def,\n.lake-engine-view .cm-s-default .cm-def {\n  color: #005cc5;\n}\n.lake-engine .cm-s-default .cm-variable-2,\n.lake-engine-view .cm-s-default .cm-variable-2 {\n  color: #005cc5;\n}\n.lake-engine .cm-s-default .cm-variable-3,\n.lake-engine-view .cm-s-default .cm-variable-3,\n.lake-engine .cm-s-default .cm-type,\n.lake-engine-view .cm-s-default .cm-type {\n  color: #22863a;\n}\n.lake-engine .cm-s-default .cm-comment,\n.lake-engine-view .cm-s-default .cm-comment {\n  color: #6a737d;\n}\n.lake-engine .cm-s-default .cm-string,\n.lake-engine-view .cm-s-default .cm-string {\n  color: #690;\n}\n.lake-engine .cm-s-default .cm-string-2,\n.lake-engine-view .cm-s-default .cm-string-2 {\n  color: #690;\n}\n.lake-engine .cm-s-default .cm-meta,\n.lake-engine-view .cm-s-default .cm-meta {\n  color: #1f7f9a;\n}\n.lake-engine .cm-s-default .cm-qualifier,\n.lake-engine-view .cm-s-default .cm-qualifier {\n  color: #555;\n}\n.lake-engine .cm-s-default .cm-builtin,\n.lake-engine-view .cm-s-default .cm-builtin {\n  color: #6f42c1;\n}\n.lake-engine .cm-s-default .cm-bracket,\n.lake-engine-view .cm-s-default .cm-bracket {\n  color: #997;\n}\n.lake-engine .cm-s-default .cm-tag,\n.lake-engine-view .cm-s-default .cm-tag {\n  color: #22863a;\n}\n.lake-engine .cm-s-default .cm-attribute,\n.lake-engine-view .cm-s-default .cm-attribute {\n  color: #6f42c1;\n}\n.lake-engine .cm-s-default .cm-hr,\n.lake-engine-view .cm-s-default .cm-hr {\n  color: #999;\n}\n.lake-engine .cm-s-default .cm-link,\n.lake-engine-view .cm-s-default .cm-link {\n  color: #00c;\n}\n.lake-engine .cm-s-default .cm-error,\n.lake-engine-view .cm-s-default .cm-error {\n  color: #f00;\n}\n.lake-engine .cm-invalidchar,\n.lake-engine-view .cm-invalidchar {\n  color: #f00;\n}\n.lake-engine .cm-s-default .cm-operator,\n.lake-engine-view .cm-s-default .cm-operator {\n  color: #d73a49;\n}\n.lake-engine .cm-s-default .cm-property,\n.lake-engine-view .cm-s-default .cm-property {\n  color: #005cc5;\n}\n.lake-engine .CodeMirror-composing,\n.lake-engine-view .CodeMirror-composing {\n  border-bottom: 2px solid;\n}\n.lake-engine div.CodeMirror span.CodeMirror-matchingbracket,\n.lake-engine-view div.CodeMirror span.CodeMirror-matchingbracket {\n  color: #0b0;\n}\n.lake-engine div.CodeMirror span.CodeMirror-nonmatchingbracket,\n.lake-engine-view div.CodeMirror span.CodeMirror-nonmatchingbracket {\n  color: #a22;\n}\n.lake-engine .CodeMirror-matchingtag,\n.lake-engine-view .CodeMirror-matchingtag {\n  background: rgba(255, 150, 0, 0.3);\n}\n.lake-engine .CodeMirror-activeline-background,\n.lake-engine-view .CodeMirror-activeline-background {\n  background: transparent;\n}\n.lake-engine .CodeMirror,\n.lake-engine-view .CodeMirror {\n  position: relative;\n  overflow: hidden;\n  height: auto;\n  background: transparent;\n}\n.lake-engine .CodeMirror-scroll,\n.lake-engine-view .CodeMirror-scroll {\n  overflow: scroll !important;\n  /* Things will break if this is overridden */\n  /* 30px is the magic margin used to hide the element\'s real scrollbars */\n  /* See overflow: hidden in .CodeMirror */\n  margin-bottom: -30px;\n  margin-right: -30px;\n  padding-bottom: 30px;\n  outline: none;\n  /* Prevent dragging from highlighting the element */\n  position: relative;\n}\n.lake-engine .CodeMirror-sizer,\n.lake-engine-view .CodeMirror-sizer {\n  position: relative;\n  border-right: 30px solid transparent;\n  min-height: auto !important;\n}\n.lake-engine .CodeMirror-vscrollbar,\n.lake-engine-view .CodeMirror-vscrollbar,\n.lake-engine .CodeMirror-hscrollbar,\n.lake-engine-view .CodeMirror-hscrollbar,\n.lake-engine .CodeMirror-scrollbar-filler,\n.lake-engine-view .CodeMirror-scrollbar-filler,\n.lake-engine .CodeMirror-gutter-filler,\n.lake-engine-view .CodeMirror-gutter-filler {\n  position: absolute;\n  z-index: 6;\n  display: none;\n}\n.lake-engine .CodeMirror-vscrollbar,\n.lake-engine-view .CodeMirror-vscrollbar {\n  right: 0;\n  top: 0;\n  overflow-x: hidden;\n  overflow-y: scroll;\n  display: none !important;\n}\n.lake-engine .CodeMirror-hscrollbar,\n.lake-engine-view .CodeMirror-hscrollbar {\n  bottom: 0;\n  left: 0;\n  overflow-y: hidden;\n  overflow-x: scroll;\n  display: none !important;\n}\n.lake-engine .CodeMirror-scrollbar-filler,\n.lake-engine-view .CodeMirror-scrollbar-filler {\n  right: 0;\n  bottom: 0;\n}\n.lake-engine .CodeMirror-gutter-filler,\n.lake-engine-view .CodeMirror-gutter-filler {\n  left: 0;\n  bottom: 0;\n}\n.lake-engine .CodeMirror-gutters,\n.lake-engine-view .CodeMirror-gutters {\n  position: absolute;\n  left: 0;\n  top: 0;\n  min-height: 100%;\n  z-index: 3;\n  background: #f9f9f9;\n}\n.lake-engine .CodeMirror-gutter,\n.lake-engine-view .CodeMirror-gutter {\n  white-space: normal;\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  margin-bottom: -30px;\n}\n.lake-engine .CodeMirror-gutter-wrapper,\n.lake-engine-view .CodeMirror-gutter-wrapper {\n  position: absolute;\n  z-index: 4;\n  background: none !important;\n  border: none !important;\n}\n.lake-engine .CodeMirror-gutter-background,\n.lake-engine-view .CodeMirror-gutter-background {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  z-index: 4;\n}\n.lake-engine .CodeMirror-gutter-elt,\n.lake-engine-view .CodeMirror-gutter-elt {\n  position: absolute;\n  cursor: default;\n  z-index: 4;\n}\n.lake-engine .CodeMirror-gutter-wrapper ::selection,\n.lake-engine-view .CodeMirror-gutter-wrapper ::selection {\n  background-color: transparent;\n}\n.lake-engine .CodeMirror-gutter-wrapper ::-moz-selection,\n.lake-engine-view .CodeMirror-gutter-wrapper ::-moz-selection {\n  background-color: transparent;\n}\n.lake-engine .CodeMirror-lines,\n.lake-engine-view .CodeMirror-lines {\n  cursor: text;\n  min-height: 1px;\n  /* prevents collapsing before first draw */\n}\n.lake-engine .CodeMirror pre,\n.lake-engine-view .CodeMirror pre {\n  /* Reset some styles that the rest of the page might have set */\n  -moz-border-radius: 0;\n  -webkit-border-radius: 0;\n  border-radius: 0;\n  border-width: 0;\n  background: transparent;\n  font-family: inherit;\n  font-size: inherit;\n  margin: 0;\n  white-space: pre;\n  word-wrap: normal;\n  line-height: inherit;\n  color: inherit;\n  z-index: 2;\n  position: relative;\n  overflow: visible;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-font-variant-ligatures: contextual;\n  font-variant-ligatures: contextual;\n}\n.lake-engine .CodeMirror-wrap pre,\n.lake-engine-view .CodeMirror-wrap pre {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  word-break: normal;\n}\n.lake-engine .CodeMirror-linebackground,\n.lake-engine-view .CodeMirror-linebackground {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: 0;\n}\n.lake-engine .CodeMirror-linewidget,\n.lake-engine-view .CodeMirror-linewidget {\n  position: relative;\n  z-index: 2;\n  padding: 0.1px;\n  /* Force widget margins to stay inside of the container */\n}\n.lake-engine .CodeMirror-rtl pre,\n.lake-engine-view .CodeMirror-rtl pre {\n  direction: rtl;\n}\n.lake-engine .CodeMirror-code,\n.lake-engine-view .CodeMirror-code {\n  outline: none;\n}\n.lake-engine .CodeMirror-scroll,\n.lake-engine-view .CodeMirror-scroll,\n.lake-engine .CodeMirror-sizer,\n.lake-engine-view .CodeMirror-sizer,\n.lake-engine .CodeMirror-gutter,\n.lake-engine-view .CodeMirror-gutter,\n.lake-engine .CodeMirror-gutters,\n.lake-engine-view .CodeMirror-gutters,\n.lake-engine .CodeMirror-linenumber,\n.lake-engine-view .CodeMirror-linenumber {\n  -moz-box-sizing: content-box;\n  box-sizing: content-box;\n}\n.lake-engine .CodeMirror-measure,\n.lake-engine-view .CodeMirror-measure {\n  position: absolute;\n  width: 100%;\n  height: 0;\n  overflow: hidden;\n  visibility: hidden;\n}\n.lake-engine .CodeMirror-cursor,\n.lake-engine-view .CodeMirror-cursor {\n  position: absolute;\n  pointer-events: none;\n}\n.lake-engine .CodeMirror-measure pre,\n.lake-engine-view .CodeMirror-measure pre {\n  position: static;\n}\n.lake-engine div.CodeMirror-cursors,\n.lake-engine-view div.CodeMirror-cursors {\n  visibility: hidden;\n  position: relative;\n  z-index: 3;\n}\n.lake-engine div.CodeMirror-dragcursors,\n.lake-engine-view div.CodeMirror-dragcursors {\n  visibility: visible;\n}\n.lake-engine .CodeMirror-focused div.CodeMirror-cursors,\n.lake-engine-view .CodeMirror-focused div.CodeMirror-cursors {\n  visibility: visible;\n}\n.lake-engine .CodeMirror-selected,\n.lake-engine-view .CodeMirror-selected {\n  background: #e8e8e8;\n}\n.lake-engine .CodeMirror-focused .CodeMirror-selected,\n.lake-engine-view .CodeMirror-focused .CodeMirror-selected {\n  background: #b3d7fd;\n}\n.lake-engine .CodeMirror-crosshair,\n.lake-engine-view .CodeMirror-crosshair {\n  cursor: crosshair;\n}\n.lake-engine .CodeMirror-line::selection,\n.lake-engine-view .CodeMirror-line::selection,\n.lake-engine .CodeMirror-line > span::selection,\n.lake-engine-view .CodeMirror-line > span::selection,\n.lake-engine .CodeMirror-line > span > span::selection,\n.lake-engine-view .CodeMirror-line > span > span::selection {\n  background: #b3d7fd;\n}\n.lake-engine .CodeMirror-line::-moz-selection,\n.lake-engine-view .CodeMirror-line::-moz-selection,\n.lake-engine .CodeMirror-line > span::-moz-selection,\n.lake-engine-view .CodeMirror-line > span::-moz-selection,\n.lake-engine .CodeMirror-line > span > span::-moz-selection,\n.lake-engine-view .CodeMirror-line > span > span::-moz-selection {\n  background: #b3d7fd;\n}\n.lake-engine .cm-searching,\n.lake-engine-view .cm-searching {\n  background-color: #ffa;\n  background-color: rgba(255, 255, 0, 0.4);\n}\n.lake-engine .cm-force-border,\n.lake-engine-view .cm-force-border {\n  padding-right: 0.1px;\n}\n@media print {\n  .lake-engine,\n  .lake-engine-view {\n    /* Hide the cursor when printing */\n  }\n  .lake-engine .CodeMirror div.CodeMirror-cursors,\n  .lake-engine-view .CodeMirror div.CodeMirror-cursors {\n    visibility: hidden;\n  }\n}\n.lake-engine .cm-tab-wrap-hack::after,\n.lake-engine-view .cm-tab-wrap-hack::after {\n  content: \'\';\n}\n.lake-engine span.CodeMirror-selectedtext,\n.lake-engine-view span.CodeMirror-selectedtext {\n  background: none;\n}\n.lake-engine-view .lake-codeblock {\n  margin: 5px 0;\n}\n.lake-engine-view .CodeMirror {\n  padding: 16px;\n  overflow: initial;\n}\n.lake-engine-view .CodeMirror pre {\n  padding: 0;\n}\n.lake-content-editor .lake-engine .lake-codeblock .CodeMirror-lines {\n  min-height: 40px;\n}\n.lake-preview-line {\n  display: flex;\n}\n.lake-preview-line > .lake-preview-line-number {\n  color: #bfbfbf;\n  text-align: right;\n  white-space: pre;\n  margin: 0 8px 0 0;\n  flex-shrink: 0;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  user-select: none;\n}\n.lake-codeblock-auto-wrap .CodeMirror pre {\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n.height-limit .CodeMirror-sizer {\n  max-height: 12600px;\n}\n.lake-codeblock-content.manual-height .CodeMirror-sizer {\n  max-height: initial;\n}\n');var Yf=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),g()(de()(e),"handlerFilter",(function(e,t){e=e.toLowerCase();var n=t.key||"",r=t.name||"";return r=r.toLowerCase(),n.includes(e)||r.includes(e)})),e}return u()(n,[{key:"render",value:function(){return Fc.a.createElement(Fc.a.Fragment,null,Fc.a.createElement(Kc.a,{className:"lake-codeblock-header-select",showSearch:!0,size:"small",style:{width:128},defaultValue:this.props.defaultValue,getPopupContainer:this.props.getPopupContainer,onSelect:this.props.onSelect,filterOption:this.handlerFilter,virtual:!1},Hf.map((function(e){return Fc.a.createElement(Kc.a.Option,{name:e.name,value:e.value,key:e.value},e.name)}))),Fc.a.createElement("div",{className:"lake-codeblock-autowrap"},Fc.a.createElement("span",{className:"lake-codeblock-text"},this.props.locale.autoWrap),Fc.a.createElement(Qc.a,{size:"small",onChange:this.props.onAutoWrapChange,defaultChecked:this.props.defaultAutoWrap})))}}]),n}(Fc.a.PureComponent);function Gf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gf(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Yf.propTypes={defaultValue:Hc.a.string,onSelect:Hc.a.func,getPopupContainer:Hc.a.func,locale:Hc.a.object,defaultAutoWrap:Hc.a.bool,onAutoWrapChange:Hc.a.func};var Kf={},Zf={};Hf.forEach((function(e){Kf[e.value]=e.name,Zf[e.value]=e.syntax}));var $f=["c","cpp","csharp","erlang","go","groovy","java","kotlin","makefile","objectivec","perl","python","rust","swift","vbnet"];function Qf(e){return Zf[e]||e}function Jf(e){var t=e.mode,n=e.editPage;return'\n  <div class="lake-codeblock lake-codeblock-'.concat(Xe.escape(t)," ").concat(e.heightLimit?"height-limit":"",'">\n    ').concat(n?'<div class="lake-codeblock-header"></div>':"",'\n    <div class="lake-codeblock-content"></div>\n  </div>\n  ')}function ep(e,t,n,r){return tp.apply(this,arguments)}function tp(){return(tp=bl()(wl.a.mark((function e(t,n,a,o){var i,c;return wl.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Qf(n),i=kt('<div class="CodeMirror CodeMirror-sizer"><pre class="cm-s-default" /></div>'),t.append(i),c=i.find("pre"),window.CodeMirror){e.next=7;break}return e.next=7,Object(r.loadModule)("codemirror");case 7:Wf(a||"",n,c[0],o,window.CodeMirror.default);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var np=function(e){oe()(a,Ds);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(a);function a(e){var t;if(l()(this,a),t=n.call(this),g()(de()(t),"adaptMode",(function(e){return Kf[e.mode]?e.mode:t.mode})),g()(de()(t),"saveValue",(function(){if(!t.engine.domEvent.isComposing){var e=t.codeMirror.getValue();t.setValue({mode:t.mode,code:e},!0)}})),g()(de()(t),"focusToCodeEditor",(function(){t.codeMirror&&t.codeMirror.focus()})),t.engine=e,!e)return ce()(t);var r=t.getViewEngine();t.card=e.card,t.locale=r.locale.codeBlock;var o=t.loadOptions();return t.mode=Kf[o.mode]?o.mode:"plain",t}return u()(a,[{key:"loadOptions",value:function(){var e=nd("lake-codeblock");if(e)try{return JSON.parse(e)}catch(e){}return{}}},{key:"setOptions",value:function(e){rd("lake-codeblock",JSON.stringify(e))}},{key:"embedToolbar",value:function(){return[{type:"dnd"},{type:"copy"},{type:"copyContent",tips:this.getViewEngine().locale.codeBlock.copyCode},{type:"separator"}].concat(x()(this.getMoreEmbedToolbarConfig()))}},{key:"copyContent",value:function(){var e=this.getViewEngine(),t=this.value.code,n=e.locale.codeBlock.copySuccess;Or.copyText(t),Yc.a.success(n)}},{key:"destroy",value:function(){}},{key:"activate",value:function(){this.state.readonly||this.resizeController.show(),this.renderToolbar()}},{key:"unactivate",value:function(){this.setOptions({mode:this.mode}),this.saveValue(),this.state.readonly||this.resizeController.hide()}},{key:"renderToolbar",value:function(){var e=this;if(!this.toolbarRendered){this.blockHeader=this.container.find(".lake-codeblock-header");var t=this.blockHeader[0];Vc.a.render(Fc.a.createElement(Yf,{defaultValue:this.mode,onSelect:function(t){e.mode=t,e.updateMode(e.mode),e.saveValue(),e.focusToCodeEditor()},onAutoWrapChange:function(t){e.updateAutoWrap(t)},locale:this.locale,defaultAutoWrap:(this.value||{}).autoWrap,getPopupContainer:function(){return t}}),t),this.toolbarRendered=!0}}},{key:"createCodeEditor",value:(t=bl()(wl.a.mark((function e(t,n){var a,o=this,i=arguments;return wl.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.length>2&&void 0!==i[2]?i[2]:{},window.CodeMirror){e.next=4;break}return e.next=4,Object(r.loadModule)("codemirror");case 4:this.codeMirror=window.CodeMirror.default(this.codeArea[0],Xf({mode:t,value:n,lineNumbers:!0,lineWrapping:!!(this.value||{}).autoWrap,styleActiveLine:!1,matchBrackets:!0,autofocus:!1,dragDrop:!1,readOnly:!1,scrollbarStyle:"null",viewportMargin:1/0},a)),this.codeMirror.on("focus",(function(){o.engine.toolbar.disable(!0),o.activate()})),this.codeMirror.on("blur",(function(){o.engine.toolbar.disable(!1)})),this.codeMirror.on("change",J()((function(){o.saveValue(),o.engine.change.change()}),1e3)),this.codeMirror.setOption("extraKeys",{Enter:function(e){var t=o.getCfg(e.getValue());for(var n in t)e.setOption(n,t[n]);e.execCommand("newlineAndIndent")}});case 9:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"getCfg",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mode,n=$f.includes(t)?4:2;return{tabSize:n,indentUnit:n}}},{key:"updateMode",value:function(e){var t=Qf(e),n=this.codeMirror.getValue(),r=this.getCfg(n,e);this.codeArea.empty(),this.createCodeEditor(t,n||"",r)}},{key:"updateAutoWrap",value:function(e){e=!!e,this.codeMirror&&this.codeMirror.setOption("lineWrapping",e),this.setValue({autoWrap:e},!0)}},{key:"renderCode",value:function(e){this.codeArea=this.container.find(".lake-codeblock-content"),this.isAutoWrap()&&this.codeArea.addClass("lake-codeblock-auto-wrap"),ep(this.codeArea,this.mode,e,this.getCfg())}},{key:"isAutoWrap",value:function(){return(this.value||{}).autoWrap}},{key:"renderEditor",value:function(e){this.cardRoot=this.card.closest(this.container),this.codeArea=this.container.find(".lake-codeblock-content"),this.codeArea.on("click",this.focusToCodeEditor),this.lazyRenderCode(e),this.createResizeController(this.codeArea)}},{key:"lazyRenderCode",value:function(e){var t=this;setTimeout((function(){var n=Qf(t.mode),r=t.getCfg(e,t.mode);t.createCodeEditor(n,e||"",r)}),0)}},{key:"render",value:function(e,t){t=t||{},this.mode=this.adaptMode(t),e.append(Jf({heightLimit:!!t.heightLimit,mode:this.mode,editPage:!!this.engine})),this.engine?this.renderEditor(t.code):this.renderCode(t.code);var n=this.value.height;n&&(this.codeArea.css("height",n+"px"),this.codeArea.addClass("manual-height")),this.toggleMargin()}}]),a}();function rp(e){for(var t=[],n=e.rows,r=n.length,a=0;a<r;a++){var o=n[a].cells,i=o.length;t[a]=t[a]||[];for(var c=0;c<i;c++){for(var l=o[c],s=l.rowSpan,u=void 0===s?1:s,d=l.colSpan,f=void 0===d?1:d,p=u>1||f>1,h=c;t[a][h];)h++;if(t[a][h]={rowSpan:u,colSpan:f,isMulti:p,element:l},p)for(var m=u;m>0;){for(var g=f;g>0;){if(1!==g||1!==m){var v=a+m-1,y=h+g-1;t[v]=t[v]||[],t[v][y]={isEmpty:!0,parent:{row:a,col:h},element:null}}g--}m--}}}var b=t.map((function(e){return e.length})),k=Math.max.apply(Math,x()(b));return t.forEach((function(e){if(e.length<k)for(var t=k-e.length;t--;)e.push({rowSpan:1,colSpan:1,isShadow:!0,element:null});for(var n=0;n<k;n++)e[n]||(e[n]={rowSpan:1,colSpan:1,isShadow:!0,element:null})})),{rows:t.length,cols:k,width:e.offsetWidth,table:t}}function ap(e){return 0===parseInt(e)?"auto":(e.endsWith("%")&&(e=parseFloat(e)/100*750),parseInt(e,10)+"px")}function op(e){var t=kt(e);!function(e){var t=e.find("tr"),n=t[0],r=t[1];n&&(0===n.cells.length&&n.remove(),1===n.cells.length&&""===n.cells[0].innerText.trim()&&0===n.cells[0].getElementsByTagName("img").length&&0===n.cells[0].getElementsByTagName("div").length&&1===n.cells[0].colSpan&&1===n.cells[0].rowSpan&&r&&1!==r.cells.length&&n.remove())}(t),function(e){for(var t,n=(e=e[0]).rows,r=n.length,a=[],o=[],i=0,c=0,l=0,s=0;s<r;s++){for(var u=n[s].cells,d=0,f=0;f<u.length;f++){var p=u[f],h=p.rowSpan,m=p.colSpan;i+=h*m,d+=m,h>1&&(c+=(h-1)*m)}o[s]=d,0===s&&(t=d),l=Math.max(d,l)}if(Vl()(i/t)&&t===l){var g=0;if(o.forEach((function(e){g+=l-e})),g!==c&&Vl()((c-g)/l)){for(var v=[],y=0;y<r;y++){for(var b=n[y].cells;a[y+v.length]===l;)v.push(y+v.length);for(var k=y+v.length,w=0;w<b.length;w++){var x=b[w],_=x.rowSpan,E=x.colSpan;if(_>1)for(var C=1;C<_;C++)a[k+C]=(a[k+C]||0)+E}}v.forEach((function(t){e.insertRow(t)}))}}}(t),gp(t),t.addClass("lake-table");var n=ap(t.css("width"));t.css("width",n),t.css("background-color","");var r=rp(e),a=t.find("col");if(0!==a.length){for(var o=a.length-1;o>=0;o--){var i=kt(a[o]).attr("width");if(i&&kt(a[o]).attr("width",parseFloat(ap(i))),a[o].span>1)for(var c=a[o].span-1;c--;)a[o].parentNode.insertBefore(a[o].cloneNode(),a[o])}if((a=t.find("col")).length<r.cols)for(var l=a.length-1,s=r.cols-a.length;s--;)a[0].parentNode.appendChild(a[l].cloneNode());t.find("col").attr("span",1)}else{var u=t.find("colgroup")[0];u||(u=document.createElement("colgroup"),t.prepend(u));for(var d=function(e){var t=kt(e.find("tr")[0]).find("td"),n=[];t.each((function(e){var t=kt(e).attr("data-colwidth"),r=kt(e).attr("width"),a=kt(e)[0].colSpan;t?t=t.split(","):r&&(r=parseInt(r)/a);for(var o=0;o<a;){var i=t&&t[o]?parseInt(t[o]):r?parseInt(r):void 0;n.push(i),o++}}));var r=e.find("td");return r.removeAttr("data-colwidth"),r.removeAttr("width"),n}(t),f=document.createElement("col"),p=0;p<r.cols;p++){var h=f.cloneNode();d[p]&&h.setAttribute("width",d[p]),u.appendChild(h)}}return r.table.forEach((function(t,n){e.rows[n]||e.insertRow(n);for(var r=t.filter((function(e){return e.isShadow})).length;r--;)0===n?e.rows[n].insertCell(0):e.rows[n].insertCell()})),t.find("tr").each((function(e){var t=kt(e),n=kt(e).css("height");n=parseInt(n)||33,t.css("height",n+"px")})),e}function ip(e,t){var n=kt(t),r=kt(e);n.html(Xe.transformCustomTags(e.innerHTML)),cp(r,n)}function cp(e,t){var n=kt(t),r=kt(e);n.css("text-align",r.css("text-align")),n.css("vertical-align",r.css("vertical-align"));var a=r.css("background-color");a="rgba(0, 0, 0, 0)"!==a?a:"#fff",n.css("background-color",a),n.css("color",r.css("color")),n.css("font-weight",r.css("font-weight"))}g()(np,"type","block");var lp=null;function sp(e){lp={html:e,text:kt(e).innerText}}function up(){return lp}function dp(e){e=e.replace(/<p(>|\s+[^>]*>)/gi,"<div$1").replace(/<\/p>/gi,"</div>");var t=(new DOMParser).parseFromString(e,"text/html");return fp(t),t.body.innerHTML}function fp(e){hp(e,(function(e){return e.isBlock()&&(e.hasClass("bi-table")||"table"===e.attr("data-lake-card"))})),function(e){Zt.walkTree(e,(function(e){mp(e=kt(e))}))}(e)}function pp(e){hp(e,(function(e){return e.isBlock()&&e.hasClass("bi-table")}))}function hp(e,t){Zt.walkTree(e,(function(e){if(e=kt(e),t(e)){var n=e.find("table");if(n.length>0)return gp(n),void e.replaceWith(n);e.remove()}}))}function mp(e){if(e.isBlock()&&"codeblock"===e.attr("data-lake-card")){var t=Xe.decodeCardValue(e.attr("data-card-value"));if(t.code){var n=t.code.split("\n"),r=kt("<p />");n.forEach((function(t){var n,a=r.clone();a.html((n=t,Xe.escape(n).replace(/\t/g,"&nbsp;&nbsp;").replace(/\s/g,"&nbsp;"))),e.before(a)})),e.remove()}}}function gp(e){Zt.walkTree(e,(function(e){(function(e){if(e.isBlock()){var t;switch(e.name){case"h1":(t=kt('<span class="lake-fontsize-18"></span>')).html(e.html());break;case"h2":(t=kt('<span class="lake-fontsize-16"></span>')).html(e.html());break;case"h3":case"h4":(t=kt('<span class="lake-fontsize-14"></span>')).html(e.html());break;case"h5":case"h6":(t=kt('<span class="lake-fontsize-12"></span>')).html(e.html())}t&&e.replaceWith(t)}})(e=kt(e)),function(e){"a"===e.name&&((e.attr("href")||"").startsWith("#")||e.attr("target")||e.attr("target","_blank"))}(e),mp(e)}))}function vp(e){e.dataTransfer.clearData(),e.dataTransfer.setData("lake",null)}function yp(e){var t=e.getBoundingClientRect(),n=t.top,r=t.left,a=t.right,o=t.bottom,i=t.width,c=t.height;return{top:n,left:r,right:a,bottom:o,x:t.x,y:t.y,width:i,height:c}}function bp(e){return e.getBoundingClientRect().top}function kp(e){return e.getBoundingClientRect().left}function wp(e){return parseFloat(e.style.width)||e.getBoundingClientRect().width}function xp(e){if(!e)return 0;var t=e.offsetParent;return t?e.getBoundingClientRect().left-t.getBoundingClientRect().left:e.offsetLeft}function _p(e){if(!e)return 0;var t=e.offsetParent;return t?e.getBoundingClientRect().top-t.getBoundingClientRect().top:e.offsetTop}function Ep(e){return e.getBoundingClientRect().width}function Cp(e){return e.getBoundingClientRect().height}function Op(e,t,n){var r,a=e[t][n];return!(r=a.isEmpty?e[a.parent.row][a.parent.col].element:a.element)||""===r.innerText.trim()&&!kt(r).find("img")[0]}var Sp="table-header-add-btn";var Rp=function(e){oe()(n,Lc.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this),g()(de()(r),"render",(function(e){var t,n=!0,a=!0;switch(e){case"insertRow":case"removeRow":case"heightchange":n=!1;break;case"clearFormat":case"align":case"fontcolor":case"background":a=!1,n=!1;break;case"input":case"select":case"paste":n=!1,t=r.card.selection.getEffectRows()}n&&r.renderColBars(),a&&r.renderRowBars(t)})),g()(de()(r),"renderColBars",(function(){var e=r.card,t=e.tableRoot,n=e.selection.getTableModel().table,a=t.find("col"),o=!0,i=wp(t[0]),c={},l=0,s=0;a.each((function(e,t){var n=kt(e).attr("width");n?(c[t]=parseInt(n),l+=parseInt(n),o=!1):s++}));var u=i;if(o){var d=[];n.forEach((function(e){e.forEach((function(e,t){d[t]||e.isEmpty||e.isMulti||!e.element||(d[t]=Ep(e.element))}))}));for(var f=0,p=0,h=0;h<a.length;h++)d[h]?p+=d[h]:f++;var m=0;f>0&&(m=Math.floor((i-p)/f));for(var g=0;g<a.length;g++){var v=d[g]||Math.min(u,m);u-=v,kt(a[g]).attr("width",v)}}else if(s){var y=Math.floor((i-l)/s);a.each((function(e,t){var n=void 0===c[t]?Math.min(y,u):c[t];u-=n,kt(e).attr("width",n)}))}else r._isRepaired||(r._isRepaired=!0,a.each((function(e,t){var n=Math.min(u,Math.floor(i*c[t]/l));u-=n,kt(e).attr("width",n)})));r.updateTableWidth()})),g()(de()(r),"renderRowBars",(function(e){var t=r.card,n=t.tableRoot,a=t.template,o=n[0].rows,i=r.rowsHeader.find(a.ROWS_HEADER_ITEM_CLASS),c=0,l=o.length-1;e&&(c=e.row_min,l=e.row_max);for(var s=c;s<=l;s++)kt(i[s]).css("height",Cp(o[s])+"px");r.height=Cp(n[0])})),g()(de()(r),"onDragCol",(function(e){if(e.stopPropagation(),r.colDragging&&(void 0===r.rowDraggingPosiX&&(r.rowDraggingPosiX=e.offsetX),!(Math.abs(r.rowDraggingPosiX-e.offsetX)<3))){r.rowDraggingPosiX=e.offsetX,r.dragBar.removeClass("dragging");var t=kt(e.target).closest("td"),n=kt(e.target).closest(r.card.template.COLS_HEADER_ITEM_CLASS);if(t[0]||n[0])if(n[0]){var a=n.index(),o=e.offsetX>Ep(n[0])/2?a+1:a;r.showPlaceHolder(o)}else{for(var i=r.colsHeader.find(r.card.template.COLS_HEADER_ITEM_CLASS),c=t[0].colSpan,l=r.card.selection.getTdRowCol(t[0]).col,s=l,u=0,d=0;d<c;d++){if(u+Ep(i[l+d])/2>e.offsetX){s=l+d;break}if(u+Ep(i[l+d])>e.offsetX){s=l+d+1;break}u+=Ep(i[l+d])}r.showPlaceHolder(s)}}})),g()(de()(r),"onDragRow",(function(e){if(e.stopPropagation(),r.rowDragging&&(void 0===r.rowDraggingPosiY&&(r.rowDraggingPosiY=e.offsetY),!(Math.abs(r.rowDraggingPosiY-e.offsetY)<3))){r.rowDraggingPosiY=e.offsetY,r.dragBar.removeClass("dragging");var t=kt(e.target).closest("td"),n=kt(e.target).closest(r.card.template.ROWS_HEADER_ITEM_CLASS);if(t[0]||n[0])if(n[0]){var a=n.index()+1;r.showPlaceHolder(a)}else{for(var o=r.rowsHeader.find(r.card.template.ROWS_HEADER_ITEM_CLASS),i=t[0].rowSpan,c=r.card.selection.getTdRowCol(t[0]).row,l=c,s=0,u=0;u<i;u++){if(s+Cp(o[c+u])>e.offsetY){l=c+u+1;break}s+=Cp(o[c+u])}r.showPlaceHolder(l)}}})),g()(de()(r),"showPlaceHolder",(function(e){if(r.colDragging){if(e===r.dropCol)return;if(r.colDraggingIndex.col_min<=e&&e<=r.colDraggingIndex.col_max+1)return delete r.dropCol,void r.placeholder.css("display","none");r.dropCol=e;var t=r.colsHeader.find(r.card.template.COLS_HEADER_ITEM_CLASS),n=r.dropCol!==t.length?xp(t[r.dropCol])+2:xp(t[r.dropCol-1])+Ep(t[r.dropCol-1])+2,a=r.viewport[0].scrollLeft,o=Ep(r.viewport[0]);n<a&&(r.viewport[0].scrollLeft=n-5),n>a+o&&(r.viewport[0].scrollLeft=n-o+5),r.placeholder.css({width:"3px",height:r.height+"px",left:n+"px",top:"40px",display:"block"})}if(r.rowDragging){if(e===r.dropRow)return;if(r.rowDraggingIndex.row_min<=e&&e<=r.rowDraggingIndex.row_max+1)return delete r.dropRow,void r.placeholder.css("display","none");r.dropRow=e;var i=r.rowsHeader.find(r.card.template.ROWS_HEADER_ITEM_CLASS),c=r.dropRow<i.length?_p(i[r.dropRow]):_p(i[r.dropRow-1])+Cp(i[r.dropRow-1]);r.placeholder.css({height:"3px",width:r.width+"px",left:"3px",top:40+c+"px",display:"block"})}})),g()(de()(r),"onDragColEnd",(function(){if(r.unBindDragColEvent(),r.colDragging&&void 0!==r.dropCol){for(var e=r.card,t=e.command,n=e.selection,a=n.normalizeArea(),o=a.col_min,i=a.col_max,c=r.card.container.find(r.card.template.COLS_HEADER_ITEM_CLASS),l=[],s=o;s<=i;s++)l.push(Ep(c[s]));var u=n.colCount();t.mockCopy(),o>r.dropCol?(t.insertColAt(r.dropCol,u,!1,!0,l),n.selectCols(r.dropCol,r.dropCol+u-1),t.mockPaste(!0),n.selectCols(o+u,i+u),t.removeCol(),n.selectCols(r.dropCol,r.dropCol+u-1)):(t.insertColAt(r.dropCol,u,!1,!0,l),n.selectCols(r.dropCol,r.dropCol+u-1),t.mockPaste(!0),n.selectCols(o,i),t.removeCol(),n.selectCols(r.dropCol-u,r.dropCol-1)),r.placeholder.css("display","none"),r.colDragging=!1,delete r.dropCol}})),g()(de()(r),"onDragRowEnd",(function(){if(r.unBindDragRowEvent(),r.rowDragging&&void 0!==r.dropRow){var e=r.card,t=e.command,n=e.selection,a=n.normalizeArea(),o=a.row_min,i=a.row_max;t.mockCopy(),o>r.dropRow?(t.insertRowAt(r.dropRow,r.dragCount,!1,!0),n.selectRows(r.dropRow,r.dropRow+r.dragCount-1),t.mockPaste(!0),n.selectRows(o+r.dragCount,i+r.dragCount),t.removeRow(),n.selectRows(r.dropRow,r.dropRow+r.dragCount-1)):(t.insertRowAt(r.dropRow,r.dragCount,!1,!0),n.selectRows(r.dropRow,r.dropRow+r.dragCount-1),t.mockPaste(!0),n.selectRows(o,i),t.removeRow(),n.selectRows(r.dropRow-r.dragCount,r.dropRow-1)),r.placeholder.css("display","none"),r.rowDragging=!1,delete r.dropRow}})),g()(de()(r),"unBindDragColEvent",(function(){r.colsHeader.find(r.card.template.COLS_HEADER_ITEM_CLASS).removeClass("dragging"),r.colsHeader.removeClass("dragging"),r.card.container.off("dragover",r.onDragCol),r.card.container.off("drop",r.onDragColEnd),r.card.container.off("dragend",r.onDragColEnd)})),g()(de()(r),"unBindDragRowEvent",(function(){r.rowsHeader.find(r.card.template.ROWS_HEADER_ITEM_CLASS).removeClass("dragging"),r.rowsHeader.removeClass("dragging"),r.card.container.off("dragover",r.onDragRow),r.card.container.off("drop",r.onDragRowEnd),r.card.container.off("dragend",r.onDragRowEnd)})),g()(de()(r),"bindDragColEvent",(function(){r.card.container.on("dragover",r.onDragCol),r.card.container.on("drop",r.onDragColEnd),r.card.container.on("dragend",r.onDragColEnd)})),g()(de()(r),"bindDragRowEvent",(function(){r.card.container.on("dragover",r.onDragRow),r.card.container.on("drop",r.onDragRowEnd),r.card.container.on("dragend",r.onDragRowEnd)})),g()(de()(r),"onDragStartColsHeader",(function(e){e.stopPropagation();var t=r.card.selection.area;if(t&&t.total_col){var n=kt(e.target).closest(r.card.template.COLS_HEADER_ITEM_CLASS);if(n[0]){var a=n.index(),o=r.card.selection.normalizeArea(),i=o.col_min,c=o.col_max;a<i||a>c||(r.colDragging=!0,r.rowDragging=!1,r.dragBar=n,r.colDraggingIndex={col_min:i,col_max:c},r.dragCount=r.card.selection.colCount(),r.dragBar.addClass("dragging"),r.dragBar.find(".drag-info").html("正在移动 ".concat(r.dragCount," 列")),r.colsHeader.addClass("dragging"),vp(e),r.bindDragColEvent())}}})),g()(de()(r),"onDragStartRowsHeader",(function(e){e.stopPropagation();var t=r.card.selection.area;if(t&&t.total_row){var n=kt(e.target).closest(r.card.template.ROWS_HEADER_ITEM_CLASS);if(n[0]){var a=n.index(),o=r.card.selection.normalizeArea(),i=o.row_min,c=o.row_max;a<i||a>c||(r.rowDragging=!0,r.colDragging=!1,r.dragBar=n,r.rowDraggingIndex={row_min:i,row_max:c},r.dragCount=r.card.selection.rowCount(),r.dragBar.addClass("dragging"),r.dragBar.find(".drag-info").html("正在移动 ".concat(r.dragCount," 行")),r.rowsHeader.addClass("dragging"),vp(e),r.bindDragRowEvent())}}})),g()(de()(r),"onMouseDownColsHeader",(function(e){var t=r.card,n=t.template,a=t.selection;if(r.trigger=kt(e.target).closest(n.COLS_HEADER_TRIGGER_CLASS),r.trigger[0])r.startChangeCol(r.trigger,e);else if(2===e.button){var o=kt(e.target).closest(n.COLS_HEADER_ITEM_CLASS);if(!o[0])return;var i=o.index(),c=!1;if(a.area&&a.area.total_col){var l=a.normalizeArea(),s=l.col_min,u=l.col_max;i>=s&&i<=u&&(c=!0)}c||r.emit("clickColsHeader",i),r.showContextMenu(e)}})),g()(de()(r),"startChangeCol",(function(e,t){t.stopPropagation(),t.preventDefault(),r.emit("startChangeCellSize"),r.dragging="col",r.draggingX=t.clientX,r.currentCol=kt(e[0].parentNode),r.currentColWidth=Ep(r.currentCol[0]),r.width=Ep(r.colsHeader[0]),r.currentColIndex=r.currentCol.index(),r.bindChangeSizeEvent()})),g()(de()(r),"onMouseDownRowsHeader",(function(e){var t=r.card,n=t.template,a=t.selection;if(r.trigger=kt(e.target).closest(n.ROWS_HEADER_TRIGGER_CLASS),r.trigger[0])r.startChangeRow(r.trigger,e);else if(2===e.button){var o=kt(e.target).closest(n.ROWS_HEADER_ITEM_CLASS);if(!o[0])return;var i=o.index(),c=!1;if(a.area&&a.area.total_row){var l=a.normalizeArea(),s=l.row_min,u=l.row_max;i>=s&&i<=u&&(c=!0)}c||r.emit("clickRowsHeader",i),r.showContextMenu(e)}})),g()(de()(r),"startChangeRow",(function(e,t){t.stopPropagation(),t.preventDefault(),r.emit("startChangeCellSize"),r.dragging="row",r.draggingY=t.clientY,r.currentRow=kt(e[0].parentNode),r.currentRowHeight=Cp(r.currentRow[0]),r.currentRowIndex=r.currentRow.index(),r.bindChangeSizeEvent()})),g()(de()(r),"onChangeSize",(function(e){r.dragging&&("row"===r.dragging?r.onChangeRowHeight(e):"col"===r.dragging&&r.onChangeColWidth(e))})),g()(de()(r),"onChangeColWidth",(function(e){var t=e.clientX-r.draggingX,n=Math.max(r.MIN_WIDTH,r.currentColWidth+t);t=n-r.currentColWidth;var a=r.width+t;r.currentCol.css("width",n+"px"),r.colsHeader.css("width",a+"px");var o=r.viewport[0],i=yp(o),c=xp(r.currentCol[0])+Ep(r.currentCol[0]);c-o.scrollLeft+20>i.width?o.scrollLeft=c+20-i.width:o.scrollLeft+i.width===o.scrollWidth&&(o.scrollLeft=Math.max(0,a+34-i.width)),r.clearActiveStatus(),r.hideContextMenu(),r.renderRowBars(),r.renderColSplitBars(),r.changeColWidth(n,a)})),g()(de()(r),"onChangeRowHeight",(function(e){var t=e.clientY-r.draggingY,n=Math.max(r.MIN_HEIGHT,r.currentRowHeight+t);t=n-r.currentRowHeight,r.currentRow.css("height",n+"px"),r.clearActiveStatus(),r.hideContextMenu(),r.renderRowSplitBars(),r.changeRowHeight(n),r.emit("heightchanging")})),g()(de()(r),"changeColWidth",(function(e){kt(r.card.tableRoot.find("col")[r.currentColIndex]).attr("width",e),r.updateTableWidth()})),g()(de()(r),"changeRowHeight",(function(e){kt(r.card.tableRoot.find("tr")[r.currentRowIndex]).css("height",e+"px")})),g()(de()(r),"renderColSplitBars",(function(){r.trigger.addClass("dragging").css("height",r.height+24+"px")})),g()(de()(r),"renderRowSplitBars",(function(){var e=Math.min(Ep(r.viewport[0]),r.width);r.trigger.addClass("dragging").css("width",e+24+"px")})),g()(de()(r),"onChangeSizeEnd",(function(e){"mouseleave"===e.type&&r.card.container.contains(e.toElement)||r.dragging&&(r.trigger.removeClass("dragging"),"col"===r.dragging&&r.trigger.css("height","17px"),"row"===r.dragging&&r.trigger.css("width","17px"),r.dragging=null,r.renderRowBars(),r.unBindChangeSizeEvent(),r.width=Ep(r.card.tableRoot[0]),r.height=Cp(r.card.tableRoot[0]),r.emit("sizeChanged"))})),g()(de()(r),"hide",(function(){r.tableWrapper.removeClass("editing"),r.hideContextMenu(),r.hideMultiAddition()})),g()(de()(r),"show",(function(){r.tableWrapper.addClass("editing")})),g()(de()(r),"clearActiveStatus",(function(){var e=r.card.template,t=r.colsHeader.find(e.COLS_HEADER_ITEM_CLASS),n=r.rowsHeader.find(e.ROWS_HEADER_ITEM_CLASS);t.removeClass("active"),t.removeClass("selected"),t.removeClass("no-dragger"),t.removeClass("multi-selected"),n.removeClass("active"),n.removeClass("selected"),n.removeClass("multi-selected"),n.removeClass("no-dragger"),r.tableHeader.removeClass("selected")})),g()(de()(r),"activeHeader",(function(){var e=r.card,t=e.selection,n=e.template,a=t.area,o=t.getTableModel();if(r.clearActiveStatus(),a){for(var i=r.colsHeader.find(n.COLS_HEADER_ITEM_CLASS),c=r.rowsHeader.find(n.ROWS_HEADER_ITEM_CLASS),l=a.total_col,s=a.total_row,u=a.total_table,d=t.normalizeArea(),f=d.row_min,p=d.row_max,h=d.col_min,m=d.col_max,g=p>f,v=m>h,y=f;y<=p;y++)kt(c[y]).addClass("active"),(s||u)&&kt(c[y]).addClass("selected"),g?kt(c[y]).addClass("multi-selected"):kt(c[y]).removeClass("multi-selected"),u&&kt(c[y]).addClass("no-dragger");for(var b=h;b<=m;b++)kt(i[b]).addClass("active"),(l||u)&&kt(i[b]).addClass("selected"),v?kt(i[b]).addClass("multi-selected"):kt(i[b]).removeClass("multi-selected"),u&&kt(i[b]).addClass("no-dragger");0===f&&p===o.rows-1&&0===h&&m===o.cols-1?r.tableHeader.addClass("selected"):r.tableHeader.removeClass("selected")}})),g()(de()(r),"removeRow",(function(e){var t=r.card.template,n=r.rowsHeader.find(t.ROWS_HEADER_ITEM_CLASS);r.rowsHeader[0].removeChild(n[e])})),g()(de()(r),"removeCol",(function(e){var t=r.card.template,n=r.colsHeader.find(t.COLS_HEADER_ITEM_CLASS);r.colsHeader[0].removeChild(n[e]),r.updateTableWidth()})),g()(de()(r),"clickRowsHeader",(function(e){var t=r.card.template;if(!kt(e.target).closest(t.ROWS_HEADER_TRIGGER_CLASS)[0]){var n=kt(e.target).closest(t.ROWS_HEADER_ITEM_CLASS);n[0]&&r.emit("clickRowsHeader",n.index())}})),g()(de()(r),"clickColsHeader",(function(e){var t=r.card.template;if(!kt(e.target).closest(t.COLS_HEADER_TRIGGER_CLASS)[0]){var n=kt(e.target).closest(t.COLS_HEADER_ITEM_CLASS);n[0]&&r.emit("clickColsHeader",n.index())}})),g()(de()(r),"clickTableHeader",(function(){r.emit("clickTableHeader")})),g()(de()(r),"handleClickContainer",(function(e){var t=r.card.template,n=kt(e.target).closest("td");kt(e.target).closest(t.MULTI_ADDITION_CLASS).length||r.hideMultiAddition(),(n[0]||kt(e.target).closest(".mask")[0])&&(2===e.button?(e.preventDefault(),r.showContextMenu(e)):r.hideContextMenu())})),g()(de()(r),"handleHoverMenu",(function(e){var t=kt(e.target).closest(".table-menubar-item");if(t[0]&&(e.stopPropagation(),!t.hasClass("disabled"))){var n=t.attr("data-action");r.card.selection.preview(n)}})),g()(de()(r),"handleLeaveMenu",(function(e){e.stopPropagation(),r.card.selection.preview()})),g()(de()(r),"handleAdditionColBtnEvent",(function(e,t){"mouseover"===e?r.showColIndicator(t):"mouseout"===e?r.hideIndicator():"click"===e&&(r.hideIndicator(),r.card.command.insertColAt(kt(t).index()+1,1,!1,!1))})),g()(de()(r),"handleAdditionRowBtnEvent",(function(e,t){"mouseover"===e?r.showRowIndicator(t):"mouseout"===e?r.hideIndicator():"click"===e&&(r.hideIndicator(),r.card.command.insertRowAt(kt(t).index()+1,1,!1,!1))})),g()(de()(r),"handleDeleteColBtnEvent",(function(){r.card.command.removeCol(!1)})),g()(de()(r),"handleDeleteRowBtnEvent",(function(){r.card.command.removeRow(!1)})),g()(de()(r),"handleClickMenu",(function(e){var t=kt(e.target).closest(".table-menubar-item");if(t[0]){if(e.stopPropagation(),!t.hasClass("disabled")){var n=t.attr("data-action");r.card.command[n]()}r.hideContextMenu()}})),g()(de()(r),"hideContextMenu",(function(){r.contextVisible&&(r.contextVisible=!1,r.menuBar.css("display","none"))})),g()(de()(r),"getMenuDisabled",(function(e){switch(e){case"splitCell":return!r.card.selection.hasMergeCell();case"mergeCell":return r.card.selection.isSingleArea();case"mockPaste":return!r.card.command.hasCopyData();case"removeCol":case"insertColLeft":case"insertColRight":return r.card.selection.isRowSelected();case"removeRow":case"insertRowUp":case"insertRowDown":return r.card.selection.isColSelected();default:return!1}})),g()(de()(r),"showContextMenu",(function(e){var t=r.card.selection.area;if(kt(e.target).closest("td")[0]||t){var n=r.menuBar.find(r.card.template.MENUBAR_ITEM_CLASS),a=r.menuBar.find(r.card.template.SPLIT_LINE_CLASS),o=Math.min(Math.max(120,document.body.offsetHeight-500),e.clientY);r.menuBar.children().removeClass("disabled"),n.each((function(e){var t=kt(e).attr("data-action");r.getMenuDisabled(t)&&kt(e).addClass("disabled")})),a.each((function(e){var t=kt(e),n=t.next();if(n)for(;n;){if(n.hasClass("split"))return void t.addClass("disabled");if(!n.hasClass("disabled"))return;n=n.next()}else t.addClass("disabled")})),r.menuBar.css("left",e.clientX+30+"px"),r.menuBar.css("top",o+"px"),r.menuBar.css("display","block"),r.contextVisible=!0}})),g()(de()(r),"focusTextArea",(function(){Qt.log("focusTextArea"),r.focusTimer&&clearTimeout(r.focusTimer),r.focusTimer=setTimeout((function(){r.textArea[0].value="",r.textArea[0].blur(),r.textArea[0].focus()}),100)})),g()(de()(r),"filterEvent",(function(e){var t=r.card.template,n=(e.target||e.srcElement).tagName.toLocaleUpperCase();return!!kt(e.target).closest(t.TABLE_TEXTAREA_CLASS)[0]||!("INPUT"===n||"SELECT"===n||"TEXTAREA"===n)})),g()(de()(r),"bindChangeSizeEvent",(function(){r.colsHeader.addClass("resize"),r.rowsHeader.addClass("resize"),document.addEventListener("mousemove",r.onChangeSize),document.addEventListener("mouseup",r.onChangeSizeEnd),document.addEventListener("mouseleave",r.onChangeSizeEnd)})),g()(de()(r),"unBindChangeSizeEvent",(function(){r.colsHeader.removeClass("resize"),r.rowsHeader.removeClass("resize"),document.removeEventListener("mousemove",r.onChangeSize),document.removeEventListener("mouseup",r.onChangeSizeEnd),document.removeEventListener("mouseleave",r.onChangeSizeEnd)})),g()(de()(r),"onMultiChangeRowCol",(function(e,t){var n=r.card.selection.getTableModel(),a=n.rows,o=n.cols;"row"===t&&((e=Math.max(r.contentRow+1,e))>a?r.card.command.insertRow("end",e-a):e<a&&(r.card.selection.selectRows(e,a-1),r.card.command.removeRow())),"col"===t&&((e=Math.max(r.contentCol+1,e))>o?r.card.command.insertCol("end",e-o):e<o&&(r.card.selection.selectCols(e,o-1),r.card.command.removeCol())),r.card.selection.clear()})),g()(de()(r),"showMultiAddition",(function(e,t){if(kt(e.target).closest(".multi-trigger")[0]){var n=e.offsetX,a=e.offsetY,o=e.clientX,i=e.clientY;r.card.selection.clear();var c,l,s,u,d,f,p,h,m=function(e){for(var t=e.table,n=e.rows,r=e.cols,a=n-1,o=r-1,i=!1,c=!1;a>0&&!i;){for(var l=0;l<r;l++)if(!Op(t,a,l)){i=!0;break}i||a--}for(;o>0&&!c;){for(var s=0;s<n;s++)if(!Op(t,s,o)){c=!0;break}c||o--}return{row:a,col:o}}(r.card.selection.getTableModel()),g=m.row,v=m.col;r.contentRow=g,r.contentCol=v,"row"===t?(c="auto",s=0,l="auto",u="-2px",d="absolute",f=r.card.selection.getTableModel().rows,p=g+1,h=Math.max(p+50,f)):"col"===t&&(d="fixed",c=Math.max(0,o-n-28)+"px",l=i-a-17+"px",s="auto",u="auto",f=r.card.selection.getTableModel().cols,p=v+1,h=Math.max(p+10,f)),r.multiAddition.css({left:c,top:l,right:s,bottom:u,position:d,display:"block"}),r.multiAdditionVisible=!0,Vc.a.unmountComponentAtNode(r.multiAddition[0]),Vc.a.render(Fc.a.createElement(Jc.a,{defaultValue:f,min:p,max:h,step:1,onChange:function(e){r.onMultiChangeRowCol(Math.max(p,Math.min(h,e)),t)}}),r.multiAddition[0])}})),g()(de()(r),"hideMultiAddition",(function(){r.multiAdditionVisible&&(r.multiAdditionVisible=!1,r.multiAddition.css("display","none"))})),g()(de()(r),"refresh",(function(e){r.hideContextMenu(),r.render(e),r.show(),r.activeHeader(),r.focusTextArea()})),g()(de()(r),"bindEvents",(function(){r.colsHeader.on("mousedown",r.onMouseDownColsHeader).on("click",r.clickColsHeader).on("dragstart",r.onDragStartColsHeader),r.rowsHeader.on("mousedown",r.onMouseDownRowsHeader).on("click",r.clickRowsHeader).on("dragstart",r.onDragStartRowsHeader),r.tableHeader.on("click",r.clickTableHeader),r.card.container.on("mousedown",r.handleClickContainer),r.card.container.on("dragover",(function(e){return e.stopPropagation()})),r.menuBar.on("click",r.handleClickMenu),r.menuBar.on("mouseover",r.handleHoverMenu),r.menuBar.on("mouseleave",r.handleLeaveMenu),r.textArea.on("paste",r.card.command.shortcutPaste),r.textArea.on("copy",r.card.command.shortcutCopy),r.textArea.on("cut",r.card.command.shortcutCut),["mouseover","mouseout","click"].forEach((function(e){r.colsHeader.on(e,(function(t){var n=t.target;n.classList.contains(Sp)&&r.handleAdditionColBtnEvent(e,n.parentNode.parentNode)}),!1),r.rowsHeader.on(e,(function(t){var n=t.target;n.classList.contains(Sp)&&r.handleAdditionRowBtnEvent(e,n.parentNode.parentNode)}),!1)})),r.colsHeader.on("click",(function(e){var t=e.target;t.classList.contains("table-header-delete-btn")&&r.handleDeleteColBtnEvent(t.parentNode.parentNode)}),!1),r.rowsHeader.on("click",(function(e){var t=e.target;t.classList.contains("table-header-delete-btn")&&r.handleDeleteRowBtnEvent(t.parentNode.parentNode)}),!1)})),r.card=e,r.dragging=!1,r.draggingX=0,r.draggingY=0,r.width=0,r.height=0,r.MIN_WIDTH=40,r.MIN_HEIGHT=33,r.currentCol=null,r.currentColWidth=0,r.currentColIndex=0,r.currentRow=null,r.currentRowHeight=0,r.currentRowIndex=0,r._isRepaired=!1,r}return u()(n,[{key:"showColIndicator",value:function(e){var t=e.parentNode.getBoundingClientRect(),n=e.getBoundingClientRect();this.indicator.addClass("col-line").removeClass("row-line"),this.indicator.css({top:"40px",left:n.right-t.left+"px",width:"2px"})}},{key:"showRowIndicator",value:function(e){var t=e.parentNode.getBoundingClientRect(),n=e.getBoundingClientRect();this.indicator.addClass("row-line").removeClass("col-line"),this.indicator.css({top:n.bottom-t.top+"px",left:0,width:this.width+"px"})}},{key:"hideIndicator",value:function(){this.indicator.removeClass("col-line").removeClass("row-line")}},{key:"init",value:function(){var e=this.card,t=e.container,n=e.template;this.colsHeader=t.find(n.COLS_HEADER_CLASS),this.rowsHeader=t.find(n.ROWS_HEADER_CLASS),this.multiAddition=t.find(n.MULTI_ADDITION_CLASS),this.tableHeader=t.find(n.HEADER_CLASS),this.menuBar=t.find(n.MENUBAR_CLASS),this.textArea=t.find(n.TABLE_TEXTAREA_CLASS),this.viewport=t.find(n.VIEWPORT),this.placeholder=t.find(n.PLACEHOLDER_CLASS),this.tableWrapper=t.find(n.TABLE_WRAPPER_CLASS),this.indicator=t.find(n.INDICATOR_CLASS),this.bindEvents()}},{key:"updateTableWidth",value:function(){var e=this.card.tableRoot.find("col"),t=this.colsHeader.find(this.card.template.COLS_HEADER_ITEM_CLASS),n=0;return e.each((function(e,r){var a=parseInt(kt(e).attr("width"));n+=a,kt(t[r]).css("width",a+"px")})),Number.isNaN(n)?wp(this.card.tableRoot[0]):(this.card.tableRoot.css("width",n+"px"),this.colsHeader.css("width","".concat(n,"px")),this.width=n,n)}}]),n}();function jp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jp(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ap=function(e){oe()(n,Lc.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this),g()(de()(r),"insertColLeft",(function(){r.insertCol("left")})),g()(de()(r),"insertColRight",(function(){r.insertCol("right")})),g()(de()(r),"insertRowUp",(function(){r.insertRow("up")})),g()(de()(r),"insertRowDown",(function(){r.insertRow("down")})),g()(de()(r),"insertColAt",(function(e,t,n,a,o){var i=r.card,c=i.container,l=i.selection,s=i.tableRoot,u=i.template,d=l.getTableModel().table,f=(n=0===e||n)?e:e-1,p=n?"after":"before",h=c.find(u.COLS_HEADER_ITEM_CLASS)[f],m=c.find(u.COLS_HEADER_CLASS),g=0;o||(o=h.offsetWidth),re()(o)?o.forEach((function(e){g+=e})):Yl()(o)&&(g=t*o);var v=m[0].offsetWidth+g;m.css("width",v+"px"),s.css("width",v+"px");for(var y=s.find("colgroup"),b=c.find("tr"),k=s.find("col"),w=k[f].cloneNode(),x=e,_=t;_>0;){var E=kt(h.outerHTML);kt(h)[p](E);var C=w.cloneNode();kt(C).attr("width",re()(o)?o[t-_]:o);var O=k[x];y[0].insertBefore(C,O),_--}function S(e,t,n,r){for(var a=0;a<n;a++){var o=e.insertCell(t);o.innerHTML=u.EmptyCell,o.rowSpan=r.rowSpan,cp(r,o)}}if(b.each((function(e,r){var a=d[r][f],o=l.getTdIndex(r,x);if(a.isMulti)!n&&a.colSpan>1?a.element.colSpan=a.colSpan+t:S(e,o,t,a.element);else if(a.isEmpty){if(a.parent.col===f)return;var i=d[a.parent.row][a.parent.col];a.parent.col<x&&a.parent.col+i.colSpan-1>=x?i.element.colSpan=i.colSpan+t:a.parent.row===r&&S(e,o,t,i.element)}else S(e,o,t,a.element)})),r.emit("actioned","insertCol",a),l.area){var R=Object.assign(l.area,{col:e,col2:e+t-1});l.selectArea(R)}})),g()(de()(r),"insertCol",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,a=r.card.selection,o=a.area,i=a.getTableModel(),c="left"===e,l="end"===e||!e,s=r.card.container.find(r.card.template.COLS_HEADER_ITEM_CLASS),u=i.cols-1;if(!l&&(t=a.isSingleArea()?1:a.colCount(),o)){var d=a.normalizeArea(),f=d.col_min,p=d.col_max;u=c?f:p}var h=c?u:u+1,m=s[u].offsetWidth;if(r.insertColAt(h,t,c,n,m),l){var g=r.card.selection.viewport[0];g.scrollLeft=g.scrollWidth-g.offsetWidth}})),g()(de()(r),"removeCol",(function(e){var t=r.card,n=t.selection,a=t.tableRoot,o=t.controllBar,i=t.template,c=n.area,l=n.getTableModel();if(c){var s=l.table,u=c.col,d=c.col2,f=n.colCount(),p=Math.min(u,d),h=Math.max(u,d),m=a.find("colgroup"),g=a.find("tr"),v=m.find("col");if(h===v.length-1&&0===p)r.removeTable();else{for(var y=h;y>=p;y--)o.removeCol(y),v[y].remove();s.forEach((function(e,t){for(var n=h;n>=p;n--){var r=e[n];if(r.isEmpty){var a=s[r.parent.row][r.parent.col];if(r.parent.col<p){var o=Math.min(f,r.parent.col+a.colSpan-p);a.element.colSpan=a.colSpan-o}}else{if(r.isMulti){var c=n+r.colSpan-1>h,l=h+1-n;if(c){for(var u=0,d=0;d<=h;d++)e[d].isEmpty||u++;var m=g[t].insertCell(u);m.innerHTML=i.EmptyCell,m.colSpan=r.colSpan-l,m.rowSpan=r.rowSpan,cp(r.element,m)}}r.element.remove()}}})),r.emit("actioned","removeCol",e)}}})),g()(de()(r),"insertRowAt",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=r.card,i=o.container,c=o.selection,l=o.tableRoot,s=o.template,u=c.getTableModel(),d=u.table,f=(n=0===e||n)?"after":"before",p=n?e:e-1,h=i.find(s.ROWS_HEADER_ITEM_CLASS),m=h[p],g=n?p:p+1,v=d[p],y=[];v.forEach((function(e,r){if(e.isMulti)!n&&e.rowSpan>1?e.element.rowSpan=e.rowSpan+t:y.push({tdBase:e.element});else if(e.isEmpty){var a=d[e.parent.row][e.parent.col];e.parent.row<g&&e.parent.row+a.rowSpan-1>=g?a.element.rowSpan=a.rowSpan+t:e.parent.row<p&&e.parent.col===r&&y.push({tdBase:a.element})}else y.push({tdBase:e.element})}));for(var b=t,k=function(){var e=l[0].insertRow(g);y.forEach((function(t){var n=e.insertCell();n.innerHTML=s.EmptyCell,n.colSpan=t.tdBase.colSpan,cp(t.tdBase,n)})),kt(m)[f](kt(m.outerHTML)),b--};b>0;)k();if(r.emit("actioned","insertRow",a),c.area){var w=Object.assign(c.area,{row:e,row2:e+t-1});c.selectArea(w)}r.card.onTableSizeChange()})),g()(de()(r),"insertRow",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,a=r.card.selection,o=a.area,i=a.getTableModel(),c="up"===e,l="end"===e||!e,s=i.rows-1;if(!l&&(t=a.isSingleArea()?1:a.rowCount(),o)){var u=o.row,d=o.row2;s=c?Math.min(u,d):Math.max(u,d)}var f=c?s:s+1;r.insertRowAt(f,t,c,n)})),g()(de()(r),"removeRow",(function(e){var t=r.card,n=t.selection,a=t.tableRoot,o=t.controllBar,i=t.template,c=n.area,l=n.getTableModel();if(c){var s=l.table,u=c.row,d=c.row2,f=n.rowCount(),p=Math.min(u,d),h=Math.max(u,d),m=a.find("tr");if(h===l.rows-1&&0===p)r.removeTable();else{for(var g=function(e){s[e].forEach((function(t,r){if(t.isMulti&&t.rowSpan>1&&e+t.rowSpan-1>h){var a=n.getTdIndex(h+1,r),o=m[h+1].insertCell(a),c=h-e+1;o.innerHTML=i.EmptyCell,o.colSpan=t.colSpan,o.rowSpan=t.rowSpan-c}if(t.isEmpty){var l=s[t.parent.row][t.parent.col];if(t.parent.row<p){var u=Math.min(f,t.parent.row+l.rowSpan-p);l.element.rowSpan=l.rowSpan-u}}}))},v=p;v<=h;v++)g(v);for(var y=h;y>=p;y--)a[0].deleteRow(y),o.removeRow(y);r.emit("actioned","removeRow",e),r.card.onTableSizeChange()}}})),g()(de()(r),"mergeCell",(function(e){var t=r.card.selection,n=t.area;if(n){r.splitCell();var a,o=n.row,i=n.col,c=n.row2,l=n.col2,s=Math.min(o,c),u=Math.min(i,l),d=t.rowCount(),f=t.colCount(),p=[];t.each((function(e,t,n){if(n===u&&t===s)return(a=e.element).rowSpan=d,void(a.colSpan=f);e.element&&(""!==e.element.innerText.trim()&&p.unshift(e.element.innerHTML),e.element.remove())})),a.innerHTML=a.innerHTML+p.join(""),r.emit("actioned","mergeCell",e)}})),g()(de()(r),"splitCell",(function(e){var t=r.card,n=t.selection,a=t.tableRoot,o=t.template,i=n.area,c=n.getTableModel();if(i){var l=c.table,s=a.find("tr"),u=n.normalizeArea(),d=u.row_min,f=u.row_max,p=u.col_min,h=u.col_max;n.each((function(e,t,r){if(e.isMulti){if(e.element.colSpan=1,e.element.rowSpan=1,t+e.rowSpan-1>f){var a=f+1,i=r,c=n.getTdIndex(a,i),u=s[a].insertCell(c);u.rowSpan=t+e.rowSpan-1-f,u.colSpan=e.colSpan,cp(e.element,u),u.innerHTML=o.EmptyCell}if(r+e.colSpan-1>h){var m=t,g=h+1,v=n.getTdIndex(m,g),y=h-r,b=s[m].insertCell(v+y);b.rowSpan=Math.min(e.rowSpan,f-t+1),b.colSpan=r+e.colSpan-1-h,cp(e.element,b),b.innerHTML=o.EmptyCell}}if(e.isEmpty){var k=e.parent.row,w=e.parent.col,x=l[k][w],_=k+x.rowSpan-1,E=w+x.colSpan-1;if(k<d){var C=h>=E;if(x.element.rowSpan=d-k,x.element.colSpan=C?x.colSpan:h-w+1,!C&&r===h&&t===d){var O=h+1,S=k,R=n.getTdIndex(S,O),j=s[S].insertCell(R);j.rowSpan=x.rowSpan,j.colSpan=E-h,cp(x.element,j),j.innerHTML=o.EmptyCell}if(_>f&&r===Math.min(E,h)&&t===d){var P=f+1,A=w,T=n.getTdIndex(P,A),D=s[P].insertCell(T);D.rowSpan=_-f,D.colSpan=C?x.colSpan:h-w+1,cp(x.element,D),D.innerHTML=o.EmptyCell}}if(w<p){var M=f>=_;if(x.element.colSpan=p-w,x.element.rowSpan=M?x.rowSpan:f-k+1,!M&&t===f&&r===p){var N=f+1,L=w,I=n.getTdIndex(N,L),B=s[N].insertCell(I);B.colSpan=x.colSpan,B.rowSpan=_-f,cp(x.element,B),B.innerHTML=o.EmptyCell}if(E>h&&t===Math.min(_,f)&&r===h){var z=k,F=h+1,U=n.getTdIndex(z,F),V=s[z].insertCell(U);V.colSpan=E-h,V.rowSpan=M?x.rowSpan:f-k+1,cp(x.element,V),V.innerHTML=o.EmptyCell}}var q=n.getTdIndex(t,r);s[t].insertCell(q).innerHTML=o.EmptyCell}}),!0),r.emit("actioned","splitCell",e)}})),g()(de()(r),"changed",(function(){r.tableCleared=!1})),g()(de()(r),"clear",(function(){var e=r.card,t=e.selection,n=e.subEngine,a=e.template,o=t.area;if(o&&!n){if(o.total_table){if(r.tableCleared)return r.removeTable(),void(r.tableCleared=!1);r.tableCleared=!0}if(o.total_row){if(r.rowCleared)return r.removeRow(),void(r.rowCleared=!1);r.rowCleared=!0}if(o.total_col){if(r.colCleared)return r.removeCol(),void(r.colCleared=!1);r.colCleared=!0}t.each((function(e){e.element&&(e.element.innerHTML=a.EmptyCell)})),r.emit("actioned","clear")}})),g()(de()(r),"clearFormat",(function(){var e=r.card.selection;e.area&&(e.each((function(e){e.element&&e.element.removeAttribute("style")})),r.emit("actioned","clearFormat"))})),g()(de()(r),"hasCopyData",(function(){return up()})),g()(de()(r),"mockPaste",(function(e){var t=up();t&&r.paste(t,e)})),g()(de()(r),"shortcutPaste",(function(e){e.preventDefault(),e.stopPropagation();var t=Or.getClipboardData(e);r.paste(t)})),g()(de()(r),"paste",(function(e,t){var n=r.card.selection,a=n.area,o=n.getTableModel();if(a){var i=n.normalizeArea(),c=i.row_min,l=i.col_min,s=i.row_max,u=i.col_max,d=c===s&&l===u,f=n.isSingleArea(),p=e.html,h=e.text,m=function(e){for(var t=[],n=0,r=e.length-1;e[n]&&e[n].tagName&&"span"===e[n].tagName.toLowerCase()&&""===e[n].innerText.trim();)n++;for(;e[r]&&e[r].tagName&&"span"===e[r].tagName.toLowerCase()&&""===e[r].innerText.trim();)r--;if(n<=r)for(var a=n;a<=r;a++)t.push(e[a]);return t.length?kt(t):e}(kt(new er(p,r.card.engine.schema,r.card.engine.conversion).toValue()));if("table"===m.name){op(m[0]);var g=rp(m[0]),v=g.rows,y=g.cols,b=g.table[0][0],k=b.rowSpan,w=b.colSpan;if(k===v&&w===y&&f)return ip(g.table[0][0].element,o.table[c][l].element),void r.emit("actioned","paste",t);if(d){if(y+l>o.cols){var x=y+l-o.cols;r.insertCol("end",x,!0)}if(v+c>o.rows){var _=v+c-o.rows;r.insertRow("end",_,!0)}n.selectArea({row:c,col:l,row2:c+v-1,col2:l+y-1})}var E=n.area,C=Math.min(E.row,E.row2),O=Math.max(E.row,E.row2),S=Math.min(E.col,E.col2),R=Math.max(E.col,E.col2);r.splitCell(!0),n.each((function(e,t,n){var r=(t-C)%v,a=(n-S)%y,o=g.table[r][a];if(o)return o.isMulti?(e.element.rowSpan=Math.min(o.rowSpan,O-t+1),e.element.colSpan=Math.min(o.colSpan,R-n+1),void ip(o.element,e.element)):void(o.isEmpty?e.element.remove():o.element&&ip(o.element,e.element))}))}else{r.mergeCell(!0);var j=kt(o.table[c][l].element);r.card.createEditor(j,p||new na(h).toHTML())}r.emit("actioned","paste",t)}})),g()(de()(r),"copy",(function(){var e=r.card.selection.getSelectionHtml();e&&(Or.copyNode(e),sp(e))})),g()(de()(r),"mockCopy",(function(){var e=r.card.selection.getSelectionHtml();e&&sp(e)})),g()(de()(r),"shortcutCopy",(function(e){var t=r.card.selection.getSelectionHtml();t&&(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",kt(t)[0].innerText),e.clipboardData.setData("text/html",t),sp(t),e.preventDefault())})),g()(de()(r),"cut",(function(){r.copy(),r.clear()})),g()(de()(r),"shortcutCut",(function(e){r.shortcutCopy(e),r.clear()})),g()(de()(r),"removeTable",(function(){r.emit("tableRemoved"),r.card.engine.change.removeCard(r.card.cardRoot)})),g()(de()(r),"alignLeft",(function(){r.align("left")})),g()(de()(r),"alignCenter",(function(){r.align("center")})),g()(de()(r),"alignRight",(function(){r.align("right")})),g()(de()(r),"align",(function(e){var t=r.card.selection;t.area&&(t.each((function(t){t.element&&kt(t.element).css("text-align",e)})),r.emit("actioned","align"))})),g()(de()(r),"valign",(function(e){var t=r.card.selection;t.area&&(t.each((function(t){t.element&&kt(t.element).css("vertical-align",e)})),r.emit("actioned","align"))})),g()(de()(r),"background",(function(e){var t=r.card.selection;t.area&&(t.each((function(t){t.element&&(e?kt(t.element).css("background-color",e):kt(t.element).css("background-color",""))})),r.emit("actioned","background"))})),g()(de()(r),"fontcolor",(function(e){var t=r.card.selection;t.area&&(t.each((function(t){t.element&&kt(t.element).css("color",e||"#666")})),r.emit("actioned","fontcolor"))})),g()(de()(r),"toggleBorder",(function(){var e=r.card.tableRoot.hasClass("lake-no-border");e?r.card.tableRoot.removeClass("lake-no-border"):r.card.tableRoot.addClass("lake-no-border"),r.card.value=Pp(Pp({},r.card.value),{},{hideBorder:!e}),r.card.setCardValue(!1),r.emit("actioned","toggleBorder",!1)})),g()(de()(r),"queryState",(function(e){var t=r.card,n=t.selection,a=t.engine,o=t.subEngine;if("border"===e)return r.card.tableRoot.hasClass("lake-no-border");if(o)return o.command.queryState(e);if(!n.area)return!1;var i,c=""!==kt(n.getSelectionHtml())[0].innerText.trim(),l=!1;return n.each((function(t){if(t.element&&c&&!l&&""!==t.element.innerText.trim()){kt(t.element).attr("contenteditable",!0);var n=a.change.getRange();n.selectNodeContents(t.element),a.change.select(n),a.change.marks=sr.getActiveMarks(n),i=a.command.queryState(e),l=!0,kt(t.element).removeAttr("contenteditable")}})),i})),g()(de()(r),"fill",(function(e){var t=r.card.selection,n=rp(e[0]),a=t.normalizeArea(),o=a.row_min,i=a.col_min;t.each((function(e,t,r){var a=t-o,c=r-i,l=n.table[a][c];l&&e.element&&e.element&&l.element&&(e.element.innerHTML=l.element.innerHTML)}))})),g()(de()(r),"execute",(function(){var e,t=r.card,n=t.selection,a=t.cardRoot,o=t.engine,i=t.subEngine,c=t.state;if(!c.readonly)if(i){var l;(l=i.command).execute.apply(l,arguments)}else{var s=n.area;if(s){var u=n.getSelectionHtml();u=new er(u,o.schema,o.conversion).toValue();var d=kt(u=Xe.transformCustomTags(u));a.append(d),d.attr("contenteditable",!0),d.addClass("tmp-table");var f=o.change.getRange();f.selectNodeContents(d[0]),o.change.select(f),(e=o.command).execute.apply(e,arguments),d.removeAttr("contenteditable"),r.fill(d),d.remove(),r.emit("actioned","fontstyle")}}})),r.card=e,r}return u()(n)}();var Tp=function(e){oe()(n,Lc.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this),g()(de()(r),"selectFirstCell",(function(){var e=r.card.tableRoot.find("td");r.selectCell(e[0])})),g()(de()(r),"rowCount",(function(){if(!r.area)return 0;var e=r.area,t=e.row,n=e.row2;return Math.abs(t-n)+1})),g()(de()(r),"colCount",(function(){if(!r.area)return 0;var e=r.area,t=e.col,n=e.col2;return Math.abs(t-n)+1})),g()(de()(r),"selectCell",(function(e,t){if(e&&e.tagName&&"td"===e.tagName.toLowerCase()){var n,a=r.getTableModel().table,o=e.parentNode,i=e.rowSpan,c=e.colSpan,l=o.rowIndex;a[l].forEach((function(t,r){t.element===e&&(n=r)}));var s={row:l,col:n,row2:l+i-1,col2:n+c-1};if(!t||!r.area)return r.area=s,delete r.from_col,delete r.from_row,delete r.shift_base_area,void r.renderActiveBox();var u=r.normalizeArea(),d=u.row_min,f=u.row_max,p=u.col_min,h=u.col_max;if("contextmenu"===t){if(d<=l&&l<=f&&p<=n&&n<=h)return;return r.area=s,delete r.shift_base_area,void r.renderActiveBox()}if("shift"===t)return r.shift_base_area=r.shift_base_area||r.area,r.area=r.getAdjustArea(r.shift_base_area,s),void r.renderActiveBox();switch(t){case"drag_nw":r.base_area=r.base_area||r._getSouthEastTdArea();break;case"drag_se":r.base_area=r.base_area||r._getNorthWestTdArea();break;case"drag_n":r.row_base=void 0!==r.row_base?r.row_base:f;break;case"drag_s":r.row_base=void 0!==r.row_base?r.row_base:d;break;case"drag_w":r.col_base=void 0!==r.col_base?r.col_base:h;break;case"drag_e":r.col_base=void 0!==r.col_base?r.col_base:p}r.base_area&&(r.area=r.getAdjustArea(r.base_area,s)),void 0!==r.col_base&&(r.area.col=r.col_base,r.area.col2=n),void 0!==r.row_base&&(r.area.row=r.row_base,r.area.row2=l),r.renderActiveBox()}})),g()(de()(r),"getAdjustArea",(function(e,t){for(var n=r.getTableModel().table,a=e.row,o=e.col,i=e.row2,c=e.col2,l=t.row,s=t.row2,u=t.col,d=t.col2,f=Math.min(a,i,l,s),p=Math.max(a,i,l,s),h=Math.min(o,c,u,d),m=Math.max(o,c,u,d),g={row:f,col:h,row2:p,col2:m},v=f;v<=p;v++)for(var y=h;y<=m;y++){if(n[v][y].isEmpty){var b=n[v][y].parent;if(b.row<f||b.col<h){var k=n[b.row][b.col],w={row:b.row,col:b.col,row2:b.row+k.rowSpan-1,col2:b.col+k.colSpan-1};return r.getAdjustArea(g,w)}}if(n[v][y].isMulti){var x=n[v][y];if(v+x.rowSpan-1>p||y+x.colSpan-1>m){var _={row:v,col:y,row2:v+x.rowSpan-1,col2:y+x.colSpan-1};return r.getAdjustArea(g,_)}}}return g})),g()(de()(r),"isSingleArea",(function(){var e=de()(r).area,t=r.getTableModel().table;if(!e)return!1;var n=r.normalizeArea(),a=n.row_min,o=n.row_max,i=n.col_min,c=n.col_max,l=t[a][i],s=l?l.rowSpan:1,u=l?l.colSpan:1;return a+s-1===o&&i+u-1===c})),g()(de()(r),"hasMergeCell",(function(){if(!de()(r).area)return!1;var e=!1;return r.each((function(t){(t.isEmpty||t.isMulti)&&(e=!0)})),e})),g()(de()(r),"_getSouthEastTdArea",(function(){var e=de()(r).area,t=r.getTableModel().table;if(!e)return null;var n=r.normalizeArea(),a=n.row_max,o=n.col_max,i=t[a][o],c=a,l=o;return i.isEmpty&&(c=(i=t[i.parent.row][i.parent.col]).parent.row,l=i.parent.col),{row:c,col:l,row2:a,col2:o}})),g()(de()(r),"_getNorthWestTdArea",(function(){var e=de()(r).area,t=r.getTableModel().table;if(!e)return null;var n=r.normalizeArea(),a=n.row_min,o=n.col_min,i=t[a][o];return{row:a,col:o,row2:a+(i?i.rowSpan:1)-1,col2:o+(i?i.colSpan:1)-1}})),g()(de()(r),"selectCol",(function(e){var t=r.getTableModel();r.area={row:0,row2:t.rows-1,col:pl.a.shift&&r.area.total_col?r.area.col:e,col2:e,total_col:!0},r.renderActiveBox()})),g()(de()(r),"selectCols",(function(e,t){var n=r.getTableModel();r.area={row:0,row2:n.rows-1,col:e,col2:t,total_col:!0},r.renderActiveBox()})),g()(de()(r),"selectRow",(function(e){var t=r.getTableModel();r.area={row:pl.a.shift&&r.area.total_row?r.area.row:e,row2:e,col:0,col2:t.cols-1,total_row:!0},r.renderActiveBox()})),g()(de()(r),"selectRows",(function(e,t){var n=r.getTableModel();r.area={row:e,row2:t,col:0,col2:n.cols-1,total_row:!0},r.renderActiveBox()})),g()(de()(r),"selectArea",(function(e){r.area=e,r.renderActiveBox()})),g()(de()(r),"selectTable",(function(e){if(r.card.active&&(!e||!r.card.subEngine)){var t=de()(r).area,n=r.getTableModel();t&&t.total_table?r.clear():r.selectArea({row:0,row2:n.rows-1,col:0,col2:n.cols-1,total_table:!0})}})),g()(de()(r),"selectLeft",(function(e,t){if(!r.card.subEngine){var n=de()(r).area,a=r.getTableModel();if(n){var o=r.normalizeArea(),i=o.row_min,c=o.col_min,l=r.from_row||i,s=Math.max(c-1,0);r.from_row=r.from_row||l,0===c&&t&&l>0&&(s=a.cols-1,l-=1,r.from_row=l),delete r.from_col,r.selectTd(l,s)}}})),g()(de()(r),"selectRight",(function(e,t){if(!r.card.subEngine){var n=de()(r).area,a=r.getTableModel();if(n){var o=r.normalizeArea(),i=o.row_min,c=o.col_max,l=r.from_row||i,s=Math.min(c+1,a.cols-1);r.from_row=r.from_row||l,c+1===a.cols&&t&&(s=0,(l+=1)===a.rows&&r.card.command.insertRow("end"),r.from_row=l),delete r.from_col,r.selectTd(l,s)}}})),g()(de()(r),"selectUp",(function(){if(!r.card.subEngine&&de()(r).area){var e=r.normalizeArea(),t=e.row_min,n=e.col_min,a=Math.max(t-1,0),o=r.from_col||n;r.from_col=r.from_col||n,delete r.from_row,r.selectTd(a,o)}})),g()(de()(r),"selectDown",(function(){if(!r.card.subEngine){var e=de()(r).area,t=r.getTableModel();if(e){var n=r.normalizeArea(),a=n.row_max,o=n.col_min,i=Math.min(a+1,t.rows-1),c=r.from_col||o;r.from_col=r.from_col||o,delete r.from_row,r.selectTd(i,c)}}})),g()(de()(r),"selectTab",(function(e){r.card.subEngine&&r.card.removeEditor(),e.preventDefault(),pl.a.shift?r.selectLeft(e,!0):r.selectRight(e,!0)})),g()(de()(r),"selectEnter",(function(e){r.card.subEngine||(e.preventDefault(),r.selectDown())})),g()(de()(r),"getTableModel",(function(){return r.tableModel||r.refreshModel(),r.tableModel})),g()(de()(r),"selectTd",(function(e,t){var n=r.getTableModel().table,a=n[e][t];if(a.isEmpty){var o=n[a.parent.row][a.parent.col];r.selectArea({row:a.parent.row,col:a.parent.col,row2:a.parent.row+o.rowSpan-1,col2:a.parent.col+o.colSpan-1})}else{r.selectArea({row:e,col:t,row2:e+a.rowSpan-1,col2:t+a.colSpan-1});var i=parseInt(r.activeBox.css("left")),c=yp(r.viewport[0]);i<r.viewport[0].scrollLeft?r.viewport[0].scrollLeft=i:i+80>r.viewport[0].scrollLeft+c.width&&(r.viewport[0].scrollLeft=i-c.width+80)}})),g()(de()(r),"renderActiveBox",(function(){r.hideSubEditor(),r.reRenderActiveBox(),r.emit("select")})),g()(de()(r),"reRenderActiveBox",(function(e){var t=de()(r).area,n=r.getTableModel(),a=r.card.template;if(t){r.single=r.isSingleArea();var o,i,c,l,s=n.table,u=r.normalizeArea(),d=u.row_min,f=u.row_max,p=u.col_min,h=u.col_max,m=r.card.tableRoot[0],g=yp(m.tHead||m.tBodies[0]||m);if(r.single){var v=yp(s[d][p].element);o=v.left-g.left,i=v.top-g.top,c=v.width,l=v.height}else{var y=r.colsHeader.find(a.COLS_HEADER_ITEM_CLASS),b=r.rowsHeader.find(a.ROWS_HEADER_ITEM_CLASS);o=kp(y[p])-g.left,i=bp(b[d])-g.top,c=y[h].getBoundingClientRect().right-kp(y[p]),l=function(e){return e.getBoundingClientRect().bottom}(b[f])-bp(b[d])}r.showActiveBox(o,i,l,c,e),r.areaWidth=c,r.areaHeight=l,r.areaLeft=o,r.areaTop=i,r.reRenderSubEditor(),r.td=r.single?s[d][p].element:null}})),g()(de()(r),"showActiveBox",(function(e,t,n,a,o){var i=de()(r),c=i.activeBox,l=i.hideTextarea,s=c.find(".l"),u=c.find(".r"),d=c.find(".t"),f=c.find(".b"),p=c.find(".mask"),h=c.find(".mask-col"),m=c.find(".mask-row"),g=c.find(".se"),v=c.find(".n"),y=c.find(".s"),b=c.find(".w"),k=c.find(".e");c.removeClass("col"),c.removeClass("row"),c.removeClass("total"),c.removeClass("preview-mask-col"),c.removeClass("preview-mask-row"),r.area.total_col&&c.addClass("col"),r.area.total_row&&c.addClass("row"),r.area.total_table&&c.addClass("total"),"removeCol"===o&&c.addClass("preview-mask-col"),"removeRow"===o&&c.addClass("preview-mask-row"),s.css("height","".concat(n,"px")),u.css("height","".concat(n+1,"px")),u.css("left","".concat(a,"px")),d.css("width","".concat(a,"px")),f.css("top","".concat(n,"px")),f.css("width","".concat(a,"px")),g.css("left","".concat(a-3,"px")),g.css("top","".concat(n-3,"px")),v.css("top","-4px"),v.css("left","".concat(a/2-3,"px")),y.css("top","".concat(n-3,"px")),y.css("left","".concat(a/2-3,"px")),b.css("left","-4px"),b.css("top","".concat(n/2-3,"px")),k.css("left","".concat(a-3,"px")),k.css("top","".concat(n/2-3,"px")),p.css("width","".concat(a,"px")),p.css("height","".concat(n,"px")),h.css("width","".concat(a+1,"px")),h.css("height","".concat(Cp(r.rowsHeader[0])-33,"px")),h.css("top","-".concat(t,"px")),m.css("height","".concat(n+1,"px")),m.css("width","".concat(Ep(r.colsHeader[0]),"px")),m.css("left","-".concat(e,"px")),c.css("left","".concat(e,"px")),c.css("top","".concat(t,"px")),c.css("display","block"),l.css("left","".concat(r.clickX+10,"px")),l.css("top","".concat(r.clickY-10,"px"))})),g()(de()(r),"showSubEditor",(function(){r.reRenderSubEditor(),r.editArea.css("display","table"),r.activeBox.addClass("editing")})),g()(de()(r),"reRenderSubEditor",(function(){r.editAreaContent=r.editArea.find(r.card.template.SUB_EDITOR_CONTENT_CLASS),r.editArea.css("width","".concat(r.areaWidth-1,"px")),r.editAreaContent.css("width","".concat(r.areaWidth-2,"px")),r.editAreaContent.css("max-width","".concat(r.areaWidth-2,"px")),r.editAreaContent.css("height","".concat(r.areaHeight,"px")),cp(r.td,r.editAreaContent)})),g()(de()(r),"hideSubEditor",(function(){var e=r.card.template;r.editArea.html(""),r.editArea[0].remove(),r.editArea=kt(e.SubEditor),r.activeBox.append(r.editArea),r.activeBox.removeClass("editing")})),g()(de()(r),"hideActiveBox",(function(){r.activeBox.css("display","none")})),g()(de()(r),"startDragTriggerToSelectCell",(function(e){var t=r.card.template,n=kt(e.target).closest(t.ACTIVE_TD_TRIGGER_CLASS);if(n[0]){e.preventDefault();var a=n.attr("direction");r.dragSelecting=!0,r.dragDirection=a,r.addDragEvent()}})),g()(de()(r),"onTdMouseDown",(function(e){pl.a.shift=e.shiftKey;var t=kt(e.target).closest("td");if(t[0]){var n;pl.a.shift&&(n="shift"),2===e.button&&(n="contextmenu"),r.card.active&&e.stopPropagation(),r.clickX=e.clientX,r.clickY=e.clientY;var a=r.td===t[0],o=r.card.isEditing(t);if(a&&!o&&!n)return Qt.log("active emit==="),void r.emit("active",t);r.card.isEditing(t)||(e.preventDefault(),r.selectCell(t[0],n),"contextmenu"!==n&&r.delayStartDrag(t))}})),g()(de()(r),"delayStartDrag",(function(e){r.dragTimer&&clearTimeout(r.dragTimer),r.card.container.on("mouseup",r.cancelStartDrag),r.dragTimer=setTimeout((function(){r.dragSelecting=!0,r.dragDirection="drag_se",r.dragoverTd=e[0],r.addDragEvent()}),100)})),g()(de()(r),"cancelStartDrag",(function(){r.dragTimer&&(clearTimeout(r.dragTimer),r.card.container.off("mouseup",r.cancelStartDrag))})),g()(de()(r),"addDragEvent",(function(){r.card.tableRoot.addClass("drag-select"),r.card.tableRoot.addClass(r.dragDirection),r.areaMask.addClass(r.dragDirection),r.card.container.on("mouseup",r.dragEnd).on("mouseleave",r.delayDragEnd).on("mousemove",r.dragToSelectCell)})),g()(de()(r),"removeDragEvent",(function(){r.card.tableRoot.removeClass("drag-select"),r.card.tableRoot.removeClass(r.dragDirection),r.areaMask.removeClass(r.dragDirection),r.card.container.off("mouseup",r.dragEnd).off("mouseleave",r.delayDragEnd).off("mousemove",r.dragToSelectCell)})),g()(de()(r),"dragToSelectCell",(function(e){if(r.dragSelecting){r.timer&&clearTimeout(r.timer);var t=kt(e.target).closest("td");t[0]&&(t.isRoot()||e.preventDefault(),t[0]!==r.dragoverTd&&(r.selectCell(t[0],r.dragDirection),r.dragoverTd=t[0]))}})),g()(de()(r),"dragEnd",(function(){r.dragSelecting&&(r.dragSelecting=!1,delete r.base_area,delete r.row_base,delete r.col_base,r.removeDragEvent())})),g()(de()(r),"delayDragEnd",(function(){r.timer=setTimeout(r.dragEnd,500)})),g()(de()(r),"preview",(function(e){switch(e){case"removeCol":case"removeRow":r.reRenderActiveBox(e);break;default:r.reRenderActiveBox()}})),g()(de()(r),"clear",(function(){r.area=null,r.td=null,r.hideActiveBox(),r.emit("cancelSelect")})),g()(de()(r),"normalizeArea",(function(){if(r.area){var e=r.area,t=e.row,n=e.col,a=e.row2,o=e.col2;return{row_min:Math.min(t,a),row_max:Math.max(t,a),col_min:Math.min(n,o),col_max:Math.max(n,o)}}})),g()(de()(r),"getEffectRows",(function(){if(r.area){var e=r.normalizeArea(),t=e.row_min,n=e.row_max,a=r.getTableModel().table,o=t,i=n,c=a[t],l=a[n];return c.forEach((function(e){if(e.isEmpty){var t=e.parent.row,n=e.parent.col;o=Math.min(o,t),i=Math.max(i,t+a[t][n].rowSpan-1)}})),l.forEach((function(e){if(e.isEmpty){var t=e.parent.row,r=e.parent.col;i=Math.max(i,t+a[t][r].rowSpan-1)}e.isMulti&&(i=Math.max(i,n+e.rowSpan-1))})),{row_min:o,row_max:i}}})),g()(de()(r),"each",(function(e,t){var n=de()(r).area,a=r.getTableModel().table;if(n){var o=r.normalizeArea(),i=o.row_min,c=o.row_max,l=o.col_min,s=o.col_max;if(t)for(var u=c;u>=i;u--)for(var d=s;d>=l;d--)e(a[u][d],u,d);else for(var f=i;f<=c;f++)for(var p=l;p<=s;p++)e(a[f][p],f,p)}})),g()(de()(r),"getTdIndex",(function(e,t){for(var n=r.getTableModel().table[e],a=0,o=0;o<t;o++)n[o].element&&a++;return a})),g()(de()(r),"getTdElement",(function(e,t){var n=r.getTableModel().table,a=n[e][t];return a.element?a.element:a.isEmpty?n[a.parent.row][a.parent.col].element:void 0})),g()(de()(r),"getTdRowCol",(function(e){var t=r.getTableModel().table,n=e.parentNode.rowIndex,a=t[n],o=0;return a.forEach((function(t,n){t.element===e&&(o=n)})),{row:n,col:o}})),g()(de()(r),"getSelectionHtml",(function(){var e=de()(r),t=e.area,n=e.card,a=r.getTableModel().table,o=n.tableRoot;if(!t)return null;for(var i=r.normalizeArea(),c=i.row_min,l=i.row_max,s=i.col_min,u=i.col_max,d=o.find("col"),f=[],p=0,h=s;h<=u;h++)f.push('<col width="'.concat(d[h].width,'" />')),p+=parseInt(d[h].width);for(var m="<colgroup>".concat(f.join(""),"</colgroup>"),g=[],v=c;v<=l;v++){for(var y=[],b=s;b<=u;b++){var k=a[v][b],w=void 0,x=void 0,_=void 0;if(k.element&&(_=k.element.cloneNode(!0)),k.isMulti&&(w=Math.min(v+k.rowSpan-1,l)-v+1,x=Math.min(b+k.colSpan-1,u)-b+1),k.isEmpty){var E=a[k.parent.row][k.parent.col];if(k.parent.row===v&&k.parent.col<s&&b===s){var C=s-k.parent.col;x=Math.min(E.colSpan-C,u-s+1),w=E.rowSpan,_=E.element.cloneNode(!0)}if(k.parent.col===b&&k.parent.row<c&&v===c){var O=c-k.parent.row;w=Math.min(E.rowSpan-O,l-c+1),x=E.colSpan,_=E.element.cloneNode(!0)}}_&&(_.setAttribute("rowspan",w),_.setAttribute("colspan",x),y.push(_.outerHTML))}g.push("<tr>".concat(y.join(""),"</tr>"))}return'\x3c!--StartFragment--\x3e<table style="width: '.concat(p,'px">').concat(m).concat(g.join(""),"</table>\x3c!--EndFragment--\x3e")})),g()(de()(r),"refreshModel",(function(){r.tableModel=rp(r.card.tableRoot[0]),Qt.log(r.tableModel)})),g()(de()(r),"cancelSelect",(function(){r.card.subEngine?r.emit("cancelSelect"):r.clear()})),g()(de()(r),"onClickMask",(function(e){if(2!==e.button){var t=e.offsetX,n=e.offsetY,a=r.getTdByMaskXY(t,n);r.selectCell(a)}})),g()(de()(r),"onMouseMoveMask",(function(e){if(r.dragSelecting){var t=e.offsetX,n=e.offsetY,a=r.getTdByMaskXY(t,n);r.selectCell(a,r.dragDirection)}})),g()(de()(r),"getTdByMaskXY",(function(e,t){for(var n=r.getTableModel(),a=r.card.template,o=r.normalizeArea(),i=o.row_min,c=o.col_min,l=r.colsHeader.find(a.COLS_HEADER_ITEM_CLASS),s=r.rowsHeader.find(a.ROWS_HEADER_ITEM_CLASS),u=i,d=c,f=Ep(l[d]),p=Cp(s[u]);f<e;)f+=Ep(l[++d]);for(;p<t;)p+=Cp(s[++u]);var h=n.table[u][d];return h.isEmpty&&(h=n.table[h.parent.row][h.parent.col]),h.element})),g()(de()(r),"render",(function(e){r.refreshModel();var t=de()(r).area,n=r.getTableModel();if(t){var a=r.normalizeArea(),o=a.row_min,i=a.col_min;switch(e){case"removeRow":r.selectRow(Math.min(o,n.rows-1));break;case"removeCol":r.selectCol(Math.min(i,n.cols-1));break;default:r.renderActiveBox()}}})),r.card=e,r}return u()(n,[{key:"isRowSelected",value:function(){return this.area&&(this.area.total_row||this.area.total_table)}},{key:"isColSelected",value:function(){return this.area&&(this.area.total_col||this.area.total_table)}},{key:"isTableSelected",value:function(){return this.area&&this.area.total_table}},{key:"bindEvents",value:function(){this.card.container.on("mousedown",this.onTdMouseDown).on("dragstart",(function(e){return e.stopPropagation()})).on("contextmenu",(function(e){return e.preventDefault()})).on("select",(function(e){return e.preventDefault()})),this.activeBox.on("mousedown",this.startDragTriggerToSelectCell),this.areaMask.on("mousedown",this.onClickMask).on("mousemove",this.onMouseMoveMask)}},{key:"init",value:function(){var e=this.card,t=e.container,n=e.template;this.activeBox=t.find(n.ACTIVE_TD_CLASS),this.colsHeader=t.find(n.COLS_HEADER_CLASS),this.rowsHeader=t.find(n.ROWS_HEADER_CLASS),this.viewport=t.find(n.VIEWPORT),this.editArea=this.activeBox.find(n.SUB_EDITOR_CLASS),this.editAreaContent=this.editArea.find(this.card.template.SUB_EDITOR_CONTENT_CLASS),this.areaMask=this.activeBox.find(n.AREA_MASK),this.hideTextarea=this.activeBox.find(n.TABLE_TEXTAREA_CLASS),this.bindEvents()}}]),n}();function Dp(e){return"classic"===e.getTypography()?"1515":"11"}var Mp=function(){function e(t){l()(this,e),this.card=t,this.data=[],this.index=0}return u()(e,[{key:"undo",value:function(){0!==this.index&&(this.index--,this.card.reRender(this.data[this.index]))}},{key:"redo",value:function(){this.data[this.index+1]&&(this.index++,this.card.reRender(this.data[this.index]))}},{key:"isEnd",value:function(){return this.index>=this.data.length-1}},{key:"clear",value:function(){this.data=[],this.index=0}},{key:"save",value:function(e){this.data[this.index]&&this.index++,this.data=this.data.slice(0,this.index),this.data.length>=100&&(this.data.shift(),this.index--),this.data[this.index]=e,this.index++}}]),e}(),Np={handler:{},filter:function(e){pl.a.filter=function(t){var n=e.template,r=(t.target||t.srcElement).tagName.toLocaleUpperCase();return!!kt(t.target).closest(n.TABLE_TEXTAREA_CLASS)[0]||!("INPUT"===r||"SELECT"===r||"TEXTAREA"===r)}},add:function(e,t){var n=this;this.handler[e]?this.handler[e].push(t):(this.handler[e]=[t],pl()(e,(function(t){n.handler[e].forEach((function(e){e(t)}))})))},clear:function(){}},Lp=function(){function e(t){l()(this,e),this.card=t,Np.filter(t)}return u()(e,[{key:"add",value:function(e,t){var n=this;Np.add(e,(function(e){n.card&&n.card.active&&t(e)}))}}]),e}(),Ip=[{table:{class:["lake-table","lake-no-border"],style:{width:"@length"}}},"colgroup",{col:{width:"@number",span:"@number"}},"thead","tbody",{tr:{style:{height:"@length"}}},{td:{colspan:"@number",rowspan:"@number","data-colwidth":/^\d+(,\d+)*$/,width:"@number",style:{"text-align":["left","center","right","justify"],"vertical-align":["top","middle","bottom"],"background-color":"@color",background:"@color",color:"@color"}}},{th:{colspan:"@number",rowspan:"@number",style:{"text-align":["left","center","right","justify"],"vertical-align":["top","middle","bottom"],"background-color":"@color",background:"@color",color:"@color"}}}];function Bp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bp(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fp={en:{insertColLeft:"Insert column(s) left",insertColRight:"Insert column(s) right",insertRowUp:"Insert row(s) up",insertRowDown:"Insert row(s) down",mergeCell:"Merge cells",splitCell:"Unmerge cells",hideBorder:"Hide border",removeCol:"Delete selected column(s)",removeRow:"Delete selected row(s)",removeTable:"Delete table",copy:"Copy",cut:"Cut",paste:"Paste",clear:"Clear",align:"Align",verticalAlign:"Vertical Align",alignLeft:"Align left",alignCenter:"Align center",alignRight:"Align right",alignJustify:"Align justify",alignTop:"Align Top",alignMiddle:"Align middle",alignBottom:"Align bottom",undo:"Undo",redo:"Redo",paintformat:"Paint format",removeformat:"Clear format",bold:"Bold",italic:"Italic",strikethrough:"Strike-through",underline:"Underline",fontcolor:"Font color",highlightColor:"Highlight color",backcolor:"Background color",taskList:"Task list",list:"List",orderedList:"Order list",unorderedList:"UnOrder list",link:"Link",image:"Image",label:"Label",save:"Save",insertCard:"Insert card",fontsizeTitle:"Font",file:"Attachment",lineHeight:"Line Height",defaultText:"Default",fileDescription:"Upload one or more files"},"zh-cn":{insertColLeft:"左边插入列",insertColRight:"右边插入列",insertRowUp:"上方插入行",insertRowDown:"下方插入行",mergeCell:"合并单元格",splitCell:"拆分单元格",hideBorder:"隐藏边框",removeCol:"删除选中列",removeRow:"删除选中行",removeTable:"删除表格",copy:"复制",cut:"剪切",paste:"粘贴",clear:"清空选中区域",align:"水平对齐",verticalAlign:"垂直对齐",alignLeft:"左对齐",alignCenter:"水平居中",alignRight:"右对齐",alignJustify:"两端对齐",alignTop:"顶对齐",alignMiddle:"垂直居中",alignBottom:"底对齐",undo:"撤销",redo:"重做",paintformat:"格式刷",removeformat:"清除格式",bold:"粗体",italic:"斜体",strikethrough:"中划线",underline:"下划线",fontcolor:"字体颜色",highlightColor:"字体背景色",backcolor:"单元格背景色",taskList:"任务列表",list:"列表",orderedList:"有序列表",unorderedList:"无序列表",link:"链接",image:"图片",label:"状态",save:"保存",insertCard:"插入卡片",fontsizeTitle:"字号",file:"附件",lineHeight:"行高",defaultText:"默认",fileDescription:"上传单个或多个文件"}},Up=function(e){oe()(n,Ds);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e,r){var o,i,c,s;l()(this,n),s=t.call(this),g()(de()(s),"destroy",(function(){Bc()((o=de()(s),se()(n.prototype)),"destroy",o).call(o);var e=s.active;s.active=!1,s.unBindKeyEvents(),e&&s.engine&&s.engine.toolbar.restore()})),g()(de()(s),"activate",(function(){s.active=!0,s.container.css("user-select","none"),s.mobile||s.engine.toolbar.set(function(e){var t=e.engine,n=e.selection,r=e.command,o=e.locale,i=["file","image","label"],c=[{key:"9",value:"12px"},{key:"10",value:"13px"},{key:"11",value:"14px"},{key:"1515",value:"15px"},{key:"12",value:"16px"},{key:"14",value:"19px"},{key:"16",value:"22px"},{key:"18",value:"24px"},{key:"22",value:"29px"},{key:"24",value:"32px"},{key:"30",value:"40px"},{key:"36",value:"48px"}],l={};c.forEach((function(e){var t=e.key,n=e.value;l[t]=n}));var s=fd(t);return s=s.filter((function(t){return-1!==i.indexOf(t.name)&&("label"===t.name&&(t.onClick=function(){e.subEngine.command.execute("label")}),t.name="table:"+t.name,!0)})),[{name:"table:card",type:"collapse",title:o.insertCard,icon:'<span class="lake-svg-icon lake-svg-icon-insert" />',size:kd.ICON,getDisabled:function(){return!e.subEngine},data:[{items:s}],onClick:function(t){e.subEngine&&e.subEngine.command.execute(t)}},{type:"separator"},{name:"table:save",title:o.save,hotkey:a.ua.macos?"⌘+S":"Ctrl+S",icon:'<span class="lake-icon lake-icon-save" />',size:kd.ICON,onClick:function(){t.command.execute("save")}},{name:"table:undo",title:o.undo,hotkey:a.ua.macos?"⌘+Z":"Ctrl+Z",icon:'<span class="lake-icon lake-icon-undo" />',size:kd.ICON,getDisabled:function(){return!(e.subEngine&&e.subEngine.command.queryState("undo")||(e.fullscreen?0!==e.history.index:t.command.queryState("undo")))},onClick:function(){e.undo()}},{name:"table:redo",title:o.redo,hotkey:a.ua.macos?"⌘+Shift+Z":"Ctrl+Shift+Z",icon:'<span class="lake-icon lake-icon-redo" />',size:kd.ICON,getDisabled:function(){return(!e.subEngine||!e.subEngine.command.queryState("redo"))&&(e.fullscreen?e.history.isEnd():!t.command.queryState("redo"))},onClick:function(){e.redo()}},{name:"table:removeformat",title:o.removeformat,icon:'<span class="lake-icon lake-icon-clean" />',size:kd.ICON,onClick:function(){r.clearFormat(),r.execute("removeformat")}},{type:"separator"},{name:"table:fontsize",type:"dropdown",title:o.fontsizeTitle,className:"lake-button-fontsize",data:c,size:kd.FONTSIZE,getActive:function(){return e.command.queryState("fontsize")||Dp(t)},getDisabled:function(){return!e.selection.area},getCurrentText:function(e){return l[e]||l[Dp(t)]},onClick:function(t){e.command.execute("fontsize",t)}},{name:"table:bold",title:o.bold,hotkey:a.ua.macos?"⌘+B":"Ctrl+B",icon:'<span class="lake-icon lake-icon-bold" />',size:kd.ICON,getDisabled:function(){return!e.selection.area},getActive:function(){return e.command.queryState("bold")},onClick:function(){e.command.execute("bold")}},{name:"table:italic",title:o.italic,hotkey:a.ua.macos?"⌘+I":"Ctrl+I",icon:'<span class="lake-icon lake-icon-italic" />',size:kd.ICON,getDisabled:function(){return!e.selection.area},getActive:function(){return e.command.queryState("italic")},onClick:function(){e.command.execute("italic")}},{name:"table:strikethrough",title:o.strikethrough,key:a.ua.macos?"⌘+Shift+X":"Ctrl+Shift+X",icon:'<span class="lake-icon lake-icon-strikethrough" />',size:kd.ICON,getDisabled:function(){return!e.selection.area},getActive:function(){return e.command.queryState("strikethrough")},onClick:function(){e.command.execute("strikethrough")}},{name:"table:underline",title:o.underline,key:a.ua.macos?"⌘+U":"Ctrl+U",icon:'<span class="lake-icon lake-icon-underline" />',size:kd.ICON,getDisabled:function(){return!e.selection.area},getActive:function(){return e.command.queryState("underline")},onClick:function(){e.command.execute("underline")}},{type:"separator"},{name:"table:fontcolor",type:"color",title:o.fontcolor,moreTitle:o.fontcolor,defaultColor:"#000000",currentColor:"#F5222D",size:kd.SPLIT_BUTTON,getActive:function(){return e.command.queryState("fontcolor")||[]},onClick:function(t){e.subEngine&&e.subEngine.restoreRange(),e.command.execute("fontcolor",t,"#000000")}},{name:"table:highlight",type:"color",title:o.highlightColor,moreTitle:o.highlightColor,defaultColor:"#FFFFFF",currentColor:"#FADB14",size:kd.SPLIT_BUTTON,getActive:function(){return e.command.queryState("backcolor")||""},onClick:function(t){e.subEngine&&e.subEngine.restoreRange(),e.command.execute("backcolor",t,"#FFFFFF")}},{name:"table:backcolor",type:"color",title:o.backcolor,moreTitle:o.backcolor,defaultColor:"#FFFFFF",currentColor:"#f5f5f5",size:kd.SPLIT_BUTTON,onClick:function(t){e.subEngine&&e.subEngine.restoreRange(),"#FFFFFF"===t?r.background():r.background(t)}},{name:"hideBorder",title:o.hideBorder,icon:'<span class="lake-icon lake-icon-table-border" />',getDisabled:function(){return!n.area},getActive:function(){return e.command.queryState("border")},onClick:function(){r.toggleBorder()}},{type:"separator"},{name:"insertRowUp",title:o.insertRowUp,icon:'<span class="lake-icon lake-icon-table-insert-row-up" />',size:kd.ICON,getDisabled:function(){return!n.area},onClick:function(){e.removeEditor(),r.insertRowUp()}},{name:"insertRowDown",title:o.insertRowDown,icon:'<span class="lake-icon lake-icon-table-insert-row-down" />',size:kd.ICON,getDisabled:function(){return!n.area},onClick:function(){e.removeEditor(),r.insertRowDown()}},{name:"removeRow",title:o.removeRow,icon:'<span class="lake-icon lake-icon-table-remove-row" />',size:kd.ICON,getDisabled:function(){return!n.area},onClick:function(){e.removeEditor(),r.removeRow()}},{type:"separator"},{name:"insertColLeft",title:o.insertColLeft,icon:'<span class="lake-icon lake-icon-table-insert-col-left" />',size:kd.ICON,getDisabled:function(){return!n.area},onClick:function(){e.removeEditor(),r.insertColLeft()}},{name:"insertColRight",title:o.insertColRight,icon:'<span class="lake-icon lake-icon-table-insert-col-right" />',size:kd.ICON,getDisabled:function(){return!n.area},onClick:function(){e.removeEditor(),r.insertColRight()}},{name:"removeCol",title:o.removeCol,icon:'<span class="lake-icon lake-icon-table-remove-col" />',size:kd.ICON,getDisabled:function(){return!n.area},onClick:function(){e.removeEditor(),r.removeCol()}},{type:"separator"},{name:"mergecell",title:o.mergeCell,icon:'<span class="lake-icon lake-icon-table-merge-cell" />',size:kd.ICON,getDisabled:function(){return!n.area||n.isSingleArea()},onClick:function(){r.mergeCell()}},{name:"splitCell",title:o.splitCell,icon:'<span class="lake-icon lake-icon-table-split-cell" />',size:kd.ICON,getDisabled:function(){return!n.hasMergeCell()},onClick:function(){e.removeEditor(),r.splitCell()}},{type:"separator"},{name:"table:alignment",type:"dropdown",title:o.align,icon:'<span class="lake-icon lake-icon-left" />',size:kd.ICON,className:"lake-button-icon-list",data:[{key:"left",icon:'<span class="lake-icon lake-icon-left" />',title:o.alignLeft,className:"lake-button-set-list-item-icon"},{key:"center",icon:'<span class="lake-icon lake-icon-center" />',title:o.alignCenter,className:"lake-button-set-list-item-icon"},{key:"right",icon:'<span class="lake-icon lake-icon-right" />',title:o.alignRight,className:"lake-button-set-list-item-icon"},{key:"justify",icon:'<span class="lake-icon lake-icon-justify" />',title:o.alignJustify,className:"lake-button-set-list-item-icon"}],getActive:function(){},onClick:function(e){r.align(e)}},{name:"table:verticalAlignment",type:"dropdown",title:o.verticalAlign,icon:'<span class="lake-icon lake-icon-top" />',size:kd.ICON,className:"lake-button-icon-list",data:[{key:"top",icon:'<span class="lake-icon lake-icon-top" />',title:o.alignTop,className:"lake-button-set-list-item-icon"},{key:"middle",icon:'<span class="lake-icon lake-icon-middle" />',title:o.alignMiddle,className:"lake-button-set-list-item-icon"},{key:"bottom",icon:'<span class="lake-icon lake-icon-bottom" />',title:o.alignBottom,className:"lake-button-set-list-item-icon"}],getActive:function(){},onClick:function(e){r.valign(e)}},{type:"separator"},{name:"table:unorderedlist",title:o.unorderedList,hotkey:a.ua.macos?"⌘+Shift+8":"Ctrl+Shift+8",icon:'<span class="lake-icon lake-icon-uList" />',size:kd.ICON,getDisabled:function(){return!e.subEngine},getActive:function(){return e.subEngine&&"unorderedlist"===e.subEngine.command.queryState("tasklist")},onClick:function(){e.subEngine&&e.subEngine.command.execute("tasklist","unorderedlist")}},{name:"table:orderedlist",title:o.orderedList,hotkey:a.ua.macos?"⌘+Shift+7":"Ctrl+Shift+7",icon:'<span class="lake-icon lake-icon-oList" />',size:kd.ICON,getDisabled:function(){return!e.subEngine},getActive:function(){return e.subEngine&&"orderedlist"===e.subEngine.command.queryState("tasklist")},onClick:function(){e.subEngine&&e.subEngine.command.execute("tasklist","orderedlist")}},{name:"table:tasklist",title:o.taskList,icon:'<span class="lake-icon lake-icon-tList" />',size:kd.ICON,getDisabled:function(){return!e.subEngine},getActive:function(){return e.subEngine&&"tasklist"===e.subEngine.command.queryState("tasklist")},onClick:function(){e.subEngine&&e.subEngine.command.execute("tasklist","tasklist")}},{name:"lineheight",type:"dropdown",title:o.lineHeight,icon:'<span class="lake-icon lake-icon-line-height" />',size:kd.ICON,className:"lake-button-icon-list",data:[{key:"17",title:o.defaultText},{key:"1",title:"1"},{key:"115",title:"1.15"},{key:"15",title:"1.5"},{key:"2",title:"2"},{key:"25",title:"2.5"},{key:"3",title:"3"}],getDisabled:function(){return!t.command.queryState("lineheight")},getActive:function(){return t.command.queryState("lineheight")},onClick:function(e){t.command.execute("lineheight",e)}},{type:"separator"},{name:"table:link",title:o.link,className:"lake-button-link",hotkey:a.ua.macos?"⌘+K":"Ctrl+K",icon:'<span class="lake-icon lake-icon-link" />',size:kd.ICON,getDisabled:function(){return!e.subEngine},onClick:function(){e.subEngine&&e.subEngine.command.execute("link")}}]}(de()(s))),s.selection.refreshModel(),s.controllBar.refresh(),s.onTableSizeChange()})),g()(de()(s),"unactivate",(function(){s.active=!1,s.container.css("user-select","auto"),s.selection.clear(),s.controllBar.hide(),s.removeEditor(),s.engine.toolbar.restore()})),g()(de()(s),"embedToolbar",(function(){var e=s.mobile?[{type:"copy"},{type:"delete"}]:[{type:"dnd"},{type:"maximize"},{type:"separator"},{type:"copy"},{type:"copyCardLink",onClick:function(){return s.copyCardEmbedLink()}},{type:"separator"}].concat(x()(s.getMoreEmbedToolbarConfig()));return s.state.readonly&&(e=[{type:"maximize"},{type:"copyCardLink",onClick:function(){return s.copyCardEmbedLink()}}]),e})),g()(de()(s),"maximize",(function(){Bc()((i=de()(s),se()(n.prototype)),"maximize",i).call(i),s.scrollbar.refresh(),s.engine&&(s.fullscreen=!0,s.setCardValue(),s.controllBar.hideMultiAddition())})),g()(de()(s),"restore",(function(){Bc()((c=de()(s),se()(n.prototype)),"restore",c).call(c),s.scrollbar.refresh(),s.engine&&(s.fullscreen=!1,s.history.clear(),s.controllBar.hideMultiAddition())})),g()(de()(s),"handleTdChanged",(function(){if(s.changed=!0,s.subEngine){s.subEngine.td.html(Xe.transformCustomTags(s.subEngine.change.getValue({ignoreCursor:!0}))),s.subEngine.card.renderAll(s.subEngine.td,void 0,s.subEngine),s.command.changed(),s.delayToUpdateToolbar();var e=s.subEngine.td[0].offsetHeight;s.tdHeight&&e===s.tdHeight||(s.tdHeight=e,s.controllBar.render("heightchange"),s.selection.reRenderActiveBox(),s.onTableSizeChange()),s.lazySetCardValue()}})),g()(de()(s),"startEdit",(function(e){s.active&&kt(e.target).closest(s.template.TABLE_TEXTAREA_CLASS)[0]&&("input"!==e.type||!e.isComposing&&"insertCompositionText"!==e.inputType&&"deleteCompositionText"!==e.inputType&&"insertFromComposition"!==e.inputType)&&(s.subEngine||s.selection.td&&s.selection.single&&s.createEditor(kt(s.selection.td),"<p>".concat(e.data||e.target.value,"</p>")))})),g()(de()(s),"saveValue",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(s.changed=!0),s.setCardValue(!0)})),g()(de()(s),"lazySetCardValue",(function(){s.lazySetValueTimer&&clearTimeout(s.lazySetValueTimer),s.lazySetValueTimer=setTimeout((function(){s.setCardValue()}),500)})),g()(de()(s),"setCardValue",(function(e){var t=s.selection.getTableModel(),n=s.tableRoot[0].outerHTML;if(n!==s.lastSaveHtml&&s.changed){s.lastSaveHtml=n,n=new er(n,s.engine.schema,s.engine.conversion).toValue();var r={rows:t.rows,cols:t.cols,html:n,margin:!!(s.value||{}).margin,hideBorder:!!(s.value||{}).hideBorder};s.cardManage.setValue(s.cardRoot,r),s.changed=!1,e||s.fullscreen&&s.history.save(r)}})),g()(de()(s),"undo",(function(){s.subEngine?s.removeEditor(!0):s.fullscreen?s.history.undo():(s.focusCard(),s.engine.command.execute("undo"))})),g()(de()(s),"focusCard",(function(){s.engine.change.focusCard(s.cardRoot),s.engine.change.focus()})),g()(de()(s),"redo",(function(){s.subEngine?s.removeEditor(!0):s.fullscreen?s.history.redo():s.engine.command.execute("redo")})),g()(de()(s),"delayToUpdateToolbar",(function(){s.toolbarTimer&&clearTimeout(s.toolbarTimer),s.toolbarTimer=setTimeout((function(){s.engine.toolbar.updateState()}),100)})),g()(de()(s),"isEditing",(function(e){return s.subEngine&&e[0]===s.subEngine.td[0]})),g()(de()(s),"createEditor",(function(e,t){if(!s.isEditing(e)){Qt.log("create subEditor"),s.selection.showSubEditor();var n=zp(zp({},s.engine.options.image),{},{fixSize:!0,hideEmbedToolbar:!1});if(s.subEngine=Ei.create(s.selection.editAreaContent,{plugins:["bold","italic","fontcolor","fontsize","strikethrough","underline","backcolor","removeformat","code","file","label","list","link","image","tasklist","indent","emoji","markdown"],lang:s.engine.options.lang,image:n,onBeforeRenderImage:s.engine.options.onBeforeRenderImage,file:s.engine.options.file,parentEngine:s.engine,typography:s.engine.typography}),s.engine&&s.subEngine.on("userchanged",(function(){s.engine.change.change()})),s.subEngine.isRemoteImage=s.engine.isRemoteImage,s.subEngine.uploader=s.engine.uploader,s.subEngine.td=e,s.subEngine.locale=s.engine.locale,s.subEngine.schema.add(s.innerSchema),s.delayToUpdateToolbar(),s.subEngine.change.setValue(dp(e.html())),t){var r=dp(t);r=new er(r,s.subEngine.schema,s.subEngine.conversion).toValue(),s.subEngine.command.execute("selectall"),s.subEngine.change.setValue(r),s.handleTdChanged(),Qt.log("subEngine focus selectall")}setTimeout((function(){s.subEngine&&(s.subEngine.focusToEnd(),Qt.log("subEngine focus"))}),10),s.subEngine.on("change",s.handleTdChanged),s.subEngine.on("select",s.delayToUpdateToolbar),s.subEngine.on("paste:origin",fp),s.subEngine.on("keydown:tab",(function(){return!1}))}})),g()(de()(s),"removeEditor",(function(e){s.changed=!0,s.subEngine&&(s.handleTdChanged(),Qt.log("removeEditor"),s.subEngine.destroy(),s.subEngine=null,s.selection.hideSubEditor(),e||s.setCardValue(),s.lazySetValueTimer&&clearTimeout(s.lazySetValueTimer))})),g()(de()(s),"prevent",(function(e){kt(e.target).closest(".lake-table")[0]&&e.preventDefault()})),g()(de()(s),"unBindKeyEvents",(function(){document.removeEventListener("contextmenu",s.prevent)})),g()(de()(s),"bindKeyEvents",(function(){s.hotkey.add("backspace, del, delete",s.command.clear),s.hotkey.add("up",s.selection.selectUp),s.hotkey.add("down",s.selection.selectDown),s.hotkey.add("left",s.selection.selectLeft),s.hotkey.add("right",s.selection.selectRight),s.hotkey.add("tab, shift+tab",s.tab),s.hotkey.add("enter",s.selection.selectEnter),s.hotkey.add("esc",s.selection.cancelSelect),s.hotkey.add("command+a, ctrl+a",s.selection.selectTable),s.hotkey.add("command+z, ctrl+z",s.undo),s.hotkey.add("command+b, ctrl+b",(function(){s.subEngine||s.command.execute("bold")})),s.hotkey.add("command+i, ctrl+i",(function(){s.subEngine||s.command.execute("italic")})),s.hotkey.add("command+u, ctrl+u",(function(){s.subEngine||s.command.execute("underline")})),s.hotkey.add("command+shift+x, ctrl+shift+x",(function(){s.subEngine||s.command.execute("strikethrough")})),s.hotkey.add("command+y, command+shift+z, ctrl+y, ctrl+shift+z",s.redo),document.addEventListener("contextmenu",s.prevent)})),g()(de()(s),"tab",(function(e){s.subEngine&&s.subEngine.command.queryState("tasklist")||s.selection.selectTab(e)})),g()(de()(s),"bindEditEvents",(function(){s.inited||(s.controllBar.on("startChangeCellSize",s.selection.clear),s.controllBar.on("clickColsHeader",s.selection.selectCol),s.controllBar.on("clickRowsHeader",s.selection.selectRow),s.controllBar.on("clickTableHeader",s.selection.selectTable),s.controllBar.on("sizeChanged",(function(){s.changed=!0,s.setCardValue(),s.scrollbar.refresh()})),s.controllBar.on("heightchanging",(function(){s.changed=!0,s.onTableSizeChange()})),s.command.on("actioned",(function(e,t){s.changed=!0,"paste"!==e&&"fontstyle"!==e||Ei.card.renderAll(s.container,void 0,s.engine),s.removeEditor(),s.controllBar.render(e),s.selection.render(e),s.scrollbar.refresh(),t||s.setCardValue(),s.onTableSizeChange()})),s.command.on("tableRemoved",s.destroy),s.selection.on("select",(function(){s.delayToUpdateToolbar(),s.removeEditor(),s.controllBar.refresh("select")})),s.selection.on("cancelSelect",(function(){s.removeEditor(),s.controllBar.clearActiveStatus()})),s.selection.on("active",s.createEditor),Qt.log("bindEvent"),s.container.on("compositionend",s.startEdit),s.container.on("input",s.startEdit),s.container.on("select",s.prevent),s.bindKeyEvents(),s.bindEvent(s.engine.event,"save:before",(function(){return s.setCardValue()})),s.inited=!0)})),g()(de()(s),"reRender",(function(e){s.delayToUpdateToolbar(),e&&(s.container.html(""),s.render(s.container,e,!0),s.selection.refreshModel(),s.controllBar.refresh())})),s.engine=e,s.contentView=r;var u,d=e?e.options.lang:r.options.lang;return s.locale=Fp[d||"en"],s.constants={defaultRows:3,defaultCols:3,MENU:[{action:"cut",icon:"cut",text:(u=de()(s)).locale.cut},{action:"copy",icon:"copy",text:u.locale.copy},{action:"mockPaste",icon:"paste",text:u.locale.paste},{action:"clear",icon:"clear",text:u.locale.clear},{split:!0},{action:"insertColLeft",icon:"insert-col-left",text:u.locale.insertColLeft},{action:"insertColRight",icon:"insert-col-right",text:u.locale.insertColRight},{action:"insertRowUp",icon:"insert-row-up",text:u.locale.insertRowUp},{action:"insertRowDown",icon:"insert-row-down",text:u.locale.insertRowDown},{split:!0},{action:"mergeCell",icon:"merge-cell",text:u.locale.mergeCell},{action:"splitCell",icon:"split-cell",text:u.locale.splitCell},{split:!0},{action:"removeCol",icon:"remove-col",text:u.locale.removeCol},{action:"removeRow",icon:"remove-row",text:u.locale.removeRow},{split:!0},{action:"removeTable",icon:"remove-table",text:u.locale.removeTable}]},s.template=function(e){return{TABLE_WRAPPER_CLASS:".".concat("table-wrapper"),TABLE_CLASS:".".concat("lake-table"),COLS_HEADER_CLASS:".".concat("table-cols-header"),COLS_HEADER_ITEM_CLASS:".".concat("table-cols-header-item"),COLS_HEADER_TRIGGER_CLASS:".".concat("cols-trigger"),COLS_ADDITION_CLASS:".".concat("cols-addition"),COLS_ADDITION_HEADER_CLASS:".".concat("cols-addition-header"),ROWS_HEADER_CLASS:".".concat("table-rows-header"),ROWS_HEADER_ITEM_CLASS:".".concat("table-rows-header-item"),ROWS_HEADER_TRIGGER_CLASS:".".concat("rows-trigger"),ROWS_ADDITION_CLASS:".".concat("rows-addition"),ROWS_ADDITION_HEADER_CLASS:".".concat("rows-addition-header"),HEADER_CLASS:".".concat("table-header"),ACTIVE_TD_CLASS:".".concat("table-active-td"),ACTIVE_TD_TRIGGER_CLASS:".".concat("table-active-td-trigger"),AREA_MASK:".".concat("mask"),ROW_MASK:".".concat("mask-row"),COL_MASK:".".concat("mask-col"),SUB_EDITOR_CLASS:".".concat("sub-editor"),SUB_EDITOR_CONTENT_CLASS:".".concat("sub-editor-content"),MENUBAR_CLASS:".".concat("table-menubar"),MENUBAR_ITEM_CLASS:".".concat("table-menubar-item"),TABLE_TEXTAREA_CLASS:".".concat("table-textarea"),VIEWPORT:".".concat("table-viewport"),VIEWPORT_READER:".".concat("lake-table-reader"),PLACEHOLDER_CLASS:".".concat("table-placeholder"),MULTI_ADDITION_CLASS:".".concat("multi-addition"),SHADOW_LEFT_CLASS:".".concat("table-shadow-left"),SHADOW_RIGHT_CLASS:".".concat("table-shadow-right"),SPLIT_LINE_CLASS:".".concat("split"),COL_HEADER_BTNS:".".concat("table-col-header-btns"),ROW_HEADER_BTNS:".".concat("table-row-header-btns"),HEADER_DELETE_BTN:".".concat("table-header-delete-btn"),HEADER_ADD_BTN:".".concat(Sp),INDICATOR_CLASS:".".concat("table-indicator"),EmptyCell:"<p><br /></p>",SubEditor:'<div class="'.concat("sub-editor",'"><div class="').concat("sub-editor-content",'"></div></div>'),htmlEdit:function(t){var n=t.rows,r=t.cols,a=t.html,o="<td><p><br /></p></td>".repeat(r),i="<tr>".concat(o,"</tr>").repeat(n),c="<col />".repeat(r),l="<colgroup>".concat(c,"</colgroup>"),s='\n        <div class="'.concat("table-cols-header",'">\n          ').concat('<div class="'.concat("table-cols-header-item",'" draggable="true">\n            <div class="').concat("table-col-header-btns",'">\n              <a class="table-control-icon-btn ').concat("table-header-delete-btn",'">\n                <span class="lake-icon lake-icon-delete"></span>\n              </a>\n              <a class="table-control-icon-btn ').concat(Sp,'">\n                  <span class="lake-icon lake-icon-plus"></span>\n              </a>\n            </div>\n            <div class="col-dragger">\n              <span class="lake-icon lake-icon-drag"></span>\n              <p class="drag-info"></p>\n            </div>\n            <div class="').concat("cols-trigger",'"></div>\n            </div>').repeat(r),"\n        </div>\n      "),u='\n        <div class="'.concat("table-rows-header",'">\n          ').concat('<div class="'.concat("table-rows-header-item",'" draggable="true">\n            <div class="').concat("table-row-header-btns",'">\n              <a class="table-control-icon-btn ').concat("table-header-delete-btn",'">\n                <span class="lake-icon lake-icon-delete"></span>\n              </a>\n              <a class="table-control-icon-btn ').concat(Sp,'">\n                  <span class="lake-icon lake-icon-plus"></span>\n              </a>\n            </div>\n            <div class="row-dragger">\n              <span class="lake-icon lake-icon-drag"></span>\n              <span class="drag-info"></span>\n            </div>\n            <div class="').concat("rows-trigger",'"></div>\n            </div>').repeat(n),"\n        </div>\n      "),d='<div class="'.concat("table-header",'"></div>'),f='<textarea class="'.concat("table-textarea",'"></textarea>'),p='<div class="'.concat("table-active-td",'">\n        ').concat(f,'\n        <div class="').concat("mask-col",'"></div>\n        <div class="').concat("mask-row",'"></div>\n        <div class="l"></div>\n        <div class="r"></div>\n        <div class="t"></div>\n        <div class="b"></div>\n        <div class="').concat("mask",'"></div>\n        <div class="nw ').concat("table-active-td-trigger",'" direction="drag_nw"></div>\n        <div class="se ').concat("table-active-td-trigger",'" direction="drag_se"></div>\n        <div class="n ').concat("table-active-td-trigger",'" direction="drag_n"></div>\n        <div class="w ').concat("table-active-td-trigger",'" direction="drag_w"></div>\n        <div class="s ').concat("table-active-td-trigger",'" direction="drag_s"></div>\n        <div class="e ').concat("table-active-td-trigger",'" direction="drag_e"></div>\n        ').concat(this.SubEditor,"\n      </div>"),h='<div class="'.concat("table-indicator",'"></div>'),m='<div class="'.concat("table-placeholder",'"></div>'),g='<div class="'.concat("table-shadow-left",'"></div>'),v='<div class="'.concat("table-shadow-right",'"></div>'),y=e.constants.MENU.map((function(e){return e.split?'<div class="'.concat("split",'"></div>'):'<div class="'.concat("table-menubar-item",'" data-action="').concat(e.action,'">\n          <span class="lake-icon lake-icon-table-').concat(e.icon,'"></span>\n          ').concat(e.text,"\n        </div>")}));y='<div class="'.concat("table-menubar",'">').concat(y.join(""),"</div>"),a&&(a.includes("<colgroup>")||(Qt.log("before",a),a=a.replace(/^(<table[^>]+>)/,(function(e){return e+l})),Qt.log("after",a)),a=op(kt(a)[0]).outerHTML);var b=a||'\n        <table class="'.concat("lake-table",'">\n          ').concat(l,"\n          ").concat(i,"\n        </table>");return'\n        <div class="'.concat("table-wrapper",'">\n          ').concat(d,'\n          <div class="').concat("table-viewport",'">\n            ').concat(s,'\n            <div class="').concat("lake-table-inner",'">\n              ').concat(p,"\n              ").concat(b,"\n            </div>\n            ").concat(m,"\n            ").concat(h,"\n            ").concat(g,"\n            ").concat(v,"\n          </div>\n          ").concat(u,"\n          ").concat(y,"\n        </div>")},htmlView:function(e){var t=e.html;return'<div class="'.concat("lake-table-reader",'">\n        ').concat(t,"\n      </div>")}}}(de()(s)),e?(s.change=e.change,s.cardManage=e.card,s.controllBar=new Rp(de()(s)),s.selection=new Tp(de()(s)),s.command=new Ap(de()(s)),s.hotkey=new Lp(de()(s)),s.innerSchema=function(e){return e.filter((function(e){var t=!0;return Hl()(e)?(e.table||e.tr||e.td||e.th||e.tbody||e.col||e.thead||e.h1||e.h2||e.h3||e.h4||e.h5||e.h6)&&(t=!1):"table"!==e&&"tr"!==e&&"td"!==e&&"th"!==e&&"col"!==e&&"colgroup"!==e&&"tbody"!==e&&"thead"!==e||(t=!1),t}))}(Fl.a),s.history=new Mp(de()(s)),s.mobile="mobile"===s.engine.options.type,s.changed=!1,s):ce()(s)}return u()(n,[{key:"select",value:function(){if(this.state.readonly)Bc()(se()(n.prototype),"select",this).call(this);else{var e=this.container;e[0].childNodes.length>0&&e.addClass("lake-table-selected")}}},{key:"unselect",value:function(){if(this.state.readonly)Bc()(se()(n.prototype),"unselect",this).call(this);else{var e=this.container;e[0].childNodes.length>0&&e.removeClass("lake-table-selected")}}},{key:"selectByOther",value:function(e){var t=this.container;t[0].childNodes.length>0&&t.css("outline","2px solid "+e)}},{key:"unselectByOther",value:function(){var e=this.container;e[0].childNodes.length>0&&e.css("outline","")}},{key:"getTableHeight",value:function(){return vs(this.tableRoot[0])}},{key:"onTableSizeChange",value:function(){this.container.css({"min-height":this.getTableHeight()+"px"})}},{key:"render",value:function(){this.doRender.apply(this,arguments)}},{key:"doRender",value:function(e,t,n){var r=this.engine;if(this.toggleMargin(),e.on("dragstart",(function(e){e.stopPropagation(),e.preventDefault()})),t.html&&(r||(this.contentView.schema.add(Ip),t.html=new er(t.html,this.contentView.schema,this.contentView.conversion).toValue()),t.html=Xe.transformCustomTags(t.html)),!r){var a=this.template.htmlView(t);return e.append(a),Ei.card.renderAll(e,void 0,this.contentView),this.viewport=e.find(this.template.VIEWPORT_READER),this.scrollbar=new ss(this.viewport,!0,!1,!0),void(0===this.contentView.docVerstion&&this.container.css({"margin-top":"24px","margin-bottom":"24px"}))}var o=this.template.htmlEdit(t);e.append(o),Ei.card.renderAll(e,void 0,r),this.tableRoot=e.find(this.template.TABLE_CLASS),this.viewport=e.find(this.template.VIEWPORT),this.selection.init(),this.controllBar.init(),this.scrollbar=new ss(this.viewport,!0,!1,!0),this.bindEditEvents(),t.html&&!n||(this.changed=!0,this.setCardValue(n))}}]),n}();g()(Up,"type","block"),g()(Up,"uid",!0),g()(Up,"canSearch",!0);var Vp=Xe.escape,qp=function(e,t){var n='\n      <div class="lake-video-icon">\n        <svg width="32px" height="24px" viewBox="0 0 32 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0.25">\n            <g transform="translate(-704.000000, -550.000000)" fill="#000000" fill-rule="nonzero">\n              <g transform="translate(704.000000, 550.000000)">\n                <g>\n                  <path d="M13.09375,17.30625 L20.65625,12.375 C20.95,12.16875 20.95,11.809375 20.65625,11.603125 L13.09375,6.696875 C12.66875,6.4 12,6.6375 12,7.084375 L12,16.921875 C12,17.365625 12.671875,17.603125 13.09375,17.30625 Z" id="Path"></path>\n                  <path d="M30,0 L2,0 C0.896875,0 0,0.896875 0,2 L0,22 C0,23.103125 0.896875,24 2,24 L30,24 C31.103125,24 32,23.103125 32,22 L32,2 C32,0.896875 31.103125,0 30,0 Z M5.25,21.25 C5.25,21.525 5.025,21.75 4.75,21.75 L2.5,21.75 C2.225,21.75 2,21.525 2,21.25 L2,18.5 C2,18.225 2.225,18 2.5,18 L4.75,18 C5.025,18 5.25,18.225 5.25,18.5 L5.25,21.25 Z M5.25,13.375 C5.25,13.65 5.025,13.875 4.75,13.875 L2.5,13.875 C2.225,13.875 2,13.65 2,13.375 L2,10.625 C2,10.35 2.225,10.125 2.5,10.125 L4.75,10.125 C5.025,10.125 5.25,10.35 5.25,10.625 L5.25,13.375 Z M5.25,5.5 C5.25,5.775 5.025,6 4.75,6 L2.5,6 C2.225,6 2,5.775 2,5.5 L2,2.75 C2,2.475 2.225,2.25 2.5,2.25 L4.75,2.25 C5.025,2.25 5.25,2.475 5.25,2.75 L5.25,5.5 Z M24.75,21.75 L7.25,21.75 L7.25,2.25 L24.75,2.25 L24.75,21.75 Z M30,21.25 C30,21.525 29.775,21.75 29.5,21.75 L27.25,21.75 C26.975,21.75 26.75,21.525 26.75,21.25 L26.75,18.5 C26.75,18.225 26.975,18 27.25,18 L29.5,18 C29.775,18 30,18.225 30,18.5 L30,21.25 Z M30,13.375 C30,13.65 29.775,13.875 29.5,13.875 L27.25,13.875 C26.975,13.875 26.75,13.65 26.75,13.375 L26.75,10.625 C26.75,10.35 26.975,10.125 27.25,10.125 L29.5,10.125 C29.775,10.125 30,10.35 30,10.625 L30,13.375 Z M30,5.5 C30,5.775 29.775,6 29.5,6 L27.25,6 C26.975,6 26.75,5.775 26.75,5.5 L26.75,2.75 C26.75,2.475 26.975,2.25 27.25,2.25 L29.5,2.25 C29.775,2.25 30,2.475 30,2.75 L30,5.5 Z" id="Shape"></path>\n                </g>\n              </g>\n            </g>\n          </g>\n        </svg>\n      </div>\n    ',r='\n      <i class="lake-video-anticon">\n        <svg viewBox="0 0 1024 1024" class="lake-video-anticon-spin" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true">\n          <path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path>\n        </svg>\n      </i>\n    ';if("pending"===e.status)return'\n      <div class="lake-video">\n        <div class="lake-video-content lake-video-uploading">\n          <div class="lake-video-center">\n            '.concat(n,'\n            <div class="lake-video-name">').concat(Vp(e.name)," (").concat(Xl()(e.size),')</div>\n            <div data-role="progress" class="lake-video-progress">\n              ').concat(r,'\n              <span data-role="percent" class="percent">').concat(Vp(t.pending),"</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    ");if("uploading"===e.status)return'\n      <div class="lake-video">\n        <div class="lake-video-content lake-video-uploading">\n          <div class="lake-video-center">\n            '.concat(n,'\n            <div class="lake-video-name">').concat(Vp(e.name)," (").concat(Xl()(e.size),')</div>\n            <div data-role="progress" class="lake-video-progress">\n              ').concat(r,'\n              <span data-role="percent" class="percent">').concat(Vp(e.percent),"%</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    ");if("uploaded"===e.status||"done"===e.status)return'\n      <div class="lake-video">\n        <div class="lake-video-content">\n          <div class="lake-video-center">\n            '.concat(n,'\n            <div class="lake-video-name">').concat(Vp(e.name)," ").concat(e.size?"("+Xl()(e.size)+")":"",'</div>\n            <div class="lake-video-converting">\n              ').concat(r,"\n              <span>").concat(Vp("done"===e.status?t.fetching:t.transcoding),"</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    ");if("error"===e.status){var a="";if("reject"===e.code)a=t.rejectError;else a=t.commonError;var o="reject"===e.code;return'\n      <div class="lake-video">\n        <div class="lake-video-content lake-video-error">\n          <div class="lake-video-center">\n            '.concat(o?'\n      <div class="lake-video-icon">\n        <svg width="41px" height="29px" viewBox="0 0 41 29" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n            <g transform="translate(-704.000000, -550.000000)">\n              <g id="Group-2" transform="translate(704.000000, 550.000000)">\n                <g id="video" fill="#000000" fill-rule="nonzero" opacity="0.449999988">\n                  <path d="M13.09375,17.30625 C12.671875,17.603125 12,17.365625 12,16.921875 L12,7.084375 C12,6.6375 12.66875,6.4 13.09375,6.696875 L20.65625,11.603125 C20.95,11.809375 20.95,12.16875 20.65625,12.375 L13.09375,17.30625 Z M30,0 C31.103125,0 32,0.896875 32,2 L32,22 C32,23.103125 31.103125,24 30,24 L2,24 C0.896875,24 0,23.103125 0,22 L0,2 C0,0.896875 0.896875,0 2,0 L30,0 Z M5.25,21.25 L5.25,18.5 C5.25,18.225 5.025,18 4.75,18 L2.5,18 C2.225,18 2,18.225 2,18.5 L2,21.25 C2,21.525 2.225,21.75 2.5,21.75 L4.75,21.75 C5.025,21.75 5.25,21.525 5.25,21.25 Z M5.25,13.375 L5.25,10.625 C5.25,10.35 5.025,10.125 4.75,10.125 L2.5,10.125 C2.225,10.125 2,10.35 2,10.625 L2,13.375 C2,13.65 2.225,13.875 2.5,13.875 L4.75,13.875 C5.025,13.875 5.25,13.65 5.25,13.375 Z M5.25,5.5 L5.25,2.75 C5.25,2.475 5.025,2.25 4.75,2.25 L2.5,2.25 C2.225,2.25 2,2.475 2,2.75 L2,5.5 C2,5.775 2.225,6 2.5,6 L4.75,6 C5.025,6 5.25,5.775 5.25,5.5 Z M24.75,21.75 L24.75,2.25 L7.25,2.25 L7.25,21.75 L24.75,21.75 Z M30,21.25 L30,18.5 C30,18.225 29.775,18 29.5,18 L27.25,18 C26.975,18 26.75,18.225 26.75,18.5 L26.75,21.25 C26.75,21.525 26.975,21.75 27.25,21.75 L29.5,21.75 C29.775,21.75 30,21.525 30,21.25 Z M30,13.375 L30,10.625 C30,10.35 29.775,10.125 29.5,10.125 L27.25,10.125 C26.975,10.125 26.75,10.35 26.75,10.625 L26.75,13.375 C26.75,13.65 26.975,13.875 27.25,13.875 L29.5,13.875 C29.775,13.875 30,13.65 30,13.375 Z M30,5.5 L30,2.75 C30,2.475 29.775,2.25 29.5,2.25 L27.25,2.25 C26.975,2.25 26.75,2.475 26.75,2.75 L26.75,5.5 C26.75,5.775 26.975,6 27.25,6 L29.5,6 C29.775,6 30,5.775 30,5.5 Z" id="Combined-Shape"></path>\n                </g>\n                <g id="error-fill" transform="translate(21.000000, 10.000000)">\n                  <rect id="Rectangle" fill="#000000" opacity="0" x="0" y="0" width="20" height="20"></rect>\n                  <path d="M19.0267927,16.510301 L19.0272631,16.5111171 C19.4269215,17.2064579 18.9263267,18.0729167 18.125,18.0729167 L1.875,18.0729167 C1.07367326,18.0729167 0.573078461,17.2064579 0.973207261,16.510301 L9.0970084,2.44988987 C9.28650026,2.11750251 9.63068515,1.92708333 10,1.92708333 C10.368224,1.92708333 10.7098796,2.11659543 10.9017927,2.447801 L19.0267927,16.510301 Z" id="Path" stroke="#FFFFFF" stroke-width="0.833333333" fill="#FFFFFF"></path>\n                  <path d="M18.6660156,16.71875 L10.5410156,2.65625 C10.4199219,2.44726562 10.2109375,2.34375 10,2.34375 C9.7890625,2.34375 9.578125,2.44726562 9.45898438,2.65625 L1.33398438,16.71875 C1.09375,17.1367188 1.39453125,17.65625 1.875,17.65625 L18.125,17.65625 C18.6054688,17.65625 18.90625,17.1367188 18.6660156,16.71875 Z M9.375,8.125 C9.375,8.0390625 9.4453125,7.96875 9.53125,7.96875 L10.46875,7.96875 C10.5546875,7.96875 10.625,8.0390625 10.625,8.125 L10.625,11.71875 C10.625,11.8046875 10.5546875,11.875 10.46875,11.875 L9.53125,11.875 C9.4453125,11.875 9.375,11.8046875 9.375,11.71875 L9.375,8.125 Z M10,15 C9.48242188,15 9.0625,14.5800781 9.0625,14.0625 C9.0625,13.5449219 9.48242188,13.125 10,13.125 C10.5175781,13.125 10.9375,13.5449219 10.9375,14.0625 C10.9375,14.5800781 10.5175781,15 10,15 Z" id="Shape" fill="#FAAD14" fill-rule="nonzero"></path>\n                </g>\n              </g>\n            </g>\n          </g>\n        </svg>\n      </div>\n    ':"",'\n            <div class="lake-video-name">').concat(Vp(e.name||""),'</div>\n            <div class="lake-video-message">').concat(o?"":'<span class="lake-error-icon">X</span>').concat(Vp(e.message||a),"</div>\n          </div>\n        </div>\n      </div>\n    ")}return'\n    <div class="lake-video">\n      <div class="lake-video-content lake-video-done"></div>\n    </div>\n  '};var Hp=y()("editor:card:video"),Wp=Xe.sanitizeUrl,Yp=["vod.yuque.com","intranetproxy.alipay.com","cdn.nlark.com","lark.alipay.com"],Gp=function(e){oe()(n,Ds);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var a;return l()(this,n),a=t.call(this),g()(de()(a),"focusCard",(function(){a.engine.change.focusCard(a.cardRoot)})),g()(de()(a),"startChecker",(function(e,t){var n=de()(a);Hp("初始化状态轮询: %j",a.value),function r(){n.queryStates((function(){e()}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"reject"===e.code?t(e):setTimeout(r,3e3)}))}()})),g()(de()(a),"hasOldCoverUrl",(function(){return a.value.coverUrl&&a.value.coverUrl.includes("?auth_key=")})),g()(de()(a),"handleOldCoverageUrl",(function(){a.hasOldCoverUrl()&&(a.value.coverUrl=null)})),g()(de()(a),"getDocUrl",(function(){var e=window.appData,t=K()(e,"group.login"),n=K()(e,"book.slug"),r=K()(e,"doc.slug");if(t&&n&&r)return"".concat(location.protocol,"//").concat(location.host,"/").concat(t,"/").concat(n,"/").concat(r)})),g()(de()(a),"updatePlayerState",(function(e){a.value.aliyunVideoSrc=e.aliyunVideoSrc||null,a.value.taobaoVideoId=e.taobaoVideoId||null,a.value.uploaderId=e.userId||null,e.taobaoVideoId&&e.userId&&a.getTopEngine().setGlobalData("video.autoKey."+e.taobaoVideoId,e.auth_key),a.value.docUrl=a.getDocUrl(),a.setValue(a.value)})),g()(de()(a),"queryStates",(function(e,t){a.num=a.num||0,a.num++;var n=function(t){var n=K()(t,"PlayInfoList.PlayInfo");a.updatePlayerState({aliyunVideoSrc:n[n.length-1].PlayURL}),e()},o=function(t){a.updatePlayerState(t),e()},i=function(e,t){var n=K()(e,"snapShotRes.MediaSnapshot");if(n&&n.Total){var r=Math.floor(n.Total/2),o=K()(n,"Snapshots.Snapshot");if(a.value.coverUrl=K()(n,o?"Snapshots.Snapshot[".concat(r,"].Url"):"Snapshots[".concat(r,"].Url")),a.isContentView)return t();a.engine.asyncEvent.emitAsync("video:coverurl",{url:a.value.coverUrl}).then((function(e){e&&e[0]&&(a.value.coverUrl=e[0],a.setValue(a.value)),t()}))}else t()};Object(r.ajax)({method:"get",url:K()(a.engine||a.contentView,"options.video.queryAction")||"/api/video/query",dataType:"json",data:{video_id:a.value.videoId},success:function(e){var r=e.data;Hp("第 %d 次查询结果: %j",a.num,a.value),r.RequestId?"Forbidden.IllegalStatus"===r.Code?t():(a.handleOldCoverageUrl(),a.value.coverUrl?n(r):i(r,(function(){return n(r)}))):6===r.state?(a.handleOldCoverageUrl(),a.value.coverUrl?o(r):i(r,(function(){return o(r)}))):5===r.state?t({code:"reject"}):t()},error:function(e){t({code:"server-query"}),Hp("状态轮询异常: %O",e)},processData:!0})})),g()(de()(a),"initPlayer",(function(e){if(a.value.uploaderId&&a.value.taobaoVideoId){e="https://cloud.video.taobao.com/play/u/".concat(a.value.uploaderId,"/p/1/e/6/t/1/").concat(a.value.taobaoVideoId,".mp4");var t=a.getTopEngine().getGlobalData("video.autoKey."+a.value.taobaoVideoId);t&&(e+="?auth_key=".concat(t)),Hp("鉴权auth_key: %s",t)}a.value.aliyunVideoSrc&&(e=a.value.aliyunVideoSrc),Hp("初始化播放器: %s",e),a.src=Wp(e),a.createPlayer(a.src,a.value.coverUrl)})),a.engine=e,a.isContentView=!e,a.isContentView?ce()(a):(a.card=e.card,a)}return u()(n,[{key:"embedToolbar",value:function(){var e=this,t=[];return this.state.readonly&&this.value.download?t=[{type:"download",onClick:this.downloadFile.bind(this)}]:this.state.readonly||"done"!==this.value.status||(t=[{type:"download",onClick:this.downloadFile.bind(this)},{type:"separator"}]),t.concat([{type:"dnd"},{type:"copy"},{type:"preferences",onClick:function(){e.setSidebar(),e.openPreferences=!0}},{type:"separator"}].concat(x()(this.getMoreEmbedToolbarConfig())))}},{key:"setSidebar",value:function(){var e=this.value,t=this.locale;this.engine.sidebar.set({name:"video",title:t.preferences,className:"lake-video-sidebar",data:e})}},{key:"downloadFile",value:function(){this.src&&(this.engine&&this.engine.options&&this.engine.options.downloadVideoHandler?this.engine.options.downloadVideoHandler(this.src):window.open(this.src))}},{key:"activate",value:function(){this.container.find(".lake-video-content").addClass("lake-video-content-active")}},{key:"restoreSideBar",value:function(){this.engine&&this.openPreferences&&(this.engine.sidebar.restore("video"),this.openPreferences=!1)}},{key:"unactivate",value:function(){this.container.find(".lake-video-content").removeClass("lake-video-content-active"),this.restoreSideBar()}},{key:"isEqualValue",value:function(e,t){return e.coverUrl===t.coverUrl&&e.docUrl===t.docUrl&&e.name===t.name&&e.percent===t.percent&&e.size===t.size&&e.status===t.status&&e.taobaoVideoId===t.taobaoVideoId&&e.uploaderId===t.uploaderId&&e.videoId===t.videoId}},{key:"createPlayer",value:function(e,t){var n=this,r=window.lozad_observer,a=document.createElement("video");a.preload="none",a.setAttribute(r?"data-src":"src",e),a.setAttribute("webkit-playsinline","webkit-playsinline"),a.setAttribute("playsinline","playsinline"),this.value&&this.value.width&&(a.style.width=this.value.width+"px",a.style.maxWidth="100%"),this.value&&this.value.height&&(a.style.height=this.value.height+"px"),a.className="lozad",t&&(a.poster=t);var o=this.container.find(".lake-video-content");o.addClass("lake-video-done"),o.empty(),o.append(a),r&&r.observe(),a.oncontextmenu=function(){return!1},setTimeout((function(){a.controls=!0,n.isContentView&&(a.controlsList="nodownload")}),0)}},{key:"isInWhiteList",value:function(e){var t=e.aliyunVideoSrc||e.src;if(t)try{var n=new URL(t).hostname;if(n)return Yp.includes(n)}catch(e){}return!0}},{key:"render",value:function(e,t){var n=this;this.container=e,this.value=t||{},e.empty();var r=kt(qp(this.value,this.locale));if(this.value.src){if(!this.isInWhiteList(this.value))return;return e.append(r),void this.initPlayer(this.value.src)}if(this.isContentView){if(Hp("阅读模式渲染: %j",this.value),!this.isInWhiteList(this.value))return;if("error"===this.value.status)return;"done"===this.value.status?this.queryStates((function(){e.append(r),n.initPlayer()}),(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.value.status="error",n.value.code=t.code,r=kt(qp(n.value,n.locale)),e.append(r)})):"error"===this.value.status&&e.append(r)}else Hp("编辑模式渲染: %j",this.value),"uploaded"===this.value.status?(e.append(r),this.startChecker((function(){n.value.status="done",n.setValue(n.value),n.render(n.container,n.value)}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.value.status="error",n.value.code=e.code,n.setValue(n.value),n.render(n.container,n.value)}))):"done"===this.value.status?this.queryStates((function(){e.append(r),n.initPlayer()}),(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.value.status="error",n.value.code=t.code,r=kt(qp(n.value,n.locale)),e.append(r)})):e.append(r)}},{key:"_renderError",value:function(e){var t=this.container,n=this.locale,r=kt(qp(e,n));t.empty(),t.append(r)}},{key:"destroy",value:function(){Bc()(se()(n.prototype),"destroy",this).call(this),this.restoreSideBar()}}]),n}();g()(Gp,"type","block"),g()(Gp,"uid",!0),ls(".lake-video-resizer {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 2;\n}\n.lake-video-resizer.show .lt,\n.lake-video-resizer.show .rt,\n.lake-video-resizer.show .rb,\n.lake-video-resizer.show .lb {\n  display: block;\n}\n.lake-video-resizer .lt,\n.lake-video-resizer .rt,\n.lake-video-resizer .rb,\n.lake-video-resizer .lb {\n  display: none;\n  position: absolute;\n  width: 8px;\n  height: 8px;\n  background: #1890FF;\n  border: 0 solid #fff;\n}\n.lake-video-resizer .lt {\n  top: 0;\n  left: 0;\n  border-width: 0 2px 2px 0;\n  cursor: nwse-resize;\n}\n.lake-video-resizer .rt {\n  top: 0;\n  right: 0;\n  border-width: 0 0 2px 2px;\n  cursor: nesw-resize;\n}\n.lake-video-resizer .lb {\n  bottom: 0;\n  left: 0;\n  border-width: 2px 2px 0 0;\n  cursor: nesw-resize;\n}\n.lake-video-resizer .rb {\n  bottom: 0;\n  right: 0;\n  border-width: 2px 0 0 2px;\n  cursor: nwse-resize;\n}\n.lake-video-resizer .resize-rect {\n  display: none;\n  position: absolute;\n  border: 1px dashed #000;\n  z-index: 2;\n}\n");var Xp=function(){function e(){l()(this,e)}return u()(e,null,[{key:"delegate",value:function(e,t,n,r){var a=!1,o=function(n){var o=n.clientX,i=n.clientY,c=e[0].getBoundingClientRect(),l=t[0].getBoundingClientRect();a=!0;var s=$()((function(e){a&&r(!0,c,l,e.clientX-o,e.clientY-i)}),32),u=function(e){s(e)};kt(document).on("mousemove",u,!1),kt(document).on("mouseup",(function e(t){kt(document).off("mousemove",u,!1),kt(document).off("mouseup",e,!1),a?(a=!1,r(!1,c,l,t.clientX-o,t.clientY-i)):a=!1}),!1)};return n.on("mousedown",o,!1),function(){n.off("mousedown",o,!1)}}}]),e}();function Kp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kp(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $p=function(e){oe()(n,Lc.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e,r){var a;return l()(this,n),a=t.call(this),g()(de()(a),"_$boundaryNode",null),g()(de()(a),"_$container",null),g()(de()(a),"_$resizePanel",null),g()(de()(a),"_handlers",[]),g()(de()(a),"_lt",null),g()(de()(a),"_rt",null),g()(de()(a),"_lb",null),g()(de()(a),"_rb",null),a._$boundaryNode=e,a._$container=r,r.append('<div class="lake-video-resizer"><div class="lt"></div><div class="rt"></div><div class="rb"></div><div class="lb"></div><div class="resize-rect"></div></div>'),a._$resizePanel=r.find(".lake-video-resizer"),a._lt=a._$resizePanel.find(".lt"),a._rt=a._$resizePanel.find(".rt"),a._lb=a._$resizePanel.find(".lb"),a._rb=a._$resizePanel.find(".rb"),a._resizeRect=a._$resizePanel.find(".resize-rect"),a._bindEvent(),a}return u()(n,[{key:"_bindEvent",value:function(){var e=this;this._handlers.push(Xp.delegate(this._$boundaryNode,this._$container,this._lt,(function(t,n,r,a,o){a<0&&(a=0);var i=Math.max(Math.min(n.width,r.width-a),300),c=Math.max(Math.min(450,r.height-o),150);e._onChange(t,i,c,"lt")}))),this._handlers.push(Xp.delegate(this._$boundaryNode,this._$container,this._rt,(function(t,n,r,a,o){var i=Math.max(Math.min(n.width,r.width+a),300),c=Math.max(Math.min(450,r.height-o),150);e._onChange(t,i,c,"rt")}))),this._handlers.push(Xp.delegate(this._$boundaryNode,this._$container,this._lb,(function(t,n,r,a,o){a<0&&(a=0);var i=Math.max(Math.min(n.width,r.width-a),300),c=Math.max(Math.min(450,r.height+o),150);e._onChange(t,i,c,"lb")}))),this._handlers.push(Xp.delegate(this._$boundaryNode,this._$container,this._rb,(function(t,n,r,a,o){var i=Math.max(Math.min(n.width,r.width+a),300),c=Math.max(Math.min(450,r.height+o),150);e._onChange(t,i,c,"rb")})))}},{key:"_unbindEvent",value:function(){this._handlers.forEach((function(e){e&&e()})),this._$resizePanel.remove()}},{key:"show",value:function(){this._$resizePanel.addClass("show")}},{key:"hide",value:function(){this._$resizePanel.removeClass("show")}},{key:"destroy",value:function(){this._unbindEvent()}},{key:"_onChange",value:function(e,t,n,r){e?this._updateResizeRect(t,n,r):(this.emit("change",{width:t,height:n}),this._hideResizeRect())}},{key:"_updateResizeRect",value:function(e,t,n){var r={width:e+"px",height:t+"px",display:"block"};"lt"===n?r=Zp(Zp({},r),{},{right:0,bottom:0,top:"auto",left:"auto"}):"rt"===n?r=Zp(Zp({},r),{},{left:0,bottom:0,top:"auto",right:"auto"}):"lb"===n?r=Zp(Zp({},r),{},{right:0,top:0,left:"auto",bottom:"auto"}):"rb"===n&&(r=Zp(Zp({},r),{},{left:0,top:0,right:"auto",bottom:"auto"})),this._resizeRect.css(r)}},{key:"_hideResizeRect",value:function(){this._resizeRect.css("display","none")}}]),n}(),Qp=function(){function e(t,n){l()(this,e),g()(this,"_videoCard",null),g()(this,"_cb",null),g()(this,"_resizer",null),this._videoCard=t,this._cb=n}return u()(e,[{key:"createResizer",value:function(){var e=this._videoCard,t=this._cb,n=e.container.find(".lake-video-done");n.length&&(this._resizer=new $p(e.container,n),this._resizer.on("change",(function(e){var n=e.width,r=e.height;t&&t(n,r)})))}},{key:"enable",value:function(){this._resizer?this._resizer.show():(this.createResizer(),this._resizer&&this._resizer.show())}},{key:"disable",value:function(){this._resizer&&this._resizer.hide()}},{key:"destroy",value:function(){this._resizer&&this._resizer.destroy()}}]),e}();var Jp=Xe.sanitizeUrl,eh={en:{download:"Download",rejectError:"Video content is broken",commonError:"Video playback error, please try again later",transcoding:"Transcoding, please wait a moment",preferences:"Local video settings",pending:"Waiting...",aborted:"Upload interrupted",transcodeError:"Transcoding failed",networkError:"Network error",invalidVideo:"The video is damaged",queryError:"Query transcoding failed",fetching:"Getting video"},"zh-cn":{download:"下载",rejectError:"视频链接已损坏",commonError:"视频无法播放，请稍后重试",transcoding:"正在转码中，请稍候...",preferences:"本地视频设置",pending:"等待上传中...",aborted:"上传被中断",transcodeError:"转码失败",networkError:"网络错误，请稍后再试",invalidVideo:"视频已损坏",queryError:"查询转码失败",fetching:"获取视频中"}},th=function(e){oe()(n,Gp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"render",value:function(e,t){this.value&&"done"===this.value.status&&this.videoURL||this.forceRender(e,t)}},{key:"forceRender",value:function(e,t){if(this.container=e,this.value=t||{},this.locale=this.locale||eh[this.getLang()],this.toggleMargin(),this.refreshToolbar(),"done"!==this.value.status&&"uploaded"!==this.value.status&&(!this.value.src||this.value.status)||this.value.taskId||this.value.videoId)return this._renderNewVideo();Bc()(se()(n.prototype),"render",this).call(this,e,this.value)}},{key:"activate",value:function(){var e=this;this.videoSizeController?this.videoSizeController.enable():this.engine&&"done"===this.value.status&&this.engine.options.allowResizeVideo&&(this.videoSizeController=new Qp(this,(function(t,n){e._setVideoSize(t,n)})),this.videoSizeController.enable())}},{key:"unactivate",value:function(){this.videoSizeController&&this.videoSizeController.disable()}},{key:"_setVideoSize",value:function(e,t){this.setValue({width:e,height:t},!0);var n=this.container.find("video");n.length&&n.css({width:e+"px",height:t+"px",maxWidth:"100%"})}},{key:"rerender",value:function(){this.render(this.container,this.value)}},{key:"destroy",value:function(){this.checker&&this.checker.cancel(),this.videoSizeController&&this.videoSizeController.destroy(),Bc()(se()(n.prototype),"destroy",this).call(this)}},{key:"_renderNewVideo",value:function(){var e=this,t=this._checkError();if(t)this._renderError(t);else{var n=this.container,r=kt(qp(this.value,this.locale));if(n.empty(),n.append(r),!this.value.videoId&&(this.value.src||this.value.aliyunVideoSrc))return this.src=this.value.src||this.value.aliyunVideoSrc,this.setValue({status:"done"},!0),this.value.status="done",this.refreshToolbar(),void this._initNewPlayer(this.src);if(this.value.videoId&&!this.statusIsChecked)if(this.videoURL)this.src=this.videoURL,this.setValue({status:"done"},!0),this.value.status="done",this.refreshToolbar(),this._initNewPlayer(this.videoURL,this.coverURL);else{var a=Fu.checkStatus(this.getViewEngine(),this.value.videoId);this.checker=a,a.promise.then((function(t){e.statusIsChecked=!0,t.success?(e.coverURL=Jp(t.data.cover),e.videoURL=Jp(t.data.video),e.src=e.videoURL,e.setValue({status:"done"},!0),e.value.status="done",e.refreshToolbar(),e._initNewPlayer(e.videoURL,e.coverURL)):(e.setValue({status:"error",message:e.locale.transcodeError}),e.value.status="error",e.value.message=e.locale.transcodeError,e.rerender())})).catch((function(t){e.statusIsChecked=!0,console.error(t),e._renderError({status:"error",message:e.locale.networkError})}))}}}},{key:"_initNewPlayer",value:function(e,t){var n=kt(qp(this.value,this.locale));this.container.empty(),this.container.append(n),this.createPlayer(e,t)}},{key:"_renderError",value:function(e){var t=this.container,n=this.locale,r=kt(qp(e,n));t.empty(),t.append(r)}},{key:"_checkError",value:function(){var e=this.value;if(!e)return{status:"error",message:this.locale.aborted};if(e.src||e.aliyunVideoSrc)return this.isInWhiteList(this.value)?null:{status:"error",message:this.locale.invalidVideo};if("uploaded"!==e.status&&"done"!==e.status&&"error"!==e.status){if(!e.taskId||!Fu.hasTask(this.engine,e.taskId))return{status:"error",name:e.name,message:this.locale.aborted}}else if(!e.videoId){if("done"===e.status||"uploaded"===e.status)return{status:"error",name:e.name,message:this.locale.invalidVideo};if("error"!==e.status)return{status:"error",name:e.name,message:this.locale.queryError}}return null}}]),n}(),nh={en:{download:"Download",placeholder:"Please paste the link here",submit:"submit",addressInvalid:"Link error, please check and re-enter",validUrl:"Illegal link, can't be embedded",uploading:"uploading",iframeOverLimit:"Documents support up to ${limit} embedded cards",iframeOverLimitCardView:"Embed cards can't be more than ${limit}",canNotShowCard:"Card cannot be displayed",stillTransfering:"Some files are still transfering",stillUploading:"Some files are still in the process of uploading",transfering:"Transferring",invalid:"Attachment invalid",wechatAlert:"Wechat does not support third-party content",example:"Example",help:"Help"},"zh-cn":{download:"下载",placeholder:"请在此粘贴链接",submit:"确定",addressInvalid:"链接错误，请检查后重新输入",validUrl:"输入链接有误，无法嵌入",uploading:"上传中",iframeOverLimit:"文档最多支持 ${limit} 张嵌入卡片",iframeOverLimitCardView:"嵌入卡片不能多于 ${limit} 张",canNotShowCard:"卡片无法展示",stillTransfering:"有文件还在转存中",stillUploading:"有文件还在上传中",transfering:"转存中",invalid:"附件已失效",wechatAlert:"小程序不支持查看第三方内容",example:"查看示例",help:"查看帮助"}};function rh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ah=function(e){oe()(n,Ds);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),(r=t.call(this,e)).options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rh(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({minHeight:80,defaultHeight:136,transition:"all 0.3s linear",resize:!0},e),r}return u()(n,[{key:"isError",value:function(){return!1}},{key:"getHeight",value:function(){var e=this.options.defaultHeight;return this.value.height||e}},{key:"renderError",value:function(){}},{key:"addIframeItem",value:function(){var e=this.getViewEngine().iframeHelper,t={};return this.iframeItem=t,!e||e.add(t)}},{key:"renderIframe",value:function(e,t,n){var r=this.getViewEngine();r.iframeHelper?this.iframeItem&&(this.iframeItem.iframe=e,this.iframeItem.url=t,r.iframeHelper.render(this.iframeItem,n,this.state.readonly)):e.attr("src",t)}},{key:"hitBlack",value:function(){return!0}},{key:"activate",value:function(){this.showRisizeController(),this.hideMask()}},{key:"restoreSideBar",value:function(){this.engine&&this.openPreferences&&(this.engine.sidebar.restore(this.sidebarName),this.openPreferences=!1)}},{key:"unactivate",value:function(){this.hideRisizeController(),this.showMask(),this.restoreSideBar()}},{key:"onResizeComplete",value:function(e){this.setValue({height:e})}},{key:"renderResizeController",value:function(){var e,t,n,r=this,a=this.root,o=this.options.minHeight;this.createResizeController(a,{onDragstart:function(){n=vs(r.iframe[0]),r.iframe.css("transition","none"),r.showMask(),e=!0},onDragmove:function(e){t=(t=n+e)>=o?t:o,r.iframe.css("height",t+"px"),r.iframe.attr("data-height",t)},onDragend:function(){r.iframe.css("transition",r.transition),e&&(r.hideMask(),e=void 0,r.onResizeComplete(vs(r.iframe[0]))),t=void 0}}),!0===this.state.activated&&this.showRisizeController()}},{key:"showMask",value:function(){this.mask&&this.mask.show()}},{key:"hideMask",value:function(){this.mask&&this.mask.hide()}},{key:"_removeIframe",value:function(){var e=this.getViewEngine();this.iframeItem&&e.iframeHelper&&(e.iframeHelper.remove(this.iframeItem),this.iframeItem=void 0)}},{key:"destroy",value:function(){this._removeIframe(),Bc()(se()(n.prototype),"destroy",this).call(this)}},{key:"clear",value:function(){this._removeIframe(),this.container.empty(),this.removeEvent()}},{key:"saveValue",value:function(){var e=this.iframe;e&&this.setValue({height:vs(e[0])})}},{key:"getEmbedEmbedTitle",value:function(){return""}},{key:"renderOverLimitView",value:function(){var e=this.locale;this.container.append('<div style="\n      background: #fafafa;\n      border: 1px solid #d9d9d9;\n      color: rgba(0,0,0,0.45);\n      text-align: center;\n      padding: 0 12px;\n    ">\n      <p style="margin-bottom: 22px; padding-top: 4px; text-align: left; color: rgba(0,0,0,.65)">'.concat(this.getEmbedEmbedTitle(),'</p>\n      <p style="margin-bottom: 8px;"><img src="https://gw.alipayobjects.com/zos/basement_prod/e2bcbfed-6e3a-4f3b-957f-f52a460cfa43.svg"/></p>\n      <p>').concat(e.canNotShowCard,'</p>\n      <p style="margin-bottom: 40px">').concat(this.getiframeOverLimitCardViewTips(),"</p>\n    </div>"))}},{key:"getUrl",value:function(){}},{key:"getiframeOverLimitCardViewTips",value:function(){var e=this.locale,t=this.getViewEngine().iframeHelper;if(t)return e.iframeOverLimitCardView.replace("${limit}",t.options.limit)}},{key:"getiframeOverLimitTips",value:function(){var e=this.locale,t=this.getViewEngine().iframeHelper;if(t)return e.iframeOverLimit.replace("${limit}",t.options.limit)}},{key:"renderView",value:function(){var e=this,t=this.state.readonly,n=this.getUrl();if(this.clear(),this.isError()){if(t)return;this.renderError()}else if(this.addIframeItem()){var r=(this.engine||this.contentView).options;r.embed&&r.embed.disableHitBlock||!n||!this.hitBlack(n)?t?this.renderReadView():(this.renderEditView(),this.bindEvent(this.engine,"save:before",(function(){return e.saveValue()}))):Yc.a.error(this.locale.validUrl)}else n?this.renderOverLimitView():(Yc.a.error(this.getiframeOverLimitTips()),this.remove())}},{key:"render",value:function(){var e=this.getLang(),t=nh[e];this.locale=t,this.value=this.value||{},this.renderView(),this.toggleMargin(),this.state.readonly&&this.isError()||this.container.css("border","1px solid #d9d9d9")}}]),n}();function oh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ih(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oh(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ch=Xe.escape,lh=Xe.sanitizeUrl,sh=function(e){oe()(n,ah);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),g()(de()(e),"handleInputKeydown",(function(t){Mc("tab",t)&&(t.preventDefault(),t.stopPropagation()),Mc("enter",t)&&e.handleSubmit(e.getSrcFromInput())})),g()(de()(e),"handleSubmit",(function(t){var n=e.getOptions(),r=null,a=null;if(e.getDocEmbedURLWithError){var o=e.getDocEmbedURLWithError(t);r=o.url,a=o.message}else r=n.getDocEmbedURL?n.getDocEmbedURL(t):e.getDocEmbedURL(t);var c=null;r&&"object"===i()(r)&&(c=r.name,a=r.message,r=r.url);var l=de()(e).locale;r?(c&&e.cardRoot.attr("data-card-alias",c),e.setValue(ih(ih({},e.getInitData()),{},{url:r,src:t})),e.render(),e.afterHandleSubmit()):e.engine.messageError(a||l.addressInvalid)})),g()(de()(e),"handleInsertExample",(function(){var t=e.getExampleURL(),n=e.getExampleInitData();e.setValue(ih(ih({},n||{}),{},{url:t,src:t})),e.render(),e.afterHandleSubmit()})),e}return u()(n,[{key:"getDocEmbedURL",value:function(){return!1}},{key:"embedToolbar",value:function(){return[{type:"dnd"},{type:"copy"},{type:"separator"}].concat(x()(this.getMoreEmbedToolbarConfig()))}},{key:"getUrl",value:function(){var e=this.value,t=e.src;return e.url||t||void 0}},{key:"getExampleURL",value:function(){return null}},{key:"getHelpUrl",value:function(){return null}},{key:"getExampleInitData",value:function(){return{}}},{key:"getInitData",value:function(){return{}}},{key:"getSrcFromInput",value:function(){return this.find("url")[0].value.trim()}},{key:"afterHandleSubmit",value:function(){}},{key:"unactivate",value:function(){Bc()(se()(n.prototype),"unactivate",this).call(this),this.container.find(".lake-embed-content").removeClass("lake-embed-content-active")}},{key:"find",value:function(e){var t="[data-role=".concat(e,"]");return this.container.find(t)}},{key:"focusInput",value:function(){var e=this;setTimeout((function(){var t=e.find("url")[0];t&&t.focus()}),50)}},{key:"getPlaceHolder",value:function(){var e=this.locale;return ch(e.placeholder)}},{key:"renderInput",value:function(){var e=this,t=this.container,n=this.locale,r=this.getPlaceHolder(),a=!!this.getExampleURL(),o=this.getHelpUrl(),i=kt('\n    <div class="lake-embed lake-embed-active">\n      <div class="lake-embed-form">\n        <span class="lake-embed-editor">\n          <input data-role="url" placeholder="'.concat(ch(r),'" spellcheck="false" class="lake-embed-input" value="" autocomplete="off"/>\n        </span>\n        <span class="lake-embed-button">\n          ').concat(a?'<button class="lake-embed-example-button" data-role="example">'.concat(n.example,"</button>"):"","\n          ").concat(o?'<a href="'.concat(o,'" class="lake-embed-help-button" target="_blank">').concat(n.help,"</a>"):"",'\n          <button class="lake-ui-button" data-role="submit"><span>').concat(ch(n.submit),"</span>\n        </button></span>\n      </div>\n    </div>\n    "));t.append(i);var c=this.find("url");c.on("keydown",this.handleInputKeydown),this.find("submit").on("click",(function(){var t=e.getSrcFromInput();e._handleSubmit?e._handleSubmit(t):e.handleSubmit(t)})),this.find("example").on("click",this.handleInsertExample),this.handleInputBoxInput&&c.on("input",this.handleInputBoxInput),this.handleInputBoxFocus&&c.on("focus",this.handleInputBoxFocus),this.handleInputBoxBlur&&c.on("blur",this.handleInputBoxBlur)}},{key:"getEmbedEmbedTitle",value:function(){return this.getUrl()}},{key:"renderIframeView",value:function(){var e=this.container,t=this.value,n=this.options,r=this.getHeight(),a=n.transition,o=kt('\n      <div class="lake-embed lake-embed-active">\n        <div class="lake-embed-content">\n          <div class="lake-embed-mask"></div>\n          <div class="lake-embed-content-bg">\n            <span class="lake-icon lake-icon-loading"></span>\n          </div>\n          <iframe data-role="iframe"\n            class="lake-embed-content-frame"\n            frameborder="0"\n            '.concat(n.allow?'allow="'+ch(n.allow)+'"':"",'\n            allowfullscreen="true"\n            style="height: ').concat(ch(r),"px; transition: ").concat(ch(a),'"\n          >\n          </iframe>\n        </div>\n      </div>\n    ')),i=o.find(".lake-embed-mask"),c=o.find("iframe");t.height&&c.attr("data-height",r),c.on("load",(function(){o.find(".lake-embed-content-bg").hide(),c.addClass("lake-embed-content-frame-loaded")})),e.append(o);var l=this.getUrl();this.root=o,this.mask=i,this.iframe=c,this.renderIframe(c,lh(l)),!0===this.state.activated&&this.hideMask()}},{key:"renderEditView",value:function(){var e=this.value,t=this.options.resize;e.url?(this.renderIframeView(),t&&this.renderResizeController()):this.renderInput()}},{key:"renderReadView",value:function(){this.value.url&&(this.renderIframeView(),this.hideMask())}}]),n}();function uh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}g()(sh,"type","block");var dh=/^https?:\/\/riddle\.alibaba-inc\.com.*/,fh=function(e){oe()(n,sh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){return l()(this,n),t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uh(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({defaultHeight:530,resize:!1},e))}return u()(n,[{key:"getPlaceHolder",value:function(){return"en"===this.getLang()?"Please enter a Riddle link address":"请输入 Riddle 链接地址"}},{key:"hitBlack",value:function(e){return function(e){return!e.match(dh)}(e)}},{key:"getDocEmbedURL",value:function(e){return function(e){if(e.match(dh))return e.endsWith("iframe")||(e+="/iframe"),e}(e)}}]),n}();function ph(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hh(e){var t,n;if(n=e.match(/^https?:\/\/\w+\.youku\.com\/v_show\/id_([^\.]+)/i))return t=n[1],"https://player.youku.com/embed/".concat(t);if(n=e.match(/^https?:\/\/\w+\.bilibili\.com\/video\/av(\d+)/i)){t=n[1];var r=e.match(/p=(\d+)/);return r&&(r=r[1]),"https://player.bilibili.com/player.html?aid=".concat(t).concat(r?"&p=".concat(r):"")}return e.startsWith("https://cloud.video.taobao.com/")?e:void 0}var mh=function(e){oe()(n,sh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),(r=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ph(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ph(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({resize:!1},e))).onResize=function(){r.iframe&&r.iframe.css("height","".concat(r.getHeight(),"px"))},window.addEventListener("resize",r.onResize,!1),r}return u()(n,[{key:"getHeight",value:function(){var e=this.getContainerWidth();return Math.min(e/(16/9),window.innerHeight/7*5)}},{key:"getExampleURL",value:function(){return hh("https://v.youku.com/v_show/id_XNDQ2Mzc1OTEyOA==.html")}},{key:"getPlaceHolder",value:function(){return"en"===this.getLang()?"Paste a link from site like Youku, Bilibili, Taobao Video":"粘贴视频链接，已支持优酷、哔哩哔哩、淘宝视频"}},{key:"hitBlack",value:function(e){return function(e){return!e.match(/^https:.*\.youku\.com\//)&&!e.match(/^https:.*\.bilibili\.com\//)&&!e.startsWith("https://cloud.video.taobao.com/")}(e)}},{key:"getDocEmbedURL",value:function(e){return hh(e)}},{key:"isError",value:function(){return!!ks.isWechatMiniApp}},{key:"renderError",value:function(){var e=this.container,t=this.locale;e.append('\n      <div class="youku-error">\n        <p><span class="lake-icon lake-icon-warning"></span></p>\n        <p>'.concat(t.wechatAlert,"</p>\n      </div>\n    "))}},{key:"destroy",value:function(){window.removeEventListener("resize",this.onResize),Bc()(se()(n.prototype),"destroy",this).call(this)}}]),n}();var gh=Xe.escape,vh="lake-plugin-mention",yh=function(e){oe()(n,Ds);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var a,o;return l()(this,n),a=t.call(this),g()(de()(a),"getDefaultSuggestions",(function(){var e=a.engine.options.mention||{};return e.defaultSuggestions?e.defaultSuggestions:e.getDefaultSuggestions?e.getDefaultSuggestions():[]})),g()(de()(a),"handleSearchResult",(o=bl()(wl.a.mark((function e(t,n){var r,o,i;return wl.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={},r=(r=t||[]).map((function(e){return o[e.login]=!0,e.avatar=e.avatar_url||e.avatar,e})),e.next=5,a.getDefaultSuggestions();case 5:return i=e.sent,r=i.filter((function(e){var t=o[e.login];return!t&&e.login&&(t=-1!==e.login.toLowerCase().indexOf(n)),!t&&e.name&&(t=-1!==e.name.toLowerCase().indexOf(n)),t})).concat(r),r=Zl()(r,"login"),e.next=10,a.renderSuggestion(r);case 10:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)})),g()(de()(a),"handleSearch",function(){var e=bl()(wl.a.mark((function e(t){var n,o,i,c,l,s;return wl.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.engine,o=n.options.mention||{},i=o.action,c=o.paramName,!o.getData){e.next=10;break}return e.next=6,o.getData(t);case 6:return l=e.sent,e.next=9,a.handleSearchResult(l,t);case 9:return e.abrupt("return",e.sent);case 10:a.ajax&&a.ajax.xhr&&a.ajax.xhr.abort&&a.ajax.xhr.abort(),(s={url:i,data:{},method:"get",success:function(e){a.ajax=null,a.handleSearchResult(e.data,t).then()},error:function(e){console.error(e)}}).data[c]=t,a.ajax=Object(r.ajax)(s);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g()(de()(a),"handleItemClick",(function(e){e.preventDefault();var t=kt(e.target).closest(".lake-mention-item");a.updateCard(t),a.focusCard()})),g()(de()(a),"handlePreventDefault",(function(e){if(0!==a.cardRoot.closest("body").length)return e.preventDefault(),!1})),g()(de()(a),"handleInput",function(){var e=bl()(wl.a.mark((function e(t){var n,r,o;return wl.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.engine.domEvent.isComposing){e.next=2;break}return e.abrupt("return");case 2:if(""!==(n=t[0].innerText)){e.next=6;break}return a.engine.change.removeCard(a.cardRoot),e.abrupt("return");case 6:if(""!==(r=n.trim().substr(1))){e.next=14;break}return e.next=10,a.getDefaultSuggestions();case 10:return o=e.sent,e.next=13,a.renderSuggestion(o);case 13:return e.abrupt("return",e.sent);case 14:a.handleSearch(r);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g()(de()(a),"focusCard",(function(){a.engine.change.focusCard(a.cardRoot)})),g()(de()(a),"renderSuggestion",function(){var e=bl()(wl.a.mark((function e(t){var n;return wl.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}a._handleRenderSuggestion(t),e.next=8;break;case 4:return e.next=6,a.getDefaultSuggestions();case 6:n=e.sent,a._handleRenderSuggestion(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g()(de()(a),"_handleRenderSuggestion",(function(e){if(a.unbindEvents(),a.container.find(".lake-mention-list").remove(),0!==e.length){var t=kt('<div class="lake-mention-list" />');t.on("mousedown",(function(e){return e.preventDefault()})),e.forEach((function(e,n){e.index=n,e.avatar=e.avatar_url||e.avatar;var r=kt(function(e){var t="";if(e.dep){var n=e.dep&&e.dep.split("-")[0];t='<span class="lake-mention-item-dep">'.concat(gh(n),'</span><span class="lake-mention-item-split">-</span>')}var r,a=e.nick_name?'data-nick-name="'.concat(gh(e.nick_name),'"'):"";return'\n  <div class="lake-mention-item" data-index="'.concat(gh(e.index),'" data-login="').concat(gh(e.login),'" ').concat(a,' data-name="').concat(gh(e.name),'">\n    <span class="lake-mention-item-avatar">\n      <img src="').concat(gh((r=e.avatar,r&&(r.startsWith("http")&&r||window.appData.space.host+r))),'">\n    </span>\n    <span class="lake-mention-item-text">\n      <span class="lake-mention-item-text-item">\n        <span class="lake-mention-item-name">').concat(gh(e.name),'</span>\n      </span>\n      <span class="lake-mention-item-text-item" style="font-size: 12px;">\n        ').concat(t,'<span class="lake-mention-item-id">').concat(gh(e.login),"</span>\n      </span>\n    </span>\n  </div>\n  ")}(e));0===n&&r.addClass("lake-mention-item-selected"),r.on("click",a.handleItemClick),r.on("mouseenter",(function(){a.selectItem(r)})),t.append(r)})),a.container.append(t),a.bindEvents()}})),a.engine=e,a.readonly=!e,a}return u()(n,[{key:"destroy",value:function(){this.unbindEvents()}},{key:"activate",value:function(){"done"!==this.status&&(this.container.find(".lake-mention-list").show(),this.bindEvents())}},{key:"unactivate",value:function(){"done"!==this.status&&(this.container.find(".lake-mention-list").hide(),this.unbindEvents())}},{key:"unbindEvents",value:function(){this.engine&&(pl.a.deleteScope(vh),pl.a.unbind("enter",vh),pl.a.unbind("up",vh),pl.a.unbind("down",vh),this.engine&&this.engine.off("keydown:enter",this.handlePreventDefault))}},{key:"bindEvents",value:function(){var e=this;this.engine&&(this.unbindEvents(),pl.a.setScope(vh),pl()("enter",vh,(function(t){if(0!==e.cardRoot.closest("body").length){t.preventDefault();var n=e.container.find(".lake-mention-list").find(".lake-mention-item-selected");e.updateCard(n),e.focusCard()}})),pl()("up",vh,(function(t){0!==e.cardRoot.closest("body").length&&(t.preventDefault(),e.scrollItem("up"))})),pl()("down",vh,(function(t){0!==e.cardRoot.closest("body").length&&(t.preventDefault(),e.scrollItem("down"))})),this.engine.on("keydown:enter",this.handlePreventDefault))}},{key:"scrollItem",value:function(e){var t=this.container.find(".lake-mention-list"),n=t.find(".lake-mention-item-selected"),r="up"===e?n.prevElement():n.nextElement();if(r){this.selectItem(r);var a=t[0].clientHeight,o=n[0].clientHeight*r.attr("data-index");t[0].scrollTop=o-a/2}}},{key:"selectItem",value:function(e){this.container.find(".lake-mention-list").find(".lake-mention-item-selected").removeClass("lake-mention-item-selected"),e.addClass("lake-mention-item-selected")}},{key:"updateCard",value:function(e){this.unbindEvents();var t={login:e.attr("data-login"),name:e.attr("data-name")},n=e.attr("data-nick-name");n&&(t.nickName=n),this.engine.history.hold(),this.engine.change.updateCard(this.cardRoot,t)}},{key:"render",value:function(e,t){var r=this,a=this.engine;if(this.readonly){if(!t)return;e.append(n.getValueHTML(this.getTopEngine(),t))}else{t&&t.name?(e.append(n.getValueHTML(this.getTopEngine(),t)),this.status="done"):(e.append('<a class="lake-mention-at" contenteditable="true">@</a>'),this.status="inputting");var o=e.find(".lake-mention-at");if(o.on("click",(function(e){e.preventDefault()})),"done"!==this.status){o.on("keydown",(function(e){var t=Mc("space",e),n=Mc("enter",e),i=Mc("esc",e);if(t||n||i){if(e.preventDefault(),n&&r.container.find(".lake-mention-list").find(".lake-mention-item-selected").length>0)return;r.unbindEvents();var c=o[0].innerText.substr(1);if(""===c)return a.change.removeCard(r.cardRoot),void a.change.insertText("@");a.change.removeCard(r.cardRoot),a.change.insertText("@"+c)}})),o.on("blur",(function(){var e=r.engine,t=r.cardRoot,n=e.card.getComponent(t);n&&(n.value||(e.change.removeCard(r.cardRoot),e.change.insertText(o[0].innerText)))}));var i=Date.now();o.on("input",(function(){if(Date.now()-i<100){var e=o.first();if(e&&e.isText()&&"@@"===e[0].nodeValue)kt(e[0].splitText(1)).remove()}setTimeout((function(){r.handleInput(o).then()}),10)}))}}}}],[{key:"getValueHTML",value:function(e,t){var n=t=t||{},r=n.login,a=n.nickName,o=n.name;if(r){var i,c=K()(e||{},"options.mention.origin"),l="";return c?l=' target="_blank"':c=K()(window,"appData.space.host")||window.location.origin,i=a?"".concat(gh(a),"(").concat(gh(r),")"):"".concat(gh(o||r),"(").concat(gh(r),")"),'<a class="lake-mention-at" href="'.concat(gh(c),"/").concat(gh(r),'"').concat(l,">@").concat(i,"</a>")}return'<span class="lake-mention-at">@'.concat(gh(a||o),"</span>")}}]),n}();function bh(e){var t,n=e||{},r=n.type,a=n.targetType,o="";return"group"===r?function(e){return e.image&&/^https?:\/\//.test(e.image)?'<span class="lake-group-avatar"><img src="'.concat(encodeURI(e.image),'"></span>'):'<span class="lake-group-avatar lake-group-text-avatar" style="background-color: '.concat(function(e){if(!e)return Eh[0];var t=e.charCodeAt(0);return Eh[t%Eh.length]||Eh[0]}(e.title),'"><span>').concat(js(function(e){var t=e.codePointAt(0);if(t=String.fromCodePoint(t),!/[0-9a-zA-Z\u4e00-\u9fa5]/.test(t)){var n=e.match(/[\u4e00-\u9fa5]/);n||(n=e.match(/[0-9a-zA-Z]/)),n&&(t=n[0])}return t}(e.title)),"</span></span>")}(e):(a&&"book"===a.toLowerCase()&&(o="repo-"),t="lake-svg-icon-yuque-".concat(o,"sheet"===r?"sheet":"table"===r?"table":"design"===r?"design":"thread"===r?"thread":"mind"===r?"mind":"show"===r?"show":"doc"),'<span class="lake-svg-icon '.concat(t,'"></span>'))}function kh(e,t){return e&&e.title?e.title:K()(t,"yuque.untitled","Untitled")}function wh(e){var t=K()(e,"options.yuqueCard",{}).groupLoginName;return!t&&window.appData&&(t=(window.appData.group||{}).login),t||null}function xh(e,t){var n=t.pathname;return e.filter((function(e){var r=e.url,a=new URL(r,t.origin).pathname;return a!==n&&a+"/edit"!==n}))}function _h(e){var t=e.parentNode,n=t.getBoundingClientRect(),r=e.getBoundingClientRect();r.bottom>n.bottom?t.scrollTop=t.scrollTop+(r.bottom-n.bottom)+50:r.top<n.top&&(t.scrollTop=t.scrollTop-(n.top-r.top)-50)}g()(yh,"type","inline"),g()(yh,"selectStyleType","background");var Eh=["#3988E4","#B97940","#2F9547","#235B9D","#59AF9A"];function Ch(){if(this.engine&&!this._recommendPanelVisible){var e=Ph.call(this);e[0].style.display="block",this._recommendPanelIndex=-1,this._recommendPanelVisible=!0,this._uiForRecommendPanel.find(".lake-doc-recommend-panel-body")[0].scrollTop=0,e.removeClass("focused"),Mh.call(this)}}function Oh(){this._recommendPanelVisible&&(this._recommendPanelVisible=!1,this._recommendPanelIndex=-1,this._uiForRecommendPanel.find(".selected").removeClass("selected"),this._uiForRecommendPanel[0].style.display="none")}function Sh(){if(this._recommendPanelVisible){var e=Th.call(this);e&&0!==e.length&&(this._recommendPanelIndex++,this._recommendPanelIndex>e.length-1&&(this._recommendPanelIndex=-1),Ah.call(this))}}function Rh(){if(this._recommendPanelVisible){var e=Th.call(this);e&&0!==e.length&&(this._recommendPanelIndex--,this._recommendPanelIndex<-1&&(this._recommendPanelIndex=e.length-1),Ah.call(this))}}function jh(){if(this._recommendPanelVisible&&-1!==this._recommendPanelIndex){var e=this._uiForRecommendPanel.find(".lake-doc-recommend-panel-item")[this._recommendPanelIndex];return e?e.getAttribute("data-href"):null}}function Ph(){if(this._uiForRecommendPanel)return this._uiForRecommendPanel;var e=this.getLocale().yuque;return this._uiForRecommendPanel=kt('\n    <div class="lake-doc-recommend-panel">\n        <div class="lake-doc-recommend-panel-header">'.concat(e.recently,'</div>\n        <div class="lake-doc-recommend-panel-body"></div>\n        <div class="lake-doc-recommend-panel-footer">').concat(e.recommendTip,"</div>\n    </div>\n    ")),this.container.find(".lake-embed-form").append(this._uiForRecommendPanel),this._handleRecommendItemMousedown=Dh.bind(this),this._uiForRecommendPanel.on("mousedown",this._handleRecommendItemMousedown,!1),this._uiForRecommendPanel}function Ah(){var e=this._recommendPanelIndex;if(this._uiForRecommendPanel.find(".selected").removeClass("selected"),-1!==e){var t=this._uiForRecommendPanel.find(".lake-doc-recommend-panel-item")[e];t&&(this._uiForRecommendPanel.addClass("focused"),kt(t).addClass("selected"),_h(t))}else this._uiForRecommendPanel.find(".lake-doc-recommend-panel-body")[0].scrollTop=0}function Th(){var e=wh(this.getViewEngine());return zh.call(this,e)}function Dh(e){e.preventDefault();var t=kt(e.target).closest(".lake-doc-recommend-panel-item");if(t.length){var n=t.attr("data-href");n&&this._handleSubmit(n)}}function Mh(){var e=wh(this.getViewEngine());if(e){var t=zh.call(this,e);t?Ih.call(this,e,t):(Nh.call(this,e),Lh.call(this))}else Oh.call(this)}function Nh(e){var t=this;Object(r.ajax)({method:"get",url:K()(this.getTopEngine(),"options.yuque.recentAction")||"/api/editor/recent",data:{type:"doc",scope:e},success:function(n){var r=xh((n.data||[]).slice(0,10),t.getViewEngine().getPageLocation()),a=wh(t.getViewEngine());Fh.call(t,e,r),a===e&&Ih.call(t,e,r)},error:function(){Bh.call(t)}})}function Lh(){var e=this.getLocale().yuque;this._uiForRecommendPanel.find(".lake-doc-recommend-panel-body").html('<div class="lake-doc-recommend-panel-loading">'.concat(e.loading,"</div>"))}function Ih(e,t){if(this._recommendPanelVisible&&this._lastRenderedGruop!==e){this._lastRenderedGruop=e;var n=this.getViewEngine().getPageLocation().origin,r=t.map((function(e){var t=bh(e),r=new URL(e.url,n).href;return'<div class="lake-doc-recommend-panel-item" data-href="'.concat(encodeURI(r),'">\n        ').concat(t,'\n        <dl class="lake-doc-recommend-panel-item-content">\n            <dt>').concat(js(e.title),"</dt>\n            <dd>").concat(js(e.belong),"</dd>\n        </dl>\n    </div>")})).join("\n");this._uiForRecommendPanel.find(".lake-doc-recommend-panel-body").html(r)}}function Bh(){var e=this.getLocale().yuque;this._uiForRecommendPanel.find(".lake-doc-recommend-panel-body").html('<div class="lake-doc-recommend-panel-error">'.concat(e.loadingError,"</div>"))}function zh(e){var t=this.engine;return t._cachedRecommend?t._cachedRecommend[e]:null}function Fh(e,t){var n=this.engine;n._cachedRecommend||(n._cachedRecommend={}),n._cachedRecommend[e]=t}function Uh(e){var t=Hh.call(this);qh.call(this,e),this._searchPanelVisible||(t[0].style.display="block",this._searchPanelVisible=!0),this._searchPanelIndex=-1,this._uiForSearchPanel.find(".lake-doc-search-panel-body")[0].scrollTop=0,this._uiForSearchPanel.removeClass("focused")}function Vh(){this._searchPanelVisible&&(Qh.call(this),this._searchPanelVisible=!1,this._searchPanelIndex=-1,this._uiForSearchPanel.find(".selected").removeClass("selected"),this._uiForSearchPanel[0].style.display="none")}function qh(e){this._searchCache||(this._searchCache={});var t=this._searchCache;t[e]?(Qh.call(this),Gh.call(this,t[e])):($h.call(this,e),Wh.call(this))}function Hh(){if(this._uiForSearchPanel)return this._uiForSearchPanel;var e=this.getLocale().yuque,t=function(e){var t=K()(e,"options.yuqueCard",{}).groupName;return!t&&window.appData&&(t=(window.appData.group||{}).name),t||null}(this.getViewEngine());return this._uiForSearchPanel=kt('\n    <div class="lake-doc-search-panel">\n        <div class="lake-doc-search-panel-body"></div>\n        <div class="lake-doc-search-panel-footer">'.concat(e.searchRange," ").concat(js(t),"</div>\n    </div>\n    ")),this.container.find(".lake-embed-form").append(this._uiForSearchPanel),this._handleSearchItemMousedown=Jh.bind(this),this._uiForSearchPanel.on("mousedown",this._handleSearchItemMousedown,!1),this._uiForSearchPanel}function Wh(){var e=this.getLocale().yuque;this._uiForSearchPanel.find(".lake-doc-search-panel-body").html('<div class="lake-doc-search-panel-waiting">'.concat(e.searching,"</div>"))}function Yh(){var e=this.getLocale().yuque;this._uiForSearchPanel.find(".lake-doc-search-panel-body").html('<div class="lake-doc-search-panel-error">'.concat(e.searchError,"</div>"))}function Gh(e){if(e.length){var t=this.getViewEngine(),n=t.locale,r=e.map((function(e){var r=bh(e),a=new URL(e.url,t.getPageLocation().origin),o=kh(e,n);return'<div class="lake-doc-search-panel-item" data-href="'.concat(a,'">\n                ').concat(r,'\n                <dl class="lake-doc-search-panel-item-content">\n                    <dt>').concat(o,"</dt>\n                    <dd>").concat(js(e.belong||"-"),"</dd>\n                </dl>\n            </div>")})).join("\n");this._uiForSearchPanel.find(".lake-doc-search-panel-body").html(r)}else{var a=this.getLocale().yuque;this._uiForSearchPanel.find(".lake-doc-search-panel-body").html('<div class="lake-doc-search-panel-tip">\n        <span class="lake-svg-icon lake-svg-icon-search"></span>\n        <div class="lake-doc-search-panel-tip-content">\n            <div>'.concat(a.emptySearchTip,"</div>\n            <div>").concat(a.emptySearchSubTip,"</div>\n        </div>\n    </div>"))}}function Xh(){if(this._searchPanelVisible){var e=this._uiForSearchPanel.find(".lake-doc-search-panel-item");if(e.length){if(this._uiForSearchPanel.find(".selected").removeClass("selected"),this._searchPanelIndex++,this._searchPanelIndex>e.length-1)return this._searchPanelIndex=-1,void(this._uiForSearchPanel.find(".lake-doc-search-panel-body")[0].scrollTop=0);this._uiForSearchPanel.addClass("focused");var t=e[this._searchPanelIndex];t&&(kt(t).addClass("selected"),_h(t))}}}function Kh(){if(this._searchPanelVisible){var e=this._uiForSearchPanel.find(".lake-doc-search-panel-item");if(e.length)if(this._uiForSearchPanel.find(".selected").removeClass("selected"),this._searchPanelIndex--,-1!==this._searchPanelIndex){this._searchPanelIndex<-1&&(this._searchPanelIndex=e.length-1);var t=e[this._searchPanelIndex];t&&(kt(t).addClass("selected"),_h(t))}else this._uiForSearchPanel.find(".lake-doc-search-panel-body")[0].scrollTop=0}}function Zh(){if(this._searchPanelVisible&&-1!==this._searchPanelIndex){var e=this._uiForSearchPanel.find(".lake-doc-search-panel-item")[this._searchPanelIndex];return e?e.getAttribute("data-href"):null}}function $h(e){var t=this;Qh.call(this);var n=Object(r.ajax)({method:"get",url:K()(this.getTopEngine(),"options.yuque.searchAction")||"/api/editor/search",data:{q:e,type:"doc",scope:wh(this.getViewEngine())},success:function(n){var r=xh((n.data||[]).slice(0,10),t.getViewEngine().getPageLocation());t._searchCache[e]=r,Gh.call(t,r)},error:function(){n.xhr._aborted||Yh.call(t)}});this._searchHandle=n,this._searchHandle.promise.then((function(){t._searchHandle===n&&(t._searchHandle=null)}))}function Qh(){this._searchHandle&&(this._searchHandle.xhr.abort(),this._searchHandle=null)}function Jh(e){e.preventDefault();var t=kt(e.target).closest(".lake-doc-search-panel-item");if(t.length){var n=t.attr("data-href");n&&this._handleSubmit(n)}}var em=function(){function e(t){l()(this,e),g()(this,"handle",null),g()(this,"cardComponent",null),this.cardComponent=t}return u()(e,[{key:"getCache",value:function(e){var t=this.cardComponent.getViewEngine();return!!t._docCardCache&&t._docCardCache[e]}},{key:"get",value:function(e){return ks.isYqWebApp()?this._getByAlipay(e):this._getByAjax(e)}},{key:"_getByAjax",value:function(e){var t=this;if(this.handle&&this.handle.url===e)return this.handle.promise;this._cancel();var n=new Promise((function(n){var a=e;try{a=new URL(a).toString()}catch(e){}var o=Object(r.ajax)({method:"get",url:K()(t.cardComponent.getTopEngine(),"options.yuque.linkDetailAction")||"/api/editor/link_detail",data:{url:a},success:function(r){t.handle=null,t._saveCache(e,r.data),n({success:!0,data:r.data})},error:function(){t.handle=null,n({success:!1})}});t.handle={resolve:n,request:o,promise:null,url:e}}));return this.handle.promise=n,n}},{key:"_getByAlipay",value:function(e){var t=this,n=e;try{n=new URL(n).toString()}catch(e){}var r,a,o=K()(this.cardComponent.getTopEngine(),"options.yuque.linkDetailAction")||"/api/editor/link_detail";return window.yqWebApp.alipayHttpRequest("".concat(o,"?").concat((r={url:n},a=new URLSearchParams,Object.keys(r).forEach((function(e){return a.set(e,r[e]||"")})),a.toString())),{method:"GET"}).then((function(n){return t._saveCache(e,n.data),{success:!0,data:n.data}})).catch((function(){return{success:!1}}))}},{key:"_saveCache",value:function(e,t){var n=this.cardComponent.getViewEngine();n._docCardCache||(n._docCardCache={}),n._docCardCache[e]=t}},{key:"_cancel",value:function(){this.handle&&(this.handle.resolve({success:!1}),this.handle=null)}}]),e}();function tm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tm(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rm(){var e=this,t=this.value,n=t.src,r=t.detail;if(this.contentView)r?om.call(this,r):im.call(this);else{this.detailFetcher||(this.detailFetcher=new em(this));var a=this.detailFetcher.getCache(n);a||this.detailFetcher.get(n).then((function(t){var n=t.success,a=t.data;n?(a=nm(nm({},r),a),e.setValue({detail:a}),e.value.detail=a,e.value.mode&&"card"!==e.value.mode||om.call(e,a)):r||im.call(e)})),r||a?r?om.call(this,r):(this.setValue({detail:a}),om.call(this,a)):am.call(this)}}function am(){var e=this.getLocale().yuque;cm.call(this,'<div class="lake-doc-card-view"><div class="lake-doc-card-view-loading">'.concat(e.loading,"</div></div>"))}function om(e){var t=this.getViewEngine().locale,n=bh(e),r=js(kh(e,t)),a=e.desc?'<div class="lake-doc-card-view-desc">'.concat(js(e.desc),"</div>"):"";cm.call(this,'<div class="lake-doc-card-view">\n        <div class="lake-doc-card-view-box">\n          '.concat(n,'\n          <div class="lake-doc-card-view-content">\n            <div class="lake-doc-card-view-title">').concat(r,"</div>\n            ").concat(a,'\n            <div class="lake-doc-card-view-belong">').concat(js(e.belong||e.url)||"-","</div>\n          </div>\n        </div>\n      </div>"))}function im(){var e=this.getLocale().yuque;cm.call(this,'<div class="lake-doc-card-view"><div class="lake-doc-card-view-error"><div>'.concat(e.loadingError,'</div><div class="lake-doc-card-view-error-tip">').concat(js(this.value.src),"</div></div></div>"))}function cm(e){this.engine||(e='<a href="'.concat(encodeURI(this.value.src),'" target="_blank">').concat(e,"</a>")),this.container.html(e)}function lm(){var e=this.getLocale().yuque;sm.call(this,'<div class="lake-doc-unsupported-view">'.concat(e.unsupportedThread,"</div>"))}function sm(e){this.engine||(e='<a href="'.concat(encodeURI(this.value.src),'" target="_blank">').concat(e,"</a>")),this.container.html(e)}function um(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var dm=["0.0.0.0","255.255.255.255",/^127\./,/^192\.168\./,/^10\./],fm=[["view","doc_embed"]],pm=[["inner",2],["view","doc_embed"]],hm=[["inner",5],["view","doc_embed"]];function mm(e){try{var t=new URL(e,"http://localhost").hostname;return!(!t||"localhost"===t||/^\d+\.\d+.\d+.\d+$/.test(t)&&dm.some((function(e){return"string"==typeof e?e===t:e.test(t)})))}catch(e){return!1}}var gm=[/\.yuque\.com$/,/(^|\.)yuque(\-pre)?\.(antfin|alibaba)-inc\.com$/,/(^|\.)yuque(\-pre)?\.antfin\.com$/,/\.alipay\.net$/];function vm(e,t){var n="";return t.forEach((function(t){var r=t[0],a=t[1];"number"==typeof a&&(a=e[a]),n+="".concat(r,"=").concat(a,"&")})),n.substring(0,n.length-1)}function ym(e,t){for(var n=!1,r=0;r<e.length;r++){var a=e[r],o=a[0],i=a[1],c=t.match(i);if(c){n="".concat(c[1],"?").concat(vm(c,o));break}}return n}var bm=function(){function e(t,n){l()(this,e),g()(this,"currentLocation",null),g()(this,"locale",null),g()(this,"whiteList",null),g()(this,"blackList",null),this.currentLocation=t,this.locale=n||{errorMessage:{}},this.locale.errorMessage||(this.locale.errorMessage={}),this._initWithList(),this._initBlackList()}return u()(e,[{key:"_initWithList",value:function(){var e=um(this.currentLocation.origin);this.whiteList={insite:[[pm,new RegExp("("+e+"\\/[^/]{1,100}\\/[^/]{1,100}(?:\\/[^/]{1,100})?)\\?.*inner=([^/]{1,100})&")],[pm,new RegExp("("+e+"\\/[^/]{1,100}\\/[^/]{1,100}(?:\\/[^/]{1,100})?)\\?.*inner=(.*)")],[pm,new RegExp("("+e+"\\/[^/]{1,100}\\/[^/]{1,100}(?:\\/[^/]{1,100})?)#(.*)")],[fm,new RegExp("("+e+"\\/[^/]{1,100}\\/[^/]{1,100}(\\/.*)?)")]],yuque:[[pm,/(^https:\/\/[^/]{1,100}yuque\.com\/[^/]{1,100}\/[^/]{1,100}(?:\/[^/]{1,100})?)\?.*inner=([^/]{1,100})&/],[pm,/(^https:\/\/[^/]{1,100}yuque\.com\/[^/]{1,100}\/[^/]{1,100}(?:\/[^/]{1,100})?)\?.*inner=(.*)/],[pm,/(^https:\/\/[^/]{1,100}yuque\.com\/[^/]{1,100}\/[^/]{1,100}(?:\/[^/]{1,100})?)#(.*)/],[fm,/^(https:\/\/[^/]{1,100}(yuque)\.com\/[^/]{1,100}\/[^/]{1,100}(\/.*)?)/]],lark:[[hm,/(^https:\/\/[^/]{1,100}(((antfin|alibaba)-inc)|antfin)\.com\/[^/]{1,100}\/[^/]{1,100}(?:\/[^/]{1,100})?)\?.*inner=([^/]{1,100})&/],[hm,/(^https:\/\/[^/]{1,100}(((antfin|alibaba)-inc)|antfin)\.com\/[^/]{1,100}\/[^/]{1,100}(?:\/[^/]{1,100})?)\?.*inner=(.*)/],[hm,/(^https:\/\/[^/]{1,100}(((antfin|alibaba)-inc)|antfin)\.com\/[^/]{1,100}\/[^/]{1,100}(?:\/[^/]{1,100})?)#(.*)/],[fm,/^(https:\/\/[^/]{1,100}(((antfin|alibaba)-inc)|antfin)\.com\/[^/]{1,100}\/[^/]{1,100}(\/.*)?)/]]}}},{key:"_initBlackList",value:function(){var e=this,t=this.locale,n=um(this.currentLocation.origin);this.blackList=[{rule:function(t,n){var r=new URL(t,e.currentLocation.origin).pathname;return!(/^\/[^\/]{2,}\/[^\/]+(\/[^\/]+)?$/.test(r)||n&&/^\/[^\/]{2,}$/.test(r))},message:t.errorMessage.notSupportURL},{rule:function(t){if(!e.currentLocation.pathname)return!1;var n=new URL(t,e.currentLocation.origin).pathname,r=e.currentLocation.pathname;return n===r||n+"/edit"===r},message:t.errorMessage.currentDOCURL},{rule:function(t){return!t.match(new RegExp(n+"\\/[^/]{1,100}"))&&!e.isYuque(t)&&!e.isLark(t)},message:t.errorMessage.notSupportURL},{rule:function(t){var n,r=(t=new URL(t,e.currentLocation.origin)).pathname,a=["/settings/applications/","/login/callback","/login/oauth","/sites/","/settings/callback/","/dashboard/","/about/"],o=["/topics/"],i=["/invitation","/apply","/settings/basic","/settings/advanced","/settings/lab","/topics/kanban","/settings/logs","/s","/watchers","/stargazers","/new","/dashboard"];for(n=0;n<a.length;n++){var c=a[n];if(r.startsWith(c))return!0}for(n=0;n<o.length;n++){var l=o[n];if(-1!==r.indexOf(l))return!0}for(n=0;n<i.length;n++){var s=i[n];if(r.endsWith(s))return!0}return!1},message:t.errorMessage.notSupportURL}]}},{key:"isYuque",value:function(e){return e.match(/^(https:\/\/[^/]{1,100}yuque\.com\/[^/]{1,100}(?:\/.*)?)/)}},{key:"isLark",value:function(e){try{var t=new URL(e);return["yuque.antfin.com","yuque.antfin-inc.com","yuque.alibaba-inc.com"].includes(t.host)}catch(e){return!1}}},{key:"parseLarkSameOrigin",value:function(e){if(this.isLark(e)&&this.isLark(this.currentLocation.href)){var t=new URL(e,this.currentLocation.origin).origin;return e.replace(t,this.currentLocation.origin)}return e}},{key:"isYuqueLink",value:function(e){var t=new URL(e,this.currentLocation.origin),n=t.origin,r=t.hostname;return n===this.currentLocation.origin||gm.some((function(e){return e.test(r)}))}},{key:"getURLInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={isYuqueURL:this.isYuqueLink(e),valid:!1,url:e};return t="object"===i()(t)&&t?t:{},n.isYuqueURL?(n.url=this.getDocEmbedURL(e,!1,!!t.group),n.valid=!!n.url):n.valid=mm(e),n}},{key:"hitBlack",value:function(e,t){return this._hitBlack(e,t).hit}},{key:"_hitBlack",value:function(e,t){for(var n=0;n<this.blackList.length;n++){var r=this.blackList[n];if(r.rule(e,t))return console.warn("命中黑名单：规则 %d, url: %s",n,e),{hit:!0,message:r.message}}return{hit:!1}}},{key:"getDocEmbedURL",value:function(e,t,n){var r=window.appData||{},a=this.whiteList,o=a.yuque,i=a.lark,c=a.insite,l=this._hitBlack(e,n);return l.hit?!!t&&{url:null,message:l.message}:n&&km(e)?e:r.isYuque?ym(c.concat(o),e):ym(c.concat(i,o),e)}}]),e}();function km(e){var t=new URL(e,window.location.origin).pathname;return/^\/[^\/]{2,}$/.test(t)}var wm=function(){function e(){l()(this,e)}return u()(e,null,[{key:"fix",value:function(e,t){if(!e)return e;var n=new URL(e,window.location.origin);return"file:"!==n.protocol?e:new URL(n.pathname+n.search+n.hash,t.origin).href}}]),e}();function xm(e){var t=new URL(e,window.location.origin).pathname;return/^\/[^\/]{2,}\/[^\/]+$/.test(t)}window.addEventListener("message",(function(e){var t=e.data;if(t&&t.isYuqueEmbed)for(var n=t.href,r=t.contentHeight,a=document.querySelectorAll('[data-lake-card="yuque"] iframe'),o=0;o<a.length;o++){var i=a[o];if(i.getAttribute("src")===n){var c=Ei.card.getComponent(kt(i).closest('[data-lake-card="yuque"]'));c&&c.onPageSendHeight(r)}}}),!1);var _m=function(e){oe()(n,sh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){var e;return l()(this,n),e=t.call(this,{defaultHeight:467}),g()(de()(e),"handleInputKeydown",(function(t){if(t.stopPropagation(),Mc("tab",t)&&(t.preventDefault(),t.stopPropagation()),Mc("enter",t)){var n=jh.call(de()(e))||Zh.call(de()(e));n?e._handleSubmit(n):e._handleSubmit(e.getSrcFromInput())}else Mc("down",t)?(t.preventDefault(),Sh.call(de()(e)),Xh.call(de()(e))):Mc("up",t)&&(t.preventDefault(),Rh.call(de()(e)),Kh.call(de()(e)))})),g()(de()(e),"handleInputBoxInput",(function(t){var n=t.target.value;n?(Oh.call(de()(e)),/^https?:\/\//.test(n)?Vh.call(de()(e)):Uh.call(de()(e),n)):(Vh.call(de()(e)),Ch.call(de()(e)))})),g()(de()(e),"handleInputBoxFocus",(function(t){t.target.value||Ch.call(de()(e))})),g()(de()(e),"handleInputBoxBlur",(function(){Oh.call(de()(e)),Vh.call(de()(e))})),e}return u()(n,[{key:"onPageSendHeight",value:function(e){if(this.value.url){var t=this.getTopEngine(),n="yuque.page.height."+this.value.url,r=t.getGlobalData(n);t.setGlobalData(n,e),e&&r!==e&&this.isAdaptiveHeightMode()&&this.resizeView()}}},{key:"embedToolbar",value:function(){var e=this,t=[];return this.value&&this.value.src?(this.isDisableEmbedView()&&"embed"===this.value.mode&&(this.value.mode="card"),"card"===this.value.mode?(t.push({type:"doc-title",onClick:function(){e.toggleMode("title")}}),this.isDisableEmbedView()||xm(this.value.src)||km(this.value.src)||t.push({type:"doc-embed",onClick:function(){e.toggleMode("embed")}})):t.push({type:"doc-title",onClick:function(){e.toggleMode("title")}},{type:"doc-card",onClick:function(){e.toggleMode("card")}},{type:"separator"},{type:"height-mode-default",disabled:this.isDefaultHeightMode(),onClick:function(){e.toggleHeightMode("default")}},{type:"height-mode-adaptive",disabled:this.isAdaptiveHeightMode(),onClick:function(){e.toggleHeightMode("adaptive")}}),[{type:"dnd"}].concat(t,[{type:"separator"},{type:"gotolink",onClick:function(){e.value&&e.value.src&&e.getTopEngine().openLink(e.value.src)}},{type:"copy"},{type:"separator"}],x()(this.getMoreEmbedToolbarConfig()))):[{type:"copy"},{type:"separator"}].concat(x()(this.getMoreEmbedToolbarConfig()))}},{key:"isDisableEmbedView",value:function(){return!!K()(this.getTopEngine(),"options.disableYuqueCardEmbedView")}},{key:"isAllowToDefaultHeight",value:function(){var e=this.value.heightMode;return e&&"default"!==e}},{key:"isAllowToAdaptiveHeight",value:function(){var e=this.value.heightMode;return!e||"adaptive"!==e}},{key:"getUrl",value:function(){var e=Bc()(se()(n.prototype),"getUrl",this).call(this);return e?e=this.validator.parseLarkSameOrigin(e):e}},{key:"getLocale",value:function(){return this.getViewEngine().locale}},{key:"getHeight",value:function(){var e=this.options.defaultHeight;if(this.isDefaultHeightMode())return e;var t="yuque.page.height."+this.value.url;return this.isAdaptiveHeightMode()&&this.value.url?this.getTopEngine().getGlobalData(t)||e:this.isCustomHeightMode()&&this.value.height||e}},{key:"isDefaultHeightMode",value:function(){var e=this.value,t=e.heightMode;return void 0===e.height&&(!t||"default"===t)}},{key:"isAdaptiveHeightMode",value:function(){return"adaptive"===this.value.heightMode}},{key:"isCustomHeightMode",value:function(){var e=this.value,t=e.heightMode;return void 0!==e.height||"custom"===t}},{key:"toggleMode",value:function(e){if("mode"!==this.value.mode){if("title"===e)return this.engine.constructor.plugin.executePluginMethod(this.engine,"yuque","toggleToTitleMode",this);this.setValue({mode:e}),this.rerender(),this.refreshToolbar()}}},{key:"toggleHeightMode",value:function(e){this.value.heightMode!==e&&(this.setValue({heightMode:e,height:"custom"!==e?void 0:this.value.height}),this.resizeView(),this.refreshToolbar())}},{key:"resizeView",value:function(){if("embed"===this.value.mode){var e=this.getHeight(),t=this.cardRoot.find("iframe")[0];t&&(t.style.height=e+"px",t.dataset.height=e)}}},{key:"refreshToolbar",value:function(){this.getViewEngine().card.updateToolbar(this),this.getViewEngine().card.showToolbar(this.cardRoot)}},{key:"getPlaceHolder",value:function(){return"en"===this.getLang()?"Search for documents, tables or paste links":"搜索语雀文档、表格或贴入链接"}},{key:"getExampleURL",value:function(){return this.getDocEmbedURL("https://www.yuque.com/yuque/ng1qth/about")}},{key:"getInitData",value:function(){return{mode:this.isDisableEmbedView()?"card":"embed"}}},{key:"getExampleInitData",value:function(){return{mode:this.isDisableEmbedView()?"card":"embed"}}},{key:"hitBlack",value:function(e){var t=new URL(e,window.location.origin),n=!(!this.value||"card"!==this.value.mode);return!!this.validator.hitBlack(e,n)||(!n||!km(e))&&-1===t.search.indexOf("view=doc_embed")}},{key:"getDocEmbedURL",value:function(e){return this.validator.getDocEmbedURL(e)}},{key:"getDocEmbedURLWithError",value:function(e){var t=this.validator.getDocEmbedURL(e,!0);return!1===t?{url:null}:"object"!==i()(t)?{url:t}:t?{url:t.url,message:t.message}:{url:t}}},{key:"renderEmbedEmbedView",value:function(){var e=this.getLang(),t="en"===e?"Displaying online documents is not supported in embedded cards":"嵌入卡片中暂不支持展示在线文档";this.container.append('<div style="background: #fafafa; height: 80px; padding-top: 28px; text-align: center; color: rgba(0,0,0,0.45);">\n    '.concat(t,'。<a href="').concat(window.location.href,'">').concat("en"===e?"Original Document link":"原文链接","</href>\n    </div>"))}},{key:"render",value:function(){this.value&&this.fixFileProtocol(),this.isDisableEmbedView()&&"embed"===this.value.mode&&(this.value.mode="card"),(this.value.src&&this.value.url||!this.getTopEngine().isReadonly)&&(this.validator||(a.ua.desktop?this.validator=new bm(this.getTopEngine().getPageLocation(),this.getLocale()):this.validator=new bm(window.location,this.getLocale())),this.toggleMargin(),this.value=this.value||{},window.location.search.indexOf("view=doc_embed")>0?this.renderEmbedEmbedView():Bc()(se()(n.prototype),"render",this).call(this))}},{key:"rerender",value:function(){this.render()}},{key:"onResizeComplete",value:function(e){Bc()(se()(n.prototype),"onResizeComplete",this).call(this,e),this.toggleHeightMode("custom")}},{key:"renderEditView",value:function(){var e=this.value,t=this.options.resize;if(e.url)if("card"===e.mode)this.renderCardView();else{if(function(e){return!(!e||"thread"!==e.type||"Book"===e.target_type)}(this.value.detail))return void this.renderUnsupportedView();this.renderIframeView(),t&&this.renderResizeController(),this.showRisizeController()}else this.renderInput()}},{key:"renderReadView",value:function(){var e=this.value,t=e.url,r=e.mode;t&&("card"===r?rm.call(this):Bc()(se()(n.prototype),"renderReadView",this).call(this))}},{key:"renderCardView",value:function(){rm.call(this)}},{key:"_handleSubmit",value:function(e){var t=this.getTopEngine(),n=new URL(e,t.getPageLocation());/^\/[^\/]+\/[^\/]+\/?$/.test(n.pathname)?t.messageError(this.getLocale().errorMessage.notSupportURL):this.handleSubmit(e)}},{key:"afterHandleSubmit",value:function(){this.refreshToolbar()}},{key:"renderUnsupportedView",value:function(){lm.call(this)}},{key:"fixFileProtocol",value:function(){var e=this.getTopEngine();if(e){var t=wm.fix(this.value.src,e.getPageLocation()),n=wm.fix(this.value.url,e.getPageLocation());t!==this.value.src&&this.setValue({src:t}),n!==this.value.url&&this.setValue({url:n})}}}]),n}();var Em=function(e){oe()(n,Ds);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),g()(de()(e),"detailFetcher",new em(de()(e))),e}return u()(n,[{key:"embedToolbar",value:function(){var e=this;return[{type:"doc-card",onClick:function(){e.toggleMode("card")}},this.isDisableEmbedView()||xm(this.value.src)||km(this.value.src)?null:{type:"doc-embed",onClick:function(){e.toggleMode("embed")}},{type:"separator"},{type:"gotolink",onClick:function(){e.value&&e.value.src&&e.getTopEngine().openLink(e.value.src)}},{type:"copy"},{type:"delete"}].filter(Boolean)}},{key:"getLocale",value:function(){return this.getViewEngine().locale}},{key:"toggleMode",value:function(e){return this.engine.constructor.plugin.executePluginMethod(this.engine,"yuque","toggleToBlockMode",this,e)}},{key:"render",value:function(){this.value=this.value||{},this.rerender()}},{key:"rerender",value:function(){var e=this.value,t=e.detail,n=e.src;if(this.contentView)t?this.renderDetail(t):this.renderError();else{var r=this.detailFetcher.getCache(n);t||r?(t||this.setValue({detail:r}),this.renderDetail(t||r)):this.renderLoading()}}},{key:"isDisableEmbedView",value:function(){return!!K()(this.getTopEngine(),"options.disableYuqueCardEmbedView")}},{key:"renderDetail",value:function(e){var t=js(kh(e,this.getViewEngine().locale)),n=bh(e);this.container.html(this.wrap('<span class="le-card-yuque-inline">'.concat(n,'<span class="le-card-yuque-inline-content">').concat(t,"</span></span>")))}},{key:"renderLoading",value:function(){this.fetchData(this.value.src),this.container.html(this.wrap('<span class="le-card-yuque-inline"><span class="lake-svg-icon lake-svg-icon-yuque-doc"></span><span class="le-card-yuque-inline-content">内容获取中...</span></span>'))}},{key:"renderError",value:function(){this.container.html(this.wrap('<span class="le-card-yuque-inline"><span class="lake-svg-icon lake-svg-icon-yuque-doc"></span><span class="le-card-yuque-inline-content">未能获取内容</span></span>'))}},{key:"wrap",value:function(e){return this.engine?e:'<a href="'.concat(encodeURI(this.value.src),'" target="_blank">').concat(e,"</a>")}},{key:"fetchData",value:function(e){var t=this;e&&this.detailFetcher.get(e).then((function(e){var n=e.success,r=e.data;n?(t.setValue({detail:r}),t.value.detail=r,t.renderDetail(r)):t.value.detail||t.renderError()}))}}]),n}();g()(Em,"selectStyleType","background"),g()(Em,"type","inline");var Cm={en:{title:"Locked Text",lock:"Lock",setPassword:"Set Password",unlock:"Unlock",lockInputPlaceholder:"Recommend to set more than 6 digits",lockInputTitle:"Set the password (careful custody, the text cannot be retrieved after the password is lost)",passwordPattern:"Passwords only support: numbers, letters and common symbols",unlockInputPlaceholder:"Enter Password to unlock",ok:"OK",cancel:"Cancel",errorFeedback:"Incorrect password",lockedFeedback:"Password has gone wrong more than 5 times, please try again after 1 minute",contentFeedback:"Please enter content in the card",encryptoError:"Encryption failed",unLockedInfo:"Currently unencrypted",noPassword:"Please enter password"},"zh-cn":{title:"加密文本",lock:"锁住",setPassword:"设置密码",unlock:"解锁",lockInputPlaceholder:"建议设置 6 位以上",lockInputTitle:"设置密码 (谨慎保管，丢失后无法找回)：",passwordPattern:"密码仅支持：数字、字母及常见符号",unlockInputPlaceholder:"请输入密码",ok:"确认",cancel:"取消",errorFeedback:"密码有误",lockedFeedback:"密码出错超过 5 次，请 1 分钟后再尝试",contentFeedback:"请在加密卡片中输入内容",encryptoError:"加密失败",unLockedInfo:"未设置密码，将明文显示",noPassword:"请输入密码"}};var Om=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),g()(de()(e),"changeUnlockPassword",(function(t){e.password=t.target.value})),g()(de()(e),"unLock",(function(){e.props.onUnlock(e.password)})),g()(de()(e),"onPressEnter",(function(t){e.props.onUnlock(t.target.value)})),e}return u()(n,[{key:"render",value:function(){return Fc.a.createElement("div",{className:"unlock-panel"},Fc.a.createElement("div",{className:"lock-icon"}),Fc.a.createElement("p",null,Fc.a.createElement(el.a,{type:"password",placeholder:this.props.locale.unlockInputPlaceholder,onChange:this.changeUnlockPassword,onPressEnter:this.onPressEnter,autoComplete:"nope",addonAfter:Fc.a.createElement("span",{className:"unlock-btn",onClick:this.unLock},Fc.a.createElement(Tl,null),this.props.locale.unlock)})),Fc.a.createElement("p",{className:"error-info"},this.props.locale.errorFeedback),Fc.a.createElement("p",{className:"lock-info"},this.props.locale.lockedFeedback))}}]),n}(Fc.a.Component);g()(Om,"propTypes",{onUnlock:Hc.a.func,locale:Hc.a.object});var Sm=/[^a-zA-Z0-9\`\~\!\@\#\$\%\^\&\*\(\)\_\+\-\=\{\}\|\[\]\\\:\"\;\'\<\>\?\,\.\/]/,Rm=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),g()(de()(e),"changeLockPassword",(function(t){e.password=t.target.value})),g()(de()(e),"lock",(function(){e.password?e.password.match(Sm)?Yc.a.error(e.props.locale.passwordPattern):e.props.onLock(e.password):Yc.a.error(e.props.locale.noPassword)})),e}return u()(n,[{key:"render",value:function(){return Fc.a.createElement("div",{className:"lock-panel"},Fc.a.createElement("div",{className:"lock-icon"}),Fc.a.createElement("p",{className:"lock-title"},this.props.locale.lockInputTitle),Fc.a.createElement("p",null,Fc.a.createElement(el.a,{placeholder:this.props.locale.lockInputPlaceholder,onChange:this.changeLockPassword,autoComplete:"nope"})),Fc.a.createElement("p",null,Fc.a.createElement(tl.a,{type:"primary",onClick:this.lock},this.props.locale.ok),Fc.a.createElement(tl.a,{onClick:this.props.onCancelLock},this.props.locale.cancel)))}}]),n}(Fc.a.Component);g()(Rm,"propTypes",{onLock:Hc.a.func,onCancelLock:Hc.a.func,locale:Hc.a.object});var jm={},Pm={},Am=function(e){oe()(n,Ds);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e,a){var o;return l()(this,n),o=t.call(this),g()(de()(o),"destroy",(function(){o.engine&&o.engine.toolbar.disable(!1),delete jm[o.getId()]})),g()(de()(o),"updateValue",(function(e){o.password?o.crypting&&!e||(o.crypting=!0,window.yqWebApp?window.yqWebApp.alipayHttpRequest(o.cyptoApi,{method:"POST",body:JSON.stringify({pwd:o.password,text:o.originData,action:"encrypt"})}).then((function(t){o.crypting=!1,o.crypted=!0,o.cryptoData=t.data,o.setValue({locked:!0,cryptoData:o.cryptoData,originData:""},!0),e&&o.showUnLockpanel(),o.showStatus()})).catch((function(){o.crypting=!1,e&&o.engine.messageError(o.locale.encryptoError)})):Object(r.ajax)({method:"post",url:o.cyptoApi,data:{pwd:o.password,text:o.originData,action:"encrypt"},success:function(t){o.crypting=!1,o.crypted=!0,o.cryptoData=t.data,o.setValue({locked:!0,cryptoData:o.cryptoData,originData:""},!0),e&&o.showUnLockpanel(),o.showStatus()},error:function(){o.crypting=!1,e&&o.engine.messageError(o.locale.encryptoError)}})):o.setValue({locked:!1,originData:o.originData},!0)})),g()(de()(o),"lock",(function(e){if(void 0!==e&&o.cachePassword(e),o.engine){if(!o.password)return void o.showLockPanel();o.updateValue(!0)}})),g()(de()(o),"unLock",(function(e){e&&o.cryptoData&&(o.disabled||o.decrypting||(o.decrypting=!0,window.yqWebApp?window.yqWebApp.alipayHttpRequest(o.cyptoApi,{method:"POST",body:JSON.stringify({pwd:e,text:o.cryptoData,action:"decrypt"})}).then((function(t){o.decrypting=!1,o.originData=void 0!==t.data?t.data:"",o.cachePassword(e),o.showOriginData(o.originData),o.locktrigger.find(".text").html(o.locale.lock),o.showStatus()})).catch((function(){o.decrypting=!1,o.showError()})):Object(r.ajax)({method:"post",url:o.cyptoApi,data:{pwd:e,text:o.cryptoData,action:"decrypt"},success:function(t){o.decrypting=!1,o.originData=void 0!==t.data?t.data:"",o.cachePassword(e),o.showOriginData(o.originData),o.locktrigger.find(".text").html(o.locale.lock),o.showStatus()},error:function(){o.decrypting=!1,o.showError()}})))})),g()(de()(o),"showError",(function(){o.errorCount+=1,5===o.errorCount&&(o.disabled=!0,kt(o.unLockContainer).addClass("locked"),o.delayClearLockStatus()),kt(o.unLockContainer).addClass("error")})),g()(de()(o),"delayClearLockStatus",(function(){setTimeout((function(){o.disabled=!1,o.errorCount=0,kt(o.unLockContainer).removeClass("error"),kt(o.unLockContainer).removeClass("locked")}),6e4)})),g()(de()(o),"showOriginData",(function(e){o.clear(),o.textarea[0].value=e,o.textarea.attr("data-origin-data",e),o.originData=e,o.locked=!1,Pm[o.getId()]=!0})),g()(de()(o),"showLockPanel",(function(){o.clear(),Vc.a.render(Fc.a.createElement(Rm,{onLock:o.lock,onCancelLock:o.onCancelLock,locale:o.locale}),o.lockContainer)})),g()(de()(o),"showUnLockpanel",(function(){o.locked=!0,o.clear(),Vc.a.render(Fc.a.createElement(Om,{onUnlock:o.unLock,locale:o.locale}),o.unLockContainer),delete Pm[o.getId()]})),g()(de()(o),"cachePassword",(function(e){o.password=e,jm[o.getId()]=e})),g()(de()(o),"clear",(function(){kt(o.unLockContainer).removeClass("error"),kt(o.unLockContainer).removeClass("locked"),Vc.a.unmountComponentAtNode(o.unLockContainer),o.lockContainer&&Vc.a.unmountComponentAtNode(o.lockContainer)})),g()(de()(o),"onCancelLock",(function(){o.clear()})),g()(de()(o),"onChangeValue",(function(e){var t=e.target.value;o.originData!==t&&(o.originData=t,o.updateValue())})),g()(de()(o),"onInput",(function(e){o.timer&&clearTimeout(o.timer),o.timer=setTimeout((function(){o.onChangeValue(e)}),3e3)})),g()(de()(o),"bindLockEvent",(function(){o.locktrigger=o.container.find(".locktrigger"),o.locktrigger.on("click",(function(){o.lock()}))})),g()(de()(o),"showStatus",(function(){o.engine&&(o.value.cryptoData?o.lockstatus.html(""):o.lockstatus.html(o.locale.unLockedInfo))})),g()(de()(o),"renderHTML",(function(e){if(o.cryptoData=o.value.cryptoData||"",o.originData=o.value.originData||"",o.container.append(kt(function(e,t){return'\n    <div class="lake-lockedtext">\n      '.concat(e?'\n      <div class="lake-lockedtext-header">\n        <h5>'.concat(t.title,'</h5>\n        <span class="lockstatus"></span>\n        <span class="locktrigger">\n          <span class="lake-icon lake-icon-lock"></span>\n          <span class="text">').concat(t.setPassword,"</span>\n        </span>\n      </div>"):"",'\n      <div class="lake-lockedtext-content">\n        <textarea class="lockedtext"></textarea>\n      </div>\n      <div class="unlock-container ').concat(e?"editing":"reading",'"></div>\n      <div class="lock-container"></div>\n    </div>\n  ')}(e,o.locale))),o.textarea=o.container.find(".lockedtext"),o.unLockContainer=o.container.find(".unlock-container")[0],o.lockContainer=o.container.find(".lock-container")[0],o.lockstatus=o.container.find(".lockstatus"),o.bindLockEvent(),o.showStatus(),o.locked=!Pm[o.getId()]&&o.locked,!e)if(o.cryptoData)o.locked=!0;else if(o.originData)return void o.showOriginData(o.originData);if(!o.locked){if(o.originData)return void o.showOriginData(o.originData);if(jm[o.getId()])return void o.unLock(jm[o.getId()])}o.cryptoData&&o.showUnLockpanel()})),o.engine=e,o.contentView=a,e?(o.card=e.card,o.locale=Cm[e.options.lang],o.cyptoApi=e.options&&e.options.lockedtext&&e.options.lockedtext.action?e.options.lockedtext.action:"/api/services/crypto"):(o.locale=Cm[a.options.lang],o.cyptoApi=a.options&&a.options.lockedtext&&a.options.lockedtext.action?a.options.lockedtext.action:"/api/services/crypto"),o.originData="",o.cryptoData="",o.password="",o.locked=!1,o.errorCount=0,o}return u()(n,[{key:"embedToolbar",value:function(){return[{type:"dnd"},{type:"copy"},{type:"separator"}].concat(x()(this.getMoreEmbedToolbarConfig()))}},{key:"activate",value:function(){this.engine&&this.engine.toolbar.disable(!0)}},{key:"unactivate",value:function(){this.engine&&this.engine.toolbar.disable(!1)}},{key:"renderView",value:function(){this.renderHTML(),this.toggleMargin(),this.textarea.attr("readonly",!0)}},{key:"renderEditor",value:function(){this.renderHTML(!0),this.toggleMargin(),this.textarea.on("change",this.onChangeValue),this.textarea.on("input",this.onInput)}},{key:"getId",value:function(){return this.value.uid||this.value.id}},{key:"render",value:function(e,t){this.value=t||{},this.contentView?this.renderView():this.renderEditor()}}]),n}();function Tm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}g()(Am,"type","block"),g()(Am,"uid",!0);var Dm=Xe.escape,Mm=Xe.sanitizeUrl,Nm=function(e){oe()(n,ah);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tm(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({defaultHeight:467},e)),g()(de()(r),"downloadFile",(function(){var e=r.value,t=e.src,n=e.name;if(t){var a=r.getTopEngine();a&&a.options&&a.options.downloadFileHandler?a.options.downloadFileHandler(Ps(t),n):window.open(Ps(t))}})),g()(de()(r),"onSaveBefore",(function(){return new Promise((function(e,t){"uploading"!==r.value.status?"transfering"!==r.value.status?e():t(r.locale.stillTransfering):t(r.locale.stillUploading)}))})),r}return u()(n,[{key:"hitBlack",value:function(e){return!(e=new URL(e,location.origin)).pathname.startsWith("/office/")&&!e.pathname.startsWith("/preview/")}},{key:"embedToolbar",value:function(){var e=this,t=[{type:"dnd"},{type:"copy"},{type:"separator"},{type:"expand"},{type:"collapse"},{type:"preferences",onClick:function(){e.setSidebar(),e.openPreferences=!0}},{type:"separator"}].concat(x()(this.getMoreEmbedToolbarConfig()));return this.state.readonly&&!this.value.download||t.unshift({type:"download",onClick:this.downloadFile.bind(this)}),t}},{key:"setSidebar",value:function(){}},{key:"collapse",value:function(){this.setValue({collapsed:!0}),this.render()}},{key:"expand",value:function(){this.setValue({collapsed:!1}),this.render()}},{key:"getUrl",value:function(){var e,t=this.getTopEngine().options;return e=t.uploadFileHandler?t.uploadFileHandler(this.value.src,t.previewOrigin,t.previewFrom):Es(this.value.src,t.previewOrigin,t.previewFrom),Mm(e)}},{key:"correctURL",value:function(e){return e}},{key:"resolvePreview",value:function(e){return As(e.replace("/office/","/preview/"),{json:!0})}},{key:"getAcceptExt",value:function(){var e=this.value,t=e.ext;return e.name&&/\.mindnode\.zip$/.test(e.name)?t="mindnode":e.name&&/\.xmind\.zip$/.test(e.name)&&(t="xmind"),t}},{key:"renderCollapse",value:function(){var e=this.value,t=this.getUrl(),n=this.correctURL(t),r=this.getAcceptExt(),o=this.container.append('\n      <div class="lake-embed lake-embed-upload lake-embed-upload-collapse" style="position: relative">\n        <div class="lake-embed-upload-file-icon lake-svg-icon-'.concat(Dm(r),'"></div>\n        <div class="lake-embed-upload-collapse-body">\n          <div class="lake-embed-upload-collapse-name" >\n            <a href="').concat(n,'" target="_blank">').concat(Dm(e.name),'</a>\n            <span class="lake-embed-upload-collapse-file-size">').concat(Dm(a.FileUtils.getFileSize(e.size)),'</span>\n          </div>\n        </div>\n        <a class="lake-embed-upload-icon lake-svg-icon-preview" href="').concat(n,'" target="_blank"></a>\n      </div>\n    '));this.root=o}},{key:"getStatusTips",value:function(){var e=this.value,t=this.locale;return"uploading"===e.status?t.uploading:""}},{key:"renderExpand",value:function(){var e=this.value,t=this.options,n=e.status,r=e.ext,o=this.getHeight(),i=this.getUrl(),c=this.correctURL(i),l=t.transition,s=this.state.readonly?" lake-card-readonly":"",u=this.getStatusTips(),d=this.getAcceptExt(),f=kt('\n      <div class="lake-embed lake-embed-upload'.concat(s,'">\n        <div class="lake-embed-upload-header">\n          <span class="lake-embed-upload-icon lake-embed-upload-file-icon lake-svg-icon-').concat(Dm(d),'"></span>\n          <a href="').concat(Dm(c),'" target="_blank">\n            <span class="lake-embed-upload-file-name" style="max-width: calc(100% - 60px)"> ').concat(Dm(e.name),' </span>\n            <span data-role="status-tips">').concat(u,'</span> <span data-role="percent"></span>\n          </a>\n          <a class="lake-embed-upload-icon lake-svg-icon-preview" href="').concat(Dm(c),'" target="_blank"></a>\n        </div>\n        <div class="lake-embed-upload-body">\n          <div class="lake-embed-content-bg">\n            <span class="lake-icon lake-icon-loading"></span>\n          </div>\n          <iframe\n            frameborder="0"\n            allowfullscreen="true"\n            style="height: ').concat(Dm(o),"px; transition: ").concat(Dm(l),'"\n          ></iframe>\n          <div class="lake-embed-mask"></div>\n        </div>\n      </div>\n    ')),p=f.find("iframe");if(this.container.append(f),this.root=f,this.iframe=p,this.mask=f.find(".lake-embed-mask"),e.height&&p.attr("data-height",o),"done"===n){"xls"!==r&&"xlsx"!==r||p.css("border-top","none");var h=a.ua.desktop&&window.appConfig&&window.appConfig.pdfViewer;if(a.ua.desktop&&h&&["mindnode.zip","mindnode","pdf","psd","xmind"].includes(r)){var m=this;this._fetchPreviewURL(c,(function(e){try{var t="".concat(h,"?file=").concat(encodeURIComponent(e));m.renderIframe(p,t,2e3)}catch(e){}}))}else this.renderIframe(p,"".concat(As(c,{view:"doc_embed"})),2e3)}!0===this.state.activated&&this.hideMask()}},{key:"renderReadView",value:function(){this.state.collapsed?this.renderCollapse():(this.renderExpand(),this.hideMask())}},{key:"didInsert",value:function(e){if("uploading"===e.status||"transfering"===e.status){var t=this.getTopEngine();if(!e.uid||!t.uploader||!t.uploader.uploadingFiles[e.uid])return;t&&t.asyncEvent&&this.bindEvent(t.asyncEvent,"save:before",this.onSaveBefore)}}},{key:"getEmbedEmbedTitle",value:function(){var e=this.getAcceptExt(),t=this.value;return'\n        <span class="lake-svg-icon-'.concat(Dm(e),'" style="\n          float: left;\n          margin-top: 5px;\n          margin-right: 6px;\n          width: 12.6px;\n          height: 13.5px;\n          background-size: 12.6px 13.5px;\n        "></span>\n        ').concat(Dm(t.name),"\n    ")}},{key:"renderEditView",value:function(){this.state.collapsed?this.renderCollapse():(this.renderExpand(),this.renderResizeController())}},{key:"isError",value:function(){return"error"===this.value.status}},{key:"renderError",value:function(){var e=this.value,t=this.container,n=this.locale;Vc.a.render(Fc.a.createElement(Nd,{cardIcon:'<span class="lake-svg-icon lake-svg-icon-error-file"></span>',variableContent:(e.message?e.message:n.invalid)+" "+e.name,fixedContent:e.ext?e.ext:"",message:e,block:!0,docWidth:this.getContainerWidth()}),t[0])}},{key:"render",value:function(){var e=this.state,t=this.value||{},r=t.collapsed;this.value=t,t.status=t.status||"done",e.collapsed=void 0!==r&&r,!t.ext&&t.src&&(t.ext=a.FileUtils.getFileExtname(t.src)),Bc()(se()(n.prototype),"render",this).call(this),this.toggleMargin(),this.refreshToolbar()}},{key:"destroy",value:function(){Bc()(se()(n.prototype),"destroy",this).call(this),this.restoreSideBar()}},{key:"_fetchPreviewURL",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;Object(r.ajax)({method:"get",url:this.resolvePreview(e),success:function(e){var n=e.data;t(n.url)},error:function(){a>0&&setTimeout((function(){n._fetchPreviewURL(e,t,a-1)}),3e3)}})}}]),n}();function Lm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Im(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lm(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}g()(Nm,"type","block");var Bm={en:{preferences:"Local File Preferences"},"zh-cn":{preferences:"本地文件设置"}},zm=function(e){oe()(n,Nm);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),g()(de()(e),"sidebarName","localdoc"),e}return u()(n,[{key:"embedToolbar",value:function(){var e=this,t=Bc()(se()(n.prototype),"embedToolbar",this).call(this);return t&&this.engine&&this.value&&!1!==this.engine.options.allowResource&&!1!==this.engine.options.allowSaveToResource&&"done"===this.value.status&&t.splice(2,0,{type:"button",name:"saveToResource",iconName:"save-folder",title:this.engine.locale.embedToolbar.saveToResource,onClick:function(){var t=e.getTopEngine();t&&t.event.trigger("saveToResource",{name:"localdoc",data:Im({},e.value)})}}),t}},{key:"setSidebar",value:function(){var e=this.value,t=Bm[this.getLang()];this.engine.sidebar.set({name:"localdoc",title:t.preferences,className:"lake-localdoc-sidebar",data:e})}},{key:"correctURL",value:function(e){var t=this.engine||this.contentView;return t&&t.options&&t.options.localdoc&&t.options.localdoc.domain?new URL(e,t.options.localdoc.domain).href:e}}]),n}(),Fm={colors:[["#000000","#262626","#595959","#8C8C8C","#BFBFBF","#D9D9D9","#E9E9E9","#F5F5F5","#FAFAFA","#FFFFFF"],["#F5222D","#FA541C","#FA8C16","#FADB14","#52C41A","#13C2C2","#1890FF","#2F54EB","#722ED1","#EB2F96"],["#FFE8E6","#FFECE0","#FFEFD1","#FFF8BD","#E4F7D2","#D3F5F0","#D4EEFC","#DEE8FC","#EFE1FA","#FAE1EB"],["#FFA39E","#FFBB96","#FFD591","#FFF08F","#B7EB8F","#87E8DE","#91D5FF","#ADC6FF","#D3ADF7","#FFADD2"],["#FF4D4F","#FF7A45","#FFA940","#FFEC3D","#73D13D","#36CFC9","#40A9FF","#597EF7","#9254DE","#F759AB"],["#CF1322","#D4380D","#D46B08","#D4B106","#389E0D","#08979C","#096DD9","#1D39C4","#531DAB","#C41D7F"],["#820014","#871400","#873800","#614700","#135200","#00474F","#003A8C","#061178","#22075E","#780650"]]};function Um(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}Fm._map=function(){for(var e={},t=Fm.colors,n=0,r=t.length;n<r;n++)for(var a=0,o=t[n].length;a<o;a++)e[t[n][a]]={y:n,x:a};return e}(),Fm.getStroke=function(e){var t=Fm._map[e];return t&&(2===t.y||3===t.y&&t.x>2&&t.x<5)?this.colors[4][t.x]:e},Fm.getColors=function(){return this.colors};var Vm=function(e){oe()(n,e);var t=Um(n);function n(){var e;l()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),g()(de()(e),"toState",(function(e,t){var n=e.hex?me()(e.hex):me()(e),r=n.toHsl(),a=n.toHsv(),o=n.toRgb(),i=n.toHex();return 0===r.s&&(r.h=t||0,a.h=t||0),{hsl:r,hex:"000000"===i&&0===o.a?"transparent":"#".concat(i),rgb:o,hsv:a,oldHue:e.h||t||r.h,source:e.source}})),g()(de()(e),"getContrastingColor",(function(t){if(!t)return"#fff";var n=e.toState(t);return"transparent"===n.hex?"rgba(0,0,0,0.4)":(299*n.rgb.r+587*n.rgb.g+114*n.rgb.b)/1e3>=210?"#8C8C8C":"#FFFFFF"})),g()(de()(e),"onSelect",(function(t,n){n.preventDefault(),n.stopPropagation(),e.props.onSelect&&e.props.onSelect(t)})),e}return u()(n,[{key:"render",value:function(){var e=this.props,t=e.color,n=e.activeColors,r=e.defaultColor,a=e.setStroke,o=["#FFFFFF","#FAFAFA"].indexOf(t)>=0,i=n.indexOf(t)>=0,c=t===r,l={check:{fill:this.getContrastingColor(t),display:i?"block":"none"},block:{backgroundColor:"".concat(t)}};return a&&(l.block.border="1px solid ".concat(Fm.getStroke(t))),Fc.a.createElement("span",{className:vl()("lake-colorboard-group-item",{"lake-colorboard-group-item-border":o,"lake-colorboard-group-item-active":i,"lake-colorboard-group-item-special":c}),onClick:this.onSelect.bind(this,t)},Fc.a.createElement("span",{style:l.block},Fc.a.createElement("svg",{style:l.check,viewBox:"0 0 18 18"},Fc.a.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))))}}]),n}(Fc.a.Component);g()(Vm,"propTypes",{color:Hc.a.string,activeColors:Hc.a.array,defaultColor:Hc.a.string,onSelect:Hc.a.func,setStroke:Hc.a.bool});var qm=function(e){oe()(n,e);var t=Um(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"render",value:function(){var e=this.props,t=e.data,n=void 0===t?[]:t,r=e.activeColors,a=e.defaultColor,o=e.onSelect,i=e.setStroke;return Fc.a.createElement("span",{className:"lake-colorboard-group"},n.map((function(e){return Fc.a.createElement(Vm,{color:e,key:e,activeColors:r,defaultColor:a,onSelect:o,setStroke:i})})))}}]),n}(Fc.a.Component);g()(qm,"propTypes",{activeColors:Hc.a.array,defaultColor:Hc.a.string,data:Hc.a.array,onSelect:Hc.a.func,setStroke:Hc.a.bool});var Hm=function(e){oe()(n,e);var t=Um(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"render",value:function(){var e=this.props.activeColors,t=this.props,n=t.defaultColor,r=t.onSelect,a=t.setStroke,o=this.props.colors;return o||(o=Fm.getColors()),(0===e.length||1===e.length&&""===e[0])&&(e=[n]),Fc.a.createElement("div",{className:"lake-colorboard"},o.map((function(t,o){return Fc.a.createElement(qm,{data:t,key:o,activeColors:e,defaultColor:n,onSelect:r,setStroke:a})})))}}]),n}(Fc.a.Component);function Wm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ym(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wm(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}g()(Hm,"propTypes",{activeColors:Hc.a.array,defaultColor:Hc.a.string,onSelect:Hc.a.func,colors:Hc.a.array,setStroke:Hc.a.bool});var Gm=Xe.escape,Xm=Xe.unescape,Km=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;l()(this,n),r=t.call(this,e);var a=e.cardValue.colorIndex;return r.state={activeColors:[e.colors[a]]},r}return u()(n,[{key:"change",value:function(e){this.props.onChange(Ym(Ym({},this.props.cardValue),e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.colors,r=t.onPressEnter,a=t.onFocus,o=t.onBlur,i=this.state.activeColors;return Fc.a.createElement("div",null,Fc.a.createElement(el.a,{defaultValue:Xm(this.props.cardValue.label),onChange:function(t){e.change({label:Gm(t.target.value.trim())})},draggable:"false",onDragStart:function(e){e.preventDefault(),e.stopPropagation()},onClick:function(e){e.stopPropagation()},onMouseDown:function(e){e.stopPropagation(),e.target.focus()},onFocus:a,onBlur:o,onPressEnter:r}),Fc.a.createElement(Hm,{activeColors:i,setStroke:!0,onSelect:function(t){e.change({colorIndex:n.indexOf(t)}),e.setState({activeColors:[t]})},colors:[n]}))}}]),n}(Fc.a.Component);g()(Km,"propTypes",{onChange:Hc.a.func,cardValue:Hc.a.object,colors:Hc.a.array,onFocus:Hc.a.func,onBlur:Hc.a.func,onPressEnter:Hc.a.func});var Zm={en:{defaultLabel:"SET LABEL"},"zh-cn":{defaultLabel:"设置标签"}};function $m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$m(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jm=Fm.getColors(),eg=[[Jm[2][0],Jm[6][0]],[Jm[2][3],Jm[6][3]],[Jm[2][4],Jm[6][4]],[Jm[0][6],Jm[0][2]],[Jm[2][6],Jm[6][6]],[Jm[2][7],Jm[6][7]]],tg=function(e){oe()(n,Ds);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"onChange",value:function(e){this.value=Object.assign(this.value,e),this.updateLabel(),this.engine&&this.engine.change.change()}},{key:"onConfirm",value:function(){this.value&&this.setValue(this.value)}},{key:"focusInput",value:function(){this.editorContainer.find("input")[0].focus()}},{key:"unactivate",value:function(){this.state.readonly||(this.editorContainer.hide(),this.setValue({},!0),this.labelContainer.removeClass("lake-label-selected"),this.engine.readonly(!1),Bs(this))}},{key:"updateEditorPosition",value:function(){var e=this.labelContainer.getBoundingClientRect();this.editorContainer.css("left","".concat(e.left,"px")),this.editorContainer.css("top","".concat(e.top+24,"px"))}},{key:"activate",value:function(){this.state.readonly||(this.editorContainer.show(),this.labelContainer.addClass("lake-label-selected"),this.updateEditorPosition(),Is(this))}},{key:"select",value:function(){this.labelContainer.addClass("lake-label-selected")}},{key:"unselect",value:function(){this.state.activated&&!this.state.readonly||this.labelContainer.removeClass("lake-label-selected")}},{key:"selectByOther",value:function(e){this.labelContainer.css("border","2px solid "+e)}},{key:"unselectByOther",value:function(){this.labelContainer.css("border","")}},{key:"updateLabel",value:function(){var e=this.value,t=e.colorIndex,n=e.label,r=eg[t][0],a=eg[t][1],o=n,i=1;n||(o=this.locale.defaultLabel,i=.45),this.labelContainer.css("background",r),this.labelContainer.css("color",a),this.labelContainer.css("opacity",i),this.state.activated?this.labelContainer.addClass("lake-label-selected"):this.labelContainer.removeClass("lake-label-selected"),this.labelContainer.text(Xe.unescape(o))}},{key:"renderView",value:function(){var e=this.container;this.labelContainer=kt('\n      <span class="lake-card-label-container"></span>\n    '),e.append(this.labelContainer),this.updateLabel(),!this.state.readonly&&zs(this.labelContainer)}},{key:"renderEditor",value:function(){var e=this,t=this.container,n=this.value,r=this.engine,a=this.cardRoot,o=kt('<div class="lake-card-label-editor"></div>');this.editorContainer=o,t.append(o),Fs({editorContainer:o,engine:r,cardRoot:a}),Vc.a.render(Fc.a.createElement(Km,{colors:eg.map((function(e){return e[0]})),onChange:function(t){e.onChange(t)},onFocus:function(){o.addClass("input-focus"),e.engine.readonly(!0)},onBlur:function(){e.onConfirm(),o.removeClass("input-focus")},onPressEnter:function(){e.onConfirm()},cardValue:n,defaultValue:this.defaultValue}),o[0])}},{key:"getDefaultValue",value:function(){return{label:"",colorIndex:0}}},{key:"render",value:function(){var e=this.getLang(),t=Zm[e],n=this.getDefaultValue();this.locale=t,this.value=this.value||{},this.value=Qm(Qm({},n),this.value),this.defaultValue=n,this.renderView(),this.state.readonly||this.renderEditor()}},{key:"destroy",value:function(){Bc()(se()(n.prototype),"destroy",this).call(this),Bs(this)}}]),n}();g()(tg,"type","inline");var ng="https://".concat("wxmp.processon.com","/embed/"),rg="https://".concat("www.processon.com","/embed/"),ag="https://".concat("www.processon.com","/chart_image/id/"),og="https://assets.processon.com/embed/";function ig(e){return e.startsWith(rg)||e.startsWith("https://www.processon.com/view/link/")||e.startsWith(ng)||e.startsWith(og)}function cg(e){if(e.startsWith("<iframe")){var t=e.match(/src="([^>]{1,200}[^>])"/);e=t?t[1]:""}return e.startsWith("https://www.processon.com/mindmap/")?e.replace("https://www.processon.com/mindmap/",rg):e.startsWith("https://www.processon.com/diagraming/")?e.replace("https://www.processon.com/diagraming/",rg):e.startsWith("https://www.processon.com/apps/")?e.replace("https://www.processon.com/apps/",rg):ig(e)?e:void 0}var lg=["https://free.modao.cc/app/","https://org.modao.cc/","https://modao.cc/"],sg=["https://free.modao.cc/app/design/"];function ug(e){if(!e)return!1;for(var t=0,n=sg.length;t<n;t++)if(e.startsWith(sg[t]))return!1;for(var r=0;r<lg.length;r++){var a=lg[r];if(e.startsWith(a))return!0}return!1}var dg=["https://map.gaode.com/","https://ditu.gaode.com/","https://www.gaode.com/","https://www.amap.com/","https://ditu.amap.com/","https://amap.com/","https://gaode.com/"];function fg(e){if(!e)return!1;for(var t=0,n=dg.length;t<n;t++)if(e.startsWith(dg[t]))return!0;return!1}var pg=null;function hg(e){pg||(pg=new DOMParser);try{var t=pg.parseFromString(e,"text/html");if(!t.body)return null;var n=t.body.firstChild;if("IFRAME"!==n.nodeName)return null;if(n)return n.src||null}catch(e){return null}}var mg=[/^https:\/\/codepen\.io\/[^\/]+\/(embed|pen|full)\//];function gg(e){return mg.some((function(t){return t.test(e)}))}var vg=[/^https:\/\/www\.figma\.com\/embed/];function yg(e){return vg.some((function(t){return t.test(e)}))}var bg=[{id:"riddle",name:"Riddle",domain:["https://riddle.alibaba-inc.com/"],urlPattern:[/https:\/\/riddle\.alibaba-inc\.com\/riddles\/.+/],toEmbedUrl:function(e){if(e.includes("/iframe"))return e;var t=new URL(e);return t.pathname.endsWith("/iframe")||(t.pathname+="/iframe"),t.toString()}},{id:"deepinsight",name:"DeepInsight",domain:["https://deepinsight.alipay.com/"],urlPattern:[/^https:\/\/deepinsight\.alipay\.com\/pc\.htm\?reportId=[^\/]+/]},{id:"herbox",name:"Herbox",domain:["https://herbox-embed.alipay.com/","https://herbox.online/"],urlPattern:[/^https:\/\/herbox\.online\/p\/.+/,/^https:\/\/herbox-embed\.alipay\.com\/s\/.+/,/^https:\/\/herbox-embed\.alipay\.com\/p\/.+/]},{id:"anymock",name:"Anymock",domain:["https://tools.antfin-inc.com/"],urlPattern:[],toEmbedUrl:function(e){if(!window.location.pathname.endsWith("/edit"))return e;var t=new URL(e);return t.searchParams.set("edit","1"),t.toString()}}];function kg(e){return e?bg.find((function(t){return!!t.domain.find((function(t){return e.startsWith(t)}))})):null}function wg(e){return bg.map((function(e){return e.name})).join(e)}function xg(e){var t=kg(e);return!!t&&(!(t.urlPattern.length>0)||t.urlPattern.some((function(t){return t.test(e)})))}var _g={isMatchDomain:function(e){return!!kg(e)},isDomain:xg,getDocEmbedURL:function(e){if(e.startsWith("<iframe")&&(e=hg(e)),!xg(e))return null;var t=kg(e);return t?("function"==typeof t.toEmbedUrl&&(e=t.toEmbedUrl(e)),e):null},getIframeAllow:function(e){var t=kg(e);return t&&"riddle"===t.id?"clipboard-write https://riddle.alibaba-inc.com;":null},showInPlaceholder:{extranet:!1,intranet:!0},placeholder:function(e){return"en-us"===e?"Paste page url here, support: ".concat(wg(", ")):"粘贴页面链接到此处，支持：".concat(wg("、"))},help:"https://yuque.antfin.com/lark/help/embed_third#FhgMF",alias:["riddle","deepinsight","herbox"],name:"ali"},Eg=/^https?:\/\/music\.163\.com\/(#\/)?song\?id\=(\d+)/i;function Cg(e){return e.startsWith("http://music.163.com/outchain/player")||e.startsWith("https://music.163.com/outchain/player")}var Og=/https?:\/\/\S*\.xiami\.com\/song\/([^\/?#]+)/;function Sg(e){return e.startsWith("https://h5.xiami.com/app")||e.startsWith("http://h5.xiami.com/app")||e.startsWith("https://www.xiami.com/webapp/")}function Rg(e){return e.startsWith("http://www.ximalaya.com/thirdparty/player/sound/")||e.startsWith("https://www.ximalaya.com/thirdparty/player/sound/")}function jg(e){return e.startsWith("https://www.youtube.com/embed/")}function Pg(e){return e.match(/^https:.*\.youku\.com\//)}function Ag(e){return e&&e.match(/^https:.*\.bilibili\.com\//)}function Tg(e){return e.startsWith("https://cloud.video.taobao.com/")}var Dg=/^(https?:\/\/[\S]+?\.canva\.cn\/design\/)((?:[^\/]+\/)+)(view|edit)$/i;function Mg(e){return e&&e.match(/^https:\/\/[\S]+?\.canva\.cn\//)}var Ng=/^[a-z0-9]/i,Lg=/[a-z0-9]$/i;function Ig(e){return Ng.test(e)&&(e=" "+e),Lg.test(e)&&(e+=" "),e}function Bg(e){return e&&e.match(/^https:\/\/([^\/]+\.)?jinshuju\.(com|net)\//)}var zg,Fg,Ug=[{isMatchDomain:function(e){return e&&Pg(e)},isDomain:Pg,getDocEmbedURL:function(e){if(e.startsWith("https://player.youku.com/embed/"))return e;var t=e.match(/^https?:\/\/\w+\.youku\.com\/v_show\/id_([^\.]+)/i);return t?"https://player.youku.com/embed/".concat(t[1]):null},simple:"https://v.youku.com/v_show…",example:"https://player.youku.com/embed/XNDQ2Mzc1OTEyOA==",name:"youku"},{isMatchDomain:function(e){return Ag(e)},isDomain:Ag,getDocEmbedURL:function(e){if(e.startsWith("<iframe")&&(e=hg(e)),e.startsWith("https://player.bilibili.com/player.html?"))return e;if(e.startsWith("http://player.bilibili.com/player.html?"))return e.replace(/^http:/i,"https:");var t=e.match(/^https?:\/\/\w+\.bilibili\.com\/video\/av(\d+)/i);if(t){var n=t[1],r=e.match(/p=(\d+)/);return r&&(r=r[1]),"https://player.bilibili.com/player.html?aid=".concat(n).concat(r?"&p=".concat(r,"&page=").concat(r):"")}var a=new URL(e,location.origin),o=(a.origin+a.pathname).match(/^https?:\/\/\w+\.bilibili\.com\/video\/(bv[^\/]+)\/?$/i);if(o){var i,c=o[1];return/\b(?:p=(\d+))/.test(a.search)&&(i=RegExp.$1),"https://player.bilibili.com/player.html?bvid=".concat(c).concat(i?"&p=".concat(i,"&page=").concat(i):"")}return null},simple:"https://www.bilibili.com…",example:"https://player.bilibili.com/player.html?aid=55895675",name:"bilibili"},{isMatchDomain:function(e){return e&&Tg(e)},isDomain:Tg,getDocEmbedURL:function(e){return e.startsWith("https://cloud.video.taobao.com/")?e:null},simple:"https://cloud.video.taobao.com…",name:"taobao"},{isMatchDomain:function(e){return Mg(e)},isDomain:Mg,getDocEmbedURL:function(e){e=(e=new URL(e,location.origin)).origin+e.pathname;var t=Dg.exec(e);if(t&&t[2]){var n=t[2].split("/"),r=t[2];return n.length>1&&n[0]&&(r=n[0]+"/"),t[1]+r+"view?embed"}return null},simple:"https://www.canva.cn/design/…",example:"https://www.canva.cn/design/DAD3c63mhHU/view?embed",name:"canva"},{isMatchDomain:function(e){return!!e&&(e.startsWith("https://h5.xiami.com/")||e.startsWith("http://h5.xiami.com/")||e.startsWith("https://www.xiami.com/"))},isDomain:Sg,getDocEmbedURL:function(e){return e.startsWith("<iframe")?e=(e=hg(e))&&e.replace("autoPlay=1&",""):Og.test(e)&&(e="https://www.xiami.com/webapp/embed-player?id="+RegExp.$1),Sg(e)?e:null},showInPlaceholder:{extranet:!0,intranet:!0},simple:"https://xiami.com/song/181…",example:"https://www.xiami.com/webapp/embed-player?id=1816059093",name:"xiami"},{isMatchDomain:function(e){return e&&/^https:\/\/jb\.modao\.cc\//.test(e)},isDomain:ug,getDocEmbedURL:function(e){if(e.startsWith("<iframe")){var t=e.match(/src="([^>]{1,200}?[^>])"/);e=t?t[1]:""}if(ug(e)){var n=new URL(e,lg[2]);return(e=n.origin+n.pathname).endsWith("embed")?e=e.replace("embed","embed/v2"):e.endsWith("/embed/v2")||(e+="/embed/v2"),e+n.hash}},showInPlaceholder:{extranet:!0,intranet:!1},placeholder:function(e){return e.thirdparty.placeholders.modao},example:"https://free.modao.cc/app/2cd26580a6717a147454df7470e7ec464093cba3/embed/v2#screen=sk71k6d1dfxulzx",name:"modao"},_g,{isMatchDomain:function(e){return fg(e)},isDomain:fg,getDocEmbedURL:function(e){return fg(e)?e:null},name:"amap",showInPlaceholder:{extranet:!0,intranet:!0},simple:"https://ditu.amap.com…",example:"https://ditu.amap.com/"},{isMatchDomain:function(e){return e&&e.startsWith("https://music.163.com/")},isDomain:Cg,getDocEmbedURL:function(e){return e.startsWith("<iframe")?e=(e=hg(e))&&e.replace("auto=1&","auto=0&"):Eg.test(e)&&(e="https://music.163.com/outchain/player?type=2&id=".concat(RegExp.$2,"&auto=0&height=66")),Cg(e)?e:null},simple:"https://music.163.com/song…",example:"https://music.163.com/outchain/player?type=2&id=1420830402&auto=0&height=66",name:"music163"},{isMatchDomain:function(e){return e&&Rg(e)},isDomain:Rg,getDocEmbedURL:function(e){return e.startsWith("<iframe")&&(e=hg(e)),Rg(e)?e:null},name:"ximalaya"},{isMatchDomain:function(e){return e&&jg(e)},isDomain:jg,getDocEmbedURL:function(e){return e.startsWith("<iframe")&&(e=hg(e)),jg(e)?e:null},name:"youtube"},{isMatchDomain:function(e){return e&&e.startsWith("https://www.figma.com/")},isDomain:yg,getDocEmbedURL:function(e){return e.startsWith("<iframe")?e=hg(e):e.match(/^https:\/\/www\.figma\.com\/file|proto\//)&&(e="https://www.figma.com/embed?embed_host=share&url="+encodeURIComponent(e)),yg(e)?e:null},showInPlaceholder:{extranet:!0,intranet:!1},example:"https://www.figma.com/embed?embed_host=share&url=https%3A%2F%2Fwww.figma.com%2Ffile%2FqwccoVDBmt1FZ6U4eGus2p%2F%25E8%25AF%25AD%25E9%259B%2580%25E6%258F%2592%25E5%259B%25BE",simple:"https://www.figma.com…",name:"figma"},{isMatchDomain:function(e){return e&&e.startsWith("https://codepen.io/")},isDomain:gg,getDocEmbedURL:function(e){return e.startsWith("<iframe")&&(e=hg(e)),gg(e)?e.replace("/pen/","/embed/"):null},showInPlaceholder:{extranet:!0,intranet:!1},simple:"https://codepen.io/afc163…",example:"https://codepen.io/afc163-1472555193/embed/oNXqWGP",name:"codepen"},{isMatchDomain:function(e){return e&&(e.startsWith("https://www.processon.com/")||e.startsWith("https://wxmp.processon.com/"))},isDomain:ig,getDocEmbedURL:cg,name:"processon",simple:"https://www.processon.c…",example:"https://www.processon.com/embed/5d006c43e4b071ad5a206ed2",processonEmbedUrl:rg,processonImageUrl:ag,processonAssetsUrl:og},{isMatchDomain:function(e){return Bg(e)},isDomain:Bg,getDocEmbedURL:function(e){var t=!1;if(e.startsWith("<iframe")&&(e=hg(e),t=!0),!Bg(e))return null;var n=new URL(e,location.origin),r=n.pathname,a=n.origin;return r.startsWith("/f/")?t?e:a+r+"?background=white&banner=show&embedded=true":/^\/forms\/([^\/]+)(?:\/[^\/]*)?$/.test(r)?a+"/f/"+RegExp.$1+"?background=white&banner=show&embedded=true":null},simple:"https://www.jinshuju.net/f/…",example:null,name:"jinshuju"}],Vg={"zh-cn":{illegalURL:Fc.a.createElement("span",null,"无法显示链接内容，请查看",Fc.a.createElement("a",{href:"https://www.yuque.com/yuque/gpvawt/fuu6h3",target:"_blank"},"帮助")),illegalDomain:"暂不支持显示该网站内容",xiamiOfflineForEdit:"虾米链接不可用，请重新插入其他音乐链接",xiamiOfflineForRead:"该卡片链接无法访问"},en:{illegalURL:Fc.a.createElement("span",null,"Unable to display the link content, please check the ",Fc.a.createElement("a",{href:"https://www.yuque.com/yuque/gpvawt/fuu6h3",target:"_blank"},"help")),illegalDomain:"No support for displaying the content of this website",xiamiOfflineForEdit:"The link is not accessible",xiamiOfflineForRead:"The link is not accessible"}},qg=["ximalaya","youtube","music163"],Hg=["ximalaya","music163"],Wg=function(e){oe()(n,sh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){var e;return l()(this,n),e=t.call(this,{defaultHeight:500}),g()(de()(e),"thirdparts",[]),e}return u()(n,[{key:"init",value:function(){var e=this.getTopEngine();if(e.isReadonly)this.thirdparts=Ug.slice(0);else{var t=ud()?qg:Hg,n=dd(e.options.thirdPartyService);n=n.concat(t),this.thirdparts=Ug.filter((function(e){return-1!==n.indexOf(e.name)}))}}},{key:"activate",value:function(){var e=this;Bc()(se()(n.prototype),"activate",this).call(this),setTimeout((function(){!e.state.readonly&&e.engine.toolbar.disable(!0)}),200),this.state.readonly||this.iframe&&this.container.css("border","1px solid #d9d9d9")}},{key:"unactivate",value:function(){Bc()(se()(n.prototype),"unactivate",this).call(this),!1===this.state.activated||this.destroyed||this.state.readonly||(this.engine.toolbar.disable(!1),this.iframe&&this.container.css("border","1px solid rgba(0,0,0,0)"))}},{key:"getExampleURL",value:function(){var e=this.getThirdPartyByEntrance(this.value.entrance);return e&&e.example||null}},{key:"getHelpUrl",value:function(){var e=this.getThirdPartyByEntrance(this.value.entrance);return e&&e.help||null}},{key:"getThirdPartyByEntrance",value:function(e){return e?this.thirdparts.find((function(t){return t.name===e||!(!t.alias||!t.alias.includes(e))})):null}},{key:"getHeight",value:function(){return this.state.maximize?this.getContainerHeight():Bc()(se()(n.prototype),"getHeight",this).call(this)}},{key:"maximize",value:function(){this.iframe.css("height",this.getHeight()+"px"),this.iframe.css("transition","none"),this.container.css("overflow","hidden"),this.state.readonly||(this.engine.toolbar.hide(),this.hideRisizeController())}},{key:"restore",value:function(){this.iframe.css("height",this.getHeight()+"px"),this.container.css("overflow","initial"),this.state.readonly||(this.engine.toolbar.show(),this.showRisizeController())}},{key:"isError",value:function(){return!!ks.isWechatMiniApp}},{key:"getLocale",value:function(){var e=this.getViewEngine();return e?e.locale:null}},{key:"getPlaceHolder",value:function(){var e=this.getLocale();if(!e)return"";var t=this.getThirdPartyByEntrance(this.value.entrance);return t?t.placeholder?t.placeholder(e):e.thirdparty.tip.replace("%s",Ig(e.thirdparty.names[t.name])).replace("%s",Ig(t.simple)):e.thirdparty.defaultTip}},{key:"embedToolbar",value:function(){var e=this.alias;if(!e&&this.value.url){var t=this.getDocEmbedURL(this.value.url);t&&(e=t.name)}var r=Bc()(se()(n.prototype),"embedToolbar",this).call(this);return!e||this.isMusic(e)||this.isOnlineVideo(e)?this.state.readonly?[]:r:(r.length>0&&r.unshift({type:"separator"}),r.unshift({type:"maximize"}),r)}},{key:"hitBlack",value:function(e){return this.thirdparts.every((function(t){return!t.isDomain(e)}))}},{key:"refreshToolbar",value:function(){var e=this.getViewEngine();e&&this.cardRoot&&(e.card.updateToolbar(this),e.card.showToolbar(this.cardRoot))}},{key:"afterHandleSubmit",value:function(){this.refreshToolbar()}},{key:"getDocEmbedURL",value:function(e){for(var t=this.thirdparts,n=0,r=t.length;n<r;n++){var a=t[n].getDocEmbedURL(e);if(a)return{name:t[n].name,url:a}}for(var o=!1,i=0,c=t.length;i<c;i++)if(t[i].isMatchDomain(e)){o=!0;break}var l=(this.getTopEngine().options||{}).lang||"zh-cn",s=Vg[l];return{url:null,message:o?s.illegalURL:s.illegalDomain}}},{key:"isMusic",value:function(e){return"xiami"===e||"music163"===e||"ximalaya"===e}},{key:"isOnlineVideo",value:function(e){return"youku"===e||"taobao"===e||"bilibili"===e}},{key:"destroy",value:function(){Bc()(se()(n.prototype),"destroy",this).call(this),this.state.readonly||this.engine.toolbar.disable(!1)}},{key:"render",value:function(){if(this.value||(this.value={}),this.value.src&&this.value.url||!this.getTopEngine().isReadonly){this.updateAlias();var e=this.alias,t=this.isMusic(e);if(this.isOnlineVideo(e)&&(this.options.resize=!1),"xiami"===e)return this.renderXiamiOfflineView();if("music163"===e?(this.value.height=86,this.options.resize=!1):"ximalaya"===e&&(this.value.height=36,this.options.resize=!1),"ali"===e){var r=_g.getIframeAllow(this.value.url);r&&(this.options.allow=r)}Bc()(se()(n.prototype),"render",this).call(this),this.state.readonly?this.iframe&&t&&this.container.css("border","1px solid rgba(0,0,0,0)"):this.iframe&&!this.state.activated&&t&&this.container.css("border","1px solid rgba(0,0,0,0)")}}},{key:"updateAlias",value:function(){if(!this.alias){var e=this.cardRoot.attr("data-card-alias");if(e)this.alias=e;else{var t=(this.value||{}).src;if(t)for(var n=Object.keys(this.thirdparts),r=0,a=n.length;r<a;r++){var o=this.thirdparts[n[r]];if(o.getDocEmbedURL(t))return this.cardRoot.attr("data-card-alias",o.name),void(this.alias=o.name)}}}}},{key:"renderError",value:function(){var e=this.container,t=this.locale;e.append('\n      <div class="lake-third-party-card-error">\n        <p><span class="lake-icon lake-icon-warning"></span></p>\n        <p>'.concat(t.wechatAlert,"</p>\n      </div>\n    "))}},{key:"renderXiamiOfflineView",value:function(){var e=this.getTopEngine(),t=(e.options||{}).lang||"zh-cn",n=Vg[t];this.container.html('\n      <div class="lake-third-party-xiami-error">\n        <span class="lake-svg-icon lake-svg-icon-audio-error-icon"></span>\n        '.concat(e.isReadonly?n.xiamiOfflineForRead:n.xiamiOfflineForEdit,"\n      </div>\n    "))}}]),n}(),Yg="price",Gg="daysCount",Xg="tip",Kg=(g()(zg={},Gg,{max:365,min:1}),g()(zg,Yg,{max:99,min:1}),g()(zg,Xg,{max:20,min:0}),zg),Zg=(g()(Fg={},Yg,!0),g()(Fg,Gg,!0),Fg);function $g(e,t,n){if(Zg[t]&&function(e){return null==e||""===e}(n))return e.premium.sidebar[t].error.required;switch(t){case Yg:case Gg:return function(e,t,n){return""===n||null==n?null:function(e,t,n,r,a){var o=e.premium.sidebar[t],i=Number(n);return function(e){return e=Number(e),Number.isNaN?Number.isNaN(e):window.isNaN(e)}(i)||!function(e){return Number.isInteger?Number.isInteger(e):(Number.parseInt?Number.parseInt(e,10):parseInt(e,10))===e}(i)||i+""!=n+""?o.error.invalid:i>a||i<r?o.error.range:null}(e,t,n,Kg[t].min,Kg[t].max)}(e,t,n);case Xg:return function(e,t,n){return""===(n=(n||"").replace(/\n+/g,""))||null==n?null:function(e,t,n,r,a){var o=e.premium.sidebar[t],i=n.length;return i<r||i>a?o.error.length:null}(e,t,n,Kg[t].min,Kg[t].max)}(e,t,n);default:return null}}var Qg=function(e){oe()(n,zc.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"render",value:function(){var e=this.props.data,t=e.expired;return e.readonly&&(t=e.expired&&"PAID"!==e.role),Fc.a.createElement("div",{className:"lake-premium-view ".concat(t?"expired":"")},this.renderShadowMask(),Fc.a.createElement("div",{className:"lake-premium-view-tip ".concat("PAID"===e.role?"paid":"")},this.renderTip()))}},{key:"renderTip",value:function(){return this.props.data.readonly?this.renderPreviewTip():this.renderEditingTip()}},{key:"renderPreviewTip",value:function(){var e,t=this.props.data;return e="OWNER"===t.role?this._renderOwnerPreviewTip():"PAID"===t.role?this._renderPaidPreviewTip():this._renderUnpaidPreviewTip(),Fc.a.createElement("div",{className:"lake-premium-view-tip-content"},e)}},{key:"renderEditingTip",value:function(){var e=this.props,t=e.data,n=e.engine,r=t.expired?n.locale.premium.expiredTip:n.locale.premium.defaultTip;return Fc.a.createElement("div",{className:"lake-premium-view-tip-content"},Fc.a.createElement("span",{className:"lake-icon lake-icon-yuan"}),(t.tip||"").substring(0,Kg.tip.max)||r)}},{key:"renderShadowMask",value:function(){var e=this.props.data;return e.expired||"OWNER"===e.role||"PAID"===e.role?null:Fc.a.createElement("div",{className:"lake-premium-shadow-mask"})}},{key:"_renderOwnerPreviewTip",value:function(){return this._renderUnpaidPreviewTip()}},{key:"_renderPaidPreviewTip",value:function(){return Fc.a.createElement(Fc.a.Fragment,null,Fc.a.createElement("span",{className:"lake-icon lake-icon-yuan"}),this.props.engine.locale.premium.paidTip)}},{key:"_renderUnpaidPreviewTip",value:function(){var e=this.props,t=e.data,n=e.engine;return t.expired?Fc.a.createElement(Fc.a.Fragment,null,n.locale.premium.expiredTip):Fc.a.createElement(Fc.a.Fragment,null,Fc.a.createElement("span",{className:"lake-icon lake-icon-yuan"}),(t.tip||"").substring(0,Kg.tip.max)||n.locale.premium.defaultTip)}}]),n}();function Jg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ev(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jg(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}g()(Qg,"propTypes",{engine:Hc.a.object.isRequired,data:Hc.a.shape({readonly:Hc.a.bool.isRequired,role:Hc.a.string,expired:Hc.a.bool,tip:Hc.a.string})}),g()(Qg,"defaultProps",{data:{}});var tv=function(e){oe()(n,Ds);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e,r){var a;return l()(this,n),a=t.call(this,e,r),g()(de()(a),"__engine",null),g()(de()(a),"__contentView",null),g()(de()(a),"__cardRoot",null),g()(de()(a),"__rootNode",null),g()(de()(a),"_sideBarIsShow",!1),g()(de()(a),"__onSaveBefore",(function(e){return e?Promise.resolve():new Promise((function(e,t){var n=a.getValue(),r=a.currentEngine().locale,o=$g(r,Yg,n.price);return o||(o=$g(r,Gg,n.daysCount))||(o=$g(r,Xg,n.tip))?t(o):void e()})).catch((function(e){return a.__showSidebar(),Promise.reject(e)}))})),g()(de()(a),"__onSyncUserInput",(function(e){a.__setCardValue(ev(ev({},a.__getCardValue()),e)),a.__updateView()})),a.__engine=e,a.__contentView=r,a.__disabled=(a.currentEngine().options.cardBlacklist||[]).includes("premium"),a}return u()(n,[{key:"currentEngine",value:function(){return this.__engine||this.__contentView}},{key:"isReadonly",value:function(){return!this.__engine}},{key:"embedToolbar",value:function(){return a.ua.mobile?[{type:"delete"}]:[{type:"dnd"},{type:"delete"}]}},{key:"activate",value:function(){Bc()(se()(n.prototype),"activate",this).call(this),this.__showSidebar()}},{key:"unactivate",value:function(){Bc()(se()(n.prototype),"unactivate",this).call(this),this.__hideSidebar()}},{key:"currentDocID",value:function(){return(this.currentEngine().metaManager.getRawMeta("skylark")||{}).docID}},{key:"getMargin",value:function(){return!0}},{key:"render",value:function(e,t){if(!this.__disabled)if(t&&t.docID&&t.docID!==this.currentDocID()){var n=this.currentEngine();this.isReadonly()?n.card.removeNode(this.cardRoot):n.card.removeNode(this.cardRoot,n)}else e=kt(e)[0],this.__rootNode!==e&&this.__reset(e),this.__setCardValue(t),this.__rootNode?this.__updateView():this.__initView(e),this.toggleMargin()}},{key:"getValue",value:function(){var e,t=this.__getCardViewData();return g()(e={},Yg,+t.price||null),g()(e,Gg,+t.daysCount||null),g()(e,Xg,(t.tip||"").substring(0,Kg.tip.max)||null),g()(e,"freeze",t.freeze),g()(e,"expired",t.expired),e}},{key:"destroy",value:function(){this.__destroyView(),this.__hideSidebar(),Bc()(se()(n.prototype),"destroy",this).call(this);var e=this.getTopEngine();e&&e.asyncEvent&&e.asyncEvent.off("save:before",this.__onSaveBefore)}},{key:"didInsert",value:function(){if(this.__cardRoot){var e=this.getTopEngine();e&&e.asyncEvent&&e.asyncEvent.on("save:before",this.__onSaveBefore)}}},{key:"__getCardValue",value:function(){return this.currentEngine().card.getValue(this.__cardRoot)||{}}},{key:"__setCardValue",value:function(e){this.currentEngine().card.setValue(this.__cardRoot,e)}},{key:"__initView",value:function(e){if(!this.__rootNode){if(this.__rootNode&&this.__rootNode!==e)return this.__destroyView(),this.__initView(e);this.__rootNode=e,Vc.a.render(Fc.a.createElement(Qg,{engine:this.currentEngine(),data:this.__getCardViewData()}),this.__rootNode)}}},{key:"__updateView",value:function(){Vc.a.render(Fc.a.createElement(Qg,{engine:this.currentEngine(),data:this.__getCardViewData()}),this.__rootNode)}},{key:"__getCardViewData",value:function(){var e=this.__getCardValue(),t=this.currentEngine().metaManager.getRawMeta("premium")||{},n=t.price||0===t.price;n&&(e.price=t.price,e.daysCount=t.daysCount);var r=this.isReadonly();return ev(ev({},e),{},{readonly:r,role:t.role||(r?"UNPAID":"OWNER"),freeze:!!n,expired:!!t.expired})}},{key:"__showSidebar",value:function(){var e=this.currentEngine();this._sideBarIsShow||e.sidebar.disable||e.isSub()||(this._sideBarIsShow=!0,e.sidebar.set({name:"premium",title:null,className:"lake-premium-sidebar",data:ev(ev({},this.__getCardViewData()),{},{onChange:this.__onSyncUserInput,validate:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $g.apply(void 0,[e.locale].concat(n))}}),showCloseBtn:!1}))}},{key:"__hideSidebar",value:function(){var e=this.currentEngine();this._sideBarIsShow&&(e.sidebar.disable||e.isSub()||(this._sideBarIsShow=!1,e.sidebar.restore("premium")))}},{key:"__reset",value:function(e){this.__destroyView(),this.__cardRoot=this.currentEngine().card.closest(e)}},{key:"__destroyView",value:function(){this.__rootNode&&Vc.a.unmountComponentAtNode(this.__rootNode),this.__rootNode=null}}]),n}();function nv(){var e=this,t=this.value,n=t.src,r=t.detail;if(this.contentView)r?ov.call(this,r):av.call(this);else{this.detailFetcher||(this.detailFetcher=new em(this));var a=this.detailFetcher.getCache(n);a||this.detailFetcher.get(n).then((function(t){var n=t.success,a=t.data;n?(e.setValue({detail:a}),e.value.mode&&"card"!==e.value.mode||ov.call(e,a)):r||av.call(e)})),r||a?r?ov.call(this,r):(this.setValue({detail:a}),ov.call(this,a)):rv.call(this)}}function rv(){var e=this.getLocale().bookmarkLink;iv.call(this,'<div class="lake-bookmark-link"><div class="lake-bookmark-link-loading">'.concat(e.loading,"</div></div>"))}function av(){var e=this.getLocale().bookmarkLink;iv.call(this,'<div class="lake-bookmark-link"><div class="lake-bookmark-link-error"><div>'.concat(e.loadingError,'</div><div class="lake-bookmark-link-error-tip">').concat(js(this.value.src)||"","</div></div></div>"))}function ov(e){var t="";e.icon&&(t='<img class="favicon" src="'.concat(js(e.icon),'"/>'));var n=js(function(e,t){return e.title?e.title:t.bookmarkLink.untitled}(e,this.getViewEngine().locale)),r=e.desc?js(e.desc):"&nbsp;",a=js(e.belong||e.url||"")||"&nbsp;",o="lake-bookmark-link-content ".concat(e.image?"has-cover":""),i=e.image?'<div class="lake-bookmark-link-cover" style="background-image: url('.concat(js(e.image),')"/>'):"";iv.call(this,'<div class="lake-bookmark-link">\n        <div class="'.concat(o,'">\n          <div class="lake-bookmark-link-title">').concat(n,'</div>\n          <div class="lake-bookmark-link-desc">').concat(r,'</div>\n          <div class="lake-bookmark-link-belong">').concat(t).concat(a,"</div>\n        </div>\n        ").concat(i,"\n      </div>"))}function iv(e){var t;this.engine||(t=this.value.src,!/^https?:/i.test(t)&&/^[a-z0-9_-]{2,}?:/i.test(t))||(e='<a href="'.concat(encodeURI(this.value.src),'" target="_blank">').concat(e,"</a>")),this.container.html(e)}g()(tv,"type","block");var cv=function(e){oe()(n,Ds);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"embedToolbar",value:function(){var e=this;return this.engine?[{type:"dnd"},{type:"gotolink",onClick:function(){e.value&&e.value.src&&e.getTopEngine().openLink(e.value.src)}},{type:"copy"},{type:"separator"}].concat(x()(this.getMoreEmbedToolbarConfig())):[]}},{key:"getLocale",value:function(){return this.getViewEngine().locale}},{key:"rerender",value:function(){nv.call(this)}},{key:"render",value:function(){this.value||(this.value={}),this.rerender(),this.toggleMargin()}}]),n}();g()(cv,"type","block");var lv=function(){function e(){l()(this,e)}return u()(e,null,[{key:"gen",value:function(){return $l.a.apply(void 0,arguments)}}]),e}(),sv={lang:Object(es.default)({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeWeekPlaceholder:["开始周","结束周"]},{locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"}),timePickerLocale:Object(es.default)({},{placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]})};sv.lang.ok="确 定";var uv=sv,dv={lang:Object(es.default)({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"}),timePickerLocale:Object(es.default)({},{placeholder:"Select time",rangePlaceholder:["Start time","End time"]})},fv={single:"单选",multiple:"多选",dataError:"获取投票数据失败",illegalData:"投票数据异常",voting:"投票中...",votingMessage:"正在投票中",fetching:"正在获取投票数据...",submitting:"正在提交投票数据中...",deleteConfirm:"确定删除该选项？",invalidVote:"投票数据无效",voteSuccess:"投票成功",voteFailure:"投票失败",closed:"已截止",closeText:"截止",reVote:"重新投票",memberCountTip:"%d 人已投票",voteCountTip:"%d 票",countTip:"%d 票",voteBtn:"投票",okText:"确认",cancelText:"取消",form:{title:"请输入投票标题",addBtn:"添加选项",closeTime:"截止时间",item:"选项"},notSupport:"评论、发言暂不支持投票卡片"},pv={single:"Single",multiple:"Multiple",dataError:"Failed to load data",illegalData:"Illegal data",voting:"voting...",votingMessage:"Voting",fetching:"fetching ...",submitting:"voting ...",deleteConfirm:"Are you sure you want to delete it?",invalidVote:"Invalid voting data",voteSuccess:"vote success",voteFailure:"vote failed",closed:"Ended",closeText:"",reVote:"re-vote",memberCountTip:"%d voted",voteCountTip:"%d voted",countTip:"%d votes",voteBtn:"vote",okText:"Ok",cancelText:"Cancel",form:{title:"Enter a title",addBtn:"Add",closeTime:"Deadline",item:"Option"},notSupport:"Cards are not allowed in comments"};ls(".lake-vote-card {\n  padding: 16px 24px;\n  background-color: #fafafa;\n  font-size: 14px;\n  color: #595959;\n}\n.lake-vote-card-title {\n  display: flex;\n}\n.lake-vote-card-title .ant-select {\n  flex-shrink: 0;\n  width: auto;\n}\n.lake-vote-card-title .ant-select .ant-select-selection-selected-value {\n  margin-right: 5px;\n  font-size: 14px;\n}\n.lake-vote-card-title .lake-vote-title-input {\n  margin-left: 8px;\n  margin-right: 36px;\n}\n.lake-vote-card-section {\n  margin-bottom: 16px;\n}\n.lake-vote-card-section:last-child {\n  margin-bottom: auto;\n}\n.lake-vote-card-item {\n  display: flex;\n  align-items: center;\n  margin-bottom: 8px;\n}\n.lake-vote-card-item.disallow-delete {\n  margin-right: 36px;\n}\n.lake-vote-card-item:last-child {\n  margin-bottom: 0;\n}\n.lake-vote-card-item .item-icon {\n  margin-left: 16px;\n  width: 20px;\n  height: 20px;\n  font-size: 18px;\n  color: #8c8c8c;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.lake-vote-card .lake-vote-item-input,\n.lake-vote-card .lake-vote-title-input {\n  flex: 1;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n}\n.lake-vote-card .lake-vote-item-input .le-multiline-input-hidden,\n.lake-vote-card .lake-vote-title-input .le-multiline-input-hidden,\n.lake-vote-card .lake-vote-item-input textarea,\n.lake-vote-card .lake-vote-title-input textarea {\n  padding: 6px 11px;\n  line-height: 26px;\n}\n.lake-vote-card-add-item-btn {\n  border: none;\n  background: none;\n  outline: none;\n  cursor: pointer;\n  user-select: none;\n}\n.lake-vote-card-add-item-btn .plus-icon {\n  margin-right: 8px;\n}\n.lake-vote-card .datetime-picker-wrap {\n  position: relative;\n}\n.lake-vote-card .datetime-picker-wrap .datetime-picker-label {\n  position: absolute;\n  top: 0;\n  left: 10px;\n  z-index: 1;\n  pointer-events: none;\n  height: 100%;\n  display: flex;\n  align-items: center;\n}\n.lake-vote-card .datetime-picker-wrap .datetime-picker {\n  width: 309px;\n  color: #8c8c8c;\n}\n.lake-vote-card .datetime-picker-wrap .datetime-picker .ant-picker-input input {\n  color: #8c8c8c;\n  text-align: right;\n}\n.lake-vote-card-preview-overlay .ant-popover-content {\n  min-width: auto;\n}\n"),ls(".le-multiline-input {\n  position: relative;\n  top: 0;\n  left: 0;\n  overflow: hidden;\n}\n.le-multiline-input-hidden {\n  white-space: pre-wrap;\n  word-break: break-all;\n  opacity: 0;\n  padding: 0 10px 0 0;\n}\n.le-multiline-input textarea,\n.le-multiline-input .detail {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  background: #fff;\n  padding: 0 10px 0 0;\n  outline: none;\n  resize: none;\n  border: none;\n  overflow: auto;\n  letter-spacing: inherit;\n}\n.le-multiline-input textarea::placeholder,\n.le-multiline-input .detail::placeholder {\n  color: #bfbfbf;\n}\n");var hv=/(?:[\u0100-\uffff\s]|^)https?:\/\/(?:[^\/.]+?\.)+?[^\/.]+?(?:\/\S*?)?(?:(?=[\u0100-\uffff\s])|$)/g;function mv(e){if(!e)return e;var t=/\s/;return(e=Xe.escape(e)).replace(hv,(function(e){var n="",r="";return"h"!==e[0]&&(n=e[0],e=e.substring(1)),t.test(e[e.length-1])&&(r=e[e.length-1],e=e.substring(0,e.length-1)),"".concat(n,'<a href="').concat(encodeURI(e),'" target="_blank">').concat(e,"</a>").concat(r)}))}var gv=["onChange","placeholder","value","isReadonly","onKeyDownEnter","autoLink","className"];var vv=function(e){oe()(n,zc.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"_handleKeyDown",(function(e){e.stopPropagation(),13!==e.keyCode||e.shiftKey&&e.metaKey&&e.ctrlKey||r.props.onKeyDownEnter()})),g()(de()(r),"_handleChange",(function(e){e.target.value=e.target.value.replace(/\n/g,""),r.props.onChange(e)})),r.textAreaRef=Fc.a.createRef(),r}return u()(n,[{key:"componentDidMount",value:function(){var e=this;this.textAreaRef.current&&(this.textAreaRef.current.addEventListener("keydown",this._handleKeyDown,!1),this.props.autoFocus&&setTimeout((function(){e.focus()}),16))}},{key:"componentDidUpdate",value:function(e){this.props.autoFocus&&!e.autoFocus&&this.focus()}},{key:"focus",value:function(){this.textAreaRef.current&&this.textAreaRef.current.focus()}},{key:"componentWillUnmount",value:function(){this.textAreaRef.current&&this.textAreaRef.current.removeEventListener("keydown",this._handleKeyDown,!1)}},{key:"render",value:function(){var e=this.props;e.onChange;var t=e.placeholder,n=e.value,r=e.isReadonly;e.onKeyDownEnter,e.autoLink;var a=e.className,o=void 0===a?"":a,i=ns()(e,gv);o+=" le-multiline-input",r&&(t="");var c=this._renderDetail();return Fc.a.createElement("div",ml()({className:o},i),Fc.a.createElement("div",{className:"le-multiline-input-hidden"},n||t||Fc.a.createElement("br",null)),c)}},{key:"_renderDetail",value:function(){var e=this.props,t=e.placeholder,n=e.value,r=e.isReadonly,a=e.autoLink;return r&&a?Fc.a.createElement("div",{className:"detail",dangerouslySetInnerHTML:{__html:mv(n)}}):Fc.a.createElement("textarea",{ref:this.textAreaRef,onChange:this._handleChange,value:n||"",disabled:r,placeholder:t})}}]),n}();g()(vv,"propTypes",{onChange:Hc.a.func,value:Hc.a.any,placeholder:Hc.a.any,isReadonly:Hc.a.bool.isRequired,autoFocus:Hc.a.bool,onKeyDownEnter:Hc.a.func,className:Hc.a.string,autoLink:Hc.a.bool}),g()(vv,"defaultProps",{value:"",autoLink:!1,onChange:function(){},onKeyDownEnter:function(){}});var yv=function(e){oe()(n,zc.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"getLocale",value:function(){return"en"===this.props.lang?pv:fv}},{key:"render",value:function(){var e=this,t=this.getLocale(),n=this.props.data;return Fc.a.createElement("div",{className:"lake-vote-card"},Fc.a.createElement("div",{className:"lake-vote-card-title lake-vote-card-section"},Fc.a.createElement(Kc.a,{value:n.type||"single",size:"large",onChange:function(t){e.props.onTypeChange(t)}},Fc.a.createElement(Kc.a.Option,{value:"single"},t.single),Fc.a.createElement(Kc.a.Option,{value:"multiple"},t.multiple)),Fc.a.createElement(vv,{className:"lake-vote-title-input",placeholder:t.form.title,onChange:function(t){e.props.onTitleChange(t.target.value)},onKeyDownEnter:this.props.onTitleKeyDownEnter,value:n.title})),Fc.a.createElement("div",{className:"lake-vote-card-item-box lake-vote-card-section"},this.renderItems()),Fc.a.createElement("div",{className:"lake-vote-card-control lake-vote-card-section"},Fc.a.createElement("button",{className:"lake-vote-card-add-item-btn",onClick:this.props.onAddItem},Fc.a.createElement(Dl.a,{className:"plus-icon"}),t.form.addBtn)),Fc.a.createElement("div",null,Fc.a.createElement("div",{className:"datetime-picker-wrap"},Fc.a.createElement("div",{className:"datetime-picker-label"},t.form.closeTime),Fc.a.createElement(nl.a,{locale:"zh-cn"===this.props.lang?uv:dv,className:"datetime-picker",size:"large",placeholder:"",value:Jl()(n.deadline),showTime:!0,showToday:!1,allowClear:!1,onChange:this.props.onDateTimeChange,suffixIcon:Fc.a.createElement(Ml.a,null)}))))}},{key:"renderItems",value:function(){var e=this,t=this.props.data,n=[].concat(t.items||[null,null]);0===n.length?(n.push(null),n.push(null)):1===n.length&&n.push(null);var r=n.length>2;return n.map((function(t,n){return t=t||{},Fc.a.createElement("div",{key:t.id||n,className:"lake-vote-card-item ".concat(r?"":"disallow-delete")},Fc.a.createElement(vv,{className:"lake-vote-item-input",onKeyDownEnter:function(){e.props.onKeyDownEnter(n)},onChange:function(t){e.props.onItemChange(n,t.target.value)},placeholder:"".concat(e.getLocale().form.item," ").concat(n+1),value:t.value||"",autoFocus:e.props.autoFocusIndex===n,isReadonly:!1}),r?e.renderDeleteButton(t,n):null)}))}},{key:"renderDeleteButton",value:function(e,t){var n=this,r=this.getLocale();return e.value&&e.value.length?Fc.a.createElement(rl.a,{overlayClassName:"lake-vote-card-delete-confirm",okText:r.okText,cancelText:r.cancelText,title:r.deleteConfirm,onConfirm:function(){n.props.onDeleteItem(t)}},Fc.a.createElement("div",{className:"item-icon"},Fc.a.createElement("span",{className:"lake-icon lake-icon-delete"}))):Fc.a.createElement("div",{className:"item-icon",onClick:function(){n.props.onDeleteItem(t)}},Fc.a.createElement("span",{className:"lake-icon lake-icon-delete"}))}}]),n}();function bv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bv(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}g()(yv,"propTypes",{lang:Hc.a.oneOf(["zh-cn","en"]).isRequired,data:Hc.a.object.isRequired,onItemChange:Hc.a.func,onAddItem:Hc.a.func,onDeleteItem:Hc.a.func,onDateTimeChange:Hc.a.func,onTitleChange:Hc.a.func,onTypeChange:Hc.a.func,onKeyDownEnter:Hc.a.func,onTitleKeyDownEnter:Hc.a.func,autoFocusIndex:Hc.a.number}),g()(yv,"defaultProps",{lang:"zh-cn",data:{},onItemChange:function(){},onAddItem:function(){},onDeleteItem:function(){},onDateTimeChange:function(){},onTitleChange:function(){},onTypeChange:function(){},onTitleKeyDownEnter:function(){},onKeyDownEnter:function(){}}),ls(".lake-vote-reading-card {\n  padding: 24px;\n  background-color: #fafafa;\n  min-height: 200px;\n  position: relative;\n}\n.lake-vote-reading-card .error-tip {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #7d7d7d;\n  height: 152px;\n}\n.lake-vote-reading-card .loading {\n  text-align: center;\n  line-height: 200px;\n}\n.lake-vote-reading-card .loading > i {\n  margin-right: 20px;\n}\n.lake-vote-reading-card .vote-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  user-select: none;\n  color: #888;\n  background: rgba(255, 255, 255, 0.4);\n}\n.lake-vote-reading-card .vote-overlay > i {\n  margin-right: 10px;\n}\n.lake-vote-reading-card-title {\n  display: flex;\n  margin-bottom: 24px;\n}\n.lake-vote-reading-card-type {\n  padding: 0 10px;\n  height: 24px;\n  text-align: center;\n  line-height: 24px;\n  background-color: #D9E9FA;\n  color: #262626;\n  border-radius: 4px;\n  font-size: 14px;\n  margin-right: 9px;\n  flex-shrink: 0;\n}\n.lake-vote-reading-card-title-text {\n  font-size: 16px;\n  color: #262626;\n  line-height: 24px;\n  font-weight: bold;\n}\n.lake-vote-reading-card-item {\n  display: flex;\n  align-items: center;\n  padding: 9px 16px;\n  border: 1px solid #e8e8e8;\n  border-radius: 2px;\n  background-color: #fff;\n  margin-bottom: 8px;\n  cursor: pointer;\n}\n.lake-vote-reading-card-item:last-child {\n  margin-bottom: 0;\n}\n.lake-vote-reading-card-item-sign {\n  margin-right: 17px;\n}\n.lake-vote-reading-card-item-text {\n  font-size: 14px;\n  color: #595959;\n  line-height: 22px;\n  word-break: break-word;\n}\n.lake-vote-reading-card-item .ant-radio-inner {\n  background-color: #fff;\n}\n.lake-vote-reading-card .item-preview {\n  padding: 9px 16px;\n  border: 1px solid #e8e8e8;\n  border-radius: 2px;\n  background-color: #fff;\n  margin-bottom: 8px;\n}\n.lake-vote-reading-card .item-preview.participated .item-preview-data {\n  color: #096dd9;\n}\n.lake-vote-reading-card .item-preview.participated .item-preview-proportion-value {\n  background-color: #096dd9;\n}\n.lake-vote-reading-card .item-preview-data {\n  font-size: 14px;\n  color: #595959;\n  line-height: 22px;\n  display: flex;\n  justify-content: space-between;\n}\n.lake-vote-reading-card .item-preview-data-text {\n  word-break: break-word;\n}\n.lake-vote-reading-card .item-preview-data-numbers {\n  margin-left: 10px;\n  flex-shrink: 0;\n  cursor: pointer;\n  display: flex;\n}\n.lake-vote-reading-card .item-preview-data-numbers .percentage {\n  min-width: 40px;\n  margin-left: 10px;\n  text-align: right;\n}\n.lake-vote-reading-card .item-preview-proportion {\n  margin-top: 8px;\n  height: 8px;\n  background-color: #f5f5f5;\n  border-radius: 4px;\n}\n.lake-vote-reading-card .item-preview-proportion-value {\n  background-color: #bad6f5;\n  height: 8px;\n  border-radius: 4px;\n}\n.lake-vote-reading-card .lake-vote-card-result-footer {\n  font-size: 14px;\n  color: #8c8c8c;\n  line-height: 22px;\n  margin-top: 18px;\n  display: flex;\n}\n.lake-vote-reading-card .lake-vote-card-result-footer .member-count,\n.lake-vote-reading-card .lake-vote-card-result-footer .deadline {\n  margin-right: 12px;\n}\n.lake-vote-reading-card .lake-vote-card-result-footer > button {\n  padding: 0 5px;\n  background-color: unset;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  color: #595959;\n}\n.lake-vote-reading-card .vote-btn {\n  margin-top: 16px;\n}\n.lake-vote-card-preview-overlay .ant-popover-inner-content {\n  padding-right: 0;\n}\n.lake-vote-card-preview-members {\n  padding-right: 16px;\n  max-width: 400px;\n  max-height: 300px;\n  overflow-y: auto;\n}\n");var wv=function(e){oe()(n,zc.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){var e;l()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),g()(de()(e),"loading",!1),g()(de()(e),"destroyed",!1),g()(de()(e),"state",{detail:null,localVoteData:{},voting:!1,error:!1,forceShowVoteView:!1}),g()(de()(e),"_onItemCheckedStatusChange",(function(t,n){"single"===e.props.data.type?e.setState({localVoteData:g()({},t,n)}):e.setState({localVoteData:kv(kv({},e.state.localVoteData),{},g()({},t,n))})})),g()(de()(e),"_vote",(function(){var t=e.getLocale();if(e.state.voting)Yc.a.warn(t.votingMessage);else{var n=e.state.localVoteData,a=e.props.data,o=a.voteId,i=a.items,c=[],l=[];(i||[]).forEach((function(e){var t=e.id;t&&-1===l.indexOf(t)&&l.push(t)})),Object.keys(n||{}).forEach((function(e){e&&n[e]&&-1===c.indexOf(e)&&c.push(e)})),o&&0!==c.length&&0!==l.length?(e.setState({voting:!0}),Object(r.ajax)({url:"/api/votes",method:"post",data:{doc_id:e.props.docId,vote_id:e.props.data.voteId,items:c.join(",")},success:function(){Yc.a.success(t.voteSuccess),e.loading=!1,e.setState({voting:!1,forceShowVoteView:!1,detail:null})},error:function(n){console.error(n),Yc.a.error(t.voteFailure),e.setState({voting:!1})}})):Yc.a.warn(t.invalidVote)}})),g()(de()(e),"_onReVote",(function(){e.setState({forceShowVoteView:!0,localVoteData:{}})})),e}return u()(n,[{key:"render",value:function(){var e=this.props.data;return this.destroyed?null:e&&e.voteId&&e.items?this.state.error?Fc.a.createElement("div",{className:"lake-vote-reading-card"},Fc.a.createElement("div",{className:"error-tip"},this.getLocale().dataError)):Fc.a.createElement(al.a,{autoInsertSpaceInButton:!1},Fc.a.createElement("div",{className:"lake-vote-reading-card"},this.renderVoteOverlay(),this.renderContent())):Fc.a.createElement("div",{className:"lake-vote-reading-card"},Fc.a.createElement("div",{className:"error-tip"},this.getLocale().illegalData))}},{key:"componentWillUnmount",value:function(){this.destroyed=!0}},{key:"getLocale",value:function(){return"en"===this.props.lang?pv:fv}},{key:"renderVoteOverlay",value:function(){return this.state.voting?Fc.a.createElement("div",{className:"vote-overlay"},Fc.a.createElement(Nl.a,null),this.getLocale().voting):null}},{key:"renderContent",value:function(){if(!this.state.detail)return this.loadDetail();var e=this.props.data,t=this.state,n=t.detail,r=t.forceShowVoteView,a=Jl()(),o=r||!n.voted.length&&a.isBefore(Jl()(e.deadline));return Fc.a.createElement(Fc.a.Fragment,null,Fc.a.createElement("div",{className:"lake-vote-reading-card-title lake-vote-card-section"},Fc.a.createElement("div",{className:"lake-vote-reading-card-type"},"single"===e.type?this.getLocale().single:this.getLocale().multiple),Fc.a.createElement("div",{className:"lake-vote-reading-card-title-text"},e.title||"")),o?this.renderVoteItems():this.renderResult(),Fc.a.createElement("div",{className:"lake-vote-reading-card-vote-btn"},o?this.renderVoteBtn():null))}},{key:"renderResult",value:function(){var e,t,n,r,a,o,i=this,c=(e=this.state.detail,t=this.props.data,n={},r=0,a=new Set,o={},e.items.forEach((function(e){r+=e.count,o[e.id]=e})),e.items.forEach((function(e){o[e.id].proportion=Math.floor(e.count/r*1e4)/100})),n.items=t.items.map((function(t){var n=o[t.id]||null;return n&&n.members.forEach((function(e){a.add(e)})),{id:t.id,value:t.value,count:n?n.count:0,members:n?n.members:[],proportion:n?n.proportion:0,participated:-1!==e.voted.indexOf(t.id)}})),n.totalCount=r,n.memberCount=a.size,n),l=c.items.map((function(e){return Fc.a.createElement("div",{className:"item-preview ".concat(e.participated?"participated":""),key:e.id},Fc.a.createElement("div",{className:"item-preview-data"},Fc.a.createElement("div",{className:"item-preview-data-text"},e.value),i.renderNumbers(e)),Fc.a.createElement("div",{className:"item-preview-proportion"},Fc.a.createElement("div",{className:"item-preview-proportion-value",style:{width:"".concat(e.proportion,"%")}})))}));return Fc.a.createElement(Fc.a.Fragment,null,Fc.a.createElement("div",{className:"lake-vote-reading-card-item-box"},l),this.renderResultFooter(c))}},{key:"renderResultFooter",value:function(e){var t=this.props.data.deadline,n=Jl()(),r=Jl()(t),a=!n.isBefore(r),o=this.getLocale();return Fc.a.createElement("div",{className:"lake-vote-card-result-footer"},Fc.a.createElement("div",{className:"member-count"},o.memberCountTip.replace("%d",e.memberCount)),Fc.a.createElement("div",{className:"deadline"},a?o.closed:"".concat(Jl()(t).format("YYYY-MM-DD HH:mm:ss")," ").concat(o.closeText)),a?null:Fc.a.createElement("button",{className:"re-vote-btn",onClick:this._onReVote},o.reVote))}},{key:"renderVoteItems",value:function(){var e=this,t=this.props.data,n=this.state.localVoteData;return t.items.map((function(r){var a;return a="single"===t.type?Fc.a.createElement(ol.a,{onChange:function(t){e._onItemCheckedStatusChange(r.id,t.target.checked)},checked:!!n[r.id]}):Fc.a.createElement(il.a,{onChange:function(t){e._onItemCheckedStatusChange(r.id,t.target.checked)},checked:!!n[r.id]}),Fc.a.createElement("label",{className:"lake-vote-reading-card-item",key:r.id},Fc.a.createElement("div",{className:"lake-vote-reading-card-item-sign"},a),Fc.a.createElement("div",{className:"lake-vote-reading-card-item-text"},r.value))}))}},{key:"renderVoteBtn",value:function(){if(!this.state.detail.user_id)return null;var e=this.state.localVoteData,t=Object.keys(e).some((function(t){return e[t]}));return Fc.a.createElement(tl.a,{className:"vote-btn",onClick:this._vote,disabled:!t},this.getLocale().voteBtn)}},{key:"renderNumbers",value:function(e){var t=Fc.a.createElement("div",{className:"item-preview-data-numbers"},this.getLocale().voteCountTip.replace("%d",e.count)," ",Fc.a.createElement("div",{className:"percentage"},e.proportion,"%"));if(e.members.length){var n=Fc.a.createElement("div",{className:"lake-vote-card-preview-members"},e.members.join(" "));return Fc.a.createElement(Xc.a,{trigger:"hover",overlayClassName:"lake-vote-card-preview-overlay",content:n},t)}return t}},{key:"loadDetail",value:function(){return this.loading||(this._fetchDetail(),this.loading=!0),Fc.a.createElement("div",{className:"loading"},Fc.a.createElement(Nl.a,null),this.getLocale().fetching)}},{key:"_fetchDetail",value:function(){var e=this;Object(r.ajax)({url:"/api/votes",method:"get",data:{doc_id:this.props.docId,vote_id:this.props.data.voteId,deadline:Jl()(this.props.data.deadline).toISOString(),items:this.props.data.items.map((function(e){return e.id})).join(",")},success:function(t){var n=t.data;e.setState({detail:xv(n,e.props.data)})},error:function(t){console.error(t),e.setState({error:!0})}})}}]),n}();function xv(e,t){if("single"!==t.type)return e;var n={},r=e.items.map((function(e){var t=e.count;if(0===t)return e;var r=(e.members||[]).filter((function(r){return n[r]?(t--,!1):(n[r]=e.id,!0)}));return{id:e.id,count:t,members:r}})),a=e.voted[0]||[];return kv(kv({},e),{},{items:r,voted:a})}g()(wv,"propTypes",{lang:Hc.a.oneOf(["zh-cn","en"]).isRequired,data:Hc.a.object.isRequired,docId:Hc.a.number.isRequired}),g()(wv,"defaultProps",{lang:"zh-cn",data:{}}),ls(".lake-vote-card-error {\n  height: 200px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #7d7d7d;\n}\n");var _v=function(e){oe()(n,zc.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),g()(de()(e),"state",{hasError:!1}),e}return u()(n,[{key:"componentDidCatch",value:function(e,t){console.error(e,t)}},{key:"render",value:function(){return this.state.hasError?Fc.a.createElement("div",{className:"lake-vote-card-error"},"en"===this.props.lang?"Card display is abnormal":"卡片显示异常"):this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),n}();g()(_v,"propTypes",{children:Hc.a.any,lang:Hc.a.oneOf(["zh-cn","en"]).isRequired}),g()(_v,"defaultProps",{lang:"zh-cn"}),ls(".lake-vote-card-not-support {\n  padding: 24px;\n  background-color: #fafafa;\n  color: #595959;\n  height: 200px;\n  line-height: 152px;\n  text-align: center;\n}\n");var Ev=function(e){oe()(n,zc.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"getLocale",value:function(){return"en"===this.props.lang?pv:fv}},{key:"render",value:function(){var e=this.getLocale();return Fc.a.createElement("div",{className:"lake-vote-card-not-support"},e.notSupport)}}]),n}();function Cv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ov(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cv(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}g()(Ev,"propTypes",{lang:Hc.a.oneOf(["zh-cn","en"]).isRequired}),g()(Ev,"defaultProps",{lang:"zh-cn"});var Sv=function(e){oe()(n,Ds);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),g()(de()(e),"_onItemChange",(function(t,n){e.value.items[t]&&(e.value=Ov(Ov({},e.value),{},{items:x()(e.value.items)}),e.value.items[t].value=n),e._saveCurrentValue(),e._renderEditingView(e.container[0],e.value)})),g()(de()(e),"_onAddItem",(function(){e.value=Ov(Ov({},e.value),{},{items:[].concat(x()(e.value.items),[{id:lv.gen()}])}),e._saveCurrentValue(),e._renderEditingView(e.container[0],e.value)})),g()(de()(e),"_onDateTimeChange",(function(t){e.value=Ov(Ov({},e.value),{},{deadline:t.toISOString()}),e._saveCurrentValue(),e._renderEditingView(e.container[0],e.value)})),g()(de()(e),"_onTypeChange",(function(t){e.value=Ov(Ov({},e.value),{},{type:t}),e._saveCurrentValue(),e._renderEditingView(e.container[0],e.value)})),g()(de()(e),"_onTitleChange",(function(t){e.value=Ov(Ov({},e.value),{},{title:t}),e._saveCurrentValue(),e._renderEditingView(e.container[0],e.value)})),g()(de()(e),"_onKeyDownEnter",(function(t){var n=x()(e.value.items);t+1<n.length?e._renderEditingView(e.container[0],e.value,t+1):n[t].value&&(n.push({id:lv.gen()}),e.value=Ov(Ov({},e.value),{},{items:n}),e._saveCurrentValue(),e._renderEditingView(e.container[0],e.value,t+1))})),g()(de()(e),"_onTitleKeyDownEnter",(function(){e._renderEditingView(e.container[0],e.value,0)})),g()(de()(e),"_onDeleteItem",(function(t){var n=x()(e.value.items);n.splice(t,1),e.value=Ov(Ov({},e.value),{},{items:n}),e._saveCurrentValue(),e._renderEditingView(e.container[0],e.value)})),g()(de()(e),"_saveCurrentValue",$()((function(){e.saveCardValue(e.value)}),32)),e}return u()(n,[{key:"embedToolbar",value:function(){var e=this;if(this.engine)return[{type:"dnd"},{type:"copyCardLink",onClick:function(){return e.copyCardEmbedLink()}},{type:"separator"}].concat(x()(this.getMoreEmbedToolbarConfig()))}},{key:"saveCardValue",value:function(e){var t=this.cardRoot;this.engine&&this.engine.card.setValue(t,e)}},{key:"render",value:function(e,t){var n=e[0],r=this.getTopEngine().options,a=r.cardBlacklist,o=r.cardWhitelist,i=r.docId;return this.toggleMargin(),this.contentView&&!i||this.engine&&(a&&-1!==a.indexOf("vote")||o&&-1===o.indexOf("vote"))?this._renderNotSupportView(n):this.engine?(t.voteId||(t=Ov(Ov({},t),{},{type:"single",voteId:lv.gen(),items:[{id:lv.gen()},{id:lv.gen()}],deadline:Jl()(Jl()().format("YYYY-MM-DD 00:00:00")).add(2,"days").toISOString()})),this.setValue(t,!0),void this._renderEditingView(n,t)):this._renderReadingView(n,this.value)}},{key:"destroy",value:function(){this.engine&&this.engine.toolbar.disable(!1),this.container[0]&&Vc.a.unmountComponentAtNode(this.container[0]),Bc()(se()(n.prototype),"destroy",this).call(this)}},{key:"_renderReadingView",value:function(e,t){var n=this.getTopEngine().options,r=n.lang,a=n.docId;Vc.a.render(Fc.a.createElement(_v,{lang:r},Fc.a.createElement(wv,{data:t,docId:a,lang:r})),e)}},{key:"_renderEditingView",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=this.getTopEngine().options.lang;Vc.a.render(Fc.a.createElement(_v,{lang:r},Fc.a.createElement(yv,{data:t,onItemChange:this._onItemChange,onAddItem:this._onAddItem,onDateTimeChange:this._onDateTimeChange,onDeleteItem:this._onDeleteItem,onTypeChange:this._onTypeChange,onTitleChange:this._onTitleChange,onKeyDownEnter:this._onKeyDownEnter,onTitleKeyDownEnter:this._onTitleKeyDownEnter,autoFocusIndex:n,lang:r})),e)}},{key:"_renderNotSupportView",value:function(e){var t=this.getTopEngine().options.lang;Vc.a.render(Fc.a.createElement(_v,{lang:t},Fc.a.createElement(Ev,{lang:t})),e)}}],[{key:"refreshCardValue",value:function(e){return e&&e.voteId?((e=Ov({},e)).voteId=lv.gen(),e.items&&e.items.forEach((function(e){e.id=lv.gen()})),e):{}}}]),n}();g()(Sv,"type","block"),ls(".lake-transfer-view {\n  height: 52px;\n  border: 1px solid #d8d8d8;\n  border-radius: 2px;\n  background-color: #fff;\n  font-size: 14px;\n  color: #262626;\n  padding: 0 16px;\n  display: flex;\n  align-items: center;\n}\n.lake-transfer-view .lake-transfer-view-info {\n  flex: 1;\n  display: flex;\n}\n.lake-transfer-view .lake-transfer-view-info .lake-svg-icon {\n  width: 24px;\n  height: 24px;\n}\n.lake-transfer-view .lake-transfer-view-info .lake-transfer-file-name {\n  margin-left: 12px;\n  margin-right: 6px;\n}\n.lake-transfer-view .lake-transfer-view-info .lake-transfer-file-size {\n  color: #a6a6a6;\n}\n.lake-transfer-view .lake-transfer-loading .anticon,\n.lake-transfer-view .lake-transfer-error .anticon {\n  margin-left: 6px;\n}\n.lake-transfer-view .lake-transfer-error {\n  color: #ff4d4f;\n}\n");var Rv={copying:"添加中",insertError:"插入失败"},jv={copying:"Copying",insertError:"Failed to insert"},Pv=function(e){oe()(n,zc.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"getLocale",value:function(){return"zh-cn"===this.props.lang?Rv:jv}},{key:"render",value:function(){var e=this.props;return Fc.a.createElement("div",{className:"lake-transfer-view"},Fc.a.createElement("div",{className:"lake-transfer-view-info"},Fc.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-cloud"}),Fc.a.createElement("div",{className:"lake-transfer-file-name"},e.fileName),Fc.a.createElement("div",{className:"lake-transfer-file-size"},e.fileSize?"(".concat(e.fileSize,")"):"")),this._renderTip())}},{key:"_renderTip",value:function(){var e=this.props,t=this.getLocale();return e.isError?Fc.a.createElement("div",{className:"lake-transfer-error"},t.insertError,Fc.a.createElement(Ll.a,null)):Fc.a.createElement("div",{className:"lake-transfer-loading"},t.copying,Fc.a.createElement(Nl.a,null))}}]),n}();function Av(e){if(e){var t=e.options.file||{},n=t.copyAction,r=t.uploadAction;return n||(r?r.replace("/api/upload/attach","/api/upload/copy").replace(/ctoken=[^&]+&/,""):"")}}g()(Pv,"propTypes",{isError:Hc.a.bool,fileName:Hc.a.string.isRequired,fileSize:Hc.a.string,lang:Hc.a.oneOf(["zh-cn","en"]).isRequired}),g()(Pv,"defaultProps",{lang:"zh-cn"});var Tv=function(e){oe()(n,Ds);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),g()(de()(e),"_loading",!1),e}return u()(n,[{key:"embedToolbar",value:function(){return[{type:"delete"}]}},{key:"render",value:function(e,t){var n=this,r=this.engine;this.value=t||{},r?"Doc"===this.value.target_type?setTimeout((function(){r.constructor.plugin.executePluginMethod(r,"transfer","onTransferComplete",n.cardRoot,n.value,{})}),32):this.value.filekey?this._loading||"error"===this.value.status||this.doCopy(this.value):this.setValue({status:"error"}):this.value.status="error",this.renderView()}},{key:"rerender",value:function(){this.render(this.container,this.value)}},{key:"doCopy",value:function(e){var t=this;if(!this._loading&&e.type){var n,o=this.getTopEngine(),i=Av(o);if(this._loading=!0,!i)return console.warn("无法执行复制：缺少 copy action"),this.setValue({status:"error",message:"复制失败"}),void this.rerender();Object(r.ajax)({method:"post",url:i,timeout:3e5,data:{attachments:[e.filekey],create_video:!0},success:(n=bl()(wl.a.mark((function n(r){var i,c,l;return wl.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=r.data,!(c=i[0].url)){n.next=16;break}if(!a.FileUtils.isImage(e.filename+"."+e.ext)){n.next=12;break}return n.prev=4,n.next=7,Dv(c);case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(4),console.warn("failed to load image: ",n.t0);case 12:return t.setValue({status:"done"}),t.rerender(),l=o.constructor.plugin,n.abrupt("return",l.executePluginMethod(o,"transfer","onTransferComplete",t.cardRoot,e,r.data[0]));case 16:t.setValue({status:"error",message:"复制失败"}),t.rerender();case 18:case"end":return n.stop()}}),n,null,[[4,9]])}))),function(e){return n.apply(this,arguments)}),error:function(e){console.error(e),t.setValue({status:"error",message:"复制失败"}),t.rerender()}})}}},{key:"renderView",value:function(){var e=this.value,t=void 0===e?{}:e;Vc.a.render(Fc.a.createElement(Pv,{isError:"error"===t.status,fileName:t.filename+"."+t.ext,lang:this.getTopEngine().options.lang||"zh-cn",fileSize:a.FileUtils.getFileSize(t.filesize||0)}),this.container[0])}}]),n}();function Dv(e){return new Promise((function(t,n){var r=new Image;r.onload=t,r.onerror=n,r.src=e}))}function Mv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mv(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}g()(Tv,"type","block");var Lv=function(e){oe()(n,Lc.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this),g()(de()(r),"_audio",null),g()(de()(r),"_canPlay",!1),g()(de()(r),"_ready",!1),Promise.resolve().then((function(){r._audio=new Audio(e),r._audio.autoplay=!1,r._audio.loop=!1,r._audio.preload=!1;var t=r._audio;t.addEventListener("canplay",(function(){r._audio&&(r._canPlay=!0,r.emit("canplay"))}),!1),t.addEventListener("suspend",(function(){r._audio&&100===r._getBufferedPercentage(t.buffered)&&r.emit("loaded")})),t.addEventListener("progress",(function(){r._audio&&r.emit("progress",{percentage:r._getBufferedPercentage(t.buffered)})})),t.addEventListener("loadedmetadata",(function(){r._audio&&(r._ready=!0,r._duration=t.duration,r.emit("loadedmetadata",{duration:r._duration}))}),!1),t.addEventListener("timeupdate",(function(){r._audio&&r.emit("timeupdate",r._calcTime(t.currentTime))}),!1),t.addEventListener("playing",(function(){r._audio&&(r._audio.currentTime>=r._duration?r.emit("pause"):r.emit("playing"))}),!1),t.addEventListener("pause",(function(){r._audio&&r.emit("pause")}),!1),t.addEventListener("ended",(function(){r._audio&&(r.emit("pause"),r.emit("ended"))}),!1),t.addEventListener("seeking",(function(){r._audio&&r.emit("seeking",Nv(Nv({},r._calcTime(t.currentTime)),{},{playStatus:""}))}),!1),t.addEventListener("seeked",(function(){r._audio&&r.emit("seeked",r._calcTime(t.currentTime))}),!1),t.addEventListener("error",(function(){r._audio&&r.emit("error")}))})),r}return u()(n,[{key:"destroy",value:function(){this._audio&&(this._audio.pause(),this._audio=null)}},{key:"canPlay",value:function(){return this._canPlay}},{key:"isReady",value:function(){return this._ready}},{key:"duration",value:function(){return this._duration}},{key:"seekTo",value:function(e){this._audio&&(this._audio.currentTime=e)}},{key:"seekToEnd",value:function(){this._audio&&(this._audio.currentTime=this._audio.duration)}},{key:"play",value:function(){this._audio&&this._audio.play().catch((function(e){console.warn(e)}))}},{key:"pause",value:function(){this._audio&&this._audio.pause()}},{key:"_getBufferedPercentage",value:function(e){if(e.length<1)return 0;var t=e.end(e.length-1),n=this._duration;return t&&n?t>=n?100:Math.floor(t/n*100):0}},{key:"_calcTime",value:function(e){var t=this._duration;return t?(e=Math.min(e,t),{currentTime:Math.round(e),percentage:e===t?100:Math.round(e/t*1e4)/100}):{currentTime:0,percentage:0}}}]),n}(),Iv=function(){function e(t,n){var r=this;l()(this,e),g()(this,"_autoBuffer",!0),g()(this,"_autoPlay",!1),g()(this,"_dragging",!1),g()(this,"_audioController",null),g()(this,"_containerNode",null),g()(this,"_controls",{}),g()(this,"$container",null),g()(this,"$progressBar",null),g()(this,"$pastBard",null),g()(this,"$shine",null),this._containerNode=t,this._audioController=new Lv(n),this._audioController.on("progress",(function(e){var t=e.percentage;r._updateBufferedPercentage(t)})),this._audioController.on("timeupdate",(function(e){var t=e.percentage;r._updatePastPercentage(t)})),this._audioController.on("seeking",(function(e){var t=e.percentage;r._updatePastPercentage(t)})),this._audioController.on("seeked",(function(e){var t=e.percentage;r._updatePastPercentage(t),100!==t&&r._audioController.play()})),this._audioController.on("loaded",(function(){r._updateBufferedPercentage(100)})),this._init()}return u()(e,[{key:"canPlay",value:function(){return this._audioController.canPlay()}},{key:"play",value:function(){this._audioController.play()}},{key:"pause",value:function(){this._audioController.pause()}},{key:"seekToPercentage",value:function(e){if(this._audioController.isReady()){var t=this._audioController.duration(),n=e/100*t;n>=t||t-n<1?this._audioController.seekToEnd():this._audioController.seekTo(n)}}},{key:"on",value:function(){var e;return(e=this._audioController).on.apply(e,arguments)}},{key:"off",value:function(){var e;return(e=this._audioController).off.apply(e,arguments)}},{key:"destroy",value:function(){this._unbindEvent(),this._audioController.destroy()}},{key:"_init",value:function(){this._initProgressBar(),this._bindEvent()}},{key:"_bindEvent",value:function(){var e=this,t=kt(this._containerNode.ownerDocument),n=!1,r=a.ua.mobile,o=r?"touchstart":"mousedown",i=r?"touchmove":"mousemove",c=r?"touchend":"mouseup";this.$container.on(o,(function(e){e.stopPropagation(),n=!0})),this.$container.on(c,(function(t){n&&(t.stopPropagation(),e._seekByUI(Bv(t)))})),this.$shine.on(o,(function(r){r.stopPropagation();var a=e._containerNode.getBoundingClientRect(),o=a.left,l=a.width;e._dragging=!0,n=!1,e._controls.progress.classList.add("dragging");var s=function(t){var n=Bv(t)-o;n<0?n=0:n>l&&(n=l),e._controls.past.style.width=n+"px"};t.on(i,s,!1),t.on(c,(function n(r){e._dragging=!1,e._controls.progress.classList.remove("dragging"),t.off(i,s,!1),t.off(c,n,!1),e._seekByUI(Bv(r))}),!1)}))}},{key:"_seekByUI",value:function(e){var t=this._containerNode.getBoundingClientRect(),n=t.left,r=t.width,a=e-n;a<=0?this.seekToPercentage(0):a>=r?this.seekToPercentage(100):this.seekToPercentage(Math.round(a/r*1e4)/100)}},{key:"_unbindEvent",value:function(){}},{key:"_initProgressBar",value:function(){this._containerNode.innerHTML='\n<div class="lake-player-progress">\n    <div class="past"><div class="shine"></div></div>\n    <div class="buffered"></div>\n</div>',this._controls.progress=this._containerNode.firstElementChild,this._controls.past=this._containerNode.querySelector(".past"),this._controls.buffered=this._containerNode.querySelector(".buffered"),this._controls.shine=this._containerNode.querySelector(".shine"),this.$container=kt(this._containerNode),this.$progressBar=kt(this._controls.progress),this.$pastBar=kt(this._controls.past),this.$shine=kt(this._controls.shine)}},{key:"_updatePastPercentage",value:function(e){this._dragging||(this._controls.past.style.width=e+"%")}},{key:"_updateBufferedPercentage",value:function(e){this._controls.buffered.style.width=e+"%"}}]),e}();function Bv(e){return e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].clientX:e.clientX||0}function zv(){return Fc.a.createElement("i",{className:"lake-anticon lake-anticon-loading"},Fc.a.createElement("svg",{viewBox:"0 0 1024 1024",className:"lake-anticon-spin","data-icon":"loading",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},Fc.a.createElement("path",{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"})))}function Fv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}ls(".lake-player {\n  width: 100%;\n  height: 100%;\n  padding: 20px 28px;\n  border: 1px solid #d8d8d8;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  user-select: none;\n  cursor: default;\n}\n.lake-player .play-btn {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  border: 1px solid #e8e8e8;\n  background-color: #fafafa;\n  color: #595959;\n  outline: none;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n@media (hover: hover) {\n  .lake-player .play-btn:HOVER {\n    background-color: #e8e8e8;\n  }\n}\n@media (hover: none) {\n  .lake-player .play-btn:ACTIVE {\n    background-color: #e8e8e8;\n  }\n}\n.lake-player .play-area {\n  flex: 1;\n  margin-left: 20px;\n  overflow: hidden;\n}\n.lake-player .audio-info {\n  display: flex;\n  font-size: 14px;\n  color: #262626;\n  line-height: 20px;\n}\n.lake-player .audio-info .audio-name {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.lake-player .audio-info .audio-size {\n  min-width: 70px;\n  text-align: right;\n  color: #8c8c8c;\n}\n.lake-player .audio-ctrl {\n  display: flex;\n  height: 28px;\n  line-height: 28px;\n  font-size: 12px;\n}\n.lake-player .audio-ctrl .audio-current,\n.lake-player .audio-ctrl .audio-duration {\n  color: #8c8c8c;\n  width: 60px;\n}\n.lake-player .audio-ctrl .audio-duration {\n  text-align: right;\n}\n.lake-player .audio-error {\n  height: 28px;\n  line-height: 28px;\n  color: #c61a1a;\n}\n.lake-player .audio-query {\n  height: 28px;\n  line-height: 28px;\n  color: #8c8c8c;\n}\n.lake-player .audio-query svg {\n  margin-right: 10px;\n}\n.lake-player .audio-progress-bar {\n  flex: 1;\n  display: flex;\n  margin: 0 7px;\n  align-items: center;\n  cursor: pointer;\n}\n.lake-player .audio-progress-bar:HOVER .past .shine {\n  background-color: #8c8c8c;\n}\n.lake-player .lake-player-progress {\n  width: 100%;\n  height: 3px;\n  background-color: #e8e8e8;\n  position: relative;\n}\n.lake-player .lake-player-progress:before,\n.lake-player .lake-player-progress:after {\n  content: ' ';\n  position: absolute;\n  width: 7px;\n  height: 3px;\n  top: 0;\n}\n.lake-player .lake-player-progress:before {\n  left: -7px;\n  background-color: #595959;\n}\n.lake-player .lake-player-progress:after {\n  right: -7px;\n  background-color: #e8e8e8;\n}\n.lake-player .lake-player-progress.dragging .past .shine {\n  background-color: #8c8c8c;\n}\n.lake-player .lake-player-progress .past {\n  width: 0;\n  height: 100%;\n  background-color: #595959;\n  position: absolute;\n  z-index: 2;\n}\n.lake-player .lake-player-progress .past .shine {\n  width: 15px;\n  height: 15px;\n  background-color: #595959;\n  border-radius: 100%;\n  position: absolute;\n  top: -6px;\n  right: -7px;\n}\n.lake-player .lake-player-progress .buffered {\n  position: relative;\n  z-index: 1;\n  width: 0;\n  transform: translateX(7px);\n  height: 100%;\n  background-color: #b7b7b7;\n}\n@media only screen and (max-width: 667px) {\n  .lake-player {\n    padding: 16px 20px;\n  }\n  .lake-player .play-area {\n    margin-left: 16px;\n  }\n}\n");var Uv=function(e){oe()(n,zc.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;l()(this,n),r=t.call(this,e),g()(de()(r),"player",null),g()(de()(r),"playerRootNodeRef",null),g()(de()(r),"state",{ver:0,canPlay:!1,uiStatus:"pause",currentTime:0,duration:-1}),g()(de()(r),"_onMainButtonClick",(function(e){if(e.stopPropagation(),!r.state.hasError&&r.player){var t=r.state.uiStatus;"pause"===t?(r.player.canPlay()||r.setState({uiStatus:"buffer"}),r.player.play()):"play"===t?r.player.pause():"buffer"===t&&(r.setState({uiStatus:"pause"}),r.player.pause())}})),r.playerRootNodeRef=Fc.a.createRef();var a=r.setState;return r.setState=function(e){a.call(de()(r),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fv(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ver:r.state.ver+1},e))},r}return u()(n,[{key:"componentDidMount",value:function(){var e=this;this.props.url&&(this.player=new Iv(this.playerRootNodeRef.current,this.props.url),this.player.on("canplay",(function(){"buffer"===e.state.uiStatus&&e.player.play()})),this.player.on("playing",(function(){e.setState({uiStatus:"play"})}),!1),this.player.on("pause",(function(){e.setState({uiStatus:"pause"})}),!1),this.player.on("loadedmetadata",(function(t){var n=t.duration;e.setState({duration:Math.round(n)})})),this.player.on("seeking",(function(t){var n=t.currentTime;e.setState({currentTime:n})})),this.player.on("seeked",(function(t){var n=t.currentTime;e.setState({currentTime:n})})),this.player.on("timeupdate",(function(t){var n=t.currentTime;e.setState({currentTime:n})})),this.player.on("error",(function(){e.setState({hasError:!0})})))}},{key:"componentWillUnmount",value:function(){this.player&&this.player.destroy()}},{key:"shouldComponentUpdate",value:function(e,t){return t.ver!==this.state.ver}},{key:"render",value:function(){return Fc.a.createElement("div",{className:"lake-player"},Fc.a.createElement("div",{className:"play-btn",onClick:this._onMainButtonClick},this.renderButton()),Fc.a.createElement("div",{className:"play-area"},Fc.a.createElement("div",{className:"audio-info"},this.renderAudioName()),this.renderPlayerControl()))}},{key:"renderButton",value:function(){var e=this.state.uiStatus;return"pause"===e?Fc.a.createElement("svg",{viewBox:"0 0 1024 1024","data-icon":"play",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},Fc.a.createElement("path",{d:"M810.752 442.432l-485.504-370.56C267.648 27.904 184.576 68.992 184.576 141.504v740.992c0 72.512 83.072 113.6 140.672 69.632l485.504-370.56a87.552 87.552 0 0 0 0-139.136z"})):"buffer"===e?Fc.a.createElement(zv,null):Fc.a.createElement("svg",{viewBox:"0 0 1024 1024","data-icon":"pause",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},Fc.a.createElement("path",{d:"M191.3856 128.2048H382.464v768.4608H191.3856V128.1536z m384.512 0h192.8704v768.4608h-192.8704V128.1536z"}))}},{key:"renderPlayerControl",value:function(){return this.props.url?this.state.hasError?Fc.a.createElement("div",{className:"audio-error"},this.props.locale.audio.cantPlay):Fc.a.createElement("div",{className:"audio-ctrl"},Fc.a.createElement("div",{className:"audio-current"},this._toTime(this.state.currentTime)),Fc.a.createElement("div",{ref:this.playerRootNodeRef,className:"audio-progress-bar"}),Fc.a.createElement("div",{className:"audio-duration"},this._toTime(this.state.duration))):Fc.a.createElement("div",{className:"audio-query"},zv(),this.props.locale.audio.query)}},{key:"renderAudioName",value:function(){var e=this.props,t=e.name,n=e.size;return Fc.a.createElement(Fc.a.Fragment,null,Fc.a.createElement("div",{className:"audio-name"},t),Fc.a.createElement("div",{className:"audio-size"},n?a.FileUtils.getFileSize(n):""))}},{key:"_toTime",value:function(e){if(e<0)return"--:--";if(0===e)return"00:00";var t=Math.floor(e/60),n=e%60;return t<10&&(t="0"+t),n<10&&(n="0"+n),"".concat(t,":").concat(n)}}]),n}();g()(Uv,"propTypes",{name:Hc.a.string.isRequired,locale:Hc.a.object.isRequired,size:Hc.a.number,url:Hc.a.string}),ls(".lake-audio-loading {\n  width: 100%;\n  height: 100%;\n  padding: 20px 28px;\n  background-color: #f6f6f6;\n  border: 1px solid #d8d8d8;\n  border-radius: 4px;\n  display: flex;\n  user-select: none;\n  cursor: default;\n}\n.lake-audio-loading .audio-icon {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  color: #595959;\n  font-size: 28px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.lake-audio-loading .audio-info-box {\n  margin-left: 20px;\n  flex: 1;\n  overflow: hidden;\n}\n.lake-audio-loading .audio-info {\n  display: flex;\n  font-size: 14px;\n  color: #262626;\n  line-height: 20px;\n}\n.lake-audio-loading .audio-info .audio-name {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.lake-audio-loading .audio-info .audio-size {\n  min-width: 70px;\n  text-align: right;\n  color: #8c8c8c;\n}\n.lake-audio-loading .audio-status {\n  display: flex;\n  height: 28px;\n  line-height: 28px;\n  color: #8c8c8c;\n}\n.lake-audio-loading .audio-status .lake-anticon-loading {\n  margin-right: 10px;\n}\n");var Vv=function(e){oe()(n,zc.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"render",value:function(){return Fc.a.createElement("div",{className:"lake-audio-loading","data-type":this.props.type},Fc.a.createElement("div",{className:"audio-icon"},Fc.a.createElement("svg",{viewBox:"0 0 1024 1024","data-icon":"play",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},Fc.a.createElement("path",{d:"M363.995429 433.664v376.32a150.016 150.016 0 1 1-79.981715-132.681143v-276.626286-200.667428c0-19.456 13.970286-36.096 33.170286-39.424l547.986286-95.012572a40.009143 40.009143 0 0 1 46.811428 39.424v608.987429a150.016 150.016 0 1 1-79.981714-132.681143V352.512L363.995429 433.664z m0-81.188571L832 271.323429V152.539429L363.995429 233.654857v118.820572zM214.016 880.018286a69.997714 69.997714 0 1 0 0-140.032 69.997714 69.997714 0 0 0 0 139.995428z m547.986286-96a69.997714 69.997714 0 1 0 0-140.032 69.997714 69.997714 0 0 0 0 139.995428z"}))),Fc.a.createElement("div",{className:"audio-info-box"},Fc.a.createElement("div",{className:"audio-info"},this.renderAudioName()),Fc.a.createElement("div",{className:"audio-status"},this.renderStatus())))}},{key:"renderAudioName",value:function(){var e=this.props,t=e.name,n=e.size;return Fc.a.createElement(Fc.a.Fragment,null,Fc.a.createElement("div",{className:"audio-name"},t),Fc.a.createElement("div",{className:"audio-size"},n?a.FileUtils.getFileSize(n):""))}},{key:"renderStatus",value:function(){var e=this.props.type;return"pending"===e?"等待上传":"uploading"===e||"transcoding"===e?Fc.a.createElement("div",{className:"upload-progress"},Fc.a.createElement(zv,null),this._getText(e)):"transcoding"===e?Fc.a.createElement("div",{className:"upload-progress"},Fc.a.createElement(zv,null),"转码中"):void 0}},{key:"_getText",value:function(e){return"transcoding"===e?"转码中":"uploading"===e?this.props.progress?this.props.progress+"%":"上传中":void 0}}]),n}();g()(Vv,"propTypes",{type:Hc.a.oneOf(["pending","uploading","transcoding"]),progress:Hc.a.number,name:Hc.a.string.isRequired,size:Hc.a.number}),ls('.lake-audio-error {\n  width: 100%;\n  height: 88px;\n  padding: 24px 20px;\n  background-color: #f6f6f6;\n  border: 1px solid #d8d8d8;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  user-select: none;\n  cursor: default;\n}\n.lake-audio-error[data-error-type="copyright"] {\n  justify-content: left;\n  background: #fff;\n}\n.lake-audio-error .error-icon {\n  width: 28px;\n  height: 28px;\n  color: #595959;\n  font-size: 28px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.lake-audio-error .error-icon .lake-svg-icon {\n  width: 28px;\n  height: 28px;\n  background-size: 28px;\n}\n.lake-audio-error .error-message {\n  display: flex;\n  flex-direction: column;\n  line-height: 20px;\n  color: #bfbfbf;\n  margin-left: 16px;\n  font-size: 14px;\n}\n.lake-audio-error .lake-anticon-loading {\n  margin-right: 5px;\n}\n@media only screen and (max-width: 667px) {\n  .lake-audio-error .lake-svg-icon {\n    width: 21px;\n    height: 21px;\n    background-size: 21px 21px;\n  }\n}\n');var qv=function(e){oe()(n,zc.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"render",value:function(){return Fc.a.createElement("div",{className:"lake-audio-error","data-error-type":this.props.type},this.renderBody())}},{key:"renderBody",value:function(){var e=this.props,t=e.type,n=e.message;return"copyright"===t?this.renderDeniedTip():Fc.a.createElement(Fc.a.Fragment,null,Fc.a.createElement("div",{className:"error-icon"},Fc.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-audio-error-icon"})),Fc.a.createElement("div",{className:"error-message"},n))}},{key:"renderDeniedTip",value:function(){var e=this.props,t=e.audio,n=e.audioURL,r=e.locale;if(!n&&null!==n)return Fc.a.createElement(Fc.a.Fragment,null,Fc.a.createElement("div",{className:"error-icon"},Fc.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-audio-icon"})),Fc.a.createElement("div",{className:"error-message"},r.audio.invalidAudio));var a;return a=null===n?Fc.a.createElement("div",{className:"query"},Fc.a.createElement(zv,null),r.audio.query):Fc.a.createElement(Fc.a.Fragment,null,Fc.a.createElement("div",{className:"audio-info"},Fc.a.createElement("a",{href:n,target:"_blank"},t.fileName||r.audio.linkTip))),Fc.a.createElement(Fc.a.Fragment,null,Fc.a.createElement("div",{className:"error-icon"},Fc.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-audio-icon"})),Fc.a.createElement("div",{className:"error-message"},a))}}]),n}();g()(qv,"propTypes",{type:Hc.a.oneOf(["copyright","error"]).isRequired,message:Hc.a.string.isRequired,locale:Hc.a.object.isRequired,audio:Hc.a.object,audioURL:Hc.a.string}),ls(".lake-audio {\n  height: 88px;\n  background-color: #fff;\n}\n");var Hv=function(e){oe()(n,zc.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"render",value:function(){return Fc.a.createElement("div",{className:"lake-audio"},this.renderBody())}},{key:"renderBody",value:function(){var e=this.props,t=e.type,n=e.progress,r=e.audioInfo;return"pending"===t||"uploading"===t||"transcoding"===t?this.renderLoading(t,r,n):"player"===t||"query"===t?this.renderPlayer(this.props.audioInfo,t):this.renderError()}},{key:"renderError",value:function(){var e=this.props.errorMessage||this.props.locale.audio.cantPlay;return Fc.a.createElement(qv,{type:"error",locale:this.props.locale,message:e})}},{key:"renderLoading",value:function(e,t,n){return Fc.a.createElement(Vv,{type:e,progress:n,name:t.fileName,url:t.url,size:t.fileSize})}},{key:"renderPlayer",value:function(e){return e=e||{},Fc.a.createElement(Uv,{key:"url: ".concat(e.url),locale:this.props.locale,name:e.fileName,url:e.url,size:e.fileSize})}}]),n}();function Wv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wv(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}g()(Hv,"propTypes",{type:Hc.a.oneOf(["error","pending","uploading","transcoding","query","player"]).isRequired,progress:Hc.a.number,errorMessage:Hc.a.string,locale:Hc.a.object.isRequired,audioInfo:Hc.a.shape({fileName:Hc.a.string.isRequired,fileSize:Hc.a.number,url:Hc.a.string.isRequired})});var Gv=function(e){oe()(n,Ds);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),g()(de()(e),"queryTranscodeHandler",null),g()(de()(e),"audioURL",null),e}return u()(n,[{key:"embedToolbar",value:function(){var e=this,t=[];return this.engine?(this.audioURL&&(t=[{type:"download",onClick:this.downloadFile.bind(this)},{type:"separator"},{type:"dnd"},{type:"copy"},{type:"preferences",onClick:function(){e.setSidebar()}}].concat(x()(this.getMoreEmbedToolbarConfig()))),t):(this.value.download&&this.audioURL&&(t=[{type:"download",onClick:this.downloadFile.bind(this)}]),t)}},{key:"setSidebar",value:function(){var e=this.value;this.engine.sidebar.set({name:"audio",title:this.getLocale().preferences,className:"lake-audio-sidebar",data:e})}},{key:"restoreSideBar",value:function(){this.engine&&this.engine.sidebar.restore("audio")}},{key:"downloadFile",value:function(){this.audioURL&&(this.engine&&this.engine.options&&this.engine.options.downloadVideoHandler?this.engine.options.downloadVideoHandler(this.audioURL):window.open(this.audioURL))}},{key:"getLocale",value:function(){return this.getViewEngine().locale}},{key:"getLang",value:function(){return this.getViewEngine().options.lang||"zh-cn"}},{key:"setValue",value:function(e,t){this.engine?Bc()(se()(n.prototype),"setValue",this).call(this,e,t):this.value=Yv(Yv({},this.value),e)}},{key:"render",value:function(e,t){this.value=t||{},this.inited||(this.rootNode=document.createElement("div"),this.inited=!0,e.empty(),e.append(this.rootNode)),this.rerender(),this.toggleMargin()}},{key:"rerender",value:function(){if(this.verify()){var e=this.value,t=e.status,n=e.audioId;return this.audioURL?this.renderPlayer(this.audioURL):null===this.audioURL&&n?this.renderQuery():"pending"===t?this.renderPending():"uploading"===t?this.renderUploading():"uploaded"===t?this.renderTranscode():this.renderError(this.getLocale().audio.invalidAudio)}}},{key:"unactivate",value:function(){this.restoreSideBar()}},{key:"destroy",value:function(){this.restoreSideBar(),Bc()(se()(n.prototype),"destroy",this).call(this),this.rootNode&&Vc.a.unmountComponentAtNode(this.rootNode)}},{key:"verify",value:function(){var e=this.value;return e?e.audioId?this._checkAccess():this._isUploadError(e)?(this.renderError(this.getLocale().audio.uploadError),!1):this._checkAccess():(this.renderError(this.getLocale().audio.invalidAudio),!1)}},{key:"_checkAccess",value:function(){return this.isBlocked()?(this.renderBlockedError(),!1):!!this.getTopEngine().options.allowAudioPlayer||(this.renderCopyrightDenied(),!1)}},{key:"isBlocked",value:function(){var e=this.engine,t=this.contentView;return e?-1!==(e.options.cardBlacklist||[]).indexOf("audio"):!t||"doc"!==t.options.scene}},{key:"renderError",value:function(e){this.stopQuery(),Vc.a.render(Fc.a.createElement(Hv,{type:"error",locale:this.getLocale(),errorMessage:e}),this.rootNode)}},{key:"renderCopyrightDenied",value:function(){this.renderCopyrightErrorView(this.getLocale().audio.copyright)}},{key:"renderBlockedError",value:function(){this.renderCopyrightErrorView(this.getLocale().audio.notSupport)}},{key:"renderCopyrightErrorView",value:function(e){this.queryAudioURL(),Vc.a.render(Fc.a.createElement(qv,{type:"copyright",locale:this.getLocale(),audio:this.value,audioURL:this.audioURL,message:e}),this.rootNode)}},{key:"renderPending",value:function(){Vc.a.render(Fc.a.createElement(Hv,{type:"pending",locale:this.getLocale(),audioInfo:this.getAudioInfo()}),this.rootNode)}},{key:"renderUploading",value:function(){Vc.a.render(Fc.a.createElement(Hv,{type:"uploading",locale:this.getLocale(),progress:this.value.percent,audioInfo:this.getAudioInfo()}),this.rootNode)}},{key:"renderTranscode",value:function(){this.queryAudioURL(),Vc.a.render(Fc.a.createElement(Hv,{type:"transcoding",locale:this.getLocale(),audioInfo:this.getAudioInfo()}),this.rootNode)}},{key:"renderQuery",value:function(){this.queryAudioURL(),Vc.a.render(Fc.a.createElement(Hv,{type:"query",locale:this.getLocale(),audioInfo:this.getAudioInfo()}),this.rootNode)}},{key:"renderPlayer",value:function(e){Vc.a.render(Fc.a.createElement(Hv,{type:"player",locale:this.getLocale(),audioInfo:this.getAudioInfo(e)}),this.rootNode)}},{key:"stopQuery",value:function(){this.queryTranscodeHandler&&(this.queryTranscodeHandler.cancel(),this.queryTranscodeHandler=null)}},{key:"getAudioInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.value;return{fileName:t.fileName||t.name,fileSize:t.fileSize||t.size,url:e}}},{key:"queryAudioURL",value:function(){var e=this;if(this.queryTranscodeHandler)return this.queryTranscodeHandler.promise;var t=this.getLocale();return this.queryTranscodeHandler=Fu.checkStatus(this.getTopEngine(),this.value.audioId),this.queryTranscodeHandler.promise.then((function(t){var n=t.data;n.audio?(e.audioURL=n.audio,e.setValue({status:"done"}),e.value.status="done",e.rerender()):e.renderError(e.getLocale().audio.failedToQuery)})).catch((function(n){e.audioURL="",console.error(n),e.setValue({status:"error",message:t.audio.transcodeError}),"error"===e.value.status&&e.rerender()})).then((function(){e.refreshToolbar()})),this.queryTranscodeHandler.promise}},{key:"_isUploadError",value:function(e){var t=!this.engine;return"uploaded"!==e.status&&"done"!==e.status&&(!!t||"error"===e.status||!e.taskId||"pending"!==e.status&&!Fu.hasTask(this.getTopEngine(),e.taskId))}}]),n}();g()(Gv,"type","block");var Xv={initialize:function(){var e=this;this.command.add("math",{sideEffect:!0,execute:function(){var t=e.change.insertCard("math"),n=e.card.getComponent(t);e.change.activateCard(t),window.setTimeout((function(){n.focusTextarea()}),10)}}),this.on("paste:origin",(function(t){Zt.walkTree(t,(function(t){if((t=kt(t)).isBlock()&&"math"===t.attr("data-type")){var n=t.attr("data-src"),r=t.attr("data-text"),a=t.attr("data-width"),o=t.attr("data-height");r=unescape(r),e.card.replaceNode(t,"math",{src:n,code:r,width:a,height:o})}}))}))}},Kv={initialize:function(){var e=this;this.command.add("save",{sideEffect:!0,execute:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.event.trigger("save:before",t),e.asyncEvent.emitAsync("save:before",t).then((function(){e.options.onSave&&e.options.onSave(),Qt.log("save success")})).catch((function(t){e.messageError(t)}))}}),this.domEvent.onDocument("keydown",(function(t){Mc("mod+s",t)&&(t.preventDefault(),e.command.execute("save",!0))}))}};function Zv(){var e=this.locale.search,t=function(e){if(e.collapsed)return"";var t=document.createElement("div");return t.appendChild(e.cloneContents()),kt(t).find("[data-lake-card]").remove(),t.textContent}(this.change.getRange());return{name:"search",title:e.title,className:"lake-dialog-search",data:{searchValue:t}}}var $v={initialize:function(){var e=this;!function(e,t,n){ad(e,"search",n,"dialog")}(this,0,Zv),this.domEvent.onDocument("keydown",(function(t){Mc("mod+shift+g",t)&&(t.preventDefault(),e.command.execute("search"))}))}};function Qv(e){var t=this.change.getRange();if(t.collapsed){e.preventDefault();var n=this.change.insertCard("cardselect");this.change.activateCard(n),t=this.change.getRange();var r=n.find(".lake-cardselect-keyword");t.selectNodeContents(r[0]),t.collapse(!1),this.change.select(t)}}var Jv={initialize:function(){var e=this;this.on("keydown:slash",(function(t){var n=e.change.getRange(),r=sr.getClosestBlock(n.startContainer),o=r.text().trim().replace(/\u200b/g,"");"/"===o&&a.ua.safari&&r.empty(),(""===o||"/"===o&&a.ua.safari||t.ctrlKey||t.metaKey)&&Qv.call(e,t)}))}};function ey(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ty=window.URL||window.webkitURL;function ny(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ry(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ny(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ny(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ay=new(function(){function e(t){l()(this,e),this.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ey(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ey(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ratio:.8,isOverSize:function(){}},t)}var t;return u()(e,[{key:"_canvasToFile",value:function(e,t){var n=this.options.ratio,r=e.toDataURL("image/jpeg",n),a=Ar.dataURIToFile(r);return new File([a],t)}},{key:"compress",value:(t=bl()(wl.a.mark((function e(t){var n,r,a,o,i,c,l;return wl.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.options.isOverSize,r=[],a=0;case 3:if(!(a<t.length)){e.next=23;break}if(o=t[a],!n(o)){e.next=19;break}return i=document.createElement("canvas"),c=i.getContext("2d"),e.next=10,Pd(ty.createObjectURL(o));case 10:l=e.sent,i.width=l.width,i.height=l.height,i.style.width=l.width+"px",i.style.height=l.height+"px",c.drawImage(l,0,0,l.width,l.height),r.push(this._canvasToFile(i,o.name)),e.next=20;break;case 19:r.push(o);case 20:a++,e.next=3;break;case 23:return e.abrupt("return",r);case 24:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}())({isOverSize:function(e){var t="string"==typeof e.ext?e.ext.toLowerCase():void 0;return("jpg"===t||"jpeg"===t)&&!a.FileUtils.isSizeLimit("image",e.size)}});function oy(e){return e.replace(/^(https:\/\/cdn)-pri(\.nlark\.com)/i,"$1$2")}function iy(e,t){var n=this,a=this.locale.image||{},o=((this.options.image||{}).uploadAction||"").replace("/api/upload/attach","/api/upload/url").replace(/ctoken=[^&]+&/,"");o&&Object(r.ajax)({method:"post",url:o,data:{url:t},success:function(t){var r=t.data,a={status:"done",src:r.url};r.size&&(a.size=r.size),r.width&&(a.width=r.width),r.height&&(a.height=r.height),Nr.updateCard(n,e,a,!0)},error:function(){Nr.updateCard(n,e,{status:"error",message:a.copyFailedTips},!0)}})}function cy(e){var t=this.card.getValue(e),n=t.src||"";this.isRemoteImage(n)?(n.startsWith("https://intranetproxy.alipay.com/skylark/")&&(t.src=n.replace(/[\?&]x-oss-process=image\/resize,w_\d+/,"")),t.status="uploading",t.percent=0,this.card.replaceNode(e,"image",t)):"uploading"===t.status&&(delete t.status,this.card.setValue(e,t))}function ly(e){var t,n;"a"===e.name&&(n=e.attr("href"),e=(t=e).find("[data-type=image]"));var r=e.find("img"),a=r.attr("src");a=oy(a);var o=e.attr("data-width")||r.css("width")||r.attr("width")||"",i=e.attr("data-height")||r.css("height")||r.attr("height")||"";/%/.test(o)||(o=parseInt(o,10)),/%/.test(i)||(i=parseInt(i,10));var c={src:a,display:e.attr("data-display"),align:e.attr("data-align")};o&&(c.width=o),i&&(c.height=i),void 0!==n&&(c.link=n),(Cs(a)||this.isRemoteImage(a))&&(c.status="uploading",c.percent=0),this.card.replaceNode(t||e,"image",c)}function sy(e){var t,n;"a"===e.name&&(n=e.attr("href"),e=(t=e).find("img"));var r=e.attr("src");r=oy(r);var a=e.css("width")||e.attr("width")||"",o=e.css("height")||e.attr("height")||"";/%/.test(a)||(a=parseInt(a,10)),/%/.test(o)||(o=parseInt(o,10));var i={src:r};a&&(i.width=a),o&&(i.height=o),void 0!==n&&(i.link=n),(Cs(r)||this.isRemoteImage(r))&&(i.status="uploading",i.percent=0),this.card.replaceNode(t||e,"image",i)}function uy(e){var t=this.change.getRange();if(t.collapsed){var n=sr.getClosestBlock(t.startContainer);if("p"===n.name){var r=sr.getBlockLeftText(n,t),a=/^!\[([^\]]{0,})\]\((https?:\/\/[^\)]{5,})\)$/.exec(r);if(a){e.preventDefault(),sr.removeBlockLeftText(n,t);var o=a[1].split("|"),i=a[2],c={src:i,name:o[0],progress:{percent:0}},l=o[1];if("center"!==l&&"right"!==l||this.command.execute("alignment",l),!this.isRemoteImage(i))return c.status="done",delete c.progress,void this.change.insertCard("image",ry(ry({},c),{},{margin:{top:!0,bottom:!0}}));var s=Nr.insertCard(this,"image",ry(ry({},c||{}),{},{margin:{top:!0,bottom:!0}}));iy.call(this,s,i)}}}}var dy={initialize:function(){var e=this;this.on("drop:files",(function(t){if(e.uploader.post("image",t,{onBeforeInsertCard:function(e,t){t.margin={top:!0,bottom:!0}}}))return!1})),this.on("paste:files",(function(t){ay.compress(t).then((function(t){e.uploader.post("image",t,{onBeforeInsertCard:function(e,t){e.ext||(t.scaleByPixelRatio=!0),t.margin={top:!0,bottom:!0}}})}))})),this.on("paste:origin",(function(t){Zt.walkTree(t,(function(t){if((t=kt(t)).isCard()&&"image"===t.attr("data-lake-card")){var n=e.card.getValue(t)||null,r=t.find("img")[0];if(n&&n.src)return;r&&r.src?(n=ry(ry({},n),{},{status:"done",src:r.src}),r.style.width&&(n.width=parseInt(r.style.width,10)),r.style.height&&(n.height=parseInt(r.style.height,10))):n=ry(ry({},n),{},{status:"error",message:e.locale.image.copyFailed}),e.card.setValue(t,n)}}))})),this.on("paste:schema",(function(e){e.add({p:{"data-type":"*","data-src":"*","data-align":"*","data-display":"*","data-width":"*","data-height":"*"}})})),this.on("paste:each",(function(t){t.isCard()&&"image"===t.attr("data-ready-card")?cy.call(e,t):"image"===t.attr("data-type")&&t.find("img").length>0||"a"===t.name&&t.find("[data-type=image]").length>0&&t.find("img").length>0?ly.call(e,t):("a"===t.name&&t.find("img").length>0||"img"===t.name&&t.attr("src"))&&sy.call(e,t)})),this.on("paste:after",(function(){e.editArea.find("[data-lake-card=image]").each((function(t,n){var r=kt(t),o=e.card.getComponent(r);if("uploading"===o.value.status){var i=o.imageNode.src||"";if(Cs(i)&&e.uploader){var c=Ar.dataURIToFile(i),l=a.FileUtils.getFileExtname(c),s=l?"image.".concat(l):"image",u=new File([c],s);return o.value={status:"uploading",src:i,name:s,size:u.size,type:u.type,percent:0},e.card.updateNode(r,o),u.uid=e.uploader.getUid(n),e.uploader.addUploadingCard(u.uid,r),void e.uploader.post("image",[u])}e.isRemoteImage(i)&&(e.card.updateNode(r,o),iy.call(e,r,i))}}))})),this.on("keydown:enter",(function(t){uy.call(e,t)}))}},fy={initialize:function(){var e=this;this.on("drop:files",(function(t){if(e.uploader.post("file",t))return!1})),this.on("paste:origin",(function(t){Zt.walkTree(t,(function(t){if((t=kt(t)).isBlock()&&t.hasClass("bi-file")){var n=t.find(".bi-file-content");if(n.length>0){var r=n.attr("data-src")||"",a=n.attr("data-name"),o=r.split(".").pop(),i=n.find(".size");if(!r||!o||0===i.length)return;var c=i.text().replace(/^.+?([\d\.]+)\s*(kb|mb).*$/i,(function(e,t,n){return"kb"===n.toLowerCase()?1e3*t:"mb"===n.toLowerCase()?1e3*t*1e3:void 0})),l={src:r,name:a,size:parseFloat(c)||0,ext:o};return void e.card.replaceNode(t,"file",l)}}}))})),this.on("paste:schema",(function(e){e.add([{p:{"data-type":"*","data-filetype":"*","data-name":"*","data-size":"*","data-src":"*"}}])})),this.on("paste:each",(function(t){if("file"===t.attr("data-type")){var n=t.attr("data-src");if(n){var r={src:n,name:t.attr("data-name"),size:parseInt(t.attr("data-size"),10)||0,ext:t.attr("data-filetype")};return void e.card.replaceNode(t,"file",r)}}}))}},py=y()("lake:outline"),hy={sup:1,sub:1};function my(e){if(e.nodeType!==Node.ELEMENT_NODE)return null;var t=e.nodeName.toLowerCase();return hy[t]?t:null}var gy={_invalidTags:{h1:!0,h2:!0,h3:!0,h4:!0,"ne-h1":!0,"ne-h2":!0,"ne-h3":!0,"ne-h4":!0},_isHeadingNode:function(e){if(1!==e.nodeType)return!1;if(!e.tagName)return!1;var t=e.tagName.toLocaleLowerCase();return!0===this._invalidTags[t]},_findHeadingNodes:function(e){var t=e.childNodes;if(!t)return[];for(var n=[],r=0,a=t.length;r<a;r++){var o=t[r];this._isHeadingNode(o)&&n.push(o)}return n},_fixDuplicatedHeading:function(e){var t={};e.forEach((function(e){var n=e.id;if(t.hasOwnProperty(n)){var r=t[n];e.id+="-".concat(r),e.domNode.id=e.id,t[n]=r+1}else t[n]=1}))},_getLevel:function(e){return{H1:1,H2:2,H3:3,H4:4,"NE-H1":1,"NE-H2":2,"NE-H3":3,"NE-H4":4}[e]||-1},getText:function(e){var t=ys(e,(function(e){return!e.getAttribute("data-lake-card")})),n="";return t.forEach((function(e){n+=e.textContent})),n},normalize:function(e){var t=this;if(0===(e=e||[]).length)return[];var n=new as.a,r=[];e.forEach((function(e){var a=function(e){var t=[],n=[],r=document.createElement("span");return function e(t,n,r){if(n=n||function(){return!0},t&&n(t)){var a=(r=r||{}).open||function(){},o=r.close||function(){};a(t);var i=t.childNodes;if(i)for(var c=0,l=i.length;c<l;c++)e(i[c],n,r);o(t)}}(e,(function(e){return!e.getAttribute||!e.getAttribute("data-lake-card")}),{open:function(e){if(e.nodeType===Node.TEXT_NODE){var a=e.textContent;t.push(a),r.innerText=a,n.push(r.innerHTML)}else{var o=my(e);null!==o&&n.push("<".concat(o,">"))}},close:function(e){var t=my(e);null!==t&&n.push("</".concat(t,">"))}}),{text:t.join(""),html:n.join("")}}(e),o=a.text,i=a.html;(o=o.trim())&&(e.id||(e.id=n.id(o)),r.push({id:e.id,text:o,html:i,level:t._getLevel(e.tagName),depth:-1,domNode:e}))}));var a=[];r.forEach((function(e){a.indexOf(e.level)<0&&a.push(e.level)})),a.sort();var o={};return a.forEach((function(e,t){o[e]=t+1})),r.forEach((function(e){e.depth=o[e.level]})),r},extractFromDom:function(e){if(!e)return[];try{var t=this._findHeadingNodes(e);py("headings:",t);var n=gy.normalize(t);return this._fixDuplicatedHeading(n),n.forEach((function(e){delete e.domNode})),n}catch(e){return py("error",e),[]}}};function vy(){var e=this,t=[];return this.editArea.find("h1,h2,h3,h4").each((function(n){n=kt(n),e.card.closest(n)||n.parent().isRoot()&&t.push(n[0])})),gy.normalize(t)}function yy(){var e=this.locale.toc,t=null;try{t=vy.call(this)}catch(e){t=[]}return{name:"toc",title:e.title,className:"lake-toc-sidebar",data:t}}var by={initialize:function(){var e=this;od(this,"toc",yy);var t=function(){e.command.queryState("toc")&&window.setTimeout((function(){if(!e.isDestroyed&&e.command.queryState("toc")){var t=yy.call(e);e.sidebar.set(t)}}),100)};this.ot&&this.ot.on("load",t),this.on("change",t),this.on("setvalue",t)}};function ky(){return{name:"repository",title:null,className:"lake-repository-sidebar",data:null}}var wy={initialize:function(){od(this,"repository",ky)}};function xy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xy(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ey={initialize:function(){var e=this;this.command.add("flowchart",{sideEffect:!0,execute:function(){e.locale.flowchart;var t={diagramData:El.a.deflate(JSON.stringify({head:{version:"2.0.0"},body:[{type:"flowchart",shape:"start-end",id:"9987140f-1575-4455-9627-a5b05621cfa0",x:552.5,y:374,html:'<div style="text-align:center;">开始</div>',zIndex:0}]}),{to:"string"})};e.change.insertCard("flowchart2",_y(_y({},t),{},{margin:!0}))}})}},Cy={initialize:function(){var e=this;this.command.add("diagram",{sideEffect:!0,execute:function(t,n){var r=e.change.insertCard("diagram",{code:n||"",type:"puml",margin:!0});window.setTimeout((function(){e.card.getComponent(r).focusToCodeEditor()}),10)}})}},Oy={text:"plain",sh:"bash",ts:"typescript",js:"javascript",py:"python",puml:"plantuml",uml:"plantuml",vb:"basic",md:"markdown","c++":"cpp"},Sy={initialize:function(){var e=this;this.command.add("codeblock",{sideEffect:!0,execute:function(t,n){var r=e.change.insertCard("codeblock",{mode:t,code:n,heightLimit:!0,margin:!0}),a=e.card.getComponent(r);window.setTimeout((function(){a.focusToCodeEditor()}),10)}}),this.on("keydown:enter",(function(t){var n=e.change.getRange();if(n.collapsed){var r=sr.getClosestBlock(n.startContainer);if(r.isHeading()){var a=sr.getBlockLeftText(r,n),o=/^```(.*){0,10}$/.exec(a);if(o){var i=(void 0===o[1]?"":o[1]).toLowerCase();if(Kf[i=Oy[i]||i]||""===i)return t.preventDefault(),sr.removeBlockLeftText(r,n),e.command.execute("codeblock",i,""),r.remove(),!1}}}})),this.on("paste:origin",(function(t){Zt.walkTree(t,(function(t){if((t=kt(t)).isBlock()&&t.hasClass("bi-code")){var n=t.find("pre");if(n.length>0){var r=/^bi-code bi-code-(\w+)/.exec(t[0].className),a=r?r[1]:"",o=new er(n).toText();return void e.card.replaceNode(t,"codeblock",{mode:a,code:o})}}}))})),this.on("paste:schema",(function(e){e.add({pre:{"data-syntax":"*"}})})),this.on("paste:each",(function(t){if("pre"===t.name&&t.attr("data-syntax")){var n=new er(t).toText();e.card.replaceNode(t,"codeblock",{mode:t.attr("data-syntax"),code:n})}else if("pre"===t.name&&t.first()&&"code"===t.first().name){var r=new er(t).toText();e.card.replaceNode(t,"codeblock",{mode:"plain",code:r})}}))}};function Ry(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ry(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ry(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Py(e){var t=this.change.getRange();if(t.collapsed){var n=sr.getClosestBlock(t.startContainer);if("p"===n.name){var r=sr.getBlockLeftText(n,t),a=/^\|(?:(?:[^\|]+?)\|){2,}$/.exec(r);if(a){e.preventDefault(),sr.removeBlockLeftText(n,t);for(var o=a[0].split("|").filter((function(e){return e})),i=o.length,c="<table>",l=0;l<=2;l++){c+="<tr>";for(var s=0;s<=i-1;s++){var u=0===l?Xe.escape(o[s]):"<br />";c+="<td><p>".concat(u,"</p></td>")}c+="</tr>"}var d=kt(c+="</table>"),f=op(d[0]),p=rp(d[0]),h={html:f.outerHTML,rows:p.rows,cols:p.cols};return this.command.execute("table",h),h}}}}var Ay={initialize:function(){var e=this;this.schema.add(Ip),Qt.log("init"),this.command.add("table",{sideEffect:!0,execute:function(t){Qt.log("insert table ......");var n=e.change.insertCard("table",jy(jy({},t||{rows:8,cols:8}),{},{margin:!0})),r=e.card.getComponent(n);return e.change.activateCard(n),r.selection.selectFirstCell(),r}}),this.on("paste:origin",pp),this.on("paste:before",(function(t){Zt.fetchAllChildren(t).forEach((function(t){if("table"===(t=kt(t)).name){var n=op(t[0]),r=rp(t[0]),a={html:n.outerHTML,rows:r.rows,cols:r.cols};e.card.replaceNode(t,"table",a)}}))})),this.on("keydown:enter",(function(t){Py.call(e,t)}))}},Ty={initialize:function(){var e=this;this.on("setvalue",(function(){e.editArea.find("[data-lake-card=video]").each((function(t){var n=kt(t),r=e.card.getValue(n);"uploading"!==r.status&&"pending"!==r.status||e.card.removeNode(n)}))}))}};function Dy(e){var t=this.change.getRange();if(t.collapsed){var n,r=t.endContainer,o=t.endOffset,i=null,c="";if(r.nodeType===Node.TEXT_NODE?(i=r,c=r.nodeValue.substring(0,o)):(i=r.childNodes[o-1])&&(i.nodeType===Node.TEXT_NODE?c=i.nodeValue:kt(i).isMark()&&i.lastChild&&i.lastChild.nodeType===Node.TEXT_NODE&&(c=(i=i.lastChild).nodeValue)),n=a.ua.safari&&229===e.keyCode?/^@$|[\u200b\s]@$/:/[\u200b\s]$/,!c||n.test(c)){e.preventDefault(),a.ua.safari&&229===e.keyCode&&c.endsWith("@")&&(i.nodeValue=c.substring(0,c.length-1),t.selectNodeContents(i),t.collapse(!1),this.change.select(t));var l=this.change.insertCard("mention");this.card.getComponent(l).renderSuggestion().then();var s=l.find(".lake-mention-at");t.selectNodeContents(s[0]),t.collapse(!1),this.change.select(t)}}}var My={initialize:function(){var e=this;!1!==this.options.allowMention&&this.on("keydown:at",(function(t){Dy.call(e,t)}))},extract:function(){var e=this,t=[];return this.card.getCardRootByName("mention").forEach((function(n){var r=e.card.getValue(kt(n));t.push(r)})),t}};function Ny(e,t){var n=this,a=this.locale.markdown||{},o="lake-paste-markdown",i=Fc.a.createElement(tl.a,{type:"primary",size:"small",onClick:function(){var a=K()(n,"options.markdown.convertAction")||"/api/docs/convert";Object(r.ajax)({method:"post",url:a,data:{from:"markdown",to:"lake",content:e},success:function(e){var r=e.data.content;n.change.setValue(t),n.command.execute("paste",r),cl.a.close(o)}})}},a.pasteButton);cl.a.open({placement:"topRight",message:a.pasteTitle,description:a.pasteContent,btn:i,key:o,getContainer:function(){return document.querySelector(".yuque-sdk-extra-container")||document.body}})}cl.a.config({top:105});var Ly={initialize:function(){var e=this;this.on("paste:string",(function(t,n){if(!t.isPasteText){var r,a=t.html||"";r=t.text?t.text:new er(a).toText(),function(e){var t="",n=e.html||"";n?(n=n.replace(/<blockquote[^>]*>[\s\S]*?<\/blockquote>/gi,""),t=new er(n).toText()):e.text&&(t=e.text||"");for(var r=[/^\s*([\*\-\+]|\d+\.)\s+/m,/^\s*#{1,6}\s+/m,/\[(.*?)\]\(([\S]+?)\)/m,/\s*>\s?/m,/(^|\r?\n)(`{3,})[\s\S]*?\1($|\r?\n)/,/^\s*\|(([^\|]+?)\|){2,}\s*$/m],a=0;a<r.length;a++)if(r[a].test(t))return!0;return!1}(t)&&!K()(e,"options.markdown.disableConvert")&&Ny.call(e,r,n)}}))}};function Iy(){return{name:"translate",title:this.locale.translate.title,className:"lake-translate-sidebar",data:null}}var By={initialize:function(){od(this,"translate",Iy)}};function zy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zy(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Uy={initialize:function(){var e=this;this.command.add("yuque",{sideEffect:!0,execute:function(){var t=e.change.insertCard("yuque",{margin:!0});e.card.getComponent(t).focusInput()}})},toggleToTitleMode:function(e){var t=e.cardRoot.parent();if(t.isRoot()||t.isTable()){var n=kt("<p><br/></p>");e.cardRoot.before(n)}this.change.removeCard(e.cardRoot);var r=e.value;this.change.insertCard("yuqueinline",{src:r.src,url:r.url,detail:r.detail})},toggleToBlockMode:function(e,t){var n=document.createRange();n.setStartAfter(e.cardRoot[0]),n.collapse(!0),this.change.removeCard(e.cardRoot),this.change.select(n),this.change.insertCard("yuque",Fy(Fy({},e.value),{},{mode:t}))}},Vy={initialize:function(){var e=this;this.command.add("label",{sideEffect:!0,execute:function(){var t=e.change.insertCard("label"),n=e.card.getComponent(t);e.change.activateCard(t),setTimeout((function(){n.focusInput()}),20)}})}};ls(".lake-link-editor {\n  max-width: 398px;\n  display: inline-block;\n  border: 1px solid #E8E8E8;\n  border-radius: 4px;\n  box-shadow: rgba(221, 221, 221, 0.5) 0px 1px 3px;\n  background: white;\n}\n.lake-link-editor .lake-link-invalid-link {\n  color: #CF1322;\n}\n.lake-link-editor p {\n  margin-top: 0;\n  margin-bottom: 14px;\n}\n.lake-link-editor .lake-link-editor-slash {\n  width: 1px;\n  height: 14px;\n  border-left: 1px solid #E8E8E8;\n  margin: 5px 0 0 10px;\n  vertical-align: top;\n}\n.lake-link-editor .lake-icon {\n  color: #8590A6;\n  font-size: 16px;\n}\n.lake-link-editor-preview {\n  line-height: 16px;\n  padding: 6px 8px;\n  vertical-align: middle;\n  white-space: nowrap;\n}\n.lake-link-editor-preview * {\n  display: inline-block;\n}\n.lake-link-editor-preview .lake-link-editor-button-wrap {\n  display: inline-flex;\n  align-items: center;\n  cursor: pointer;\n  padding: 4px;\n}\n.lake-link-editor-preview .lake-link-editor-button-wrap:HOVER {\n  background: #F4F4F4;\n}\n.lake-link-editor-preview .lake-link-editor-button,\n.lake-link-editor-preview .lake-link-control-button {\n  color: #595959;\n  margin: 0px 0px 0px 8px;\n  padding: 4px;\n}\n.lake-link-editor-preview .lake-link-editor-button:first-child,\n.lake-link-editor-preview .lake-link-control-button:first-child {\n  margin: 0;\n}\n.lake-link-editor-preview .lake-link-editor-button:HOVER,\n.lake-link-editor-preview .lake-link-control-button:HOVER {\n  background: #F4F4F4;\n  cursor: pointer;\n}\n.lake-link-editor-preview .lake-link-editor-button-label {\n  font-size: 12px;\n  margin-left: 4px;\n}\n.lake-link-editor-preview .lake-link-editor-link-container {\n  color: #1890FF;\n  height: 16px;\n  padding: 0 6px;\n  min-width: 180px;\n  max-width: 292px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  text-decoration: none;\n  line-height: 12px;\n  font-size: 14px;\n  letter-spacing: 1.2px;\n  vertical-align: middle;\n}\n.lake-link-editor-preview .lake-link-editor-link-empty {\n  height: 16px;\n  padding: 0 6px;\n  min-width: 146px;\n  max-width: 292px;\n  line-height: 20px;\n  font-size: 14px;\n}\n.lake-link-editor-preview .lake-link-editor-link-container:hover {\n  cursor: pointer;\n}\n.lake-link-editor-edit {\n  width: 365px;\n  padding: 16px 12px;\n  padding-bottom: 4px;\n}\n");var qy={"zh-cn":{text:"文本",link:"链接",editLink:"编辑链接",addDescription:"添加描述",linkAddress:"链接地址",deleteLink:"删除链接",confirm:"确定",pleaseInputLink:"请输入链接",emptyLink:"空链接",visitLink:"访问链接",pleaseEnterCorrectLink:"请输入正确的链接",selectedContent:"多行文字被选中，暂不支持修改文本",titleMode:"标题",cardMode:"卡片",embedMode:"嵌入",toCard:"转为书签"},en:{text:"Text",link:"Link",editLink:"Edit link",addDescription:"Add a description",linkAddress:"Link address",deleteLink:"Delete link",confirm:"Confirm",pleaseInputLink:"Please input link address",emptyLink:"Empty link",visitLink:"Visit link",pleaseEnterCorrectLink:"Please enter the correct link",selectedContent:"Selected in the document",titleMode:"Title",cardMode:"Card",embedMode:"Embed",toCard:"Convert to bookmark"}},Hy=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;l()(this,n);var a=(r=t.call(this,e)).props,o=a.type,i=a.lang,c=a.target;return r.locale=qy[i],r.nativeEvents=[],r.rect=c[0].getBoundingClientRect(),r.link=c[0].getAttribute("href"),r.isMultiLink=c.length>1,r.state={type:o,invalidLink:r.isInvalidLink(r.link)},r.preventScrollCancel=!1,r.setContainerPosition(),r.validator=new bm(window.location),r}return u()(n,[{key:"setContainerPosition",value:function(){var e=this.props,t=e.target,n=e.container,r=t[0].getBoundingClientRect().bottom;n.className="lake-prevent-card-activated",n.style.top="".concat(window.pageYOffset+r+4,"px"),n.style.left=window.pageXOffset+"px",n.style.position="absolute",n.style["z-index"]="1400"}},{key:"adjustPosition",value:function(){var e,t,n=this.props,r=n.container,a=n.target[0].getBoundingClientRect(),o=r.getBoundingClientRect(),i=o.height,c=o.width;t=a.left+c>window.innerWidth-20?window.pageXOffset+window.innerWidth-c-20:a.left-window.pageXOffset<20?window.pageXOffset+20:window.pageXOffset+a.left,a.bottom+i>window.innerHeight-20?(e=window.pageYOffset+a.top-i-4)<0&&(e=4):e=window.pageYOffset+a.bottom+4,r.style.top="".concat(e,"px"),r.style.left="".concat(t,"px")}},{key:"componentDidMount",value:function(){this.bindNativeEvents(),this.adjustPosition()}},{key:"componentDidUpdate",value:function(){this.adjustPosition()}},{key:"componentWillUnmount",value:function(){this.removeNativeEvents()}},{key:"bindNativeEvents",value:function(){var e=this,t=this.props.container,n=!1;this.addNativeEvent(window,"scroll",(function(t){!0!==e.preventScrollCancel?t.target.className&&-1!==t.target.className.indexOf("lake-link")||e.cancel():t.preventDefault()}),!0),this.addNativeEvent(window,"resize",(function(){e.cancel()}),!0),this.addNativeEvent(window,"mousedown",(function(e){var r=e.target;t.contains(r)||(n=!0)}),!0),this.addNativeEvent(window,"mouseup",(function(r){var a=r.target;n&&!t.contains(a)&&e.cancel(),n=!1}),!0),this.addNativeEvent(t,"keydown",(function(t){var n=t.keyCode,r=e.state.invalidLink;13!==n||r||e.confirm(),27===n&&e.cancel()}))}},{key:"cancel",value:function(){var e=this.props,t=e.onCancel,n=e.target;t({link:n&&n[0].getAttribute("href")})}},{key:"addNativeEvent",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.addEventListener(t,n,r),this.nativeEvents.push({dom:e,name:t,callback:n,useCapture:r})}},{key:"removeNativeEvents",value:function(){this.nativeEvents.forEach((function(e){var t=e.dom,n=e.name,r=e.callback,a=e.useCapture;t.removeEventListener(n,r,a)})),this.nativeEvents=[]}},{key:"confirm",value:function(){var e=this.props.onConfirm,t=this.state.invalidLink,n=this.getText(),r=this.getLink();t||e(n,r)}},{key:"renderPreview",value:function(){var e=this,t=this.props.onDeleteLink,n=this.getLink(),r=this.locale,a=this.renderToggleBtn(n);return Fc.a.createElement("div",{className:"lake-link-editor lake-link-editor-preview",ref:function(t){e.containerDom=t}},a,a?Fc.a.createElement("span",{className:"lake-link-editor-slash"}):null,Fc.a.createElement(Wc.a,{title:r.visitLink},Fc.a.createElement("a",{className:"lake-icon lake-icon-gotolink lake-link-control-button",onClick:function(t){t.preventDefault(),t.stopPropagation(),e.props.openLink(n)},target:"_blank",href:n})),Fc.a.createElement(Wc.a,{title:r.editLink},Fc.a.createElement("a",{className:"lake-icon lake-icon-edit lake-link-editor-button",onClick:function(){e.setState({type:"edit"})}})),Fc.a.createElement(Wc.a,{title:r.deleteLink},Fc.a.createElement("a",{className:"lake-icon lake-icon-unlink lake-link-editor-button",onClick:t})))}},{key:"renderToggleBtn",value:function(e){if(!e)return null;var t=this.validator.getURLInfo(e,{group:!0});return t.valid?t.isYuqueURL?this.renderYuqueLinkToggleBtn(e,t.url):this.renderThirdLinkToggleBtn(e):null}},{key:"renderYuqueLinkToggleBtn",value:function(e,t){var n=this,r=this.locale,a=xm(e)||km(e)?null:Fc.a.createElement(Wc.a,{title:r.embedMode},Fc.a.createElement("a",{className:"lake-icon lake-icon-doc-embed lake-link-control-button",onClick:function(){n.props.onToggleMode(!0,e,"embed",t)}}));return Fc.a.createElement(Fc.a.Fragment,null,Fc.a.createElement(Wc.a,{title:r.titleMode},Fc.a.createElement("a",{className:"lake-icon lake-icon-doc-title lake-link-control-button",onClick:function(){n.props.onToggleMode(!0,e,"title",t)}})),Fc.a.createElement(Wc.a,{title:r.cardMode},Fc.a.createElement("a",{className:"lake-icon lake-icon-doc-card lake-link-control-button",onClick:function(){n.props.onToggleMode(!0,e,"card",t)}})),a)}},{key:"renderThirdLinkToggleBtn",value:function(e){var t=this,n=this.locale;return Fc.a.createElement(Wc.a,{title:n.toCard},Fc.a.createElement("a",{className:"lake-icon lake-icon-doc-card lake-link-control-button",onClick:function(){t.props.onToggleMode(!1,e)}}))}},{key:"isInvalidLink",value:function(e){return function(e){return!e||e&&!e.match(/^[\x00-\x7F]/)||e.startsWith("javascript:")}(e)}},{key:"renderEditor",value:function(){var e=this,t=this.state.invalidLink,n=this.getText(),r=this.getLink(),a=this.locale;return Fc.a.createElement("div",{className:"lake-link-editor lake-link-editor-edit",ref:function(t){e.containerDom=t}},Fc.a.createElement("p",null,a.text),Fc.a.createElement("p",null,Fc.a.createElement(el.a,{className:"lake-link-text-input",defaultValue:this.isMultiLink?a.selectedContent:n,ref:function(t){e.textInputDom=t},placeholder:a.addDescription,disabled:this.isMultiLink,onChange:function(t){e.text=t.target.value}})),Fc.a.createElement("p",null,a.link),Fc.a.createElement("p",null,Fc.a.createElement(el.a,{className:"lake-link-link-input",defaultValue:r,ref:function(t){e.preventScrollCancel=!0,t&&t.focus(),e.linkInputDom=t,setTimeout((function(){e.preventScrollCancel=!1}),32)},placeholder:a.linkAddress,onChange:function(t){e.link=t.target.value,e.setState({invalidLink:e.isInvalidLink(e.link)})}})),t&&""!==r?Fc.a.createElement("p",{className:"lake-link-invalid-link"},a.pleaseEnterCorrectLink):"",Fc.a.createElement("p",null,Fc.a.createElement(tl.a,{className:"lake-link-confirm-button",onClick:function(){e.confirm()},disabled:!this.link||t},a.confirm)))}},{key:"getLink",value:function(){var e=this.props.getLink;return this.link&&e(this.link)||""}},{key:"getText",value:function(){var e=this.props.target;return this.isMultiLink?"":this.text||e[0].textContent}},{key:"render",value:function(){return"edit"===this.state.type?this.renderEditor():this.renderPreview()}}]),n}(Fc.a.Component);Hy.defaultProps={container:{},type:"preview",lang:"zh-cn",onDeleteLink:function(){},onConfirm:function(){},onCancel:function(){},shouldTargetBlank:function(){},getLink:function(e){return e},onToggleMode:function(){},openLink:function(){}},Hy.propTypes={container:Hc.a.object,target:Hc.a.arrayOf(Hc.a.instanceOf(HTMLElement)).isRequired,type:Hc.a.string,lang:Hc.a.string,onDeleteLink:Hc.a.func,onConfirm:Hc.a.func,onCancel:Hc.a.func,shouldTargetBlank:Hc.a.func,getLink:Hc.a.func,onToggleMode:Hc.a.func,openLink:Hc.a.func};var Wy={};function Yy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.href;if(!e||!Xe.protocols.some((function(t){return e.startsWith(t)})))return!1;try{var n=new URL(e,t),r=new URL(t);return n.host!==r.host||!Gy(n.pathname,r.pathname)}catch(e){console.warn(e)}return!0}function Gy(e,t){t.endsWith("/edit")&&(t=t.replace(/\/edit$/,""));var n=e.replace(/\/$/,"").split("/"),r=t.replace(/\/$/,"").split("/");return n.length===r.length&&(n.pop(),r.pop(),n.join("/")===r.join("/"))}function Xy(e,t,n,r,a,o){var i=kt(t)[0],c=document.createRange();c.setStartAfter(i),c.collapse(!0),i.parentNode.removeChild(i),e.change.select(c),n?"title"===a?e.change.insertCard("yuqueinline",{src:r,url:o,margin:!0}):e.change.insertCard("yuque",{src:r,url:o,mode:a,margin:!0}):e.change.insertCard("bookmarklink",{src:r,text:t.text()})}function Ky(e){var t=window.location,n=t.origin,r=t.pathname,a=Xe.escapeRegExp(n+r.replace("/edit","")),o=new RegExp("^".concat(a,"#"));return e=e.replace(o,"#").trim(),/^(\w+\.)+\w+(\/|$)/.test(e)&&(e="http://"+e),e}function Zy(e){try{var t=new URL(e,location.origin);return!!Wy[t.protocol]}catch(e){return console.error(e),!1}}function $y(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"preview",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=K()(this,"options.link.getContainer"),i=document.body;o&&(i=o());var c=document.createElement("div");i.appendChild(c);var l=function e(){c.parentNode===i&&(Vc.a.unmountComponentAtNode(c),i.removeChild(c)),t.off("beforesetvalue",e)};this.on("beforesetvalue",l),Vc.a.render(Fc.a.createElement(al.a,{autoInsertSpaceInButton:!1},Fc.a.createElement(Hy,{target:e.toArray(),shouldTargetBlank:Yy,lang:this.currentLanguage(),getLink:Ky,type:n,container:c,openLink:function(e){var n=new URL(e,xs());t.openLink(n.href,e)},onToggleMode:function(n,r,a,o){Vc.a.unmountComponentAtNode(c),i.removeChild(c),Xy(t,e,n,r,a,o)},onDeleteLink:function(){var n=t.change.getRange();n.selectNode(e[0]),t.change.select(n),t.change.unwrapInline("<a />"),l()},onConfirm:function(n,r){t.history.hold(),Yy(r)?e.attr("target","_blank"):e.removeAttr("target"),e.attr("href",Zy(r)?r:""),n&&e.text()!==n&&e.text(n),l(),t.change.change()},onCancel:function(e){var t=e.link;l(),!t&&a&&r()}})),c)}Xe.protocols.forEach((function(e){Wy[e]=!0}));var Qy={initialize:function(){var e=this;this.editArea.on("click",(function(t){var n=kt(t.target).closest("a");if(n.length>0){var r=e.card.closest(n);if(r){var a=e.card.getComponent(r);a&&"table"===a.name&&(t.preventDefault(),t.stopPropagation())}else t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),n[0]&&$y.call(e,n)}})),this.command.add("link",{sideEffect:!0,execute:function(){var t=e.change.getRange();if(t.collapsed){var n=e.lang.link,r=kt("<a>".concat(n.linkText,"</a>"));return e.change.insertInline(r),void(r.length&&$y.call(e,r,"edit",(function(){e.history.undo()}),!0))}e.change.splitMark(),sr.getActiveMarks(e.change.getRange()).forEach((function(e){var t=e[0];if(t.style.color&&(t.style.color="","SPAN"===t.nodeName)){""===t.style.cssText&&t.removeAttribute("style");var n=e.attr();0===Object.keys(n).length&&sr.unwrapNode(t)}})),e.change.unwrapInline("<a />"),e.change.wrapInline('<a href="" target="_blank" class="lake-link-marker" />'),En.shrinkRange(t),e.change.select(t);var a=kt(t.commonAncestorContainer);if("a"!==a.name&&((a=a.find(".lake-link-marker"))&&0!==a.length||(a=kt(t.commonAncestorContainer).closest("a"))),a.length)return a.removeClass("lake-link-marker"),$y.call(e,a,"edit",(function(){e.history.undo()}),!0),a}}),this.hotkey.set("mod+k","link"),this.on("paste:each",(function(e){"a"===e.name&&(Yy(e.attr("href")||"")?e.attr("target","_blank"):e.removeAttr("target"))}))}};ls(".lake-link-card-editor {\n  position: fixed;\n  z-index: 222;\n  top: -99999px;\n  left: -99999px;\n}\n");var Jy={"zh-cn":{link:"链接",linkAddress:"链接地址",confirm:"确定",pleaseInputLink:"请输入链接",pleaseEnterCorrectLink:"请输入正确的链接"},en:{link:"Link",linkAddress:"Link address",confirm:"Confirm",pleaseInputLink:"Please input link address",pleaseEnterCorrectLink:"Please enter the correct link"}},eb=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;l()(this,n),r=t.call(this,e),g()(de()(r),"state",{invalidLink:!1}),g()(de()(r),"nativeEvents",[]);var a=r.props.lang;return r.locale=Jy[a],r.validator=new bm(window.location),r.containerRef=Fc.a.createRef(),r}return u()(n,[{key:"componentDidMount",value:function(){this.bindNativeEvents();var e=this.containerRef.current.getBoundingClientRect(),t=function(e,t,n,r){var a,o,i=window.innerHeight,c=window.innerWidth;return a=e+n<c?e:e<c&&e-n>0?e-n:c-n-10,o=t+r<i?t:t<i&&t-r>0?t-r:i-r-10,{x:Math.max(a,0),y:Math.max(o,0)}}(this.props.x,this.props.y,e.width,e.height),n=t.x,r=t.y;this.containerRef.current.style.left=n+"px",this.containerRef.current.style.top=r+"px"}},{key:"componentWillUnmount",value:function(){this.removeNativeEvents()}},{key:"bindNativeEvents",value:function(){var e=this,t=!1,n=this;this.addNativeEvent(window,"mousedown",(function(n){var r=n.target;e.containerRef.current&&!e.containerRef.current.contains(r)&&(t=!0)}),!0),this.addNativeEvent(window,"mouseup",(function(n){var r=n.target;t&&(t=!1,e.containerRef.current&&!e.containerRef.current.contains(r)&&e.cancel())}),!0),this.addNativeEvent(window,"keydown",(function(t){var n=t.keyCode,r=e.state.invalidLink;13!==n||r||e.confirm(),27===n&&e.cancel()})),this.addNativeEvent(window,"resize",(function(){e.cancel()}),!0),this.addNativeEvent(window,"scroll",(function(t){t.target!==n.linkInputDom.input&&e.cancel()}),!0)}},{key:"addNativeEvent",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.addEventListener(t,n,r),this.nativeEvents.push({dom:e,name:t,callback:n,useCapture:r})}},{key:"removeNativeEvents",value:function(){this.nativeEvents.forEach((function(e){var t=e.dom,n=e.name,r=e.callback,a=e.useCapture;t.removeEventListener(n,r,a)})),this.nativeEvents=[]}},{key:"confirm",value:function(){var e=this.props.onConfirm,t=this.state.invalidLink,n=this.link;t||e({text:this.locale.link,link:Ky(n)})}},{key:"cancel",value:function(){var e=this.props,t=e.onCancel,n=e.target;t({link:n&&n[0].getAttribute("href")})}},{key:"isInvalidLink",value:function(){return!1}},{key:"render",value:function(){var e=this,t=this.state.invalidLink,n=this.locale;return Fc.a.createElement("div",{ref:this.containerRef,className:"lake-link-editor lake-link-card-editor lake-link-editor-edit"},Fc.a.createElement("p",null,n.link),Fc.a.createElement("p",null,Fc.a.createElement(el.a,{className:"lake-link-link-input",ref:function(t){t&&t.focus(),e.linkInputDom=t},placeholder:n.linkAddress,onChange:function(t){e.link=t.target.value,e.setState({invalidLink:e.isInvalidLink(e.link)})}})),t&&""!==this.link?Fc.a.createElement("p",{className:"lake-link-invalid-link"},n.pleaseEnterCorrectLink):"",Fc.a.createElement("p",null,Fc.a.createElement(tl.a,{className:"lake-link-confirm-button",onClick:function(){e.confirm()},disabled:!this.link||t},n.confirm)))}}]),n}(Fc.a.Component);g()(eb,"propTypes",{lang:Hc.a.string,onConfirm:Hc.a.func,onCancel:Hc.a.func,x:Hc.a.number.isRequired,y:Hc.a.number.isRequired}),g()(eb,"defaultProps",{lang:"zh-cn",onConfirm:function(){},onCancel:function(){}});var tb={initialize:function(){var e=this,t=document.createElement("div");t.className="lake-ui-link-card-dialog-container",document.body.appendChild(t);var n=!1;this.command.add("linkCard",{queryState:function(){return n},execute:function(){n=!0;var r=e.change.getRange();if(r){var a=En.createBookmark(r);if(a&&a.focus){var o=a.focus.getBoundingClientRect();En.moveToBookmark(a),Vc.a.unmountComponentAtNode(t),Vc.a.render(Fc.a.createElement(eb,{lang:e.options.lang,x:o.x,y:o.y,onCancel:function(){n=!1,Vc.a.unmountComponentAtNode(t)},onConfirm:function(r){var a=r.text,o=r.link;n=!1,Vc.a.unmountComponentAtNode(t),e.change.insertCard("bookmarklink",{src:o,text:a,margin:!0})}}),t)}}}})}};function nb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nb(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ab={initialize:function(){var e=this;this.command.add("thirdparty",{sideEffect:!0,execute:function(t){var n=e.change.insertCard("thirdparty",rb(rb({},t||{}),{},{margin:!0}));e.card.getComponent(n).focusInput()}})}};ls(".lake-card-calendar {\n  background: #fafafa;\n  border: 1px solid #fafafa;\n  border-radius: 4px;\n  padding: 20px 16px 0 16px;\n  user-select: none;\n  cursor: default;\n  overflow-x: hidden;\n  overflow-y: auto;\n  /* ---- header ---- */\n  /* ---- body ---- */\n}\n.lake-card-calendar button {\n  outline: none;\n}\n.lake-card-calendar .error-tip {\n  text-align: center;\n  color: red;\n}\n.lake-card-calendar-header {\n  position: relative;\n  margin-bottom: 20px;\n  z-index: 1;\n}\n.lake-card-calendar .lake-card-calendar-today-btn {\n  position: absolute;\n  top: 0;\n  right: 0;\n}\n.lake-card-calendar .lake-card-calendar-today-btn:focus {\n  color: #595959;\n  border-color: #d9d9d9 !important;\n}\n.lake-card-calendar-month-selector {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  line-height: 32px;\n  font-size: 16px;\n  color: #000;\n}\n.lake-card-calendar-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  z-index: 3;\n  display: none;\n}\n.lake-card-calendar-month-prev-btn,\n.lake-card-calendar-month-next-btn {\n  border: none;\n  background: none;\n  outline: none;\n  cursor: pointer;\n  padding: 0;\n  margin: 0 20px;\n  font-size: 12px;\n  color: #8c8c8c;\n}\n.lake-card-calendar-month-prev-btn:HOVER,\n.lake-card-calendar-month-next-btn:HOVER {\n  color: #000;\n}\n.lake-card-calendar-body {\n  position: relative;\n  padding-bottom: 20px;\n  z-index: 1;\n}\n.lake-card-calendar-week-names {\n  display: flex;\n  line-height: 20px;\n  color: #8c8c8c;\n}\n.lake-card-calendar-week-name {\n  flex: 1;\n  font-size: 12px;\n}\n");var ob=[{name:{zh:"蓝色",en:"blue"},line:"#69ABE4",border:"#CFEAFC",background:"#EBF7FF"},{name:{zh:"玫红色",en:"rose red"},line:"#E482D4",border:"#FCE1F6",background:"#FCF2FA"},{name:{zh:"绿色",en:"green"},line:"#77C386",border:"#D1E6D4",background:"#F0FAF1"},{name:{zh:"红色",en:"red"},line:"#E48884",border:"#FBDFDB",background:"#FCF4F2"},{name:{zh:"紫色",en:"purple"},line:"#9E8BE1",border:"#DED6F5",background:"#F8F5FF"},{name:{zh:"黄色",en:"yellow"},line:"#DFAC5D",border:"#F7E2B7",background:"#FFF7E6"}];function ib(e){return Number.parseInt(e.format("YYYYMMDD"))}function cb(e){return Jl()("".concat(e," 01:01:01+08:00"),"YYYYMMDD HH:mm:ss")}ls(".lake-card-calendar-cell-box-wrap {\n  position: relative;\n  top: 0;\n  left: 0;\n  margin-top: 5px;\n}\n.lake-card-calendar-cell-box {\n  position: relative;\n  top: 0;\n  left: 0;\n  background: #d9d9d9;\n  overflow: hidden;\n}\n.lake-card-calendar-cell-row {\n  position: relative;\n  top: 0;\n  left: 0;\n}\n.lake-card-calendar-cell-row:last-child .lake-card-calendar-cell-row-bg {\n  bottom: 0;\n}\n.lake-card-calendar-cell-row:last-child .lake-card-calendar-cell {\n  margin-bottom: 1px;\n}\n.lake-card-calendar-cell-row-inner {\n  display: flex;\n  flex-wrap: nowrap;\n  position: relative;\n  z-index: 2;\n}\n.lake-card-calendar-cell-row-bg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: -1px;\n  z-index: 1;\n  border: 1px solid #25b864;\n  display: none;\n}\n.lake-card-calendar-cell {\n  color: #595959;\n  min-height: 84px;\n  padding: 4px 0;\n  background: #fff;\n  margin-top: 1px;\n  margin-left: 1px;\n  display: flex;\n  flex-direction: column;\n}\n.lake-card-calendar-cell:HOVER .lake-card-calendar-add-schedule-btn {\n  display: flex;\n}\n.lake-card-calendar-weekend-cell {\n  background: #fafafa;\n}\n.lake-card-calendar-cell-body {\n  flex: 1;\n}\n.lake-card-calendar-today-cell .lake-card-calendar-day-label .lake-card-calendar-day-label-text {\n  display: inline-block;\n  text-align: center;\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  color: #fff;\n  background: #69ABE4;\n}\n.lake-card-calendar-other-month {\n  color: #bfbfbf;\n}\n.lake-card-calendar-day-label {\n  text-align: right;\n  font-size: 12px;\n  line-height: 18px;\n  height: 18px;\n  margin: 0 4px;\n  position: relative;\n}\n.lake-card-calendar-add-schedule-btn {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 1;\n  width: 16px;\n  height: 16px;\n  justify-content: center;\n  align-items: center;\n  display: none;\n  padding: 0;\n  border: 1px solid #d9d9d9;\n  border-radius: 2px;\n  background: #fff;\n  cursor: pointer;\n  color: #595959;\n}\n.lake-card-calendar-add-schedule-btn span {\n  transform-origin: center center;\n  transform: scale(0.7, 0.7);\n}\n");var lb=function(){function e(t,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a;l()(this,e),g()(this,"_id",null),g()(this,"_start",null),g()(this,"_end",null),g()(this,"_colorIndex",-1),g()(this,"_title",null),g()(this,"_desc",null),this._id=Xe.randomId(),this._title=t,this._desc=n,this._colorIndex=r,this._start=a,this._end=o}return u()(e,[{key:"getID",value:function(){return this._id}},{key:"getStart",value:function(){return this._start}},{key:"getStartMoment",value:function(){return cb(this._start)}},{key:"getEnd",value:function(){return this._end}},{key:"getEndMoment",value:function(){return cb(this._end)}},{key:"getDaysCount",value:function(){return this._start===this._end?1:this.getEndMoment().diff(this.getStartMoment(),"days")+1}},{key:"getTitle",value:function(){return this._title}},{key:"getDesc",value:function(){return this._desc}},{key:"getColorIndex",value:function(){return this._colorIndex}},{key:"toJSON",value:function(){return{id:this._id,start:this._start,end:this._end,colorIndex:this._colorIndex,title:this._title,desc:this._desc}}}],[{key:"recover",value:function(t){var n=t.id,r=t.start,a=t.end,o=t.colorIndex,i=new e(t.title,t.desc,o,r,a);return i._id=n,i}}]),e}();ls(".lake-card-calendar-schedule {\n  height: 24px;\n  border: 1px solid transparent;\n  display: flex;\n  align-items: center;\n  margin: 6px 0 6px -1px;\n  cursor: pointer;\n  position: relative;\n  top: 0;\n  left: 0;\n  z-index: 1;\n}\n.lake-card-calendar-schedule.empty-title .lake-card-calendar-schedule-title-preview {\n  color: #bfbfbf;\n}\n.lake-card-calendar-schedule:before {\n  content: '';\n  display: block;\n  width: 6px;\n  height: 6px;\n  border: 3px solid transparent;\n  margin-right: 5px;\n}\n.lake-card-calendar-schedule:after {\n  content: '';\n  display: block;\n  width: 6px;\n  height: 6px;\n  border: 3px solid transparent;\n  margin-left: 5px;\n}\n.lake-card-calendar-schedule.active:before {\n  border-left-color: #fff;\n}\n.lake-card-calendar-schedule.active:after {\n  border-right-color: #fff;\n}\n.lake-card-calendar-schedule.active .lake-card-calendar-schedule-title-preview {\n  color: #fff;\n}\n.lake-card-calendar-schedule.active .lake-card-calendar-schedule-line {\n  background: #fff;\n}\n.lake-card-calendar-schedule.lake-card-calendar-schedule-fake-view {\n  z-index: 0;\n}\n.lake-card-calendar-schedule.start-point {\n  border-top-left-radius: 2px;\n  border-bottom-left-radius: 2px;\n  margin-left: 4px;\n}\n.lake-card-calendar-schedule.start-point:before {\n  display: none;\n}\n.lake-card-calendar-schedule.start-point .lake-card-calendar-schedule-line {\n  display: block;\n}\n.lake-card-calendar-schedule-panel-overlay .ant-popover-inner-content {\n  padding: 0;\n}\n.lake-card-calendar-schedule.end-point {\n  border-top-right-radius: 2px;\n  border-bottom-right-radius: 2px;\n}\n.lake-card-calendar-schedule.end-point:after {\n  display: none;\n}\n.lake-card-calendar-schedule.end-point .lake-card-calendar-schedule-control {\n  display: block;\n}\n.lake-card-calendar-schedule-snapshot {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 99999;\n  pointer-events: none;\n  opacity: 0.7;\n}\n.lake-card-calendar-schedule-snapshot .lake-card-calendar-schedule {\n  margin: 0;\n  opacity: 1!important;\n}\n.lake-card-calendar-schedule-cursor {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 14.28%;\n  height: 2px;\n  z-index: 4;\n  display: none;\n}\n.lake-card-calendar-schedule-line {\n  width: 2px;\n  height: 12px;\n  border-radius: 1px;\n  margin: 0 5px;\n  display: none;\n}\n.lake-card-calendar-schedule-title-preview {\n  color: #595959;\n  font-size: 12px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  flex: 1;\n}\n.lake-card-calendar-schedule-control {\n  width: 10px;\n  align-self: stretch;\n  cursor: ew-resize;\n  display: none;\n}\n.lake-card-calendar-schedule-index0 {\n  border-color: #CFEAFC;\n  background: #EBF7FF;\n}\n.lake-card-calendar-schedule-index0:before {\n  border-left-color: #69ABE4;\n}\n.lake-card-calendar-schedule-index0:after {\n  border-right-color: #69ABE4;\n}\n.lake-card-calendar-schedule-index0 .lake-card-calendar-schedule-line {\n  background: #69ABE4;\n}\n.lake-card-calendar-schedule-index0.active {\n  border-color: transparent;\n  background: #69ABE4;\n}\n.lake-card-calendar-schedule-index1 {\n  border-color: #FCE1F6;\n  background: #FCF2FA;\n}\n.lake-card-calendar-schedule-index1:before {\n  border-left-color: #E482D4;\n}\n.lake-card-calendar-schedule-index1:after {\n  border-right-color: #E482D4;\n}\n.lake-card-calendar-schedule-index1 .lake-card-calendar-schedule-line {\n  background: #E482D4;\n}\n.lake-card-calendar-schedule-index1.active {\n  border-color: transparent;\n  background: #E482D4;\n}\n.lake-card-calendar-schedule-index2 {\n  border-color: #D1E6D4;\n  background: #F0FAF1;\n}\n.lake-card-calendar-schedule-index2:before {\n  border-left-color: #77C386;\n}\n.lake-card-calendar-schedule-index2:after {\n  border-right-color: #77C386;\n}\n.lake-card-calendar-schedule-index2 .lake-card-calendar-schedule-line {\n  background: #77C386;\n}\n.lake-card-calendar-schedule-index2.active {\n  border-color: transparent;\n  background: #77C386;\n}\n.lake-card-calendar-schedule-index3 {\n  border-color: #FBDFDB;\n  background: #FCF4F2;\n}\n.lake-card-calendar-schedule-index3:before {\n  border-left-color: #E48884;\n}\n.lake-card-calendar-schedule-index3:after {\n  border-right-color: #E48884;\n}\n.lake-card-calendar-schedule-index3 .lake-card-calendar-schedule-line {\n  background: #E48884;\n}\n.lake-card-calendar-schedule-index3.active {\n  border-color: transparent;\n  background: #E48884;\n}\n.lake-card-calendar-schedule-index4 {\n  border-color: #DED6F5;\n  background: #F8F5FF;\n}\n.lake-card-calendar-schedule-index4:before {\n  border-left-color: #9E8BE1;\n}\n.lake-card-calendar-schedule-index4:after {\n  border-right-color: #9E8BE1;\n}\n.lake-card-calendar-schedule-index4 .lake-card-calendar-schedule-line {\n  background: #9E8BE1;\n}\n.lake-card-calendar-schedule-index4.active {\n  border-color: transparent;\n  background: #9E8BE1;\n}\n.lake-card-calendar-schedule-index5 {\n  border-color: #F7E2B7;\n  background: #FFF7E6;\n}\n.lake-card-calendar-schedule-index5:before {\n  border-left-color: #DFAC5D;\n}\n.lake-card-calendar-schedule-index5:after {\n  border-right-color: #DFAC5D;\n}\n.lake-card-calendar-schedule-index5 .lake-card-calendar-schedule-line {\n  background: #DFAC5D;\n}\n.lake-card-calendar-schedule-index5.active {\n  border-color: transparent;\n  background: #DFAC5D;\n}\n"),ls(".le-schedule-panel {\n  width: 320px;\n  padding: 24px 16px;\n}\n.le-schedule-panel-item {\n  display: flex;\n  align-items: flex-start;\n  margin-bottom: 6px;\n}\n.le-schedule-panel-item:last-child {\n  margin-bottom: 0;\n}\n.le-schedule-panel-item.align-center {\n  align-items: center;\n}\n.le-schedule-panel-item.align-center .le-schedule-panel-item-icon {\n  margin-top: unset;\n}\n.le-schedule-panel-item-content .ant-picker {\n  border: 0;\n  box-shadow: none;\n}\n.le-schedule-panel-item-content .ant-picker .ant-picker-range .ant-picker-active-bar {\n  margin-left: 0;\n}\n.le-schedule-panel-item-icon {\n  width: 16px;\n  height: 16px;\n  margin-right: 16px;\n  margin-top: 2px;\n  font-size: 0;\n}\n.le-schedule-panel-item-icon .le-schedule-panel-color-box {\n  width: 16px;\n  height: 16px;\n  margin-top: 2px;\n}\n.le-schedule-panel-item-separator {\n  border-top: 1px solid #f5f5f5;\n  margin: 13px 0 13px 32px;\n}\n.le-schedule-panel-title-textarea {\n  width: 256px;\n  line-height: 26px;\n  font-size: 18px;\n  max-height: 78px;\n}\n.le-schedule-panel-title-textarea div {\n  font-weight: 400;\n}\n.le-schedule-panel-title-textarea textarea {\n  font-weight: 400;\n}\n.le-schedule-panel-color-select.ant-select-single.ant-select-sm:not(.ant-select-customize-input) .ant-select-selector {\n  width: 40px;\n  height: 18px;\n}\n.le-schedule-panel-color-select.ant-select-single.ant-select-sm:not(.ant-select-customize-input) .ant-select-selector .le-schedule-panel-color-select-option {\n  height: 16px;\n}\n.le-schedule-panel-color-select.ant-select-single.ant-select-sm:not(.ant-select-customize-input) .ant-select-selector .le-schedule-panel-color-select-icon {\n  display: none;\n}\n.le-schedule-panel-color-select.ant-select-single.ant-select-sm:not(.ant-select-customize-input) .ant-select-selector .le-schedule-panel-color-option-text {\n  display: none;\n}\n.le-schedule-panel-color-select.ant-select-single.ant-select-sm:not(.ant-select-customize-input) .ant-select-arrow {\n  right: 5px!important;\n  margin-top: -5px !important;\n}\n.le-schedule-panel-color-select.ant-select-single.ant-select-sm:not(.ant-select-customize-input) .ant-select-arrow-icon {\n  font-size: 10px;\n  height: 10px;\n}\n.le-schedule-panel-color-select-wrap .le-schedule-panel-color-box {\n  margin-right: 8px;\n}\n.le-schedule-panel-color-select-dropdown .ant-select-item-option-selected .lake-svg-icon-check-success {\n  display: block;\n}\n.le-schedule-panel-color-select-option {\n  display: flex;\n  height: 30px;\n  align-items: center;\n  font-weight: normal;\n}\n.le-schedule-panel-color-select-option .lake-svg-icon-check-success {\n  display: none;\n}\n.le-schedule-panel-color-select-option .le-schedule-panel-color-option-text {\n  margin-right: 22px;\n}\n.le-schedule-panel-color-select-icon {\n  width: 22px;\n  height: 22px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 3px;\n}\n.le-schedule-panel-desc-textarea {\n  width: 256px;\n  font-size: 12px;\n  line-height: 20px;\n  max-height: 120px;\n}\n.le-schedule-panel-color-box {\n  width: 16px;\n  height: 16px;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n}\n.le-schedule-panel-color-point {\n  display: block;\n  width: 8px;\n  height: 8px;\n}\n.le-schedule-panel-date-picker .ant-calendar-input-wrap {\n  display: none;\n}\n.le-schedule-panel-date-picker .ant-calendar-range-middle {\n  display: none;\n}\n.le-schedule-panel-date-picker .ant-calendar-range-picker-input {\n  width: 90px;\n  text-align: left;\n  cursor: pointer;\n}\n.le-schedule-panel-date-picker .ant-calendar-range-picker-separator {\n  margin: 0 7px 0 5px;\n}\n.le-schedule-panel-date-picker .ant-calendar-picker-input {\n  border: none!important;\n  box-shadow: none!important;\n  padding: 0;\n  cursor: pointer;\n}\n.le-schedule-panel-date-text {\n  line-height: 20px;\n  font-size: 12px;\n  cursor: default;\n}\n.le-schedule-panel .ant-select-dropdown-menu > li {\n  margin: 0;\n}\n.le-schedule-panel .le-date-separator {\n  padding: 0 7px;\n}\n");var sb=["title","color","startDate","endDate","locale","desc","onRequestClose","autoFocus","isReadonly"];var ub=Kc.a.Option,db=function(e){oe()(n,zc.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"state",{title:"",color:0,startDate:null,endDate:null,desc:""}),g()(de()(r),"_changed",!1),g()(de()(r),"rootNodeRef",null),g()(de()(r),"_handleTitleChange",(function(e){r.setState({title:e.target.value}),r._changed=!0})),g()(de()(r),"_handleDescChange",(function(e){r.setState({desc:e.target.value}),r._changed=!0})),g()(de()(r),"_handleColorChange",(function(e){r.setState({color:e}),r._changed=!0})),g()(de()(r),"_handleDateChange",(function(e){r.setState({startDate:e[0],endDate:e[1]}),r._changed=!0})),r.rootNodeRef=Fc.a.createRef(),r.state={title:e.title,color:e.color,startDate:e.startDate||Jl()(),endDate:e.endDate||Jl()(),desc:e.desc},r}return u()(n,[{key:"hasChange",value:function(){return this._changed}},{key:"resetChange",value:function(){this._changed=!1}},{key:"getValue",value:function(){var e=this.state;return{title:e.title,color:e.color,startDate:e.startDate,endDate:e.endDate,desc:e.desc}}},{key:"render",value:function(){var e=this.props;e.title,e.color,e.startDate,e.endDate;var t=e.locale;e.desc;var n=e.onRequestClose;e.autoFocus;var r=e.isReadonly,a=ns()(e,sb);return this.selectCount++,Fc.a.createElement("div",ml()({ref:this.rootNodeRef,className:"le-schedule-panel"},a),Fc.a.createElement("div",{className:"le-schedule-panel-item"},Fc.a.createElement("div",{className:"le-schedule-panel-item-icon"},this._renderTitleIcon()),Fc.a.createElement("div",{className:"le-schedule-panel-item-content"},Fc.a.createElement(vv,{className:"le-schedule-panel-title-textarea",placeholder:t.calendar.tip.title,isReadonly:r,autoFocus:this.props.autoFocus,onChange:this._handleTitleChange,onKeyDownEnter:n,value:this.state.title}))),this._renderColor(),Fc.a.createElement("div",{className:"le-schedule-panel-item-separator"}),Fc.a.createElement("div",{className:"le-schedule-panel-item align-center"},Fc.a.createElement("div",{className:"le-schedule-panel-item-icon"},Fc.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-insert-calendar"})),Fc.a.createElement("div",{className:"le-schedule-panel-item-content"},this._renderDate())),Fc.a.createElement("div",{className:"le-schedule-panel-item"},Fc.a.createElement("div",{className:"le-schedule-panel-item-icon"},Fc.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-desc"})),Fc.a.createElement("div",{className:"le-schedule-panel-item-content"},Fc.a.createElement(vv,{className:"le-schedule-panel-desc-textarea",placeholder:t.calendar.tip.desc,isReadonly:r,onKeyDownEnter:n,onChange:this._handleDescChange,autoLink:!0,value:this.state.desc}))))}},{key:"_renderTitleIcon",value:function(){return this.props.isReadonly?Fc.a.createElement("div",{className:"le-schedule-panel-color-box"},Fc.a.createElement("span",{className:"le-schedule-panel-color-point",style:{background:ob[this.state.color].line}})):null}},{key:"_renderColor",value:function(){if(this.props.isReadonly)return null;var e=this.props.locale.calendar.lang;return Fc.a.createElement("div",{className:"le-schedule-panel-item"},Fc.a.createElement("div",{className:"le-schedule-panel-item-icon"}),Fc.a.createElement("div",{className:"le-schedule-panel-item-content le-schedule-panel-color-select-wrap"},Fc.a.createElement(Kc.a,{className:"le-schedule-panel-color-select",value:this.state.color,getPopupContainer:function(e){return e.parentNode},onChange:this._handleColorChange,defaultActiveFirstOption:!1,dropdownClassName:"le-schedule-panel-color-select-dropdown",dropdownMatchSelectWidth:!1,size:"small"},ob.map((function(t,n){var r=t.line,a=t.name;return Fc.a.createElement(ub,{key:n,value:n},Fc.a.createElement("div",{className:"le-schedule-panel-color-select-option"},Fc.a.createElement("div",{className:"le-schedule-panel-color-select-icon"},Fc.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-check-success"})),Fc.a.createElement("div",{className:"le-schedule-panel-color-box"},Fc.a.createElement("span",{className:"le-schedule-panel-color-point",style:{background:r}})),Fc.a.createElement("div",{className:"le-schedule-panel-color-option-text"},a[e])))})))))}},{key:"_renderDate",value:function(){return this.props.isReadonly?Fc.a.createElement("div",{className:"le-schedule-panel-date-text"},this.state.startDate.format("YYYY-MM-DD"),Fc.a.createElement("span",{className:"le-date-separator"},"~"),this.state.endDate.format("YYYY-MM-DD")):Fc.a.createElement(nl.a.RangePicker,{allowClear:!1,getPopupContainer:function(e){return e},size:"small",onChange:this._handleDateChange,suffixIcon:Fc.a.createElement("span",null),className:"le-schedule-panel-date-picker",value:[this.state.startDate,this.state.endDate],format:"YYYY-MM-DD"})}}]),n}();function fb(e,t,n){if(0===t.length)return null;for(var r=n.clientX,a=n.clientY,o=e.getBoundingClientRect(),i=a<o.top,c=a>o.bottom,l=-1,s=-1,u=0;u<7;u++){var d=t[u].getBoundingClientRect(),f=d.left,p=d.right;if(r>=f&&r<=p){l=u;break}}for(var h=-1,m=-1,g=0,v=t.length/7;g<v;g++){var y=t[7*g].getBoundingClientRect(),b=y.top,k=y.bottom;if(!(k<=o.top||b>=o.bottom)&&(-1===h&&(h=g),m=g,a>=b&&a<=k)){s=g;break}}var w=t[0].getBoundingClientRect();return-1===l&&(l=r<w.left?0:6),-1===s&&(s=a<t[7*h].getBoundingClientRect().top?h:m),{overflowTop:i,overflowBottom:c,node:t[7*s+l]}}function pb(e,t,n,r,a){var o=kt(".".concat(n),t),i=[],c=kt(r).closest(".lake-card-calendar-cell-row")[0].firstChild,l=kt(a).closest(".lake-card-calendar-cell-row")[0].firstChild;if(!c||!l)return i;o.css("display","");for(var s=t.getBoundingClientRect(),u=0,d=o.length;u<d;u++){var f=o[u];if(f===l){i.push(f);break}(f===c||i.length)&&i.push(f)}for(var p=r.getBoundingClientRect(),h=a.getBoundingClientRect(),m=0,g=i.length;m<g;m++){var v,y=i[m],b=0===m,k=m===g-1,w=0;b&&(w=p.left-s.left-1),v=k?b?h.right-p.left+2:h.right-s.left+1:b?s.right-p.left+1:s.width,kt(y).css({left:w+"px",width:v+"px",display:"block"})}return i}g()(db,"propTypes",{title:Hc.a.string,color:Hc.a.number,startDate:Hc.a.instanceOf(Jl.a),endDate:Hc.a.instanceOf(Jl.a),desc:Hc.a.string,locale:Hc.a.object.isRequired,isReadonly:Hc.a.bool.isRequired,autoFocus:Hc.a.bool,onRequestClose:Hc.a.func}),g()(db,"defaultProps",{onRequestClose:function(){}});var hb=function(){function e(t,n,r){l()(this,e),g()(this,"_scrollNode",null),g()(this,"_scrollSpace",0),g()(this,"_isRunning",!1),g()(this,"_stopCallback",null),g()(this,"isScrollToTop",!1),this._scrollNode=t,this.isScrollToTop=n,this._scrollSpace=r;var a=t.scrollTop;n&&0===a||!n&&a===r?this._stopCallback&&this._stopCallback():this._start()}return u()(e,[{key:"stop",value:function(){this._isRunning&&(this._isRunning=!1,this._stopCallback&&this._stopCallback())}},{key:"isStop",value:function(){return!this._isRunning}},{key:"onStop",value:function(e){this._stopCallback=e}},{key:"_start",value:function(){var e=this;if(!this._isRunning){this._isRunning=!0;var t=this._calcAnimationDuration();if(0!==t){if(t<100||!window.requestAnimationFrame)return this._scrollNode.scrollTop=this.isScrollToTop?0:this._scrollSpace,void this.stop();var n,r=this._scrollNode,a=this.isScrollToTop,o=r.scrollTop,i=a?o:this._scrollSpace-o,c=a?0:this._scrollSpace;requestAnimationFrame((function l(s){if(e._isRunning){n||(n=s);var u=s-n;if(u>=t)return r.scrollTop=c,void e.stop();r.scrollTop=a?o-u/t*i:o+u/t*i,requestAnimationFrame(l)}}))}else this.stop()}}},{key:"_calcAnimationDuration",value:function(){var e=this._scrollNode.scrollTop,t=this._scrollSpace,n=this.isScrollToTop?e:t-e;return n<=0?0:Math.floor(n/t*1e3)}}]),e}();var mb=function(e){oe()(n,zc.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"rootNodeRef",null),g()(de()(r),"panelRef",null),g()(de()(r),"panelOpenCounter",1),g()(de()(r),"lastClickTime",0),g()(de()(r),"lastShowTime",0),g()(de()(r),"lastMouseDownTime",0),g()(de()(r),"scrollProcessor",null),g()(de()(r),"_closePanel",(function(){r.panelRef.current.hasChange()&&(r.panelRef.current.resetChange(),r.props.onChange(r.panelRef.current.getValue()))})),g()(de()(r),"_handleControlMouseDown",(function(e){e.preventDefault(),e.stopPropagation(),r.lastMouseDownTime=0;var t=r.props.schedule,n=r.props.boxRef.current,a=r.props.calendarRootNodeRef.current,o=kt(n).find('[data-id="'.concat(t.getID(),'"]'))[0],i=kt(o).closest(".lake-card-calendar-cell")[0],c=!1;if(n&&i&&a){var l=[],s=null,u=null,d=0,f=$()((function(e){e.stopPropagation(),e.preventDefault(),c||(c=!0,d=r._getScrollSpace(),s=kt(".lake-card-calendar-cell",n),r.props.onScheduleClick(r.props.schedule));var t=fb(a,s,e);if(t){var o,f,p=t.node;if(d>0&&(t.overflowTop||t.overflowBottom)?r.startScroll(t.overflowTop,d):r.scrollProcessor&&r.scrollProcessor.stop(),!p||(o=i)!==(f=p)&&0==(o.compareDocumentPosition(f)&Node.DOCUMENT_POSITION_FOLLOWING))return l.length&&kt(l).css("display",""),l=[],void(u=null);p!==u&&(kt(l).css("display",""),ob[r.props.schedule.getColorIndex()].line,l=pb(0,n,"lake-card-calendar-cell-row-bg",i,u=p))}}),100);document.addEventListener("mousemove",f,!1),document.addEventListener("mouseup",(function e(n){if(n.stopPropagation(),n.preventDefault(),r.scrollProcessor&&r.scrollProcessor.stop(),document.removeEventListener("mousemove",f,!1),document.removeEventListener("mouseup",e,!1),u){kt(l).css("display","");var a=Jl()(t.getStartMoment()),o=Jl()(u.getAttribute("data-moment"));r.props.onChange({title:t.getTitle(),color:t.getColorIndex(),desc:t.getDesc(),startDate:a,endDate:o}),r.panelOpenCounter++}}),!1)}})),g()(de()(r),"_handleScheduleMouseDown",(function(e){e.preventDefault(),e.stopPropagation(),r.lastMouseDownTime=Date.now();var t=e.clientX,n=e.clientY,a=r.props.boxRef.current,o=r.props.calendarRootNodeRef.current;if(a&&o){var i=r.props.schedule,c=null,l=null,s=null,u=0,d=null,f=null,p=null,h=0,m=$()((function(e){e.stopPropagation(),e.preventDefault(),c||(r.props.onScheduleClick(r.props.schedule),c=r._createSnapshot(),a.parentNode.appendChild(c),(s=document.createElement("div")).className="lake-card-calendar-schedule-cursor",s.style.width=Math.floor(a.getBoundingClientRect().width/7)-8+"px",a.parentNode.appendChild(s),(f=kt('.lake-card-calendar-schedule[data-id="'.concat(r.props.schedule.getID(),'"]'),r.props.boxRef.current)).css("opacity","0"),p=kt(".lake-card-calendar-cell",a),h=r._getScrollSpace());var i=e.clientX-t,m=e.clientY-n;c.style.left=i+"px",c.style.top=m+"px";var g=fb(o,p,e);if(g){var v=g.node;if(h>0&&(g.overflowTop||g.overflowBottom)?r.startScroll(g.overflowTop,h):r.scrollProcessor&&r.scrollProcessor.stop(),v){var y=ob[r.props.schedule.getColorIndex()].line;u=function(e,t,n,r,a,o){var i=o.clientY,c=[];if(kt(".lake-card-calendar-schedule",n).each((function(e){kt(e).hasClass("lake-card-calendar-schedule-fake-view")||c.push(e)})),r.style.display="none",0===c.length)return 0;for(var l=t.getBoundingClientRect(),s=0,u=c.length;s<u;s++){var d=c[s].getBoundingClientRect();if(i<=d.bottom)return c[s]===e||c[s-1]===e?-1:(kt(r).css({top:d.top-l.top-2-2+"px",left:d.left-l.left+"px",display:"block",background:a}),s)}if(c[c.length-1]===e)return-1;var f=c[c.length-1].getBoundingClientRect();return kt(r).css({top:f.bottom-l.top+2+"px",left:f.left-l.left+"px",display:"block",background:a}),c.length}(r.rootNodeRef.current,a,v,s,y,e),v!==l&&(kt(d).css("display",""),d=pb(0,a,"lake-card-calendar-cell-row-bg",l=v,l))}}}),16);document.addEventListener("mousemove",m,!1),document.addEventListener("mouseup",(function e(t){if(t.stopPropagation(),t.preventDefault(),r.scrollProcessor&&r.scrollProcessor.stop(),document.removeEventListener("mousemove",m,!1),document.removeEventListener("mouseup",e,!1),l){kt(d).css("display",""),f.css("opacity",""),c.parentNode.removeChild(c),s.parentNode.removeChild(s);var n=Jl()(l.getAttribute("data-moment")),a=n.clone().add(i.getDaysCount()-1,"days");r.props.onChange({title:i.getTitle(),color:i.getColorIndex(),desc:i.getDesc(),startDate:n,endDate:a},-1===u?void 0:u)}}),!1)}})),g()(de()(r),"_handleDocumentMousedown",(function(e){r.isShowPanel()&&Date.now()-r.lastShowTime>300&&(r.panelRef.current.rootNodeRef.current.contains(e.target)||r._hideDetailPanel())})),g()(de()(r),"_handleScheduleClick",(function(e){e.preventDefault(),e.stopPropagation(),!r.props.isReadonly&&Date.now()-r.lastMouseDownTime>300||(r.props.isReadonly?r._showDetailPanel():(r.props.activeID===r.props.schedule.getID()&&r._showDetailPanel(),r.props.onScheduleClick(r.props.schedule),Date.now()-r.lastClickTime<500?(r.lastClickTime=0,r._showDetailPanel()):r.lastClickTime=Date.now()))})),g()(de()(r),"_handleRequestClosePanel",(function(){r._hideDetailPanel()})),r.rootNodeRef=Fc.a.createRef(),r.panelRef=Fc.a.createRef(),r}return u()(n,[{key:"componentDidMount",value:function(){this._bindEvent()}},{key:"componentWillUnmount",value:function(){this._unbindEvent()}},{key:"componentDidUpdate",value:function(e){this.props.schedule&&e.panelShowID!==this.props.panelShowID&&e.panelShowID===this.props.schedule.getID()&&this.panelOpenCounter++,e.active!==this.props.active&&(this.props.active?this._bindEvent():this._unbindEvent())}},{key:"_bindEvent",value:function(){this.props.schedule&&document.addEventListener("mousedown",this._handleDocumentMousedown,!0)}},{key:"_unbindEvent",value:function(){document.removeEventListener("mousedown",this._handleDocumentMousedown,!0)}},{key:"render",value:function(){var e="lake-card-calendar-schedule";if(!this.props.schedule)return e+=" lake-card-calendar-schedule-fake-view",Fc.a.createElement("div",{className:e,ref:this.rootNodeRef});var t=this.props,n=t.schedule,r=t.activeID,a=t.isReadonly,o=t.locale,i=n.getColorIndex();e+=" lake-card-calendar-schedule-index".concat(i),r===n.getID()&&(e+=" active");var c=this._calcPositions(),l={width:c.width+"px"};n.getTitle()||(e+=" empty-title"),c.isStart&&(e+=" start-point"),c.isEnd&&(e+=" end-point");var s=this.props.autoFocusID===n.getID();return Fc.a.createElement(Xc.a,{placement:this._getPosition(),visible:this.isShowPanel(),autoAdjustOverflow:!0,overlayClassName:"lake-card-calendar-schedule-panel-overlay",getPopupContainer:function(e){return kt(e).closest(".lake-card-calendar")[0]||document.body},content:Fc.a.createElement(db,{"data-id":n.getID(),title:n.getTitle(),isReadonly:this.props.isReadonly,locale:o,startDate:n.getStartMoment(),endDate:n.getEndMoment(),color:n.getColorIndex(),desc:n.getDesc(),ref:this.panelRef,key:this.panelOpenCounter,autoFocus:s,onMouseDown:function(e){return e.stopPropagation()},onRequestClose:this._handleRequestClosePanel,onClick:function(e){return e.stopPropagation()}})},Fc.a.createElement("div",{className:e,onMouseDown:a?null:this._handleScheduleMouseDown,onClick:this._handleScheduleClick,style:l,ref:this.rootNodeRef,"data-id":n.getID()},Fc.a.createElement("div",{className:"lake-card-calendar-schedule-line"}),Fc.a.createElement("div",{className:"lake-card-calendar-schedule-title-preview"},n.getTitle()||o.calendar.tip.title),a?null:Fc.a.createElement("div",{className:"lake-card-calendar-schedule-control",onMouseDown:this._handleControlMouseDown,onClick:function(e){return e.stopPropagation()},onDoubleClick:function(e){return e.stopPropagation()}})))}},{key:"isShowPanel",value:function(){return!!this.props.schedule&&this.props.schedule.getID()===this.props.panelShowID&&this.props.panelShowRowIndex===this.props.rowIndex}},{key:"_showDetailPanel",value:function(){this.lastShowTime=Date.now(),this.props.onRequestTogglePanelShow(!0)}},{key:"_hideDetailPanel",value:function(){this._closePanel(),this.props.onRequestTogglePanelShow(!1)}},{key:"_getPosition",value:function(){var e=this.props,t=e.schedule,n=e.columnIndex,r=e.momentDate,a=ib(r)===t.getStart(),o=r.clone().add(7-n-1,"days"),i=t.getEnd()<=ib(o),c=t.getEnd()===ib(o);return i?c&&a?"leftTop":"rightTop":a?"leftTop":"rightTop"}},{key:"_calcPositions",value:function(){var e=this.props,t=e.schedule,n=e.columnIndex,r=e.cellWidths,a=e.momentDate,o=ib(a)===t.getStart(),i=a.clone().add(7-n-1,"days"),c=t.getEnd()<=ib(i),l=function(e,t,n,r){for(var a=r.getEnd(),o=e[t],i=1,c=7-t;i<c;i++)ib(n.clone().add(i,"days"))<=a&&(o+=e[t+i]+1);return o}(r,n,a,t);return o?l-=4:l+=1,c?l-=4:l+=1,{width:l,isStart:o,isEnd:c}}},{key:"_getScrollSpace",value:function(){var e=this._getCalendarRootNode();return e?e.scrollHeight-e.clientHeight:0}},{key:"startScroll",value:function(e,t){var n=this;if(this.scrollProcessor&&!this.scrollProcessor.isStop()){if(this.scrollProcessor.isScrollToTop===e)return;this.scrollProcessor.stop()}var r=this._getCalendarRootNode();if(r){var a=new hb(r,e,t);this.scrollProcessor=a,this.scrollProcessor.onStop((function(){n.scrollProcessor===a&&(n.scrollProcessor=null)}))}}},{key:"_getCalendarRootNode",value:function(){return this.props.boxRef.current?kt(this.props.boxRef.current).closest(".lake-card-calendar")[0]:null}},{key:"_createSnapshot",value:function(){var e=this.props.boxRef.current,t=e.getBoundingClientRect(),n=this.props.schedule,r=kt(e).find('[data-id="'.concat(n.getID(),'"]')),a=document.createElement("div");a.className="lake-card-calendar-schedule-snapshot";for(var o=0,i=r.length;o<i;o++){var c=r[o].cloneNode(!0),l=r[o].getBoundingClientRect(),s=l.left-t.left,u=l.top-t.top;c.style.transform="translate(".concat(s,"px, ").concat(u,"px)"),a.appendChild(c)}return a}}]),n}();function gb(e,t){var n=[];return Object.keys(t).map((function(e){return Number.parseInt(e,10)})).filter((function(t){return t<e})).sort().forEach((function(r){var a=t[r];a&&0!==a.length&&a.forEach((function(t){t.getEnd()>=e&&n.push(t)}))})),n}function vb(e,t){for(var n=0,r=t.length;n<r;n++)if(void 0===t[n])return t[n]=e,n;return t.push(e),t.length-1}function yb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yb(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}g()(mb,"propTypes",{momentDate:Hc.a.instanceOf(Jl.a),schedule:Hc.a.instanceOf(lb),isReadonly:Hc.a.bool.isRequired,calendarRootNodeRef:Hc.a.object,columnIndex:Hc.a.number.isRequired,locale:Hc.a.object.isRequired,cellWidths:Hc.a.arrayOf(Hc.a.number).isRequired,onChange:Hc.a.func,boxRef:Hc.a.object.isRequired,onScheduleClick:Hc.a.func,activeID:Hc.a.string,autoFocusID:Hc.a.string,panelShowID:Hc.a.string,rowIndex:Hc.a.number,panelShowRowIndex:Hc.a.number,onRequestTogglePanelShow:Hc.a.func,active:Hc.a.bool}),g()(mb,"defaultProps",{schedule:null,onChange:function(){},onScheduleClick:function(){},onRequestTogglePanelShow:function(){}});var kb=function(e){oe()(n,zc.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"state",{cellWidths:[],activeScheduleID:null,panelShowID:null,panelShowRowIndex:-1}),g()(de()(r),"today",null),g()(de()(r),"cellBoxRef",null),g()(de()(r),"schedules",null),g()(de()(r),"lastActiveScheduleDate",null),g()(de()(r),"autoFocusID",null),g()(de()(r),"_lastMouseDownTimestamp",0),g()(de()(r),"_lastClickTimestamp",0),g()(de()(r),"_updateCellWidth",(function(){if(r.cellBoxRef.current){var e=r.cellBoxRef.current.getBoundingClientRect().width-2-6,t=Math.floor(e/7),n=e-5*t;r.setState(bb(bb({},r.state),{},{cellWidths:[Math.floor(n/2),t,t,t,t,t,n-Math.floor(n/2)]}))}})),g()(de()(r),"_handleDocumentKeyDown",(function(e){e.isComposing||(r.state.panelShowID,r.state.activeScheduleID&&("Backspace"===e.code||"Backspace"===e.key||8===e.keyCode||"Delete"===e.code||"Delete"===e.key||46===e.keyCode?(e.preventDefault(),r.state.panelShowID||r._deleteSchedule(r.state.activeScheduleID)):"Escape"!==e.key&&"Escape"!==e.code&&27!==e.keyCode||(e.preventDefault(),r.state.panelShowID&&(r.setState({panelShowID:null,panelShowRowIndex:-1}),r._hideOverlay()))))})),g()(de()(r),"_handleDocumentMouseDown",(function(e){r.state.activeScheduleID&&(kt(e.target).closest('[data-id="'.concat(r.state.activeScheduleID,'"]'),(function(e){var t=kt(e.parentNode);return t.isRoot()?null:t[0]})).length||kt(e.target).hasClass("lake-card-calendar-overlay")||r.setState(bb(bb({},r.state),{},{activeScheduleID:null})))})),g()(de()(r),"_handleScheduleClick",(function(e){r.state.activeScheduleID!==e.getID()&&r.setState(bb(bb({},r.state),{},{activeScheduleID:e.getID()}))})),g()(de()(r),"_handleCellMouseDown",(function(){r._lastMouseDownTimestamp=Date.now()})),r.today=Jl()("".concat(Jl()().format("YYYY-MM-DD")," 01:01:01+08:00")),r.cellBoxRef=Fc.a.createRef(),r}return u()(n,[{key:"render",value:function(){this.lastActiveScheduleDate=null;var e=this._prepare();return Fc.a.createElement("div",{className:"lake-card-calendar-cell-box-wrap"},Fc.a.createElement("div",{className:"lake-card-calendar-cell-box",ref:this.cellBoxRef},this._renderCells(e)))}},{key:"componentDidMount",value:function(){this._updateCellWidth(),this._bindEvent(),window.addEventListener("resize",this._updateCellWidth,!1)}},{key:"componentWillUnmount",value:function(){this._unbindEvent(),window.removeEventListener("resize",this._updateCellWidth,!1)}},{key:"componentDidUpdate",value:function(e){e.viewport!==this.props.viewport&&this._updateCellWidth(),e.data.currentDate!==this.props.data.currentDate&&this.state.activeScheduleID&&(this.setState(bb(bb({},this.state),{},{activeScheduleID:null,panelShowID:null,panelShowRowIndex:-1})),this._hideOverlay()),e.active!==this.props.active&&(this.props.active?this._bindEvent():(this._unbindEvent(),this.state.activeScheduleID&&(this.setState(bb(bb({},this.state),{},{panelShowID:null,activeScheduleID:null,panelShowRowIndex:-1})),this._hideOverlay())))}},{key:"_bindEvent",value:function(){this.props.active&&(document.addEventListener("mousedown",this._handleDocumentMouseDown,!1),this.props.isReadonly||document.addEventListener("keydown",this._handleDocumentKeyDown,!1))}},{key:"_unbindEvent",value:function(){document.removeEventListener("mousedown",this._handleDocumentMouseDown,!1),document.removeEventListener("keydown",this._handleDocumentKeyDown,!1)}},{key:"_prepare",value:function(){var e=this.state.cellWidths,t=this.props,n=t.data,r=t.firstIndex,a=n.currentDate,o=n.schedules,i=cb(a),c=i.daysInMonth(),l=Math.abs(i.day()-r),s=i.clone().subtract(l,"days"),u=l+c;u+=u%7==0?7:7-u%7;var d=null;return e&&e.length&&(this.schedules=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return Object.keys(e).forEach((function(n){var r=e[n];r&&(t[n]=r.map(lb.recover))})),t}(o),d=function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=ib(e),o=gb(a,r),i={},c=[],l=0;l<n;l++){var s=e.clone().add(l,"days");c.push({moment:s,dateNumber:ib(s)})}o.forEach((function(e){for(var t=0;t<n;t++){var r=c[t].dateNumber;if(e.getEnd()<r)return;i[r]||(i[r]=[]),t%7==0?i[r].push(e):i[r].push(null)}}));for(var u=function(e){var t=c[e],a=r[t.dateNumber];if(!a||0===a.length)return"continue";a.forEach((function(r){i[t.dateNumber]||(i[t.dateNumber]=[]);for(var a=vb(r,i[t.dateNumber]),o=Math.floor(e/7),l=e+1;l<n;l++){var s=c[l];if(r.getEnd()<s.dateNumber)break;i[s.dateNumber]||(i[s.dateNumber]=[]);var u=Math.floor(l/7),d=l%7==0?r:null;if(o===u)i[s.dateNumber][a]=d;else{var f=c[7*u].dateNumber;f===s.dateNumber?i[s.dateNumber].push(d):i[f]?i[s.dateNumber][i[f].length-1]=d:i[s.dateNumber].push(d)}}}))},d=0;d<n;d++)u(d);return i}(s.clone(),e,u,this.schedules)),{currentMoment:i,startDate:s,totalDayCount:u,scheduleData:d}}},{key:"_renderCells",value:function(e){for(var t,n,r,a=e.startDate,o=e.totalDayCount,i=this.state.cellWidths,c=this.props.firstIndex,l=[],s=0;s<o;s++){var u=a.clone().add(s,"days");t=l,n=this._renderDateCell(u,s,i[u.day()],e),r=void 0,-1==(r=t.length-1)&&(r=0),t[r]?7===t[r].length&&(t[++r]=[]):t[r]=[],t[r].push(n)}return l.map((function(e,t){return Fc.a.createElement("div",{className:"lake-card-calendar-cell-row",key:(c+t)%7},Fc.a.createElement("div",{className:"lake-card-calendar-cell-row-bg"}),Fc.a.createElement("div",{className:"lake-card-calendar-cell-row-inner"},e))}))}},{key:"_renderDateCell",value:function(e,t,n,r){var a=this,o=this.props.isReadonly,i=e.day(),c=Math.floor(t/7),l="lake-card-calendar-cell";e.isSame(this.today)&&(l+=" lake-card-calendar-today-cell"),e.month()!==r.currentMoment.month()&&(l+=" lake-card-calendar-other-month"),0!==i&&6!==i||(l+=" lake-card-calendar-weekend-cell");var s=null;return n&&(s={width:n+"px"}),Fc.a.createElement("div",{className:l,"data-moment":e.format(),onClick:o?null:function(t){a._handleCellClick(t,e,c)},onMouseDown:o?null:this._handleCellMouseDown,key:e.unix(),style:s},Fc.a.createElement("div",{className:"lake-card-calendar-day-label"},this.props.isReadonly?null:Fc.a.createElement("button",{className:"lake-card-calendar-add-schedule-btn"},Fc.a.createElement("span",{className:"lake-icon lake-icon-plus"})),Fc.a.createElement("span",{className:"lake-card-calendar-day-label-text"},e.date())),Fc.a.createElement("div",{className:"lake-card-calendar-cell-body"},this._renderSchedules(e,t,r)))}},{key:"_renderSchedules",value:function(e,t,n){var r=this,a=n.scheduleData,o=this.state,i=o.cellWidths,c=o.activeScheduleID;if(i.length){var l=[],s=this.props,u=s.isReadonly,d=s.active,f=s.locale,p=a[ib(e)],h=Math.floor(t/7),m=this.autoFocusID;return p?(p.forEach((function(n,a){n&&(c===n.getID()&&(r.lastActiveScheduleDate=n.getStart()),m===n.getID()&&(r.autoFocusID=null)),l.push(Fc.a.createElement(mb,{key:n?n.getID():a,cellWidths:i,schedule:n,active:d,calendarRootNodeRef:r.props.calendarRootNodeRef,isReadonly:u,momentDate:e,locale:f,boxRef:r.cellBoxRef,activeID:c,autoFocusID:m,onChange:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];r._handleScheduleDataChange.apply(r,[n].concat(t))},rowIndex:h,panelShowID:r.state.panelShowID,panelShowRowIndex:r.state.panelShowRowIndex,onRequestTogglePanelShow:function(e){r._handlePanelShowRequest(n,h,e)},onScheduleClick:r._handleScheduleClick,columnIndex:t%7}))})),l):l}}},{key:"_handleScheduleDataChange",value:function(e,t,n){var r=e.getStart(),a=ib(t.startDate),o=bb({},this.props.data.schedules),i=lb.recover({id:e.getID(),title:t.title,desc:t.desc,colorIndex:t.color,start:ib(t.startDate),end:ib(t.endDate)}).toJSON();if(this._checkNewCreateSchedule(i,e.toJSON())){o[r]=o[r].slice();var c=o[r],l=this.schedules[r].indexOf(e);if(r===a)void 0!==n&&n!==l?(c.splice(n,0,null),c[n]=i,n>l?c.splice(l,1):c.splice(l+1,1)):c[l]=i;else{o[a]=(o[a]||[]).slice();var s=o[a];c.splice(l,1),0===c.length&&delete o[r],void 0!==n?s.splice(n,0,i):s.push(i)}this.props.onChange(bb(bb({},this.props.data),{},{schedules:o}))}}},{key:"_handleAddBtnClick",value:function(e,t,n){e.preventDefault(),e.stopPropagation(),this._addSchedule(t,n)}},{key:"_handleCellClick",value:function(e,t,n){e.preventDefault(),e.stopPropagation();var r=Date.now();r-this._lastMouseDownTimestamp>300||r-this._lastClickTimestamp<300||(this._lastClickTimestamp=Date.now(),this._addSchedule(t,n))}},{key:"_handlePanelShowRequest",value:function(e,t,n){var r=null;if(n)r=e.getID(),this._showOverlay();else if(this._hideOverlay(),!this._checkNewCreateSchedule(e.toJSON()))return;this.setState(bb(bb({},this.state),{},{panelShowID:r,activeScheduleID:r,panelShowRowIndex:t}))}},{key:"_showOverlay",value:function(){var e=kt(this.cellBoxRef.current).closest(".lake-card-calendar").find(".lake-card-calendar-overlay");e.length&&(e[0].style.display="block")}},{key:"_hideOverlay",value:function(){var e=kt(this.cellBoxRef.current).closest(".lake-card-calendar").find(".lake-card-calendar-overlay");e.length&&(e[0].style.display="none")}},{key:"_checkNewCreateSchedule",value:function(e,t){var n=this._newCreateID;return this._newCreateID=null,t||(t=e),!(n&&e.id===n&&!e.title&&!e.desc&&e.start===t.start&&e.end===t.end&&e.colorIndex===t.colorIndex&&(this._deleteSchedule(n,!0),1))}},{key:"_addSchedule",value:function(e,t){var n=this.props.data,r=n.schedules,a=void 0===r?{}:r,o=ib(e),i=a[o]||[],c=[].concat(x()(i),[new lb(null,null,(n.colorIndex||0)%ob.length,o).toJSON()]),l=c[c.length-1].id;this.setState({panelShowID:l,panelShowRowIndex:t,activeScheduleID:l}),this._newCreateID=l,this._showOverlay(),this.autoFocusID=l,this.props.onChange(bb(bb({},n),{},{colorIndex:((n.colorIndex||0)+1)%ob.length,schedules:bb(bb({},a),{},g()({},o,c))}))}},{key:"_deleteSchedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.lastActiveScheduleDate){for(var n=bb({},this.props.data.schedules),r=n[this.lastActiveScheduleDate].slice(),a=-1,o=0,i=r.length;o<i;o++)if(r[o].id===e){a=o;break}if(-1!==a){0===r.length?delete n[this.lastActiveScheduleDate]:(r.splice(a,1),n[this.lastActiveScheduleDate]=r);var c=bb(bb({},this.props.data),{},{schedules:n});t&&(c.colorIndex=c.colorIndex-1||0),this.props.onChange(c)}}}}]),n}();function wb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wb(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}g()(kb,"propTypes",{data:Hc.a.object.isRequired,firstIndex:Hc.a.number,active:Hc.a.bool.isRequired,isReadonly:Hc.a.bool.isRequired,calendarRootNodeRef:Hc.a.object,locale:Hc.a.object.isRequired,viewport:Hc.a.string,onChange:Hc.a.func,onUndo:Hc.a.func,onRedo:Hc.a.func}),g()(kb,"defaultProps",{onChange:function(){},onUndo:function(){},onRedo:function(){}});var _b=function(e){oe()(n,zc.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"state",{error:null}),g()(de()(r),"rootRef",null),g()(de()(r),"_handleNextBtnClick",(function(e){e.preventDefault(),e.stopPropagation(),r._updateCurrentDate(!0)})),g()(de()(r),"_handlePrevBtnClick",(function(e){e.preventDefault(),e.stopPropagation(),r._updateCurrentDate(!1)})),g()(de()(r),"_gotoToday",(function(e){e.stopPropagation(),e.preventDefault();var t=ib(Jl()("".concat(Jl()().format("YYYY-MM"),"-01 01:01:01+08:00"),"YYYY-MM-DD HH:mm:ss"));r.props.data.currentDate!==t&&r.props.onChange(xb(xb({},r.props.data),{},{currentDate:t}))})),r.rootRef=Fc.a.createRef(),r}return u()(n,[{key:"componentDidMount",value:function(){this.props.onReady(this)}},{key:"componentDidCatch",value:function(e,t){console.error(e),console.error(t),this.setState({error:e})}},{key:"componentDidUpdate",value:function(e){!this.props.active&&e.active&&this.rootRef.current&&kt(".lake-card-calendar-overlay",this.rootRef.current).css("display","none")}},{key:"componentWillUnmount",value:function(){this.rootRef.current&&kt(".lake-card-calendar-overlay",this.rootRef.current).css("display","none")}},{key:"render",value:function(){var e={};return this.props.data.height&&(e.height=this.props.data.height+"px"),this.state.error?Fc.a.createElement("div",{className:"lake-card-calendar",ref:this.rootRef,style:e},Fc.a.createElement("div",{className:"error-tip"},this.props.locale.calendar.tip.error)):Fc.a.createElement("div",{className:"lake-card-calendar",ref:this.rootRef,style:e},Fc.a.createElement("div",{className:"lake-card-calendar-overlay"}),this._renderHeader(),this._renderBody())}},{key:"_renderHeader",value:function(){var e=this.props.data.currentDate,t=this.props.locale,n=cb(e);return Fc.a.createElement("div",{className:"lake-card-calendar-header"},Fc.a.createElement(al.a,{autoInsertSpaceInButton:!1},Fc.a.createElement(tl.a,{className:"lake-card-calendar-today-btn",onClick:this._gotoToday},t.calendar.today)),Fc.a.createElement("div",{className:"lake-card-calendar-month-selector"},Fc.a.createElement("button",{className:"lake-card-calendar-month-prev-btn",onClick:this._handlePrevBtnClick},Fc.a.createElement("span",{className:"lake-icon lake-icon-calendar-arrow-left"})),Fc.a.createElement("div",null,n.format(t.calendar.format)),Fc.a.createElement("button",{className:"lake-card-calendar-month-next-btn",onClick:this._handleNextBtnClick},Fc.a.createElement("span",{className:"lake-icon lake-icon-calendar-arrow-right"}))))}},{key:"_renderBody",value:function(){return Fc.a.createElement("div",{className:"lake-card-calendar-body"},this._renderWeekNames(),Fc.a.createElement(kb,{firstIndex:this.props.firstIndex,active:this.props.active,locale:this.props.locale,viewport:this.props.viewport,calendarRootNodeRef:this.rootRef,isReadonly:this.props.isReadonly,data:this.props.data,onChange:this.props.onChange,onUndo:this.props.onUndo,onRedo:this.props.onRedo}))}},{key:"_renderWeekNames",value:function(){for(var e=[],t=this.props,n=t.firstIndex,r=t.locale,a=0;a<7;a++)e.push(Fc.a.createElement("div",{className:"lake-card-calendar-week-name",key:n},r.calendar.weekdays[n])),n=(n+1)%7;return Fc.a.createElement("div",{className:"lake-card-calendar-week-names"},e)}},{key:"_updateCurrentDate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.props.data,n=cb(t.currentDate);e?n.add(1,"months"):n.subtract(1,"months"),this.props.onChange(xb(xb({},t),{},{currentDate:ib(n)}))}}]),n}();g()(_b,"propTypes",{onReady:Hc.a.func,firstIndex:Hc.a.number,isReadonly:Hc.a.bool.isRequired,active:Hc.a.bool.isRequired,viewport:Hc.a.string,data:Hc.a.object.isRequired,locale:Hc.a.object.isRequired,onChange:Hc.a.func,onUndo:Hc.a.func,onRedo:Hc.a.func}),g()(_b,"defaultProps",{active:!1,onReady:function(){},firstIndex:0,onChange:function(){},onUndo:function(){},onRedo:function(){}});var Eb=function(e){oe()(n,Ds);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),g()(de()(e),"isActive",!1),g()(de()(e),"_inited",!1),g()(de()(e),"onUndo",(function(t){e.engine&&(t.preventDefault(),e.engine.command.execute("undo"))})),g()(de()(e),"onRedo",(function(t){e.engine&&(t.preventDefault(),e.engine.command.execute("redo"))})),e}return u()(n,[{key:"embedToolbar",value:function(){var e=this;if(this.engine)return[{type:"dnd"},{type:"copy"},{type:"separator"},{type:"copyCardLink",onClick:function(){return e.copyCardEmbedLink()}},{type:"separator"}].concat(x()(this.getMoreEmbedToolbarConfig()))}},{key:"activate",value:function(){this.engine&&(this.engine.toolbar.disable(!0),this.resizeController.show()),this.isActive=!0,this._updateView(this.container[0],this.getCardValue())}},{key:"unactivate",value:function(){this.engine&&(this.engine.toolbar.disable(!1),this.resizeController.hide()),this.isActive=!1,this._updateView(this.container[0],this.getCardValue())}},{key:"saveCardValue",value:function(e){var t=this.cardRoot;this.engine&&this.engine.card.setValue(t,e)}},{key:"getCardValue",value:function(){var e=this.cardRoot,t=this.getTopEngine();return t?t.card.getValue(e):{}}},{key:"render",value:function(e,t){var n=e[0];if(!t.currentDate){var r=Jl()();t.currentDate=ib(Jl()("".concat(r.format("YYYY-MM"),"-01 01:01:01+08:00"))),this.saveCardValue(t)}this._inited||(this._inited=!0,this._bindEvent()),this._updateView(n,t),this.toggleMargin()}},{key:"destroy",value:function(){this.engine&&this.engine.toolbar.disable(!1),this.resizeController&&this.resizeController.hide(),this.container[0]&&Vc.a.unmountComponentAtNode(this.container[0]),Bc()(se()(n.prototype),"destroy",this).call(this)}},{key:"_bindEvent",value:function(){var e=this;this.getTopEngine().on("viewportchange",(function(){e._updateView(e.container[0],e.getCardValue())}))}},{key:"_updateData",value:function(e){this.saveCardValue(e),this._updateView(this.container[0],e),this.engine&&this.engine.change.change()}},{key:"_updateView",value:function(e,t){var n=this,r=!this.engine,a=!!r||this.isActive;Vc.a.render(Fc.a.createElement(_b,{data:t,active:a,onReady:function(){n.createResizeController(kt(".lake-card-calendar",e))},isReadonly:r,locale:this.getTopEngine().locale,onUndo:this.onUndo,viewport:this.getTopEngine().viewport,onRedo:this.onRedo,onChange:function(e){return n._updateData(e)}}),e)}}]),n}();function Cb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ob(e){return 1===e.card.getComponentsByName("premium").length}function Sb(e){var t=-1;return e.replace(/<card\s+([\s\S]*?)(?:\/>|<\/card>)/g,(function(e,n,r){return n&&-1===t?("premium"===Xe.getAttrMap(n).name&&(t=r+e.length),e):e})),-1===t?null:e.substring(0,t)}g()(Eb,"type","block");var Rb=function(){function e(t){l()(this,e),g()(this,"__engine",null),g()(this,"__data",null),this.__engine=t}return u()(e,[{key:"setRawMeta",value:function(e){this.__data=e}},{key:"getRawMeta",value:function(){return this.__data}},{key:"hasMeta",value:function(){return null!==this.getMeta()}},{key:"getMeta",value:function(){var e=this.__engine.card.getComponentsByName("premium");return 1!==e.length?null:e[0].getValue()}}]),e}(),jb={bothInit:function(){this.metaManager.registerProvider("premium",new Rb(this))},initialize:function(){var e=this;this.on("paste:origin",(function(t){Zt.fetchAllChildren(t).forEach((function(t){var n=kt(t);n.isCard()&&"premium"===e.card.getName(n)&&n.remove()}))})),this.command.add("premium",{sideEffect:!0,execute:function(){if(!(e.card.getComponentsByName("premium").length>0)){var t=e.metaManager.getRawMeta("skylark"),n={};t&&t.docID&&(n.docID=t.docID),e.change.insertCard("premium",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cb(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n))}}})},getPublicContent:function(){return Ob(this)?Sb(this.getContent()):null},getPublicPureContent:function(){return Ob(this)?Sb(this.getPureContent()):null},getPublicValue:function(){return Ob(this)?Sb(this.getValue()):null}},Pb=function(){function e(){l()(this,e),g()(this,"__skylarkData",null)}return u()(e,[{key:"setRawMeta",value:function(e){this.__skylarkData=e}},{key:"getRawMeta",value:function(){return this.__skylarkData}},{key:"getMeta",value:function(){return null}},{key:"hasMeta",value:function(){return!1}}]),e}(),Ab={bothInit:function(){this.metaManager.registerProvider("skylark",new Pb)}},Tb={toggleToLink:function(e){var t=e.value,n=t.src,r=t.text;if(n){var a=document.createRange();a.setStartAfter(e.cardRoot[0]),a.collapse(!0),this.change.removeCard(e.cardRoot);var o=document.createElement("a");o.href=Xe.sanitizeUrl(n),o.setAttribute("target","_blank"),o.innerText=r||n;var i=a.startContainer.childNodes[a.startOffset];i?i.parentNode.insertBefore(o,i):a.startContainer.appendChild(o),a.selectNode(o),a.collapse(!1),this.change.select(a)}}},Db={initialize:function(){var e=this;this.command.add("transfer",{sideEffect:!0,execute:function(t){e.change.insertCard("transfer",t)}})},onTransferComplete:function(e,t,n){this.change.removeCard(e),Mb.call(this,t,n)}};function Mb(e,t){var n=e.filename+"."+e.ext;if(a.FileUtils.isImage(n))return Nb.call(this,e,t);if(a.FileUtils.isAudio(n))return Ib.call(this,e,t);if(a.FileUtils.isVideo(n))return Lb.call(this,e,t);if("Doc"===e.target_type)return Fb.call(this,e);var r=Au("localdoc").split(/\s*,\s*/),o=(e.ext||"").toLowerCase();return-1!==r.indexOf("."+o)?Bb.call(this,e,t):zb.call(this,e,t)}function Nb(e,t){this.change.insertCard("image",{status:"done",source:"transfer",src:t.url,size:e.filesize,margin:{top:!0,bottom:!0},name:e.filename+"."+e.ext})}function Lb(e,t){this.change.insertCard("video",{status:"done",source:"transfer",videoId:t.video_id,size:e.size,margin:!0,name:e.filename+"."+e.ext})}function Ib(e,t){this.change.insertCard("audio",{status:"done",source:"transfer",audioId:t.video_id,size:e.size,margin:!0,name:e.filename+"."+e.ext})}function Bb(e,t){this.change.insertCard("localdoc",{status:"done",source:"transfer",src:t.url,name:e.filename+"."+e.ext,ext:e.ext,size:e.filesize,collapsed:!0,margin:!0})}function zb(e,t){this.change.insertCard("file",{status:"done",source:"transfer",src:t.url,name:e.filename+"."+e.ext,ext:e.ext,size:e.filesize})}function Fb(e){var t=new URL(e.url,location.href),n=t.href;t.searchParams.append("view","doc_embed");var r=t.href;this.change.insertCard("yuque",{source:"transfer",margin:!0,url:r,src:n,mode:"card",detail:e.detail})}Ei.card.add("cardselect",Rd),Ei.card.add("mention",yh),Ei.card.add("emoji",jd),Ei.card.add("image",Xd),Ei.card.add("file",Jd),Ei.card.add("codeblock",np),Ei.card.add("math",Hs),Ei.card.add("calendar",Eb),Ei.card.add("table",Up),Ei.card.add("riddle",fh),Ei.card.add("mindmap",xf),Ei.card.add("flowchart2",jf),Ei.card.add("basicdraw",jf),Ei.card.add("youku",mh),Ei.card.add("processon",Wg),Ei.card.add("video",th),Ei.card.add("premium",tv),Ei.card.add("label",tg),Ei.card.add("thirdparty",Wg),Ei.card.add("bookmarklink",cv),Ei.card.add("vote",Sv),Ei.card.add("audio",Gv),Ei.card.add("puml",qf),Ei.card.add("mermaid",qf),Ei.card.add("flowchart",qf),Ei.card.add("graphviz",qf),Ei.card.add("diagram",qf),Ei.card.add("yuque",_m),Ei.card.add("yuqueinline",Em),Ei.card.add("lockedtext",Am),Ei.card.add("localdoc",zm),Ei.card.add("transfer",Tv),Ei.plugin.add("link",Qy),Ei.plugin.add("linkCard",tb),Ei.plugin.add("translate",By),Ei.plugin.add("search",$v),Ei.plugin.add("save",Kv),Ei.plugin.add("cardselect",Jv),Ei.plugin.add("mention",My),Ei.plugin.add("emoji",{initialize:function(){var e=this;this.command.add("emoji",{sideEffect:!0,execute:function(t){var n=null;t.url?n=t.url:t.point&&(n="https://gw.alipayobjects.com/a/g/lark/twemoji/2.3.6/".concat(t.point,".svg")),n&&e.change.insertCard("emoji",{src:n,package:t.package||"default"})}}),this.on("paste:schema",(function(e){e.add([{img:{class:"lake-emoji"}},{span:{"data-type":"*",style:{"background-image":"*"}}}])})),this.on("paste:each",(function(t){if("img"===t.name&&t.hasClass("lake-emoji")){var n=/(https?:\/\/.+?\.svg)/i.exec(t[0].outerHTML);n&&e.card.replaceNode(t,"emoji",n[1])}else if("span"!==t.name||"emoji"!==t.attr("data-type"));else{var r=/(https?:\/\/.+?\.svg)/i.exec(t[0].outerHTML);r&&(t.empty(),e.card.replaceNode(t,"emoji",r[1]))}}))}}),Ei.plugin.add("image",dy),Ei.plugin.add("file",fy),Ei.plugin.add("codeblock",Sy),Ei.plugin.add("math",Xv),Ei.plugin.add("calendar",{initialize:function(){var e=this;this.command.add("calendar",{sideEffect:!0,execute:function(){var t=e.change.insertCard("calendar",{margin:!0});e.change.focusCard(t)}})}}),Ei.plugin.add("table",Ay),Ei.plugin.add("riddle",{initialize:function(){var e=this;this.command.add("riddle",{execute:function(t){var n=e.change.insertCard("riddle",t);e.card.getComponent(n).focusInput()}})}}),Ei.plugin.add("youku",{initialize:function(){var e=this;this.command.add("youku",{sideEffect:!0,execute:function(t){var n=e.change.insertCard("youku",t);e.card.getComponent(n).focusInput()}})}}),Ei.plugin.add("thirdparty",ab),Ei.plugin.add("video",Ty),Ei.plugin.add("diagram",Cy),Ei.plugin.add("toc",by),Ei.plugin.add("repository",wy),Ei.plugin.add("moremark",{initialize:function(){var e=this;this.command.add("moremark",{sideEffect:!0,queryState:function(){var t=[];return["sup","sub","code"].forEach((function(n){e.command.queryState(n)&&t.push(n)})),t},execute:function(t){e.command.execute(t)}})}}),Ei.plugin.add("mindmap",rf),Ei.plugin.add("plugin",Ey),Ei.plugin.add("pastemarkdown",Ly),Ei.plugin.add("yuque",Uy),Ei.plugin.add("lockedtext",{initialize:function(){var e=this;this.command.add("lockedtext",{sideEffect:!0,execute:function(){e.change.insertCard("lockedtext",{margin:!0})}})}}),Ei.plugin.add("label",Vy),Ei.plugin.add("premium",jb),Ei.plugin.add("skylark",Ab),Ei.plugin.add("bookmarklink",Tb),Ei.plugin.add("vote",{initialize:function(){var e=this;this.command.add("vote",{sideEffect:!0,execute:function(){var t=e.change.insertCard("vote",{margin:!0});e.change.focusCard(t)}})}}),Ei.plugin.add("transfer",Db);var Ub=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"_clickTimer",null),g()(de()(r),"onClick",(function(e){if(e.preventDefault(),!r.props.onDblClick)return r._onClick(e);r._clickTimer||(r._clickTimer=setTimeout((function(){r._clickTimer=null,r._onClick(e)}),300))})),g()(de()(r),"onDblClick",(function(e){e.preventDefault(),r._clickTimer&&(clearTimeout(r._clickTimer),r._clickTimer=null);var t=r.props,n=t.name,a=t.onDblClick;t.disabled||(r.setState({visible:!1}),a&&a(e,n))})),g()(de()(r),"onMouseOver",(function(e){var t=r.props,n=t.onMouseOver;t.disabled||(n&&n(),e.preventDefault())})),g()(de()(r),"onMouseDown",(function(e){e.preventDefault();var t=r.props,n=t.name,a=t.onMouseDown;t.disabled||("paintformat"===n&&e.stopPropagation(),a&&a(e))})),g()(de()(r),"onMouseEnter",(function(){r.props.outerVisible||r.setState({visible:!0})})),g()(de()(r),"onMouseLeave",(function(){r.setState({visible:!1})})),r.state={visible:!1},r}return u()(n,[{key:"componentWillUnmount",value:function(){this._clickTimer&&(clearTimeout(this._clickTimer),this._clickTimer=null)}},{key:"_onClick",value:function(e){var t=this.props,n=t.name,r=t.onClick;t.disabled||(this.setState({visible:!1}),r&&r(e,n))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.name,r=e.title,o=e.icon,i=e.hotkey,c=e.active,l=e.disabled,s=e.hasArrow,u=e.currentText,d=e.content,f=e.mobile;r="function"==typeof r&&r()||r,i&&(r=Fc.a.createElement("div",{style:{textAlign:"center"}},r,Fc.a.createElement("br",null),Fc.a.createElement("span",{className:"lake-button-hotkey"},i)));var p=this.state.visible;(!r||f||a.ua.mobile)&&(p=!1);var h="main-".concat(n,"-button");return Fc.a.createElement(Wc.a,{title:r,placement:"bottom",visible:p,overlayClassName:"lake-toolbar-tooltip"},Fc.a.createElement("button",{accessbilityid:h,className:vl()("lake-button",t,{"lake-button-active":c,"lake-button-disabled":l}),onClick:this.onClick,onDoubleClick:this.props.onDblClick?this.onDblClick:null,onMouseDown:this.onMouseDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseOver:this.onMouseOver},d,u&&Fc.a.createElement("span",{className:"lake-button-inner-text"},u),o&&Fc.a.createElement("span",{dangerouslySetInnerHTML:{__html:o}}),s&&Fc.a.createElement("span",{className:"lake-icon lake-icon-arrow"})))}}]),n}(Fc.a.Component);g()(Ub,"propTypes",{name:Hc.a.string,className:Hc.a.string,title:Hc.a.any,icon:Hc.a.string,hotkey:Hc.a.string,active:Hc.a.bool,disabled:Hc.a.bool,hasArrow:Hc.a.bool,currentText:Hc.a.string,content:Hc.a.any,onClick:Hc.a.func,onDblClick:Hc.a.func,onMouseDown:Hc.a.func,onMouseOver:Hc.a.func,outerVisible:Hc.a.bool,mobile:Hc.a.bool});var Vb={"zh-cn":{more:"更多"},en:{more:"More"}};function qb(e){var t=e.children,n=e.width,r=e.lang||"zh-cn",a=Object(zc.useState)(!1),o=h()(a,2),i=o[0],c=o[1],l=function(e){e.preventDefault(),e.stopPropagation(),c(!i)};return Fc.a.createElement("div",{className:vl()("lake-toolbar-area","lake-toolbar-more",{"lake-toolbar-area-hide":!t||!t.length})},Fc.a.createElement("div",{className:"lake-button-set"},Fc.a.createElement("div",{className:vl()("lake-button-set-trigger",{"lake-button-set-trigger-active":i})},Fc.a.createElement(Ub,{title:(Vb[r]||{}).more||"更多",icon:'<span class="lake-icon lake-icon-more" />',name:"more",className:"lark-button-more",active:i,hasArrow:!1,onClick:l,outerVisible:i})),Fc.a.createElement("div",{className:vl()("lake-button-set-list","lake-button-set-list-hoz",{"lake-button-set-list-active":i}),onClick:function(e){setTimeout((function(){l(e)}),1e3)},style:{width:"".concat(n,"px")}},t)))}function Hb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hb(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}qb.defaultProps={lang:"zh-cn"},qb.propTypes={children:Hc.a.array,width:Hc.a.number,lang:Hc.a.string.isRequired};var Yb=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"toggleDropdown",(function(){r.props.disabled||(r.state.active?r.hideDropdown():r.showDropdown())})),g()(de()(r),"showDropdown",(function(){!0!==r.state.active&&(document.addEventListener("click",r.hideDropdown),r.setState({active:!0}))})),g()(de()(r),"hideDropdown",(function(e){if(e)for(var t=e.target;t;){if(t===r.buttonArea.current||t.classList&&t.classList.contains("lake-prevent-card-activated"))return;t=t.parentNode}document.removeEventListener("click",r.hideDropdown),r.setState({active:!1})})),r.buttonArea=Fc.a.createRef(),r.state={active:!1},r}return u()(n,[{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.hideDropdown)}},{key:"render",value:function(){var e=this.state.active,t=Wb({},this.props);t.active=e,t.onClick=this.toggleDropdown;var n=Wb({},this.props);return n.active=e,n.onClick=this.toggleDropdown,n.onBeforeUpload=this.toggleDropdown,n.activeKeys=n.data.map((function(e,t){return String(t)})),Fc.a.createElement("div",{className:"lake-button-set lake-collapse-button",ref:this.buttonArea},Fc.a.createElement("div",{className:vl()("lake-button-set-trigger",{"lake-button-set-trigger-active":e})},Fc.a.createElement(Ub,t)),Fc.a.createElement(ed,n))}}]),n}(Fc.a.Component);g()(Yb,"propTypes",{disabled:Hc.a.bool});var Gb=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"onSelect",(function(e,t){e.preventDefault(),e.stopPropagation(),r.props.onSelect(t)})),r.rootNodeRef=Fc.a.createRef(),r}return u()(n,[{key:"componentDidMount",value:function(){this.resetPosition()}},{key:"componentDidUpdate",value:function(){this.resetPosition()}},{key:"resetPosition",value:function(){var e=this.rootNodeRef.current;if(e&&this.props.active){var t=e.parentNode;if(t){var n=t.getBoundingClientRect();window.innerHeight-n.bottom<n.top?e.classList.add("lake-button-set-list-to-top"):e.classList.remove("lake-button-set-list-to-top")}}}},{key:"render",value:function(){var e=this,t=this.props,n=t.name,r=t.data,a=t.active,o=t.currentValue,i=t.className,c=!["indent"].includes(n),l="lake-button-icon-list"===i;return Array.isArray(o)||(o=[o]),Fc.a.createElement("div",{ref:this.rootNodeRef,className:vl()("lake-button-set-list",{"lake-button-set-list-active":a,"lake-button-set-list-with-dot":c})},r.map((function(t,n){return l?Fc.a.createElement(Wc.a,{key:n,title:t.shortcut,placement:"right"},Fc.a.createElement("a",{className:vl()("lake-button-set-list-item",t.className),onClick:function(n){return e.onSelect(n,t.key)}},o.indexOf(t.key)>=0&&Fc.a.createElement("span",{className:"lake-icon lake-icon-dot"}),Fc.a.createElement("span",{dangerouslySetInnerHTML:{__html:t.icon}}),Fc.a.createElement("span",{style:{fontSize:12}},t.title))):Fc.a.createElement("a",{key:n,className:vl()("lake-button-set-list-item",t.className),onClick:function(n){return e.onSelect(n,t.key)}},o.indexOf(t.key)>=0&&Fc.a.createElement("span",{className:"lake-icon lake-icon-dot"}),Fc.a.createElement("span",null,t.value))})))}}]),n}(Fc.a.Component);function Xb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}g()(Gb,"propTypes",{className:Hc.a.string,name:Hc.a.string,data:Hc.a.array,active:Hc.a.bool,currentValue:Hc.a.any,onSelect:Hc.a.func});var Kb=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"toggleDropdown",(function(e){e.preventDefault(),e.stopPropagation(),r.props.disabled||(r.state.active?r.hideDropdown():r.showDropdown())})),g()(de()(r),"showDropdown",(function(){document.addEventListener("click",r.hideDropdown),r.setState({active:!0})})),g()(de()(r),"hideDropdown",(function(){document.removeEventListener("click",r.hideDropdown),r.setState({active:!1})})),r.state={active:!1},r}return u()(n,[{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.hideDropdown)}},{key:"render",value:function(){var e=this.state.active,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xb(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props);return delete t.onClick,delete t.active,Fc.a.createElement("div",{className:"lake-button-set",onClick:this.toggleDropdown},Fc.a.createElement("div",{className:vl()("lake-button-set-trigger",{"lake-button-set-trigger-active":e})},Fc.a.createElement(Ub,ml()({active:e},t))),Fc.a.createElement(Gb,{className:this.props.className,active:e,name:this.props.name,data:this.props.data,currentValue:this.props.active,onSelect:this.props.onClick}))}}]),n}(Fc.a.Component);g()(Kb,"propTypes",{className:Hc.a.string,name:Hc.a.string,data:Hc.a.array,disabled:Hc.a.bool,active:Hc.a.any,onClick:Hc.a.func});var Zb=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"render",value:function(){return this.props.disabled?Fc.a.createElement(Ub,this.props):Fc.a.createElement(Ws,this.props,Fc.a.createElement(Ub,this.props))}}]),n}(Fc.a.Component);g()(Zb,"propTypes",{disabled:Hc.a.bool});var $b=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"toggleDropdown",(function(e){e.preventDefault(),e.stopPropagation(),r.state.active?r.hideDropdown():r.showDropdown()})),g()(de()(r),"showDropdown",(function(){document.addEventListener("click",r.hideDropdown),r.setState({active:!0})})),g()(de()(r),"hideDropdown",(function(e){e.target.closest('[data-lake-editor-ui="colorpicker"]')||(document.removeEventListener("click",r.hideDropdown),r.setState({active:!1}))})),g()(de()(r),"handleClick",(function(){r.props.onClick(r.state.currentColor)})),g()(de()(r),"handleSelect",(function(e){r.setState({currentColor:e}),setTimeout((function(){r.props.onClick(e)}),32)})),g()(de()(r),"addCustomColor",(function(e){var t=r.state.currentCustomColors;if(!t.includes(e)){var n=[e].concat(x()(t));n.length>10&&(n=n.slice(n.length-10)),r.setState({currentCustomColors:n})}})),g()(de()(r),"getIcon",(function(e){return"fontcolor"===e?r.fontColorIcon():"backcolor"===e?r.backgroundColorIcon():"highlight"===e?r.textHighlightIcon():null})),r.state={currentColor:e.currentColor,currentCustomColors:[],active:!1},r}return u()(n,[{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.hideDropdown)}},{key:"textHighlightIcon",value:function(){var e="#FFD666",t="#FFFBE6";this.state.disabled&&(t="#BFBFBF",e="#BFBFBF");var n=this.state.currentColor;return n&&(t=n,e=Fm.getStroke(n)),Fc.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1"},Fc.a.createElement("title",null,"highlight"),Fc.a.createElement("desc",null,"Created with Sketch."),Fc.a.createElement("g",{id:"highlight",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Fc.a.createElement("rect",{id:"Rectangle-55",stroke:e,strokeWidth:"0.5",fill:t,x:"2",y:"12.75",width:"12",height:"1.5",rx:"0.125"}),Fc.a.createElement("g",{id:"Group-2",transform:"translate(2.781250, 1.375000)",fillRule:"nonzero"},Fc.a.createElement("path",{fill:"#595959",d:"M2.86079849,6.64817222 L2.05713835,5.84451208 C2.00832281,5.79569655 2.00832281,5.71655092 2.05713835,5.66773539 L3.61029491,4.11457882 L3.11963835,3.62392225 C3.07082281,3.57510672 3.07082281,3.49596109 3.11963835,3.44714556 L6.47839556,0.0883883476 C6.52721109,0.0395728112 6.60635672,0.0395728112 6.65517225,0.0883883476 L11.5165314,4.94974747 C11.5653469,4.998563 11.5653469,5.07770863 11.5165314,5.12652416 L8.15777416,8.48528137 C8.10895863,8.53409691 8.029813,8.53409691 7.98099747,8.48528137 L7.38889678,7.89318068 L5.83574021,9.44633725 C5.78692467,9.49515278 5.70777905,9.49515278 5.65896351,9.44633725 L5.0267407,8.81411444 L4.48856529,9.35326519 C4.39477378,9.44720966 4.26747335,9.5 4.13472392,9.5 L0.608857988,9.5 C0.470786801,9.5 0.358857988,9.38807119 0.358857988,9.25 C0.358857988,9.18363253 0.385247413,9.11998865 0.432210608,9.07309408 L2.86079849,6.64817222 Z M6.56678391,1.67937861 L4.71062861,3.53553391 L8.06938582,6.89429112 L9.92554112,5.03813582 L6.56678391,1.67937861 Z M3.64812861,5.75612373 L5.74735186,7.85534699 L6.54284699,7.05985186 L4.44362373,4.96062861 L3.64812861,5.75612373 Z",id:"Combined-Shape"}))))}},{key:"backgroundColorIcon",value:function(){var e="#FFD666",t="#FFFBE6";this.state.disabled&&(t="#BFBFBF",e="#BFBFBF");var n=this.state.currentColor;return n&&(t=n,e=Fm.getStroke(n)),Fc.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1"},Fc.a.createElement("title",null,"color-bg"),Fc.a.createElement("desc",null,"Created with Sketch."),Fc.a.createElement("g",{id:"color-bg",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Fc.a.createElement("path",{d:"M11.9745711,7.921875 C11.9745711,7.921875 13.2147672,9.2863447 13.2147672,10.1226326 C13.2147672,10.8142992 12.6566789,11.3802083 11.9745711,11.3802083 C11.2924632,11.3802083 10.734375,10.8142992 10.734375,10.1226326 C10.734375,9.2863447 11.9745711,7.921875 11.9745711,7.921875 Z M9.07958999,6.47535893 L6.28501575,3.68078468 L3.4904415,6.47535893 L9.07958999,6.47535893 Z M5.3326566,3.04215357 L4.28223263,1.9917296 C4.22692962,1.93642659 4.22692962,1.84676271 4.28223263,1.7914597 L5.03228902,1.0414033 C5.08759203,0.986100299 5.17725591,0.986100299 5.23255892,1.0414033 L6.4546098,2.26345418 C6.46530408,2.27146914 6.4755605,2.28033918 6.48528564,2.29006432 L10.4848531,6.28963174 C10.5954591,6.40023775 10.5954591,6.57956552 10.4848531,6.69017153 L6.4838816,10.691143 C6.37327559,10.801749 6.19394782,10.801749 6.08334181,10.691143 L2.08377439,6.69157557 C1.97316838,6.58096956 1.97316838,6.40164179 2.08377439,6.29103578 L5.3326566,3.04215357 Z",id:"Combined-Shape",fill:"#595959"}),Fc.a.createElement("rect",{id:"Rectangle-55",stroke:e,strokeWidth:"0.5",fill:t,x:"2",y:"12.75",width:"12",height:"1.5",rx:"0.125"})))}},{key:"fontColorIcon",value:function(){var e="#F5222D",t="#F5222D";this.state.disabled&&(t="#BFBFBF",e="#BFBFBF");var n=this.state.currentColor;return n&&(t=n,e=Fm.getStroke(n)),Fc.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16"},Fc.a.createElement("title",null,"color-font"),Fc.a.createElement("desc",null,"Created with Sketch."),Fc.a.createElement("g",{id:"color-font",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Fc.a.createElement("rect",{fill:t,id:"Rectangle-55",stroke:e,strokeWidth:"0.5",x:"2",y:"12.75",width:"12",height:"1.5",rx:"0.125"}),Fc.a.createElement("path",{d:"M5.29102819,11.25 L3.96365715,11.25 C3.87952002,11.25 3.8113134,11.1817934 3.8113134,11.0976562 C3.8113134,11.08076 3.81412419,11.0639814 3.81963067,11.0480076 L7.0756112,1.60269506 C7.09679504,1.5412426 7.15463644,1.5 7.21963767,1.5 L8.81868806,1.5 C8.883726,1.5 8.94159158,1.54128846 8.96274706,1.60278951 L12.2118,11.048102 C12.239168,11.1276636 12.1968568,11.2143472 12.1172952,11.2417152 C12.1013495,11.2472004 12.0846037,11.25 12.067741,11.25 L10.6761419,11.25 C10.6099165,11.25 10.5512771,11.2072154 10.531066,11.1441494 L9.69970662,8.55 L6.27433466,8.55 L5.43599205,11.1444975 C5.41567115,11.2073865 5.35711879,11.25 5.29102819,11.25 Z M8.02635163,3.18571429 L7.96199183,3.18571429 L6.63904023,7.30714286 L9.33500105,7.30714286 L8.02635163,3.18571429 Z",id:"A",fill:"#595959"})))}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.title,a=e.moreTitle,o=e.disabled,i=this.state.active;t.indexOf(":")>=0&&(t=t.split(":")[1]);var c=Fc.a.createElement("span",{className:"lake-icon lake-icon-svgs"},this.getIcon(t)),l=Fc.a.createElement("span",{className:"lake-icon"});return Fc.a.createElement("div",{className:"lake-button-set"},Fc.a.createElement("div",{className:vl()("lake-button-set-trigger lake-button-set-trigger-double",{"lake-button-set-trigger-active":i},{"lake-button-set-trigger-double-active":i})},Fc.a.createElement(Ub,{className:"lake-button-current",content:c,onClick:this.handleClick,name:t,title:n,disabled:o}),Fc.a.createElement(Ub,{className:"lake-button-dropdown",content:l,onClick:this.toggleDropdown,name:"".concat(t,"-dropdown"),title:a,hasArrow:!0,disabled:o})),Fc.a.createElement("div",{className:vl()("lake-button-set-list lake-button-set-list-colorboard",{"lake-button-set-list-active":i})},Fc.a.createElement(r.ColorPicker,{show:i,defaultColor:this.props.defaultColor,activeColors:[this.state.currentColor],customColors:this.state.currentCustomColors,onSelect:this.handleSelect,onSaveColor:this.addCustomColor})))}}]),n}(Fc.a.Component);function Qb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}g()($b,"propTypes",{name:Hc.a.string,title:Hc.a.string,moreTitle:Hc.a.string,currentColor:Hc.a.string.isRequired,defaultColor:Hc.a.string.isRequired,disabled:Hc.a.bool,onClick:Hc.a.func});var Jb=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"togglePopover",(function(){r.setState((function(e){return{active:!e.active}}))})),r.state={active:!1},r}return u()(n,[{key:"render",value:function(){var e=this,t=this.props.lang,n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qb(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props);return delete n.onClick,delete n.active,Fc.a.createElement(Xc.a,{overlayClassName:"lake-button-emoji-popover",trigger:["click"],visible:this.state.active,onVisibleChange:function(t){t!==e.state.active&&e.setState({active:t})},content:Fc.a.createElement("div",{className:"lake-button-emoji-panel","data-aspm":"b25225.c63340"},this.props.data.map((function(n,r){return Fc.a.createElement("a",{"data-aspm-click":"d130554","data-aspm-param":"mood_id=".concat(n.id),key:r,className:vl()("lake-button-set-list-item lake-button-set-list-item-que-emoji"),onClick:function(){e.props.onClick(n),e.setState({active:!1})}},Fc.a.createElement("img",{src:n.url}),Fc.a.createElement("br",null),Fc.a.createElement("span",{className:"lake-emoji-title"},n.title[t]||n.title["zh-cn"]))})))},Fc.a.createElement("div",{onClick:this.togglePopover,className:"lake-button-set lake-button-emoji"},Fc.a.createElement(Ub,n)))}}]),n}(Fc.a.Component);g()(Jb,"propTypes",{className:Hc.a.string,name:Hc.a.string,data:Hc.a.array,disabled:Hc.a.bool,active:Hc.a.any,onClick:Hc.a.func});var ek=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),(r=t.call(this,e)).rootNodeRef=Fc.a.createRef(),r}return u()(n,[{key:"render",value:function(){var e=this.props.name;return"note-image"===e?Fc.a.createElement(Ws,ml()({},this.props,{name:"image"}),Fc.a.createElement(Ub,ml()({},this.props,{name:"image"}))):"note-file"===e?Fc.a.createElement(Ws,ml()({},this.props,{name:"file"}),Fc.a.createElement(Ub,ml()({},this.props,{name:"file"}))):Fc.a.createElement(Ku,this.props,Fc.a.createElement(Ub,this.props))}}]),n}(Fc.a.Component);ek.propTypes={name:Hc.a.string};var tk=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"render",value:function(){var e=this.props,t=e.engine,n=e.locale,r=e.toolbar,a=e.toolbarState,o=e.mobile;return Fc.a.createElement("div",{className:vl()("lake-toolbar-area",{"lake-toolbar-area-first-group":this.props.isFirstGroup})},r.map((function(e,r){var i=a[e]||{},c=i.type,l=i.CustomButton;return i.hasArrow="dropdown"===c,i.engine=t,i.mobile=o,i.getEngine||(i.getEngine=function(){return t}),i.locale=n,"collapse"===c?Fc.a.createElement(Yb,ml()({key:r},i)):"dropdown"===c?Fc.a.createElement(Kb,ml()({key:r},i)):"color"===c?(i.activeColors=[i.active],Fc.a.createElement($b,ml()({key:r},i))):"emoji"===c?Fc.a.createElement(Jb,ml()({key:r},i)):"upload"===c?Fc.a.createElement(Zb,ml()({key:r},i)):"custom"===c&&l?Fc.a.createElement("div",{key:r,className:"lake-button-set"},l):"note-upload-button"===c?Fc.a.createElement(ek,ml()({key:r},i)):Fc.a.createElement(Ub,ml()({key:r},i))})))}}]),n}(Fc.a.Component);g()(tk,"propTypes",{engine:Hc.a.object,locale:Hc.a.object,toolbar:Hc.a.array,toolbarState:Hc.a.object,isFirstGroup:Hc.a.bool,mobile:Hc.a.bool}),g()(tk,"defaultProps",{isFirstGroup:!1});var nk=new y.a("editor:toolbar"),rk=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"onResize",$()((function(){r.rebuildToolbarGroups()}),200)),g()(de()(r),"rebuildToolbarGroups",(function(){if("mini-note"!==r.props.toolBarType){if(r.rootRef.current){var e=r.props,t=e.toolbar,n=e.moreToolbar,a=r.getAvailableWidth();nk("[rebuild toolbar]available width: ",a);var o=[],i=n||[],c=0;t.forEach((function(e){if(c>a)i.push(e);else{for(var t=!1,n=0,l=e.length;n<l;n++){var s=e[n],u=r.getToolbarItemSize(s);if(c+=u,n!==l-1&&(c+=0),c>a){nk("[rebuild toolbar]boundary: ",s),t=!0,0===n?i.push(e):(o.push(e.slice(0,n)),i.push(e.slice(n)));break}}c+=17,t||o.push(e)}})),r.setState({showTools:o,hideTools:i})}}else r.setState({showTools:r.props.toolbar})})),r.state={showTools:[],hideTools:[]},r.rootRef=Fc.a.createRef(),r.calcWidthTimeout=null,r}return u()(n,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",this.onResize,!1),this.rebuildToolbarGroups(),this.calcWidthTimeout=setTimeout((function(){e.rebuildToolbarGroups()}),300)}},{key:"componentWillUnmount",value:function(){this.calcWidthTimeout&&clearTimeout(this.calcWidthTimeout),window.removeEventListener("resize",this.onResize,!1)}},{key:"componentDidUpdate",value:function(e){e.toolbar&&this.props.toolbar&&e.toolbar.join(",")===this.props.toolbar.join(",")||(nk("toolbar changed"),this.rebuildToolbarGroups())}},{key:"getAvailableWidth",value:function(){var e=this.rootRef.current.clientWidth;return nk("toolbar node size:",e),e-40-4}},{key:"getToolbarItemSize",value:function(e){return(this.props.toolbarState[e]||{}).size||32}},{key:"render",value:function(){var e=this,t=this.props.toolbarState,n=this.state,r=n.showTools,a=n.hideTools;return Fc.a.createElement("div",{className:"lake-toolbar-content-plugins",ref:this.rootRef},r.map((function(n,r){return Fc.a.createElement(tk,{key:r,isFirstGroup:0===r,locale:e.props.locale,engine:e.props.engine,toolbarState:t,toolbar:n,mobile:e.props.mobile})})),a.length>0&&Fc.a.createElement(qb,{lang:this.props.lang},a.map((function(n,r){return Fc.a.createElement(tk,{key:r,isFirstGroup:0===r,locale:e.props.locale,engine:e.props.engine,toolbarState:t,toolbar:n,mobile:e.props.mobile})}))))}}]),n}(Fc.a.Component);function ak(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ok(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ak(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ak(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}g()(rk,"propTypes",{engine:Hc.a.object.isRequired,lang:Hc.a.string.isRequired,locale:Hc.a.object.isRequired,toolbar:Hc.a.array.isRequired,toolBarType:Hc.a.string,moreToolbar:Hc.a.array,toolbarState:Hc.a.object.isRequired,mobile:Hc.a.bool}),g()(rk,"defaultPropTypes",{hasMore:!0,moreToolbar:[]});var ik=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"handleH5Scroll",(function(){var e=r.props,t=e.engine;if(e.mobile||window.yqWebApp){var n=kt(".lake-mobile-editor .lake-toolbar")[0]||kt(".lake-max-editor .lake-toolbar")[0];if(!n)return;document.body.appendChild(n),r.toolbarEl=kt(n),window.customNoteToolBarClassName&&r.toolbarEl.addClass(window.customNoteToolBarClassName),r.focused=!0,r.startRefreshToolbarPosition(),t.on("focus",(function(){r.focused=!0,r.showToolbar()})),t.on("blur",(function(){r.focused=!1,r.hideToolbar()})),window.addEventListener("scroll",r.hideToolbar,!1)}})),g()(de()(r),"hideToolbar",(function(){r.toolbarEl.css({visibility:"hidden"}),window._fixPublishButtonPosition&&window._fixPublishButtonPosition()})),g()(de()(r),"showToolbar",(function(){r.focused&&(r.toolbarEl.css({position:"absolute",top:r.getViewportScrollTop()+"px",visibility:"visible"}),window._fixPublishButtonPosition&&window._fixPublishButtonPosition())})),g()(de()(r),"startRefreshToolbarPosition",(function(){var e=r.getViewportScrollTop();r.current===e?r.showToolbar():r.hideToolbar(),r.current=e,setTimeout((function(){r.startRefreshToolbarPosition()}),100)})),g()(de()(r),"set",(function(e){var t=r.props,n=t.engine,a=t.type,o=(n&&n.options||{}).disallowToggleToolbar;if("function"==typeof o){if(o())return}else if(o)return;if("mini"!==a){var i=[],c=[];e.forEach((function(e){"separator"===e.type?(i.push(c),c=[]):c.push(e.name)})),c.length>0&&i.push(c);var l=r.getToolbarState(i,e);r.setState({pluginToolbar:i,pluginToolbarState:l})}else n.toolbar.disable(!0)})),g()(de()(r),"restore",(function(){var e=r.props,t=e.engine,n=e.type;t.isDestroyed||("mini"!==n?r.setState({pluginToolbar:[]}):t.toolbar.disable(!1))})),g()(de()(r),"disable",(function(e,t){var n=r.props.engine;if(!n.isDestroyed){t=t||["save","undo","redo","toc"];var a=ok({},r.state.toolbarState);Object.keys(a).forEach((function(n){t.indexOf(n)<0&&(a[n].disabled=e)})),n.toolbar.isDisabled=e,r.setState({toolbarState:a})}})),g()(de()(r),"show",(function(){r.props.engine.editArea.closest(".lake-editor").removeClass("lake-toolbar-hidden")})),g()(de()(r),"hide",(function(){r.props.engine.editArea.closest(".lake-editor").addClass("lake-toolbar-hidden")})),g()(de()(r),"updateState",(function(){if(!r.props.engine.isDestroyed){"mobile"===r.props.type&&r.restore();var e,t=r.state.pluginToolbar.length>0;if(e=ok({},t?r.state.pluginToolbarState:r.state.toolbarState),0!==Object.keys(e).length){var n=!1;Object.keys(e).forEach((function(t){r.executeGetter(e[t])&&(n||(n=!0))})),n&&(t?r.setState({pluginToolbarState:e}):r.setState({toolbarState:e}))}}})),r.state={pluginToolbar:[],pluginToolbarState:{},toolbarState:{}},r}return u()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.engine,n=e.toolbar,r=this.getToolbarState(n);this.setState({toolbarState:r}),t.toolbar={set:this.set,updateState:this.updateState,restore:this.restore,disable:this.disable,disableCardItemByName:this.disableCardItemByName,enableCardItemByName:this.enableCardItemByName,show:this.show,hide:this.hide},this.handleH5Scroll()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.hideToolbar,!1),this.toolbarEl&&this.toolbarEl[0]&&this.toolbarEl[0].remove()}},{key:"getToolbarState",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wd(this.props.engine),r={},a={};return n.forEach((function(e){a[e.name]=e})),e.forEach((function(e){e.forEach((function(e){r[e]=a[e],t.executeGetter(r[e])}))})),r}},{key:"getViewportScrollTop",value:function(){var e,t=window.customNoteToolBarClassName?54:40,n=(null===(e=window.visualViewport)||void 0===e?void 0:e.height)||t;return Math.max(document.body.scrollTop,document.documentElement.scrollTop)+n-t}},{key:"executeGetter",value:function(e){var t=this.engine,n=!1;if(e.getActive&&function(){var t=e.getActive();if(Array.isArray(e.active)&&Array.isArray(t))for(var r=function(r){e.active.find((function(e){return e!==t[r]}))&&(n=!0)},a=0;a<t.length;a++)r(a);else e.active!==t&&(n=!0);e.active=t}(),e.getCurrentText){var r=e.getCurrentText(e.active);e.currentText!==r&&(n=!0),e.currentText=r}if(e.getDisabled&&(!t||!t.toolbar.isDisabled)){var a=e.getDisabled();e.disabled!==a&&(n=!0),e.disabled=a}return n}},{key:"render",value:function(){var e=this.props,t=e.toolbar,n=e.mobile,r=e.moreToolbar,a=e.engine,o=this.state,i=o.toolbarState,c=o.pluginToolbar,l=o.pluginToolbarState,s=vl()("lake-toolbar",{"lake-mobile-toolbar":!!n});return Fc.a.createElement("div",{className:s,"data-lake-element":"toolbar",onMouseDown:function(e){var t=e.target.nodeName;"INPUT"!==t&&"TEXTAREA"!==t&&e.preventDefault()},onMouseOver:function(e){return e.preventDefault()},onMouseMove:function(e){return e.preventDefault()},onContextMenu:function(e){return e.preventDefault()},"data-lake_prevent_click_unselect":"true"},0===c.length&&Fc.a.createElement("div",{className:"lake-toolbar-content lake-toolbar-content-active"},Fc.a.createElement(rk,{key:"main",engine:this.props.engine,locale:this.props.locale,lang:a.options.lang,mobile:n,toolbar:t,toolBarType:this.props.toolBarType,toolbarState:i,moreToolbar:r})),c.length>0&&Fc.a.createElement("div",{className:"lake-toolbar-content lake-toolbar-content-active"},Fc.a.createElement(rk,{key:"sub",engine:this.props.engine,locale:this.props.locale,lang:a.options.lang,mobile:n,toolbar:c,toolBarType:this.props.toolBarType,toolbarState:l,moreToolbar:[]})))}}]),n}(Fc.a.Component);g()(ik,"propTypes",{engine:Hc.a.object,toolBarType:Hc.a.oneOf(["normal","mini-note"]),toolbar:Hc.a.array,moreToolbar:Hc.a.array,hasMore:Hc.a.bool,type:Hc.a.string,mobile:Hc.a.bool}),g()(ik,"defaultProps",{toolbar:[]});var ck=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),g()(de()(e),"state",{error:null,info:null}),e}return u()(n,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e}),console.error(t)}},{key:"render",value:function(){return this.state.error?Fc.a.createElement("div",null,"render error"):this.props.children}}]),n}(Fc.a.Component);ck.propTypes={children:Hc.a.any};var lk=function(e){return function(t){return Fc.a.createElement(ck,null,Fc.a.createElement(e,t))}};function sk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sk(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dk=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"state",{selected:-1,tocHeight:0}),r.root=Fc.a.createRef(),r.__onScroll=$()((function(){r.updatePosition()}),200),r}return u()(n,[{key:"updatePosition",value:function(){var e=this.props,t=e.data,n=e.engine;if(n&&n.scrollNode){for(var r=n.scrollNode.getBoundingClientRect(),a=-1,o=0,i=t.length;o<i;o++){var c=t[o].domNode.getBoundingClientRect().top-r.top;if(c>2){o>0&&(a=o-1);break}if(c<=2&&c>=0){a=o;break}if(o===i-1){a=o;break}}a!==this.state.selected&&this.setState(uk(uk({},this.state),{},{selected:a}))}}},{key:"delayUpdateHeight",value:function(){var e=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){var t=e.root&&null!==e.root.current&&e.root.current.getBoundingClientRect(),n=t.height-(t.bottom-window.innerHeight)-45;e.setState(uk(uk({},e.state),{},{tocHeight:n}))}),32)}},{key:"__onScroll",value:function(){this.updatePosition()}},{key:"componentDidMount",value:function(){var e=this.props.engine;e&&e.scrollNode&&(this.updatePosition(),this.delayUpdateHeight(),e.scrollNode.addEventListener("scroll",this.__onScroll,!1))}},{key:"componentWillUnmount",value:function(){var e=this.props.engine;e&&e.scrollNode&&(e.scrollNode.removeEventListener("scroll",this.__onScroll,!1),this.timer&&clearTimeout(this.timer))}},{key:"render",value:function(){var e=this.props.data,t=this.state,n=t.selected,r=t.tocHeight;return Fc.a.createElement("div",{className:"lake-synopsis",ref:this.root},Fc.a.createElement(ll.a,{contents:e,current:n,autoAdjustPosition:!0,height:r,style:{height:r}}))}}]),n}(Fc.a.Component);g()(dk,"propTypes",{engine:Hc.a.object,data:Hc.a.array});var fk=lk(dk);function pk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pk(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mk=tl.a.Group,gk=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;l()(this,n),r=t.call(this,e),g()(de()(r),"handleChangeWidth",(function(e){r._sizeChanged=!0;var t=parseInt(e.target.value,10)||0,n=Math.round(t*r.rate);r.setState({width:t,height:n})})),g()(de()(r),"handleChangeHeight",(function(e){r._sizeChanged=!0;var t=parseInt(e.target.value,10)||0,n=Math.round(t/r.rate);r.setState({width:n,height:t})})),g()(de()(r),"handleSizeKeyPress",(function(e){e.stopPropagation(),"Enter"===e.key&&(r._sizeChanged=!0,r.handleUpdateSize())})),g()(de()(r),"handleUpdateSize",(function(){if(r._sizeChanged){r._sizeChanged=!1;var e=r.props.engine,t=r.state,n=t.width,a=t.height,o=e.change.activeCard;if(o){var i=e.card.getComponent(o);i&&i.changeSize&&i.changeSize(n,a)}}})),g()(de()(r),"handleUpdateZoom",(function(e){r._sizeChanged=!0;var t=Math.round(r.originWidth*e),n=Math.round(r.originHeight*e);r.setState({width:t,height:n},(function(){r._sizeChanged=!0,r.handleUpdateSize()}))})),g()(de()(r),"handleUpdateStyle",(function(){var e=r.props.engine,t=r.state.style,n=e.change.activeCard;if(n){var a=e.card.getComponent(n);a&&a.changeStyle(t)}})),g()(de()(r),"handleUpdateUIStyle",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r.setState({style:e},(function(){return r.handleUpdateStyle()}))})),g()(de()(r),"handleUpdateSpacing",(function(){var e=r.props.engine,t=r.state.spacing,n=e.change.activeCard;if(n){var a=e.card.getComponent(n);a&&a.changeMargin(t)}})),g()(de()(r),"handleUpdateUISpacing",(function(e){r.setState({spacing:{top:-1!==e.indexOf("top"),bottom:-1!==e.indexOf("bottom")}},(function(){return r.handleUpdateSpacing()}))})),g()(de()(r),"handleChangeLink",(function(e){var t=e.target.value;r.setState({link:t})})),g()(de()(r),"handleLinkKeyPress",(function(e){e.stopPropagation(),"Enter"===e.key&&r.handleUpdateLink()})),g()(de()(r),"handleUpdateLink",(function(){var e=r.props.engine,t=r.state,n=t.link,a=t.linkTarget,o=e.change.activeCard;if(o){var i=e.card.getComponent(o);i&&i.changeLink(n,a)}})),g()(de()(r),"handleChangeLinkTarget",(function(e){var t=e.target.checked?"":"_blank";r.setState({linkTarget:t},(function(){return r.handleUpdateLink()}))}));var a=e.data;return r.state={width:a.width,height:a.height,link:a.link,linkTarget:a.linkTarget,style:a.style,spacing:hk({},a.margin)},r.originWidth=a.originWidth,r.originHeight=a.originHeight,r.rate=a.originHeight/a.originWidth,r}return u()(n,[{key:"componentWillUnmount",value:function(){this.handleUpdateSize(),this.handleUpdateLink()}},{key:"componentWillReceiveProps",value:function(e){var t=e.data,n=t.width,r=t.height;n!==this.props.data.width&&this.setState({width:n,height:r})}},{key:"render",value:function(){var e=this,t=this.props.engine,n=this.state,r=n.width,a=n.height,o=n.link,i=n.linkTarget,c=n.style,l=n.spacing,s=t.locale.image,u=[{label:s.topSpacingTips,value:"top"},{label:s.bottomSpacingTips,value:"bottom"}],d=[];return l.top&&d.push("top"),l.bottom&&d.push("bottom"),Fc.a.createElement("div",null,Fc.a.createElement("div",{className:"lake-sidebar-group lake-image-sidebar-group"},Fc.a.createElement("div",{className:"lake-sidebar-group-title"},s.sizeTitle),Fc.a.createElement("div",{className:"lake-sidebar-group-item"},Fc.a.createElement("div",{className:"lake-sidebar-size-input"},Fc.a.createElement(el.a,{type:"text",size:"small",className:"lake-sidebar-width",defaultValue:r,value:r,onKeyPress:this.handleSizeKeyPress,onBlur:this.handleUpdateSize,onChange:this.handleChangeWidth}),Fc.a.createElement("span",{className:"lake-sidebar-lock"}," "),Fc.a.createElement(el.a,{type:"text",size:"small",className:"lake-sidebar-height",defaultValue:a,value:a,onKeyPress:this.handleSizeKeyPress,onBlur:this.handleUpdateSize,onChange:this.handleChangeHeight})),Fc.a.createElement("div",{className:"lake-sidebar-size-title"},Fc.a.createElement("span",{className:"lake-sidebar-width-title"},s.width),Fc.a.createElement("span",{className:"lake-sidebar-lock"}),Fc.a.createElement("span",{className:"lake-sidebar-height-title"},s.height))),Fc.a.createElement("div",{className:"lake-sidebar-group-item lake-sidebar-image-percent",style:{marginBottom:"14px"}},Fc.a.createElement(mk,null,Fc.a.createElement(tl.a,{size:"small",onClick:function(){return e.handleUpdateZoom(.25)}},"25%"),Fc.a.createElement(tl.a,{size:"small",onClick:function(){return e.handleUpdateZoom(.5)}},"50%"),Fc.a.createElement(tl.a,{size:"small",onClick:function(){return e.handleUpdateZoom(.75)}},"75%"),Fc.a.createElement(tl.a,{size:"small",onClick:function(){return e.handleUpdateZoom(1)}},"100%"))),Fc.a.createElement("div",{className:"lake-sidebar-group-item lake-sidebar-image-100"},Fc.a.createElement(tl.a,{size:"small",style:{width:"100%"},onClick:function(){return e.handleUpdateZoom(1)}},s.originSize)),Fc.a.createElement("div",{className:"lake-sidebar-group-title"},s.style),Fc.a.createElement("div",{className:"lake-sidebar-group-item lake-sidebar-image-style"},Fc.a.createElement(al.a,{autoInsertSpaceInButton:!1},Fc.a.createElement(mk,null,Fc.a.createElement(tl.a,{size:"small",className:vl()({active:!c||"none"===c}),onClick:function(){return e.handleUpdateUIStyle()}},s.none),Fc.a.createElement(tl.a,{size:"small",className:vl()({active:"stroke"===c}),onClick:function(){return e.handleUpdateUIStyle("stroke")}},s.stroke),Fc.a.createElement(tl.a,{size:"small",className:vl()({active:"shadow"===c}),onClick:function(){return e.handleUpdateUIStyle("shadow")}},s.shadow)))),Fc.a.createElement("div",{className:"lake-sidebar-group-title"},s.spacing),Fc.a.createElement("div",{className:"lake-sidebar-group-item lake-sidebar-image-spacing"},Fc.a.createElement(al.a,{autoInsertSpaceInButton:!1},Fc.a.createElement(il.a.Group,{options:u,value:d,onChange:this.handleUpdateUISpacing}))),Fc.a.createElement("div",{className:"lake-sidebar-group-title"},s.linkTitle),Fc.a.createElement("div",{className:"lake-sidebar-group-item"},Fc.a.createElement(el.a,{type:"text",size:"small",className:"lake-sidebar-link",placeholder:s.linkPlaceholder,defaultValue:o,value:o,onKeyPress:this.handleLinkKeyPress,onBlur:this.handleUpdateLink,onChange:this.handleChangeLink,style:{marginBottom:"12px"}}),Fc.a.createElement("div",null,Fc.a.createElement(il.a,{defaultChecked:""===i,checked:""===i,onChange:this.handleChangeLinkTarget},s.linkTargetTips)))))}}]),n}(Fc.a.Component);g()(gk,"propTypes",{engine:Hc.a.object,data:Hc.a.object});var vk=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),(r=t.call(this,e)).source="auto",r.target="en",r.state={targetPlainText:"",errorMsg:null},r.events=[],r}return u()(n,[{key:"_bindEvent",value:function(e,t,n){e.on(t,n),this.events.push({element:e,callback:n,type:t})}},{key:"_removeEvent",value:function(){this.events.forEach((function(e){var t=e.element,n=e.type,r=e.callback;t.off(n,r)}))}},{key:"_translate",value:function(){var e=this.props.engine,t=e.translate,n=e.change.getRange();n&&t.translate(n,this.source,this.target)}},{key:"componentWillMount",value:function(){"en"===this.props.engine.options.lang&&(this.target="zh")}},{key:"componentDidMount",value:function(){var e=this,t=this.props.engine,n=t.translate;this._translate(),this._bindEvent(t,"select",(function(){e._translate()})),this._bindEvent(n,"success",(function(t){var n=t.targetPlainText,r=t.fragment;e.fragment=r,e.setState({errorMsg:null,targetPlainText:n})})),this._bindEvent(n,"fail",(function(t){var n=t.errorMsg;e.setState({errorMsg:n})}))}},{key:"componentWillUnmount",value:function(){this._removeEvent()}},{key:"render",value:function(){var e=this,t=this.props.engine,n=this.state.targetPlainText,r=this.state.errorMsg,a=Kc.a.Option,o=t.locale.translate,i=!n,c=Fc.a.createElement(a,{value:"zh"},o.zh),l=Fc.a.createElement(a,{value:"en"},o.en);return n=i?o.placeholder:n,Fc.a.createElement("div",{className:"lake-translate-panel"},Fc.a.createElement("span",null,o.subTitle),Fc.a.createElement("br",null),Fc.a.createElement(Kc.a,{style:{width:"100%",marginTop:"14px"},defaultValue:this.source,onChange:function(t){e.source=t,e._translate()}},Fc.a.createElement(a,{value:"auto"},o.automaticDetection),c,l),Fc.a.createElement("br",null),Fc.a.createElement(Kc.a,{style:{width:"100%",marginTop:"14px"},defaultValue:this.target,onChange:function(t){e.target=t,e._translate()}},c,l),Fc.a.createElement("p",{style:{margin:"14px 0px"}},o.translation,"："),Fc.a.createElement("pre",{style:{color:i?"rgba(0,0,0,0.25)":"inherit"}},n),r&&Fc.a.createElement("p",{style:{marginBottom:"8px",color:"#CF1322"}},r),Fc.a.createElement(tl.a,{onClick:function(){e.fragment&&t.change.insertFragment(e.fragment.cloneNode(!0))}},o.insertDoc))}}]),n}(Fc.a.Component);g()(vk,"propTypes",{engine:Hc.a.object,data:Hc.a.array});var yk=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;l()(this,n),r=t.call(this,e);var a=e.data;return r.state={download:a.download},r}return u()(n,[{key:"getActivatedComponent",value:function(){var e=this.props.engine,t=e.change.activeCard;if(t){var n=e.card.getComponent(t);if(n)return n}}},{key:"handleUpdateDownload",value:function(e){var t=this.getActivatedComponent();t&&t.setValue({download:e},!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.engine,r=t.data,a=n.locale.localdoc;return Fc.a.createElement("div",null,Fc.a.createElement(il.a,{className:"lake-content-view-download",onChange:function(t){e.handleUpdateDownload(t.target.checked)},defaultChecked:r.download},a.allowDownload))}}]),n}(Fc.a.Component);g()(yk,"propTypes",{engine:Hc.a.object,data:Hc.a.object});var bk=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"appendElement",value:function(){var e=this.props.data;!e.preventAppend()&&this.container.appendChild(e.element)}},{key:"componentDidUpdate",value:function(){this.appendElement()}},{key:"componentDidMount",value:function(){this.appendElement()}},{key:"componentWillUnmount",value:function(){this.props.data.element.remove()}},{key:"render",value:function(){var e=this;return Fc.a.createElement("div",{ref:function(t){e.container=t}})}}]),n}(Fc.a.Component);g()(bk,"propTypes",{data:Hc.a.object});var kk=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;l()(this,n),r=t.call(this,e);var a=e.data;return r.state={download:a.download},r}return u()(n,[{key:"getActivatedComponent",value:function(){var e=this.props.engine,t=e.change.activeCard;if(t){var n=e.card.getComponent(t);if(n)return n}}},{key:"handleUpdateDownload",value:function(e){var t=this.getActivatedComponent();t&&t.setValue({download:e},!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.engine,r=t.data,a=n.locale.localdoc;return Fc.a.createElement("div",null,Fc.a.createElement(il.a,{"data-testid":"video",className:"lake-content-view-download",onChange:function(t){e.handleUpdateDownload(t.target.checked)},defaultChecked:r.download},a.allowDownload))}}]),n}(Fc.a.Component);g()(kk,"propTypes",{engine:Hc.a.object,data:Hc.a.object});var wk,xk=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;l()(this,n),r=t.call(this,e);var a=e.data;return r.state={download:a.download},r}return u()(n,[{key:"getActivatedComponent",value:function(){var e=this.props.engine,t=e.change.activeCard;if(t){var n=e.card.getComponent(t);if(n)return n}}},{key:"handleUpdateDownload",value:function(e){var t=this.getActivatedComponent();t&&t.setValue({download:e},!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.engine,r=t.data,a=n.locale.localdoc;return Fc.a.createElement("div",null,Fc.a.createElement(il.a,{className:"lake-content-view-download",onChange:function(t){e.handleUpdateDownload(t.target.checked)},defaultChecked:r.download},a.allowDownload))}}]),n}(Fc.a.Component);function _k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ek(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_k(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}g()(xk,"propTypes",{engine:Hc.a.object,data:Hc.a.object});var Ck=function(e){oe()(n,zc.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){var e,r,a;l()(this,n);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return a=t.call.apply(t,[this].concat(i)),g()(de()(a),"state",{input:(e={},g()(e,Yg,null),g()(e,Gg,null),g()(e,Xg,null),e),error:(r={},g()(r,Yg,null),g()(r,Gg,null),g()(r,Xg,null),r)}),g()(de()(a),"__handleChangePrice",(function(e){if(!a.props.data.freeze&&!a.props.data.expired){var t=e.currentTarget.value;t||(t=null),a.setState(Ek(Ek({},a.state),{},{input:Ek(Ek({},a.state.input),{},g()({},Yg,t)),error:Ek(Ek({},a.state.error),{},g()({},Yg,a.props.data.validate(Yg,t)))}),a.__notify)}})),g()(de()(a),"__handleChangeDuration",(function(e){if(!a.props.data.freeze&&!a.props.data.expired){var t=e.currentTarget.value;t||(t=null),a.setState(Ek(Ek({},a.state),{},{input:Ek(Ek({},a.state.input),{},g()({},Gg,t)),error:Ek(Ek({},a.state.error),{},g()({},Gg,a.props.data.validate(Gg,t)))}),a.__notify)}})),g()(de()(a),"__handleChangeTip",(function(e){if(!a.props.data.expired){var t=e.currentTarget.value;t||(t=null),a.setState(Ek(Ek({},a.state),{},{input:Ek(Ek({},a.state.input),{},g()({},Xg,t)),error:Ek(Ek({},a.state.error),{},g()({},Xg,a.props.data.validate(Xg,t)))}),a.__notify)}})),g()(de()(a),"__notify",(function(){var e,t=de()(a).state,n=a.props.data.onChange;if(n){var r=t.input.tip;n((g()(e={},Yg,t.input.price),g()(e,Gg,t.input.daysCount),g()(e,Xg,r?r.replace(/\n+/g,""):r),e))}})),a}return u()(n,[{key:"componentDidMount",value:function(){this.__initState(this.props.data)}},{key:"render",value:function(){var e=this.props.engine,t=this.props.data,n=t.expired,r=t.freeze,a=e.locale.premium;return Fc.a.createElement("div",{className:"lake-sidebar-premium"},Fc.a.createElement("div",{className:"lake-sidebar-noborder-group"},Fc.a.createElement("div",{className:"lake-sidebar-noborder-group-title"},a.sidebar.title,Fc.a.createElement("a",{href:"https://www.yuque.com/terms/origin",target:"_blank"},a.sidebar.moreLink)),Fc.a.createElement("div",{className:"lake-sidebar-noborder-group-item",dangerouslySetInnerHTML:{__html:a.sidebar.desc}})),Fc.a.createElement(cs.a,null,Fc.a.createElement("div",{className:"lake-sidebar-noborder-group"},Fc.a.createElement("div",{className:"lake-sidebar-noborder-group-title"},a.sidebar.price.title),Fc.a.createElement("div",{className:"lake-sidebar-noborder-group-item"},a.sidebar.price.desc),Fc.a.createElement(cs.a.Item,{validateStatus:this.state.error.price?"error":"success",help:this.state.error.price},Fc.a.createElement("div",{className:"lake-sidebar-noborder-group-item lake-sidebar-input-group-item"},Fc.a.createElement(el.a,{value:this.state.input.price,className:"lake-sidebar-premium-input",placeholder:"".concat(Kg.price.min,"-").concat(Kg.price.max),disabled:n||r,onChange:this.__handleChangePrice})," ",a.sidebar.price.unit))),Fc.a.createElement("div",{className:"lake-sidebar-noborder-group"},Fc.a.createElement("div",{className:"lake-sidebar-noborder-group-title"},a.sidebar.daysCount.title),Fc.a.createElement("div",{className:"lake-sidebar-noborder-group-item",dangerouslySetInnerHTML:{__html:a.sidebar.daysCount.desc}}),Fc.a.createElement(cs.a.Item,{validateStatus:this.state.error.daysCount?"error":"success",help:this.state.error.daysCount},Fc.a.createElement("div",{className:"lake-sidebar-noborder-group-item lake-sidebar-input-group-item"},Fc.a.createElement(el.a,{value:this.state.input.daysCount,className:"lake-sidebar-premium-input",placeholder:"".concat(Kg.daysCount.min,"-").concat(Kg.daysCount.max),onChange:this.__handleChangeDuration,disabled:n||r})," ",a.sidebar.daysCount.unit))),Fc.a.createElement("div",{className:"lake-sidebar-noborder-group"},Fc.a.createElement("div",{className:"lake-sidebar-noborder-group-title"},a.sidebar.tip.title),Fc.a.createElement(cs.a.Item,{validateStatus:this.state.error.tip?"error":"success",help:this.state.error.tip},Fc.a.createElement("div",{className:"lake-sidebar-noborder-group-item lake-sidebar-input-group-item"},Fc.a.createElement(el.a.TextArea,{autoSize:{minRows:1,maxRows:3},value:this.state.input.tip,className:"lake-sidebar-premium-textarea",placeholder:a.defaultTip,autoComplete:"off",onChange:this.__handleChangeTip,disabled:n}))))))}},{key:"__initState",value:function(e){var t;e&&this.setState(Ek(Ek({},this.state),{},{input:(t={},g()(t,Yg,e.price),g()(t,Gg,e.daysCount),g()(t,Xg,e.tip),t)}))}}]),n}();g()(Ck,"propTypes",{engine:Hc.a.object,data:Hc.a.shape((wk={},g()(wk,Yg,Hc.a.any),g()(wk,Gg,Hc.a.any),g()(wk,Xg,Hc.a.any),g()(wk,"freeze",Hc.a.bool.isRequired),g()(wk,"expired",Hc.a.bool.isRequired),g()(wk,"onChange",Hc.a.func),g()(wk,"validate",Hc.a.func),wk)).isRequired}),g()(Ck,"defaultProps",{data:{validate:function(){}}});ls(".lark-icon-module_size__9Sxlg {\n  width: 24px;\n  height: 24px;\n}\n");var Ok=function(e){var t=e.className,n=e.name,r=e.width,a=e.height,o=e.fill,i=e.radius;return Fc.a.createElement("svg",{className:vl()("icon-svg",t,"lark-icon-module_size__9Sxlg"),style:{width:r,height:a||r,minWidth:r,fill:o,borderRadius:i}},Fc.a.createElement("use",{xlinkHref:"#".concat(n)}))};Ok.propTypes={className:Hc.a.string,name:Hc.a.string,width:Hc.a.number,height:Hc.a.number,fill:Hc.a.any,radius:Hc.a.string};var Sk=n(162),Rk=n(149),jk=n(129),Pk=n(130),Ak=n(131),Tk=n(158),Dk=n(157),Mk=n(145),Nk=n(114);Sk.map((function(e){return e.substring(1)}));var Lk=["txt"].concat(Rk.map((function(e){return e.substring(1)}))),Ik=jk.map((function(e){return e.substring(1)})),Bk=Pk.map((function(e){return e.substring(1)})),zk=Ak.map((function(e){return e.substring(1)})),Fk=Tk.map((function(e){return e.substring(1)})),Uk=Dk.map((function(e){return e.substring(1)})),Vk=Mk.map((function(e){return e.substring(1)})),qk=Nk.map((function(e){return e.substring(1)}));function Hk(e,t){if(!t||!t.ext)return!1;switch(t.ext=t.ext.toLowerCase(),e){case"raw":return Lk.includes(t.ext);case"image":return Ik.includes(t.ext);case"video":return Bk.includes(t.ext);case"audio":return zk.includes(t.ext);case"presentation":return Fk.includes(t.ext);case"sheet":return Uk.includes(t.ext);case"rp":return["rp","rplib"].includes(t.ext);case"zip":return Vk.includes(t.ext);case"mmap":return qk.includes(t.ext);case"ppt":return["ppt","pptx"].includes(t.ext);default:return t.ext===e}}function Wk(e){return Hk("image",e)}function Yk(e){if("folder"===e.type)return"file-folder";var t=e.ext;return t=t?t.toLowerCase():"",Wk(e)?"file-image":function(e){return Hk("video",e)}(e)?"file-video":function(e){return Hk("audio",e)}(e)?"file-audio":["doc","docx","dot","dotx"].includes(t)?"file-word":function(e){return Hk("pdf",e)}(e)?"file-pdf":Hk("txt",e)?"file-txt":["pages","md","markdown","rtf"].includes(t)?"file-doc":Hk("numbers",e)?"file-numbers":["xls","xlsx","xlsm","xltx","xlt"].includes(t)?"file-excel":function(e){return Hk("sheet",e)}(e)?"file-sheet":Hk("key",e)?"file-keynote":function(e){return Hk("presentation",e)}(e)?"file-ppt":["xmind","xmind.zip"].includes(t)?"file-xmind":["mindnode","mindnode.zip"].includes(t)?"file-mindnode":Hk("mmap",e)?"file-mindmap":function(e){return Hk("sketch",e)}(e)?"file-sketch":function(e){return Hk("rp",e)}(e)?"file-axure":Hk("psd",e)?"file-psd":Hk("ai",e)?"file-ai":Hk("graffle",e)?"file-graffle":Hk("zip",e)?"file-rar":Hk("lake",e)?"doc-type-default":Hk("lakesheet",e)?"doc-type-sheet":"file-default"}var Gk={name:"resource-item-name-module_name__2PglY",mobile:"resource-item-name-module_mobile__1B_wr",nameText:"resource-item-name-module_nameText__vtchj",editing:"resource-item-name-module_editing__3F35I",fadein:"resource-item-name-module_fadein__25LgU",flash:"resource-item-name-module_flash__2xx0E"};ls("/*\n* ============================================\n* COLOR PALETTE\n* Do not modify this file.\n* ============================================\n*/\n@keyframes resource-item-name-module_fadein__25LgU {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n@keyframes resource-item-name-module_flash__2xx0E {\n  0% {\n    background-color: rgba(82, 181, 101, 0.1);\n  }\n  100% {\n    background-color: rgba(82, 181, 101, 0);\n  }\n}\n.resource-item-name-module_name__2PglY {\n  display: block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 100%;\n}\n.resource-item-name-module_name__2PglY > a,\n.resource-item-name-module_name__2PglY > span {\n  display: flex;\n  align-items: center;\n}\n.resource-item-name-module_name__2PglY.resource-item-name-module_mobile__1B_wr > a {\n  height: 40px;\n}\n.resource-item-name-module_name__2PglY .resource-item-name-module_nameText__vtchj {\n  display: block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  margin-left: 12px;\n  height: 42px;\n  line-height: 42px;\n  color: #595959;\n  transition: color 0.35s ease;\n}\n.resource-item-name-module_name__2PglY .resource-item-name-module_nameText__vtchj.resource-item-name-module_mobile__1B_wr {\n  display: block;\n  top: -10px;\n  position: relative;\n  font-size: 15px;\n}\n.resource-item-name-module_name__2PglY:hover .resource-item-name-module_nameText__vtchj {\n  width: 70%;\n  color: #262626;\n}\n.resource-item-name-module_editing__3F35I {\n  display: flex;\n  align-items: center;\n}\n.resource-item-name-module_editing__3F35I .ant-input {\n  margin-left: 8px;\n}\n");var Xk={Icon:function(e){var t=e.item,n=e.size;return Fc.a.createElement(Ok,{name:"folder"===t.type?"file-folder":Yk(t),width:n||24})}};Xk.Icon.propTypes={item:Hc.a.object.isRequired,size:Hc.a.number};var Kk=["cdn.nlark.com","gw.alipayobjects.com","alipay-rmsdeploy-image.cn-hangzhou.alipay.aliyun-inc.com","private-alipayobjects.alipay.com","zos.alipayobjects.com","yuque.com","yuque.antfin-inc.com","yuque.antfin.com","lark.alipay.net:7001","intranetproxy.alipay.com"];ls("/*\n* ============================================\n* COLOR PALETTE\n* Do not modify this file.\n* ============================================\n*/\n@keyframes thumbnail-module_fadein__gF8rA {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n@keyframes thumbnail-module_flash__XEo97 {\n  0% {\n    background-color: rgba(82, 181, 101, 0.1);\n  }\n  100% {\n    background-color: rgba(82, 181, 101, 0);\n  }\n}\n.thumbnail-module_thumbnail__IttNs {\n  width: 30px;\n  height: 30px;\n  background-size: cover;\n  background-position: center;\n  border-radius: 2px;\n  flex-shrink: 0;\n}\n");var Zk=function(e){var t=e.item,n=void 0===t?{}:t,r=e.size,a=void 0===r?30:r,o=n.filekey,i=n.ext,c=Object(zc.useState)(!0),l=h()(c,2),s=l[0],u=l[1],d="".concat(window.location.protocol,"//").concat(window.location.host,"/preview/").concat(o,"?redirect=true");"svg"!==i&&(d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.width,r=t.height,a=t.fill,o=t.format,i=t.quality;if(e){if(e.includes("/r/avatar_buc/"))return e;if(e.includes(".svg"))return e;if(!e.includes(window.location.host)&&Kk.every((function(t){return!e.includes(t)})))return e;try{var c=new URL(e),l=c.searchParams,s=c.pathname,u=function(e,t){l.get("x-oss-process")?l.set("x-oss-process","".concat(l.get("x-oss-process"),"/").concat(e,",").concat(t)):l.append("x-oss-process","image/".concat(e,",").concat(t))};if(s.endsWith(".gif")&&(n||r)&&!o&&(o="jpeg",i="Q_85"),n||r){var d=[];a&&d.push("m_fill"),n&&d.push("w_".concat(n)),r&&d.push("h_".concat(r)),u("resize",d.join(","))}return o&&u("format",o),i&&u("quality",i),c.toString()}catch(t){return e}}}(d,{height:2*a,width:2*a,fill:!0}));var f={backgroundImage:"url(".concat(d,")"),width:"".concat(a,"px"),height:"".concat(a,"px")};return Object(zc.useEffect)((function(){var e=new Image;e.src=d,e.onerror=function(){u(!1)}}),[d]),s?Fc.a.createElement("div",{className:"thumbnail-module_thumbnail__IttNs",style:f,"data-testid":"test-thumbnail"}):Fc.a.createElement(Xk.Icon,{item:n,size:a})};Zk.propTypes={item:Hc.a.object,size:Hc.a.number};var $k=function(e){var t,n=e.item,r=e.isMobile,a=e.size,o=void 0===a?30:a,i=Wk(n)&&n.filekey&&!n.filekey.endsWith("?x-oss-process=image/auto-orient,1")?Fc.a.createElement(Zk,{item:n,size:o}):Fc.a.createElement(Xk.Icon,{item:n,size:o}),c=vl()(Gk.name,(g()(t={},Gk.mobile,r),g()(t,Gk.fileItem,"file"===n.type),t)),l=vl()(Gk.nameText,g()({},Gk.mobile,r)),s="folder"===n.type?"":".".concat(n.ext);return Fc.a.createElement("span",{className:c},Fc.a.createElement("span",{title:"".concat(n.filename).concat(s),"data-testid":"resource-item-name-static"},i,Fc.a.createElement("span",{className:l},n.filename,s)))};$k.propTypes={item:Hc.a.object.isRequired,isMobile:Hc.a.bool,size:Hc.a.number};var Qk={card:"index-module_card__2xvzZ",readHeader:"index-module_readHeader__2vV5o",headerTitle:"index-module_headerTitle__1-DgC",searchHeader:"index-module_searchHeader__15hjG",searchInput:"index-module_searchInput__2X5sI",loading:"index-module_loading__3nCT2",breadcrumb:"index-module_breadcrumb__2Ahy2",emptyView:"index-module_emptyView__3UGpy",emptyViewImg:"index-module_emptyViewImg__35_eC",list:"index-module_list__3AlBC",listItem:"index-module_listItem__1xvBd",fileItem:"index-module_fileItem__3u62e",isEn:"index-module_isEn__1ZsKr",arrow:"index-module_arrow__frDmD",listItemDisabled:"index-module_listItemDisabled__3gDma",listItemName:"index-module_listItemName__3tDkv",footer:"index-module_footer__2cSNR",columnsTitleBook:"index-module_columnsTitleBook__17_m8","book-name":"index-module_book-name__ywZhh","lark-book-title":"index-module_lark-book-title__393rb","book-link":"index-module_book-link__1H1Bo","book-icon":"index-module_book-icon__3i9jd","book-name-text":"index-module_book-name-text__34m-P","book-name-scope":"index-module_book-name-scope__3Tzno","icon-svg":"index-module_icon-svg__pfj_1","book-name-orglabel":"index-module_book-name-orglabel__1KlXc","book-name-split":"index-module_book-name-split__3co1-",permission__public__tip:"index-module_permission__public__tip__3F935",highlight:"index-module_highlight__1fv27",searchWrap:"index-module_searchWrap__174kp",contentBody:"index-module_contentBody__1fw6-",errTip:"index-module_errTip__1dBEm",errTipText:"index-module_errTipText__3zPkN",fadein:"index-module_fadein__j8GWG",flash:"index-module_flash__3y8VO"};ls('/*\n* ============================================\n* COLOR PALETTE\n* Do not modify this file.\n* ============================================\n*/\n@keyframes index-module_fadein__j8GWG {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n@keyframes index-module_flash__3y8VO {\n  0% {\n    background-color: rgba(82, 181, 101, 0.1);\n  }\n  100% {\n    background-color: rgba(82, 181, 101, 0);\n  }\n}\n.index-module_card__2xvzZ {\n  height: calc(100% - 80px);\n  overflow: auto;\n  overflow-x: hidden;\n  margin-top: 16px;\n}\n.index-module_readHeader__2vV5o {\n  display: flex;\n  flex: 1;\n  align-items: center;\n  margin-right: 16px;\n}\n.index-module_headerTitle__1-DgC {\n  flex: 1;\n  line-height: 22px;\n  font-size: 14px;\n  font-weight: bold;\n}\n.index-module_searchHeader__15hjG {\n  line-height: 22px;\n  height: 22px;\n  font-weight: bold;\n  margin-right: 16px;\n  flex: 1;\n}\n.index-module_searchHeader__15hjG .larkui-input-search {\n  padding: 0;\n  border: none!important;\n  box-shadow: none;\n  line-height: 22px;\n  font-size: 16px;\n  font-weight: bold;\n  background: none;\n}\n.index-module_searchHeader__15hjG .larkui-input-search .ant-input-suffix {\n  margin: 0;\n}\n.index-module_searchHeader__15hjG .larkui-input-search .ant-input-suffix .ant-input-search-icon {\n  margin: 0;\n}\n.index-module_searchHeader__15hjG .larkui-input-search .ant-input-suffix .ant-input-search-icon:before {\n  display: none;\n}\n.index-module_searchInput__2X5sI {\n  border: none;\n}\n.index-module_searchInput__2X5sI input {\n  height: 22px;\n  line-height: 22px;\n  background-color: transparent;\n  padding: 0;\n  border: none;\n  outline: none;\n  box-shadow: none!important;\n}\n.index-module_loading__3nCT2 {\n  text-align: center;\n  line-height: 100px;\n}\n.index-module_breadcrumb__2Ahy2.ant-breadcrumb {\n  margin: 16px;\n  white-space: nowrap;\n}\n.index-module_breadcrumb__2Ahy2 span:last-child .ant-breadcrumb-link {\n  color: #595959;\n  width: auto;\n  overflow: hidden;\n}\n.index-module_breadcrumb__2Ahy2 span .ant-breadcrumb-link {\n  cursor: pointer;\n  font-weight: normal;\n  color: #8C8C8C;\n  width: 40px;\n  display: inline-block;\n  vertical-align: middle;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.index-module_breadcrumb__2Ahy2 .ant-breadcrumb-separator {\n  margin: 0 4px;\n  color: #595959;\n}\n.index-module_breadcrumb__2Ahy2 .ant-breadcrumb-separator .anticon {\n  font-size: 10px;\n}\n.index-module_emptyView__3UGpy {\n  height: 100%;\n  display: flex;\n  flex-flow: column;\n  justify-content: center;\n  padding: 16px;\n  font-size: 14px;\n  color: #8C8C8C;\n  text-align: center;\n}\n.index-module_emptyViewImg__35_eC {\n  margin: 0 auto 16px;\n  width: 100px;\n  height: 64px;\n  background: url(https://gw.alipayobjects.com/mdn/afts/img/A*QFaDQ7iMTcYAAAAAAAAAAABjAQAAAQ/original?bz=prod_resource) no-repeat center;\n  background-size: 100%;\n}\n.index-module_list__3AlBC {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n.index-module_listItem__1xvBd {\n  padding: 0 8px 0 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: pointer;\n  font-size: 14px;\n  color: #595959;\n  line-height: 24px;\n  transition: all 0.35s ease;\n}\n.index-module_listItem__1xvBd.index-module_fileItem__3u62e:hover::before {\n  content: "\\63D2\\5165";\n  position: absolute;\n  right: 4px;\n  color: #8C8C8C;\n  padding: 0 4px;\n  background-color: #f5f5f5;\n}\n.index-module_listItem__1xvBd.index-module_fileItem__3u62e.index-module_isEn__1ZsKr:hover::before {\n  content: "insert";\n}\n.index-module_listItem__1xvBd .index-module_arrow__frDmD {\n  transition: opacity 0.25s ease;\n  opacity: 0;\n  padding: 0 4px;\n  font-size: 10px;\n  color: #8C8C8C;\n}\n.index-module_listItem__1xvBd span {\n  color: #595959;\n}\n.index-module_listItem__1xvBd.index-module_listItemDisabled__3gDma {\n  cursor: not-allowed;\n  opacity: 0.5;\n}\n.index-module_listItem__1xvBd.index-module_listItemDisabled__3gDma,\n.index-module_listItem__1xvBd.index-module_listItemDisabled__3gDma:hover,\n.index-module_listItem__1xvBd.index-module_listItemDisabled__3gDma span,\n.index-module_listItem__1xvBd.index-module_listItemDisabled__3gDma span:hover {\n  color: #8C8C8C;\n}\n.index-module_listItem__1xvBd:hover {\n  background-color: #f5f5f5;\n}\n.index-module_listItem__1xvBd:hover .index-module_arrow__frDmD {\n  opacity: 1;\n}\n.index-module_listItemName__3tDkv {\n  margin-left: 8px;\n}\n.index-module_footer__2cSNR {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.index-module_columnsTitleBook__17_m8 {\n  display: flex;\n  align-items: center;\n  height: 42px;\n}\n.index-module_columnsTitleBook__17_m8 .book-name-text {\n  max-width: 80%;\n}\n.index-module_columnsTitleBook__17_m8 .book-name-scope {\n  margin-left: 8px;\n  top: 2px;\n}\n.index-module_book-name__ywZhh {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  line-height: 1.35;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.index-module_book-name__ywZhh span {\n  flex-shrink: 0;\n}\n.index-module_lark-book-title__393rb,\n.index-module_book-link__1H1Bo,\n.index-module_book-name__ywZhh {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  line-height: 1.35;\n}\n.index-module_lark-book-title__393rb .index-module_book-icon__3i9jd {\n  margin-right: 8px;\n}\n.index-module_book-name-text__34m-P {\n  display: block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.index-module_book-name-scope__3Tzno {\n  position: relative;\n  top: 0;\n}\n.index-module_book-name-scope__3Tzno .index-module_icon-svg__pfj_1 {\n  margin-left: 8px;\n}\n.index-module_book-name-orglabel__1KlXc {\n  margin-left: 12px;\n}\n.index-module_icon-svg__pfj_1 {\n  color: #8C8C8C;\n}\n.index-module_book-name-split__3co1- {\n  margin: 0 4px;\n}\n.index-module_permission__public__tip__3F935 {\n  margin-top: 12px;\n  line-height: 22px;\n}\n.index-module_permission__public__tip__3F935 .index-module_highlight__1fv27 {\n  color: #f5222d;\n}\n.index-module_searchWrap__174kp {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 16px;\n  border-bottom: 1px solid #e9e9e9;\n  background-color: #f9f9f9;\n}\n.index-module_searchWrap__174kp .larkui-input-search {\n  margin: 0 8px;\n}\n.index-module_searchWrap__174kp i {\n  cursor: pointer;\n}\n.index-module_searchWrap__174kp .anticon {\n  color: #595959 !important;\n}\n.index-module_contentBody__1fw6- {\n  overflow: auto;\n  overflow-x: hidden;\n}\n.index-module_errTip__1dBEm {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding-top: 80px;\n}\n.index-module_errTip__1dBEm .lake-svg-icon {\n  width: 56px;\n  height: 56px;\n}\n.index-module_errTipText__3zPkN {\n  margin-top: 36px;\n}\n');var Jk=function(e){var t=e.breadsLevel,n=void 0===t?2:t,o=e.onSelect,i=e.onClose,c=e.locale,l=e.lang,s=e.actions,u=Object(zc.useState)(!1),d=h()(u,2),f=d[0],p=d[1],m=Object(zc.useState)(!1),v=h()(m,2),y=v[0],b=v[1],k=Object(zc.useState)(null),w=h()(k,2),_=w[0],E=w[1],C=Object(zc.useState)([]),O=h()(C,2),S=O[0],R=O[1],j=Object(zc.useState)([]),P=h()(j,2),A=P[0],T=P[1],D=Object(zc.useState)(null),M=h()(D,2),N=M[0],L=M[1],I=Object(zc.useState)([]),B=h()(I,2),z=B[0],F=B[1],U=Object(zc.useState)(!1),V=h()(U,2),q=V[0],H=V[1],W=Object(zc.useState)(null),Y=h()(W,2),G=Y[0],X=Y[1],K=Object(zc.useRef)(null);Object(zc.useEffect)((function(){N||G?function(e){p(!0);var t={book_id:e&&e.book_id||N&&N.id};e&&(t.parent_id=e.id),Object(r.ajax)({url:s.resourceAction,method:"GET",data:t}).promise.then((function(e){e&&e.data?R(e.data):(b(!0),R([])),p(!1)}))}(_):(p(!0),Object(r.ajax)({url:s.booksAction,method:"GET",data:{type:"Resource",filterByAbility:"download"}}).promise.then((function(e){e&&e.data?T(e.data):(b(!0),T([])),E(null),p(!1)})))}),[N,_]);var Z=function(e){if("root"===e)return L(null),void F([]);if(!e)return E(null),void F([]);if("Resource"===e.type)return L(e),E(null),void F([e]);if("file"!==e.type){E(e);var t=z.findIndex((function(t){return t.id===e.id}));if(t<0)F([].concat(x()(z),[e]));else{var n=x()(z).slice(0,t+1);F(n)}}else o&&("Doc"===e.target_type&&(e.url="".concat(window.location.origin,"/go/resource/").concat(e.id),e.detail={title:e.filename,type:"lakesheet"===e.ext?"sheet":"doc"}),o(e))},$=N||G?S:A;return y?Fc.a.createElement("div",{className:Qk.resourceSelectPanel},Fc.a.createElement("div",{className:Qk.errTip},Fc.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-regret"}),Fc.a.createElement("div",{className:Qk.errTipText},c.error))):Fc.a.createElement("div",{className:Qk.resourceSelectPanel},Fc.a.createElement("div",{className:Qk.searchWrap},q?Fc.a.createElement("div",{className:Qk.searchHeader},Fc.a.createElement(el.a.Search,{ref:K,placeholder:c.searchTip,allowClear:!1,className:Qk.searchInput,onSearch:function(e){if(""!==e){p(!0);var t=A&&A.map((function(e){return e.id}))&&A.map((function(e){return e.id})).join(",");Object(r.ajax)({url:s.resourceSearchAction,method:"GET",data:{book_ids:t,query:e}}).promise.then((function(e){e&&e.data?(X(e.data),R(e.data)):(X(null),R([]),b(!0)),F([]),p(!1)}))}}})):Fc.a.createElement("div",{className:Qk.readHeader},Fc.a.createElement("div",{className:Qk.headerTitle},c.title),Fc.a.createElement("a",{onClick:function(){H(!0),setTimeout((function(){K.current&&K.current.focus()}),100),F([])}},Fc.a.createElement(Il.a,null))),Fc.a.createElement("a",{onClick:function(){q?(H(!1),X(null),L(null),F([]),E(null)):i&&i()}},Fc.a.createElement(Bl.a,null))),Fc.a.createElement("div",{className:Qk.contentBody},Fc.a.createElement(sl.a,{className:Qk.breadcrumb,"data-testid":"moving-modal-breadcrumbs"},G?Fc.a.createElement(sl.a.Item,{onClick:function(){R(G),F([])}},Fc.a.createElement("span",null,c.searchResultTip)):Fc.a.createElement(sl.a.Item,{onClick:function(){Z("root")}},Fc.a.createElement("span",null,c.topLevelBreadcrumbName)),z&&z.length>n&&Fc.a.createElement(sl.a.Item,{className:Qk.resourceBreadcrumbEllipsis},"..."),z&&z.length>0&&z.slice(-n).map((function(e){return Fc.a.createElement(sl.a.Item,{key:"".concat(e.id,"-").concat(e.filename||e.name),onClick:function(){return Z(e)}},Fc.a.createElement("span",{title:e.filename||e.name},e.filename||e.name))}))),Fc.a.createElement("div",{className:Qk.card},f?Fc.a.createElement("div",{className:Qk.loading},Fc.a.createElement(ul.a,{justify:"block"})):Fc.a.createElement(Fc.a.Fragment,null,$.length>0?Fc.a.createElement("ul",{className:Qk.list},$.map((function(e){var t;if(!e)return null;var n=e.user||{},r="file"===e.type,a="en"===l;return Fc.a.createElement("li",{key:e.id||e.uid,className:vl()(Qk.listItem,(t={},g()(t,Qk.fileItem,r),g()(t,Qk.isEn,a),t)),onClick:function(){return Z(e)}},N||G?Fc.a.createElement($k,{book:N,item:e,isLink:!1,size:20}):Fc.a.createElement("div",{className:Qk.columnsTitleBook},Fc.a.createElement("span",{className:Qk["lark-book-title"]},Fc.a.createElement(Ok,{name:"book-type-resource",width:20,className:Qk["book-icon"]}),Fc.a.createElement("span",{className:Qk["book-name"],title:"".concat(n.name,"/").concat(e.name)},Fc.a.createElement("span",null,n.name,Fc.a.createElement("span",{className:Qk["book-name-split"]},"/")),Fc.a.createElement("span",{className:Qk["book-name-text"],title:e.name},e.name)))))}))):Fc.a.createElement("div",{className:Qk.emptyView},Fc.a.createElement("div",{className:Qk.emptyViewImg}),A&&A.length>0?c.emptySearchTip:Fc.a.createElement("span",null,c.noResourceBook,Fc.a.createElement("a",{href:"/new?scene=resource",target:"__blank",onClick:function(e){a.ua.desktop&&(e.preventDefault(),window.openExternalLink?window.openExternalLink("/new?scene=resource",!0):console.warn("function not found: openExternalLink"))}},c.create)))))))};Jk.propTypes={breadsLevel:Hc.a.number,locale:Hc.a.object,onSelect:Hc.a.func,onClose:Hc.a.func,lang:Hc.a.string,actions:Hc.a.shape({booksAction:Hc.a.string.isRequired,resourceAction:Hc.a.string.isRequired,resourceSearchAction:Hc.a.string.isRequired}).isRequired};var ew=lk(Jk);function tw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tw(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rw={booksAction:"/api/mine/books",resourceAction:"/api/resources",resourceSearchAction:"/api/resources/search"},aw=function(e){oe()(n,zc.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){var e;l()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),g()(de()(e),"onSelectFile",(function(t){e.props.engine.command.execute("transfer",t)})),e}return u()(n,[{key:"render",value:function(){var e=this.props.engine,t=nw(nw({},rw),e.options.resource);return Fc.a.createElement(ew,ml()({},this.props,{lang:this.props.engine.options.lang,locale:this.props.engine.locale.repositorySidebar,actions:t,onSelect:this.onSelectFile}))}}]),n}();function ow(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ow(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ow(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}g()(aw,"propTypes",{engine:Hc.a.object.isRequired,onClose:Hc.a.func.isRequired});var cw={toc:!0,translate:!0,premium:!0},lw={toc:!0,translate:!0,repository:!0},sw=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"currentScrollBar",null),g()(de()(r),"extends",(function(){r.props.engine.sidebar={set:r.set,close:r.close,store:r.store,restore:r.restore}})),g()(de()(r),"set",(function(e){if(e){var t=r.state.stack,n=t[t.length-1],a=x()(t);n?n.name===e.name?a[a.length-1]=e:lw[e.name]?a=[e]:lw[n.name]?a.push(e):a[a.length-1]=e:a=[e];var o=r.props.engine;r.setState(iw(iw({},r.state),{},{stack:a})),o.sidebar.activate=e.name;var i=a[a.length-1];n&&n.name===i.name||r.emitSidebarChange(i.name),o.toolbar.updateState()}else r.close()})),g()(de()(r),"close",(function(e){var t=r.props.engine,n=r.state.stack;if(n.length&&(!e||e===n[n.length-1].name)){var a=n.slice(0,n.length-1);if(r.setState(iw(iw({},r.state),{},{stack:a})),a.length){var o=a[a.length-1];r.emitSidebarChange(o.name),t.sidebar.activate=o.name}else r.emitSidebarChange("none"),t.sidebar.activate="none";t.toolbar.updateState()}})),g()(de()(r),"handleCloseClick",(function(){r.close()})),g()(de()(r),"store",(function(){})),g()(de()(r),"restore",(function(e){r.close(e)})),r.contentNode=Fc.a.createRef(),r.state={stack:[]},r}return u()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.engine,n=e.defaultType;this.extends(),"none"!==n&&setTimeout((function(){t.command.execute(n,!0)}),10)}},{key:"componentDidUpdate",value:function(e,t){var n=t.stack.length?t.stack[t.stack.length-1].name:null,r=this.state.stack.length?this.state.stack[this.state.stack.length-1].name:null;n!==r&&(window.dispatchEvent(new Event("resize")),cw[r]?this.currentScrollBar=new ss(kt(this.contentNode.current),!1,!0):this.currentScrollBar&&this.currentScrollBar.destroy())}},{key:"emitSidebarChange",value:function(e){this.props.engine.event.trigger("sidebarchange",e)}},{key:"render",value:function(){var e=this,t=this.props.engine,n=this.state.stack;if(0===n.length)return null;var r=n[n.length-1],a=r.name,o=r.title,i=r.data,c=r.className,l=r.onClose,s={engine:t,data:i};return"none"===a?null:Fc.a.createElement("div",{className:vl()("lake-sidebar","lake-sidebar-active","lake-common-sidebar",c),"data-lake-element":"sidebar",ref:function(t){e.current=t}},o&&Fc.a.createElement("div",{className:"lake-sidebar-title"},o,Fc.a.createElement("div",{className:"lake-sidebar-close",onClick:l||this.handleCloseClick},Fc.a.createElement("span",{className:"lake-icon lake-icon-close"}))),Fc.a.createElement("div",{className:"lake-sidebar-content",ref:this.contentNode},"diagram"===a&&Fc.a.createElement(bk,s),"toc"===a&&Fc.a.createElement(fk,s),"image"===a&&Fc.a.createElement(gk,s),"translate"===a&&Fc.a.createElement(vk,s),"localdoc"===a&&Fc.a.createElement(yk,s),"video"===a&&Fc.a.createElement(kk,s),"audio"===a&&Fc.a.createElement(xk,s),"premium"===a&&Fc.a.createElement(Ck,s),"repository"===a&&Fc.a.createElement(aw,ml()({},s,{onClose:this.handleCloseClick}))))}}]),n}(Fc.a.Component);g()(sw,"propTypes",{engine:Hc.a.object,defaultType:Hc.a.string}),g()(sw,"defaultProps",{defaultType:"toc"});var uw=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),(r=t.call(this,e)).state={searchValue:e.data?e.data.searchValue:null,replacement:""},r}return u()(n,[{key:"componentWillUnmount",value:function(){var e=this.props.engine,t=e.search;t.clear(),t.off("after:select",this.onAfterSelect),e.off("change",this.onDocChange)}},{key:"componentDidMount",value:function(){var e=this,t=this.props.engine,n=t.search,r=this.inputRef.input,a=function(){e.setState({engine:t})},o=function(){t.command.queryState("search")&&t.search.reFind()};if(this.onAfterSelect=a,this.onDocChange=o,n.on("after:select",a),r.focus(),t.on("change",o),this.state.searchValue){var i=n.find(this.state.searchValue);n.select(i[0])}}},{key:"render",value:function(){var e=this,t=dl.a.TabPane,n=this.props,r=n.engine,a=n.onClose,o=r.search,i=r.locale.search,c=this.state,l=c.searchValue,s=c.replacement,u=o.count(),d=Fc.a.createElement("p",{style:{marginBottom:"12px"}},Fc.a.createElement(el.a,{accessbilityid:"search-input",placeholder:i.pleaseEnter,onKeyDown:function(e){Mc("enter",e)&&o.next()},onChange:function(t){var n=o.find(t.target.value);o.select(n[0]),e.setState({searchValue:t.target.value}),o.scrollIntoView()},ref:function(t){e.inputRef=t},value:l,suffix:0===u?Fc.a.createElement("span",{className:"count"},"0"):Fc.a.createElement("span",{className:"count"},u[0],"/",u[1])})),f=Fc.a.createElement("p",{style:{marginBottom:"16px"}},Fc.a.createElement(el.a,{accessbilityid:"replace-input",placeholder:i.pleaseEnter,onChange:function(t){e.setState({replacement:t.target.value})}})),p=Fc.a.createElement(tl.a,{onClick:function(){o.next()},disabled:!(0!==u&&u[0]!==u[1])},i.next),h=Fc.a.createElement(tl.a,{onClick:function(){o.prev()},disabled:!(0!==u&&1!==u[0])},i.previous);return Fc.a.createElement(dl.a,{defaultActiveKey:"search",animated:!1,className:"lake-search",style:{padding:"0 2px"},tabBarExtraContent:Fc.a.createElement("span",{className:"lake-icon lake-icon-close",accessbilityid:"searchreplace-close-button",onClick:function(){a()}})},Fc.a.createElement(t,{tab:i.search,key:"search"},d,Fc.a.createElement("p",{style:{textAlign:"right"}},h,p)),Fc.a.createElement(t,{tab:i.replace,key:"replace"},Fc.a.createElement("p",null,i.search),d,Fc.a.createElement("p",null,i.replaceTo),f,Fc.a.createElement("p",{style:{textAlign:"right"}},Fc.a.createElement(tl.a,{onClick:function(){o.replaceAll(s),o.scrollIntoView()},style:{marginLeft:"0px"},disabled:0===u},i.replaceAll),Fc.a.createElement(tl.a,{onClick:function(){o.replace(s),o.scrollIntoView()},disabled:0===u},i.replace),h,p)))}}]),n}(Fc.a.Component);g()(uw,"propTypes",{engine:Hc.a.object,onClose:Hc.a.func,data:Hc.a.object});var dw=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"onEsc",(function(e){Mc("esc",e)&&r.close()})),g()(de()(r),"extends",(function(){r.props.engine.dialog={set:r.set,close:r.close,store:r.store,restore:r.restore}})),g()(de()(r),"set",(function(e){e||r.close();var t=r.props.engine;r.setState(e),rd("lake-dialog",e.name),t.toolbar.updateState()})),g()(de()(r),"close",(function(){r.setState({name:"none"}),rd("lake-dialog","none")})),g()(de()(r),"store",(function(e){var t=r.props.engine;r.storeConfig=e,t.dialog.storeConfig=e})),g()(de()(r),"restore",(function(){r.set(r.storeConfig)})),r.state={name:"none"},r}return u()(n,[{key:"componentDidMount",value:function(){kt(document).on("keydown",this.onEsc),this.extends()}},{key:"componentWillUnmount",value:function(){kt(document).off("keydown",this.onEsc)}},{key:"render",value:function(){var e=this.state.name;return"none"===e?null:Fc.a.createElement("div",{className:"lake-dialog"},"search"===e&&Fc.a.createElement(uw,ml()({},this.props,{data:this.state.data,onClose:this.close})))}}]),n}(Fc.a.Component);function fw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fw(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hw(e){if(!e)return null;var t=/<meta name="doc-version" content="(\d+)"\s*\/>/.exec(e);return t?Number(t[1]):0}function mw(e){if(!e)return null;var t=/<meta name="viewport" content="(\D+?)"\s*\/>/.exec(e),n=t&&t[1];return"fixed"!==n&&"adapt"!==n?"fixed":n}function gw(e){if(!e)return null;var t=/<meta name="typography" content="(\D+?)"\s*\/>/.exec(e),n=t&&t[1];return"classic"!==n&&"traditional"!==n?"traditional":n}function vw(e){var t=function(e){try{return pw({},function(e){var t={};return e?(e.replace(/(<card\s+[^>]+>).*?<\/card>/gi,(function(e,n){var r=Xe.getAttrMap(n),a=r.name;return"thirdparty"===a&&r.alias&&(a="thirdparty_"+r.alias),t[a]?t[a]++:t[a]=1,e})),t):t}(e))}catch(e){return console.warn("Doc statistic fail: "+e),{}}}(e);return pw({viewport:mw(e),typography:gw(e)},t)}function yw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yw(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}g()(dw,"propTypes",{engine:Hc.a.object});var kw=function(e){oe()(n,Lc.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;if(l()(this,n),r=t.call(this,e),g()(de()(r),"_filter",(function(e){return!(e.getAttribute("data-lake-card")&&!r.engine.card.getComponent(kt(e)).constructor.canSearch)})),!e.target)throw new Error("please set a dom element as target!");return r.options=bw({target:null,style:{highlight:{fill:"rgba(255, 230, 0, 0.5)"},select:{fill:"rgba(255, 140, 0, 0.5)"}},filter:null},e),r.ranges=[],r._initTarget(),r._createCanvas(),r.engine=e.engine,r}return u()(n,[{key:"_saveCardValue",value:function(e){var t=e.commonAncestorContainer,n=this.engine.card.closest(t);n&&this.engine.card.getComponent(n).saveValue(!0)}},{key:"_initTarget",value:function(){var e=this.options.target;"static"===ms(e,"position")&&(e.style.position="relative")}},{key:"_createCanvas",value:function(){var e=this.options.target,t=document.createElement("div");t.style.position="absolute",t.style.top=0,t.style.left=0,t.style["pointer-events"]="none",e.appendChild(t);var n=new Jr({container:t});this.container=t,this.canvas=n}},{key:"_resizeCanvas",value:function(){var e=this.options.target,t=this.canvas,n=gs(e),r=vs(e);t.resize(n,r)}},{key:"_getRelativeRect",value:function(e){var t=this.container,n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return{x:n.left-r.left,y:n.top-r.top,width:n.right-n.left,height:n.bottom-n.top}}},{key:"_cacheRange",value:function(e){return{startOffset:e.startOffset,endOffset:e.endOffset,startContainer:e.startContainer,endContainer:e.endContainer,commonAncestorContainer:e.commonAncestorContainer}}},{key:"_isRangeWrap",value:function(e){var t=this._cacheRange(e);e.setEnd(t.startContainer,t.startOffset+1);var n=e.getBoundingClientRect();e.setEnd(t.startContainer,t.endOffset-1),e.setStart(t.endContainer,t.endOffset);var r=e.getBoundingClientRect();return e.setStart(t.startContainer,t.startOffset),e.setEnd(t.endContainer,t.endOffset),n.bottom!==r.bottom}},{key:"_drawOneByOne",value:function(e,t){for(var n=this._cacheRange(e),r=this.canvas,a=n.startOffset;a<n.endOffset;){e.setStart(n.commonAncestorContainer,a),e.setEnd(n.commonAncestorContainer,a+1);var o=this._getRelativeRect(e);r.clearRect(o),r.draw("Rect",bw(bw({},o),t)),a++}e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset)}},{key:"_drawRangeBackground",value:function(e,t){var n=this.canvas;if(this._isRangeWrap(e))return this._drawOneByOne(e,t);var r=this._getRelativeRect(e);n.clearRect(r),n.draw("Rect",bw(bw({},r),t))}},{key:"_highlightRanges",value:function(e){var t=this;e.forEach((function(e){t._highlightRange(e)}))}},{key:"_clearRange",value:function(e){var t=this.canvas,n=this._getRelativeRect(e);t.clearRect(n)}},{key:"_highlightRange",value:function(e){var t=this.options.style.highlight;this._drawRangeBackground(e,t)}},{key:"_selectRange",value:function(e){var t=this.options.style.select;this._drawRangeBackground(e,t)}},{key:"_clearCanvas",value:function(){this.canvas.clear()}},{key:"_move",value:function(e){var t=this.selectedRange,n=this.ranges;if(t){var r=n.indexOf(t),a=n[r+e];a||(a=e>0?n[e-1]:n[n.length+e]),this._highlightRange(t),this.select(a),this.scrollIntoView()}}},{key:"_replace",value:function(e,t){var n=e.commonAncestorContainer.parentNode,r=document.createTextNode(t);"A"===n.tagName&&n.getAttribute("href")===n.innerText&&n.setAttribute("href",t),e.deleteContents(),e.insertNode(r)}},{key:"replace",value:function(e){if(!hs(e)){var t=this.selectedRange;if(this.ranges.length>0){var n={range:t};this.emit("before:replace",n),this._replace(t,e),this._clearRange(t),this.emit("after:replace",n),this._saveCardValue(t),this.engine.change.combinTextNode()}}}},{key:"replaceAll",value:function(e){var t=this;if(!hs(e)){var n=this.ranges,r={ranges:n};this.emit("before:replaceAll",r),n.forEach((function(n){t._replace(n,e)})),this.emit("after:replaceAll",r),n.forEach((function(e){t._saveCardValue(e)})),this.engine.change.combinTextNode(),this.clear()}}},{key:"show",value:function(){this.container.style.display=""}},{key:"hide",value:function(){this.container.style.display="none"}},{key:"find",value:function(e,t){var n=[];if(this.clear(),e&&ps(e,"String")&&e.length>0){t=function(e){return ps(e,"Function")}(t)?t:this._filter,this._resizeCanvas();var r=ys(this.options.target,t);r.length>0&&(n=function(e,t){var n=[];return e.forEach((function(e){var r=e.nodeValue,a=t.length;(function(e,t){for(var n=[],r=t.length,a=e.indexOf(t);a>-1;)n.push(a),a=e.indexOf(t,a+r);return n})(r,t).forEach((function(t){var r=document.createRange();r.setStart(e,t),r.setEnd(e,t+a),n.push(r)}))})),n}(r,e),this._highlightRanges(n),this.ranges=n,this.keyword=e)}return this.ranges=n,n}},{key:"reFind",value:function(){var e=this.selectedRangeIndex,t=this.find(this.keyword);if(t.length>0&&!hs(e)){var n=t[e]?t[e]:t[0];this.select(n)}return t}},{key:"scrollIntoView",value:function(){if(this.selectedRange){var e=this.selectedRange.commonAncestorContainer.parentElement;(t=e.getBoundingClientRect()).top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)||(e.scrollIntoView({block:"center"}),document.documentElement.scrollTop=0,document.body.scrollTop=0)}var t}},{key:"select",value:function(e){if(!hs(e)){var t=this.ranges,n=e;ps(e,"Number")&&(n=t[e]);var r={range:n};this.emit("before:select",r),this._selectRange(n),this.selectedRange=n,this.selectedRangeIndex=t.indexOf(n),this.emit("after:select",r)}}},{key:"next",value:function(){this._move(1)}},{key:"prev",value:function(){this._move(-1)}},{key:"clear",value:function(){this._clearCanvas(),this.selectedRange=void 0,this.ranges=[],this.keyword=void 0}},{key:"count",value:function(){var e=this.ranges;if(0===e.length)return 0;var t=this.selectedRange;return[e.indexOf(t)+1,e.length]}},{key:"destroy",value:function(){var e=this.container;this.options=null,e.parentElement.removeChild(e)}}]),n}();function ww(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var xw=function(e){oe()(n,Lc.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;if(l()(this,n),r=t.call(this,e),!e.action)throw new Error("please set a translation action!");return r.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ww(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ww(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({action:null},e),r}return u()(n,[{key:"_getMiniParagraphElements",value:function(e){var t=[];return e.forEach((function(e){"UL"===e.tagName?e.childNodes.forEach((function(e){t.push(e)})):t.push(e)})),t}},{key:"_getSourceText",value:function(e){var t=e.childNodes,n=e.isCrossRow,r="";if(n)this._getMiniParagraphElements(t).forEach((function(e){r+=e.innerText+"\n"}));else{var a=document.createElement("div");t.forEach((function(e){a.append(e)})),r=a.innerText}return r}},{key:"_translateFragment",value:function(e){var t=e.isCrossRow,n=e.targetPlainText,r=e.fragment;if(t){var a=n.split("\n"),o=r.childNodes;this._getMiniParagraphElements(o).forEach((function(e,t){e.innerHTML=Xe.escape(a[t])}))}else r.append(document.createTextNode(n))}},{key:"_getChildNodes",value:function(e){var t=this.options.engine,n=Array.from(e.childNodes).filter((function(e){return!t.card.closest(e)}));return n.forEach((function(e){Zt.walkTree(e,(function(e){t.card.closest(e)&&e.parentNode.removeChild(e)}))})),n}},{key:"request",value:function(e){var t=this.options,n=t.action,r=t.engine,a=e.q,o=e.source,i=e.target;if(r.options.translateRequestHandler)return r.options.translateRequestHandler(e);var c=new Request(n,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({appName:"skylark",format:"text",srcTextList:[a],srcLanguage:o,tgtLanguage:i})});return fetch(c).then((function(e){if(!e.ok)throw new Error("Unexpected response (".concat(e.status,")"));return e.json()})).then((function(e){if(200!==e.code)throw new Error(e.data&&e.data.message);return{data:e.data[0]}}))}},{key:"translate",value:function(e,t,n){var r=this,a=this.options.engine;if(e&&t&&n&&!a.card.closest(e.commonAncestorContainer)&&!kt(e.commonAncestorContainer).closest(".sub-editor-content")[0]){var o=e.cloneContents(),i=kt(e.commonAncestorContainer).isRoot()||"UL"===e.commonAncestorContainer.tagName,c=this._getChildNodes(o),l=this._getSourceText({childNodes:c,isCrossRow:i});l&&"\n\n"!==l&&" "!==l&&this.request({q:l,source:t,target:n}).then((function(e){var t=e.data;r._translateFragment({isCrossRow:i,targetPlainText:t,fragment:o}),r.emit("success",{targetPlainText:t,fragment:o})})).catch((function(e){r.emit("fail",{errorMsg:e.message})}))}}}]),n}();function _w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ew(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_w(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cw={en:lu,"zh-cn":ku},Ow=[".sketch",".key",".psd"],Sw=function(){function e(){l()(this,e),g()(this,"needCloseCount",0)}return u()(e,[{key:"show",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(r||(this.needCloseCount++,!(this.needCloseCount>e.MaxCloseMessageCount)))return"error"===t||"warning"===t?Yc.a[t](n,r?void 0:0):void 0}}]),e}();g()(Sw,"MaxCloseMessageCount",3);var Rw=function(e){oe()(o,Lc.a);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(o);function o(e){var t;return l()(this,o),(t=n.call(this,e)).options=Ew(Ew({},e),{},{cache:{}}),t.uploadingCards={},t.uploadingFiles={},t.updateHistoryCard={},t.cardIds={},t}return u()(o,[{key:"getUid",value:function(e){return Date.now()+"-"+e}},{key:"addUploadingCard",value:function(e,t){this.uploadingCards[e]=t}},{key:"getAccept",value:function(e){return"image"===e?a.ua.android?"image/*":a.EXTS.IMAGE_EXT_STR:"file"===e?a.EXTS.FILE_EXT_STR:"localdoc"===e?a.EXTS.OFFICE_EXT_STR+", "+a.EXTS.MAC_OFFICE_STR:void 0}},{key:"getAllowedExtensions",value:function(e){return"image"===e?a.EXTS.IMAGE_EXT_STR:this.getAccept(e)||""}},{key:"parseExtension",value:function(e){var t=a.FileUtils.getFileExtname(e),n={raw:t,actual:t};return/\.mindnode\.zip$/.test(e.name)?n.actual="mindnode":/\.xmind\.zip$/.test(e.name)&&(n.actual="xmind"),n}},{key:"getLang",value:function(){return this.engine&&this.engine.options.lang||"zh-cn"}},{key:"getErrorMessageByCode",value:function(e){var t=Cw[this.getLang()].file;return(void 0===t?{}:t)[e]}},{key:"request",value:(t=bl()(wl.a.mark((function e(t,n,a){var o,i,c,l,s,u,d,f,p,h=this;return wl.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=this.options.engine,i=a.onBeforeUpload,c=a.onAfterUpload,l=n.map((function(e,t){return e.uid||(e.uid=h.getUid(t)),e.uid})),s=new Sw,u=[],d=0;case 6:if(!(d<n.length)){e.next=14;break}return e.next=9,this.handleBeforeUpload(s,t,n[d],n,a);case 9:e.sent?u.push(n[d]):u.push(null);case 11:d++,e.next=6;break;case 14:i&&i(),f=wl.a.mark((function e(n){var a,i,c,d,f,p,m;return wl.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=u[n]){e.next=3;break}return e.abrupt("return","continue");case 3:return i=o.options.disableImageOCR,c=new FormData,(d=h.cardIds[a.uid])&&c.append("element_id",d),i&&c.append("ocr","off"),c.append("file",a,a.name),f="localdoc"===t?"file":t,"localdoc"===t&&h.options.actions.localdoc&&(f="localdoc"),p=h.options.actions[f],m=o.locale[t]||{},e.next=15,Object(r.ajax)({method:"post",xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){if(e.lengthComputable){var n=parseInt(e.loaded/e.total*100,10);h.handleChange(t,"uploading",{uid:a.uid,progress:{percent:n}})}}),!1),e},url:p,data:c,dataType:"json",success:function(e){var n=e.data,r=n.ocrLocations,o=n.url,c={uid:a.uid,uidList:l,src:o,ocrLocations:r};i&&delete c.ocrLocations,h.handleChange(t,"done",c)},error:function(e){var n="",r="error",o=!1,i=function(){};if(e&&e.xhr&&e.xhr.response){var c;try{c=JSON.parse(e.xhr.response)}catch(e){n=""}if(c&&400===c.status&&c.code){var u=Zs.getMessageByCode(c.code,c);u&&(n=u.msg,r=u.level,o=u.alwaysOpen,i=u.callback)}n=n||c&&c.message||""}else n=e.message;n||(n=m.uploadFailed),h.handleChange(t,"error",{uid:a.uid,uidList:l,message:n}),i(s.show(r,n,!o))},processData:!0}).promise;case 15:case"end":return e.stop()}}),e)})),p=0;case 17:if(!(p<u.length)){e.next=25;break}return e.delegateYield(f(p),"t0",19);case 19:if("continue"!==e.t0){e.next=22;break}return e.abrupt("continue",22);case 22:p++,e.next=17;break;case 25:c&&c();case 26:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"file"===e?t=t.filter((function(e){return a.FileUtils.isFile(e)})):"image"===e?t=t.filter((function(e){return a.FileUtils.isImage(e)})):"localdoc"===e&&(t=t.filter((function(e){return a.FileUtils.isFile(e)}))),0!==t.length&&(this.request(e,t,n),!0)}},{key:"handleBeforeUpload",value:function(e,t,n,r,o){var i=this,c=o.onBeforeInsertCard,l=this.options.engine,s=n.uid,u=n.name,d=n.size,f=n.type,p=this.parseExtension(n),h=l.iframeHelper;if("localdoc"===t){if(!h.canAdd()){var m=h.options.limit;return l.messageError(l.locale.card.iframeOverLimit.replace("${limit}",m)),!1}var g=n.size,v=void 0===g?0:g,y=n.name,b=void 0===y?"":y;if(a.FileUtils.isMacOffice(b)&&v>209715200){if(!Ow.some((function(e){return b.endsWith(e)})))return l.messageError(l.locale.card.sizeOverLimit.replace("${sizeLimit}","".concat(200," MB"))),!1;if(v>524288e3)return l.messageError(l.locale.card.sizeOverLimit.replace("${sizeLimit}","".concat(500," MB"))),!1}}var k=this.getAllowedExtensions(t);if(!p.actual||k&&k.indexOf(p.actual)<0)return l.messageError(l.locale[t].formatError),!1;var w=Zs.check(t,n.size);return null!==w?(w.callback(e.show(w.level,w.msg,!w.alwaysOpen)),!1):new Promise((function(e){var r=new FileReader;r.addEventListener("load",(function(){i.uploadingFiles[s]={uid:s,src:r.result,name:u,size:d,type:f,ext:p.raw,progress:{percent:0}},i.handleChange(t,"before",i.uploadingFiles[s],{file:n,onBeforeInsertCard:c}),e(n)}),!1),r.addEventListener("error",(function(){l.messageError(l.locale.file.failReadFile),e(!1)})),r.readAsDataURL(n)}))}},{key:"handleChange",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=this.options.engine,o=n.uid,i=Ew({},n),c=r.onBeforeInsertCard,l=r.file;if("image"===e&&Cs(i.src)&&delete i.src,i.status=t,"before"!==t){var s=this.uploadingCards[o];if(!s||0===s.closest("body").length){for(var u=0,d=a.card.components.length;u<d;u++)if(a.card.components[u].component.value&&a.card.components[u].component.value.uid===o){s=a.card.components[u].node;break}if(!s||!s[0]||!s[0].isConnected)return void delete this.uploadingCards[o]}if("uploading"!==t)delete this.uploadingCards[o],delete this.uploadingFiles[o],Nr.updateCard(a,s,i,this.updateHistoryCard[o]);else{a.history.hold(),Nr.updateCardProgress(s,i);var f=a.card.getComponent(s);f.updateProgress&&f.updateProgress(Nr.getUploadPercent(i.progress))}}else if("image"===e&&(i.margin={top:!0,bottom:!0}),c&&c(l,i),this.uploadingCards[o])this.updateHistoryCard[o]=!0;else{var p=Nr.insertCard(a,e,i),h=p.attr("id");h&&(this.cardIds[o]=h),this.addUploadingCard(o,p)}}}]),o}();function jw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Pw=function(){function e(t){l()(this,e),this.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jw(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({limit:20},t),this.iframeItems=[]}return u()(e,[{key:"add",value:function(e){var t=this.options.limit;return this.canAdd()?(this.iframeItems.push(e),!0):(console.warn("can not add embed card more than ".concat(t)),!1)}},{key:"setSrc",value:function(e,t,n){var r=window.lozad_observer;n&&r?(e.addClass("lozad"),e.attr("data-src",t),r.observe()):e.attr("src",t)}},{key:"render",value:function(e,t,n){var r=this,a=e.iframe,o=e.url;t?setTimeout((function(){r.setSrc(a,o,n)}),t):this.setSrc(a,o,n)}},{key:"remove",value:function(e){var t=this.iframeItems,n=t.indexOf(e);n>-1&&t.splice(n,1)}},{key:"canAdd",value:function(){return this.iframeItems.length<this.options.limit}},{key:"clear",value:function(){this.iframeItems=[]}},{key:"destroy",value:function(){this.options=void 0,this.iframeItems=void 0}}]),e}();function Aw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tw(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mw={search:kw,translate:xw,uploader:Rw,iframeHelper:Pw,pasteFileTransfer:function(){function e(t){l()(this,e),this.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Aw(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({needTransferCards:["file","localdoc"],engine:null},t),this.action=this._getAttachmentCopyAction(),this.bindEvent()}return u()(e,[{key:"_getAttachmentCopyAction",value:function(){return Av(this.options.engine)}},{key:"_transferFile",value:function(e,t){var n=this.options.engine;Object(r.ajax)({method:"post",url:this.action,data:{attachments:[t.refSrc.replace(/(.*?)attachments\//,"")]},success:function(t){var r=t.data[0].url;r?Nr.updateCard(n,e,{src:r,status:"done"},!0):Nr.updateCard(n,e,{status:"error",message:"转存失败：资源不存在或者无权访问"},!0)},error:function(){Nr.updateCard(n,e,{status:"error"},!0)}})}},{key:"bindEvent",value:function(){var e=this,t=this.options,n=t.engine,r=t.needTransferCards;n.on("paste:each",(function(e){var t=e.attr("data-ready-card");if(r.indexOf(t)>-1){var a=n.card.getValue(e),o=a.src;o&&(a.src="",a.status="transfering",a.refSrc=o,n.card.setValue(e,a))}}));var a="[data-lake-card="+r.join("],[data-lake-card=")+"]";n.on("paste:after",(function(){n.editArea.find(a).each((function(t){var r=kt(t),a=n.card.getComponent(r).value;"transfering"===a.status&&a.refSrc&&e._transferFile(r,a)}))}))}}]),e}()};function Nw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e&&Mw[t]&&(n=Dw(Dw({},n),{},{engine:e}),e[t]=new Mw[t](n))}var Lw=function(){function e(){l()(this,e)}return u()(e,[{key:"update",value:function(e,t,n){for(var r=e;r<t;r++){var a="migrate_v".concat(r,"_to_v").concat(r+1);this[a]&&this[a](n)}}},{key:"migrate_v0_to_v1",value:function(e){var t=e.find('[data-lake-card="table"]');t.before("<p>"),t.after("<p>")}}]),e}(),Iw={};function Bw(e,t){Zt.walkTree(e,(function(e){!function(e,t){if(e.nodeType===Node.ELEMENT_NODE&&e.classList.length>0){var n=e.classList.toString();if(!Iw[n]){var r=window.getComputedStyle(e);Iw[n]={},t.forEach((function(e){Iw[n][e]=r.getPropertyValue(e)}))}t.forEach((function(t){e.style[t]=Iw[n][t]}))}}(e,t)}))}function zw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.whiteSpace;e.empty();var r=Ei.card.getValue(e);if(r&&r.code){var a=Kf[r.mode]?r.mode:"plain";e.append(Jf({mode:a}));var o=e.find(".lake-codeblock-content");if(o.css({border:"1px solid #e8e8e8","max-width":"750px"}),ep(o,a,r.code,{lineWrapping:!0}),o.addClass("lake-engine-view"),o.hide(),document.body.appendChild(o[0]),Bw(o,["color","margin","padding","background"]),e.find(".lake-codeblock").remove(),a&&e.attr("data-language",a),n){var i=o.find("pre");i.css({"white-space":"pre-wrap","word-break":"break-all"})}o.show(),o.css("background","#f9f9f9"),e.append(o),o.removeClass("lake-engine-view"),e.find(".CodeMirror").removeClass("CodeMirror")}}function Fw(e){var t=e.find("table"),n=[];t.css("width","".concat(560,"px")),t.each((function(e){var t,r=(e=kt(e)).find("colgroup"),a=r.children(),o=0;a.each((function(e){var t=parseInt(e.getAttribute("width"));o+=t}));var i=a.length;for(t=0;t<i;t++){var c=a[t],l=parseInt(c.getAttribute("width"));n.push(parseInt(l/o*560))}e.find("tr").each((function(e){kt(e).children().each((function(e,t){e.setAttribute("width",n[t])}))})),r.remove()}))}function Uw(e){e&&e.find("ul,ol").each((function(e){var t=parseInt(e.getAttribute("data-lake-indent"),10)||0;e.style.padding="0",e.style.margin="0",e.style["margin-left"]="".concat(28*t,"px")}))}function Vw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vw(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hw={"zh-cn":{hereIsOnlineVideo:"此处为视频，点击链接查看：",hereIsYuqueDoc:"此处为语雀文档，点击链接查看：",hereIsLockText:"此处为语雀加密文本，点击链接查看：",hereIsVote:"此处为语雀投票卡片，点击链接查看："},en:{hereIsVideo:"Here is the video, click on the link to view:",hereIsYuqueDoc:"Here is yuque doc card, click on the link to view:",hereIsLockText:"Here is the yuque lock text card, click on the link to view:",hereIsVote:"Here is the yuque vote card, click on the link to view:"}}[window.appData&&"zh-cn"!==window.appData.locale?"en":"zh-cn"];function Ww(e){e.empty();var t=Ei.card.getValue(e);t&&t.url&&e.append('<img src="'.concat(Xe.escape(t.url),'" />'))}function Yw(e){e.empty();var t=Ei.card.getValue(e);if(t&&t.src){var n=Xe.escape(t.height);e.append('<img src="'.concat(Xe.escape(t.src),'" ').concat(n?"height="+n:"","/>"))}}function Gw(e,t){return'<a href="'.concat(js(e),'" style="\n    word-wrap: break-word;\n    color: #096DD9;\n    touch-action: manipulation;\n    background-color: rgba(0,0,0,0);\n    text-decoration: none;\n    outline: none;\n    cursor: pointer;\n    transition: color .3s;\n  ">').concat(js(t),"</a>")}function Xw(e){e.empty();var t,n,r=Ei.card.getValue(e),a=((t=r&&r.src)&&(n=cg(t))&&(n.includes(rg)?n=n.replace(rg,ag):n.includes(og)&&(n=n.replace(og,ag))),n);return a?e.append('<img src="'.concat(js(a+".png"),'"/>')):r.src?e.append('<a src="'.concat(js(r.src),'">').concat(js(r.src),"</a>")):void 0}var Kw=function(e){oe()(n,or);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;l()(this,n),e||(e={});var a=e.autoCompleteLinks;return e.autoCompleteLinks="boolean"!=typeof a||a,r=t.call(this,e),g()(de()(r),"autoCompleteLinks",!0),r}return u()(n,[{key:"parseLink",value:function(e){var t=this;e.find("a").each((function(e){var n=e.getAttribute("href");if(n&&t.options.autoCompleteLinks&&!Xe.protocols.some((function(e){return n.startsWith(e)}))&&!n.startsWith("#")){var r=function(e,t){if("/"===t)return e;try{return new URL(e,t).href}catch(t){return console.warn("Fail in export when parse relative link"),e}}(n,t.getDocUrl());e.setAttribute("href",r),e.setAttribute("data-href",n)}}))}},{key:"filter",value:function(e){Bc()(se()(n.prototype),"filter",this).call(this,e),e.find("a.lake-anchor").remove(),e.find("[data-selection-id]").each((function(e){e.parentNode.replaceChild(document.createTextNode(e.innerText),e)}))}},{key:"getDocUrl",value:function(){return this.options.docUrl||xs()}},{key:"getDefaultCardParsers",value:function(){var e=this,t=this.options;return qw(qw({},Bc()(se()(n.prototype),"getDefaultCardParsers",this).call(this)),{},{thirdparty:Xw,processon:Xw,table:function(e){var t=e.find("table"),n=Ei.card.getValue(e)||{};e.empty(),t.length>0&&(t.css({outline:"none","border-collapse":"collapse",border:n.hideBorder?"1px solid transparent":"1px solid #d9d9d9"}),t.find("td").css({"min-width":"90px","font-size":"14px","white-space":"normal","word-wrap":"break-word",border:n.hideBorder?"1px solid transparent":"1px solid #d9d9d9",padding:"4px 8px",cursor:"default"}),e.append(t))},image:function(e){var t=1500/devicePixelRatio,n=Ei.card.getValue(e)||{};if(e.empty(),n.src){var a=kt(document.createElement("img"));a.attr("data-role","image");var o=n.originWidth,i=n.originHeight,c=o&&o>t&&r.OssUtil.resizeImage({maxWidth:t,src:n.src,data:{width:t,originWidth:o,originHeight:i}});c=c||n.src;try{new URL(location.href).searchParams.has("export_type")&&(c=Td(c))}catch(e){console.warn(e)}if(a.attr("src",c),a.attr("data-raw-src",""),a[0].classList.add("image","lake-drag-image"),a.attr("alt",n.name||"image"),a.attr("title",n.name||"image"),e.append(a),a.css({visibility:"visible","background-color":"","background-repeat":"","background-position":"","background-image":""}),n.width&&a.css("width",n.width+"px"),n.height&&a.attr("data-height",n.height+"px"),n.link){var l=document.createElement("a");l.href=n.link,n.linkTarget&&(l.target=n.linkTarget),l.appendChild(a[0]),e.append(l)}else e.append(a)}},file:function(e){e.empty();var t=Ei.card.getValue(e);t&&t.src&&e.append(Gw(t.src,"📎"+t.name))},math:function(e){var t=e.find("img");t.length>0&&(e.empty(),t.css("vertical-align","middle"),e.append(t))},codeblock:function(e){return zw(e)},emoji:function(e){var t=e.find(".lake-emoji");e.empty(),t.length>0&&(t.attr("width","18"),t.attr("height","18"),t.css({display:"inline-block",width:"18px",height:"18px","vertical-align":"middle","background-size":"contain","background-position":"0 0","background-repeat":"no-repeat","margin-top":"-3px","margin-left":"1px","margin-right":"1px",border:"1px solid transparent"}),e.append(t))},label:function(e){var t=e.find(".lake-card-label-container");e.empty(),t.length>0&&(t.css({"font-weight":400,"font-size":"12px",overflow:"hidden","max-width":"200px",display:"inline-block","white-space":"nowrap","margin-bottom":"-4px","border-radius":"4px",border:"none",padding:"2px 5px","text-overflow":"ellipsis","line-height":"14px","margin-left":"1px","margin-right":"1px"}),e.append(t))},diagram:Ww,mermaid:Ww,flowchart:Ww,graphviz:Ww,puml:Ww,mindmap:Yw,basicdraw:Yw,flowchart2:Yw,vote:function(t){t.empty();var n=Ei.card.getValue(t),r=Sv.refreshCardValue(n);if(Ei.card.setValue(t,r),n&&n.id){t.append("<span>".concat(Hw.hereIsVote,"</span>"));var a=e.getDocUrl()+"#"+n.id;t.append(Gw(a,a))}},yuque:function(e){e.empty();var t=Ei.card.getValue(e);t&&t.src&&(e.append("<span>".concat(Hw.hereIsYuqueDoc,"</span>")),e.append(Gw(t.src,t.src)))},yuqueinline:function(e){e.empty();var t=Ei.card.getValue(e);t&&t.src&&(e.append("<span>".concat(Hw.hereIsYuqueDoc,"</span>")),e.append(Gw(t.src,t.src)))},bookmarklink:function(e){e.empty();var t=Ei.card.getValue(e);t&&t.src&&e.append(Gw(t.src,t.text||t.src))},localdoc:function(e){e.empty();var n=Ei.card.getValue(e);if(n&&n.src){var r,a=n.download,o=n.src,i=t.engine;if(i&&i.options.uploadFileHandler)r=i.options.uploadFileHandler(o,i.options.previewOrigin,i.options.previewFrom);else{var c=new URL(o,window.location.origin);r=a?Ps(o):c.origin+Es(o)}e.append(Gw(r,n.name))}},video:function(t){t.empty();var n=Ei.card.getValue(t);n&&n.status&&"done"===n.status&&t.append(Gw(e.getDocUrl()+"#"+n.id,n.name))},audio:function(t){t.empty();var n=Ei.card.getValue(t);n&&n.status&&("done"===n.status||"uploaded"===n.status)&&t.append(Gw(e.getDocUrl()+"#"+n.id,n.name))},mention:function(e){var t=e.find(".lake-mention-at");e.empty(),e.append(t)},lockedtext:function(t){t.empty();var n=Ei.card.getValue(t);if(n&&n.id){t.append("<span>".concat(Hw.hereIsLockText,"</span>"));var r=e.getDocUrl()+"#"+n.id;t.append(Gw(r,r))}},riddle:function(e){e.empty();var t=Ei.card.getValue(e);t&&t.src&&e.append(Gw(t.src,t.src))},youku:function(e){e.empty();var t=Ei.card.getValue(e);t&&t.src&&(e.append("<span>".concat(Hw.hereIsOnlineVideo,"</span>")),e.append(Gw(t.src,t.src)))},premium:function(e){e.remove()}})}}]),n}();var Zw=function(e){oe()(n,Kw);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"after",value:function(e){return e.find("[data-lake-card]").each((function(e){e.removeAttribute("data-card-value")}))}}]),n}();function $w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$w(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jw=function(e){oe()(n,Kw);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"getDefaultCardParsers",value:function(){var e=this;return Qw(Qw({},Bc()(se()(n.prototype),"getDefaultCardParsers",this).call(this)),{},{video:function(t){t.empty();var n=Ei.card.getValue(t);if(n&&n.videoId){var r=encodeURIComponent(n.videoId),a=e.getDocUrl(),o=new URL(a);t.append('<div class="lake-video-content lake-video-done">\n  <video preload="none" playsinline="playsinline" controls="" controlslist="nodownload"\n    poster="'.concat(o.origin,"/api/video?video_id=").concat(r,'&redirect_field=cover"\n    src="').concat(o.origin,"/api/video?video_id=").concat(r,'&redirect_field=video"></video>\n</div>'))}},audio:function(t){t.empty();var n=Ei.card.getValue(t);if(n&&n.audioId){var r=encodeURIComponent(n.audioId),a=e.getDocUrl(),o=new URL(a);t.append('<div class="lake-video-content lake-video-done">\n  <audio preload="none" playsinline="playsinline" controls="" controlslist="nodownload"\n    src="'.concat(o.origin,"/api/video?video_id=").concat(r,'&redirect_field=audio"></audio>\n</div>'))}},thirdparty:function(e){e.empty();var t=Ei.card.getValue(e)||{},n=t.url||t.src;if(n){var r="",a="";"number"==typeof t.height&&(r='height="'.concat(t.height,'"')),t.entrance&&(a='title="'.concat(Xe.escape(t.entrance||""),'"')),e.append("<iframe ".concat(a," ").concat(r,' src="').concat(Xe.escape(n),'"></iframe>'))}return e}})}},{key:"after",value:function(e){return e.find("[data-lake-card]").each((function(e){e.removeAttribute("data-card-value")}))}}]),n}(),ex=[{p:{"data-lake-id":"*"}},{h1:{"data-lake-id":"*"}},{h2:{"data-lake-id":"*"}},{h3:{"data-lake-id":"*"}},{h4:{"data-lake-id":"*"}},{h5:{"data-lake-id":"*"}},{h6:{"data-lake-id":"*"}},{ul:{"data-lake-id":"*",style:{"margin-left":"@length"}}},{ol:{"data-lake-id":"*",style:{"margin-left":"@length"}}},{li:{"data-lake-id":"*"}}];function tx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tx(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rx={parallel:5},ax=function(e){oe()(n,Lc.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this),g()(de()(r),"_options",{}),g()(de()(r),"_taskIds",new Set),g()(de()(r),"_completedTasks",[]),g()(de()(r),"_runningTasks",[]),g()(de()(r),"_pendingTasks",[]),g()(de()(r),"_failureTasks",[]),r._options=nx(nx({},rx),e),r}return u()(n,[{key:"hasTask",value:function(e){return this._taskIds.has(e)}},{key:"isCompleted",value:function(){return this._pendingTasks.length+this._runningTasks.length===0}},{key:"addTask",value:function(e){this._taskIds.add(e.id),this._pendingTasks.push(e),this._checkFinish()}},{key:"_checkFinish",value:function(){var e=this._pendingTasks.length,t=this._runningTasks.length;0!==e||0!==t?e>0&&t<this._options.parallel&&this._runTask(this._pendingTasks.shift()):this._finish()}},{key:"_runTask",value:function(e){var t=this;this._runningTasks.push(e),this._updateProgress(),bl()(wl.a.mark((function n(){return wl.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.run();case 2:n.sent.success?t._handleSuccess(e):t._handleFailure(e);case 4:case"end":return n.stop()}}),n)})))()}},{key:"_updateProgress",value:function(){var e=this._completedTasks.length,t=this._runningTasks.length,n=this._pendingTasks.length,r=this._failureTasks.length;this.emit("progress",{completed:e,running:t,pending:n,failure:r,total:e+t+n})}},{key:"_handleSuccess",value:function(e){var t=this._runningTasks.indexOf(e);-1!==t&&this._runningTasks.splice(t,1),this._completedTasks.push(e),this._updateProgress(),this._checkFinish()}},{key:"_handleFailure",value:function(e){var t=this._runningTasks.indexOf(e);-1!==t&&this._runningTasks.splice(t,1),this._failureTasks.push(e),this._updateProgress(),this._checkFinish()}},{key:"_finish",value:function(){this.emit("finished"),this._destroy()}},{key:"_destroy",value:function(){this.removeAllListeners()}}]),n}();var ox=function(e){oe()(n,Lc.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this),g()(de()(r),"_thread",null),g()(de()(r),"_threadOptions",null),r._threadOptions=e,r}return u()(n,[{key:"hasTask",value:function(e){return!!this._thread&&this._thread.hasTask(e)}},{key:"addTask",value:function(e){var t=this;return this._thread||(this._thread=this._createThread()),Promise.resolve().then((function(){t._thread.addTask(e)})),e}},{key:"isCompleted",value:function(){return!this._thread||this._thread.isCompleted()}},{key:"_createThread",value:function(){var e=this,t=new ax(this._threadOptions);return t.on("start",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.emit.apply(e,["start"].concat(n))})),t.on("progress",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.emit.apply(e,["progress"].concat(n))})),t.on("finished",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.emit.apply(e,["finished"].concat(n)),e._thread=null})),t}}]),n}(),ix=/<[^>]+>/g,cx=/(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3400-\u4DBF\u4E00-\u9FFF\uF900-\uFA6D\uFA70-\uFAD9]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])+|(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F])/g,lx=/--+/g,sx=/\s+/;var ux=["onChange","defaultValue","allowPremium","hasSidebar"];var dx={en:lu,"zh-cn":ku},fx=new Lw,px=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"onEditAreaClick",(function(e){var t=e.target;"A"===t.nodeName&&t.hasAttribute("href")&&(e.preventDefault(),e.stopPropagation(),r.engine&&r.engine.openLinkByNode(t))})),g()(de()(r),"extendEngine",(function(e){e.getContent=function(){return Rs(e.getValue(),e)},e.wordCount=function(){return function(e){if(!e)return 0;var t=0;return(e=(e=(e=" ".concat(String(e).replace(ix," ").trim()," ")).replace(cx,(function(e){return e.codePointAt(0)>127?(t+=x()(e).length," "):e})).replace(lx,(function(e,n,r){return sx.test(r[n-1])&&t++," "}))).trim())&&(t+=e.split(sx).length),t}(e.getFullPureHtml())},e.getPublicHtml=function(t){var n=e.card.getCardRootByName("premium");return 1!==n.length?null:e.getHtmlWithStopNode(t,n[0])},e.getPureContent=function(){return Rs(e.getPureValue(),e)},e.getPublicContent=function(){return e.constructor.plugin.executePluginMethod(e,"premium","getPublicContent")},e.getPublicPureContent=function(){return e.constructor.plugin.executePluginMethod(e,"premium","getPublicPureContent")},e.getPublicValue=function(){return e.constructor.plugin.executePluginMethod(e,"premium","getPublicValue")},e.extractMention=function(){return e.constructor.plugin.executePluginMethod(e,"mention","extract")},e.disable=function(t){e.toolbar.disable(t),e.readonly(t),e.isDisabled=t},e.messageSuccess=function(e){Yc.a.success(e)},e.messageError=function(e){Yc.a.error(e)},e.getPureHtml=function(){return e.getHtml(new Zw({autoCompleteLinks:!!r.props.autoCompleteLinks}))},e.getPublicPureHtml=function(){return e.getPublicHtml(new Zw({autoCompleteLinks:!!r.props.autoCompleteLinks}))},e.getFullPureHtml=function(){return e.getHtml(new Jw({autoCompleteLinks:!!r.props.autoCompleteLinks}))},e.getFullPublicPureHtml=function(){return e.getPublicHtml(new Jw({autoCompleteLinks:!!r.props.autoCompleteLinks}))},e.isRemoteImage=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Os.call.apply(Os,[null,e].concat(n))},Nw(e,"pasteFileTransfer",{}),e.docVerstion=1,a.ua.desktop&&(e.openLink=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];"boolean"==typeof t?(n=t,t=e):t||(t=e),window.openExternalLink?window.openExternalLink(e,t,n):console.warn("function not found: openExternalLink")})})),g()(de()(r),"onSaveBefore",(function(){return new Promise((function(e,t){if(!r.engine.uploadManager)return e();r.engine.uploadManager.isCompleted()?e():t(r.locale.file.stillUploading)}))})),g()(de()(r),"_togglePlaceholder",(function(){if(!r.placeholderUsed){var e=r.editArea.current;e&&(e.innerHTML.match(/^<p[^>]*><br\/?><\/p>$/)?e.classList.add("show-placeholder"):(e.classList.remove("show-placeholder"),r.placeholderUsed=!0))}})),r.engine=null,r.locale=dx[e.lang],r.editArea=Fc.a.createRef(),r}return u()(n,[{key:"componentDidMount",value:function(){var e=this.props.onEngineReady;this.engine=this.renderEditor(),this._togglePlaceholder(),this.bindEvent(),this.extendEngine(this.engine),e(this.engine)}},{key:"componentWillUnmount",value:function(){this.unbindEvent(),this.engine&&(this.engine.off("save:before",this.onSaveBefore,!1),this.engine.destroy())}},{key:"bindEvent",value:function(){if(document.addEventListener("selectionchange",this._togglePlaceholder,!1),a.ua.desktop||window.appData.isAlipayWebApp||window.appData.isDingTalkMiniApp){var e=this.editArea.current;e&&e.addEventListener("click",this.onEditAreaClick,!1)}}},{key:"unbindEvent",value:function(){if(document.removeEventListener("selectionchange",this._togglePlaceholder,!1),a.ua.desktop||window.appData.isAlipayWebApp||window.appData.isDingTalkMiniApp){var e=this.editArea.current;e&&e.removeEventListener("click",this.onEditAreaClick,!1)}}},{key:"renderEditor",value:function(){var e=this,t=this.props,n=t.onChange,r=t.defaultValue,a=t.allowPremium,o=t.hasSidebar,i=void 0===o||o,c=ns()(t,ux),l=String(r||"<p><br /></p>").trim();l=Xe.removeBookmarkTags(l),c.defaultValue=l,c.allCardNames={},c.parentNode=this.editArea.current.parentNode,c.scrollNode=kt(c.parentNode).closest(".lake-editor-scroll-container")[0];var s=Ei.create(this.editArea.current,c),u=hw(r);return a||(c.cardBlacklist=c.cardBlacklist||[],c.cardBlacklist.includes("premium")||c.cardBlacklist.push("premium")),i||(s.sidebar.disable=!0),s.uploadManager=new ox,s.asyncEvent.on("save:before",this.onSaveBefore,!1),s.getPageLocation=function(){return e.props.getPageLocationHandle?e.props.getPageLocationHandle():location},s.schema.add(Fl.a),s.schema.add(ex),s.locale=this.locale,s.on("change",(function(){e._togglePlaceholder(),n(),s.toolbar.updateState()})),s.on("select",(function(){s.toolbar.updateState()})),s.on("setvalue",(function(){e._togglePlaceholder()})),s.setDefaultValue=function(e){var t=String(e||"").trim();t=Xe.removeBookmarkTags(t),s.setValue(t||"<p><br /></p>",(function(e){e&&e.getAttribute&&"image"===e.getAttribute("data-ready-card")&&!e.getAttribute("data-card-value")&&e.parentNode&&e.parentNode.removeChild(e)})),t&&fx.update(u,1,s.editArea)},c.ot||(s.setDefaultValue(r),s.ot.initLockMode()),s}},{key:"render",value:function(){return Fc.a.createElement("div",{ref:this.editArea,"data-placeholder":this.props.placeholder,className:"lake-content-editor-core lake-engine"})}}]),n}(Fc.a.Component);g()(px,"propTypes",{defaultValue:Hc.a.string,onChange:Hc.a.func,onEngineReady:Hc.a.func,lang:Hc.a.string,tabIndex:Hc.a.number,onSave:Hc.a.func,onBeforeRenderImage:Hc.a.func,image:Hc.a.object,file:Hc.a.object,translate:Hc.a.object,lockedtext:Hc.a.object,video:Hc.a.object,localVideo:Hc.a.shape({uploadAction:Hc.a.string,queryAction:Hc.a.string,attachableId:Hc.a.string,attachableType:Hc.a.string}),resource:Hc.a.shape({booksAction:Hc.a.string,resourceAction:Hc.a.string,resourceSearchAction:Hc.a.string}),localAudio:Hc.a.object,mention:Hc.a.object,customMaximize:Hc.a.func,customMaximizeRestore:Hc.a.func,hasSidebar:Hc.a.bool,typography:Hc.a.string,meta:Hc.a.object,allowPremium:Hc.a.bool,allowAudioPlayer:Hc.a.bool,enableDeferredRendering:Hc.a.bool,getPageLocationHandle:Hc.a.bool,previewFileHandler:Hc.a.func,autoCompleteLinks:Hc.a.bool,thirdPartyService:Hc.a.array,docId:Hc.a.number,cardWhitelist:Hc.a.array,cardBlacklist:Hc.a.array,enableCardOffScreen:Hc.a.bool,allowMention:Hc.a.bool,allowResource:Hc.a.bool,allowSaveToResource:Hc.a.bool,disableImageOCR:Hc.a.bool,ossProcessDomains:Hc.a.array,localImageHostList:Hc.a.array,placeholder:Hc.a.string,previewOrigin:Hc.a.string,automaticPositioning:Hc.a.bool,disallowToggleToolbar:Hc.a.oneOfType([Hc.a.bool,Hc.a.func]),disableYuqueCardEmbedView:Hc.a.bool}),g()(px,"defaultProps",{lang:"zh-cn",onChange:function(){},onEngineReady:function(){},onBeforeRenderImage:function(e){return e},allowPremium:!1,allowAudioPlayer:!1,enableDeferredRendering:!1,autoCompleteLinks:!0,allowMention:!0,allowResource:!0,allowSaveToResource:!0,disableImageOCR:!1,ossProcessDomains:[/^.*?\.yuque\.com$/i,"cdn.nlark.com","yuque.antfin.com","yuque.antfin-inc.com","intranetproxy.alipay.com",window.location.host],localImageHostList:[/^\w+\.(nlark|alipay|alipayobjects|alibaba-inc|antfin-inc)\.com$/]});var hx=Ei.$,mx={en:lu,"zh-cn":ku},gx=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"onEngineReady",(function(e){r.engine=e,r.setState({engine:e},(function(){Nw(e,"search",{target:r.contentEditor.current}),Nw(e,"translate",{action:r.props.translate.action}),Nw(e,"uploader",{actions:{image:r.props.image?r.props.image.uploadAction:"",file:r.props.file?r.props.file.uploadAction:"",localdoc:r.props.localdoc?r.props.localdoc.uploadAction:""}}),Nw(e,"iframeHelper"),r.bindScrollEvent(),e.on("maximizecard",(function(){e.editArea.closest(".lake-editor").addClass("lake-maximize-card")})),e.on("restorecard",(function(){e.editArea.closest(".lake-editor").removeClass("lake-maximize-card")})),e.on("sidebarchange",(function(t){t&&("none"===t?(r.setState({hasSideBar:!1}),e.toolbar.updateState()):r.setState({hasSideBar:!0}),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),100))})),r.props.onLoad(e)})),r.engine.on("typographychange",(function(e){r.props.onTypographyChange(e);var t=r.editorRootNodeRef.current;if(t){var n=hx(t);n.removeClass("lake-editor-classic"),n.removeClass("lake-editor-traditional"),n.addClass("lake-editor-".concat(e))}}))})),g()(de()(r),"onChange",(function(){r.props.onChange&&(r.props.changeWithValue?r.props.onChange(r.engine.getPureContent()):r.props.onChange())})),g()(de()(r),"handleScroll",(function(){r.lakeMaxEditorWrapperContent[0].scrollTop>16?r.lakeToolbar.addClass("lake-toolbar-active"):r.lakeToolbar.removeClass("lake-toolbar-active")})),r.state={engine:null,toolbar:e.toolbar,viewport:e.viewport,hasSideBar:e.sidebar&&"none"!==e.sidebar},r.locale=mx[e.lang],r.contentEditor=Fc.a.createRef(),r.editorRootNodeRef=Fc.a.createRef(),r}return u()(n,[{key:"componentWillUnmount",value:function(){hx(document.body).css({"overscroll-behavior-x":"","overflow-y":""})}},{key:"componentDidUpdate",value:function(e){if("adapt"===this.props.viewport){var t=hx(this.contentEditor.current.parentNode),n=hx(this.contentEditor.current.parentNode.parentNode);t.width()!==n.width()&&n.addClass("lake-has-scroll-bar")}var r=this.engine.viewport;this.engine.viewport=this.props.viewport,this.engine.viewport!==r&&this.engine.event.trigger("viewportchange",this.engine.viewport,r),this.props.typography!==e.typography&&this.engine.setTypography("classic"===this.props.typography)}},{key:"bindScrollEvent",value:function(){this.lakeToolbar=hx(".lake-toolbar"),this.lakeMaxEditorWrapperContent=hx(".lake-max-editor-wrapper-content"),this.lakeMaxEditorWrapperContent.on("scroll",this.handleScroll),hx(document.body).css({"overscroll-behavior-x":"none","overflow-y":"hidden"})}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.viewport,r=e.nopaper,a=e.sidebar,o=e.toolbarBlacklist,i=e.toolbar,c=e.toolBarType,l=this.state,s=l.engine,u=l.hasSideBar,d={toolBarType:c,key:c,type:t,engine:s,toolbar:this._filterToolbar(i,o),locale:this.locale},f=function(e){var t=Object.assign({},e);return!t.video&&t.image&&(t.video={uploadAction:t.image.uploadAction.replace("type=image","type=video")}),is()(t,["onLoad","header","type","toolbar"])}(this.props);f.editorType=this.props.type;var p=this.props.typography,h="lake-editor lake-max-editor";return"adapt"===n&&(h+=" lake-adaptive-width"),"fixed"===n&&(h+=" lake-fixed-width"),u&&(h+=" lake-has-sidebar"),r&&(h+=" lake-no-paper"),p&&(h+=" lake-editor-".concat(p)),Fc.a.createElement("div",{className:h,ref:this.editorRootNodeRef},Fc.a.createElement("div",{className:"lake-max-editor-wrapper"},s&&Fc.a.createElement(dw,{engine:s}),s&&Fc.a.createElement(ik,ml()({hasMore:"adapt"===n},d)),Fc.a.createElement("div",{className:"lake-max-editor-wrapper-content lake-editor-scroll-container"},s&&Fc.a.createElement(sw,{engine:s,defaultType:a}),Fc.a.createElement("div",{className:"lake-max-editor-content"},Fc.a.createElement("div",{className:"lake-content-editor",ref:this.contentEditor},Fc.a.createElement("div",{className:"lake-content-editor-extra"},this.props.header),Fc.a.createElement(px,ml()({onEngineReady:this.onEngineReady},f,{onChange:this.onChange})))))))}},{key:"_filterToolbar",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=x()(t);return!1===this.props.allowResource&&n.push("repository"),Array.isArray(e)?e.map((function(e){return Array.isArray(e)?e.filter((function(e){return!n.includes(e)})):e})):e}}]),n}(Fc.a.Component);g()(gx,"propTypes",{lang:Hc.a.string,type:Hc.a.string,toolbar:Hc.a.array,header:Hc.a.node,tabIndex:Hc.a.number,onChange:Hc.a.func,onLoad:Hc.a.func,onSave:Hc.a.func,onBeforeRenderImage:Hc.a.func,defaultValue:Hc.a.string,image:Hc.a.object,file:Hc.a.object,localdoc:Hc.a.object,translate:Hc.a.object,lockedtext:Hc.a.object,video:Hc.a.object,localVideo:Hc.a.object,localAudio:Hc.a.object,mention:Hc.a.object,customMaximize:Hc.a.func,customMaximizeRestore:Hc.a.func,cardWhitelist:Hc.a.array,cardBlacklist:Hc.a.array,toolbarBlacklist:Hc.a.array,viewport:Hc.a.string,nopaper:Hc.a.bool,sidebar:Hc.a.string,typography:Hc.a.string,meta:Hc.a.object,allowPremium:Hc.a.bool,allowAudioPlayer:Hc.a.bool,onTypographyChange:Hc.a.func,enableDeferredRendering:Hc.a.bool,previewFileHandler:Hc.a.func,autoCompleteLinks:Hc.a.bool,thirdPartyService:Hc.a.array,docId:Hc.a.number,enableCardOffScreen:Hc.a.bool,allowMention:Hc.a.bool,allowResource:Hc.a.bool,allowSaveToResource:Hc.a.bool,allowResizeVideo:Hc.a.bool,disableImageOCR:Hc.a.bool,ossProcessDomains:Hc.a.array,localImageHostList:Hc.a.array,placeholder:Hc.a.string,toolBarType:Hc.a.string,previewOrigin:Hc.a.string,automaticPositioning:Hc.a.bool,disallowToggleToolbar:Hc.a.oneOfType([Hc.a.bool,Hc.a.func]),disableYuqueCardEmbedView:Hc.a.bool,changeWithValue:Hc.a.bool}),g()(gx,"defaultProps",{lang:"zh-cn",type:"max",tabIndex:2,toolbar:[["card"],["save","undo","redo","paintformat","removeformat"],["heading","fontsize"],["bold","italic","strikethrough","underline","moremark"],["fontcolor","highlight"],["alignment"],["unorderedlist","orderedlist","tasklist","indent","lineheight"],["link","quote","hr"],["search","translate","toc","repository"]],translate:{action:"https://suppliers.alifanyi.com/supporting/translate.json"},lockedtext:{action:"/api/services/crypto"},onLoad:function(){},viewport:"fixed",sidebar:"toc",typography:"classic",onTypographyChange:function(){},enableCardOffScreen:!1,toolBarType:"normal"});var vx={en:lu,"zh-cn":ku},yx=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"onEngineReady",(function(e){r.engine=e,r.setState({engine:e}),Nw(e,"uploader",{actions:{image:r.props.image?r.props.image.uploadAction:"",file:r.props.file?r.props.file.uploadAction:"",localdoc:r.props.localdoc?r.props.localdoc.uploadAction:""}}),Nw(e,"iframeHelper"),r.props.onLoad(e),e.sidebar.disable=!0})),g()(de()(r),"onChange",(function(){r.props.onChange(r.engine.getPureContent())})),r.state={engine:null,toolbar:e.toolbar},r.locale=vx[e.lang],r.contentEditor=Fc.a.createRef(),r}return u()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.moreToolbar,r=this.state,a=r.engine,o={type:t,engine:a,toolbar:r.toolbar,moreToolbar:n,locale:this.locale},i=function(e){var t=Object.assign({},e);return!t.video&&t.image&&(t.video={uploadAction:t.image.uploadAction.replace("type=image","type=video")}),void 0===t.maxPadding&&(t.maxPadding=40),is()(t,["onLoad","header","type","toolbar"])}(this.props);return i.editorType=this.props.type,Fc.a.createElement("div",{className:"lake-editor lake-mini-editor"},a&&Fc.a.createElement(ik,ml()({hasMore:!0},o)),Fc.a.createElement("div",{ref:this.contentEditor,className:"lake-content-editor"},Fc.a.createElement(px,ml()({onEngineReady:this.onEngineReady,hasSidebar:!1},i,{onChange:this.onChange}))))}}]),n}(Fc.a.Component);g()(yx,"propTypes",{lang:Hc.a.string,type:Hc.a.string,toolbar:Hc.a.array,moreToolbar:Hc.a.array,header:Hc.a.node,tabIndex:Hc.a.number,onChange:Hc.a.func,onLoad:Hc.a.func,onSave:Hc.a.func,onBeforeRenderImage:Hc.a.func,defaultValue:Hc.a.string,image:Hc.a.object,maxPadding:Hc.a.number,file:Hc.a.object,localdoc:Hc.a.object,lockedtext:Hc.a.object,video:Hc.a.object,localVideo:Hc.a.object,localAudio:Hc.a.object,allowAudioPlayer:Hc.a.bool,mention:Hc.a.object,customMaximize:Hc.a.func,customMaximizeRestore:Hc.a.func,cardWhitelist:Hc.a.array,cardBlacklist:Hc.a.array,enableDeferredRendering:Hc.a.bool,previewFileHandler:Hc.a.func,thirdPartyService:Hc.a.array,docId:Hc.a.number,allowMention:Hc.a.bool,allowResource:Hc.a.bool,allowSaveToResource:Hc.a.bool,disableImageOCR:Hc.a.bool,ossProcessDomains:Hc.a.array,localImageHostList:Hc.a.array,placeholder:Hc.a.string,previewOrigin:Hc.a.string,automaticPositioning:Hc.a.bool,disallowToggleToolbar:Hc.a.oneOfType([Hc.a.bool,Hc.a.func]),disableYuqueCardEmbedView:Hc.a.bool}),g()(yx,"defaultProps",{lang:"zh-cn",type:"mini",tabIndex:2,toolbar:[["emoji","heading","bold","italic","strikethrough"],["orderedlist","unorderedlist","tasklist"],["link","image","file"]],save:!1,search:!1,cardWhitelist:["yuque","label"],heading:{showAnchor:!1},lockedtext:{action:"/api/services/crypto"},onChange:function(){},onLoad:function(){},onBeforeRenderImage:function(e){return e}});var bx={en:lu,"zh-cn":ku},kx=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"onEngineReady",(function(e){r.engine=e,r.setState({engine:e}),Nw(e,"uploader",{actions:{image:r.props.image?r.props.image.uploadAction:"",file:r.props.file?r.props.file.uploadAction:"",localdoc:r.props.localdoc?r.props.localdoc.uploadAction:""}}),Nw(e,"iframeHelper"),r.props.onLoad(e)})),g()(de()(r),"onChange",(function(){r.props.onChange(r.engine.getPureContent())})),r.state={engine:null,toolbar:e.toolbar},r.locale=bx[e.lang],r.contentEditor=Fc.a.createRef(),r}return u()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props.type,t=this.state,n=t.engine,r={type:e,engine:n,toolbar:t.toolbar,locale:this.locale},a=function(e){var t=Object.assign({},e);return!t.video&&t.image&&(t.video={uploadAction:t.image.uploadAction.replace("type=image","type=video")}),is()(t,["onLoad","header","toolbar"])}(this.props);return a.editorType=this.props.type,Fc.a.createElement("div",{className:"lake-editor lake-mobile-editor"},n&&Fc.a.createElement(ik,ml()({hasMore:!0},r,{mobile:!0})),Fc.a.createElement("div",{ref:this.contentEditor,className:"lake-content-editor"},Fc.a.createElement("div",{className:"lake-content-editor-extra"},this.props.header),Fc.a.createElement(px,ml()({onEngineReady:this.onEngineReady},a,{onChange:this.onChange}))))}}]),n}(Fc.a.Component);function wx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wx(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}g()(kx,"propTypes",{lang:Hc.a.string,type:Hc.a.string,toolbar:Hc.a.array,header:Hc.a.node,tabIndex:Hc.a.number,onChange:Hc.a.func,onLoad:Hc.a.func,onSave:Hc.a.func,onBeforeRenderImage:Hc.a.func,defaultValue:Hc.a.string,image:Hc.a.object,file:Hc.a.object,localdoc:Hc.a.object,lockedtext:Hc.a.object,video:Hc.a.object,localVideo:Hc.a.object,localAudio:Hc.a.object,mention:Hc.a.object,customMaximize:Hc.a.func,customMaximizeRestore:Hc.a.func,allowPremium:Hc.a.bool,allowAudioPlayer:Hc.a.bool,enableDeferredRendering:Hc.a.bool,previewFileHandler:Hc.a.func,thirdPartyService:Hc.a.array,docId:Hc.a.number,allowMention:Hc.a.bool,allowResource:Hc.a.bool,allowSaveToResource:Hc.a.bool,disableImageOCR:Hc.a.bool,ossProcessDomains:Hc.a.array,localImageHostList:Hc.a.array,placeholder:Hc.a.string,previewOrigin:Hc.a.string,automaticPositioning:Hc.a.bool,disallowToggleToolbar:Hc.a.bool,disableYuqueCardEmbedView:Hc.a.bool}),g()(kx,"defaultProps",{lang:"zh-cn",type:"mobile",tabIndex:2,toolbar:[["undo"],["redo"],["heading"],["bold"],["image"],["tasklist"],["list"],["alignment"],["indent"],["quote"]],save:!1,search:!1,cardselect:!1,heading:{showAnchor:!1},lockedtext:{action:"/api/services/crypto"},onChange:function(){},onLoad:function(){},onBeforeRenderImage:function(e){return e}});var _x=["yuque.antfin-inc.com","yuque.com","lark.alipay.com","yuque.antfin.com","yuque.alibaba-inc.com"],Ex=Ei.$,Cx={en:lu,"zh-cn":ku};window.lozad_observer=Ol()(".lozad",{rootMargin:"10px 0px",threshold:.1});var Ox=function(e){oe()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(e){var r;return l()(this,n),r=t.call(this,e),g()(de()(r),"onViewAreaClick",(function(e){var t=e.target,n=Ex(t).closest("a");n.length&&n[0].hasAttribute("href")&&(e.preventDefault(),e.stopPropagation(),r.contentViewEngine&&r.contentViewEngine.openLinkByNode(n[0]))})),g()(de()(r),"disableLazyRender",(function(){r.contentViewEngine&&Ei.card.renderController.disable(r.contentViewEngine)})),g()(de()(r),"containsMarkdownToc",(function(e){return!!e&&e.includes('<div id="markdown-toc"></div>')})),g()(de()(r),"adaptContent",(function(e){if(!e)return"";e=String(e);var t=new ta;t.add(Fl.a),t.add(ex);var n=new er(e,t,void 0,(function(e){Ex(e).find("[data-ready-card]").each((function(e){e&&e.getAttribute&&"image"===e.getAttribute("data-ready-card")&&!e.getAttribute("data-card-value")&&e.parentNode&&e.parentNode.removeChild(e)}))}));return r.docVerstion=hw(e),n.toLowerValue(!0)})),g()(de()(r),"extractMention",(function(){var e=[];return r.viewArea.current.querySelectorAll('[data-lake-card="mention"]').forEach((function(t){var n=t.getAttribute("data-card-value");n=n.replace(/^data:/,"");try{var r=JSON.parse(decodeURIComponent(n));e.push(r)}catch(e){console.log(e)}})),e})),g()(de()(r),"addRelToLink",(function(){Ex(r.viewArea.current).find("a[target=_blank]").each((function(e){e.closest("[data-lake-card=file]")||e.closest("[data-lake-card=localdoc]")||function(e){if(!/^(?:\w{1,20}:){0,1}\/\//i.test(e))return!0;var t;try{t=new URL(e)}catch(e){return!1}var n=t.hostname;if(!n)return!1;for(var r=0;r<_x.length;r++){var a=_x[r];if(n===a||n.endsWith(".".concat(a)))return!0}return!1}(e.href)||Ex(e).attr("rel","noopener noreferrer")}))})),g()(de()(r),"addHeadingAnchor",(function(){var e=r.contentViewEngine.locale;Ex(r.viewArea.current).find("h1,h2,h3,h4,h5,h6").each((function(t){var n=(t=Ex(t)).attr("id");if(n){var r=Ex('<a class="lake-anchor"></a>'),a=vs(t[0]);r.css("top","".concat((a-24)/2,"px")),Vc.a.render(Fc.a.createElement(Wc.a,{title:e.copyParagraphLink},Fc.a.createElement("span",{className:"lake-anchor-button lake-icon lake-icon-".concat(t.name)})),r[0]),r.on("click",(function(){var t=window.location,r=t.origin,a=t.pathname;Or.copyText("".concat(r+a,"#").concat(n)),Yc.a.success(e.copySuccess)})),t.prepend(r)}}))})),g()(de()(r),"removeInvalidStyles",(function(){Ex(r.viewArea.current).children().each((function(e){e=Ex(e),Zt.removeMinusStyle(e,"text-indent")}))})),g()(de()(r),"renderContent",(function(){console.time("contentView render");var e=r.props,t=e.lang,n=e.scene,o=e.onBeforeRenderImage,i=e.customMaximizeRestore,c=e.ossProcessDomains,l=e.localImageHostList,s=e.meta,u=e.customMaximize,d=e.autoMaximizeCard,f=e.renderParser,p=e.typography,h=e.allowAudioPlayer,m=Ex(r.viewArea.current),g=Pi.create(m,xx(xx({},r.props.options||{}),{},{lang:t,scene:n,enableDeferredRendering:!f&&(r.props.options||{}).enableDeferredRendering,disableYuqueCardEmbedView:r.props.disableYuqueCardEmbedView,docId:r.props.docId,card:Ei.card,plugin:Ei.plugin,allowAudioPlayer:h,onBeforeRenderImage:o,customMaximizeRestore:i,ossProcessDomains:c,localImageHostList:l,autoMaximizeCard:d,customMaximize:u,typography:p,meta:s}));if(g.docVerstion=r.docVerstion,g.iframeHelper=new Pw,g.locale=Cx[t],g.schema.add(Fl.a),g.schema.add(ex),g.isRemoteImage=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Os.call.apply(Os,[null,g].concat(t))},g.extractMention=r.extractMention,g.getPageLocation=function(){return r.props.getPageLocationHandle?r.props.getPageLocationHandle():location},a.ua.desktop&&(g.openLink=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];"boolean"==typeof t?(n=t,t=e):t||(t=e),window.openExternalLink?window.openExternalLink(e,t,n):console.warn("function not found: openExternalLink")}),console.time("contentView card"),Ei.card.renderAll(r.viewArea.current,void 0,g),Ei.card.renderController.run(g),console.timeEnd("contentView card"),r.contentViewEngine=g,r.editArea=m,d){var v=Ex(document.getElementById(d));v&&Ei.card.maximize({cardRoot:v,contentView:g})}if(r.addRelToLink(),r.removeInvalidStyles(),f){var y=r.viewArea.current.parentNode;f.parse(r.viewArea.current),y.appendChild(r.viewArea.current)}r.props.genAnchor&&r.addHeadingAnchor(),console.timeEnd("contentView render")})),r.viewArea=Fc.a.createRef(),r}return u()(n,[{key:"componentDidMount",value:function(){var e=this,t={outline:[]};this.bindEvent(),this.renderContent(),!0===this.props.genOutline&&(t.outline=gy.extractFromDom(this.viewArea.current),this.containsMarkdownToc(this.props.content)&&this.renderMarkdownToc(t.outline)),"function"==typeof this.props.onLoad&&this.props.onLoad(this.viewArea.current,t,this.contentViewEngine),this.editArea.attr("tabindex",0),this.editArea.on("keydown",(function(t){if(Mc("mod+a",t)){t.preventDefault(),e.contentViewEngine&&Ei.card.renderController.disable(e.contentViewEngine);var n=window.getSelection(),r=document.createRange();r.selectNodeContents(e.editArea[0]),n.removeAllRanges(),n.addRange(r)}})),window.lozad_observer&&window.lozad_observer.observe();var n=this.contentViewEngine.viewport;this.contentViewEngine.viewport=this.props.viewport,this.props.viewport!==n&&this.contentViewEngine.event.trigger("viewportchange",this.contentViewEngine.viewport,n)}},{key:"componentWillUnmount",value:function(){this.unbindEvent()}},{key:"bindEvent",value:function(){if(Ex(window).on("beforeprint",this.disableLazyRender,!1),a.ua.desktop||window.appData.isAlipayWebApp||window.appData.isDingTalkMiniApp){var e=this.viewArea.current;e&&e.addEventListener("click",this.onViewAreaClick,!1)}}},{key:"unbindEvent",value:function(){if(Ex(window).off("beforeprint",this.disableLazyRender,!1),a.ua.desktop||window.appData.isAlipayWebApp||window.appData.isDingTalkMiniApp){var e=this.viewArea.current;e&&e.removeEventListener("click",this.onViewAreaClick,!1)}}},{key:"renderMarkdownToc",value:function(e){if(0!==e.length){var t=document.createElement("div");this.viewArea.current.prepend(t);var n=this.props.lang,r=Cx[n];Vc.a.render(Fc.a.createElement("div",{className:"lake-embed-outline"},Fc.a.createElement("h3",null,r.toc.title),Fc.a.createElement("ul",null,e.map((function(e){return Fc.a.createElement("li",{className:"lake-embed-outline lake-embed-outline-".concat(e.depth),key:e.id},Fc.a.createElement("a",{href:"#".concat(encodeURIComponent(e.id))},Fc.a.createElement("span",null,e.text)))})))),t)}}},{key:"shouldComponentUpdate",value:function(e){return this.props.content!==e.content}},{key:"componentDidUpdate",value:function(e){this.props.content!==e.content&&this.renderContent()}},{key:"render",value:function(){var e=this.adaptContent(this.props.content);return Fc.a.createElement("div",{className:"lake-engine-view",ref:this.viewArea,dangerouslySetInnerHTML:{__html:e}})}}]),n}(Fc.a.Component);function Sx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sx(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}g()(Ox,"propTypes",{lang:Hc.a.string,content:Hc.a.string,genAnchor:Hc.a.bool,genOutline:Hc.a.bool,options:Hc.a.object,viewport:Hc.a.string,typography:Hc.a.string,docId:Hc.a.number,onLoad:Hc.a.func,onBeforeRenderImage:Hc.a.func,autoMaximizeCard:Hc.a.string,customMaximize:Hc.a.func,customMaximizeRestore:Hc.a.func,lockedtext:Hc.a.object,renderParser:Hc.a.object,meta:Hc.a.object,getPageLocationHandle:Hc.a.func,previewFileHandler:Hc.a.func,allowAudioPlayer:Hc.a.bool,scene:Hc.a.oneOf(["doc","other"]).isRequired,ossProcessDomains:Hc.a.array,localImageHostList:Hc.a.array,previewOrigin:Hc.a.string,disableYuqueCardEmbedView:Hc.a.bool}),g()(Ox,"defaultProps",{lang:"zh-cn",content:"",genAnchor:!1,genOutline:!0,onLoad:function(){},onBeforeRenderImage:function(e){return e},typography:"classic",allowAudioPlayer:!1,scene:"other",ossProcessDomains:[/^.*?\.yuque\.com$/i,"cdn.nlark.com","yuque.antfin.com","yuque.antfin-inc.com","intranetproxy.alipay.com",window.location.host],localImageHostList:[/^\w+\.(nlark|alipay|alipayobjects|alibaba-inc|antfin-inc)\.com$/]});var jx=function(e){oe()(n,Kw);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"getDefaultCardParsers",value:function(){return Rx(Rx({},Bc()(se()(n.prototype),"getDefaultCardParsers",this).call(this)),{},{checkbox:function(){},codeblock:function(e){return zw(e,{whiteSpace:!0})}})}},{key:"parseLists",value:function(e){return Uw(e)}}]),n}();var Px=function(e){oe()(r,Kw);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(r);function r(){return l()(this,r),n.apply(this,arguments)}return u()(r,[{key:"after",value:(t=bl()(wl.a.mark((function e(t){var n,r,a,o,i,c,l,s,u,d;return wl.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Fw(t),(n=t.find("img")).each((function(e){e.style.width&&e.style.height&&(e.width=parseInt(e.style.width),e.height=parseInt(e.style.height))})),r=0;case 4:if(!(r<n.length)){e.next=37;break}if(e.prev=5,a=n[r],!(o=a.src)||!o.endsWith(".svg")){e.next=29;break}return i=document.createElement("canvas"),c=i.getContext("2d"),e.next=13,fetch(o);case 13:return l=e.sent,e.next=16,l.text();case 16:return s=e.sent,u="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(s))),e.next=20,Pd(u);case 20:d=e.sent,i.width=2*d.width,i.height=2*d.height,i.style.width=d.width+"px",i.style.height=d.height+"px",c.drawImage(d,0,0,2*d.width,2*d.height),a.src=i.toDataURL(),a.style.width||(a.style.width=d.width+"px"),a.style.height||(a.style.height=d.height+"px");case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(5),console.warn(e.t0);case 34:r++,e.next=4;break;case 37:this.done();case 38:case"end":return e.stop()}}),e,this,[[5,31]])}))),function(e){return t.apply(this,arguments)})},{key:"done",value:function(){}},{key:"parseLists",value:function(e){return Uw(e)}}]),r}();var Ax=function(e){oe()(n,or);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se()(e);if(t){var a=se()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce()(this,n)}}(n);function n(){return l()(this,n),t.apply(this,arguments)}return u()(n,[{key:"parse",value:function(e){var t=kt("<div />");return t.append(e),{html:t.html(),text:new er(t).toText()}}}]),n}();function Tx(e){if(!e)return{value:Rs("<p><br></p>"),html:"<p><br></p>"};var t=document.createElement("div"),n=document.createElement("div");t.style.display="none",t.appendChild(n),document.body.appendChild(t);var r=Ei.create(n,{onBeforeRenderImage:function(e){return e}});r.isRemoteImage=function(){return!1},r.schema.add(Fl.a),r.schema.add(ex),r.locale=ku,r.setValue("<p><cursor /></p>"),r.command.execute("paste",e);var a=Rs(r.getValue()),o=r.getHtml(new Zw);return r.destroy(),document.body.removeChild(t),{value:a,html:o}}var Dx=md().map((function(e){return e.text=e.text.replace(/<br.*?>/,""),e})),Mx={};Ei.registerClipboardExportParser(new Kw),Mx.Engine=Ei,Mx.Editor=gx,Mx.MiniEditor=yx,Mx.MobileEditor=kx,Mx.ContentView=Ox,Mx.HotKeys=Dx,Mx.Outline=gy,Mx.ExportParser=Kw,Mx.WordExportParser=Px,Mx.DoNothingExportParser=Ax,Mx.DocVersion=1,Mx.htmlToLake=Tx,Mx.PdfExportParser=jx},3548:function(e,t,n){"use strict";var r=n(104),a=n.n(r),o=n(2780);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=new a.a("doc:outline"),u={hasToc:function(e){var t=e.match(/<(h([0-9]))(\sid="\w{0,10}")?\>?/);return t&&t.length>0},calcHeight:function(e,t){var n=o.a.offset(e),r=e.offsetHeight,a=o.a.scrollTop(),i=n.top+16,l=n.top+102,u=window.innerHeight+a<=r+n.top;s("calc toc height, context:",c(c({viewHeight:window.innerHeight,scrollY:a,height:r},n),{},{isContentFullyDisplayed:u}));var d=0;u?d=t?window.innerHeight-32:window.innerHeight-i:d=r+n.top-a-l;return Math.max(d,0)},findReadingSection:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e||0===e.length)return-1;for(var n=-1,r=0,a=e.length;r<a;r++){var o=e[r].getBoundingClientRect();if(o.top<=t+2)if(r===a-1)n=r;else{var i=e[r+1].getBoundingClientRect();if(i.top>t+2){n=r;break}}}return n}};t.a=u},355:function(e,t,n){"use strict";var r=n(254),a=n.n(r),o=n(156);function i(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l={adaptAbilities:function(e){var t=e.me,n=e.comment,r=e.target_type,a=e.target,o={edit:!1,delete:!1};return t&&t.id===n.user_id?(o.edit=!0,o.delete=!0):"Doc"===r&&(o.delete=a.abilities&&a.abilities.destroy_comment),o},getPostActions:function(e,t){var n=[];return n.push({cmd:"copy_link",title:__("复制链接")}),n.push({cmd:"reply",title:__("评论")}),e.edit&&n.push({cmd:"edit",title:__("编辑")}),e.delete&&n.push({cmd:"delete",title:__("删除"),confirm:!0}),t&&n.push({cmd:"content_report",title:__("投诉")}),n},includesHashAnchoredComment:function(e,t){if(!t||!t.startsWith("#comment-"))return!1;var n=parseInt(t.substring("#comment-".length),10);return!!e.find((function(e){return e.id===n}))},getParticipants:function(e,t,n){var r=n.groupMembers,c=n.targetType,l=[];return"Topic"===c?l.push(e.user):"Doc"!==c&&"Resource"!==c||(e.contributors=e.contributors||[],l=i(e.contributors)),t&&t.length>0&&t.forEach((function(e){var t=l.find((function(t){return t&&e.user&&t.id===e.user.id}));e.user&&!t&&l.push(e.user)})),r&&r.length>0&&r.forEach((function(e){l.push(e.user)})),l=a()(l,"login"),window.appData.isYuque&&(l=l&&l.filter((function(e){return e.status!==o.STATUS.terminated}))),l},getAnchorId:function(e,t){return"".concat("Topic"===t?"reply-":"comment-").concat(e)},TARGET_TYPES:["Doc","DocVersion","Resource","Topic","Artboard","Note"]};t.a=l},3554:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=n(89);function a(e){var t=!1;if(r.default.get(e)){var n=new Date(JSON.parse(r.default.get(e)));t=new Date-n<6048e5}return t}function o(e){r.default.set(e,JSON.stringify(new Date))}},36:function(e,t,n){"use strict";n(1923);var r=n(372);n(136);t.a=r.a},366:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e},e.exports=t.default,e.exports.default=t.default},367:function(e,t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(e){return n}}},368:function(e,t,n){},369:function(e,t,n){e.exports=n(557)},371:function(e,t,n){const r=n(812),a=n(813),o=n(831),i=n(832);function c(e,t,n,o,i){const c=[].slice.call(arguments,1),l=c.length,s="function"==typeof c[l-1];if(!s&&!r())throw new Error("Callback required as last argument");if(!s){if(l<1)throw new Error("Too few arguments provided");return 1===l?(n=t,t=o=void 0):2!==l||t.getContext||(o=n,n=t,t=void 0),new Promise((function(r,i){try{const i=a.create(n,o);r(e(i,t,o))}catch(e){i(e)}}))}if(l<2)throw new Error("Too few arguments provided");2===l?(i=n,n=t,t=o=void 0):3===l&&(t.getContext&&void 0===i?(i=o,o=void 0):(i=o,o=n,n=t,t=void 0));try{const r=a.create(n,o);i(null,e(r,t,o))}catch(e){i(e)}}t.create=a.create,t.toCanvas=c.bind(null,o.render),t.toDataURL=c.bind(null,o.renderToDataURL),t.toString=c.bind(null,(function(e,t,n){return i.render(e,n)}))},3776:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(1),i=n.n(o),c=n(34),l=n(1751),s=n(99),u=n(1763),d=n(113),f=(n(195),n(121)),p=(n(101),n(26)),h=n(11),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M457.3 543c-68.1-17.7-145 16.2-174.6 76.2-30.1 61.2-1 129.1 67.8 151.3 71.2 23 155.2-12.2 184.4-78.3 28.7-64.6-7.2-131-77.6-149.2zm-52 156.2c-13.8 22.1-43.5 31.7-65.8 21.6-22-10-28.5-35.7-14.6-57.2 13.7-21.4 42.3-31 64.4-21.7 22.4 9.5 29.6 35 16 57.3zm45.5-58.5c-5 8.6-16.1 12.7-24.7 9.1-8.5-3.5-11.2-13.1-6.4-21.5 5-8.4 15.6-12.4 24.1-9.1 8.7 3.2 11.8 12.9 7 21.5zm334.5-197.2c15 4.8 31-3.4 35.9-18.3 11.8-36.6 4.4-78.4-23.2-109a111.39 111.39 0 00-106-34.3 28.45 28.45 0 00-21.9 33.8 28.39 28.39 0 0033.8 21.8c18.4-3.9 38.3 1.8 51.9 16.7a54.2 54.2 0 0111.3 53.3 28.45 28.45 0 0018.2 36zm99.8-206c-56.7-62.9-140.4-86.9-217.7-70.5a32.98 32.98 0 00-25.4 39.3 33.12 33.12 0 0039.3 25.5c55-11.7 114.4 5.4 154.8 50.1 40.3 44.7 51.2 105.7 34 159.1-5.6 17.4 3.9 36 21.3 41.7 17.4 5.6 36-3.9 41.6-21.2v-.1c24.1-75.4 8.9-161.1-47.9-223.9zM729 499c-12.2-3.6-20.5-6.1-14.1-22.1 13.8-34.7 15.2-64.7.3-86-28-40.1-104.8-37.9-192.8-1.1 0 0-27.6 12.1-20.6-9.8 13.5-43.5 11.5-79.9-9.6-101-47.7-47.8-174.6 1.8-283.5 110.6C127.3 471.1 80 557.5 80 632.2 80 775.1 263.2 862 442.5 862c235 0 391.3-136.5 391.3-245 0-65.5-55.2-102.6-104.8-118zM443 810.8c-143 14.1-266.5-50.5-275.8-144.5-9.3-93.9 99.2-181.5 242.2-195.6 143-14.2 266.5 50.5 275.8 144.4C694.4 709 586 796.6 443 810.8z"}}]},name:"weibo",theme:"outlined"},g=n(22),v=function(e,t){return r.createElement(g.a,Object(h.a)(Object(h.a)({},e),{},{ref:t,icon:m}))};v.displayName="WeiboOutlined";var y=r.forwardRef(v),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M690.1 377.4c5.9 0 11.8.2 17.6.5-24.4-128.7-158.3-227.1-319.9-227.1C209 150.8 64 271.4 64 420.2c0 81.1 43.6 154.2 111.9 203.6a21.5 21.5 0 019.1 17.6c0 2.4-.5 4.6-1.1 6.9-5.5 20.3-14.2 52.8-14.6 54.3-.7 2.6-1.7 5.2-1.7 7.9 0 5.9 4.8 10.8 10.8 10.8 2.3 0 4.2-.9 6.2-2l70.9-40.9c5.3-3.1 11-5 17.2-5 3.2 0 6.4.5 9.5 1.4 33.1 9.5 68.8 14.8 105.7 14.8 6 0 11.9-.1 17.8-.4-7.1-21-10.9-43.1-10.9-66 0-135.8 132.2-245.8 295.3-245.8zm-194.3-86.5c23.8 0 43.2 19.3 43.2 43.1s-19.3 43.1-43.2 43.1c-23.8 0-43.2-19.3-43.2-43.1s19.4-43.1 43.2-43.1zm-215.9 86.2c-23.8 0-43.2-19.3-43.2-43.1s19.3-43.1 43.2-43.1 43.2 19.3 43.2 43.1-19.4 43.1-43.2 43.1zm586.8 415.6c56.9-41.2 93.2-102 93.2-169.7 0-124-120.8-224.5-269.9-224.5-149 0-269.9 100.5-269.9 224.5S540.9 847.5 690 847.5c30.8 0 60.6-4.4 88.1-12.3 2.6-.8 5.2-1.2 7.9-1.2 5.2 0 9.9 1.6 14.3 4.1l59.1 34c1.7 1 3.3 1.7 5.2 1.7a9 9 0 006.4-2.6 9 9 0 002.6-6.4c0-2.2-.9-4.4-1.4-6.6-.3-1.2-7.6-28.3-12.2-45.3-.5-1.9-.9-3.8-.9-5.7.1-5.9 3.1-11.2 7.6-14.5zM600.2 587.2c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9c0 19.8-16.2 35.9-36 35.9zm179.9 0c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9a36.08 36.08 0 01-36 35.9z"}}]},name:"wechat",theme:"outlined"},k=function(e,t){return r.createElement(g.a,Object(h.a)(Object(h.a)({},e),{},{ref:t,icon:b}))};k.displayName="WechatOutlined";var w=r.forwardRef(k),x=n(371),_=n.n(x),E=n(224),C=n.n(E),O=n(2804);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},P(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M(e);if(t){var a=M(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return D(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=C.a.mobile||C.a.tablet,I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&P(e,t)}(i,e);var t,n,r,o=A(i);function i(){var e;R(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return N(D(e=o.call.apply(o,[this].concat(n))),"state",{qrcode:null,shareGuideVisible:!1}),N(D(e),"getWeiboShareUrl",(function(){var t=e.props.doc,n=t.cover,r=t.description,a=encodeURIComponent(window.location.href),o=encodeURIComponent(n),i=encodeURIComponent(r?"".concat(document.title," | ").concat(r):document.title);return"https://service.weibo.com/share/share.php?url=".concat(a,"&pic=").concat(o,"&title=").concat(i)})),N(D(e),"generateQrcode",(function(){_.a.toDataURL(window.location.href,(function(t,n){e.setState({qrcode:n})}))})),N(D(e),"toggleShareGuide",(function(){e.setState((function(e){return{shareGuideVisible:!e.shareGuideVisible}}))})),e}return t=i,(n=[{key:"componentDidMount",value:function(){this.generateQrcode()}},{key:"render",value:function(){var e=this.props.book,t=window.appData,n=t.isYuque,r=t.isEnterprise,o=t.organization,i=t.isPrivateCloud;return 0===e.public||!n||i||r||o&&o.id?null:a.a.createElement("div",{className:"social-share"},L?a.a.createElement(a.a.Fragment,null,a.a.createElement(O.a,{visible:this.state.shareGuideVisible,onCancel:this.toggleShareGuide}),a.a.createElement("span",{className:"social-share-item",onClick:this.toggleShareGuide},__("分享："),a.a.createElement("span",{className:"larkicon larkicon-share"}))):a.a.createElement("span",null,__("分享到："),a.a.createElement(p.a,{title:"分享到微博"},a.a.createElement("a",{className:"social-share-item",target:"_blank",href:this.getWeiboShareUrl()},a.a.createElement(y,null))),a.a.createElement("span",{className:"social-share-item"},this.state.qrcode&&a.a.createElement(f.a,{getPopupContainer:function(e){return e.parentNode},overlayStyle:{width:200},placement:"top",content:a.a.createElement("div",{className:"qrcode-block"},a.a.createElement("span",{className:"img"},a.a.createElement("img",{src:this.state.qrcode})),a.a.createElement("div",{className:"text"},a.a.createElement("p",null,__("微信扫一扫分享"))))},a.a.createElement("a",{className:"social-share-wechat"},a.a.createElement(w,null))))))}}])&&j(t.prototype,n),r&&j(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.PureComponent);I.propTypes={book:i.a.object.isRequired,doc:i.a.object.isRequired};var B=I,z=(n(45),n(18)),F=n(290),U=n(3554),V=n(2287),q="ReaderCommentSignupGuide-module_commentOnboardingBanner_3mNvi",H="ReaderCommentSignupGuide-module_headline_Knlrz",W="ReaderCommentSignupGuide-module_larkLogo_t3X3R",Y="ReaderCommentSignupGuide-module_callToAction_HzHac",G="ReaderCommentSignupGuide-module_closeButton_yJPNm";function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Z(e){var t=e.user,n=X(Object(r.useState)(!0),2),o=n[0],i=n[1],c=Object(U.b)("doc_reader_comment_onboarding"),l=t&&!t.id&&!c;if(!o||!l||window.appData.forbidLoginCard)return null;var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"register",t=arguments.length>1?arguments[1]:void 0;Object(F.a)("c66253.".concat(t)),window.location.href="/".concat(e,"?goto=").concat(encodeURIComponent(window.location.href),"&source=commentBanner")};return a.a.createElement(V.a,{as:"div",onChange:function(e){e&&Object(F.b)("c66253")}},a.a.createElement("div",{className:q},a.a.createElement("div",{className:H},a.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/XuVpGqBFxXplzvLjJBZB.svg",alt:"语雀",className:W}),a.a.createElement("h5",null,__("加入语雀，参与知识分享与交流"))),a.a.createElement("p",{className:Y},__("{register} 或 {login} 语雀进行评论",{register:a.a.createElement(z.a,{type:"link",onClick:function(){s("register","d136316")}},__("注册")),login:a.a.createElement(z.a,{type:"link",onClick:function(){s("login","d136315")}},__("登录"))})),a.a.createElement(z.a,{type:"primary",onClick:function(){s("login","d136317")}},__("立即加入")),a.a.createElement("div",{className:G,onClick:function(){i(!1),Object(U.a)("doc_reader_comment_onboarding")}},a.a.createElement("span",{className:"larkicon larkicon-close"}))))}Z.propTypes={user:i.a.object};var $=Z,Q={header:"ReaderComment-module_header_9Ej69",headerTitle:"ReaderComment-module_headerTitle_MaqXh",headerBtn:"ReaderComment-module_headerBtn_YdQfC",text:"ReaderComment-module_text_E5A0E",fadein:"ReaderComment-module_fadein_oxSsJ",flash:"ReaderComment-module_flash_E30S3"};function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var te=function(e){var t=e.target,n=e.isShare,o=e.group,i=e.book,s=e.withCornerBubble,f=e.getViewEngine,p=n?"share":"read",h=/#comment-\d+/.test(window.location.hash),m=!h,g=J(Object(r.useState)(!1),2),v=g[0],y=g[1],b=Object(r.useRef)(),k=function(){var e=document.querySelector("#lark-mini-editor");e&&(m&&b.current&&b.current.renderAllComments(),e.scrollIntoView(),y(!0))},w=a.a.createElement("div",{className:Q.wrapper},a.a.createElement("div",{className:Q.header},a.a.createElement("div",{className:Q.headerTitle},a.a.createElement("a",{className:Q.headerBtn,onClick:k},a.a.createElement(c.a,{name:"thread_reply",width:window.h5?20:24}),a.a.createElement("span",{className:Q.text},__("回复")))),"Doc"===e.targetType&&!n&&a.a.createElement(B,{book:i,doc:t})),a.a.createElement(l.b,{ref:b,key:t.id,targetType:e.targetType,target:e.target,group:o,book:i,doc:t,canMentionMembers:d.a.canMentionMembers(p,{group:o}),onCreate:e.onCreateComment,canComment:d.a.canPostCommentToDoc(t),focusToEditor:v,getViewEngine:f,openInfiniteScroll:m}),s&&a.a.createElement(u.a,{iconName:"comment-bubble",style:{bottom:"32px"},onClick:k,count:t.comments_count>0&&t.comments_count})),x=J(Object(r.useState)(h?w:null),2),_=x[0],E=x[1];return Object(r.useEffect)((function(){setTimeout((function(){return E(w)}),300)}),[v]),a.a.createElement(a.a.Fragment,null,a.a.createElement($,{user:window.appData.me}),_)};te.defaultProps={isShare:!1,onCreateComment:function(){}},te.propTypes={target:i.a.object.isRequired,targetType:i.a.oneOf(["Doc","DocVersion"]).isRequired,book:i.a.object.isRequired,group:i.a.object.isRequired,isShare:i.a.bool,onCreateComment:i.a.func,withCornerBubble:i.a.bool,getViewEngine:i.a.func};t.default=Object(s.b)(te,!0)},3804:function(e,t,n){"use strict";t.a={wrapper:"Reader-module_wrapper_8LhoV",adapt:"Reader-module_adapt_jPfiq",content:"Reader-module_content_iqKeO",draft:"Reader-module_draft_zoYcP",fadein:"Reader-module_fadein_VJEKk",flash:"Reader-module_flash_jfcSs"}},3805:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),c=n(1749),l=n(846),s=n(2776);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&p(e,t)}(i,e);var t,n,r,o=h(i);function i(){return d(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e,t,n,r=this.props,o=r.location,i=r.fragment,u=r.doc,d=r.book,f=r.group,p=this.props.view||o.query.view,h=null===(e=window)||void 0===e||null===(t=e.appData)||void 0===t||null===(n=t.matchCondition)||void 0===n?void 0:n.useLakex;return"doc_embed"===p?a.a.createElement(s.a,this.props,h?a.a.createElement(l.b,{doc:u,book:d,group:f,content:i,scene:"Doc",preventCopySelfContainer:!0,fallbackLake:!0}):a.a.createElement(c.a,{doc:u,book:d,group:f,content:i,scene:"Doc",preventCopySelfContainer:!0})):a.a.createElement("div",null,h?a.a.createElement(l.b,{doc:u,book:d,group:f,content:i,preventCopySelfContainer:!0,fallbackLake:!0}):a.a.createElement(c.a,{doc:u,book:d,group:f,content:i,preventCopySelfContainer:!0}))}}])&&f(t.prototype,n),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.PureComponent);v.propTypes={fragment:i.a.string,view:i.a.string,doc:i.a.object,book:i.a.object,group:i.a.object,location:i.a.object,showHeader:i.a.bool},t.a=v},3816:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),c=n(113),l=n(2113),s=n(3841),u=n(3842),d=n(3827),f=n(3834),p=n(3835),h=(n(1590),n(2096)),m=n(104),g=n.n(m),v=n(71),y=n.n(v),b=n(1750),k=n(351),w=n(942),x=n(163),_=n(3548),E=n(3130),C=n(1552),O=n(3776),S="ReaderDocEmbed-module_wrap_iirZe",R="ReaderDocEmbed-module_title_X6A9I",j="ReaderDocEmbed-module_article_+VRXp",P="ReaderDocEmbed-module_outline_lQMCs",A="ReaderDocEmbed-module_comment_hpWBZ",T="ReaderDocEmbed-module_withOutline_oWpnx";function D(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I=new g.a("doc:embed"),B=new URLSearchParams(window.location.search);function z(e){var t=e.doc,n=e.scene,o=e.theme,i=Object(r.useMemo)((function(){return new C.a}),[]),l=!window.h5&&("1"===B.get("outline")||i.isEmbedMode&&"toc"===i.sidebar),s="1"===B.get("comment"),u="1"===B.get("title"),d=M(Object(r.useState)([]),2),f=d[0],p=d[1],m=M(Object(r.useState)(-1),2),g=m[0],v=m[1],N=M(Object(r.useState)(null),2),L=N[0],z=N[1],F=M(Object(r.useState)(null),2),U=F[0],V=F[1],q=a.a.useRef(null),H=a.a.useRef(null),W=a.a.useRef(null);W.current=a.a.useMemo((function(){return I("useMemo start calculate."),q.current?f.map((function(e){return document.getElementById(e.id)})):[]}),[f]);var Y=Object(r.useMemo)((function(){return new E.a}),[]);Object(E.c)({backgroundColor:i.backgroundColor}),Object(r.useEffect)((function(){Y.onMessage((function(e){e.id;var t=e.type,n=e.message;e.options;t===Y.MESSAGE_TYPES.SCROLL_TO?window.scrollTo(0,n):t===Y.MESSAGE_TYPES.SET_VALUE&&(z(n),V(+new Date))})),Y.loadCallback()}),[Y]),Object(r.useEffect)((function(){z(t.content)}),[t.content]),Object(r.useEffect)((function(){t.loaded&&Y.onDocLoaded()}),[t.loaded,Y]),I("render doc as embed mode, show outline:",l);var G=function(e){if(I("update outline position"),l){var t=_.a.findReadingSection(W.current);v(t)}},X=function(e){I("onresize update outline position"),l&&G(),function(){var e=q.current;if(e){var t={type:"doc_height_change",payload:{height:e.offsetHeight}};i.autoHeight&&(clearTimeout(H.current),H.current=setTimeout((function(){Y.resize({height:document.body.scrollHeight})}),300)),I("send message:",t),window.parent.postMessage(t,"*")}}()},K=y()(G,300),Z=function(e){var t=e.data;if(I("receive message:",t),"jump_to_anchor"===t.code){var n=t.payload.id;if("string"==typeof n)if(f.find((function(e){return e.id===n})))document.getElementById(n).scrollIntoView()}};if(Object(r.useEffect)((function(){return window.addEventListener("resize",X),window.addEventListener("scroll",K),window.addEventListener("message",Z),function(){window.removeEventListener("resize",X),window.removeEventListener("scroll",K),window.removeEventListener("message",Z)}}),[]),Object(r.useEffect)((function(){"en"===B.get("translate")&&c.a.translateDoc({srcLanguage:"zh",tgtLanguage:"en",withComment:!1}),i.watermark&&Object(b.b)({el:document.querySelector("#content"),text:i.watermark})}),[]),!t.loaded)return a.a.createElement("span",null);var $=a.a.createElement(k.a,{key:U,content:L,onBeforeRenderImage:w.a,scene:n,lockedtext:{action:"/api/services/crypto"},options:{mention:{origin:i.customMentionOrigin}},genOutline:!0,genAnchor:!1,typography:o.typography,onLoad:function(e,t){var n,r;I("doc loaded"),x.a.initScrollbarPosition(),p(t.outline),n={rootNode:e,outline:D(t.outline)},r={url:document.location.href,type:"doc_ready",payload:{height:n.rootNode.offsetHeight,outline:n.outline}},I("send message:",r),window.parent.postMessage(r,"*")}});return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{id:"content",className:"".concat(S," ").concat(l?T:""),onScroll:y()(G,300)},u&&a.a.createElement("h1",{id:"article-title",className:R},t.title),a.a.createElement("div",{className:j,ref:q},L?$:null),l&&f.length>0&&a.a.createElement(h.a,{className:P,contents:f,current:g,autoAdjustPosition:!0,enableProgressBar:!0})),s&&a.a.createElement("div",{className:A,"data-testid":"doc-embed-comment"},a.a.createElement(O.default,{key:t.id,target:t,targetType:"Doc",book:e.book,group:e.group})))}z.defaultProps={scene:"other",theme:{}},z.propTypes={doc:i.a.object.isRequired,book:i.a.object.isRequired,group:i.a.object.isRequired,scene:i.a.oneOf(["doc","other"]),theme:i.a.object};var F=z,U=n(3805),V="EmbedReader-module_content_e5Mfz";function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var W=new URLSearchParams(window.location.search);function Y(e){var t=e.doc,n=e.group,o=e.book,i=e.isShare,h="yuque"===e.from,m=q(Object(r.useState)(document.body.clientHeight),2),g=m[0],v=m[1],y="0"!==W.get("title"),b=function(){v(document.body.clientHeight)};if(Object(r.useEffect)((function(){return window.addEventListener("resize",b,!1),function(){window.removeEventListener("resize",b,!1)}}),[]),!t.loaded)return a.a.createElement("span",null);if(t.error)return a.a.createElement(d.a,{error:t.error});if("Doc"===t.type)return h?a.a.createElement(U.a,{match:e.match,doc:t,book:o,group:n,view:"doc_embed",scene:"doc",showHeader:y,docLoaded:t.loaded,fragment:t.content}):a.a.createElement(F,{doc:t,book:o,group:n,scene:"doc",theme:c.a.getTheme(t,o)});if("Sheet"===t.type)return a.a.createElement(s.a,{doc:t,sheetHeight:g,match:e.match,hasReadAuditTip:c.a.needShowAuditTip(t),showHeader:y&&h});if("Table"===t.type)return a.a.createElement(u.a,{doc:t,tableHeight:g,match:e.match,hasReadAuditTip:c.a.needShowAuditTip(t),showHeader:y&&h});var k=function(){return"Mind"===t.type||"Board"===t.type?a.a.createElement(f.a,{key:"doc-content-".concat(t.id),group:n,book:o,doc:t,isShare:i,isDocEmbed:!0}):"Show"===t.type?a.a.createElement(p.a,{key:"doc-content-".concat(t.id),group:n,book:o,doc:t,isShare:i,isDocEmbed:!0}):a.a.createElement(a.a.Fragment,null,t.content)};return h?a.a.createElement("div",{id:"lake-document-embed"},y&&a.a.createElement(l.a,{title:t.title,height:32,link:e.match&&e.match.url,style:{borderBottom:"1px solid rgb(217, 217, 217)"}}),a.a.createElement("div",{className:V},k())):k()}Y.propTypes={group:i.a.object.isRequired,book:i.a.object.isRequired,doc:i.a.object.isRequired,isShare:i.a.bool,from:i.a.string,match:i.a.object.isRequired};t.a=Y},3818:function(e,t,n){"use strict";n(45);var r=n(18),a=n(1),o=n.n(a),i=n(0),c=n.n(i),l=n(79),s=n(212),u=n(8),d=n.n(u),f=n(1756),p=n(110),h=n(290),m=(n(57),n(23)),g=n(31);function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e,t,n){var r=v(Object(i.useState)(!1),2),a=r[0],o=r[1],c=n&&(n.id||n.session);Object(i.useEffect)((function(){e.watch&&o(!!e.watch.actioned)}),[e.id]);var l=function(e){t({type:"me/update",payload:{onLogin:e}}),t({type:"error/toggleLoginModal",payload:{visible:!0}})},s=function(){g.a.actions.create({action_type:"watch",target_type:"Book",target_id:e.id}).then((function(){m.a.info(__("关注知识库成功")),o(!0)})).catch((function(e){m.a.error(__("关注知识库失败，请刷新重试"))}))},u=function(){g.a.actions.destroy({action_type:"watch",target_type:"Book",target_id:e.id}).then((function(){m.a.info(__("取消关注知识库")),o(!1)})).catch((function(e){m.a.error(__("取消关注知识库失败，请刷新重试"))}))};return[a,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"create";c?"create"===e?s():u():l((function(){s()}))}]},k=n(389),w=n(113),x=n(105),_=n.n(x),E=n(99),C=n(258),O={watch:"ReaderWatchlist-module_watch_3nwDu",cards:"ReaderWatchlist-module_cards_TRgcH",watchCard:"ReaderWatchlist-module_watchCard_BaoRG",mobile:"ReaderWatchlist-module_mobile_GRT86",suggests:"ReaderWatchlist-module_suggests_tWuqW",icon:"ReaderWatchlist-module_icon_3zrRb",contentWrapper:"ReaderWatchlist-module_contentWrapper_0-8bJ",content:"ReaderWatchlist-module_content_giFjJ",from:"ReaderWatchlist-module_from_-7fuw",fadein:"ReaderWatchlist-module_fadein_rKwbx",flash:"ReaderWatchlist-module_flash_Jnhe0"};function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e){var t=S(b(e.book,e.dispatch,e.me),2),n=t[0],a=t[1];return c.a.createElement("div",{className:O.watchCard},c.a.createElement("div",{className:O.icon},c.a.createElement(C.a.Icon,{book:e.book,width:32})),c.a.createElement("div",{className:O.contentWrapper},c.a.createElement("div",{className:O.content},c.a.createElement("h4",null,c.a.createElement("a",{href:"/".concat(e.group.login,"/").concat(e.book.slug),target:"_blank"},e.book.name)),e.book.description?c.a.createElement("p",null,e.book.description):null)),function(t){if(!(e.me&&e.me.id===e.group.id)){var n=window.h5?"small":"default";return t?c.a.createElement(r.a,{size:n,type:"default",onClick:function(){return a("destroy")}},__("已关注")):c.a.createElement(r.a,{size:n,type:"default",onClick:function(){Object(h.a)("d138359"),a("create")}},__("关注"))}}(n))}function P(e){var t=e.user;return t?c.a.createElement("div",{className:O.watchCard},c.a.createElement("div",{className:O.icon},c.a.createElement(p.a,{src:t.avatar_url,size:32})),c.a.createElement("div",{className:O.contentWrapper},c.a.createElement("div",{className:O.content},c.a.createElement("h4",null,c.a.createElement("a",{href:"/".concat(t.login),target:"_blank"},t.name)),t.description?c.a.createElement("p",null,t.description):null)),c.a.createElement(f.a,{user:t,onStatusChange:function(e,t){t&&Object(h.a)("d138358")}})):null}function A(e){var t=e.doc;return c.a.createElement("div",{className:O.docCard,"data-aspm-click":"d138361"},c.a.createElement("h4",null,c.a.createElement("a",{href:"/go/doc/".concat(t.id),target:"_blank"},t.title)),c.a.createElement("p",null,t.custom_description||t.description))}function T(e){var t=e.doc,n=e.book,r=e.group,a=e.me;if(!window.appData.isYuque||window.appData.isPrivateCloud||window.appData.organization||window.appData.sharePage)return null;if(!(Object(s.b)({type:"doc",target:t,group:r,book:n}).getPrivacyValue()===k.PRIVACY.public))return null;var o=t.suggests||[];return w.a.getDocShowAuthorOption(t)===_.a.SHOW_AUTHOR_OPTION.hide?null:c.a.createElement("div",{className:d()(O.watch,window.h5&&O.mobile),"data-testid":"book-watchlist","data-aspm":"c67301"},c.a.createElement("p",null,__("关注作者和知识库后续更新")),c.a.createElement("div",{className:O.cards},c.a.createElement(P,{user:t.user}),c.a.createElement(j,{book:n,group:r,me:a,dispatch:e.dispatch})),o.length?c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,__("推荐阅读")),c.a.createElement("div",{className:O.suggests,"data-testid":"book-suggests"},o.map((function(e){return c.a.createElement(A,{doc:e})})))):null)}T.propTypes={doc:o.a.object,book:o.a.object,group:o.a.object,me:o.a.object};t.a=Object(E.b)(Object(l.c)((function(e){return e}))(T))},3823:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),c=n(342),l=n(1749),s=n(846),u=n(2776);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&m(e,t)}(i,e);var t,n,r,o=g(i);function i(){return p(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e,t,n,r=this.props,o=r.docLoaded,i=r.fragment,c=r.fragmentId,d=r.location,p=r.scene,h=r.doc,m=r.book,g=r.group,v=r.match,y=i.match(/<card.*name="(.*?)"/)[1],b=d.query.view,k=null===(e=window)||void 0===e||null===(t=e.appData)||void 0===t||null===(n=t.matchCondition)||void 0===n?void 0:n.useLakex;if("doc_embed"===b){var w=a.a.createElement("span",null);return o&&(w=k?a.a.createElement(s.b,{content:i,doc:h,book:m,group:g,scene:p,preventCopySelfContainer:!0,fallbackLake:!0}):a.a.createElement(l.a,{content:i,doc:h,book:m,group:g,scene:p,preventCopySelfContainer:!0})),a.a.createElement(u.a,f({className:"doc-embed-card-".concat(y),fragmentId:c},this.props),w)}return o?a.a.createElement("div",null,k?a.a.createElement(s.b,{customMaximizeRestore:function(){window.location.href="".concat(v.url,"#").concat(c)},autoMaximizeCard:c,content:i,doc:h,book:m,group:g,scene:p,preventCopySelfContainer:!0,fallbackLake:!0}):a.a.createElement(l.a,{customMaximizeRestore:function(){window.location.href="".concat(v.url,"#").concat(c)},autoMaximizeCard:c,content:i,doc:h,book:m,group:g,scene:p,preventCopySelfContainer:!0})):a.a.createElement("div",null,a.a.createElement("span",null))}}])&&h(t.prototype,n),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.PureComponent),k=n(3805);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function x(){return x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x.apply(this,arguments)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},C(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var a=R(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&C(e,t)}(i,e);var t,n,r,o=O(i);function i(){return _(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.location,n=e.docLoaded,r=e.doc,o=this.props.inner||t.query.inner;if(r.content&&n){var i={asl:r.content,id:o},l=Object(c.getCardFragment)(i);if(l)return a.a.createElement("div",null,l?a.a.createElement(b,x({},this.props,{docLoaded:n,fragment:l,fragmentId:o})):a.a.createElement("span",null));var s=Object(c.getParagraphFragment)(i);if(s)return a.a.createElement("div",{"data-testid":"doc-paragraph"},s?a.a.createElement(k.a,x({},this.props,{docLoaded:n,fragment:s,fragmentId:o})):a.a.createElement("span",null));window.location.href="/404?view=doc_embed"}return a.a.createElement("span",null)}}])&&E(t.prototype,n),r&&E(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.PureComponent);j.propTypes={docLoaded:i.a.bool,inner:i.a.string,doc:i.a.object,location:i.a.object};t.a=j},3825:function(e,t,n){"use strict";n(195);var r=n(121),a=n(0),o=n.n(a),i=n(1),c=n.n(i),l=n(8),s=n.n(l),u=n(56),d=n(105),f=n.n(d),p=n(140),h=n(636),m=n(2810),g=n(264),v=n(944),y=n(34),b=n(15),k="ColumnItem-module_doc_R1MM3",w="ColumnItem-module_titleText_Znb5v",x="ColumnItem-module_liteDoc_7uFHZ",_="ColumnItem-module_miniMoreBtn_9-8p-",E="ColumnItem-module_info_MLOFP",C="ColumnItem-module_cover_YxdVx",O="ColumnItem-module_coverImg_3jhK9",S="ColumnItem-module_content_TY2zx",R="ColumnItem-module_title_dOKF0",j="ColumnItem-module_desc_+0B0p",P="ColumnItem-module_descMini_lJQWm",A="ColumnItem-module_metaH5_-AI8E",T="ColumnItem-module_meta_uwhiE",D="ColumnItem-module_metaItem_N1KDO",M="ColumnItem-module_moreBtn_cWYNq",N="ColumnItem-module_miniMoreBtnVisible_Yskms";function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z(e){var t,n=I(Object(a.useState)(!1),2),i=n[0],c=n[1],l=I(Object(a.useState)(!1),2),d=l[0],B=l[1],z=e.doc,F=e.book,U=e.highlighted,V=e.useMiniLayout,q=e.actions,H=F.abilities&&F.abilities.create_doc;function W(){return o.a.createElement(r.a,{type:"menu",visible:i,onVisibleChange:function(e){c(e),setTimeout((function(){return B(e)}),0)},overlayStyle:{minWidth:126},trigger:["click"],placement:"bottomLeft",align:V?{offset:[-22,0]}:{offset:[-17,-3]},arrowPointAtCenter:!0,hideWhenInactive:!0,content:o.a.createElement(v.a,{book:F,doc:z,commands:q,commandParams:{doc:z},onSelect:function(){c(!1)},onCommandsExecuted:function(t){var n=t.cmd;n===b.a.DOC.edit_meta.cmd&&e.showDocMetaEditor(z),n===b.a.DOC.copy.cmd&&e.showDocCopier(z),n===b.a.DOC.move.cmd&&e.showDocMover(z),n===b.a.DOC.delete_with_toc.cmd&&e.showDocDelete(z),n===b.a.CATALOG.remove.cmd&&e.showCatalogRemove(z)}})},!V&&o.a.createElement("span",{className:s()(M,"lake-icon","lake-icon-more-actions")}),V&&o.a.createElement("span",{className:s()(_,L({},N,d))},o.a.createElement(y.a,{className:s()(M,"meta-icon"),name:"catalog-more",width:16})))}function Y(e){var t=e.meta,n=t.show_author_option,r=t.show_author_id,a=t.show_author_custom_text,i=f.a.SHOW_AUTHOR_OPTION.all===n||void 0===n,c=f.a.SHOW_AUTHOR_OPTION.specific_user===n;if(i||c){var l=e.contributors;if(c)l=[e.contributors.find((function(e){return e.id===r}))];return o.a.createElement("div",{className:D},!window.h5&&o.a.createElement("span",{className:"lake-icon lake-icon-author meta-icon"}),l.length<4?l.map((function(e,t){return e&&o.a.createElement("span",{key:e.id},o.a.createElement("span",null,t>0&&__("，")),o.a.createElement("a",{href:"/".concat(e.login),draggable:"false"},o.a.createElement(g.a,{user:e},e.name)))})):o.a.createElement("span",null,__("{user} 等 {count} 人",{user:e.user&&o.a.createElement("a",{href:"/".concat(e.user.login),draggable:"false"},o.a.createElement(g.a,{user:e.user},e.user.name)),count:e.contributors.length})))}var s=f.a.SHOW_AUTHOR_OPTION.hide===n,u=f.a.SHOW_AUTHOR_OPTION.custom_text===n;return s?null:u?o.a.createElement("div",{className:D},!window.h5&&o.a.createElement("span",{className:"lake-icon lake-icon-author meta-icon"}),o.a.createElement("span",null,a)):void 0}function G(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:E},o.a.createElement("div",{className:S},o.a.createElement("h3",{className:R},o.a.createElement("span",{className:w},z.title),o.a.createElement("span",{onClick:function(e){return e.stopPropagation()}},V&&H&&W())),o.a.createElement("p",{className:s()(j,L({},P,V))},null!=z.custom_description?z.custom_description:z.description),!V&&!window.h5&&o.a.createElement("div",{className:T},z.contributors&&Y(z),o.a.createElement("div",{className:D},o.a.createElement("span",{className:"lake-icon lake-icon-timer meta-icon"}),o.a.createElement(p.a,{time:z.first_published_at||z.created_at})),o.a.createElement("div",{className:D},o.a.createElement("span",{className:"lake-icon lake-icon-open-book meta-icon"}),z.hits),o.a.createElement("div",{className:D},o.a.createElement("span",{className:"lake-icon lake-icon-thumb-up meta-icon"}),o.a.createElement("span",null,z.likes_count)),o.a.createElement("span",{onClick:function(e){return e.stopPropagation()}},H&&W()))),!V&&z.cover&&o.a.createElement(m.a,{href:"/".concat(F.namespace,"/").concat(z.slug),className:s()([C]),draggable:!1},o.a.createElement("img",{className:O,src:Object(h.a)(z.cover,{width:400,height:250,fill:!0}),alt:"",draggable:"false"}))),window.h5&&o.a.createElement("div",{className:s()(T,A)},z.contributors&&Y(z),o.a.createElement(p.a,{time:z.first_published_at||z.created_at})))}return o.a.createElement("div",{className:s()((t={},L(t,k,!V),L(t,x,V),L(t,"list-catalog-active-item",U),t)),draggable:H&&!window.h5,onDragStart:function(e){var t=e.target;t&&t.classList.add("dragging")},onDragEnd:function(e){var t=e.target;t&&t.classList.remove("dragging")}},V?o.a.createElement(u.NavLink,{to:"/".concat(F.namespace,"/").concat(z.slug),draggable:!1},G()):o.a.createElement("a",{href:"/".concat(F.namespace,"/").concat(z.slug),draggable:!1},G()))}z.propTypes={book:c.a.object.isRequired,doc:c.a.object.isRequired,actions:c.a.arrayOf(c.a.object).isRequired,highlighted:c.a.bool,useMiniLayout:c.a.bool,showDocMetaEditor:c.a.func,showDocCopier:c.a.func,showDocMover:c.a.func,showDocDelete:c.a.func,showCatalogRemove:c.a.func};t.a=z},3826:function(e,t,n){"use strict";n(179);var r=n(98),a=n(0),o=n.n(a),i="DocLoadingView-module_wrapper_dVlCJ";t.a=function(e){return o.a.createElement("div",{className:i},o.a.createElement(r.a,{justify:"block"}))}},3827:function(e,t,n){"use strict";n(57);var r=n(23),a=n(0),o=n.n(a),i=n(1),c=n.n(i),l=n(104),s=n.n(l),u=n(282),d=n(105),f={errorInfo:"DocErrorView-module_errorInfo_qvozc",msgClose:"DocErrorView-module_msgClose_gXos2",fadein:"DocErrorView-module_fadein_IWF9U",flash:"DocErrorView-module_flash_8cX8b"},p=new s.a("doc:error");function h(e){var t=e.error,n=e.asideWidth,i=t.docTitle,c=t.readStatus;return p("doc load error",t),Object(a.useEffect)((function(){var e,t=c===d.READ_STATUS.init?__("作者还未发布，页面无法访问"):__("页面无法访问，页面链接已失效或被删除");r.a.destroy();var n=o.a.createElement("span",{className:f.msg,"data-testid":"test-max-file-size"},o.a.createElement("span",null,t),o.a.createElement("span",{className:f.msgClose,onClick:function(){return e&&e()}},o.a.createElement(u.a,null)));return e=r.a.warning(n,0),function(){return r.a.destroy()}}),[]),i?o.a.createElement("div",{className:f.docErrorView,style:{height:"640px",willChange:"padding-left",transition:"padding-left 200ms cubic-bezier(0.1, 0, 0, 1) 0s",paddingLeft:n}},o.a.createElement("div",{className:f.errorInfo},o.a.createElement("h1",null,i))):o.a.createElement("div",{style:{height:"640px"},"data-testid":"empty-view"})}h.propTypes={error:c.a.object.isRequired,asideWidth:c.a.number};t.a=h},3834:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),c=n(104),l=n.n(c),s=n(1557),u=n(113),d=n(2126),f=n(219),p=n(2771),h=n(2748),m=n(2121),g=n(2277),v=n(3804);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=new l.a("doc:mind.reader");function w(e){var t=e.book,n=e.doc;return Object(m.a)(t,n),a.a.createElement("div",{"data-testid":""})}function x(e){var t=e.group,n=e.book,o=e.doc,i=e.isShare,c=e.isDocEmbed,l=x.useViewModel({doc:o,isDocEmbed:c,dispatch:e.dispatch}),s=l.getStage();return Object(r.useEffect)((function(){k("mind reader react node created")}),[]),a.a.createElement("div",{className:v.a.wrapper},a.a.createElement(w,{book:n,doc:o}),a.a.createElement("div",{className:v.a.adapt},a.a.createElement(f.a.DraftTip,{doc:o,className:v.a.draft}),u.a.needShowAuditTip(o)&&a.a.createElement(g.a,{key:"audits",doc:o,type:"Doc"}),a.a.createElement(d.a,{className:v.a.content,content:o.content,width:"100%",height:s.height,onLoad:l.restorePosition})),!c&&a.a.createElement(a.a.Fragment,null,a.a.createElement(p.a,{group:t,doc:o,isShare:i,onCreateComment:l.addCommentCount}),a.a.createElement(h.a,{type:"Doc",targetId:o.id,likeStatus:o.like.actioned,likeCount:o.like.count,size:"bubble",bubblePopover:!0})))}x.useViewModel=function(e){var t=e.doc,n=e.isDocEmbed,a=e.dispatch,o=y(Object(r.useState)(document.body.clientHeight),2),i=o[0],c=o[1],l=function(){c(document.body.clientHeight)};return Object(r.useEffect)((function(){return window.addEventListener("resize",l,!1),function(){window.removeEventListener("resize",l,!1)}}),[]),{state:{viewHeight:i},getStage:function(){var e=0===t.status&&t.abilities.update,r=n?32:60;return e&&(r+=42),u.a.needShowAuditTip(t)&&(r+=42),{height:i-r}},restorePosition:function(e){s.a.getSheetStoredPosition(t.id)&&console.log("TODO")},addCommentCount:function(){a({type:"doc/addCommentCount"})}}},x.propTypes={group:i.a.object.isRequired,book:i.a.object.isRequired,doc:i.a.object.isRequired,isShare:i.a.bool,isDocEmbed:i.a.bool,dispatch:i.a.func},t.a=x},3835:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),c=n(104),l=n.n(c),s=n(1557),u=n(113),d=n(950),f=n(219),p=n(2771),h=n(2748),m=n(2121),g=n(2277),v=n(3804);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=new l.a("doc:mind.reader");function w(e){var t=e.book,n=e.doc;return Object(m.a)(t,n),a.a.createElement("div",{"data-testid":""})}function x(e){var t=e.group,n=e.book,o=e.doc,i=e.isShare,c=e.isDocEmbed,l=x.useViewModel({doc:o,isDocEmbed:c,dispatch:e.dispatch}),s=l.getStage();return Object(r.useEffect)((function(){k("mind reader react node created")}),[]),a.a.createElement("div",{className:v.a.wrapper},a.a.createElement(w,{book:n,doc:o}),a.a.createElement("div",{className:v.a.adapt},a.a.createElement(f.a.DraftTip,{doc:o,className:v.a.draft}),u.a.needShowAuditTip(o)&&a.a.createElement(g.a,{key:"audits",doc:o,type:"Doc"}),a.a.createElement(d.a,{className:v.a.content,content:o.content,width:"100%",height:s.height,onLoad:l.restorePosition})),!c&&a.a.createElement(a.a.Fragment,null,a.a.createElement(p.a,{group:t,doc:o,isShare:i,onCreateComment:l.addCommentCount}),a.a.createElement(h.a,{type:"Doc",targetId:o.id,likeStatus:o.like.actioned,likeCount:o.like.count,size:"bubble",bubblePopover:!0})))}x.useViewModel=function(e){var t=e.doc,n=e.isDocEmbed,a=e.dispatch,o=y(Object(r.useState)(document.body.clientHeight),2),i=o[0],c=o[1],l=function(){c(document.body.clientHeight)};return Object(r.useEffect)((function(){return window.addEventListener("resize",l,!1),function(){window.removeEventListener("resize",l,!1)}}),[]),{state:{viewHeight:i},getStage:function(){var e=0===t.status&&t.abilities.update,r=n?32:60;return e&&(r+=68),u.a.needShowAuditTip(t)&&(r+=42),{height:i-r}},restorePosition:function(e){s.a.getSheetStoredPosition(t.id)&&console.log("TODO")},addCommentCount:function(){a({type:"doc/addCommentCount"})}}},x.propTypes={group:i.a.object.isRequired,book:i.a.object.isRequired,doc:i.a.object.isRequired,isShare:i.a.bool,dispatch:i.a.func},t.a=x},3841:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),c=n(2118),l=n(219),s=n(2113),u=n(2277),d={draft:"SheetEmbed-module_draft_hySRt",sheetViewer:"SheetEmbed-module_sheetViewer_LnVL7",content:"SheetEmbed-module_content_XRryY",fadein:"SheetEmbed-module_fadein_hinHD",flash:"SheetEmbed-module_flash_8AeTM"};function f(e){var t=e.doc,n=e.match,r=e.sheetHeight,o=e.hasReadAuditTip,i=e.showHeader?r-32:r;return t.loaded?a.a.createElement("div",{className:d.wrapper},e.showHeader&&a.a.createElement(s.a,{title:t.title,height:32,link:n&&n.url,style:{borderBottom:"1px solid rgb(217, 217, 217)"}}),a.a.createElement("div",{className:d.content},e.showHeader&&a.a.createElement(l.a.DraftTip,{doc:t,className:d.draft}),o&&a.a.createElement(u.a,{key:"audits",doc:t,type:"Doc"}),a.a.createElement("div",{className:d.sheetViewer,style:{width:"100%",height:i,overflow:"hidden"}},a.a.createElement(c.a,{content:t.content,format:t.format,geSheetStyle:{width:"100%",height:r-40}})))):null}f.defaultProps={showHeader:!0},f.propTypes={doc:i.a.object.isRequired,sheetHeight:i.a.number.isRequired,match:i.a.object.isRequired,showHeader:i.a.bool,hasReadAuditTip:i.a.bool.isRequired};t.a=f},3842:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),c=n(2129),l=n(219),s=n(2113),u=n(2277),d={draft:"TableEmbed-module_draft_MzbtP",tableViewer:"TableEmbed-module_tableViewer_zFcBH",content:"TableEmbed-module_content_jQFtq",fadein:"TableEmbed-module_fadein_xS70U",flash:"TableEmbed-module_flash_ve9gM"};function f(e){var t=e.doc,n=e.match,r=e.tableHeight,o=e.hasReadAuditTip,i=e.showHeader?r-32:r;return t.loaded?a.a.createElement("div",{className:d.wrapper},e.showHeader&&a.a.createElement(s.a,{title:t.title,height:32,link:n&&n.url,style:{borderBottom:"1px solid rgb(217, 217, 217)"}}),a.a.createElement("div",{className:d.content},e.showHeader&&a.a.createElement(l.a.DraftTip,{doc:t,className:d.draft}),o&&a.a.createElement(u.a,{key:"audits",doc:t,type:"Doc"}),a.a.createElement("div",{className:d.tableViewer,style:{width:"100%",height:i,overflow:"hidden"}},a.a.createElement(c.a,{docId:t.id,type:t.type,abilities:t.abilities,content:t.content,format:t.format,geSheetStyle:{width:"100%",height:r}})))):null}f.defaultProps={showHeader:!0},f.propTypes={doc:i.a.object.isRequired,tableHeight:i.a.number.isRequired,match:i.a.object.isRequired,showHeader:i.a.bool,hasReadAuditTip:i.a.bool.isRequired};t.a=f},3843:function(e,t,n){"use strict";n(1715);var r=n(1940),a=n(0),o=n.n(a),i=n(79),c=n(8),l=n.n(c),s=n(1),u=n.n(s),d=n(206),f=n(34),p=n(2831),h=n(2832),m=n(2833),g=n(99),v=n(96),y={drawer:"ReviewDrawer-module_drawer_6qnGd",historyItem:"ReviewDrawer-module_historyItem_Jr41Q",card:"ReviewDrawer-module_card_Md17c",btnFold:"ReviewDrawer-module_btnFold_V2x03",btnFoldText:"ReviewDrawer-module_btnFoldText_CyWwp",isFolding:"ReviewDrawer-module_isFolding_mL2+P",isUnfolding:"ReviewDrawer-module_isUnfolding_ijwrL",h5Drawer:"ReviewDrawer-module_h5Drawer_wy-pi",historySep:"ReviewDrawer-module_historySep_7uX+R",historyIcon:"ReviewDrawer-module_historyIcon_-rCE8",foldingIcon:"ReviewDrawer-module_foldingIcon_B7TtL",btnFoldIcon:"ReviewDrawer-module_btnFoldIcon_CQTy6",fadein:"ReviewDrawer-module_fadein_-7bai",flash:"ReviewDrawer-module_flash_ICc3Y"};function b(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _="create",E="handle",C=function(e){var t=e.me,n=e.doc,r=e.dispatch,o=k(Object(a.useState)(null),2),i=o[0],c=o[1],l=k(Object(a.useState)(!1),2),s=l[0],u=l[1],f=k(Object(a.useState)(!0),2),p=f[0],h=f[1],m=k(Object(a.useState)(e.status||E),2),g=m[0],y=m[1],x=k(Object(a.useState)([]),2),_=x[0],C=x[1],O=!!(i&&i.approvers&&i.approvers.length>0)&&!!i.approvers.find((function(e){return e.id===(null==t?void 0:t.id)})),S=!!(i&&i.approvers&&i.approvers.length>0)&&!!i.approvers.find((function(e){return e.id===(null==t?void 0:t.id)&&e.isCompleted})),R=function(e){if(e){if(e.product_codes&&e.product_codes.length>0)try{e.product_codes=e.product_codes.map((function(e){return"string"==typeof e?JSON.parse(e):e}))}catch(t){e.product_codes=[]}e.name||(e.name=__("文档评审"))}},j=function(e){R(e),c(e)},P=function(e){if(e.length){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=w(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;R(r)}}catch(e){n.e(e)}finally{n.f()}C(e)}};return{state:{activeReview:i,visible:s,isFolding:p,drawerStatus:g,historyReview:_,isApprover:O,isApproverCompleted:S},resetAll:function(e){c(null),C([]),u(!1),r({type:"review/update",payload:{latestReviewStatus:null==e?void 0:e.latestReviewStatus,showReviewDrawer:(null==e?void 0:e.latestReviewStatus)===d.STATUS.active,showCreateReviewDrawer:!1}})},setDrawerStatus:y,setVisible:u,onClose:function(){return u(!1)},onVisibleChange:function(e){var t=new CustomEvent("contentSidebarVisibleChange",{detail:{visible:e,type:"review"}});window.dispatchEvent(t)},onToggleFold:function(){return h(!p)},fetchReviews:function(){(null==n?void 0:n.latestReviewStatus)<0?u(!1):v.webProxy.reviews.getReviewsByTarget({target_type:"Doc",target_id:n.id}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];y(E);var t=e.shift();j(t),P(e),(null==t?void 0:t.status)===d.STATUS.active&&u(!0),r({type:"review/update",payload:{activeReview:t,historyReview:e}})}))},updateActiveReview:function(e){j(e);var t={activeReview:e,showReviewDrawer:!0};e.status===d.STATUS.cancelled&&(t.showCreateReviewDrawer=!1),r({type:"review/update",payload:t})},createReview:function(e){y(E);var t=i?[i].concat(b(_)):_;j(e),C(t),r({type:"review/update",payload:{activeReview:e,historyReview:_,showReviewDrawer:!0,showCreateReviewDrawer:!1}})},cancelCreateReview:function(){i?y(E):u(!1)}}},O=function(e){var t=e.me,n=e.doc,i=e.review,c=window.h5,s=C(e),u=s.onClose,g=s.onVisibleChange,v=s.onToggleFold,b=s.fetchReviews,k=s.setDrawerStatus,w=s.setVisible,x=s.resetAll,O=s.state,S=O.activeReview,R=O.visible,j=O.isFolding,P=O.drawerStatus,A=O.historyReview,T=O.isApprover,D=O.isApproverCompleted;if(Object(a.useEffect)((function(){var e=!0,t=E;(null==S?void 0:S.status)!==d.STATUS.active&&(e=!1),i.showReviewDrawer&&S&&(e=!0,t=E),i.showCreateReviewDrawer&&(null==S?void 0:S.status)!==d.STATUS.active&&(e=!0,t=_),S&&"#opendrawer"===window.location.hash&&(e=!0,t=E,window.location.hash=""),w(e),k(t)}),[i]),Object(a.useEffect)((function(){i.activeReview&&x(n),b()}),[n.id]),Object(a.useEffect)((function(){g(R)}),[R]),!S&&P!==_)return null;if(window.h5&&(S.status!==d.STATUS.active||D||!T))return null;var M,N,L,I=function(){return A.map((function(e){return o.a.createElement("div",{className:y.historyItem},o.a.createElement(h.a,{isHistoryReview:!0,target:n,targetType:"Doc",review:e,isApprover:T,editable:!1,updateActiveReview:s.updateActiveReview,isMiniSize:c}))}))};return o.a.createElement(r.a,{title:P===_?__("发起评审"):__("评审"),placement:c?"bottom":"right",mask:c,zIndex:c?1e3:201,onClose:u,visible:R,className:l()(y.drawer,(M={},N=y.h5Drawer,L=c,N in M?Object.defineProperty(M,N,{value:L,enumerable:!0,configurable:!0,writable:!0}):M[N]=L,M)),width:306},o.a.createElement("div",{className:y.wrapper},S&&P===E&&o.a.createElement(o.a.Fragment,null,S.user_id===(null==t?void 0:t.id)?o.a.createElement("div",{className:y.reviewInfo,id:"active-review","data-testid":"active-review"},o.a.createElement(h.a,{target:n,targetType:"Doc",review:S,isApprover:T,editable:n.abilities.update,updateActiveReview:s.updateActiveReview,isMiniSize:c})):o.a.createElement("div",{id:"reviewForm"},o.a.createElement(m.a,{review:S,isApprover:T,updateActiveReview:s.updateActiveReview})),!!A.length&&o.a.createElement(o.a.Fragment,null,window.h5?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:y.historySep},__("历史评审")),o.a.createElement("div",null,I())):o.a.createElement(o.a.Fragment,null,o.a.createElement("a",{className:y.btnFold,onClick:v},j?o.a.createElement(f.a,{className:l()(y.btnFoldIcon,y.iconRight),name:"review-arrow-right",width:8}):o.a.createElement(f.a,{className:l()(y.btnFoldIcon,y.iconDown),name:"review-arrow-down",width:8}),o.a.createElement("span",{className:y.btnFoldText},__("历史评审"))),o.a.createElement("div",{className:j?y.isFolding:y.isUnfolding},I())))),P===_&&o.a.createElement("div",{className:y.reviewInfo},o.a.createElement(p.a,{target:n,targetType:"Doc",onCreateReview:s.createReview,onCancel:s.cancelCreateReview,isMiniSize:c}))))};O.propTypes={doc:u.a.object,me:u.a.object,dispatch:u.a.func,review:u.a.object};t.a=Object(g.b)(Object(i.c)((function(e){return{me:e.me,dispatch:e.dispatch,review:e.review,doc:e.doc}}))(O))},3844:function(e,t,n){"use strict";n(45);var r=n(18),a=n(0),o=n.n(a),i=n(1),c=n.n(i),l=n(79),s=n(8),u=n.n(s),d=n(206),f=n(34),p=n(99),h="InReviewBanner-module_wrapper_kANjy",m="InReviewBanner-module_box_bigL9",g="InReviewBanner-module_close_Af8Ns",v="InReviewBanner-module_closeIcon_emjwp",y="InReviewBanner-module_h5Box_GbZe0",b="InReviewBanner-module_btn_ZCKco";function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e){var t,n=e.review,i=e.doc,c=e.dispatch,l=e.me,s=e.showClose,p=k(Object(a.useState)((null==i?void 0:i.latestReviewStatus)>=0),2),w=p[0],x=p[1];Object(a.useEffect)((function(){(null==i?void 0:i.latestReviewStatus)>=0&&null!=n&&n.activeReview&&x(!0)}),[n,null==i?void 0:i.id]);var _=n.activeReview,E=void 0===_?{status:i.latestReviewStatus}:_;if(!w||window.h5&&E.status!==d.STATUS.active)return null;var C,O,S,R,j,P=!!(E&&E.approvers&&(null===(t=E.approvers)||void 0===t?void 0:t.length)>0)&&!!E.approvers.find((function(e){return e.id===(null==l?void 0:l.id)&&!e.isCompleted}));if(window.h5&&!P)return null;switch(E.status){case d.STATUS.accepted:C="#25B864",O=__("评审已通过");break;case d.STATUS.active:C="#1890ff",O=__("评审进行中");break;case d.STATUS.rejected:C="#ff4d4f",O=__("评审未通过");break;case d.STATUS.cancelled:C="#595959",O=__("评审已取消");break;default:return null}return o.a.createElement("div",{className:h},o.a.createElement("span",{className:u()(m,(S={},R=y,j=window.h5,R in S?Object.defineProperty(S,R,{value:j,enumerable:!0,configurable:!0,writable:!0}):S[R]=j,S)),onClick:function(){c({type:"review/update",payload:{showReviewDrawer:!0,showCreateReviewDrawer:!1}})}},o.a.createElement(f.a,{name:"review-status",width:16,style:{color:C}}),o.a.createElement("span",null,O),E.status===d.STATUS.active&&P&&window.h5&&o.a.createElement(r.a,{type:"link",className:b},__("去评审")),s&&o.a.createElement("div",{className:g,onClick:function(e){e.stopPropagation(),x(!1)}},o.a.createElement("span",{className:u()("lake-icon","lake-icon-close",v)}))))}x.propTypes={doc:c.a.object,dispatch:c.a.func,review:c.a.object,me:c.a.object,showClose:c.a.bool};t.a=Object(p.b)(Object(l.c)((function(e){return{review:e.review,dispatch:e.dispatch,doc:e.doc,me:e.me}}))(x))},3915:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),c=n(2753),l=n(2789),s=n(2790),u=n(2791),d=n(2792);function f(e){var t=e.docDomain,n=e.doc,r=n.type;return"Doc"===r?a.a.createElement(c.a,{doc:n,docDomain:t,onCancel:e.onCancel,onReverted:e.onReverted}):"Sheet"===r?a.a.createElement(l.a,{doc:n,docDomain:t,onCancel:e.onCancel,onReverted:e.onReverted}):"Mind"===r||"Board"===r?a.a.createElement(u.a,{doc:n,docDomain:t,onCancel:e.onCancel,onReverted:e.onReverted}):"Show"===r?a.a.createElement(d.a,{doc:n,docDomain:t,onCancel:e.onCancel,onReverted:e.onReverted}):"Table"===r?a.a.createElement(s.a,{doc:n,docDomain:t,onCancel:e.onCancel,onReverted:e.onReverted}):null}f.propTypes={doc:i.a.object.isRequired,docDomain:i.a.string.isRequired,onCancel:i.a.func.isRequired,onReverted:i.a.func},t.a=f},392:function(e,t,n){},3921:function(e,t,n){"use strict";t.a={loading:"index-module_loading_LY7-z",header:"index-module_header_+SmFd",content:"index-module_content_GvanO",reward:"index-module_reward_QafG4",likeLayoutMode:"index-module_likeLayoutMode_L4kPJ",lakeFallback:"index-module_lakeFallback_RSH7y",fadein:"index-module_fadein_PBllN",flash:"index-module_flash_bs87Q"}},3922:function(e,t,n){},3925:function(e,t,n){"use strict";var r=n(0),a=n(104),o=n.n(a),i=n(113),c=n(31),l=new o.a("doc:share.page.vm");t.a=function(e){var t=e.share,n=e.doc,a=e.query,o=e.dispatch;return a=i.a.normalizeReadPageQuery(a),Object(r.useEffect)((function(){t&&(l("load doc"),(window.g_prefetch&&window.g_prefetch.fetchShareDocData||c.a.docs.share({token:t.token,doc_slug:n.slug,from:window.location.href},{useOriginResp:!0})).then((function(e){l("init use: model/doc/initialize",e);var t=e.data;t&&(i.a.normalizeDoc(t),o({type:"doc/initialize",payload:e}))})))}),[]),{getQuery:function(){return a},isDocEmbed:function(){return"doc_embed"===a.view},isDocInner:function(){return"Doc"===n.type&&a.inner}}}},393:function(e,t,n){},394:function(e,t,n){},3974:function(e,t,n){"use strict";n(57);var r=n(23),a=n(0),o=n.n(a),i=n(266),c=n(79),l=n(1),s=n.n(l),u=n(351),d=n(2784),f=function(e){return Object(a.useEffect)((function(){var t=window.appData.doc,n=t.book_id,a=t.slug;return e.dispatch({type:"proxy.web/docs.findOne",payload:{data:{book_id:n,id:a}}}).then((function(t){!function(t){var n=window.appData,a=n.gotoURL,o=n.traceId;if("html"===t.format||"lakesheet_html"===t.format){var i,c;try{"lakesheet_html"===t.format?(i=Object(d.a)(t.content),c="lakesheet"):(i=Object(u.k)(t.content),c="lake")}catch(e){throw r.a.error(__("导入数据处理失败，请重新导入（如重复出现，请联系语雀客服反馈，反馈码：{traceId}）",{traceId:o}),0),e}var l={id:t.id,format:c,body_asl:i.value,draft_version:t.draft_version,save_type:"auto"};i.html&&(l.body_html=i.html),e.dispatch({type:"proxy.web/docs.updateContent",payload:{data:l}}).then((function(){e.dispatch({type:"proxy.web/docs.publish",payload:{data:{id:t.id,notify:!1,force:!0}}}).then((function(){window.location.href.includes("e2e=1")||(window.location.href=a)}))}))}else window.location.href=a}(t)})),function(){}}),[]),o.a.createElement("div",{className:"converting"},o.a.createElement("p",null,o.a.createElement(i.a,null),__("正在转换中，请稍等...")))};f.propTypes={dispatch:s.a.func};t.a=Object(c.c)((function(e){return e}))(f)},398:function(e,t,n){"use strict";(function(t){!function(t){var n=/^(b|B)$/,r={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},a={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]};function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=[],i=0,c=void 0,l=void 0,s=void 0,u=void 0,d=void 0,f=void 0,p=void 0,h=void 0,m=void 0,g=void 0,v=void 0,y=void 0,b=void 0,k=void 0,w=void 0,x=void 0,_=void 0;if(isNaN(e))throw new TypeError("Invalid number");return s=!0===t.bits,b=!0===t.unix,l=t.base||2,y=void 0!==t.round?t.round:b?1:2,p=void 0!==t.locale?t.locale:"",h=t.localeOptions||{},k=void 0!==t.separator?t.separator:"",w=void 0!==t.spacer?t.spacer:b?"":" ",_=t.symbols||{},x=2===l&&t.standard||"jedec",v=t.output||"string",d=!0===t.fullform,f=t.fullforms instanceof Array?t.fullforms:[],c=void 0!==t.exponent?t.exponent:-1,u=l>2?1e3:1024,(m=(g=Number(e))<0)&&(g=-g),(-1===c||isNaN(c))&&(c=Math.floor(Math.log(g)/Math.log(u)))<0&&(c=0),c>8&&(c=8),"exponent"===v?c:(0===g?(o[0]=0,o[1]=b?"":r[x][s?"bits":"bytes"][c]):(i=g/(2===l?Math.pow(2,10*c):Math.pow(1e3,c)),s&&(i*=8)>=u&&c<8&&(i/=u,c++),o[0]=Number(i.toFixed(c>0?y:0)),o[0]===u&&c<8&&void 0===t.exponent&&(o[0]=1,c++),o[1]=10===l&&1===c?s?"kb":"kB":r[x][s?"bits":"bytes"][c],b&&(o[1]="jedec"===x?o[1].charAt(0):c>0?o[1].replace(/B$/,""):o[1],n.test(o[1])&&(o[0]=Math.floor(o[0]),o[1]=""))),m&&(o[0]=-o[0]),o[1]=_[o[1]]||o[1],!0===p?o[0]=o[0].toLocaleString():p.length>0?o[0]=o[0].toLocaleString(p,h):k.length>0&&(o[0]=o[0].toString().replace(".",k)),"array"===v?o:(d&&(o[1]=f[c]?f[c]:a[x][c]+(s?"bit":"byte")+(1===o[0]?"":"s")),"object"===v?{value:o[0],symbol:o[1]}:o.join(w)))}o.partial=function(e){return function(t){return o(t,e)}},e.exports=o}("undefined"!=typeof window&&window)}).call(this,n(109))},3986:function(e,t,n){"use strict";var r=n(104),a=n.n(r),o=(n(57),n(23)),i=n(0),c=n(1552),l=new a.a("hook:useLoadDoc"),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.requestData,r=e.dispatch,a=n.book_id,s=n.slug,u=n.query;Object(i.useEffect)((function(){if(l("load doc: ",n),!(new c.a).isExtremeMode())return r({type:"doc/getDetail",payload:{book_id:a,slug:s,withData:{contributors:"doc_embed"!==u.view,like:"doc_embed"!==u.view,hits:"doc_embed"!==u.view,pager:"doc_embed"!==u.view,suggests:"doc_embed"!==u.view}}}).then((function(e){l("doc init done, res: ",e)})).catch((function(e){l("doc init error",e),o.a.error(e.message||__("系统异常"))})),function(){window.scrollTo(0,0)};r({type:"doc/update",payload:{loaded:!0}})}),t)},u=n(113),d=new a.a("doc:share.page.vm");t.a=function(e){var t=e.book,n=e.doc,r=e.query,a=e.slug,o=e.appData,i=e.dispatch;return r=u.a.normalizeReadPageQuery(r),d("process doc: ",a,r),s({requestData:{query:r,book_id:t.id,slug:a},dispatch:i,doc:n},[a]),{getQuery:function(){return r},isDocEmbed:function(){return"doc_embed"===r.view},isDocInner:function(){return"Doc"===n.type&&r.inner},isRenderSingleDoc:function(){return t.abilities&&!t.abilities.read},needRenderComments:function(){return n.loaded&&t.enable_comment&&!n.error},needRenderPager:function(){return n.loaded&&!o.isDocCollaborator}}}},40:function(e,t,n){"use strict";var r=n(226),a=n(0),o=n.n(a),i=n(1),c=n.n(i),l=n(8),s=n.n(l),u=n(63),d=n.n(u),f=(n(617),n(137),["className"]),p=["className"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}function y(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var b=o.a.forwardRef((function(e,t){var n=e.className,a=y(e,f),i=s()("larkui-form","larkui-legacy-form",n);return o.a.createElement(r.a,v({className:i,ref:t},a))}));b.propTypes=m(m({},r.a.CardProps),{},{className:c.a.string}),d()(b,r.a),b.Item=o.a.forwardRef((function(e,t){var n=e.className,a=y(e,p),i=s()("larkui-form-item","larkui-legacy-form-item",n);return o.a.createElement(r.a.Item,v({className:i,ref:t},a,{colon:!1}))})),t.a=b},416:function(e,t,n){"use strict";n(2071);var r=n(1721);n(586);t.a=r.a},417:function(e,t,n){"use strict";n(179);var r=n(98),a=(n(153),n(74)),o=(n(75),n(25)),i=(n(168),n(47)),c=(n(126),n(55)),l=(n(136),n(36)),s=(n(137),n(40)),u=n(0),d=n.n(u),f=n(1),p=n.n(f),h=n(488),m=n(408),g={docTask:"DocTask-module_docTask_NywmO",settingFile:"DocTask-module_settingFile_bFy51",hr:"DocTask-module_hr_y8Wz9",settingFileIcon:"DocTask-module_settingFileIcon_++xRm",settingContent:"DocTask-module_settingContent_leSlb",isFirst:"DocTask-module_isFirst_RPJNh",settingTitlt2:"DocTask-module_settingTitlt2_OZfjd",settingFileTypeName:"DocTask-module_settingFileTypeName_S4Bv1",settingFileTypeExt:"DocTask-module_settingFileTypeExt_GCoBd",fadein:"DocTask-module_fadein_p1XR6",flash:"DocTask-module_flash_PDVlQ"};function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}var y={STATUS:{INIT:"init",SETTING:"setting",PROCESSING:"processing",UPLOADING:"uploading",PENDING:"pending",DONE:"done",SUCCESS:"success",ERROR:"error"}};y.AdvanceSetting=s.a.create({name:"advanceSettingForm"})(Object(u.forwardRef)((function(e,t){var n=e.type,r=e.target,f=void 0===r?{}:r,p=e.settings,h=e.actions,m=e.title,y=e.form;if(!n)return null;var b=y.getFieldDecorator;return Object(u.useImperativeHandle)(t,(function(){return{form:y,getValue:function(){var e=y.getFieldsValue()||{};return Object.keys(e).forEach((function(t){if(Array.isArray(e[t])){var n=e[t][0];null==n?delete e[t]:e[t]=n}})),e}}})),d.a.createElement("div",{"data-testid":"docTask-".concat(n.key)},d.a.createElement(c.a,{className:g.settingFile,type:"flex",justify:"start",align:"middle"},d.a.createElement(l.a,{className:g.settingFileIcon},d.a.createElement("img",{src:n.icon,className:""})),d.a.createElement(l.a,{className:g.settingFileTypeMeta},d.a.createElement("div",{className:g.settingFileTypeName},m||f.title||f.name||n.name),d.a.createElement("div",{className:g.settingFileTypeExt},n.extensions.join(" ")))),d.a.createElement("div",{className:g.settingContent},d.a.createElement("h2",{className:g.settingTitlt2},__("高级选项")),d.a.createElement(s.a,null,p.map((function(e,t){if(Array.isArray(e)){var n=0===t?g.isFirst:"";return d.a.createElement(s.a.Item,{className:n},b(e[0].name,{initialValue:e.find((function(e){return e.default})).value})(d.a.createElement(i.a.Group,null,e.map((function(e){return d.a.createElement(i.a,{value:e.value},e.label)})))))}if("text"===e.type){var r={};return e.validator&&(e.validateOnBlur&&(r.validateTrigger=["onChange","onBlur"]),r.rules=[{validator:e.validator}]),d.a.createElement(s.a.Item,{label:e.label,colon:e.colon},b(e.name,r)(d.a.createElement(o.a,v({type:"text",autoComplete:"off",maxLength:"1000"},e))))}return d.a.createElement(s.a.Item,null,b(e.name,{initialValue:[e.default&&e.value]})(d.a.createElement(a.a.Group,null,d.a.createElement(a.a,{value:e.value},e.label))))})))),d.a.createElement("div",{className:g.settingFooter},h))}))),y.Error=function(e){return d.a.createElement("div",{className:"".concat(g.docTask," ").concat(g.docTaskError)},d.a.createElement("p",{className:"icon"},d.a.createElement(h.a,null)),d.a.createElement("p",{className:"tip"},e.tip),d.a.createElement("p",{className:"error"},e.error),d.a.createElement("p",{className:"action"},e.action))},y.Error.propTypes={tip:p.a.string,action:p.a.node,error:p.a.string},y.Success=function(e){return d.a.createElement("div",{className:"".concat(g.docTask," ").concat(g.docTaskSuccess)},d.a.createElement("p",{className:"icon"},d.a.createElement(m.a,null)),d.a.createElement("p",{className:"tip"},e.tip),d.a.createElement("p",{className:"action"},e.action))},y.Success.propTypes={tip:p.a.string,action:p.a.node},y.Processing=function(e){return d.a.createElement("div",{className:"".concat(g.docTask," ").concat(g.docTaskProcessing)},d.a.createElement(r.a,{justify:"block"}),d.a.createElement("p",{className:"tip"},d.a.createElement("span",null,e.tip)))},y.Processing.propTypes={tip:p.a.string};t.a=y},418:function(e,t,n){var r=n(1860).PAYMENT_TYPE;e.exports=function(e){var t,n=window.appData,a=e||n,o=a.group,i=a.organization,c=a.isYuque,l=a.me;return!c||(i?!((t=i).payment_type===r.free||t.payment_type===r.downgrade_free):o?o.isPaid:!(!l||!/(my\/notes)|(dashboard\/notes)/.test(window.location.pathname))&&l.isPaid)}},421:function(e,t,n){"use strict";function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o=n(27),i=n(49),c=i.ORDER_TYPE,l=i.PRICE_STAGES,s=i.PAYMENT_TYPE,u=n(127).MEMBER_RULE,d=n(107);function f(e){var t=d.TRANSITION_DEADLINE,n=d.OLD_ORGANIZATION_DEADLINE,r=o().isBefore(t),a=o(e).isBefore(n);return r&&a}e.exports=function(e){var t=e.order_type,n=e.member_size,r=void 0===n?e.max_member:n,a=e.duration,i=e.upload_size,s=e.expired_at,u=e.created_at,p=e.max_member,h=e.enableDiscount,m=void 0===h||h,g=d.ORG_UPLOAD_SIZE_MAP,v=d.OLD_ORGANIZATION_DEADLINE;if(t===c.data){var y=Object.values(g).find((function(e){return e.value===i}));if(y)return y.price}var b,k=o(u).isBefore(v),w=o(u).endOf("day").add(k?90:30,"days"),x=o().isAfter(w)?o():w;s?(b=o(s).diff(x,"days"))<0&&(b=0):b=0;var _=0,E=0;if(m&&f(u))_=12*r,E=12*p;else{var C=l.find((function(e){return e.member===r}));if(!C)return null;_=C.price;var O=l.find((function(e){return e.member===p}));if(!O)return null;E=O.price}var S=(_-E)*b/365;switch(S<0&&(S=0),t){case c.upgrade:case c.buy:return(_*a).toFixed(2);case c.renew:return(_*a+S).toFixed(2);case c.buyMember:return Math.max(S,.01).toFixed(2);default:return}},e.exports.hasDiscount=f,e.exports.getCostDetail=function(e,t,n,r,a,i){var c,s,u,f,p,h=d.OLD_ORGANIZATION_DEADLINE,m=o(e).isBefore(h),g=o(e).endOf("day").add(m?90:30,"days"),v=o().isAfter(g)?o():g;t?(c=o(t).diff(v,"days"))<0&&(c=0):c=0;var y=(l.find((function(e){return e.member===n}))||{}).price,b=(l.find((function(e){return e.member===r}))||{}).price;return y&&b?(i?(s=12*n*a,u=(12*(n-r)*c/365).toFixed(2),f=y*a,p=((y-b)*c/365).toFixed(2)):(s=y*a,u=((y-b)*c/365).toFixed(2)),{renewAmount:s,upgradeAmount:u,rawRenewAmount:f,rawUpgradeAmount:p}):{}},e.exports.getOrganizationMemberStage=function(e){var t={};if(e=e||0){var n,a=r(l);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(t=o,e<=o.member)break}}catch(e){a.e(e)}finally{a.f()}}return t.member||u.Organization[s.free].max_member},e.exports.mergeGroupExpiredAtToOrganization=function(e,t){if(e){var n=o(e);return t&&o(t).isAfter(o())&&(n=o(t).add(o(e).diff(o()),"milliseconds")),n}}},422:function(e,t,n){"use strict";var r=n(88);function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=[{key:"all",label:__("类型不限")},{key:"doc",label:__("文档#compact")},{key:"sheet",label:__("表格")},{key:"board",label:__("画板")},{key:"table",label:__("数据表")},{key:"show",label:__("演示文稿")},{key:"thread",label:__("话题")},{key:"artboard",label:__("图集")},{key:"resource",label:__("文件")}],s=[{key:"all",label:__("时间不限")},{key:"1d",label:__("24 小时内")},{key:"7d",label:__("7 天内")},{key:"30d",label:__("30 天内")},{key:"183d",label:__("半年内")}],u=[{key:"content",label:__("内容#compact")},{key:"book",label:__("知识库#compact")},{key:"topic",label:__("讨论#nav")},{key:"group",label:r.a.isPublication()?__("知识小组#nav"):__("团队#nav")},{key:"user",label:__("用户#nav")}],d={book:"book",group:"group",related:"related",public:"public",organization:"organization"},f=[{key:d.organization,label:__("空间")},{key:d.public,label:__("公开语雀")},{key:d.related,label:__("与我相关")},{key:d.group,label:r.a.isPublication()?__("当前知识小组#nav"):__("当前团队#nav")},{key:d.book,label:__("当前知识库")}],p={CONTENT_TYPES:l,TIMES:s,SEARCH_TYPES:u,SEARCH_TAB_LIST:f};function h(){return window&&window.location&&"/search"===window.location.pathname}function m(e,t){if(!e||"/"===e)return d.public;"/"===e.charAt(0)&&(e=e.slice(1));var n=o(e.split("/").map((function(e){return e.trim()})),2),r=n[0],a=void 0===r?"":r,i=n[1];return(void 0===i?"":i)||t?d.book:a?d.group:void 0}function g(e){var t,n={},r=a(e);try{for(r.s();!(t=r.n()).done;){var i=o(t.value,2),c=i[0],l=i[1];n[c]=l}}catch(e){r.e(e)}finally{r.f()}return n}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"public",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.embed,a=t.organization,o=t.group,i=t.me,c=t.share,l=t.isDocCollaborator,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"dropdown",u=i&&i.id,p=c&&c.token,h=[d.public,d.related],m=JSON.parse(JSON.stringify(f));if(n||e!==d.group||(h=[d.group]),u?([d.public,d.related].includes(e)&&(h=[d.public,d.related]),e===d.group&&(h=[d.group,d.public,d.related]),e===d.book&&(h=[d.book,d.group,d.public,d.related],(l||p)&&(h=[d.book,d.public,d.related]))):([d.public,d.related].includes(e)&&(h=[]),e===d.group&&(h=[d.group]),e===d.book&&(h=[d.book,d.group]),e===d.book&&p&&(h=[d.book])),a){var g=a.abilities&&a.abilities.read_home;h=h.map((function(e){return e===d.public?g?d.organization:null:e===d.related?g?d.related:null:e})).filter((function(e){return e})),m=m.map((function(e){return e.key===d.organization&&(e.label=a.name),e}))}return o&&(m=m.map((function(e){return e.key===d.group&&("User"===o.type?e.label=__("当前用户"):e.label=r.a.isPublication()?__("当前知识小组#nav"):__("当前团队#nav")),e}))),"dropdown"===s?h.map((function(e){return m.find((function(t){return t.key===e}))})):m.map((function(e){return h.includes(e.key)&&e})).filter((function(e){return e}))}t.a={CONTENT_TYPES:l,TIMES:s,SEARCH_TABS:d,getLabelByKey:function(e,t){return((p[e.toUpperCase()]||[]).filter((function(e){return e.key===t}))[0]||{}).label||null},getQueryByString:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.share,r={},i=new URLSearchParams(e);i.get("p")>250&&i.set("p",250);var c,l=a(i);try{for(l.s();!(c=l.n()).done;){var s=o(c.value,2),u=s[0],d=s[1];"false"!==d&&(r[u]=d)}}catch(e){l.e(e)}finally{l.f()}return n&&"Book"===n.target_type&&(r.token=n.token),r.type=r.type||"content",r.tab||(r.tab=m(r.scope,r.token)),r},gotoSearchPage:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.history,i=n.forceOpen,c=n.overwrite,l=n.handleMobileTabChange,s=h();c?e=new URLSearchParams(t):(e=s?new URLSearchParams(window.location.search):new URLSearchParams({}),Object.keys(t).forEach((function(n){e.set(n,t[n])})));var u,d=a(e);try{for(d.s();!(u=d.n()).done;){var f=o(u.value,2),p=f[0],m=f[1];"false"===m&&e.delete(p)}}catch(e){d.e(e)}finally{d.f()}return l?l(g(e)):i?window.open("/search?".concat(e.toString())):void(window.h5||s?r?r.push("/search?".concat(e.toString())):window.location.href="/search?".concat(e.toString()):window.open("/search?".concat(e.toString())))},clacTabByScope:m,getSearchTypesByTab:function(e){var t=[];return e===d.book&&(t=["content"]),e===d.group&&(t=["content","book","topic"]),e===d.public&&(t=["content","book","topic","group","user"]),[d.related,d.organization].includes(e)&&(t=["content","book","topic","group"]),u.filter((function(e){return t.includes(e.key)}))},getShowTabs:v,isSearchEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isYuque,n=e.settings,r=void 0===n?{}:n,a=e.search,o=e.share&&e.share.token;if(!a||!a.display)return!1;if(t&&!1===r.public_space_doc_search_enable)return!1;if(r&&!1===r.enable_search)return!1;var i="public";return(a.scope||o)&&(i=m(a.scope,o)),v(i,e).length>0},isSearchPage:h}},477:function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o=n(1921),i=o.RAW_EXTNAMES,c=o.IMAGE_EXTNAMES,l=o.VIDEO_EXTNAMES,s=o.AUDIO_EXTNAMES,u=o.PRESENTATION_EXTNAMES,d=o.SHEET_EXTNAMES,f=o.MMAP_EXTNAMES,p=o.ZIP_EXTNAMES,h=o.ALLOW_RESOURCE_EDIT_EXTNAMES,m=n(17).FileUtils,g=n(154),v=n(155),y="#eef4fd",b="#eef7f1",k="#f5f2fb",w="#fef8ec",x="#fcf1ec";function _(e){return!!(e=e.toLowerCase()).endsWith(".mindnode.zip")||(!!e.endsWith(".xmind.zip")||(!!e.endsWith(".mpp.zip")||!!e.endsWith(".mmap.zip")))}function E(e){return m.getFileExtname(e)}function C(e,t){if(!t||!t.ext)return!1;switch(t.ext=t.ext.toLowerCase(),e){case"raw":return i.includes(t.ext);case"image":return c.includes(t.ext);case"video":return l.includes(t.ext);case"audio":return s.includes(t.ext);case"presentation":return u.includes(t.ext);case"sheet":return d.includes(t.ext);case"rp":return["rp","rplib"].includes(t.ext);case"zip":return p.includes(t.ext);case"mmap":return f.includes(t.ext);case"ppt":return["ppt","pptx"].includes(t.ext);case"office":return[].concat(r(g),r(v)).map((function(e){return e.substr(1)})).includes(t.ext);default:return t.ext===e}}function O(e){return C("image",e)}function S(e){return C("video",e)}function R(e){return C("audio",e)}function j(e){return C("presentation",e)}function P(e){return C("sheet",e)}function A(e){return C("sketch",e)}function T(e){return C("rp",e)}function D(e){return C("pdf",e)}e.exports={isPreviewableZipFiles:_,getExtname:E,getFilename:function(e){if(!e||!e.name)return"";var t=e.name,n=t.split(".");return n.pop(),_(t)&&n.pop(),n.join(".")},isRaw:function(e){return C("raw",e)},isImage:O,isVideo:S,isAudio:R,isPresentation:j,isSheet:P,isSketch:A,isRP:T,isPDF:D,isPpt:function(e){return C("ppt",e)},isOffice:function(e){return C("office",e)},getFileIcon:function(e){if("folder"===e.type)return"file-folder";var t=e.ext;return t=t?t.toLowerCase():"",O(e)?"file-image":S(e)?"file-video":R(e)?"file-audio":["doc","docx","dot","dotx"].includes(t)?"file-word":D(e)?"file-pdf":C("txt",e)?"file-txt":["pages","md","markdown","rtf"].includes(t)?"file-doc":C("numbers",e)?"file-numbers":["xls","xlsx","xlsm","xltx","xlt"].includes(t)?"file-excel":P(e)?"file-sheet":C("key",e)?"file-keynote":j(e)?"file-ppt":["xmind","xmind.zip"].includes(t)?"file-xmind":["mindnode","mindnode.zip"].includes(t)?"file-mindnode":C("mmap",e)?"file-mindmap":A(e)?"file-sketch":T(e)?"file-axure":C("psd",e)?"file-psd":C("ai",e)?"file-ai":C("graffle",e)?"file-graffle":C("zip",e)?"file-rar":C("lake",e)?"doc-type-default":C("lakesheet",e)?"doc-type-sheet":"file-default"},allowResourceEdit:function(e){var t=e.ext||E(e);return!!t&&h.includes(t.toLowerCase())},getFileBgColor:function(e){if("folder"===e.type)return y;var t=e.ext;return t=t?t.toLowerCase():"",O(e)?w:S(e)?k:R(e)||["doc","docx","dot","dotx"].includes(t)?y:D(e)?x:C("txt",e)||["pages","md","markdown","rtf"].includes(t)?y:C("numbers",e)||["xls","xlsx","xlsm","xltx","xlt"].includes(t)||P(e)?b:C("key",e)?y:j(e)||["xmind","xmind.zip"].includes(t)?x:["mindnode","mindnode.zip"].includes(t)||C("mmap",e)?k:A(e)?w:T(e)?k:C("psd",e)?y:C("ai",e)?w:C("graffle",e)?b:C("zip",e)?k:C("lake",e)?y:C("lakesheet",e)?b:y}}},478:function(e,t,n){"use strict";n(2076);var r=n(1727);n(833);t.a=r.a},48:function(e,t,n){"use strict";n(2069);var r=n(618),a=n(0),o=n.n(a),i=n(1),c=n.n(i),l=n(8),s=n.n(l),u=n(63),d=n.n(u),f=(n(94),["children","className","transparentHead","contentType"]);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}function v(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var y=o.a.forwardRef((function(e,t){var n=e.children,a=e.className,i=e.transparentHead,c=e.contentType,l=v(e,f),u=s()("larkui-card",a,{"larkui-card-transparent-head":i,"larkui-card-with-list":"list"===c});return o.a.createElement(r.a,g({className:u,ref:t},l),n)}));y.propTypes=h(h({},r.a.CardProps),{},{className:c.a.string,children:c.a.node,transparentHead:c.a.bool,contentType:c.a.oneOf(["list"])}),d()(y,r.a),t.a=y},483:function(e,t,n){"use strict";var r=/,?([a-z]),?/gi,a=parseFloat,o=Math,i=o.PI,c=o.min,l=o.max,s=o.pow,u=o.abs,d=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/gi,f=/(-?\d*\.?\d*(?:e[-+]?\\d+)?)[\s]*,?[\s]*/gi,p=Array.isArray||function(e){return e instanceof Array};function h(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function m(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)h(e,n)&&(t[n]=m(e[n]));return t}function g(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function v(e){var t=v.ps=v.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout((function(){for(var n in t)h(t,n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])})),t[e]}function y(e,t,n,r){return 1===arguments.length&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,height:r,x2:e+n,y2:t+r}}function b(){return this.join(",").replace(r,"$1")}function k(e){var t=m(e);return t.toString=b,t}function w(e,t,n,r,a,o,i,c,l){var u=1-l,d=s(u,3),f=s(u,2),p=l*l*l,h=d*t+3*f*l*r+3*u*l*l*o+p*c;return{x:S(d*e+3*f*l*n+3*u*l*l*a+p*i),y:S(h)}}function x(e){var t=M.apply(null,e);return y(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function _(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function E(e,t,n,r,a){return e*(e*(-3*t+9*n-9*r+3*a)+6*t-12*n+6*r)-3*t+3*n}function C(e,t,n,r,a,i,c,l,s){null==s&&(s=1);for(var u=(s=s>1?1:s<0?0:s)/2,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,h=0;h<12;h++){var m=u*d[h]+u,g=E(m,e,n,a,c),v=E(m,t,r,i,l),y=g*g+v*v;p+=f[h]*o.sqrt(y)}return u*p}function O(e,t,n,r,a,o,i,s){if(!(l(e,n)<c(a,i)||c(e,n)>l(a,i)||l(t,r)<c(o,s)||c(t,r)>l(o,s))){var u=(e*r-t*n)*(o-s)-(t-r)*(a*s-o*i),d=(e-n)*(o-s)-(t-r)*(a-i);if(d){var f=S(((e*r-t*n)*(a-i)-(e-n)*(a*s-o*i))/d),p=S(u/d),h=+f.toFixed(2),m=+p.toFixed(2);if(!(h<+c(e,n).toFixed(2)||h>+l(e,n).toFixed(2)||h<+c(a,i).toFixed(2)||h>+l(a,i).toFixed(2)||m<+c(t,r).toFixed(2)||m>+l(t,r).toFixed(2)||m<+c(o,s).toFixed(2)||m>+l(o,s).toFixed(2)))return{x:f,y:p}}}}function S(e){return Math.round(1e11*e)/1e11}function R(e,t,n){if(!function(e,t){return e=y(e),_(t=y(t),e.x,e.y)||_(t,e.x2,e.y)||_(t,e.x,e.y2)||_(t,e.x2,e.y2)||_(e,t.x,t.y)||_(e,t.x2,t.y)||_(e,t.x,t.y2)||_(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}(x(e),x(t)))return n?0:[];for(var r=C.apply(0,e),a=C.apply(0,t),o=P(e)?1:~~(r/5)||1,i=P(t)?1:~~(a/5)||1,c=[],l=[],s={},d=n?0:[],f=0;f<o+1;f++){var p=w.apply(0,e.concat(f/o));c.push({x:p.x,y:p.y,t:f/o})}for(f=0;f<i+1;f++)p=w.apply(0,t.concat(f/i)),l.push({x:p.x,y:p.y,t:f/i});for(f=0;f<o;f++)for(var h=0;h<i;h++){var m,g=c[f],v=c[f+1],b=l[h],k=l[h+1],E=u(v.x-g.x)<.01?"y":"x",S=u(k.x-b.x)<.01?"y":"x",R=O(g.x,g.y,v.x,v.y,b.x,b.y,k.x,k.y);if(R){if(s[m=R.x.toFixed(9)+"#"+R.y.toFixed(9)])continue;s[m]=!0;var j=g.t+u((R[E]-g[E])/(v[E]-g[E]))*(v.t-g.t),A=b.t+u((R[S]-b[S])/(k[S]-b[S]))*(k.t-b.t);j>=0&&j<=1&&A>=0&&A<=1&&(n?d++:d.push({x:R.x,y:R.y,t1:j,t2:A}))}}return d}function j(e){var t=v(e);if(t.abs)return k(t.abs);if(p(e)&&p(e&&e[0])||(e=function(e){if(!e)return null;var t=v(e);if(t.arr)return m(t.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=[];return p(e)&&p(e[0])&&(r=m(e)),r.length||String(e).replace(d,(function(e,t,a){var o=[],i=t.toLowerCase();for(a.replace(f,(function(e,t){t&&o.push(+t)})),"m"==i&&o.length>2&&(r.push([t].concat(o.splice(0,2))),i="l",t="m"==t?"l":"L");o.length>=n[i]&&(r.push([t].concat(o.splice(0,n[i]))),n[i]););})),r.toString=v.toString,t.arr=m(r),r}(e)),!e||!e.length)return[["M",0,0]];var n,r=[],a=0,o=0,i=0,c=0,l=0;"M"==e[0][0]&&(i=a=+e[0][1],c=o=+e[0][2],l++,r[0]=["M",a,o]);for(var s,u,h=l,g=e.length;h<g;h++){if(r.push(s=[]),(n=(u=e[h])[0])!=n.toUpperCase())switch(s[0]=n.toUpperCase(),s[0]){case"A":s[1]=u[1],s[2]=u[2],s[3]=u[3],s[4]=u[4],s[5]=u[5],s[6]=+u[6]+a,s[7]=+u[7]+o;break;case"V":s[1]=+u[1]+o;break;case"H":s[1]=+u[1]+a;break;case"M":i=+u[1]+a,c=+u[2]+o;default:for(var y=1,w=u.length;y<w;y++)s[y]=+u[y]+(y%2?a:o)}else for(var x=0,_=u.length;x<_;x++)s[x]=u[x];switch(n=n.toUpperCase(),s[0]){case"Z":a=+i,o=+c;break;case"H":a=s[1];break;case"V":o=s[1];break;case"M":i=s[s.length-2],c=s[s.length-1];default:a=s[s.length-2],o=s[s.length-1]}}return r.toString=b,t.abs=k(r),r}function P(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function A(e,t,n,r){return[e,t,n,r,n,r]}function T(e,t,n,r,a,o){var i=1/3,c=2/3;return[i*e+c*n,i*t+c*r,i*a+c*n,i*o+c*r,a,o]}function D(e,t,n,r,a,c,l,s,d,f){var p,m,v=120*i/180,y=i/180*(+a||0),b=[],k=(m=function(e,t,n){return{x:e*o.cos(n)-t*o.sin(n),y:e*o.sin(n)+t*o.cos(n)}},function e(){var t=Array.prototype.slice.call(arguments,0),n=t.join("␀"),r=e.cache=e.cache||{},a=e.count=e.count||[];return h(r,n)?(g(a,n),r[n]):(a.length>=1e3&&delete r[a.shift()],a.push(n),r[n]=m.apply(0,t),r[n])});if(f)j=f[0],P=f[1],S=f[2],R=f[3];else{e=(p=k(e,t,-y)).x,t=p.y;var w=(e-(s=(p=k(s,d,-y)).x))/2,x=(t-(d=p.y))/2,_=w*w/(n*n)+x*x/(r*r);_>1&&(n*=_=o.sqrt(_),r*=_);var E=n*n,C=r*r,O=(c==l?-1:1)*o.sqrt(u((E*C-E*x*x-C*w*w)/(E*x*x+C*w*w))),S=O*n*x/r+(e+s)/2,R=O*-r*w/n+(t+d)/2,j=o.asin(((t-R)/r).toFixed(9)),P=o.asin(((d-R)/r).toFixed(9));(j=e<S?i-j:j)<0&&(j=2*i+j),(P=s<S?i-P:P)<0&&(P=2*i+P),l&&j>P&&(j-=2*i),!l&&P>j&&(P-=2*i)}var A=P-j;if(u(A)>v){var T=P,M=s,N=d;P=j+v*(l&&P>j?1:-1),b=D(s=S+n*o.cos(P),d=R+r*o.sin(P),n,r,a,0,l,M,N,[P,T,S,R])}A=P-j;var L=o.cos(j),I=o.sin(j),B=o.cos(P),z=o.sin(P),F=o.tan(A/4),U=4/3*n*F,V=4/3*r*F,q=[e,t],H=[e+U*I,t-V*L],W=[s+U*z,d-V*B],Y=[s,d];if(H[0]=2*q[0]-H[0],H[1]=2*q[1]-H[1],f)return[H,W,Y].concat(b);for(var G=[],X=0,K=(b=[H,W,Y].concat(b).join().split(",")).length;X<K;X++)G[X]=X%2?k(b[X-1],b[X],y).y:k(b[X],b[X+1],y).x;return G}function M(e,t,n,r,a,i,s,d){for(var f,p,h,m,g,v,y,b,k=[],w=[[],[]],x=0;x<2;++x)if(0==x?(p=6*e-12*n+6*a,f=-3*e+9*n-9*a+3*s,h=3*n-3*e):(p=6*t-12*r+6*i,f=-3*t+9*r-9*i+3*d,h=3*r-3*t),u(f)<1e-12){if(u(p)<1e-12)continue;0<(m=-h/p)&&m<1&&k.push(m)}else y=p*p-4*h*f,b=o.sqrt(y),y<0||(0<(g=(-p+b)/(2*f))&&g<1&&k.push(g),0<(v=(-p-b)/(2*f))&&v<1&&k.push(v));for(var _,E=k.length,C=E;E--;)_=1-(m=k[E]),w[0][E]=_*_*_*e+3*_*_*m*n+3*_*m*m*a+m*m*m*s,w[1][E]=_*_*_*t+3*_*_*m*r+3*_*m*m*i+m*m*m*d;return w[0][C]=e,w[1][C]=t,w[0][C+1]=s,w[1][C+1]=d,w[0].length=w[1].length=C+2,{x0:c.apply(0,w[0]),y0:c.apply(0,w[1]),x1:l.apply(0,w[0]),y1:l.apply(0,w[1])}}function N(e){var t=v(e);if(t.curve)return k(t.curve);for(var n=j(e),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=function(e,t,n){var r,a;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(D.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"==n||"S"==n?(r=2*t.x-t.bx,a=2*t.y-t.by):(r=t.x,a=t.y),e=["C",r,a].concat(e.slice(1));break;case"T":"Q"==n||"T"==n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(T(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(T(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(A(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(A(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(A(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(A(t.x,t.y,t.X,t.Y))}return e},i=function(e,t){if(e[t].length>7){e[t].shift();for(var r=e[t];r.length;)c[t]="A",e.splice(t++,0,["C"].concat(r.splice(0,6)));e.splice(t,1),d=n.length}},c=[],l="",s="",u=0,d=n.length;u<d;u++){n[u]&&(l=n[u][0]),"C"!=l&&(c[u]=l,u&&(s=c[u-1])),n[u]=o(n[u],r,s),"A"!=c[u]&&"C"==l&&(c[u]="C"),i(n,u);var f=n[u],p=f.length;r.x=f[p-2],r.y=f[p-1],r.bx=a(f[p-4])||r.x,r.by=a(f[p-3])||r.y}return t.curve=k(n),n}e.exports=function(e,t,n){e=N(e),t=N(t);for(var r,a,o,i,c,l,s,u,d,f,p=n?0:[],h=0,m=e.length;h<m;h++){var g=e[h];if("M"==g[0])r=c=g[1],a=l=g[2];else{"C"==g[0]?(d=[r,a].concat(g.slice(1)),r=d[6],a=d[7]):(d=[r,a,r,a,c,l,c,l],r=c,a=l);for(var v=0,y=t.length;v<y;v++){var b=t[v];if("M"==b[0])o=s=b[1],i=u=b[2];else{"C"==b[0]?(f=[o,i].concat(b.slice(1)),o=f[6],i=f[7]):(f=[o,i,o,i,s,u,s,u],o=s,i=u);var k=R(d,f,n);if(n)p+=k;else{for(var w=0,x=k.length;w<x;w++)k[w].segment1=h,k[w].segment2=v,k[w].bez1=d,k[w].bez2=f;p=p.concat(k)}}}}}return p}},494:function(e,t,n){const r=n(367),a=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case r.L:return a[4*(e-1)+0];case r.M:return a[4*(e-1)+1];case r.Q:return a[4*(e-1)+2];case r.H:return a[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case r.L:return o[4*(e-1)+0];case r.M:return o[4*(e-1)+1];case r.Q:return o[4*(e-1)+2];case r.H:return o[4*(e-1)+3];default:return}}},495:function(e,t){t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},496:function(e,t){const n="[0-9]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const a="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+")(?:.|[\r\n]))+";t.KANJI=new RegExp(r,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(a,"g"),t.NUMERIC=new RegExp(n,"g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const o=new RegExp("^"+r+"$"),i=new RegExp("^[0-9]+$"),c=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return o.test(e)},t.testNumeric=function(e){return i.test(e)},t.testAlphanumeric=function(e){return c.test(e)}},497:function(e,t){function n(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");const n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});const t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,a=e.scale||4;return{width:r,scale:r?4:a,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,n){const r=t.getScale(e,n);return Math.floor((e+2*n.margin)*r)},t.qrToImageData=function(e,n,r){const a=n.modules.size,o=n.modules.data,i=t.getScale(a,r),c=Math.floor((a+2*r.margin)*i),l=r.margin*i,s=[r.color.light,r.color.dark];for(let t=0;t<c;t++)for(let n=0;n<c;n++){let u=4*(t*c+n),d=r.color.light;if(t>=l&&n>=l&&t<c-l&&n<c-l){d=s[o[Math.floor((t-l)/i)*a+Math.floor((n-l)/i)]?1:0]}e[u++]=d.r,e[u++]=d.g,e[u++]=d.b,e[u]=d.a}}},498:function(e,t,n){},499:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(807))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},500:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(809))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},502:function(e,t,n){},507:function(e,t,n){var r=n(627),a=n(1567);for(var o in(t=e.exports=function(e,t){return new a(t).process(e)}).FilterCSS=a,r)t[o]=r[o];"undefined"!=typeof window&&(window.filterCSS=e.exports)},508:function(e,t){e.exports={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,a;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,a=e.length;r<a;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}}},509:function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},510:function(e,t,n){"use strict";n.d(t,"e",(function(){return i}));var r=n(224),a=n.n(r),o=n(2933);n.d(t,"h",(function(){return o.WORKFLOW_EVENT})),n.d(t,"g",(function(){return o.SAVE_TYPE})),n.d(t,"d",(function(){return o.ERROR_CODE})),n.d(t,"f",(function(){return o.MESSAGE})),n.d(t,"a",(function(){return o.DOC_STATUS})),n.d(t,"b",(function(){return o.EDIT_MODE})),n.d(t,"c",(function(){return o.EDIT_SCENE}));var i={edit:{key:"e",title:"E"},publish:{key:["⌘+enter","ctrl+enter"],title:a.a.mac?"⌘+Enter":"Ctrl+Enter"}};o.WORKFLOW_EVENT,o.ACTION,o.SAVE_TYPE,o.ERROR_CODE,o.MESSAGE,o.DOC_STATUS,o.NET_STATUS,o.EDIT_MODE},511:function(e,t){e.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},512:function(e,t,n){"use strict";function r(){this.__rules__=[],this.__cache__=null}r.prototype.__find__=function(e){for(var t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1},r.prototype.__compile__=function(){var e=this,t=[""];e.__rules__.forEach((function(e){e.enabled&&e.alt.forEach((function(e){t.indexOf(e)<0&&t.push(e)}))})),e.__cache__={},t.forEach((function(t){e.__cache__[t]=[],e.__rules__.forEach((function(n){n.enabled&&(t&&n.alt.indexOf(t)<0||e.__cache__[t].push(n.fn))}))}))},r.prototype.at=function(e,t,n){var r=this.__find__(e),a=n||{};if(-1===r)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=a.alt||[],this.__cache__=null},r.prototype.before=function(e,t,n,r){var a=this.__find__(e),o=r||{};if(-1===a)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a,0,{name:t,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null},r.prototype.after=function(e,t,n,r){var a=this.__find__(e),o=r||{};if(-1===a)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a+1,0,{name:t,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null},r.prototype.push=function(e,t,n){var r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null},r.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach((function(e){var r=this.__find__(e);if(r<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[r].enabled=!0,n.push(e)}),this),this.__cache__=null,n},r.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach((function(e){e.enabled=!1})),this.enable(e,t)},r.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach((function(e){var r=this.__find__(e);if(r<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[r].enabled=!1,n.push(e)}),this),this.__cache__=null,n},r.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]},e.exports=r},513:function(e,t,n){"use strict";function r(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}r.prototype.attrIndex=function(e){var t,n,r;if(!this.attrs)return-1;for(n=0,r=(t=this.attrs).length;n<r;n++)if(t[n][0]===e)return n;return-1},r.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]},r.prototype.attrSet=function(e,t){var n=this.attrIndex(e),r=[e,t];n<0?this.attrPush(r):this.attrs[n]=r},r.prototype.attrGet=function(e){var t=this.attrIndex(e),n=null;return t>=0&&(n=this.attrs[t][1]),n},r.prototype.attrJoin=function(e,t){var n=this.attrIndex(e);n<0?this.attrPush([e,t]):this.attrs[n][1]=this.attrs[n][1]+" "+t},e.exports=r},514:function(e,t,n){var r=n(353),a=n(352),o=n(270),i=n(354);e.exports=function(e){return r(e)||a(e)||o(e)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},515:function(e,t,n){"use strict";e.exports=n(1585)},517:function(e,t,n){e.exports=function(){"use strict";var e="undefined"!=typeof document&&document.documentMode,t={rootMargin:"0px",threshold:0,load:function(t){if("picture"===t.nodeName.toLowerCase()){var n=t.querySelector("img"),r=!1;null===n&&(n=document.createElement("img"),r=!0),e&&t.getAttribute("data-iesrc")&&(n.src=t.getAttribute("data-iesrc")),t.getAttribute("data-alt")&&(n.alt=t.getAttribute("data-alt")),r&&t.append(n)}if("video"===t.nodeName.toLowerCase()&&!t.getAttribute("data-src")&&t.children){for(var a=t.children,o=void 0,i=0;i<=a.length-1;i++)(o=a[i].getAttribute("data-src"))&&(a[i].src=o);t.load()}t.getAttribute("data-poster")&&(t.poster=t.getAttribute("data-poster")),t.getAttribute("data-src")&&(t.src=t.getAttribute("data-src")),t.getAttribute("data-srcset")&&t.setAttribute("srcset",t.getAttribute("data-srcset"));var c=",";if(t.getAttribute("data-background-delimiter")&&(c=t.getAttribute("data-background-delimiter")),t.getAttribute("data-background-image"))t.style.backgroundImage="url('"+t.getAttribute("data-background-image").split(c).join("'),url('")+"')";else if(t.getAttribute("data-background-image-set")){var l=t.getAttribute("data-background-image-set").split(c),s=l[0].substr(0,l[0].indexOf(" "))||l[0];s=-1===s.indexOf("url(")?"url("+s+")":s,1===l.length?t.style.backgroundImage=s:t.setAttribute("style",(t.getAttribute("style")||"")+"background-image: "+s+"; background-image: -webkit-image-set("+l+"); background-image: image-set("+l+")")}t.getAttribute("data-toggle-class")&&t.classList.toggle(t.getAttribute("data-toggle-class"))},loaded:function(){}};function n(e){e.setAttribute("data-loaded",!0)}var r=function(e){return"true"===e.getAttribute("data-loaded")},a=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return e instanceof Element?[e]:e instanceof NodeList?e:t.querySelectorAll(e)};return function(){var e,o,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".lozad",c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=Object.assign({},t,c),s=l.root,u=l.rootMargin,d=l.threshold,f=l.load,p=l.loaded,h=void 0;"undefined"!=typeof window&&window.IntersectionObserver&&(h=new IntersectionObserver((e=f,o=p,function(t,a){t.forEach((function(t){(0<t.intersectionRatio||t.isIntersecting)&&(a.unobserve(t.target),r(t.target)||(e(t.target),n(t.target),o(t.target)))}))}),{root:s,rootMargin:u,threshold:d}));for(var m,g=a(i,s),v=0;v<g.length;v++)(m=g[v]).getAttribute("data-placeholder-background")&&(m.style.background=m.getAttribute("data-placeholder-background"));return{observe:function(){for(var e=a(i,s),t=0;t<e.length;t++)r(e[t])||(h?h.observe(e[t]):(f(e[t]),n(e[t]),p(e[t])))},triggerLoad:function(e){r(e)||(f(e),n(e),p(e))},observer:h}}}()},55:function(e,t,n){"use strict";n(1922);var r=n(554);n(126);t.a=r.a},553:function(e,t,n){"use strict";var r=n(254),a=n.n(r),o=n(78),i=n.n(o),c=n(119),l=n.n(c),s=n(15),u={getExportFormats:function(){return i.a.BOOK_EXPORT_FORMATS},adaptDocTypography:function(e){if(!e.doc_typography)return{type:l.a.DOC_TYPOGRAPHY.traditional,scope:"all"};var t=e.doc_typography.split("_");return 1===t.length?{type:t[0],scope:null}:{type:t[0],scope:t[1]}},actionsForNavMore:function(e,t,n){var r=e.abilities;if(!r)return[];var a=[];return"Thread"===e.type&&a.push({action:s.a.BOOK.thread_list,can:r.read}),"Design"===e.type&&a.push({action:s.a.BOOK.manage_assets,can:r.create_doc}),a.push({action:s.a.BOOK.collaborators,can:r.create_doc}),!window.appData.isPrivateCloud&&u.isMixingType(e)&&a.push({action:s.a.BOOK.statistics,can:r.manage}),"Design"!==e.type&&a.push({action:s.a.BOOK.recycles,can:r.create_doc}),!!(window.appData.isPublicCloud&&t&&"User"===t.type&&e&&e.type&&("Book"===e.type||"Column"===e.type)&&e&&e.public)&&(a.push({action:s.a.BOOK.original}),a.push({action:s.a.BOOK.premium})),a.push({action:{cmd:"divider"}}),a.push({action:s.a.BOOK.rename_book,can:r.manage}),a.push({action:s.a.BOOK.delete_book,can:r.destroy}),a.push({action:s.a.BOOK.settings,can:r.create_doc}),a},sortByUpdatedAt:function(e,t){return new Date(e.content_updated_at)-new Date(t.content_updated_at)},sortByCreatedAt:function(e,t){return new Date(e.created_at)-new Date(t.created_at)},sortByTitle:function(e,t){return e.name.localeCompare(t.name,"zh-Hans-CN",{sensitivity:"accent"})},getBelong:function(e){var t={type:"",text:""};if(!e)return t;var n=e.user;return n?t={type:n.login,text:n.name}:t},getBelongs:function(e){var t=this,n=e.map((function(e){return t.getBelong(e)}));return(n=a()(n,"type").filter((function(e){return!!e.type}))).unshift({type:null,text:__("所有")}),n},filterByBelong:function(e,t){var n=this;return t?e.filter((function(e){return n.getBelong(e).type===t})):e},isMixingType:function(e){return!(!e||!e.type)&&l.a.MIXING_BOOK_TYPES.includes(e.type)},shouldShowTempStoreBox:function(e){var t;return null==e||null===(t=e.abilities)||void 0===t?void 0:t.create_doc}};t.a=u},559:function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return w})),n.d(t,"d",(function(){return E})),n.d(t,"b",(function(){return C})),n.d(t,"a",(function(){return S}));n(57);var r=n(23),a=n(0),o=n(78),i=n.n(o);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=function(e,t){return t.book&&Object.values(i.a.TYPE).includes(e.type)},u=function(e,t){if(!e.joinToken)return"";var n=e.joinToken;if("Doc"===n.target_type){var r=e.slug,a=t.group,o=t.book,i=t.isEditing,c="".concat(window.location.origin,"/g/").concat(a.login,"/").concat(o.slug,"/").concat(r,"/collaborator/join?token=").concat(n.token);if(i){var l="/".concat(a.login,"/").concat(o.slug,"/").concat(r,"/edit");c="".concat(c,"&goto=").concat(encodeURIComponent(l))}return c}if("Book"===n.target_type){var s=e.slug,u=t.group;return"".concat(window.location.origin,"/g/").concat(u.login,"/").concat(s,"/collaborator/join?token=").concat(n.token)}return""},d=function(e){return!e.joinToken||!!e.joinToken.approve},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(a.useState)(!1),o=c(n,2),i=o[0],l=o[1],f=Object(a.useState)(u(e,t)),p=c(f,2),h=p[0],m=p[1],g=Object(a.useState)(d(e)),v=c(g,2),y=v[0],b=v[1],k=t.dispatch,w=function(n){l(!0);var a="proxy.web/books.token",o="book/updateToken",i=e.id;s(e,t)&&(a="proxy.web/docs.genToken",o="doc/updateToken",i=e.id),k({type:a,payload:{data:{id:i,force:n},reducer:o}}).then((function(a){n&&r.a.success(__("重置链接成功")),e.joinToken=a;var o=u(e,t);m(o),b(d(e)),l(!1)}))},x=function(){return w(!0)},_=function(n){var a="proxy.web/books.updateToken",o="book/updateToken",i=e.id;s(e,t)&&(a="proxy.web/docs.updateToken",o="doc/updateToken",i=e.id),k({type:a,payload:{data:{id:i,approve:!0===n?1:0},reducer:o}}).then((function(e){r.a.success(__("更新审批状态成功")),b(n)}))};return Object(a.useEffect)((function(){e.abilities&&e.abilities.create_collaborator&&!h&&w()}),[e.id]),[h,x,i,y,_]},p=n(69),h=n.n(p),m=n(558),g=n(31);function v(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){v(o,r,a,i,c,"next",e)}function c(e){v(o,r,a,i,c,"throw",e)}i(void 0)}))}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.organization,r=Object(a.useState)(!1),o=b(r,2),i=o[0],c=o[1],l=Object(a.useState)([]),s=b(l,2),u=s[0],d=s[1],f=h()(function(){var e=y(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return c(!1),e.abrupt("return");case 3:return c(!0),r={q:t.trim(),include_unconfirmed_corp_account:!0},n&&n.id||(r.global=!0),e.prev=6,e.next=9,g.a.users.complete(r);case 9:a=e.sent,d(Object(m.format)(a));case 11:return e.prev=11,c(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[6,,11,14]])})));return function(t){return e.apply(this,arguments)}}(),50),p=function(){return d([])};return[u,f,i,p]};function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(){var e=Object(a.useState)(!1),t=x(e,2),n=t[0],r=t[1],o=Object(a.useCallback)((function(){return r((function(e){return!e}))}),[]);return[n,o]},C=function(e){return[window.location.hash==="#".concat(e),function(){window.location.hash=""}]};function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}var S=function(e,t){return function(n,r){var a=e.id,o=e.settings.homepage,i=o?o.layout:{};Object.keys(i).map((function(e){return i[e]&&i[e].length>0&&(i[e]=i[e].map((function(e){return"string"==typeof e&&e===t||"object"===O(e)&&e.type===t?{name:n,type:t}:e}))),i[e]})),g.a.groups.settings({id:a,homepage:{layout:i}}).then((function(e){r&&"function"==typeof r&&r(e)}))}}},56:function(e,t,n){n(1840)("router"),e.exports=n(232),e.exports.routerRedux=n(184)},560:function(e,t,n){"use strict";var r=n(1559),a={0:__("全部"),30:__("近30天"),365:__("近一年")},o=r.RANGE_VALUES.map((function(e){return{name:a[e],value:e}}));t.a={RANGE_MENU:o}},562:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function(e,t,n){var r=window.appData.note;if(r)return 1===r.public;e=e||window.appData.group,t=t||window.appData.book,n=n||window.appData.doc;var a=window.location.pathname.slice(1).split("/");return!(3!==a.length||"topics"!==a[1]||!/^\d+$/.test(a[2])||!e||1!==e.public)||!(!e||!t)&&(n?1===e.public&&1===t.public&&1===n.public:1===e.public&&1===t.public)},a=function(e,t,n){var r=window.appData.note;return r?1===r.public:(e=e||window.appData.share,t=t||window.appData.book,n=n||window.appData.doc,!!(e&&t&&n&&n.book_id===t.id)&&(0===e.status&&0===e.scope&&(e.target_id===n.book_id||e.target_id===n.id)))}},584:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,a.default)(t),!(n=String(n)))return e(t,4)||e(t,6);if("4"===n){if(!o.test(t))return!1;var r=t.split(".").sort((function(e,t){return e-t}));return r[3]<=255}if("6"===n){var c=t.split(":"),l=!1,s=e(c[c.length-1],4),u=s?7:8;if(c.length>u)return!1;if("::"===t)return!0;"::"===t.substr(0,2)?(c.shift(),c.shift(),l=!0):"::"===t.substr(t.length-2)&&(c.pop(),c.pop(),l=!0);for(var d=0;d<c.length;++d)if(""===c[d]&&d>0&&d<c.length-1){if(l)return!1;l=!0}else if(s&&d===c.length-1);else if(!i.test(c[d]))return!1;return l?c.length>=1:c.length===u}return!1};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/,i=/^[0-9A-F]{1,4}$/i;e.exports=t.default,e.exports.default=t.default},585:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commaDecimal=t.dotDecimal=t.arabicLocales=t.englishLocales=t.decimal=t.alphanumeric=t.alpha=void 0;var r={"en-US":/^[A-Z]+$/i,"bg-BG":/^[А-Я]+$/i,"cs-CZ":/^[A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ]+$/i,"da-DK":/^[A-ZÆØÅ]+$/i,"de-DE":/^[A-ZÄÖÜß]+$/i,"el-GR":/^[Α-ω]+$/i,"es-ES":/^[A-ZÁÉÍÑÓÚÜ]+$/i,"fr-FR":/^[A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]+$/i,"it-IT":/^[A-ZÀÉÈÌÎÓÒÙ]+$/i,"nb-NO":/^[A-ZÆØÅ]+$/i,"nl-NL":/^[A-ZÁÉËÏÓÖÜÚ]+$/i,"nn-NO":/^[A-ZÆØÅ]+$/i,"hu-HU":/^[A-ZÁÉÍÓÖŐÚÜŰ]+$/i,"pl-PL":/^[A-ZĄĆĘŚŁŃÓŻŹ]+$/i,"pt-PT":/^[A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ]+$/i,"ru-RU":/^[А-ЯЁ]+$/i,"sl-SI":/^[A-ZČĆĐŠŽ]+$/i,"sk-SK":/^[A-ZÁČĎÉÍŇÓŠŤÚÝŽĹŔĽÄÔ]+$/i,"sr-RS@latin":/^[A-ZČĆŽŠĐ]+$/i,"sr-RS":/^[А-ЯЂЈЉЊЋЏ]+$/i,"sv-SE":/^[A-ZÅÄÖ]+$/i,"tr-TR":/^[A-ZÇĞİıÖŞÜ]+$/i,"uk-UA":/^[А-ЩЬЮЯЄIЇҐі]+$/i,"ku-IQ":/^[ئابپتجچحخدرڕزژسشعغفڤقکگلڵمنوۆھەیێيطؤثآإأكضصةظذ]+$/i,ar:/^[ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ]+$/};t.alpha=r;var a={"en-US":/^[0-9A-Z]+$/i,"bg-BG":/^[0-9А-Я]+$/i,"cs-CZ":/^[0-9A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ]+$/i,"da-DK":/^[0-9A-ZÆØÅ]+$/i,"de-DE":/^[0-9A-ZÄÖÜß]+$/i,"el-GR":/^[0-9Α-ω]+$/i,"es-ES":/^[0-9A-ZÁÉÍÑÓÚÜ]+$/i,"fr-FR":/^[0-9A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]+$/i,"it-IT":/^[0-9A-ZÀÉÈÌÎÓÒÙ]+$/i,"hu-HU":/^[0-9A-ZÁÉÍÓÖŐÚÜŰ]+$/i,"nb-NO":/^[0-9A-ZÆØÅ]+$/i,"nl-NL":/^[0-9A-ZÁÉËÏÓÖÜÚ]+$/i,"nn-NO":/^[0-9A-ZÆØÅ]+$/i,"pl-PL":/^[0-9A-ZĄĆĘŚŁŃÓŻŹ]+$/i,"pt-PT":/^[0-9A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ]+$/i,"ru-RU":/^[0-9А-ЯЁ]+$/i,"sl-SI":/^[0-9A-ZČĆĐŠŽ]+$/i,"sk-SK":/^[0-9A-ZÁČĎÉÍŇÓŠŤÚÝŽĹŔĽÄÔ]+$/i,"sr-RS@latin":/^[0-9A-ZČĆŽŠĐ]+$/i,"sr-RS":/^[0-9А-ЯЂЈЉЊЋЏ]+$/i,"sv-SE":/^[0-9A-ZÅÄÖ]+$/i,"tr-TR":/^[0-9A-ZÇĞİıÖŞÜ]+$/i,"uk-UA":/^[0-9А-ЩЬЮЯЄIЇҐі]+$/i,"ku-IQ":/^[٠١٢٣٤٥٦٧٨٩0-9ئابپتجچحخدرڕزژسشعغفڤقکگلڵمنوۆھەیێيطؤثآإأكضصةظذ]+$/i,ar:/^[٠١٢٣٤٥٦٧٨٩0-9ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ]+$/};t.alphanumeric=a;var o={"en-US":".",ar:"٫"};t.decimal=o;var i=["AU","GB","HK","IN","NZ","ZA","ZM"];t.englishLocales=i;for(var c,l=0;l<i.length;l++)r[c="en-".concat(i[l])]=r["en-US"],a[c]=a["en-US"],o[c]=o["en-US"];var s=["AE","BH","DZ","EG","IQ","JO","KW","LB","LY","MA","QM","QA","SA","SD","SY","TN","YE"];t.arabicLocales=s;for(var u,d=0;d<s.length;d++)r[u="ar-".concat(s[d])]=r.ar,a[u]=a.ar,o[u]=o.ar;var f=[];t.dotDecimal=f;var p=["bg-BG","cs-CZ","da-DK","de-DE","el-GR","es-ES","fr-FR","it-IT","ku-IQ","hu-HU","nb-NO","nn-NO","nl-NL","pl-PL","pt-PT","ru-RU","sl-SI","sr-RS@latin","sr-RS","sv-SE","tr-TR","uk-UA"];t.commaDecimal=p;for(var h=0;h<f.length;h++)o[f[h]]=o["en-US"];for(var m=0;m<p.length;m++)o[p[m]]=",";r["pt-BR"]=r["pt-PT"],a["pt-BR"]=a["pt-PT"],o["pt-BR"]=o["pt-PT"],r["pl-Pl"]=r["pl-PL"],a["pl-Pl"]=a["pl-PL"],o["pl-Pl"]=o["pl-PL"]},586:function(e,t,n){},587:function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return k}));n(57);var r=n(23),a=n(0),o=n.n(a),i=n(1),c=n.n(i),l=n(175),s=function(e){var t=e.errorMessage;return o.a.createElement("div",{className:"module-error"},o.a.createElement("div",{className:"error-tip"},o.a.createElement("h3",null,__("页面出错了")),o.a.createElement("p",{"data-testid":"error-boundary-message"},t||__("页面出现问题，请尝试刷新页面"))),o.a.createElement("div",{className:"image"},o.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/ZKkHOEsUzVIHAfcVgCVV.png",alt:__("出错了")})))};function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&p(e,t)}(c,e);var t,n,a,i=h(c);function c(){var e;d(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(g(e=i.call.apply(i,[this].concat(n))),"state",{error:null,info:null}),e}return t=c,(n=[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,info:t}),this.props.isDesktopApp||this.props.noMessage||r.a.error(__("页面出错了")),e.componentStack=t?t.componentStack:"",e.from="ErrorBoundary",l.a.logError(e),window._macaca_runtime_collector&&window._macaca_runtime_collector.push({type:"onerror",data:e})}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.info,r=this.props,a=r.withFallbackUI,i=r.fallbackUI,c=r.children,l=r.errorMessage,u=r.isDesktopApp;if(t){if(a){if(u){var d=window.closeOnlineWindow?__("关闭窗口"):__("点击重新加载");return o.a.createElement("div",{"data-testid":"error-boundary-message",className:"module-error"},o.a.createElement("div",{className:"error-tip"},__("页面出现问题，"),o.a.createElement("a",{onClick:function(e){if(e.preventDefault(),window.closeOnlineWindow)return window.closeOnlineWindow();Object.keys(localStorage).filter((function(e){return e.startsWith("note/")})).map((function(e){return localStorage.removeItem(e)})),window.parent.postMessage({name:"reloadApp"},"*")}},d)))}var f=i||s;return o.a.createElement(f,{error:t,info:n,errorMessage:l})}return null}return c}}])&&f(t.prototype,n),a&&f(t,a),Object.defineProperty(t,"prototype",{writable:!1}),c}(o.a.Component);b.propTypes={withFallbackUI:c.a.bool,fallbackUI:c.a.elementType,noMessage:c.a.bool,children:c.a.node,errorMessage:c.a.string,isDesktopApp:c.a.bool};var k=function(e,t,n,r){return function(a){return o.a.createElement(b,{withFallbackUI:t,fallbackUI:n,errorMessage:r},o.a.createElement(e,a))}},w=b},588:function(e,t,n){"use strict";n(101);var r=n(26),a=n(0),o=n.n(a),i=n(1),c=n.n(i),l=n(33),s=n.n(l),u=n(34);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){return o.a.createElement("span",{className:"larkui-feature-guide-sign",style:t,onClick:e,"data-testid":"feature-guide-sign"},o.a.createElement("span",{className:"larkui-feature-guide-sign-spirit-outer"}),o.a.createElement("span",{className:"larkui-feature-guide-sign-spirit-inner"}))}function h(e){var t=e.type,n=void 0===t?"lite":t,i=e.tip,c=e.enableMultiLines,l=e.guideSignContainerStyle,f=d(Object(a.useState)(!0),2),h=f[0],m=f[1];if(!h)return null;var g=document.querySelector(e.containerSelector);if(!g)return null;var v=function(){m(!1),e.onRead()},y=function(){var t=g.querySelector(".larkui-feature-guide");if(t)return t;(t=document.createElement("div")).classList.add("larkui-feature-guide");if(t.classList.add({lite:"larkui-feature-guide-lite",mini:"larkui-feature-guide-mini"}[n]),t.setAttribute("data-testid","feature-guide"),"lite"===n){g.style.position="relative";var r=g.getBoundingClientRect();switch(e.placement){case"right":t.style.left="".concat(r.width+2,"px");break;case"left":t.style.left="-14px";break;case"top":t.style.bottom="".concat((e.offsetY?parseInt(e.offsetY,10):0)+r.height,"px"),t.style.left="".concat(r.width/2-6,"px");break;default:t.style.left="".concat((r.width-12)/2,"px"),t.style.bottom=e.offsetY||"0"}}var a=e.readTrigger||[],o=function t(n){n.target.closest(".larkui-feature-guide")&&(n.preventDefault(),n.stopPropagation()),m(!1),e.onRead(),a.forEach((function(e){g.removeEventListener(e,t)}))};return a.forEach((function(e){g.addEventListener(e,o)})),g.appendChild(t),t}(),b=p(v,l),k=c?"larkui-feature-guide-lite-close-multi-line":"larkui-feature-guide-lite-close";if("mini"===n)return s.a.createPortal(b,y);if("lite"===n){var w="center"!==e.placement&&"top"!==e.placement;return s.a.createPortal(o.a.createElement(r.a,{overlayClassName:"larkui-feature-guide-lite-tip",arrowPointAtCenter:w,autoAdjustOverflow:!1,defaultVisible:!0,title:o.a.createElement(o.a.Fragment,null,c?o.a.createElement("div",{className:"larkui-feature-guide-content",onClick:v},i):o.a.createElement("span",{className:"larkui-feature-guide-lite-content"},o.a.createElement("strong",null,i)),o.a.createElement("span",{onClick:v,className:k},o.a.createElement(u.a,{name:"feature-guide-close",width:16,height:16}))),placement:e.placement,visible:h,getPopupContainer:function(){return y},align:{targetOffset:[0,4]}},b),y)}}h.Mini=function(){return o.a.createElement("span",{className:"larkui-feature-guide-mini","data-testid":"standalone-mini-guide"},p((function(){})))},h.defaultProps={enableMultiLines:!1},h.propTypes={type:c.a.oneOf(["lite","mini"]),tip:c.a.oneOfType([c.a.string,c.a.node]),containerSelector:c.a.string.isRequired,readTrigger:c.a.array,placement:c.a.oneOf(["bottomRight","bottomLeft","bottom","right","left","top"]),offsetY:c.a.string,onRead:c.a.func.isRequired,guideSignContainerStyle:c.a.object,enableMultiLines:c.a.bool};t.a=h},590:function(e,t,n){"use strict";var r=n(650),a=n.n(r),o=n(3087),i=n(558),c=n(88),l=n(2085),s=n(3065);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){f(o,r,a,i,c,"next",e)}function c(e){f(o,r,a,i,c,"throw",e)}i(void 0)}))}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,e),g(this,"enableDepthAll",(function(){return!1})),g(this,"adpatUIListData",function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g(this,"adpatUINavData",function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g(this,"getRoles",(function(e){return Object(l.c)(e)})),g(this,"isDepartment",(function(t){return e.isDepartment(t)})),g(this,"isUser",(function(t){return e.isUser(t)})),g(this,"getRealUsers",(function(e){return e})),g(this,"getAddRoles",(function(){var e=t.getRoles(t.type),n=t.getSupportRoles();return e.filter((function(e){return n.includes(e.value)}))})),g(this,"getUserCount",(function(e){var t=0;return e.forEach((function(e){e.user_count?t+=e.user_count:t+=1})),t})),this.options=n,this.type=n.type,this.list=n.list,this.doc=n.doc,this.book=n.book,this.group=n.group,this.organization=n.organization,this.target=n[this.type],this.typeName=Object(o.a)(this.target?this.target.type:this.type),"group"===this.type&&this.target&&c.a.isPublication(this.target)&&(this.typeName=__("知识小组")),n.members&&n.members.length&&this.setUid(n.members),this.members=n.members||[],this.selected=[],this.enable=!0,this.validRoles=this.getAddRoles()}var t,n,r,u;return t=e,n=[{key:"check",value:(u=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.warn("not implement");case 1:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)})},{key:"getIconUrl",value:function(){return null}},{key:"getIconName",value:function(){return null}},{key:"setUid",value:function(e){if(e)return Array.isArray(e)?Object(i.format)(e):Object(i.formatOne)(e)}},{key:"serialize",value:function(e){var t=d(d({},e),{},{users:this.adpatUIListData(this.setUid(e.users)),navs:this.adpatUINavData(this.setUid(e.parent||e.parents))});return this.enableDepthAll()&&(void 0!==e.user_count&&(t.user_count=e.user_count),e.depthUsers&&(t.depthUsers=this.adpatUIListData(this.setUid(e.depthUsers)))),t}},{key:"serializeUserPostBody",value:function(e){var t=["id","user_id","role","login","workid","work_id","name","provider_type","provider_userid"];if(Array.isArray(e))return e.map((function(e){return a()(e,t)})).map((function(e){return e.workid=e.workid||e.work_id,e}));var n=a()(e,t);return n.workid=e.workid||e.work_id,n}},{key:"getSupportRoles",value:function(){var e=[],t=l.a[this.type];return"organization"===this.type?e=[t.member,t.outsourcer]:"group"===this.type?e=[t.member,t.readonly]:"book"===this.type||"doc"===this.type?e=[t.edit,t.readonly]:"list"===this.type&&(e=[t.member]),this.options.supportRoles||e}},{key:"getMembers",value:function(e){return e?this.members.filter((function(t){return t.role===e})):this.members}},{key:"getMemberByUser",value:function(e){return this.members?this.members.find((function(t){return Object(s.b)(t.user,e)})):null}},{key:"isOwner",value:function(){return!1}},{key:"isMember",value:function(){return!1}},{key:"isMemberOwner",value:function(){return!1}}],n&&m(t.prototype,n),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();g(v,"isDepartment",(function(e){return e.type&&"department"===e.type.toLowerCase()})),g(v,"isUser",(function(e){return!e.type||"user"===e.type.toLowerCase()})),t.a=v},599:function(e,t,n){"use strict";n(101);var r=n(26),a=(n(45),n(18)),o=n(0),i=n.n(o),c=n(1),l=n.n(c),s=n(104),u=n.n(s),d=n(516),f=n(99),p=(n(196),n(95)),h=(n(75),n(25)),m=(n(293),n(80)),g=(n(502),n(284)),v=(n(57),n(23)),y=n(8),b=n.n(y),k=n(243),w=n.n(k),x=n(140),_=n(2290);function E(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e){var t=e.version,n=e.active,r=e.withUser,a=void 0===r||r;return i.a.createElement("div",{className:b()("doc-version",{"doc-version-active":n})},i.a.createElement("div",{className:"doc-version-basic"},i.a.createElement("span",{className:"doc-version-name"},i.a.createElement(x.a,{time:t.created_at})),!t.draft&&i.a.createElement(g.a,{className:"doc-version-status"},__("已发布")),t.origin===_.ORIGIN.cache&&i.a.createElement(g.a,{className:"doc-version-status"},__("离线缓存备份"))),a&&i.a.createElement("div",{className:"doc-version-user"},t.user.name))}function R(e){var t=e.version,n=e.active,a=C(Object(o.useState)(!1),2),c=a[0],l=a[1],s=C(Object(o.useState)(!1),2),u=s[0],d=s[1],f=C(Object(o.useState)(t.name||"版本名"),2),g=f[0],v=f[1],y=C(m.a.useForm(),1)[0],k=function(){var n,r=(n=regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y.validateFields();case 3:if(r=n.sent,(a=r.name.trim())===t.name){n.next=8;break}return n.next=8,e.onUpdate(t,{name:a});case 8:v(a),l(!1),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,12]])})),function(){var e=this,t=arguments;return new Promise((function(r,a){var o=n.apply(e,t);function i(e){E(o,r,a,i,c,"next",e)}function c(e){E(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return i.a.createElement("div",{className:b()("doc-version",{"doc-version-active":n}),onMouseEnter:function(){c||d(!0)},onMouseLeave:function(){d(!1)}},i.a.createElement("div",{className:"doc-version-basic"},c?i.a.createElement(m.a,{form:y,layout:"vertical"},i.a.createElement(m.a.Item,{initialValue:g,name:"name",rules:[{required:!0,message:__("请输入版本名称")},{max:40,message:__("最多 40 个字符")}],style:{marginBottom:0}},i.a.createElement(h.a,{className:"doc-version-name-input",onPressEnter:k,onBlur:k}))):i.a.createElement("span",{className:"doc-version-name",title:g},g)),i.a.createElement("div",{className:"doc-version-time"},i.a.createElement(x.a,{time:t.created_at})),i.a.createElement("div",{className:"doc-version-user"},t.user.name),u&&i.a.createElement("div",{className:"doc-version-actions"},i.a.createElement("span",{className:"doc-version-action",onClick:function(){l(!0),d(!1)}},i.a.createElement(r.a,{title:__("修改版本名称")},i.a.createElement("span",{className:"larkicon larkicon-edit"}))),i.a.createElement(p.a,{title:__("确认删除这个版本吗？"),onConfirm:function(){e.onDelete(t)},okText:__("删除"),cancelText:__("取消"),placement:"topRight"},i.a.createElement("span",{className:"doc-version-action"},i.a.createElement(r.a,{title:__("删除该版本")},i.a.createElement("span",{className:"larkicon larkicon-delete"}))))))}S.defaultProps={withUser:!0,active:!1},S.propTypes={version:l.a.object.isRequired,active:l.a.bool,withUser:l.a.bool},R.propTypes={version:l.a.object.isRequired,active:l.a.bool,onDelete:l.a.func.isRequired,onUpdate:l.a.func.isRequired};var j={NormalVersion:S,CopyUrl:function(e){var t=e.version;return e.doc,i.a.createElement(a.a,{"data-testid":"copy-version-link",onClick:function(){w()("".concat(window.location.origin,"/r/doc_versions/").concat(t.id)),v.a.success(__("链接已复制"))}},__("复制版本链接"))},NamedVersion:R,Name:function(e){var t=e.version,n=e.category,r=e.maxWith,a=i.a.createElement(x.a,{time:t.created_at});return i.a.createElement("span",{className:"doc-version-name",style:{maxWith:r||"unset"}},"named_version"===n&&t.name||a)}};j.Name.propTypes={version:l.a.object.isRequired,category:l.a.string,maxWidth:l.a.number};var P=j,A=n(3048),T=(n(498),n(295)),D=(n(153),n(74)),M=(n(394),n(257));function N(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){L(o,r,a,i,c,"next",e)}function c(e){L(o,r,a,i,c,"throw",e)}i(void 0)}))}}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){if(e){if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var H=u()("doc:history:nav:vm");var W=function(e){var t=e.doc,n=e.docDomain,r=void 0===n?"Doc":n,a=e.defaultActiveVersion,i=e.autoActiveFirst,c=e.onVersionChange,l=e.docVersionProxy,s=e.limit;s=s||200;var u=U(Object(o.useState)("all"),2),d=u[0],f=u[1],p=U(Object(o.useState)(null),2),h=p[0],m=p[1],g=U(Object(o.useState)([]),2),v=g[0],y=g[1],b=U(Object(o.useState)(!1),2),k=b[0],w=b[1],x=U(Object(o.useState)(!0),2),_=x[0],E=x[1],C=U(Object(o.useState)({named:!1,published:!1}),2),O=C[0],S=C[1],R=function(e){S((function(t){return z(z({},t),e)}))},j=function(){var e=I(regeneratorRuntime.mark((function e(n){var a,o,i,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.named,o=n.published,i=n.offset,E(!0),c={doc_id:t.id,doc_type:r,offset:i,limit:s},a&&(c.named=!0),!a&&o&&(c.draft=0),e.next=7,l.find(c);case 7:return u=e.sent,w(u.length===s),E(!1),y((function(e){return[].concat(N(e),N(u))})),e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=I(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(null),y([]),w(!1),e.next=5,j(z(z({},O),{},{offset:0}));case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(e){m(e),c({version:e,isDefault:!1})},T=function(){var e=I(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.unname({id:t.id});case 2:H("deleteVersion success: ",t.id),n=v.findIndex((function(e){return e.id===t.id})),r=null,n===v.length-1?v.length>=2&&(r=v[0]):r=v[n+1],A(r),y(v.filter((function(e){return e.id!==t.id})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=I(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.name({id:t.id,name:n.name});case 2:H("updateVersion success:",{id:t.id,params:n}),r=N(v),a=r.findIndex((function(e){return e.id===t.id})),r.splice(a,1,z(z({},r[a]),{},{name:n.name})),y(r),c({version:z(z({},t),{},{name:n.name}),isDefault:!1});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=I(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:t=e.sent,H("initialized: ",t),t.length>0&&(a&&!h&&m(a),i&&(n=t[0],m(n),c({version:n,isDefault:!0})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){M()}),[O]),{state:{currentCategory:d,currentVersion:h,filters:O,hasMore:k,loading:_,versions:v},switchVersion:A,switchCategory:function(e){f(e),R({named:"named_version"===e,published:!1})},changePublishStatus:function(e){R({published:e})},loadMore:function(){return I(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,j(z(z({},O),{},{offset:v.length}));case 3:case"end":return e.stop()}}),e)})))()},nameVersion:D,unnameVersion:T}},Y="HistoryNavigator-module_historyNav_0uTs5",G="HistoryNavigator-module_tabs_ys1En",X="HistoryNavigator-module_search_JoWgi",K="HistoryNavigator-module_versionFilter_BaQHr",Z="HistoryNavigator-module_versions_gHGm6",$="HistoryNavigator-module_version_Oisjl",Q="HistoryNavigator-module_currentVersion_QjWMY",J="HistoryNavigator-module_namedVersions_zbDbQ",ee="HistoryNavigator-module_empty_jqTUJ",te="HistoryNavigator-module_emptyVersions_bBFPt",ne="HistoryNavigator-module_withChecked_ifTnW";function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae=u()("doc:history:nav:view");function oe(e){var t=W({doc:e.doc,defaultActiveVersion:e.defaultActiveVersion,autoActiveFirst:e.autoActiveFirst,docDomain:e.docDomain,onVersionChange:e.onVersionChange,docVersionProxy:e.docVersionProxy,limit:e.limit}),n=t.state,r=n.versions,a=n.currentVersion,c=n.currentCategory,l=n.filters,s=n.loading;ae(t.state);return Object(o.useEffect)((function(){e.forceActiveCategory&&(ae("category change to named_version, force switch tab"),t.switchCategory(e.forceActiveCategory))}),[e.forceActiveCategory]),i.a.createElement("div",{"data-testid":e["data-testid"],className:b()(Y,e.className,re({},ne,e.withChecked))},e.withSearch&&i.a.createElement("div",{className:X},i.a.createElement(h.a.Search,{placeholder:__("搜索")})),i.a.createElement(M.a,{activeKey:c,className:G,onChange:function(n){t.switchCategory(n),e.onTabChange(n)}},i.a.createElement(M.a.TabPane,{tab:__("全部记录"),key:"all"}),i.a.createElement(M.a.TabPane,{tab:__("版本"),key:"named_version"}),";"),e.withVersionFilter&&!l.named&&i.a.createElement("div",{className:K},i.a.createElement(D.a,{defaultChecked:!1,onChange:function(e){t.changePublishStatus(e.target.checked)}},__("仅显示已发布的历史记录"))),!s&&0===r.length&&i.a.createElement("div",{className:ee},"named_version"===c?i.a.createElement("ul",{className:te},i.a.createElement("li",null,i.a.createElement("img",{width:"86",height:"70",src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*R-ANSYTea6kAAAAAAAAAAAAAARQnAQ"})),i.a.createElement("li",null,__("暂无版本记录")),i.a.createElement("li",null,i.a.createElement("a",{href:"https://www.yuque.com/yuque/thyzgp/fs0x2z",target:"_blank"},__("使用帮助")))):i.a.createElement("span",null,__("暂无记录"))),r.length>0&&i.a.createElement("div",{className:b()(Z,re({},J,l.named))},i.a.createElement(T.a,{justify:"block",bordered:!1,split:!1,dataSource:r,renderItem:function(n){return i.a.createElement("div",{"data-version":"".concat(n.id),onClick:function(){a&&n.id===a.id?"function"==typeof e.onVersionDeselect&&(e.onVersionDeselect(n),t.switchVersion(null)):t.switchVersion(n)}},function(n){var r=a&&a.id===n.id;if("function"==typeof e.renderVersion)return e.renderVersion({version:n,active:r,named:l.named});var o=null;return o="named_version"===c?i.a.createElement(P.NamedVersion,{version:n,active:r,onDelete:t.unnameVersion,onUpdate:t.nameVersion}):i.a.createElement(P.NormalVersion,{version:n,active:r,withUser:!0}),i.a.createElement("div",{className:b()($,re({},Q,r))},o)}(n))},loading:s,showLoadingMore:t.state.hasMore,onLoadMore:t.loadMore})))}oe.defaultProps={defaultActiveVersion:null,autoActiveFirst:!0,withSearch:!1,withVersionFilter:!1,onTabChange:function(){}},oe.propTypes={"data-testid":l.a.string,className:l.a.string,doc:l.a.object.isRequired,docDomain:l.a.string.isRequired,forceActiveCategory:l.a.oneOf(["all","named_version"]),defaultActiveVersion:l.a.object,autoActiveFirst:l.a.bool,withSearch:l.a.bool,withVersionFilter:l.a.bool,withChecked:l.a.bool,onVersionChange:l.a.func.isRequired,onVersionDeselect:l.a.func,onTabChange:l.a.func,renderVersion:l.a.func,docVersionProxy:l.a.object.isRequired,limit:l.a.number};var ie=oe,ce=(n(195),n(121)),le=n(407),se=n(326),ue="VersionToolbar-module_toolbar_jTI6g",de="VersionToolbar-module_toolbarActions_43Fcf",fe="VersionToolbar-module_diffHead_7EP0a",pe="VersionToolbar-module_diffBase_ylwWT",he="VersionToolbar-module_diffPlaceholder_iPfAA",me="VersionToolbar-module_diffWith_FI0JB",ge="VersionToolbar-module_diffTip_nQ9S2",ve="VersionToolbar-module_diffTipAdd_fjXD0",ye="VersionToolbar-module_diffTipDelete_VzJsd",be="VersionToolbar-module_versionSelector_lPRPy",ke="VersionToolbar-module_versionSelectorHistoryNav_f4rcN",we="VersionToolbar-module_version_tDu5-",xe="VersionToolbar-module_selectedVersion_Odsmy";function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ce=u()("doc:history:toolbar");function Oe(e){var t=e.doc,n=e.headVersion,r=_e(Object(o.useState)("all"),2),a=r[0],c=r[1],l=_e(Object(o.useState)(null),2),s=l[0],u=l[1],d=_e(Object(o.useState)(!1),2),f=d[0],p=d[1],h=function(t){"content"===t?(e.showContent(n),u(null)):e.showDiff(n,s)};return Ce("select version:",s),i.a.createElement("div",{className:"".concat(ue," ").concat(e.className||""),"data-testid":"version-toolbar"},i.a.createElement("div",{className:de},i.a.createElement(g.a,{className:fe,onClick:function(){h("content")},"data-testid":"diff-head"},i.a.createElement(P.Name,{version:n,category:e.navigatorCategory,maxWidth:160})),i.a.createElement("span",{className:me},__("与#doc_version_diff")),i.a.createElement(ce.a,{noArrow:!0,placement:"bottomLeft",trigger:["click"],overlayClassName:be,content:i.a.createElement(ie,{"data-testid":"diff-history-nav",className:ke,doc:t,docDomain:e.docDomain,autoActiveFirst:!1,withVersionFilter:!0,withChecked:!0,defaultActiveVersion:null,onVersionChange:function(t){var r=t.version;t.isDefault?Ce("vision change, caused by default, ignore"):(p(!1),u(r),e.showDiff(n,r))},onVersionDeselect:function(){h("content")},onTabChange:function(e){c(e)},renderVersion:function(e){var t=e.version,n=e.active,r=null;return r="named_version"===a?i.a.createElement("span",null,t.name):i.a.createElement(P.NormalVersion,{version:t,active:n,withUser:!1}),i.a.createElement("div",{className:we},n&&i.a.createElement("div",{className:xe},i.a.createElement(le.a,null)),r)},docVersionProxy:e.docVersionProxy}),visible:f,onVisibleChange:p},i.a.createElement(g.a,{className:pe},i.a.createElement("span",{"data-testid":"diff-version-selector-trigger"},s?i.a.createElement(P.Name,{version:s,category:a,maxWidth:128}):i.a.createElement("span",{className:he},__("请选择历史")),i.a.createElement(se.a,{style:{marginLeft:"8px"}})))),__("对比#doc_version_diff")),s&&i.a.createElement("div",{className:ge},i.a.createElement(g.a,{className:ve},__("增加的内容")),i.a.createElement(g.a,{className:ye},__("删除的内容"))))}Oe.propTypes={className:l.a.string,doc:l.a.object.isRequired,docDomain:l.a.oneOf(["Doc","Doclet"]),navigatorCategory:l.a.oneOf(["all","named_version"]),headVersion:l.a.object.isRequired,showContent:l.a.func.isRequired,showDiff:l.a.func.isRequired,docVersionProxy:l.a.object.isRequired};var Se=Object(f.b)(Oe,!0);function Re(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function je(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Re(o,r,a,i,c,"next",e)}function c(e){Re(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Te=u()("doc:history:viewer:vm");var De=function(e){var t=e.doc,n=e.docType,r=e.docDomain,a=e.onRevert,i=e.onReverted,c=e.docVersionProxy,l=e.docProxy,s=e.docletProxy,u=Object(o.useRef)({}),d=Pe(Object(o.useState)(null),2),f=d[0],p=d[1],h=Pe(Object(o.useState)(null),2),m=h[0],g=h[1],y=Pe(Object(o.useState)(null),2),b=y[0],k=y[1],w=Pe(Object(o.useState)("content"),2),x=w[0],_=w[1],E=Pe(Object(o.useState)("all"),2),C=E[0],O=E[1],S=Pe(Object(o.useState)(null),2),R=S[0],j=S[1],P=function(){var e=je(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.current[t]){e.next=2;break}return e.abrupt("return",u.current[t]);case 2:return e.next=4,c.findOne({id:t});case 4:return n=e.sent,u.current[t]=n,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=je(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Te("vm.showContent:",t),_("content"),e.next=4,P(t.id);case 4:n=e.sent,g(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=je(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Te("vm.showDiff:",{head:t,base:n}),n){e.next=3;break}return e.abrupt("return");case 3:return _("diff"),e.next=6,P(n.id);case 6:r=e.sent,k(r);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){g(null),p(null),_("content")},M=function(){var e=je(regeneratorRuntime.mark((function e(n){var o,c,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=d.length>1&&void 0!==d[1]&&d[1],Te("on revert:",n),"function"!=typeof a){e.next=6;break}return c=u.current[n.id],a(c),e.abrupt("return");case 6:if(e.prev=6,"Doclet"!==r){e.next=12;break}return e.next=10,s.rollback({id:t.id,version_id:n.id});case 10:e.next=14;break;case 12:return e.next=14,l.rollback({id:t.id,version_id:n.id,force:o});case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(6),"LockedByOther"===e.t0.code?v.a.error(__("有其它用户正在编辑，恢复可能会导致对方编辑的内容丢失，请联系他们退出编辑后再进行恢复")):"LockedBeMe"===e.t0.code?v.a.error(e.t0.message):v.a.error(__("你正在其它浏览器窗口编辑该文档，请关闭窗口再进行恢复")),e.abrupt("return");case 20:Te("reverted to ",n),"function"==typeof i?i(n):v.a.success(__("恢复成功，你可以进入编辑页发布文档"));case 22:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t){return e.apply(this,arguments)}}();return{state:{currentVersion:f,currentVersionDetail:m,baseVersionDetail:b,currentNavigatorCategory:C,forceActiveCategory:R,currentView:x},switchVersion:function(e){return je(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.version,Te("vm.switchVersion: ",{version:n}),D(),!n){t.next=7;break}return p(n),t.next=7,A(n);case 7:case"end":return t.stop()}}),t)})))()},switchNavigatorCategory:function(e){var t=e.category,n=e.force;Te("vm.switchNavigatorCategory: ",{category:t,force:n}),O(t),n&&j(t),D()},isReadyToDisplayDiff:function(){return"diff"===x&&b},showContent:A,showDiff:T,showAction:"Table"!==n,revert:M}},Me=n(2280),Ne=u()("doc:history:viewer");function Le(e){var t=e.layout,n=e.doc,c=e.docDomain,l=De({doc:e.doc,docDomain:e.docDomain,docType:e.docType,onRevert:e.onRevert,onReverted:e.onReverted,docVersionProxy:e.docVersionProxy,docProxy:e.docProxy,docletProxy:e.docletProxy}),s=l.state,u=s.currentVersion,p=s.currentVersionDetail,h=s.currentNavigatorCategory,m=s.forceActiveCategory,g=s.currentView,v=s.baseVersionDetail;Object(o.useEffect)((function(){return document.body.style.overflow="hidden",function(){document.body.style.removeProperty("overflow")}}),[]),Ne("render",l.state);var y,b,k;return i.a.createElement("div",{className:"".concat(Me.a[t]," ").concat(e.className||""),"data-testid":"history-viewer"},i.a.createElement("div",{className:Me.a.head},i.a.createElement("div",{className:Me.a.headNav},i.a.createElement(d.a,{"data-testid":"history-back",className:Me.a.back,onClick:e.onCancel}),i.a.createElement("span",{className:Me.a.pageTitle},__("历史记录"))),l.showAction&&i.a.createElement("div",{className:Me.a.headActions},u?u.name?i.a.createElement(i.a.Fragment,null,"all"===h&&i.a.createElement("span",{className:Me.a.versionNameTip},__("已存为版本："),i.a.createElement("span",{className:Me.a.versionName},u.name)),"Doc"===c&&i.a.createElement(P.CopyUrl,{version:u})):i.a.createElement(A.a,{version:u,docVersionProxy:e.docVersionProxy,onCreated:function(e){Ne("named version created:",e),l.switchNavigatorCategory({category:"named_version",force:!0})}}):null,(y=!(p&&p.content),b="named_version"===h?__("恢复此版本"):__("恢复此记录"),k=i.a.createElement(a.a,{"data-testid":"history-revert",type:"primary",onClick:function(){l.revert(u)},disabled:y},b),y?i.a.createElement(r.a,{title:__("内容为空，无需恢复")},k):k))),i.a.createElement(f.a,{withFallbackUI:!0},i.a.createElement("div",{className:Me.a.body},i.a.createElement("div",{className:Me.a.aside,"data-testid":"history-aside-nav"},i.a.createElement(ie,{"data-testid":"main-history-nav",doc:n,docDomain:e.docDomain,autoActiveFirst:!0,withVersionFilter:!0,forceActiveCategory:m,docVersionProxy:e.docVersionProxy,onVersionChange:l.switchVersion,onTabChange:function(e){l.switchNavigatorCategory({category:e,force:!1})},limit:e.limit})),i.a.createElement("div",{className:Me.a.main},p&&i.a.createElement("div",{className:"Doc"===n.type?Me.a.fixed:Me.a.adapt},"Doc"===n.type&&i.a.createElement("div",{className:Me.a.toolbar},i.a.createElement(Se,{key:u.id,doc:n,docDomain:e.docDomain,navigatorCategory:h,headVersion:u,showContent:l.showContent,showDiff:l.showDiff,docVersionProxy:e.docVersionProxy})),i.a.createElement("div",{className:"".concat(Me.a.content),"data-testid":"history-content"},i.a.createElement("div",{className:"".concat(Me.a.document," ").concat(Me.a[n.type.toLowerCase()])},"content"===g&&e.renderVersion(p),l.isReadyToDisplayDiff()&&e.renderDiff(p,v))))))))}Le.defaultProps={layout:"fullscreen",docDomain:"Doc",limit:200},Le.propTypes={layout:l.a.oneOf(["fullscreen"]),className:l.a.string,doc:l.a.object.isRequired,docDomain:l.a.oneOf(["Doc","Doclet"]),renderVersion:l.a.func.isRequired,renderDiff:l.a.func.isRequired,onCancel:l.a.func.isRequired,onRevert:l.a.func,onReverted:l.a.func,docProxy:l.a.object.isRequired,docletProxy:l.a.object.isRequired,docVersionProxy:l.a.object.isRequired,limit:l.a.number};t.a=Object(f.b)(Le,!0)},60:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!("string"==typeof e||e instanceof String)){var t;throw t=null===e?"null":"object"===(t=r(e))&&e.constructor&&e.constructor.hasOwnProperty("name")?e.constructor.name:"a ".concat(t),new TypeError("Expected string but received ".concat(t,"."))}},e.exports=t.default,e.exports.default=t.default},616:function(e,t,n){},619:function(e,t,n){},621:function(e,t,n){e.exports=function(){"use strict";function e(e,t,n){(n=n||{}).childrenKeyName=n.childrenKeyName||"children";var r=e||[],a=[],o=0;do{var i=r.filter((function(e){return t(e,o)}))[0];if(!i)break;a.push(i),r=i[n.childrenKeyName]||[],o+=1}while(r.length>0);return a}return e}()},625:function(e,t){e.exports=function(e,t,n,r){var a=e.transformX=function(e,o){n(e),n(o);for(var i,c,l,s=[],u=0;u<o.length;u++){for(var d=o[u],f=[],p=0;p<e.length;){var h=[];if(i=e[p],l=h,t(f,i,c=d,"left"),t(l,c,i,"right"),p++,1!==h.length){if(0===h.length){for(var m=p;m<e.length;m++)r(f,e[m]);d=null;break}for(var g=a(e.slice(p),h),v=0;v<g[0].length;v++)r(f,g[0][v]);for(var y=0;y<g[1].length;y++)r(s,g[1][y]);d=null;break}d=h[0]}null!=d&&r(s,d),e=f}return[e,s]};e.transform=function(e,n,r){if("left"!==r&&"right"!==r)throw new Error("type must be 'left' or 'right'");return 0===n.length?e:1===e.length&&1===n.length?t([],e[0],n[0],r):"left"===r?a(e,n)[0]:a(n,e)[1]}}},626:function(e,t,n){var r=n(507).FilterCSS,a=n(507).getDefaultWhiteList,o=n(508);function i(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var c=new r;function l(e){return e.replace(s,"&lt;").replace(u,"&gt;")}var s=/</g,u=/>/g,d=/"/g,f=/&quot;/g,p=/&#([a-zA-Z0-9]*);?/gim,h=/&colon;?/gim,m=/&newline;?/gim,g=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,v=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,y=/u\s*r\s*l\s*\(.*/gi;function b(e){return e.replace(d,"&quot;")}function k(e){return e.replace(f,'"')}function w(e){return e.replace(p,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function x(e){return e.replace(h,":").replace(m," ")}function _(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return o.trim(t)}function E(e){return e=_(e=x(e=w(e=k(e))))}function C(e){return e=l(e=b(e))}t.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},t.getDefaultWhiteList=i,t.onTag=function(e,t,n){},t.onIgnoreTag=function(e,t,n){},t.onTagAttr=function(e,t,n){},t.onIgnoreTagAttr=function(e,t,n){},t.safeAttrValue=function(e,t,n,r){if(n=E(n),"href"===t||"src"===t){if("#"===(n=o.trim(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"data:image/"!==n.substr(0,11)&&"ftp://"!==n.substr(0,6)&&"./"!==n.substr(0,2)&&"../"!==n.substr(0,3)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===t){if(g.lastIndex=0,g.test(n))return""}else if("style"===t){if(v.lastIndex=0,v.test(n))return"";if(y.lastIndex=0,y.test(n)&&(g.lastIndex=0,g.test(n)))return"";!1!==r&&(n=(r=r||c).process(n))}return n=C(n)},t.escapeHtml=l,t.escapeQuote=b,t.unescapeQuote=k,t.escapeHtmlEntities=w,t.escapeDangerHtml5Entities=x,t.clearNonPrintableCharacter=_,t.friendlyAttrValue=E,t.escapeAttrValue=C,t.onIgnoreTagStripAll=function(){return""},t.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var n=!Array.isArray(e),r=[],a=!1;return{onIgnoreTag:function(i,c,l){if(function(t){return!!n||-1!==o.indexOf(e,t)}(i)){if(l.isClosing){var s="[/removed]",u=l.position+s.length;return r.push([!1!==a?a:l.position,u]),a=!1,s}return a||(a=l.position),"[removed]"}return t(i,c,l)},remove:function(e){var t="",n=0;return o.forEach(r,(function(r){t+=e.slice(n,r[0]),n=r[1]})),t+=e.slice(n)}}},t.stripCommentTag=function(e){for(var t="",n=0;n<e.length;){var r=e.indexOf("\x3c!--",n);if(-1===r){t+=e.slice(n);break}t+=e.slice(n,r);var a=e.indexOf("--\x3e",r);if(-1===a)break;n=a+3}return t},t.stripBlankChar=function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))}))).join("")},t.cssFilter=c,t.getDefaultCSSWhiteList=a},627:function(e,t){function n(){var e={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return e}var r=/javascript\s*\:/gim;t.whiteList=n(),t.getDefaultWhiteList=n,t.onAttr=function(e,t,n){},t.onIgnoreAttr=function(e,t,n){},t.safeAttrValue=function(e,t){return r.test(t)?"":t}},628:function(e,t){e.exports={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,a;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,a=e.length;r<a;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}}},629:function(e,t,n){var r=n(508);function a(e){var t=r.spaceIndex(e);if(-1===t)var n=e.slice(1,-1);else n=e.slice(1,t+1);return"/"===(n=r.trim(n).toLowerCase()).slice(0,1)&&(n=n.slice(1)),"/"===n.slice(-1)&&(n=n.slice(0,-1)),n}function o(e){return"</"===e.slice(0,2)}var i=/[^a-zA-Z0-9_:\.\-]/gim;function c(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"="===n?t:-1}}function l(e,t){for(;t>0;t--){var n=e[t];if(" "!==n)return"="===n?t:-1}}function s(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}t.parseTag=function(e,t,n){"use strict";var r="",i=0,c=!1,l=!1,s=0,u=e.length,d="",f="";e:for(s=0;s<u;s++){var p=e.charAt(s);if(!1===c){if("<"===p){c=s;continue}}else if(!1===l){if("<"===p){r+=n(e.slice(i,s)),c=s,i=s;continue}if(">"===p){r+=n(e.slice(i,c)),d=a(f=e.slice(c,s+1)),r+=t(c,r.length,d,f,o(f)),i=s+1,c=!1;continue}if('"'===p||"'"===p)for(var h=1,m=e.charAt(s-h);""===m.trim()||"="===m;){if("="===m){l=p;continue e}m=e.charAt(s-++h)}}else if(p===l){l=!1;continue}}return i<e.length&&(r+=n(e.substr(i))),r},t.parseAttr=function(e,t){"use strict";var n=0,a=[],o=!1,u=e.length;function d(e,n){if(!((e=(e=r.trim(e)).replace(i,"").toLowerCase()).length<1)){var o=t(e,n||"");o&&a.push(o)}}for(var f=0;f<u;f++){var p,h=e.charAt(f);if(!1!==o||"="!==h)if(!1===o||f!==n||'"'!==h&&"'"!==h||"="!==e.charAt(f-1))if(/\s|\n|\t/.test(h)){if(e=e.replace(/\s|\n|\t/g," "),!1===o){if(-1===(p=c(e,f))){d(r.trim(e.slice(n,f))),o=!1,n=f+1;continue}f=p-1;continue}if(-1===(p=l(e,f-1))){d(o,s(r.trim(e.slice(n,f)))),o=!1,n=f+1;continue}}else;else{if(-1===(p=e.indexOf(h,f+1)))break;d(o,r.trim(e.slice(n+1,p))),o=!1,n=(f=p)+1}else o=e.slice(n,f),n=f+1}return n<e.length&&(!1===o?d(e.slice(n)):d(o,s(r.trim(e.slice(n))))),r.trim(a.join(" "))}},630:function(e,t,n){"use strict";e.exports=function(e,t,n,r){for(var a=65535&e|0,o=e>>>16&65535|0,i=0;0!==n;){n-=i=n>2e3?2e3:n;do{o=o+(a=a+t[r++]|0)|0}while(--i);a%=65521,o%=65521}return a|o<<16|0}},631:function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,a){var o=r,i=a+n;e^=-1;for(var c=a;c<i;c++)e=e>>>8^o[255&(e^t[c])];return-1^e}},632:function(e,t,n){"use strict";var r=n(244),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var i=new r.Buf8(256),c=0;c<256;c++)i[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;function l(e,t){if(t<65534&&(e.subarray&&o||!e.subarray&&a))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n}i[254]=i[254]=1,t.string2buf=function(e){var t,n,a,o,i,c=e.length,l=0;for(o=0;o<c;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<c&&56320==(64512&(a=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(a-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(l),i=0,o=0;i<l;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<c&&56320==(64512&(a=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(a-56320),o++),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|63&n):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t},t.buf2binstring=function(e){return l(e,e.length)},t.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,a=t.length;n<a;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,r,a,o,c=t||e.length,s=new Array(2*c);for(r=0,n=0;n<c;)if((a=e[n++])<128)s[r++]=a;else if((o=i[a])>4)s[r++]=65533,n+=o-1;else{for(a&=2===o?31:3===o?15:7;o>1&&n<c;)a=a<<6|63&e[n++],o--;o>1?s[r++]=65533:a<65536?s[r++]=a:(a-=65536,s[r++]=55296|a>>10&1023,s[r++]=56320|1023&a)}return l(s,r)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+i[e[n]]>t?n:t}},633:function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},634:function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},635:function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;this.queue=[],this.cache=null}r.prototype.matrix=function(e){return 1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&0===e[4]&&0===e[5]||(this.cache=null,this.queue.push(e)),this},r.prototype.translate=function(e,t){return 0===e&&0===t||(this.cache=null,this.queue.push([1,0,0,1,e,t])),this},r.prototype.scale=function(e,t){return 1===e&&1===t||(this.cache=null,this.queue.push([e,0,0,t,0,0])),this},r.prototype.rotate=function(e,t,n){var r,a,o;return 0!==e&&(this.translate(t,n),r=e*Math.PI/180,a=Math.cos(r),o=Math.sin(r),this.queue.push([a,o,-o,a,0,0]),this.cache=null,this.translate(-t,-n)),this},r.prototype.skewX=function(e){return 0!==e&&(this.cache=null,this.queue.push([1,0,Math.tan(e*Math.PI/180),1,0,0])),this},r.prototype.skewY=function(e){return 0!==e&&(this.cache=null,this.queue.push([1,Math.tan(e*Math.PI/180),0,1,0,0])),this},r.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],1===this.queue.length)return this.cache;for(var e=1;e<this.queue.length;e++)this.cache=(t=this.cache,n=this.queue[e],[t[0]*n[0]+t[2]*n[1],t[1]*n[0]+t[3]*n[1],t[0]*n[2]+t[2]*n[3],t[1]*n[2]+t[3]*n[3],t[0]*n[4]+t[2]*n[5]+t[4],t[1]*n[4]+t[3]*n[5]+t[5]]);var t,n;return this.cache},r.prototype.calc=function(e,t,n){var r;return this.queue.length?(this.cache||(this.cache=this.toArray()),[e*(r=this.cache)[0]+t*r[2]+(n?0:r[4]),e*r[1]+t*r[3]+(n?0:r[5])]):[e,t]},e.exports=r},637:function(e,t,n){"use strict";e.exports=n(1591)},638:function(e,t,n){"use strict";e.exports.encode=n(1593),e.exports.decode=n(1594),e.exports.format=n(1595),e.exports.parse=n(1596)},639:function(e,t){e.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},640:function(e,t){e.exports=/[\0-\x1F\x7F-\x9F]/},641:function(e,t){e.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},642:function(e,t,n){"use strict";var r="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",a="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",o=new RegExp("^(?:"+r+"|"+a+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?].*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),i=new RegExp("^(?:"+r+"|"+a+")");e.exports.HTML_TAG_RE=o,e.exports.HTML_OPEN_CLOSE_TAG_RE=i},643:function(e,t,n){"use strict";e.exports.tokenize=function(e,t){var n,r,a,o,i=e.pos,c=e.src.charCodeAt(i);if(t)return!1;if(126!==c)return!1;if(a=(r=e.scanDelims(e.pos,!0)).length,o=String.fromCharCode(c),a<2)return!1;for(a%2&&(e.push("text","",0).content=o,a--),n=0;n<a;n+=2)e.push("text","",0).content=o+o,e.delimiters.push({marker:c,jump:n,token:e.tokens.length-1,level:e.level,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0},e.exports.postProcess=function(e){var t,n,r,a,o,i=[],c=e.delimiters,l=e.delimiters.length;for(t=0;t<l;t++)126===(r=c[t]).marker&&-1!==r.end&&(a=c[r.end],(o=e.tokens[r.token]).type="s_open",o.tag="s",o.nesting=1,o.markup="~~",o.content="",(o=e.tokens[a.token]).type="s_close",o.tag="s",o.nesting=-1,o.markup="~~",o.content="","text"===e.tokens[a.token-1].type&&"~"===e.tokens[a.token-1].content&&i.push(a.token-1));for(;i.length;){for(n=(t=i.pop())+1;n<e.tokens.length&&"s_close"===e.tokens[n].type;)n++;t!==--n&&(o=e.tokens[n],e.tokens[n]=e.tokens[t],e.tokens[t]=o)}}},644:function(e,t,n){"use strict";e.exports.tokenize=function(e,t){var n,r,a=e.pos,o=e.src.charCodeAt(a);if(t)return!1;if(95!==o&&42!==o)return!1;for(r=e.scanDelims(e.pos,42===o),n=0;n<r.length;n++)e.push("text","",0).content=String.fromCharCode(o),e.delimiters.push({marker:o,length:r.length,jump:n,token:e.tokens.length-1,level:e.level,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0},e.exports.postProcess=function(e){var t,n,r,a,o,i,c=e.delimiters;for(t=e.delimiters.length-1;t>=0;t--)95!==(n=c[t]).marker&&42!==n.marker||-1!==n.end&&(r=c[n.end],i=t>0&&c[t-1].end===n.end+1&&c[t-1].token===n.token-1&&c[n.end+1].token===r.token+1&&c[t-1].marker===n.marker,o=String.fromCharCode(n.marker),(a=e.tokens[n.token]).type=i?"strong_open":"em_open",a.tag=i?"strong":"em",a.nesting=1,a.markup=i?o+o:o,a.content="",(a=e.tokens[r.token]).type=i?"strong_close":"em_close",a.tag=i?"strong":"em",a.nesting=-1,a.markup=i?o+o:o,a.content="",i&&(e.tokens[c[t-1].token].content="",e.tokens[c[n.end+1].token].content="",t--))}},645:function(e,t,n){var r=n(626),a=n(629),o=n(1569);function i(e,t){return new o(t).process(e)}for(var c in(t=e.exports=i).filterXSS=i,t.FilterXSS=o,r)t[c]=r[c];for(var c in a)t[c]=a[c];"undefined"!=typeof window&&(window.filterXSS=e.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)},651:function(e,t,n){"use strict";e.exports=n(1592)},652:function(e,t,n){"use strict";e.exports=function(e){var t=e.utils.escapeRE,n=e.utils.arrayReplaceAt,r=" \r\n$+<=>^`|~",a=e.utils.lib.ucmicro.P.source,o=e.utils.lib.ucmicro.Z.source;e.block.ruler.before("reference","abbr_def",(function(e,t,n,r){var a,o,i,c,l,s=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(s+2>=u)return!1;if(42!==e.src.charCodeAt(s++))return!1;if(91!==e.src.charCodeAt(s++))return!1;for(c=s;s<u;s++){if(91===(i=e.src.charCodeAt(s)))return!1;if(93===i){l=s;break}92===i&&s++}return!(l<0||58!==e.src.charCodeAt(l+1))&&(!!r||(a=e.src.slice(c,l).replace(/\\(.)/g,"$1"),o=e.src.slice(l+2,u).trim(),0!==a.length&&(0!==o.length&&(e.env.abbreviations||(e.env.abbreviations={}),void 0===e.env.abbreviations[":"+a]&&(e.env.abbreviations[":"+a]=o),e.line=t+1,!0))))}),{alt:["paragraph","reference"]}),e.core.ruler.after("linkify","abbr_replace",(function(e){var i,c,l,s,u,d,f,p,h,m,g,v,y,b=e.tokens;if(e.env.abbreviations)for(v=new RegExp("(?:"+Object.keys(e.env.abbreviations).map((function(e){return e.substr(1)})).sort((function(e,t){return t.length-e.length})).map(t).join("|")+")"),g="(^|"+a+"|"+o+"|["+r.split("").map(t).join("")+"])("+Object.keys(e.env.abbreviations).map((function(e){return e.substr(1)})).sort((function(e,t){return t.length-e.length})).map(t).join("|")+")($|"+a+"|"+o+"|["+r.split("").map(t).join("")+"])",h=new RegExp(g,"g"),c=0,l=b.length;c<l;c++)if("inline"===b[c].type)for(i=(s=b[c].children).length-1;i>=0;i--)if("text"===(y=s[i]).type&&(p=0,d=y.content,h.lastIndex=0,f=[],v.test(d))){for(;m=h.exec(d);)(m.index>0||m[1].length>0)&&((u=new e.Token("text","",0)).content=d.slice(p,m.index+m[1].length),f.push(u)),(u=new e.Token("abbr_open","abbr",1)).attrs=[["title",e.env.abbreviations[":"+m[2]]]],f.push(u),(u=new e.Token("text","",0)).content=m[2],f.push(u),u=new e.Token("abbr_close","abbr",-1),f.push(u),h.lastIndex-=m[3].length,p=h.lastIndex;f.length&&(p<d.length&&((u=new e.Token("text","",0)).content=d.slice(p),f.push(u)),b[c].children=s=n(s,i,f))}}))}},653:function(e,t){var n;n=function(e,t,n){"use strict";var r,a,o,i,c,l;return r=e.utils.arrayReplaceAt,i=0,o={divWrap:!1,divClass:"checkbox",idPrefix:"checkbox"},t=Object.assign(o,t),c=/\[(X|\s|\_|\-)\]\s(.*)/i,a=function(e,n,r){var a,o,c;return o=[],t.divWrap&&((c=new r("checkbox_open","div",1)).attrs=[["class",t.divClass]],o.push(c)),a=t.idPrefix+i,i+=1,(c=new r("checkbox_input","input",0)).attrs=[["type","checkbox"],["id",a]],!0===e&&c.attrs.push(["checked","true"]),o.push(c),(c=new r("label_open","label",1)).attrs=[["for",a]],o.push(c),(c=new r("text","",0)).content=n,o.push(c),o.push(new r("label_close","label",-1)),t.divWrap&&o.push(new r("checkbox_close","div",-1)),o},l=function(e,t){var n,r,o,i;return null===(o=e.content.match(c))?e:(n=!1,i=o[1],r=o[2],"X"!==i&&"x"!==i||(n=!0),a(n,r,t))},function(e){var t,n,a,o,i,c;for(a=0,o=(t=e.tokens).length;a<o;)if("inline"===t[a].type){for(n=(c=t[a].children).length-1;n>=0;)i=c[n],t[a].children=c=r(c,n,l(i,e.Token)),n--;a++}else a++}},e.exports=function(e,t){"use strict";e.core.ruler.push("checkbox",n(e,t))}},654:function(e,t,n){"use strict";var r=n(1644),a=n(1645),o=n(1646),i=n(1647),c=n(1648);e.exports=function(e,t){var n={defs:r,shortcuts:a,enabled:[]},l=c(e.utils.assign({},n,t||{}));e.renderer.rules.emoji=o,e.core.ruler.push("emoji",i(e,l.defs,l.shortcuts,l.scanRE,l.replaceRE))}},655:function(e,t,n){"use strict";function r(e,t,n,r){var a=Number(e[t].meta.id+1).toString(),o="";return"string"==typeof r.docId&&(o="-"+r.docId+"-"),o+a}function a(e,t){var n=Number(e[t].meta.id+1).toString();return e[t].meta.subId>0&&(n+=":"+e[t].meta.subId),"["+n+"]"}function o(e,t,n,r,a){var o=a.rules.footnote_anchor_name(e,t,n,r,a),i=a.rules.footnote_caption(e,t,n,r,a),c=o;return e[t].meta.subId>0&&(c+=":"+e[t].meta.subId),'<sup class="footnote-ref"><a href="#fn'+o+'" id="fnref'+c+'">'+i+"</a></sup>"}function i(e,t,n){return(n.xhtmlOut?'<hr class="footnotes-sep" />\n':'<hr class="footnotes-sep">\n')+'<section class="footnotes">\n<ol class="footnotes-list">\n'}function c(){return"</ol>\n</section>\n"}function l(e,t,n,r,a){var o=a.rules.footnote_anchor_name(e,t,n,r,a);return e[t].meta.subId>0&&(o+=":"+e[t].meta.subId),'<li id="fn'+o+'" class="footnote-item">'}function s(){return"</li>\n"}function u(e,t,n,r,a){var o=a.rules.footnote_anchor_name(e,t,n,r,a);return e[t].meta.subId>0&&(o+=":"+e[t].meta.subId),' <a href="#fnref'+o+'" class="footnote-backref">↩︎</a>'}e.exports=function(e){var t=e.helpers.parseLinkLabel,n=e.utils.isSpace;e.renderer.rules.footnote_ref=o,e.renderer.rules.footnote_block_open=i,e.renderer.rules.footnote_block_close=c,e.renderer.rules.footnote_open=l,e.renderer.rules.footnote_close=s,e.renderer.rules.footnote_anchor=u,e.renderer.rules.footnote_caption=a,e.renderer.rules.footnote_anchor_name=r,e.block.ruler.before("reference","footnote_def",(function(e,t,r,a){var o,i,c,l,s,u,d,f,p,h,m,g=e.bMarks[t]+e.tShift[t],v=e.eMarks[t];if(g+4>v)return!1;if(91!==e.src.charCodeAt(g))return!1;if(94!==e.src.charCodeAt(g+1))return!1;for(s=g+2;s<v;s++){if(32===e.src.charCodeAt(s))return!1;if(93===e.src.charCodeAt(s))break}if(s===g+2)return!1;if(s+1>=v||58!==e.src.charCodeAt(++s))return!1;if(a)return!0;for(s++,e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.refs||(e.env.footnotes.refs={}),u=e.src.slice(g+2,s-2),e.env.footnotes.refs[":"+u]=-1,(d=new e.Token("footnote_reference_open","",1)).meta={label:u},d.level=e.level++,e.tokens.push(d),o=e.bMarks[t],i=e.tShift[t],c=e.sCount[t],l=e.parentType,m=s,f=p=e.sCount[t]+s-(e.bMarks[t]+e.tShift[t]);s<v&&(h=e.src.charCodeAt(s),n(h));)9===h?p+=4-p%4:p++,s++;return e.tShift[t]=s-m,e.sCount[t]=p-f,e.bMarks[t]=m,e.blkIndent+=4,e.parentType="footnote",e.sCount[t]<e.blkIndent&&(e.sCount[t]+=e.blkIndent),e.md.block.tokenize(e,t,r,!0),e.parentType=l,e.blkIndent-=4,e.tShift[t]=i,e.sCount[t]=c,e.bMarks[t]=o,(d=new e.Token("footnote_reference_close","",-1)).level=--e.level,e.tokens.push(d),!0}),{alt:["paragraph","reference"]}),e.inline.ruler.after("image","footnote_inline",(function(e,n){var r,a,o,i,c=e.posMax,l=e.pos;return!(l+2>=c)&&(94===e.src.charCodeAt(l)&&(91===e.src.charCodeAt(l+1)&&(r=l+2,!((a=t(e,l+1))<0)&&(n||(e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.list||(e.env.footnotes.list=[]),o=e.env.footnotes.list.length,e.md.inline.parse(e.src.slice(r,a),e.md,e.env,i=[]),e.push("footnote_ref","",0).meta={id:o},e.env.footnotes.list[o]={content:e.src.slice(r,a),tokens:i}),e.pos=a+1,e.posMax=c,!0))))})),e.inline.ruler.after("footnote_inline","footnote_ref",(function(e,t){var n,r,a,o,i=e.posMax,c=e.pos;if(c+3>i)return!1;if(!e.env.footnotes||!e.env.footnotes.refs)return!1;if(91!==e.src.charCodeAt(c))return!1;if(94!==e.src.charCodeAt(c+1))return!1;for(r=c+2;r<i;r++){if(32===e.src.charCodeAt(r))return!1;if(10===e.src.charCodeAt(r))return!1;if(93===e.src.charCodeAt(r))break}return r!==c+2&&(!(r>=i)&&(r++,n=e.src.slice(c+2,r-1),void 0!==e.env.footnotes.refs[":"+n]&&(t||(e.env.footnotes.list||(e.env.footnotes.list=[]),e.env.footnotes.refs[":"+n]<0?(a=e.env.footnotes.list.length,e.env.footnotes.list[a]={label:n,count:0},e.env.footnotes.refs[":"+n]=a):a=e.env.footnotes.refs[":"+n],o=e.env.footnotes.list[a].count,e.env.footnotes.list[a].count++,e.push("footnote_ref","",0).meta={id:a,subId:o,label:n}),e.pos=r,e.posMax=i,!0)))})),e.core.ruler.after("inline","footnote_tail",(function(e){var t,n,r,a,o,i,c,l,s,u,d=!1,f={};if(e.env.footnotes&&(e.tokens=e.tokens.filter((function(e){return"footnote_reference_open"===e.type?(d=!0,s=[],u=e.meta.label,!1):"footnote_reference_close"===e.type?(d=!1,f[":"+u]=s,!1):(d&&s.push(e),!d)})),e.env.footnotes.list)){for(i=e.env.footnotes.list,c=new e.Token("footnote_block_open","",1),e.tokens.push(c),t=0,n=i.length;t<n;t++){for((c=new e.Token("footnote_open","",1)).meta={id:t,label:i[t].label},e.tokens.push(c),i[t].tokens?(l=[],(c=new e.Token("paragraph_open","p",1)).block=!0,l.push(c),(c=new e.Token("inline","",0)).children=i[t].tokens,c.content=i[t].content,l.push(c),(c=new e.Token("paragraph_close","p",-1)).block=!0,l.push(c)):i[t].label&&(l=f[":"+i[t].label]),l&&(e.tokens=e.tokens.concat(l)),o="paragraph_close"===e.tokens[e.tokens.length-1].type?e.tokens.pop():null,a=i[t].count>0?i[t].count:1,r=0;r<a;r++)(c=new e.Token("footnote_anchor","",0)).meta={id:t,subId:r,label:i[t].label},e.tokens.push(c);o&&e.tokens.push(o),c=new e.Token("footnote_close","",-1),e.tokens.push(c)}c=new e.Token("footnote_block_close","",-1),e.tokens.push(c)}}))}},656:function(e,t,n){"use strict";e.exports=function(e){e.inline.ruler.before("emphasis","ins",(function(e,t){var n,r,a,o,i=e.pos,c=e.src.charCodeAt(i);if(t)return!1;if(43!==c)return!1;if(a=(r=e.scanDelims(e.pos,!0)).length,o=String.fromCharCode(c),a<2)return!1;for(a%2&&(e.push("text","",0).content=o,a--),n=0;n<a;n+=2)e.push("text","",0).content=o+o,e.delimiters.push({marker:c,jump:n,token:e.tokens.length-1,level:e.level,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0})),e.inline.ruler2.before("emphasis","ins",(function(e){var t,n,r,a,o,i=[],c=e.delimiters,l=e.delimiters.length;for(t=0;t<l;t++)43===(r=c[t]).marker&&-1!==r.end&&(a=c[r.end],(o=e.tokens[r.token]).type="ins_open",o.tag="ins",o.nesting=1,o.markup="++",o.content="",(o=e.tokens[a.token]).type="ins_close",o.tag="ins",o.nesting=-1,o.markup="++",o.content="","text"===e.tokens[a.token-1].type&&"+"===e.tokens[a.token-1].content&&i.push(a.token-1));for(;i.length;){for(n=(t=i.pop())+1;n<e.tokens.length&&"ins_close"===e.tokens[n].type;)n++;t!==--n&&(o=e.tokens[n],e.tokens[n]=e.tokens[t],e.tokens[t]=o)}}))}},657:function(e,t,n){"use strict";e.exports=function(e){e.inline.ruler.before("emphasis","mark",(function(e,t){var n,r,a,o,i=e.pos,c=e.src.charCodeAt(i);if(t)return!1;if(61!==c)return!1;if(a=(r=e.scanDelims(e.pos,!0)).length,o=String.fromCharCode(c),a<2)return!1;for(a%2&&(e.push("text","",0).content=o,a--),n=0;n<a;n+=2)e.push("text","",0).content=o+o,e.delimiters.push({marker:c,jump:n,token:e.tokens.length-1,level:e.level,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0})),e.inline.ruler2.before("emphasis","mark",(function(e){var t,n,r,a,o,i=[],c=e.delimiters,l=e.delimiters.length;for(t=0;t<l;t++)61===(r=c[t]).marker&&-1!==r.end&&(a=c[r.end],(o=e.tokens[r.token]).type="mark_open",o.tag="mark",o.nesting=1,o.markup="==",o.content="",(o=e.tokens[a.token]).type="mark_close",o.tag="mark",o.nesting=-1,o.markup="==",o.content="","text"===e.tokens[a.token-1].type&&"="===e.tokens[a.token-1].content&&i.push(a.token-1));for(;i.length;){for(n=(t=i.pop())+1;n<e.tokens.length&&"mark_close"===e.tokens[n].type;)n++;t!==--n&&(o=e.tokens[n],e.tokens[n]=e.tokens[t],e.tokens[t]=o)}}))}},658:function(e,t,n){"use strict";var r=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function a(e,t){var n,a,o=e.posMax,i=e.pos;if(126!==e.src.charCodeAt(i))return!1;if(t)return!1;if(i+2>=o)return!1;for(e.pos=i+1;e.pos<o;){if(126===e.src.charCodeAt(e.pos)){n=!0;break}e.md.inline.skipToken(e)}return n&&i+1!==e.pos?(a=e.src.slice(i+1,e.pos)).match(/(^|[^\\])(\\\\)*\s/)?(e.pos=i,!1):(e.posMax=e.pos,e.pos=i+1,e.push("sub_open","sub",1).markup="~",e.push("text","",0).content=a.replace(r,"$1"),e.push("sub_close","sub",-1).markup="~",e.pos=e.posMax+1,e.posMax=o,!0):(e.pos=i,!1)}e.exports=function(e){e.inline.ruler.after("emphasis","sub",a)}},659:function(e,t,n){"use strict";var r=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function a(e,t){var n,a,o=e.posMax,i=e.pos;if(94!==e.src.charCodeAt(i))return!1;if(t)return!1;if(i+2>=o)return!1;for(e.pos=i+1;e.pos<o;){if(94===e.src.charCodeAt(e.pos)){n=!0;break}e.md.inline.skipToken(e)}return n&&i+1!==e.pos?(a=e.src.slice(i+1,e.pos)).match(/(^|[^\\])(\\\\)*\s/)?(e.pos=i,!1):(e.posMax=e.pos,e.pos=i+1,e.push("sup_open","sup",1).markup="^",e.push("text","",0).content=a.replace(r,"$1"),e.push("sup_close","sup",-1).markup="^",e.pos=e.posMax+1,e.posMax=o,!0):(e.pos=i,!1)}e.exports=function(e){e.inline.ruler.after("emphasis","sup",a)}},66:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o}));var r={};n.r(r),n.d(r,"create",(function(){return s})),n.d(r,"fromMat4",(function(){return u})),n.d(r,"clone",(function(){return d})),n.d(r,"copy",(function(){return f})),n.d(r,"fromValues",(function(){return p})),n.d(r,"set",(function(){return h})),n.d(r,"identity",(function(){return m})),n.d(r,"transpose",(function(){return g})),n.d(r,"invert",(function(){return v})),n.d(r,"adjoint",(function(){return y})),n.d(r,"determinant",(function(){return b})),n.d(r,"multiply",(function(){return k})),n.d(r,"translate",(function(){return w})),n.d(r,"rotate",(function(){return x})),n.d(r,"scale",(function(){return _})),n.d(r,"fromTranslation",(function(){return E})),n.d(r,"fromRotation",(function(){return C})),n.d(r,"fromScaling",(function(){return O})),n.d(r,"fromMat2d",(function(){return S})),n.d(r,"fromQuat",(function(){return R})),n.d(r,"normalFromMat4",(function(){return j})),n.d(r,"projection",(function(){return P})),n.d(r,"str",(function(){return A})),n.d(r,"frob",(function(){return T})),n.d(r,"add",(function(){return D})),n.d(r,"subtract",(function(){return M})),n.d(r,"multiplyScalar",(function(){return N})),n.d(r,"multiplyScalarAndAdd",(function(){return L})),n.d(r,"exactEquals",(function(){return I})),n.d(r,"equals",(function(){return B})),n.d(r,"mul",(function(){return z})),n.d(r,"sub",(function(){return F}));var a={};n.r(a),n.d(a,"create",(function(){return U})),n.d(a,"clone",(function(){return V})),n.d(a,"fromValues",(function(){return q})),n.d(a,"copy",(function(){return H})),n.d(a,"set",(function(){return W})),n.d(a,"add",(function(){return Y})),n.d(a,"subtract",(function(){return G})),n.d(a,"multiply",(function(){return X})),n.d(a,"divide",(function(){return K})),n.d(a,"ceil",(function(){return Z})),n.d(a,"floor",(function(){return $})),n.d(a,"min",(function(){return Q})),n.d(a,"max",(function(){return J})),n.d(a,"round",(function(){return ee})),n.d(a,"scale",(function(){return te})),n.d(a,"scaleAndAdd",(function(){return ne})),n.d(a,"distance",(function(){return re})),n.d(a,"squaredDistance",(function(){return ae})),n.d(a,"length",(function(){return oe})),n.d(a,"squaredLength",(function(){return ie})),n.d(a,"negate",(function(){return ce})),n.d(a,"inverse",(function(){return le})),n.d(a,"normalize",(function(){return se})),n.d(a,"dot",(function(){return ue})),n.d(a,"cross",(function(){return de})),n.d(a,"lerp",(function(){return fe})),n.d(a,"random",(function(){return pe})),n.d(a,"transformMat2",(function(){return he})),n.d(a,"transformMat2d",(function(){return me})),n.d(a,"transformMat3",(function(){return ge})),n.d(a,"transformMat4",(function(){return ve})),n.d(a,"rotate",(function(){return ye})),n.d(a,"angle",(function(){return be})),n.d(a,"zero",(function(){return ke})),n.d(a,"str",(function(){return we})),n.d(a,"exactEquals",(function(){return xe})),n.d(a,"equals",(function(){return _e})),n.d(a,"len",(function(){return Ce})),n.d(a,"sub",(function(){return Oe})),n.d(a,"mul",(function(){return Se})),n.d(a,"div",(function(){return Re})),n.d(a,"dist",(function(){return je})),n.d(a,"sqrDist",(function(){return Pe})),n.d(a,"sqrLen",(function(){return Ae})),n.d(a,"forEach",(function(){return Te}));var o={};n.r(o),n.d(o,"create",(function(){return De})),n.d(o,"clone",(function(){return Me})),n.d(o,"length",(function(){return Ne})),n.d(o,"fromValues",(function(){return Le})),n.d(o,"copy",(function(){return Ie})),n.d(o,"set",(function(){return Be})),n.d(o,"add",(function(){return ze})),n.d(o,"subtract",(function(){return Fe})),n.d(o,"multiply",(function(){return Ue})),n.d(o,"divide",(function(){return Ve})),n.d(o,"ceil",(function(){return qe})),n.d(o,"floor",(function(){return He})),n.d(o,"min",(function(){return We})),n.d(o,"max",(function(){return Ye})),n.d(o,"round",(function(){return Ge})),n.d(o,"scale",(function(){return Xe})),n.d(o,"scaleAndAdd",(function(){return Ke})),n.d(o,"distance",(function(){return Ze})),n.d(o,"squaredDistance",(function(){return $e})),n.d(o,"squaredLength",(function(){return Qe})),n.d(o,"negate",(function(){return Je})),n.d(o,"inverse",(function(){return et})),n.d(o,"normalize",(function(){return tt})),n.d(o,"dot",(function(){return nt})),n.d(o,"cross",(function(){return rt})),n.d(o,"lerp",(function(){return at})),n.d(o,"hermite",(function(){return ot})),n.d(o,"bezier",(function(){return it})),n.d(o,"random",(function(){return ct})),n.d(o,"transformMat4",(function(){return lt})),n.d(o,"transformMat3",(function(){return st})),n.d(o,"transformQuat",(function(){return ut})),n.d(o,"rotateX",(function(){return dt})),n.d(o,"rotateY",(function(){return ft})),n.d(o,"rotateZ",(function(){return pt})),n.d(o,"angle",(function(){return ht})),n.d(o,"zero",(function(){return mt})),n.d(o,"str",(function(){return gt})),n.d(o,"exactEquals",(function(){return vt})),n.d(o,"equals",(function(){return yt})),n.d(o,"sub",(function(){return bt})),n.d(o,"mul",(function(){return kt})),n.d(o,"div",(function(){return wt})),n.d(o,"dist",(function(){return xt})),n.d(o,"sqrDist",(function(){return _t})),n.d(o,"len",(function(){return Et})),n.d(o,"sqrLen",(function(){return Ct})),n.d(o,"forEach",(function(){return Ot}));var i=1e-6,c="undefined"!=typeof Float32Array?Float32Array:Array,l=Math.random;Math.PI;function s(){var e=new c(9);return c!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function u(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function d(e){var t=new c(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function f(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function p(e,t,n,r,a,o,i,l,s){var u=new c(9);return u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=a,u[5]=o,u[6]=i,u[7]=l,u[8]=s,u}function h(e,t,n,r,a,o,i,c,l,s){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e[4]=o,e[5]=i,e[6]=c,e[7]=l,e[8]=s,e}function m(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function g(e,t){if(e===t){var n=t[1],r=t[2],a=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=a}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function v(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],c=t[5],l=t[6],s=t[7],u=t[8],d=u*i-c*s,f=-u*o+c*l,p=s*o-i*l,h=n*d+r*f+a*p;return h?(h=1/h,e[0]=d*h,e[1]=(-u*r+a*s)*h,e[2]=(c*r-a*i)*h,e[3]=f*h,e[4]=(u*n-a*l)*h,e[5]=(-c*n+a*o)*h,e[6]=p*h,e[7]=(-s*n+r*l)*h,e[8]=(i*n-r*o)*h,e):null}function y(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],c=t[5],l=t[6],s=t[7],u=t[8];return e[0]=i*u-c*s,e[1]=a*s-r*u,e[2]=r*c-a*i,e[3]=c*l-o*u,e[4]=n*u-a*l,e[5]=a*o-n*c,e[6]=o*s-i*l,e[7]=r*l-n*s,e[8]=n*i-r*o,e}function b(e){var t=e[0],n=e[1],r=e[2],a=e[3],o=e[4],i=e[5],c=e[6],l=e[7],s=e[8];return t*(s*o-i*l)+n*(-s*a+i*c)+r*(l*a-o*c)}function k(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],c=t[4],l=t[5],s=t[6],u=t[7],d=t[8],f=n[0],p=n[1],h=n[2],m=n[3],g=n[4],v=n[5],y=n[6],b=n[7],k=n[8];return e[0]=f*r+p*i+h*s,e[1]=f*a+p*c+h*u,e[2]=f*o+p*l+h*d,e[3]=m*r+g*i+v*s,e[4]=m*a+g*c+v*u,e[5]=m*o+g*l+v*d,e[6]=y*r+b*i+k*s,e[7]=y*a+b*c+k*u,e[8]=y*o+b*l+k*d,e}function w(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],c=t[4],l=t[5],s=t[6],u=t[7],d=t[8],f=n[0],p=n[1];return e[0]=r,e[1]=a,e[2]=o,e[3]=i,e[4]=c,e[5]=l,e[6]=f*r+p*i+s,e[7]=f*a+p*c+u,e[8]=f*o+p*l+d,e}function x(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],c=t[4],l=t[5],s=t[6],u=t[7],d=t[8],f=Math.sin(n),p=Math.cos(n);return e[0]=p*r+f*i,e[1]=p*a+f*c,e[2]=p*o+f*l,e[3]=p*i-f*r,e[4]=p*c-f*a,e[5]=p*l-f*o,e[6]=s,e[7]=u,e[8]=d,e}function _(e,t,n){var r=n[0],a=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function E(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function C(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function O(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function S(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function R(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=n+n,c=r+r,l=a+a,s=n*i,u=r*i,d=r*c,f=a*i,p=a*c,h=a*l,m=o*i,g=o*c,v=o*l;return e[0]=1-d-h,e[3]=u-v,e[6]=f+g,e[1]=u+v,e[4]=1-s-h,e[7]=p-m,e[2]=f-g,e[5]=p+m,e[8]=1-s-d,e}function j(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],c=t[5],l=t[6],s=t[7],u=t[8],d=t[9],f=t[10],p=t[11],h=t[12],m=t[13],g=t[14],v=t[15],y=n*c-r*i,b=n*l-a*i,k=n*s-o*i,w=r*l-a*c,x=r*s-o*c,_=a*s-o*l,E=u*m-d*h,C=u*g-f*h,O=u*v-p*h,S=d*g-f*m,R=d*v-p*m,j=f*v-p*g,P=y*j-b*R+k*S+w*O-x*C+_*E;return P?(P=1/P,e[0]=(c*j-l*R+s*S)*P,e[1]=(l*O-i*j-s*C)*P,e[2]=(i*R-c*O+s*E)*P,e[3]=(a*R-r*j-o*S)*P,e[4]=(n*j-a*O+o*C)*P,e[5]=(r*O-n*R-o*E)*P,e[6]=(m*_-g*x+v*w)*P,e[7]=(g*k-h*_-v*b)*P,e[8]=(h*x-m*k+v*y)*P,e):null}function P(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function A(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function T(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function D(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function M(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function N(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function L(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function I(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function B(e,t){var n=e[0],r=e[1],a=e[2],o=e[3],c=e[4],l=e[5],s=e[6],u=e[7],d=e[8],f=t[0],p=t[1],h=t[2],m=t[3],g=t[4],v=t[5],y=t[6],b=t[7],k=t[8];return Math.abs(n-f)<=i*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-p)<=i*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(a-h)<=i*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-m)<=i*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(c-g)<=i*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(l-v)<=i*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(s-y)<=i*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(u-b)<=i*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(d-k)<=i*Math.max(1,Math.abs(d),Math.abs(k))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var z=k,F=M;function U(){var e=new c(2);return c!=Float32Array&&(e[0]=0,e[1]=0),e}function V(e){var t=new c(2);return t[0]=e[0],t[1]=e[1],t}function q(e,t){var n=new c(2);return n[0]=e,n[1]=t,n}function H(e,t){return e[0]=t[0],e[1]=t[1],e}function W(e,t,n){return e[0]=t,e[1]=n,e}function Y(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function G(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function X(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function K(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function Z(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function $(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function Q(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function J(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function ee(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function te(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function ne(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function re(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.hypot(n,r)}function ae(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function oe(e){var t=e[0],n=e[1];return Math.hypot(t,n)}function ie(e){var t=e[0],n=e[1];return t*t+n*n}function ce(e,t){return e[0]=-t[0],e[1]=-t[1],e}function le(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function se(e,t){var n=t[0],r=t[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e}function ue(e,t){return e[0]*t[0]+e[1]*t[1]}function de(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}function fe(e,t,n,r){var a=t[0],o=t[1];return e[0]=a+r*(n[0]-a),e[1]=o+r*(n[1]-o),e}function pe(e,t){t=t||1;var n=2*l()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}function he(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[2]*a,e[1]=n[1]*r+n[3]*a,e}function me(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[2]*a+n[4],e[1]=n[1]*r+n[3]*a+n[5],e}function ge(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[3]*a+n[6],e[1]=n[1]*r+n[4]*a+n[7],e}function ve(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[4]*a+n[12],e[1]=n[1]*r+n[5]*a+n[13],e}function ye(e,t,n,r){var a=t[0]-n[0],o=t[1]-n[1],i=Math.sin(r),c=Math.cos(r);return e[0]=a*c-o*i+n[0],e[1]=a*i+o*c+n[1],e}function be(e,t){var n=e[0],r=e[1],a=t[0],o=t[1],i=Math.sqrt(n*n+r*r)*Math.sqrt(a*a+o*o),c=i&&(n*a+r*o)/i;return Math.acos(Math.min(Math.max(c,-1),1))}function ke(e){return e[0]=0,e[1]=0,e}function we(e){return"vec2("+e[0]+", "+e[1]+")"}function xe(e,t){return e[0]===t[0]&&e[1]===t[1]}function _e(e,t){var n=e[0],r=e[1],a=t[0],o=t[1];return Math.abs(n-a)<=i*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=i*Math.max(1,Math.abs(r),Math.abs(o))}var Ee,Ce=oe,Oe=G,Se=X,Re=K,je=re,Pe=ae,Ae=ie,Te=(Ee=U(),function(e,t,n,r,a,o){var i,c;for(t||(t=2),n||(n=0),c=r?Math.min(r*t+n,e.length):e.length,i=n;i<c;i+=t)Ee[0]=e[i],Ee[1]=e[i+1],a(Ee,Ee,o),e[i]=Ee[0],e[i+1]=Ee[1];return e});function De(){var e=new c(3);return c!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Me(e){var t=new c(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ne(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function Le(e,t,n){var r=new c(3);return r[0]=e,r[1]=t,r[2]=n,r}function Ie(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Be(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function ze(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Fe(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Ue(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function Ve(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function qe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function He(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function We(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function Ye(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function Ge(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Xe(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Ke(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function Ze(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return Math.hypot(n,r,a)}function $e(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return n*n+r*r+a*a}function Qe(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function Je(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function et(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function tt(e,t){var n=t[0],r=t[1],a=t[2],o=n*n+r*r+a*a;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function nt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function rt(e,t,n){var r=t[0],a=t[1],o=t[2],i=n[0],c=n[1],l=n[2];return e[0]=a*l-o*c,e[1]=o*i-r*l,e[2]=r*c-a*i,e}function at(e,t,n,r){var a=t[0],o=t[1],i=t[2];return e[0]=a+r*(n[0]-a),e[1]=o+r*(n[1]-o),e[2]=i+r*(n[2]-i),e}function ot(e,t,n,r,a,o){var i=o*o,c=i*(2*o-3)+1,l=i*(o-2)+o,s=i*(o-1),u=i*(3-2*o);return e[0]=t[0]*c+n[0]*l+r[0]*s+a[0]*u,e[1]=t[1]*c+n[1]*l+r[1]*s+a[1]*u,e[2]=t[2]*c+n[2]*l+r[2]*s+a[2]*u,e}function it(e,t,n,r,a,o){var i=1-o,c=i*i,l=o*o,s=c*i,u=3*o*c,d=3*l*i,f=l*o;return e[0]=t[0]*s+n[0]*u+r[0]*d+a[0]*f,e[1]=t[1]*s+n[1]*u+r[1]*d+a[1]*f,e[2]=t[2]*s+n[2]*u+r[2]*d+a[2]*f,e}function ct(e,t){t=t||1;var n=2*l()*Math.PI,r=2*l()-1,a=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=r*t,e}function lt(e,t,n){var r=t[0],a=t[1],o=t[2],i=n[3]*r+n[7]*a+n[11]*o+n[15];return i=i||1,e[0]=(n[0]*r+n[4]*a+n[8]*o+n[12])/i,e[1]=(n[1]*r+n[5]*a+n[9]*o+n[13])/i,e[2]=(n[2]*r+n[6]*a+n[10]*o+n[14])/i,e}function st(e,t,n){var r=t[0],a=t[1],o=t[2];return e[0]=r*n[0]+a*n[3]+o*n[6],e[1]=r*n[1]+a*n[4]+o*n[7],e[2]=r*n[2]+a*n[5]+o*n[8],e}function ut(e,t,n){var r=n[0],a=n[1],o=n[2],i=n[3],c=t[0],l=t[1],s=t[2],u=a*s-o*l,d=o*c-r*s,f=r*l-a*c,p=a*f-o*d,h=o*u-r*f,m=r*d-a*u,g=2*i;return u*=g,d*=g,f*=g,p*=2,h*=2,m*=2,e[0]=c+u+p,e[1]=l+d+h,e[2]=s+f+m,e}function dt(e,t,n,r){var a=[],o=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function ft(e,t,n,r){var a=[],o=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function pt(e,t,n,r){var a=[],o=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function ht(e,t){var n=e[0],r=e[1],a=e[2],o=t[0],i=t[1],c=t[2],l=Math.sqrt(n*n+r*r+a*a)*Math.sqrt(o*o+i*i+c*c),s=l&&nt(e,t)/l;return Math.acos(Math.min(Math.max(s,-1),1))}function mt(e){return e[0]=0,e[1]=0,e[2]=0,e}function gt(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function vt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function yt(e,t){var n=e[0],r=e[1],a=e[2],o=t[0],c=t[1],l=t[2];return Math.abs(n-o)<=i*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-c)<=i*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(a-l)<=i*Math.max(1,Math.abs(a),Math.abs(l))}var bt=Fe,kt=Ue,wt=Ve,xt=Ze,_t=$e,Et=Ne,Ct=Qe,Ot=function(){var e=De();return function(t,n,r,a,o,i){var c,l;for(n||(n=3),r||(r=0),l=a?Math.min(a*n+r,t.length):t.length,c=r;c<l;c+=n)e[0]=t[c],e[1]=t[c+1],e[2]=t[c+2],o(e,e,i),t[c]=e[0],t[c+1]=e[1],t[c+2]=e[2];return t}}()},660:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1649))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},80:function(e,t,n){"use strict";n(2073);var r=n(556),a=n(0),o=n.n(a),i=n(1),c=n.n(i),l=n(8),s=n.n(l),u=n(63),d=n.n(u),f=(n(293),["className"]),p=["className"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}function y(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var b=o.a.forwardRef((function(e,t){var n=e.className,a=y(e,f),i=s()("larkui-form",n);return o.a.createElement(r.a,v({className:i,ref:t},a))}));b.propTypes=m(m({},r.a.CardProps),{},{className:c.a.string}),d()(b,r.a),b.Item=o.a.forwardRef((function(e,t){var n=e.className,a=y(e,p),i=s()("larkui-form-item",n);return o.a.createElement(r.a.Item,v({className:i,ref:t},a,{colon:!1}))})),t.a=b},803:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),e=Date.parse(e),isNaN(e)?null:new Date(e)};var r,a=(r=n(60))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},804:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){"object"===r(e)&&null!==e?e="function"==typeof e.toString?e.toString():"[object Object]":(null==e||isNaN(e)&&!e.length)&&(e="");return String(e)},e.exports=t.default,e.exports.default=t.default},805:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,r.default)(e),(t=(0,a.default)(t,i)).allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1));for(var n=e.split("."),o=0;o<n.length;o++)if(n[o].length>63)return!1;if(t.require_tld){var c=n.pop();if(!n.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(c))return!1;if(/[\s\u2002-\u200B\u202F\u205F\u3000\uFEFF\uDB40\uDC20]/.test(c))return!1}for(var l,s=0;s<n.length;s++){if(l=n[s],t.allow_underscores&&(l=l.replace(/_/g,"")),!/^[a-z\u00a1-\uffff0-9-]+$/i.test(l))return!1;if(/[\uff01-\uff5e]/.test(l))return!1;if("-"===l[0]||"-"===l[l.length-1])return!1}return!0};var r=o(n(60)),a=o(n(366));function o(e){return e&&e.__esModule?e:{default:e}}var i={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1};e.exports=t.default,e.exports.default=t.default},806:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){return e.some((function(e){return t===e}))};t.default=r,e.exports=t.default,e.exports.default=t.default},807:function(e,t,n){"use strict";var r=n(152),a=n(111);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(128)),i=r(n(0)),c=a(n(808)),l=a(n(218)),s=function(e,t){return i.createElement(l.default,(0,o.default)((0,o.default)({},e),{},{ref:t,icon:c.default}))};s.displayName="CheckOutlined";var u=i.forwardRef(s);t.default=u},808:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"}},809:function(e,t,n){"use strict";var r=n(152),a=n(111);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(128)),i=r(n(0)),c=a(n(810)),l=a(n(218)),s=function(e,t){return i.createElement(l.default,(0,o.default)((0,o.default)({},e),{},{ref:t,icon:c.default}))};s.displayName="DownOutlined";var u=i.forwardRef(s);t.default=u},810:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"}},811:function(e,t,n){"use strict";function r(e){return new Promise((function(t,n){setTimeout(t,e)}))}n.d(t,"a",(function(){return r}))},812:function(e,t){e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},813:function(e,t,n){const r=n(216),a=n(367),o=n(814),i=n(815),c=n(816),l=n(817),s=n(818),u=n(494),d=n(819),f=n(822),p=n(823),h=n(217),m=n(824);function g(e,t,n){const r=e.size,a=p.getEncodedBits(t,n);let o,i;for(o=0;o<15;o++)i=1==(a>>o&1),o<6?e.set(o,8,i,!0):o<8?e.set(o+1,8,i,!0):e.set(r-15+o,8,i,!0),o<8?e.set(8,r-o-1,i,!0):o<9?e.set(8,15-o-1+1,i,!0):e.set(8,15-o-1,i,!0);e.set(r-8,8,1,!0)}function v(e,t,n){const a=new o;n.forEach((function(t){a.put(t.mode.bit,4),a.put(t.getLength(),h.getCharCountIndicator(t.mode,e)),t.write(a)}));const i=8*(r.getSymbolTotalCodewords(e)-u.getTotalCodewordsCount(e,t));for(a.getLengthInBits()+4<=i&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(0);const c=(i-a.getLengthInBits())/8;for(let e=0;e<c;e++)a.put(e%2?17:236,8);return function(e,t,n){const a=r.getSymbolTotalCodewords(t),o=u.getTotalCodewordsCount(t,n),i=a-o,c=u.getBlocksCount(t,n),l=c-a%c,s=Math.floor(a/c),f=Math.floor(i/c),p=f+1,h=s-f,m=new d(h);let g=0;const v=new Array(c),y=new Array(c);let b=0;const k=new Uint8Array(e.buffer);for(let e=0;e<c;e++){const t=e<l?f:p;v[e]=k.slice(g,g+t),y[e]=m.encode(v[e]),g+=t,b=Math.max(b,t)}const w=new Uint8Array(a);let x,_,E=0;for(x=0;x<b;x++)for(_=0;_<c;_++)x<v[_].length&&(w[E++]=v[_][x]);for(x=0;x<h;x++)for(_=0;_<c;_++)w[E++]=y[_][x];return w}(a,e,t)}function y(e,t,n,a){let o;if(Array.isArray(e))o=m.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let r=t;if(!r){const t=m.rawSplit(e);r=f.getBestVersionForData(t,n)}o=m.fromString(e,r||40)}}const u=f.getBestVersionForData(o,n);if(!u)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<u)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+u+".\n")}else t=u;const d=v(t,n,o),p=r.getSymbolSize(t),h=new i(p);return function(e,t){const n=e.size,r=l.getPositions(t);for(let t=0;t<r.length;t++){const a=r[t][0],o=r[t][1];for(let t=-1;t<=7;t++)if(!(a+t<=-1||n<=a+t))for(let r=-1;r<=7;r++)o+r<=-1||n<=o+r||(t>=0&&t<=6&&(0===r||6===r)||r>=0&&r<=6&&(0===t||6===t)||t>=2&&t<=4&&r>=2&&r<=4?e.set(a+t,o+r,!0,!0):e.set(a+t,o+r,!1,!0))}}(h,t),function(e){const t=e.size;for(let n=8;n<t-8;n++){const t=n%2==0;e.set(n,6,t,!0),e.set(6,n,t,!0)}}(h),function(e,t){const n=c.getPositions(t);for(let t=0;t<n.length;t++){const r=n[t][0],a=n[t][1];for(let t=-2;t<=2;t++)for(let n=-2;n<=2;n++)-2===t||2===t||-2===n||2===n||0===t&&0===n?e.set(r+t,a+n,!0,!0):e.set(r+t,a+n,!1,!0)}}(h,t),g(h,n,0),t>=7&&function(e,t){const n=e.size,r=f.getEncodedBits(t);let a,o,i;for(let t=0;t<18;t++)a=Math.floor(t/3),o=t%3+n-8-3,i=1==(r>>t&1),e.set(a,o,i,!0),e.set(o,a,i,!0)}(h,t),function(e,t){const n=e.size;let r=-1,a=n-1,o=7,i=0;for(let c=n-1;c>0;c-=2)for(6===c&&c--;;){for(let n=0;n<2;n++)if(!e.isReserved(a,c-n)){let r=!1;i<t.length&&(r=1==(t[i]>>>o&1)),e.set(a,c-n,r),o--,-1===o&&(i++,o=7)}if(a+=r,a<0||n<=a){a-=r,r=-r;break}}}(h,d),isNaN(a)&&(a=s.getBestMask(h,g.bind(null,h,n))),s.applyMask(a,h),g(h,n,a),{modules:h,version:t,errorCorrectionLevel:n,maskPattern:a,segments:o}}t.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");let n,o,i=a.M;return void 0!==t&&(i=a.from(t.errorCorrectionLevel,a.M),n=f.from(t.version),o=s.from(t.maskPattern),t.toSJISFunc&&r.setToSJISFunction(t.toSJISFunc)),y(e,n,i,o)}},814:function(e,t){function n(){this.buffer=[],this.length=0}n.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=n},815:function(e,t){function n(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}n.prototype.set=function(e,t,n,r){const a=e*this.size+t;this.data[a]=n,r&&(this.reservedBit[a]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=n},816:function(e,t,n){const r=n(216).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];const t=Math.floor(e/7)+2,n=r(e),a=145===n?26:2*Math.ceil((n-13)/(2*t-2)),o=[n-7];for(let e=1;e<t-1;e++)o[e]=o[e-1]-a;return o.push(6),o.reverse()},t.getPositions=function(e){const n=[],r=t.getRowColCoords(e),a=r.length;for(let e=0;e<a;e++)for(let t=0;t<a;t++)0===e&&0===t||0===e&&t===a-1||e===a-1&&0===t||n.push([r[e],r[t]]);return n}},817:function(e,t,n){const r=n(216).getSymbolSize;t.getPositions=function(e){const t=r(e);return[[0,0],[t-7,0],[0,t-7]]}},818:function(e,t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n=3,r=3,a=40,o=10;function i(e,n,r){switch(e){case t.Patterns.PATTERN000:return(n+r)%2==0;case t.Patterns.PATTERN001:return n%2==0;case t.Patterns.PATTERN010:return r%3==0;case t.Patterns.PATTERN011:return(n+r)%3==0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2==0;case t.Patterns.PATTERN101:return n*r%2+n*r%3==0;case t.Patterns.PATTERN110:return(n*r%2+n*r%3)%2==0;case t.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){const t=e.size;let r=0,a=0,o=0,i=null,c=null;for(let l=0;l<t;l++){a=o=0,i=c=null;for(let s=0;s<t;s++){let t=e.get(l,s);t===i?a++:(a>=5&&(r+=n+(a-5)),i=t,a=1),t=e.get(s,l),t===c?o++:(o>=5&&(r+=n+(o-5)),c=t,o=1)}a>=5&&(r+=n+(a-5)),o>=5&&(r+=n+(o-5))}return r},t.getPenaltyN2=function(e){const t=e.size;let n=0;for(let r=0;r<t-1;r++)for(let a=0;a<t-1;a++){const t=e.get(r,a)+e.get(r,a+1)+e.get(r+1,a)+e.get(r+1,a+1);4!==t&&0!==t||n++}return n*r},t.getPenaltyN3=function(e){const t=e.size;let n=0,r=0,o=0;for(let a=0;a<t;a++){r=o=0;for(let i=0;i<t;i++)r=r<<1&2047|e.get(a,i),i>=10&&(1488===r||93===r)&&n++,o=o<<1&2047|e.get(i,a),i>=10&&(1488===o||93===o)&&n++}return n*a},t.getPenaltyN4=function(e){let t=0;const n=e.data.length;for(let r=0;r<n;r++)t+=e.data[r];return Math.abs(Math.ceil(100*t/n/5)-10)*o},t.applyMask=function(e,t){const n=t.size;for(let r=0;r<n;r++)for(let a=0;a<n;a++)t.isReserved(a,r)||t.xor(a,r,i(e,a,r))},t.getBestMask=function(e,n){const r=Object.keys(t.Patterns).length;let a=0,o=1/0;for(let i=0;i<r;i++){n(i),t.applyMask(i,e);const r=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(i,e),r<o&&(o=r,a=i)}return a}},819:function(e,t,n){const r=n(820);function a(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}a.prototype.initialize=function(e){this.degree=e,this.genPoly=r.generateECPolynomial(this.degree)},a.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=r.mod(t,this.genPoly),a=this.degree-n.length;if(a>0){const e=new Uint8Array(this.degree);return e.set(n,a),e}return n},e.exports=a},820:function(e,t,n){const r=n(821);t.mul=function(e,t){const n=new Uint8Array(e.length+t.length-1);for(let a=0;a<e.length;a++)for(let o=0;o<t.length;o++)n[a+o]^=r.mul(e[a],t[o]);return n},t.mod=function(e,t){let n=new Uint8Array(e);for(;n.length-t.length>=0;){const e=n[0];for(let a=0;a<t.length;a++)n[a]^=r.mul(t[a],e);let a=0;for(;a<n.length&&0===n[a];)a++;n=n.slice(a)}return n},t.generateECPolynomial=function(e){let n=new Uint8Array([1]);for(let a=0;a<e;a++)n=t.mul(n,new Uint8Array([1,r.exp(a)]));return n}},821:function(e,t){const n=new Uint8Array(512),r=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)n[t]=e,r[e]=t,e<<=1,256&e&&(e^=285);for(let e=255;e<512;e++)n[e]=n[e-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return r[e]},t.exp=function(e){return n[e]},t.mul=function(e,t){return 0===e||0===t?0:n[r[e]+r[t]]}},822:function(e,t,n){const r=n(216),a=n(494),o=n(367),i=n(217),c=n(495),l=r.getBCHDigit(7973);function s(e,t){return i.getCharCountIndicator(e,t)+4}function u(e,t){let n=0;return e.forEach((function(e){const r=s(e.mode,t);n+=r+e.getBitsLength()})),n}t.from=function(e,t){return c.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,n){if(!c.isValid(e))throw new Error("Invalid QR Code version");void 0===n&&(n=i.BYTE);const o=8*(r.getSymbolTotalCodewords(e)-a.getTotalCodewordsCount(e,t));if(n===i.MIXED)return o;const l=o-s(n,e);switch(n){case i.NUMERIC:return Math.floor(l/10*3);case i.ALPHANUMERIC:return Math.floor(l/11*2);case i.KANJI:return Math.floor(l/13);case i.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,n){let r;const a=o.from(n,o.M);if(Array.isArray(e)){if(e.length>1)return function(e,n){for(let r=1;r<=40;r++)if(u(e,r)<=t.getCapacity(r,n,i.MIXED))return r}(e,a);if(0===e.length)return 1;r=e[0]}else r=e;return function(e,n,r){for(let a=1;a<=40;a++)if(n<=t.getCapacity(a,r,e))return a}(r.mode,r.getLength(),a)},t.getEncodedBits=function(e){if(!c.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;r.getBCHDigit(t)-l>=0;)t^=7973<<r.getBCHDigit(t)-l;return e<<12|t}},823:function(e,t,n){const r=n(216),a=r.getBCHDigit(1335);t.getEncodedBits=function(e,t){const n=e.bit<<3|t;let o=n<<10;for(;r.getBCHDigit(o)-a>=0;)o^=1335<<r.getBCHDigit(o)-a;return 21522^(n<<10|o)}},824:function(e,t,n){const r=n(217),a=n(825),o=n(826),i=n(827),c=n(829),l=n(496),s=n(216),u=n(830);function d(e){return unescape(encodeURIComponent(e)).length}function f(e,t,n){const r=[];let a;for(;null!==(a=e.exec(n));)r.push({data:a[0],index:a.index,mode:t,length:a[0].length});return r}function p(e){const t=f(l.NUMERIC,r.NUMERIC,e),n=f(l.ALPHANUMERIC,r.ALPHANUMERIC,e);let a,o;s.isKanjiModeEnabled()?(a=f(l.BYTE,r.BYTE,e),o=f(l.KANJI,r.KANJI,e)):(a=f(l.BYTE_KANJI,r.BYTE,e),o=[]);return t.concat(n,a,o).sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function h(e,t){switch(t){case r.NUMERIC:return a.getBitsLength(e);case r.ALPHANUMERIC:return o.getBitsLength(e);case r.KANJI:return c.getBitsLength(e);case r.BYTE:return i.getBitsLength(e)}}function m(e,t){let n;const l=r.getBestModeForData(e);if(n=r.from(t,l),n!==r.BYTE&&n.bit<l.bit)throw new Error('"'+e+'" cannot be encoded with mode '+r.toString(n)+".\n Suggested mode is: "+r.toString(l));switch(n!==r.KANJI||s.isKanjiModeEnabled()||(n=r.BYTE),n){case r.NUMERIC:return new a(e);case r.ALPHANUMERIC:return new o(e);case r.KANJI:return new c(e);case r.BYTE:return new i(e)}}t.fromArray=function(e){return e.reduce((function(e,t){return"string"==typeof t?e.push(m(t,null)):t.data&&e.push(m(t.data,t.mode)),e}),[])},t.fromString=function(e,n){const a=function(e){const t=[];for(let n=0;n<e.length;n++){const a=e[n];switch(a.mode){case r.NUMERIC:t.push([a,{data:a.data,mode:r.ALPHANUMERIC,length:a.length},{data:a.data,mode:r.BYTE,length:a.length}]);break;case r.ALPHANUMERIC:t.push([a,{data:a.data,mode:r.BYTE,length:a.length}]);break;case r.KANJI:t.push([a,{data:a.data,mode:r.BYTE,length:d(a.data)}]);break;case r.BYTE:t.push([{data:a.data,mode:r.BYTE,length:d(a.data)}])}}return t}(p(e,s.isKanjiModeEnabled())),o=function(e,t){const n={},a={start:{}};let o=["start"];for(let i=0;i<e.length;i++){const c=e[i],l=[];for(let e=0;e<c.length;e++){const s=c[e],u=""+i+e;l.push(u),n[u]={node:s,lastCount:0},a[u]={};for(let e=0;e<o.length;e++){const i=o[e];n[i]&&n[i].node.mode===s.mode?(a[i][u]=h(n[i].lastCount+s.length,s.mode)-h(n[i].lastCount,s.mode),n[i].lastCount+=s.length):(n[i]&&(n[i].lastCount=s.length),a[i][u]=h(s.length,s.mode)+4+r.getCharCountIndicator(s.mode,t))}}o=l}for(let e=0;e<o.length;e++)a[o[e]].end=0;return{map:a,table:n}}(a,n),i=u.find_path(o.map,"start","end"),c=[];for(let e=1;e<i.length-1;e++)c.push(o.table[i[e]].node);return t.fromArray(function(e){return e.reduce((function(e,t){const n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[])}(c))},t.rawSplit=function(e){return t.fromArray(p(e,s.isKanjiModeEnabled()))}},825:function(e,t,n){const r=n(217);function a(e){this.mode=r.NUMERIC,this.data=e.toString()}a.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){let t,n,r;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),r=parseInt(n,10),e.put(r,10);const a=this.data.length-t;a>0&&(n=this.data.substr(t),r=parseInt(n,10),e.put(r,3*a+1))},e.exports=a},826:function(e,t,n){const r=n(217),a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(e){this.mode=r.ALPHANUMERIC,this.data=e}o.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=45*a.indexOf(this.data[t]);n+=a.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(a.indexOf(this.data[t]),6)},e.exports=o},827:function(e,t,n){const r=n(828),a=n(217);function o(e){this.mode=a.BYTE,this.data=new Uint8Array(r(e))}o.getBitsLength=function(e){return 8*e},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},e.exports=o},828:function(e,t,n){"use strict";e.exports=function(e){for(var t=[],n=e.length,r=0;r<n;r++){var a=e.charCodeAt(r);if(a>=55296&&a<=56319&&n>r+1){var o=e.charCodeAt(r+1);o>=56320&&o<=57343&&(a=1024*(a-55296)+o-56320+65536,r+=1)}a<128?t.push(a):a<2048?(t.push(a>>6|192),t.push(63&a|128)):a<55296||a>=57344&&a<65536?(t.push(a>>12|224),t.push(a>>6&63|128),t.push(63&a|128)):a>=65536&&a<=1114111?(t.push(a>>18|240),t.push(a>>12&63|128),t.push(a>>6&63|128),t.push(63&a|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}},829:function(e,t,n){const r=n(217),a=n(216);function o(e){this.mode=r.KANJI,this.data=e}o.getBitsLength=function(e){return 13*e},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=a.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}},e.exports=o},830:function(e,t,n){"use strict";var r={single_source_shortest_paths:function(e,t,n){var a={},o={};o[t]=0;var i,c,l,s,u,d,f,p=r.PriorityQueue.make();for(p.push(t,0);!p.empty();)for(l in c=(i=p.pop()).value,s=i.cost,u=e[c]||{})u.hasOwnProperty(l)&&(d=s+u[l],f=o[l],(void 0===o[l]||f>d)&&(o[l]=d,p.push(l,d),a[l]=c));if(void 0!==n&&void 0===o[n]){var h=["Could not find a path from ",t," to ",n,"."].join("");throw new Error(h)}return a},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t;r;)n.push(r),e[r],r=e[r];return n.reverse(),n},find_path:function(e,t,n){var a=r.single_source_shortest_paths(e,t,n);return r.extract_shortest_path_from_predecessor_list(a,n)},PriorityQueue:{make:function(e){var t,n=r.PriorityQueue,a={};for(t in e=e||{},n)n.hasOwnProperty(t)&&(a[t]=n[t]);return a.queue=[],a.sorter=e.sorter||n.default_sorter,a},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=r},831:function(e,t,n){const r=n(497);t.render=function(e,t,n){let a=n,o=t;void 0!==a||t&&t.getContext||(a=t,t=void 0),t||(o=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),a=r.getOptions(a);const i=r.getImageWidth(e.modules.size,a),c=o.getContext("2d"),l=c.createImageData(i,i);return r.qrToImageData(l.data,e,a),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(c,o,i),c.putImageData(l,0,0),o},t.renderToDataURL=function(e,n,r){let a=r;void 0!==a||n&&n.getContext||(a=n,n=void 0),a||(a={});const o=t.render(e,n,a),i=a.type||"image/png",c=a.rendererOpts||{};return o.toDataURL(i,c.quality)}},832:function(e,t,n){const r=n(497);function a(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function o(e,t,n){let r=e+t;return void 0!==n&&(r+=" "+n),r}t.render=function(e,t,n){const i=r.getOptions(t),c=e.modules.size,l=e.modules.data,s=c+2*i.margin,u=i.color.light.a?"<path "+a(i.color.light,"fill")+' d="M0 0h'+s+"v"+s+'H0z"/>':"",d="<path "+a(i.color.dark,"stroke")+' d="'+function(e,t,n){let r="",a=0,i=!1,c=0;for(let l=0;l<e.length;l++){const s=Math.floor(l%t),u=Math.floor(l/t);s||i||(i=!0),e[l]?(c++,l>0&&s>0&&e[l-1]||(r+=i?o("M",s+n,.5+u+n):o("m",a,0),a=0,i=!1),s+1<t&&e[l+1]||(r+=o("h",c),c=0)):a++}return r}(l,c,i.margin)+'"/>',f='viewBox="0 0 '+s+" "+s+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+f+' shape-rendering="crispEdges">'+u+d+"</svg>\n";return"function"==typeof n&&n(null,p),p}},833:function(e,t,n){},834:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},836:function(e,t,n){"use strict";n(195);var r=n(121),a=n(0),o=n.n(a),i=n(1),c=n.n(i),l=n(34),s="index-module_more_sDgGm",u=["data-testid","visible","onVisibleChange","getPopupContainer"];function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=function(e){return e.parentNode};function h(e){var t=e["data-testid"],n=void 0===t?"more-actions":t,a=e.visible,i=e.onVisibleChange,c=e.getPopupContainer,h=void 0===c?p:c,m=f(e,u),g={horizontal:"more-horizontal",vertical:"more-vertical",circle:"more-circle"},v={};void 0!==a&&(v.visible=e.visible),void 0!==i&&(v.onVisibleChange=e.onVisibleChange);var y=e.iconWidth||16,b={lineHeight:"".concat(y,"px"),padding:(24-y)/2};return o.a.createElement(r.a,d({className:e.className,overlayClassName:e.overlayClassName,type:"menu",getPopupContainer:h,placement:"bottomRight",arrowPointAtCenter:!0,trigger:["click"],content:e.content,hideWhenInactive:!0},v,m),o.a.createElement("span",{className:s,style:b,"data-testid":n},o.a.createElement(l.a,{name:g[e.direction]||g.horizontal,width:y})))}h.defaultProps={direction:"horizontal"},h.propTypes={className:c.a.string,overlayClassName:c.a.string,direction:c.a.oneOf(["horizontal","vertical","circle"]),iconWidth:c.a.number,visible:c.a.bool,content:c.a.node.isRequired,onVisibleChange:c.a.func,"data-testid":c.a.string,getPopupContainer:c.a.func};t.a=h},837:function(e,t,n){"use strict";n(2074);var r=n(1724);n(931);t.a=r.a},838:function(e,t,n){"use strict";n(73);var r=n(38),a=(n(45),n(18)),o=n(0),i=n.n(o),c=n(1),l=n.n(c),s=n(2263),u=n(811),d=n(78),f=n.n(d),p=n(417),h=n(1001),m=n(587),g=n(1714),v=n(933),y=n(1717),b="BookExport-module_docExport_44PUl",k="BookExport-module_title_Hezdm",w="BookExport-module_tips_VJJKo",x="BookExport-module_setting_PXAtw",_="BookExport-module_settingTitle_pEiZb",E="BookExport-module_settingUpload_sNiNV";function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){R(o,r,a,i,c,"next",e)}function c(e){R(o,r,a,i,c,"throw",e)}i(void 0)}))}}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},A(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N(e);if(t){var a=N(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return D(this,n)}}function D(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return M(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=p.a.STATUS,B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&A(e,t)}(l,e);var t,n,o,c=T(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),L(M(t=c.call(this,e)),"handleExport",(function(e){t.setState({exportType:e,typeObj:f.a.THIRD_PARTY_FORMAT[e.toUpperCase()]}),t.settings[e]?t.setState({status:I.SETTING}):t.doExport(e)})),L(M(t),"doExport",function(){var e=j(regeneratorRuntime.mark((function e(n,r){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({status:I.PROCESSING}),a=t.props.book,o={data:{id:a.id,type:n,title:r}},t["exportTo".concat(n)](o);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),L(M(t),"_requestExports",(function(e){return g.a.books.exports(S(S({},t._exportParams),e.data))})),L(M(t),"exportTolakebook",(function(e){t.formRef&&(e.data.options=JSON.stringify(t.formRef.getValue())),t._requestExports(e).then((function(e){"success"===e.state&&(t.setState({exportResultUrl:e.url,status:I.SUCCESS}),v.a.download(e.url))})).catch((function(e){t.setState({status:I.ERROR})}))})),L(M(t),"exportTopdf",function(){var e=j(regeneratorRuntime.mark((function e(n){var r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.formRef&&(n.data.options=JSON.stringify(t.formRef.getValue())),r=1e4,a=66,o=0;case 4:if(!(o<a)){e.next=24;break}return e.prev=5,e.next=8,t._requestExports(n);case 8:i=e.sent,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),t.setState({errorMessage:e.t0.message,status:I.ERROR}),e.abrupt("return");case 15:if("success"!==i.state){e.next=19;break}return t.setState({exportResultUrl:i.url,status:I.SUCCESS}),v.a.download(i.url),e.abrupt("return");case 19:return e.next=21,Object(u.a)(r);case 21:o++,e.next=4;break;case 24:t.setState({errorMessage:__("处理超时..."),status:I.ERROR});case 25:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}()),L(M(t),"renderEntry",(function(){return i.a.createElement("div",{className:"entry"},i.a.createElement("div",{className:k},__("导出知识库")),i.a.createElement("div",{className:w},__("可将知识库内容批量导出，点击下方选择你需要的格式")),i.a.createElement(h.a,{mode:"export",types:t._formats,onSelect:t.handleExport}))})),t._exportParams=e.exportParams||{},t._formats=t.props.formats||f.a.BOOK_EXPORT_FORMATS,t.state={exportType:null,typeObj:null,status:I.INIT,errorMessage:"",exportResultUrl:""},t.settings={pdf:[{label:__("导出文档大纲到 PDF 中"),default:!0,name:"enableToc",value:1}]},t}return t=l,(n=[{key:"getExportTip",value:function(){return"User"===this.props.group.type?__("可将知识库内容批量导出，点击下方选择你需要的格式。"):__("可将知识库内容批量导出，点击下方选择你需要的格式（仅团队管理员有操作权限）。")}},{key:"renderProcessing",value:function(){var e=this.state.typeObj;return e?i.a.createElement("div",{className:x},i.a.createElement("h1",{className:_},__("导出知识库为 {type}",{type:e.name})),i.a.createElement(p.a.Processing,{tip:__("正在导出中...")})):null}},{key:"renderSuccess",value:function(){var e=this.state.typeObj;return e?i.a.createElement("div",{className:x},i.a.createElement("h1",{className:_},__("导出知识库为 {type}",{type:e.name})),i.a.createElement(p.a.Success,{tip:__("文件生成成功"),action:i.a.createElement(y.a,{href:this.state.exportResultUrl,target:"_blank"},__("点击下载"))})):null}},{key:"renderSetting",value:function(){var e=this,t=this.state,n=t.typeObj,r=t.status;if(!n)return null;var o,c=this.settings[n.key];return c?(this._exportParams.toc_node_title&&(o="".concat(this.props.book.name," - ").concat(this._exportParams.toc_node_title)),i.a.createElement("div",{className:x,style:{display:r===I.SETTING?"block":"none"}},i.a.createElement("h1",{className:_},__("导出知识库为 {type}",{type:n.name})),i.a.createElement(p.a.AdvanceSetting,{wrappedComponentRef:function(t){e.formRef=t},title:o,target:this.props.book,type:n,settings:c,actions:i.a.createElement(a.a,{type:"primary","data-testid":"btn-export",className:E,onClick:function(){return e.doExport(e.state.exportType,o)}},__("导出"))}))):null}},{key:"renderError",value:function(){var e=this,t=this.state.typeObj;return t?i.a.createElement("div",{className:x},i.a.createElement("h1",{className:_},__("导出知识库为 {type}",{type:t.name})),i.a.createElement(p.a.Error,{tip:__("文件生成失败"),error:this.state.errorMessage,action:i.a.createElement(a.a,{icon:i.a.createElement(s.a,null),size:"small","data-testid":"btn-reload",onClick:function(){e.doExport(e.state.exportType)}},__("重新生成"))})):null}},{key:"render",value:function(){var e=this.state.status,t=null;return e===I.PROCESSING?t=this.renderProcessing():e===I.SUCCESS?t=this.renderSuccess():e===I.ERROR?t=this.renderError():e===I.INIT&&(t=this.renderEntry()),i.a.createElement(r.a,{visible:this.props.visible,title:null,footer:null,width:360,onCancel:this.props.onCancel,maskClosable:!1},i.a.createElement("div",{"data-testid":"book-export",className:b,onClick:function(e){e.stopPropagation()}},t,this.renderSetting()))}}])&&P(t.prototype,n),o&&P(t,o),Object.defineProperty(t,"prototype",{writable:!1}),l}(i.a.Component);B.propTypes={book:l.a.object.isRequired,visible:l.a.bool.isRequired,onCancel:l.a.func.isRequired,formats:l.a.array,exportParams:l.a.object};t.a=Object(m.b)(B,!0)},839:function(e,t,n){"use strict";(function(t){var r=n(1002),a=n(1003),o=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,i=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,c=/^[a-zA-Z]:/,l=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function s(e){return(e||"").toString().replace(l,"")}var u=[["#","hash"],["?","query"],function(e,t){return p(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],d={hash:1,query:1};function f(e){var n,r=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},a={},i=typeof(e=e||r);if("blob:"===e.protocol)a=new m(unescape(e.pathname),{});else if("string"===i)for(n in a=new m(e,{}),d)delete a[n];else if("object"===i){for(n in e)n in d||(a[n]=e[n]);void 0===a.slashes&&(a.slashes=o.test(e.href))}return a}function p(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function h(e,t){e=s(e),t=t||{};var n,r=i.exec(e),a=r[1]?r[1].toLowerCase():"",o=!!r[2],c=!!r[3],l=0;return o?c?(n=r[2]+r[3]+r[4],l=r[2].length+r[3].length):(n=r[2]+r[4],l=r[2].length):c?(n=r[3]+r[4],l=r[3].length):n=r[4],"file:"===a?l>=2&&(n=n.slice(2)):p(a)?n=r[4]:a?o&&(n=n.slice(2)):l>=2&&p(t.protocol)&&(n=r[4]),{protocol:a,slashes:o||p(a),slashesCount:l,rest:n}}function m(e,t,n){if(e=s(e),!(this instanceof m))return new m(e,t,n);var o,i,l,d,g,v,y=u.slice(),b=typeof t,k=this,w=0;for("object"!==b&&"string"!==b&&(n=t,t=null),n&&"function"!=typeof n&&(n=a.parse),o=!(i=h(e||"",t=f(t))).protocol&&!i.slashes,k.slashes=i.slashes||o&&t.slashes,k.protocol=i.protocol||t.protocol||"",e=i.rest,("file:"===i.protocol&&(2!==i.slashesCount||c.test(e))||!i.slashes&&(i.protocol||i.slashesCount<2||!p(k.protocol)))&&(y[3]=[/(.*)/,"pathname"]);w<y.length;w++)"function"!=typeof(d=y[w])?(l=d[0],v=d[1],l!=l?k[v]=e:"string"==typeof l?~(g=e.indexOf(l))&&("number"==typeof d[2]?(k[v]=e.slice(0,g),e=e.slice(g+d[2])):(k[v]=e.slice(g),e=e.slice(0,g))):(g=l.exec(e))&&(k[v]=g[1],e=e.slice(0,g.index)),k[v]=k[v]||o&&d[3]&&t[v]||"",d[4]&&(k[v]=k[v].toLowerCase())):e=d(e,k);n&&(k.query=n(k.query)),o&&t.slashes&&"/"!==k.pathname.charAt(0)&&(""!==k.pathname||""!==t.pathname)&&(k.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,a=n[r-1],o=!1,i=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),i++):i&&(0===r&&(o=!0),n.splice(r,1),i--);return o&&n.unshift(""),"."!==a&&".."!==a||n.push(""),n.join("/")}(k.pathname,t.pathname)),"/"!==k.pathname.charAt(0)&&p(k.protocol)&&(k.pathname="/"+k.pathname),r(k.port,k.protocol)||(k.host=k.hostname,k.port=""),k.username=k.password="",k.auth&&(d=k.auth.split(":"),k.username=d[0]||"",k.password=d[1]||""),k.origin="file:"!==k.protocol&&p(k.protocol)&&k.host?k.protocol+"//"+k.host:"null",k.href=k.toString()}m.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||a.parse)(t)),o[e]=t;break;case"port":o[e]=t,r(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,/:\d+$/.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";o[e]=t.charAt(0)!==i?i+t:t}else o[e]=t;break;default:o[e]=t}for(var c=0;c<u.length;c++){var l=u[c];l[4]&&(o[l[1]]=o[l[1]].toLowerCase())}return o.origin="file:"!==o.protocol&&p(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=a.stringify);var t,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var o=r+(n.slashes||p(n.protocol)?"//":"");return n.username&&(o+=n.username,n.password&&(o+=":"+n.password),o+="@"),o+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(o+=n.hash),o}},m.extractProtocol=h,m.location=f,m.trimLeft=s,m.qs=a,e.exports=m}).call(this,n(109))},84:function(e,t,n){!function(t){var n,r={},a={16:!1,18:!1,17:!1,91:!1},o="all",i={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},c={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},l=function(e){return c[e]||e.toUpperCase().charCodeAt(0)},s=[];for(n=1;n<20;n++)c["f"+n]=111+n;function u(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function d(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var f={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function p(e){for(n in a)a[n]=e[f[n]]}function h(e,t,n){var a,o;a=g(e),void 0===n&&(n=t,t="all");for(var i=0;i<a.length;i++)o=[],(e=a[i].split("+")).length>1&&(o=v(e),e=[e[e.length-1]]),e=e[0],(e=l(e))in r||(r[e]=[]),r[e].push({shortcut:a[i],scope:t,method:n,key:a[i],mods:o})}for(n in i)h[n]=!1;function m(){return o||"all"}function g(e){var t;return""==(t=(e=e.replace(/\s/g,"")).split(","))[t.length-1]&&(t[t.length-2]+=","),t}function v(e){for(var t=e.slice(0,e.length-1),n=0;n<t.length;n++)t[n]=i[t[n]];return t}function y(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,(function(){n(window.event)}))}y(document,"keydown",(function(e){!function(e){var t,n,o,c,l,d;if(t=e.keyCode,-1==u(s,t)&&s.push(t),93!=t&&224!=t||(t=91),t in a)for(o in a[t]=!0,i)i[o]==t&&(h[o]=!0);else if(p(e),h.filter.call(this,e)&&t in r)for(d=m(),c=0;c<r[t].length;c++)if((n=r[t][c]).scope==d||"all"==n.scope){for(o in l=n.mods.length>0,a)(!a[o]&&u(n.mods,+o)>-1||a[o]&&-1==u(n.mods,+o))&&(l=!1);(0!=n.mods.length||a[16]||a[18]||a[17]||a[91])&&!l||!1===n.method(e,n)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}(e)})),y(document,"keyup",(function(e){var t,n=e.keyCode,r=u(s,n);if(r>=0&&s.splice(r,1),93!=n&&224!=n||(n=91),n in a)for(t in a[n]=!1,i)i[t]==n&&(h[t]=!1)})),y(window,"focus",(function(){for(n in a)a[n]=!1;for(n in i)h[n]=!1}));var b=t.key;t.key=h,t.key.setScope=function(e){o=e||"all"},t.key.getScope=m,t.key.deleteScope=function(e){var t,n,a;for(t in r)for(n=r[t],a=0;a<n.length;)n[a].scope===e?n.splice(a,1):a++},t.key.filter=function(e){var t=(e.target||e.srcElement).tagName;return!("INPUT"==t||"SELECT"==t||"TEXTAREA"==t)},t.key.isPressed=function(e){return"string"==typeof e&&(e=l(e)),-1!=u(s,e)},t.key.getPressedKeyCodes=function(){return s.slice(0)},t.key.noConflict=function(){var e=t.key;return t.key=b,e},t.key.unbind=function(e,t){var n,a,o,i,c,s=[];for(n=g(e),i=0;i<n.length;i++){if((a=n[i].split("+")).length>1&&(s=v(a),e=a[a.length-1]),e=l(e),void 0===t&&(t=m()),!r[e])return;for(o=0;o<r[e].length;o++)(c=r[e][o]).scope===t&&d(c.mods,s)&&(r[e][o]={})}},e.exports=h}(this)},840:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(79),i=n(245),c=n(99),l=n(588);t.a=Object(c.b)(Object(o.c)((function(e){return{guide:e.guide}}))((function(e){var t=e.guide,n=e.tip_id;return Object(r.useEffect)((function(){var e=i.a.findFeatureGuide({tip_id:n,type:"lite"});e&&i.a.readLiteFeatureGuide(e)}),[]),a.a.createElement("div",{className:e.className||"",style:e.style,"data-testid":"guide_".concat(n),onClick:function(){var t=i.a.findFeatureGuide({tip_id:n,type:"mini"});i.a.readMiniFeatureGuide(t,e.dispatch)}},e.children,("#guide"===window.location.hash||!t.readTip[n])&&a.a.createElement(l.a.Mini,null))})),!1)},843:function(e,t,n){"use strict";n(73);var r=n(38),a=(n(45),n(18)),o=(n(101),n(26)),i=(n(179),n(98)),c=n(0),l=n.n(c),s=n(1),u=n.n(s),d=n(487),f=n(2263),p=n(811),h=n(1717),m=n(933),g=n(1714),v=n(78),y=n.n(v),b=n(587),k=n(1001),w=n(417),x="DocExport-module_docExport_zwx9b",_="DocExport-module_title_eGdGG",E="DocExport-module_entry_qjwYu",C="DocExport-module_setting_yai1Y",O="DocExport-module_settingTitle_IjcSw",S="DocExport-module_settingUpload_3ymtX";function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){A(o,r,a,i,c,"next",e)}function c(e){A(o,r,a,i,c,"throw",e)}i(void 0)}))}}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N=w.a.STATUS,L=function(e){var t=e.bookId,n=e.exportParams,s=e.onCancel,u=e.canExportMultiple,v=function(e){var t=e.doc,n=e.bookId,r=e.exportParams,a=D(Object(c.useState)(t||null),2),o=a[0],i=a[1],l=D(Object(c.useState)(!1),2),s=l[0],u=l[1],d=D(Object(c.useState)(t?y.a.SUPPORTED_EXPORT_FORMATS[t.type]:[]),2),f=d[0],p=d[1];return Object(c.useEffect)((function(){var e=function(){var e=T(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.doc_id){e.next=11;break}return u(!0),e.next=5,g.a.docs.findOne({id:r.toc_node_url,book_id:n});case 5:t=e.sent,i(t),u(!1),p(y.a.SUPPORTED_EXPORT_FORMATS[t.type]),e.next=12;break;case 11:p([y.a.THIRD_PARTY_FORMAT.LAKE]);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();o||e()}),[]),{state:{currentDoc:o,loading:s,formats:f}}}(e),b=v.state,R=b.currentDoc,P=b.loading,A=b.formats,M=D(Object(c.useState)(),2),L=M[0],I=M[1],B=D(Object(c.useState)(),2),z=B[0],F=B[1],U=D(Object(c.useState)(),2),V=U[0],q=U[1],H=D(Object(c.useState)(N.INIT),2),W=H[0],Y=H[1],G=D(Object(c.useState)(""),2),X=G[0],K=G[1],Z=Object(c.useRef)(),$={markdown:[[{label:__("导出 LaTeX 公式图片"),name:"latexType",default:!0,value:1},{label:__("导出 LaTeX 公式为 Markdown 语法"),name:"latexType",value:2}],{label:__("导出保持语雀的锚点"),name:"enableAnchor",value:1},{label:__("导出保持语雀的换行"),name:"enableBreak",value:1}],pdf:[{label:__("导出文档大纲"),default:!0,name:"enableToc",value:1}]},Q=function(){var e=T(regeneratorRuntime.mark((function e(r){var a,o,i,c,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={type:r,force:0},Z.current&&(o=Z.current.getValue())&&(a.options=JSON.stringify(o)),c=66e4/(i=5e3),l=0;case 5:if(!(l<c)){e.next=33;break}if(e.prev=6,"lakebook"!==r){e.next=13;break}return e.next=10,g.a.books.exports(j(j({},a),{},{id:t,title:n.toc_node_title,toc_node_uuid:n.toc_node_uuid,toc_node_url:n.toc_node_url,with_children:!0}));case 10:s=e.sent,e.next=17;break;case 13:if(!R){e.next=17;break}return e.next=16,g.a.docs.exports(j(j({},a),{},{id:R.id}));case 16:s=e.sent;case 17:if("success"!==s.state){e.next=19;break}return e.abrupt("return",s);case 19:if("error"!==s.state){e.next=23;break}if(!s.error){e.next=22;break}return e.abrupt("return",s.error);case 22:return e.abrupt("return",{error:s.message});case 23:return e.next=25,Object(p.a)(i);case 25:l++,e.next=31;break;case 28:return e.prev=28,e.t0=e.catch(6),e.abrupt("return",{error:e.t0.message});case 31:e.next=5;break;case 33:throw new Error("处理超时，请重试...");case 34:case"end":return e.stop()}}),e,null,[[6,28]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=T(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R||y.a.SUPPORTED_EXPORT_FORMATS[R.type]){e.next=2;break}return e.abrupt("return");case 2:return I(t),Y(N.PROCESSING),q(null),e.prev=5,e.next=8,Q(t);case 8:if(!(n=e.sent).error){e.next=13;break}return Y(N.ERROR),K(n.error),e.abrupt("return");case 13:I(t),Y(N.SUCCESS),q(n.url),m.a.download(n.url),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(5),Y(N.ERROR),K(e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[5,19]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(e){F(y.a.THIRD_PARTY_FORMAT[e.toUpperCase()]),!R||"Mind"!==R.type&&"Board"!==R.type||e!==y.a.THIRD_PARTY_FORMAT.JPG.key&&e!==y.a.THIRD_PARTY_FORMAT.PNG.key?("Show"!==(null==R?void 0:R.type)||"pdf"!==e)&&$[e]?(I(e),Y(N.SETTING)):J(e):m.a.export(e,{filename:R.title})},te=null;return W===N.PROCESSING?te=z?l.a.createElement("div",{className:C},l.a.createElement("h1",{className:O},__("导出 {type}",{type:z.name})),l.a.createElement(w.a.Processing,{tip:__("正在导出中...")})):null:W===N.SUCCESS?te=z?l.a.createElement("div",{className:C},l.a.createElement("h1",{className:O},__("导出 {type}",{type:z.name})),l.a.createElement(w.a.Success,{tip:__("文件生成成功"),action:l.a.createElement(h.a,{href:V,target:"_blank"},__("点击下载"))})):null:W===N.ERROR?te=l.a.createElement(w.a.Error,{tip:__("文件生成失败"),error:X,action:l.a.createElement(a.a,{icon:l.a.createElement(f.a,null),size:"small",onClick:function(){J(L)}},__("重新生成"))}):W===N.INIT&&(te=l.a.createElement("div",{className:E},l.a.createElement("div",{className:_},__("导出文档")),P?l.a.createElement(i.a,null):l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{mode:"export",types:A,onSelect:ee})),u&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:_},__("导出文档集合"),l.a.createElement(o.a,{title:__("包含当前文档及其子节点文档")},l.a.createElement(d.a,{style:{marginLeft:8}}))),l.a.createElement(k.a,{mode:"export",types:[y.a.THIRD_PARTY_FORMAT.LAKEBOOK],onSelect:ee})))),l.a.createElement(r.a,{title:null,onCancel:s,visible:!0,footer:null,width:640,maskClosable:!1},l.a.createElement("div",{className:x},te,function(){if(!z||!R)return null;var e=$[z.key];return e?l.a.createElement("div",{className:C,style:{display:W===N.SETTING?"block":"none"}},l.a.createElement("h1",{className:O},__("{type} 导出配置",{type:z.name})),l.a.createElement(w.a.AdvanceSetting,{wrappedComponentRef:Z,target:R,type:z,settings:e,actions:l.a.createElement(a.a,{type:"primary",className:S,onClick:function(){return J(L)}},__("导出"))})):null}()))};L.defaultProps={exportParams:{}},L.propTypes={doc:u.a.object,exportParams:u.a.object,bookId:u.a.number.isRequired,onCancel:u.a.func.isRequired,canExportMultiple:u.a.bool};t.a=Object(b.b)(L,!0)},845:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o}));var r=n(477);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"Doc"===e.target_type&&e.ext&&e.ext.startsWith("lake")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.isImage)(e)||Object(r.isSketch)(e)||"Doc"===e.target_type&&e.ext&&"lake"===e.ext}var i={filterByType:function(e,t,n){function a(t){return e.filter((function(e){return t(n?e[n]:e)}))}switch(t){case"image":return a(r.isImage);case"pdf":return a(r.isPDF);case"video":return a(r.isVideo);case"audio":return a(r.isAudio);case"office":return a(r.isOffice);case"else":return a((function(e){return!(Object(r.isImage)(e)||Object(r.isPDF)(e)||Object(r.isVideo)(e)||Object(r.isAudio)(e)||Object(r.isOffice)(e))}));default:return e}},getTargetUrl:function(e){var t=e.id,n=e.type,r=e.slug,a=e.book,o=e.share,i="";return i="ArtboardGroup"===n?"/artboards/".concat(t):"/".concat("Resource"===n?t:r),o?"Doc"===o.target_type?i="/docs/share/".concat(o.token):"Book"===o.target_type&&(i="/books/share/".concat(o.token,"/").concat(r)):(a&&(i="/".concat(a.slug).concat(i)),a&&a.user&&(i="/".concat(a.user.login).concat(i))),i},getDocType:function(e){var t=e.type;if(!t&&(e.target||e.subject_type||e.target_type)&&(t=e.target.type||e.subject_type||e.target_type),"ArtboardGroup"!==t&&"Design"!==t||(t="Artboard"),"Group"!==t&&"Publication"!==t&&"User"!==t||(t="Book"),"Resource"===t){var n={name:e.target&&e.target.ext?"*.".concat(e.target.ext):e.title};t=Object(r.getFileIcon)({ext:Object(r.getExtname)(n)})}return"Doc"===t&&"mark"===e.action_type?e.target.type:t}};t.a=i},847:function(e,t,n){"use strict";n(45);var r=n(18),a=(n(179),n(98)),o=(n(195),n(121)),i=(n(57),n(23)),c=(n(126),n(55)),l=(n(136),n(36)),s=(n(73),n(38)),u=n(0),d=n.n(u),f=n(1),p=n.n(f),h=n(142),m=n(408),g=n(266),v=n(44),y=n.n(v),b=n(224),k=n.n(b),w=n(423),x=n(78),_=n.n(x),E=n(939);var C=function(e,t){var n=Object(u.useRef)();Object(u.useEffect)((function(){n.current=e}),[e]),Object(u.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])},O=n(2276),S=n(587),R=n(2721),j=n(1717),P=n(933),A=n(1714),T=n(1001),D=n(417),M="DocImport-module_docImport_uDZWD",N="DocImport-module_title_vylxD",L="DocImport-module_tips_gx2+N",I="DocImport-module_processingModal_5vLO+",B="DocImport-module_setting_6ttU6",z="DocImport-module_settingTitle_EsA43",F="DocImport-module_settingUpload_WXf0g",U="DocImport-module_processing_K3nVL",V="DocImport-module_processingTitle_UzLg1",q="DocImport-module_processingFooter_xOxG5",H="DocImport-module_fileList_jRvlw",W="DocImport-module_fileItem_gtT95",Y="DocImport-module_fileItemIcon_SdTY-",G="DocImport-module_fileItemTitle_qprAi",X="DocImport-module_spin_aEZeg",K="DocImport-module_uploadingStatus_UWCen",Z="DocImport-module_hr_nD0TF",$="DocImport-module_footerTitle_2O1eI";function Q(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function J(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Q(o,r,a,i,c,"next",e)}function c(e){Q(o,r,a,i,c,"throw",e)}i(void 0)}))}}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function re(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||oe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){if(e){if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ce=s.a.confirm,le=D.a.STATUS,se=window.appData.settings&&window.appData.settings.max_import_task_count||2,ue=function(e){var t=e.visible,n=e.book,f=e.group,p=e.formats,v=e.importType,b=e.importParams,x=ae(Object(u.useState)(le.INIT),2),_=x[0],S=x[1],Q=ae(Object(u.useState)([]),2),ee=Q[0],ne=Q[1],ie=ae(Object(u.useState)(0),2),ue=ie[0],de=ie[1],fe=ae(Object(u.useState)(0),2),pe=fe[0],he=fe[1],me=ae(Object(u.useState)(0),2),ge=me[0],ve=me[1],ye=ae(Object(u.useState)(),2),be=ye[0],ke=ye[1],we=ae(Object(u.useState)(!1),2),xe=we[0],_e=we[1],Ee=ae(Object(u.useState)(!0),2),Ce=Ee[0],Oe=Ee[1],Se=ae(Object(u.useState)(!1),2),Re=Se[0],je=Se[1],Pe=ae(Object(u.useState)([]),2),Ae=Pe[0],Te=Pe[1],De=Object(u.useRef)();Object(O.a)(!Re&&_===le.PROCESSING,__("还没导入完成，确认关闭窗口吗？"));var Me=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t){if(Ae.length>0)return Ae.push(e),void Te(re(Ae));Ae.push(e)}var n=e.data,r=e.file,a=e.filename,o=e.onError,i=e.onSuccess;e.__uploaded=!0;var c=te(te(te({},b),n),{},{filename:a,path:r.path});r.uploading=!0,P.a.upload({requestData:c,params:e,onError:o,onSuccess:function(e){i(e,r)}})},Ne={gitbook:[{default:k.a.windows,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}],markdown:[{default:!0,name:"enableLatex",label:__("识别 Markdown 文件中 LaTeX 公式语法"),value:1},{default:!1,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}],confluence:[{type:"text",label:d.a.createElement(c.a,{type:"flex",justify:"space-between"},d.a.createElement(l.a,null,__("批量替换链接")),d.a.createElement(l.a,null,d.a.createElement(j.a,{href:"https://www.yuque.com/yuque/eaghk3/bu0hnd",target:"_blank"},__("如何从 Confluence 导出？")))),colon:!1,placeholder:__("请输入 Confluence 地址"),name:"host",autoFocus:!0,validateOnBlur:!0,validator:function(e,t,n){var r=w.validator.httpURL(t);Oe(!r),n(r)}},{default:!1,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}],zip:[[{default:"html",name:"fileFormat",label:__("html 文件，即 .html, .htm 文件"),value:"html"},{name:"fileFormat",label:__("markdown 文件，即 .md, .markdown, .mark 文件"),value:"markdown"}],{default:!0,name:"overrideExistsNode",label:__("是否覆盖相同节点的已有内容，否则自动重命名"),value:!0},{default:!0,name:"useFilenameAsTitle",label:__("是否使用文件名作为目录节点名称，否则会取内容中的标题作为名称"),value:!0},{default:!0,name:"enableLatex",label:__("识别 Markdown 文件中 LaTeX 公式语法"),value:1},{default:!1,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}]};Object(u.useEffect)((function(){_!==le.PROCESSING||xe||S(le.SUCCESS)}),[_,xe]);var Le=function(e){return e.response&&e.response.data&&e.response.data.status},Ie=function(e){var t={};if(e){var r,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=oe(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;t[o.id]=o}}catch(e){a.e(e)}finally{a.f()}}var c=ee.map((function(e){if(!e.response||!e.response.data)return e;var n=t[e.response.data.id];if(!n)return e;var r=y()(n,"error.limitError");if(r&&400===r.status&&r.code){if(window.appData.isDesktopApp)return i.a.error(__("桌面端不支持此操作，请去 web 端完成"));var a=R.a.Message.getMessage(r.code,{isImport:!0},r)||{},o=a.msg,c=a.alwaysOpen,l=a.level,s=a.callback;if(o)return s(i.a[l||"error"](o,c?0:void 0)),je(!0),e}return e.response.data=te(te({},e.response.data),n),n.status===le.SUCCESS?(e.status=le.SUCCESS,e.url=n.url):(n.status===le.ERROR||n.error)&&(e.status=le.ERROR),e})),l=0,s=0;c.forEach((function(e){var t=Le(e);e.status!==le.ERROR&&t!==le.ERROR&&t!==le.SUCCESS||l++,e.status!==le.ERROR&&t!==le.ERROR||s++})),c.filter((function(e){var t=Le(e);return t===le.PENDING||!(null!=t||!e.uploading&&"done"!==e.status&&100!==e.percent)})).length<se&&function(){for(var e=Ae.shift();e&&e.__uploaded;)e=Ae.shift();e&&Me(e,!0),Te(re(Ae))}(),l>pe&&he(l),ve(s),ne(c),ue===l?(_e(!1),function(){if(n.toc){var e="highlightBookImport_".concat(n.slug,"_").concat(n.id),t=n.toc[0];E.a.set(e,t?t.uuid:"_")}}()):S(le.PROCESSING)};C(J(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=ee.filter((function(e){return e.response&&e.response.data}))).length){e.next=3;break}return e.abrupt("return",Ie());case 3:if(t){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,A.a.import.getImportResult({files:JSON.stringify(n.map((function(e){return{convertTaskId:e.response.data.convertTaskId,id:e.response.data.id,type:e.response.data.type,name:e.name}}))),toc_node_uuid:b&&b.toc_node_uuid});case 7:r=e.sent,Ie(r);case 9:case"end":return e.stop()}}),e)}))),xe?5e3:null);var Be=function(e){ke(p.find((function(t){return t.key===e}))),Ne[e]&&S(le.SETTING),"confluence"===e&&Oe(!1)},ze=function(){return De.current.getValue()},Fe=function(e){return!!Ne[e.key]},Ue=function(e){var t=re(e.fileList),n=t.length;n!==t.filter((function(e){var t=Le(e);return t===le.ERROR||t===le.SUCCESS})).length&&S(le.PROCESSING),_e(!0),ne(t),de(n)},Ve=function(){_e(!1),S((function(t){if(t!==le.PROCESSING)return e.onCancel(),t;ne((function(t){return e.onCancel(),t}))}))},qe=function(){var t,r;if(b&&"doc_toc"===b.create_from)return Ve(),ee.forEach((function(e){if(!t){var a=e.response&&e.response.data||{};a.import_toc&&a.import_toc[0]&&a.import_toc[0].url?(t="/".concat(f.login,"/").concat(n.slug,"/").concat(a.import_toc[0].url),r=a.import_toc[0]):"doc"!==a.type&&"Doc"!==a.type||"success"!==a.status||!a.slug||(t="/".concat(f.login,"/").concat(n.slug,"/").concat(a.slug),r=a)}})),void(t&&(e.onRead?e.onRead(r):P.a.href(t)));P.a.href("/".concat(f.login,"/").concat(n.slug))};return d.a.createElement(d.a.Fragment,null,d.a.createElement(s.a,{title:null,onCancel:function(e){_!==le.INIT&&_!==le.DONE?(e.preventDefault(),e.stopPropagation(),_===le.PROCESSING?ce({title:__("导入尚未完成，确认要停止导入?"),content:d.a.createElement("div",null,__("处理中的文件无法取消，请稍后从知识库中删除。")),okText:__("确认"),okType:"danger",cancelText:__("取消"),centered:!0,onOk:Ve,onCancel:function(){}}):Ve()):Ve()},visible:t,footer:null,centered:!0,width:_===le.INIT?160*Math.min(p.length,4):406,maskClosable:!1,className:_!==le.INIT&&I},d.a.createElement("div",{className:M},d.a.createElement("div",{className:"entry",style:{display:_===le.INIT?"block":"none"}},d.a.createElement("div",{className:N},__("导入")),d.a.createElement("div",{className:L},__("点击下方格式进行导入，可一次导入多个文件")),d.a.createElement(T.a,{mode:"import",book:n,types:p,importType:v,disableUpload:Fe,onSelect:Be,onUploadChange:Ue,customRequest:Me,maxCount:0})),function(){if(!be)return null;var e=Ne[be.key];return e?d.a.createElement("div",{className:B,style:{display:_===le.SETTING?"block":"none"}},d.a.createElement("h1",{className:z},__("{type} 导入配置",{type:be.name})),d.a.createElement(D.a.AdvanceSetting,{wrappedComponentRef:De,type:be,settings:e,actions:d.a.createElement(T.a.FileUpload,{mode:"import",book:n,getParamsOption:ze,fileOption:be,importType:v,customRequest:Me,onUploadChange:Ue,maxCount:0},d.a.createElement(r.a,{type:"primary",disabled:!Ce,className:F},__("选择本地文件")))})):null}(),_!==le.INIT&&_!==le.SETTING?d.a.createElement("div",{className:U},d.a.createElement("h1",{className:V},_===le.DONE?__("导入完成"):__("导入中")),d.a.createElement("div",{className:H},ee.map((function(e){return d.a.createElement(c.a,{type:"flex",justify:"space-between",align:"middle",className:W,key:e.uid},d.a.createElement(l.a,null,d.a.createElement(c.a,{type:"flex",align:"middle"},d.a.createElement(l.a,null,d.a.createElement("img",{src:be.icon,className:Y}),function(e){var t,n=e.name,r=Le(e);return t=e.url?d.a.createElement("a",{className:G,href:e.url,target:"_blank"},n):d.a.createElement("h2",{className:G},n),e.status!==le.ERROR&&r!==le.ERROR||(t=d.a.createElement(o.a,{placement:"right",content:__("文件处理失败，请重新上传。")},t)),t}(e)))),d.a.createElement(l.a,null,function(e){var t=Le(e);if(e.status===le.ERROR||t===le.ERROR){var n=e.error&&e.error.response&&e.error.response.data&&e.error.response.data.message;n||(n=e.response&&e.response.data&&e.response.data.error&&e.response.data.error.message);var r=e.response&&e.response.data&&e.response.data.id;return r&&(n="".concat(n," [id: ").concat(r,"]")),n?n+=__("（请重新上传，如果持续失败，请反馈到语雀）"):n=__("文件处理失败，请重新上传，如果持续失败，请反馈到语雀。"),d.a.createElement("span",null,d.a.createElement(o.a,{placement:"right",content:n},d.a.createElement(h.a,null)))}return e.status===le.SUCCESS||t===le.SUCCESS?d.a.createElement("span",null,d.a.createElement(m.a,null)):d.a.createElement("span",null,d.a.createElement("span",{className:K},0===e.percent&&__("等待中"),100===e.percent&&__("处理中"),0!==e.percent&&100!==e.percent&&d.a.createElement("span",null,parseInt(e.percent,10),"%")),d.a.createElement(a.a,{indicator:d.a.createElement(g.a,{style:{fontSize:16},spin:!0}),className:X}))}(e)))}))),d.a.createElement("div",{className:Z}),function(){var e;if(0!==pe&&ue===pe){var t;ee.forEach((function(e){if(!t){e.status===le.ERROR&&((t=e.error&&e.error.response&&e.error.response.data&&e.error.response.data.message)||(t=e.response&&e.response.data&&e.response.data.error&&e.response.data.error.message));var n=e.response&&e.response.data&&e.response.data.id;t&&n&&(t="".concat(t," [id: ").concat(n,"]"))}}));var n=ge?__("导入结束，有文件导入失败"):__("导入完成");t&&(n="".concat(n," (").concat(t,")")),e=d.a.createElement(c.a,{type:"flex",justify:"space-between",align:"middle"},d.a.createElement(l.a,null,ge?d.a.createElement(h.a,null):d.a.createElement(m.a,null),d.a.createElement("span",{className:$},n)),d.a.createElement(l.a,null,d.a.createElement(r.a,{type:"primary",onClick:qe},__("查看"))))}else _!==le.PROCESSING&&_!==le.UPLOADING&&_!==le.PENDING||(e=d.a.createElement("div",null,d.a.createElement(a.a,{indicator:d.a.createElement(g.a,{style:{fontSize:16},spin:!0})}),d.a.createElement("span",{className:$},__("文件导入中")),"(".concat(pe,"/").concat(ue,")")));return d.a.createElement("div",{className:q},e)}()):null)))};ue.defaultProps={visible:!0,importType:_.a.IMPORT_TYPE.PARSE},ue.propTypes={visible:p.a.bool,book:p.a.object.isRequired,formats:p.a.array.isRequired,importType:p.a.oneOf([_.a.IMPORT_TYPE.CREATE,_.a.IMPORT_TYPE.PARSE]),onCancel:p.a.func.isRequired,onRead:p.a.func,importParams:p.a.object,group:p.a.object.isRequired};t.a=Object(S.b)(ue,!0)},851:function(e,t,n){"use strict";n.d(t,"a",(function(){return Gi})),n.d(t,"b",(function(){return Pa})),n.d(t,"c",(function(){return Xi}));var r=n(0),a=n.n(r),o=n(1),i=n.n(o),c=n(23),l=n(35),s=n(176),u=n(277),d=n(25),f=n(18),p=n(47),h=n(26),m=n(74),g=n(320),v=n(257),y=n(937),b=n(42),k=n(8),w=n.n(k),x=n(71),_=n.n(x),E=n(28),C=n(7),O=n.n(C),S=n(6),R=n.n(S),j=n(9),P=n.n(j),A=n(10),T=n.n(A),D=n(4),M=n.n(D),N=n(3),L=n.n(N),I=n(24),B=n.n(I),z=n(5),F=n.n(z),U=n(41),V=n.n(U),q=n(103),H=n.n(q),W=n(19),Y=n.n(W),G=n(180),X=n.n(G),K=n(2095),Z=n(29),$=n.n(Z),Q=n(483),J=n.n(Q),ee=n(69),te=n.n(ee),ne=n(17),re=n(1553),ae=n(326),oe=n(850),ie=n(1938),ce=n(2303),le=n(283),se=n(51),ue=n.n(se),de=n(68),fe=n.n(de),pe=n(30),he=n.n(pe),me=n(106),ge=n.n(me),ve=n(33),ye=n.n(ve),be=n(54),ke=n.n(be),we=n(20),xe=n.n(we),_e=n(243),Ee=n.n(_e),Ce={locale:b.LocaleUtil.getLocale(),translations:{"en-us":{"幻灯已复制到剪切板":"Copied show to clipboard","幻灯已剪切到剪切板":"Cut show to clipboard","图片上传失败":"Image upload failed","对齐":"Align","左对齐":"Align left","水平居中对齐":"Align center","右对齐":"Align right","顶对齐":"Align top","垂直居中对齐":"Align middle","底对齐":"Align bottom","层级":"Hierarchy","置顶":"Front","置底":"Back","上移一层":"Forward","下移一层":"Backward","剪切":"Cut","复制":"Copy","粘贴":"Paste","删除":"Remove","请使用系统快捷键 {hotkey} 粘贴":"Please paste with system shortcut {hotkey}","新建幻灯片":"New slide","显示幻灯片":"Unskip slide","隐藏幻灯片":"Skip slide","第 {current} 页 / 共 {total} 页":"Page {current} of {total}","保存":"Save","撤销":"Undo","重做":"Redo","文本框":"Text","文本":"Text","形状":"Shape","线条":"Line","图片":"Image","插入链接":"Insert link","格式面板":"Format","格式":"Format","演示文稿标题":"Show Title","演示文稿副标题":"Show Subtitle","显示最佳比例":"Zoom to fit","当前浏览器暂不支持全屏播放":"Fullscreen play not supported in current browser yet","幻灯片已复制到剪切板":"","解锁":"Unlock","锁定":"Lock","网络不可用，暂时无法上传图片":"Network unavailable, can't upload images for now"}}};function Oe(e,t){if(!e)return e;var n=Ce.locale,r=Ce.translations[n]||{};return"zh-cn"!==n&&(e=r[e]||e),e.replace(/\{([^\}]+)\}/g,(function(e,n){return t[n]||n}))}function Se(e){var t=e.container,n=e.viewModel,a=n.model,o=n.state,i=n.execCommand,l=o.mode,s=Object(r.useRef)();Object(r.useEffect)((function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=a.paginate(e);t?i("selectShow",t):e>0&&i("toggleMode")}function n(t){switch(t.key){case"ArrowLeft":case"ArrowUp":case"k":case"PageUp":e(-1);break;case"ArrowRight":case"ArrowDown":case"j":case"PageDown":case"Enter":case" ":e();break;case"f":i("toggleMode");break;case"Home":i("selectShow",a.shows[0]);break;case"End":i("selectShow",a.shows[a.shows.length-1])}}function r(t){if(!t.target.closest("a[href]"))switch(t.button){case 0:e();break;case 2:e(-1)}}function o(){t.current.classList.remove("idle"),s.current&&clearTimeout(s.current),s.current=setTimeout((function(){t.current&&t.current.classList.add("idle")}),2e3)}var u;function d(){document.fullscreenElement||(u&&u.release(),"play"===l&&i("toggleMode"))}function f(){"visible"===document.visibilityState&&document.fullscreenElement&&"wakeLock"in navigator&&navigator.wakeLock.request("screen").then((function(e){u=e})).catch((function(e){return console.error(e.message)}))}function p(){t.current.removeEventListener("mouseup",r,{capture:!0}),t.current.removeEventListener("mousemove",o),t.current.removeEventListener("fullscreenchange",d),document.removeEventListener("visibilitychange",f),document.removeEventListener("keydown",n)}if("play"===l)return t.current.addEventListener("mouseup",r,{capture:!0}),t.current.addEventListener("mousemove",o),t.current.addEventListener("fullscreenchange",d),document.addEventListener("visibilitychange",f),document.addEventListener("keydown",n),new Promise((function(e,n){try{e(t.current.requestFullscreen())}catch(e){n(new Error("requestFullscreen not supported"))}})).catch((function(){navigator.userAgent.includes("yuque-desktop/")||c.a.info(Oe("当前浏览器暂不支持全屏播放"))})),p;document.fullscreenElement&&document.exitFullscreen(),s.current&&clearTimeout(s),p()}),[l])}var Re,je=[{name:"arrow-1",width:100,height:80,outline:{name:"polygon",points:[{x:49.4351641,y:0},{x:-181188398e-21,y:40.0053069},{x:49.4351641,y:80},{x:49.4351641,y:59.6453069},{x:100,y:59.6453069},{x:100,y:20.9653069},{x:49.4351641,y:20.9653069}]},scene:[],thumb:[{name:"polygon",points:[{x:16.2620321,y:7.99867328},{x:7,y:15.9997347},{x:16.2620321,y:23.9986733},{x:16.2620321,y:19.9277347},{x:25.7357163,y:19.9277347},{x:25.7357163,y:12.1917347},{x:16.2620321,y:12.1917347}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"arrow-2",width:100,height:80,outline:{name:"polygon",points:[{x:50.5648359,y:-671073958e-22},{x:100,y:40.0053069},{x:50.5648359,y:80},{x:50.5648359,y:59.6453069},{x:0,y:59.6453069},{x:0,y:20.9653069},{x:50.5648359,y:20.9653069}]},scene:[],thumb:[{name:"polygon",points:[{x:16.4736842,y:7.99867328},{x:25.7357163,y:15.9997347},{x:16.4736842,y:23.9986733},{x:16.4736842,y:19.9277347},{x:7,y:19.9277347},{x:7,y:12.1917347},{x:16.4736842,y:12.1917347}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"arrow-3",width:138,height:80,outline:{name:"polygon",points:[{x:92.2158589,y:0},{x:137.5,y:40},{x:92.2158589,y:80},{x:92.2158589,y:55.9003245},{x:46.7965867,y:55.9003245},{x:46.7965867,y:80},{x:88817842e-23,y:40.0053069},{x:46.7965867,y:0},{x:46.7965867,y:24.6624715},{x:92.2158589,y:24.6624715}]},scene:[],thumb:[{name:"polygon",points:[{x:19.8639344,y:8},{x:27.109397,y:16},{x:19.8639344,y:24},{x:19.8639344,y:19.1800649},{x:12.5968509,y:19.1800649},{x:12.5968509,y:24},{x:5.10939702,y:16.0010614},{x:12.5968509,y:8},{x:12.5968509,y:12.9324943},{x:19.8639344,y:12.9324943}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"circle",width:100,height:100,outline:{name:"ellipse",cx:50,cy:50,rx:50,ry:50},scene:[],thumb:[{name:"ellipse",cx:16,cy:16.5333333,rx:9,ry:9}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"collate",width:42,height:36,outline:{d:[["M",40.3837262,0],["C",40.6808145,0,40.9625216,.132096,41.1525116,.3604931],["C",41.478533,.7524209,41.4542938,1.3198118,41.1146853,1.6825771],["L",41.0232331,1.7687854],["L",20.9996243,18.0064637],["L",41.0232331,34.2312146],["C",41.2190021,34.3940632,41.3440192,34.6242958,41.3757431,34.8738407],["L",41.3837518,35],["C",41.3837518,35.5128358,40.997686,35.9355072,40.5003473,35.9932723],["L",40.3837262,36],["L",1.9253140000000002,36],["C",1.6282257999999992,36,1.3465187000000007,35.867904,1.1565287000000009,35.6395069],["C",.8305071999999996,35.2475791,.8547464999999992,34.6801882,1.1943549999999998,34.317423],["L",1.2858070999999995,34.2312146],["L",20.9996243,18.0064637],["L",1.2858070999999995,1.7687854],["C",1.0900382000000004,1.6059368,.9650210999999995,1.3757042,.9332972000000002,1.1261593],["L",.9252885000000006,1],["C",.9252885000000006,.4871642,1.3113542000000002,.0644928,1.8086929000000005,.0067277],["L",1.9253140000000002,0],["L",40.3837262,0],["Z"]]},scene:[],thumb:[{d:[["M",23.6671476,9],["C",23.787916,9,23.9022194,9.0545637,23.9781629,9.1484658],["C",24.1170814,9.3202349,24.0904508,9.5720969,23.9186817,9.7110154],["L",23.9186817,9.7110154],["L",16.142839,16],["L",23.9186817,22.2889846],["C",23.9938034,22.3497394,24.0437485,22.4350446,24.0607217,22.5285699],["L",24.0671476,22.6],["C",24.0671476,22.8209139,23.8880615,23,23.6671476,23],["L",23.6671476,23],["L",8.3328524,23],["C",8.212084,23,8.0977806,22.9454363,8.0218371,22.8515342],["C",7.8829186,22.6797651,7.9095492,22.4279031,8.0813183,22.2889846],["L",8.0813183,22.2889846],["L",15.856839,16],["L",8.0813183,9.7110154],["C",8.0061966,9.6502606,7.9562515,9.5649554,7.9392783,9.4714301],["L",7.9328524,9.4],["C",7.9328524,9.1790861,8.1119385,9,8.3328524,9],["L",8.3328524,9],["Z"]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.02,name:"NW"},{x:0,y:.98,name:"SW"},{x:1,y:.02,name:"NE"},{x:1,y:.98,name:"SE"}]},{name:"comment-2",width:113,height:100,outline:{d:[["M",18.75,0],["L",93.75,0],["C",104.105339,-0,112.5,8.3946609,112.5,18.75],["L",112.5,59.4444576],["C",112.5,69.7997966,104.105339,78.1944576,93.75,78.1944576],["L",53.1187263,78.1944576],["L",53.1187263,78.1944576],["L",21.9728275,100],["L",21.9728275,78.1916318],["L",18.75,78.1916318],["C",8.3946609,78.1916318,0,69.7969708,0,59.4416318],["L",0,18.75],["C",-0,8.3946609,8.3946609,0,18.75,0],["Z"]]},scene:[],thumb:[{d:[["M",10,9],["L",22,9],["C",23.6568542,9,25,10.3431458,25,12],["L",25,18.700459],["C",25,20.3573132,23.6568542,21.700459,22,21.700459],["L",15.4989962,21.700459],["L",15.4989962,21.700459],["L",10.5156524,25.2421473],["L",10.5156524,21.7],["L",10,21.7],["C",8.3431458,21.7,7,20.3568542,7,18.7],["L",7,12],["C",7,10.3431458,8.3431458,9,10,9],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"comment",width:76,height:60,outline:{d:[["M",1,49],["C",.4477153,49,0,48.5522847,0,48],["L",0,1],["C",-0,.4477153,.4477153,0,1,0],["L",75,0],["C",75.5522847,-0,76,.4477153,76,1],["L",76,48],["C",76,48.5522847,75.5522847,49,75,49],["L",45.6,49],["L",38,60],["L",30.4,49],["L",1,49],["Z"]]},scene:[],thumb:[{d:[["M",7,22],["C",6.4477153,22,6,21.5522847,6,21],["L",6,10],["C",6,9.4477153,6.4477153,9,7,9],["L",25,9],["C",25.5522847,9,26,9.4477153,26,10],["L",26,21],["C",26,21.5522847,25.5522847,22,25,22],["L",18,22],["L",16,25],["L",14,22],["L",7,22],["Z"]]}],padding:[0,10,10,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"connector",width:44,height:44,outline:{name:"ellipse",cx:22,cy:22,rx:22,ry:22},scene:[],thumb:[{name:"ellipse",cx:16,cy:16,rx:9,ry:9}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.145,y:.145,name:"NW"},{x:.145,y:.855,name:"SW"},{x:.855,y:.145,name:"NE"},{x:.855,y:.855,name:"SE"}]},{name:"data",width:124,height:60,outline:{d:[["M",17.1403103,0],["L",122.687657,0],["C",123.239942,-0,123.687657,.4477153,123.687657,1],["C",123.687657,1.0896438,123.675604,1.1788806,123.65182,1.2653118],["L",107.823852,58.7853118],["C",107.704434,59.2192873,107.309796,59.52,106.85969,59.52],["L",1.3123427,59.52],["C",.7600579,59.52,.3123427,59.0722847,.3123427,58.52],["C",.3123427,58.4303562,.3243965,58.3411194,.34818,58.2546882],["L",16.1761477,.7346882],["C",16.2955661,.3007127,16.6902043,-0,17.1403103,0],["Z"]]},scene:[],thumb:[{d:[["M",7.6068779,10],["L",27.4750629,10],["C",27.6959768,10,27.8750629,10.1790861,27.8750629,10.4],["C",27.8750629,10.4358575,27.8702414,10.4715522,27.860728,10.5061247],["L",24.7787871,21.7061247],["C",24.7310198,21.8797149,24.5731645,22,24.3931221,22],["L",4.5249371,22],["C",4.3040232,22,4.1249371,21.8209139,4.1249371,21.6],["C",4.1249371,21.5641425,4.1297586,21.5284478,4.139272,21.4938753],["L",7.2212129,10.2938753],["C",7.2689802,10.1202851,7.4268355,10,7.6068779,10],["Z"]]}],padding:[0,12,0,12],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:.095,y:.5,name:"W"},{x:.905,y:.5,name:"E"},{x:.23,y:.02,name:"NW"},{x:.015,y:.98,name:"SW"},{x:.985,y:.02,name:"NE"},{x:.77,y:.98,name:"SE"}]},{name:"database",width:70,height:80,outline:{d:[["M",35,0],["C",53.9753466,0,69.4238162,5.273994,69.9842524,11.8539517],["L",69.995311,11.8537712],["L",69.995311,12.022052],["L",70,12.2242015],["C",70,12.2917139,69.998433,12.3590985,69.995311,12.426351],["L",69.995311,67.977948],["C",69.6862333,74.6359505,54.1366666,80,35,80],["C",16.0547001,80,.6251167,74.7426951,.0185218,68.1772958],["L",.004689,67.977948],["L",0,11.8537712],["L",.0157476,11.8539517],["C",.5761838,5.273994,16.0246534,0,35,0],["Z"]]},scene:[{d:[["M",70,13],["C",70,19.0751322,54.3299662,24,35,24],["C",15.8633334,24,.3137667,19.1731371,.004689,13.1819051],["L",0,13]]}],thumb:[{d:[["M",16,7],["C",20.337222099999998,7,23.8683009,8.1866487,23.9964006,9.6671391],["L",23.9989282,9.6670985],["L",23.9989282,9.7049617],["L",24,9.750445299999999],["C",24,9.7656356,23.9996418,9.7807972,23.9989282,9.795929000000001],["L",23.9989282,22.2950383],["C",23.9282819,23.7930889,20.3740952,25,16,25],["C",11.6696457,25,8.1428838,23.8171064,8.0042336,22.3398916],["L",8.0010718,22.2950383],["L",8,9.6670985],["L",8.0035994,9.6671391],["C",8.1316991,8.1866487,11.6627779,7,16,7],["Z"]]},{d:[["M",24,10],["C",24,11.1045695,20.418278,12,16,12],["C",11.6259048,12,8.0717181,11.1223886,8.0010718,10.0330737],["L",8,10]]}],padding:[16,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:0,y:.15,name:"NW"},{x:0,y:.85,name:"SW"},{x:1,y:.15,name:"NE"},{x:1,y:.85,name:"SE"}]},{name:"decision",width:160,height:80,outline:{d:[["M",79.8944272,.4472136],["L",157.211146,39.1055728],["C",157.705124,39.3525621,157.905348,39.9532351,157.658359,40.4472136],["C",157.561596,40.640741,157.404673,40.7976635,157.211146,40.8944272],["L",79.8944272,79.5527864],["C",79.3313722,79.8343139,78.6686278,79.8343139,78.1055728,79.5527864],["L",.7888544,40.8944272],["C",.2948759000000001,40.6474379,.09465150000000011,40.0467649,.34164079999999997,39.5527864],["C",.4384045000000001,39.359259,.5953269999999999,39.2023365,.7888544,39.1055728],["L",78.1055728,.4472136],["C",78.6686278,.1656861,79.3313722,.1656861,79.8944272,.4472136],["Z"]]},scene:[],thumb:[{d:[["M",5.5303015,15.6625354],["L",15.7852498,9.1366592],["C",15.9162764,9.0532787,16.0837236,9.0532787,16.2147502,9.1366592],["L",26.4696985,15.6625354],["C",26.656075,15.7811387,26.7110162,16.0283736,26.5924129,16.2147502],["C",26.5609814,16.2641425,26.5190908,16.3060331,26.4696985,16.3374646],["L",16.2147502,22.8633408],["C",16.0837236,22.9467213,15.9162764,22.9467213,15.7852498,22.8633408],["L",5.5303015,16.3374646],["C",5.343925,16.2188613,5.2889839,15.9716264,5.4075871,15.7852498],["C",5.4390186,15.7358575,5.4809092,15.6939669,5.5303015,15.6625354],["Z"]]}],padding:[10,24,10,24],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"delay",width:120,height:60,outline:{d:[["M",1,0],["L",90,0],["C",106.568542,-0,120,13.4314575,120,30],["C",120,46.5685425,106.568542,60,90,60],["L",1,60],["C",.4477153,60,0,59.5522847,0,59],["L",0,1],["C",-0,.4477153,.4477153,0,1,0],["Z"]]},scene:[],thumb:[{d:[["M",6.4,11.0666667],["L",20,11.0666667],["C",23.3137085,11.0666667,26,13.7529582,26,17.0666667],["C",26,20.3803752,23.3137085,23.0666667,20,23.0666667],["L",6.4,23.0666667],["C",6.1790861,23.0666667,6,22.8875806,6,22.6666667],["L",6,11.4666667],["C",6,11.2457528,6.1790861,11.0666667,6.4,11.0666667],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:.02,y:.985,name:"SW"},{x:.81,y:0,name:"NE"},{x:.81,y:1,name:"SE"}]},{name:"diamond",width:100,height:100,outline:{d:[["M",50.5029462,.2083271],["L",99.7916729,49.4970538],["C",100.069442,49.7748233,100.069442,50.2251767,99.7916729,50.5029462],["L",50.5029462,99.7916729],["C",50.2251767,100.069442,49.7748233,100.069442,49.4970538,99.7916729],["L",.2083271,50.5029462],["C",-.0694424,50.2251767,-.0694424,49.7748233,.2083271,49.4970538],["L",49.4970538,.2083271],["C",49.7748233,-.0694424,50.2251767,-.0694424,50.5029462,.2083271],["Z"]]},scene:[],thumb:[{d:[["M",16.2852309,7.0928427],["L",24.9119336,15.7195454],["C",25.0681433,15.8757552,25.0681433,16.1290212,24.9119336,16.2852309],["L",16.2852309,24.9119336],["C",16.1290212,25.0681433,15.8757552,25.0681433,15.7195454,24.9119336],["L",7.0928427,16.2852309],["C",6.936633,16.1290212,6.936633,15.8757552,7.0928427,15.7195454],["L",15.7195454,7.0928427],["C",15.8757552,6.936633,16.1290212,6.936633,16.2852309,7.0928427],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"display",width:120,height:60,outline:{d:[["M",18.559242,0],["L",108.388294,0],["C",108.593661,-124e-7,108.794047,.0632157,108.962224,.18108],["C",116.320741,5.3381999,120,15.2778399,120,30],["C",120,43.9124351,116.326183,53.8383306,108.978548,59.7776865],["C",108.800609,59.9215337,108.578719,60,108.349908,60],["L",18.559242,60],["C",18.2079174,60,17.8823628,59.8156369,17.70166,59.5143473],["L",.3084873,30.5143473],["C",.1185966,30.1977386,.1185966,29.8022614,.3084873,29.4856527],["L",17.70166,.4856527],["C",17.8823628,.1843631,18.2079174,0,18.559242,0],["Z"]]},scene:[],thumb:[{d:[["M",8.7974767,10],["L",24.1863956,10],["L",24.1863956,10],["C",25.6811795,11.0207233,26.4285714,13.0207233,26.4285714,16],["C",26.4285714,18.8174994,25.6811795,20.8174994,24.1863956,22],["L",8.7974767,22],["C",8.6564465,22,8.525838,21.9257329,8.4537242,21.8045343],["L",5.1216988,16.2045343],["C",5.0467021,16.0784903,5.0467021,15.9215097,5.1216988,15.7954657],["L",8.4537242,10.1954657],["C",8.525838,10.0742671,8.6564465,10,8.7974767,10],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.2,y:.14,name:"NW"},{x:.2,y:.86,name:"SW"},{x:.92,y:.14,name:"NE"},{x:.92,y:.86,name:"SE"}]},{name:"document",width:120,height:72,outline:{d:[["M",1,0],["L",119,0],["C",119.552285,-0,120,.4477153,120,1],["L",120,63.2943312],["C",119.999975,63.8466024,119.552271,64.2943066,119,64.2943066],["C",118.874051,64.2943066,118.749236,64.2705132,118.63212,64.2241781],["C",108.562735,60.240377,99.0186463,58.2432881,89.9998549,58.2329113],["C",75.8605271,58.216643,73.9215376,58.9595768,59.9999032,65.0379103],["C",46.0782688,71.1162438,44.1653018,71.9832913,29.9999516,72],["C",20.7325008,72.010162,10.9291929,69.6914094,.590028,65.0437423],["C",.2309588,64.882365,-0,64.5253236,0,64.1316572],["L",0,1],["C",-0,.4477153,.4477153,0,1,0],["Z"]]},scene:[],thumb:[{d:[["M",6,10],["L",26,10],["L",26,23.0414063],["C",24.237687,22.2996937,22.5710122,21.9279131,20.9999758,21.9260644],["C",18.6434212,21.9232914,18.3202563,22.0499279,15.9999839,23.0860074],["C",13.6797115,24.122087,13.3608836,24.2698792,11,24.2726331],["C",9.4260668,24.274461,7.7594002,23.864052,6,23.0414063],["L",6,10],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:.9,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:0,y:.9,name:"SW"},{x:.98,y:.015,name:"NE"},{x:1,y:.9,name:"SE"}]},{name:"internal-storage",width:80,height:80,outline:{name:"rect",x:0,y:0,width:80,height:80,rx:0,ry:0},scene:[{d:[{name:"M",x:0,y:8},{name:"L",x:80,y:8}]},{d:[{name:"M",x:8,y:0},{name:"L",x:8,y:80}]}],thumb:[{name:"rect",x:8,y:8,width:17,height:17,rx:.4,ry:.4},{d:[{name:"M",x:8.5,y:12.5},{name:"L",x:24.5,y:12.5}]},{d:[{name:"M",x:12.5,y:8.5},{name:"L",x:12.5,y:24.5}]}],padding:[10,10,0,16],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:.02,y:.985,name:"SW"},{x:.98,y:.015,name:"NE"},{x:.98,y:.985,name:"SE"}]},{name:"loop-limit",width:120,height:60,outline:{d:[["M",17.5871195,0],["L",102.429999,0],["C",102.7204,-0,102.996458,.1262398,103.186409,.3459021],["L",119.75641,19.5077312],["C",119.913532,19.6894304,120,19.9216166,120,20.1618291],["L",120,59],["C",120,59.5522847,119.552285,60,119,60],["L",1,60],["C",.4477153,60,0,59.5522847,0,59],["L",0,20.1621158],["C",0,19.92173,.0865921,19.6893882,.2439196,19.5076371],["L",16.831039,.3455213],["C",17.0209853,.1260876,17.2968941,0,17.5871195,0],["Z"]]},scene:[],thumb:[{d:[["M",9.5170283,11.0666667],["L",22.4862374,11.0666667],["C",22.6043417,11.0666667,22.7164089,11.1188597,22.7924108,11.2092607],["L",25.9061734,14.9129485],["C",25.9667743,14.9850307,26,15.0761829,26,15.1703545],["L",26,22.6666667],["C",26,22.8875806,25.8209139,23.0666667,25.6,23.0666667],["L",6.4,23.0666667],["C",6.1790861,23.0666667,6,22.8875806,6,22.6666667],["L",6,15.1704681],["C",6,15.0762275,6.0332743,14.9850132,6.0939556,14.9129087],["L",9.210984,11.2091073],["C",9.286986,11.118798,9.3989942,11.0666667,9.5170283,11.0666667],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.1,y:.15,name:"NW"},{x:.02,y:.985,name:"SW"},{x:.9,y:.15,name:"NE"},{x:.98,y:.985,name:"SE"}]},{name:"manual-input",width:118,height:60,outline:{d:[["M",.8676336,15.6420323],["L",116.867634,.1512179],["C",117.415059,.0781139,117.918097,.4626272,117.991201,1.0100523],["C",117.99706,1.0539311,118,1.0981505,118,1.1424188],["L",118,59],["C",118,59.5522847,117.552285,60,117,60],["L",1,60],["C",.4477152,60,0,59.5522847,0,59],["L",0,16.6332332],["C",0,16.1321084,.3709182,15.7083644,.8676336,15.6420323],["Z"]]},scene:[],thumb:[{d:[["M",6.3471791,12.618128],["L",25.5471791,10.0603243],["C",25.7661584,10.0311521,25.9673249,10.1850212,25.9964971,10.4040005],["C",25.9988298,10.4215108,26,10.4391564,26,10.4568214],["L",26,21.2666667],["C",26,21.4875806,25.8209139,21.6666667,25.6,21.6666667],["L",6.4,21.6666667],["C",6.1790861,21.6666667,6,21.4875806,6,21.2666667],["L",6,13.0146251],["C",6,12.8141269,6.1484367,12.6446042,6.3471791,12.618128],["Z"]]}],padding:[16,10,0,10],anchors:[{x:.5,y:.195,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.985,name:"SW"},{x:.98,y:.015,name:"NE"},{x:.98,y:.985,name:"SE"}]},{name:"manual-loop",width:120,height:60,outline:{d:[["M",1.3143594,0],["L",118.682087,0],["C",119.234371,-0,119.682087,.4477153,119.682087,1],["C",119.682087,1.0910107,119.669662,1.1815953,119.645158,1.2692451],["L",103.43015,59.2692451],["C",103.309369,59.7012703,102.915669,60,102.467078,60],["L",17.3668015,60],["C",16.917245,60,16.5229467,59.7000072,16.4030326,59.2667387],["L",.3505905,1.2667387],["C",.2032748,.7344638,.5153458,.1835468,1.0476207,.0362311],["C",1.1344943,.0121874,1.2242199,-0,1.3143594,0],["Z"]]},scene:[],thumb:[{d:[["M",6.5216709,11.0666667],["L",25.4769568,11.0666667],["C",25.6978707,11.0666667,25.8769568,11.2457528,25.8769568,11.4666667],["C",25.8769568,11.5020572,25.8722601,11.5372913,25.8629896,11.5714461],["L",22.8230148,22.7714461],["C",22.7757173,22.9457017,22.6175425,23.0666667,22.4369821,23.0666667],["L",9.5311679,23.0666667],["C",9.3502305,23.0666667,9.1918239,22.9452058,9.1448706,22.7704667],["L",6.1353736,11.5704667],["C",6.0780465,11.3571206,6.2045248,11.1376966,6.4178708,11.0803694],["C",6.451721,11.0712737,6.4866199,11.0666667,6.5216709,11.0666667],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:.1,y:.5,name:"W"},{x:.9,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:.22,y:.985,name:"SW"},{x:.98,y:.015,name:"NE"},{x:.78,y:.985,name:"SE"}]},{name:"merge",width:50,height:36,outline:{d:[["M",48.9094474,1.5703958],["L",25.82137,34.8172272],["C",25.5063491,35.2708574,24.883234299999998,35.3832223,24.4296042,35.0682014],["C",24.3316502,35.0001778,24.246653600000002,34.9151812,24.17863,34.8172272],["L",1.0905526000000005,1.5703958],["C",.7755317000000002,1.1167657,.8878967000000006,.4936509,1.3415268000000005,.17863],["C",1.5090014000000007,.0623282,1.7080259000000009,0,1.9119226000000005,0],["L",48.0880774,0],["C",48.6403621,0,49.0880774,.4477153,49.0880774,1],["C",49.0880774,1.2038967,49.0257492,1.4029212,48.9094474,1.5703958],["Z"]]},scene:[],thumb:[{d:[["M",25.5482177,9.6324953],["L",16.3254934,22.5443093],["C",16.1970898,22.7240743,15.9472698,22.765711,15.7675047,22.6373074],["C",15.7315865,22.6116515,15.7001625,22.5802275,15.6745066,22.5443093],["L",6.4517823,9.6324953],["C",6.3233787,9.4527302,6.3650154,9.2029102,6.5447805,9.0745066],["C",6.6126207,9.0260493,6.6939065,9,6.7772757,9],["L",25.2227243,9],["C",25.4436382,9,25.6227243,9.1790861,25.6227243,9.4],["C",25.6227243,9.4833692,25.596675,9.564655,25.5482177,9.6324953],["Z"]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:0,y:0,name:"NW"},{x:0,y:1,name:"SW"},{x:1,y:0,name:"NE"},{x:1,y:1,name:"SE"}]},{name:"multi-document",width:120,height:80,outline:{d:[["M",119,-0],["C",119.552285,-0,120,.4477153,120,1],["L",120,57.6634711],["C",120.00004,58.2157781,119.552307,58.6635113,119,58.6635113],["C",118.846121,58.6635113,118.694318,58.6280008,118.556406,58.5597438],["C",117.079303,57.8286782,115.893834,57.3066398,115,56.9936286],["L",114.744,56.868],["L",114.744526,63.1694166],["C",114.744553,63.7217167,114.296826,64.1694445,113.744526,64.1694445],["C",113.610972,64.1694445,113.478771,64.1426929,113.355724,64.0907684],["C",111.834645,63.4488877,110.620494,62.9604303,109.71327,62.6253962],["L",109.714286,71.1461039],["C",109.714249,71.6983687,109.26655,72.1460677,108.714286,72.1460677],["C",108.59377,72.1460677,108.474247,72.1242823,108.361482,72.0817624],["C",98.4971172,68.3622546,89.1471649,66.4976545,80.3116246,66.4879622],["C",66.4538962,66.4727606,64.5535237,67.1669765,50.9091531,72.8467226],["C",37.2647825,78.5264687,35.3899142,79.3366596,21.5066816,79.351889],["C",12.4628087,79.3615937,5.4112062,77.2136321,.351874,72.9080041],["C",.1286374,72.7179927,0,72.4396044,0,72.1464509],["L",0,11.7804604],["C",0,11.2281757,.4477153,10.7804604,1,10.7804604],["L",5.255,10.78],["L",5.2554745,6.3902302],["C",5.2554745,5.8379455,5.7031897,5.3902302,6.2554745,5.3902302],["L",10.51,5.39],["L",10.5109489,1],["C",10.5109489,.4477153,10.9586642,-0,11.5109489,-0],["L",119,-0],["Z"]]},scene:[{d:[["M",10,5.3902302],["L",113.744526,5.3902302],["C",114.29681,5.3902302,114.744526,5.8379455,114.744526,6.3902302],["L",114.744526,61.6827625],["L",114.744526,61.6827625]]},{d:[["M",3,10.7804604],["L",108.714286,10.7804604],["C",109.26657,10.7804604,109.714286,11.2281757,109.714286,11.7804604],["L",109.714286,69.602221],["L",109.714286,69.602221]]}],thumb:[{d:[["M",8.4444444,10.4296499],["L",8.4444444,8],["L",28.4444444,8],["L",28.4444444,19.5606936],["C",28.0673004,19.4077004,26.2625497,18.3360173,25.8924529,18.2092979]]},{d:[["M",6.2222222,13.090719],["L",6.2222222,10.7555556],["L",25.4444444,10.7555556],["L",25.4444444,21.8666667],["C",25.0819671,21.7196232,23.3557041,21.1217914,23,21]]},{d:[["M",4.3333333,13.5111111],["L",22.3333333,13.5111111],["L",22.3333333,23.8011738],["C",20.6331063,23.1515551,19.0251483,22.8259361,17.5094592,22.824317],["C",15.2359257,22.8218883,14.9241458,22.9328011,12.6856163,23.8402371],["C",10.4470867,24.7476731,10.1394911,24.8771148,7.8617733,24.8795322],["C",6.3432947,24.8811295,5.1671481,24.5216767,4.3333333,23.8011738],["L",4.3333333,13.5111111],["Z"]]}],padding:[16,10,16,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:.88,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.08,y:.1,name:"NW"},{x:0,y:.91,name:"SW"},{x:.98,y:.02,name:"NE"},{x:.885,y:.91,name:"SE"}]},{name:"off-page",width:38,height:38,outline:{d:[["M",.3999999999999986,0],["L",37.6,0],["C",37.8209139,0,38,.1790861,38,.4],["L",38,19.0323398],["C",38,19.1391572,37.9572763,19.2415374,37.8813478,19.3166695],["L",19.2813478,37.7216028],["C",19.125486199999997,37.8758298,18.874513800000003,37.8758298,18.7186522,37.7216028],["L",.11865219999999965,19.3166695],["C",.04272369999999981,19.2415374,0,19.1391572,0,19.0323398],["L",0,.4],["C",0,.1790861,.17908609999999925,0,.3999999999999986,0],["Z"]]},scene:[],thumb:[{d:[["M",8.4,8],["L",23.6,8],["C",23.8209139,8,24,8.1790861,24,8.4],["L",24,15.9169777],["C",24,16.0237952,23.9572763,16.1261753,23.8813478,16.2013075],["L",16.2813478,23.7216028],["C",16.1254862,23.8758298,15.8745138,23.8758298,15.7186522,23.7216028],["L",8.1186522,16.2013075],["C",8.0427237,16.1261753,8,16.0237952,8,15.9169777],["L",8,8.4],["C",8,8.1790861,8.1790861,8,8.4,8],["Z"]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:0,y:0,name:"NW"},{x:1,y:0,name:"NE"}]},{name:"or",width:44,height:44,outline:{name:"ellipse",cx:22,cy:22,rx:22,ry:22},scene:[{d:[{name:"M",x:0,y:21.5},{name:"L",x:44,y:21.5}]},{d:[{name:"M",x:21.5,y:0},{name:"L",x:21.5,y:44}]}],thumb:[{name:"ellipse",cx:16,cy:17,rx:9,ry:9},{d:[["M",7,17],["L",25,17],["M",16,8],["L",16,26]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.145,y:.145,name:"NW"},{x:.145,y:.855,name:"SW"},{x:.855,y:.145,name:"NE"},{x:.855,y:.855,name:"SE"}]},{name:"parallelogram",width:137,height:87,outline:{d:[["M",38.1579057,0],["L",135.980025,0],["C",136.53231,-0,136.980025,.4477153,136.980025,1],["C",136.980025,1.136127,136.952232,1.2708207,136.898349,1.3958294],["L",100.260418,86.3958293],["C",100.102374,86.7624912,99.7413671,87,99.3420943,87],["L",1.5199747,87],["C",.9676899,87,.5199747,86.5522847,.5199747,86],["C",.5199747,85.863873,.5477675,85.7291793,.6016506,85.6041707],["L",37.2395816,.6041707],["C",37.3976255,.2375088,37.7586329,-0,38.1579057,0],["Z"]]},scene:[],thumb:[{d:[["M",11.2637585,9],["L",26.3933844,9],["C",26.6142983,9,26.7933844,9.1790861,26.7933844,9.4],["C",26.7933844,9.4541707,26.7823813,9.507777,26.7610424,9.5575677],["L",21.1038995,22.7575677],["C",21.040868,22.9046413,20.8962528,23,20.7362415,23],["L",5.6066156,23],["C",5.3857017,23,5.2066156,22.8209139,5.2066156,22.6],["C",5.2066156,22.5458293,5.2176187,22.492223,5.2389576,22.4424323],["L",10.8961005,9.2424323],["C",10.959132,9.0953587,11.1037472,9,11.2637585,9],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"polygon",width:96,height:91,outline:{name:"polygon",points:[{x:48,y:0},{x:95.5528258,y:34.5491503},{x:77.3892626,y:90.4508497},{x:18.6107374,y:90.4508497},{x:.44717419000000014,y:34.5491503}]},scene:[],thumb:[{name:"polygon",points:[{x:16,y:7},{x:24.5595086,y:13.2188471},{x:21.2900673,y:23.2811529},{x:10.7099327,y:23.2811529},{x:7.44049135,y:13.2188471}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"preparation",width:120,height:60,outline:{d:[["M",19.9840694,0],["L",99.6873184,0],["C",100.023525,-0,100.33723,.1689467,100.522259,.4496594],["L",119.639798,29.4535248],["C",119.858585,29.7854538,119.859975,30.2154564,119.64334,30.5487937],["L",100.798808,59.5449283],["C",100.614349,59.8287556,100.298826,60,99.960325,60],["L",20.1720063,60],["C",19.83462,60,19.5199796,59.8298739,19.3352402,59.5475604],["L",.3565669,30.5448953],["C",.1398092,30.2136523,.1388534,29.7857253,.3541294,29.4535175],["L",19.1448658,.4561827],["C",19.3292042,.1717169,19.6450984,0,19.9840694,0],["Z"]]},scene:[],thumb:[{d:[["M",9.1753609,10],["L",22.7586938,10],["C",22.8919773,10,23.016505,10.0663866,23.0907953,10.1770457],["L",26.8513724,15.7786117],["C",26.9413749,15.912675,26.9419451,16.0877051,26.8528179,16.2223519],["L",23.1470284,21.8207859],["C",23.072951,21.9326965,22.9476882,22,22.8134814,22],["L",9.2130739,22],["C",9.0793157,22,8.9544098,21.9331428,8.8802274,21.8218405],["L",5.1471359,16.2207607],["C",5.057961,16.0869638,5.0575691,15.9127763,5.1461411,15.7785795],["L",8.8415196,10.1796593],["C",8.9155518,10.067492,9.0409649,10,9.1753609,10],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.26,y:.02,name:"NW"},{x:.26,y:.98,name:"SW"},{x:.74,y:.02,name:"NE"},{x:.74,y:.98,name:"SE"}]},{name:"process",width:120,height:60,outline:{name:"rect",x:0,y:0,width:120,height:60,rx:1,ry:1},scene:[],thumb:[{d:[["M",6.4,10.5],["L",25.6,10.5],["C",25.8209139,10.5,26,10.6790861,26,10.9],["L",26,22.1],["C",26,22.3209139,25.8209139,22.5,25.6,22.5],["L",6.4,22.5],["C",6.1790861,22.5,6,22.3209139,6,22.1],["L",6,10.9],["C",6,10.6790861,6.1790861,10.5,6.4,10.5],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"rect",width:100,height:100,outline:{name:"polygon",points:[{x:0,y:0},{x:100,y:0},{x:100,y:100},{x:0,y:100}]},scene:[],thumb:[{d:[["M",8.4,8],["L",23.6,8],["C",23.8209139,8,24,8.1790861,24,8.4],["L",24,23.6],["C",24,23.8209139,23.8209139,24,23.6,24],["L",8.4,24],["C",8.1790861,24,8,23.8209139,8,23.6],["L",8,8.4],["C",8,8.1790861,8.1790861,8,8.4,8],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"rounded-rect",width:100,height:100,outline:{d:[["M",18.75,0],["L",81.25,0],["Q",100,0,100,18.75],["L",100,81.25],["Q",100,100,81.25,100],["L",18.75,100],["Q",0,100,0,81.25],["L",0,18.75],["Q",0,0,18.75,0],["Z"]]},scene:[],thumb:[{d:[["M",11,8],["L",21,8],["C",22.6568542,8,24,9.3431458,24,11],["L",24,21],["C",24,22.6568542,22.6568542,24,21,24],["L",11,24],["C",9.3431458,24,8,22.6568542,8,21],["L",8,11],["C",8,9.3431458,9.3431458,8,11,8],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"sort",width:44,height:44,outline:{d:[["M",22.707552999999997,.7084468],["L",43.2664758,21.2933397],["C",43.6564052,21.6837616,43.6564052,22.3162384,43.2664758,22.7066603],["L",22.707552999999997,43.2915532],["C",22.3172753,43.682324,21.6841104,43.6827236,21.293339699999997,43.2924459],["C",21.2930419,43.2921485,21.292744399999997,43.291851,21.292447000000003,43.2915532],["L",.7335241999999997,22.7066603],["C",.3435948,22.3162384,.3435948,21.6837616,.7335241999999997,21.2933397],["L",21.292447000000003,.7084468],["C",21.6827247,.317676,22.3158896,.3172764,22.706660300000003,.7075541],["C",22.7069581,.7078515,22.707255600000003,.708149,22.707552999999997,.7084468],["Z"]]},scene:[{d:[{name:"M",x:.1242938,y:22},{name:"L",x:43.8757062,y:22}]}],thumb:[{d:[["M",16.2830212,7.2833787],["L",24.706338,15.7173359],["C",24.8623098,15.8735046,24.8623098,16.1264954,24.706338,16.2826641],["L",16.2830212,24.7166213],["C",16.1269101,24.8729296,15.8736442,24.8730894,15.7173359,24.7169784],["C",15.7172168,24.7168594,15.7170978,24.7167404,15.7169788,24.7166213],["L",7.293662,16.2826641],["C",7.1376902,16.1264954,7.1376902,15.8735046,7.293662,15.7173359],["L",15.7169788,7.2833787],["C",15.8730899,7.1270704,16.1263558,7.1269106,16.2826641,7.2830216],["C",16.2827832,7.2831406,16.2829022,7.2832596,16.2830212,7.2833787],["Z"],["M",7.3175141,15.7333333],["L",25.2158192,15.7333333]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"star",width:96,height:91,outline:{name:"polygon",points:[{x:48,y:75},{x:18.6107374,y:90.4508497},{x:24.2235871,y:57.7254249},{x:.44717419000000014,y:34.5491503},{x:33.3053687,y:29.7745751},{x:48,y:0},{x:62.6946313,y:29.7745751},{x:95.5528258,y:34.5491503},{x:71.7764129,y:57.7254249},{x:77.3892626,y:90.4508497}]},scene:[],thumb:[{name:"polygon",points:[{x:16,y:21},{x:10.1221475,y:24.0901699},{x:11.2447174,y:17.545085},{x:6.48943484,y:12.9098301},{x:13.0610737,y:11.954915},{x:16,y:6},{x:18.9389263,y:11.954915},{x:25.5105652,y:12.9098301},{x:20.7552826,y:17.545085},{x:21.8778525,y:24.0901699}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"start-end",width:120,height:60,outline:{d:[["M",30,0],["l",60,0],["a",30,30,0,0,1,0,60],["l",-60,0],["a",30,30,0,0,1,0,-60],["Z"]]},scene:[],thumb:[{d:[["M",11,10],["L",21,10],["C",24.3137085,10,27,12.6862915,27,16],["C",27,19.3137085,24.3137085,22,21,22],["L",11,22],["C",7.6862915,22,5,19.3137085,5,16],["C",5,12.6862915,7.6862915,10,11,10],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.11,y:.11,name:"NW"},{x:.11,y:.89,name:"SW"},{x:.89,y:.11,name:"NE"},{x:.89,y:.89,name:"SE"}]},{name:"stored-data",width:120,height:60,outline:{d:[["M",13.7777709,0],["L",120,0],["C",111.115006,4.7754794,106.672509,14.7754794,106.672509,30],["C",106.672509,44.2961128,111.115006,54.2961128,120,60],["L",13.7777709,60],["C",4.2600422,53.6223342,-.3265282,43.6223342,.0180598,30],["C",.4106176,14.4813071,4.997188,4.4813072,13.7777709,0],["Z"]]},scene:[],thumb:[{d:[["M",7.7592332,10],["L",26.7592332,10],["C",24.3123052,10.9550959,23.0888412,12.9550959,23.0888412,16],["C",23.0888412,18.8592226,24.3123052,20.8592226,26.7592332,22],["L",7.7592332,22],["C",5.853146,20.7244668,4.9346072,18.7244668,5.0036168,16],["C",5.0822332,12.8962614,6.000772,10.8962614,7.7592332,10],["Z"]]}],padding:[0,20,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:.93,y:.5,name:"E"},{x:.1,y:0,name:"NW"},{x:.1,y:1,name:"SW"},{x:.995,y:.01,name:"NE"},{x:.995,y:.99,name:"SE"}]},{name:"subroutine",width:120,height:60,outline:{name:"rect",x:0,y:0,width:120,height:60,rx:1,ry:1},scene:[{d:[{name:"M",x:8,y:-0},{name:"L",x:8,y:60}]},{d:[{name:"M",x:112,y:-0},{name:"L",x:112,y:60}]}],thumb:[{d:[["M",6.4,10],["L",25.6,10],["C",25.8209139,10,26,10.1790861,26,10.4],["L",26,21.6],["C",26,21.8209139,25.8209139,22,25.6,22],["L",6.4,22],["C",6.1790861,22,6,21.8209139,6,21.6],["L",6,10.4],["C",6,10.1790861,6.1790861,10,6.4,10],["Z"],["M",10,10],["L",10,22],["M",22,10],["L",22,22]]}],padding:[0,20,0,20],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:.02,y:.985,name:"SW"},{x:.98,y:.015,name:"NE"},{x:.98,y:.985,name:"SE"}]},{name:"summing-junction",width:44,height:44,outline:{name:"ellipse",cx:22,cy:22,rx:22,ry:22},scene:[{d:[["M",6.44365,6.44365],["l",31.1127,31.1127],["m",-31.1127,0],["l",31.1127,-31.1127]]}],thumb:[{name:"ellipse",cx:16,cy:17,rx:9,ry:9},{d:[["M",9.636,10.636],["l",12.727922,12.727922],["m",0,-12.727922],["l",-12.727922,12.727922]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.145,y:.145,name:"NW"},{x:.145,y:.855,name:"SW"},{x:.855,y:.145,name:"NE"},{x:.855,y:.855,name:"SE"}]},{name:"triangle",width:100,height:87,outline:{name:"polygon",points:[{x:50,y:0},{x:100,y:87},{x:-141931921e-23,y:87}]},scene:[],thumb:[{name:"polygon",points:[{x:16,y:8},{x:25,y:24},{x:7,y:24}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]}],Pe="undefined"!=typeof Float32Array?Float32Array:Array;function Ae(e,t){var n=e[0],r=e[1],a=t[0],o=t[1],i=Math.sqrt(n*n+r*r)*Math.sqrt(a*a+o*o),c=i&&(n*a+r*o)/i;return Math.acos(Math.min(Math.max(c,-1),1))}function Te(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=a?a/180*Math.PI:0,c=Math.sin(i),l=Math.cos(i),s=n/2,u=r/2;return[l*o,c*o,0,-c*o,l*o,0,e+(-s*l+u*c+s),t+(-s*c-u*l+u),1]}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)}),Re=new Pe(2),Pe!=Float32Array&&(Re[0]=0,Re[1]=0);var De='<div style="text-align:center;">'.concat("&#8203;","<br></div>");function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Le=E.a.roughlyEqual,Ie=E.a.lineSlope,Be=function(e,t){var n=["x","y"].map((function(n){return e[n]+2*(t[n]-e[n])})),r=Y()(n,2);return{x:r[0],y:r[1]}},ze=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}},Fe=function(e,t){var n=t/180*Math.PI,r=Math.sin(n),a=Math.cos(n),o=e.x,i=e.y;return{x:o*a-i*r,y:o*r+i*a}},Ue=function(e,t,n){var r={x:e.x-t.x,y:e.y-t.y},a=Fe(r,n);return{x:a.x+t.x,y:a.y+t.y}},Ve=function(e){var t=e.x,n=e.y;return{x:t+e.w/2,y:n+e.h/2}},qe=function(e){var t=e.x,n=e.y;return 180*Math.atan2(n,t)/Math.PI};var He=function(){function e(t){R()(this,e),this.rect=t,this._tl=null,this._tr=null,this._br=null,this._bl=null,this._tc=null,this._bc=null,this._rc=null,this._lc=null,this._center=null}return O()(e,[{key:"center",get:function(){return this._center||(this._center=Ve(this.rect)),this._center}},{key:"tl",get:function(){if(!this._tl){var e=this.rect,t=e.x,n=e.y,r=e.r;this._tl=Ue({x:t,y:n},this.center,r)}return this._tl}},{key:"tr",get:function(){if(!this._tr){var e=this.rect,t=e.x,n=e.y,r=e.w,a=e.r;this._tr=Ue({x:t+r,y:n},this.center,a)}return this._tr}},{key:"br",get:function(){return this._br||(this._br=Be(this.tl,this.center)),this._br}},{key:"bl",get:function(){return this._bl||(this._bl=Be(this.tr,this.center)),this._bl}},{key:"tc",get:function(){return this._tc||(this._tc=ze(this.tl,this.tr)),this._tc}},{key:"bc",get:function(){return this._bc||(this._bc=ze(this.br,this.bl)),this._bc}},{key:"rc",get:function(){return this._rc||(this._rc=ze(this.tr,this.br)),this._rc}},{key:"lc",get:function(){return this._lc||(this._lc=ze(this.tl,this.bl)),this._lc}}]),e}();function We(e,t,n,r){var a=new He(n),o=null,i=[],c=e;if(r){switch(t){case"tl":case"br":i=[a.tl,a.br];break;case"tr":case"bl":i=[a.tr,a.bl];break;case"tc":case"bc":i=[a.tc,a.bc],o="height";break;case"lc":case"rc":i=[a.lc,a.rc],o="width";break;default:i=[]}2===i.length&&(c=function(e,t){var n=t.x,r=t.y,a=Y()(e,2),o=a[0],i=a[1];if(Le(o.x,i.x))return{x:o.x,y:r};if(Le(o.y,i.y))return{x:n,y:o.y};var c=Ie(o.x,o.y,i.x,i.y),l=-1/c,s=(c*o.x+r-o.y-l*n)/(c-l);return{x:s,y:o.y-c*(o.x-s)}}(i,e))}var l=[];switch(t){case"tl":l=[a.br];break;case"tr":l=[a.bl];break;case"bl":l=[a.tr];break;case"br":l=[a.tl];break;case"bc":l=[a.tl,a.tr];break;case"tc":l=[a.bl,a.br];break;case"lc":l=[a.tr,a.br];break;case"rc":l=[a.tl,a.bl];break;default:l=[]}var s,u=l.length;return 1===u?s=function(e,t,n){var r=ze(e,t),a=Ue(t,r,-n),o=a.x,i=a.y,c=Math.abs(2*(o-r.x)),l=Math.abs(2*(i-r.y));return{x:r.x-c/2,y:r.y-l/2,w:c,h:l,r:n}}(l[0],c,n.r):2===u&&(s=r?function(e,t,n,r){var a,o,i=Y()(e,2),c=i[0],l=i[1],s=ze(c,l),u=t,d=ze(s,u),f=function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}(s,u),p=n.w/n.h;return"width"===r?o=(a=f)/p:a=p*(o=f),{x:d.x-a/2,y:d.y-o/2,w:a,h:o,r:n.r}}(l,c,n,o):function(e,t,n){var r,a,o,i=e.map((function(e){return Fe(e,-n)})),c=Y()(i,2),l=c[0],s=c[1],u=Fe(t,-n);Le(l.y,s.y)?(r=Math.abs(l.x-s.x),a=Math.abs(u.y-l.y),o={x:(l.x+s.x)/2,y:(l.y+u.y)/2}):Le(l.x,s.x)&&(a=Math.abs(l.y-s.y),r=Math.abs(u.x-l.x),o={x:(l.x+u.x)/2,y:(l.y+s.y)/2});var d=Fe(o,n);return{x:d.x-r/2,y:d.y-a/2,w:r,h:a,r:n}}(l,c,n.r)),s}function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xe=E.o.Event,Ke=E.a.radialQuadrantSegmentationGenerator,Ze=E.a.getLineEquation,$e=E.s.rectPath,Qe=E.s.parsePathString,Je=E.n.Group,et=E.n.FixedGroup,tt=E.n.Path,nt=E.n.Image,rt={lake_prevent_click_unselect:!0,vertex_resize_controller:!0};function at(e){var t=new et,n=new tt({d:$e(-3,-3,6,6,1),stroke:"#096DD9",fill:"white"});return t.add(n),n.dataset(Ge(Ge({},rt),{},{type:"point"})),{group:t,shape:n,name:e}}function ot(e){var t=new Je,n=new tt({stroke:"rgba(255,255,255,0)"}),r=new tt({stroke:"#096DD9"});return n.dataset(Ge(Ge({},rt),{},{type:"line"})),t.add(r),t.add(n),{visShape:r,shape:n,name:e,group:t}}function it(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[t.x+t.width/2,t.y+t.height/2],a=Math.cos(n),o=Math.sin(n),i=Ke(8,r,[r[0]+a,r[1]+o]);return i(e,0)||i(e,4)?"ew-resize":i(e,1)||i(e,5)?"nesw-resize":i(e,2)||i(e,6)?"ns-resize":"nwse-resize"}var ct=function(){function e(t){R()(this,e);var n=new Je,r=t.diagram,a=ot("tc"),o=ot("bc"),i=ot("lc"),c=ot("rc"),l=at("tl"),s=at("tr"),u=at("bl"),d=at("br"),f=function(e){var t=new et,n=new nt({href:"https://gw.alipayobjects.com/zos/bmw-prod/e219ce81-1f30-43b8-aae6-14d41545d352.svg",x:-8,y:-8,width:16,height:16});return t.add(n),n.dataset({lake_prevent_click_unselect:!0}),t.css({cursor:"pointer"}),{group:t,shape:n,name:"rotate"}}();n.on("mousedown",(function(e){e.stopPropagation(),e.preventDefault()})),n.add(a.group),n.add(o.group),n.add(i.group),n.add(c.group),n.add(l.group),n.add(s.group),n.add(u.group),n.add(d.group),n.add(f.group),this.cell=t,this.diagram=r,this.group=n,this.tl=l,this.tr=s,this.bl=u,this.br=d,this.tc=a,this.bc=o,this.lc=i,this.rc=c,this.rotateBtn=f,this.eventHelper=new Xe}return O()(e,[{key:"update",value:function(){var e=this.cell,t=this.tl,n=this.tr,r=this.bl,a=this.br,o=this.tc,i=this.bc,c=this.lc,l=this.rc,s=this.rotateBtn,u=1/this.diagram.viewport.zoom,d=e.rotate/360*2*Math.PI,f=e.getRelativePoint({x:0,y:0}),p=e.getRelativePoint({x:1,y:0}),h=e.getRelativePoint({x:0,y:1}),m=e.getRelativePoint({x:1,y:1}),g=u,v=8*u,y=12*u+e.stroke.width/2,b=e.getCanvasPoint({x:e.width+y,y:-y});t.group.update(Ge(Ge({},f),{},{scale:u,rotate:d})),n.group.update(Ge(Ge({},p),{},{scale:u,rotate:d})),r.group.update(Ge(Ge({},h),{},{scale:u,rotate:d})),a.group.update(Ge(Ge({},m),{},{scale:u,rotate:d})),s.group.update(Ge(Ge({},b),{},{scale:u,rotate:d})),o.shape.update({d:"M".concat(f.x,",").concat(f.y," L").concat(p.x,",").concat(p.y),"stroke-width":v}),i.shape.update({d:"M".concat(h.x,",").concat(h.y," L").concat(m.x,",").concat(m.y),"stroke-width":v}),c.shape.update({d:"M".concat(f.x,",").concat(f.y," L").concat(h.x,",").concat(h.y),"stroke-width":v}),l.shape.update({d:"M".concat(p.x,",").concat(p.y," L").concat(m.x,",").concat(m.y),"stroke-width":v}),o.visShape.update({d:"M".concat(f.x,",").concat(f.y," L").concat(p.x,",").concat(p.y),"stroke-width":g}),i.visShape.update({d:"M".concat(h.x,",").concat(h.y," L").concat(m.x,",").concat(m.y),"stroke-width":g}),c.visShape.update({d:"M".concat(f.x,",").concat(f.y," L").concat(h.x,",").concat(h.y),"stroke-width":g}),l.visShape.update({d:"M".concat(p.x,",").concat(p.y," L").concat(m.x,",").concat(m.y),"stroke-width":g})}},{key:"bindEvent",value:function(){var e,t,n,r,a,o,i,c,l=this,s=this.cell,u=this.tl,d=this.tr,f=this.bl,p=this.br,h=this.tc,m=this.bc,g=this.lc,v=this.rc,y=this.rotateBtn,b=this.eventHelper,k=s.diagram,w=k.viewport.zoom;function x(){var t={x:o.x+s.stroke.width/2,y:o.y+s.stroke.width/2,width:Math.max(o.w-s.stroke.width,1),height:Math.max(o.h-s.stroke.width,1),rotate:o.r};return"lc"===e||"rc"===e?t.height=void 0:"tc"!==e&&"bc"!==e||(t.width=void 0),t}[u,d,f,p,h,m,g,v,y].forEach((function(a){var o=a.shape,l=a.name;b.bind(o,"mousedown",(function(a){k.contentEditor.unbind(),e=l,n=k.viewport.invertClient([a.clientX,a.clientY]),r={x:s.x,y:s.y,width:s.width,height:s.height,rotate:s.rotate},t={x:s.x-s.stroke.width,y:s.y-s.stroke.width,w:s.width+2*s.stroke.width,h:s.height+2*s.stroke.width,r:s.rotate},"tc"!==e&&"bc"!==e||(k.align.preventAlignX=!0),"lc"!==e&&"rc"!==e||(k.align.preventAlignY=!0),i=Ze(t.x,t.y+t.h,t.x+t.w,t.y),c=Ze(t.x,t.y,t.x+t.w,t.y+t.h)}))})),b.bind(k,"mousemove",(function(r){if(e){var u=k.viewport.invertClient([r.clientX,r.clientY]),d=k.signal.keydown.Shift||s.constraints&&s.constraints.proportion;if("rotate"===e)o=function(e,t,n,r){var a=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},a={x:n.x-e.x,y:n.y-e.y},o=qe(r);return qe(a)-o}(Ve(n),e,t),o=n.r+a;return o>=180&&(o-=360),o<=-180&&(o+=360),r&&(o=r*Math.round(o/r)),Ne(Ne({},n),{},{r:o})}({x:n[0],y:n[1]},{x:u[0],y:u[1]},t,d&&15);else{var f=("tl"===e||"br"===e)&&c||("bl"===e||"tr"===e)&&i,p=f&&f.f(u[0]);u[1]=d&&p?p:u[1];var h=k.align.alignByPoint({x:u[0],y:u[1],weight:1,box:s.getBBox()});o=We({x:u[0]+h.dx,y:u[1]+h.dy},e,t)}if(k.update(s,x()),l.update(),-1!==["tl","bl","tr","br"].indexOf(e)){var m=it(k.viewport.invertClient([r.clientX,r.clientY]),s.getBBox(),Math.PI/8);k.setCursor(m)}k.emit("vertexresizestart")}else if(r.target.dataset.vertex_resize_controller){var g;if("line"===r.target.dataset.type){var v=Qe(r.target.getAttribute("d"));g=it([v[1][1]-v[0][1],v[1][2]-v[0][2]],{x:-1,y:-1,width:1,height:1},Math.PI/2+.01)}else g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[t.x+t.width/2,t.y+t.height/2],a=Math.cos(n),o=Math.sin(n),i=Ke(4,r,[r[0]+a,r[1]+o]);return i(e,0)||i(e,2)?"nesw-resize":"nwse-resize"}(k.viewport.invertClient([r.clientX,r.clientY]),s.getBBox());a||(a=!0),k.setCursor(g)}else a&&(k.resetCursor(),a=void 0)})),b.bind(k,"mouseup",(function(){o&&t&&(t.x!==o.x||t.y!==o.y||t.w!==o.w||t.h!==o.h||t.r!==o.r)&&k.command.execute("Update",{id:s,model:x(),originModels:[r]}),e=void 0,t=void 0,o=void 0,n=void 0,a=void 0,r=void 0,k.align.reset()})),b.bind(k,"afterviewportchange",_()((function(){w!==k.viewport.zoom&&(l.update(),w=k.viewport.zoom)})))}},{key:"begin",value:function(){this.cell.diagram.frontRootGroup.add(this.group),this.update(),this.bindEvent()}},{key:"end",value:function(){this.group&&this.group.remove(),this.eventHelper.unbind(),this.diagram&&this.diagram.align.reset()}},{key:"destroy",value:function(){this.diagram&&this.diagram.resetCursor(),this.eventHelper.unbind(),this.group&&this.group.clear(),this.cell=void 0,this.diagram=void 0,this.group=void 0,this.tl=void 0,this.tr=void 0,this.bl=void 0,this.br=void 0}}]),e}(),lt=E.n.Group,st=E.n.Path,ut=E.n.Rect,dt=E.n.Use,ft=E.s.formatPath,pt=E.s.rectPath,ht="lock-resize-cross",mt=function(){function e(t){R()(this,e);var n=t.diagram,r=t.width,a=t.height,o=new lt,i=new ut({x:0,y:0,width:r||0,height:a||0,stroke:"#9A9A9A",fill:"none"});if(o.add(i),n.container&&!n.container.querySelector("#".concat(ht))){var c=function(){var e=new lt({id:ht}),t=new st({d:ft([["M",-3,-3],["L",3,3],["M",-3,3],["L",3,-3]]),stroke:"#FFFFFF","stroke-width":3}),n=new st({d:ft([["M",-3,-3],["L",3,3],["M",-3,3],["L",3,-3]]),stroke:"#979797","stroke-width":1});return e.add(t),e.add(n),e}();n.defs.add(c)}for(var l=[],s=0;s<4;s++){var u=new dt({href:"#".concat(ht)});o.add(u),l.push(u)}var d=l[0],f=l[1],p=l[2],h=l[3];this.group=o,this.cell=t,this.diagram=n,this.rect=i,this.tl=d,this.tr=f,this.bl=h,this.br=p}return O()(e,[{key:"update",value:function(){var e=this.cell,t=this.diagram,n=this.group,r=this.rect,a=this.tr,o=this.bl,i=this.br,c=e.x,l=e.y,s=e.rotate,u=1/t.viewport.zoom,d=e.width/u,f=e.height/u;n.update({matrix:Te(c,l,e.width,e.height,s,u)}),r.update({d:pt(0,0,d,f)}),a.update({matrix:[1,0,0,0,1,0,d,0,1]}),o.update({matrix:[1,0,0,0,1,0,0,f,1]}),i.update({matrix:[1,0,0,0,1,0,d,f,1]})}},{key:"begin",value:function(){this.cell.diagram.frontRootGroup.add(this.group),this.update()}},{key:"end",value:function(){this.group&&this.group.remove()}}]),e}();function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var vt=E.n.Rect,yt=E.n.Ellipse,bt=E.n.Polygon,kt=E.n.Path;function wt(e){switch((e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({"stroke-linecap":"round","stroke-linejoin":"round"},e)).name){case"rect":return new vt(e);case"ellipse":return new yt(e);case"polygon":return new bt(e);default:return new kt(e)}}function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _t=E.n.Group,Et=function(e){P()(n,E.u);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"render",value:function(){var e=this.cell,t=new _t;this.element=t,e.graphicGroup.add(t)}},{key:"update",value:function(){var e=this.cell,t=this.element;e.isCacheStale("shape")&&(t.clear(),this.shapeElement=wt(e.stencil.outline),t.add(this.shapeElement))}},{key:"draw",value:function(){var e=this.cell,t=this.shapeElement,n=e.stroke,r=e.fill,a=e.width,o=e.height,i=e.stencil,c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.convertStrokeStyle());if(e.isCacheStale("width","height","shape")){var l=a/i.width,s=o/i.height;c.d=t.getPath(l,s)}e.isCacheStale("stroke")&&Object.assign(c,{stroke:n.color,"stroke-width":n.width}),e.isCacheStale("fill")&&(c.fill=r.color),t.update(c)}}]),n}();function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}["getTotalLength","isPointInFill","isPointInStroke"].forEach((function(e){Object.defineProperty(Et.prototype,e,{value:function(){var t;return(t=this.shapeElement)[e].apply(t,arguments)}})}));var St=E.n.Group,Rt=function(e){P()(n,E.u);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"render",value:function(){var e=this.cell;this.element=new St,e.graphicGroup.add(this.element)}},{key:"renderElements",value:function(){var e=this.element,t=this.cell.stencil.scene.map((function(e){return wt(e)}));t.forEach((function(t){e.add(t)})),this.elements=t}},{key:"update",value:function(){var e=this.cell,t=this.elements;e.isCacheStale("shape")&&(t&&t.forEach((function(e){return e.remove()})),this.renderElements())}},{key:"draw",value:function(){var e,t,n=this.cell,r=this.elements,a=n.stroke,o=n.fill,i={};if(n.isCacheStale("width","height")){var c=n.stencil,l=n.width,s=n.height;e=l/c.width,t=s/c.height}n.isCacheStale("stroke")&&(i.stroke=a.color,i["stroke-width"]=a.width),n.isCacheStale("fill")&&(i.fill=o.color),r.forEach((function(n){e&&t?n.update(Ot(Ot({},i),{},{d:n.getPath(e,t)})):n.update(i)}))}}]),n}();function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Pt=E.n.Html,At=E.h.setStyleSheets,Tt=function(e){P()(n,E.u);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"render",value:function(){var e=this.cell,t=e.graphicGroup,n=new Pt({styleSheets:e.textAreaContentStyleSheets,html:e.html});n.htmlContainer.classList.add("selection-transparent"),t.add(n),this.element=n,e.textAreaElement=n,this.initCalculatedDOM(),this.update()}},{key:"initCalculatedDOM",value:function(){var e=this.cell.diagram,t=document.createElement("div");e.calculatedContainer.appendChild(t),this.calculatedDOM=t}},{key:"update",value:function(){var e=this.cell,t=this.calculatedDOM,n=e.cache,r=e.textAreaContentStyleSheets;n.html!==e.html&&(t.innerHTML=e.html),this.updateStyleSheets(),["html","width","height","image"].some((function(t){return n[t]!==e[t]}))&&(At(t,r),this._setBBox())}},{key:"updateStyleSheets",value:function(){for(var e=this.cell,t=e.textAreaContentStyleSheets,n=e.getPadding(),r=e.isDiscrete(),a=0;a<t.length;a++){var o=t[a];if("self"===o.query){var i=e.getOuterWidth();o.css.width=i&&!r?i-n[1]-n[3]+"px":""}}}},{key:"getPosition",value:function(){var e=this.cell,t=e.isDiscrete(),n=e.width,r=e.height,a=e.image,o=this.getBBox(),i=e.getPadding(),c=a&&a.height||0,l=c+o.height;return t?{x:(n-o.width)/2,y:r+8}:{x:Math.max((n-o.width)/2,i[3]),y:(r-l)/2+(c?c+2:0)}}},{key:"calculateBBox",value:function(){var e=this.calculatedDOM;e.style.display="inline-block";var t=e.getBoundingClientRect();return e.style.display="none",t}},{key:"_setBBox",value:function(){this.box=this.calculateBBox()}},{key:"getBBox",value:function(){return this.box}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=this.box,r=e.cache,a=e.textAreaContentStyleSheets,o={};r.html!==e.html&&(o.html=e.html),["html","width","height"].some((function(t){return r[t]!==e[t]}))&&(At(t.htmlContainer,a),Object.assign(o,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({width:Math.ceil(n.width),height:Math.ceil(n.height)},this.getPosition()))),Object.keys(o).length>0&&(t.update(o),"read"===e.diagram.interaction.currentMode&&t.htmlContainer.querySelectorAll("a").forEach((function(e){var t=e.href,n=window.location.origin+window.location.pathname;(t===n||t.startsWith(n+location.search+"#"))&&e.removeAttribute("target")})))}},{key:"destroy",value:function(){this.element.destroy(),this.calculatedDOM.remove()}}]),n}();function Dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}L()(Tt,"className","TextArea"),L()(Tt,"configName","textArea"),L()(Tt,"zIndex",2);var Nt=E.h.mergeCellOptions,Lt=function(e){P()(n,E.e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return R()(this,n),r=Nt({default:{html:"",x:0,y:0,rotate:0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],opacity:1,locked:!1},textAreaContentStyleSheets:[{query:"self",css:{outline:"none","white-space":"normal","letter-spacing":"normal","font-size":"14px","font-family":'PingFangSC-Regular, "PingFang SC", sans-serif',"min-height":"24px","min-width":"24px","line-height":"1.74","word-break":"break-word",color:"#262626"}}],penetratedKeys:["x","y","width","height","stroke","fill","rotate","html","shape","image","constraints","opacity","locked"]},r),e=t.call(this,r),Object.assign(F()(e),V()(r.default)),e.Subcells=r.Subcells||[Et,Rt,Tt],e.isVertex=!0,e.initRotateResize(),e.initSubcell(),e.eventDelegation(),e.render(),e}return O()(n,[{key:"canArrange",value:function(){return!0}},{key:"getRelativePoint",value:function(e){return B()(M()(n.prototype),"getRelativePoint",this).call(this,e,this.stroke.width/2)}},{key:"initRotateResize",value:function(){this.rotateResize=new ct(this),this.lockResize=new mt(this)}},{key:"beginRotateResize",value:function(){this.locked?this.lockResize.begin():this.rotateResize.begin()}},{key:"endRotateResize",value:function(){this.rotateResize.end(),this.lockResize.end()}},{key:"snapAnchor",value:function(e){var t=this,n=this.getRelativePoint({x:.5,y:.5}),r=[e.x-n.x,e.y-n.y];return this.anchors.map((function(e){var a=t.getRelativePoint(e);return Mt(Mt({},a),{},{rad:Ae(r,[a.x-n.x,a.y-n.y])})})).sort((function(e,t){return e.rad-t.rad}))}},{key:"initSubcell",value:function(){var e=this;this.subcells=this.Subcells.map((function(t){return new t(e)}))}},{key:"getEventObject",value:function(e){return{cell:this,nativeEvent:e}}},{key:"eventDelegation",value:function(){var e=this.graphicGroup;this.delegateEvent(e,"mouseenter","vertexcell:mouseenter"),this.delegateEvent(e,"mouseleave","vertexcell:mouseleave")}},{key:"updateStencil",value:function(){var e=this,t=this.shape,n=this.stencils,r=t||"process";if(!this.stencil||this.stencil.name!==r){var a=n.find((function(e){return e.name===r}));if(!a)throw new Error("unknown shape ".concat(r));this.stencil=a,this.updateAnchors(),["width","height"].forEach((function(t){null==e[t]&&(e[t]=a[t])})),this.cache={}}}},{key:"updateAnchors",value:function(){for(var e=this.anchors,t=this.stencil,n=function(n){var r=e[n],a=t.anchors.find((function(e){return e.name===r.name}));a&&(e[n]=a)},r=0;r<e.length;r++)n(r)}},{key:"render",value:function(){var e=this.model;this.subcells.forEach((function(e){return e.render()})),this.updateModel(e)}},{key:"updateSize",value:function(){}},{key:"updateModel",value:function(e){if(!this.locked||e.hasOwnProperty("locked")){if(this.constraints&&this.constraints.proportion){var t=this.width/this.height;e.height>0&&null==e.width?e.width=e.height*t:e.width>0&&(e.height=e.width/t)}B()(M()(n.prototype),"updateModel",this).call(this,e),this.updateStencil(),this.updateSize(),this.updateMatrix(),this.subcells.forEach((function(e){e.update()}))}}},{key:"draw",value:function(){this.subcells.forEach((function(e){return e.draw()})),this.graphicGroup.attr({opacity:this.opacity}),this.drawPosition(),this.updateCache()}},{key:"updateCache",value:function(){var e=this,t=this.cache;["x","y","width","height","rotate","shape","fill","stroke"].forEach((function(n){var r=e[n];t[n]=H()(r)?Mt({},r):r}))}},{key:"drawPosition",value:function(){if(this.isCacheStale("matrix")){var e=this.graphicGroup,t=this.matrix;e.update({matrix:t})}}},{key:"canDelete",value:function(){return!this.locked}},{key:"getPadding",value:function(){var e=this.stencil,t=this.width,n=this.height;if(e&&Array.isArray(e.padding)){var r=e.padding,a=t/e.width,o=n/e.height;return r.map((function(e,t){return e*(t%2==0?o:a)}))}return[4,4,4,4]}},{key:"isDiscrete",value:function(){var e=this.stencil;return!!e&&e.discrete}},{key:"updateMatrix",value:function(){if(this.isCacheStale("x","y","width","height","rotate")){var e=this.x,t=this.y,n=this.width,r=this.height,a=this.rotate;this.matrix=Te(e,t,n,r,a)}}},{key:"getKeyShape",value:function(){return this.subcells.find((function(e){return e instanceof Et})).shapeElement}},{key:"destroy",value:function(){this.subcells.forEach((function(e){return e.destroy()})),this.rotateResize.destroy(),B()(M()(n.prototype),"destroy",this).call(this)}}]),n}();function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}L()(Lt,"className","VertexCell");var zt=function(e){P()(n,Lt);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return R()(this,n),(e=t.call(this,Bt({default:{stencils:je,shape:"process",stroke:{color:"#595959",width:2},fill:{color:"#ffffff"}}},r))).isGeometry=!0,e}return O()(n,[{key:"render",value:function(){B()(M()(n.prototype),"render",this).call(this);var e=this.model;e.width||(e.width=this.width),e.height||(e.height=this.height)}},{key:"getOuterWidth",value:function(){return this.width}}]),n}();L()(zt,"className","GeometryCell");var Ft=function(e){P()(n,zt);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return R()(this,n),(e=t.call(this,r)).isFlowchart=!0,e}return O()(n)}();function Ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}L()(Ft,"className","FlowchartCell");var qt=E.k.Vertex,Ht=E.h.between,Wt=E.a.lineIntercept,Yt=E.a.manhattanDistance,Gt=E.a.pointInLine,Xt=E.a.linesToGraph,Kt=E.a.pathFinding,Zt=E.a.roughlyEqual,$t=E.a.lineSegmentIntersectRect,Qt=E.a.rectIntersectRect,Jt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R()(this,e),Object.assign(this,Vt({expandRectGap:16},t))}return O()(e,[{key:"getExpandedBBox",value:function(e){var t=this.expandRectGap;return{minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t}}},{key:"getRectLines",value:function(e){var t=500;return[{x1:e.minX,y1:e.minY-t,x2:e.minX,y2:e.maxY+t},{x1:e.minX-t,y1:e.minY,x2:e.maxX+t,y2:e.minY},{x1:e.maxX,y1:e.minY-t,x2:e.maxX,y2:e.maxY+t},{x1:e.minX-t,y1:e.maxY,x2:e.maxX+t,y2:e.maxY}]}},{key:"getVertexLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ray",r=500;return"all"===t?[{x1:e.x,y1:e.y,x2:e.x,y2:e.y-r,type:n},{x1:e.x,y1:e.y,x2:e.x-r,y2:e.y,type:n}]:"N"===t||"S"===t?["N"===t?{x1:e.x,y1:e.y,x2:e.x,y2:e.y-r,type:n}:{x1:e.x,y1:e.y,x2:e.x,y2:e.y+r,type:n}]:["W"===t?{x1:e.x,y1:e.y,x2:e.x-r,y2:e.y,type:n}:{x1:e.x,y1:e.y,x2:e.x+r,y2:e.y,type:n}]}},{key:"vMiddleLine",value:function(e,t){var n;n=Math.abs(e.minX-t.maxX)<Math.abs(e.maxX-t.minX)?(e.minX+t.maxX)/2:(e.maxX+t.minX)/2;var r=((e.minY+e.maxY)/2+(t.minY+t.maxY)/2)/2;return{x1:n,y1:r-500,x2:n,y2:r+500}}},{key:"hMiddleLine",value:function(e,t){var n;n=Math.abs(e.minY-t.maxY)<Math.abs(e.maxY-t.minY)?(e.minY+t.maxY)/2:(e.maxY+t.minY)/2;var r=((e.minX+e.maxX)/2+(t.minX+t.maxX)/2)/2;return{x1:r-500,y1:n,x2:r+500,y2:n}}},{key:"cost",value:function(e){var t,n=e.vertex,r=e.end,a=e.middleLine,o=0,i=0;return t=n.distance+Yt(n.x,n.y,r.x,r.y),n.from&&n.from.from&&Wt(n.x,n.y,n.from.x,n.from.y)!==Wt(n.from.x,n.from.y,n.from.from.x,n.from.from.y)&&(o=-1),a&&n.from&&n.from.from&&Gt(n,a)&&!Gt(n.from.from,a)&&n.from&&n.from.from&&Wt(n.x,n.y,n.from.x,n.from.y)!==Wt(n.from.x,n.from.y,n.from.from.x,n.from.from.y)&&(i=2),-t+o+i}},{key:"getSide",value:function(e,t){var n=[(e.minX+e.maxX)/2,(e.minY+e.maxY)/2],r=[e.maxX,e.minY],a=[e.maxX,e.maxY],o=[r[0]-n[0],r[1]-n[1]],i=[a[0]-n[0],a[1]-n[1]],c=[t[0]-n[0],t[1]-n[1]],l=Ae(o,i),s=l/2,u=[0,s],d=[u[1],s+Math.PI-l],f=[d[1],s+Math.PI],p=[2*Math.PI-s,2*Math.PI],h=Ae(c,[1,0]);return c[1]<0&&(h=2*Math.PI-h),Ht(h,u)||Ht(h,p)?"E":Ht(h,d)?"S":Ht(h,f)?"W":"N"}},{key:"dedupePoints",value:function(e){if(e.length>=3){for(var t=[e[0]],n=1;n<e.length-1;n++){var r=e[n-1],a=e[n],o=e[n+1];Zt(r.x,a.x)&&Zt(o.x,a.x)||Zt(r.y,a.y)&&Zt(o.y,a.y)||t.push(a)}return t.push(e[e.length-1]),t}return e}},{key:"getExpandPoint",value:function(e,t,n){return"N"===n?{x:e.x,y:t.minY}:"S"===n?{x:e.x,y:t.maxY}:"W"===n?{x:t.minX,y:e.y}:"E"===n?{x:t.maxX,y:e.y}:null}},{key:"find",value:function(e,t){var n=this,r=e.cell,a=t.cell,o=r&&r.getBBox(),i=a&&a.getBBox(),c=o&&this.getExpandedBBox(o),l=i&&this.getExpandedBBox(i),s=[];s=c?s.concat(this.getRectLines(c)):s,s=l?s.concat(this.getRectLines(l)):s;var u,d,f,p=new qt("start"),h=new qt("end"),m=[e.x,e.y],g=[t.x,t.y];Object.assign(p,{x:m[0],y:m[1]}),Object.assign(h,{x:g[0],y:g[1]}),o?(d=this.getSide(o,m),s=s.concat(this.getVertexLine(p,d))):s=s.concat(this.getVertexLine(p,"all","straight")),i?(f=this.getSide(i,g),s=s.concat(this.getVertexLine(h,f))):s=s.concat(this.getVertexLine(h,"all","straight")),a&&r&&("E"===d&&"W"===f?u=r.x+r.width<a.x?this.vMiddleLine(o,i):this.hMiddleLine(o,i):"W"===d&&"E"===f?u=r.x+r.width<a.x?this.hMiddleLine(o,i):this.vMiddleLine(o,i):"S"===d&&"N"===f?u=r.y+r.height>a.y?this.vMiddleLine(o,i):this.hMiddleLine(o,i):"N"===d&&"S"===f&&(u=r.y+r.height>a.y?this.hMiddleLine(o,i):this.vMiddleLine(o,i))),e.d&&("N"===d?p.y-=e.d:"S"===d?p.y+=e.d:"E"===d?p.x+=e.d:"W"===d&&(p.x-=e.d)),t.d&&("N"===f?h.y-=t.d:"S"===f?h.y+=t.d:"E"===f?h.x+=t.d:"W"===f&&(h.x-=t.d)),u&&s.push(u);var v=Xt(s);o&&i&&!Qt(c,l)&&v.getAllEdges().forEach((function(e){var t=e.startVertex,n=e.endVertex,r={x1:t.x,y1:t.y,x2:n.x,y2:n.y};($t(r,o)||$t(r,i))&&v.deleteEdge(e)}));var y,b=this.getExpandPoint(p,c,d)||p,k=this.getExpandPoint(h,l,f)||h,w=v.snap(b),x=v.snap(k);return w.from=p,x.from=h,(y=Zt(w.x,x.x)&&Zt(w.y,x.y)?[]:Kt(v,w,x,(function(e,t,r){return n.cost({vertex:e,start:t,end:r,middleLine:u})}))).unshift(p),y.push(h),this.dedupePoints(y)}},{key:"destroy",value:function(){this.destroyed=!0}}]),e}();function en(e,t,n){for(var r=e.getCellsByZIndex().filter((function(e){return!e.isLine&&!e.locked&&!e.isGroup})),a=r.length-1;a>=0;a--){var o=r[a],i=o.getConnection(t);if(i&&o.model.id!==n)return i===o?{id:o.model.id,connection:null}:{id:o.model.id,connection:i}}return{id:null,connection:t}}E.a.lineDistance;var tn=E.a.lineSlope;function nn(e,t){var n=Y()(e,2),r=n[0],a=n[1],o=Y()(t,2),i=o[0],c=o[1],l=tn(r,a,i,c);Math.abs(l)<.1&&Math.abs(c-a)<8?t[1]=a:Math.abs(l)>10&&Math.abs(i-r)<8&&(t[0]=r)}E.a.lineRadian;var rn=E.o.Event,an=E.n.FixedGroup,on=E.n.Rect,cn=E.s.parsePathString,ln=E.a.lineRadian,sn=E.h.pick;function un(e){var t=new an,n=new on({x:-3,y:-3,width:6,height:6,rx:1,stroke:"#096DD9",fill:"white"}),r=new on({x:-10,y:-10,width:20,height:20,fill:"transparent"});return t.add(r),t.add(n),t.css({cursor:"move"}),t.dataset({lake_prevent_click_unselect:!0,test_id:"line_endpoint_".concat(e)}),{group:t,shape:n,name:e}}var dn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R()(this,e),Object.assign(this,t);var n=this.group,r=this.cell,a=["source","target"].map((function(e){return un(e)}));a.forEach((function(e){return n.add(e.group)})),this.buttons=a,this.diagram=r.diagram,this.eventHelper=new rn,this.cacheEndpointId=null}return O()(e,[{key:"update",value:function(){var e=this.buttons,t=this.cell,n=this.diagram;if(this.group.parent){var r=Y()(e,2),a=r[0],o=r[1],i=cn(t.d),c=i[0].slice(1),l=i[i.length-1],s=l.slice(l.length-2),u=1/n.viewport.zoom;if(a.group.update({scale:u,x:c[0],y:c[1]}),o.group.update({scale:u,x:s[0],y:s[1]}),"straight"===t.shape){var d=ln(c[0],c[1],s[0],s[1]);e.forEach((function(e){return e.group.update({rotate:d})}))}else e.forEach((function(e){return e.group.update({rotate:0})}))}}},{key:"bindEvent",value:function(){var e,t,n,r=this,a=this.buttons,o=this.cell,i=this.diagram,c=this.eventHelper,l=function(){i.resetCursor(),e=void 0,t=void 0,n=void 0,r.cacheEndpointId&&i.highlight.clear(),r.cacheEndpointId=null};a.forEach((function(n){var r=n.name,a=n.group;c.bind(a,"mousedown",(function(){e=r,t=X()({connection:null,id:null},sn(o.model[e],{connection:!0,id:!0}))}))})),c.bind(i,"mousemove",(function(t){if("source"===e||"target"===e){var a="source"===e?"target":"source",c=i.viewport.invertClient([t.clientX,t.clientY]);if((n=en(i,c)).connection&&!n.id){var l=o.getEndpoint(o[a]);nn([l.x,l.y],n.connection)}r.cacheEndpointId!==n.id&&(i.highlight.dock([i.find(n.id)]),r.cacheEndpointId=n.id),i.update(o,L()({},e,n)),i.setCursor("move"),r.update()}})),c.bind(i,"mouseup",(function(){"source"!==e&&"target"!==e||(i.command.execute("Update",{id:o.model.id,model:L()({},e,n),originModels:L()({},e,t)}),l())})),c.bind(i,"keydown",(function(n){var a=r.cell,o=r.diagram;!e||"Esc"!==n.key&&"Escape"!==n.key||(o.update(a,L()({},e,t)),r.update(),l())})),c.bind(i,"afterviewportchange",_()((function(){var e=r.buttons,t=r.cell;e&&t&&r.update()}),16))}},{key:"begin",value:function(){this.update(),this.bindEvent()}},{key:"end",value:function(){this.eventHelper.unbind()}},{key:"destroy",value:function(){this.eventHelper.unbind(),this.group&&this.group.clear(),this.group=null,this.diagram=null,this.cell=null,this.buttons=null}}]),e}(),fn=E.o.Event,pn=E.n.FixedGroup,hn=E.n.Rect;function mn(e){var t=new pn,n=new hn({x:-3,y:-3,rx:3,ry:3,width:6,height:6,stroke:"#096DD9",fill:"white"}),r=new hn({x:-10,y:-10,width:20,height:20,fill:"transparent"});return t.add(r),t.add(n),t.css({cursor:"move"}),t.dataset({lake_prevent_click_unselect:!0}),{group:t,shape:n,index:e}}var gn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R()(this,e),Object.assign(this,t);var n=this.group,r=this.cell,a=r.controlPoints.map((function(e,t){return mn(t)}));a.forEach((function(e){return n.add(e.group)})),this.buttons=a,this.diagram=r.diagram,this.eventHelper=new fn}return O()(e,[{key:"update",value:function(){var e=this.buttons,t=this.cell,n=this.diagram,r=this.group;if(r.parent)if(t.isLoop)r.css({display:"none"});else{r.css({display:""});var a=1/n.viewport.zoom;e.forEach((function(e){var n=e.group,r=e.index,o=t.getControlPointButtonPosition(r);n.update({scale:a,x:o[0],y:o[1]})}))}}},{key:"bindEvent",value:function(){var e,t,n=this,r=this.buttons,a=this.cell,o=this.diagram,i=this.eventHelper,c=function(){o.resetCursor(),e=void 0,t=void 0};r.forEach((function(n){var r=n.index,c=n.group;i.bind(c,"mousedown",(function(){e=r,t={controlPoints:V()(a.controlPoints)},o.setCursor("move")}))})),i.bind(o,"mousemove",(function(t){if(void 0!==e){var n=o.viewport.invertClient([t.clientX,t.clientY]),r=a.controlPoints[e];r[0]=n[0],r[1]=n[1],a.draw()}})),i.bind(o,"mouseup",(function(){if(void 0!==e){var n=V()(a.controlPoints);o.update(a,t),o.command.execute("Update",{id:a.model.id,model:{controlPoints:n}}),c()}})),i.bind(o,"keydown",(function(r){var a=n.cell,o=n.diagram;!e||"Esc"!==r.key&&"Escape"!==r.key||(o.update(a,t),n.update(),c())})),i.bind(o,"afterviewportchange",_()((function(){var e=n.buttons,t=n.cell;e&&t&&n.update()}),16))}},{key:"begin",value:function(){this.update(),this.bindEvent()}},{key:"end",value:function(){this.eventHelper.unbind()}},{key:"destroy",value:function(){this.eventHelper.unbind(),this.group&&this.group.clear(),this.group=null,this.diagram=null,this.cell=null,this.buttons=null}}]),e}(),vn=E.n.Group,yn=function(){function e(t){R()(this,e);var n=new vn,r=[],a=new vn,o=new dn({group:a,cell:t});if(n.add(a),r.push(o),t.controlPoints.length>0){var i=new vn,c=new gn({group:i,cell:t});n.add(i),r.push(c)}this.diagram=t.diagram,this.subResizers=r,this.group=n}return O()(e,[{key:"update",value:function(){this.subResizers.forEach((function(e){return e.update()}))}},{key:"bindEvent",value:function(){this.subResizers.forEach((function(e){return e.bindEvent()}))}},{key:"begin",value:function(){var e=this.subResizers;this.diagram.frontRootGroup.prepend(this.group),e.forEach((function(e){return e.begin()})),this.isBegin=!0}},{key:"end",value:function(){var e=this.subResizers,t=this.group;e.forEach((function(e){return e.end()})),t&&t.remove(),this.isBegin=!1}},{key:"destroy",value:function(){var e=this.subResizers;this.group.remove(),e.forEach((function(e){return e.destroy()})),this.isBegin=!1}}]),e}();function bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wn=E.n.Marker,xn=E.n.Path,_n=E.s.formatPath,En=function(e){P()(n,E.u);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"render",value:function(){var e=this.cell,t=e.graphicGroup,n={"stroke-linecap":"round","stroke-linejoin":"round"},r=new xn(n),a=new xn(n);t.add(r),this.element=r,this.hitElement=a,e.wireElement=r,this.initMarker()}},{key:"initMarker",value:function(){var e=this.cell.diagram.defs,t=new wn({markerWidth:4,markerHeight:4,refX:7,refY:5,orient:"auto-start-reverse",viewBox:[0,0,10,10]});t.attr({id:Object(K.a)()}),e.add(t);var n=new xn({d:_n([["M",0,0],["L",10,5],["L",0,10],["Z"]]),fill:"#595959",stroke:"#595959"});t.add(n),this.marker=t,this.markerPath=n}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=this.marker,r=this.hitElement,a=e.d,o=e.stroke,i=e.graphicGroup,c={d:a},l="url(#".concat(n.attr("id"),")");c["marker-start"]="arrow"===e.source.marker?l:null,c["marker-end"]="arrow"===e.target.marker?l:null,this.markerPath.update({fill:o.color,stroke:o.color}),t.update(kn(kn({stroke:o.color,"stroke-width":o.width,fill:"none"},e.convertStrokeStyle()),c)),!r.parent&&i.insertAfter(r,t),r.update({stroke:"rgba(255,255,255,0)","stroke-width":o.width+8,fill:"none",d:c.d})}},{key:"destroy",value:function(){this.marker.destroy(),B()(M()(n.prototype),"destroy",this).call(this)}}]),n}();var Cn=function(e){P()(n,Tt);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"updateStyleSheets",value:function(){var e=this.cell,t=e.textAreaContentStyleSheets.find((function(e){return"self"===e.query}));e.diagram.contentEditor.isBegin&&e.diagram.contentEditor.dom===e.textAreaElement.htmlContainer?(t.css.padding="4px 8px",t.css["min-height"]="28px",t.css["min-width"]="54px"):(e.isContentEmpty()?t.css.padding=0:t.css.padding="4px 8px",t.css["min-height"]=0,t.css["min-width"]=0)}},{key:"getPosition",value:function(){var e=this.cell,t=this.box,n=e.getTextAreaPosition();return{x:n.x-t.width/2,y:n.y-t.height/2}}},{key:"calculateBBox",value:function(){var e=this.calculatedDOM;e.style.display="inline-block";var t=e.getBoundingClientRect();return e.style.display="none",t}}]),n}();function On(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?On(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):On(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rn=E.s.formatPath,jn=E.s.polylinePath,Pn=E.s.catmullRomPath,An=E.h.mergeCellOptions,Tn=E.a.lineDistance,Dn=function(e){P()(n,E.e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return R()(this,n),r=An({default:{textAreaContentStyleSheets:[{query:"self",css:{outline:"none","white-space":"normal","letter-spacing":"normal","font-size":"14px","font-family":'PingFangSC-Regular, "PingFang SC", sans-serif',"line-height":"1.74","word-break":"break-word","box-sizing":"border-box",padding:"4px",background:"white",color:"#262626"}}],shape:"straight",stroke:{color:"#595959",width:2},html:'<div style="text-align: center;">'.concat("&#8203;","</div>"),source:{},target:{},controlPoints:[]},penetratedKeys:["source","target","stroke","fill","html","shape","controlPoints"]},r),e=t.call(this,r),Object.assign(F()(e),V()(r.default)),e.Subcells=[En,Cn],e.subcells=e.Subcells.map((function(t){return new t(F()(e))})),e.render(),e.isLine=!0,e.isLoop=!1,e.resizer=new yn(F()(e)),e}return O()(n,[{key:"isDrawable",value:function(){var e=this.diagram,t=this.target,n=this.source,r=e.find(n.id),a=n.id&&!r||r&&!1===r.state.visible,o=e.find(t.id),i=t.id&&!o||o&&!1===o.state.visible;return!(a||i)}},{key:"shouldRefreshEndEditContent",value:function(){return this.isContentEmpty()}},{key:"canFill",value:function(){return!1}},{key:"beginEditContent",value:function(){this.textAreaElement.css({outline:"1px solid #096DD9"})}},{key:"endEditContent",value:function(){this.textAreaElement.css({outline:"none"})}},{key:"getPointByPercent",value:function(e){var t=this.wireElement,n=t.getTotalLength();return t.getPointAtLength(e*n)}},{key:"getPadding",value:function(){return[0,0,0,0]}},{key:"getEndpoint",value:function(e){var t=this.diagram,n=e.id,r=e.connection,a=t.find(n);if(a)return r?a.getPoint(r):a.getPoint([.5,.5]);if(Array.isArray(r)){var o=Y()(r,2);return{x:o[0],y:o[1]}}return r}},{key:"getBBox",value:function(){var e=this.wireElement.rendererElement.getBBox();return{x:e.x,y:e.y,width:e.width,height:e.height,minX:e.x,minY:e.y,maxX:e.x+e.width,maxY:e.y+e.height}}},{key:"getShapeObj",value:function(){var e=this.shape;return this.constructor.Shapes[e]}},{key:"getFirstInsertControlPoints",value:function(){return this.getShapeObj().getFirstInsertControlPoints(this)}},{key:"getTextAreaPosition",value:function(){return this.getShapeObj().getTextAreaPosition(this)}},{key:"getControlPointButtonPosition",value:function(e){return this.getShapeObj().getControlPointButtonPosition(this,e)}},{key:"getPath",value:function(){var e=this.shape,t=this.sourceCell,n=this.isLoop,r=this.getShapeObj();if(n){var a=t.getPoint([1,.5]);return Rn([["M",a.x,a.y-8],["l",16,-4],["l",0,24],["L",a.x,a.y+8]])}if(r)return r.getPath(this);throw new Error("unsupported line shape ".concat(e))}},{key:"updatePath",value:function(){this.isCacheStale("shape","source","target")&&(this.d=this.getPath())}},{key:"render",value:function(){var e=this.model;this.subcells.forEach((function(e){return e.render()})),this.updateModel(e)}},{key:"updateModel",value:function(e){B()(M()(n.prototype),"updateModel",this).call(this,e),this.subcells.forEach((function(e){e.update()}))}},{key:"draw",value:function(){if(this.isDrawable()){var e=this.source,t=this.target,n=this.diagram,r=n.find(e.id),a=n.find(t.id);this.isLoop=null!=r&&r===a,this.sourceCell=r,this.targetCell=a,this.show(),this.updatePath(),this.subcells.forEach((function(e){return e.draw()})),this.drawPosition()}else this.hide()}},{key:"updateCache",value:function(){var e=this,t=this.cache;["shape","source","target"].forEach((function(n){var r=e[n];t[n]=H()(r)?Sn({},r):r}))}},{key:"drawPosition",value:function(){if(this.isCacheStale("matrix")){var e=this.graphicGroup,t=this.matrix;e.update({matrix:t}),this.resizer.update()}}},{key:"getPoints",value:function(){var e=this.source,t=this.target,n=this.sourceCell,r=this.targetCell,a=this.getEndpoint(e),o=this.getEndpoint(t);if(!a||!o)return[a,o];if(a.x===o.x&&a.y===o.y)return o.x+=2,o.y+=2,[a,o];var i=this.controlPoints.map((function(e){var t=Y()(e,2);return{x:t[0],y:t[1]}})),c=i.length;return n&&!e.connection&&(a=n.getIntersectionPoint(a,i[0]||o)),r&&!t.connection&&(o=r.getIntersectionPoint(o,i[c-1]||a)),[a].concat(i).concat(o)}},{key:"destroy",value:function(){this.subcells.forEach((function(e){return e.destroy()})),this.resizer.destroy(),B()(M()(n.prototype),"destroy",this).call(this)}}]),n}();L()(Dn,"className","LineCell"),L()(Dn,"Shapes",{}),Dn.registerShape=function(e,t){this.Shapes[e]=Sn({getFirstInsertControlPoints:function(){return!1},getTextAreaPosition:function(e){return e.getPointByPercent(.5)},getControlPointButtonPosition:function(e,t){return e.controlPoints[t]}},t)},Dn.registerShape("straight",{getPath:function(e){var t=e.getPoints();return jn(t)}}),Dn.registerShape("curve",{getControlPointButtonPosition:function(e,t){var n=e.controlPoints,r=e.diagram,a=e.subcells.find((function(e){return e instanceof Cn})),o=n[t].concat([]);return e.isContentEmpty()&&!r.contentEditor.isBegin||(o[1]+=a.box.height/2),o},getTextAreaPosition:function(e){return e.controlPoints.length>0?{x:e.controlPoints[0][0],y:e.controlPoints[0][1]}:e.getPointByPercent(.5)},getPath:function(e){var t=e.getPoints();if(2===t.length)return jn(t);if(3===t.length)return Rn([["M",t[0].x,t[0].y],["Q",(t[1].x-.25*t[2].x-.25*t[0].x)/.5,(t[1].y-.25*t[2].y-.25*t[0].y)/.5,t[2].x,t[2].y]]);var n=Pn(t.reduce((function(e,t){return e.push(t.x),e.push(t.y),e}),[]));return n.unshift(["M",t[0].x,t[0].y]),Rn(n)},getFirstInsertControlPoints:function(e){var t=e.getPointAtLength(.5);return[[t.x,t.y]]}});var Mn=new Jt;function Nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Dn.registerShape("elbow",{getPath:function(e){var t=e.source,n=e.target,r=e.diagram,a=r.find(t.id),o=r.find(n.id),i=1.3*e.stroke.width,c=e.getEndpoint(t),l=e.getEndpoint(n);if(null!=a&&a===o&&Tn(c.x,c.y,l.x,l.y)<8)return c=a.getPoint([1,.5]),Rn([["M",c.x,c.y-8],["l",16,0],["l",0,16],["L",c.x,c.y+8]]);if(!c||!l)return Rn([["M",0,0],["L",50,0],["L",50,50]]);if(a&&!t.connection){var s=o?o.getPoint([.5,.5]):l;c=a.snapAnchor(s)[0]}if(o&&!n.connection){var u=a?a.getPoint([.5,.5]):c;l=o.snapAnchor(u)[0]}if(!a&&!o)return"M".concat(c.x,",").concat(c.y," L").concat(l.x,",").concat(c.y," L").concat(l.x,",").concat(l.y);var d=Mn.find(Sn(Sn({cell:a},c),{},{d:t.marker?i:0}),Sn(Sn({cell:o},l),{},{d:n.marker?i:0}));return jn(d)}});var In=E.a.lineDistance,Bn=E.s.formatPath,zn=E.s.polylinePath,Fn=new Jt,Un=function(e){P()(n,Dn);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return R()(this,n),(e=t.call(this,r)).isEdge=!0,e}return O()(n,[{key:"canArrange",value:function(){var e=this;return["source","target"].every((function(t){var n=e[t];return!n.id&&Array.isArray(n.connection)}))}}]),n}();function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}L()(Un,"className","EdgeCell"),Un.registerShape("elbow",{getPath:function(e){var t=e.source,n=e.target,r=e.diagram,a=r.find(t.id),o=r.find(n.id),i=1.3*e.stroke.width,c=e.getEndpoint(t),l=e.getEndpoint(n);if(null!=a&&a===o&&In(c.x,c.y,l.x,l.y)<8)return c=a.getPoint([1,.5]),Bn([["M",c.x,c.y-8],["l",16,0],["l",0,16],["L",c.x,c.y+8]]);if(!c||!l)return Bn([["M",0,0],["L",50,0],["L",50,50]]);if(a&&!t.connection){var s=o?o.getPoint([.5,.5]):l;c=a.snapAnchor(s)[0]}if(o&&!n.connection){var u=a?a.getPoint([.5,.5]):c;l=o.snapAnchor(u)[0]}if(!a&&!o)return"M".concat(c.x,",").concat(c.y," L").concat(l.x,",").concat(c.y," L").concat(l.x,",").concat(l.y);var d=Fn.find(Ln(Ln({cell:a},c),{},{d:t.marker?i:0}),Ln(Ln({cell:o},l),{},{d:n.marker?i:0}));return zn(d)}});var Hn=function(e){P()(n,Lt);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return R()(this,n),(e=t.call(this,qn({stencils:[{name:"text",width:120,height:60,outline:{name:"rect",x:0,y:0,width:120,height:60,rx:1,ry:1},scene:[],thumb:[{d:[["M",6.4,10.5],["L",25.6,10.5],["C",25.8209139,10.5,26,10.6790861,26,10.9],["L",26,22.1],["C",26,22.3209139,25.8209139,22.5,25.6,22.5],["L",6.4,22.5],["C",6.1790861,22.5,6,22.3209139,6,22.1],["L",6,10.9],["C",6,10.6790861,6.1790861,10.5,6.4,10.5],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]}],default:{fill:{color:"rgba(255,255,255,0)"},shape:"text",stroke:{width:1}}},r))).isText=!0,e}return O()(n,[{key:"updateSize",value:function(){var e=this.subcells.find((function(e){return e instanceof Tt})),t=this.getPadding();e.update();var n=e.getBBox();this.width="number"!=typeof this.model.width?n.width+t[1]+t[3]:this.width,this.height="number"!=typeof this.model.height?n.height+t[1]+t[3]:this.height}}]),n}();L()(Hn,"className","TextCell");var Wn=E.n.Image,Yn=function(e){P()(n,E.u);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"render",value:function(){var e=this.cell,t=new Wn({href:e.image.src,width:e.width,height:e.height});this.element=t,e.graphicGroup.add(t)}},{key:"update",value:function(){var e=this.cell,t=this.element;if(e.isCacheStale("image","width","height")){var n=b.OssUtil.resizeImage({maxWidth:e.width,src:e.image.src,data:{width:e.width,originWidth:e.image.naturalWidth,originHeight:e.image.naturalHeight}});t.update({href:n||e.image.src,width:e.width,height:e.height})}}},{key:"draw",value:function(){}}]),n}();function Gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kn=function(e){P()(n,Lt);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return R()(this,n),(e=t.call(this,Xn(Xn({stencils:[{name:"image",width:120,height:60,outline:{name:"rect",x:0,y:0,width:120,height:60,rx:1,ry:1},scene:[],thumb:[{d:[["M",6.4,10.5],["L",25.6,10.5],["C",25.8209139,10.5,26,10.6790861,26,10.9],["L",26,22.1],["C",26,22.3209139,25.8209139,22.5,25.6,22.5],["L",6.4,22.5],["C",6.1790861,22.5,6,22.3209139,6,22.1],["L",6,10.9],["C",6,10.6790861,6.1790861,10.5,6.4,10.5],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]}],default:{fill:{color:"rgba(255,255,255,0)"},image:{},shape:"image",stroke:{width:1}}},r),{},{Subcells:[Et,Yn]}))).isImage=!0,["src","naturalWidth","naturalHeight"].forEach((function(t){if(null==e.image[t])throw new Error("missing image key ".concat(t))})),e}return O()(n)}();L()(Kn,"className","ImageCell");var Zn=E.n.Group,$n=E.n.Path,Qn=function(){function e(t){R()(this,e),this.diagram=t;var n=new Zn;t.frontRootGroup.add(n),Object.assign(this,{style:{stroke:""},tolerance:5,bleed:0,toAlignPoints:[],refLines:[],showLine:!0,preventAlignX:!1,preventAlignY:!1,refLinesGroup:n})}return O()(e,[{key:"_getPointsByBox",value:function(e){var t={x:e.maxX,y:e.minY,weight:0,box:e};return[{x:e.minX,y:e.maxY,weight:0,box:e},t,{x:(e.minX+e.maxX)/2,y:(e.minY+e.maxY)/2,weight:1,box:e}]}},{key:"_getPointsByPoint",value:function(e){return[e]}},{key:"_getPointsByCell",value:function(e){var t=e.getBBox();return this._getPointsByBox(t)}},{key:"drawRefLines",value:function(){var e=this.refLines,t=this.refLinesGroup;t.clear(),e.forEach((function(e){var n=e.x1,r=e.y1,a=e.x2,o=e.y2;t.add(new $n({d:"M".concat(n,",").concat(r," L").concat(a,",").concat(o),stroke:"#FF4E50"}))}))}},{key:"clear",value:function(){this.refLinesGroup.clear()}},{key:"updateToAlginPoints",value:function(e){var t=this,n=this.diagram,r=n.paper,a=n.getCells();e&&(a=a.filter(e));var o=[];if(a.forEach((function(e){o=o.concat(t._getPointsByCell(e))})),r.visible){var i=r.getBBox();o=o.concat(this._getPointsByBox({minX:i.left,minY:i.top,maxX:i.right,maxY:i.bottom}))}this.toAlignPoints=o}},{key:"alignByPoint",value:function(e){return this._align("Point",e)}},{key:"alignByBox",value:function(e){return this._align("Box",e)}},{key:"_align",value:function(e,t){var n=this,r=this.bleed,a=this.showLine,o=this.toAlignPoints,i=this.diagram,c=this.preventAlignX,l=this.preventAlignY,s={dx:0,dy:0},u=this.tolerance/i.viewport.zoom;if(0===o.length)return s;var d=this["_getPointsBy"+e](t),f=[];return this.refLines=[],d.forEach((function(e){f=f.concat(o.map((function(t){return{from:e,to:t,weight:e.weight+t.weight,hDis:Math.abs(t.x-e.x),vDis:Math.abs(t.y-e.y)}})))})),c||(f.sort((function(e,t){return e.hDis-t.hDis})),f.filter((function(e){return e.hDis===f[0].hDis})).forEach((function(e){e.hDis<u&&(s.dx=e.to.x-e.from.x,n.refLines.push({x1:e.to.x,x2:e.to.x,y1:Math.min(e.to.box.minY,e.from.box.minY)-r,y2:Math.max(e.to.box.maxY,e.from.box.maxY)+r}))}))),l||(f.sort((function(e,t){return e.vDis-t.vDis})),f.filter((function(e){return e.vDis===f[0].vDis})).forEach((function(e){e.vDis<u&&(s.dy=e.to.y-e.from.y,n.refLines.push({x1:Math.min(e.to.box.minX,e.from.box.minX)-r,x2:Math.max(e.to.box.maxX,e.from.box.maxX)+r,y1:e.to.y,y2:e.to.y}))}))),a&&this.drawRefLines(),s}},{key:"reset",value:function(){this.clear(),this.preventAlignX=!1,this.preventAlignY=!1}},{key:"destroy",value:function(){this.diagram=void 0}}]),e}();L()(Qn,"className","Align");var Jn=E.a.deepTreeTraversal;function er(e,t){var n=[],r={};e.forEach((function(e){Jn(e,(function(e){var a=Object(K.a)();r[e.id]=a,t[a]=t[e.id],e.id=a,"line"!==e.type&&"edge"!==e.type||n.push(e)}))})),n.forEach((function(e){var n=Object(K.a)();t[n]=t[e.id],e.id=n,e.source&&e.source.id&&r[e.source.id]&&(e.source.id=r[e.source.id]),e.target&&e.target.id&&r[e.target.id]&&(e.target.id=r[e.target.id])}))}var tr=E.a.rectIntersectRect,nr=E.r.getLakeDataByHtml;function rr(e){var t=1/0,n=1/0,r=-1/0,a=-1/0;return e.forEach((function(e){var o,i,c,l;if("edge"===e.type){var s=[];e.source&&!e.source.id&&e.source.connection&&s.push(e.source.connection),e.target&&!e.target.id&&e.target.connection&&s.push(e.target.connection);var u=s.map((function(e){return e[0]})),d=s.map((function(e){return e[1]}));o=Math.min.apply(Math,$()(u)),i=Math.min.apply(Math,$()(d)),c=Math.max.apply(Math,$()(u)),l=Math.max.apply(Math,$()(d))}else o=e.x,i=e.y,c=e.x+(e.width||0),l=e.y+(e.height||0);o<t&&(t=o),i<n&&(n=i),c>r&&(r=c),l>a&&(a=l)})),{minX:t,minY:n,maxX:r,maxY:a}}function ar(e,t,n){if(e&&!e.id){var r=e.connection;e.connection=[r[0]+t,r[1]+n]}}function or(e,t,n){"edge"===e.type?(ar(e.source,t,n),ar(e.target,t,n)):(e.x=(e.x||0)+t,e.y=(e.y||0)+n)}var ir=function(e){P()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(e){var r;return R()(this,n),(r=t.call(this,e)).caches={},r}return O()(n,[{key:"_clipboardFiles",value:function(e){e.length>0&&this.diagram.emit("importimage",{files:e,from:"clpboard"})}},{key:"resetModels",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.diagram,a=this.caches,o=5;e.forEach((function(e){var n=r.find(e.id)?1:0;a[e.id]||(a[e.id]=[]),(t=a[e.id]).forEach((function(){n++})),or(e,o*n,o*n),t.push(e.id)}));var i=rr(e);if(!tr(i,r.viewport.viewportCanvasBox)){var c=r.viewport.getCenter(),l=c[0]-(i.minX+i.maxX)/2,s=c[1]-(i.minY+i.maxY)/2;e.forEach((function(e){or(e,l,s)}))}return er(e,n),e}},{key:"clipboard",value:function(e){var t=e.html,n=e.files;if(n&&n.length>0)return this._clipboardFiles(n);var r=this.diagram,a=nr(t);if(a){var o=this.resetModels(a.body,a.extraInformations);a.execute=function(){r.add(o)},a.execute()}return a}}]),n}(E.m.Importer);var cr=E.s.formatPath,lr=E.n.Path,sr=function(e){P()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"init",value:function(){B()(M()(n.prototype),"init",this).call(this),this._renderMask()}},{key:"_renderMask",value:function(){var e=this.diagram.frontRootGroup,t=new lr({fill:"rgba(231, 233, 235, 0.6)"});t.css({"pointer-events":"none"}),e.prepend(t),this.mask=t}},{key:"_updateMask",value:function(){var e=this.diagram,t=this.mask,n=this.zoom;if(t){var r=e.paper,a=r.size,o=r.getBBox(),i=this.getPadding(o,n).map((function(e){return e/n})),c=-i[1],l=-i[0],s=a[0]+2*i[1],u=a[1]+2*i[0],d=cr([["M",c,l],["h",s],["v",u],["h",-s],["M",0,0],["v",a[1]],["h",a[0]],["v",-a[1]],["z"]]);t.update({d:d})}}},{key:"_trackSingleSelect",value:function(){}},{key:"_getUserPadding",value:function(){var e=this.diagram;return"edit"===e.interaction.currentMode&&e.options.padding||[0,0]}},{key:"getPadding",value:function(e,t){var n=this.diagram,r=this._getUserPadding(),a=n.viewportContainer.getBoundingClientRect(),o=(e.right-e.left)*t,i=(e.bottom-e.top)*t,c=Math.max((a.width-o)/2,r[1]);return[Math.max((a.height-i)/2,r[0]),c]}},{key:"setViewport",value:function(){var e;this.autoZoom=!1;for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];(e=B()(M()(n.prototype),"setViewport",this)).call.apply(e,[this].concat(r)),this._updateMask()}},{key:"zoomFit",value:function(){var e=this.diagram,t=e.paper.size,n=this._getUserPadding(),r=Math.min(e.width-2*n[1],(e.height-2*n[0])*t[0]/t[1]);this.setViewport(r/t[0]),this.autoZoom=!0}}]),n}(E.m.Viewport);var ur=function(e){P()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"getContentArea",value:function(){var e=this.diagram.paper,t=Y()(e.size,2);return{left:0,top:0,width:t[0],height:t[1]}}}]),n}(E.m.Exporter);var dr=function(e){P()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"calculateBBox",value:function(){var e=this.size;return{top:0,bottom:e[1],left:0,right:e[0]}}}]),n}(E.m.Paper);var fr=E.a.lineDistance,pr=function(e){P()(n,E.c);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){var e;return R()(this,n),(e=t.call(this)).default={dragDuplicates:void 0,dragCells:void 0,startPoint:void 0,startBox:void 0,startModels:void 0,startClient:void 0,delegation:void 0,onMouseMoveEvent:void 0,dx:0,dy:0},Object.assign(F()(e),e.default),e}return O()(n,[{key:"reset",value:function(){var e=this.diagram;this.delegation&&this.dragCells.forEach((function(e){return e.show()})),this.dragCells&&this.dragCells.length>1&&e.highlight.show(),this.delegation&&e.delegator.remove(this.delegation),this.onMouseMoveEvent&&this.unbind(this.onMouseMoveEvent),e.signal.cellDragStart=!1,e.align.clear(),Object.assign(this,this.default)}},{key:"initDragData",value:function(){var e=this.diagram,t=e.selector.selections.filter((function(e){return!e.locked}));if(1===t.length){var n=t[0];if(!n||e.contentEditor.isBegin)return;e.align.updateToAlginPoints((function(e){return e!==n&&"edge"!==e.model.type})),this.startBox=n.getBBox()}if(e.signal.keydown.Alt){var r=t.map((function(e){return V()(e.model)}));this.dragCells=e.add(e.importer.resetModels(r)),this.dragDuplicates=!0}else this.dragCells=t;this.startModels=this.dragCells.map((function(e){var t=e.model;if(e.isEdge){var n={};return!t.source.id&&t.source.connection&&(n.source={connection:t.source.connection.concat([])}),!t.target.id&&t.target.connection&&(n.target={connection:t.target.connection.concat([])}),n}return{x:e.x,y:e.y}}))}},{key:"init",value:function(){var e=this,t=this.diagram,n=function(){return e.startModels.map((function(t,n){if(e.dragCells[n].isEdge){var r={};return t.target&&!t.target.id&&(r.target=V()(t.target),r.target.connection[0]+=e.dx,r.target.connection[1]+=e.dy),t.source&&!t.source.id&&(r.source=V()(t.source),r.source.connection[0]+=e.dx,r.source.connection[1]+=e.dy),r}return{x:t.x+e.dx,y:t.y+e.dy}}))},r=_()((function(r){if(t.signal.cellDragStart){var a=t.viewport.invertClient([r.clientX,r.clientY]);if(e.dx=a[0]-e.startPoint[0],e.dy=a[1]-e.startPoint[1],1===e.dragCells.length&&!e.dragCells[0].isEdge){var o={minX:e.startBox.minX+e.dx,maxX:e.startBox.maxX+e.dx,minY:e.startBox.minY+e.dy,maxY:e.startBox.maxY+e.dy},i=t.align.alignByBox(o);e.dx+=i.dx,e.dy+=i.dy}if(e.delegation)e.delegation.translate(e.dx,e.dy);else{var c=n();t.update(e.dragCells,c)}}else{if(fr(e.startClient[0],e.startClient[1],r.clientX,r.clientY)<8)return;if(e.initDragData(),!e.dragCells)return;t.signal.cellDragStart=!0,t.emit("cell:dragstart"),e.dragCells.length>1&&t.highlight.hide(),e.dragCells.length>10&&!e.delegation&&!function(){for(var n=0;n<e.dragCells.length;n++){var r=e.dragCells[n];if(r.isEdge&&r.source.id){var a=t.find(r.model.source.id);if(a&&!e.dragCells.includes(a))return!0;var o=t.find(r.model.target.id);if(o&&!e.dragCells.includes(o))return!0}}var i={};return e.dragCells.filter((function(e){return e.isVertex})).reduce((function(e,t){return e[t.model.id]=t,e}),i),!!function(e,t){return e.getCells().filter((function(e){if(!e.isEdge)return!1;var n=e.source,r=e.target;return n.id&&t[n.id]||r.id&&t[r.id]}))}(t,i).some((function(t){return!e.dragCells.includes(t)}))}()&&(e.delegation=t.delegator.create(e.dragCells),e.dragCells.forEach((function(e){return e.hide()}))),1===e.dragCells.length&&t.contentEditor&&(t.contentEditor.unbind(),t.focus())}}),16),a=function(){var a;e.delegation||t.update(e.dragCells,e.startModels);var o=[];e.dragDuplicates?(t.remove(e.dragCells.map((function(e){return e.model.id}))),o.push("Add",{model:e.dragCells.map((function(t){var n=t.model;return t.isEdge?(n.target&&!n.target.id&&(n.target.connection[0]+=e.dx,n.target.connection[1]+=e.dy),n.source&&!n.source.id&&(n.source.connection[0]+=e.dx,n.source.connection[1]+=e.dy)):(n.x+=e.dx,n.y+=e.dy),n}))})):o.push("Update",{id:e.dragCells.map((function(e){return e.model.id})),model:n()}),t.emit("cell:dragend",{cells:e.dragCells}),r.cancel(),e.reset(),(a=t.command).execute.apply(a,o)},o=function(){r.cancel(),e.reset()};this.bind(t,"mousedown",(function(n){var a=n.target,o=n.clientX,i=n.clientY,c=n.button,l=t.getCell(a);0===c&&l&&!l.locked&&(e.startClient=[o,i],e.startPoint=t.viewport.invertClient([o,i]),e.onMouseMoveEvent=e.bind(t,"mousemove",r))})),this.bind(t,"mouseup",(function(){e.dragCells&&e.dragCells[0]&&t.signal.cellDragStart?a():o()})),this.bind(t,"mouseleave",(function(){e.dragCells&&e.dragCells[0]&&t.signal.cellDragStart?a():o()}))}}]),n}();var hr=function(e){P()(n,E.c);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"init",value:function(e){this.bind(e,"afterchange",(function(t){if(t){var n=t.models,r=t.action;"remove"===r?function(e,t){t.forEach((function(t){e.emit("vertexcell:remove",{id:t.id})}))}(e,n):"update"===r&&function(e,t){for(var n={},r=function(r){var a=t[r],o=e.find(a.id),i=["x","y","width","height","shape","rotate"];o.isText&&i.push("html"),o.isVertex&&i.some((function(e){return null!=a[e]}))&&(n[a.id]=!0,o.state.selected&&o.rotateResize.update(),e.emit("vertexcell:update",{cell:o}))},a=0;a<t.length;a++)r(a)}(e,n)}}))}}]),n}();var mr=function(e){P()(n,E.c);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){var e;return R()(this,n),(e=t.call(this)).cell,e}return O()(n,[{key:"init",value:function(e){var t=this;this.bind(e,"afterselect",(function(){var n=e.selector.selections;if(t.cell&&(t.cell.endRotateResize(),t.cell=void 0),1===n.length){if(t.cell=n[0],!t.cell.isVertex)return void(t.cell=void 0);t.cell&&t.cell.beginRotateResize()}})),this.bind(e,"cell:dragstart",(function(){t.cell&&(t.cell.endRotateResize(),t.cell=void 0)}))}}]),n}();function gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yr=E.a.lineDistance,br=function(e){P()(n,E.c);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){var e;return R()(this,n),e=t.call(this),L()(F()(e),"onMouseMove",(function(t){var n=F()(e),r=n.diagram,a=n.line,o=n.source,i=en(r,e.getPoint(t),o&&o.id);if(e.cacheEndpointId!==i.id&&(r.highlight.dock([r.find(i.id)]),e.cacheEndpointId=i.id),a){if(i.connection&&!i.id){var c=a.getEndpoint(a.source);nn([c.x,c.y],i.connection)}r.update(a,{target:i})}else o&&function(e,t){return t.id!==e.id||(t.connection&&e.connection?yr(t.connection[0],t.connection[1],e.connection[0],e.connection[1])>8:void 0)}(o,i)&&e.beginInsertLine({source:o,target:i})})),L()(F()(e),"onMouseDown",(function(t){var n=en(F()(e).diagram,e.getPoint(t));e.source=n})),L()(F()(e),"onMouseUp",(function(){var t=F()(e),n=t.diagram,r=t.line;if(e.clear(),n.interaction.changeMode("edit"),r){var a=r.getFirstInsertControlPoints();a&&(r.model.controlPoints=a),n.command.execute("Add",{model:vr(vr({},r.model),{},{id:null})})}})),e.cacheEndpointId=null,e.diagramType="flowchart",e.cellType="edge",e}return O()(n,[{key:"getSetting",value:function(){var e=this.diagram,t=this.diagramType;return e.settings[t]}},{key:"getPoint",value:function(e){return this.diagram.viewport.invertClient([e.clientX,e.clientY])}},{key:"beginInsertLine",value:function(e){var t=e.source,n=e.target,r=this.diagram,a=this.cellType,o=r.add(X()({},r.settings.line,{type:a,source:t,target:vr({},n)}))[0];this.line=o}},{key:"init",value:function(e){var t=this;this.diagram=e,this.bind(e,"begininsertline",(function(e){t.beginInsertLine(e)})),this.bind(e,"mousemove",this.onMouseMove),this.bind(e,"mousedown",this.onMouseDown),this.bind(e,"mouseup",this.onMouseUp),this.bind(window,"keyup",(function(n){"Esc"!==n.key&&"Escape"!==n.key||(t.clear(),e.interaction.changeMode("edit"))}))}},{key:"clear",value:function(){var e=this.line,t=this.diagram;t&&(this.cacheEndpointId&&t.highlight.clear(),this.cacheEndpointId=null,e&&t.remove(e),this.line=null,this.source=null)}},{key:"unbind",value:function(){this.clear(),B()(M()(n.prototype),"unbind",this).call(this)}}]),n}();function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xr=function(e){P()(n,E.c);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){var e;R()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),L()(F()(e),"onMouseMove",(function(t){e.delegation||e.initDelegation();var n=F()(e).delegation,r=e.getPoint(t),a=Y()(r,2),o=a[0],i=a[1];n.translate(o,i)})),L()(F()(e),"onClick",(function(t){e.clear();var n=F()(e).diagram,r=n.settings.flowchart.vertex,a=e.getPoint(t),o=Y()(a,2),i=o[0],c=o[1],l=Object(K.a)();n.interaction.changeMode("edit"),n.command.execute("Add",{model:wr(wr({},r),{},{id:l,x:i,y:c})})})),e}return O()(n,[{key:"getPoint",value:function(e){return this.diagram.viewport.invertClient([e.clientX,e.clientY])}},{key:"initDelegation",value:function(){var e=this.diagram,t=e.settings.flowchart.vertex,n=e.add(wr(wr({},t),{},{x:0,y:0}))[0];this.delegation=e.delegator.create([n]),this.cell=n,n.hide()}},{key:"init",value:function(e){var t=this;this.diagram=e,this.bind(e,"mousemove",this.onMouseMove),this.bind(e,"click",this.onClick),this.bind(window,"keyup",(function(n){"Esc"!==n.key&&"Escape"!==n.key||(t.clear(),e.interaction.changeMode("edit"))}))}},{key:"clear",value:function(){var e=this.cell,t=this.delegation,n=this.diagram;e&&!e.destroyed&&n.remove(e.model.id),t&&t.destroy(),this.cell=null,this.delegation=null}},{key:"unbind",value:function(){this.clear(),B()(M()(n.prototype),"unbind",this).call(this)}}]),n}();var _r=E.n.Path,Er=E.a.rectIntersectRect,Cr=E.a.rectContainRect,Or=E.s.rectPath,Sr=E.h.arrayEqual,Rr=function(e){P()(n,E.c);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"unbindMousemoveEvent",value:function(){this.mouseMoveEvent&&(this.unbind(this.mouseMoveEvent),this.mouseMoveEvent=void 0)}},{key:"init",value:function(e){var t,n,r,a=this;e.signal.mouseMultiSelecting=!1;var o=new _r({fill:"rgba(9, 109, 217, .05)",stroke:"#096DD9"});function i(a){if(t){e.signal.mouseMultiSelecting=!0,n=e.viewport.invertClient([a.clientX,a.clientY]);var i={minX:Math.min(t[0],n[0]),minY:Math.min(t[1],n[1]),width:Math.abs(n[0]-t[0]),height:Math.abs(n[1]-t[1])},c=Or(i.minX,i.minY,i.width,i.height);i.maxX=i.minX+i.width,i.maxY=i.minY+i.height,o.update({d:c}),r=e.getCells().filter((function(e){if(e.state.visible&&e.state.capture){var t=e.getBBox();if(Er(t,i)){if(e.isLine){var n=e.d;if(!Cr(i,t)&&0===J()(c,n).length)return!1}return!0}}return!1})),Sr(r,e.selector.selections)||e.selector.select(r)}}o.dataset({testid:"mouse-drag-multi-select"}),this.selectBox=o,this.bind(e,"mousedown",(function(n){(function(t){if(t.target===e.canvas.rendererElement)return!0;var n=e.getCell(t.target);return!(!n||!n.locked)})(n)&&(a.unbindMousemoveEvent(),a.mouseMoveEvent=a.bind(window,"mousemove",_()(i,16)),e.frontRootGroup.add(o),t=e.viewport.invertClient([n.clientX,n.clientY]))})),this.bind(window,"mouseup",(function(){t&&e.tryFocus(),e.signal.mouseMultiSelecting=!1,r&&e.selector.select(r),r=void 0,t=void 0,n=void 0,a.unbindMousemoveEvent(),o.remove(),o.update({d:""})}))}},{key:"unbind",value:function(e){!e&&this.selectBox&&(this.selectBox.remove(),this.selectBox=void 0),B()(M()(n.prototype),"unbind",this).call(this,e)}}]),n}();var jr=function(e){P()(n,E.c);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){var e;return R()(this,n),(e=t.call(this)).contentEditorOptions={insertParagraphKey:function(e){return 13===e.which},cancelKey:function(e){return 27===e.which}},e}return O()(n,[{key:"init",value:function(e){var t=this.contentEditorOptions,n=e.contentEditor;function r(){if(!e.destroyed&&!e.signal.mouseMultiSelecting){var r=e.selector.selections;if(1===r.length&&r[0].textAreaElement){var a=r[0].textAreaElement.htmlContainer;n.dom&&n.dom!==a&&n.unbind(),!n.dom&&e.viewportContainer.contains(a)&&n.bind(a,t),n.isBegin||n.prepareEdit()}else n.unbind(),e.focus()}}var a=te()(r,32);this.bind(e,"afterselect",(function(){e.signal.beforePasteSelect?a():r()})),this.bind(e,"mousedown",(function(t){var n=e.getCell(t.target);n&&n.textAreaElement&&!n.textAreaElement.htmlContainer.contains(t.target)&&t.preventDefault()})),this.bind(e,"dblclick",(function(t){var r=t.target,a=e.getCell(r);a&&a.state.selected&&a.textAreaElement&&!e.contentEditor.isBegin&&(e.selector.selections.length>1&&e.selector.select([a]),n.prepareEdit(),n.beginEdit(),e.update(a,{}))})),this.bind(e,"click",(function(t){var n=e.getCell(t.target);n&&n.textAreaElement&&n.textAreaElement.htmlContainer.contains(t.target)&&"A"===t.target.tagName&&t.preventDefault()}))}}]),n}();var Pr=function(e){P()(n,E.c);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"init",value:function(e){var t,n,r,a=function(){!e.destroyed&&r&&t&&(e.update(t.map((function(e){return e.id})),t),e.command.execute("Update",{id:r.map((function(e){return e.id})),model:r}),t=void 0,r=void 0)},o=function(n,r,a){return a.preventDefault(),t||(t=[].concat(e.selector.selections.map((function(e){return{id:e.model.id,x:e.x,y:e.y}})))),e.selector.selections.map((function(e){return{id:e.model.id,x:e.x+n,y:e.y+r}}))};this.bind(e,"keydown",(function(t){if(!(e.selector.selections.length<=0)){var i;switch(i=t.shiftKey?10:1,n&&clearTimeout(n),t.key){case"Left":case"ArrowLeft":r=o(-i,0,t);break;case"Right":case"ArrowRight":r=o(i,0,t);break;case"Up":case"ArrowUp":r=o(0,-i,t);break;case"Down":case"ArrowDown":r=o(0,i,t);break;default:return}e.update(r.map((function(e){return e.id})),r),n=setTimeout((function(){a()}),400)}})),this.bind(e,"keyup",(function(){n&&clearTimeout(n),a()}))}}]),n}();var Ar=ne.HotKeyUtils.isHotkey,Tr=function(e){P()(n,E.c);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){if(Ar("mod+d",t)){t.preventDefault();var n=e.selector.selections.map((function(e){return V()(e.model)}));e.importer.resetModels(n),e.command.execute("Add",{model:n})}}))}}]),n}();var Dr=E.q.isMod,Mr=function(e){P()(n,E.c);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){!Dr(t)&&["Backspace","Delete"].includes(t.key)&&(t.preventDefault(),e.command.execute("Delete"),e.tryFocus())}))}}]),n}();var Nr=E.s.parsePathString,Lr=E.b.convertBatch,Ir=function(e){P()(n,E.g);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"resetLine",value:function(){this.diagram.update(this.lineCache.map((function(e){return e.id})),this.lineCache)}},{key:"pinLine",value:function(){var e=this.diagram;this.lineCache.map((function(t){return e.find(t.id)})).filter((function(e){return e})).forEach((function(e){var t=e.source,n=e.target,r=e.diagram,a=Nr(e.wireElement.attr("d")),o={};if(r.find(t.id)||(o.source={id:null,connection:[a[0][1],a[0][2]]}),!r.find(n.id)){var i=a.length-1,c=a[i].length;o.target={id:null,connection:[a[i][c-2],a[i][c-1]]}}e.update(o)}))}},{key:"_cacheLine",value:function(){var e=this.changeArguments,t=this.diagram,n=e[0].reduce((function(e,n){return t.find(n.id).getAllCells().forEach((function(t){e[t.model.id]=!0})),e}),{});this.lineCache=t.getCells().filter((function(e){return e.isLine&&(n[e.model.target.id]||n[e.model.source.id])})).map((function(e){var t=e.model,n={id:t.id};return n.target=V()(t.target),n.target.connection||(n.target.connection=null),n.source=V()(t.source),n.source.connection||(n.source.connection=null),n}))}},{key:"selectParent",value:function(){var e=this.diagram,t=this.changeArguments,n=e.find(t[0][0].id).parent;this.select(n&&n.model.id)}},{key:"selectNearest",value:function(){var e=this.diagram,t=this.changeArguments,n=e.find(t[0][0].id),r=n.parent;if(t[0].length>1&&r)return this.select(r.model.id);if(1===t[0].length&&r){var a=r.getChildren().filter((function(e){return e.upSignX===n.upSignX&&e.upSignY===n.upSignY})),o=a.indexOf(n);if(r.model.children){var i=a[o-1];if(i)return this.select([i]);var c=a[o+1];if(c)return this.select([c])}return this.select(r.model.id)}return e.selector.clear()}},{key:"execute",value:function(){var e=this.diagram,t=this.id,n=Lr(t,{}),r=n[0].map((function(t){return e.find(t)}));r.forEach((function(t,r){n[0][r]=V()(t.model),n[1][r]=e.getCellOptions(t)})),this.changeArguments=n,this._cacheLine(),this.selectNearest(),e.remove(r),this.pinLine()}},{key:"forward",value:function(){var e=this.diagram,t=this.changeArguments;this.selectNearest(),e.remove(t[0].map((function(e){return e.id}))),e.tryFocus(),this.pinLine()}},{key:"backward",value:function(){var e=this.diagram,t=this.changeArguments,n=e.add.apply(e,$()(t));this.resetLine(),this.select(n),e.tryFocus()}}]),n}();L()(Ir,"className","Remove");var Br=function(e){P()(n,Ir);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.deduplicate(e.selector.selections);this.id=t.filter((function(e){return e.canDelete()})).map((function(e){return e.model.id})),B()(M()(n.prototype),"execute",this).call(this)}}]),n}();L()(Br,"className","Delete"),L()(Br,"enable",(function(e){return e.selector.selections.filter((function(e){return e.canDelete()})).length>0}));var zr=E.f.handleCopy,Fr=function(e){P()(n,Br);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"execute",value:function(){zr(this.e,this.diagram),B()(M()(n.prototype),"execute",this).call(this)}}]),n}();L()(Fr,"className","Cut"),L()(Fr,"isModelChange",!0);var Ur=function(e){P()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"execute",value:function(){B()(M()(n.prototype),"execute",this).call(this);var e=this.diagram,t=this.edge,r=this.model;this.originTarget=["id","connection","marker"].reduce((function(e,n){var r=t.target[n];return e[n]=null==r?null:r,e}),{}),e.update(t,{target:{id:r.id,connection:null}})}},{key:"forward",value:function(){B()(M()(n.prototype),"forward",this).call(this);var e=this.diagram,t=this.edge,r=this.model;e.update(t,{target:{id:r.id,connection:null}})}},{key:"backward",value:function(){var e=this.diagram,t=this.edge,n=this.originTarget,r=this.model;e.remove(r.id),e.update(t.model.id,{target:n})}}]),n}(E.g.Add);function Vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}L()(Ur,"className","FlowchartAddVertex"),L()(Ur,"enable",(function(e){return 0===e.selector.selections.length}));var Hr=function(e){P()(n,E.g);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(e){var r;return R()(this,n),(r=t.call(this,e)).queue=!1,r.onBeginInsertLine=function(e){if(r.sourceCell){var t=F()(r),n=t.diagram,a=t.beginInsertEvent,o=n.viewport.invertClient([e.clientX,e.clientY]);n.emit("begininsertline",{source:{id:r.sourceCell.model.id,connection:null},target:{id:null,connection:[o[0],o[1]]}}),n.off(a,r.onBeginInsertLine)}},r}return O()(n,[{key:"bindBegineInsertEvent",value:function(){var e=this.diagram,t=this.sourceCell,n=this.beginInsertEvent;e.off(n,this.onBeginInsertLine),t&&e.on(n,this.onBeginInsertLine)}},{key:"execute",value:function(){var e=this.diagram,t=this.shape,n=this.marker,r=this.html;e.selector.clear(),e.interaction.changeMode("beginAddFlowchartEdge"),e.settings.flowchart=qr(qr({},e.settings.flowchart),{},{edge:{shape:t,marker:n,html:r}})}}],[{key:"enable",value:function(){return!0}}]),n}();function Wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wr(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}L()(Hr,"className","FlowchartBeginInsertEdge"),L()(Hr,"isModelChange",!1);var Gr=function(e){P()(n,E.g);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(e){var r;return R()(this,n),(r=t.call(this,Yr({html:De},e))).queue=!1,r}return O()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.shape,n=this.html,r=this.fill,a=this.stroke;e.settings.flowchart=Yr(Yr({},e.settings.flowchart),{},{vertex:{type:"flowchart",html:n,shape:t,fill:r,stroke:a}}),e.selector.clear(),e.interaction.changeMode("beginAddFlowchartVertex")}}],[{key:"enable",value:function(){return!0}}]),n}();function Xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xr(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}L()(Gr,"className","FlowchartBeginInsertShape"),L()(Gr,"isModelChange",!1);var Zr=function(e){P()(n,E.g);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(e){var r;return R()(this,n),(r=t.call(this,Kr({html:Oe("文本")},e))).queue=!1,r}return O()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.html,n=this.stroke;e.settings.flowchart=Kr(Kr({},e.settings.flowchart),{},{vertex:{type:"text",html:t,stroke:n}}),e.selector.clear(),e.interaction.changeMode("beginAddFlowchartVertex")}}],[{key:"enable",value:function(){return!0}}]),n}();L()(Zr,"className","FlowchartBeginInsertText"),L()(Zr,"isModelChange",!1);var $r=E.g.Update,Qr=function(e){P()(n,$r);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"cellsAlign",value:function(){}},{key:"paperAlign",value:function(){}},{key:"_getTranslateLineModel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{target:{connection:[e.target.connection[0]+t,e.target.connection[1]+n]},source:{connection:[e.source.connection[0]+t,e.source.connection[1]+n]}}}},{key:"_getAlignCells",value:function(e){return e.filter((function(e){return e.canArrange()}))}},{key:"_getAlignCellPoints",value:function(e){var t=[];return e.forEach((function(e){var n=[];if(e.isLine){var r=e.target,a=e.source;n.push([r.connection[0],r.connection[1]]),n.push([a.connection[0],a.connection[1]])}else{var o=e.getBBox();n.push([o.minX,o.minY]),n.push([o.maxX,o.maxY])}n.push([(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]),t.push(n)})),t}},{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections.concat([]);if(t.length>1){var r=this._getAlignCells(t),a=this._getAlignCellPoints(r),o=this.cellsAlign(r,a);this.id=r,this.model=o,this.selectedIds=t.map((function(e){return e.model.id}))}else if(1===t.length){var i=this._getAlignCellPoints(t),c=this.paperAlign(t[0],i[0],e.viewport.paperBox);this.id=t[0].model.id,this.model=c,this.selectedIds=t.map((function(e){return e.model.id}))}B()(M()(n.prototype),"execute",this).call(this)}},{key:"select",value:function(){B()(M()(n.prototype),"select",this).call(this,this.selectedIds)}}]),n}();L()(Qr,"className","Align"),L()(Qr,"enable",(function(e){var t=e.selector.selections.filter((function(e){return!e.locked}));return t.length>1||1===t.length&&e.paper.visible}));var Jr=function(e){P()(n,Qr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"paperAlign",value:function(e,t,n){var r;if(e.isLine){var a=n.bottom-Math.max.apply(Math,$()(t.map((function(e){return e[1]}))));r=this._getTranslateLineModel(e,0,a)}else r={y:n.bottom-e.height};return r}},{key:"cellsAlign",value:function(e,t){var n=this,r=t.reduce((function(e,t){return e.concat(t)}),[]),a=Math.max.apply(Math,$()(r.map((function(e){return e[1]})))),o=[];return e.forEach((function(e,r){var i=t[r];if(e.isLine){var c=a-Math.max.apply(Math,$()(i.map((function(e){return e[1]}))));o.push(n._getTranslateLineModel(e,0,c))}else{var l=i[1][1]-a;o.push({y:e.y-l})}})),o}}]),n}();L()(Jr,"className","AlignBottom");var ea=function(e){P()(n,Qr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"paperAlign",value:function(e,t,n){var r,a=(n.left+n.right)/2;if(e.isLine){var o=a-t[2][0];r=this._getTranslateLineModel(e,o,0)}else r={x:a-e.width/2};return r}},{key:"cellsAlign",value:function(e,t){var n=this,r=t.reduce((function(e,t){return e.concat([t[2]])}),[]).map((function(e){return e[0]})),a=(Math.max.apply(Math,$()(r))+Math.min.apply(Math,$()(r)))/2,o=[];return e.forEach((function(e,r){var i=t[r];if(e.isLine){var c=a-i[2][0];o.push(n._getTranslateLineModel(e,c,0))}else{var l=i[2][0]-a;o.push({x:e.x-l})}})),o}}]),n}();L()(ea,"className","AlignHCenter");var ta=function(e){P()(n,Qr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"paperAlign",value:function(e,t,n){var r;if(e.isLine){var a=n.left-Math.min.apply(Math,$()(t.map((function(e){return e[0]}))));r=this._getTranslateLineModel(e,a,0)}else r={x:n.left};return r}},{key:"cellsAlign",value:function(e,t){var n=this,r=t.reduce((function(e,t){return e.concat(t)}),[]),a=Math.min.apply(Math,$()(r.map((function(e){return e[0]})))),o=[];return e.forEach((function(e,r){var i=t[r];if(e.isLine){var c=a-Math.min.apply(Math,$()(i.map((function(e){return e[0]}))));o.push(n._getTranslateLineModel(e,c,0))}else{var l=i[0][0]-a;o.push({x:e.x-l})}})),o}}]),n}();L()(ta,"className","AlignLeft");var na=function(e){P()(n,Qr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"paperAlign",value:function(e,t,n){var r;if(e.isLine){var a=n.right-Math.max.apply(Math,$()(t.map((function(e){return e[0]}))));r=this._getTranslateLineModel(e,a,0)}else r={x:n.right-e.width};return r}},{key:"cellsAlign",value:function(e,t){var n=this,r=t.reduce((function(e,t){return e.concat(t)}),[]),a=Math.max.apply(Math,$()(r.map((function(e){return e[0]})))),o=[];return e.forEach((function(e,r){var i=t[r];if(e.isLine){var c=a-Math.max.apply(Math,$()(i.map((function(e){return e[0]}))));o.push(n._getTranslateLineModel(e,c,0))}else{var l=i[1][0]-a;o.push({x:e.x-l})}})),o}}]),n}();L()(na,"className","AlignRight");var ra=function(e){P()(n,Qr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"paperAlign",value:function(e,t,n){var r;if(e.isLine){var a=n.top-Math.min.apply(Math,$()(t.map((function(e){return e[1]}))));r=this._getTranslateLineModel(e,0,a)}else r={y:n.top};return r}},{key:"cellsAlign",value:function(e,t){var n=this,r=t.reduce((function(e,t){return e.concat(t)}),[]),a=Math.min.apply(Math,$()(r.map((function(e){return e[1]})))),o=[];return e.forEach((function(e,r){var i=t[r];if(e.isLine){var c=a-Math.min.apply(Math,$()(i.map((function(e){return e[1]}))));o.push(n._getTranslateLineModel(e,0,c))}else{var l=i[0][1]-a;o.push({y:e.y-l})}})),o}}]),n}();L()(ra,"className","AlignTop");var aa=function(e){P()(n,Qr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"paperAlign",value:function(e,t,n){var r,a=(n.bottom+n.top)/2;if(e.isLine){var o=a-t[2][1];r=this._getTranslateLineModel(e,0,o)}else r={y:a-e.height/2};return r}},{key:"cellsAlign",value:function(e,t){var n=this,r=t.reduce((function(e,t){return e.concat([t[2]])}),[]).map((function(e){return e[1]})),a=(Math.max.apply(Math,$()(r))+Math.min.apply(Math,$()(r)))/2,o=[];return e.forEach((function(e,r){var i=t[r];if(e.isLine){var c=a-i[2][1];o.push(n._getTranslateLineModel(e,0,c))}else{var l=i[2][1]-a;o.push({y:e.y-l})}})),o}}]),n}();function oa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ia(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oa(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}L()(aa,"className","AlignVCenter");var ca=E.g.Update,la=function(e){P()(n,ca);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"_getModel",value:function(e,t){if(e.isVertex)return t;var n=e.source,r=e.target,a=t.x,o=t.y;return{source:{connection:[null==a?n.connection[0]:a,null==o?n.connection[1]:o]},target:{connection:[null==a?r.connection[0]:r.connection[0]-n.connection[0]+a,null==o?r.connection[1]:r.connection[1]-n.connection[1]+o]}}}},{key:"_distributeCells",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"horizontally",t=this.diagram,n="horizontally"===e,r=t.selector.selections.filter((function(e){return e.canArrange()})),a=r.map((function(e){if(e.isLine){var t=Y()(e.source.connection,2),n=t[0],r=t[1],a=Y()(e.target.connection,2),o=a[0],i=a[1];return{cell:e,minX:Math.min(n,o),minY:Math.min(r,i),maxX:Math.max(n,o),maxY:Math.max(r,i)}}return ia({cell:e},e.getBBox())})),o=n?"minX":"minY";a.sort((function(e,t){return e[o]-t[o]}));for(var i=a[0],c=a[a.length-1],l=n?c.minX-i.maxX:c.minY-i.maxY,s=0,u=1;u<a.length-1;u++){var d=a[u],f=d.minX,p=d.minY,h=d.maxX,m=d.maxY;s+=n?h-f:m-p}for(var g=(l-s)/(a.length-1),v=[],y=[],b=a[0][n?"minX":"minY"],k=1;k<r.length-1;k++){var w=a[k],x=a[k-1],_=w.cell,E=x.maxX-x.minX,C=x.maxY-x.minY;b+=(n?E:C)+g;var O=this._getModel(_,L()({},n?"x":"y",b));y.push(_.model.id),v.push(O)}this.id=y,this.model=v,this.selectedIds=r.map((function(e){return e.model.id}))}},{key:"select",value:function(){B()(M()(n.prototype),"select",this).call(this,this.selectedIds)}}],[{key:"enable",value:function(e){return e.selector.selections.filter((function(e){return e.canArrange()})).length>=3}}]),n}();var sa=function(e){P()(n,la);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"execute",value:function(){this._distributeCells("vertically"),B()(M()(n.prototype),"execute",this).call(this)}}]),n}();L()(sa,"className","DistributeVertically");var ua=function(e){P()(n,la);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"execute",value:function(){this._distributeCells("horizontally"),B()(M()(n.prototype),"execute",this).call(this)}}]),n}();L()(ua,"className","DistributeHorizontally");var da=function(e){P()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.locked,r=e.selector.selections.filter((function(e){return e.isVertex})).map((function(e){return e.model}));this.id=r.map((function(e){return e.id})),this.model={locked:t},B()(M()(n.prototype),"execute",this).call(this)}}],[{key:"enable",value:function(e){return e.selector.selections.some((function(e){return e.isVertex}))}}]),n}(E.g.Update);L()(da,"className","LockSelected");var fa=E.c.MouseDragCanvas,pa=E.c.AfterSelectionChangeMultiSelectHighlight,ha=E.c.KeyboardPressModifierKey,ma=E.c.KeyboardSelectAll,ga=E.c.KeyboardSwitchEditAndDragCanvas,va={Extends:[Qn,ir,sr,ur,dr],Cells:[Ft,Un,Hn,Kn],Commands:[Ir,Br,Fr,da,Ur,Hr,Gr,Zr,Jr,ea,ta,na,ra,aa,ua,sa],defaultCursors:{read:"grab",dragCanvas:"grab",beginAddFlowchartEdge:"crosshair"},modes:[{mode:"edit",Behaviours:[hr,pr,mr,jr,Pr,Tr,Rr,pa,Mr,ha,ma,ga]},{mode:"read",Behaviours:[fa]},{mode:"dragCanvas",Behaviours:[ga,fa]},{mode:"beginAddFlowchartEdge",Behaviours:[br]},{mode:"beginAddFlowchartVertex",Behaviours:[xr]}]};function ya(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}function ba(e){var t=e.rect,n=e.viewModel.model.settings.size,r=n[0]/n[1],a=document.fullscreenElement?0:10,o=Math.min(t.width-2*a,(t.height-2*a)*r);return{width:o,height:o/r}}function ka(e){var t=e.show,n=e.viewModel,o=n.model,i=n.execCommand,c=n.print,l=t===o.activeShow,s=Object(r.useRef)(),u=Object(r.useRef)();Object(r.useEffect)((function(){var e=u.current,r=t.fill;e?(e.clear(),e.import(t),e.paper.update({fill:r})):u.current=function(e){var t=e.show,n=e.container,r=e.viewModel,a=r.model.settings.size,o=ba({rect:{width:n.current.offsetWidth,height:n.current.parentNode.offsetHeight},viewModel:r}),i=o.width,c=o.height,l=t.fill,s=new E.l({container:n.current,width:i,height:c,paper:{fill:l,size:a,visible:!0},plugins:[va],mode:"none"});return s.import(t),s.viewport.zoomFit(),s}({show:t,container:s,viewModel:n})}),[t]),Object(r.useEffect)((function(){var e=u.current,t=s.current.parentNode,r={width:0,height:0},a=new ResizeObserver(_()((function(a){var o=a.find((function(e){return e.target===t}));if(e&&o&&o.contentRect){var i=ba({viewModel:n,rect:o.contentRect}),c=i.width,l=i.height;if(r.width&&Math.abs(r.width-c)<=16)return;r={width:c,height:l},c===e.width&&l===e.height||(e.changeSize(c,l),e.viewport.zoomFit()),document.fullscreenElement&&s.current.classList.contains("selected")&&s.current.scrollIntoView()}}),300));return a.observe(t),function(){a.unobserve(t),e&&e.destroy()}}),[]);var d="lake-show-tile";return d=w()(d,"single"===c?"lake-show-tile-single-print":"book"===c?"lake-show-tile-book-print":"lake-show-tile-no-print"),a.a.createElement("div",{className:w()(d,{selected:l}),ref:s,onClick:function(){l||i("selectShow",t)}})}function wa(e){var t=e.viewModel,n=t.model,r=t.state,o=t.execCommand,i=n.shows,c=i.indexOf(n.activeShow);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=n.paginate(e);t&&o("selectShow",t)}return a.a.createElement("div",{className:w()("lake-show-paginator",{hidden:!r.paginatorVisible})},a.a.createElement("div",{className:"lake-show-paginator-body"},a.a.createElement("button",{onClick:function(){return l(-1)},disabled:c<1},a.a.createElement(re.a,null)),a.a.createElement("span",{className:"lake-show-paginator-indicator"},c+1," / ",i.length),a.a.createElement("button",{onClick:function(){return l()},disabled:c+1>=i.length},a.a.createElement(ae.a,null))))}function xa(e){var t=e.viewModel,n=t.model,o=t.state,i=t.execCommand,c=n.activeIndex,l=Object(r.useRef)(),s=Object(r.useRef)();return Object(r.useEffect)((function(){if(null==s.current){var e=l.current.children[c],t=l.current.firstElementChild.offsetHeight,r=l.current.offsetHeight,a=n.shows.length;c+Math.floor(r/t)>=a?l.current.scrollTop=t*a-r:e&&(l.current.scrollTop=t*c)}}),[c]),Se({container:l,viewModel:t}),a.a.createElement("div",{className:"lake-show-reader","data-counter":o.counter,onKeyDown:function(e){switch(i("setPaginatorVisible",!0,2e3),e.key){case"ArrowUp":case"k":var t=n.previousShow;t&&i("selectShow",t);break;case"ArrowDown":case"j":var r=n.nextShow;r&&i("selectShow",r);break;case"f":i("toggleMode")}},onMouseMove:function(e){var t=e.target.closest(".lake-show-paginator")?0:2e3;i("setPaginatorVisible",!0,t)},onMouseLeave:function(){i("setPaginatorVisible",!1)}},a.a.createElement("div",{className:"lake-show-tiles",ref:l,onWheelCapture:function(e){if(e.stopPropagation(),!s.current){s.current=setTimeout((function(){s.current=null}),160);var t,r=l.current.scrollTop,a=n.shows,o=n.activeIndex,c=n.shows.length,u=l.current.firstElementChild.offsetHeight;(t=r<=u/2?0:r>=u*(c-1)?c-1:Math.floor((r-u/2)/u)+1)!==o&&t>=0&&t<a.length&&(i("setPaginatorVisible",!0,2e3),i("selectShow",a[t]))}}},n.shows.map((function(e){return a.a.createElement(ka,{key:e.id,show:e,viewModel:t})}))),a.a.createElement(wa,{viewModel:t}))}function _a(e,t){var n=t.reduce((function(t,n){var r=Object.getOwnPropertyDescriptor(e,n),a={get:function(){return this.data[n]},set:function(e){this.data[n]=e}};return r&&Object.keys(r).forEach((function(e){null!=r[e]&&(a[e]=r[e])})),t[n]=a,t}),{});Object.defineProperties(e,n)}function Ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ea(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ea(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}ya("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-show-tile {\n  background: #e7e9eb;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.lake-show-tile > div {\n  background: #fff;\n  overflow: hidden !important;\n  z-index: 9;\n  transform: translateZ(0);\n}\n.lake-show-tile-single-print {\n  page-break-before: always;\n  background: #fff;\n}\n.lake-show-tile-book-print {\n  height: calc(10.8in - 96px);\n  background: #fff;\n}\n.lake-show-tile-no-print {\n  padding: 10px 10px 0;\n}\n.lake-show-tile-no-print:last-child {\n  padding-bottom: 10px;\n}\n"),ka.propTypes={show:i.a.object,viewModel:i.a.shape({model:i.a.shape({shows:i.a.arrayOf(i.a.object),activeShow:i.a.object}),state:i.a.shape({mode:i.a.oneOf(["read","play"])}),execCommand:i.a.func,print:i.a.string})},ya("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n@media print {\n  .lake-show-paginator {\n    display: none;\n  }\n  .lake-show-paginator-body {\n    display: none;\n  }\n  .lake-show-paginator-indicator {\n    display: none;\n  }\n}\n.lake-show-paginator {\n  position: absolute;\n  bottom: 32px;\n  left: calc(50% - 60px);\n  background: rgba(1, 0, 0, 0.85);\n  padding: 12px;\n  border-radius: 4px;\n  color: #fafafa;\n  z-index: 9;\n}\n.lake-show-paginator button {\n  background: none;\n  border: none;\n  outline: none;\n  font-size: 16px;\n  height: 28px;\n  width: 28px;\n  padding: 0;\n}\n.lake-show-paginator button:hover {\n  background: #595959;\n}\n.lake-show-paginator button[disabled] {\n  color: rgba(255, 255, 255, 0.25);\n}\n.lake-show-paginator.hidden {\n  display: none;\n}\n.lake-show-paginator-body {\n  display: flex;\n  align-items: center;\n  border: 1px solid #595959;\n  border-radius: 2px;\n}\n.lake-show-paginator-indicator {\n  display: inline-block;\n  padding: 0 8px;\n  line-height: 1;\n}\n"),wa.propTypes={viewModel:i.a.shape({model:i.a.shape({activeShow:i.a.object,shows:i.a.array,paginate:i.a.func}),state:i.a.shape({paginatorVisible:i.a.bool}),execCommand:i.a.func})},xa.propTypes={viewModel:i.a.shape({model:i.a.shape({activeIndex:i.a.number,previousShow:i.a.object,nextShow:i.a.object,shows:i.a.array}),state:i.a.shape({counter:i.a.number,mode:i.a.oneOf(["read","play"])}),execCommand:i.a.func})};var Oa=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(R()(this,e),null==t.id&&(t.id=Object(K.a)()),Array.isArray(t.body)||(t.body=[]),t.fill=Ca(Ca({color:"#ffffff"},t.background),t.fill),t instanceof e)return t;this.data=t,this.type="show",this.isShow=!0}return O()(e,[{key:"canFill",value:function(){return!0}},{key:"update",value:function(e){for(var t in e)this[t]=e[t]}},{key:"toJSON",value:function(){return this.data}}]),e}();function Sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}_a(Oa.prototype,["id","fill","body","hidden","indent","thumb"]);var Ra=function(){function e(t){R()(this,e),this.data=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sa(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({selected:[]},t)}return O()(e,[{key:"size",get:function(){var e=this.data.size;return Array.isArray(e)?e:"4:3"===e?[1440,1080]:[1440,810]}},{key:"selected",set:function(e){Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))&&(this.data.selected=e)}},{key:"toJSON",value:function(){return this.data}}]),e}();_a(Ra.prototype,["autoplay","loop","selected","size","viewport"]);var ja=function(e){P()(n,fe.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return R()(this,n),(e=t.call(this)).load(r),e}return O()(n,[{key:"load",value:function(e){var t=e.shows||[];0===t.length&&t.push({}),t.forEach((function(e){e.thumb&&e.thumb.startsWith("blob:")&&(e.thumb=null)}));var n=t.map((function(e){return new Oa(e)})),r=new Ra(e.settings),a=r.selected;Array.isArray(a)&&(r.selected=a.filter((function(e){return n.find((function(t){return t.id===e}))}))),0===r.selected.length&&(r.selected=[n[0].id]),this.shows=n,this.settings=r}},{key:"create",value:function(e){return new Oa(e)}},{key:"find",value:function(e){if(null==e)return null;var t=this.shows,n="object"===ue()(e)?e.id:e;return t.find((function(e){return e.id===n}))}},{key:"findIndex",value:function(e){if(null==e)return-1;var t=this.shows,n="object"===ue()(e)?e.id:e;return t.findIndex((function(e){return e.id===n}))}},{key:"findAll",value:function(e){var t=this;return[].concat(e).reduce((function(e,n){var r=t.find(n);return r&&!e.includes(r)&&e.push(r),e}),[])}},{key:"findOrCreate",value:function(e){for(var t=this.shows,n="object"===ue()(e)?e.id:e,r=0;r<t.length;r++){var a=t[r];if(a&&a.id===n)return[a,r]}return e instanceof Oa?[e,-1]:[new Oa(e),-1]}},{key:"findSibling",value:function(e){for(var t=this,n=this.shows,r=[].concat(e).map((function(e){return t.findIndex(e)})),a=r.length-1;a>=0;a--){var o=r[a],i=n[o+1];if(i&&!r.includes(o+1))return i;if((i=n[o-1])&&!r.includes(o-1))return i}return null}},{key:"findSelections",value:function(e){var t=this,n=this.settings.selected;return e?n.map((function(e){return t.find(e)})):this.shows.filter((function(e){return n.includes(e.id)}))}},{key:"findReferences",value:function(e){for(var t=this.shows,n=[],r=0;r<t.length;r++)e.includes(t[r])&&n.push(t[r+1]);return n}},{key:"insertAfter",value:function(e,t){var n=this,r=this.shows,a=[],o=this.find(t);[].concat(e).forEach((function(e){var t=n.findOrCreate(e),i=Y()(t,2),c=i[0],l=i[1];c!==o&&(a.push(c),l>=0&&r.splice(l,1))}));for(var i=this.findIndex(t),c=i>=0?i:r.length-1,l=0;l<a.length;l++){var s=a[l];r.splice(++c,0,s)}return this.emit("show:insertAfter",{shows:a}),a}},{key:"insertBefore",value:function(e,t){var n=this,r=this.shows,a=[],o=this.find(t);[].concat(e).forEach((function(e){var t=n.findOrCreate(e),i=Y()(t,2),c=i[0],l=i[1];c!==o&&(a.push(c),l>=0&&r.splice(l,1))}));for(var i=this.findIndex(t),c=i>=0?i:r.length,l=a.length-1;l>=0;l--){var s=a[l];r.splice(c,0,s)}return this.emit("show:insertBefore",{shows:a}),a}},{key:"delete",value:function(e){var t=this.shows,n=this.findAll(e);if(0===n.length)throw new Error("unable to find target shows");for(var r=t.length-1;r>=0;r--){var a=t[r];n.includes(a)&&t.splice(r,1)}this.emit("show:delete",{shows:n})}},{key:"update",value:function(e,t){var n=this.findAll(e);if(0===n.length)throw new Error("unable to find target shows");Array.isArray(t)||(t=new Array(n.length).fill(t));for(var r=0;r<n.length;r++){var a=n[r],o=t[r];a.update(o)}this.emit("show:update",{shows:n,changes:t})}},{key:"paginate",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.activeIndex,n=this.shows,r=t+e,a=n[r]||null;a&&a.hidden;)a=n[r+=e];return a}},{key:"activeShow",get:function(){var e=this.settings.selected;return this.find(e[0])}},{key:"activeRef",get:function(){for(var e=this.shows,t=this.settings.selected,n=e.length-1;n>=0;n--){var r=e[n];if(t.includes(r.id))return r}}},{key:"activeIndex",get:function(){var e=this.settings.selected;return this.findIndex(e[0])}},{key:"nextShow",get:function(){var e=this.activeIndex;return this.shows[e+1]}},{key:"previousShow",get:function(){var e=this.activeIndex;return this.shows[e-1]}},{key:"toJSON",value:function(){return{format:"lakeshow",type:"Show",version:"1.0",shows:this.shows.map((function(e){return e.toJSON()})),settings:this.settings.toJSON()}}}]),n}();ya("/**\n * 高度由外部控制\n */\n.lake-show-reader {\n  height: 100%;\n  position: relative;\n}\n.lake-show-tiles {\n  height: 100%;\n  overflow: auto;\n}\n.lake-show-tiles:fullscreen {\n  overflow: hidden;\n}\n.lake-show-tiles:fullscreen.idle * {\n  cursor: none !important;\n}\n.lake-show-tiles:fullscreen .lake-show-tile {\n  background: #000;\n  padding: 0;\n  width: 100vw;\n  height: 100vh;\n}\n.lake-show-tiles:fullscreen .lake-show-tile :first-child {\n  flex-grow: 1;\n}\n");var Pa=a.a.forwardRef((function(e,t){var n=function(e){var t=e.data,n=e.isDesktopApp,a=e.print;t&&Array.isArray(t.shows)&&(t.shows=t.shows.filter((function(e){return!e.hidden})));var o=Object(r.useMemo)((function(){return new ja(t)}),[t]),i=Object(r.useState)("read"),c=Y()(i,2),l=c[0],s=c[1],u=Object(r.useState)(0),d=Y()(u,2),f=d[0],p=d[1],h=Object(r.useState)(!0),m=Y()(h,2),g=m[0],v=m[1],y=Object(r.useRef)();function b(){p((function(e){return e+1}))}return Object(r.useEffect)((function(){function e(){var e=o.activeIndex,n=o.shows,r=o.settings,a=new URLSearchParams(location.hash.slice(1)),i=parseInt(a.get("page"),10)-1;i!==e&&i>=0&&i<t.shows.length?r.selected=[n[i].id]:r.selected=[n[0].id],b()}return e(),window.addEventListener("hashchange",e),function(){window.removeEventListener("hashchange",e),clearTimeout(y.current)}}),[]),{model:o,state:{counter:f,mode:l,paginatorVisible:g},execCommand:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];switch(e){case"setPaginatorVisible":var i=r[0],c=r[1];v(i),i&&(clearTimeout(y.current),(0!==c||window.h5)&&(y.current=setTimeout((function(){v(!1)}),c||2e3)));break;case"toggleMode":s("play"!==l?"play":"read");break;case"selectShow":var u=r[0],d=o.findIndex(u);if(d>=0&&d!==o.activeIndex){var f=new URLSearchParams(location.hash.slice(1));f.set("page",d+1),n?(o.settings.selected=[u.id],b()):window.location.hash=f.toString()}}},print:a}}(e);return Object(r.useImperativeHandle)(t,(function(){return n})),a.a.createElement(xa,{viewModel:n})}));function Aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ta(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Aa(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}ya("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-show-toolbar {\n  position: relative;\n}\n.lake-show-toolbar .lake-diagram-toolbar-title {\n  position: absolute;\n  left: 36px;\n  top: 4px;\n}\n.lake-show-toolbar .lake-diagram-toolbar-extra {\n  position: absolute;\n  right: 12px;\n  top: 4px;\n}\n.lake-show-toolbar .lake-diagram-toolbar-body {\n  width: 100%;\n}\n.lake-show-toolbar .ant-btn .lake-icon-plus {\n  font-size: 14px;\n}\n.lake-show-toolbar .ant-btn:focus {\n  background: none;\n}\n.lake-show-toolbar .ant-btn.lake-button-active,\n.lake-show-toolbar .ant-btn.lake-button-active:focus {\n  background: #e8e8e8;\n}\n");var Da=E.i.ShapeOverlay,Ma=E.i.Toolbar,Na=E.j.EMPTY_TEXT;function La(e){var t=e.viewModel,n=t.diagram,o=t.selector,i=t.commander,c=t.state,l=t.queryCommand,s=t.execCommand,u=Object(r.useState)([]),d=Y()(u,2),f=d[0],p=d[1],h=o.selections,m=Object(r.useMemo)((function(){return a.a.createElement(Da,{groups:["basic","flowchart"],onSelect:function(e){var t=e.key,r=e.group,a={shape:t,html:'<div style="font-size: 32px; text-align: center;">'.concat(Na,"</div>")};"basic"===r&&Object.assign(a,{fill:{color:"#D7DCE0"},stroke:{width:2,color:"rgba(0, 0, 0, 0)"}}),n.command.execute("FlowchartBeginInsertShape",a)}})}),[n]);return Object(r.useEffect)((function(){var e;n&&(e=function(e){var t=e.diagram,n=e.execCommand,r=e.shapeOverlay;return[{name:"save",title:Oe("保存"),hotkey:ne.ua.macos?"⌘+S":"Ctrl+S",icon:"save",command:"save",disabled:!1},{name:"undo",title:Oe("撤销"),hotkey:ne.ua.macos?"⌘+Z":"Ctrl+Z",icon:"undo",command:"Undo"},{name:"redo",title:Oe("重做"),hotkey:ne.ua.macos?"⌘+Shift+Z":"Ctrl+Shift+Z",icon:"redo",command:"Redo"},{type:"separator"},{name:"flowchart:insertText",title:Oe("文本框"),icon:"insert-text",command:"FlowchartBeginInsertText",execCommand:function(){t.command.execute("FlowchartBeginInsertText",{html:'<div style="font-size: 32px; text-align: left;">'.concat(Oe("文本"),"</div>"),stroke:{width:2}})}},{name:"flowchart:insertShape",title:Oe("形状"),type:"dropdown",icon:"insert-shape",command:"FlowchartBeginInsertShape",overlay:r},{name:"flowchart:insertEdge",title:Oe("线条"),type:"dropdown",command:"FlowchartBeginInsertEdge",mode:"button",defaultKey:"straight-line-arrow",data:[{key:"straight-line",icon:"straight-line"},{key:"straight-line-arrow",icon:"straight-line-arrow"},{key:"elbow-line",icon:"elbow-line"},{key:"elbow-line-arrow",icon:"elbow-line-arrow"}],onClick:function(e){var n=e.key.split("-"),r=Y()(n,3),a=r[0],o=r[2];t.command.execute("FlowchartBeginInsertEdge",{shape:a,marker:o,html:'<div style="font-size: 32px; text-align: center;">'.concat(Na,"</div>")})},onSelect:function(e){var n=e.key.split("-"),r=Y()(n,3),a=r[0],o=r[2];t.settings.flowchart=Ta(Ta({},t.settings.flowchart),{},{edge:{shape:a,marker:o}}),t.command.execute("FlowchartBeginInsertEdge",{shape:a,marker:o,html:'<div style="font-size: 32px; text-align: center;">'.concat(Na,"</div>")})}},{name:"flowchart:insertImage",title:Oe("图片"),icon:"image",type:"upload",accept:b.EXTS.IMAGE_EXT_STR,command:"Add",onChange:function(e){n("uploadImages",e.target.files),e.target.value=""}},{name:"flowchart:createLink",title:Oe("插入链接"),icon:"link",command:"CreateLink"}]}({diagram:n,execCommand:s,shapeOverlay:m}).map((function(e){var t=null==e.disabled?l(e.command).disabled:e.disabled;return Ta(Ta({},e),{},{disabled:t})})),p(e))}),[n,h,i.index]),n?n&&a.a.createElement(Ma,{className:"lake-show-toolbar",title:a.a.createElement(Ma.Control,{name:"insertAfterShow",command:"insertAfterShow",disabled:l("insertAfterShow").disabled,icon:"plus",label:Oe("新建幻灯片"),hotkey:ne.ua.macos?"⌘+Option+N":"Ctrl+Alt+N",execCommand:s,"data-lake_yieldable":!0}),extra:a.a.createElement(Ma.Control,{disabled:!1,name:"properties",title:Oe("格式面板"),label:Oe("格式"),hotkey:ne.ua.macos?"⌘+I":"Ctrl+I",icon:"properties",active:c.propertiesVisible,command:"toggleProperties",execCommand:s}),commands:f,execCommand:s}):a.a.createElement("div",{className:"lake-show-toolbar"})}La.propTypes={viewModel:i.a.shape({commander:i.a.shape({index:i.a.number}),diagram:i.a.object,model:i.a.object,selector:i.a.object,state:i.a.object,execCommand:i.a.func,queryCommand:i.a.func})},ya('/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.larkui-sortable [draggable="true"] {\n  cursor: grab;\n}\n.larkui-sortable [draggable="true"]:active {\n  cursor: grabbing;\n  transform: translate(0, 0);\n}\n.larkui-sortable .placeholder > * {\n  display: none;\n}\n');var Ia,Ba=["onSort","className","getDragData","getDragImage"];function za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?za(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):za(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ua(e){var t,n,o=e.onSort,i=e.className,c=e.getDragData,l=e.getDragImage,s=ge()(e,Ba),u=Object(r.useRef)();function d(e){var t=e.target;if(t.classList.remove("placeholder"),Array.from(u.current.children,(function(e){return e.classList.remove("removed")})),Object.assign(t.style,{width:"",height:""}),!Ia.dropped){var n=parseInt(t.dataset.index,10);u.current.removeChild(t),u.current.insertBefore(t,u.current.children[n])}}function f(e){if(n!==e){n=e,u.current.classList.add("droppable");var r=u.current.children[n],a=u.current.querySelector(".placeholder")||document.createElement("div");a.classList.add("placeholder"),a!==r&&(u.current.insertBefore(a,r),t=null)}}function p(){n=null;var e=u.current.querySelector(".placeholder:empty");e&&e.remove(),u.current.classList.remove("droppable")}Object(r.useEffect)((function(){Array.from(u.current.querySelectorAll('[draggable="true"]'),(function(e,t){e.dataset.index=t}))}),[e.children]);var h={};return a.a.createElement("div",he()({},s,{className:w()("larkui-sortable",i),onDragStart:function(t){var n=t.target;if(n.parentNode===u.current){t.stopPropagation();var r=Fa(Fa({},c(n)),{},{type:u.current.dataset.type,index:parseInt(n.dataset.index,10),rect:n.getBoundingClientRect(),origin:{x:t.clientX,y:t.clientY}});t.dataTransfer.setData("application/json",JSON.stringify(r)),Ia=r,t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(l(n),t.clientX-r.rect.x,t.clientY-r.rect.y),n.addEventListener("dragend",d,{once:!0}),e.onDragStart(),setTimeout((function(){Array.from(u.current.children).forEach((function(e){e.classList.contains("selected")&&e!==n&&e.classList.add("removed")})),n.classList.add("placeholder"),Object.assign(n.style,{width:"".concat(r.rect.width,"px"),height:"".concat(r.rect.height,"px")})}),1)}},onDragEnter:function(e){e.dataTransfer.dropEffect="move",t=null},onDragOver:function(e){var n=Ia;if(n&&n.type===u.current.dataset.type){e.preventDefault();var r=e.clientX-n.origin.x,a=e.clientY-n.origin.y,o={width:n.rect.width,height:n.rect.height,top:n.rect.top+a,right:n.rect.right+r,bottom:n.rect.bottom+a,left:n.rect.left+r},i=(e.clientY,h.clientY,e.clientX-h.clientX>0),c=(e.clientX,h.clientX,e.clientY-h.clientY>0);h={clientX:e.clientX,clientY:e.clientY},t||(t=Array.from(u.current.children,(function(e){return e.getBoundingClientRect()})));var l=t.reduce((function(e,t,n){if(o.top>t.bottom||o.right<t.left||o.bottom<t.top||o.left>t.right)return e;var r=Math.max(o.left,t.left),a=Math.max(o.top,t.top),l=(Math.min(o.right,t.right)-r)*(Math.min(o.bottom,t.bottom)-a);return l>e.area?{area:l,index:i||c?n+1:n}:e}),{area:0});l.area/(o.width*o.height)>=.3?f(l.index):f(t.length)}},onDragLeave:function(e){if(!e.currentTarget.contains(e.relatedTarget)){var t=e.currentTarget.getBoundingClientRect(),n=getComputedStyle(e.currentTarget).marginTop,r=Math.max(t.top,t.top-parseInt(n,10));e.clientX>=t.left&&e.clientX<=t.right&&e.clientY>=r&&e.clientY<=t.bottom||p()}},onDrop:function(e){e.preventDefault();var t=Ia;null!=t.index&&null!=n&&(t.dropped=!0,o(t,n)),p()},ref:u}),e.children)}function Va(e){var t=e.seq,n=e.show,r=e.selected,o=e.active,i=n.id,c=!1;return a.a.createElement("div",{className:w()("lake-show-nav-item",{hidden:n.hidden,selected:r,active:o}),"data-id":i,draggable:!0,onClick:function(){r&&c&&e.onSelect(n,"replace")},onMouseDown:function(t){var a="replace";t.shiftKey&&(a="range"),(ne.ua.macos?t.metaKey:t.ctrlKey)&&(a="add"),"replace"===a&&r?c=!0:e.onSelect(n,a)}},a.a.createElement("div",{className:"lake-show-nav-item-seq"},t),a.a.createElement("div",{className:"lake-show-nav-item-thumb","data-hidden":n.hidden},!n.hidden&&n.thumb&&a.a.createElement("img",{src:n.thumb,draggable:!1})))}function qa(e,t){var n=e.disabled,r=e.title,o=e.key,i=e.hotkey;if("separator"===e.type)return a.a.createElement("li",{key:"separator-".concat(t),className:"lake-show-context-menu-separator"});if(e.data)return a.a.createElement(l.a.SubMenu,{key:o,title:r,disabled:n,popupClassName:"lake-show-context-submenu"},e.data.map(qa));var c="string"==typeof e.icon?a.a.createElement("span",{className:"lake-icon lake-icon-".concat(e.icon)}):e.icon;return a.a.createElement(l.a.Item,{key:o,className:"ant-menu-item",disabled:n},c,r,i&&a.a.createElement("span",{className:"lake-show-context-menu-hotkey"},i))}function Ha(e){var t=e.data,n=Object(r.useRef)(),o=Object(r.useState)(e.coords),i=Y()(o,2),c=i[0],s=i[1],u=Object.keys(e).reduce((function(t,n){return n.startsWith("data-")&&(t[n]=e[n]),t}),{});function d(e){e.preventDefault()}return Object(r.useEffect)((function(){s(e.coords)}),[e.coords]),Object(r.useEffect)((function(){function e(e){n.current.contains(e.target)||(s(null),e.stopPropagation())}if(c)return document.body.addEventListener("mousedown",e,{capture:!0,once:!0}),function(){document.body.removeEventListener("mousedown",e,{capture:!0})}}),[c,n.current]),Object(r.useEffect)((function(){ye.a.render(a.a.createElement("div",he()({},u,{className:w()("lake-show-context-menu",e.className),style:c?{left:c.x,top:c.y}:{visibility:"hidden"},onContextMenu:d}),a.a.createElement(l.a,{className:"lake-show-context-submenu",onClick:e.onClick,selectable:!1},t.map(qa))),n.current)}),[n.current,c]),Object(r.useEffect)((function(){if(c){var e=document.body.getBoundingClientRect(),t=n.current.querySelector(".lake-show-context-menu");if(t){var r=t.getBoundingClientRect(),a={x:Math.min(c.x,e.right-r.width-16),y:Math.min(c.y,e.bottom-r.height-16)};c.x===a.x&&c.y===a.y||s(a)}}}),[c]),a.a.createElement("div",{ref:n})}function Wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ya(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wa(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ga(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xa(e){var t=e.viewModel,n=t.state,r=t.clipboard,o=t.execCommand,i=n.showContextMenu,c=i.coords,l=i.show,s=[{key:"insertAfterShow",title:Oe("新建幻灯片")},{key:"toggleShow",title:l&&l.hidden?Oe("显示幻灯片"):Oe("隐藏幻灯片"),disabled:!l},{type:"separator"},{key:"cutShow",title:Oe("剪切"),hotkey:ne.ua.macos?"⌘+X":"Ctrl+X",disabled:!l},{key:"copyShow",title:Oe("复制"),hotkey:ne.ua.macos?"⌘+C":"Ctrl+C",disabled:!l},{key:"pasteShow",title:Oe("粘贴"),hotkey:ne.ua.macos?"⌘+V":"Ctrl+V"},{key:"deleteShow",title:Oe("删除"),disabled:!l}];return a.a.createElement(Ha,{className:"lake-show-nav-item-context-menu",coords:c,data:s,onClick:function(e){var t=e.key;switch(t){case"insertAfterShow":o("insertAfterShow",{},l);break;case"toggleShow":case"deleteShow":case"cutShow":case"copyShow":o(t,l);break;case"pasteShow":r.read().then((function(e){var t=e.items;if(Array.isArray(t)){var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ga(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ga(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(t);try{for(r.s();!(n=r.n()).done;){var a=n.value["text/plain"];try{var i=JSON.parse(a);Array.isArray(i.body)&&o("insertAfterShow",Ya(Ya({},i),{},{id:null}))}catch(e){}}}catch(e){r.e(e)}finally{r.f()}}}));break;default:throw new Error("unknown command ".concat(t))}o("toggleShowContextMenu")}})}function Ka(e){var t=e.viewModel,n=t.diagram,o=t.model,i=t.execCommand,c=o.activeShow,l=o.shows,s=o.settings,u=Object(r.useRef)();function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"replace";if(n.selector.clear(),"replace"===t)i("selectShow",e);else if("add"===t){var r=s.selected.map((function(e){return o.find(e)})),a=r.indexOf(e);a>=0?r.splice(a,1):r.push(e),i("selectShow",r)}else if("range"===t){var c=o.activeIndex,u=o.findIndex(e);if(u<c){var d=[u,c];c=d[0],u=d[1]}var f=l.slice(c,u+1);i("selectShow",f)}}Object(r.useEffect)((function(){if(c){var e=c.id,t=u.current.querySelector('[data-id="'.concat(e,'"]'));if(t){var n=u.current.getBoundingClientRect(),r=t.getBoundingClientRect();(r.top<n.top||r.bottom>n.bottom)&&t.scrollIntoView()}}}),[c]);var f=1;return a.a.createElement("div",{ref:u,className:"lake-show-nav",onContextMenu:function(e){if(!e.target.closest(".lake-show-context-menu")){var t=e.target.closest("[data-id]"),n=t?o.find(t.dataset.id):null;e.preventDefault(),i("toggleShowContextMenu",{x:e.clientX,y:e.clientY},n)}}},a.a.createElement(Ua,{getDragData:function(){return{shows:o.findSelections()}},getDragImage:function(e){return s.selected.length>1&&e.classList.add("multi-selected"),setTimeout((function(){return e.classList.remove("multi-selected")}),1),e.querySelector(".lake-show-nav-item-thumb")},onSort:function(e,t){if(t!==e.index){var n=t>e.index?t+1:t;i("insertBeforeShow",e.shows,l[n])}}},l.map((function(e){return a.a.createElement(Va,{key:e.id,show:e,size:s.size,selected:s.selected.includes(e.id),seq:e.hidden?-1:f++,active:e===c,onSelect:d})}))),a.a.createElement(Xa,{viewModel:e.viewModel}))}function Za(e){var t=Object(r.useRef)(),n=e.viewModel,o=n.diagram,i=n.model,c=n.state,l=n.execCommand,s=i.settings,u=i.activeShow,d=c.mode,f=Object(r.useRef)({});return Se({container:t,viewModel:n}),Object(r.useEffect)((function(){var e=t.current.getBoundingClientRect(),n=s.size,r=new E.l({container:t.current,width:e.width,height:e.height,paper:{size:n,visible:!0},plugins:[va],padding:[16,16],mode:d});return"edit"===d&&s.viewport?r.viewport.set(s.viewport):r.viewport.zoomFit(),l("setDiagram",r),function(){return r.destroy()}}),[]),Object(r.useEffect)((function(){var e=t.current,n=new ResizeObserver(_()((function(t){var n=t.find((function(t){return t.target===e}));if(o&&n&&n.contentRect){var r=n.contentRect,a=r.width,i=r.height;if("edit"!==d){var c=o.paper.size,l=c[0]/c[1];i=(a=Math.min(i*l,a))/l}a===o.width&&i===o.height||(o.changeSize(a,i),o.viewport.zoomFit())}}),160));return n.observe(e),function(){return n.unobserve(e)}}),[o,d]),Object(r.useEffect)((function(){if(o&&!o.destroyed&&u)return o.importer.caches=f.current[u.id]||{},o.clear(),o.import(u),i.emit("show:ready"),u.thumb||l("updateThumb",u,o),function(){f.current[u.id]=o.importer.caches}}),[o,u]),Object(r.useEffect)((function(){if(o){u&&o.paper.fill.color!==u.fill.color&&o.paper.update({fill:u.fill});var e=o.interaction;"play"===d&&"read"!==e.currentMode?e.changeMode("read"):"play"!==d&&"read"===e.currentMode&&e.changeMode("edit")}})),a.a.createElement("div",{ref:t,className:"lake-show-canvas","data-mode":d,onContextMenu:function(e){if(o&&"edit"===o.interaction.currentMode&&!o.contentEditor.isBegin){var t=o.getCell(e.target);t?t.state.selected||o.selector.select(t):o.selector.clear(),e.preventDefault();var n={x:e.clientX,y:e.clientY};l("toggleDiagramContextMenu",n,t)}}})}function $a(e){var t=e.viewModel,n=t.execCommand,o=t.model,i=Object(r.useRef)();return Object(r.useEffect)((function(){var e=o.settings.size,t=new E.l({container:i.current,width:320,height:320,paper:{size:e,visible:!0},plugins:[va],mode:"none"});return n("setShadowDiagram",t),function(){return t.destroy()}}),[]),a.a.createElement("div",{className:"lake-show-shadow-canvas",ref:i})}function Qa(e){var t=e.title,n=e.extra,r=e.children,o=e.disabled,i=e.onMouseDown,c=w()("lake-show-control",e.className,{disabled:o});return a.a.createElement("div",{className:c,onMouseDown:i},t&&a.a.createElement("div",{className:"lake-show-control-head"},a.a.createElement("div",{className:"lake-show-control-title"},t),n&&a.a.createElement("div",{className:"lake-show-control-extra"},n)),r&&a.a.createElement("div",{className:"lake-show-control-body"},r))}Ua.defaultProps={getDragData:function(e){try{return JSON.parse(e.dataset.drag)}catch(e){return{}}},getDragImage:function(e){return e},onDragStart:function(){},onSort:function(){}},Ua.propTypes={children:i.a.array,className:i.a.string,onSort:i.a.func,onDragStart:i.a.func,getDragImage:i.a.func},Va.propTypes={seq:i.a.number,show:i.a.object,size:i.a.arrayOf(i.a.number),selected:i.a.bool,active:i.a.bool,onSelect:i.a.func},qa.propTypes={title:i.a.string,key:i.a.string,hotkey:i.a.string,type:i.a.string,disabled:i.a.book,icon:i.a.oneOf([i.a.string,i.a.node]),data:i.a.arrayOf(i.a.object)},ya("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-show-context-menu {\n  position: fixed;\n  z-index: 1;\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.13);\n}\n.lake-show-context-menu.hidden {\n  display: none;\n}\n.lake-show-context-menu .ant-menu,\n.lake-show-context-submenu .ant-menu {\n  border-radius: 2px;\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n.lake-show-context-menu .ant-menu .ant-menu-submenu,\n.lake-show-context-submenu .ant-menu .ant-menu-submenu,\n.lake-show-context-menu .ant-menu .ant-menu-item,\n.lake-show-context-submenu .ant-menu .ant-menu-item {\n  height: 32px;\n  line-height: 32px;\n  min-width: 164px;\n}\n.lake-show-context-menu .ant-menu .ant-menu-item-active,\n.lake-show-context-submenu .ant-menu .ant-menu-item-active,\n.lake-show-context-menu .ant-menu .ant-menu-submenu-active,\n.lake-show-context-submenu .ant-menu .ant-menu-submenu-active {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-show-context-menu .ant-menu .ant-menu-submenu .ant-menu-submenu-title,\n.lake-show-context-submenu .ant-menu .ant-menu-submenu .ant-menu-submenu-title {\n  height: auto;\n  line-height: inherit;\n  color: #595959;\n}\n.lake-show-context-menu .ant-menu .ant-menu-submenu .ant-menu-submenu-arrow::before,\n.lake-show-context-submenu .ant-menu .ant-menu-submenu .ant-menu-submenu-arrow::before,\n.lake-show-context-menu .ant-menu .ant-menu-submenu .ant-menu-submenu-arrow::after,\n.lake-show-context-submenu .ant-menu .ant-menu-submenu .ant-menu-submenu-arrow::after {\n  width: 5px;\n  height: 1px;\n  background-image: linear-gradient(90deg, #595959, #595959);\n}\n.lake-show-context-menu .ant-menu.ant-menu-vertical .ant-menu-item,\n.lake-show-context-submenu .ant-menu.ant-menu-vertical .ant-menu-item {\n  margin-bottom: 4px;\n}\n.lake-show-context-menu .ant-menu.ant-menu-sub,\n.lake-show-context-submenu .ant-menu.ant-menu-sub {\n  width: auto;\n}\n.lake-show-context-menu .ant-menu.ant-menu-sub > li,\n.lake-show-context-submenu .ant-menu.ant-menu-sub > li {\n  width: auto;\n}\n.lake-show-context-menu .lake-icon,\n.lake-show-context-submenu .lake-icon {\n  display: inline-block;\n  margin-right: 0.25em;\n}\n.lake-show-context-menu-separator {\n  border-bottom: 1px solid #f5f5f5;\n  margin-bottom: 8px;\n}\n.lake-show-context-menu-hotkey {\n  float: right;\n  color: #BFBFBF;\n}\n"),Ha.defaultProps={onClick:function(){}},Ha.propTypes={className:i.a.string,coords:i.a.object,data:i.a.arrayOf(i.a.object),onClick:i.a.func},Xa.propTypes={viewModel:i.a.shape({model:i.a.object,clipboard:i.a.shape({read:i.a.func}),state:i.a.shape({showContextMenu:i.a.object}),execCommand:i.a.func})},ya("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-show-nav {\n  background: #fafafa;\n  overflow: auto;\n}\n.lake-show-nav .larkui-sortable {\n  height: 100%;\n  width: 100%;\n  overflow: auto;\n}\n.lake-show-nav-item {\n  display: flex;\n  align-items: end;\n  padding: 8px 0;\n}\n.lake-show-nav-item.selected {\n  background: #dbe3ea;\n}\n.lake-show-nav-item.selected .lake-show-nav-item-seq {\n  color: #262626;\n}\n.lake-show-nav-item.selected .lake-show-nav-item-thumb::after {\n  border-color: #bac7d2;\n  border-width: 2px;\n}\n.lake-show-nav-item.active {\n  background: #d1dae2;\n}\n.lake-show-nav-item.placeholder {\n  background: none;\n}\n.lake-show-nav-item.placeholder .lake-show-nav-item-seq {\n  display: none;\n}\n.lake-show-nav-item.placeholder .lake-show-nav-item-thumb {\n  display: block;\n  width: 2px;\n  background: #096dd9;\n  margin-left: 36px;\n}\n.lake-show-nav-item.placeholder .lake-show-nav-item-thumb img {\n  border: none;\n}\n.lake-show-nav-item:last-child {\n  margin-bottom: 8px;\n}\n.lake-show-editor.active .lake-show-nav-item.selected .lake-show-nav-item-thumb::after {\n  border-color: #096dd9;\n  border-width: 2px;\n}\n.lake-show-nav-item-seq {\n  font-size: 14px;\n  text-align: right;\n  display: inline-block;\n  width: 28px;\n  margin-right: 8px;\n  color: #8C8C8C;\n  user-select: none;\n}\n.lake-show-nav-item-thumb {\n  position: relative;\n  background: #ffffff;\n  border-radius: 2px;\n  width: 160px;\n  height: 90px;\n  overflow: hidden;\n}\n.lake-show-nav-item-thumb::after {\n  content: ' ';\n  display: block;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  border: 1px solid #e8e8e8;\n  border-radius: 2px;\n}\n.lake-show-nav-item-thumb img {\n  position: relative;\n  width: 100%;\n  border-radius: 2px;\n  overflow: hidden;\n}\n.lake-show-nav-item.hidden .lake-show-nav-item-seq {\n  height: 0;\n  overflow: hidden;\n}\n.lake-show-nav-item.hidden .lake-show-nav-item-thumb {\n  height: 4px;\n}\n.lake-show-nav-item.hidden .lake-show-nav-item-thumb::after {\n  border-color: #d9d9d9;\n  border-width: 2px;\n}\n.lake-show-nav-item.hidden.selected .lake-show-nav-item-thumb::after {\n  border-color: #096dd9;\n  border-width: 1.5px;\n}\n.lake-show-nav-item.hidden.placeholder {\n  height: auto !important;\n}\n.lake-show-nav-item.hidden.placeholder .lake-show-nav-item-thumb {\n  height: 90px;\n}\n.lake-show-nav-item.removed {\n  display: none;\n}\n.lake-show-nav-item.multi-selected .lake-show-nav-item-thumb {\n  transform: translateZ(0);\n  overflow: visible;\n}\n.lake-show-nav-item.multi-selected .lake-show-nav-item-thumb::before {\n  position: absolute;\n  content: ' ';\n  width: 100%;\n  height: 100%;\n  transform: rotate(5deg);\n  border: 2px solid #096dd9;\n}\n"),Ka.propTypes={viewModel:i.a.shape({diagram:i.a.object,model:i.a.shape({shows:i.a.array,settings:i.a.shape({size:i.a.arrayOf(i.a.number),selected:i.a.arrayOf(i.a.string)}),activeShow:i.a.object,activeIndex:i.a.number,find:i.a.func,findIndex:i.a.func,findSelections:i.a.func}),selector:i.a.object,execCommand:i.a.func})},ya('/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-show-canvas {\n  flex: auto;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: #fff;\n}\n.lake-show-canvas > div:first-child {\n  flex: 1 0 auto;\n}\n.lake-show-canvas[data-mode="play"],\n.lake-show-canvas:fullscreen {\n  background: #000;\n}\n.lake-show-canvas[data-mode="play"] > div,\n.lake-show-canvas:fullscreen > div {\n  background: #fff;\n}\n.lake-show-canvas[data-mode="play"].idle *,\n.lake-show-canvas:fullscreen.idle * {\n  cursor: none !important;\n}\n.lake-show-canvas[data-mode="play"] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 1000;\n}\n'),Za.defaultProps={settings:{size:[1440,810]}},Za.propTypes={viewModel:i.a.shape({diagram:i.a.object,model:i.a.shape({settings:i.a.shape({size:i.a.arrayOf(i.a.number),selected:i.a.arrayOf(i.a.string),viewport:i.a.object}),shows:i.a.array,activeShow:i.a.object,activeIndex:i.a.number,emit:i.a.func,paginate:i.a.func}),state:i.a.shape({mode:i.a.string}),execCommand:i.a.func})},ya(".lake-show-shadow-canvas {\n  position: absolute;\n  z-index: -1;\n  background: #fff;\n}\n"),$a.propTypes={viewModel:i.a.shape({model:i.a.object,execCommand:i.a.func})},ya("/* stylelint-disable */\n.lake-show-control .lake-show-control-extra .ant-input-number {\n  border: none;\n}\n.lake-show-control .lake-show-control-extra .lake-show-dropdown-input {\n  border: none;\n}\n.lake-show-control.disabled .lake-show-control-extra {\n  background-color: #fafafa;\n}\n.lake-show-control.disabled .ant-input-number.ant-input-number-disabled {\n  background-color: #fafafa;\n}\n"),Object.assign(Qa,{get:function(e,t,n){var r=n;if(e.length>0)if((r=e.map((function(e){return t.split(".").reduce((function(e,t){return e?e.isCell&&e.get(t)||e[t]:e}),e)}))).every((function(e){return e===r[0]})))r=r[0];else{if(!r.every((function(e){return"number"==typeof e})))return"multiValue";r.sort(),r=r[r.length-1]}return r}}),Qa.propTypes={title:i.a.string,extra:i.a.object,children:i.a.node,className:i.a.string,disabled:i.a.bool,onMouseDown:i.a.func},ya(".lake-show-color-pick-container {\n  background: #fff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  padding: 5px 0;\n  min-width: 74px;\n}\n");var Ja,eo=[];function to(e){var t,n=e.color,o=e.disabled,i=e.onClear,c=e.palette,l=e.transSVG,u=Object(r.useState)(!1),d=Y()(u,2),f=d[0],p=d[1];return a.a.createElement(s.a,{disabled:o,trigger:["click"],visible:f,onVisibleChange:function(e){p(e),e||eo.includes(Ja)||(eo.push(Ja),eo.length>10&&(eo=eo.slice(-10)))},overlay:a.a.createElement("div",{className:"lake-show-color-pick-container"},a.a.createElement(b.ColorPicker,{className:"lake-prevent-card-activated",activeColors:[n],defaultColor:e.defaultColor,onSelect:function(t,n){Ja=t,e.onSelect(t,n)},onClear:i,show:f,customColors:eo,CustomPalette:c})),placement:"bottomRight",getPopupContainer:function(){return document.querySelector(".yuque-sdk-extra-container")||document.body}},n&&((t=n)&&"transparent"!==t&&"rgba(255,255,255,0)"!==t.replace(/ /g,"")&&"rgba(0,0,0,0)"!==t.replace(/ /g,""))?e.children:l||a.a.createElement("svg",{width:"90",viewBox:"0 0 90 30",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M0 30L90 0",stroke:"#D0021B",fill:"none",fillRule:"evenodd",strokeLinecap:"square"})))}function no(e){var t=e.path,n=e.title,r=e.diagram,o=e.selections.filter((function(e){return e.canFill()})),i=0===o.length||o.some((function(e){return e.locked})),c=Qa.get(o,t),l="multiValue"===c?"#FFFFFF":c;function s(n){e.onChange(t,n,o)}return a.a.createElement(Qa,{disabled:i,title:n,extra:a.a.createElement(to,{disabled:i,color:l,defaultColor:e.defaultColor,onSelect:s,onClear:function(){return s("rgba(0, 0, 0, 0)")},palette:r&&r.palette},a.a.createElement("div",{className:w()("lake-show-fill",{"lake-diagam-multi-properties-selection":"multiValue"===c}),style:{backgroundColor:l}}))})}function ro(e){var t=e.path,n=e.title,r=e.diagram,o=e.selections.filter((function(e){return e.canStroke()})),i=function(e,t){return Qa.get(e,t)||(e.length>0&&!e[0].isStem?Qa.get(e,"treeEdge.stroke"):void 0)}(o,t)||"rgba(0, 0, 0, 0)",c=0===o.length||o.some((function(e){return e.locked})),l="multiValue"===i?"#FFFFFF":i;function s(n){e.onChange(t,n,o)}return a.a.createElement(Qa,{disabled:c,title:n||Oe("颜色"),extra:a.a.createElement(to,{disabled:c,color:l,defaultColor:e.defaultColor,onSelect:s,onClear:function(){return s("rgba(0, 0, 0, 0)")},palette:r&&r.palette},a.a.createElement("div",{className:w()("lake-show-stroke",{"lake-diagam-multi-properties-selection":"multiValue"===i}),style:{backgroundColor:l}}))})}function ao(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ao(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ao(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function io(e){var t=e,n=t.onBlur,o=t.onPressEnter,c=t.onStep,l=t.value,s=Object(r.useState)(null),d=Y()(s,2),f=d[0],p=d[1];return e=oo(oo({},e),{},{value:"number"==typeof f?f:l,onChange:function(e){p(e)},onBlur:function(e){p(null),n(e)},onPressEnter:function(e){p(null),o(e)},onStep:function(e){p(null),c(e)}}),io.propTypes={value:i.a.number,onStep:i.a.func,onBlur:i.a.func,onPressEnter:i.a.func},a.a.createElement(u.a,e)}function co(e){var t=e.selections,n=e.path,r=0===t.length||t.some((function(e){return e.locked})),o=t.filter((function(e){return e.canStrokeWidth()})),i=Qa.get(o,n);function c(t){var r=Math.min(Math.max(t,1),10);r!==i&&e.onChange(n,r,o)}function l(e){c(parseFloat(e.target.value))}return a.a.createElement(Qa,{className:"lake-show-stroke-width-control",disabled:r,title:Oe("粗细"),extra:a.a.createElement(io,{disabled:r,min:1,max:10,value:i,onBlur:l,onPressEnter:l,onStep:c})})}to.propTypes={color:i.a.string,defaultColor:i.a.string,children:i.a.node,disabled:i.a.bool,onClear:i.a.func,onSelect:i.a.func,palette:i.a.object,transSVG:i.a.object},ya("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-show-control .lake-show-fill {\n  border: 4px solid #ffffff;\n  border-radius: 2px;\n  width: 100%;\n  height: 32px;\n}\n.lake-show-control.disabled .lake-show-fill {\n  display: none;\n}\n"),no.defaultProps={defaultColor:"transparent",title:Oe("填充颜色"),onChange:function(){}},no.propTypes={defaultColor:i.a.string,selections:i.a.arrayOf(i.a.object).isRequired,path:i.a.string.isRequired,title:i.a.string,onChange:i.a.func.isRequired,diagram:i.a.object},no.key="FillControl",ya("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-show-control.disabled .lake-show-stroke {\n  display: none;\n}\n.lake-show-stroke {\n  border: 4px solid #ffffff;\n  height: 30px;\n}\n"),ro.defaultProps={defaultColor:"transparent",onChange:function(){}},ro.propTypes={defaultColor:i.a.string,selections:i.a.arrayOf(i.a.object).isRequired,path:i.a.string.isRequired,onChange:i.a.func.isRequired,title:i.a.string,diagram:i.a.object},ro.key="StrokeControl",ya("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-show-stroke-width-control .ant-input-number {\n  width: 100%;\n}\n"),co.defaultProps={onChange:function(){}},co.propTypes={selections:i.a.arrayOf(i.a.object).isRequired,path:i.a.string.isRequired,onChange:i.a.func.isRequired},co.key="StrokeWidthControl",ya("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-show-dropdown-input {\n  position: relative;\n  overflow: hidden;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  transition: border-color 0.3s;\n}\n.lake-show-dropdown-input:hover {\n  border-color: #47C479;\n}\n.lake-show-dropdown-input-focus {\n  border-color: #47C479;\n  box-shadow: 0 0 0 2px rgba(71, 196, 121, 0.2);\n  outline: none;\n}\n.lake-show-dropdown-input .ant-input {\n  padding-right: 24px;\n  border: none;\n}\n.lake-show-dropdown-input .ant-dropdown-trigger {\n  position: absolute;\n  top: -1px;\n  right: -1px;\n  padding: 0;\n  border-width: 0 0 0 1px;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  width: 24px;\n}\n.lake-show-dropdown-input .ant-dropdown-trigger .lake-icon {\n  position: absolute;\n  right: 8px;\n  top: 14px;\n  width: 8px;\n  height: 8px;\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSI1IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgb3BhY2l0eT0iLjQ1Ij48cGF0aCBkPSJNMC0yaDh2OEgweiIvPjxwYXRoIGQ9Ik0uNTk2LjU1N2wzLjE1IDMuODIxYS4zMzIuMzMyIDAgMDAuNDk1IDBMNy40MDUuNTU3YS4zMzIuMzMyIDAgMDAtLjI0Ny0uNTUzSC44NDVjLS4yODggMC0uNDQuMzM5LS4yNDkuNTUzeiIgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPg==);\n  background-repeat: no-repeat;\n}\n.lake-show-dropdown-input .ant-dropdown-trigger .lake-icon::before {\n  content: ' ';\n}\n.lake-show-dropdown-input .ant-dropdown-trigger:hover {\n  background: #f5f5f5;\n  border-color: #d9d9d9;\n}\n");var lo=["disabled"];function so(e){var t=e.disabled,n=ge()(e,lo),o=Object(r.useState)(e.value),i=Y()(o,2),c=i[0],l=i[1],u=Object(r.useState)(!1),p=Y()(u,2),h=p[0],m=p[1];return Object(r.useEffect)((function(){l(e.value)}),[e.value]),a.a.createElement("div",{className:w()("lake-show-dropdown-input",{"lake-show-dropdown-input-focus":h})},a.a.createElement(d.a,{disabled:t,value:c,onFocus:function(){m(!0)},onBlur:function(t){parseInt(t.target.value,10)>0&&e.onChange(t),m(!1)},onChange:function(e){l(e.target.value)},onKeyDown:function(t){"Enter"===t.key&&parseInt(t.target.value,10)>0&&(e.onChange(t),t.target.select())}}),a.a.createElement(s.a,he()({disabled:t},n),a.a.createElement(f.a,null,a.a.createElement("span",{className:"lake-icon lake-icon-dropdown-arrow"}))))}so.propTypes={value:i.a.oneOfType([i.a.string,i.a.number]),disabled:i.a.bool,onChange:i.a.func},ya("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.text-format-control .text-format-font-color {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.text-format-control .text-format-li {\n  margin-bottom: 16px;\n}\n.text-format-control .text-format-li:last-child {\n  margin-bottom: 0;\n}\n.text-format-control .lake-show-control-extra {\n  display: inline-block;\n  vertical-align: bottom;\n  margin-left: 8px;\n}\n.text-format-control .lake-show-font-color {\n  border: 4px solid #ffffff;\n  border-radius: 2px;\n  width: 100%;\n  height: 30px;\n}\n.text-format-control.disabled .lake-show-font-color {\n  display: none;\n}\n.text-format-control .control-body {\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: nowrap;\n}\n.text-format-control .bisu-btn {\n  padding: 0;\n  text-align: center;\n  width: 32px;\n  line-height: 30px;\n  margin-right: 8px;\n}\n.text-format-control .bisu-btn[disabled] {\n  border-color: #e8e8e8;\n}\n.text-format-control .bisu-btn.active {\n  border-color: #47C479;\n}\n.lake-show-control-extra.lake-diagrm-font-color-control-extra {\n  width: auto;\n  flex: auto;\n  max-width: 90px;\n}\n.text-format-font-size {\n  max-width: 90px;\n  display: inline-block;\n  flex: auto;\n  height: 32px;\n  line-height: 30px;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  padding: 0 8px;\n  font-size: 14px;\n  font-weight: 400;\n}\n.text-format-font-size[disabled] {\n  color: #BFBFBF;\n  cursor: not-allowed;\n  border-color: #e8e8e8;\n}\n.text-format-font-size .lake-icon-arrow-down {\n  width: 8px;\n  height: 8px;\n  float: right;\n  margin-top: 12px;\n  background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjhweCIgaGVpZ2h0PSI1cHgiIHZpZXdCb3g9IjAgMCA4IDUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA1Mi41ICg2NzQ2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPkdyb3VwIENvcHkgNjwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGcgaWQ9IlN5bWJvbHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIG9wYWNpdHk9IjAuNDUiPg0KICAgICAgICA8ZyBpZD0idG9vbGJhciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyOC4wMDAwMDAsIC0xOC4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIGlkPSJwYXJhZ3JhcGgtc3R5bGUiPg0KICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyNi4wMDAwMDAsIDQuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC1Db3B5LTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMi4wMDAwMDAsIDEyLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgeD0iMCIgeT0iMCIgd2lkdGg9IjgiIGhlaWdodD0iOCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuNTk2MDkzNzUsMi41NTcwMzEyNSBMMy43NDUzMTI1LDYuMzc4MTI1IEMzLjg3NzM0Mzc1LDYuNTI1NzgxMjUgNC4xMDg1OTM3NSw2LjUyNTc4MTI1IDQuMjQwNjI1LDYuMzc4MTI1IEw3LjQwNTQ2ODc1LDIuNTU3MDMxMjUgQzcuNTk2MDkzNzUsMi4zNDI5Njg3NSA3LjQ0NDUzMTI1LDIuMDAzOTA2MjUgNy4xNTc4MTI1LDIuMDAzOTA2MjUgTDAuODQ0NTMxMjUsMi4wMDM5MDYyNSBDMC41NTcwMzEyNSwyLjAwMzkwNjI1IDAuNDA0Njg3NSwyLjM0Mjk2ODc1IDAuNTk2MDkzNzUsMi41NTcwMzEyNSBaIiBpZD0iU2hhcGUiIGZpbGw9IiMwMDAwMDAiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+) no-repeat;\n}\n.text-format-font-size .lake-icon-arrow-down::before {\n  display: none;\n}\n.text-format-font-size-menu {\n  min-width: 104px;\n}\n.text-format-font-size-menu .ant-dropdown-menu-item {\n  text-align: center;\n  position: relative;\n}\n.text-format-font-size-menu .ant-dropdown-menu-item .lake-icon {\n  position: absolute;\n  left: 12px;\n  top: 9px;\n}\n.text-format-text-align.ant-radio-group {\n  display: flex;\n}\n.text-format-text-align.ant-radio-group .ant-radio-button-wrapper {\n  flex-grow: 1;\n  padding: 0 17.5px;\n  text-align: center;\n}\n.text-format-text-align.ant-radio-group .ant-radio-button-wrapper-disabled {\n  border-color: #e8e8e8;\n}\n.text-format-color {\n  margin-top: 8px;\n  width: 92px;\n  height: 32px;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  padding: 4px;\n}\n.text-format-color-indicator {\n  width: 100%;\n  height: 100%;\n}\n.text-format-color[disabled] {\n  cursor: not-allowed;\n  border-color: #e8e8e8;\n}\n.text-format-color[disabled]-indicator {\n  display: none;\n}\n");var uo={left:"justifyLeft",center:"justifyCenter",right:"justifyRight",start:"justifyLeft"};function fo(e){var t=e.selections,n=e.diagram,o=0===t.length||t.some((function(e){return e.locked})),i=Object(r.useState)({}),c=Y()(i,2),s=c[0],u=c[1],d=n.contentEditorPlus,h=s.fontSize,m=s.color,g=s.textAlign,v=s.bold,y=s.italic,b=s.strikethrough,k=s.underline;return Object(r.useEffect)((function(){function e(e){var t=e.query;u(t)}return n&&d.on("querychange",e),function(){d.off("querychange",e)}}),[n]),a.a.createElement(Qa,{disabled:o,className:"text-format-control"},a.a.createElement("div",{className:"text-format-li",style:{display:"flex",justifyContent:"space-between"}},a.a.createElement("span",{style:{display:"flex",flexWrap:"nowrap"}},a.a.createElement(f.a,{disabled:o,className:w()("bisu-btn",{active:v}),onClick:function(){return d.execCommand("bold")}},a.a.createElement("span",{className:"lake-icon lake-icon-bold"})),a.a.createElement(f.a,{disabled:o,className:w()("bisu-btn",{active:y}),onClick:function(){return d.execCommand("italic")}},a.a.createElement("span",{className:"lake-icon lake-icon-italic"})),a.a.createElement(f.a,{disabled:o,className:w()("bisu-btn",{active:b}),onClick:function(){return d.execCommand("strikethrough")}},a.a.createElement("span",{className:"lake-icon lake-icon-strikethrough"})),a.a.createElement(f.a,{disabled:o,className:w()("bisu-btn",{active:k}),onClick:function(){return d.execCommand("underline")}},a.a.createElement("span",{className:"lake-icon lake-icon-underline"})))),a.a.createElement("div",{className:"text-format-li text-format-font-color"},Oe("字号"),a.a.createElement("div",{className:"lake-show-control-extra lake-diagrm-font-color-control-extra"},a.a.createElement(so,{disabled:o,trigger:["click"],value:h,onChange:function(e){return d.execCommand("fontSize",parseInt(e.target.value))},overlay:a.a.createElement(l.a,{"data-lake_prevent_click_unselect":!0,className:"lake-user-select-none text-format-font-size-menu",selectedKeys:[h&&h.toString()],onClick:function(e){var t=e.key;return d.execCommand("fontSize",parseInt(t))}},[12,14,16,18,22,24,32,36,48,64,92].map((function(e){return a.a.createElement(l.a.Item,{key:e},e===h&&a.a.createElement("span",{className:"lake-icon lake-icon-success"}),e,"px")}))),placement:"bottomRight"}))),a.a.createElement("div",{className:"text-format-li text-format-font-color"},Oe("文本颜色"),a.a.createElement("div",{className:"lake-show-control-extra lake-diagrm-font-color-control-extra"},a.a.createElement(to,{disabled:o,color:m,defaultColor:e.defaultColor,onSelect:te()((function(e){return d.execCommand("foreColor",e)}),16),palette:n.palette},a.a.createElement("div",{className:"lake-show-font-color",style:{backgroundColor:m}})))),a.a.createElement(p.a.Group,{className:"text-format-li text-format-text-align",disabled:o,defaultValue:"justifyLeft",value:uo[g]},a.a.createElement(p.a.Button,{value:"justifyLeft",onClick:function(){return d.execCommand("justifyLeft")}},a.a.createElement("span",{className:"lake-icon lake-icon-left"})),a.a.createElement(p.a.Button,{value:"justifyCenter",onClick:function(){return d.execCommand("justifyCenter")}},a.a.createElement("span",{className:"lake-icon lake-icon-center"})),a.a.createElement(p.a.Button,{value:"justifyRight",onClick:function(){return d.execCommand("justifyRight")}},a.a.createElement("span",{className:"lake-icon lake-icon-right"}))))}fo.defaultProps={defaultColor:"#262626"},fo.propTypes={defaultColor:i.a.string,selections:i.a.arrayOf(i.a.object).isRequired,onChange:i.a.func.isRequired,diagram:i.a.object.isRequired},fo.key="TextFormat",ya('/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-show-heading-control {\n  margin-bottom: 12px;\n}\n.lake-show-heading-control .ant-dropdown-trigger {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  height: 66px;\n  border: 1px solid #e8e8e8;\n  border-radius: 4px;\n  background: #ffffff;\n  padding: 16px;\n}\n.lake-show-heading-control.disabled .ant-dropdown-trigger {\n  background: #f5f5f5;\n  color: #BFBFBF;\n}\n.lake-show-heading-control.disabled [data-heading] {\n  color: #BFBFBF;\n}\n.lake-show-heading-control .ant-dropdown-menu-item,\n.lake-show-heading-menu .ant-dropdown-menu-item {\n  padding: 7px 16px;\n}\n.lake-show-heading-control [data-heading],\n.lake-show-heading-menu [data-heading] {\n  line-height: 1.35;\n}\n.lake-show-heading-control [data-heading="title"],\n.lake-show-heading-menu [data-heading="title"] {\n  font-size: 32px;\n  color: #262626;\n}\n.lake-show-heading-control [data-heading="title-small"],\n.lake-show-heading-menu [data-heading="title-small"] {\n  font-size: 26px;\n  color: #262626;\n}\n.lake-show-heading-control [data-heading="subtitle"],\n.lake-show-heading-menu [data-heading="subtitle"] {\n  font-size: 20px;\n  color: #262626;\n}\n.lake-show-heading-control [data-heading="body"],\n.lake-show-heading-menu [data-heading="body"] {\n  font-size: 16px;\n}\n');var po={title:{fontSize:92,label:Oe("大标题")},"title-small":{fontSize:64,label:Oe("小标题")},subtitle:{fontSize:48,label:Oe("副标题")},body:{fontSize:32,label:Oe("正文")}};function ho(e){var t=e.diagram,n=e.selections,o=Object(r.useState)({fontSize:32}),i=Y()(o,2),c=i[0],u=i[1],d=Object.keys(po).find((function(e){return c.fontSize===po[e].fontSize}))||"body",f=0===n.length||n.some((function(e){return e.locked})),p=t.contentEditorPlus;Object(r.useEffect)((function(){function e(e){var t=e.query;u(t)}return t&&p.on("querychange",e),function(){p.off("querychange",e)}}),[t]);var h=a.a.createElement(l.a,{className:"lake-show-heading-menu lake-user-select-none","data-lake_prevent_click_unselect":"true",onClick:function(e){var t=e.key;p.execCommand("fontSize",po[t].fontSize)}},Object.keys(po).map((function(e){return a.a.createElement(l.a.Item,{key:e,"data-heading":e},po[e].label)})));return a.a.createElement(Qa,{className:"lake-show-heading-control",disabled:f},a.a.createElement(s.a,{overlay:h,disabled:f,trigger:["click"]},a.a.createElement("div",null,a.a.createElement("span",{"data-heading":d},po[d].label),a.a.createElement("span",{className:"lake-icon lake-icon-dropdown-arrow"}))))}ho.propTypes={diagram:i.a.object,selections:i.a.array,onChange:i.a.func},ya(".lake-show-stroke-style-item {\n  width: 92px;\n  height: 32px;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.lake-show-stroke-style-selected {\n  line-height: 0;\n}\n.lake-show-stroke-style-selected .lake-show-stroke-style-selected-item {\n  width: 70px;\n  display: inline-block;\n}\n.lake-show-stroke-style-selected .lake-properties-stroke-style-dropdown-icon {\n  width: 10px;\n  height: 10px;\n  float: right;\n  margin-top: 11px;\n  margin-right: 10px;\n  color: #8c8c8c;\n}\n.lake-show-stroke-style-selected .lake-show-properties-stroke-style {\n  width: 100%;\n  height: 100%;\n}\n");var mo={none:"https://gw.alipayobjects.com/zos/bmw-prod/5e3dbea7-f3c3-418f-91de-cfbcb825343c.svg",dash:"https://gw.alipayobjects.com/zos/bmw-prod/3d7118e9-1bac-465d-acb9-cc0766ece25e.svg"};function go(e){var t=e.selections,n=e.path,r=0===t.length||t.some((function(e){return e.locked})),o=t.filter((function(e){return e.canStrokeStyle()})),i=Qa.get(o,n);return a.a.createElement(Qa,{className:"lake-show-properties-stroke-style",disabled:r,title:Oe("样式"),extra:a.a.createElement(s.a,{disabled:r,trigger:["click"],overlay:a.a.createElement(l.a,{"data-lake_prevent_click_unselect":!0,onClick:function(t){var r=t.key;e.onChange(n,"none"===r?null:r,o)}},a.a.createElement(l.a.Item,{className:"lake-show-stroke-style-item","test-id":"lake-show-stroke-style-item-none",key:"none",style:{backgroundImage:"url(".concat(mo.none,")")}}),a.a.createElement(l.a.Item,{className:"lake-show-stroke-style-item","test-id":"lake-show-stroke-style-item-dash",key:"dash",style:{backgroundImage:"url(".concat(mo.dash,")")}})),placement:"bottomRight"},a.a.createElement("div",{className:"lake-show-stroke-style-selected"},a.a.createElement("span",{className:"lake-show-stroke-style-item lake-show-stroke-style-selected-item",style:{backgroundImage:"url(".concat(mo[i||"none"],")")}}),a.a.createElement(oe.a,{className:"lake-properties-stroke-style-dropdown-icon",style:{color:"#8C8C8C",fontSize:"10px"}})))})}go.defaultProps={onChange:function(){},path:"stroke.style"},go.propTypes={selections:i.a.arrayOf(i.a.object).isRequired,onChange:i.a.func.isRequired,path:i.a.string.isRequired},go.key="StrokeStyleControl",ya("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-show-line-arrow-control .lake-show-control-body {\n  display: flex;\n  justify-content: space-between;\n}\n.lake-show-line-arrow-item {\n  width: 64px;\n  height: 32px;\n  background-repeat: no-repeat;\n  background-position: center;\n  margin-left: 4px;\n}\n.lake-show-line-arrow-selected {\n  line-height: 0;\n}\n.lake-show-line-arrow-selected .lake-show-line-arrow-selected-item {\n  width: 32px;\n  display: inline-block;\n}\n.lake-show-line-arrow-selected .lake-properties-line-arrow-dropdown-icon {\n  width: 10px;\n  height: 10px;\n  float: right;\n  margin-top: 11px;\n  margin-right: 10px;\n  color: #8c8c8c;\n}\n.lake-show-line-arrow-selected .lake-show-properties-line-arrow {\n  width: 100%;\n  height: 100%;\n}\n.lake-show-line-arrow-control-source,\n.lake-show-line-arrow-control-target {\n  display: flex;\n  align-items: center;\n  width: 50%;\n}\n.lake-show-line-arrow-control-source .lake-show-line-arrow-selected,\n.lake-show-line-arrow-control-target .lake-show-line-arrow-selected {\n  margin-left: 16px;\n  width: calc(100% - 64px);\n  border: 1px solid #e8e8e8;\n  border-radius: 4px;\n}\n");var vo={none:"https://gw.alipayobjects.com/zos/bmw-prod/d35645fb-5483-456f-93c4-20dec53881a3.svg",source_arrow:"https://gw.alipayobjects.com/zos/bmw-prod/951e32a3-46a2-47b3-90ce-701766bdfba9.svg",target_arrow:"https://gw.alipayobjects.com/zos/bmw-prod/a59b0a3e-915c-45d7-a6a4-17946bab9e88.svg"};function yo(e){var t=e.selections,n=0===t.length,r=t.filter((function(e){return e.isLine})),o={source:Oe("起点"),target:Oe("终点")};return a.a.createElement(Qa,{className:"lake-show-line-arrow-control",disabled:n},Object.keys(o).map((function(t){var i="".concat(t,".marker"),c=Qa.get(r,i),u="none";return"multiValue"===c?u=null:"arrow"===c&&(u="".concat(t,"_arrow")),a.a.createElement("div",{className:"lake-show-line-arrow-control-".concat(t),key:t},o[t],a.a.createElement(s.a,{disabled:n,trigger:["click"],overlay:a.a.createElement(l.a,{"data-lake_prevent_click_unselect":!0,onClick:function(t){var n=t.key;e.onChange(i,"none"===n?null:n,r)}},a.a.createElement(l.a.Item,{className:"lake-show-line-arrow-item","test-id":"lake-show-line-arrow-item-none",key:"none",style:{backgroundImage:"url(".concat(vo.none,")")}}),a.a.createElement(l.a.Item,{className:"lake-show-line-arrow-item","test-id":"lake-show-line-arrow-item-arrow",key:"arrow",style:{backgroundImage:"url(".concat(vo["".concat(t,"_arrow")],")")}})),placement:"bottomRight"},a.a.createElement("div",{className:w()("lake-show-line-arrow-selected")},a.a.createElement("span",{className:w()("lake-show-line-arrow-item","lake-show-line-arrow-selected-item",{"lake-diagam-multi-properties-selection":"multiValue"===c}),style:u?{backgroundImage:"url(".concat(vo[u],")")}:null}),a.a.createElement(oe.a,{className:"lake-properties-line-arrow-dropdown-icon",style:{color:"#8C8C8C",fontSize:"10px"}}))))})))}function bo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bo(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}yo.defaultProps={onChange:function(){}},yo.propTypes={selections:i.a.arrayOf(i.a.object).isRequired,onChange:i.a.func.isRequired},yo.key="LineArrowControl";var wo=E.n.Group,xo=E.n.Rect,_o=E.n.Title,Eo=function(e){P()(n,wo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(e){var r;R()(this,n);var a=ko({width:32,height:32},e),o=a.width,i=a.height,c=e.matrix||[1,0,0,0,1,0,0,0,1];o>0&&(c[0]=o/32),i>0&&(c[4]=i/32),r=t.call(this,ko(ko({},e),{},{matrix:c}));var l=e.stencil,s=e.title,u=l.name,d=l.thumb,f=new xo({x:0,y:0,width:o,height:i,rx:2,fill:"#fff",stroke:"none"});return r.add(new _o({title:s})),r.add(f),d.forEach((function(e){r.add(wt(e))})),F()(r).rendererElement.dataset.name=u,r.css({cursor:"pointer"}),r}return O()(n)}();var Co=E.n.Group,Oo=E.n.Text,So=function(e){P()(n,Co);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(e){var r;R()(this,n),r=t.call(this,e);var a=e.key,o=e.title,i=e.shapes,c=8,l=8;if(o){var s=new Oo({text:o,matrix:[1,0,0,0,1,0,12,28,1],fill:"#262626"});r.add(s),l+=32}return i.forEach((function(e){var t=e.name,n=e.title,a=je.find((function(e){return e.name===t}));c>=200&&(c=8,l+=32);var o=new Eo({stencil:a,matrix:[1,0,0,0,1,0,c,l,1],stroke:"#595959",fill:"#ffffff",title:n});r.add(o),c+=32})),r.rendererElement.dataset.group=a,r}return O()(n)}();function Ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ro(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ro(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Po=E.n.Group,Ao=E.n.Rect,To=[{name:"rect",title:Oe("矩形")},{name:"rounded-rect",title:Oe("圆角矩形")},{name:"circle",title:Oe("圆形")},{name:"triangle",title:Oe("三角形")},{name:"diamond",title:Oe("菱形")},{name:"comment-2",title:Oe("标注 2")},{name:"parallelogram",title:Oe("平行四边形")},{name:"star",title:Oe("星形")},{name:"arrow-1",title:Oe("左箭头")},{name:"arrow-2",title:Oe("右箭头")},{name:"arrow-3",title:Oe("双向箭头")},{name:"polygon",title:Oe("五边形")}],Do=[{name:"process",title:Oe("过程")},{name:"start-end",title:Oe("起止符")},{name:"decision",title:Oe("决策")},{name:"collate",title:Oe("整理")},{name:"data",title:Oe("数据")},{name:"database",title:Oe("数据库")},{name:"delay",title:Oe("延迟")},{name:"display",title:Oe("显示")},{name:"document",title:Oe("文档")},{name:"internal-storage",title:Oe("内部存储")},{name:"loop-limit",title:Oe("循环起止符")},{name:"manual-input",title:Oe("手动输入")},{name:"manual-loop",title:Oe("手动循环")},{name:"merge",title:Oe("合并")},{name:"multi-document",title:Oe("多文档")},{name:"off-page",title:Oe("页外连接符")},{name:"connector",title:Oe("连接器")},{name:"summing-junction",title:Oe("汇总连接")},{name:"subroutine",title:Oe("预定义流程")},{name:"preparation",title:Oe("准备")},{name:"sort",title:Oe("排序")},{name:"stored-data",title:Oe("存储数据")},{name:"or",title:Oe("或者")},{name:"comment",title:Oe("标注")}],Mo={basic:{title:Oe("基础图形"),shapes:To,height:100},flowchart:{title:Oe("流程图图形"),shapes:Do,height:178}},No=function(e){P()(n,Po);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(e){var r;R()(this,n),e=jo({groups:["flowchart"]},e),r=t.call(this,e);var a=0,o=e.groups,i=o.map((function(e){var t=Mo[e],n=o.length>1,r=a;return a+=n?t.height:t.height-34,new So(jo(jo({},t),{},{key:e,title:n?t.title:"",matrix:[1,0,0,0,1,0,0,r,1]}))}));return[new Ao({x:0,y:0,width:208,height:a,rx:4,stroke:"#e9e9e9",fill:"#ffffff"})].concat(i).forEach((function(e){return r.add(e)})),r.height=a,r.on("mouseover",_()((function(e){for(var t=e.target.closest("[data-name]"),n=r.rendererElement.querySelectorAll("[data-name]"),a=0;a<n.length;a++){var o=n[a],i=o.querySelector("path");i&&i.setAttribute("fill",o===t?"#f5f5f5":"#ffffff")}}),16)),r.on("click",(function(e){var t=e.target.closest("[data-name]");t&&r.emit("shape:select",{shape:t.dataset.name,group:t.closest("[data-group]").dataset.group})})),r}return O()(n)}();function Lo(e){var t=Object(r.useRef)(),n=e.groups,o=e.shapeSelect||Object(r.useMemo)((function(){return new No({groups:n})}),[n]);return Object(r.useEffect)((function(){t.current.appendChild(o.rendererElement),t.current.setAttribute("height",o.height)}),[o]),Object(r.useEffect)((function(){function t(t){var n=t.shape,r=t.group;e.onSelect&&e.onSelect({key:n,group:r})}return o.on("shape:select",t),function(){o.off("shape:select",t)}}),[e.onSelect]),a.a.createElement("svg",{className:w()(e.className,"lake-prevent-card-activated"),"data-lake_prevent_click_unselect":"true",ref:t,onClick:function(t){e.onClick&&e.onClick(t)},width:208,style:{boxShadow:"0 1px 2px -2px rgb(0 0 0 / 8%), 0 2px 6px 0 rgb(0 0 0 / 4%), 0 4px 8px 1px rgb(0 0 0 / 2%)",border:"1px solid #e9e9e9"},"data-testid":"shape-overlay"})}function Io(e){var t=Object(r.useRef)(),n=e.width,o=e.height,i=e.shape,c=i&&je.find((function(e){return e.name===i}));return Object(r.useEffect)((function(){if(t.current&&c){var e=new Eo({stencil:c,width:n,height:o}).rendererElement;e.setAttribute("stroke","#595959"),e.setAttribute("fill","#ffffff"),Array.from(t.current.children,(function(e){return e.remove()})),t.current.appendChild(e)}}),[t,n,o,c]),c?a.a.createElement("svg",{ref:t,width:n,height:o,viewBox:[0,0,n,o].join(" ")}):null}function Bo(e){var t=e.selections,n=0===t.length,r=t.filter((function(e){return e.isVertex})),o=Qa.get(r,e.path);return a.a.createElement(Qa,{className:"lake-show-vertex-shape-control",disabled:n,title:Oe("形状"),extra:a.a.createElement(s.a,{disabled:n,overlay:a.a.createElement(Lo,{onSelect:function(t){var n=t.key;e.onChange(e.path,n,r)},groups:e.groups}),placement:"bottomRight",trigger:["click"]},a.a.createElement(f.a,null,o&&a.a.createElement(Io,{shape:o,width:40,height:40})))})}function zo(e){var t=e.selections,n=0===t.length,r=t.filter((function(e){return e.isEdge})),o=Qa.get(r,"shape");return a.a.createElement(Qa,{className:"lake-show-edge-shape-control lake-show-flowchart-properties-edge-shape",disabled:n,title:Oe("类型"),extra:a.a.createElement(p.a.Group,{disabled:n,value:o,onChange:function(t){e.onChange("shape",t.target.value,r)}},a.a.createElement(p.a.Button,{value:"elbow"},a.a.createElement("span",{className:"lake-icon lake-icon-elbow-line"})),a.a.createElement(p.a.Button,{value:"straight"},a.a.createElement("span",{className:"lake-icon lake-icon-straight-line"})))})}function Fo(e){var t=e.diagram;return a.a.createElement("div",{className:"lake-show-properties-alignment"},a.a.createElement(p.a.Group,{onChange:function(e){t.command.execute(e.target.value)},value:null},a.a.createElement(p.a.Button,{value:"AlignLeft",disabled:!t.command.enable("AlignLeft")},a.a.createElement("span",{className:"lake-icon lake-icon-align-left"})),a.a.createElement(p.a.Button,{value:"AlignHCenter",disabled:!t.command.enable("AlignHCenter")},a.a.createElement("span",{className:"lake-icon lake-icon-align-h-center"})),a.a.createElement(p.a.Button,{value:"AlignRight",disabled:!t.command.enable("AlignRight")},a.a.createElement("span",{className:"lake-icon lake-icon-align-right"})),a.a.createElement(p.a.Button,{value:"AlignTop",disabled:!t.command.enable("AlignTop")},a.a.createElement("span",{className:"lake-icon lake-icon-align-top"})),a.a.createElement(p.a.Button,{value:"AlignVCenter",disabled:!t.command.enable("AlignVCenter")},a.a.createElement("span",{className:"lake-icon lake-icon-align-v-center"})),a.a.createElement(p.a.Button,{value:"AlignBottom",disabled:!t.command.enable("AlignBottom")},a.a.createElement("span",{className:"lake-icon lake-icon-align-bottom"}))))}function Uo(e){var t=e.diagram,n=e.selections,r=t.getCells(),o=n.some((function(e){return e.locked}))||1===n.length&&n[0].getZIndex()===r.length-1,i=n.some((function(e){return e.locked}))||1===n.length&&0===n[0].getZIndex();function c(r){e.onChange((function(){t.command.execute(r.target.value,{cells:n})}))}return a.a.createElement("div",{className:"lake-show-properties-z-index"},a.a.createElement("div",{className:"lake-show-properties-z-index-btn-group"},a.a.createElement(p.a.Group,{onChange:c,value:null},a.a.createElement(h.a,{title:Oe("置顶")},a.a.createElement(p.a.Button,{value:"ToFront",disabled:o},a.a.createElement("span",{className:"lake-icon lake-icon-to-front"}))),a.a.createElement(h.a,{title:Oe("置底")},a.a.createElement(p.a.Button,{value:"ToBack",disabled:i},a.a.createElement("span",{className:"lake-icon lake-icon-to-back"}))))),a.a.createElement("div",{className:"lake-show-properties-z-index-btn-group"},a.a.createElement(p.a.Group,{onChange:c,value:null},a.a.createElement(h.a,{title:Oe("上移")},a.a.createElement(p.a.Button,{value:"Forward",disabled:o},a.a.createElement("span",{className:"lake-icon lake-icon-forward"}))),a.a.createElement(h.a,{title:Oe("下移")},a.a.createElement(p.a.Button,{value:"Backward",disabled:i},a.a.createElement("span",{className:"lake-icon lake-icon-backward"}))))))}function Vo(e){var t=e.selections,n=0===t.length||t.some((function(e){return e.locked})),r={width:Oe("宽"),height:Oe("高")};function o(t,n){n>=1&&e.onChange(t,n)}return a.a.createElement(Qa,{className:"lake-show-size-control",disabled:n},Object.keys(r).map((function(e){return a.a.createElement("div",{className:"lake-show-size-control-".concat(e),key:e},r[e],a.a.createElement(io,{disabled:n,min:1,max:2560,value:Math.round(Qa.get(t,e)),onBlur:function(t){return o(e,parseFloat(t.target.value))},onPressEnter:function(t){return o(e,parseFloat(t.target.value))},onStep:function(t){return o(e,t)}}))})))}function qo(e){var t=e.path,n=e.selections,r=0===n.length||n.some((function(e){return e.locked}));return a.a.createElement(Qa,{className:"lake-show-ratio-control",disabled:r},a.a.createElement(m.a,{disabled:r,checked:Qa.get(n,t),onChange:function(n){e.onChange(t,n.target.checked)}},Oe("保持宽高比")))}function Ho(e){var t=e.selections,n=e.onChange,r=0===t.length||t.some((function(e){return e.locked}));return a.a.createElement(Qa,{className:"lake-show-reset-size-control",disabled:r},a.a.createElement(f.a,{disabled:r,onClick:function(){var e=t[0];e.isImage?n({width:e.image.naturalWidth,height:e.image.naturalHeight}):e.isVertex&&n({width:e.stencil.width,height:e.stencil.height})}},Oe("原始大小")))}function Wo(e){var t=e.selections,n=0===t.length||t.some((function(e){return e.locked}));function r(t,n){e.onChange(t,n)}return a.a.createElement(Qa,{className:"lake-show-position-control",disabled:n},["x","y"].map((function(e){return a.a.createElement("div",{className:"lake-show-position-control-".concat(e),key:e},e.toUpperCase(),a.a.createElement(io,{disabled:n,value:Math.round(Qa.get(t,e)),onBlur:function(t){return r(e,parseFloat(t.target.value))},onPressEnter:function(t){return r(e,parseFloat(t.target.value))},onStep:function(t){return r(e,t)}}))})))}function Yo(e){return""===e?e:"".concat(Math.round(e),"°")}function Go(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.replace("°","");return""===t?t:parseInt(t,10)%360||0}function Xo(e){var t=e.selections,n=0===t.length||t.some((function(e){return null==e.rotate}))||t.some((function(e){return e.locked}));function r(t){isFinite(t)&&e.onChange("rotate",t)}function o(e){r(parseFloat(e.target.value))}return a.a.createElement(Qa,{className:"lake-show-rotate-control",disabled:n},Oe("角度"),a.a.createElement(io,{disabled:n,min:0,max:360,formatter:Yo,parser:Go,value:Qa.get(t,"rotate"),onBlur:o,onPressEnter:o,onStep:r}))}function Ko(e){return""===e?e:"".concat(Math.round(100*e),"%")}function Zo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.replace("%","");return""===t?t:Math.min(Math.max(parseFloat(t)/100||0,0),1)}function $o(e){var t=e.selections,n=0===t.length||t.some((function(e){return e.locked})),o=parseFloat(Qa.get(t,"opacity"))||1,i=_()((function(t){isFinite(t)&&e.onChange("opacity",t)}),16);function c(e){i(Zo(e.target.value))}return Object(r.useEffect)((function(){return function(){return i.cancel()}})),a.a.createElement(Qa,{className:"lake-show-opacity-control",disabled:n},a.a.createElement(g.a,{disabled:n,min:0,max:1,step:.01,tooltipVisible:!1,value:o,onChange:i}),a.a.createElement(io,{disabled:n,min:0,max:1,step:.01,value:o,formatter:Ko,parser:Zo,onBlur:c,onPressEnter:c,onStep:i}))}function Qo(e){var t=e.selections,n=e.diagram,r=t.filter((function(e){return e.canArrange()})).length<3;return a.a.createElement("div",{className:"lake-show-properties-distribute"},a.a.createElement(p.a.Group,{onChange:function(e){n.command.execute(e.target.value)},value:null},a.a.createElement(p.a.Button,{value:"DistributeHorizontally",disabled:r},a.a.createElement("span",{className:"lake-icon lake-icon-horizontally"})),a.a.createElement(p.a.Button,{value:"DistributeVertically",disabled:r},a.a.createElement("span",{className:"lake-icon lake-icon-vertically"}))),a.a.createElement("div",{className:"lake-show-properties-distribute-label-group"},a.a.createElement("span",{className:"lake-show-properties-distribute-label"},Oe("水平分布")),a.a.createElement("span",{className:"lake-show-properties-distribute-label"},Oe("垂直分布"))))}function Jo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ei(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jo(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Lo.defaultProps={groups:["flowchart"],shapeSelect:null},Lo.propTypes={onClick:i.a.func,onSelect:i.a.func,className:i.a.string,shapeSelect:i.a.object,groups:i.a.arrayOf(i.a.string)},ya("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-show-vertex-shape-control .lake-show-control-extra {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.lake-show-vertex-shape-control .lake-show-control-extra .ant-btn {\n  background: none;\n  border: none;\n  height: 40px;\n  width: 100%;\n  padding: 0;\n}\n"),Io.propTypes={width:i.a.number,height:i.a.number,shape:i.a.string},Bo.defaultProps={path:"shape",groups:["flowchart"],onChange:function(){}},Bo.propTypes={selections:i.a.arrayOf(i.a.object).isRequired,path:i.a.string.isRequired,groups:i.a.array,onChange:i.a.func.isRequired},Bo.key="VertexShapeControl",ya(".lake-show-flowchart-properties-edge-shape .lake-show-control-extra {\n  border: none;\n  background-color: rgba(255, 255, 255, 0);\n}\n.lake-show-flowchart-properties-edge-shape .lake-show-control-extra button {\n  padding: 0 13px;\n}\n"),zo.defaultProps={path:"shape",onChange:function(){}},zo.propTypes={selections:i.a.arrayOf(i.a.object).isRequired,onChange:i.a.func.isRequired,diagram:i.a.object},zo.key="EdgeShapeControl",ya(".lake-show-properties-alignment {\n  margin-top: 8px;\n  margin-bottom: 16px;\n}\n.lake-show-properties-alignment .ant-radio-group {\n  display: flex;\n}\n.lake-show-properties-alignment .ant-radio-group label {\n  flex-grow: 1;\n  padding: 0;\n  text-align: center;\n}\n"),Fo.defaultProps={},Fo.propTypes={diagram:i.a.object.isRequired,selections:i.a.arrayOf(i.a.object).isRequired},Fo.key="AlignControl",ya(".lake-show-properties-z-index {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 8px;\n}\n.lake-show-properties-z-index .ant-radio-button-wrapper {\n  padding: 0 14px;\n}\n.lake-show-properties-z-index .lake-show-properties-z-index-label {\n  display: inline-block;\n  width: 50%;\n  text-align: center;\n}\n.lake-show-properties-z-index .lake-show-properties-z-index-btn-group {\n  width: calc(50% - 4px);\n}\n.lake-show-properties-z-index .lake-show-properties-z-index-btn-group .ant-radio-group {\n  display: flex;\n}\n.lake-show-properties-z-index .lake-show-properties-z-index-btn-group .ant-radio-group label {\n  text-align: center;\n  flex-grow: 1;\n  flex-shrink: 1;\n}\n"),Uo.defaultProps={onChange:function(){}},Uo.propTypes={onChange:i.a.func.isRequired,diagram:i.a.object.isRequired,selections:i.a.arrayOf(i.a.object).isRequired},Uo.key="ZIndexControl",ya(".lake-show-size-control .lake-show-control-body {\n  display: flex;\n  justify-content: space-between;\n}\n.lake-show-size-control-width,\n.lake-show-size-control-height {\n  display: flex;\n  align-items: center;\n  width: calc(50% - 8px);\n}\n.lake-show-size-control-width .ant-input-number,\n.lake-show-size-control-height .ant-input-number {\n  margin-left: 16px;\n  width: calc(100% - 32px);\n}\n"),Vo.propTypes={selections:i.a.array,onChange:i.a.func},qo.defaultProps={path:"constraints.proportion"},qo.propTypes={path:i.a.string,selections:i.a.array,onChange:i.a.func},ya(".lake-show-reset-size-control .lake-show-control-body {\n  margin-top: 12px;\n}\n.lake-show-reset-size-control .ant-btn {\n  width: 100%;\n}\n"),Ho.propTypes={selections:i.a.array,onChange:i.a.func},ya(".lake-show-position-control .lake-show-control-body {\n  display: flex;\n  justify-content: space-between;\n}\n.lake-show-position-control-x,\n.lake-show-position-control-y {\n  display: flex;\n  align-items: center;\n  width: calc(50% - 8px);\n}\n.lake-show-position-control-x .ant-input-number,\n.lake-show-position-control-y .ant-input-number {\n  margin-left: 16px;\n  width: calc(100% - 32px);\n}\n"),Wo.propTypes={selections:i.a.array,onChange:i.a.func},ya(".lake-show-rotate-control .lake-show-control-body {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n"),Xo.propTypes={selections:i.a.arrayOf(i.a.object),onChange:i.a.func},ya(".lake-show-opacity-control .lake-show-control-body {\n  display: flex;\n  justify-content: space-between;\n}\n.lake-show-opacity-control .lake-show-control-body .ant-slider {\n  flex: 1 0 auto;\n  margin-left: 0;\n  margin-right: 16px;\n}\n"),$o.propTypes={selections:i.a.arrayOf(i.a.object),onChange:i.a.func},ya(".lake-show-properties-distribute {\n  margin-bottom: 8px;\n}\n.lake-show-properties-distribute .ant-radio-group {\n  width: 100%;\n}\n.lake-show-properties-distribute .ant-radio-button-wrapper {\n  width: 50%;\n  text-align: center;\n}\n.lake-show-properties-distribute-label-group {\n  width: 100%;\n}\n.lake-show-properties-distribute-label {\n  display: inline-block;\n  width: 50%;\n  text-align: center;\n}\n"),Qo.propTypes={selections:i.a.arrayOf(i.a.object),diagram:i.a.object},ya("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n/**\n * lake/editor 的卡片容器实现方式会导致文档样式影响卡片编辑器样式\n */\n.lake-show-panel-properties ~ div .ant-dropdown-menu-item {\n  margin-left: 0;\n  list-style-type: none;\n}\n.lake-show-panel-properties {\n  background-color: #fafafa;\n  border-left: 1px solid #e8e8e8;\n  height: 100%;\n  width: 100%;\n  min-width: 212px;\n  max-width: 286px;\n  cursor: default;\n  user-select: none;\n}\n.lake-show-panel-properties .lake-show-panel-menu-hide-header {\n  margin-top: 8px;\n}\n.lake-show-panel-properties .lake-show-panel-menu-hide-header .ant-collapse-header {\n  display: none;\n}\n.lake-show-panel-properties .lake-diagam-multi-properties-selection {\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/8c02d0c7-9749-4078-b865-6084959df78f.svg);\n}\n.lake-show-panel-properties .lake-show-panel-body {\n  height: 100%;\n}\n.lake-show-panel-properties .lake-show-panel-body .ant-tabs {\n  height: 100%;\n}\n.lake-show-panel-properties .lake-show-panel-body .ant-tabs .ant-tabs-nav {\n  width: 100%;\n  margin-bottom: 0px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.09);\n}\n.lake-show-panel-properties .lake-show-panel-body .ant-tabs .ant-tabs-nav .ant-tabs-nav-list {\n  width: 100%;\n}\n.lake-show-panel-properties .lake-show-panel-body .ant-tabs .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab {\n  flex-grow: 1;\n  margin: 0 2px;\n  display: inline-block;\n  text-align: center;\n  border: none;\n  color: #8C8C8C;\n  border-radius: 0;\n  background-color: rgba(0, 0, 0, 0);\n}\n.lake-show-panel-properties .lake-show-panel-body .ant-tabs .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab:hover {\n  color: #262626;\n}\n.lake-show-panel-properties .lake-show-panel-body .ant-tabs .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn {\n  color: #262626;\n  font-weight: 400;\n}\n.lake-show-panel-properties .lake-show-panel-body .ant-tabs .ant-tabs-content-holder {\n  overflow: auto;\n  height: calc(100% - 38px);\n}\n.lake-show-panel-properties .lake-show-panel-body .ant-tabs-bar {\n  margin: 0;\n}\n.lake-show-panel-properties .lake-show-panel-body .ant-collapse {\n  border: none;\n  background-color: rgba(0, 0, 0, 0);\n}\n.lake-show-panel-properties .lake-show-panel-body .ant-collapse .ant-collapse-header {\n  padding: 0 16px;\n  margin: 8px 0;\n}\n.lake-show-panel-properties .lake-show-panel-body .ant-collapse .ant-collapse-header .anticon {\n  padding: 0;\n  margin-right: 8px;\n  top: 6px;\n}\n.lake-show-panel-properties .lake-show-panel-body .ant-collapse .ant-collapse-item {\n  padding-top: 8px;\n  border-bottom: none;\n}\n.lake-show-panel-properties .lake-show-panel-body .ant-collapse .ant-collapse-item .ant-collapse-content {\n  border: none;\n  background: none;\n}\n.lake-show-panel-properties .lake-show-panel-body .ant-collapse .ant-collapse-item .ant-collapse-content .ant-collapse-content-box {\n  margin: 0px 16px;\n  padding: 0px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.09);\n}\n.lake-show-panel-properties .lake-show-panel-body .ant-collapse .ant-collapse-item:last-child .ant-collapse-content-box {\n  border-bottom: none;\n}\n.lake-show-panel-properties .lake-show-panel-body .ant-collapse .ant-collapse-item:last-child {\n  border-bottom: none;\n}\n.lake-show-panel-properties .lake-show-panel-body-empty {\n  height: 100%;\n  position: relative;\n}\n.lake-show-panel-properties .lake-show-panel-body-empty .lake-show-background-wrapper {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  margin: auto;\n  padding-bottom: 96px;\n  width: 200px;\n  height: 140px;\n  text-align: center;\n  color: #BFBFBF;\n  line-height: 24px;\n}\n.lake-show-panel-properties .lake-show-panel-body-empty .lake-show-background-wrapper p {\n  margin-bottom: 0;\n}\n.lake-show-control {\n  margin-bottom: 8px;\n}\n.lake-show-control.disabled .lake-show-control-title {\n  color: #BFBFBF;\n}\n.lake-show-control.disabled .lake-show-control-extra {\n  border-color: #e8e8e8;\n  background: none;\n}\n.lake-show-control.disabled .lake-show-control-extra > svg {\n  display: none;\n}\n.lake-show-control-title {\n  color: #595959;\n  letter-spacing: 0;\n}\n.lake-show-control-head {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.lake-show-control-extra {\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  width: 92px;\n  min-height: 32px;\n  overflow: hidden;\n  background: #ffffff;\n  cursor: pointer;\n}\n.lake-show-control-extra > svg {\n  display: block;\n}\n.lake-show-control-body .ant-checkbox + span {\n  letter-spacing: 0;\n}\n.lake-show-panel-head {\n  border-bottom: 1px solid #e8e8e8;\n  margin-bottom: 12px;\n  padding-bottom: 4px;\n}\n.lake-show-panel-head-title {\n  color: #262626;\n  font-size: 14px;\n  font-weight: 500;\n}\n");var ti=v.a.TabPane;function ni(e,t){var n="object"===ue()(e)?e:L()({},e,t),r={},a=function(e){e.split(".").reduce((function(t,r,a,o){return t[r]=a+1===o.length?n[e]:{}}),r)};for(var o in n)a(o);return r}function ri(e){var t,n,o,i=e.diagram,c=e.menus,l=e.tabs,s=e.emptyImg,u=e.className,d=Object(r.useState)(e.selections||i.selector.selections.concat([])),f=Y()(d,2),p=f[0],h=f[1],m=Object(r.useState)(null),g=Y()(m,2),b=g[0],k=g[1];function x(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;return"function"==typeof t?(t(),void h($()(p))):e.onChange?e.onChange(ni(t,n),r):(i.command.execute("Update",{id:r,model:ni(t,n),autoSelect:!1}),void h($()(p)))}return Object(r.useEffect)((function(){Array.isArray(e.selections)&&h(e.selections)}),[e.selections]),a.a.createElement("div",{className:w()("lake-show-panel lake-show-panel-properties",u),"data-lake_prevent_click_unselect":"true"},p.length>0?(t=function(e,t,n){var r={},a=[];return e.forEach((function(e,t){var n=e.name,a=e.key;r[a]={name:n,menus:[],index:t,key:a}})),t.forEach((function(e){n.length>0&&e.condition(n)&&(r[e.tabKey].menus.push(e),a.push(e.name))})),Object.values(r).filter((function(e){return e.menus.length>0})).sort((function(e,t){return e.index-t.index}))}(l,c,p),n=c.map((function(e){return e.name})),o=t.map((function(e){return e.key})),a.a.createElement("div",{className:"lake-show-panel-body"},a.a.createElement(v.a,{type:"card",activeKey:b&&-1!==o.indexOf(b)?b:p.every((function(e){return e.isText}))?"text":t[0].key,onChange:function(e){k(e)}},t.map((function(e){var t=e.name,r=e.menus,o=e.key;return a.a.createElement(ti,{tab:t,key:o},a.a.createElement(y.a,{defaultActiveKey:n,expandIcon:function(e){return e.isActive?a.a.createElement(oe.a,{style:{color:"#595959"}}):a.a.createElement(ie.a,{style:{color:"#595959"}})}},r.map((function(e){return a.a.createElement(y.a.Panel,{header:e.name,key:e.name,className:!0===e.hideHeader?"lake-show-panel-menu-hide-header":""},e.controls.map((function(e,t){return a.a.createElement(e.Control,ei(ei({},e.props),{},{key:t,path:e.path,title:e.title,selections:p,diagram:i,onChange:x}))})))}))))}))))):a.a.createElement("div",{className:"lake-show-panel-body lake-show-panel-body-empty"},a.a.createElement("div",{className:"lake-show-background-wrapper"},a.a.createElement("img",{src:s}),a.a.createElement("p",null,Oe("点击选中元素")),a.a.createElement("p",null,Oe("可设置颜色、布局、文字等样式")))))}function ai(e){var t=e.diagram,n=e.selections,r={tabs:[{name:Oe("样式"),key:"style"},{name:Oe("文本"),key:"text"},{name:Oe("排列"),key:"arrangement"}],menus:[{name:Oe("填充"),tabKey:"style",condition:function(e){return e.some((function(e){return e.isFlowchart}))},controls:[{path:"shape",props:{groups:["basic","flowchart"]},Control:Bo},{path:"fill.color",Control:no}]},{name:Oe("线条/边框"),tabKey:"style",condition:function(e){return e.some((function(e){return e.isVertex}))&&e.some((function(e){return e.isEdge}))},controls:[{path:"stroke.color",Control:ro},{path:"stroke.width",Control:co},{Control:zo},{Control:yo}]},{name:Oe("线条"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isEdge}))},controls:[{path:"stroke.color",Control:ro},{path:"stroke.width",Control:co},{Control:zo},{Control:go},{Control:yo}]},{name:Oe("边框"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isVertex}))},controls:[{path:"stroke.color",Control:ro},{path:"stroke.width",Control:co},{Control:go}]},{name:Oe("不透明度"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return null!=e.opacity}))},controls:[{Control:$o}]},{name:Oe("文本"),tabKey:"text",condition:function(e){return e.length>0&&e.some((function(e){return e.isVertex}))&&!e.some((function(e){return e.isImage}))},controls:[{Control:ho},{Control:fo}]},{name:Oe("排列"),tabKey:"arrangement",condition:function(e){return e.length>0},controls:[{Control:Fo},{Control:Qo},{Control:Uo}]},{name:Oe("大小"),tabKey:"arrangement",condition:function(e){return e.length>0&&e.every((function(e){return e.isVertex}))},controls:[{Control:Vo},{Control:qo},{Control:Ho}]},{name:Oe("位置"),tabKey:"arrangement",condition:function(e){return e.length>0&&e.every((function(e){return e.isVertex}))},controls:[{Control:Wo}]},{name:Oe("旋转"),tabKey:"arrangement",condition:function(e){return e.length>0&&e.every((function(e){return null!=e.rotate}))},controls:[{Control:Xo}]}],diagram:t,emptyImg:"https://gw.alipayobjects.com/zos/bmw-prod/209ef531-e33b-4e55-8273-5b56b6df44be.svg",selections:n};return a.a.createElement(ri,r)}function oi(e){var t=e.diagram,n=e.selections,r=e.onChange,o=e.isPPT,i=void 0!==o&&o;if(n.every((function(e){return e.isCell})))return a.a.createElement(ai,{diagram:t,selections:n});var c={tabs:[{name:Oe("幻灯片布局"),key:"layout"}],menus:[{name:Oe("背景"),tabKey:"layout",condition:function(){return!0},controls:[{path:"fill.color",title:Oe("背景颜色"),Control:no}]}],diagram:t,selections:n,onChange:r,isPPT:i};return a.a.createElement(ri,c)}function ii(e){var t=e.viewModel,n=t.diagram,r=t.model,o=t.selector,i=t.state,c=t.execCommand,l=i.propertiesVisible,s=w()("lake-show-properties");return l?a.a.createElement("div",{className:s,"data-lake_prevent_click_unselect":!0},n&&a.a.createElement(oi,{selections:o.selections,diagram:n,onChange:function(e){var t=r.findSelections(!0);c("updateShow",t,e)},isPPT:!0})):null}ri.defaultProps={diagram:null,menus:null,tabs:null,emptyImg:"",className:""},ri.propTypes={diagram:i.a.object,menus:i.a.array,tabs:i.a.array,emptyImg:i.a.string,selections:i.a.arrayOf(i.a.object),onChange:i.a.func,className:i.a.string},ai.propTypes={diagram:i.a.object,selections:i.a.arrayOf(i.a.object)},oi.defaultProps={diagram:null},oi.propTypes={diagram:i.a.object,selections:i.a.arrayOf(i.a.object),onChange:i.a.func,isPPT:i.a.bool},ya("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-show-properties .lake-diagram-panel-properties {\n  border-left: none;\n}\n.lake-show-properties .lake-diagram-panel-body {\n  height: 100%;\n}\n.lake-show-properties .ant-tabs {\n  height: 100%;\n}\n.lake-show-properties .ant-tabs-content {\n  height: 100%;\n  overflow: auto;\n}\n.lake-show-properties .ant-tabs-tabpane > .ant-collapse {\n  padding-bottom: 100px;\n}\n"),ii.propTypes={viewModel:i.a.shape({diagram:i.a.object,model:i.a.shape({activeShow:i.a.object}),selector:i.a.shape({selections:i.a.arrayOf(i.a.object)}),state:i.a.shape({propertiesVisible:i.a.bool}),execCommand:i.a.func})};var ci=[.25,.5,.75,1,1.25,1.5,2,3,4];function li(e){var t=e.zoom,n=e.onChange,r=a.a.createElement(l.a,{onClick:function(e){var t=e.key;n(parseFloat(t))}},ci.map((function(e){return a.a.createElement(l.a.Item,{key:e},"".concat(100*e,"%"))})));return a.a.createElement("div",{className:"lake-show-magnifier"},a.a.createElement(h.a,{placement:"top",title:Oe("显示最佳比例")},a.a.createElement("button",{onClick:function(){return n(null)}},a.a.createElement("span",{className:"lake-icon lake-icon-zoom-to-fit"}))),a.a.createElement("button",{onClick:function(){for(var e=ci.length-1;e>=0;e--){var r=ci[e];if(r<t){n(r);break}}},disabled:t<=ci[0]},a.a.createElement(ce.a,null)),a.a.createElement(s.a,{overlay:r,trigger:["click"],placement:"topCenter"},a.a.createElement("button",null,a.a.createElement("span",{className:"lake-show-magnifier-current"},"".concat(Math.round(100*t),"%")))),a.a.createElement("button",{onClick:function(){for(var e=0;e<=ci.length;e++){var r=ci[e];if(r>t){n(r);break}}},disabled:t>=ci[ci.length-1]},a.a.createElement(le.a,null)))}function si(e){var t=e.viewModel,n=t.diagram,r=t.model,o=t.execCommand,i=r.shows,c={current:r.activeIndex+1,total:i.length||1};return a.a.createElement("div",{className:"lake-show-status"},a.a.createElement("div",{className:"lake-show-pagination"},Oe("第 {current} 页 / 共 {total} 页",c)),a.a.createElement(li,{zoom:n&&n.viewport.zoom||1,onChange:function(e){return o("setViewport",e)}}))}function ui(e){var t=e.viewModel,n=t.diagram,r=t.state,o=t.execCommand,i=r.diagramContextMenu,l=i.coords,s=i.cell,u=function(e,t){if(t&&t.locked)return function(e){var t=e.selector.selections;return[{key:"pasteCell",title:Oe("粘贴"),hotkey:ne.ua.macos?"⌘+V":"Ctrl+V"},{key:"lockCell",title:Oe("解锁"),disabled:t.every((function(e){return!e.isVertex}))}]}(e);var n=e&&e.selector.selections||[],r=e&&e.getCells()||[],a=1===n.length&&n[0].getZIndex()===r.length-1,o=1===n.length&&0===n[0].getZIndex(),i=[{key:"cutCell",title:Oe("剪切"),hotkey:ne.ua.macos?"⌘+X":"Ctrl+X",disabled:n.length<=0},{key:"copyCell",title:Oe("复制"),hotkey:ne.ua.macos?"⌘+C":"Ctrl+C",disabled:n.length<=0},{key:"pasteCell",title:Oe("粘贴"),hotkey:ne.ua.macos?"⌘+V":"Ctrl+V"},{key:"lockCell",title:Oe("锁定"),disabled:n.every((function(e){return!e.isVertex}))},{key:"removeCell",title:Oe("删除"),disabled:n.length<=0},{type:"separator"},{key:"alignment",title:Oe("对齐"),data:[{key:"AlignLeft",icon:"align-left",title:Oe("左对齐")},{key:"AlignHCenter",icon:"align-h-center",title:Oe("水平居中对齐")},{key:"AlignRight",icon:"align-right",title:Oe("右对齐")},{type:"separator"},{key:"AlignTop",icon:"align-top",title:Oe("顶对齐")},{key:"AlignVCenter",icon:"align-v-center",title:Oe("垂直居中对齐")},{key:"AlignBottom",icon:"align-bottom",title:Oe("底对齐")}]},{key:"z-index",title:Oe("层级"),data:[{key:"ToFront",icon:"to-front",title:Oe("置顶"),disabled:a},{key:"ToBack",icon:"to-back",title:Oe("置底"),disabled:o},{key:"Forward",icon:"forward",title:Oe("上移一层"),disabled:a},{key:"Backward",icon:"backward",title:Oe("下移一层"),disabled:o}]}];return i.forEach((function(t){"alignment"===t.key&&t.data.forEach((function(t){t.disabled=!e||!e.command.enable(t.key)}))})),i}(n,s);return a.a.createElement(Ha,{"data-lake_prevent_click_unselect":"true",className:"lake-show-diagram-context-menu",coords:l,data:u,onClick:function(e){var t=e.key;switch(t){case"AlignLeft":case"AlignHCenter":case"AlignRight":case"AlignTop":case"AlignVCenter":case"AlignBottom":!function(e){n.command.execute(e)}(t);break;case"ToFront":case"ToBack":case"Forward":case"Backward":!function(e){var t=n.selector.selections;t.length>0&&n.command.execute(e,{cells:t})}(t);break;case"cutCell":n.tryFocus(),document.execCommand("cut");break;case"copyCell":n.tryFocus(),document.execCommand("copy");break;case"pasteCell":!function(){if(document.queryCommandSupported("paste"))n.focus(),document.execCommand("paste");else{var e=ne.ua.macos?"⌘+V":"Ctrl+V";c.a.info(Oe("请使用系统快捷键 {hotkey} 粘贴",{hotkey:e}))}}();break;case"lockCell":o("LockSelected",{locked:!(s&&s.locked)});break;case"removeCell":o("Delete");break;default:throw new Error("unknown command ".concat(t))}o("toggleDiagramContextMenu",null)}})}function di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?di(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):di(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}li.propTypes={zoom:i.a.number,onChange:i.a.func},ya("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-show-status {\n  background: #fafafa;\n  border-top: 1px solid #d9d9d9;\n  display: flex;\n  justify-content: space-between;\n  padding: 0 16px;\n  line-height: 31px;\n}\n.lake-show-pagination {\n  font-size: 12px;\n}\n.lake-show-magnifier button {\n  border: none;\n  background: none;\n  border-radius: 3px;\n  cursor: pointer;\n  outline: none;\n  min-width: 32px;\n  padding-top: 0;\n  padding-bottom: 0;\n}\n.lake-show-magnifier button:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n"),si.defaultProps={pagination:{current:1,total:1}},si.propTypes={viewModel:i.a.shape({diagram:i.a.object,model:i.a.shape({shows:i.a.arrayOf(i.a.object),settings:i.a.object,activeIndex:i.a.number}),execCommand:i.a.func}),zoom:i.a.number},ui.propTypes={viewModel:i.a.shape({diagram:i.a.object,state:i.a.shape({diagramContextMenu:i.a.object}),execCommand:i.a.func})},ya("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-show-editor {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.lake-show-editor .lake-show-toolbar {\n  flex: 0 0 40px;\n}\n.lake-show-editor .lake-show-status {\n  flex: 0 0 32px;\n}\n.lake-show-content {\n  display: flex;\n  flex: auto;\n  width: 100%;\n  max-height: calc(100% - 40px - 32px);\n}\n.lake-show-content .lake-show-nav {\n  flex: 0 0 210px;\n}\n.lake-show-content .lake-show-canvas {\n  flex: 1 1 auto;\n  overflow: auto;\n}\n.lake-show-content .lake-show-properties {\n  flex: 0 0 285px;\n}\n.lake-show-content .lake-show-properties.hidden {\n  display: none;\n}\n.lake-show-trap {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  z-index: -1;\n  opacity: 0;\n  outline: none;\n  pointer-events: none;\n}\n");var pi=ne.HotKeyUtils.isHotkey,hi=E.i.LinkEditor;function mi(e){var t=e.viewModel,n=t.model,o=t.diagram,i=t.execCommand,c=Object(r.useRef)(),l=Object(r.useRef)();return Object(r.useEffect)((function(){function e(e){o&&o.getCell(e.target)&&"true"===e.target.contentEditable||(pi("mod+z",e)?(e.stopPropagation(),i("Undo")):pi("shift+mod+z",e)?(e.stopPropagation(),i("Redo")):pi("mod+alt+0",e)&&(i("setViewport"),e.preventDefault(),e.stopPropagation()))}return l.current.addEventListener("keydown",e,{capture:!0}),function(){l.current.removeEventListener("keydown",e,{capture:!0})}}),[i]),a.a.createElement("div",{ref:l,className:"lake-show-editor","data-counter":t.state.counter,onMouseDownCapture:function(e){e.target.closest("[data-lake_prevent_click_unselect], .lake-show-canvas")&&!e.target.closest("[data-lake_yieldable]")||setTimeout((function(){c.current.focus(),l.current.classList.add("active")}),0)}},a.a.createElement(La,{viewModel:t}),a.a.createElement("div",{className:"lake-show-content"},a.a.createElement(Ka,{viewModel:t}),a.a.createElement(Za,{viewModel:t}),a.a.createElement($a,{viewModel:t}),a.a.createElement(ii,{viewModel:t}),a.a.createElement(ui,{viewModel:t})),a.a.createElement(si,{viewModel:t}),o&&a.a.createElement(hi,{diagram:o}),a.a.createElement("input",{ref:c,className:"lake-show-trap",onBlur:function(){setTimeout((function(){document.activeElement!==c.current&&l.current.classList.remove("active")}),16)},onCut:function(){i("cutShow")},onCopy:function(){i("copyShow")},onPaste:function(e){var t,r={text:e.clipboardData.getData("text/plain"),html:e.clipboardData.getData("text/html")};try{t=JSON.parse(r.text)}catch(e){}if(t&&"lakeshow"===t.format){var a=t.shows.map((function(e){return fi(fi({},e),{},{id:null})}));i("insertAfterShow",a,n.activeRef)}else o.command.execute("Paste",{e:e});c.current.value=""},onKeyDown:function(e){switch(e.key){case"Backspace":case"Delete":i("deleteShow");break;case"ArrowUp":var t=n.previousShow;t&&i("selectShow",t);break;case"ArrowDown":var r=n.nextShow;r&&i("selectShow",r);break;case"Enter":i("insertAfterShow");break;case"d":e.metaKey&&(i("duplicateShow"),e.preventDefault());break;case"a":e.metaKey&&(i("selectShow",n.shows),e.preventDefault())}},tabIndex:0}))}mi.propTypes={viewModel:i.a.shape({diagram:i.a.object,model:i.a.shape({previousShow:i.a.object,activeShow:i.a.object,nextShow:i.a.object,shows:i.a.array}),state:i.a.shape({counter:i.a.number}),execCommand:i.a.func})};var gi=function(){function e(t){R()(this,e),this.model=t,this.selections=this.normalize(t.settings.selected)}return O()(e,[{key:"normalize",value:function(e){var t=this.model;return[].concat(e).reduce((function(e,n){if(n.isCell)e.push(n);else{var r=t.find(n);r&&e.push(r)}return e}),[])}},{key:"select",value:function(e){var t=this.normalize(e);this.selections=t,t.every((function(e){return"show"===e.type}))&&(this.model.settings.selected=t.map((function(e){return e.id})))}},{key:"deselect",value:function(e){for(var t=this.normalize(e),n=this.selections,r=n.length-1;r>=0;r++)t.includes(n[r])&&n.splice(r,0)}}]),e}(),vi=function(){function e(){R()(this,e)}return O()(e,[{key:"read",value:function(){var e=this.items;return Promise.resolve({items:e})}},{key:"write",value:function(e){this.items=e;var t=e[0],n=t["text/html"]||t["text/plain"];return n&&Ee()(n),Promise.resolve()}}]),e}(),yi=function(){function e(t){var n=t.commander,r=t.args;R()(this,e),this.commander=n,this.args=r}return O()(e,[{key:"execute",value:function(){}},{key:"forward",value:function(){}},{key:"backward",value:function(){}}],[{key:"query",value:function(){return{disabled:!0}}}]),e}();var bi=function(e){P()(n,yi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"execute",value:function(){var e=this.commander.model,t=Y()(this.args,2),n=t[0],r=t[1],a=[],o=[];[].concat(n).forEach((function(t){var n=e.findOrCreate(t),r=Y()(n,2),i=r[0],c=r[1];a.push(i),o.push(c)}));var i=e.findReferences(a),c=e.settings.selected.concat();this.args=[a,r],this.backwardArgs=[a,i,o,c],this.forward()}},{key:"forward",value:function(){var e=this.commander,t=e.model,n=e.selector,r=e.diagram,a=Y()(this.args,2),o=a[0],i=a[1];t.insertBefore(o,i),null==r||r.selector.select([]),n.select(o)}},{key:"backward",value:function(){for(var e=this.commander,t=e.model,n=e.selector,r=Y()(this.backwardArgs,4),a=r[0],o=r[1],i=r[2],c=r[3],l=a.length-1;l>=0;l--){var s=a[l],u=o[l];i[l]>=0?t.insertBefore(s,u):t.delete(s)}i.every((function(e){return e>=0}))?n.select(a):a.every((function(e){return t.settings.selected.includes(e.id)}))&&n.select(c)}}],[{key:"query",value:function(e){return{disabled:!e.model.activeShow}}}]),n}();var ki=function(e){P()(n,bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"execute",value:function(){var e=this.commander.model,t=Y()(this.args,2),r=t[0],a=t[1],o=[].concat(r).reverse(),i=e.findIndex(a||e.activeRef);this.args=[o.reverse(),i>=0&&e.shows[i+1]||null],B()(M()(n.prototype),"execute",this).call(this)}}]),n}();var wi=function(e){P()(n,yi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){var e;R()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),L()(F()(e),"pristine",!0),e}return O()(n,[{key:"execute",value:function(){var e=this.commander,t=e.model,n=e.clipboard,r={format:"lakeshow",shows:t.findSelections()};n.write([{"text/plain":JSON.stringify(r)}]),c.a.success(Oe("幻灯片已复制到剪切板"))}}],[{key:"query",value:function(e){return{disabled:!e.model.activeShow}}}]),n}();var xi=function(e){P()(n,yi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"execute",value:function(){var e=this.commander.model,t=e.findSelections(),n=e.findReferences(t),r=t.length===e.shows.length?e.create():null;this.args=[t,r],this.backwardArgs=[t,n,r],this.forward()}},{key:"forward",value:function(){var e=this.commander,t=e.model,n=e.selector,r=Y()(this.args,2),a=r[0],o=r[1],i=t.findSibling(a);if(t.delete(a),i)n.select(i);else{var c=t.insertAfter(o);n.select(c)}}},{key:"backward",value:function(){for(var e=this.commander,t=e.model,n=e.selector,r=Y()(this.backwardArgs,3),a=r[0],o=r[1],i=r[2],c=a.length-1;c>=0;c--)t.insertBefore(a[c],o[c]);i&&t.delete(i),n.select(a)}}],[{key:"query",value:function(e){return{disabled:!e.model.activeShow}}}]),n}();var _i=function(e){P()(n,xi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"execute",value:function(){B()(M()(n.prototype),"execute",this).call(this);var e=this.commander.clipboard,t={format:"lakeshow",shows:Y()(this.args,1)[0]};e.write([{"text/plain":JSON.stringify(t)}]),c.a.success(Oe("幻灯已剪切到剪切板"))}}],[{key:"query",value:function(e){var t=e.model;return{disabled:!t.activeShow||t.shows.length<=1}}}]),n}();var Ei=function(e){P()(n,yi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){var e;R()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),L()(F()(e),"pristine",!0),e}return O()(n,[{key:"execute",value:function(){var e=this.commander.selector;e.deselect.apply(e,$()(this.args))}}],[{key:"query",value:function(e){return{disabled:e.model.shows.length>0}}}]),n}();function Ci(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ci(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ci(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Si=function(e){P()(n,yi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"execute",value:function(){var e=this.commander.model.findSelections(),t=e.map((function(e){return new Oa(Oi(Oi({},e.toJSON()),{},{id:null}))}));this.args=[t,e[e.length-1]],this.backwardArgs=[t,e],this.forward()}},{key:"forward",value:function(){var e=this.commander,t=e.model,n=e.selector,r=Y()(this.args,2),a=r[0],o=r[1];t.insertAfter(a,o),n.select(a)}},{key:"backward",value:function(){var e=this.commander,t=e.model,n=e.selector,r=Y()(this.backwardArgs,2),a=r[0],o=r[1];t.delete(a),n.select(o)}}],[{key:"query",value:function(e){return{disabled:!e.model.activeShow}}}]),n}();var Ri=function(e){P()(n,yi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){var e;R()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),L()(F()(e),"pristine",!0),e}return O()(n,[{key:"execute",value:function(){var e=this.commander.selector;e.select.apply(e,$()(this.args))}}],[{key:"query",value:function(e){return{disabled:0===e.model.shows.length}}}]),n}();var ji=function(e){P()(n,yi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"execute",value:function(){var e=this.commander.model.findSelections(!0),t=Y()(this.args,1)[0].hidden;this.args=[e,!t],this.backwardArgs=[e,t],this.forward()}},{key:"forward",value:function(){var e=this.commander.model,t=Y()(this.args,2),n=t[0],r=t[1];e.update(n,{hidden:r})}},{key:"backward",value:function(){var e=this.commander.model,t=Y()(this.backwardArgs,2),n=t[0],r=t[1];e.update(n,{hidden:r})}}],[{key:"query",value:function(e){return{disabled:!e.model.activeShow}}}]),n}();var Pi=function(e){P()(n,yi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"execute",value:function(){for(var e=Y()(this.args,2),t=e[0],n=e[1],r=[],a=function(e){var a=t[e],o=Object.keys(n).reduce((function(e,t){var n=a[t];return e[t]=null==n?null:n,e}),{});r.push(o)},o=0;o<t.length;o++)a(o);this.args=[t,n],this.backwardArgs=[t,r],this.forward()}},{key:"forward",value:function(){var e=this.commander,t=e.model,n=e.selector,r=Y()(this.args,2),a=r[0],o=r[1];t.update(a,o),n.select(a)}},{key:"backward",value:function(){var e=this.commander,t=e.model,n=e.selector,r=Y()(this.backwardArgs,2),a=r[0],o=r[1];t.update(a,o),n.select(a)}}],[{key:"query",value:function(e){return{disabled:!e.model.activeShow}}}]),n}();var Ai=function(e){P()(n,yi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){var e;R()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),L()(F()(e),"queue",!1),e}return O()(n,[{key:"execute",value:function(){var e=Y()(this.args,2),t=e[0],n=e[1];return Promise.all([].concat(t).map((function(e){var t={backgroundColor:e.fill.color,width:160,height:90,paperClip:!0};return n.clear(),n.import(e),n.paper.update({fill:e.fill}),n.exporter.blob("png",t).then((function(t){e.thumb&&e.thumb.startsWith("blob:")&&URL.revokeObjectURL(e.thumb),e.update({thumb:URL.createObjectURL(t)})}))})))}}],[{key:"query",value:function(e){return{disabled:!e.model.activeShow}}}]),n}();var Ti=function(e){P()(n,yi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){var e;R()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),L()(F()(e),"queue",!1),e}return O()(n,[{key:"execute",value:function(){this.commander.undo()}}],[{key:"query",value:function(e){var t=e.commands,n=e.index;return{disabled:!(n>=0&&n<t.length)}}}]),n}();L()(Ti,"className","Undo");var Di=function(e){P()(n,yi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){var e;R()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),L()(F()(e),"queue",!1),e}return O()(n,[{key:"execute",value:function(){this.commander.redo()}}],[{key:"query",value:function(e){var t=e.commands,n=e.index;return{disabled:!(n<t.length-1&&n>=-1)}}}]),n}();var Mi=function(e){P()(n,yi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}(n);function n(){return R()(this,n),t.apply(this,arguments)}return O()(n,[{key:"_safeExecute",value:function(e){var t=this.commander,n=t.model,r=t.selector,a=Y()(this.args,2),o=a[0],i=a[1];function c(){e(),n.update(o,i.export())}if(o===n.activeShow)return c();n.once("show:ready",c),r.select(o)}},{key:"execute",value:function(){return this._safeExecute((function(){}))}},{key:"forward",value:function(){var e=this;return this._safeExecute((function(){Y()(e.args,2)[1].command.redo()}))}},{key:"backward",value:function(){var e=this;return this._safeExecute((function(){Y()(e.args,2)[1].command.undo()}))}}],[{key:"query",value:function(e){return{disabled:!e.model.activeShow}}}]),n}(),Ni=Object.freeze({__proto__:null,InsertBeforeShow:bi,InsertAfterShow:ki,CopyShow:wi,CutShow:_i,DeleteShow:xi,DeselectShow:Ei,DuplicateShow:Si,SelectShow:Ri,ToggleShow:ji,UpdateShow:Pi,UpdateThumb:Ai,Undo:Ti,Redo:Di,SyncCommand:Mi}),Li={};Object.keys(Ni).forEach((function(e){if(Li.hasOwnProperty[e])throw new Error("command ".concat(e," already defined"));Li[e]=Ni[e]}));var Ii=function(){function e(t){var n=t.model,r=t.selector,a=t.clipboard,o=t.diagram;R()(this,e),this.model=n,this.selector=r,this.clipboard=a,this.diagram=o,this.commands=[],this.index=-1}return O()(e,[{key:"find",value:function(e){return"string"!=typeof e?null:Li[e]||Li[(t=e,t.replace(/^([a-z])/,(function(e,t){return t.toUpperCase()})))];var t}},{key:"query",value:function(e){var t=this.find(e);if(!t)throw new Error("undefined command ".concat(e));return t.query(this)}},{key:"execute",value:function(e){var t=this.commands,n=this.index,r=this.find(e),a=r.query(this),o=a.disabled;if(!o){for(var i=arguments.length,c=new Array(i>1?i-1:0),l=1;l<i;l++)c[l-1]=arguments[l];var s=new r({commander:this,args:c}),u=s.execute();return s.pristine||!1===s.queue||(this.commands=t.slice(0,n+1).concat(s),this.index+=1),u}}},{key:"redo",value:function(){var e=this.commands,t=this.index;t>=-1&&t<e.length-1&&(e[t+1].forward(),this.index+=1)}},{key:"undo",value:function(){var e=this.commands,t=this.index;t>=0&&t<e.length&&(e[t].backward(),this.index-=1)}}]),e}(),Bi=E.d.uploadImage;function zi(e){var t=e.diagram,n=e.uploader,r=e.files;if(!1!==window.isOnline)return Bi({file:r[0],uploader:n,enable:function(){return!0},callback:function(e){var n=Y()(t.paper.size,2),r=n[0],a=n[1],o=e.naturalWidth/e.naturalHeight,i=Math.min(e.naturalWidth,r,o*a),c=i/o;t.command.execute("Add",{model:{type:"image",image:e,width:i,height:c,x:(r-i)/2,y:(a-c)/2,constraints:{proportion:!0}}})}});c.a.error(Oe("网络不可用，暂时无法上传图片"))}function Fi(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ui(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ui(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Ui(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vi(e){return qi.apply(this,arguments)}function qi(){return(qi=ke()(xe.a.mark((function e(t){var n,r,a,o,i,c,l,s;return xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.uploader,r=t.model,!1!==window.isOnline){e.next=3;break}return e.abrupt("return");case 3:a=r.shows,o={},i=Fi(a),e.prev=6,i.s();case 8:if((c=i.n()).done){e.next=26;break}if((l=c.value).thumb&&l.thumb.startsWith("blob:")){e.next=12;break}return e.abrupt("continue",24);case 12:if(!(s=o[l.thumb])){e.next=16;break}return l.update({thumb:s}),e.abrupt("continue",24);case 16:return e.prev=16,e.delegateYield(xe.a.mark((function e(){var t,r,a;return xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.p.loadCanvas(l.thumb,{backgroundColor:"#fff"});case 2:return t=e.sent,e.next=5,new Promise((function(e){return t.toBlob(e,"image/jpeg")}));case 5:return r=e.sent,a=new File([r],"".concat(l.id,".jpg")),e.next=9,n.image(a);case 9:s=e.sent;case 10:case"end":return e.stop()}}),e)}))(),"t0",18);case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(16),console.error(e.t1.stack);case 23:s&&(o[l.thumb]=s,URL.revokeObjectURL(l.thumb),l.update({thumb:s}));case 24:e.next=8;break;case 26:e.next=31;break;case 28:e.prev=28,e.t2=e.catch(6),i.e(e.t2);case 31:return e.prev=31,i.f(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[6,28,31,34],[16,20]])})))).apply(this,arguments)}var Hi=ne.HotKeyUtils.isHotkey,Wi=E.d.onBeforeSave,Yi=E.d.processExportData,Gi=a.a.forwardRef((function(e,t){var n=function(e){var t=e.data,n=e.uploader,a=e.onChange,o=e.onModeChange,i=e.onSave,c=Object(r.useMemo)((function(){return new ja(t)}),[t]),l=Object(r.useMemo)((function(){return new gi(c)}),[c]),s=Object(r.useMemo)((function(){return new vi}),[]),u=Object(r.useState)(null),d=Y()(u,2),f=d[0],p=d[1],h=Object(r.useMemo)((function(){return new Ii({model:c,selector:l,clipboard:s,diagram:f})}),[c,l,s,f]),m=Object(r.useState)(0),g=Y()(m,2),v=g[0],y=g[1],b=Object(r.useState)(null),k=Y()(b,2),w=k[0],x=k[1],E=Object(r.useState)(!0),C=Y()(E,2),O=C[0],S=C[1],R=Object(r.useState)({}),j=Y()(R,2),P=j[0],A=j[1],T=Object(r.useState)({}),D=Y()(T,2),M=D[0],N=D[1],L=Object(r.useState)("edit"),I=Y()(L,2),B=I[0],z=I[1];function F(){y((function(e){return e+1}))}function U(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(h.find(e)){var a=h.execute.apply(h,[e].concat(n));Promise.resolve(a).then(F)}else if(f&&f.command.find(e)){var o;(o=f.command).execute.apply(o,[e].concat(n))}else V.apply(void 0,[e].concat(n))}function V(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];switch(e){case"toggleShowContextMenu":var o=r[0],l=r[1];A({coords:o,show:l});break;case"toggleDiagramContextMenu":var s=r[0],u=r[1];N({coords:s,cell:u});break;case"toggleProperties":S((function(e){return!e}));break;case"setViewport":var d=r[0];null!=d?f.viewport.setViewport(d):f.viewport.zoomFit();break;case"setDiagram":var h=r[0];p(h);break;case"setShadowDiagram":var m=r[0];x(m);break;case"save":Vi({uploader:n,model:c}).then((function(){return i(c)}));break;case"uploadImages":var g=r[0];zi({diagram:f,uploader:n,files:g});break;case"toggleMode":var v="play"!==B?"play":"edit";"play"===v&&f&&f.selector.select([]),z(v);break;case"setMode":var y=r[0];"play"===y&&f&&f.selector.select([]),z(y);break;default:throw new Error("unknown command ".concat(e))}}return Object(r.useEffect)((function(){var e=_()((function(){if(f&&!f.destroyed){var e=f.viewport.autoZoom,t=c.settings.viewport,n=e?null:f.viewport.toObject();c.settings.viewport=n,t===n||n&&t&&n.zoom===t.zoom||F()}}),16);function t(e){e.isModelChange&&U("syncCommand",c.activeShow,f)}function n(){setTimeout((function(){f.destroyed||(f.selector.selections.length>0?l.select(f.selector.selections):l.select(c.settings.selected),F())}))}function r(e){U("uploadImages",e.files)}if(f)return f.on("afterviewportchange",e),f.on("aftercommandexecute",t),f.on("afterselect",n),f.on("importimage",r),function(){f.off("afterviewportchange",e),f.off("aftercommandexecute",t),f.off("afterselect",n),f.off("importimage",r)}}),[f]),Object(r.useEffect)((function(){function e(e){var t=e.shows,n=e.changes.some((function(e){return["fill","body"].some((function(t){return e.hasOwnProperty(t)}))}));w&&n&&U("updateThumb",t,w),a&&a(c)}function t(){a&&a(c)}return c.on("show:update",e),c.on("show:insertBefore",t),c.on("show:insertAfter",t),c.on("show:delete",t),function(){c.off("show:delete",t),c.off("show:insertAfter",t),c.off("show:insertBefore",t),c.off("show:update",e)}}),[c,w]),Object(r.useEffect)((function(){function e(e){Hi("mod+s",e)&&(e.stopPropagation(),e.preventDefault(),U("save")),"KeyN"===e.code&&e.altKey&&e.metaKey&&(e.stopPropagation(),U("insertAfterShow"))}return document.body.addEventListener("keydown",e),function(){document.body.removeEventListener("keydown",e)}}),[h,f]),Object(r.useEffect)((function(){function e(){A({}),N({})}return window.addEventListener("blur",e),function(){return window.removeEventListener("blur",e)}}),[]),Object(r.useEffect)((function(){o&&o(B)}),[B]),{commander:h,diagram:f,model:c,selector:l,uploader:n,clipboard:s,state:{counter:v,mode:B,propertiesVisible:O,showContextMenu:P,diagramContextMenu:M},execCommand:U,queryCommand:function(e){return h.find(e)?h.query(e):f?{disabled:!f.command.enable(e)}:{disabled:!0}},queryCommandValue:function(e){},getValue:function(){var e=document.createElement("div");return c.shows.forEach((function(t){var n=document.createElement("p");n.innerHTML=t.body.reduce((function(e,t){return t.html&&e.push(t.html),e}),[]).join("\n"),e.appendChild(n),Yi(t)})),Object.assign(c.toJSON(),{text:e.textContent})},setValue:function(e){c.load(e),f&&(c.settings.viewport?f.viewport.set(c.settings.viewport):f.viewport.zoomFit()),F()},onBeforeSave:function(){return ke()(xe.a.mark((function e(){return xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.event||"beforeunload"!==window.event.type){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Vi({uploader:n,model:c});case 4:return e.next=6,Wi(f,n,!0);case 6:case"end":return e.stop()}}),e)})))()}}}(e);return Object(r.useImperativeHandle)(t,(function(){return n})),Object(r.useEffect)((function(){n.diagram&&e.onLoad(n)}),[n.diagram]),a.a.createElement(mi,{viewModel:n})}));Gi.defaultProps={onChange:function(){},onLoad:function(){},onSave:function(){}},Gi.propTypes={data:i.a.object,onLoad:i.a.func};var Xi=Object.freeze({__proto__:null,getTemplate:function(){return{title:{body:[{type:"text",html:'<div style="text-align:center;"><span style="font-size:92px; font-weight:bold; color:rgb(38, 38, 38);">'.concat(Oe("演示文稿标题"),"</span></div>"),id:"75de4ea9-f198-4231-9ec7-b91a31624c1c",x:96.42857142857156,y:304.2380952380953,zIndex:0,width:1245.9761904761904,height:168,rotate:0},{type:"text",html:'<div style="text-align:center;"><span style="color:rgb(140, 140, 140); font-size:36px;">'.concat(Oe("演示文稿副标题"),"</span></div>"),id:"f42d3ef4-4582-45dc-af95-b88a31932ac1",x:96.42857142857156,y:436.1320496484024,zIndex:1,width:1245.9761904761904,height:91,rotate:0}],fill:{color:"#ffffff"}}}}})},854:function(e,t,n){"use strict";n.r(t),n.d(t,"executeTask",(function(){return i})),n.d(t,"find",(function(){return l})),n.d(t,"stopTask",(function(){return u}));var r=n(2);function a(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){a(i,r,o,c,l,"next",e)}function l(e){a(i,r,o,c,l,"throw",e)}c(void 0)}))}}function i(){return c.apply(this,arguments)}function c(){return c=o(regeneratorRuntime.mark((function e(){var t,n,a,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n=o.length>1&&void 0!==o[1]?o[1]:{},a="/api/adminpro/migration_tasks",e.abrupt("return",Object(r.e)(a,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function l(){return s.apply(this,arguments)}function s(){return s=o(regeneratorRuntime.mark((function e(){var t,n,a,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n=o.length>1&&void 0!==o[1]?o[1]:{},a="/api/adminpro/migration_tasks",e.abrupt("return",Object(r.c)(a,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function u(){return d.apply(this,arguments)}function d(){return d=o(regeneratorRuntime.mark((function e(){var t,n,a,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n=o.length>1&&void 0!==o[1]?o[1]:{},a="/api/adminpro/migration_tasks/stop",e.abrupt("return",Object(r.e)(a,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}},87:function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function a(e,t){return r.call(e,t)}function o(e){return!(e>=55296&&e<=57343)&&(!(e>=64976&&e<=65007)&&(65535!=(65535&e)&&65534!=(65535&e)&&(!(e>=0&&e<=8)&&(11!==e&&(!(e>=14&&e<=31)&&(!(e>=127&&e<=159)&&!(e>1114111)))))))}function i(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}var c=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,l=new RegExp(c.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),s=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,u=n(637);var d=/[&<>"]/,f=/[&<>"]/g,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function h(e){return p[e]}var m=/[.?*+^$[\]\\(){}|-]/g;var g=n(511);t.lib={},t.lib.mdurl=n(638),t.lib.ucmicro=n(1597),t.assign=function(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach((function(t){if(t){if("object"!=typeof t)throw new TypeError(t+"must be object");Object.keys(t).forEach((function(n){e[n]=t[n]}))}})),e},t.isString=function(e){return"[object String]"===function(e){return Object.prototype.toString.call(e)}(e)},t.has=a,t.unescapeMd=function(e){return e.indexOf("\\")<0?e:e.replace(c,"$1")},t.unescapeAll=function(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(l,(function(e,t,n){return t||function(e,t){var n=0;return a(u,t)?u[t]:35===t.charCodeAt(0)&&s.test(t)&&o(n="x"===t[1].toLowerCase()?parseInt(t.slice(2),16):parseInt(t.slice(1),10))?i(n):e}(e,n)}))},t.isValidEntityCode=o,t.fromCodePoint=i,t.escapeHtml=function(e){return d.test(e)?e.replace(f,h):e},t.arrayReplaceAt=function(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))},t.isSpace=function(e){switch(e){case 9:case 32:return!0}return!1},t.isWhiteSpace=function(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1},t.isMdAsciiPunct=function(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}},t.isPunctChar=function(e){return g.test(e)},t.escapeRE=function(e){return e.replace(m,"\\$&")},t.normalizeReference=function(e){return e.trim().replace(/\s+/g," ").toUpperCase()}},926:function(e,t,n){"use strict";function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o={formatUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Array.isArray(e)||(e=[e]);var t,n=r(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.user_id||(a.user_id=a.id)}}catch(e){n.e(e)}finally{n.f()}return e}};t.a=o},931:function(e,t,n){},932:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=_e(n(803)),a=_e(n(992)),o=_e(n(1861)),i=_e(n(1862)),c=_e(n(1863)),l=_e(n(1864)),s=_e(n(1865)),u=_e(n(1866)),d=_e(n(1867)),f=_e(n(1868)),p=_e(n(584)),h=_e(n(1869)),m=_e(n(805)),g=_e(n(1870)),v=xe(n(1871)),y=xe(n(1872)),b=_e(n(1873)),k=_e(n(1874)),w=_e(n(1875)),x=_e(n(1876)),_=_e(n(1877)),E=_e(n(995)),C=_e(n(996)),O=_e(n(1878)),S=_e(n(1879)),R=_e(n(1880)),j=_e(n(994)),P=xe(n(1881)),A=_e(n(1882)),T=_e(n(997)),D=_e(n(1883)),M=_e(n(1884)),N=_e(n(1885)),L=_e(n(1886)),I=_e(n(1887)),B=_e(n(1888)),z=_e(n(1889)),F=_e(n(1890)),U=_e(n(1891)),V=_e(n(993)),q=_e(n(1892)),H=_e(n(1893)),W=_e(n(1894)),Y=_e(n(1895)),G=_e(n(1896)),X=_e(n(1897)),K=_e(n(1898)),Z=_e(n(1899)),$=_e(n(1900)),Q=_e(n(1901)),J=xe(n(1902)),ee=_e(n(1903)),te=_e(n(1904)),ne=_e(n(1905)),re=_e(n(1906)),ae=_e(n(1907)),oe=_e(n(1908)),ie=_e(n(1909)),ce=_e(n(1910)),le=_e(n(1911)),se=_e(n(1912)),ue=xe(n(1913)),de=_e(n(998)),fe=_e(n(999)),pe=_e(n(1914)),he=_e(n(1915)),me=_e(n(1916)),ge=_e(n(1917)),ve=_e(n(1918)),ye=_e(n(1e3)),be=_e(n(1919)),ke=_e(n(1920)),we=_e(n(804));function xe(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function _e(e){return e&&e.__esModule?e:{default:e}}var Ee={version:"10.11.0",toDate:r.default,toFloat:a.default,toInt:o.default,toBoolean:i.default,equals:c.default,contains:l.default,matches:s.default,isEmail:u.default,isURL:d.default,isMACAddress:f.default,isIP:p.default,isIPRange:h.default,isFQDN:m.default,isBoolean:g.default,isAlpha:v.default,isAlphaLocales:v.locales,isAlphanumeric:y.default,isAlphanumericLocales:y.locales,isNumeric:b.default,isPort:k.default,isLowercase:w.default,isUppercase:x.default,isAscii:_.default,isFullWidth:E.default,isHalfWidth:C.default,isVariableWidth:O.default,isMultibyte:S.default,isSurrogatePair:R.default,isInt:j.default,isFloat:P.default,isFloatLocales:P.locales,isDecimal:A.default,isHexadecimal:T.default,isDivisibleBy:D.default,isHexColor:M.default,isISRC:N.default,isMD5:L.default,isHash:I.default,isJWT:B.default,isJSON:z.default,isEmpty:F.default,isLength:U.default,isByteLength:V.default,isUUID:q.default,isMongoId:H.default,isAfter:W.default,isBefore:Y.default,isIn:G.default,isCreditCard:X.default,isIdentityCard:K.default,isISIN:Z.default,isISBN:$.default,isISSN:Q.default,isMobilePhone:J.default,isMobilePhoneLocales:J.locales,isPostalCode:ue.default,isPostalCodeLocales:ue.locales,isCurrency:ee.default,isISO8601:te.default,isRFC3339:ne.default,isISO31661Alpha2:re.default,isISO31661Alpha3:ae.default,isBase64:oe.default,isDataURI:ie.default,isMagnetURI:ce.default,isMimeType:le.default,isLatLong:se.default,ltrim:de.default,rtrim:fe.default,trim:pe.default,escape:he.default,unescape:me.default,stripLow:ge.default,whitelist:ve.default,blacklist:ye.default,isWhitelisted:be.default,normalizeEmail:ke.default,toString:we.default};t.default=Ee,e.exports=t.default,e.exports.default=t.default},934:function(e,t,n){"use strict";function r(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var i=e.apply(t,n);function c(e){r(i,a,o,c,l,"next",e)}function l(e){r(i,a,o,c,l,"throw",e)}c(void 0)}))}}n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s}));var o=function(e){return new Promise((function(t){return setTimeout(t,e)}))},i=function(){var e=a(regeneratorRuntime.mark((function e(t){var n,r,i,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{retryTime:2,ms:100},r=0,i=function(){var e=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t()){e.next=10;break}if(r!==n.retryTime){e.next=4;break}return e.abrupt("return",!1);case 4:return r++,e.next=7,o(n.ms);case 7:return e.next=9,i();case 9:return e.abrupt("return",e.sent);case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=5,i();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"click";return Boolean(window.Tracert&&Tracert[e]&&"function"==typeof Tracert[e])},l=function(e,t){i((function(){return c("click")})).then((function(n){n&&Tracert.click(e,t)}))},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i((function(){return c("expo")})).then((function(n){n&&Tracert.expo(e,t)}))}},936:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var a=d(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}e.exports=function(e){for(var t=function(e,t){Object.getOwnPropertyNames(t).forEach((function(n){if("constructor"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r)}}))},n=function(e){c(n,e);var t=s(n);function n(){return i(this,n),t.apply(this,arguments)}return o(n)}(e),r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];return a.forEach((function(e){t(n.prototype,e.prototype)})),n}},937:function(e,t,n){"use strict";n(1730);var r=n(624);n(616);t.a=r.a},938:function(e,t,n){"use strict";e.exports={getSafeBlankLinkProps:function(e){return e?{target:"_blank",rel:"noopener noreferrer nofollow"}:{}},sanitizeUrl:function(e){return"string"!=typeof e||this._isURLProtocolValid(e)?e:""},_isURLProtocolValid:function(e){var t=e.toLowerCase();return!!["http:","https:","data:","dingtalk:"].some((function(e){return t.startsWith(e)}))||(!(!t.startsWith("./")&&!t.startsWith("/"))||-1===t.indexOf(":"))}}},94:function(e,t,n){},941:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),c=n(2080),l=n.n(c);n(1733);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var u=["width","height"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var a=k(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var w=["aspectRatio","preview","viewMode","dragMode","guides","autoCropArea"],x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(i,e);var t,n,r,o=y(i);function i(){return m(this,i),o.apply(this,arguments)}return t=i,n=[{key:"componentDidMount",value:function(){var e=this,t=Object.keys(this.props).filter((function(e){return w.indexOf(e)>=0})).reduce((function(t,n){return Object.assign({},t,h({},n,e.props[n]))}),{});this.cropper=new l.a(this.img,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.src!==this.props.src&&this.cropper.reset().clear().replace(e.src)}},{key:"componentWillUnmount",value:function(){this.img&&(this.cropper.destroy(),delete this.img,delete this.cropper)}},{key:"getCroppedCanvas",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props,n=t.containerWidth,r=t.cropWidth,a=t.aspectRatio,o=e.width||r||n,i=e.height||o/a,c=e.width,l=void 0===c?o:c,s=e.height,d=void 0===s?i:s,h=p(e,u);return this.cropper.getCroppedCanvas(f({width:l,height:d},h))}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.containerWidth,o=t.containerHeight,i=t.aspectRatio,c=t.src,l=t.alt,s=o||r/i;return a.a.createElement("div",{style:{width:r,height:s},className:n},a.a.createElement("img",{ref:function(t){e.img=t},src:c,alt:void 0===l?"picture":l,style:{opacity:0}}))}}],n&&g(t.prototype,n),r&&g(t,r),i}(r.Component);x.propTypes={containerWidth:i.a.number.isRequired,containerHeight:i.a.number,src:i.a.string.isRequired,cropWidth:i.a.number,className:i.a.string,alt:i.a.string,aspectRatio:i.a.number,dragMode:i.a.oneOf(["crop","move","none"]),viewMode:i.a.oneOf([0,1,2,3]),preview:i.a.string,guides:i.a.bool,autoCropArea:i.a.number},x.defaultProps={aspectRatio:4/3,dragMode:"move",viewMode:1,guides:!1,autoCropArea:1},t.a=x},95:function(e,t,n){"use strict";n(1720);var r=n(620);n(196);t.a=r.a},951:function(e,t,n){"use strict";n.r(t),n.d(t,"adminproProxy",(function(){return Rd}));var r={};n.r(r),n.d(r,"find",(function(){return ce})),n.d(r,"update",(function(){return se}));var a={};n.r(a),n.d(a,"find",(function(){return pe})),n.d(a,"sendToUsers",(function(){return me}));var o={};n.r(o),n.d(o,"find",(function(){return we})),n.d(o,"update",(function(){return _e}));var i={};n.r(i),n.d(i,"deleteURL",(function(){return je})),n.d(i,"find",(function(){return Ae})),n.d(i,"findOne",(function(){return De}));var c={};n.r(c),n.d(c,"preview",(function(){return Ie}));var l={};n.r(l),n.d(l,"find",(function(){return Ye})),n.d(l,"revertVersion",(function(){return Xe})),n.d(l,"version",(function(){return Ze})),n.d(l,"versions",(function(){return Qe}));var s={};n.r(s),n.d(s,"destroy",(function(){return ct})),n.d(s,"find",(function(){return st})),n.d(s,"restore",(function(){return dt})),n.d(s,"update",(function(){return pt}));var u={};n.r(u),n.d(u,"block",(function(){return wt})),n.d(u,"blockForSecurityOps",(function(){return _t})),n.d(u,"deletePremium",(function(){return Ct})),n.d(u,"destroy",(function(){return St})),n.d(u,"find",(function(){return jt})),n.d(u,"restore",(function(){return At})),n.d(u,"unblock",(function(){return Dt})),n.d(u,"unblockForSecurityOps",(function(){return Nt})),n.d(u,"update",(function(){return It}));var d={};n.r(d),n.d(d,"create",(function(){return qt})),n.d(d,"destroy",(function(){return Wt})),n.d(d,"find",(function(){return Gt}));var f={};n.r(f),n.d(f,"block",(function(){return en})),n.d(f,"blockForSecurityOps",(function(){return nn})),n.d(f,"destroy",(function(){return an})),n.d(f,"destroyByLogin",(function(){return cn})),n.d(f,"getTopCommentsUser",(function(){return sn})),n.d(f,"find",(function(){return dn})),n.d(f,"findOne",(function(){return pn})),n.d(f,"unblock",(function(){return mn})),n.d(f,"unblockForSecurityOps",(function(){return vn}));var p={};n.r(p),n.d(p,"docVersion",(function(){return En})),n.d(p,"find",(function(){return On})),n.d(p,"stats",(function(){return Rn})),n.d(p,"update",(function(){return Pn}));var h={};n.r(h),n.d(h,"find",(function(){return Mn})),n.d(h,"stats",(function(){return Ln}));var m={};n.r(m),n.d(m,"encrypt",(function(){return Fn}));var g={};n.r(g),n.d(g,"find",(function(){return Gn})),n.d(g,"findOne",(function(){return Kn})),n.d(g,"stats",(function(){return $n})),n.d(g,"update",(function(){return Jn}));var v={};n.r(v),n.d(v,"auditLogs",(function(){return dr})),n.d(v,"block",(function(){return pr})),n.d(v,"blockForSecurityOps",(function(){return mr})),n.d(v,"find",(function(){return vr})),n.d(v,"findOne",(function(){return br})),n.d(v,"unblock",(function(){return wr})),n.d(v,"unblockForSecurityOps",(function(){return _r})),n.d(v,"update",(function(){return Cr}));var y={};n.r(y),n.d(y,"find",(function(){return jr}));var b={};n.r(b),n.d(b,"find",(function(){return Nr})),n.d(b,"update",(function(){return Ir}));var k={};n.r(k),n.d(k,"create",(function(){return qr})),n.d(k,"find",(function(){return Wr})),n.d(k,"update",(function(){return Gr}));var w={};n.r(w),n.d(w,"find",(function(){return $r}));var x={};n.r(x),n.d(x,"create",(function(){return oa})),n.d(x,"destroy",(function(){return ca})),n.d(x,"find",(function(){return sa})),n.d(x,"findOne",(function(){return da})),n.d(x,"update",(function(){return pa}));var _={};n.r(_),n.d(_,"create",(function(){return _a})),n.d(_,"destroy",(function(){return Ca})),n.d(_,"find",(function(){return Sa})),n.d(_,"findOne",(function(){return ja})),n.d(_,"update",(function(){return Aa}));var E={};n.r(E),n.d(E,"create",(function(){return za})),n.d(E,"destroy",(function(){return Ua})),n.d(E,"find",(function(){return qa})),n.d(E,"pause",(function(){return Wa})),n.d(E,"send",(function(){return Ga})),n.d(E,"sendSpecific",(function(){return Ka})),n.d(E,"findOne",(function(){return $a})),n.d(E,"testMail",(function(){return Ja})),n.d(E,"update",(function(){return to}));var C={};n.r(C),n.d(C,"finish",(function(){return co})),n.d(C,"find",(function(){return so})),n.d(C,"operationOrders",(function(){return fo})),n.d(C,"refund",(function(){return ho})),n.d(C,"stats",(function(){return go}));var O={};n.r(O),n.d(O,"getMonthStatementBills",(function(){return Eo})),n.d(O,"find",(function(){return Oo})),n.d(O,"stats",(function(){return Ro})),n.d(O,"update",(function(){return Po}));var S={};n.r(S),n.d(S,"pushNotification",(function(){return No})),n.d(S,"queryMPaaSApps",(function(){return Io}));var R={};n.r(R),n.d(R,"getRules",(function(){return qo})),n.d(R,"find",(function(){return Wo})),n.d(R,"findOne",(function(){return Go})),n.d(R,"updateRules",(function(){return Ko}));var j={};n.r(j),n.d(j,"block",(function(){return Jo})),n.d(j,"blockForSecurityOps",(function(){return ti})),n.d(j,"find",(function(){return ri})),n.d(j,"unblock",(function(){return oi})),n.d(j,"unblockForSecurityOps",(function(){return ci}));var P={};n.r(P),n.d(P,"create",(function(){return mi})),n.d(P,"destroy",(function(){return vi})),n.d(P,"find",(function(){return bi})),n.d(P,"update",(function(){return wi})),n.d(P,"pause",(function(){return _i})),n.d(P,"send",(function(){return Ci})),n.d(P,"findOne",(function(){return Si})),n.d(P,"testMessage",(function(){return ji}));var A={};n.r(A),n.d(A,"create",(function(){return Li})),n.d(A,"destroy",(function(){return Bi})),n.d(A,"doImport",(function(){return Fi})),n.d(A,"find",(function(){return Vi})),n.d(A,"update",(function(){return Hi}));var T={};n.r(T),n.d(T,"find",(function(){return Xi}));var D={};n.r(D),n.d(D,"batchSelect",(function(){return Qi})),n.d(D,"find",(function(){return ec}));var M={};n.r(M),n.d(M,"batch",(function(){return ac})),n.d(M,"find",(function(){return ic}));var N={};n.r(N),n.d(N,"batch",(function(){return uc})),n.d(N,"create",(function(){return fc})),n.d(N,"destroy",(function(){return hc})),n.d(N,"update",(function(){return gc}));var L={};n.r(L),n.d(L,"find",(function(){return kc}));var I={};n.r(I),n.d(I,"closeSettleOrder",(function(){return Oc})),n.d(I,"finish",(function(){return Rc})),n.d(I,"find",(function(){return Pc})),n.d(I,"refund",(function(){return Tc})),n.d(I,"stats",(function(){return Mc}));var B={};n.r(B),n.d(B,"find",(function(){return Hc})),n.d(B,"listCorps",(function(){return Yc})),n.d(B,"registerCorpCallback",(function(){return Xc})),n.d(B,"findOne",(function(){return Zc})),n.d(B,"stats",(function(){return Qc})),n.d(B,"update",(function(){return el})),n.d(B,"updateSetting",(function(){return nl})),n.d(B,"usage",(function(){return al}));var z={};n.r(z),n.d(z,"find",(function(){return ll}));var F={};n.r(F),n.d(F,"create",(function(){return hl})),n.d(F,"find",(function(){return gl})),n.d(F,"update",(function(){return yl}));var U={};n.r(U),n.d(U,"create",(function(){return El})),n.d(U,"find",(function(){return Ol})),n.d(U,"update",(function(){return Rl}));var V={};n.r(V),n.d(V,"getMonthStatementBills",(function(){return Ll})),n.d(V,"find",(function(){return Bl})),n.d(V,"stats",(function(){return Fl})),n.d(V,"update",(function(){return Vl}));var q={};n.r(q),n.d(q,"find",(function(){return Yl}));var H={};n.r(H),n.d(H,"create",(function(){return Ql})),n.d(H,"find",(function(){return es})),n.d(H,"update",(function(){return ns}));var W={};n.r(W),n.d(W,"addChannels",(function(){return ss})),n.d(W,"getChannels",(function(){return ds})),n.d(W,"find",(function(){return ps})),n.d(W,"findOne",(function(){return ms})),n.d(W,"update",(function(){return vs})),n.d(W,"updateChannels",(function(){return bs}));var Y={};n.r(Y),n.d(Y,"find",(function(){return Cs})),n.d(Y,"retry",(function(){return Ss}));var G={};n.r(G),n.d(G,"create",(function(){return Ms})),n.d(G,"destroy",(function(){return Ls})),n.d(G,"find",(function(){return Bs})),n.d(G,"update",(function(){return Fs})),n.d(G,"updateOrder",(function(){return Vs}));var X={};n.r(X),n.d(X,"create",(function(){return Ks})),n.d(X,"destroy",(function(){return $s})),n.d(X,"find",(function(){return Js})),n.d(X,"latest",(function(){return tu})),n.d(X,"update",(function(){return ru}));var K={};n.r(K),n.d(K,"destroy",(function(){return su})),n.d(K,"destroyByLogin",(function(){return du})),n.d(K,"find",(function(){return pu}));var Z={};n.r(Z),n.d(Z,"block",(function(){return Ou})),n.d(Z,"blockForSecurityOps",(function(){return Ru})),n.d(Z,"destroy",(function(){return Pu})),n.d(Z,"find",(function(){return Tu})),n.d(Z,"members",(function(){return Mu})),n.d(Z,"unblock",(function(){return Lu})),n.d(Z,"unblockForSecurityOps",(function(){return Bu})),n.d(Z,"update",(function(){return Fu})),n.d(Z,"usage",(function(){return Vu}));var $={};n.r($),n.d($,"find",(function(){return Yu}));var Q={};n.r(Q),n.d(Q,"create",(function(){return ed})),n.d(Q,"destroy",(function(){return nd})),n.d(Q,"find",(function(){return ad})),n.d(Q,"markdownToHTML",(function(){return id})),n.d(Q,"pause",(function(){return ld})),n.d(Q,"send",(function(){return ud})),n.d(Q,"sendSpecific",(function(){return fd})),n.d(Q,"findOne",(function(){return hd})),n.d(Q,"testMessage",(function(){return gd})),n.d(Q,"update",(function(){return yd}));var J={};n.r(J),n.d(J,"sendMessage",(function(){return xd}));var ee=n(1757),te=n(112),ne=n(2),re=["id"];function ae(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function oe(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function ie(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){oe(o,r,a,i,c,"next",e)}function c(e){oe(o,r,a,i,c,"throw",e)}i(void 0)}))}}function ce(){return le.apply(this,arguments)}function le(){return le=ie(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/access_tokens",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),le.apply(this,arguments)}function se(){return ue.apply(this,arguments)}function ue(){return ue=ie(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=ae(t,re),o="/api/adminpro/access_tokens/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),ue.apply(this,arguments)}function de(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function fe(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){de(o,r,a,i,c,"next",e)}function c(e){de(o,r,a,i,c,"throw",e)}i(void 0)}))}}function pe(){return he.apply(this,arguments)}function he(){return he=fe(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/activities",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),he.apply(this,arguments)}function me(){return ge.apply(this,arguments)}function ge(){return ge=fe(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/activities/send_to_users",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),ge.apply(this,arguments)}var ve=["id"];function ye(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function be(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function ke(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){be(o,r,a,i,c,"next",e)}function c(e){be(o,r,a,i,c,"throw",e)}i(void 0)}))}}function we(){return xe.apply(this,arguments)}function xe(){return xe=ke(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/applications",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),xe.apply(this,arguments)}function _e(){return Ee.apply(this,arguments)}function Ee(){return Ee=ke(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=ye(t,ve),o="/api/adminpro/applications/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Ee.apply(this,arguments)}var Ce=["id"];function Oe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Se(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Re(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Se(o,r,a,i,c,"next",e)}function c(e){Se(o,r,a,i,c,"throw",e)}i(void 0)}))}}function je(){return Pe.apply(this,arguments)}function Pe(){return Pe=Re(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/attachments/delete_url",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Pe.apply(this,arguments)}function Ae(){return Te.apply(this,arguments)}function Te(){return Te=Re(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/attachments",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Te.apply(this,arguments)}function De(){return Me.apply(this,arguments)}function Me(){return Me=Re(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=Oe(t,Ce),o="/api/adminpro/attachments/".concat(r),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Me.apply(this,arguments)}function Ne(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Le(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ne(o,r,a,i,c,"next",e)}function c(e){Ne(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ie(){return Be.apply(this,arguments)}function Be(){return Be=Le(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/audit_files/preview",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Be.apply(this,arguments)}var ze=["book_id"],Fe=["book_id","version_id"],Ue=["book_id","version_id"],Ve=["book_id"];function qe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function He(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function We(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){He(o,r,a,i,c,"next",e)}function c(e){He(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ye(){return Ge.apply(this,arguments)}function Ge(){return Ge=We(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.book_id,a=qe(t,ze),o="/api/adminpro/books/".concat(r,"/catalog_nodes"),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Ge.apply(this,arguments)}function Xe(){return Ke.apply(this,arguments)}function Ke(){return Ke=We(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},n=c.length>1&&void 0!==c[1]?c[1]:{},r=t.book_id,a=t.version_id,o=qe(t,Fe),i="/api/adminpro/books/".concat(r,"/catalog_versions/").concat(a,"/revert"),e.abrupt("return",Object(ne.f)(i,o,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Ke.apply(this,arguments)}function Ze(){return $e.apply(this,arguments)}function $e(){return $e=We(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},n=c.length>1&&void 0!==c[1]?c[1]:{},r=t.book_id,a=t.version_id,o=qe(t,Ue),i="/api/adminpro/books/".concat(r,"/catalog_versions/").concat(a),e.abrupt("return",Object(ne.c)(i,o,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),$e.apply(this,arguments)}function Qe(){return Je.apply(this,arguments)}function Je(){return Je=We(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.book_id,a=qe(t,Ve),o="/api/adminpro/books/".concat(r,"/catalog_versions"),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Je.apply(this,arguments)}var et=["book_id","id"],tt=["book_id"],nt=["book_id","id"],rt=["book_id","id"];function at(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ot(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function it(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ot(o,r,a,i,c,"next",e)}function c(e){ot(o,r,a,i,c,"throw",e)}i(void 0)}))}}function ct(){return lt.apply(this,arguments)}function lt(){return lt=it(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},n=c.length>1&&void 0!==c[1]?c[1]:{},r=t.book_id,a=t.id,o=at(t,et),i="/api/adminpro/books/".concat(r,"/docs/").concat(a),e.abrupt("return",Object(ne.b)(i,o,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),lt.apply(this,arguments)}function st(){return ut.apply(this,arguments)}function ut(){return ut=it(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.book_id,a=at(t,tt),o="/api/adminpro/books/".concat(r,"/docs"),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),ut.apply(this,arguments)}function dt(){return ft.apply(this,arguments)}function ft(){return ft=it(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},n=c.length>1&&void 0!==c[1]?c[1]:{},r=t.book_id,a=t.id,o=at(t,nt),i="/api/adminpro/books/".concat(r,"/docs/").concat(a,"/restore"),e.abrupt("return",Object(ne.e)(i,o,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),ft.apply(this,arguments)}function pt(){return ht.apply(this,arguments)}function ht(){return ht=it(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},n=c.length>1&&void 0!==c[1]?c[1]:{},r=t.book_id,a=t.id,o=at(t,rt),i="/api/adminpro/books/".concat(r,"/docs/").concat(a),e.abrupt("return",Object(ne.f)(i,o,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),ht.apply(this,arguments)}var mt=["id"],gt=["id"],vt=["id"];function yt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function bt(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function kt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){bt(o,r,a,i,c,"next",e)}function c(e){bt(o,r,a,i,c,"throw",e)}i(void 0)}))}}function wt(){return xt.apply(this,arguments)}function xt(){return xt=kt(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/books/block",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),xt.apply(this,arguments)}function _t(){return Et.apply(this,arguments)}function Et(){return Et=kt(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/securityops/blockBook",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Et.apply(this,arguments)}function Ct(){return Ot.apply(this,arguments)}function Ot(){return Ot=kt(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/books/delete_premium",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Ot.apply(this,arguments)}function St(){return Rt.apply(this,arguments)}function Rt(){return Rt=kt(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=yt(t,mt),o="/api/adminpro/books/".concat(r),e.abrupt("return",Object(ne.b)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Rt.apply(this,arguments)}function jt(){return Pt.apply(this,arguments)}function Pt(){return Pt=kt(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/books",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Pt.apply(this,arguments)}function At(){return Tt.apply(this,arguments)}function Tt(){return Tt=kt(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=yt(t,gt),o="/api/adminpro/books/".concat(r,"/restore"),e.abrupt("return",Object(ne.e)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Tt.apply(this,arguments)}function Dt(){return Mt.apply(this,arguments)}function Mt(){return Mt=kt(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/books/unblock",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Mt.apply(this,arguments)}function Nt(){return Lt.apply(this,arguments)}function Lt(){return Lt=kt(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/securityops/unblockBook",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Lt.apply(this,arguments)}function It(){return Bt.apply(this,arguments)}function Bt(){return Bt=kt(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=yt(t,vt),o="/api/adminpro/books/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Bt.apply(this,arguments)}var zt=["id"];function Ft(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ut(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Vt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ut(o,r,a,i,c,"next",e)}function c(e){Ut(o,r,a,i,c,"throw",e)}i(void 0)}))}}function qt(){return Ht.apply(this,arguments)}function Ht(){return Ht=Vt(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/collaborations",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Ht.apply(this,arguments)}function Wt(){return Yt.apply(this,arguments)}function Yt(){return Yt=Vt(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=Ft(t,zt),o="/api/adminpro/collaborations/".concat(r),e.abrupt("return",Object(ne.b)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Yt.apply(this,arguments)}function Gt(){return Xt.apply(this,arguments)}function Xt(){return Xt=Vt(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/collaborations",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Xt.apply(this,arguments)}var Kt=["id"],Zt=["id"];function $t(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Qt(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Jt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Qt(o,r,a,i,c,"next",e)}function c(e){Qt(o,r,a,i,c,"throw",e)}i(void 0)}))}}function en(){return tn.apply(this,arguments)}function tn(){return tn=Jt(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/comments/block",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),tn.apply(this,arguments)}function nn(){return rn.apply(this,arguments)}function rn(){return rn=Jt(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/securityops/blockComment",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),rn.apply(this,arguments)}function an(){return on.apply(this,arguments)}function on(){return on=Jt(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=$t(t,Kt),o="/api/adminpro/comments/".concat(r),e.abrupt("return",Object(ne.b)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),on.apply(this,arguments)}function cn(){return ln.apply(this,arguments)}function ln(){return ln=Jt(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/comments",e.abrupt("return",Object(ne.b)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),ln.apply(this,arguments)}function sn(){return un.apply(this,arguments)}function un(){return un=Jt(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/comments/top_comments_user",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),un.apply(this,arguments)}function dn(){return fn.apply(this,arguments)}function fn(){return fn=Jt(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/comments",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),fn.apply(this,arguments)}function pn(){return hn.apply(this,arguments)}function hn(){return hn=Jt(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=$t(t,Zt),o="/api/adminpro/comments/".concat(r),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),hn.apply(this,arguments)}function mn(){return gn.apply(this,arguments)}function gn(){return gn=Jt(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/comments/unblock",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),gn.apply(this,arguments)}function vn(){return yn.apply(this,arguments)}function yn(){return yn=Jt(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/securityops/unblockComment",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),yn.apply(this,arguments)}var bn=["id"],kn=["id"];function wn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function xn(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function _n(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){xn(o,r,a,i,c,"next",e)}function c(e){xn(o,r,a,i,c,"throw",e)}i(void 0)}))}}function En(){return Cn.apply(this,arguments)}function Cn(){return Cn=_n(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=wn(t,bn),o="/api/adminpro/content_reports/".concat(r,"/doc_version"),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Cn.apply(this,arguments)}function On(){return Sn.apply(this,arguments)}function Sn(){return Sn=_n(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/content_reports",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Sn.apply(this,arguments)}function Rn(){return jn.apply(this,arguments)}function jn(){return jn=_n(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/content_reports_stats",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),jn.apply(this,arguments)}function Pn(){return An.apply(this,arguments)}function An(){return An=_n(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=wn(t,kn),o="/api/adminpro/content_reports/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),An.apply(this,arguments)}function Tn(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Dn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Tn(o,r,a,i,c,"next",e)}function c(e){Tn(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Mn(){return Nn.apply(this,arguments)}function Nn(){return Nn=Dn(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/coupon",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Nn.apply(this,arguments)}function Ln(){return In.apply(this,arguments)}function In(){return In=Dn(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/coupon/stats",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),In.apply(this,arguments)}function Bn(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function zn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Bn(o,r,a,i,c,"next",e)}function c(e){Bn(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Fn(){return Un.apply(this,arguments)}function Un(){return Un=zn(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/crypto/encrypt",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Un.apply(this,arguments)}var Vn=["id"],qn=["id"];function Hn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Wn(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Yn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Wn(o,r,a,i,c,"next",e)}function c(e){Wn(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Gn(){return Xn.apply(this,arguments)}function Xn(){return Xn=Yn(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/doc_audits",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Xn.apply(this,arguments)}function Kn(){return Zn.apply(this,arguments)}function Zn(){return Zn=Yn(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=Hn(t,Vn),o="/api/adminpro/doc_audits/".concat(r),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Zn.apply(this,arguments)}function $n(){return Qn.apply(this,arguments)}function Qn(){return Qn=Yn(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/doc_audits/stats",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Qn.apply(this,arguments)}function Jn(){return er.apply(this,arguments)}function er(){return er=Yn(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=Hn(t,qn),o="/api/adminpro/doc_audits/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),er.apply(this,arguments)}var tr=["id"],nr=["id"],rr=["id"],ar=["id"],or=["id"],ir=["id"],cr=["id"];function lr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function sr(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function ur(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){sr(o,r,a,i,c,"next",e)}function c(e){sr(o,r,a,i,c,"throw",e)}i(void 0)}))}}function dr(){return fr.apply(this,arguments)}function fr(){return fr=ur(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=lr(t,tr),o="/api/adminpro/docs/".concat(r,"/audit_logs"),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),fr.apply(this,arguments)}function pr(){return hr.apply(this,arguments)}function hr(){return hr=ur(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=lr(t,nr),o="/api/adminpro/docs/".concat(r,"/block"),e.abrupt("return",Object(ne.e)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),hr.apply(this,arguments)}function mr(){return gr.apply(this,arguments)}function gr(){return gr=ur(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=lr(t,rr),o="/api/adminpro/securityops/blockDoc/".concat(r),e.abrupt("return",Object(ne.e)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),gr.apply(this,arguments)}function vr(){return yr.apply(this,arguments)}function yr(){return yr=ur(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/docs",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),yr.apply(this,arguments)}function br(){return kr.apply(this,arguments)}function kr(){return kr=ur(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=lr(t,ar),o="/api/adminpro/docs/".concat(r),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),kr.apply(this,arguments)}function wr(){return xr.apply(this,arguments)}function xr(){return xr=ur(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=lr(t,or),o="/api/adminpro/docs/".concat(r,"/unblock"),e.abrupt("return",Object(ne.e)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),xr.apply(this,arguments)}function _r(){return Er.apply(this,arguments)}function Er(){return Er=ur(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=lr(t,ir),o="/api/adminpro/securityops/unblockDoc/".concat(r),e.abrupt("return",Object(ne.e)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Er.apply(this,arguments)}function Cr(){return Or.apply(this,arguments)}function Or(){return Or=ur(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=lr(t,cr),o="/api/adminpro/docs/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Or.apply(this,arguments)}function Sr(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Rr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Sr(o,r,a,i,c,"next",e)}function c(e){Sr(o,r,a,i,c,"throw",e)}i(void 0)}))}}function jr(){return Pr.apply(this,arguments)}function Pr(){return Pr=Rr(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/feedbacks",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Pr.apply(this,arguments)}var Ar=["id"];function Tr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Dr(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Mr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Dr(o,r,a,i,c,"next",e)}function c(e){Dr(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Nr(){return Lr.apply(this,arguments)}function Lr(){return Lr=Mr(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/flows",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Lr.apply(this,arguments)}function Ir(){return Br.apply(this,arguments)}function Br(){return Br=Mr(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=Tr(t,Ar),o="/api/adminpro/flows/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Br.apply(this,arguments)}var zr=["id"];function Fr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ur(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Vr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ur(o,r,a,i,c,"next",e)}function c(e){Ur(o,r,a,i,c,"throw",e)}i(void 0)}))}}function qr(){return Hr.apply(this,arguments)}function Hr(){return Hr=Vr(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/hobby",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Hr.apply(this,arguments)}function Wr(){return Yr.apply(this,arguments)}function Yr(){return Yr=Vr(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/hobby",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Yr.apply(this,arguments)}function Gr(){return Xr.apply(this,arguments)}function Xr(){return Xr=Vr(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=Fr(t,zr),o="/api/adminpro/hobby/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Xr.apply(this,arguments)}function Kr(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Zr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Kr(o,r,a,i,c,"next",e)}function c(e){Kr(o,r,a,i,c,"throw",e)}i(void 0)}))}}function $r(){return Qr.apply(this,arguments)}function Qr(){return Qr=Zr(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/instance",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Qr.apply(this,arguments)}var Jr=["id"],ea=["id"],ta=["id"];function na(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ra(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function aa(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ra(o,r,a,i,c,"next",e)}function c(e){ra(o,r,a,i,c,"throw",e)}i(void 0)}))}}function oa(){return ia.apply(this,arguments)}function ia(){return ia=aa(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/list",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),ia.apply(this,arguments)}function ca(){return la.apply(this,arguments)}function la(){return la=aa(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=na(t,Jr),o="/api/adminpro/list/".concat(r),e.abrupt("return",Object(ne.b)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),la.apply(this,arguments)}function sa(){return ua.apply(this,arguments)}function ua(){return ua=aa(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/list",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),ua.apply(this,arguments)}function da(){return fa.apply(this,arguments)}function fa(){return fa=aa(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=na(t,ea),o="/api/adminpro/list/".concat(r),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),fa.apply(this,arguments)}function pa(){return ha.apply(this,arguments)}function ha(){return ha=aa(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=na(t,ta),o="/api/adminpro/list/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),ha.apply(this,arguments)}var ma=["list_id"],ga=["list_id","id"],va=["list_id"],ya=["list_id","id"],ba=["list_id","id"];function ka(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function wa(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function xa(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){wa(o,r,a,i,c,"next",e)}function c(e){wa(o,r,a,i,c,"throw",e)}i(void 0)}))}}function _a(){return Ea.apply(this,arguments)}function Ea(){return Ea=xa(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.list_id,a=ka(t,ma),o="/api/adminpro/list/".concat(r,"/users"),e.abrupt("return",Object(ne.e)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Ea.apply(this,arguments)}function Ca(){return Oa.apply(this,arguments)}function Oa(){return Oa=xa(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},n=c.length>1&&void 0!==c[1]?c[1]:{},r=t.list_id,a=t.id,o=ka(t,ga),i="/api/adminpro/list/".concat(r,"/users/").concat(a),e.abrupt("return",Object(ne.b)(i,o,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Oa.apply(this,arguments)}function Sa(){return Ra.apply(this,arguments)}function Ra(){return Ra=xa(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.list_id,a=ka(t,va),o="/api/adminpro/list/".concat(r,"/users"),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Ra.apply(this,arguments)}function ja(){return Pa.apply(this,arguments)}function Pa(){return Pa=xa(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},n=c.length>1&&void 0!==c[1]?c[1]:{},r=t.list_id,a=t.id,o=ka(t,ya),i="/api/adminpro/list/".concat(r,"/users/").concat(a),e.abrupt("return",Object(ne.c)(i,o,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Pa.apply(this,arguments)}function Aa(){return Ta.apply(this,arguments)}function Ta(){return Ta=xa(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},n=c.length>1&&void 0!==c[1]?c[1]:{},r=t.list_id,a=t.id,o=ka(t,ba),i="/api/adminpro/list/".concat(r,"/users/").concat(a),e.abrupt("return",Object(ne.f)(i,o,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Ta.apply(this,arguments)}var Da=["id"],Ma=["id"],Na=["id"];function La(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ia(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Ba(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ia(o,r,a,i,c,"next",e)}function c(e){Ia(o,r,a,i,c,"throw",e)}i(void 0)}))}}function za(){return Fa.apply(this,arguments)}function Fa(){return Fa=Ba(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/mails",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Fa.apply(this,arguments)}function Ua(){return Va.apply(this,arguments)}function Va(){return Va=Ba(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=La(t,Da),o="/api/adminpro/mails/".concat(r),e.abrupt("return",Object(ne.b)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Va.apply(this,arguments)}function qa(){return Ha.apply(this,arguments)}function Ha(){return Ha=Ba(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/mails",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Ha.apply(this,arguments)}function Wa(){return Ya.apply(this,arguments)}function Ya(){return Ya=Ba(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/mails/pause",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Ya.apply(this,arguments)}function Ga(){return Xa.apply(this,arguments)}function Xa(){return Xa=Ba(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/mails/send",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Xa.apply(this,arguments)}function Ka(){return Za.apply(this,arguments)}function Za(){return Za=Ba(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/mails/send_specific",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Za.apply(this,arguments)}function $a(){return Qa.apply(this,arguments)}function Qa(){return Qa=Ba(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=La(t,Ma),o="/api/adminpro/mails/".concat(r),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Qa.apply(this,arguments)}function Ja(){return eo.apply(this,arguments)}function eo(){return eo=Ba(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/mails/test_mail",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),eo.apply(this,arguments)}function to(){return no.apply(this,arguments)}function no(){return no=Ba(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=La(t,Na),o="/api/adminpro/mails/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),no.apply(this,arguments)}var ro=["id"];function ao(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function oo(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function io(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){oo(o,r,a,i,c,"next",e)}function c(e){oo(o,r,a,i,c,"throw",e)}i(void 0)}))}}function co(){return lo.apply(this,arguments)}function lo(){return lo=io(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=ao(t,ro),o="/api/adminpro/member_order/".concat(r,"/finish"),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),lo.apply(this,arguments)}function so(){return uo.apply(this,arguments)}function uo(){return uo=io(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/member_order",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),uo.apply(this,arguments)}function fo(){return po.apply(this,arguments)}function po(){return po=io(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/operation_orders",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),po.apply(this,arguments)}function ho(){return mo.apply(this,arguments)}function mo(){return mo=io(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/member_order/refund",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),mo.apply(this,arguments)}function go(){return vo.apply(this,arguments)}function vo(){return vo=io(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/member_order/stats",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),vo.apply(this,arguments)}var yo=["id"],bo=["id"],ko=["id"];function wo(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function xo(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function _o(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){xo(o,r,a,i,c,"next",e)}function c(e){xo(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Eo(){return Co.apply(this,arguments)}function Co(){return Co=_o(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=wo(t,yo),o="/api/adminpro/member_receipt/bill_list/".concat(r),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Co.apply(this,arguments)}function Oo(){return So.apply(this,arguments)}function So(){return So=_o(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/member_receipt",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),So.apply(this,arguments)}function Ro(){return jo.apply(this,arguments)}function jo(){return jo=_o(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=wo(t,bo),o="/api/adminpro/member_receipt/".concat(r,"/stats"),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),jo.apply(this,arguments)}function Po(){return Ao.apply(this,arguments)}function Ao(){return Ao=_o(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=wo(t,ko),o="/api/adminpro/member_receipt/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Ao.apply(this,arguments)}var To=n(854);function Do(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Mo(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Do(o,r,a,i,c,"next",e)}function c(e){Do(o,r,a,i,c,"throw",e)}i(void 0)}))}}function No(){return Lo.apply(this,arguments)}function Lo(){return Lo=Mo(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/mobile/push/notification",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Lo.apply(this,arguments)}function Io(){return Bo.apply(this,arguments)}function Bo(){return Bo=Mo(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/mobile/mpaas/apps",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Bo.apply(this,arguments)}var zo=["id"];function Fo(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Uo(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Vo(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Uo(o,r,a,i,c,"next",e)}function c(e){Uo(o,r,a,i,c,"throw",e)}i(void 0)}))}}function qo(){return Ho.apply(this,arguments)}function Ho(){return Ho=Vo(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/monitors/rules",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Ho.apply(this,arguments)}function Wo(){return Yo.apply(this,arguments)}function Yo(){return Yo=Vo(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/monitors",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Yo.apply(this,arguments)}function Go(){return Xo.apply(this,arguments)}function Xo(){return Xo=Vo(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=Fo(t,zo),o="/api/adminpro/monitors/".concat(r),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Xo.apply(this,arguments)}function Ko(){return Zo.apply(this,arguments)}function Zo(){return Zo=Vo(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/monitors/rules",e.abrupt("return",Object(ne.f)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Zo.apply(this,arguments)}function $o(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Qo(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){$o(o,r,a,i,c,"next",e)}function c(e){$o(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Jo(){return ei.apply(this,arguments)}function ei(){return ei=Qo(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/notes/block",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),ei.apply(this,arguments)}function ti(){return ni.apply(this,arguments)}function ni(){return ni=Qo(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/securityops/blockNote",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),ni.apply(this,arguments)}function ri(){return ai.apply(this,arguments)}function ai(){return ai=Qo(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/notes",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),ai.apply(this,arguments)}function oi(){return ii.apply(this,arguments)}function ii(){return ii=Qo(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/notes/unblock",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),ii.apply(this,arguments)}function ci(){return li.apply(this,arguments)}function li(){return li=Qo(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/securityops/unblockNote",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),li.apply(this,arguments)}var si=["id"],ui=["id"],di=["id"];function fi(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function pi(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function hi(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){pi(o,r,a,i,c,"next",e)}function c(e){pi(o,r,a,i,c,"throw",e)}i(void 0)}))}}function mi(){return gi.apply(this,arguments)}function gi(){return gi=hi(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/notification_tasks",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),gi.apply(this,arguments)}function vi(){return yi.apply(this,arguments)}function yi(){return yi=hi(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=fi(t,si),o="/api/adminpro/notification_tasks/".concat(r),e.abrupt("return",Object(ne.b)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),yi.apply(this,arguments)}function bi(){return ki.apply(this,arguments)}function ki(){return ki=hi(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/notification_tasks",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),ki.apply(this,arguments)}function wi(){return xi.apply(this,arguments)}function xi(){return xi=hi(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=fi(t,ui),o="/api/adminpro/notification_tasks/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),xi.apply(this,arguments)}function _i(){return Ei.apply(this,arguments)}function Ei(){return Ei=hi(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/notification_tasks/pause",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Ei.apply(this,arguments)}function Ci(){return Oi.apply(this,arguments)}function Oi(){return Oi=hi(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/notification_tasks/send",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Oi.apply(this,arguments)}function Si(){return Ri.apply(this,arguments)}function Ri(){return Ri=hi(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=fi(t,di),o="/api/adminpro/notification_tasks/".concat(r),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Ri.apply(this,arguments)}function ji(){return Pi.apply(this,arguments)}function Pi(){return Pi=hi(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/notification_tasks/test_message",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Pi.apply(this,arguments)}var Ai=["id"],Ti=["id"];function Di(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Mi(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Ni(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Mi(o,r,a,i,c,"next",e)}function c(e){Mi(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Li(){return Ii.apply(this,arguments)}function Ii(){return Ii=Ni(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/notifications",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Ii.apply(this,arguments)}function Bi(){return zi.apply(this,arguments)}function zi(){return zi=Ni(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=Di(t,Ai),o="/api/adminpro/notifications/".concat(r),e.abrupt("return",Object(ne.b)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),zi.apply(this,arguments)}function Fi(){return Ui.apply(this,arguments)}function Ui(){return Ui=Ni(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/notifications/import",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Ui.apply(this,arguments)}function Vi(){return qi.apply(this,arguments)}function qi(){return qi=Ni(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/notifications",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),qi.apply(this,arguments)}function Hi(){return Wi.apply(this,arguments)}function Wi(){return Wi=Ni(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=Di(t,Ti),o="/api/adminpro/notifications/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Wi.apply(this,arguments)}function Yi(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Gi(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Yi(o,r,a,i,c,"next",e)}function c(e){Yi(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Xi(){return Ki.apply(this,arguments)}function Ki(){return Ki=Gi(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/operate/books",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Ki.apply(this,arguments)}function Zi(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function $i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Zi(o,r,a,i,c,"next",e)}function c(e){Zi(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Qi(){return Ji.apply(this,arguments)}function Ji(){return Ji=$i(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/operate/docs/batchSelect",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Ji.apply(this,arguments)}function ec(){return tc.apply(this,arguments)}function tc(){return tc=$i(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/operate/docs",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),tc.apply(this,arguments)}function nc(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function rc(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){nc(o,r,a,i,c,"next",e)}function c(e){nc(o,r,a,i,c,"throw",e)}i(void 0)}))}}function ac(){return oc.apply(this,arguments)}function oc(){return oc=rc(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/operate/hot_lists/batch",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),oc.apply(this,arguments)}function ic(){return cc.apply(this,arguments)}function cc(){return cc=rc(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/operate/hot_lists",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),cc.apply(this,arguments)}function lc(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function sc(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){lc(o,r,a,i,c,"next",e)}function c(e){lc(o,r,a,i,c,"throw",e)}i(void 0)}))}}function uc(){return dc.apply(this,arguments)}function dc(){return dc=sc(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/operate/recommends/batch",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),dc.apply(this,arguments)}function fc(){return pc.apply(this,arguments)}function pc(){return pc=sc(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/operate/recommends",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),pc.apply(this,arguments)}function hc(){return mc.apply(this,arguments)}function mc(){return mc=sc(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/operate/recommends",e.abrupt("return",Object(ne.b)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),mc.apply(this,arguments)}function gc(){return vc.apply(this,arguments)}function vc(){return vc=sc(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/operate/recommends",e.abrupt("return",Object(ne.f)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),vc.apply(this,arguments)}function yc(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function bc(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){yc(o,r,a,i,c,"next",e)}function c(e){yc(o,r,a,i,c,"throw",e)}i(void 0)}))}}function kc(){return wc.apply(this,arguments)}function wc(){return wc=bc(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/operate/users",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),wc.apply(this,arguments)}var xc=["id"];function _c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ec(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Cc(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ec(o,r,a,i,c,"next",e)}function c(e){Ec(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Oc(){return Sc.apply(this,arguments)}function Sc(){return Sc=Cc(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/order/close_settle_order",e.abrupt("return",Object(ne.f)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Sc.apply(this,arguments)}function Rc(){return jc.apply(this,arguments)}function jc(){return jc=Cc(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=_c(t,xc),o="/api/adminpro/order/".concat(r,"/finish"),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),jc.apply(this,arguments)}function Pc(){return Ac.apply(this,arguments)}function Ac(){return Ac=Cc(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/order",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Ac.apply(this,arguments)}function Tc(){return Dc.apply(this,arguments)}function Dc(){return Dc=Cc(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/order/refund",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Dc.apply(this,arguments)}function Mc(){return Nc.apply(this,arguments)}function Nc(){return Nc=Cc(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/order/stats",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Nc.apply(this,arguments)}var Lc=["id"],Ic=["id"],Bc=["id"],zc=["id"],Fc=["id"];function Uc(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Vc(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function qc(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Vc(o,r,a,i,c,"next",e)}function c(e){Vc(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Hc(){return Wc.apply(this,arguments)}function Wc(){return Wc=qc(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/organizations",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Wc.apply(this,arguments)}function Yc(){return Gc.apply(this,arguments)}function Gc(){return Gc=qc(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=Uc(t,Lc),o="/api/adminpro/organizations/".concat(r,"/corps"),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Gc.apply(this,arguments)}function Xc(){return Kc.apply(this,arguments)}function Kc(){return Kc=qc(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=Uc(t,Ic),o="/api/adminpro/organizations/".concat(r,"/corp_register_callbacks"),e.abrupt("return",Object(ne.e)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Kc.apply(this,arguments)}function Zc(){return $c.apply(this,arguments)}function $c(){return $c=qc(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=Uc(t,Bc),o="/api/adminpro/organizations/".concat(r),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),$c.apply(this,arguments)}function Qc(){return Jc.apply(this,arguments)}function Jc(){return Jc=qc(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/organizations/stats",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Jc.apply(this,arguments)}function el(){return tl.apply(this,arguments)}function tl(){return tl=qc(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=Uc(t,zc),o="/api/adminpro/organizations/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),tl.apply(this,arguments)}function nl(){return rl.apply(this,arguments)}function rl(){return rl=qc(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/organizations/settings",e.abrupt("return",Object(ne.f)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),rl.apply(this,arguments)}function al(){return ol.apply(this,arguments)}function ol(){return ol=qc(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=Uc(t,Fc),o="/api/adminpro/organizations/".concat(r,"/usage"),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),ol.apply(this,arguments)}function il(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function cl(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){il(o,r,a,i,c,"next",e)}function c(e){il(o,r,a,i,c,"throw",e)}i(void 0)}))}}function ll(){return sl.apply(this,arguments)}function sl(){return sl=cl(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/premium_orders",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),sl.apply(this,arguments)}var ul=["id"];function dl(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function fl(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function pl(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){fl(o,r,a,i,c,"next",e)}function c(e){fl(o,r,a,i,c,"throw",e)}i(void 0)}))}}function hl(){return ml.apply(this,arguments)}function ml(){return ml=pl(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/promo",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),ml.apply(this,arguments)}function gl(){return vl.apply(this,arguments)}function vl(){return vl=pl(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/promos",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),vl.apply(this,arguments)}function yl(){return bl.apply(this,arguments)}function bl(){return bl=pl(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=dl(t,ul),o="/api/adminpro/promo/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),bl.apply(this,arguments)}var kl=["id"];function wl(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function xl(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function _l(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){xl(o,r,a,i,c,"next",e)}function c(e){xl(o,r,a,i,c,"throw",e)}i(void 0)}))}}function El(){return Cl.apply(this,arguments)}function Cl(){return Cl=_l(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/promo_batches",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Cl.apply(this,arguments)}function Ol(){return Sl.apply(this,arguments)}function Sl(){return Sl=_l(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/promo_batches",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Sl.apply(this,arguments)}function Rl(){return jl.apply(this,arguments)}function jl(){return jl=_l(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=wl(t,kl),o="/api/adminpro/promo_batches/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),jl.apply(this,arguments)}var Pl=["id"],Al=["id"],Tl=["id"];function Dl(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ml(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Nl(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ml(o,r,a,i,c,"next",e)}function c(e){Ml(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ll(){return Il.apply(this,arguments)}function Il(){return Il=Nl(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=Dl(t,Pl),o="/api/adminpro/receipt/bill_list/".concat(r),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Il.apply(this,arguments)}function Bl(){return zl.apply(this,arguments)}function zl(){return zl=Nl(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/receipt",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),zl.apply(this,arguments)}function Fl(){return Ul.apply(this,arguments)}function Ul(){return Ul=Nl(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=Dl(t,Al),o="/api/adminpro/receipt/".concat(r,"/stats"),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Ul.apply(this,arguments)}function Vl(){return ql.apply(this,arguments)}function ql(){return ql=Nl(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=Dl(t,Tl),o="/api/adminpro/receipt/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),ql.apply(this,arguments)}function Hl(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Wl(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Hl(o,r,a,i,c,"next",e)}function c(e){Hl(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Yl(){return Gl.apply(this,arguments)}function Gl(){return Gl=Wl(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/recipient",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Gl.apply(this,arguments)}var Xl=["id"];function Kl(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Zl(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function $l(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Zl(o,r,a,i,c,"next",e)}function c(e){Zl(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ql(){return Jl.apply(this,arguments)}function Jl(){return Jl=$l(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/servicifies",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Jl.apply(this,arguments)}function es(){return ts.apply(this,arguments)}function ts(){return ts=$l(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/servicifies",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),ts.apply(this,arguments)}function ns(){return rs.apply(this,arguments)}function rs(){return rs=$l(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=Kl(t,Xl),o="/api/adminpro/servicifies/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),rs.apply(this,arguments)}var as=["id"],os=["id"];function is(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function cs(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function ls(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){cs(o,r,a,i,c,"next",e)}function c(e){cs(o,r,a,i,c,"throw",e)}i(void 0)}))}}function ss(){return us.apply(this,arguments)}function us(){return us=ls(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/settings/channels",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),us.apply(this,arguments)}function ds(){return fs.apply(this,arguments)}function fs(){return fs=ls(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/settings/channels",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),fs.apply(this,arguments)}function ps(){return hs.apply(this,arguments)}function hs(){return hs=ls(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/settings",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),hs.apply(this,arguments)}function ms(){return gs.apply(this,arguments)}function gs(){return gs=ls(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=is(t,as),o="/api/adminpro/settings/".concat(r),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),gs.apply(this,arguments)}function vs(){return ys.apply(this,arguments)}function ys(){return ys=ls(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=is(t,os),o="/api/adminpro/settings/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),ys.apply(this,arguments)}function bs(){return ks.apply(this,arguments)}function ks(){return ks=ls(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/settings/channels",e.abrupt("return",Object(ne.f)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),ks.apply(this,arguments)}var ws=["id"];function xs(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function _s(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Es(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){_s(o,r,a,i,c,"next",e)}function c(e){_s(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Cs(){return Os.apply(this,arguments)}function Os(){return Os=Es(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/tasks",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Os.apply(this,arguments)}function Ss(){return Rs.apply(this,arguments)}function Rs(){return Rs=Es(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=xs(t,ws),o="/api/adminpro/tasks/".concat(r,"/retry"),e.abrupt("return",Object(ne.e)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Rs.apply(this,arguments)}var js=["id"],Ps=["id"];function As(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ts(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Ds(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ts(o,r,a,i,c,"next",e)}function c(e){Ts(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ms(){return Ns.apply(this,arguments)}function Ns(){return Ns=Ds(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/templates",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Ns.apply(this,arguments)}function Ls(){return Is.apply(this,arguments)}function Is(){return Is=Ds(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=As(t,js),o="/api/adminpro/templates/".concat(r),e.abrupt("return",Object(ne.b)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Is.apply(this,arguments)}function Bs(){return zs.apply(this,arguments)}function zs(){return zs=Ds(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/templates",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),zs.apply(this,arguments)}function Fs(){return Us.apply(this,arguments)}function Us(){return Us=Ds(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=As(t,Ps),o="/api/adminpro/templates/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Us.apply(this,arguments)}function Vs(){return qs.apply(this,arguments)}function qs(){return qs=Ds(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/templates",e.abrupt("return",Object(ne.f)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),qs.apply(this,arguments)}var Hs=["id"],Ws=["id"];function Ys(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Gs(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Xs(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Gs(o,r,a,i,c,"next",e)}function c(e){Gs(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ks(){return Zs.apply(this,arguments)}function Zs(){return Zs=Xs(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/tips",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Zs.apply(this,arguments)}function $s(){return Qs.apply(this,arguments)}function Qs(){return Qs=Xs(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=Ys(t,Hs),o="/api/adminpro/tips/".concat(r),e.abrupt("return",Object(ne.b)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Qs.apply(this,arguments)}function Js(){return eu.apply(this,arguments)}function eu(){return eu=Xs(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/tips",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),eu.apply(this,arguments)}function tu(){return nu.apply(this,arguments)}function nu(){return nu=Xs(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/tips/latest",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),nu.apply(this,arguments)}function ru(){return au.apply(this,arguments)}function au(){return au=Xs(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=Ys(t,Ws),o="/api/adminpro/tips/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),au.apply(this,arguments)}var ou=["id"];function iu(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function cu(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function lu(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){cu(o,r,a,i,c,"next",e)}function c(e){cu(o,r,a,i,c,"throw",e)}i(void 0)}))}}function su(){return uu.apply(this,arguments)}function uu(){return uu=lu(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=iu(t,ou),o="/api/adminpro/topics/".concat(r),e.abrupt("return",Object(ne.b)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),uu.apply(this,arguments)}function du(){return fu.apply(this,arguments)}function fu(){return fu=lu(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/topics",e.abrupt("return",Object(ne.b)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),fu.apply(this,arguments)}function pu(){return hu.apply(this,arguments)}function hu(){return hu=lu(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/topics",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),hu.apply(this,arguments)}var mu=["id"],gu=["id"],vu=["id"],yu=["id"],bu=["id"],ku=["id"],wu=["id"],xu=["id"];function _u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Eu(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Cu(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Eu(o,r,a,i,c,"next",e)}function c(e){Eu(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ou(){return Su.apply(this,arguments)}function Su(){return Su=Cu(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=_u(t,mu),o="/api/adminpro/users/".concat(r,"/block"),e.abrupt("return",Object(ne.e)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Su.apply(this,arguments)}function Ru(){return ju.apply(this,arguments)}function ju(){return ju=Cu(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=_u(t,gu),o="/api/adminpro/securityops/blockUser/".concat(r),e.abrupt("return",Object(ne.e)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),ju.apply(this,arguments)}function Pu(){return Au.apply(this,arguments)}function Au(){return Au=Cu(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=_u(t,vu),o="/api/adminpro/users/".concat(r),e.abrupt("return",Object(ne.b)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Au.apply(this,arguments)}function Tu(){return Du.apply(this,arguments)}function Du(){return Du=Cu(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/users",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Du.apply(this,arguments)}function Mu(){return Nu.apply(this,arguments)}function Nu(){return Nu=Cu(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=_u(t,yu),o="/api/adminpro/users/".concat(r,"/members"),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Nu.apply(this,arguments)}function Lu(){return Iu.apply(this,arguments)}function Iu(){return Iu=Cu(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=_u(t,bu),o="/api/adminpro/users/".concat(r,"/unblock"),e.abrupt("return",Object(ne.e)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Iu.apply(this,arguments)}function Bu(){return zu.apply(this,arguments)}function zu(){return zu=Cu(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=_u(t,ku),o="/api/adminpro/securityops/unblockUser/".concat(r),e.abrupt("return",Object(ne.e)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),zu.apply(this,arguments)}function Fu(){return Uu.apply(this,arguments)}function Uu(){return Uu=Cu(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=_u(t,wu),o="/api/adminpro/users/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),Uu.apply(this,arguments)}function Vu(){return qu.apply(this,arguments)}function qu(){return qu=Cu(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=_u(t,xu),o="/api/adminpro/users/".concat(r,"/usage"),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),qu.apply(this,arguments)}function Hu(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Wu(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Hu(o,r,a,i,c,"next",e)}function c(e){Hu(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Yu(){return Gu.apply(this,arguments)}function Gu(){return Gu=Wu(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/videos",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),Gu.apply(this,arguments)}var Xu=["id"],Ku=["id"],Zu=["id"];function $u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Qu(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Ju(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Qu(o,r,a,i,c,"next",e)}function c(e){Qu(o,r,a,i,c,"throw",e)}i(void 0)}))}}function ed(){return td.apply(this,arguments)}function td(){return td=Ju(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/work_messages",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),td.apply(this,arguments)}function nd(){return rd.apply(this,arguments)}function rd(){return rd=Ju(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=$u(t,Xu),o="/api/adminpro/work_messages/".concat(r),e.abrupt("return",Object(ne.b)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),rd.apply(this,arguments)}function ad(){return od.apply(this,arguments)}function od(){return od=Ju(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/work_messages",e.abrupt("return",Object(ne.c)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),od.apply(this,arguments)}function id(){return cd.apply(this,arguments)}function cd(){return cd=Ju(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/work_messages/markdown_to_html",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),cd.apply(this,arguments)}function ld(){return sd.apply(this,arguments)}function sd(){return sd=Ju(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/work_messages/pause",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),sd.apply(this,arguments)}function ud(){return dd.apply(this,arguments)}function dd(){return dd=Ju(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/work_messages/send",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),dd.apply(this,arguments)}function fd(){return pd.apply(this,arguments)}function pd(){return pd=Ju(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/work_messages/send_specific",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),pd.apply(this,arguments)}function hd(){return md.apply(this,arguments)}function md(){return md=Ju(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=$u(t,Ku),o="/api/adminpro/work_messages/".concat(r),e.abrupt("return",Object(ne.c)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),md.apply(this,arguments)}function gd(){return vd.apply(this,arguments)}function vd(){return vd=Ju(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/work_messages/test_message",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),vd.apply(this,arguments)}function yd(){return bd.apply(this,arguments)}function bd(){return bd=Ju(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},r=t.id,a=$u(t,Zu),o="/api/adminpro/work_messages/".concat(r),e.abrupt("return",Object(ne.f)(o,a,n).then((function(e){return n.useOriginResp?e:e.data})));case 5:case"end":return e.stop()}}),e)}))),bd.apply(this,arguments)}function kd(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function wd(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){kd(o,r,a,i,c,"next",e)}function c(e){kd(o,r,a,i,c,"throw",e)}i(void 0)}))}}function xd(){return _d.apply(this,arguments)}function _d(){return _d=wd(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:{},r="/api/adminpro/operate/yuque_helper/send_message",e.abrupt("return",Object(ne.e)(r,t,n).then((function(e){return n.useOriginResp?e:e.data})));case 4:case"end":return e.stop()}}),e)}))),_d.apply(this,arguments)}function Ed(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ed(Object(n),!0).forEach((function(t){Od(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ed(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Od(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sd={};Sd.accessTokens=r,Sd.activities=a,Sd.applications=o,Sd.attachments=i,Sd.auditFiles=c,Sd.bookCatalogNodes=l,Sd.bookDocs=s,Sd.books=u,Sd.collaborations=d,Sd.comments=f,Sd.contentReport=p,Sd.coupon=h,Sd.crypto=m,Sd.docAudits=g,Sd.docs=v,Sd.feedbacks=y,Sd.flows=b,Sd.hobbies=k,Sd.instance=w,Sd.list=x,Sd.listUsers=_,Sd.mails=E,Sd.memberOrder=C,Sd.memberReceipt=O,Sd.migrationTasks=To,Sd.mobile=S,Sd.monitor=R,Sd.notes=j,Sd.notificationTasks=P,Sd.notifications=A,Sd.operateBooks=T,Sd.operateDocs=D,Sd.operateHotLists=M,Sd.operateRecommends=N,Sd.operateUsers=L,Sd.order=I,Sd.organizations=B,Sd.premiumOrders=z,Sd.promo=F,Sd.promoBatches=U,Sd.receipt=V,Sd.recipients=q,Sd.servicifies=H,Sd.settings=W,Sd.tasks=Y,Sd.templates=G,Sd.tips=X,Sd.topics=K,Sd.users=Z,Sd.videos=$,Sd.workMessages=Q,Sd.yuqueHelper=J;var Rd=Cd(Cd({},Sd),{});t.default=Object(te.a)(Object(ee.a)(Sd,"adminpro"))},98:function(e,t,n){"use strict";n(835);var r=n(276),a=n(0),o=n.n(a),i=n(1),c=n.n(i),l=n(8),s=n.n(l),u=n(63),d=n.n(u),f=(n(179),["className","justify"]);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}function v(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var y=o.a.forwardRef((function(e,t){var n=e.className,a=e.justify,i=v(e,f);return o.a.createElement(r.a,g({className:s()("larkui-spin",n,{"larkui-spin-block":"block"===a}),indicator:o.a.createElement("div",{className:"larkui-spin-indicator"}),ref:t},i))}));y.propTypes=h(h({},r.a.SpinProps),{},{className:c.a.string,justify:c.a.oneOf(["block"])}),d()(y,r.a),t.a=y},984:function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},985:function(e,t,n){"use strict";var r=n(231);function a(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var i=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),i.push(a(t)+"="+a(e))})))})),o=i.join("&")}if(o){var c=e.indexOf("#");-1!==c&&(e=e.slice(0,c)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},986:function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},987:function(e,t,n){"use strict";(function(t){var r=n(231),a=n(1850),o={"Content-Type":"application/x-www-form-urlencoded"};function i(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c,l={adapter:((void 0!==t&&"[object process]"===Object.prototype.toString.call(t)||"undefined"!=typeof XMLHttpRequest)&&(c=n(988)),c),transformRequest:[function(e,t){return a(t,"Accept"),a(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(i(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(o)})),e.exports=l}).call(this,n(223))},988:function(e,t,n){"use strict";var r=n(231),a=n(1851),o=n(985),i=n(1853),c=n(1854),l=n(989);e.exports=function(e){return new Promise((function(t,s){var u=e.data,d=e.headers;r.isFormData(u)&&delete d["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",h=e.auth.password||"";d.Authorization="Basic "+btoa(p+":"+h)}if(f.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?i(f.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f};a(t,s,r),f=null}},f.onabort=function(){f&&(s(l("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){s(l("Network Error",e,null,f)),f=null},f.ontimeout=function(){s(l("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var m=n(1855),g=(e.withCredentials||c(e.url))&&e.xsrfCookieName?m.read(e.xsrfCookieName):void 0;g&&(d[e.xsrfHeaderName]=g)}if("setRequestHeader"in f&&r.forEach(d,(function(e,t){void 0===u&&"content-type"===t.toLowerCase()?delete d[t]:f.setRequestHeader(t,e)})),e.withCredentials&&(f.withCredentials=!0),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),s(e),f=null)})),void 0===u&&(u=null),f.send(u)}))}},989:function(e,t,n){"use strict";var r=n(1852);e.exports=function(e,t,n,a,o){var i=new Error(e);return r(i,t,n,a,o)}},990:function(e,t,n){"use strict";var r=n(231);e.exports=function(e,t){t=t||{};var n={};return r.forEach(["url","method","params","data"],(function(e){void 0!==t[e]&&(n[e]=t[e])})),r.forEach(["headers","auth","proxy"],(function(a){r.isObject(t[a])?n[a]=r.deepMerge(e[a],t[a]):void 0!==t[a]?n[a]=t[a]:r.isObject(e[a])?n[a]=r.deepMerge(e[a]):void 0!==e[a]&&(n[a]=e[a])})),r.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n}},991:function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},992:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),parseFloat(e)};var r,a=(r=n(60))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},993:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,r;(0,a.default)(e),"object"===o(t)?(n=t.min||0,r=t.max):(n=arguments[1],r=arguments[2]);var i=encodeURI(e).split(/%..|./).length-1;return i>=n&&(void 0===r||i<=r)};var r,a=(r=n(60))&&r.__esModule?r:{default:r};function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}e.exports=t.default,e.exports.default=t.default},994:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,a.default)(e);var n=(t=t||{}).hasOwnProperty("allow_leading_zeroes")&&!t.allow_leading_zeroes?o:i,r=!t.hasOwnProperty("min")||e>=t.min,c=!t.hasOwnProperty("max")||e<=t.max,l=!t.hasOwnProperty("lt")||e<t.lt,s=!t.hasOwnProperty("gt")||e>t.gt;return n.test(e)&&r&&c&&l&&s};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,i=/^[-+]?[0-9]+$/;e.exports=t.default,e.exports.default=t.default},995:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),o.test(e)},t.fullWidth=void 0;var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;t.fullWidth=o},996:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),o.test(e)},t.halfWidth=void 0;var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;t.halfWidth=o},997:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),o.test(e)};var r,a=(r=n(60))&&r.__esModule?r:{default:r};var o=/^[0-9A-F]+$/i;e.exports=t.default,e.exports.default=t.default},998:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,a.default)(e);var n=t?new RegExp("^[".concat(t,"]+"),"g"):/^\s+/g;return e.replace(n,"")};var r,a=(r=n(60))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},999:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,a.default)(e);for(var n=t?new RegExp("[".concat(t,"]")):/\s/,r=e.length-1;r>=0&&n.test(e[r]);r--);return r<e.length?e.substr(0,r+1):e};var r,a=(r=n(60))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default}}]);