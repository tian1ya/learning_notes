scala 的隐式转换有三种内容

* 隐式参数
* 隐式转换类型
* 隐式类

---

#### 隐式参数

```scala
object implicitGrammer extends App {

  // 不能定义两个相同类型的隐式变量
  implicit val default: Int = 100;
  implicit val defaultName: String = "Marry"

  def sayHello(implicit Name: String = "Tom") = println(s"I'm ${Name} I love you")

  def add(x: Int)(implicit y:Int) = x + y

  def sum(a: Int)(implicit b: Int, c: Int) = a + b +c

  sayHello("Jack") // I'm Jack I love you
  sayHello //I'm Marry I love you 隐式变量是优先于 默认值的

  private val res: Int = add(10)
  println(res) // 110, 第二个参数会来自于隐式变量

  private val i: Int = sum(10)
  println(i) // 210 其他两个参数就会默认使用类中的成员变量用implicit修饰的default的值。
}
```

#### 隐式类型转换

```scala
object implicitGrammer extends App {
  
	implicit def doubleToInt(double: Double): Int = {
    println("======= 调用了方法 doubleToInt ==========")
    double.toInt
  }

  // 隐式函数
  implicit val doubleToInt2 = (d: Double) => {
    println("======= 调用了方法 doubleToInt ==========")
    d.toInt
  } 
  /*
      这里 year 是Int 但是却赋值了一个 Double
      编译器会优先查看上下文上有没有实现 Double 到Int 转换的函数
      如果找不到，那么会去找是否有 Double 到Int 转换的方法
      如果都没有，那么就会报错
      如果将上面的两个都删除，那么下面的代码就会报错
   */
  val year:Int = 2018.7
  println(s"year 的结果是： ${year}")
}
```

#### 隐式类

```scala
object implicitGrammer extends App {  
// 定义隐式类，只能在静态对象(使用Object修饰)中使用
  implicit class FileRead(file: File) {
    def myRead(): String = Source.fromFile(file).mkString(",")
  }

  private val file = new File("/Users/xuxliu/Ifoods/Java/leetcode/src/main/scala/grammer/a.txt")
  private val str: String = file.myRead()
  println(str)
}
```

通过以上隐式类中，可以给已有的类中添加新的方法

```scala
/**
12   * 自定义一个RichFile类，封装File类
13   */
14 class RichFile(file:File){
15     /**
16       * 定义方法返回文件的记录行数
17       */
18     def linesCount():Int={
19         val fileReader = new FileReader(file)
20         val bufferReader = new BufferedReader(fileReader)
21 
22         var sum = 0
23         try {
24             var line = bufferReader.readLine()
25             while (line != null) {
26                 sum += 1
27                 line = bufferReader.readLine()
28             }
29         } catch {
30             case _: Exception => sum
31         } finally {
32             fileReader.close()
33             bufferReader.close()
34         }
35         sum
36     }
37 }


object ScalaImplicit {
41     /**
42       * 定义一个隐式方法，将File类型转换成RichFile类型。
43       */
44     implicit def fileToRichFile(file: File) = {
45         new RichFile(file)
46     }
47 
48     def main(args: Array[String]): Unit = {
49         val file = new File("D:\\10.Java\\IDE\\yhinzhengjieData\\Scala\\1.txt")
50 
51        val lineCounts =  file.linesCount()
52         println(s"file文件对象里面的行数是:${lineCounts}")
53     }
54 }
55 
56 
57 /*
58 以上代码输出结果如下:
59 file文件对象里面的行数是:18
60  */
```

